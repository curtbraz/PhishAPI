if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d,e){var b;if(this==null){throw new TypeError('"this" is null or not defined')}var g=Object(this);var a=g.length>>>0;if(a===0){return -1}var h=+e||0;if(Math.abs(h)===Infinity){h=0}if(h>=a){return -1}b=Math.max(h>=0?h:a-Math.abs(h),0);while(b<a){var f;if(b in g&&g[b]===d){return b}b++}return -1}}(function(){function a(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1000;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}a.prototype.diff_main=function(m,h,s,q){"undefined"==typeof q&&(q=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1000*this.Diff_Timeout);if(null==m||null==h){throw Error("Null input. (diff_main)")}if(m==h){return m?[[0,m]]:[]}"undefined"==typeof s&&(s=!0);var p=s,o=this.diff_commonPrefix(m,h);s=m.substring(0,o);m=m.substring(o);h=h.substring(o);var o=this.diff_commonSuffix(m,h),n=m.substring(m.length-o);m=m.substring(0,m.length-o);h=h.substring(0,h.length-o);m=this.diff_compute_(m,h,p,q);s&&m.unshift([0,s]);n&&m.push([0,n]);this.diff_cleanupMerge(m);return m};a.prototype.diff_compute_=function(m,h,s,q){if(!m){return[[1,h]]}if(!h){return[[-1,m]]}var p=m.length>h.length?m:h,o=m.length>h.length?h:m,n=p.indexOf(o);return -1!=n?(s=[[1,p.substring(0,n)],[0,o],[1,p.substring(n+o.length)]],m.length>h.length&&(s[0][0]=s[2][0]=-1),s):1==o.length?[[-1,m],[1,h]]:(p=this.diff_halfMatch_(m,h))?(o=p[0],m=p[1],n=p[2],h=p[3],p=p[4],o=this.diff_main(o,n,s,q),s=this.diff_main(m,h,s,q),o.concat([[0,p]],s)):s&&100<m.length&&100<h.length?this.diff_lineMode_(m,h,q):this.diff_bisect_(m,h,q)};a.prototype.diff_lineMode_=function(m,h,s){var q=this.diff_linesToChars_(m,h);m=q.chars1;h=q.chars2;q=q.lineArray;m=this.diff_main(m,h,!1,s);this.diff_charsToLines_(m,q);this.diff_cleanupSemantic(m);m.push([0,""]);for(var p=q=h=0,o="",n="";h<m.length;){switch(m[h][0]){case 1:p++;n+=m[h][1];break;case -1:q++;o+=m[h][1];break;case 0:if(1<=q&&1<=p){m.splice(h-q-p,q+p);h=h-q-p;q=this.diff_main(o,n,!1,s);for(p=q.length-1;0<=p;p--){m.splice(h,0,q[p])}h+=q.length}q=p=0;n=o=""}h++}m.pop();return m};a.prototype.diff_bisect_=function(T,S,R){for(var Q=T.length,P=S.length,O=Math.ceil((Q+P)/2),N=O,M=2*O,K=Array(M),L=Array(M),J=0;J<M;J++){K[J]=-1,L[J]=-1}K[N+1]=0;L[N+1]=0;for(var J=Q-P,E=0!=J%2,D=0,B=0,F=0,o=0,z=0;z<O&&!((new Date).getTime()>R);z++){for(var G=-z+D;G<=z-B;G+=2){var I=N+G,H;H=G==-z||G!=z&&K[I-1]<K[I+1]?K[I+1]:K[I-1]+1;for(var C=H-G;H<Q&&C<P&&T.charAt(H)==S.charAt(C);){H++,C++}K[I]=H;if(H>Q){B+=2}else{if(C>P){D+=2}else{if(E&&(I=N+J-G,0<=I&&I<M&&-1!=L[I])){var A=Q-L[I];if(H>=A){return this.diff_bisectSplit_(T,S,H,C,R)}}}}}for(G=-z+F;G<=z-o;G+=2){I=N+G;A=G==-z||G!=z&&L[I-1]<L[I+1]?L[I+1]:L[I-1]+1;for(H=A-G;A<Q&&H<P&&T.charAt(Q-A-1)==S.charAt(P-H-1);){A++,H++}L[I]=A;if(A>Q){o+=2}else{if(H>P){F+=2}else{if(!E&&(I=N+J-G,0<=I&&(I<M&&-1!=K[I])&&(H=K[I],C=N+H-I,A=Q-A,H>=A))){return this.diff_bisectSplit_(T,S,H,C,R)}}}}}return[[-1,T],[1,S]]};a.prototype.diff_bisectSplit_=function(m,h,s,q,p){var o=m.substring(0,s),n=h.substring(0,q);m=m.substring(s);h=h.substring(q);o=this.diff_main(o,n,!1,p);p=this.diff_main(m,h,!1,p);return o.concat(p)};a.prototype.diff_linesToChars_=function(m,h){function s(e){for(var d="",w=0,v=-1,u=q.length;v<e.length-1;){v=e.indexOf("\n",w);-1==v&&(v=e.length-1);var t=e.substring(w,v+1),w=v+1;(p.hasOwnProperty?p.hasOwnProperty(t):void 0!==p[t])?d+=String.fromCharCode(p[t]):(d+=String.fromCharCode(u),p[t]=u,q[u++]=t)}return d}var q=[],p={};q[0]="";var o=s(m),n=s(h);return{chars1:o,chars2:n,lineArray:q}};a.prototype.diff_charsToLines_=function(h,g){for(var p=0;p<h.length;p++){for(var o=h[p][1],n=[],m=0;m<o.length;m++){n[m]=g[o.charCodeAt(m)]}h[p][1]=n.join("")}};a.prototype.diff_commonPrefix=function(h,g){if(!h||!g||h.charAt(0)!=g.charAt(0)){return 0}for(var p=0,o=Math.min(h.length,g.length),n=o,m=0;p<n;){h.substring(m,n)==g.substring(m,n)?m=p=n:o=n,n=Math.floor((o-p)/2+p)}return n};a.prototype.diff_commonSuffix=function(h,g){if(!h||!g||h.charAt(h.length-1)!=g.charAt(g.length-1)){return 0}for(var p=0,o=Math.min(h.length,g.length),n=o,m=0;p<n;){h.substring(h.length-n,h.length-m)==g.substring(g.length-n,g.length-m)?m=p=n:o=n,n=Math.floor((o-p)/2+p)}return n};a.prototype.diff_commonOverlap_=function(h,g){var p=h.length,o=g.length;if(0==p||0==o){return 0}p>o?h=h.substring(p-o):p<o&&(g=g.substring(0,p));p=Math.min(p,o);if(h==g){return p}for(var o=0,n=1;;){var m=h.substring(p-n),m=g.indexOf(m);if(-1==m){return o}n+=m;if(0==m||h.substring(p-n)==g.substring(0,n)){o=n,n++}}};a.prototype.diff_halfMatch_=function(v,u){function t(H,G,F){for(var E=H.substring(F,F+Math.floor(H.length/4)),D=-1,C="",B,A,f,z;-1!=(D=G.indexOf(E,D+1));){var w=p.diff_commonPrefix(H.substring(F),G.substring(D)),I=p.diff_commonSuffix(H.substring(0,F),G.substring(0,D));C.length<I+w&&(C=G.substring(D-I,D)+G.substring(D,D+w),B=H.substring(0,F-I),A=H.substring(F+w),f=G.substring(0,D-I),z=G.substring(D+w))}return 2*C.length>=H.length?[B,A,f,z,C]:null}if(0>=this.Diff_Timeout){return null}var s=v.length>u.length?v:u,q=v.length>u.length?u:v;if(4>s.length||2*q.length<s.length){return null}var p=this,o=t(s,q,Math.ceil(s.length/4)),s=t(s,q,Math.ceil(s.length/2)),n;if(!o&&!s){return null}n=s?o?o[4].length>s[4].length?o:s:s:o;var m;v.length>u.length?(o=n[0],s=n[1],q=n[2],m=n[3]):(q=n[0],m=n[1],o=n[2],s=n[3]);n=n[4];return[o,s,q,m,n]};a.prototype.diff_cleanupSemantic=function(w){for(var v=!1,u=[],t=0,s=null,q=0,p=0,o=0,m=0,n=0;q<w.length;){0==w[q][0]?(u[t++]=q,p=m,o=n,n=m=0,s=w[q][1]):(1==w[q][0]?m+=w[q][1].length:n+=w[q][1].length,s&&(s.length<=Math.max(p,o)&&s.length<=Math.max(m,n))&&(w.splice(u[t-1],0,[-1,s]),w[u[t-1]+1][0]=1,t--,t--,q=0<t?u[t-1]:-1,n=m=o=p=0,s=null,v=!0)),q++}v&&this.diff_cleanupMerge(w);this.diff_cleanupSemanticLossless(w);for(q=1;q<w.length;){if(-1==w[q-1][0]&&1==w[q][0]){v=w[q-1][1];u=w[q][1];t=this.diff_commonOverlap_(v,u);s=this.diff_commonOverlap_(u,v);if(t>=s){if(t>=v.length/2||t>=u.length/2){w.splice(q,0,[0,u.substring(0,t)]),w[q-1][1]=v.substring(0,v.length-t),w[q+1][1]=u.substring(t),q++}}else{if(s>=v.length/2||s>=u.length/2){w.splice(q,0,[0,v.substring(0,s)]),w[q-1][0]=1,w[q-1][1]=u.substring(0,u.length-s),w[q+1][0]=-1,w[q+1][1]=v.substring(s),q++}}q++}q++}};a.prototype.diff_cleanupSemanticLossless=function(z){function w(J,I){if(!J||!I){return 6}var H=J.charAt(J.length-1),G=I.charAt(0),F=H.match(a.nonAlphaNumericRegex_),E=G.match(a.nonAlphaNumericRegex_),D=F&&H.match(a.whitespaceRegex_),C=E&&G.match(a.whitespaceRegex_),H=D&&H.match(a.linebreakRegex_),G=C&&G.match(a.linebreakRegex_),B=H&&J.match(a.blanklineEndRegex_),A=G&&I.match(a.blanklineStartRegex_);return B||A?5:H||G?4:F&&!D&&C?3:D||C?2:F||E?1:0}for(var v=1;v<z.length-1;){if(0==z[v-1][0]&&0==z[v+1][0]){var u=z[v-1][1],t=z[v][1],s=z[v+1][1],q=this.diff_commonSuffix(u,t);if(q){var p=t.substring(t.length-q),u=u.substring(0,u.length-q),t=p+t.substring(0,t.length-q),s=p+s}for(var q=u,p=t,n=s,o=w(u,t)+w(t,s);t.charAt(0)===s.charAt(0);){var u=u+t.charAt(0),t=t.substring(1)+s.charAt(0),s=s.substring(1),m=w(u,t)+w(t,s);m>=o&&(o=m,q=u,p=t,n=s)}z[v-1][1]!=q&&(q?z[v-1][1]=q:(z.splice(v-1,1),v--),z[v][1]=p,n?z[v+1][1]=n:(z.splice(v+1,1),v--))}v++}};a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;a.whitespaceRegex_=/\s/;a.linebreakRegex_=/[\r\n]/;a.blanklineEndRegex_=/\n\r?\n$/;a.blanklineStartRegex_=/^\r?\n\r?\n/;a.prototype.diff_cleanupEfficiency=function(w){for(var v=!1,u=[],t=0,s=null,q=0,p=!1,o=!1,m=!1,n=!1;q<w.length;){if(0==w[q][0]){w[q][1].length<this.Diff_EditCost&&(m||n)?(u[t++]=q,p=m,o=n,s=w[q][1]):(t=0,s=null),m=n=!1}else{if(-1==w[q][0]?n=!0:m=!0,s&&(p&&o&&m&&n||s.length<this.Diff_EditCost/2&&3==p+o+m+n)){w.splice(u[t-1],0,[-1,s]),w[u[t-1]+1][0]=1,t--,s=null,p&&o?(m=n=!0,t=0):(t--,q=0<t?u[t-1]:-1,m=n=!1),v=!0}}q++}v&&this.diff_cleanupMerge(w)};a.prototype.diff_cleanupMerge=function(m){m.push([0,""]);for(var h=0,s=0,q=0,p="",o="",n;h<m.length;){switch(m[h][0]){case 1:q++;o+=m[h][1];h++;break;case -1:s++;p+=m[h][1];h++;break;case 0:1<s+q?(0!==s&&0!==q&&(n=this.diff_commonPrefix(o,p),0!==n&&(0<h-s-q&&0==m[h-s-q-1][0]?m[h-s-q-1][1]+=o.substring(0,n):(m.splice(0,0,[0,o.substring(0,n)]),h++),o=o.substring(n),p=p.substring(n)),n=this.diff_commonSuffix(o,p),0!==n&&(m[h][1]=o.substring(o.length-n)+m[h][1],o=o.substring(0,o.length-n),p=p.substring(0,p.length-n))),0===s?m.splice(h-q,s+q,[1,o]):0===q?m.splice(h-s,s+q,[-1,p]):m.splice(h-s-q,s+q,[-1,p],[1,o]),h=h-s-q+(s?1:0)+(q?1:0)+1):0!==h&&0==m[h-1][0]?(m[h-1][1]+=m[h][1],m.splice(h,1)):h++,s=q=0,o=p=""}}""===m[m.length-1][1]&&m.pop();s=!1;for(h=1;h<m.length-1;){0==m[h-1][0]&&0==m[h+1][0]&&(m[h][1].substring(m[h][1].length-m[h-1][1].length)==m[h-1][1]?(m[h][1]=m[h-1][1]+m[h][1].substring(0,m[h][1].length-m[h-1][1].length),m[h+1][1]=m[h-1][1]+m[h+1][1],m.splice(h-1,1),s=!0):m[h][1].substring(0,m[h+1][1].length)==m[h+1][1]&&(m[h-1][1]+=m[h+1][1],m[h][1]=m[h][1].substring(m[h+1][1].length)+m[h+1][1],m.splice(h+1,1),s=!0)),h++}s&&this.diff_cleanupMerge(m)};a.prototype.diff_xIndex=function(m,h){var s=0,q=0,p=0,o=0,n;for(n=0;n<m.length;n++){1!==m[n][0]&&(s+=m[n][1].length);-1!==m[n][0]&&(q+=m[n][1].length);if(s>h){break}p=s;o=q}return m.length!=n&&-1===m[n][0]?o:o+(h-p)};a.prototype.diff_prettyHtml=function(v){for(var u=[],t=/&/g,s=/</g,q=/>/g,p=/\n/g,o=0;o<v.length;o++){var n=v[o][0],m=v[o][1],m=m.replace(t,"&amp;").replace(s,"&lt;").replace(q,"&gt;").replace(p,"<br>");switch(n){case 1:u[o]='<ins style="background:#e6ffe6;">'+m+"</ins>";break;case -1:u[o]='<del style="background:#ffe6e6;">'+m+"</del>";break;case 0:u[o]="<span>"+m+"</span>"}}return u.join("")};a.prototype.diff_text1=function(e){for(var d=[],f=0;f<e.length;f++){1!==e[f][0]&&(d[f]=e[f][1])}return d.join("")};a.prototype.diff_text2=function(e){for(var d=[],f=0;f<e.length;f++){-1!==e[f][0]&&(d[f]=e[f][1])}return d.join("")};a.prototype.diff_levenshtein=function(m){for(var h=0,s=0,q=0,p=0;p<m.length;p++){var o=m[p][0],n=m[p][1];switch(o){case 1:s+=n.length;break;case -1:q+=n.length;break;case 0:h+=Math.max(s,q),q=s=0}}return h+=Math.max(s,q)};a.prototype.diff_toDelta=function(e){for(var d=[],f=0;f<e.length;f++){switch(e[f][0]){case 1:d[f]="+"+encodeURI(e[f][1]);break;case -1:d[f]="-"+e[f][1].length;break;case 0:d[f]="="+e[f][1].length}}return d.join("\t").replace(/%20/g," ")};a.prototype.diff_fromDelta=function(w,v){for(var u=[],t=0,s=0,q=v.split(/\t/g),p=0;p<q.length;p++){var o=q[p].substring(1);switch(q[p].charAt(0)){case"+":try{u[t++]=[1,decodeURI(o)]}catch(m){throw Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var n=parseInt(o,10);if(isNaN(n)||0>n){throw Error("Invalid number in diff_fromDelta: "+o)}o=w.substring(s,s+=n);"="==q[p].charAt(0)?u[t++]=[0,o]:u[t++]=[-1,o];break;default:if(q[p]){throw Error("Invalid diff operation in diff_fromDelta: "+q[p])}}}if(s!=w.length){throw Error("Delta length ("+s+") does not equal source text length ("+w.length+").")}return u};a.prototype.match_main=function(e,d,f){if(null==e||null==d||null==f){throw Error("Null input. (match_main)")}f=Math.max(0,Math.min(f,e.length));return e==d?0:e.length?e.substring(f,f+d.length)==d?f:this.match_bitap_(e,d,f):-1};a.prototype.match_bitap_=function(G,F,E){function D(b,p){var h=b/F.length,f=Math.abs(E-p);return !B.Match_Distance?f?1:h:h+f/B.Match_Distance}if(F.length>this.Match_MaxBits){throw Error("Pattern too long for this browser.")}var C=this.match_alphabet_(F),B=this,A=this.Match_Threshold,z=G.indexOf(F,E);-1!=z&&(A=Math.min(D(0,z),A),z=G.lastIndexOf(F,E+F.length),-1!=z&&(A=Math.min(D(0,z),A)));for(var u=1<<F.length-1,z=-1,v,s,n=F.length+G.length,m,I=0;I<F.length;I++){v=0;for(s=n;v<s;){D(I,E+s)<=A?v=s:n=s,s=Math.floor((n-v)/2+v)}n=s;v=Math.max(1,E-s+1);var o=Math.min(E+s,G.length)+F.length;s=Array(o+2);for(s[o+1]=(1<<I)-1;o>=v;o--){var H=C[G.charAt(o-1)];s[o]=0===I?(s[o+1]<<1|1)&H:(s[o+1]<<1|1)&H|((m[o+1]|m[o])<<1|1)|m[o+1];if(s[o]&u&&(H=D(I,o-1),H<=A)){if(A=H,z=o-1,z>E){v=Math.max(1,2*E-z)}else{break}}}if(D(I+1,E)>A){break}m=s}return z};a.prototype.match_alphabet_=function(e){for(var d={},f=0;f<e.length;f++){d[e.charAt(f)]=0}for(f=0;f<e.length;f++){d[e.charAt(f)]|=1<<e.length-f-1}return d};a.prototype.patch_addContext_=function(f,e){if(0!=e.length){for(var h=e.substring(f.start2,f.start2+f.length1),g=0;e.indexOf(h)!=e.lastIndexOf(h)&&h.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;){g+=this.Patch_Margin,h=e.substring(f.start2-g,f.start2+f.length1+g)}g+=this.Patch_Margin;(h=e.substring(f.start2-g,f.start2))&&f.diffs.unshift([0,h]);(g=e.substring(f.start2+f.length1,f.start2+f.length1+g))&&f.diffs.push([0,g]);f.start1-=h.length;f.start2-=h.length;f.length1+=h.length+g.length;f.length2+=h.length+g.length}};a.prototype.patch_make=function(z,w,v){var u;if("string"==typeof z&&"string"==typeof w&&"undefined"==typeof v){u=z,w=this.diff_main(u,w,!0),2<w.length&&(this.diff_cleanupSemantic(w),this.diff_cleanupEfficiency(w))}else{if(z&&"object"==typeof z&&"undefined"==typeof w&&"undefined"==typeof v){w=z,u=this.diff_text1(w)}else{if("string"==typeof z&&w&&"object"==typeof w&&"undefined"==typeof v){u=z}else{if("string"==typeof z&&"string"==typeof w&&v&&"object"==typeof v){u=z,w=v}else{throw Error("Unknown call format to patch_make.")}}}}if(0===w.length){return[]}v=[];z=new a.patch_obj;for(var t=0,s=0,q=0,p=u,n=0;n<w.length;n++){var o=w[n][0],m=w[n][1];!t&&0!==o&&(z.start1=s,z.start2=q);switch(o){case 1:z.diffs[t++]=w[n];z.length2+=m.length;u=u.substring(0,q)+m+u.substring(q);break;case -1:z.length1+=m.length;z.diffs[t++]=w[n];u=u.substring(0,q)+u.substring(q+m.length);break;case 0:m.length<=2*this.Patch_Margin&&t&&w.length!=n+1?(z.diffs[t++]=w[n],z.length1+=m.length,z.length2+=m.length):m.length>=2*this.Patch_Margin&&t&&(this.patch_addContext_(z,p),v.push(z),z=new a.patch_obj,t=0,p=u,s=q)}1!==o&&(s+=m.length);-1!==o&&(q+=m.length)}t&&(this.patch_addContext_(z,p),v.push(z));return v};a.prototype.patch_deepCopy=function(h){for(var g=[],p=0;p<h.length;p++){var o=h[p],n=new a.patch_obj;n.diffs=[];for(var m=0;m<o.diffs.length;m++){n.diffs[m]=o.diffs[m].slice()}n.start1=o.start1;n.start2=o.start2;n.length1=o.length1;n.length2=o.length2;g[p]=n}return g};a.prototype.patch_apply=function(B,A){if(0==B.length){return[A,[]]}B=this.patch_deepCopy(B);var z=this.patch_addPadding(B);A=z+A+z;this.patch_splitMax(B);for(var w=0,v=[],u=0;u<B.length;u++){var t=B[u].start2+w,s=this.diff_text1(B[u].diffs),o,p=-1;if(s.length>this.Match_MaxBits){if(o=this.match_main(A,s.substring(0,this.Match_MaxBits),t),-1!=o&&(p=this.match_main(A,s.substring(s.length-this.Match_MaxBits),t+s.length-this.Match_MaxBits),-1==p||o>=p)){o=-1}}else{o=this.match_main(A,s,t)}if(-1==o){v[u]=!1,w-=B[u].length2-B[u].length1}else{if(v[u]=!0,w=o-t,t=-1==p?A.substring(o,o+s.length):A.substring(o,p+this.Match_MaxBits),s==t){A=A.substring(0,o)+this.diff_text2(B[u].diffs)+A.substring(o+s.length)}else{if(t=this.diff_main(s,t,!1),s.length>this.Match_MaxBits&&this.diff_levenshtein(t)/s.length>this.Patch_DeleteThreshold){v[u]=!1}else{this.diff_cleanupSemanticLossless(t);for(var s=0,n,p=0;p<B[u].diffs.length;p++){var m=B[u].diffs[p];0!==m[0]&&(n=this.diff_xIndex(t,s));1===m[0]?A=A.substring(0,o+n)+m[1]+A.substring(o+n):-1===m[0]&&(A=A.substring(0,o+n)+A.substring(o+this.diff_xIndex(t,s+m[1].length)));-1!==m[0]&&(s+=m[1].length)}}}}}A=A.substring(z.length,A.length-z.length);return[A,v]};a.prototype.patch_addPadding=function(h){for(var g=this.Patch_Margin,p="",o=1;o<=g;o++){p+=String.fromCharCode(o)}for(o=0;o<h.length;o++){h[o].start1+=g,h[o].start2+=g}var o=h[0],n=o.diffs;if(0==n.length||0!=n[0][0]){n.unshift([0,p]),o.start1-=g,o.start2-=g,o.length1+=g,o.length2+=g}else{if(g>n[0][1].length){var m=g-n[0][1].length;n[0][1]=p.substring(n[0][1].length)+n[0][1];o.start1-=m;o.start2-=m;o.length1+=m;o.length2+=m}}o=h[h.length-1];n=o.diffs;0==n.length||0!=n[n.length-1][0]?(n.push([0,p]),o.length1+=g,o.length2+=g):g>n[n.length-1][1].length&&(m=g-n[n.length-1][1].length,n[n.length-1][1]+=p.substring(0,m),o.length1+=m,o.length2+=m);return p};a.prototype.patch_splitMax=function(w){for(var v=this.Match_MaxBits,u=0;u<w.length;u++){if(!(w[u].length1<=v)){var t=w[u];w.splice(u--,1);for(var s=t.start1,q=t.start2,p="";0!==t.diffs.length;){var o=new a.patch_obj,m=!0;o.start1=s-p.length;o.start2=q-p.length;""!==p&&(o.length1=o.length2=p.length,o.diffs.push([0,p]));for(;0!==t.diffs.length&&o.length1<v-this.Patch_Margin;){var p=t.diffs[0][0],n=t.diffs[0][1];1===p?(o.length2+=n.length,q+=n.length,o.diffs.push(t.diffs.shift()),m=!1):-1===p&&1==o.diffs.length&&0==o.diffs[0][0]&&n.length>2*v?(o.length1+=n.length,s+=n.length,m=!1,o.diffs.push([p,n]),t.diffs.shift()):(n=n.substring(0,v-o.length1-this.Patch_Margin),o.length1+=n.length,s+=n.length,0===p?(o.length2+=n.length,q+=n.length):m=!1,o.diffs.push([p,n]),n==t.diffs[0][1]?t.diffs.shift():t.diffs[0][1]=t.diffs[0][1].substring(n.length))}p=this.diff_text2(o.diffs);p=p.substring(p.length-this.Patch_Margin);n=this.diff_text1(t.diffs).substring(0,this.Patch_Margin);""!==n&&(o.length1+=n.length,o.length2+=n.length,0!==o.diffs.length&&0===o.diffs[o.diffs.length-1][0]?o.diffs[o.diffs.length-1][1]+=n:o.diffs.push([0,n]));m||w.splice(++u,0,o)}}}};a.prototype.patch_toText=function(e){for(var d=[],f=0;f<e.length;f++){d[f]=e[f]}return d.join("")};a.prototype.patch_fromText=function(n){var m=[];if(!n){return m}n=n.split("\n");for(var u=0,t=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;u<n.length;){var s=n[u].match(t);if(!s){throw Error("Invalid patch string: "+n[u])}var q=new a.patch_obj;m.push(q);q.start1=parseInt(s[1],10);""===s[2]?(q.start1--,q.length1=1):"0"==s[2]?q.length1=0:(q.start1--,q.length1=parseInt(s[2],10));q.start2=parseInt(s[3],10);""===s[4]?(q.start2--,q.length2=1):"0"==s[4]?q.length2=0:(q.start2--,q.length2=parseInt(s[4],10));for(u++;u<n.length;){s=n[u].charAt(0);try{var p=decodeURI(n[u].substring(1))}catch(o){throw Error("Illegal escape in patch_fromText: "+p)}if("-"==s){q.diffs.push([-1,p])}else{if("+"==s){q.diffs.push([1,p])}else{if(" "==s){q.diffs.push([0,p])}else{if("@"==s){break}else{if(""!==s){throw Error('Invalid patch mode "'+s+'" in: '+p)}}}}}u++}}return m};a.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};a.patch_obj.prototype.toString=function(){var e,d;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;d=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;e=["@@ -"+e+" +"+d+" @@\n"];var f;for(d=0;d<this.diffs.length;d++){switch(this.diffs[d][0]){case 1:f="+";break;case -1:f="-";break;case 0:f=" "}e[d+1]=f+encodeURI(this.diffs[d][1])+"\n"}return e.join("").replace(/%20/g," ")};this.diff_match_patch=a;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0})();!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.ES6Promise=b()}(this,function(){function aN(a){return"function"==typeof a||"object"==typeof a&&null!==a}function a5(a){return"function"==typeof a}function aU(a){ar=a}function aP(a){aq=a}function aT(){return function(){return process.nextTick(a9)}}function a0(){return"undefined"!=typeof at?function(){at(a9)}:a7()}function aO(){var a=0,b=new ae(a9),d=document.createTextNode("");return b.observe(d,{characterData:!0}),function(){d.data=a=++a%2}}function aM(){var a=new MessageChannel;return a.port1.onmessage=a9,function(){return a.port2.postMessage(0)}}function a7(){var a=setTimeout;return function(){return a(a9,1)}}function a9(){for(var a=0;a<av;a+=2){var b=aG[a],d=aG[a+1];b(d),aG[a]=void 0,aG[a+1]=void 0}av=0}function a4(){try{var a=require,b=a("vertx");return at=b.runOnLoop||b.runOnContext,a0()}catch(d){return a7()}}function aW(b,f){var h=arguments,d=this,g=new this.constructor(aS);void 0===g[aR]&&aX(g);var a=d._state;return a?!function(){var e=h[a-1];aq(function(){return aJ(a,g,e,d._result)})}():ax(d,g,b,f),g}function a1(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b){return a}var d=new b(aS);return a2(d,a),d}function aS(){}function aL(){return new TypeError("You cannot resolve a promise with itself")}function a6(){return new TypeError("A promises callback cannot return that same promise.")}function ba(a){try{return a.then}catch(b){return aC.error=b,aC}}function aI(a,d,g,b){try{a.call(d,g,b)}catch(f){return f}}function aV(a,b,d){aq(function(e){var f=!1,g=aI(d,b,function(h){f||(f=!0,b!==h?a2(e,h):ah(e,h))},function(h){f||(f=!0,aZ(e,h))},"Settle: "+(e._label||" unknown promise"));!f&&g&&(f=!0,aZ(e,g))},a)}function a8(a,b){b._state===aE?ah(a,b._result):b._state===aD?aZ(a,b._result):ax(b,void 0,function(d){return a2(a,d)},function(d){return aZ(a,d)})}function aK(a,d,b){d.constructor===a.constructor&&b===aW&&d.constructor.resolve===a1?a8(a,d):b===aC?aZ(a,aC.error):void 0===b?ah(a,d):a5(b)?aV(a,d,b):ah(a,d)}function a2(a,b){a===b?aZ(a,aL()):aN(b)?aK(a,b,ba(b)):ah(a,b)}function aB(a){a._onerror&&a._onerror(a._result),ak(a)}function ah(a,b){a._state===aY&&(a._result=b,a._state=aE,0!==a._subscribers.length&&aq(ak,a))}function aZ(a,b){a._state===aY&&(a._state=aD,a._result=b,aq(aB,a))}function ax(b,f,h,d){var g=b._subscribers,a=g.length;b._onerror=null,g[a]=f,g[a+aE]=h,g[a+aD]=d,0===a&&b._state&&aq(ak,b)}function ak(b){var g=b._subscribers,m=b._state;if(0!==g.length){for(var f=void 0,h=void 0,a=b._result,d=0;d<g.length;d+=3){f=g[d],h=g[d+m],f?aJ(m,f,h,a):h(a)}b._subscribers.length=0}}function ag(){this.error=null}function an(a,b){try{return a(b)}catch(d){return au.error=d,au}}function aJ(p,e,b,d){var f=a5(b),q=void 0,m=void 0,g=void 0,h=void 0;if(f){if(q=an(b,d),q===au?(h=!0,m=q.error,q=null):g=!0,e===q){return void aZ(e,a6())}}else{q=d,g=!0}e._state!==aY||(f&&g?a2(e,q):h?aZ(e,m):p===aE?ah(e,q):p===aD&&aZ(e,q))}function az(a,b){try{b(function(f){a2(a,f)},function(f){aZ(a,f)})}catch(d){aZ(a,d)}}function al(){return aF++}function aX(a){a[aR]=aF++,a._state=void 0,a._result=void 0,a._subscribers=[]}function ab(a,b){this._instanceConstructor=a,this.promise=new a(aS),this.promise[aR]||aX(this.promise),aA(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?ah(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&ah(this.promise,this._result))):aZ(this.promise,aQ())}function aQ(){return new Error("Array Methods must be provided an Array")}function aw(a){return new ab(this,a).promise}function ay(a){var b=this;return new b(aA(a)?function(g,e){for(var f=a.length,d=0;d<f;d++){b.resolve(a[d]).then(g,e)}}:function(d,f){return f(new TypeError("You must pass an array to race."))})}function ap(a){var b=this,d=new b(aS);return aZ(d,a),d}function ao(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function am(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function af(a){this[aR]=al(),this._result=this._state=void 0,this._subscribers=[],aS!==a&&("function"!=typeof a&&ao(),this instanceof af?az(this,a):am())}function ad(){var a=void 0;if("undefined"!=typeof global){a=global}else{if("undefined"!=typeof self){a=self}else{try{a=Function("return this")()}catch(d){throw new Error("polyfill failed because global object is unavailable in this environment")}}}var f=a.Promise;if(f){var b=null;try{b=Object.prototype.toString.call(f.resolve())}catch(d){}if("[object Promise]"===b&&!f.cast){return}}a.Promise=af}var aH=void 0;aH=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var aA=aH,av=0,at=void 0,ar=void 0,aq=function(a,b){aG[av]=a,aG[av+1]=b,av+=2,2===av&&(ar?ar(a9):a3())},aj="undefined"!=typeof window?window:void 0,ai=aj||{},ae=ai.MutationObserver||ai.WebKitMutationObserver,ac="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),aa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,aG=new Array(1000),a3=void 0;a3=ac?aT():ae?aO():aa?aM():void 0===aj&&"function"==typeof require?a4():a7();var aR=Math.random().toString(36).substring(16),aY=void 0,aE=1,aD=2,aC=new ag,au=new ag,aF=0;return ab.prototype._enumerate=function(){for(var a=this.length,b=this._input,d=0;this._state===aY&&d<a;d++){this._eachEntry(b[d],d)}},ab.prototype._eachEntry=function(b,f){var h=this._instanceConstructor,d=h.resolve;if(d===a1){var g=ba(b);if(g===aW&&b._state!==aY){this._settledAt(b._state,f,b._result)}else{if("function"!=typeof g){this._remaining--,this._result[f]=b}else{if(h===af){var a=new h(aS);aK(a,b,g),this._willSettleAt(a,f)}else{this._willSettleAt(new h(function(m){return m(b)}),f)}}}}else{this._willSettleAt(d(b),f)}},ab.prototype._settledAt=function(a,d,f){var b=this.promise;b._state===aY&&(this._remaining--,a===aD?aZ(b,f):this._result[d]=f),0===this._remaining&&ah(b,this._result)},ab.prototype._willSettleAt=function(a,b){var d=this;ax(a,void 0,function(e){return d._settledAt(aE,b,e)},function(e){return d._settledAt(aD,b,e)})},af.all=aw,af.race=ay,af.resolve=a1,af.reject=ap,af._setScheduler=aU,af._setAsap=aP,af._asap=aq,af.prototype={constructor:af,then:aW,"catch":function(a){return this.then(null,a)}},af.polyfill=ad,af.Promise=af,af}),ES6Promise.polyfill();Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(b){var f=Date.CultureInfo.monthNames,a=Date.CultureInfo.abbreviatedMonthNames,e=b.toLowerCase();for(var d=0;d<f.length;d++){if(f[d].toLowerCase()==e||a[d].toLowerCase()==e){return d}}return -1};Date.getDayNumberFromName=function(b){var g=Date.CultureInfo.dayNames,a=Date.CultureInfo.abbreviatedDayNames,f=Date.CultureInfo.shortestDayNames,e=b.toLowerCase();for(var d=0;d<g.length;d++){if(g[d].toLowerCase()==e||a[d].toLowerCase()==e){return d}}return -1};Date.isLeapYear=function(a){return(((a%4===0)&&(a%100!==0))||(a%400===0))};Date.getDaysInMonth=function(a,b){return[31,(Date.isLeapYear(a)?29:28),31,30,31,30,31,31,30,31,30,31][b]};Date.getTimezoneOffset=function(a,b){return(b||false)?Date.CultureInfo.abbreviatedTimeZoneDST[a.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[a.toUpperCase()]};Date.getTimezoneAbbreviation=function(b,e){var d=(e||false)?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,a;for(a in d){if(d[a]===b){return a}}return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(a){if(isNaN(this)){throw new Error(this)}if(a instanceof Date&&!isNaN(a)){return(this>a)?1:(this<a)?-1:0}else{throw new TypeError(a)}};Date.prototype.equals=function(a){return(this.compareTo(a)===0)};Date.prototype.between=function(d,a){var b=this.getTime();return b>=d.getTime()&&b<=a.getTime()};Date.prototype.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};Date.prototype.addSeconds=function(a){return this.addMilliseconds(a*1000)};Date.prototype.addMinutes=function(a){return this.addMilliseconds(a*60000)};Date.prototype.addHours=function(a){return this.addMilliseconds(a*3600000)};Date.prototype.addDays=function(a){return this.addMilliseconds(a*86400000)};Date.prototype.addWeeks=function(a){return this.addMilliseconds(a*604800000)};Date.prototype.addMonths=function(a){var b=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+a);this.setDate(Math.min(b,this.getDaysInMonth()));return this};Date.prototype.addYears=function(a){return this.addMonths(a*12)};Date.prototype.add=function(b){if(typeof b=="number"){this._orient=b;return this}var a=b;if(a.millisecond||a.milliseconds){this.addMilliseconds(a.millisecond||a.milliseconds)}if(a.second||a.seconds){this.addSeconds(a.second||a.seconds)}if(a.minute||a.minutes){this.addMinutes(a.minute||a.minutes)}if(a.hour||a.hours){this.addHours(a.hour||a.hours)}if(a.month||a.months){this.addMonths(a.month||a.months)}if(a.year||a.years){this.addYears(a.year||a.years)}if(a.day||a.days){this.addDays(a.day||a.days)}return this};Date._validate=function(e,d,a,b){if(typeof e!="number"){throw new TypeError(e+" is not a Number.")}else{if(e<d||e>a){throw new RangeError(e+" is not a valid value for "+b+".")}}return true};Date.validateMillisecond=function(a){return Date._validate(a,0,999,"milliseconds")};Date.validateSecond=function(a){return Date._validate(a,0,59,"seconds")};Date.validateMinute=function(a){return Date._validate(a,0,59,"minutes")};Date.validateHour=function(a){return Date._validate(a,0,23,"hours")};Date.validateDay=function(d,a,b){return Date._validate(d,1,Date.getDaysInMonth(a,b),"days")};Date.validateMonth=function(a){return Date._validate(a,0,11,"months")};Date.validateYear=function(a){return Date._validate(a,1,9999,"seconds")};Date.prototype.set=function(b){var a=b;if(!a.millisecond&&a.millisecond!==0){a.millisecond=-1}if(!a.second&&a.second!==0){a.second=-1}if(!a.minute&&a.minute!==0){a.minute=-1}if(!a.hour&&a.hour!==0){a.hour=-1}if(!a.day&&a.day!==0){a.day=-1}if(!a.month&&a.month!==0){a.month=-1}if(!a.year&&a.year!==0){a.year=-1}if(a.millisecond!=-1&&Date.validateMillisecond(a.millisecond)){this.addMilliseconds(a.millisecond-this.getMilliseconds())}if(a.second!=-1&&Date.validateSecond(a.second)){this.addSeconds(a.second-this.getSeconds())}if(a.minute!=-1&&Date.validateMinute(a.minute)){this.addMinutes(a.minute-this.getMinutes())}if(a.hour!=-1&&Date.validateHour(a.hour)){this.addHours(a.hour-this.getHours())}if(a.month!==-1&&Date.validateMonth(a.month)){this.addMonths(a.month-this.getMonth())}if(a.year!=-1&&Date.validateYear(a.year)){this.addYears(a.year-this.getFullYear())}if(a.day!=-1&&Date.validateDay(a.day,this.getFullYear(),this.getMonth())){this.addDays(a.day-this.getDate())}if(a.timezone){this.setTimezone(a.timezone)}if(a.timezoneOffset){this.setTimezoneOffset(a.timezoneOffset)}return this};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return(((a%4===0)&&(a%100!==0))||(a%400===0))};Date.prototype.isWeekday=function(){return !(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(a,b){var d=(a-this.getDay()+7*(b||+1))%7;return this.addDays((d===0)?d+=7*(b||+1):d)};Date.prototype.moveToMonth=function(d,a){var b=(d-this.getMonth()+12*(a||+1))%12;return this.addMonths((b===0)?b+=12*(a||+1):b)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/86400000)};Date.prototype.getWeekOfYear=function(a){var n=this.getFullYear(),e=this.getMonth(),g=this.getDate();var p=a||Date.CultureInfo.firstDayOfWeek;var f=7+1-new Date(n,0,1).getDay();if(f==8){f=1}var b=((Date.UTC(n,e,g,0,0,0)-Date.UTC(n,0,1,0,0,0))/86400000)+1;var o=Math.floor((b-f+7)/7);if(o===p){n--;var h=7+1-new Date(n,0,1).getDay();if(h==2||h==8){o=53}else{o=52}}return o};Date.prototype.isDST=function(){console.log("isDST");return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(b){var a=this.getTimezoneOffset(),d=Number(b)*-6/10;this.addMinutes(d-a);return this};Date.prototype.setTimezone=function(a){return this.setTimezoneOffset(Date.getTimezoneOffset(a))};Date.prototype.getUTCOffset=function(){var b=this.getTimezoneOffset()*-10/6,a;if(b<0){a=(b-10000).toString();return a[0]+a.substr(2)}else{a=(b+10000).toString();return"+"+a.substr(1)}};Date.prototype.getDayName=function(a){return a?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(a){return a?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(d){var a=this;var b=function b(e){return(e.toString().length==1)?"0"+e:e};return d?d.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(e){switch(e){case"hh":return b(a.getHours()<13?a.getHours():(a.getHours()-12));case"h":return a.getHours()<13?a.getHours():(a.getHours()-12);case"HH":return b(a.getHours());case"H":return a.getHours();case"mm":return b(a.getMinutes());case"m":return a.getMinutes();case"ss":return b(a.getSeconds());case"s":return a.getSeconds();case"yyyy":return a.getFullYear();case"yy":return a.getFullYear().toString().substring(2,4);case"dddd":return a.getDayName();case"ddd":return a.getDayName(true);case"dd":return b(a.getDate());case"d":return a.getDate().toString();case"MMMM":return a.getMonthName();case"MMM":return a.getMonthName(true);case"MM":return b((a.getMonth()+1));case"M":return a.getMonth()+1;case"t":return a.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return a.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()};Date.now=function(){return new Date()};Date.today=function(){return Date.now().clearTime()};Date.prototype._orient=+1;Date.prototype.next=function(){this._orient=+1;return this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;return this};Date.prototype._is=false;Date.prototype.is=function(){this._is=true;return this};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var a={};a[this._dateElement]=this;return Date.now().add(a)};Number.prototype.ago=function(){var a={};a[this._dateElement]=this*-1;return Date.now().add(a)};(function(){var h=Date.prototype,a=Number.prototype;var s=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),q=("january february march april may june july august september october november december").split(/\s/),p=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),o;var n=function(t){return function(){if(this._is){this._is=false;return this.getDay()==t}return this.moveToDayOfWeek(t,this._orient)}};for(var g=0;g<s.length;g++){h[s[g]]=h[s[g].substring(0,3)]=n(g)}var m=function(t){return function(){if(this._is){this._is=false;return this.getMonth()===t}return this.moveToMonth(t,this._orient)}};for(var e=0;e<q.length;e++){h[q[e]]=h[q[e].substring(0,3)]=m(e)}var f=function(t){return function(){if(t.substring(t.length-1)!="s"){t+="s"}return this["add"+t](this._orient)}};var b=function(t){return function(){this._dateElement=t;return this}};for(var d=0;d<p.length;d++){o=p[d].toLowerCase();h[o]=h[o+"s"]=f(p[d]);a[o]=a[o+"s"]=b(o)}}());Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};(function(){Date.Parsing={Exception:function(n){this.message="Parse error at '"+n.substring(0,10)+" ...'"}};var a=Date.Parsing;var d=a.Operators={rtoken:function(n){return function(o){var p=o.match(n);if(p){return([p[0],o.substring(p[0].length)])}else{throw new a.Exception(o)}}},token:function(n){return function(o){return d.rtoken(new RegExp("^s*"+o+"s*"))(o)}},stoken:function(n){return d.rtoken(new RegExp("^"+n))},until:function(n){return function(o){var p=[],t=null;while(o.length){try{t=n.call(this,o)}catch(q){p.push(t[0]);o=t[1];continue}break}return[p,o]}},many:function(n){return function(o){var t=[],p=null;while(o.length){try{p=n.call(this,o)}catch(q){return[t,o]}t.push(p[0]);o=p[1]}return[t,o]}},optional:function(n){return function(o){var p=null;try{p=n.call(this,o)}catch(q){return[null,o]}return[p[0],p[1]]}},not:function(n){return function(o){try{n.call(this,o)}catch(p){return[null,o]}throw new a.Exception(o)}},ignore:function(n){return n?function(o){var p=null;p=n.call(this,o);return[null,p[1]]}:null},product:function(){var o=arguments[0],p=Array.prototype.slice.call(arguments,1),q=[];for(var n=0;n<o.length;n++){q.push(d.each(o[n],p))}return q},cache:function(p){var n={},o=null;return function(q){try{o=n[q]=(n[q]||p.call(this,q))}catch(t){o=n[q]=t}if(o instanceof a.Exception){throw o}else{return o}}},any:function(){var n=arguments;return function(p){var q=null;for(var o=0;o<n.length;o++){if(n[o]==null){continue}try{q=(n[o].call(this,p))}catch(t){q=null}if(q){return q}}throw new a.Exception(p)}},each:function(){var n=arguments;return function(p){var u=[],q=null;for(var o=0;o<n.length;o++){if(n[o]==null){continue}try{q=(n[o].call(this,p))}catch(t){throw new a.Exception(p)}u.push(q[0]);p=q[1]}return[u,p]}},all:function(){var o=arguments,n=n;return n.each(n.optional(o))},sequence:function(n,o,p){o=o||d.rtoken(/^\s*/);p=p||null;if(n.length==1){return n[0]}return function(w){var z=null,A=null;var C=[];for(var v=0;v<n.length;v++){try{z=n[v].call(this,w)}catch(B){break}C.push(z[0]);try{A=o.call(this,z[1])}catch(u){A=null;break}w=A[1]}if(!z){throw new a.Exception(w)}if(A){throw new a.Exception(A[1])}if(p){try{z=p.call(this,z[1])}catch(t){throw new a.Exception(z[1])}}return[C,(z?z[1]:w)]}},between:function(o,q,n){n=n||o;var s=d.each(d.ignore(o),q,d.ignore(n));return function(p){var t=s.call(this,p);return[[t[0][0],r[0][2]],t[1]]}},list:function(n,o,q){o=o||d.rtoken(/^\s*/);q=q||null;return(n instanceof Array?d.each(d.product(n.slice(0,-1),d.ignore(o)),n.slice(-1),d.ignore(q)):d.each(d.many(d.each(n,d.ignore(o))),px,d.ignore(q)))},set:function(n,o,p){o=o||d.rtoken(/^\s*/);p=p||null;return function(H){var t=null,v=null,u=null,w=null,z=[[],H],G=false;for(var B=0;B<n.length;B++){u=null;v=null;t=null;G=(n.length==1);try{t=n[B].call(this,H)}catch(E){continue}w=[[t[0]],t[1]];if(t[1].length>0&&!G){try{u=o.call(this,t[1])}catch(F){G=true}}else{G=true}if(!G&&u[1].length===0){G=true}if(!G){var C=[];for(var A=0;A<n.length;A++){if(B!=A){C.push(n[A])}}v=d.set(C,o).call(this,u[1]);if(v[0].length>0){w[0]=w[0].concat(v[0]);w[1]=v[1]}}if(w[1].length<z[1].length){z=w}if(z[1].length===0){break}}if(z[0].length===0){return z}if(p){try{u=p.call(this,z[1])}catch(D){throw new a.Exception(z[1])}z[1]=u[1]}return z}},forward:function(n,o){return function(p){return n[o].call(this,p)}},replace:function(o,n){return function(p){var q=o.call(this,p);return[n,q[1]]}},process:function(o,n){return function(p){var q=o.call(this,p);return[n.call(this,q[0]),q[1]]}},min:function(n,o){return function(p){var q=o.call(this,p);if(q[0].length<n){throw new a.Exception(p)}return q}}};var m=function(n){return function(){var o=null,s=[];if(arguments.length>1){o=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){o=arguments[0]}}if(o){for(var q=0,p=o.shift();q<p.length;q++){o.unshift(p[q]);s.push(n.apply(null,o));o.shift();return s}}else{return n.apply(null,arguments)}}};var h="optional not ignore cache".split(/\s/);for(var e=0;e<h.length;e++){d[h[e]]=m(d[h[e]])}var g=function(n){return function(){if(arguments[0] instanceof Array){return n.apply(null,arguments[0])}else{return n.apply(null,arguments)}}};var f="each any all".split(/\s/);for(var b=0;b<f.length;b++){d[f[b]]=g(d[f[b]])}}());(function(){var h=function(o){var p=[];for(var g=0;g<o.length;g++){if(o[g] instanceof Array){p=p.concat(h(o[g]))}else{if(o[g]){p.push(o[g])}}}return p};Date.Grammar={};Date.Translator={hour:function(g){return function(){this.hour=Number(g)}},minute:function(g){return function(){this.minute=Number(g)}},second:function(g){return function(){this.second=Number(g)}},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase()}},timezone:function(g){return function(){var o=g.replace(/[^\d\+\-]/g,"");if(o.length){this.timezoneOffset=Number(o)}else{this.timezone=g.toLowerCase()}}},day:function(g){var o=g[0];return function(){this.day=Number(o.match(/\d+/)[0])}},month:function(g){return function(){this.month=((g.length==3)?Date.getMonthNumberFromName(g):(Number(g)-1))}},year:function(g){return function(){var o=Number(g);this.year=((g.length>2)?o:(o+(((o+2000)<Date.CultureInfo.twoDigitYearMax)?2000:1900)))}},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(g){g=(g instanceof Array)?g:[g];var o=new Date();this.year=o.getFullYear();this.month=o.getMonth();this.day=1;this.hour=0;this.minute=0;this.second=0;for(var p=0;p<g.length;p++){if(g[p]){g[p].call(this)}}this.hour=(this.meridian=="p"&&this.hour<13)?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var q=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){q.set({timezone:this.timezone})}else{if(this.timezoneOffset){q.set({timezoneOffset:this.timezoneOffset})}}return q},finish:function(g){g=(g instanceof Array)?h(g):[g];if(g.length===0){return null}for(var s=0;s<g.length;s++){if(typeof g[s]=="function"){g[s].call(this)}}if(this.now){return new Date()}var o=Date.today();var v=null;var t=!!(this.days!=null||this.orient||this.operator);if(t){var u,q,p;p=((this.orient=="past"||this.operator=="subtract")?-1:1);if(this.weekday){this.unit="day";u=(Date.getDayNumberFromName(this.weekday)-o.getDay());q=7;this.days=u?((u+(p*q))%q):(p*q)}if(this.month){this.unit="month";u=(this.month-o.getMonth());q=12;this.months=u?((u+(p*q))%q):(p*q);this.month=null}if(!this.unit){this.unit="day"}if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}if(this.unit=="week"){this.unit="day";this.value=this.value*7}this[this.unit+"s"]=this.value*p}return o.add(this)}else{if(this.meridian&&this.hour){this.hour=(this.hour<13&&this.meridian=="p")?this.hour+12:this.hour}if(this.weekday&&!this.day){this.day=(o.addDays((Date.getDayNumberFromName(this.weekday)-o.getDay()))).getDate()}if(this.month&&!this.day){this.day=1}return o.set(this)}}};var b=Date.Parsing.Operators,f=Date.Grammar,e=Date.Translator,n;f.datePartDelimiter=b.rtoken(/^([\s\-\.\,\/\x27]+)/);f.timePartDelimiter=b.stoken(":");f.whiteSpace=b.rtoken(/^\s*/);f.generalDelimiter=b.rtoken(/^(([\s\,]|at|on)+)/);var a={};f.ctoken=function(s){var q=a[s];if(!q){var t=Date.CultureInfo.regexPatterns;var p=s.split(/\s+/),o=[];for(var g=0;g<p.length;g++){o.push(b.replace(b.rtoken(t[p[g]]),p[g]))}q=a[s]=b.any.apply(null,o)}return q};f.ctoken2=function(g){return b.rtoken(Date.CultureInfo.regexPatterns[g])};f.h=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),e.hour));f.hh=b.cache(b.process(b.rtoken(/^(0[0-9]|1[0-2])/),e.hour));f.H=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),e.hour));f.HH=b.cache(b.process(b.rtoken(/^([0-1][0-9]|2[0-3])/),e.hour));f.m=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),e.minute));f.mm=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),e.minute));f.s=b.cache(b.process(b.rtoken(/^([0-5][0-9]|[0-9])/),e.second));f.ss=b.cache(b.process(b.rtoken(/^[0-5][0-9]/),e.second));f.hms=b.cache(b.sequence([f.H,f.mm,f.ss],f.timePartDelimiter));f.t=b.cache(b.process(f.ctoken2("shortMeridian"),e.meridian));f.tt=b.cache(b.process(f.ctoken2("longMeridian"),e.meridian));f.z=b.cache(b.process(b.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),e.timezone));f.zz=b.cache(b.process(b.rtoken(/^(\+|\-)\s*\d\d\d\d/),e.timezone));f.zzz=b.cache(b.process(f.ctoken2("timezone"),e.timezone));f.timeSuffix=b.each(b.ignore(f.whiteSpace),b.set([f.tt,f.zzz]));f.time=b.each(b.optional(b.ignore(b.stoken("T"))),f.hms,f.timeSuffix);f.d=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1]|\d)/),b.optional(f.ctoken2("ordinalSuffix"))),e.day));f.dd=b.cache(b.process(b.each(b.rtoken(/^([0-2]\d|3[0-1])/),b.optional(f.ctoken2("ordinalSuffix"))),e.day));f.ddd=f.dddd=b.cache(b.process(f.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g}}));f.M=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d|\d)/),e.month));f.MM=b.cache(b.process(b.rtoken(/^(1[0-2]|0\d)/),e.month));f.MMM=f.MMMM=b.cache(b.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),e.month));f.y=b.cache(b.process(b.rtoken(/^(\d\d?)/),e.year));f.yy=b.cache(b.process(b.rtoken(/^(\d\d)/),e.year));f.yyy=b.cache(b.process(b.rtoken(/^(\d\d?\d?\d?)/),e.year));f.yyyy=b.cache(b.process(b.rtoken(/^(\d\d\d\d)/),e.year));n=function(){return b.each(b.any.apply(null,arguments),b.not(f.ctoken2("timeContext")))};f.day=n(f.d,f.dd);f.month=n(f.M,f.MMM);f.year=n(f.yyyy,f.yy);f.orientation=b.process(f.ctoken("past future"),function(g){return function(){this.orient=g}});f.operator=b.process(f.ctoken("add subtract"),function(g){return function(){this.operator=g}});f.rday=b.process(f.ctoken("yesterday tomorrow today now"),e.rday);f.unit=b.process(f.ctoken("minute hour day week month year"),function(g){return function(){this.unit=g}});f.value=b.process(b.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"")}});f.expression=b.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]);n=function(){return b.set(arguments,f.datePartDelimiter)};f.mdy=n(f.ddd,f.month,f.day,f.year);f.ymd=n(f.ddd,f.year,f.month,f.day);f.dmy=n(f.ddd,f.day,f.month,f.year);f.date=function(g){return((f[Date.CultureInfo.dateElementOrder]||f.mdy).call(this,g))};f.format=b.process(b.many(b.any(b.process(b.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(f[g]){return f[g]}else{throw Date.Parsing.Exception(g)}}),b.process(b.rtoken(/^[^dMyhHmstz]+/),function(g){return b.ignore(b.stoken(g))}))),function(g){return b.process(b.each.apply(null,g),e.finishExact)});var m={};var d=function(g){return m[g]=(m[g]||f.format(g)[0])};f.formats=function(o){if(o instanceof Array){var p=[];for(var g=0;g<o.length;g++){p.push(d(o[g]))}return b.any.apply(null,p)}else{return d(o)}};f._formats=f.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);f._start=b.process(b.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),e.finish);f.start=function(g){try{var o=f._formats.call({},g);if(o[1].length===0){return o}}catch(p){}return f._start.call({},g)}}());Date._parse=Date.parse;Date.parse=function(a){var b=null;if(!a){return null}try{b=Date.Grammar.start.call({},a)}catch(d){return null}return((b[1].length===0)?b[0]:null)};Date.getParseFunction=function(b){var a=Date.Grammar.formats(b);return function(d){var f=null;try{f=a.call({},d)}catch(g){return null}return((f[1].length===0)?f[0]:null)}};Date.parseExact=function(a,b){return Date.getParseFunction(b)(a)};
/* jQuery v3.1.0 | (c) jQuery Foundation | jquery.org/license */
!function(e,d){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?d(e,!0):function(b){if(!b.document){throw new Error("jQuery requires a window with a document")}return d(b)}:d(e)}("undefined"!=typeof window?window:this,function(bP,bO){var bN=[],bM=bP.document,bL=Object.getPrototypeOf,bJ=bN.slice,bH=bN.concat,bG=bN.push,bF=bN.indexOf,bE={},bD=bE.toString,bC=bE.hasOwnProperty,bB=bC.toString,bA=bB.call(Object),bz={};function by(e,d){d=d||bM;var f=d.createElement("script");f.text=e,d.head.appendChild(f).parentNode.removeChild(f)}var bw="3.1.0",bv=function(e,d){return new bv.fn.init(e,d)},bu=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bt=/^-ms-/,bs=/-([a-z])/g,br=function(e,d){return d.toUpperCase()};bv.fn=bv.prototype={jquery:bw,constructor:bv,length:0,toArray:function(){return bJ.call(this)},get:function(b){return null!=b?b<0?this[b+this.length]:this[b]:bJ.call(this)},pushStack:function(e){var d=bv.merge(this.constructor(),e);return d.prevObject=this,d},each:function(b){return bv.each(this,b)},map:function(b){return this.pushStack(bv.map(this,function(a,d){return b.call(a,d,a)}))},slice:function(){return this.pushStack(bJ.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var d=this.length,f=+e+(e<0?d:0);return this.pushStack(f>=0&&f<d?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:bG,sort:bN.sort,splice:bN.splice},bv.extend=bv.fn.extend=function(){var w,v,u,t,s,q,p=arguments[0]||{},o=1,n=arguments.length,m=!1;for("boolean"==typeof p&&(m=p,p=arguments[o]||{},o++),"object"==typeof p||bv.isFunction(p)||(p={}),o===n&&(p=this,o--);o<n;o++){if(null!=(w=arguments[o])){for(v in w){u=p[v],t=w[v],p!==t&&(m&&t&&(bv.isPlainObject(t)||(s=bv.isArray(t)))?(s?(s=!1,q=u&&bv.isArray(u)?u:[]):q=u&&bv.isPlainObject(u)?u:{},p[v]=bv.extend(m,q,t)):void 0!==t&&(p[v]=t))}}}return p},bv.extend({expando:"jQuery"+(bw+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw new Error(b)},noop:function(){},isFunction:function(b){return"function"===bv.type(b)},isArray:Array.isArray,isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(e){var d=bv.type(e);return("number"===d||"string"===d)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var d,f;return !(!e||"[object Object]"!==bD.call(e))&&(!(d=bL(e))||(f=bC.call(d,"constructor")&&d.constructor,"function"==typeof f&&bB.call(f)===bA))},isEmptyObject:function(e){var d;for(d in e){return !1}return !0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?bE[bD.call(b)]||"object":typeof b},globalEval:function(b){by(b)},camelCase:function(b){return b.replace(bt,"ms-").replace(bs,br)},nodeName:function(e,d){return e.nodeName&&e.nodeName.toLowerCase()===d.toLowerCase()},each:function(f,e){var h,g=0;if(bq(f)){for(h=f.length;g<h;g++){if(e.call(f[g],g,f[g])===!1){break}}}else{for(g in f){if(e.call(f[g],g,f[g])===!1){break}}}return f},trim:function(b){return null==b?"":(b+"").replace(bu,"")},makeArray:function(e,d){var f=d||[];return null!=e&&(bq(Object(e))?bv.merge(f,"string"==typeof e?[e]:e):bG.call(f,e)),f},inArray:function(e,d,f){return null==d?-1:bF.call(d,e,f)},merge:function(g,f){for(var n=+f.length,m=0,h=g.length;m<n;m++){g[h++]=f[m]}return g.length=h,g},grep:function(n,m,u){for(var t,s=[],q=0,p=n.length,o=!u;q<p;q++){t=!m(n[q],q),t!==o&&s.push(n[q])}return s},map:function(m,g,s){var q,p,o=0,n=[];if(bq(m)){for(q=m.length;o<q;o++){p=g(m[o],o,s),null!=p&&n.push(p)}}else{for(o in m){p=g(m[o],o,s),null!=p&&n.push(p)}}return bH.apply([],n)},guid:1,proxy:function(g,f){var n,m,h;if("string"==typeof f&&(n=g[f],f=g,g=n),bv.isFunction(g)){return m=bJ.call(arguments,2),h=function(){return g.apply(f||this,m.concat(bJ.call(arguments)))},h.guid=g.guid=g.guid||bv.guid++,h}},now:Date.now,support:bz}),"function"==typeof Symbol&&(bv.fn[Symbol.iterator]=bN[Symbol.iterator]),bv.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,d){bE["[object "+d+"]"]=d.toLowerCase()});function bq(e){var d=!!e&&"length" in e&&e.length,f=bv.type(e);return"function"!==f&&!bv.isWindow(e)&&("array"===f||0===d||"number"==typeof d&&d>0&&d-1 in e)}var bp=function(dl){var dk,dj,dh,dg,df,de,dd,db,c9,c8,c7,c6,c4,c3,c2,c1,c0,cZ,cY,cX="sizzle"+1*new Date,cW=dl.document,cV=0,cU=0,cT=dI(),cS=dI(),dS=dI(),dR=function(e,d){return e===d&&(c7=!0),0},dQ={}.hasOwnProperty,dP=[],dN=dP.pop,dM=dP.push,dL=dP.push,dK=dP.slice,dJ=function(f,e){for(var h=0,g=f.length;h<g;h++){if(f[h]===e){return h}}return -1},dH="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",dG="[\\x20\\t\\r\\n\\f]",dF="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",dE="\\["+dG+"*("+dF+")(?:"+dG+"*([*^$|!~]?=)"+dG+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+dF+"))|)"+dG+"*\\]",dD=":("+dF+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+dE+")*)|.*)\\)|)",dC=new RegExp(dG+"+","g"),dA=new RegExp("^"+dG+"+|((?:^|[^\\\\])(?:\\\\.)*)"+dG+"+$","g"),dz=new RegExp("^"+dG+"*,"+dG+"*"),dy=new RegExp("^"+dG+"*([>+~]|"+dG+")"+dG+"*"),dw=new RegExp("="+dG+"*([^\\]'\"]*?)"+dG+"*\\]","g"),dv=new RegExp(dD),du=new RegExp("^"+dF+"$"),dt={ID:new RegExp("^#("+dF+")"),CLASS:new RegExp("^\\.("+dF+")"),TAG:new RegExp("^("+dF+"|[*])"),ATTR:new RegExp("^"+dE),PSEUDO:new RegExp("^"+dD),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+dG+"*(even|odd|(([+-]|)(\\d*)n|)"+dG+"*(?:([+-]|)"+dG+"*(\\d+)|))"+dG+"*\\)|)","i"),bool:new RegExp("^(?:"+dH+")$","i"),needsContext:new RegExp("^"+dG+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+dG+"*((?:-\\d)?\\d*)"+dG+"*\\)|)(?=[^-]|$)","i")},ds=/^(?:input|select|textarea|button)$/i,dr=/^h\d$/i,dq=/^[^{]+\{\s*\[native \w/,dp=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dY=/[+~]/,dn=new RegExp("\\\\([\\da-f]{1,6}"+dG+"?|("+dG+")|.)","ig"),dV=function(f,e,h){var g="0x"+e-65536;return g!==g||h?e:g<0?String.fromCharCode(g+65536):String.fromCharCode(g>>10|55296,1023&g|56320)},dB=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,c5=function(e,d){return d?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},cO=function(){c6()},bb=dT(function(b){return b.disabled===!0},{dir:"parentNode",next:"legend"});try{dL.apply(dP=dK.call(cW.childNodes),cW.childNodes),dP[cW.childNodes.length].nodeType}catch(d1){dL={apply:dP.length?function(e,d){dM.apply(e,dK.call(d))}:function(f,e){var h=f.length,g=0;while(f[h++]=e[g++]){}f.length=h-1}}}function dW(C,A,z,v){var u,t,q,p,n,m,g,E=A&&A.ownerDocument,D=A?A.nodeType:9;if(z=z||[],"string"!=typeof C||!C||1!==D&&9!==D&&11!==D){return z}if(!v&&((A?A.ownerDocument||A:cW)!==c4&&c6(A),A=A||c4,c2)){if(11!==D&&(n=dp.exec(C))){if(u=n[1]){if(9===D){if(!(q=A.getElementById(u))){return z}if(q.id===u){return z.push(q),z}}else{if(E&&(q=E.getElementById(u))&&cY(A,q)&&q.id===u){return z.push(q),z}}}else{if(n[2]){return dL.apply(z,A.getElementsByTagName(C)),z}if((u=n[3])&&dj.getElementsByClassName&&A.getElementsByClassName){return dL.apply(z,A.getElementsByClassName(u)),z}}}if(dj.qsa&&!dS[C+" "]&&(!c1||!c1.test(C))){if(1!==D){E=A,g=C}else{if("object"!==A.nodeName.toLowerCase()){(p=A.getAttribute("id"))?p=p.replace(dB,c5):A.setAttribute("id",p=cX),m=de(C),t=m.length;while(t--){m[t]="#"+p+" "+dZ(m[t])}g=m.join(","),E=dY.test(C)&&cM(A.parentNode)||A}}if(g){try{return dL.apply(z,E.querySelectorAll(g)),z}catch(B){}finally{p===cX&&A.removeAttribute("id")}}}}return db(C.replace(dA,"$1"),A,z,v)}function dI(){var e=[];function d(b,a){return e.push(b+" ")>dh.cacheLength&&delete d[e.shift()],d[b+" "]=a}return d}function dc(b){return b[cX]=!0,b}function cP(e){var d=c4.createElement("fieldset");try{return !!e(d)}catch(f){return !1}finally{d.parentNode&&d.parentNode.removeChild(d),d=null}}function cb(f,d){var h=f.split("|"),g=h.length;while(g--){dh.attrHandle[h[g]]=d}}function d2(f,e){var h=e&&f,g=h&&1===f.nodeType&&1===e.nodeType&&f.sourceIndex-e.sourceIndex;if(g){return g}if(h){while(h=h.nextSibling){if(h===e){return -1}}}return f?1:-1}function dX(b){return function(a){var d=a.nodeName.toLowerCase();return"input"===d&&a.type===b}}function dO(b){return function(a){var d=a.nodeName.toLowerCase();return("input"===d||"button"===d)&&a.type===b}}function di(b){return function(a){return"label" in a&&a.disabled===b||"form" in a&&a.disabled===b||"form" in a&&a.disabled===!1&&(a.isDisabled===b||a.isDisabled!==!b&&("label" in a||!bb(a))!==b)}}function cQ(b){return dc(function(a){return a=+a,dc(function(p,o){var n,m=b([],p.length,a),h=m.length;while(h--){p[n=m[h]]&&(p[n]=!(o[n]=p[n]))}})})}function cM(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b}dj=dW.support={},df=dW.isXML=function(e){var d=e&&(e.ownerDocument||e).documentElement;return !!d&&"HTML"!==d.nodeName},c6=dW.setDocument=function(f){var d,m,h=f?f.ownerDocument||f:cW;return h!==c4&&9===h.nodeType&&h.documentElement?(c4=h,c3=c4.documentElement,c2=!df(c4),cW!==c4&&(m=c4.defaultView)&&m.top!==m&&(m.addEventListener?m.addEventListener("unload",cO,!1):m.attachEvent&&m.attachEvent("onunload",cO)),dj.attributes=cP(function(b){return b.className="i",!b.getAttribute("className")}),dj.getElementsByTagName=cP(function(b){return b.appendChild(c4.createComment("")),!b.getElementsByTagName("*").length}),dj.getElementsByClassName=dq.test(c4.getElementsByClassName),dj.getById=cP(function(b){return c3.appendChild(b).id=cX,!c4.getElementsByName||!c4.getElementsByName(cX).length}),dj.getById?(dh.find.ID=function(g,e){if("undefined"!=typeof e.getElementById&&c2){var n=e.getElementById(g);return n?[n]:[]}},dh.filter.ID=function(g){var e=g.replace(dn,dV);return function(b){return b.getAttribute("id")===e}}):(delete dh.find.ID,dh.filter.ID=function(g){var e=g.replace(dn,dV);return function(b){var n="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id");return n&&n.value===e}}),dh.find.TAG=dj.getElementsByTagName?function(g,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(g):dj.qsa?e.querySelectorAll(g):void 0}:function(n,g){var s,q=[],p=0,o=g.getElementsByTagName(n);if("*"===n){while(s=o[p++]){1===s.nodeType&&q.push(s)}return q}return o},dh.find.CLASS=dj.getElementsByClassName&&function(g,e){if("undefined"!=typeof e.getElementsByClassName&&c2){return e.getElementsByClassName(g)}},c0=[],c1=[],(dj.qsa=dq.test(c4.querySelectorAll))&&(cP(function(b){c3.appendChild(b).innerHTML="<a id='"+cX+"'></a><select id='"+cX+"-\r\\' msallowcapture=''><option selected=''></option></select>",b.querySelectorAll("[msallowcapture^='']").length&&c1.push("[*^$]="+dG+"*(?:''|\"\")"),b.querySelectorAll("[selected]").length||c1.push("\\["+dG+"*(?:value|"+dH+")"),b.querySelectorAll("[id~="+cX+"-]").length||c1.push("~="),b.querySelectorAll(":checked").length||c1.push(":checked"),b.querySelectorAll("a#"+cX+"+*").length||c1.push(".#.+[+~]")}),cP(function(g){g.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=c4.createElement("input");e.setAttribute("type","hidden"),g.appendChild(e).setAttribute("name","D"),g.querySelectorAll("[name=d]").length&&c1.push("name"+dG+"*[*^$|!~]?="),2!==g.querySelectorAll(":enabled").length&&c1.push(":enabled",":disabled"),c3.appendChild(g).disabled=!0,2!==g.querySelectorAll(":disabled").length&&c1.push(":enabled",":disabled"),g.querySelectorAll("*,:x"),c1.push(",.*:")})),(dj.matchesSelector=dq.test(cZ=c3.matches||c3.webkitMatchesSelector||c3.mozMatchesSelector||c3.oMatchesSelector||c3.msMatchesSelector))&&cP(function(b){dj.disconnectedMatch=cZ.call(b,"*"),cZ.call(b,"[s!='']:x"),c0.push("!=",dD)}),c1=c1.length&&new RegExp(c1.join("|")),c0=c0.length&&new RegExp(c0.join("|")),d=dq.test(c3.compareDocumentPosition),cY=d||dq.test(c3.contains)?function(g,e){var o=9===g.nodeType?g.documentElement:g,n=e&&e.parentNode;return g===n||!(!n||1!==n.nodeType||!(o.contains?o.contains(n):g.compareDocumentPosition&&16&g.compareDocumentPosition(n)))}:function(g,e){if(e){while(e=e.parentNode){if(e===g){return !0}}}return !1},dR=d?function(g,e){if(g===e){return c7=!0,0}var n=!g.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(g.ownerDocument||g)===(e.ownerDocument||e)?g.compareDocumentPosition(e):1,1&n||!dj.sortDetached&&e.compareDocumentPosition(g)===n?g===c4||g.ownerDocument===cW&&cY(cW,g)?-1:e===c4||e.ownerDocument===cW&&cY(cW,e)?1:c8?dJ(c8,g)-dJ(c8,e):0:4&n?-1:1)}:function(o,n){if(o===n){return c7=!0,0}var v,u=0,t=o.parentNode,s=n.parentNode,q=[o],p=[n];if(!t||!s){return o===c4?-1:n===c4?1:t?-1:s?1:c8?dJ(c8,o)-dJ(c8,n):0}if(t===s){return d2(o,n)}v=o;while(v=v.parentNode){q.unshift(v)}v=n;while(v=v.parentNode){p.unshift(v)}while(q[u]===p[u]){u++}return u?d2(q[u],p[u]):q[u]===cW?-1:p[u]===cW?1:0},c4):c4},dW.matches=function(e,d){return dW(e,null,null,d)},dW.matchesSelector=function(g,f){if((g.ownerDocument||g)!==c4&&c6(g),f=f.replace(dw,"='$1']"),dj.matchesSelector&&c2&&!dS[f+" "]&&(!c0||!c0.test(f))&&(!c1||!c1.test(f))){try{var m=cZ.call(g,f);if(m||dj.disconnectedMatch||g.document&&11!==g.document.nodeType){return m}}catch(h){}}return dW(f,c4,null,[g]).length>0},dW.contains=function(e,d){return(e.ownerDocument||e)!==c4&&c6(e),cY(e,d)},dW.attr=function(g,d){(g.ownerDocument||g)!==c4&&c6(g);var m=dh.attrHandle[d.toLowerCase()],h=m&&dQ.call(dh.attrHandle,d.toLowerCase())?m(g,d,!c2):void 0;return void 0!==h?h:dj.attributes||!c2?g.getAttribute(d):(h=g.getAttributeNode(d))&&h.specified?h.value:null},dW.escape=function(b){return(b+"").replace(dB,c5)},dW.error=function(b){throw new Error("Syntax error, unrecognized expression: "+b)},dW.uniqueSort=function(h){var g,o=[],n=0,m=0;if(c7=!dj.detectDuplicates,c8=!dj.sortStable&&h.slice(0),h.sort(dR),c7){while(g=h[m++]){g===h[m]&&(n=o.push(m))}while(n--){h.splice(o[n],1)}}return c8=null,h},dg=dW.getText=function(g){var e,n="",m=0,h=g.nodeType;if(h){if(1===h||9===h||11===h){if("string"==typeof g.textContent){return g.textContent}for(g=g.firstChild;g;g=g.nextSibling){n+=dg(g)}}else{if(3===h||4===h){return g.nodeValue}}}else{while(e=g[m++]){n+=dg(e)}}return n},dh=dW.selectors={cacheLength:50,createPseudo:dc,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(dn,dV),b[3]=(b[3]||b[4]||b[5]||"").replace(dn,dV),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||dW.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&dW.error(b[0]),b},PSEUDO:function(e){var d,f=!e[6]&&e[2];return dt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":f&&dv.test(f)&&(d=de(f,!0))&&(d=f.indexOf(")",f.length-d)-f.length)&&(e[0]=e[0].slice(0,d),e[2]=f.slice(0,d)),e.slice(0,3))}},filter:{TAG:function(e){var d=e.replace(dn,dV).toLowerCase();return"*"===e?function(){return !0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===d}},CLASS:function(e){var d=cT[e+" "];return d||(d=new RegExp("(^|"+dG+")"+e+"("+dG+"|$)"))&&cT(e,function(b){return d.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||"")})},ATTR:function(e,d,f){return function(b){var a=dW.attr(b,e);return null==a?"!="===d:!d||(a+="","="===d?a===f:"!="===d?a!==f:"^="===d?f&&0===a.indexOf(f):"*="===d?f&&a.indexOf(f)>-1:"$="===d?f&&a.slice(-f.length)===f:"~="===d?(" "+a.replace(dC," ")+" ").indexOf(f)>-1:"|="===d&&(a===f||a.slice(0,f.length+1)===f+"-"))}},CHILD:function(n,m,u,t,s){var q="nth"!==n.slice(0,3),p="last"!==n.slice(-4),o="of-type"===m;return 1===t&&0===s?function(b){return !!b.parentNode}:function(C,B,A){var z,w,v,h,g,f,e=q!==p?"nextSibling":"previousSibling",d=C.parentNode,a=o&&C.nodeName.toLowerCase(),E=!A&&!o,D=!1;if(d){if(q){while(e){h=C;while(h=h[e]){if(o?h.nodeName.toLowerCase()===a:1===h.nodeType){return !1}}f=e="only"===n&&!f&&"nextSibling"}return !0}if(f=[p?d.firstChild:d.lastChild],p&&E){h=d,v=h[cX]||(h[cX]={}),w=v[h.uniqueID]||(v[h.uniqueID]={}),z=w[n]||[],g=z[0]===cV&&z[1],D=g&&z[2],h=g&&d.childNodes[g];while(h=++g&&h&&h[e]||(D=g=0)||f.pop()){if(1===h.nodeType&&++D&&h===C){w[n]=[cV,g,D];break}}}else{if(E&&(h=C,v=h[cX]||(h[cX]={}),w=v[h.uniqueID]||(v[h.uniqueID]={}),z=w[n]||[],g=z[0]===cV&&z[1],D=g),D===!1){while(h=++g&&h&&h[e]||(D=g=0)||f.pop()){if((o?h.nodeName.toLowerCase()===a:1===h.nodeType)&&++D&&(E&&(v=h[cX]||(h[cX]={}),w=v[h.uniqueID]||(v[h.uniqueID]={}),w[n]=[cV,D]),h===C)){break}}}}return D-=s,D===t||D%t===0&&D/t>=0}}},PSEUDO:function(f,d){var h,g=dh.pseudos[f]||dh.setFilters[f.toLowerCase()]||dW.error("unsupported pseudo: "+f);return g[cX]?g(d):g.length>1?(h=[f,f,"",d],dh.setFilters.hasOwnProperty(f.toLowerCase())?dc(function(b,o){var n,m=g(b,d),e=m.length;while(e--){n=dJ(b,m[e]),b[n]=!(o[n]=m[e])}}):function(b){return g(b,0,h)}):g}},pseudos:{not:dc(function(f){var e=[],h=[],g=dd(f.replace(dA,"$1"));return g[cX]?dc(function(m,d,s,q){var p,o=g(m,null,q,[]),n=m.length;while(n--){(p=o[n])&&(m[n]=!(d[n]=p))}}):function(b,m,d){return e[0]=b,g(e,null,d,h),e[0]=null,!h.pop()}}),has:dc(function(b){return function(a){return dW(b,a).length>0}}),contains:dc(function(b){return b=b.replace(dn,dV),function(a){return(a.textContent||a.innerText||dg(a)).indexOf(b)>-1}}),lang:dc(function(b){return du.test(b||"")||dW.error("unsupported lang: "+b),b=b.replace(dn,dV).toLowerCase(),function(a){var d;do{if(d=c2?a.lang:a.getAttribute("xml:lang")||a.getAttribute("lang")){return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-")}}while((a=a.parentNode)&&1===a.nodeType);return !1}}),target:function(a){var d=dl.location&&dl.location.hash;return d&&d.slice(1)===a.id},root:function(b){return b===c3},focus:function(b){return b===c4.activeElement&&(!c4.hasFocus||c4.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},enabled:di(!1),disabled:di(!0),checked:function(e){var d=e.nodeName.toLowerCase();return"input"===d&&!!e.checked||"option"===d&&!!e.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,b.selected===!0},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling){if(b.nodeType<6){return !1}}return !0},parent:function(b){return !dh.pseudos.empty(b)},header:function(b){return dr.test(b.nodeName)},input:function(b){return ds.test(b.nodeName)},button:function(e){var d=e.nodeName.toLowerCase();return"input"===d&&"button"===e.type||"button"===d},text:function(e){var d;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(d=e.getAttribute("type"))||"text"===d.toLowerCase())},first:cQ(function(){return[0]}),last:cQ(function(e,d){return[d-1]}),eq:cQ(function(e,d,f){return[f<0?f+d:f]}),even:cQ(function(e,d){for(var f=0;f<d;f+=2){e.push(f)}return e}),odd:cQ(function(e,d){for(var f=1;f<d;f+=2){e.push(f)}return e}),lt:cQ(function(f,e,h){for(var g=h<0?h+e:h;--g>=0;){f.push(g)}return f}),gt:cQ(function(f,e,h){for(var g=h<0?h+e:h;++g<e;){f.push(g)}return f})}},dh.pseudos.nth=dh.pseudos.eq;for(dk in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){dh.pseudos[dk]=dX(dk)}for(dk in {submit:!0,reset:!0}){dh.pseudos[dk]=dO(dk)}function d4(){}d4.prototype=dh.filters=dh.pseudos,dh.setFilters=new d4,de=dW.tokenize=function(v,u){var t,s,q,p,o,n,m,d=cS[v+" "];if(d){return u?0:d.slice(0)}o=v,n=[],m=dh.preFilter;while(o){t&&!(s=dz.exec(o))||(s&&(o=o.slice(s[0].length)||o),n.push(q=[])),t=!1,(s=dy.exec(o))&&(t=s.shift(),q.push({value:t,type:s[0].replace(dA," ")}),o=o.slice(t.length));for(p in dh.filter){!(s=dt[p].exec(o))||m[p]&&!(s=m[p](s))||(t=s.shift(),q.push({value:t,type:p,matches:s}),o=o.slice(t.length))}if(!t){break}}return u?o.length:o?dW.error(v):cS(v,n).slice(0)};function dZ(f){for(var e=0,h=f.length,g="";e<h;e++){g+=f[e].value}return g}function dT(n,m,u){var t=m.dir,s=m.next,q=s||t,p=u&&"parentNode"===q,o=cU++;return m.first?function(a,f,d){while(a=a[t]){if(1===a.nodeType||p){return n(a,f,d)}}}:function(d,v,h){var g,f,e,a=[cV,o];if(h){while(d=d[t]){if((1===d.nodeType||p)&&n(d,v,h)){return !0}}}else{while(d=d[t]){if(1===d.nodeType||p){if(e=d[cX]||(d[cX]={}),f=e[d.uniqueID]||(e[d.uniqueID]={}),s&&s===d.nodeName.toLowerCase()){d=d[t]||d}else{if((g=f[q])&&g[0]===cV&&g[1]===o){return a[2]=g[2]}if(f[q]=a,a[2]=n(d,v,h)){return !0}}}}}}}function dm(b){return b.length>1?function(a,h,g){var f=b.length;while(f--){if(!b[f](a,h,g)){return !1}}return !0}:b[0]}function cR(g,f,n){for(var m=0,h=f.length;m<h;m++){dW(g,f[m],n)}return n}function cN(w,v,u,t,s){for(var q,p=[],o=0,n=w.length,m=null!=v;o<n;o++){(q=w[o])&&(u&&!u(q,t,s)||(p.push(q),m&&v.push(o)))}return p}function ab(h,g,p,o,n,m){return o&&!o[cX]&&(o=ab(o)),n&&!n[cX]&&(n=ab(n,m)),dc(function(C,B,A,z){var w,v,u,t=[],s=[],e=B.length,d=C||cR(g||"*",A.nodeType?[A]:A,[]),b=!h||!C&&g?d:cN(d,t,h,A,z),a=p?n||(C?h:e||o)?[]:B:b;if(p&&p(b,a,A,z),o){w=cN(a,s),o(w,[],A,z),v=w.length;while(v--){(u=w[v])&&(a[s[v]]=!(b[s[v]]=u))}}if(C){if(n||h){if(n){w=[],v=a.length;while(v--){(u=a[v])&&w.push(b[v]=u)}n(null,a=[],w,z)}v=a.length;while(v--){(u=a[v])&&(w=n?dJ(C,u):t[v])>-1&&(C[w]=!(B[w]=u))}}}else{a=cN(a===B?a.splice(e,a.length):a),n?n(null,B,a,z):dL.apply(B,a)}})}function d0(z){for(var w,v,u,t=z.length,s=dh.relative[z[0].type],q=s||dh.relative[" "],p=s?1:0,o=dT(function(b){return b===w},q,!0),n=dT(function(b){return dJ(w,b)>-1},q,!0),d=[function(b,h,g){var f=!s&&(g||h!==c9)||((w=h).nodeType?o(b,h,g):n(b,h,g));return w=null,f}];p<t;p++){if(v=dh.relative[z[p].type]){d=[dT(dm(d),v)]}else{if(v=dh.filter[z[p].type].apply(null,z[p].matches),v[cX]){for(u=++p;u<t;u++){if(dh.relative[z[u].type]){break}}return ab(p>1&&dm(d),p>1&&dZ(z.slice(0,p-1).concat({value:" "===z[p-2].type?"*":""})).replace(dA,"$1"),v,p<u&&d0(z.slice(p,u)),u<t&&d0(z=z.slice(u)),u<t&&dZ(z))}d.push(v)}}return dm(d)}function dU(g,d){var n=d.length>0,m=g.length>0,h=function(D,C,B,A,w){var p,e,b,a=0,K="0",J=D&&[],I=[],H=c9,G=D||m&&dh.find.TAG("*",w),F=cV+=null==H?1:Math.random()||0.1,E=G.length;for(w&&(c9=C===c4||C||w);K!==E&&null!=(p=G[K]);K++){if(m&&p){e=0,C||p.ownerDocument===c4||(c6(p),B=!c2);while(b=g[e++]){if(b(p,C||c4,B)){A.push(p);break}}w&&(cV=F)}n&&((p=!b&&p)&&a--,D&&J.push(p))}if(a+=K,n&&K!==a){e=0;while(b=d[e++]){b(J,I,C,B)}if(D){if(a>0){while(K--){J[K]||I[K]||(I[K]=dN.call(A))}}I=cN(I)}dL.apply(A,I),w&&!D&&I.length>0&&a+d.length>1&&dW.uniqueSort(A)}return w&&(cV=F,c9=H),J};return n?dc(h):h}return dd=dW.compile=function(h,g){var p,o=[],n=[],m=dS[h+" "];if(!m){g||(g=de(h)),p=g.length;while(p--){m=d0(g[p]),m[cX]?o.push(m):n.push(m)}m=dS(h,dU(n,o)),m.selector=h}return m},db=dW.select=function(z,w,v,u){var t,s,q,p,h,g="function"==typeof z&&z,d=!u&&de(z=g.selector||z);if(v=v||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(q=s[0]).type&&dj.getById&&9===w.nodeType&&c2&&dh.relative[s[1].type]){if(w=(dh.find.ID(q.matches[0].replace(dn,dV),w)||[])[0],!w){return v}g&&(w=w.parentNode),z=z.slice(s.shift().value.length)}t=dt.needsContext.test(z)?0:s.length;while(t--){if(q=s[t],dh.relative[p=q.type]){break}if((h=dh.find[p])&&(u=h(q.matches[0].replace(dn,dV),dY.test(s[0].type)&&cM(w.parentNode)||w))){if(s.splice(t,1),z=u.length&&dZ(s),!z){return dL.apply(v,u),v}break}}}return(g||dd(z,d))(u,w,!c2,v,!w||dY.test(z)&&cM(w.parentNode)||w),v},dj.sortStable=cX.split("").sort(dR).join("")===cX,dj.detectDuplicates=!!c7,c6(),dj.sortDetached=cP(function(b){return 1&b.compareDocumentPosition(c4.createElement("fieldset"))}),cP(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||cb("type|href|height|width",function(e,d,f){if(!f){return e.getAttribute(d,"type"===d.toLowerCase()?1:2)}}),dj.attributes&&cP(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||cb("value",function(e,d,f){if(!f&&"input"===e.nodeName.toLowerCase()){return e.defaultValue}}),cP(function(b){return null==b.getAttribute("disabled")})||cb(dH,function(f,e,h){var g;if(!h){return f[e]===!0?e.toLowerCase():(g=f.getAttributeNode(e))&&g.specified?g.value:null}}),dW}(bP);bv.find=bp,bv.expr=bp.selectors,bv.expr[":"]=bv.expr.pseudos,bv.uniqueSort=bv.unique=bp.uniqueSort,bv.text=bp.getText,bv.isXMLDoc=bp.isXML,bv.contains=bp.contains,bv.escapeSelector=bp.escape;var bo=function(g,f,n){var m=[],h=void 0!==n;while((g=g[f])&&9!==g.nodeType){if(1===g.nodeType){if(h&&bv(g).is(n)){break}m.push(g)}}return m},bm=function(e,d){for(var f=[];e;e=e.nextSibling){1===e.nodeType&&e!==d&&f.push(e)}return f},cp=bv.expr.match.needsContext,co=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,cn=/^.[^:#\[\.,]*$/;function cm(e,d,f){if(bv.isFunction(d)){return bv.grep(e,function(b,g){return !!d.call(b,g,b)!==f})}if(d.nodeType){return bv.grep(e,function(b){return b===d!==f})}if("string"==typeof d){if(cn.test(d)){return bv.filter(d,e,f)}d=bv.filter(d,e)}return bv.grep(e,function(b){return bF.call(d,b)>-1!==f&&1===b.nodeType})}bv.filter=function(f,e,h){var g=e[0];return h&&(f=":not("+f+")"),1===e.length&&1===g.nodeType?bv.find.matchesSelector(g,f)?[g]:[]:bv.find.matches(f,bv.grep(e,function(b){return 1===b.nodeType}))},bv.fn.extend({find:function(g){var f,n,m=this.length,h=this;if("string"!=typeof g){return this.pushStack(bv(g).filter(function(){for(f=0;f<m;f++){if(bv.contains(h[f],this)){return !0}}}))}for(n=this.pushStack([]),f=0;f<m;f++){bv.find(g,h[f],n)}return m>1?bv.uniqueSort(n):n},filter:function(b){return this.pushStack(cm(this,b||[],!1))},not:function(b){return this.pushStack(cm(this,b||[],!0))},is:function(b){return !!cm(this,"string"==typeof b&&cp.test(b)?bv(b):b||[],!1).length}});var cl,ck=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ci=bv.fn.init=function(g,d,n){var m,h;if(!g){return this}if(n=n||cl,"string"==typeof g){if(m="<"===g[0]&&">"===g[g.length-1]&&g.length>=3?[null,g,null]:ck.exec(g),!m||!m[1]&&d){return !d||d.jquery?(d||n).find(g):this.constructor(d).find(g)}if(m[1]){if(d=d instanceof bv?d[0]:d,bv.merge(this,bv.parseHTML(m[1],d&&d.nodeType?d.ownerDocument||d:bM,!0)),co.test(m[1])&&bv.isPlainObject(d)){for(m in d){bv.isFunction(this[m])?this[m](d[m]):this.attr(m,d[m])}}return this}return h=bM.getElementById(m[2]),h&&(this[0]=h,this.length=1),this}return g.nodeType?(this[0]=g,this.length=1,this):bv.isFunction(g)?void 0!==n.ready?n.ready(g):g(bv):bv.makeArray(g,this)};ci.prototype=bv.fn,cl=bv(bM);var cg=/^(?:parents|prev(?:Until|All))/,cf={children:!0,contents:!0,next:!0,prev:!0};bv.fn.extend({has:function(e){var d=bv(e,this),f=d.length;return this.filter(function(){for(var b=0;b<f;b++){if(bv.contains(this,d[b])){return !0}}})},closest:function(m,h){var s,q=0,p=this.length,o=[],n="string"!=typeof m&&bv(m);if(!cp.test(m)){for(;q<p;q++){for(s=this[q];s&&s!==h;s=s.parentNode){if(s.nodeType<11&&(n?n.index(s)>-1:1===s.nodeType&&bv.find.matchesSelector(s,m))){o.push(s);break}}}}return this.pushStack(o.length>1?bv.uniqueSort(o):o)},index:function(b){return b?"string"==typeof b?bF.call(bv(b),this[0]):bF.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,d){return this.pushStack(bv.uniqueSort(bv.merge(this.get(),bv(e,d))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});function ce(e,d){while((e=e[d])&&1!==e.nodeType){}return e}bv.each({parent:function(e){var d=e.parentNode;return d&&11!==d.nodeType?d:null},parents:function(b){return bo(b,"parentNode")},parentsUntil:function(e,d,f){return bo(e,"parentNode",f)},next:function(b){return ce(b,"nextSibling")},prev:function(b){return ce(b,"previousSibling")},nextAll:function(b){return bo(b,"nextSibling")},prevAll:function(b){return bo(b,"previousSibling")},nextUntil:function(e,d,f){return bo(e,"nextSibling",f)},prevUntil:function(e,d,f){return bo(e,"previousSibling",f)},siblings:function(b){return bm((b.parentNode||{}).firstChild,b)},children:function(b){return bm(b.firstChild)},contents:function(b){return b.contentDocument||bv.merge([],b.childNodes)}},function(e,d){bv.fn[e]=function(f,b){var a=bv.map(this,d,f);return"Until"!==e.slice(-5)&&(b=f),b&&"string"==typeof b&&(a=bv.filter(b,a)),this.length>1&&(cf[e]||bv.uniqueSort(a),cg.test(e)&&a.reverse()),this.pushStack(a)}});var cd=/\S+/g;function cc(e){var d={};return bv.each(e.match(cd)||[],function(b,f){d[f]=!0}),d}bv.Callbacks=function(w){w="string"==typeof w?cc(w):bv.extend({},w);var v,u,t,s,q=[],p=[],o=-1,n=function(){for(s=w.once,t=v=!0;p.length;o=-1){u=p.shift();while(++o<q.length){q[o].apply(u[0],u[1])===!1&&w.stopOnFalse&&(o=q.length,u=!1)}}w.memory||(u=!1),v=!1,s&&(q=u?[]:"")},m={add:function(){return q&&(u&&!v&&(o=q.length-1,p.push(u)),function a(d){bv.each(d,function(e,f){bv.isFunction(f)?w.unique&&m.has(f)||q.push(f):f&&f.length&&"string"!==bv.type(f)&&a(f)})}(arguments),u&&!v&&n()),this},remove:function(){return bv.each(arguments,function(e,d){var f;while((f=bv.inArray(d,q,f))>-1){q.splice(f,1),f<=o&&o--}}),this},has:function(b){return b?bv.inArray(b,q)>-1:q.length>0},empty:function(){return q&&(q=[]),this},disable:function(){return s=p=[],q=u="",this},disabled:function(){return !q},lock:function(){return s=p=[],u||v||(q=u=""),this},locked:function(){return !!s},fireWith:function(b,d){return s||(d=d||[],d=[b,d.slice?d.slice():d],p.push(d),v||n()),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return !!t}};return m};function b9(b){return b}function b8(b){throw b}function b7(f,e,h){var g;try{f&&bv.isFunction(g=f.promise)?g.call(f).done(e).fail(h):f&&bv.isFunction(g=f.then)?g.call(f,e,h):e.call(void 0,f)}catch(f){h.call(void 0,f)}}bv.extend({Deferred:function(a){var n=[["notify","progress",bv.Callbacks("memory"),bv.Callbacks("memory"),2],["resolve","done",bv.Callbacks("once memory"),bv.Callbacks("once memory"),0,"resolved"],["reject","fail",bv.Callbacks("once memory"),bv.Callbacks("once memory"),1,"rejected"]],m="pending",h={state:function(){return m},always:function(){return g.done(arguments).fail(arguments),this},"catch":function(b){return h.then(null,b)},pipe:function(){var b=arguments;return bv.Deferred(function(d){bv.each(n,function(p,o){var f=bv.isFunction(b[o[4]])&&b[o[4]];g[o[1]](function(){var e=f&&f.apply(this,arguments);e&&bv.isFunction(e.promise)?e.promise().progress(d.notify).done(d.resolve).fail(d.reject):d[o[0]+"With"](this,f?[e]:arguments)})}),b=null}).promise()},then:function(o,t,s){var q=0;function p(f,w,v,u){return function(){var z=this,e=arguments,d=function(){var A,B;if(!(f<q)){if(A=v.apply(z,e),A===w.promise()){throw new TypeError("Thenable self-resolution")}B=A&&("object"==typeof A||"function"==typeof A)&&A.then,bv.isFunction(B)?u?B.call(A,p(q,w,b9,u),p(q,w,b8,u)):(q++,B.call(A,p(q,w,b9,u),p(q,w,b8,u),p(q,w,b9,w.notifyWith))):(v!==b9&&(z=void 0,e=[A]),(u||w.resolveWith)(z,e))}},b=u?d:function(){try{d()}catch(A){bv.Deferred.exceptionHook&&bv.Deferred.exceptionHook(A,b.stackTrace),f+1>=q&&(v!==b8&&(z=void 0,e=[A]),w.rejectWith(z,e))}};f?b():(bv.Deferred.getStackHook&&(b.stackTrace=bv.Deferred.getStackHook()),bP.setTimeout(b))}}return bv.Deferred(function(b){n[0][3].add(p(0,b,bv.isFunction(s)?s:b9,b.notifyWith)),n[1][3].add(p(0,b,bv.isFunction(o)?o:b9)),n[2][3].add(p(0,b,bv.isFunction(t)?t:b8))}).promise()},promise:function(b){return null!=b?bv.extend(b,h):h}},g={};return bv.each(n,function(e,d){var o=d[2],f=d[5];h[d[1]]=o.add,f&&o.add(function(){m=f},n[3-e][2].disable,n[0][2].lock),o.add(d[3].fire),g[d[0]]=function(){return g[d[0]+"With"](this===g?void 0:this,arguments),this},g[d[0]+"With"]=o.fireWith}),h.promise(g),a&&a.call(g,g),g},when:function(m){var f=arguments.length,s=f,q=Array(s),p=bJ.call(arguments),o=bv.Deferred(),n=function(b){return function(a){q[b]=this,p[b]=arguments.length>1?bJ.call(arguments):a,--f||o.resolveWith(q,p)}};if(f<=1&&(b7(m,o.done(n(s)).resolve,o.reject),"pending"===o.state()||bv.isFunction(p[s]&&p[s].then))){return o.then()}while(s--){b7(p[s],n(s),o.reject)}return o.promise()}});var b6=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;bv.Deferred.exceptionHook=function(a,d){bP.console&&bP.console.warn&&a&&b6.test(a.name)&&bP.console.warn("jQuery.Deferred exception: "+a.message,a.stack,d)},bv.readyException=function(a){bP.setTimeout(function(){throw a})};var b5=bv.Deferred();bv.fn.ready=function(b){return b5.then(b)["catch"](function(d){bv.readyException(d)}),this},bv.extend({isReady:!1,readyWait:1,holdReady:function(b){b?bv.readyWait++:bv.ready(!0)},ready:function(b){(b===!0?--bv.readyWait:bv.isReady)||(bv.isReady=!0,b!==!0&&--bv.readyWait>0||b5.resolveWith(bM,[bv]))}}),bv.ready.then=b5.then;function b3(){bM.removeEventListener("DOMContentLoaded",b3),bP.removeEventListener("load",b3),bv.ready()}"complete"===bM.readyState||"loading"!==bM.readyState&&!bM.documentElement.doScroll?bP.setTimeout(bv.ready):(bM.addEventListener("DOMContentLoaded",b3),bP.addEventListener("load",b3));var b2=function(w,v,u,t,s,q,p){var o=0,n=w.length,m=null==u;if("object"===bv.type(u)){s=!0;for(o in u){b2(w,v,o,u[o],!0,q,p)}}else{if(void 0!==t&&(s=!0,bv.isFunction(t)||(p=!0),m&&(p?(v.call(w,t),v=null):(m=v,v=function(e,d,f){return m.call(bv(e),f)})),v)){for(;o<n;o++){v(w[o],u,p?t:t.call(w[o],o,v(w[o],u)))}}}return s?w:m?v.call(w):n?v(w[0],u):q},b1=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};function b0(){this.expando=bv.expando+b0.uid++}b0.uid=1,b0.prototype={cache:function(e){var d=e[this.expando];return d||(d={},b1(e)&&(e.nodeType?e[this.expando]=d:Object.defineProperty(e,this.expando,{value:d,configurable:!0,enumerable:!0}))),d},set:function(g,f,n){var m,h=this.cache(g);if("string"==typeof f){h[bv.camelCase(f)]=n}else{for(m in f){h[bv.camelCase(m)]=f[m]}}return h},get:function(e,d){return void 0===d?this.cache(e):e[this.expando]&&e[this.expando][bv.camelCase(d)]},access:function(e,d,f){return void 0===d||d&&"string"==typeof d&&void 0===f?this.get(e,d):(this.set(e,d,f),void 0!==f?f:d)},remove:function(f,e){var h,g=f[this.expando];if(void 0!==g){if(void 0!==e){bv.isArray(e)?e=e.map(bv.camelCase):(e=bv.camelCase(e),e=e in g?[e]:e.match(cd)||[]),h=e.length;while(h--){delete g[e[h]]}}(void 0===e||bv.isEmptyObject(g))&&(f.nodeType?f[this.expando]=void 0:delete f[this.expando])}},hasData:function(e){var d=e[this.expando];return void 0!==d&&!bv.isEmptyObject(d)}};var bZ=new b0,bY=new b0,bX=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bW=/[A-Z]/g;function bV(g,f,n){var m;if(void 0===n&&1===g.nodeType){if(m="data-"+f.replace(bW,"-$&").toLowerCase(),n=g.getAttribute(m),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:bX.test(n)?JSON.parse(n):n)}catch(h){}bY.set(g,f,n)}else{n=void 0}}return n}bv.extend({hasData:function(b){return bY.hasData(b)||bZ.hasData(b)},data:function(e,d,f){return bY.access(e,d,f)},removeData:function(e,d){bY.remove(e,d)},_data:function(e,d,f){return bZ.access(e,d,f)},_removeData:function(e,d){bZ.remove(e,d)}}),bv.fn.extend({data:function(m,h){var s,q,p,o=this[0],n=o&&o.attributes;if(void 0===m){if(this.length&&(p=bY.get(o),1===o.nodeType&&!bZ.get(o,"hasDataAttrs"))){s=n.length;while(s--){n[s]&&(q=n[s].name,0===q.indexOf("data-")&&(q=bv.camelCase(q.slice(5)),bV(o,q,p[q])))}bZ.set(o,"hasDataAttrs",!0)}return p}return"object"==typeof m?this.each(function(){bY.set(this,m)}):b2(this,function(a){var d;if(o&&void 0===a){if(d=bY.get(o,m),void 0!==d){return d}if(d=bV(o,m),void 0!==d){return d}}else{this.each(function(){bY.set(this,m,a)})}},null,h,arguments.length>1,null,!0)},removeData:function(b){return this.each(function(){bY.remove(this,b)})}}),bv.extend({queue:function(f,e,h){var g;if(f){return e=(e||"fx")+"queue",g=bZ.get(f,e),h&&(!g||bv.isArray(h)?g=bZ.access(f,e,bv.makeArray(h)):g.push(h)),g||[]}},dequeue:function(m,h){h=h||"fx";var s=bv.queue(m,h),q=s.length,p=s.shift(),o=bv._queueHooks(m,h),n=function(){bv.dequeue(m,h)};"inprogress"===p&&(p=s.shift(),q--),p&&("fx"===h&&s.unshift("inprogress"),delete o.stop,p.call(m,n,o)),!q&&o&&o.empty.fire()},_queueHooks:function(e,d){var f=d+"queueHooks";return bZ.get(e,f)||bZ.access(e,f,{empty:bv.Callbacks("once memory").add(function(){bZ.remove(e,[d+"queue",f])})})}}),bv.fn.extend({queue:function(e,d){var f=2;return"string"!=typeof e&&(d=e,e="fx",f--),arguments.length<f?bv.queue(this[0],e):void 0===d?this:this.each(function(){var a=bv.queue(this,e,d);bv._queueHooks(this,e),"fx"===e&&"inprogress"!==a[0]&&bv.dequeue(this,e)})},dequeue:function(b){return this.each(function(){bv.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(n,m){var u,t=1,s=bv.Deferred(),q=this,p=this.length,o=function(){--t||s.resolveWith(q,[q])};"string"!=typeof n&&(m=n,n=void 0),n=n||"fx";while(p--){u=bZ.get(q[p],n+"queueHooks"),u&&u.empty&&(t++,u.empty.add(o))}return o(),s.promise(m)}});var cB=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,bQ=new RegExp("^(?:([+-])=|)("+cB+")([a-z%]*)$","i"),cA=["Top","Right","Bottom","Left"],cj=function(e,d){return e=d||e,"none"===e.style.display||""===e.style.display&&bv.contains(e.ownerDocument,e)&&"none"===bv.css(e,"display")},bK=function(m,h,s,q){var p,o,n={};for(o in h){n[o]=m.style[o],m.style[o]=h[o]}p=s.apply(m,q||[]);for(o in h){m.style[o]=n[o]}return p};function bi(z,w,v,u){var t,s=1,q=20,p=u?function(){return u.cur()}:function(){return bv.css(z,w,"")},o=p(),n=v&&v[3]||(bv.cssNumber[w]?"":"px"),m=(bv.cssNumber[w]||"px"!==n&&+o)&&bQ.exec(bv.css(z,w));if(m&&m[3]!==n){n=n||m[3],v=v||[],m=+o||1;do{s=s||".5",m/=s,bv.style(z,w,m+n)}while(s!==(s=p()/o)&&1!==s&&--q)}return v&&(m=+m||+o||0,t=v[1]?m+(v[1]+1)*v[2]:+v[2],u&&(u.unit=n,u.start=m,u.end=t)),t}var a9={};function a2(g){var f,n=g.ownerDocument,m=g.nodeName,h=a9[m];return h?h:(f=n.body.appendChild(n.createElement(m)),h=bv.css(f,"display"),f.parentNode.removeChild(f),"none"===h&&(h="block"),a9[m]=h,h)}function aT(m,h){for(var s,q,p=[],o=0,n=m.length;o<n;o++){q=m[o],q.style&&(s=q.style.display,h?("none"===s&&(p[o]=bZ.get(q,"display")||null,p[o]||(q.style.display="")),""===q.style.display&&cj(q)&&(p[o]=a2(q))):"none"!==s&&(p[o]="none",bZ.set(q,"display",s)))}for(o=0;o<n;o++){null!=p[o]&&(m[o].style.display=p[o])}return m}bv.fn.extend({show:function(){return aT(this,!0)},hide:function(){return aT(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){cj(this)?bv(this).show():bv(this).hide()})}});var aL=/^(?:checkbox|radio)$/i,aD=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,av=/^$|\/(?:java|ecma)script/i,am={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};am.optgroup=am.option,am.tbody=am.tfoot=am.colgroup=am.caption=am.thead,am.th=am.td;function ad(e,d){var f="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(d||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(d||"*"):[];return void 0===d||d&&bv.nodeName(e,d)?bv.merge([e],f):f}function cF(f,e){for(var h=0,g=f.length;h<g;h++){bZ.set(f[h],"globalEval",!e||bZ.get(e[h],"globalEval"))}}var cu=/<|&#?\w+;/;function bU(G,F,E,D,C){for(var B,A,z,w,v,u,t=F.createDocumentFragment(),s=[],q=0,p=G.length;q<p;q++){if(B=G[q],B||0===B){if("object"===bv.type(B)){bv.merge(s,B.nodeType?[B]:B)}else{if(cu.test(B)){A=A||t.appendChild(F.createElement("div")),z=(aD.exec(B)||["",""])[1].toLowerCase(),w=am[z]||am._default,A.innerHTML=w[1]+bv.htmlPrefilter(B)+w[2],u=w[0];while(u--){A=A.lastChild}bv.merge(s,A.childNodes),A=t.firstChild,A.textContent=""}else{s.push(F.createTextNode(B))}}}}t.textContent="",q=0;while(B=s[q++]){if(D&&bv.inArray(B,D)>-1){C&&C.push(B)}else{if(v=bv.contains(B.ownerDocument,B),A=ad(t.appendChild(B),"script"),v&&cF(A),E){u=0;while(B=A[u++]){av.test(B.type||"")&&E.push(B)}}}}return t}!function(){var e=bM.createDocumentFragment(),d=e.appendChild(bM.createElement("div")),f=bM.createElement("input");f.setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),d.appendChild(f),bz.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",bz.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue}();var bn=bM.documentElement,bf=/^key/,a6=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,aX=/^([^.]*)(?:\.(.+)|)/;function aP(){return !0}function aH(){return !1}function az(){try{return bM.activeElement}catch(b){}}function aq(n,m,u,t,s,q){var p,o;if("object"==typeof m){"string"!=typeof u&&(t=t||u,u=void 0);for(o in m){aq(n,o,u,t,m[o],q)}return n}if(null==t&&null==s?(s=u,t=u=void 0):null==s&&("string"==typeof u?(s=t,t=void 0):(s=t,t=u,u=void 0)),s===!1){s=aH}else{if(!s){return n}}return 1===q&&(p=s,s=function(b){return bv().off(b),p.apply(this,arguments)},s.guid=p.guid||(p.guid=bv.guid++)),n.each(function(){bv.event.add(this,m,s,t,u)})}bv.event={global:{},add:function(K,J,I,H,G){var F,E,D,C,B,A,z,w,v,u,t,s=bZ.get(K);if(s){I.handler&&(F=I,I=F.handler,G=F.selector),G&&bv.find.matchesSelector(bn,G),I.guid||(I.guid=bv.guid++),(C=s.events)||(C=s.events={}),(E=s.handle)||(E=s.handle=function(a){return"undefined"!=typeof bv&&bv.event.triggered!==a.type?bv.event.dispatch.apply(K,arguments):void 0}),J=(J||"").match(cd)||[""],B=J.length;while(B--){D=aX.exec(J[B])||[],v=t=D[1],u=(D[2]||"").split(".").sort(),v&&(z=bv.event.special[v]||{},v=(G?z.delegateType:z.bindType)||v,z=bv.event.special[v]||{},A=bv.extend({type:v,origType:t,data:H,handler:I,guid:I.guid,selector:G,needsContext:G&&bv.expr.match.needsContext.test(G),namespace:u.join(".")},F),(w=C[v])||(w=C[v]=[],w.delegateCount=0,z.setup&&z.setup.call(K,H,u,E)!==!1||K.addEventListener&&K.addEventListener(v,E)),z.add&&(z.add.call(K,A),A.handler.guid||(A.handler.guid=I.guid)),G?w.splice(w.delegateCount++,0,A):w.push(A),bv.event.global[v]=!0)}}},remove:function(K,J,I,H,G){var F,E,D,C,B,A,z,w,v,u,t,s=bZ.hasData(K)&&bZ.get(K);if(s&&(C=s.events)){J=(J||"").match(cd)||[""],B=J.length;while(B--){if(D=aX.exec(J[B])||[],v=t=D[1],u=(D[2]||"").split(".").sort(),v){z=bv.event.special[v]||{},v=(H?z.delegateType:z.bindType)||v,w=C[v]||[],D=D[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"),E=F=w.length;while(F--){A=w[F],!G&&t!==A.origType||I&&I.guid!==A.guid||D&&!D.test(A.namespace)||H&&H!==A.selector&&("**"!==H||!A.selector)||(w.splice(F,1),A.selector&&w.delegateCount--,z.remove&&z.remove.call(K,A))}E&&!w.length&&(z.teardown&&z.teardown.call(K,u,s.handle)!==!1||bv.removeEvent(K,v,s.handle),delete C[v])}else{for(v in C){bv.event.remove(K,v+J[B],I,H,!0)}}}bv.isEmptyObject(C)&&bZ.remove(K,"handle events")}},dispatch:function(z){var w=bv.event.fix(z),v,u,t,s,q,p,o=new Array(arguments.length),n=(bZ.get(this,"events")||{})[w.type]||[],m=bv.event.special[w.type]||{};for(o[0]=w,v=1;v<arguments.length;v++){o[v]=arguments[v]}if(w.delegateTarget=this,!m.preDispatch||m.preDispatch.call(this,w)!==!1){p=bv.event.handlers.call(this,w,n),v=0;while((s=p[v++])&&!w.isPropagationStopped()){w.currentTarget=s.elem,u=0;while((q=s.handlers[u++])&&!w.isImmediatePropagationStopped()){w.rnamespace&&!w.rnamespace.test(q.namespace)||(w.handleObj=q,w.data=q.data,t=((bv.event.special[q.origType]||{}).handle||q.handler).apply(s.elem,o),void 0!==t&&(w.result=t)===!1&&(w.preventDefault(),w.stopPropagation()))}}return m.postDispatch&&m.postDispatch.call(this,w),w.result}},handlers:function(v,u){var t,s,q,p,o=[],n=u.delegateCount,m=v.target;if(n&&m.nodeType&&("click"!==v.type||isNaN(v.button)||v.button<1)){for(;m!==this;m=m.parentNode||this){if(1===m.nodeType&&(m.disabled!==!0||"click"!==v.type)){for(s=[],t=0;t<n;t++){p=u[t],q=p.selector+" ",void 0===s[q]&&(s[q]=p.needsContext?bv(q,this).index(m)>-1:bv.find(q,this,null,[m]).length),s[q]&&s.push(p)}s.length&&o.push({elem:m,handlers:s})}}}return n<u.length&&o.push({elem:this,handlers:u.slice(n)}),o},addProp:function(e,d){Object.defineProperty(bv.Event.prototype,e,{enumerable:!0,configurable:!0,get:bv.isFunction(d)?function(){if(this.originalEvent){return d(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(a){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:a})}})},fix:function(b){return b[bv.expando]?b:new bv.Event(b)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==az()&&this.focus){return this.focus(),!1}},delegateType:"focusin"},blur:{trigger:function(){if(this===az()&&this.blur){return this.blur(),!1}},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&bv.nodeName(this,"input")){return this.click(),!1}},_default:function(b){return bv.nodeName(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}},bv.removeEvent=function(e,d,f){e.removeEventListener&&e.removeEventListener(d,f)},bv.Event=function(e,d){return this instanceof bv.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?aP:aH,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,d&&bv.extend(this,d),this.timeStamp=e&&e.timeStamp||bv.now(),void (this[bv.expando]=!0)):new bv.Event(e,d)},bv.Event.prototype={constructor:bv.Event,isDefaultPrevented:aH,isPropagationStopped:aH,isImmediatePropagationStopped:aH,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=aP,b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=aP,b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=aP,b&&!this.isSimulated&&b.stopImmediatePropagation(),this.stopPropagation()}},bv.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var d=e.button;return null==e.which&&bf.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==d&&a6.test(e.type)?1&d?1:2&d?3:4&d?2:0:e.which}},bv.event.addProp),bv.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,d){bv.event.special[e]={delegateType:d,bindType:d,handle:function(b){var n,m=this,h=b.relatedTarget,g=b.handleObj;return h&&(h===m||bv.contains(m,h))||(b.type=g.origType,n=g.handler.apply(this,arguments),b.type=d),n}}}),bv.fn.extend({on:function(f,e,h,g){return aq(this,f,e,h,g)},one:function(f,e,h,g){return aq(this,f,e,h,g,1)},off:function(g,f,n){var m,h;if(g&&g.preventDefault&&g.handleObj){return m=g.handleObj,bv(g.delegateTarget).off(m.namespace?m.origType+"."+m.namespace:m.origType,m.selector,m.handler),this}if("object"==typeof g){for(h in g){this.off(h,f,g[h])}return this}return f!==!1&&"function"!=typeof f||(n=f,f=void 0),n===!1&&(n=aH),this.each(function(){bv.event.remove(this,g,n,f)})}});var ah=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,cJ=/<script|<style|<link/i,cy=/checked\s*(?:[^=]|=\s*.checked.)/i,a0=/^true\/(.*)/,aR=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function aJ(e,d){return bv.nodeName(e,"table")&&bv.nodeName(11!==d.nodeType?d:d.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function aB(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function at(e){var d=a0.exec(e.type);return d?e.type=d[1]:e.removeAttribute("type"),e}function ak(w,v){var u,t,s,q,p,o,n,m;if(1===v.nodeType){if(bZ.hasData(w)&&(q=bZ.access(w),p=bZ.set(v,q),m=q.events)){delete p.handle,p.events={};for(s in m){for(u=0,t=m[s].length;u<t;u++){bv.event.add(v,s,m[s][u])}}}bY.hasData(w)&&(o=bY.access(w),n=bv.extend({},o),bY.set(v,n))}}function cL(e,d){var f=d.nodeName.toLowerCase();"input"===f&&aL.test(e.type)?d.checked=e.checked:"input"!==f&&"textarea"!==f||(d.defaultValue=e.defaultValue)}function cD(F,E,D,C){E=bH.apply([],E);var B,A,z,w,v,u,t=0,p=F.length,o=p-1,g=E[0],G=bv.isFunction(g);if(G||p>1&&"string"==typeof g&&!bz.checkClone&&cy.test(g)){return F.each(function(b){var a=F.eq(b);G&&(E[0]=g.call(this,b,a.html())),cD(a,E,D,C)})}if(p&&(B=bU(E,F[0].ownerDocument,!1,F,C),A=B.firstChild,1===B.childNodes.length&&(B=A),A||C)){for(z=bv.map(ad(B,"script"),aB),w=z.length;t<p;t++){v=B,t!==o&&(v=bv.clone(v,!0,!0),w&&bv.merge(z,ad(v,"script"))),D.call(F[t],v,t)}if(w){for(u=z[z.length-1].ownerDocument,bv.map(z,at),t=0;t<w;t++){v=z[t],av.test(v.type||"")&&!bZ.access(v,"globalEval")&&bv.contains(u,v)&&(v.src?bv._evalUrl&&bv._evalUrl(v.src):by(v.textContent.replace(aR,""),u))}}}return F}function cs(h,g,p){for(var o,n=g?bv.filter(g,h):h,m=0;null!=(o=n[m]);m++){p||1!==o.nodeType||bv.cleanData(ad(o)),o.parentNode&&(p&&bv.contains(o.ownerDocument,o)&&cF(ad(o,"script")),o.parentNode.removeChild(o))}return h}bv.extend({htmlPrefilter:function(b){return b.replace(ah,"<$1></$2>")},clone:function(v,u,t){var s,q,p,o,n=v.cloneNode(!0),m=bv.contains(v.ownerDocument,v);if(!(bz.noCloneChecked||1!==v.nodeType&&11!==v.nodeType||bv.isXMLDoc(v))){for(o=ad(n),p=ad(v),s=0,q=p.length;s<q;s++){cL(p[s],o[s])}}if(u){if(t){for(p=p||ad(v),o=o||ad(n),s=0,q=p.length;s<q;s++){ak(p[s],o[s])}}else{ak(v,n)}}return o=ad(n,"script"),o.length>0&&cF(o,!m&&ad(v,"script")),n},cleanData:function(h){for(var g,p,o,n=bv.event.special,m=0;void 0!==(p=h[m]);m++){if(b1(p)){if(g=p[bZ.expando]){if(g.events){for(o in g.events){n[o]?bv.event.remove(p,o):bv.removeEvent(p,o,g.handle)}}p[bZ.expando]=void 0}p[bY.expando]&&(p[bY.expando]=void 0)}}}}),bv.fn.extend({detach:function(b){return cs(this,b,!0)},remove:function(b){return cs(this,b)},text:function(b){return b2(this,function(d){return void 0===d?bv.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=d)})},null,b,arguments.length)},append:function(){return cD(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=aJ(this,e);d.appendChild(e)}})},prepend:function(){return cD(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=aJ(this,e);d.insertBefore(e,d.firstChild)}})},before:function(){return cD(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return cD(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var e,d=0;null!=(e=this[d]);d++){1===e.nodeType&&(bv.cleanData(ad(e,!1)),e.textContent="")}return this},clone:function(e,d){return e=null!=e&&e,d=null==d?e:d,this.map(function(){return bv.clone(this,e,d)})},html:function(b){return b2(this,function(g){var f=this[0]||{},n=0,m=this.length;if(void 0===g&&1===f.nodeType){return f.innerHTML}if("string"==typeof g&&!cJ.test(g)&&!am[(aD.exec(g)||["",""])[1].toLowerCase()]){g=bv.htmlPrefilter(g);try{for(;n<m;n++){f=this[n]||{},1===f.nodeType&&(bv.cleanData(ad(f,!1)),f.innerHTML=g)}f=0}catch(h){}}f&&this.empty().append(g)},null,b,arguments.length)},replaceWith:function(){var b=[];return cD(this,arguments,function(a){var d=this.parentNode;bv.inArray(this,b)<0&&(bv.cleanData(ad(this)),d&&d.replaceChild(a,this))},b)}}),bv.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,d){bv.fn[e]=function(b){for(var p,o=[],n=bv(b),m=n.length-1,h=0;h<=m;h++){p=h===m?this:this.clone(!0),bv(n[h])[d](p),bG.apply(o,p.get())}return this.pushStack(o)}});var bS=/^margin/,bk=new RegExp("^("+cB+")(?!px)[a-z%]+$","i"),bd=function(a){var d=a.ownerDocument.defaultView;return d&&d.opener||(d=bP),d.getComputedStyle(a)};!function(){function a(){if(d){d.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",d.innerHTML="",bn.appendChild(m);var e=bP.getComputedStyle(d);q="1%"!==e.top,n="2px"===e.marginLeft,p="4px"===e.width,d.style.marginRight="50%",o="4px"===e.marginRight,bn.removeChild(m),d=null}}var q,p,o,n,m=bM.createElement("div"),d=bM.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",bz.clearCloneStyle="content-box"===d.style.backgroundClip,m.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",m.appendChild(d),bv.extend(bz,{pixelPosition:function(){return a(),q},boxSizingReliable:function(){return a(),p},pixelMarginRight:function(){return a(),o},reliableMarginLeft:function(){return a(),n}}))}();function a4(n,m,u){var t,s,q,p,o=n.style;return u=u||bd(n),u&&(p=u.getPropertyValue(m)||u[m],""!==p||bv.contains(n.ownerDocument,n)||(p=bv.style(n,m)),!bz.pixelMarginRight()&&bk.test(p)&&bS.test(m)&&(t=o.width,s=o.minWidth,q=o.maxWidth,o.minWidth=o.maxWidth=o.width=p,p=u.width,o.width=t,o.minWidth=s,o.maxWidth=q)),void 0!==p?p+"":p}function aV(e,d){return{get:function(){return e()?void delete this.get:(this.get=d).apply(this,arguments)}}}var aN=/^(none|table(?!-c[ea]).+)/,aF={position:"absolute",visibility:"hidden",display:"block"},ax={letterSpacing:"0",fontWeight:"400"},ao=["Webkit","Moz","ms"],af=bM.createElement("div").style;function cH(e){if(e in af){return e}var d=e[0].toUpperCase()+e.slice(1),f=ao.length;while(f--){if(e=ao[f]+d,e in af){return e}}}function cw(f,e,h){var g=bQ.exec(e);return g?Math.max(0,g[2]-(h||0))+(g[3]||"px"):e}function b4(m,h,s,q,p){for(var o=s===(q?"border":"content")?4:"width"===h?1:0,n=0;o<4;o+=2){"margin"===s&&(n+=bv.css(m,s+cA[o],!0,p)),q?("content"===s&&(n-=bv.css(m,"padding"+cA[o],!0,p)),"margin"!==s&&(n-=bv.css(m,"border"+cA[o]+"Width",!0,p))):(n+=bv.css(m,"padding"+cA[o],!0,p),"padding"!==s&&(n+=bv.css(m,"border"+cA[o]+"Width",!0,p)))}return n}function bx(m,h,s){var q,p=!0,o=bd(m),n="border-box"===bv.css(m,"boxSizing",!1,o);if(m.getClientRects().length&&(q=m.getBoundingClientRect()[h]),q<=0||null==q){if(q=a4(m,h,o),(q<0||null==q)&&(q=m.style[h]),bk.test(q)){return q}p=n&&(bz.boxSizingReliable()||q===m.style[h]),q=parseFloat(q)||0}return q+b4(m,h,s||(n?"border":"content"),p,o)+"px"}bv.extend({cssHooks:{opacity:{get:function(e,d){if(d){var f=a4(e,"opacity");return""===f?"1":f}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(v,u,t,s){if(v&&3!==v.nodeType&&8!==v.nodeType&&v.style){var q,p,o,n=bv.camelCase(u),m=v.style;return u=bv.cssProps[n]||(bv.cssProps[n]=cH(n)||n),o=bv.cssHooks[u]||bv.cssHooks[n],void 0===t?o&&"get" in o&&void 0!==(q=o.get(v,!1,s))?q:m[u]:(p=typeof t,"string"===p&&(q=bQ.exec(t))&&q[1]&&(t=bi(v,u,q),p="number"),null!=t&&t===t&&("number"===p&&(t+=q&&q[3]||(bv.cssNumber[n]?"":"px")),bz.clearCloneStyle||""!==t||0!==u.indexOf("background")||(m[u]="inherit"),o&&"set" in o&&void 0===(t=o.set(v,t,s))||(m[u]=t)),void 0)}},css:function(n,m,u,t){var s,q,p,o=bv.camelCase(m);return m=bv.cssProps[o]||(bv.cssProps[o]=cH(o)||o),p=bv.cssHooks[m]||bv.cssHooks[o],p&&"get" in p&&(s=p.get(n,!0,u)),void 0===s&&(s=a4(n,m,t)),"normal"===s&&m in ax&&(s=ax[m]),""===u||u?(q=parseFloat(s),u===!0||isFinite(q)?q||0:s):s}}),bv.each(["height","width"],function(e,d){bv.cssHooks[d]={get:function(b,g,f){if(g){return !aN.test(bv.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?bx(b,d,f):bK(b,aF,function(){return bx(b,d,f)})}},set:function(b,p,o){var n,m=o&&bd(b),h=o&&b4(b,d,o,"border-box"===bv.css(b,"boxSizing",!1,m),m);return h&&(n=bQ.exec(p))&&"px"!==(n[3]||"px")&&(b.style[d]=p,p=bv.css(b,d)),cw(b,p,h)}}}),bv.cssHooks.marginLeft=aV(bz.reliableMarginLeft,function(e,d){if(d){return(parseFloat(a4(e,"marginLeft"))||e.getBoundingClientRect().left-bK(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}}),bv.each({margin:"",padding:"",border:"Width"},function(e,d){bv.cssHooks[e+d]={expand:function(h){for(var g=0,b={},a="string"==typeof h?h.split(" "):[h];g<4;g++){b[e+cA[g]+d]=a[g]||a[g-2]||a[0]}return b}},bS.test(e)||(bv.cssHooks[e+d].set=cw)}),bv.fn.extend({css:function(e,d){return b2(this,function(m,h,s){var q,p,o={},n=0;if(bv.isArray(h)){for(q=bd(m),p=h.length;n<p;n++){o[h[n]]=bv.css(m,h[n],!1,q)}return o}return void 0!==s?bv.style(m,h,s):bv.css(m,h)},e,d,arguments.length>1)}});function bg(g,f,n,m,h){return new bg.prototype.init(g,f,n,m,h)}bv.Tween=bg,bg.prototype={constructor:bg,init:function(h,g,p,o,n,m){this.elem=h,this.prop=p,this.easing=n||bv.easing._default,this.options=g,this.start=this.now=this.cur(),this.end=o,this.unit=m||(bv.cssNumber[p]?"":"px")},cur:function(){var b=bg.propHooks[this.prop];return b&&b.get?b.get(this):bg.propHooks._default.get(this)},run:function(e){var d,f=bg.propHooks[this.prop];return this.options.duration?this.pos=d=bv.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=d=e,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),f&&f.set?f.set(this):bg.propHooks._default.set(this),this}},bg.prototype.init.prototype=bg.prototype,bg.propHooks={_default:{get:function(e){var d;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(d=bv.css(e.elem,e.prop,""),d&&"auto"!==d?d:0)},set:function(b){bv.fx.step[b.prop]?bv.fx.step[b.prop](b):1!==b.elem.nodeType||null==b.elem.style[bv.cssProps[b.prop]]&&!bv.cssHooks[b.prop]?b.elem[b.prop]=b.now:bv.style(b.elem,b.prop,b.now+b.unit)}}},bg.propHooks.scrollTop=bg.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}},bv.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2},_default:"swing"},bv.fx=bg.prototype.init,bv.fx.step={};var a7,aY,cq=/^(?:toggle|show|hide)$/,ai=/queueHooks$/;function cz(){aY&&(bP.requestAnimationFrame(cz),bv.fx.tick())}function ch(){return bP.setTimeout(function(){a7=void 0}),a7=bv.now()}function bI(g,f){var n,m=0,h={height:g};for(f=f?1:0;m<4;m+=2-f){n=cA[m],h["margin"+n]=h["padding"+n]=g}return f&&(h.opacity=h.width=g),h}function bh(m,h,s){for(var q,p=(aS.tweeners[h]||[]).concat(aS.tweeners["*"]),o=0,n=p.length;o<n;o++){if(q=p[o].call(s,h,m)){return q}}}function a8(K,J,I){var H,G,F,E,D,C,B,A,z="width" in J||"height" in J,w=this,v={},u=K.style,t=K.nodeType&&cj(K),s=bZ.get(K,"fxshow");I.queue||(E=bv._queueHooks(K,"fx"),null==E.unqueued&&(E.unqueued=0,D=E.empty.fire,E.empty.fire=function(){E.unqueued||D()}),E.unqueued++,w.always(function(){w.always(function(){E.unqueued--,bv.queue(K,"fx").length||E.empty.fire()})}));for(H in J){if(G=J[H],cq.test(G)){if(delete J[H],F=F||"toggle"===G,G===(t?"hide":"show")){if("show"!==G||!s||void 0===s[H]){continue}t=!0}v[H]=s&&s[H]||bv.style(K,H)}}if(C=!bv.isEmptyObject(J),C||!bv.isEmptyObject(v)){z&&1===K.nodeType&&(I.overflow=[u.overflow,u.overflowX,u.overflowY],B=s&&s.display,null==B&&(B=bZ.get(K,"display")),A=bv.css(K,"display"),"none"===A&&(B?A=B:(aT([K],!0),B=K.style.display||B,A=bv.css(K,"display"),aT([K]))),("inline"===A||"inline-block"===A&&null!=B)&&"none"===bv.css(K,"float")&&(C||(w.done(function(){u.display=B}),null==B&&(A=u.display,B="none"===A?"":A)),u.display="inline-block")),I.overflow&&(u.overflow="hidden",w.always(function(){u.overflow=I.overflow[0],u.overflowX=I.overflow[1],u.overflowY=I.overflow[2]})),C=!1;for(H in v){C||(s?"hidden" in s&&(t=s.hidden):s=bZ.access(K,"fxshow",{display:B}),F&&(s.hidden=!t),t&&aT([K],!0),w.done(function(){t||aT([K]),bZ.remove(K,"fxshow");for(H in v){bv.style(K,H,v[H])}})),C=bh(t?s[H]:0,H,w),H in s||(s[H]=C.start,t&&(C.end=C.start,C.start=0))}}}function a1(m,h){var s,q,p,o,n;for(s in m){if(q=bv.camelCase(s),p=h[q],o=m[s],bv.isArray(o)&&(p=o[1],o=m[s]=o[0]),s!==q&&(m[q]=o,delete m[s]),n=bv.cssHooks[q],n&&"expand" in n){o=n.expand(o),delete m[q];for(s in o){s in m||(m[s]=o[s],h[s]=p)}}else{h[q]=p}}}function aS(z,w,v){var u,t,s=0,q=aS.prefilters.length,p=bv.Deferred().always(function(){delete o.elem}),o=function(){if(t){return !1}for(var a=a7||ch(),C=Math.max(0,n.startTime+n.duration-a),B=C/n.duration||0,A=1-B,h=0,e=n.tweens.length;h<e;h++){n.tweens[h].run(A)}return p.notifyWith(z,[n,A,C]),A<1&&e?C:(p.resolveWith(z,[n]),!1)},n=p.promise({elem:z,props:bv.extend({},w),opts:bv.extend(!0,{specialEasing:{},easing:bv.easing._default},v),originalProperties:w,originalOptions:v,startTime:a7||ch(),duration:v.duration,tweens:[],createTween:function(a,f){var e=bv.Tween(z,n.opts,a,f,n.opts.specialEasing[a]||n.opts.easing);return n.tweens.push(e),e},stop:function(a){var f=0,e=a?n.tweens.length:0;if(t){return this}for(t=!0;f<e;f++){n.tweens[f].run(1)}return a?(p.notifyWith(z,[n,1,0]),p.resolveWith(z,[n,a])):p.rejectWith(z,[n,a]),this}}),m=n.props;for(a1(m,n.opts.specialEasing);s<q;s++){if(u=aS.prefilters[s].call(n,z,m,n.opts)){return bv.isFunction(u.stop)&&(bv._queueHooks(n.elem,n.opts.queue).stop=bv.proxy(u.stop,u)),u}}return bv.map(m,bh,n),bv.isFunction(n.opts.start)&&n.opts.start.call(z,n),bv.fx.timer(bv.extend(o,{elem:z,anim:n,queue:n.opts.queue})),n.progress(n.opts.progress).done(n.opts.done,n.opts.complete).fail(n.opts.fail).always(n.opts.always)}bv.Animation=bv.extend(aS,{tweeners:{"*":[function(e,d){var f=this.createTween(e,d);return bi(f.elem,e,bQ.exec(d),f),f}]},tweener:function(g,f){bv.isFunction(g)?(f=g,g=["*"]):g=g.match(cd);for(var n,m=0,h=g.length;m<h;m++){n=g[m],aS.tweeners[n]=aS.tweeners[n]||[],aS.tweeners[n].unshift(f)}},prefilters:[a8],prefilter:function(e,d){d?aS.prefilters.unshift(e):aS.prefilters.push(e)}}),bv.speed=function(f,d,h){var g=f&&"object"==typeof f?bv.extend({},f):{complete:h||!h&&d||bv.isFunction(f)&&f,duration:f,easing:h&&d||d&&!bv.isFunction(d)&&d};return bv.fx.off||bM.hidden?g.duration=0:g.duration="number"==typeof g.duration?g.duration:g.duration in bv.fx.speeds?bv.fx.speeds[g.duration]:bv.fx.speeds._default,null!=g.queue&&g.queue!==!0||(g.queue="fx"),g.old=g.complete,g.complete=function(){bv.isFunction(g.old)&&g.old.call(this),g.queue&&bv.dequeue(this,g.queue)},g},bv.fn.extend({fadeTo:function(f,e,h,g){return this.filter(cj).css("opacity",0).show().end().animate({opacity:e},f,h,g)},animate:function(m,h,s,q){var p=bv.isEmptyObject(m),o=bv.speed(h,s,q),n=function(){var a=aS(this,bv.extend({},m),o);(p||bZ.get(this,"finish"))&&a.stop(!0)};return n.finish=n,p||o.queue===!1?this.each(n):this.queue(o.queue,n)},stop:function(f,e,h){var g=function(m){var d=m.stop;delete m.stop,d(h)};return"string"!=typeof f&&(h=e,e=f,f=void 0),e&&f!==!1&&this.queue(f||"fx",[]),this.each(function(){var a=!0,n=null!=f&&f+"queueHooks",m=bv.timers,d=bZ.get(this);if(n){d[n]&&d[n].stop&&g(d[n])}else{for(n in d){d[n]&&d[n].stop&&ai.test(n)&&g(d[n])}}for(n=m.length;n--;){m[n].elem!==this||null!=f&&m[n].queue!==f||(m[n].anim.stop(h),a=!1,m.splice(n,1))}!a&&h||bv.dequeue(this,f)})},finish:function(b){return b!==!1&&(b=b||"fx"),this.each(function(){var a,p=bZ.get(this),o=p[b+"queue"],n=p[b+"queueHooks"],m=bv.timers,h=o?o.length:0;for(p.finish=!0,bv.queue(this,b,[]),n&&n.stop&&n.stop.call(this,!0),a=m.length;a--;){m[a].elem===this&&m[a].queue===b&&(m[a].anim.stop(!0),m.splice(a,1))}for(a=0;a<h;a++){o[a]&&o[a].finish&&o[a].finish.call(this)}delete p.finish})}}),bv.each(["toggle","show","hide"],function(e,d){var f=bv.fn[d];bv.fn[d]=function(b,h,g){return null==b||"boolean"==typeof b?f.apply(this,arguments):this.animate(bI(d,!0),b,h,g)}}),bv.each({slideDown:bI("show"),slideUp:bI("hide"),slideToggle:bI("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,d){bv.fn[e]=function(b,g,f){return this.animate(d,b,g,f)}}),bv.timers=[],bv.fx.tick=function(){var e,d=0,f=bv.timers;for(a7=bv.now();d<f.length;d++){e=f[d],e()||f[d]!==e||f.splice(d--,1)}f.length||bv.fx.stop(),a7=void 0},bv.fx.timer=function(b){bv.timers.push(b),b()?bv.fx.start():bv.timers.pop()},bv.fx.interval=13,bv.fx.start=function(){aY||(aY=bP.requestAnimationFrame?bP.requestAnimationFrame(cz):bP.setInterval(bv.fx.tick,bv.fx.interval))},bv.fx.stop=function(){bP.cancelAnimationFrame?bP.cancelAnimationFrame(aY):bP.clearInterval(aY),aY=null},bv.fx.speeds={slow:600,fast:200,_default:400},bv.fn.delay=function(a,d){return a=bv.fx?bv.fx.speeds[a]||a:a,d=d||"fx",this.queue(d,function(g,f){var b=bP.setTimeout(g,a);f.stop=function(){bP.clearTimeout(b)}})},function(){var e=bM.createElement("input"),d=bM.createElement("select"),f=d.appendChild(bM.createElement("option"));e.type="checkbox",bz.checkOn=""!==e.value,bz.optSelected=f.selected,e=bM.createElement("input"),e.value="t",e.type="radio",bz.radioValue="t"===e.value}();var aK,aC=bv.expr.attrHandle;bv.fn.extend({attr:function(e,d){return b2(this,bv.attr,e,d,arguments.length>1)},removeAttr:function(b){return this.each(function(){bv.removeAttr(this,b)})}}),bv.extend({attr:function(h,g,p){var o,n,m=h.nodeType;if(3!==m&&8!==m&&2!==m){return"undefined"==typeof h.getAttribute?bv.prop(h,g,p):(1===m&&bv.isXMLDoc(h)||(n=bv.attrHooks[g.toLowerCase()]||(bv.expr.match.bool.test(g)?aK:void 0)),void 0!==p?null===p?void bv.removeAttr(h,g):n&&"set" in n&&void 0!==(o=n.set(h,p,g))?o:(h.setAttribute(g,p+""),p):n&&"get" in n&&null!==(o=n.get(h,g))?o:(o=bv.find.attr(h,g),null==o?void 0:o))}},attrHooks:{type:{set:function(e,d){if(!bz.radioValue&&"radio"===d&&bv.nodeName(e,"input")){var f=e.value;return e.setAttribute("type",d),f&&(e.value=f),d}}}},removeAttr:function(g,f){var n,m=0,h=f&&f.match(cd);if(h&&1===g.nodeType){while(n=h[m++]){g.removeAttribute(n)}}}}),aK={set:function(e,d,f){return d===!1?bv.removeAttr(e,f):e.setAttribute(f,f),f}},bv.each(bv.expr.match.bool.source.match(/\w+/g),function(e,d){var f=aC[d]||bv.find.attr;aC[d]=function(m,h,q){var p,o,n=h.toLowerCase();return q||(o=aC[n],aC[n]=p,p=null!=f(m,h,q)?n:null,aC[n]=o),p}});var au=/^(?:input|select|textarea|button)$/i,al=/^(?:a|area)$/i;bv.fn.extend({prop:function(e,d){return b2(this,bv.prop,e,d,arguments.length>1)},removeProp:function(b){return this.each(function(){delete this[bv.propFix[b]||b]})}}),bv.extend({prop:function(h,g,p){var o,n,m=h.nodeType;if(3!==m&&8!==m&&2!==m){return 1===m&&bv.isXMLDoc(h)||(g=bv.propFix[g]||g,n=bv.propHooks[g]),void 0!==p?n&&"set" in n&&void 0!==(o=n.set(h,p,g))?o:h[g]=p:n&&"get" in n&&null!==(o=n.get(h,g))?o:h[g]}},propHooks:{tabIndex:{get:function(e){var d=bv.find.attr(e,"tabindex");return d?parseInt(d,10):au.test(e.nodeName)||al.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),bz.optSelected||(bv.propHooks.selected={get:function(e){var d=e.parentNode;return d&&d.parentNode&&d.parentNode.selectedIndex,null},set:function(e){var d=e.parentNode;d&&(d.selectedIndex,d.parentNode&&d.parentNode.selectedIndex)}}),bv.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){bv.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;function cE(b){return b.getAttribute&&b.getAttribute("class")||""}bv.fn.extend({addClass:function(v){var u,t,s,q,p,o,n,m=0;if(bv.isFunction(v)){return this.each(function(a){bv(this).addClass(v.call(this,a,cE(this)))})}if("string"==typeof v&&v){u=v.match(cd)||[];while(t=this[m++]){if(q=cE(t),s=1===t.nodeType&&(" "+q+" ").replace(ac," ")){o=0;while(p=u[o++]){s.indexOf(" "+p+" ")<0&&(s+=p+" ")}n=bv.trim(s),q!==n&&t.setAttribute("class",n)}}}return this},removeClass:function(v){var u,t,s,q,p,o,n,m=0;if(bv.isFunction(v)){return this.each(function(a){bv(this).removeClass(v.call(this,a,cE(this)))})}if(!arguments.length){return this.attr("class","")}if("string"==typeof v&&v){u=v.match(cd)||[];while(t=this[m++]){if(q=cE(t),s=1===t.nodeType&&(" "+q+" ").replace(ac," ")){o=0;while(p=u[o++]){while(s.indexOf(" "+p+" ")>-1){s=s.replace(" "+p+" "," ")}}n=bv.trim(s),q!==n&&t.setAttribute("class",n)}}}return this},toggleClass:function(e,d){var f=typeof e;return"boolean"==typeof d&&"string"===f?d?this.addClass(e):this.removeClass(e):bv.isFunction(e)?this.each(function(a){bv(this).toggleClass(e.call(this,a,cE(this),d),d)}):this.each(function(){var a,m,h,g;if("string"===f){m=0,h=bv(this),g=e.match(cd)||[];while(a=g[m++]){h.hasClass(a)?h.removeClass(a):h.addClass(a)}}else{void 0!==e&&"boolean"!==f||(a=cE(this),a&&bZ.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||e===!1?"":bZ.get(this,"__className__")||""))}})},hasClass:function(f){var e,h,g=0;e=" "+f+" ";while(h=this[g++]){if(1===h.nodeType&&(" "+cE(h)+" ").replace(ac," ").indexOf(e)>-1){return !0}}return !1}});var ct=/\r/g,bT=/[\x20\t\r\n\f]+/g;bv.fn.extend({val:function(g){var f,n,m,h=this[0];if(arguments.length){return m=bv.isFunction(g),this.each(function(b){var a;1===this.nodeType&&(a=m?g.call(this,b,bv(this).val()):g,null==a?a="":"number"==typeof a?a+="":bv.isArray(a)&&(a=bv.map(a,function(d){return null==d?"":d+""})),f=bv.valHooks[this.type]||bv.valHooks[this.nodeName.toLowerCase()],f&&"set" in f&&void 0!==f.set(this,a,"value")||(this.value=a))})}if(h){return f=bv.valHooks[h.type]||bv.valHooks[h.nodeName.toLowerCase()],f&&"get" in f&&void 0!==(n=f.get(h,"value"))?n:(n=h.value,"string"==typeof n?n.replace(ct,""):null==n?"":n)}}}),bv.extend({valHooks:{option:{get:function(e){var d=bv.find.attr(e,"value");return null!=d?d:bv.trim(bv.text(e)).replace(bT," ")}},select:{get:function(v){for(var u,t,s=v.options,q=v.selectedIndex,p="select-one"===v.type,o=p?null:[],n=p?q+1:s.length,m=q<0?n:p?q:0;m<n;m++){if(t=s[m],(t.selected||m===q)&&!t.disabled&&(!t.parentNode.disabled||!bv.nodeName(t.parentNode,"optgroup"))){if(u=bv(t).val(),p){return u}o.push(u)}}return o},set:function(m,h){var s,q,p=m.options,o=bv.makeArray(h),n=p.length;while(n--){q=p[n],(q.selected=bv.inArray(bv.valHooks.option.get(q),o)>-1)&&(s=!0)}return s||(m.selectedIndex=-1),o}}}}),bv.each(["radio","checkbox"],function(){bv.valHooks[this]={set:function(e,d){if(bv.isArray(d)){return e.checked=bv.inArray(bv(e).val(),d)>-1}}},bz.checkOn||(bv.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var bl=/^(?:focusinfocus|focusoutblur)$/;bv.extend(bv.event,{trigger:function(F,E,D,C){var B,A,z,w,v,u,t,s=[D||bM],d=bC.call(F,"type")?F.type:F,a=bC.call(F,"namespace")?F.namespace.split("."):[];if(A=z=D=D||bM,3!==D.nodeType&&8!==D.nodeType&&!bl.test(d+bv.event.triggered)&&(d.indexOf(".")>-1&&(a=d.split("."),d=a.shift(),a.sort()),v=d.indexOf(":")<0&&"on"+d,F=F[bv.expando]?F:new bv.Event(d,"object"==typeof F&&F),F.isTrigger=C?2:3,F.namespace=a.join("."),F.rnamespace=F.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,F.result=void 0,F.target||(F.target=D),E=null==E?[F]:bv.makeArray(E,[F]),t=bv.event.special[d]||{},C||!t.trigger||t.trigger.apply(D,E)!==!1)){if(!C&&!t.noBubble&&!bv.isWindow(D)){for(w=t.delegateType||d,bl.test(w+d)||(A=A.parentNode);A;A=A.parentNode){s.push(A),z=A}z===(D.ownerDocument||bM)&&s.push(z.defaultView||z.parentWindow||bP)}B=0;while((A=s[B++])&&!F.isPropagationStopped()){F.type=B>1?w:t.bindType||d,u=(bZ.get(A,"events")||{})[F.type]&&bZ.get(A,"handle"),u&&u.apply(A,E),u=v&&A[v],u&&u.apply&&b1(A)&&(F.result=u.apply(A,E),F.result===!1&&F.preventDefault())}return F.type=d,C||F.isDefaultPrevented()||t._default&&t._default.apply(s.pop(),E)!==!1||!b1(D)||v&&bv.isFunction(D[d])&&!bv.isWindow(D)&&(z=D[v],z&&(D[v]=null),bv.event.triggered=d,D[d](),bv.event.triggered=void 0,z&&(D[v]=z)),F.result}},simulate:function(f,e,h){var g=bv.extend(new bv.Event,h,{type:f,isSimulated:!0});bv.event.trigger(g,null,e)}}),bv.fn.extend({trigger:function(e,d){return this.each(function(){bv.event.trigger(e,d,this)})},triggerHandler:function(e,d){var f=this[0];if(f){return bv.event.trigger(e,d,f,!0)}}}),bv.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,d){bv.fn[d]=function(b,f){return arguments.length>0?this.on(d,null,b,f):this.trigger(d)}}),bv.fn.extend({hover:function(e,d){return this.mouseenter(e).mouseleave(d||e)}}),bz.focusin="onfocusin" in bP,bz.focusin||bv.each({focus:"focusin",blur:"focusout"},function(e,d){var f=function(b){bv.event.simulate(d,b.target,bv.event.fix(b))};bv.event.special[d]={setup:function(){var b=this.ownerDocument||this,a=bZ.access(b,d);a||b.addEventListener(e,f,!0),bZ.access(b,d,(a||0)+1)},teardown:function(){var b=this.ownerDocument||this,a=bZ.access(b,d)-1;a?bZ.access(b,d,a):(b.removeEventListener(e,f,!0),bZ.remove(b,d))}}});var be=bP.location,a5=bv.now(),aW=/\?/;bv.parseXML=function(a){var f;if(!a||"string"!=typeof a){return null}try{f=(new bP.DOMParser).parseFromString(a,"text/xml")}catch(e){f=void 0}return f&&!f.getElementsByTagName("parsererror").length||bv.error("Invalid XML: "+a),f};var aO=/\[\]$/,aG=/\r?\n/g,ay=/^(?:submit|button|image|reset|file)$/i,ap=/^(?:input|select|textarea|keygen)/i;function ag(g,f,n,m){var h;if(bv.isArray(f)){bv.each(f,function(a,d){n||aO.test(g)?m(g,d):ag(g+"["+("object"==typeof d&&null!=d?a:"")+"]",d,n,m)})}else{if(n||"object"!==bv.type(f)){m(g,f)}else{for(h in f){ag(g+"["+h+"]",f[h],n,m)}}}}bv.param=function(g,f){var n,m=[],h=function(e,d){var o=bv.isFunction(d)?d():d;m[m.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==o?"":o)};if(bv.isArray(g)||g.jquery&&!bv.isPlainObject(g)){bv.each(g,function(){h(this.name,this.value)})}else{for(n in g){ag(n,g[n],f,h)}}return m.join("&")},bv.fn.extend({serialize:function(){return bv.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=bv.prop(this,"elements");return b?bv.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!bv(this).is(":disabled")&&ap.test(this.nodeName)&&!ay.test(b)&&(this.checked||!aL.test(b))}).map(function(e,d){var f=bv(this).val();return null==f?null:bv.isArray(f)?bv.map(f,function(b){return{name:d.name,value:b.replace(aG,"\r\n")}}):{name:d.name,value:f.replace(aG,"\r\n")}}).get()}});var cI=/%20/g,cx=/#.*$/,aZ=/([?&])_=[^&]*/,aQ=/^(.*?):[ \t]*([^\r\n]*)$/gm,aI=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,aA=/^(?:GET|HEAD)$/,ar=/^\/\//,aj={},cK={},cC="*/".concat("*"),cr=bM.createElement("a");cr.href=be.href;function bR(b){return function(a,n){"string"!=typeof a&&(n=a,a="*");var m,h=0,g=a.toLowerCase().match(cd)||[];if(bv.isFunction(n)){while(m=g[h++]){"+"===m[0]?(m=m.slice(1)||"*",(b[m]=b[m]||[]).unshift(n)):(b[m]=b[m]||[]).push(n)}}}}function bj(m,h,s,q){var p={},o=m===cK;function n(b){var a;return p[b]=!0,bv.each(m[b]||[],function(d,f){var e=f(h,s,q);return"string"!=typeof e||o||p[e]?o?!(a=e):void 0:(h.dataTypes.unshift(e),n(e),!1)}),a}return n(h.dataTypes[0])||!p["*"]&&n("*")}function bc(g,f){var n,m,h=bv.ajaxSettings.flatOptions||{};for(n in f){void 0!==f[n]&&((h[n]?g:m||(m={}))[n]=f[n])}return m&&bv.extend(!0,g,m),g}function a3(v,u,t){var s,q,p,o,n=v.contents,m=v.dataTypes;while("*"===m[0]){m.shift(),void 0===s&&(s=v.mimeType||u.getResponseHeader("Content-Type"))}if(s){for(q in n){if(n[q]&&n[q].test(s)){m.unshift(q);break}}}if(m[0] in t){p=m[0]}else{for(q in t){if(!m[0]||v.converters[q+" "+m[0]]){p=q;break}o||(o=q)}p=p||o}if(p){return p!==m[0]&&m.unshift(p),t[p]}}function aU(A,z,w,v){var u,t,s,q,p,o={},n=A.dataTypes.slice();if(n[1]){for(s in A.converters){o[s.toLowerCase()]=A.converters[s]}}t=n.shift();while(t){if(A.responseFields[t]&&(w[A.responseFields[t]]=z),!p&&v&&A.dataFilter&&(z=A.dataFilter(z,A.dataType)),p=t,t=n.shift()){if("*"===t){t=p}else{if("*"!==p&&p!==t){if(s=o[p+" "+t]||o["* "+t],!s){for(u in o){if(q=u.split(" "),q[1]===t&&(s=o[p+" "+q[0]]||o["* "+q[0]])){s===!0?s=o[u]:o[u]!==!0&&(t=q[0],n.unshift(q[1]));break}}}if(s!==!0){if(s&&A["throws"]){z=s(z)}else{try{z=s(z)}catch(m){return{state:"parsererror",error:s?m:"No conversion from "+p+" to "+t}}}}}}}}return{state:"success",data:z}}bv.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:aI.test(be.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":cC,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":bv.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,d){return d?bc(bc(e,bv.ajaxSettings),d):bc(bv.ajaxSettings,e)},ajaxPrefilter:bR(aj),ajaxTransport:bR(cK),ajax:function(W,V){"object"==typeof W&&(V=W,W=void 0),V=V||{};var U,T,S,R,Q,P,O,N,M,L,K=bv.ajaxSetup({},V),J=K.context||K,H=K.context&&(J.nodeType||J.jquery)?bv(J):bv.event,G=bv.Deferred(),F=bv.Callbacks("once memory"),E=K.statusCode||{},D={},C={},B="canceled",d={readyState:0,getResponseHeader:function(f){var e;if(O){if(!R){R={};while(e=aQ.exec(S)){R[e[1].toLowerCase()]=e[2]}}e=R[f.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return O?S:null},setRequestHeader:function(f,e){return null==O&&(f=C[f.toLowerCase()]=C[f.toLowerCase()]||f,D[f]=e),this},overrideMimeType:function(b){return null==O&&(K.mimeType=b),this},statusCode:function(f){var e;if(f){if(O){d.always(f[d.status])}else{for(e in f){E[e]=[E[e],f[e]]}}}return this},abort:function(f){var e=f||B;return U&&U.abort(e),I(0,e),this}};if(G.promise(d),K.url=((W||K.url||be.href)+"").replace(ar,be.protocol+"//"),K.type=V.method||V.type||K.method||K.type,K.dataTypes=(K.dataType||"*").toLowerCase().match(cd)||[""],null==K.crossDomain){P=bM.createElement("a");try{P.href=K.url,P.href=P.href,K.crossDomain=cr.protocol+"//"+cr.host!=P.protocol+"//"+P.host}catch(a){K.crossDomain=!0}}if(K.data&&K.processData&&"string"!=typeof K.data&&(K.data=bv.param(K.data,K.traditional)),bj(aj,K,V,d),O){return d}N=bv.event&&K.global,N&&0===bv.active++&&bv.event.trigger("ajaxStart"),K.type=K.type.toUpperCase(),K.hasContent=!aA.test(K.type),T=K.url.replace(cx,""),K.hasContent?K.data&&K.processData&&0===(K.contentType||"").indexOf("application/x-www-form-urlencoded")&&(K.data=K.data.replace(cI,"+")):(L=K.url.slice(T.length),K.data&&(T+=(aW.test(T)?"&":"?")+K.data,delete K.data),K.cache===!1&&(T=T.replace(aZ,""),L=(aW.test(T)?"&":"?")+"_="+a5+++L),K.url=T+L),K.ifModified&&(bv.lastModified[T]&&d.setRequestHeader("If-Modified-Since",bv.lastModified[T]),bv.etag[T]&&d.setRequestHeader("If-None-Match",bv.etag[T])),(K.data&&K.hasContent&&K.contentType!==!1||V.contentType)&&d.setRequestHeader("Content-Type",K.contentType),d.setRequestHeader("Accept",K.dataTypes[0]&&K.accepts[K.dataTypes[0]]?K.accepts[K.dataTypes[0]]+("*"!==K.dataTypes[0]?", "+cC+"; q=0.01":""):K.accepts["*"]);for(M in K.headers){d.setRequestHeader(M,K.headers[M])}if(K.beforeSend&&(K.beforeSend.call(J,d,K)===!1||O)){return d.abort()}if(B="abort",F.add(K.complete),d.done(K.success),d.fail(K.error),U=bj(cK,K,V,d)){if(d.readyState=1,N&&H.trigger("ajaxSend",[d,K]),O){return d}K.async&&K.timeout>0&&(Q=bP.setTimeout(function(){d.abort("timeout")},K.timeout));try{O=!1,U.send(D,I)}catch(a){if(O){throw a}I(-1,a)}}else{I(-1,"No Transport")}function I(s,q,p,o){var g,f,e,z,u,t=q;O||(O=!0,Q&&bP.clearTimeout(Q),U=void 0,S=o||"",d.readyState=s>0?4:0,g=s>=200&&s<300||304===s,p&&(z=a3(K,d,p)),z=aU(K,z,d,g),g?(K.ifModified&&(u=d.getResponseHeader("Last-Modified"),u&&(bv.lastModified[T]=u),u=d.getResponseHeader("etag"),u&&(bv.etag[T]=u)),204===s||"HEAD"===K.type?t="nocontent":304===s?t="notmodified":(t=z.state,f=z.data,e=z.error,g=!e)):(e=t,!s&&t||(t="error",s<0&&(s=0))),d.status=s,d.statusText=(q||t)+"",g?G.resolveWith(J,[f,t,d]):G.rejectWith(J,[d,t,e]),d.statusCode(E),E=void 0,N&&H.trigger(g?"ajaxSuccess":"ajaxError",[d,K,g?f:e]),F.fireWith(J,[d,t]),N&&(H.trigger("ajaxComplete",[d,K]),--bv.active||bv.event.trigger("ajaxStop")))}return d},getJSON:function(e,d,f){return bv.get(e,d,f,"json")},getScript:function(e,d){return bv.get(e,void 0,d,"script")}}),bv.each(["get","post"],function(e,d){bv[d]=function(b,h,g,f){return bv.isFunction(h)&&(f=f||g,g=h,h=void 0),bv.ajax(bv.extend({url:b,type:d,dataType:f,data:h,success:g},bv.isPlainObject(b)&&b))}}),bv._evalUrl=function(b){return bv.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},bv.fn.extend({wrapAll:function(e){var d;return this[0]&&(bv.isFunction(e)&&(e=e.call(this[0])),d=bv(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){var b=this;while(b.firstElementChild){b=b.firstElementChild}return b}).append(this)),this},wrapInner:function(b){return bv.isFunction(b)?this.each(function(a){bv(this).wrapInner(b.call(this,a))}):this.each(function(){var a=bv(this),d=a.contents();d.length?d.wrapAll(b):a.append(b)})},wrap:function(e){var d=bv.isFunction(e);return this.each(function(a){bv(this).wrapAll(d?e.call(this,a):e)})},unwrap:function(b){return this.parent(b).not("body").each(function(){bv(this).replaceWith(this.childNodes)}),this}}),bv.expr.pseudos.hidden=function(b){return !bv.expr.pseudos.visible(b)},bv.expr.pseudos.visible=function(b){return !!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)},bv.ajaxSettings.xhr=function(){try{return new bP.XMLHttpRequest}catch(a){}};var aM={0:200,1223:204},aE=bv.ajaxSettings.xhr();bz.cors=!!aE&&"withCredentials" in aE,bz.ajax=aE=!!aE,bv.ajaxTransport(function(a){var f,e;if(bz.cors||aE&&!a.crossDomain){return{send:function(o,n){var m,d=a.xhr();if(d.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(m in a.xhrFields){d[m]=a.xhrFields[m]}}a.mimeType&&d.overrideMimeType&&d.overrideMimeType(a.mimeType),a.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(m in o){d.setRequestHeader(m,o[m])}f=function(g){return function(){f&&(f=e=d.onload=d.onerror=d.onabort=d.onreadystatechange=null,"abort"===g?d.abort():"error"===g?"number"!=typeof d.status?n(0,"error"):n(d.status,d.statusText):n(aM[d.status]||d.status,d.statusText,"text"!==(d.responseType||"text")||"string"!=typeof d.responseText?{binary:d.response}:{text:d.responseText},d.getAllResponseHeaders()))}},d.onload=f(),e=d.onerror=f("error"),void 0!==d.onabort?d.onabort=e:d.onreadystatechange=function(){4===d.readyState&&bP.setTimeout(function(){f&&e()})},f=f("abort");try{d.send(a.hasContent&&a.data||null)}catch(b){if(f){throw b}}},abort:function(){f&&f()}}}}),bv.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)}),bv.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return bv.globalEval(b),b}}}),bv.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1),b.crossDomain&&(b.type="GET")}),bv.ajaxTransport("script",function(e){if(e.crossDomain){var d,f;return{send:function(b,a){d=bv("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",f=function(g){d.remove(),f=null,g&&a("error"===g.type?404:200,g.type)}),bM.head.appendChild(d[0])},abort:function(){f&&f()}}}});var aw=[],an=/(=)\?(?=&|$)|\?\?/;bv.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=aw.pop()||bv.expando+"_"+a5++;return this[b]=!0,b}}),bv.ajaxPrefilter("json jsonp",function(a,s,q){var p,o,n,m=a.jsonp!==!1&&(an.test(a.url)?"url":"string"==typeof a.data&&0===(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&an.test(a.data)&&"data");if(m||"jsonp"===a.dataTypes[0]){return p=a.jsonpCallback=bv.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,m?a[m]=a[m].replace(an,"$1"+p):a.jsonp!==!1&&(a.url+=(aW.test(a.url)?"&":"?")+a.jsonp+"="+p),a.converters["script json"]=function(){return n||bv.error(p+" was not called"),n[0]},a.dataTypes[0]="json",o=bP[p],bP[p]=function(){n=arguments},q.always(function(){void 0===o?bv(bP).removeProp(p):bP[p]=o,a[p]&&(a.jsonpCallback=s.jsonpCallback,aw.push(p)),n&&bv.isFunction(o)&&o(n[0]),n=o=void 0}),"script"}}),bz.createHTMLDocument=function(){var b=bM.implementation.createHTMLDocument("").body;return b.innerHTML="<form></form><form></form>",2===b.childNodes.length}(),bv.parseHTML=function(h,d,p){if("string"!=typeof h){return[]}"boolean"==typeof d&&(p=d,d=!1);var o,n,m;return d||(bz.createHTMLDocument?(d=bM.implementation.createHTMLDocument(""),o=d.createElement("base"),o.href=bM.location.href,d.head.appendChild(o)):d=bM),n=co.exec(h),m=!p&&[],n?[d.createElement(n[1])]:(n=bU([h],d,m),m&&m.length&&bv(m).remove(),bv.merge([],n.childNodes))},bv.fn.load=function(n,m,u){var t,s,q,p=this,o=n.indexOf(" ");return o>-1&&(t=bv.trim(n.slice(o)),n=n.slice(0,o)),bv.isFunction(m)?(u=m,m=void 0):m&&"object"==typeof m&&(s="POST"),p.length>0&&bv.ajax({url:n,type:s||"GET",dataType:"html",data:m}).done(function(b){q=arguments,p.html(t?bv("<div>").append(bv.parseHTML(b)).find(t):b)}).always(u&&function(e,d){p.each(function(){u.apply(this,q||[e.responseText,d,e])})}),this},bv.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,d){bv.fn[d]=function(b){return this.on(d,b)}}),bv.expr.pseudos.animated=function(b){return bv.grep(bv.timers,function(a){return b===a.elem}).length};function ae(b){return bv.isWindow(b)?b:9===b.nodeType&&b.defaultView}bv.offset={setOffset:function(C,B,A){var z,w,v,u,t,s,q,p=bv.css(C,"position"),o=bv(C),n={};"static"===p&&(C.style.position="relative"),t=o.offset(),v=bv.css(C,"top"),s=bv.css(C,"left"),q=("absolute"===p||"fixed"===p)&&(v+s).indexOf("auto")>-1,q?(z=o.position(),u=z.top,w=z.left):(u=parseFloat(v)||0,w=parseFloat(s)||0),bv.isFunction(B)&&(B=B.call(C,A,bv.extend({},t))),null!=B.top&&(n.top=B.top-t.top+u),null!=B.left&&(n.left=B.left-t.left+w),"using" in B?B.using.call(C,n):o.css(n)}},bv.fn.extend({offset:function(h){if(arguments.length){return void 0===h?this:this.each(function(a){bv.offset.setOffset(this,h,a)})}var g,p,o,n,m=this[0];if(m){return m.getClientRects().length?(o=m.getBoundingClientRect(),o.width||o.height?(n=m.ownerDocument,p=ae(n),g=n.documentElement,{top:o.top+p.pageYOffset-g.clientTop,left:o.left+p.pageXOffset-g.clientLeft}):o):{top:0,left:0}}},position:function(){if(this[0]){var f,e,h=this[0],g={top:0,left:0};return"fixed"===bv.css(h,"position")?e=h.getBoundingClientRect():(f=this.offsetParent(),e=this.offset(),bv.nodeName(f[0],"html")||(g=f.offset()),g={top:g.top+bv.css(f[0],"borderTopWidth",!0),left:g.left+bv.css(f[0],"borderLeftWidth",!0)}),{top:e.top-g.top-bv.css(h,"marginTop",!0),left:e.left-g.left-bv.css(h,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var b=this.offsetParent;while(b&&"static"===bv.css(b,"position")){b=b.offsetParent}return b||bn})}}),bv.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,d){var f="pageYOffset"===d;bv.fn[e]=function(a){return b2(this,function(b,m,h){var g=ae(b);return void 0===h?g?g[d]:b[m]:void (g?g.scrollTo(f?g.pageXOffset:h,f?h:g.pageYOffset):b[m]=h)},e,a,arguments.length)}}),bv.each(["top","left"],function(e,d){bv.cssHooks[d]=aV(bz.pixelPosition,function(b,f){if(f){return f=a4(b,d),bk.test(f)?bv(b).position()[d]+"px":f}})}),bv.each({Height:"height",Width:"width"},function(e,d){bv.each({padding:"inner"+e,content:d,"":"outer"+e},function(b,a){bv.fn[a]=function(p,o){var n=arguments.length&&(b||"boolean"!=typeof p),m=b||(p===!0||o===!0?"margin":"border");return b2(this,function(g,s,q){var h;return bv.isWindow(g)?0===a.indexOf("outer")?g["inner"+e]:g.document.documentElement["client"+e]:9===g.nodeType?(h=g.documentElement,Math.max(g.body["scroll"+e],h["scroll"+e],g.body["offset"+e],h["offset"+e],h["client"+e])):void 0===q?bv.css(g,s,m):bv.style(g,s,q,m)},d,n?p:void 0,n)}})}),bv.fn.extend({bind:function(e,d,f){return this.on(e,null,d,f)},unbind:function(e,d){return this.off(e,null,d)},delegate:function(f,e,h,g){return this.on(e,f,h,g)},undelegate:function(e,d,f){return 1===arguments.length?this.off(e,"**"):this.off(d,e||"**",f)}}),bv.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return bv});var cG=bP.jQuery,cv=bP.$;return bv.noConflict=function(a){return bP.$===bv&&(bP.$=cv),a&&bP.jQuery===bv&&(bP.jQuery=cG),bv},bO||(bP.jQuery=bP.$=bv),bv});
/*
 * jQuery Migrate - v3.0.0 - 2016-06-09
 * Copyright jQuery Foundation and other contributors
 */
(function(p,m){p.migrateVersion="3.0.0";p.migrateMute=true;(function(){var I=m.console&&m.console.log&&function(){m.console.log.apply(m.console,arguments)},H=/^[12]\./;if(!I){return}if(!p||H.test(p.fn.jquery)){I("JQMIGRATE: jQuery 3.0.0+ REQUIRED")}if(p.migrateWarnings){I("JQMIGRATE: Migrate plugin loaded multiple times")}I("JQMIGRATE: Migrate is installed"+(p.migrateMute?"":" with logging active")+", version "+p.migrateVersion)})();var F={};p.migrateWarnings=[];if(p.migrateTrace===undefined){p.migrateTrace=true}p.migrateReset=function(){F={};p.migrateWarnings.length=0};function g(I){var H=m.console;if(!F[I]){F[I]=true;p.migrateWarnings.push(I);if(H&&H.warn&&!p.migrateMute){H.warn("JQMIGRATE: "+I);if(p.migrateTrace&&H.trace){H.trace()}}}}function a(I,K,H,J){Object.defineProperty(I,K,{configurable:true,enumerable:true,get:function(){g(J);return H}})}if(document.compatMode==="BackCompat"){g("jQuery is not compatible with Quirks Mode")}var C=p.fn.init,z=p.isNumeric,w=p.find,q=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,o=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;p.fn.init=function(I){var H=Array.prototype.slice.call(arguments);if(typeof I==="string"&&I==="#"){g("jQuery( '#' ) is not a valid selector");H[0]=[]}return C.apply(this,H)};p.fn.init.prototype=p.fn;p.find=function(H){var K=Array.prototype.slice.call(arguments);if(typeof H==="string"&&q.test(H)){try{document.querySelector(H)}catch(J){H=H.replace(o,function(M,L,O,N){return"["+L+O+'"'+N+'"]'});try{document.querySelector(H);g("Attribute selector with '#' must be quoted: "+K[0]);K[0]=H}catch(I){g("Attribute selector with '#' was not fixed: "+K[0])}}}return w.apply(this,K)};var B;for(B in w){if(Object.prototype.hasOwnProperty.call(w,B)){p.find[B]=w[B]}}p.fn.size=function(){g("jQuery.fn.size() is deprecated; use the .length property");return this.length};p.parseJSON=function(){g("jQuery.parseJSON is deprecated; use JSON.parse");return JSON.parse.apply(null,arguments)};p.isNumeric=function(K){function I(M){var L=M&&M.toString();return !p.isArray(M)&&(L-parseFloat(L)+1)>=0}var J=z(K),H=I(K);if(J!==H){g("jQuery.isNumeric() should not be called on constructed objects")}return H};a(p,"unique",p.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort");a(p.expr,"filters",p.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos");a(p.expr,":",p.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var t=p.ajax;p.ajax=function(){var H=t.apply(this,arguments);if(H.promise){a(H,"success",H.done,"jQXHR.success is deprecated and removed");a(H,"error",H.fail,"jQXHR.error is deprecated and removed");a(H,"complete",H.always,"jQXHR.complete is deprecated and removed")}return H};var d=p.fn.removeAttr,s=p.fn.toggleClass,E=/\S+/g;p.fn.removeAttr=function(I){var H=this;p.each(I.match(E),function(K,J){if(p.expr.match.bool.test(J)){g("jQuery.fn.removeAttr no longer sets boolean properties: "+J);H.prop(J,false)}});return d.apply(this,arguments)};p.fn.toggleClass=function(H){if(H!==undefined&&typeof H!=="boolean"){return s.apply(this,arguments)}g("jQuery.fn.toggleClass( boolean ) is deprecated");return this.each(function(){var I=this.getAttribute&&this.getAttribute("class")||"";if(I){p.data(this,"__className__",I)}if(this.setAttribute){this.setAttribute("class",I||H===false?"":p.data(this,"__className__")||"")}})};var A=false;if(p.swap){p.each(["height","width","reliableMarginRight"],function(I,H){var J=p.cssHooks[H]&&p.cssHooks[H].get;if(J){p.cssHooks[H].get=function(){var K;A=true;K=J.apply(this,arguments);A=false;return K}}})}p.swap=function(M,L,N,K){var J,I,H={};if(!A){g("jQuery.swap() is undocumented and deprecated")}for(I in L){H[I]=M.style[I];M.style[I]=L[I]}J=N.apply(M,K||[]);for(I in L){M.style[I]=H[I]}return J};var G=p.data;p.data=function(J,H,K){var I;if(H&&H!==p.camelCase(H)){I=p.hasData(J)&&G.call(this,J);if(I&&H in I){g("jQuery.data() always sets/gets camelCased names: "+H);if(arguments.length>2){I[H]=K}return I[H]}}return G.apply(this,arguments)};var f=p.Tween.prototype.run;p.Tween.prototype.run=function(H){if(p.easing[this.easing].length>1){g('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument');p.easing[this.easing]=p.easing[this.easing].bind(p.easing,H,this.options.duration*H,0,1,this.options.duration)}f.apply(this,arguments)};var h=p.fn.load,n=p.event.fix;p.event.props=[];p.event.fixHooks={};p.event.fix=function(H){var K,J=H.type,L=this.fixHooks[J],I=p.event.props;if(I.length){g("jQuery.event.props are deprecated and removed: "+I.join());while(I.length){p.event.addProp(I.pop())}}if(L&&!L._migrated_){L._migrated_=true;g("jQuery.event.fixHooks are deprecated and removed: "+J);if((I=L.props)&&I.length){while(I.length){p.event.addProp(I.pop())}}}K=n.call(this,H);return L&&L.filter?L.filter(K,H):K};p.each(["load","unload","error"],function(I,H){p.fn[H]=function(){var J=Array.prototype.slice.call(arguments,0);if(H==="load"&&typeof J[0]==="string"){return h.apply(this,J)}g("jQuery.fn."+H+"() is deprecated");J.splice(0,0,H);if(arguments.length){return this.on.apply(this,J)}this.triggerHandler.apply(this,J);return this}});p(function(){p(document).triggerHandler("ready")});p.event.special.ready={setup:function(){if(this===document){g("'ready' event is deprecated")}}};p.fn.extend({bind:function(H,J,I){g("jQuery.fn.bind() is deprecated");return this.on(H,null,J,I)},unbind:function(H,I){g("jQuery.fn.unbind() is deprecated");return this.off(H,null,I)},delegate:function(H,I,K,J){g("jQuery.fn.delegate() is deprecated");return this.on(I,H,K,J)},undelegate:function(H,I,J){g("jQuery.fn.undelegate() is deprecated");return arguments.length===1?this.off(H,"**"):this.off(I,H||"**",J)}});var b=p.fn.offset;p.fn.offset=function(){var H,J=this[0],I={top:0,left:0};if(!J||!J.nodeType){g("jQuery.fn.offset() requires a valid DOM element");return I}H=(J.ownerDocument||document).documentElement;if(!p.contains(H,J)){g("jQuery.fn.offset() requires an element connected to a document");return I}return b.apply(this,arguments)};var e=p.param;p.param=function(I,H){var J=p.ajaxSettings&&p.ajaxSettings.traditional;if(H===undefined&&J){g("jQuery.param() no longer uses jQuery.ajaxSettings.traditional");H=J}return e.call(this,I,H)};var v=p.fn.andSelf||p.fn.addBack;p.fn.andSelf=function(){g("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return v.apply(this,arguments)};var u=p.Deferred,D=[["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory"),p.Callbacks("memory")]];p.Deferred=function(I){var H=u(),J=H.promise();H.pipe=J.pipe=function(){var K=arguments;g("deferred.pipe() is deprecated");return p.Deferred(function(L){p.each(D,function(N,M){var O=p.isFunction(K[N])&&K[N];H[M[1]](function(){var P=O&&O.apply(this,arguments);if(P&&p.isFunction(P.promise)){P.promise().done(L.resolve).fail(L.reject).progress(L.notify)}else{L[M[0]+"With"](this===J?L.promise():this,O?[P]:arguments)}})});K=null}).promise()};if(I){I.call(H,H)}return H}})(jQuery,window);
/* jQuery UI - v1.12.1 - 2016-09-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(w){function K(a){for(var d=a.css("visibility");"inherit"===d;){a=a.parent(),d=a.css("visibility")}return"hidden"!==d}function G(d){for(var f,a;d.length&&d[0]!==document;){if(f=d.css("position"),("absolute"===f||"relative"===f||"fixed"===f)&&(a=parseInt(d.css("zIndex"),10),!isNaN(a)&&0!==a)){return a}d=d.parent()}return 0}function z(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},w.extend(this._defaults,this.regional[""]),this.regional.en=w.extend(!0,{},this.regional[""]),this.regional["en-US"]=w.extend(!0,{},this.regional.en),this.dpDiv=D(w("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function D(d){var a="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return d.on("mouseout",a,function(){w(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&w(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&w(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",a,C)}function C(){w.datepicker._isDisabledDatepicker(E.inline?E.dpDiv.parent()[0]:E.input[0])||(w(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),w(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&w(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&w(this).addClass("ui-datepicker-next-hover"))}function N(f,a){w.extend(f,a);for(var d in a){null==a[d]&&(f[d]=a[d])}return f}function A(a){return function(){var d=this.element.val();a.apply(this,arguments),this._refresh(),d!==this.element.val()&&this._trigger("change")}}w.ui=w.ui||{},w.ui.version="1.12.1";var H=0,F=Array.prototype.slice;w.cleanData=function(a){return function(e){var f,h,g;for(g=0;null!=(h=e[g]);g++){try{f=w._data(h,"events"),f&&f.remove&&w(h).triggerHandler("remove")}catch(d){}}a(e)}}(w.cleanData),w.widget=function(u,p,P){var g,f,v,d={},t=u.split(".")[0];u=u.split(".")[1];var m=t+"-"+u;return P||(P=p,p=w.Widget),w.isArray(P)&&(P=w.extend.apply(null,[{}].concat(P))),w.expr[":"][m.toLowerCase()]=function(a){return !!w.data(a,m)},w[t]=w[t]||{},g=w[t][u],f=w[t][u]=function(a,h){return this._createWidget?(arguments.length&&this._createWidget(a,h),void 0):new f(a,h)},w.extend(f,g,{version:P.version,_proto:w.extend({},P),_childConstructors:[]}),v=new p,v.options=w.widget.extend({},v.options),w.each(P,function(h,a){return w.isFunction(a)?(d[h]=function(){function e(){return p.prototype[h].apply(this,arguments)}function o(n){return p.prototype[h].apply(this,n)}return function(){var s,n=this._super,Q=this._superApply;return this._super=e,this._superApply=o,s=a.apply(this,arguments),this._super=n,this._superApply=Q,s}}(),void 0):(d[h]=a,void 0)}),f.prototype=w.widget.extend(v,{widgetEventPrefix:g?v.widgetEventPrefix||u:u},d,{constructor:f,namespace:t,widgetName:u,widgetFullName:m}),g?(w.each(g._childConstructors,function(n,a){var h=a.prototype;w.widget(h.namespace+"."+h.widgetName,f,a._proto)}),delete g._childConstructors):p._childConstructors.push(f),w.widget.bridge(u,f),f},w.widget.extend=function(h){for(var f,g,p=F.call(arguments,1),m=0,d=p.length;d>m;m++){for(f in p[m]){g=p[m][f],p[m].hasOwnProperty(f)&&void 0!==g&&(h[f]=w.isPlainObject(g)?w.isPlainObject(h[f])?w.widget.extend({},h[f],g):w.widget.extend({},g):g)}}return h},w.widget.bridge=function(f,a){var d=a.prototype.widgetFullName||f;w.fn[f]=function(m){var h="string"==typeof m,e=F.call(arguments,1),g=this;return h?this.length||"instance"!==m?this.each(function(){var n,p=w.data(this,d);return"instance"===m?(g=p,!1):p?w.isFunction(p[m])&&"_"!==m.charAt(0)?(n=p[m].apply(p,e),n!==p&&void 0!==n?(g=n&&n.jquery?g.pushStack(n.get()):n,!1):void 0):w.error("no such method '"+m+"' for "+f+" widget instance"):w.error("cannot call methods on "+f+" prior to initialization; attempted to call method '"+m+"'")}):g=void 0:(e.length&&(m=w.widget.extend.apply(null,[m].concat(e))),this.each(function(){var n=w.data(this,d);n?(n.option(m||{}),n._init&&n._init()):w.data(this,d,new a(m,this))})),g}},w.Widget=function(){},w.Widget._childConstructors=[],w.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(d,a){a=w(a||this.defaultElement||this)[0],this.element=w(a),this.uuid=H++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=w(),this.hoverable=w(),this.focusable=w(),this.classesElementLookup={},a!==this&&(w.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===a&&this.destroy()}}),this.document=w(a.style?a.ownerDocument:a.document||a),this.window=w(this.document[0].defaultView||this.document[0].parentWindow)),this.options=w.widget.extend({},this.options,this._getCreateOptions(),d),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:w.noop,_create:w.noop,_init:w.noop,destroy:function(){var a=this;this._destroy(),w.each(this.classesElementLookup,function(e,d){a._removeClass(d,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:w.noop,widget:function(){return this.element},option:function(h,f){var g,p,m,d=h;if(0===arguments.length){return w.widget.extend({},this.options)}if("string"==typeof h){if(d={},g=h.split("."),h=g.shift(),g.length){for(p=d[h]=w.widget.extend({},this.options[h]),m=0;g.length-1>m;m++){p[g[m]]=p[g[m]]||{},p=p[g[m]]}if(h=g.pop(),1===arguments.length){return void 0===p[h]?null:p[h]}p[h]=f}else{if(1===arguments.length){return void 0===this.options[h]?null:this.options[h]}d[h]=f}}return this._setOptions(d),this},_setOptions:function(a){var d;for(d in a){this._setOption(d,a[d])}return this},_setOption:function(a,d){return"classes"===a&&this._setOptionClasses(d),this.options[a]=d,"disabled"===a&&this._setOptionDisabled(d),this},_setOptionClasses:function(f){var a,d,g;for(a in f){g=this.classesElementLookup[a],f[a]!==this.options.classes[a]&&g&&g.length&&(d=w(g.get()),this._removeClass(g,a),d.addClass(this._classes({element:d,keys:a,classes:f,add:!0})))}},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a),a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(f){function a(h,n){var e,m;for(m=0;h.length>m;m++){e=g.classesElementLookup[h[m]]||w(),e=f.add?w(w.unique(e.get().concat(f.element.get()))):w(e.not(f.element).get()),g.classesElementLookup[h[m]]=e,d.push(h[m]),n&&f.classes[h[m]]&&d.push(f.classes[h[m]])}}var d=[],g=this;return f=w.extend({element:this.element,classes:this.options.classes||{}},f),this._on(f.element,{remove:"_untrackClassesElement"}),f.keys&&a(f.keys.match(/\S+/g)||[],!0),f.extra&&a(f.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(d){var a=this;w.each(a.classesElementLookup,function(e,f){-1!==w.inArray(d.target,f)&&(a.classesElementLookup[e]=w(f.not(d.target).get()))})},_removeClass:function(d,f,a){return this._toggleClass(d,f,a,!1)},_addClass:function(d,f,a){return this._toggleClass(d,f,a,!0)},_toggleClass:function(d,g,a,f){f="boolean"==typeof f?f:a;var m="string"==typeof d||null===d,h={extra:m?g:a,keys:m?d:g,element:m?this.element:d,add:f};return h.element.toggleClass(this._classes(h),f),this},_on:function(f,a,d){var h,g=this;"boolean"!=typeof f&&(d=a,a=f,f=!1),d?(a=h=w(a),this.bindings=this.bindings.add(a)):(d=a,a=this.element,h=this.widget()),w.each(d,function(o,m){function p(){return f||g.options.disabled!==!0&&!w(this).hasClass("ui-state-disabled")?("string"==typeof m?g[m]:m).apply(g,arguments):void 0}"string"!=typeof m&&(p.guid=m.guid=m.guid||p.guid||w.guid++);var n=o.match(/^([\w:-]*)\s*(.*)$/),e=n[1]+g.eventNamespace,t=n[2];t?h.on(e,t,p):a.on(e,p)})},_off:function(d,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,d.off(a).off(a),this.bindings=w(this.bindings.not(d).get()),this.focusable=w(this.focusable.not(d).get()),this.hoverable=w(this.hoverable.not(d).get())},_delay:function(d,g){function a(){return("string"==typeof d?f[d]:d).apply(f,arguments)}var f=this;return setTimeout(a,g||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a),this._on(a,{mouseenter:function(d){this._addClass(w(d.currentTarget),null,"ui-state-hover")},mouseleave:function(d){this._removeClass(w(d.currentTarget),null,"ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a),this._on(a,{focusin:function(d){this._addClass(w(d.currentTarget),null,"ui-state-focus")},focusout:function(d){this._removeClass(w(d.currentTarget),null,"ui-state-focus")}})},_trigger:function(h,f,g){var p,m,d=this.options[h];if(g=g||{},f=w.Event(f),f.type=(h===this.widgetEventPrefix?h:this.widgetEventPrefix+h).toLowerCase(),f.target=this.element[0],m=f.originalEvent){for(p in m){p in f||(f[p]=m[p])}}return this.element.trigger(f,g),!(w.isFunction(d)&&d.apply(this.element[0],[f].concat(g))===!1||f.isDefaultPrevented())}},w.each({show:"fadeIn",hide:"fadeOut"},function(d,a){w.Widget.prototype["_"+d]=function(f,m,h){"string"==typeof m&&(m={effect:m});var e,g=m?m===!0||"number"==typeof m?a:m.effect||a:d;m=m||{},"number"==typeof m&&(m={duration:m}),e=!w.isEmptyObject(m),m.complete=h,m.delay&&f.delay(m.delay),e&&w.effects&&w.effects.effect[g]?f[d](m):g!==d&&f[g]?f[g](m.duration,m.easing,h):f.queue(function(n){w(this)[d](),h&&h.call(f[0]),n()})}}),w.widget,function(){function P(d,h,a){return[parseFloat(d[0])*(T.test(d[0])?h/100:1),parseFloat(d[1])*(T.test(d[1])?a/100:1)]}function t(d,a){return parseInt(w.css(d,a),10)||0}function U(d){var a=d[0];return 9===a.nodeType?{width:d.width(),height:d.height(),offset:{top:0,left:0}}:w.isWindow(a)?{width:d.width(),height:d.height(),offset:{top:d.scrollTop(),left:d.scrollLeft()}}:a.preventDefault?{width:0,height:0,offset:{top:a.pageY,left:a.pageX}}:{width:d.outerWidth(),height:d.outerHeight(),offset:d.offset()}}var m,g=Math.max,S=Math.abs,f=/left|center|right/,v=/top|center|bottom/,p=/[\+\-]\d+(\.[\d]+)?%?/,R=/^\w+/,T=/%$/,Q=w.fn.position;w.position={scrollbarWidth:function(){if(void 0!==m){return m}var h,a,d=w("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=d.children()[0];return w("body").append(d),h=n.offsetWidth,d.css("overflow","scroll"),a=n.offsetWidth,h===a&&(a=d[0].clientWidth),d.remove(),m=h-a},getScrollInfo:function(h){var a=h.isWindow||h.isDocument?"":h.element.css("overflow-x"),d=h.isWindow||h.isDocument?"":h.element.css("overflow-y"),V="scroll"===a||"auto"===a&&h.width<h.element[0].scrollWidth,u="scroll"===d||"auto"===d&&h.height<h.element[0].scrollHeight;return{width:u?w.position.scrollbarWidth():0,height:V?w.position.scrollbarWidth():0}},getWithinInfo:function(h){var a=w(h||window),d=w.isWindow(a[0]),V=!!a[0]&&9===a[0].nodeType,u=!d&&!V;return{element:a,isWindow:d,isDocument:V,offset:u?w(h).offset():{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:a.outerWidth(),height:a.outerHeight()}}},w.fn.position=function(d){if(!d||!d.of){return Q.apply(this,arguments)}d=w.extend({},d);var ac,a,s,o,e,aa,ab=w(d.of),W=w.position.getWithinInfo(d.within),V=w.position.getScrollInfo(W),Z=(d.collision||"flip").split(" "),h={};return aa=U(ab),ab[0].preventDefault&&(d.at="left top"),a=aa.width,s=aa.height,o=aa.offset,e=w.extend({},o),w.each(["my","at"],function(){var u,ad,n=(d[this]||"").split(" ");1===n.length&&(n=f.test(n[0])?n.concat(["center"]):v.test(n[0])?["center"].concat(n):["center","center"]),n[0]=f.test(n[0])?n[0]:"center",n[1]=v.test(n[1])?n[1]:"center",u=p.exec(n[0]),ad=p.exec(n[1]),h[this]=[u?u[0]:0,ad?ad[0]:0],d[this]=[R.exec(n[0])[0],R.exec(n[1])[0]]}),1===Z.length&&(Z[1]=Z[0]),"right"===d.at[0]?e.left+=a:"center"===d.at[0]&&(e.left+=a/2),"bottom"===d.at[1]?e.top+=s:"center"===d.at[1]&&(e.top+=s/2),ac=P(h.at,a,s),e.left+=ac[0],e.top+=ac[1],this.each(function(){var al,u,af=w(this),ae=af.outerWidth(),ah=af.outerHeight(),ag=t(this,"marginLeft"),ak=t(this,"marginTop"),ai=ae+ag+t(this,"marginRight")+V.width,ad=ah+ak+t(this,"marginBottom")+V.height,n=w.extend({},e),aj=P(h.my,af.outerWidth(),af.outerHeight());"right"===d.my[0]?n.left-=ae:"center"===d.my[0]&&(n.left-=ae/2),"bottom"===d.my[1]?n.top-=ah:"center"===d.my[1]&&(n.top-=ah/2),n.left+=aj[0],n.top+=aj[1],al={marginLeft:ag,marginTop:ak},w.each(["left","top"],function(an,am){w.ui.position[Z[an]]&&w.ui.position[Z[an]][am](n,{targetWidth:a,targetHeight:s,elemWidth:ae,elemHeight:ah,collisionPosition:al,collisionWidth:ai,collisionHeight:ad,offset:[ac[0]+aj[0],ac[1]+aj[1]],my:d.my,at:d.at,within:W,elem:af})}),d.using&&(u=function(ao){var ar=o.left-n.left,an=ar+a-ae,ap=o.top-n.top,aq=ap+s-ah,am={target:{element:ab,left:o.left,top:o.top,width:a,height:s},element:{element:af,left:n.left,top:n.top,width:ae,height:ah},horizontal:0>an?"left":ar>0?"right":"center",vertical:0>aq?"top":ap>0?"bottom":"middle"};ae>a&&a>S(ar+an)&&(am.horizontal="center"),ah>s&&s>S(ap+aq)&&(am.vertical="middle"),am.important=g(S(ar),S(an))>g(S(ap),S(aq))?"horizontal":"vertical",d.using.call(this,ao,am)}),af.offset(w.extend(n,{using:u}))})},w.ui.position={fit:{left:function(ab,Z){var V,ac=Z.within,o=ac.isWindow?ac.scrollLeft:ac.offset.left,aa=ac.width,d=ab.left-Z.collisionPosition.marginLeft,W=o-d,u=d+Z.collisionWidth-aa-o;Z.collisionWidth>aa?W>0&&0>=u?(V=ab.left+W+Z.collisionWidth-aa-o,ab.left+=W-V):ab.left=u>0&&0>=W?o:W>u?o+aa-Z.collisionWidth:o:W>0?ab.left+=W:u>0?ab.left-=u:ab.left=g(ab.left-d,ab.left)},top:function(ab,Z){var V,ac=Z.within,o=ac.isWindow?ac.scrollTop:ac.offset.top,aa=Z.within.height,d=ab.top-Z.collisionPosition.marginTop,W=o-d,u=d+Z.collisionHeight-aa-o;Z.collisionHeight>aa?W>0&&0>=u?(V=ab.top+W+Z.collisionHeight-aa-o,ab.top+=W-V):ab.top=u>0&&0>=W?o:W>u?o+aa-Z.collisionHeight:o:W>0?ab.top+=W:u>0?ab.top-=u:ab.top=g(ab.top-d,ab.top)}},flip:{left:function(ai,ae){var ab,aj,Z=ae.within,W=Z.offset.left+Z.scrollLeft,a=Z.width,ac=Z.isWindow?Z.scrollLeft:Z.offset.left,aa=ai.left-ae.collisionPosition.marginLeft,ag=aa-ac,ah=aa+ae.collisionWidth-a-ac,af="left"===ae.my[0]?-ae.elemWidth:"right"===ae.my[0]?ae.elemWidth:0,V="left"===ae.at[0]?ae.targetWidth:"right"===ae.at[0]?-ae.targetWidth:0,ad=-2*ae.offset[0];0>ag?(ab=ai.left+af+V+ad+ae.collisionWidth-a-W,(0>ab||S(ag)>ab)&&(ai.left+=af+V+ad)):ah>0&&(aj=ai.left-ae.collisionPosition.marginLeft+af+V+ad-ac,(aj>0||ah>S(aj))&&(ai.left+=af+V+ad))},top:function(aj,af){var ab,ak,Z=af.within,W=Z.offset.top+Z.scrollTop,a=Z.height,ac=Z.isWindow?Z.scrollTop:Z.offset.top,aa=aj.top-af.collisionPosition.marginTop,ah=aa-ac,ai=aa+af.collisionHeight-a-ac,ag="top"===af.my[1],V=ag?-af.elemHeight:"bottom"===af.my[1]?af.elemHeight:0,ae="top"===af.at[1]?af.targetHeight:"bottom"===af.at[1]?-af.targetHeight:0,ad=-2*af.offset[1];0>ah?(ak=aj.top+V+ae+ad+af.collisionHeight-a-W,(0>ak||S(ah)>ak)&&(aj.top+=V+ae+ad)):ai>0&&(ab=aj.top-af.collisionPosition.marginTop+V+ae+ad-ac,(ab>0||ai>S(ab))&&(aj.top+=V+ae+ad))}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}}}(),w.ui.position,w.extend(w.expr[":"],{data:w.expr.createPseudo?w.expr.createPseudo(function(a){return function(d){return !!w.data(d,a)}}):function(f,a,d){return !!w.data(f,d[3])}}),w.fn.extend({disableSelection:function(){var a="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(a+".ui-disableSelection",function(d){d.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var M="ui-effects-",q="ui-effects-style",L="ui-effects-animated",B=w;w.effects={effect:{}},function(ab,U){function R(d,h,a){var f=aa[h.type]||{};return null==d?a||!h.def?null:h.def:(d=f.floor?~~d:parseFloat(d),isNaN(d)?h.def:f.mod?(d+f.mod)%f.mod:0>d?0:d>f.max?f.max:d)}function ac(a){var d=Q(),e=d._rgba=[];return a=a.toLowerCase(),T(S,function(p,ad){var n,u=ad.re.exec(a),s=u&&ad.parse(u),f=ad.space||"rgba";return s?(n=d[f](s),d[W[f].cache]=n[W[f].cache],e=d._rgba=n._rgba,!1):U}),e.length?("0,0,0,0"===e.join()&&ab.extend(e,v.transparent),d):v[a]}function P(d,f,a){return a=(a+1)%1,1>6*a?d+6*(f-d)*a:1>2*a?f:2>3*a?d+6*(f-d)*(2/3-a):d}var v,Z="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",g=/^([\-+])=\s*(\d+\.?\d*)/,S=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],Q=ab.Color=function(f,a,d,h){return new ab.Color.fn.parse(f,a,d,h)},W={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},aa={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},V=Q.support={},m=ab("<p>")[0],T=ab.each;m.style.cssText="background-color:rgba(1,1,1,.5)",V.rgba=m.style.backgroundColor.indexOf("rgba")>-1,T(W,function(a,d){d.cache="_"+a,d.props.alpha={idx:3,type:"percent",def:1}}),Q.fn=ab.extend(Q.prototype,{parse:function(ae,e,s,o){if(ae===U){return this._rgba=[null,null,null,null],this}(ae.jquery||ae.nodeType)&&(ae=ab(ae).css(e),e=U);var f=this,ad=ab.type(ae),t=this._rgba=[];return e!==U&&(ae=[ae,e,s,o],ad="array"),"string"===ad?this.parse(ac(ae)||v._default):"array"===ad?(T(W.rgba.props,function(a,d){t[d.idx]=R(ae[d.idx],d)}),this):"object"===ad?(ae instanceof Q?T(W,function(a,d){ae[d.cache]&&(f[d.cache]=ae[d.cache].slice())}):T(W,function(d,a){var h=a.cache;T(a.props,function(n,p){if(!f[h]&&a.to){if("alpha"===n||null==ae[n]){return}f[h]=a.to(f._rgba)}f[h][p.idx]=R(ae[n],p,!0)}),f[h]&&0>ab.inArray(null,f[h].slice(0,3))&&(f[h][3]=1,a.from&&(f._rgba=a.from(f[h])))}),this):U},is:function(d){var a=Q(d),e=!0,f=this;return T(W,function(n,s){var h,p=a[s.cache];return p&&(h=f[s.cache]||s.to&&s.to(f._rgba)||[],T(s.props,function(u,o){return null!=p[o.idx]?e=p[o.idx]===h[o.idx]:U})),e}),e},_space:function(){var a=[],d=this;return T(W,function(e,f){d[f.cache]&&a.push(e)}),a.pop()},transition:function(f,ae){var u=Q(f),ag=u._space(),af=W[ag],d=0===this.alpha()?Q("transparent"):this,ad=d[af.cache]||af.to(d._rgba),p=ad.slice();return u=u[af.cache],T(af.props,function(s,aj){var ah=aj.idx,h=ad[ah],e=u[ah],ai=aa[aj.type]||{};null!==e&&(null===h?p[ah]=e:(ai.mod&&(e-h>ai.mod/2?h+=ai.mod:h-e>ai.mod/2&&(h-=ai.mod)),p[ah]=R((e-h)*ae+h,aj)))}),this[ag](p)},blend:function(f){if(1===this._rgba[3]){return this}var a=this._rgba.slice(),d=a.pop(),h=Q(f)._rgba;return Q(ab.map(a,function(n,o){return(1-d)*h[o]+d*n}))},toRgbaString:function(){var d="rgba(",a=ab.map(this._rgba,function(f,h){return null==f?h>2?1:0:f});return 1===a[3]&&(a.pop(),d="rgb("),d+a.join()+")"},toHslaString:function(){var d="hsla(",a=ab.map(this.hsla(),function(f,h){return null==f&&(f=h>2?1:0),h&&3>h&&(f=Math.round(100*f)+"%"),f});return 1===a[3]&&(a.pop(),d="hsl("),d+a.join()+")"},toHexString:function(f){var a=this._rgba.slice(),d=a.pop();return f&&a.push(~~(255*d)),"#"+ab.map(a,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),Q.fn.parse.prototype=Q.fn,W.hsla.to=function(ak){if(null==ak[0]||null==ak[1]||null==ak[2]){return[null,null,null,ak[3]]}var ag,ae,al=ak[0]/255,p=ak[1]/255,f=ak[2]/255,ai=ak[3],d=Math.max(al,p,f),af=Math.min(al,p,f),ad=d-af,ah=d+af,aj=0.5*ah;return ag=af===d?0:al===d?60*(p-f)/ad+360:p===d?60*(f-al)/ad+120:60*(al-p)/ad+240,ae=0===ad?0:0.5>=aj?ad/ah:ad/(2-ah),[Math.round(ag)%360,ae,aj,null==ai?1:ai]},W.hsla.from=function(h){if(null==h[0]||null==h[1]||null==h[2]){return[null,null,null,h[3]]}var u=h[0]/360,f=h[1],n=h[2],ad=h[3],d=0.5>=n?n*(1+f):n+f-n*f,p=2*n-d;return[Math.round(255*P(p,d,u+1/3)),Math.round(255*P(p,d,u)),Math.round(255*P(p,d,u-1/3)),ad]},T(W,function(f,u){var p=u.props,d=u.cache,e=u.to,t=u.from;Q.fn[f]=function(h){if(e&&!this[d]&&(this[d]=e(this._rgba)),h===U){return this[d].slice()}var ae,o=ab.type(h),a="array"===o||"object"===o?h:arguments,ad=this[d].slice();return T(p,function(n,ag){var af=a["object"===o?n:ag.idx];null==af&&(af=ad[ag.idx]),ad[ag.idx]=R(af,ag)}),t?(ae=Q(t(ad)),ae[d]=ad,ae):Q(ad)},T(p,function(h,a){Q.fn[h]||(Q.fn[h]=function(ah){var af,ad=ab.type(ah),ae="alpha"===h?this._hsla?"hsla":"rgba":f,s=this[ae](),ag=s[a.idx];return"undefined"===ad?ag:("function"===ad&&(ah=ah.call(this,ag),ad=ab.type(ah)),null==ah&&a.empty?this:("string"===ad&&(af=g.exec(ah),af&&(ah=ag+parseFloat(af[2])*("+"===af[1]?1:-1))),s[a.idx]=ah,this[ae](s)))})})}),Q.hook=function(d){var a=d.split(" ");T(a,function(h,f){ab.cssHooks[f]={set:function(u,ae){var ad,p,t="";if("transparent"!==ae&&("string"!==ab.type(ae)||(ad=ac(ae)))){if(ae=Q(ad||ae),!V.rgba&&1!==ae._rgba[3]){for(p="backgroundColor"===f?u.parentNode:u;(""===t||"transparent"===t)&&p&&p.style;){try{t=ab.css(p,"backgroundColor"),p=p.parentNode}catch(s){}}ae=ae.blend(t&&"transparent"!==t?t:"_default")}ae=ae.toRgbaString()}try{u.style[f]=ae}catch(s){}}},ab.fx.step[f]=function(n){n.colorInit||(n.start=Q(n.elem,f),n.end=Q(n.end),n.colorInit=!0),ab.cssHooks[f].set(n.elem,n.start.transition(n.end,n.pos))}})},Q.hook(Z),ab.cssHooks.borderColor={expand:function(a){var d={};return T(["Top","Right","Bottom","Left"],function(e,f){d["border"+f+"Color"]=a}),d}},v=ab.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(B),function(){function f(p){var h,m,u=p.ownerDocument.defaultView?p.ownerDocument.defaultView.getComputedStyle(p,null):p.currentStyle,t={};if(u&&u.length&&u[0]&&u[u[0]]){for(m=u.length;m--;){h=u[m],"string"==typeof u[h]&&(t[w.camelCase(h)]=u[h])}}else{for(h in u){"string"==typeof u[h]&&(t[h]=u[h])}}return t}function a(p,m){var n,t,h={};for(n in m){t=m[n],p[n]!==t&&(g[n]||(w.fx.step[n]||!isNaN(parseFloat(t)))&&(h[n]=t))}return h}var d=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};w.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(m,h){w.fx.step[h]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(B.style(e.elem,h,e.end),e.setAttr=!0)}}),w.fn.addBack||(w.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),w.effects.animateClass=function(t,s,e,p){var m=w.speed(s,e,p);return this.queue(function(){var v,n=w(this),u=n.attr("class")||"",h=m.children?n.find("*").addBack():n;h=h.map(function(){var o=w(this);return{el:o,start:f(this)}}),v=function(){w.each(d,function(o,P){t[P]&&n[P+"Class"](t[P])})},v(),h=h.map(function(){return this.end=f(this.el[0]),this.diff=a(this.start,this.end),this}),n.attr("class",u),h=h.map(function(){var Q=this,o=w.Deferred(),P=w.extend({},m,{queue:!1,complete:function(){o.resolve(Q)}});return this.el.animate(this.diff,P),o.promise()}),w.when.apply(w,h.get()).done(function(){v(),w.each(arguments,function(){var o=this.el;w.each(this.diff,function(P){o.css(P,"")})}),m.complete.call(n[0])})})},w.fn.extend({addClass:function(h){return function(e,m,t,p){return m?w.effects.animateClass.call(this,{add:e},m,t,p):h.apply(this,arguments)}}(w.fn.addClass),removeClass:function(h){return function(e,m,t,p){return arguments.length>1?w.effects.animateClass.call(this,{remove:e},m,t,p):h.apply(this,arguments)}}(w.fn.removeClass),toggleClass:function(h){return function(m,p,u,t,e){return"boolean"==typeof p||void 0===p?u?w.effects.animateClass.call(this,p?{add:m}:{remove:m},u,t,e):h.apply(this,arguments):w.effects.animateClass.call(this,{toggle:m},p,u,t)}}(w.fn.toggleClass),switchClass:function(p,h,m,u,t){return w.effects.animateClass.call(this,{add:h,remove:p},m,u,t)}})}(),function(){function f(m,g,h,o){return w.isPlainObject(m)&&(g=m,m=m.effect),m={effect:m},null==g&&(g={}),w.isFunction(g)&&(o=g,h=null,g={}),("number"==typeof g||w.fx.speeds[g])&&(o=h,h=g,g={}),w.isFunction(h)&&(o=h,h=null),g&&w.extend(m,g),h=h||g.duration,m.duration=w.fx.off?0:"number"==typeof h?h:h in w.fx.speeds?w.fx.speeds[h]:w.fx.speeds._default,m.complete=o||g.complete,m}function a(g){return !g||"number"==typeof g||w.fx.speeds[g]?!0:"string"!=typeof g||w.effects.effect[g]?w.isFunction(g)?!0:"object"!=typeof g||g.effect?!1:!0:!0}function d(h,p){var g=p.outerWidth(),m=p.outerHeight(),v=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,u=v.exec(h)||["",0,g,m,0];return{top:parseFloat(u[1])||0,right:"auto"===u[2]?g:parseFloat(u[2]),bottom:"auto"===u[3]?m:parseFloat(u[3]),left:parseFloat(u[4])||0}}w.expr&&w.expr.filters&&w.expr.filters.animated&&(w.expr.filters.animated=function(g){return function(e){return !!w(e).data(L)||g(e)}}(w.expr.filters.animated)),w.uiBackCompat!==!1&&w.extend(w.effects,{save:function(h,n){for(var g=0,m=n.length;m>g;g++){null!==n[g]&&h.data(M+n[g],h[0].style[n[g]])}},restore:function(h,o){for(var g,m=0,p=o.length;p>m;m++){null!==o[m]&&(g=h.data(M+o[m]),h.css(o[m],g))}},setMode:function(g,h){return"toggle"===h&&(h=g.is(":hidden")?"show":"hide"),h},createWrapper:function(p){if(p.parent().is(".ui-effects-wrapper")){return p.parent()}var h={width:p.outerWidth(!0),height:p.outerHeight(!0),"float":p.css("float")},m=w("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),u={width:p.width(),height:p.height()},t=document.activeElement;try{t.id}catch(g){t=document.body}return p.wrap(m),(p[0]===t||w.contains(p[0],t))&&w(t).trigger("focus"),m=p.parent(),"static"===p.css("position")?(m.css({position:"relative"}),p.css({position:"relative"})):(w.extend(h,{position:p.css("position"),zIndex:p.css("z-index")}),w.each(["top","left","bottom","right"],function(e,n){h[n]=p.css(n),isNaN(parseInt(h[n],10))&&(h[n]="auto")}),p.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),p.css(u),m.css(h).show()},removeWrapper:function(h){var g=document.activeElement;return h.parent().is(".ui-effects-wrapper")&&(h.parent().replaceWith(h),(h[0]===g||w.contains(h[0],g))&&w(g).trigger("focus")),h}}),w.extend(w.effects,{version:"1.12.1",define:function(m,g,h){return h||(h=g,g="effect"),w.effects.effect[m]=h,w.effects.effect[m].mode=g,h},scaledDimensions:function(h,o,g){if(0===o){return{height:0,width:0,outerHeight:0,outerWidth:0}}var m="horizontal"!==g?(o||100)/100:1,p="vertical"!==g?(o||100)/100:1;return{height:h.height()*p,width:h.width()*m,outerHeight:h.outerHeight()*p,outerWidth:h.outerWidth()*m}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(h,n,g){var m=h.queue();n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,g))),h.dequeue()},saveStyle:function(e){e.data(q,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(q)||"",e.removeData(q)},mode:function(h,m){var g=h.is(":hidden");return"toggle"===m&&(m=g?"show":"hide"),(g?"hide"===m:"show"===m)&&(m="none"),m},getBaseline:function(h,n){var g,m;switch(h[0]){case"top":g=0;break;case"middle":g=0.5;break;case"bottom":g=1;break;default:g=h[0]/n.height}switch(h[1]){case"left":m=0;break;case"center":m=0.5;break;case"right":m=1;break;default:m=h[1]/n.width}return{x:m,y:g}},createPlaceholder:function(m){var g,h=m.css("position"),o=m.position();return m.css({marginTop:m.css("marginTop"),marginBottom:m.css("marginBottom"),marginLeft:m.css("marginLeft"),marginRight:m.css("marginRight")}).outerWidth(m.outerWidth()).outerHeight(m.outerHeight()),/^(static|relative)/.test(h)&&(h="absolute",g=w("<"+m[0].nodeName+">").insertAfter(m).css({display:/^(inline|ruby)/.test(m.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:m.css("marginTop"),marginBottom:m.css("marginBottom"),marginLeft:m.css("marginLeft"),marginRight:m.css("marginRight"),"float":m.css("float")}).outerWidth(m.outerWidth()).outerHeight(m.outerHeight()).addClass("ui-effects-placeholder"),m.data(M+"placeholder",g)),m.css({position:h,left:o.left,top:o.top}),g},removePlaceholder:function(h){var m=M+"placeholder",g=h.data(m);g&&(g.remove(),h.removeData(m))},cleanUp:function(g){w.effects.restoreStyle(g),w.effects.removePlaceholder(g)},setTransition:function(m,g,h,o){return o=o||{},w.each(g,function(n,e){var p=m.cssUnit(e);p[0]>0&&(o[e]=p[0]*h+p[1])}),o}}),w.fn.extend({effect:function(){function t(s){function n(){o.removeData(L),w.effects.cleanUp(o),"hide"===S.mode&&o.hide(),h()}function h(){w.isFunction(v)&&v.call(o[0]),w.isFunction(s)&&s()}var o=w(this);S.mode=P.shift(),w.uiBackCompat===!1||g?"none"===S.mode?(o[p](),h()):m.call(o[0],S,n):(o.is(":hidden")?"hide"===p:"show"===p)?(o[p](),h()):m.call(o[0],S,h)}var S=f.apply(this,arguments),m=w.effects.effect[S.effect],g=m.mode,Q=S.queue,e=Q||"fx",v=S.complete,p=S.mode,P=[],R=function(o){var h=w(this),n=w.effects.mode(h,p)||g;h.data(L,!0),P.push(n),g&&("show"===n||n===g&&"hide"===n)&&h.show(),g&&"none"===n||w.effects.saveStyle(h),w.isFunction(o)&&o()};return w.fx.off||!m?p?this[p](S.duration,v):this.each(function(){v&&v.call(this)}):Q===!1?this.each(R).each(t):this.queue(e,R).queue(e,t)},show:function(e){return function(g){if(a(g)){return e.apply(this,arguments)}var h=f.apply(this,arguments);return h.mode="show",this.effect.call(this,h)}}(w.fn.show),hide:function(e){return function(g){if(a(g)){return e.apply(this,arguments)}var h=f.apply(this,arguments);return h.mode="hide",this.effect.call(this,h)}}(w.fn.hide),toggle:function(e){return function(g){if(a(g)||"boolean"==typeof g){return e.apply(this,arguments)}var h=f.apply(this,arguments);return h.mode="toggle",this.effect.call(this,h)}}(w.fn.toggle),cssUnit:function(m){var g=this.css(m),h=[];return w.each(["em","px","%","pt"],function(n,o){g.indexOf(o)>0&&(h=[parseFloat(g),o])}),h},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):d(this.css("clip"),this)},transfer:function(Q,v){var V=w(this),p=w(Q.to),m="fixed"===p.css("position"),T=w("body"),g=m?T.scrollTop():0,P=m?T.scrollLeft():0,t=p.offset(),S={top:t.top-g,left:t.left-P,height:p.innerHeight(),width:p.innerWidth()},U=V.offset(),R=w("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(Q.className).css({top:U.top-g,left:U.left-P,height:V.innerHeight(),width:V.innerWidth(),position:m?"fixed":"absolute"}).animate(S,Q.duration,Q.easing,function(){R.remove(),w.isFunction(v)&&v()})}}),w.fx.step.clip=function(g){g.clipInit||(g.start=w(g.elem).cssClip(),"string"==typeof g.end&&(g.end=d(g.end,g.elem)),g.clipInit=!0),w(g.elem).cssClip({top:g.pos*(g.end.top-g.start.top)+g.start.top,right:g.pos*(g.end.right-g.start.right)+g.start.right,bottom:g.pos*(g.end.bottom-g.start.bottom)+g.start.bottom,left:g.pos*(g.end.left-g.start.left)+g.start.left})}}(),function(){var a={};w.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,d){a[d]=function(f){return Math.pow(f,e+2)}}),w.extend(a,{Sine:function(d){return 1-Math.cos(d*Math.PI/2)},Circ:function(d){return 1-Math.sqrt(1-d*d)},Elastic:function(d){return 0===d||1===d?d:-Math.pow(2,8*(d-1))*Math.sin((80*(d-1)-7.5)*Math.PI/15)},Back:function(d){return d*d*(3*d-2)},Bounce:function(f){for(var g,d=4;((g=Math.pow(2,--d))-1)/11>f;){}return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*g-2)/22-f,2)}}),w.each(a,function(f,d){w.easing["easeIn"+f]=d,w.easing["easeOut"+f]=function(e){return 1-d(1-e)},w.easing["easeInOut"+f]=function(e){return 0.5>e?d(2*e)/2:1-d(-2*e+2)/2}})}();var J=w.effects;w.effects.define("blind","hide",function(t,f){var m={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},v=w(this),u=t.direction||"up",d=v.cssClip(),p={clip:w.extend({},d)},g=w.effects.createPlaceholder(v);p.clip[m[u][0]]=p.clip[m[u][1]],"show"===t.mode&&(v.cssClip(p.clip),g&&g.css(w.effects.clipToBox(p)),p.clip=d),g&&g.animate(w.effects.clipToBox(p),t.duration,t.easing),v.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:f})}),w.effects.define("bounce",function(ad,Z){var Q,U,T,ah=w(this),R=ad.mode,aa="hide"===R,W="show"===R,af=ad.direction||"up",P=ad.distance,ae=ad.times||5,S=2*ae+(W||aa?1:0),ac=ad.duration/S,ab=ad.easing,V="up"===af||"down"===af?"top":"left",ai="up"===af||"left"===af,t=0,ag=ah.queue().length;for(w.effects.createPlaceholder(ah),T=ah.css(V),P||(P=ah["top"===V?"outerHeight":"outerWidth"]()/3),W&&(U={opacity:1},U[V]=T,ah.css("opacity",0).css(V,ai?2*-P:2*P).animate(U,ac,ab)),aa&&(P/=Math.pow(2,ae-1)),U={},U[V]=T;ae>t;t++){Q={},Q[V]=(ai?"-=":"+=")+P,ah.animate(Q,ac,ab).animate(U,ac,ab),P=aa?2*P:P/2}aa&&(Q={opacity:0},Q[V]=(ai?"-=":"+=")+P,ah.animate(Q,ac,ab)),ah.queue(Z),w.effects.unshift(ah,ag,S+1)}),w.effects.define("clip","hide",function(u,p){var P,g={},f=w(this),v=u.direction||"vertical",d="both"===v,t=d||"horizontal"===v,m=d||"vertical"===v;P=f.cssClip(),g.clip={top:m?(P.bottom-P.top)/2:P.top,right:t?(P.right-P.left)/2:P.right,bottom:m?(P.bottom-P.top)/2:P.bottom,left:t?(P.right-P.left)/2:P.left},w.effects.createPlaceholder(f),"show"===u.mode&&(f.cssClip(g.clip),g.clip=P),f.animate(g,{queue:!1,duration:u.duration,easing:u.easing,complete:p})}),w.effects.define("drop","hide",function(v,p){var S,g=w(this),f=v.mode,Q="show"===f,d=v.direction||"left",t="up"===d||"down"===d?"top":"left",m="up"===d||"left"===d?"-=":"+=",P="+="===m?"-=":"+=",R={opacity:0};w.effects.createPlaceholder(g),S=v.distance||g["top"===t?"outerHeight":"outerWidth"](!0)/2,R[t]=m+S,Q&&(g.css(R),R[t]=P+S,R.opacity=1),g.animate(R,{queue:!1,duration:v.duration,easing:v.easing,complete:p})}),w.effects.define("explode","hide",function(ad,Z){function Q(){ag.push(this),ag.length===P*ae&&U()}function U(){S.css({visibility:"visible"}),w(ag).remove(),Z()}var T,ah,R,aa,W,af,P=ad.pieces?Math.round(Math.sqrt(ad.pieces)):3,ae=P,S=w(this),ac=ad.mode,ab="show"===ac,V=S.show().css("visibility","hidden").offset(),ai=Math.ceil(S.outerWidth()/ae),t=Math.ceil(S.outerHeight()/P),ag=[];for(T=0;P>T;T++){for(aa=V.top+T*t,af=T-(P-1)/2,ah=0;ae>ah;ah++){R=V.left+ah*ai,W=ah-(ae-1)/2,S.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-ah*ai,top:-T*t}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:ai,height:t,left:R+(ab?W*ai:0),top:aa+(ab?af*t:0),opacity:ab?0:1}).animate({left:R+(ab?0:W*ai),top:aa+(ab?0:af*t),opacity:ab?1:0},ad.duration||500,ad.easing,Q)}}}),w.effects.define("fade","toggle",function(f,a){var d="show"===f.mode;w(this).css("opacity",d?0:1).animate({opacity:d?1:0},{queue:!1,duration:f.duration,easing:f.easing,complete:a})}),w.effects.define("fold","hide",function(Z,T){var af=w(this),Q=Z.mode,P="show"===Q,ac="hide"===Q,t=Z.size||15,U=/([0-9]+)%/.exec(t),S=!!Z.horizFirst,ab=S?["right","bottom"]:["bottom","right"],ae=Z.duration/2,aa=w.effects.createPlaceholder(af),v=af.cssClip(),W={clip:w.extend({},v)},V={clip:w.extend({},v)},R=[v[ab[0]],v[ab[1]]],ad=af.queue().length;U&&(t=parseInt(U[1],10)/100*R[ac?0:1]),W.clip[ab[0]]=t,V.clip[ab[0]]=t,V.clip[ab[1]]=0,P&&(af.cssClip(V.clip),aa&&aa.css(w.effects.clipToBox(V)),V.clip=v),af.queue(function(a){aa&&aa.animate(w.effects.clipToBox(W),ae,Z.easing).animate(w.effects.clipToBox(V),ae,Z.easing),a()}).animate(W,ae,Z.easing).animate(V,ae,Z.easing).queue(T),w.effects.unshift(af,ad,4)}),w.effects.define("highlight","show",function(f,a){var d=w(this),g={backgroundColor:d.css("backgroundColor")};"hide"===f.mode&&(g.opacity=0),w.effects.saveStyle(d),d.css({backgroundImage:"none",backgroundColor:f.color||"#ffff99"}).animate(g,{queue:!1,duration:f.duration,easing:f.easing,complete:a})}),w.effects.define("size",function(ad,Z){var Q,U,T,ag=w(this),R=["fontSize"],aa=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],W=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],af=ad.mode,P="effect"!==af,ae=ad.scale||"both",S=ad.origin||["middle","center"],ac=ag.css("position"),ab=ag.position(),V=w.effects.scaledDimensions(ag),ah=ad.from||V,t=ad.to||w.effects.scaledDimensions(ag,0);w.effects.createPlaceholder(ag),"show"===af&&(T=ah,ah=t,t=T),U={from:{y:ah.height/V.height,x:ah.width/V.width},to:{y:t.height/V.height,x:t.width/V.width}},("box"===ae||"both"===ae)&&(U.from.y!==U.to.y&&(ah=w.effects.setTransition(ag,aa,U.from.y,ah),t=w.effects.setTransition(ag,aa,U.to.y,t)),U.from.x!==U.to.x&&(ah=w.effects.setTransition(ag,W,U.from.x,ah),t=w.effects.setTransition(ag,W,U.to.x,t))),("content"===ae||"both"===ae)&&U.from.y!==U.to.y&&(ah=w.effects.setTransition(ag,R,U.from.y,ah),t=w.effects.setTransition(ag,R,U.to.y,t)),S&&(Q=w.effects.getBaseline(S,V),ah.top=(V.outerHeight-ah.outerHeight)*Q.y+ab.top,ah.left=(V.outerWidth-ah.outerWidth)*Q.x+ab.left,t.top=(V.outerHeight-t.outerHeight)*Q.y+ab.top,t.left=(V.outerWidth-t.outerWidth)*Q.x+ab.left),ag.css(ah),("content"===ae||"both"===ae)&&(aa=aa.concat(["marginTop","marginBottom"]).concat(R),W=W.concat(["marginLeft","marginRight"]),ag.find("*[width]").each(function(){var e=w(this),f=w.effects.scaledDimensions(e),g={height:f.height*U.from.y,width:f.width*U.from.x,outerHeight:f.outerHeight*U.from.y,outerWidth:f.outerWidth*U.from.x},d={height:f.height*U.to.y,width:f.width*U.to.x,outerHeight:f.height*U.to.y,outerWidth:f.width*U.to.x};U.from.y!==U.to.y&&(g=w.effects.setTransition(e,aa,U.from.y,g),d=w.effects.setTransition(e,aa,U.to.y,d)),U.from.x!==U.to.x&&(g=w.effects.setTransition(e,W,U.from.x,g),d=w.effects.setTransition(e,W,U.to.x,d)),P&&w.effects.saveStyle(e),e.css(g),e.animate(d,ad.duration,ad.easing,function(){P&&w.effects.restoreStyle(e)})})),ag.animate(t,{queue:!1,duration:ad.duration,easing:ad.easing,complete:function(){var a=ag.offset();0===t.opacity&&ag.css("opacity",ah.opacity),P||(ag.css("position","static"===ac?"relative":ac).offset(a),w.effects.saveStyle(ag)),Z()}})}),w.effects.define("scale",function(h,f){var g=w(this),p=h.mode,m=parseInt(h.percent,10)||(0===parseInt(h.percent,10)?0:"effect"!==p?0:100),d=w.extend(!0,{from:w.effects.scaledDimensions(g),to:w.effects.scaledDimensions(g,m,h.direction||"both"),origin:h.origin||["middle","center"]},h);h.fade&&(d.from.opacity=1,d.to.opacity=0),w.effects.effect.size.call(this,d,f)}),w.effects.define("puff","hide",function(f,a){var d=w.extend(!0,{},f,{fade:!0,percent:parseInt(f.percent,10)||150});w.effects.effect.scale.call(this,d,a)}),w.effects.define("pulsate","show",function(P,t){var U=w(this),m=P.mode,g="show"===m,S="hide"===m,f=g||S,v=2*(P.times||5)+(f?1:0),p=P.duration/v,R=0,T=1,Q=U.queue().length;for((g||!U.is(":visible"))&&(U.css("opacity",0).show(),R=1);v>T;T++){U.animate({opacity:R},p,P.easing),R=1-R}U.animate({opacity:R},p,P.easing),U.queue(t),w.effects.unshift(U,Q,v+1)}),w.effects.define("shake",function(V,R){var ac=1,P=w(this),v=V.direction||"left",aa=V.distance||20,m=V.times||3,S=2*m+1,Q=Math.round(V.duration/S),Z="up"===v||"down"===v?"top":"left",ab="up"===v||"left"===v,W={},t={},U={},T=P.queue().length;for(w.effects.createPlaceholder(P),W[Z]=(ab?"-=":"+=")+aa,t[Z]=(ab?"+=":"-=")+2*aa,U[Z]=(ab?"-=":"+=")+2*aa,P.animate(W,Q,V.easing);m>ac;ac++){P.animate(t,Q,V.easing).animate(U,Q,V.easing)}P.animate(t,Q,V.easing).animate(W,Q/2,V.easing).queue(R),w.effects.unshift(P,T,S+1)}),w.effects.define("slide","show",function(P,t){var U,m,g=w(this),S={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},f=P.mode,v=P.direction||"left",p="up"===v||"down"===v?"top":"left",R="up"===v||"left"===v,T=P.distance||g["top"===p?"outerHeight":"outerWidth"](!0),Q={};w.effects.createPlaceholder(g),U=g.cssClip(),m=g.position()[p],Q[p]=(R?-1:1)*T+m,Q.clip=g.cssClip(),Q.clip[S[v][1]]=Q.clip[S[v][0]],"show"===f&&(g.cssClip(Q.clip),g.css(p,Q[p]),Q.clip=U,Q[p]=m),g.animate(Q,{queue:!1,duration:P.duration,easing:P.easing,complete:t})});var J;w.uiBackCompat!==!1&&(J=w.effects.define("transfer",function(d,a){w(this).transfer(d,a)})),w.ui.focusable=function(f,m){var u,t,e,p,g,d=f.nodeName.toLowerCase();return"area"===d?(u=f.parentNode,t=u.name,f.href&&t&&"map"===u.nodeName.toLowerCase()?(e=w("img[usemap='#"+t+"']"),e.length>0&&e.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(d)?(p=!f.disabled,p&&(g=w(f).closest("fieldset")[0],g&&(p=!g.disabled))):p="a"===d?f.href||m:m,p&&w(f).is(":visible")&&K(w(f)))},w.extend(w.expr[":"],{focusable:function(a){return w.ui.focusable(a,null!=w.attr(a,"tabindex"))}}),w.ui.focusable,w.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):w(this[0].form)},w.ui.formResetMixin={_formResetHandler:function(){var a=w(this);setTimeout(function(){var d=a.data("ui-form-reset-instances");w.each(d,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var a=this.form.data("ui-form-reset-instances")||[];a.length||this.form.on("reset.ui-form-reset",this._formResetHandler),a.push(this),this.form.data("ui-form-reset-instances",a)}},_unbindFormResetHandler:function(){if(this.form.length){var a=this.form.data("ui-form-reset-instances");a.splice(w.inArray(this,a),1),a.length?this.form.data("ui-form-reset-instances",a):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},"1.7"===w.fn.jquery.substring(0,3)&&(w.each(["Width","Height"],function(h,f){function g(t,a,n,u){return w.each(p,function(){a-=parseFloat(w.css(t,"padding"+this))||0,n&&(a-=parseFloat(w.css(t,"border"+this+"Width"))||0),u&&(a-=parseFloat(w.css(t,"margin"+this))||0)}),a}var p="Width"===f?["Left","Right"]:["Top","Bottom"],m=f.toLowerCase(),d={innerWidth:w.fn.innerWidth,innerHeight:w.fn.innerHeight,outerWidth:w.fn.outerWidth,outerHeight:w.fn.outerHeight};w.fn["inner"+f]=function(a){return void 0===a?d["inner"+f].call(this):this.each(function(){w(this).css(m,g(this,a)+"px")})},w.fn["outer"+f]=function(a,o){return"number"!=typeof a?d["outer"+f].call(this,a):this.each(function(){w(this).css(m,g(this,a,!0,o)+"px")})}}),w.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),w.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},w.ui.escapeSelector=function(){var a=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(d){return d.replace(a,"\\$1")}}(),w.fn.labels=function(){var f,a,d,h,g;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(h=this.eq(0).parents("label"),d=this.attr("id"),d&&(f=this.eq(0).parents().last(),g=f.add(f.length?f.siblings():this.siblings()),a="label[for='"+w.ui.escapeSelector(d)+"']",h=h.add(g.find(a).addBack(a))),this.pushStack(h))},w.fn.scrollParent=function(f){var a=this.css("position"),d="absolute"===a,h=f?/(auto|scroll|hidden)/:/(auto|scroll)/,g=this.parents().filter(function(){var m=w(this);return d&&"static"===m.css("position")?!1:h.test(m.css("overflow")+m.css("overflow-y")+m.css("overflow-x"))}).eq(0);return"fixed"!==a&&g.length?g:w(this[0].ownerDocument||document)},w.extend(w.expr[":"],{tabbable:function(f){var a=w.attr(f,"tabindex"),d=null!=a;return(!d||a>=0)&&w.ui.focusable(f,d)}}),w.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&w(this).removeAttr("id")})}}),w.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var a=this.options;this.prevShow=this.prevHide=w(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),a.collapsible||a.active!==!1&&null!=a.active||(a.active=0),this._processPanels(),0>a.active&&(a.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():w()}},_createIcons:function(){var f,a,d=this.options.icons;d&&(f=w("<span>"),this._addClass(f,"ui-accordion-header-icon","ui-icon "+d.header),f.prependTo(this.headers),a=this.active.children(".ui-accordion-header-icon"),this._removeClass(a,d.header)._addClass(a,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,d){return"active"===a?(this._activate(d),void 0):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(a,d),"collapsible"!==a||d||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),d&&this._createIcons()),void 0)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a),this._toggleClass(null,"ui-state-disabled",!!a),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!a)},_keydown:function(f){if(!f.altKey&&!f.ctrlKey){var a=w.ui.keyCode,d=this.headers.length,h=this.headers.index(f.target),g=!1;switch(f.keyCode){case a.RIGHT:case a.DOWN:g=this.headers[(h+1)%d];break;case a.LEFT:case a.UP:g=this.headers[(h-1+d)%d];break;case a.SPACE:case a.ENTER:this._eventHandler(f);break;case a.HOME:g=this.headers[0];break;case a.END:g=this.headers[d-1]}g&&(w(f.target).attr("tabIndex",-1),w(g).attr("tabIndex",0),w(g).trigger("focus"),f.preventDefault())}},_panelKeyDown:function(a){a.keyCode===w.ui.keyCode.UP&&a.ctrlKey&&w(a.currentTarget).prev().trigger("focus")},refresh:function(){var a=this.options;this._processPanels(),a.active===!1&&a.collapsible===!0||!this.headers.length?(a.active=!1,this.active=w()):a.active===!1?this._activate(0):this.active.length&&!w.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(a.active=!1,this.active=w()):this._activate(Math.max(0,a.active-1)):a.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var a=this.headers,d=this.panels;this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),d&&(this._off(a.not(this.headers)),this._off(d.not(this.panels)))},_refresh:function(){var f,a=this.options,d=a.heightStyle,g=this.element.parent();this.active=this._findActive(a.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var o=w(this),h=o.uniqueId().attr("id"),m=o.next(),p=m.uniqueId().attr("id");o.attr("aria-controls",p),m.attr("aria-labelledby",h)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(a.event),"fill"===d?(f=g.height(),this.element.siblings(":visible").each(function(){var e=w(this),h=e.css("position");"absolute"!==h&&"fixed"!==h&&(f-=e.outerHeight(!0))}),this.headers.each(function(){f-=w(this).outerHeight(!0)}),this.headers.next().each(function(){w(this).height(Math.max(0,f-w(this).innerHeight()+w(this).height()))}).css("overflow","auto")):"auto"===d&&(f=0,this.headers.next().each(function(){var e=w(this).is(":visible");e||w(this).show(),f=Math.max(f,w(this).css("height","").height()),e||w(this).hide()}).height(f))},_activate:function(d){var a=this._findActive(d)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,currentTarget:a,preventDefault:w.noop}))},_findActive:function(a){return"number"==typeof a?this.headers.eq(a):w()},_setupEvents:function(d){var a={keydown:"_keydown"};d&&w.each(d.split(" "),function(f,g){a[g]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,a),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(v){var p,S,g=this.options,f=this.active,Q=w(v.currentTarget),d=Q[0]===f[0],t=d&&g.collapsible,m=t?w():Q.next(),P=f.next(),R={oldHeader:f,oldPanel:P,newHeader:t?w():Q,newPanel:m};v.preventDefault(),d&&!g.collapsible||this._trigger("beforeActivate",v,R)===!1||(g.active=t?!1:this.headers.index(Q),this.active=d?w():Q,this._toggle(R),this._removeClass(f,"ui-accordion-header-active","ui-state-active"),g.icons&&(p=f.children(".ui-accordion-header-icon"),this._removeClass(p,null,g.icons.activeHeader)._addClass(p,null,g.icons.header)),d||(this._removeClass(Q,"ui-accordion-header-collapsed")._addClass(Q,"ui-accordion-header-active","ui-state-active"),g.icons&&(S=Q.children(".ui-accordion-header-icon"),this._removeClass(S,null,g.icons.header)._addClass(S,null,g.icons.activeHeader)),this._addClass(Q.next(),"ui-accordion-content-active")))},_toggle:function(f){var a=f.newPanel,d=this.prevShow.length?this.prevShow:f.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=a,this.prevHide=d,this.options.animate?this._animate(a,d,f):(d.hide(),a.show(),this._toggleComplete(f)),d.attr({"aria-hidden":"true"}),d.prev().attr({"aria-selected":"false","aria-expanded":"false"}),a.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):a.length&&this.headers.filter(function(){return 0===parseInt(w(this).attr("tabIndex"),10)}).attr("tabIndex",-1),a.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(V,Q,v){var W,m,g,T=this,f=0,P=V.css("box-sizing"),p=V.length&&(!Q.length||V.index()<Q.index()),S=this.options.animate||{},U=p&&S.down||S,R=function(){T._toggleComplete(v)};return"number"==typeof U&&(g=U),"string"==typeof U&&(m=U),m=m||U.easing||S.easing,g=g||U.duration||S.duration,Q.length?V.length?(W=V.show().outerHeight(),Q.animate(this.hideProps,{duration:g,easing:m,step:function(a,d){d.now=Math.round(a)}}),V.hide().animate(this.showProps,{duration:g,easing:m,complete:R,step:function(d,a){a.now=Math.round(d),"height"!==a.prop?"content-box"===P&&(f+=a.now):"content"!==T.options.heightStyle&&(a.now=Math.round(W-Q.outerHeight()-f),f=0)}}),void 0):Q.animate(this.hideProps,g,m,R):V.animate(this.showProps,g,m,R)},_toggleComplete:function(d){var f=d.oldPanel,a=f.prev();this._removeClass(f,"ui-accordion-content-active"),this._removeClass(a,"ui-accordion-header-active")._addClass(a,"ui-accordion-header-collapsed"),f.length&&(f.parent()[0].className=f.parent()[0].className),this._trigger("activate",null,d)}}),w.ui.safeActiveElement=function(d){var f;try{f=d.activeElement}catch(a){f=d.body}return f||(f=d.body),f.nodeName||(f=d.body),f},w.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(f){var a=w(f.target),d=w(w.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&a.not(".ui-state-disabled").length&&(this.select(f),f.isPropagationStopped()||(this.mouseHandled=!0),a.has(".ui-menu").length?this.expand(f):!this.element.is(":focus")&&d.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(f){if(!this.previousFilter){var a=w(f.target).closest(".ui-menu-item"),d=w(f.currentTarget);a[0]===d[0]&&(this._removeClass(d.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(f,d))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(d,f){var a=this.active||this.element.find(this.options.items).eq(0);f||this.focus(d,a)},blur:function(a){this._delay(function(){var d=!w.contains(this.element[0],w.ui.safeActiveElement(this.document[0]));d&&this.collapseAll(a)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){var d=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),a=d.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),a.children().each(function(){var f=w(this);f.data("ui-menu-submenu-caret")&&f.remove()})},_keydown:function(h){var f,g,p,m,d=!0;switch(h.keyCode){case w.ui.keyCode.PAGE_UP:this.previousPage(h);break;case w.ui.keyCode.PAGE_DOWN:this.nextPage(h);break;case w.ui.keyCode.HOME:this._move("first","first",h);break;case w.ui.keyCode.END:this._move("last","last",h);break;case w.ui.keyCode.UP:this.previous(h);break;case w.ui.keyCode.DOWN:this.next(h);break;case w.ui.keyCode.LEFT:this.collapse(h);break;case w.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(h);break;case w.ui.keyCode.ENTER:case w.ui.keyCode.SPACE:this._activate(h);break;case w.ui.keyCode.ESCAPE:this.collapse(h);break;default:d=!1,g=this.previousFilter||"",m=!1,p=h.keyCode>=96&&105>=h.keyCode?""+(h.keyCode-96):String.fromCharCode(h.keyCode),clearTimeout(this.filterTimer),p===g?m=!0:p=g+p,f=this._filterMenuItems(p),f=m&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f,f.length||(p=String.fromCharCode(h.keyCode),f=this._filterMenuItems(p)),f.length?(this.focus(h,f),this.previousFilter=p,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter}d&&h.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var t,f,m,v,u,d=this,p=this.options.icons.submenu,g=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),m=g.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var n=w(this),a=n.prev(),h=w("<span>").data("ui-menu-submenu-caret",!0);d._addClass(h,"ui-menu-icon","ui-icon "+p),a.attr("aria-haspopup","true").prepend(h),n.attr("aria-labelledby",a.attr("id"))}),this._addClass(m,"ui-menu","ui-widget ui-widget-content ui-front"),t=g.add(this.element),f=t.find(this.options.items),f.not(".ui-menu-item").each(function(){var a=w(this);d._isDivider(a)&&d._addClass(a,"ui-menu-divider","ui-widget-content")}),v=f.not(".ui-menu-item, .ui-menu-divider"),u=v.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(v,"ui-menu-item")._addClass(u,"ui-menu-item-wrapper"),f.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!w.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(d,f){if("icons"===d){var a=this.element.find(".ui-menu-icon");this._removeClass(a,null,this.options.icons.submenu)._addClass(a,null,f.submenu)}this._super(d,f)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a+""),this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(d,g){var a,f,h;this.blur(d,d&&"focus"===d.type),this._scrollIntoView(g),this.active=g.first(),f=this.active.children(".ui-menu-item-wrapper"),this._addClass(f,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",f.attr("id")),h=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(h,null,"ui-state-active"),d&&"keydown"===d.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),a=g.children(".ui-menu"),a.length&&d&&/^mouse/.test(d.type)&&this._startOpening(a),this.activeMenu=g.parent(),this._trigger("focus",d,{item:g})},_scrollIntoView:function(m){var f,g,t,p,d,h;this._hasScroll()&&(f=parseFloat(w.css(this.activeMenu[0],"borderTopWidth"))||0,g=parseFloat(w.css(this.activeMenu[0],"paddingTop"))||0,t=m.offset().top-this.activeMenu.offset().top-f-g,p=this.activeMenu.scrollTop(),d=this.activeMenu.height(),h=m.outerHeight(),0>t?this.activeMenu.scrollTop(p+t):t+h>d&&this.activeMenu.scrollTop(p+t-d+h))},blur:function(a,d){d||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(d){var a=w.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true"),d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(a)},collapseAll:function(d,a){clearTimeout(this.timer),this.timer=this._delay(function(){var e=a?this.element:w(d&&d.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(d),this._removeClass(e.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=e},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(a){return !w(a.target).closest(".ui-menu").length},_isDivider:function(a){return !/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var d=this.active&&this.active.parent().closest(".ui-menu-item",this.element);d&&d.length&&(this._close(),this.focus(a,d))},expand:function(a){var d=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();d&&d.length&&(this._open(d.parent()),this._delay(function(){this.focus(a,d)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(d,g,a){var f;this.active&&(f="first"===d||"last"===d?this.active["first"===d?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[d+"All"](".ui-menu-item").eq(0)),f&&f.length&&this.active||(f=this.activeMenu.find(this.options.items)[g]()),this.focus(a,f)},nextPage:function(f){var a,d,g;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,g=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return a=w(this),0>a.offset().top-d-g}),this.focus(f,a)):this.focus(f,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(f),void 0)},previousPage:function(f){var a,d,g;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,g=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return a=w(this),a.offset().top-d+g>0}),this.focus(f,a)):this.focus(f,this.activeMenu.find(this.options.items).first())),void 0):(this.next(f),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(d){this.active=this.active||w(d.target).closest(".ui-menu-item");var a={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(d,!0),this._trigger("select",d,a)},_filterMenuItems:function(f){var a=f.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=RegExp("^"+a,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(w.trim(w(this).children(".ui-menu-item-wrapper").text()))})}}),w.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var h,f,g,p=this.element[0].nodeName.toLowerCase(),m="textarea"===p,d="input"===p;this.isMultiLine=m||!d&&this._isContentEditable(this.element),this.valueMethod=this.element[m||d?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly")){return h=!0,g=!0,f=!0,void 0}h=!1,g=!1,f=!1;var a=w.ui.keyCode;switch(e.keyCode){case a.PAGE_UP:h=!0,this._move("previousPage",e);break;case a.PAGE_DOWN:h=!0,this._move("nextPage",e);break;case a.UP:h=!0,this._keyEvent("previous",e);break;case a.DOWN:h=!0,this._keyEvent("next",e);break;case a.ENTER:this.menu.active&&(h=!0,e.preventDefault(),this.menu.select(e));break;case a.TAB:this.menu.active&&this.menu.select(e);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:f=!0,this._searchTimeout(e)}},keypress:function(a){if(h){return h=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&a.preventDefault(),void 0}if(!f){var e=w.ui.keyCode;switch(a.keyCode){case e.PAGE_UP:this._move("previousPage",a);break;case e.PAGE_DOWN:this._move("nextPage",a);break;case e.UP:this._keyEvent("previous",a);break;case e.DOWN:this._keyEvent("next",a)}}},input:function(a){return g?(g=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}}),this._initSource(),this.menu=w("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(a){a.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==w.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,a){var o,u;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){w(t.target).trigger(t.originalEvent)}),void 0):(u=a.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:u})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(u.value),o=a.item.attr("aria-label")||u.value,o&&w.trim(o).length&&(this.liveRegion.children().hide(),w("<div>").text(o).appendTo(this.liveRegion)),void 0)},menuselect:function(t,a){var o=a.item.data("ui-autocomplete-item"),u=this.previous;this.element[0]!==w.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=u,this._delay(function(){this.previous=u,this.selectedItem=o})),!1!==this._trigger("select",t,{item:o})&&this._value(o.value),this.term=this._value(),this.close(t),this.selectedItem=o}}),this.liveRegion=w("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,d){this._super(a,d),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&d&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(d){var a=this.menu.element[0];return d.target===this.element[0]||d.target===a||w.contains(a,d.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||this.close()},_appendTo:function(){var a=this.options.appendTo;return a&&(a=a.jquery||a.nodeType?w(a):this.document.find(a).eq(0)),a&&a[0]||(a=this.element.closest(".ui-front, dialog")),a.length||(a=this.document[0].body),a},_initSource:function(){var f,a,d=this;w.isArray(this.options.source)?(f=this.options.source,this.source=function(e,g){g(w.ui.autocomplete.filter(f,e.term))}):"string"==typeof this.options.source?(a=this.options.source,this.source=function(g,h){d.xhr&&d.xhr.abort(),d.xhr=w.ajax({url:a,data:g,dataType:"json",success:function(e){h(e)},error:function(){h([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){var g=this.term===this._value(),d=this.menu.element.is(":visible"),f=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;(!g||g&&!d&&!f)&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,d){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(d):this._trigger("search",d)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=++this.requestIndex;return w.proxy(function(d){a===this.requestIndex&&this.__response(d),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:w.map(a,function(d){return"string"==typeof d?{label:d,value:d}:w.extend({},d,{label:d.label||d.value,value:d.value||d.label})})},_suggest:function(d){var a=this.menu.element.empty();this._renderMenu(a,d),this.isNewMenu=!0,this.menu.refresh(),a.show(),this._resizeMenu(),a.position(w.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(f,a){var d=this;w.each(a,function(g,e){d._renderItemData(f,e)})},_renderItemData:function(a,d){return this._renderItem(a,d).data("ui-autocomplete-item",d)},_renderItem:function(d,a){return w("<li>").append(w("<div>").text(a.label)).appendTo(d)},_move:function(a,d){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[a](d),void 0):(this.search(null,d),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,d){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,d),d.preventDefault())},_isContentEditable:function(a){if(!a.length){return !1}var d=a.prop("contentEditable");return"inherit"===d?this._isContentEditable(a.parent()):"true"===d}}),w.extend(w.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(f,a){var d=RegExp(w.ui.autocomplete.escapeRegex(a),"i");return w.grep(f,function(e){return d.test(e.label||e.value||e)})}}),w.widget("ui.autocomplete",w.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(d){var a;this._superApply(arguments),this.options.disabled||this.cancelSearch||(a=d&&d.length?this.options.messages.results(d.length):this.options.messages.noResults,this.liveRegion.children().hide(),w("<div>").text(a).appendTo(this.liveRegion))}}),w.ui.autocomplete;var I=/ui-corner-([a-z]){2,6}/g;w.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var d=this,a=[];w.each(this.options.items,function(f,h){var g,e={};return h?"controlgroupLabel"===f?(g=d.element.find(h),g.each(function(){var m=w(this);m.children(".ui-controlgroup-label-contents").length||m.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),d._addClass(g,null,"ui-widget ui-widget-content ui-state-default"),a=a.concat(g.get()),void 0):(w.fn[f]&&(e=d["_"+f+"Options"]?d["_"+f+"Options"]("middle"):{classes:{}},d.element.find(h).each(function(){var t=w(this),s=t[f]("instance"),p=w.widget.extend({},e);if("button"!==f||!t.parent(".ui-spinner").length){s||(s=t[f]()[f]("instance")),s&&(p.classes=d._resolveClassesValues(p.classes,s)),t[f](p);var m=t[f]("widget");w.data(m[0],"ui-controlgroup-data",s?s:t[f]("instance")),a.push(m[0])}})),void 0):void 0}),this.childWidgets=w(w.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(a){this.childWidgets.each(function(){var d=w(this),e=d.data("ui-controlgroup-data");e&&e[a]&&e[a]()})},_updateCornerClass:function(d,g){var a="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",f=this._buildSimpleOptions(g,"label").classes.label;this._removeClass(d,null,a),this._addClass(d,null,f)},_buildSimpleOptions:function(d,g){var a="vertical"===this.options.direction,f={classes:{}};return f.classes[g]={middle:"",first:"ui-corner-"+(a?"top":"left"),last:"ui-corner-"+(a?"bottom":"right"),only:"ui-corner-all"}[d],f},_spinnerOptions:function(a){var d=this._buildSimpleOptions(a,"ui-spinner");return d.classes["ui-spinner-up"]="",d.classes["ui-spinner-down"]="",d},_buttonOptions:function(a){return this._buildSimpleOptions(a,"ui-button")},_checkboxradioOptions:function(a){return this._buildSimpleOptions(a,"ui-checkboxradio-label")},_selectmenuOptions:function(a){var d="vertical"===this.options.direction;return{width:d?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(d?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(d?"top":"left")},last:{"ui-selectmenu-button-open":d?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(d?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[a]}},_resolveClassesValues:function(f,a){var d={};return w.each(f,function(g){var e=a.options.classes[g]||"";e=w.trim(e.replace(I,"")),d[g]=(e+" "+f[g]).replace(/\s+/g," ")}),d},_setOption:function(a,d){return"direction"===a&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(a,d),"disabled"===a?(this._callChildMethod(d?"disable":"enable"),void 0):(this.refresh(),void 0)},refresh:function(){var d,a=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),d=this.childWidgets,this.options.onlyVisible&&(d=d.filter(":visible")),d.length&&(w.each(["first","last"],function(e,f){var h=d[f]().data("ui-controlgroup-data");if(h&&a["_"+h.widgetName+"Options"]){var g=a["_"+h.widgetName+"Options"](1===d.length?"only":f);g.classes=a._resolveClassesValues(g.classes,h),h.element[h.widgetName](g)}else{a._updateCornerClass(d[f](),f)}}),this._callChildMethod("refresh"))}}),w.widget("ui.checkboxradio",[w.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var f,a,d=this,g=this._super()||{};return this._readType(),a=this.element.labels(),this.label=w(a[a.length-1]),this.label.length||w.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){d.originalLabel+=3===this.nodeType?w(this).text():this.outerHTML}),this.originalLabel&&(g.label=this.originalLabel),f=this.element[0].disabled,null!=f&&(g.disabled=f),g},_create:function(){var a=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),a&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var a=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===a&&/radio|checkbox/.test(this.type)||w.error("Can't create checkboxradio on element.nodeName="+a+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var f,a=this.element[0].name,d="input[name='"+w.ui.escapeSelector(a)+"']";return a?(f=this.form.length?w(this.form[0].elements).filter(d):w(d).filter(function(){return 0===w(this).form().length}),f.not(this.element)):w([])},_toggleClasses:function(){var a=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",a),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",a)._toggleClass(this.icon,null,"ui-icon-blank",!a),"radio"===this.type&&this._getRadioGroup().each(function(){var d=w(this).checkboxradio("instance");d&&d._removeClass(d.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(a,d){return"label"!==a||d?(this._super(a,d),"disabled"===a?(this._toggleClass(this.label,null,"ui-state-disabled",d),this.element[0].disabled=d,void 0):(this.refresh(),void 0)):void 0},_updateIcon:function(d){var a="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=w("<span>"),this.iconSpace=w("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(a+=d?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,d?"ui-icon-blank":"ui-icon-check")):a+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",a),d||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var a=this.label.contents().not(this.element[0]);this.icon&&(a=a.not(this.icon[0])),this.iconSpace&&(a=a.not(this.iconSpace[0])),a.remove(),this.label.append(this.options.label)},refresh:function(){var a=this.element[0].checked,d=this.element[0].disabled;this._updateIcon(a),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",a),null!==this.options.label&&this._updateLabel(),d!==this.options.disabled&&this._setOptions({disabled:d})}}]),w.ui.checkboxradio,w.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var a,d=this._super()||{};return this.isInput=this.element.is("input"),a=this.element[0].disabled,null!=a&&(d.disabled=a),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(d.label=this.originalLabel),d},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(a){a.keyCode===w.ui.keyCode.SPACE&&(a.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(f,a){var d="iconPosition"!==f,h=d?this.options.iconPosition:a,g="top"===h||"bottom"===h;this.icon?d&&this._removeClass(this.icon,null,this.options.icon):(this.icon=w("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),d&&this._addClass(this.icon,null,a),this._attachIcon(h),g?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=w("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(h))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(a){this.icon[/^(?:end|bottom)/.test(a)?"before":"after"](this.iconSpace)},_attachIcon:function(a){this.element[/^(?:end|bottom)/.test(a)?"append":"prepend"](this.icon)},_setOptions:function(d){var f=void 0===d.showLabel?this.options.showLabel:d.showLabel,a=void 0===d.icon?this.options.icon:d.icon;f||a||(d.showLabel=!0),this._super(d)},_setOption:function(a,d){"icon"===a&&(d?this._updateIcon(a,d):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===a&&this._updateIcon(a,d),"showLabel"===a&&(this._toggleClass("ui-button-icon-only",null,!d),this._updateTooltip()),"label"===a&&(this.isInput?this.element.val(d):(this.element.html(d),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(a,d),"disabled"===a&&(this._toggleClass(null,"ui-state-disabled",d),this.element[0].disabled=d,d&&this.element.blur())},refresh:function(){var a=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOptions({disabled:a}),this._updateTooltip()}}),w.uiBackCompat!==!1&&(w.widget("ui.button",w.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(a,d){return"text"===a?(this._super("showLabel",d),void 0):("showLabel"===a&&(this.options.text=d),"icon"===a&&(this.options.icons.primary=d),"icons"===a&&(d.primary?(this._super("icon",d.primary),this._super("iconPosition","beginning")):d.secondary&&(this._super("icon",d.secondary),this._super("iconPosition","end"))),this._superApply(arguments),void 0)}}),w.fn.button=function(a){return function(){return !this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?a.apply(this,arguments):(w.ui.checkboxradio||w.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(w.fn.button),w.fn.buttonset=function(){return w.ui.controlgroup||w.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),w.ui.button,w.extend(w.ui,{datepicker:{version:"1.12.1"}});var E;w.extend(z.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return N(this._defaults,a||{}),this},_attachDatepicker:function(f,a){var d,h,g;d=f.nodeName.toLowerCase(),h="div"===d||"span"===d,f.id||(this.uuid+=1,f.id="dp"+this.uuid),g=this._newInst(w(f),h),g.settings=w.extend({},a||{}),"input"===d?this._connectDatepicker(f,g):h&&this._inlineDatepicker(f,g)},_newInst:function(f,a){var d=f[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:d,input:f,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:a,dpDiv:a?D(w("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(f,a){var d=w(f);a.append=w([]),a.trigger=w([]),d.hasClass(this.markerClassName)||(this._attachments(d,a),d.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(a),w.data(f,"datepicker",a),a.settings.disabled&&this._disableDatepicker(f))},_attachments:function(m,f){var g,t,p,d=this._get(f,"appendText"),h=this._get(f,"isRTL");f.append&&f.append.remove(),d&&(f.append=w("<span class='"+this._appendClass+"'>"+d+"</span>"),m[h?"before":"after"](f.append)),m.off("focus",this._showDatepicker),f.trigger&&f.trigger.remove(),g=this._get(f,"showOn"),("focus"===g||"both"===g)&&m.on("focus",this._showDatepicker),("button"===g||"both"===g)&&(t=this._get(f,"buttonText"),p=this._get(f,"buttonImage"),f.trigger=w(this._get(f,"buttonImageOnly")?w("<img/>").addClass(this._triggerClass).attr({src:p,alt:t,title:t}):w("<button type='button'></button>").addClass(this._triggerClass).html(p?w("<img/>").attr({src:p,alt:t,title:t}):t)),m[h?"before":"after"](f.trigger),f.trigger.on("click",function(){return w.datepicker._datepickerShowing&&w.datepicker._lastInput===m[0]?w.datepicker._hideDatepicker():w.datepicker._datepickerShowing&&w.datepicker._lastInput!==m[0]?(w.datepicker._hideDatepicker(),w.datepicker._showDatepicker(m[0])):w.datepicker._showDatepicker(m[0]),!1}))},_autoSize:function(g){if(this._get(g,"autoSize")&&!g.inline){var m,f,h,u,p=new Date(2009,11,20),d=this._get(g,"dateFormat");d.match(/[DM]/)&&(m=function(a){for(f=0,h=0,u=0;a.length>u;u++){a[u].length>f&&(f=a[u].length,h=u)}return h},p.setMonth(m(this._get(g,d.match(/MM/)?"monthNames":"monthNamesShort"))),p.setDate(m(this._get(g,d.match(/DD/)?"dayNames":"dayNamesShort"))+20-p.getDay())),g.input.attr("size",this._formatDate(g,p).length)}},_inlineDatepicker:function(f,a){var d=w(f);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(a.dpDiv),w.data(f,"datepicker",a),this._setDate(a,this._getDefaultDate(a),!0),this._updateDatepicker(a),this._updateAlternate(a),a.settings.disabled&&this._disableDatepicker(f),a.dpDiv.css("display","block"))},_dialogDatepicker:function(v,p,S,g,f){var a,t,m,Q,R,P=this._dialogInst;return P||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=w("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),w("body").append(this._dialogInput),P=this._dialogInst=this._newInst(this._dialogInput,!1),P.settings={},w.data(this._dialogInput[0],"datepicker",P)),N(P.settings,g||{}),p=p&&p.constructor===Date?this._formatDate(P,p):p,this._dialogInput.val(p),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(t=document.documentElement.clientWidth,m=document.documentElement.clientHeight,Q=document.documentElement.scrollLeft||document.body.scrollLeft,R=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[t/2-100+Q,m/2-150+R]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),P.settings.onSelect=S,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),w.blockUI&&w.blockUI(this.dpDiv),w.data(this._dialogInput[0],"datepicker",P),this},_destroyDatepicker:function(f){var a,d=w(f),g=w.data(f,"datepicker");d.hasClass(this.markerClassName)&&(a=f.nodeName.toLowerCase(),w.removeData(f,"datepicker"),"input"===a?(g.append.remove(),g.trigger.remove(),d.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===a||"span"===a)&&d.removeClass(this.markerClassName).empty(),E===g&&(E=null))},_enableDatepicker:function(f){var a,d,h=w(f),g=w.data(f,"datepicker");h.hasClass(this.markerClassName)&&(a=f.nodeName.toLowerCase(),"input"===a?(f.disabled=!1,g.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===a||"span"===a)&&(d=h.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=w.map(this._disabledInputs,function(e){return e===f?null:e}))},_disableDatepicker:function(f){var a,d,h=w(f),g=w.data(f,"datepicker");h.hasClass(this.markerClassName)&&(a=f.nodeName.toLowerCase(),"input"===a?(f.disabled=!0,g.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===a||"span"===a)&&(d=h.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=w.map(this._disabledInputs,function(e){return e===f?null:e}),this._disabledInputs[this._disabledInputs.length]=f)},_isDisabledDatepicker:function(a){if(!a){return !1}for(var d=0;this._disabledInputs.length>d;d++){if(this._disabledInputs[d]===a){return !0}}return !1},_getInst:function(d){try{return w.data(d,"datepicker")}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(p,d,g){var u,t,m,f,a=this._getInst(p);return 2===arguments.length&&"string"==typeof d?"defaults"===d?w.extend({},w.datepicker._defaults):a?"all"===d?w.extend({},a.settings):this._get(a,d):null:(u=d||{},"string"==typeof d&&(u={},u[d]=g),a&&(this._curInst===a&&this._hideDatepicker(),t=this._getDateDatepicker(p,!0),m=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),N(a.settings,u),null!==m&&void 0!==u.dateFormat&&void 0===u.minDate&&(a.settings.minDate=this._formatDate(a,m)),null!==f&&void 0!==u.dateFormat&&void 0===u.maxDate&&(a.settings.maxDate=this._formatDate(a,f)),"disabled" in u&&(u.disabled?this._disableDatepicker(p):this._enableDatepicker(p)),this._attachments(w(p),a),this._autoSize(a),this._setDate(a,t),this._updateAlternate(a),this._updateDatepicker(a)),void 0)},_changeDatepicker:function(d,f,a){this._optionDatepicker(d,f,a)},_refreshDatepicker:function(a){var d=this._getInst(a);d&&this._updateDatepicker(d)},_setDateDatepicker:function(d,f){var a=this._getInst(d);a&&(this._setDate(a,f),this._updateDatepicker(a),this._updateAlternate(a))},_getDateDatepicker:function(d,f){var a=this._getInst(d);return a&&!a.inline&&this._setDateFromField(a,f),a?this._getDate(a):null},_doKeyDown:function(m){var f,g,t,p=w.datepicker._getInst(m.target),d=!0,h=p.dpDiv.is(".ui-datepicker-rtl");if(p._keyEvent=!0,w.datepicker._datepickerShowing){switch(m.keyCode){case 9:w.datepicker._hideDatepicker(),d=!1;break;case 13:return t=w("td."+w.datepicker._dayOverClass+":not(."+w.datepicker._currentClass+")",p.dpDiv),t[0]&&w.datepicker._selectDay(m.target,p.selectedMonth,p.selectedYear,t[0]),f=w.datepicker._get(p,"onSelect"),f?(g=w.datepicker._formatDate(p),f.apply(p.input?p.input[0]:null,[g,p])):w.datepicker._hideDatepicker(),!1;case 27:w.datepicker._hideDatepicker();break;case 33:w.datepicker._adjustDate(m.target,m.ctrlKey?-w.datepicker._get(p,"stepBigMonths"):-w.datepicker._get(p,"stepMonths"),"M");break;case 34:w.datepicker._adjustDate(m.target,m.ctrlKey?+w.datepicker._get(p,"stepBigMonths"):+w.datepicker._get(p,"stepMonths"),"M");break;case 35:(m.ctrlKey||m.metaKey)&&w.datepicker._clearDate(m.target),d=m.ctrlKey||m.metaKey;break;case 36:(m.ctrlKey||m.metaKey)&&w.datepicker._gotoToday(m.target),d=m.ctrlKey||m.metaKey;break;case 37:(m.ctrlKey||m.metaKey)&&w.datepicker._adjustDate(m.target,h?1:-1,"D"),d=m.ctrlKey||m.metaKey,m.originalEvent.altKey&&w.datepicker._adjustDate(m.target,m.ctrlKey?-w.datepicker._get(p,"stepBigMonths"):-w.datepicker._get(p,"stepMonths"),"M");break;case 38:(m.ctrlKey||m.metaKey)&&w.datepicker._adjustDate(m.target,-7,"D"),d=m.ctrlKey||m.metaKey;break;case 39:(m.ctrlKey||m.metaKey)&&w.datepicker._adjustDate(m.target,h?-1:1,"D"),d=m.ctrlKey||m.metaKey,m.originalEvent.altKey&&w.datepicker._adjustDate(m.target,m.ctrlKey?+w.datepicker._get(p,"stepBigMonths"):+w.datepicker._get(p,"stepMonths"),"M");break;case 40:(m.ctrlKey||m.metaKey)&&w.datepicker._adjustDate(m.target,7,"D"),d=m.ctrlKey||m.metaKey;break;default:d=!1}}else{36===m.keyCode&&m.ctrlKey?w.datepicker._showDatepicker(this):d=!1}d&&(m.preventDefault(),m.stopPropagation())},_doKeyPress:function(f){var a,d,g=w.datepicker._getInst(f.target);return w.datepicker._get(g,"constrainInput")?(a=w.datepicker._possibleChars(w.datepicker._get(g,"dateFormat")),d=String.fromCharCode(null==f.charCode?f.keyCode:f.charCode),f.ctrlKey||f.metaKey||" ">d||!a||a.indexOf(d)>-1):void 0},_doKeyUp:function(f){var a,d=w.datepicker._getInst(f.target);if(d.input.val()!==d.lastVal){try{a=w.datepicker.parseDate(w.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,w.datepicker._getFormatConfig(d)),a&&(w.datepicker._setDateFromField(d),w.datepicker._updateAlternate(d),w.datepicker._updateDatepicker(d))}catch(g){}}return !0},_showDatepicker:function(m){if(m=m.target||m,"input"!==m.nodeName.toLowerCase()&&(m=w("input",m.parentNode)[0]),!w.datepicker._isDisabledDatepicker(m)&&w.datepicker._lastInput!==m){var f,u,p,g,d,a,t;f=w.datepicker._getInst(m),w.datepicker._curInst&&w.datepicker._curInst!==f&&(w.datepicker._curInst.dpDiv.stop(!0,!0),f&&w.datepicker._datepickerShowing&&w.datepicker._hideDatepicker(w.datepicker._curInst.input[0])),u=w.datepicker._get(f,"beforeShow"),p=u?u.apply(m,[m,f]):{},p!==!1&&(N(f.settings,p),f.lastVal=null,w.datepicker._lastInput=m,w.datepicker._setDateFromField(f),w.datepicker._inDialog&&(m.value=""),w.datepicker._pos||(w.datepicker._pos=w.datepicker._findPos(m),w.datepicker._pos[1]+=m.offsetHeight),g=!1,w(m).parents().each(function(){return g|="fixed"===w(this).css("position"),!g}),d={left:w.datepicker._pos[0],top:w.datepicker._pos[1]},w.datepicker._pos=null,f.dpDiv.empty(),f.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),w.datepicker._updateDatepicker(f),d=w.datepicker._checkOffset(f,d,g),f.dpDiv.css({position:w.datepicker._inDialog&&w.blockUI?"static":g?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"}),f.inline||(a=w.datepicker._get(f,"showAnim"),t=w.datepicker._get(f,"duration"),f.dpDiv.css("z-index",G(w(m))+1),w.datepicker._datepickerShowing=!0,w.effects&&w.effects.effect[a]?f.dpDiv.show(a,w.datepicker._get(f,"showOptions"),t):f.dpDiv[a||"show"](a?t:null),w.datepicker._shouldFocusInput(f)&&f.input.trigger("focus"),w.datepicker._curInst=f))}},_updateDatepicker:function(m){this.maxRows=4,E=m,m.dpDiv.empty().append(this._generateHTML(m)),this._attachHandlers(m);var f,g=this._getNumberOfMonths(m),o=g[1],d=17,h=m.dpDiv.find("."+this._dayOverClass+" a");h.length>0&&C.apply(h.get(0)),m.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&m.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",d*o+"em"),m.dpDiv[(1!==g[0]||1!==g[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),m.dpDiv[(this._get(m,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),m===w.datepicker._curInst&&w.datepicker._datepickerShowing&&w.datepicker._shouldFocusInput(m)&&m.input.trigger("focus"),m.yearshtml&&(f=m.yearshtml,setTimeout(function(){f===m.yearshtml&&m.yearshtml&&m.dpDiv.find("select.ui-datepicker-year:first").replaceWith(m.yearshtml),f=m.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(u,p,P){var g=u.dpDiv.outerWidth(),f=u.dpDiv.outerHeight(),v=u.input?u.input.outerWidth():0,d=u.input?u.input.outerHeight():0,t=document.documentElement.clientWidth+(P?0:w(document).scrollLeft()),m=document.documentElement.clientHeight+(P?0:w(document).scrollTop());return p.left-=this._get(u,"isRTL")?g-v:0,p.left-=P&&p.left===u.input.offset().left?w(document).scrollLeft():0,p.top-=P&&p.top===u.input.offset().top+d?w(document).scrollTop():0,p.left-=Math.min(p.left,p.left+g>t&&t>g?Math.abs(p.left+g-t):0),p.top-=Math.min(p.top,p.top+f>m&&m>f?Math.abs(f+d):0),p},_findPos:function(f){for(var a,d=this._getInst(f),g=this._get(d,"isRTL");f&&("hidden"===f.type||1!==f.nodeType||w.expr.filters.hidden(f));){f=f[g?"previousSibling":"nextSibling"]}return a=w(f).offset(),[a.left,a.top]},_hideDatepicker:function(h){var f,g,p,m,d=this._curInst;!d||h&&d!==w.data(h,"datepicker")||this._datepickerShowing&&(f=this._get(d,"showAnim"),g=this._get(d,"duration"),p=function(){w.datepicker._tidyDialog(d)},w.effects&&(w.effects.effect[f]||w.effects[f])?d.dpDiv.hide(f,w.datepicker._get(d,"showOptions"),g,p):d.dpDiv["slideDown"===f?"slideUp":"fadeIn"===f?"fadeOut":"hide"](f?g:null,p),f||p(),this._datepickerShowing=!1,m=this._get(d,"onClose"),m&&m.apply(d.input?d.input[0]:null,[d.input?d.input.val():"",d]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),w.blockUI&&(w.unblockUI(),w("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(f){if(w.datepicker._curInst){var a=w(f.target),d=w.datepicker._getInst(a[0]);(a[0].id!==w.datepicker._mainDivId&&0===a.parents("#"+w.datepicker._mainDivId).length&&!a.hasClass(w.datepicker.markerClassName)&&!a.closest("."+w.datepicker._triggerClass).length&&w.datepicker._datepickerShowing&&(!w.datepicker._inDialog||!w.blockUI)||a.hasClass(w.datepicker.markerClassName)&&w.datepicker._curInst!==d)&&w.datepicker._hideDatepicker()}},_adjustDate:function(f,a,d){var h=w(f),g=this._getInst(h[0]);this._isDisabledDatepicker(h[0])||(this._adjustInstDate(g,a+("M"===d?this._get(g,"showCurrentAtPos"):0),d),this._updateDatepicker(g))},_gotoToday:function(f){var a,d=w(f),g=this._getInst(d[0]);this._get(g,"gotoCurrent")&&g.currentDay?(g.selectedDay=g.currentDay,g.drawMonth=g.selectedMonth=g.currentMonth,g.drawYear=g.selectedYear=g.currentYear):(a=new Date,g.selectedDay=a.getDate(),g.drawMonth=g.selectedMonth=a.getMonth(),g.drawYear=g.selectedYear=a.getFullYear()),this._notifyChange(g),this._adjustDate(d)},_selectMonthYear:function(f,a,d){var h=w(f),g=this._getInst(h[0]);g["selected"+("M"===d?"Month":"Year")]=g["draw"+("M"===d?"Month":"Year")]=parseInt(a.options[a.selectedIndex].value,10),this._notifyChange(g),this._adjustDate(h)},_selectDay:function(h,f,g,p){var m,d=w(h);w(p).hasClass(this._unselectableClass)||this._isDisabledDatepicker(d[0])||(m=this._getInst(d[0]),m.selectedDay=m.currentDay=w("a",p).html(),m.selectedMonth=m.currentMonth=f,m.selectedYear=m.currentYear=g,this._selectDate(h,this._formatDate(m,m.currentDay,m.currentMonth,m.currentYear)))},_clearDate:function(d){var a=w(d);this._selectDate(a,"")},_selectDate:function(f,a){var d,h=w(f),g=this._getInst(h[0]);a=null!=a?a:this._formatDate(g),g.input&&g.input.val(a),this._updateAlternate(g),d=this._get(g,"onSelect"),d?d.apply(g.input?g.input[0]:null,[a,g]):g.input&&g.input.trigger("change"),g.inline?this._updateDatepicker(g):(this._hideDatepicker(),this._lastInput=g.input[0],"object"!=typeof g.input[0]&&g.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(f){var a,d,h,g=this._get(f,"altField");g&&(a=this._get(f,"altFormat")||this._get(f,"dateFormat"),d=this._getDate(f),h=this.formatDate(a,d,this._getFormatConfig(f)),w(g).val(h))},noWeekends:function(a){var d=a.getDay();return[d>0&&6>d,""]},iso8601Week:function(d){var f,a=new Date(d.getTime());return a.setDate(a.getDate()+4-(a.getDay()||7)),f=a.getTime(),a.setMonth(0),a.setDate(1),Math.floor(Math.round((f-a)/86400000)/7)+1},parseDate:function(ah,ad,T){if(null==ah||null==ad){throw"Invalid arguments"}if(ad="object"==typeof ad?""+ad:ad+"",""===ad){return null}var Z,W,al,U,ae=0,ab=(T?T.shortYearCutoff:null)||this._defaults.shortYearCutoff,aj="string"!=typeof ab?ab:(new Date).getFullYear()%100+parseInt(ab,10),S=(T?T.dayNamesShort:null)||this._defaults.dayNamesShort,ai=(T?T.dayNames:null)||this._defaults.dayNames,V=(T?T.monthNamesShort:null)||this._defaults.monthNamesShort,ag=(T?T.monthNames:null)||this._defaults.monthNames,af=-1,aa=-1,am=-1,R=-1,ak=!1,t=function(d){var a=ah.length>Z+1&&ah.charAt(Z+1)===d;return a&&Z++,a},Q=function(f){var h=t(f),g="@"===f?14:"!"===f?20:"y"===f&&h?4:"o"===f?3:2,p="y"===f?g:1,m=RegExp("^\\d{"+p+","+g+"}"),d=ad.substring(ae).match(m);if(!d){throw"Missing number at position "+ae}return ae+=d[0].length,parseInt(d[0],10)},ac=function(g,f,m){var h=-1,d=w.map(t(g)?m:f,function(a,n){return[[n,a]]}).sort(function(a,n){return -(a[1].length-n[1].length)});if(w.each(d,function(a,o){var n=o[1];return ad.substr(ae,n.length).toLowerCase()===n.toLowerCase()?(h=o[0],ae+=n.length,!1):void 0}),-1!==h){return h+1}throw"Unknown name at position "+ae},P=function(){if(ad.charAt(ae)!==ah.charAt(Z)){throw"Unexpected literal at position "+ae}ae++};for(Z=0;ah.length>Z;Z++){if(ak){"'"!==ah.charAt(Z)||t("'")?P():ak=!1}else{switch(ah.charAt(Z)){case"d":am=Q("d");break;case"D":ac("D",S,ai);break;case"o":R=Q("o");break;case"m":aa=Q("m");break;case"M":aa=ac("M",V,ag);break;case"y":af=Q("y");break;case"@":U=new Date(Q("@")),af=U.getFullYear(),aa=U.getMonth()+1,am=U.getDate();break;case"!":U=new Date((Q("!")-this._ticksTo1970)/10000),af=U.getFullYear(),aa=U.getMonth()+1,am=U.getDate();break;case"'":t("'")?P():ak=!0;break;default:P()}}}if(ad.length>ae&&(al=ad.substr(ae),!/^\s+/.test(al))){throw"Extra/unparsed characters found in date: "+al}if(-1===af?af=(new Date).getFullYear():100>af&&(af+=(new Date).getFullYear()-(new Date).getFullYear()%100+(aj>=af?0:-100)),R>-1){for(aa=1,am=R;;){if(W=this._getDaysInMonth(af,aa-1),W>=am){break}aa++,am-=W}}if(U=this._daylightSavingAdjust(new Date(af,aa-1,am)),U.getFullYear()!==af||U.getMonth()+1!==aa||U.getDate()!==am){throw"Invalid date"}return U},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:10000000*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(V,Q,v){if(!Q){return""}var W,m=(v?v.dayNamesShort:null)||this._defaults.dayNamesShort,g=(v?v.dayNames:null)||this._defaults.dayNames,T=(v?v.monthNamesShort:null)||this._defaults.monthNamesShort,f=(v?v.monthNames:null)||this._defaults.monthNames,P=function(d){var a=V.length>W+1&&V.charAt(W+1)===d;return a&&W++,a},p=function(d,n,a){var h=""+n;if(P(d)){for(;a>h.length;){h="0"+h}}return h},S=function(d,n,a,h){return P(d)?h[n]:a[n]},U="",R=!1;if(Q){for(W=0;V.length>W;W++){if(R){"'"!==V.charAt(W)||P("'")?U+=V.charAt(W):R=!1}else{switch(V.charAt(W)){case"d":U+=p("d",Q.getDate(),2);break;case"D":U+=S("D",Q.getDay(),m,g);break;case"o":U+=p("o",Math.round((new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()).getTime()-new Date(Q.getFullYear(),0,0).getTime())/86400000),3);break;case"m":U+=p("m",Q.getMonth()+1,2);break;case"M":U+=S("M",Q.getMonth(),T,f);break;case"y":U+=P("y")?Q.getFullYear():(10>Q.getFullYear()%100?"0":"")+Q.getFullYear()%100;break;case"@":U+=Q.getTime();break;case"!":U+=10000*Q.getTime()+this._ticksTo1970;break;case"'":P("'")?U+="'":R=!0;break;default:U+=V.charAt(W)}}}}return U},_possibleChars:function(d){var g,a="",f=!1,h=function(e){var m=d.length>g+1&&d.charAt(g+1)===e;return m&&g++,m};for(g=0;d.length>g;g++){if(f){"'"!==d.charAt(g)||h("'")?a+=d.charAt(g):f=!1}else{switch(d.charAt(g)){case"d":case"m":case"y":case"@":a+="0123456789";break;case"D":case"M":return null;case"'":h("'")?a+="'":f=!0;break;default:a+=d.charAt(g)}}}return a},_get:function(a,d){return void 0!==a.settings[d]?a.settings[d]:this._defaults[d]},_setDateFromField:function(g,p){if(g.input.val()!==g.lastVal){var f=this._get(g,"dateFormat"),h=g.lastVal=g.input?g.input.val():null,v=this._getDefaultDate(g),u=v,d=this._getFormatConfig(g);try{u=this.parseDate(f,h,d)||v}catch(m){h=p?"":h}g.selectedDay=u.getDate(),g.drawMonth=g.selectedMonth=u.getMonth(),g.drawYear=g.selectedYear=u.getFullYear(),g.currentDay=h?u.getDate():0,g.currentMonth=h?u.getMonth():0,g.currentYear=h?u.getFullYear():0,this._adjustInstDate(g)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(h,f,g){var p=function(a){var n=new Date;return n.setDate(n.getDate()+a),n},m=function(u){try{return w.datepicker.parseDate(w.datepicker._get(h,"dateFormat"),u,w.datepicker._getFormatConfig(h))}catch(P){}for(var S=(u.toLowerCase().match(/^c/)?w.datepicker._getDate(h):null)||new Date,R=S.getFullYear(),t=S.getMonth(),Q=S.getDate(),v=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,e=v.exec(u);e;){switch(e[2]||"d"){case"d":case"D":Q+=parseInt(e[1],10);break;case"w":case"W":Q+=7*parseInt(e[1],10);break;case"m":case"M":t+=parseInt(e[1],10),Q=Math.min(Q,w.datepicker._getDaysInMonth(R,t));break;case"y":case"Y":R+=parseInt(e[1],10),Q=Math.min(Q,w.datepicker._getDaysInMonth(R,t))}e=v.exec(u)}return new Date(R,t,Q)},d=null==f||""===f?g:"string"==typeof f?m(f):"number"==typeof f?isNaN(f)?g:p(f):new Date(f.getTime());return d=d&&"Invalid Date"==""+d?g:d,d&&(d.setHours(0),d.setMinutes(0),d.setSeconds(0),d.setMilliseconds(0)),this._daylightSavingAdjust(d)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(g,m,f){var h=!m,u=g.selectedMonth,p=g.selectedYear,d=this._restrictMinMax(g,this._determineDate(g,m,new Date));g.selectedDay=g.currentDay=d.getDate(),g.drawMonth=g.selectedMonth=g.currentMonth=d.getMonth(),g.drawYear=g.selectedYear=g.currentYear=d.getFullYear(),u===g.selectedMonth&&p===g.selectedYear||f||this._notifyChange(g),this._adjustInstDate(g),g.input&&g.input.val(h?"":this._formatDate(g))},_getDate:function(a){var d=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return d},_attachHandlers:function(f){var a=this._get(f,"stepMonths"),d="#"+f.id.replace(/\\\\/g,"\\");f.dpDiv.find("[data-handler]").map(function(){var g={prev:function(){w.datepicker._adjustDate(d,-a,"M")},next:function(){w.datepicker._adjustDate(d,+a,"M")},hide:function(){w.datepicker._hideDatepicker()},today:function(){w.datepicker._gotoToday(d)},selectDay:function(){return w.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return w.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return w.datepicker._selectMonthYear(d,this,"Y"),!1}};w(this).on(this.getAttribute("data-event"),g[this.getAttribute("data-handler")])})},_generateHTML:function(aJ){var aY,aU,aK,aP,aO,a2,aL,aV,aR,a0,aI,aZ,aN,aX,aW,aQ,a3,aH,a1,aE,aG,aS,aF,az,ay,at,ah,al,ao,ai,au,aD,am,aB,an,ae,ax,aw,ap,aj=new Date,aA=this._daylightSavingAdjust(new Date(aj.getFullYear(),aj.getMonth(),aj.getDate())),ab=this._get(aJ,"isRTL"),aT=this._get(aJ,"showButtonPanel"),aM=this._get(aJ,"hideIfNoPrevNext"),aq=this._get(aJ,"navigationAsDateFormat"),ag=this._getNumberOfMonths(aJ),af=this._get(aJ,"showCurrentAtPos"),aC=this._get(aJ,"stepMonths"),ac=1!==ag[0]||1!==ag[1],av=this._daylightSavingAdjust(aJ.currentDay?new Date(aJ.currentYear,aJ.currentMonth,aJ.currentDay):new Date(9999,9,9)),ak=this._getMinMaxDate(aJ,"min"),ar=this._getMinMaxDate(aJ,"max"),aa=aJ.drawMonth-af,ad=aJ.drawYear;if(0>aa&&(aa+=12,ad--),ar){for(aY=this._daylightSavingAdjust(new Date(ar.getFullYear(),ar.getMonth()-ag[0]*ag[1]+1,ar.getDate())),aY=ak&&ak>aY?ak:aY;this._daylightSavingAdjust(new Date(ad,aa,1))>aY;){aa--,0>aa&&(aa=11,ad--)}}for(aJ.drawMonth=aa,aJ.drawYear=ad,aU=this._get(aJ,"prevText"),aU=aq?this.formatDate(aU,this._daylightSavingAdjust(new Date(ad,aa-aC,1)),this._getFormatConfig(aJ)):aU,aK=this._canAdjustMonth(aJ,-1,ad,aa)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+aU+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"e":"w")+"'>"+aU+"</span></a>":aM?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+aU+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"e":"w")+"'>"+aU+"</span></a>",aP=this._get(aJ,"nextText"),aP=aq?this.formatDate(aP,this._daylightSavingAdjust(new Date(ad,aa+aC,1)),this._getFormatConfig(aJ)):aP,aO=this._canAdjustMonth(aJ,1,ad,aa)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+aP+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"w":"e")+"'>"+aP+"</span></a>":aM?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+aP+"'><span class='ui-icon ui-icon-circle-triangle-"+(ab?"w":"e")+"'>"+aP+"</span></a>",a2=this._get(aJ,"currentText"),aL=this._get(aJ,"gotoCurrent")&&aJ.currentDay?av:aA,a2=aq?this.formatDate(a2,aL,this._getFormatConfig(aJ)):a2,aV=aJ.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(aJ,"closeText")+"</button>",aR=aT?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(ab?aV:"")+(this._isInRange(aJ,aL)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a2+"</button>":"")+(ab?"":aV)+"</div>":"",a0=parseInt(this._get(aJ,"firstDay"),10),a0=isNaN(a0)?0:a0,aI=this._get(aJ,"showWeek"),aZ=this._get(aJ,"dayNames"),aN=this._get(aJ,"dayNamesMin"),aX=this._get(aJ,"monthNames"),aW=this._get(aJ,"monthNamesShort"),aQ=this._get(aJ,"beforeShowDay"),a3=this._get(aJ,"showOtherMonths"),aH=this._get(aJ,"selectOtherMonths"),a1=this._getDefaultDate(aJ),aE="",aS=0;ag[0]>aS;aS++){for(aF="",this.maxRows=4,az=0;ag[1]>az;az++){if(ay=this._daylightSavingAdjust(new Date(ad,aa,aJ.selectedDay)),at=" ui-corner-all",ah="",ac){if(ah+="<div class='ui-datepicker-group",ag[1]>1){switch(az){case 0:ah+=" ui-datepicker-group-first",at=" ui-corner-"+(ab?"right":"left");break;case ag[1]-1:ah+=" ui-datepicker-group-last",at=" ui-corner-"+(ab?"left":"right");break;default:ah+=" ui-datepicker-group-middle",at=""}}ah+="'>"}for(ah+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+at+"'>"+(/all|left/.test(at)&&0===aS?ab?aO:aK:"")+(/all|right/.test(at)&&0===aS?ab?aK:aO:"")+this._generateMonthYearHeader(aJ,aa,ad,ak,ar,aS>0||az>0,aX,aW)+"</div><table class='ui-datepicker-calendar'><thead><tr>",al=aI?"<th class='ui-datepicker-week-col'>"+this._get(aJ,"weekHeader")+"</th>":"",aG=0;7>aG;aG++){ao=(aG+a0)%7,al+="<th scope='col'"+((aG+a0+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+aZ[ao]+"'>"+aN[ao]+"</span></th>"}for(ah+=al+"</tr></thead><tbody>",ai=this._getDaysInMonth(ad,aa),ad===aJ.selectedYear&&aa===aJ.selectedMonth&&(aJ.selectedDay=Math.min(aJ.selectedDay,ai)),au=(this._getFirstDayOfMonth(ad,aa)-a0+7)%7,aD=Math.ceil((au+ai)/7),am=ac?this.maxRows>aD?this.maxRows:aD:aD,this.maxRows=am,aB=this._daylightSavingAdjust(new Date(ad,aa,1-au)),an=0;am>an;an++){for(ah+="<tr>",ae=aI?"<td class='ui-datepicker-week-col'>"+this._get(aJ,"calculateWeek")(aB)+"</td>":"",aG=0;7>aG;aG++){ax=aQ?aQ.apply(aJ.input?aJ.input[0]:null,[aB]):[!0,""],aw=aB.getMonth()!==aa,ap=aw&&!aH||!ax[0]||ak&&ak>aB||ar&&aB>ar,ae+="<td class='"+((aG+a0+6)%7>=5?" ui-datepicker-week-end":"")+(aw?" ui-datepicker-other-month":"")+(aB.getTime()===ay.getTime()&&aa===aJ.selectedMonth&&aJ._keyEvent||a1.getTime()===aB.getTime()&&a1.getTime()===ay.getTime()?" "+this._dayOverClass:"")+(ap?" "+this._unselectableClass+" ui-state-disabled":"")+(aw&&!a3?"":" "+ax[1]+(aB.getTime()===av.getTime()?" "+this._currentClass:"")+(aB.getTime()===aA.getTime()?" ui-datepicker-today":""))+"'"+(aw&&!a3||!ax[2]?"":" title='"+ax[2].replace(/'/g,"&#39;")+"'")+(ap?"":" data-handler='selectDay' data-event='click' data-month='"+aB.getMonth()+"' data-year='"+aB.getFullYear()+"'")+">"+(aw&&!a3?"&#xa0;":ap?"<span class='ui-state-default'>"+aB.getDate()+"</span>":"<a class='ui-state-default"+(aB.getTime()===aA.getTime()?" ui-state-highlight":"")+(aB.getTime()===av.getTime()?" ui-state-active":"")+(aw?" ui-priority-secondary":"")+"' href='#'>"+aB.getDate()+"</a>")+"</td>",aB.setDate(aB.getDate()+1),aB=this._daylightSavingAdjust(aB)}ah+=ae+"</tr>"}aa++,aa>11&&(aa=0,ad++),ah+="</tbody></table>"+(ac?"</div>"+(ag[0]>0&&az===ag[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),aF+=ah}aE+=aF}return aE+=aR,aJ._keyEvent=!1,aE},_generateMonthYearHeader:function(S,ag,ac,T,Z,W,ak,U){var ad,ab,ai,R,ah,V,af,ae,aa=this._get(S,"changeMonth"),al=this._get(S,"changeYear"),Q=this._get(S,"showMonthAfterYear"),aj="<div class='ui-datepicker-title'>",P="";if(W||!aa){P+="<span class='ui-datepicker-month'>"+ak[ag]+"</span>"}else{for(ad=T&&T.getFullYear()===ac,ab=Z&&Z.getFullYear()===ac,P+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",ai=0;12>ai;ai++){(!ad||ai>=T.getMonth())&&(!ab||Z.getMonth()>=ai)&&(P+="<option value='"+ai+"'"+(ai===ag?" selected='selected'":"")+">"+U[ai]+"</option>")}P+="</select>"}if(Q||(aj+=P+(!W&&aa&&al?"":"&#xa0;")),!S.yearshtml){if(S.yearshtml="",W||!al){aj+="<span class='ui-datepicker-year'>"+ac+"</span>"}else{for(R=this._get(S,"yearRange").split(":"),ah=(new Date).getFullYear(),V=function(a){var d=a.match(/c[+\-].*/)?ac+parseInt(a.substring(1),10):a.match(/[+\-].*/)?ah+parseInt(a,10):parseInt(a,10);return isNaN(d)?ah:d},af=V(R[0]),ae=Math.max(af,V(R[1]||"")),af=T?Math.max(af,T.getFullYear()):af,ae=Z?Math.min(ae,Z.getFullYear()):ae,S.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";ae>=af;af++){S.yearshtml+="<option value='"+af+"'"+(af===ac?" selected='selected'":"")+">"+af+"</option>"}S.yearshtml+="</select>",aj+=S.yearshtml,S.yearshtml=null}}return aj+=this._get(S,"yearSuffix"),Q&&(aj+=(!W&&aa&&al?"":"&#xa0;")+P),aj+="</div>"},_adjustInstDate:function(g,m,f){var h=g.selectedYear+("Y"===f?m:0),u=g.selectedMonth+("M"===f?m:0),p=Math.min(g.selectedDay,this._getDaysInMonth(h,u))+("D"===f?m:0),d=this._restrictMinMax(g,this._daylightSavingAdjust(new Date(h,u,p)));g.selectedDay=d.getDate(),g.drawMonth=g.selectedMonth=d.getMonth(),g.drawYear=g.selectedYear=d.getFullYear(),("M"===f||"Y"===f)&&this._notifyChange(g)},_restrictMinMax:function(d,g){var a=this._getMinMaxDate(d,"min"),f=this._getMinMaxDate(d,"max"),h=a&&a>g?a:g;return f&&h>f?f:h},_notifyChange:function(a){var d=this._get(a,"onChangeMonthYear");d&&d.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var d=this._get(a,"numberOfMonths");return null==d?[1,1]:"number"==typeof d?[1,d]:d},_getMinMaxDate:function(a,d){return this._determineDate(a,this._get(a,d+"Date"),null)},_getDaysInMonth:function(a,d){return 32-this._daylightSavingAdjust(new Date(a,d,32)).getDate()},_getFirstDayOfMonth:function(a,d){return new Date(a,d,1).getDay()},_canAdjustMonth:function(d,g,a,f){var m=this._getNumberOfMonths(d),h=this._daylightSavingAdjust(new Date(a,f+(0>g?g:m[0]*m[1]),1));return 0>g&&h.setDate(this._getDaysInMonth(h.getFullYear(),h.getMonth())),this._isInRange(d,h)},_isInRange:function(P,u){var m,Q,g=this._getMinMaxDate(P,"min"),f=this._getMinMaxDate(P,"max"),v=null,d=null,p=this._get(P,"yearRange");return p&&(m=p.split(":"),Q=(new Date).getFullYear(),v=parseInt(m[0],10),d=parseInt(m[1],10),m[0].match(/[+\-].*/)&&(v+=Q),m[1].match(/[+\-].*/)&&(d+=Q)),(!g||u.getTime()>=g.getTime())&&(!f||u.getTime()<=f.getTime())&&(!v||u.getFullYear()>=v)&&(!d||d>=u.getFullYear())},_getFormatConfig:function(a){var d=this._get(a,"shortYearCutoff");return d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),{shortYearCutoff:d,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(d,g,a,f){g||(d.currentDay=d.selectedDay,d.currentMonth=d.selectedMonth,d.currentYear=d.selectedYear);var h=g?"object"==typeof g?g:this._daylightSavingAdjust(new Date(f,a,g)):this._daylightSavingAdjust(new Date(d.currentYear,d.currentMonth,d.currentDay));return this.formatDate(this._get(d,"dateFormat"),h,this._getFormatConfig(d))}}),w.fn.datepicker=function(d){if(!this.length){return this}w.datepicker.initialized||(w(document).on("mousedown",w.datepicker._checkExternalClick),w.datepicker.initialized=!0),0===w("#"+w.datepicker._mainDivId).length&&w("body").append(w.datepicker.dpDiv);var a=Array.prototype.slice.call(arguments,1);return"string"!=typeof d||"isDisabled"!==d&&"getDate"!==d&&"widget"!==d?"option"===d&&2===arguments.length&&"string"==typeof arguments[1]?w.datepicker["_"+d+"Datepicker"].apply(w.datepicker,[this[0]].concat(a)):this.each(function(){"string"==typeof d?w.datepicker["_"+d+"Datepicker"].apply(w.datepicker,[this].concat(a)):w.datepicker._attachDatepicker(this,d)}):w.datepicker["_"+d+"Datepicker"].apply(w.datepicker,[this[0]].concat(a))},w.datepicker=new z,w.datepicker.initialized=!1,w.datepicker.uuid=(new Date).getTime(),w.datepicker.version="1.12.1",w.datepicker,w.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var O=!1;w(document).on("mouseup",function(){O=!1}),w.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.on("mousedown."+this.widgetName,function(d){return a._mouseDown(d)}).on("click."+this.widgetName,function(d){return !0===w.data(d.target,a.widgetName+".preventClickEvent")?(w.removeData(d.target,a.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(f){if(!O){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(f),this._mouseDownEvent=f;var a=this,d=1===f.which,g="string"==typeof this.options.cancel&&f.target.nodeName?w(f.target).closest(this.options.cancel).length:!1;return d&&!g&&this._mouseCapture(f)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(f)&&this._mouseDelayMet(f)&&(this._mouseStarted=this._mouseStart(f)!==!1,!this._mouseStarted)?(f.preventDefault(),!0):(!0===w.data(f.target,this.widgetName+".preventClickEvent")&&w.removeData(f.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return a._mouseMove(e)},this._mouseUpDelegate=function(e){return a._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),f.preventDefault(),O=!0,!0)):!0}},_mouseMove:function(a){if(this._mouseMoved){if(w.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button){return this._mouseUp(a)}if(!a.which){if(a.originalEvent.altKey||a.originalEvent.ctrlKey||a.originalEvent.metaKey||a.originalEvent.shiftKey){this.ignoreMissingWhich=!0}else{if(!this.ignoreMissingWhich){return this._mouseUp(a)}}}}return(a.which||a.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted)},_mouseUp:function(a){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target===this._mouseDownEvent.target&&w.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,O=!1,a.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0}}),w.ui.plugin={add:function(f,a,d){var h,g=w.ui[f].prototype;for(h in d){g.plugins[h]=g.plugins[h]||[],g.plugins[h].push([a,d[h]])}},call:function(d,g,a,f){var m,h=d.plugins[g];if(h&&(f||d.element[0].parentNode&&11!==d.element[0].parentNode.nodeType)){for(m=0;h.length>m;m++){d.options[h[m][0]]&&h[m][1].apply(d.element,a)}}}},w.ui.safeBlur=function(a){a&&"body"!==a.nodeName.toLowerCase()&&w(a).trigger("blur")},w.widget("ui.draggable",w.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,d){this._super(a,d),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(d){var a=this.options;return this.helper||a.disabled||w(d.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(d),this.handle?(this._blurActiveElement(d),this._blockFrames(a.iframeFix===!0?"iframe":a.iframeFix),!0):!1)},_blockFrames:function(a){this.iframeBlocks=this.document.find(a).map(function(){var d=w(this);return w("<div>").css("position","absolute").appendTo(d.parent()).outerWidth(d.outerWidth()).outerHeight(d.outerHeight()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(f){var a=w.ui.safeActiveElement(this.document[0]),d=w(f.target);d.closest(a).length||w.ui.safeBlur(a)},_mouseStart:function(d){var a=this.options;return this.helper=this._createHelper(d),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),w.ui.ddmanager&&(w.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===w(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(d),this.originalPosition=this.position=this._generatePosition(d,!1),this.originalPageX=d.pageX,this.originalPageY=d.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this._setContainment(),this._trigger("start",d)===!1?(this._clear(),!1):(this._cacheHelperProportions(),w.ui.ddmanager&&!a.dropBehaviour&&w.ui.ddmanager.prepareOffsets(this,d),this._mouseDrag(d,!0),w.ui.ddmanager&&w.ui.ddmanager.dragStart(this,d),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(f,a){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(f,!0),this.positionAbs=this._convertPositionTo("absolute"),!a){var d=this._uiHash();if(this._trigger("drag",f,d)===!1){return this._mouseUp(new w.Event("mouseup",f)),!1}this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",w.ui.ddmanager&&w.ui.ddmanager.drag(this,f),!1},_mouseStop:function(f){var a=this,d=!1;return w.ui.ddmanager&&!this.options.dropBehaviour&&(d=w.ui.ddmanager.drop(this,f)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||w.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?w(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",f)!==!1&&a._clear()}):this._trigger("stop",f)!==!1&&this._clear(),!1},_mouseUp:function(a){return this._unblockFrames(),w.ui.ddmanager&&w.ui.ddmanager.dragStop(this,a),this.handleElement.is(a.target)&&this.element.trigger("focus"),w.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new w.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(a){return this.options.handle?!!w(a.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(f){var a=this.options,d=w.isFunction(a.helper),g=d?w(a.helper.apply(this.element[0],[f])):"clone"===a.helper?this.element.clone().removeAttr("id"):this.element;return g.parents("body").length||g.appendTo("parent"===a.appendTo?this.element[0].parentNode:a.appendTo),d&&g[0]===this.element[0]&&this._setPositionRelative(),g[0]===this.element[0]||/(fixed|absolute)/.test(g.css("position"))||g.css("position","absolute"),g},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" ")),w.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var d=this.offsetParent.offset(),a=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==a&&w.contains(this.scrollParent[0],this.offsetParent[0])&&(d.left+=this.scrollParent.scrollLeft(),d.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(d={top:0,left:0}),{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition){return{top:0,left:0}}var a=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(d?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(d?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,a,d,h=this.options,g=this.document[0];return this.relativeContainer=null,h.containment?"window"===h.containment?(this.containment=[w(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,w(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,w(window).scrollLeft()+w(window).width()-this.helperProportions.width-this.margins.left,w(window).scrollTop()+(w(window).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===h.containment?(this.containment=[0,0,w(g).width()-this.helperProportions.width-this.margins.left,(w(g).height()||g.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):h.containment.constructor===Array?(this.containment=h.containment,void 0):("parent"===h.containment&&(h.containment=this.helper[0].parentNode),a=w(h.containment),d=a[0],d&&(f=/(scroll|auto)/.test(a.css("overflow")),this.containment=[(parseInt(a.css("borderLeftWidth"),10)||0)+(parseInt(a.css("paddingLeft"),10)||0),(parseInt(a.css("borderTopWidth"),10)||0)+(parseInt(a.css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a.css("borderRightWidth"),10)||0)-(parseInt(a.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a.css("borderBottomWidth"),10)||0)-(parseInt(a.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=a),void 0):(this.containment=null,void 0)},_convertPositionTo:function(d,g){g||(g=this.position);var a="absolute"===d?1:-1,f=this._isRootNode(this.scrollParent[0]);return{top:g.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:f?0:this.offset.scroll.top)*a,left:g.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:f?0:this.offset.scroll.left)*a}},_generatePosition:function(Q,v){var p,R,g,f,P=this.options,d=this._isRootNode(this.scrollParent[0]),u=Q.pageX,m=Q.pageY;return d&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),v&&(this.containment&&(this.relativeContainer?(R=this.relativeContainer.offset(),p=[this.containment[0]+R.left,this.containment[1]+R.top,this.containment[2]+R.left,this.containment[3]+R.top]):p=this.containment,Q.pageX-this.offset.click.left<p[0]&&(u=p[0]+this.offset.click.left),Q.pageY-this.offset.click.top<p[1]&&(m=p[1]+this.offset.click.top),Q.pageX-this.offset.click.left>p[2]&&(u=p[2]+this.offset.click.left),Q.pageY-this.offset.click.top>p[3]&&(m=p[3]+this.offset.click.top)),P.grid&&(g=P.grid[1]?this.originalPageY+Math.round((m-this.originalPageY)/P.grid[1])*P.grid[1]:this.originalPageY,m=p?g-this.offset.click.top>=p[1]||g-this.offset.click.top>p[3]?g:g-this.offset.click.top>=p[1]?g-P.grid[1]:g+P.grid[1]:g,f=P.grid[0]?this.originalPageX+Math.round((u-this.originalPageX)/P.grid[0])*P.grid[0]:this.originalPageX,u=p?f-this.offset.click.left>=p[0]||f-this.offset.click.left>p[2]?f:f-this.offset.click.left>=p[0]?f-P.grid[0]:f+P.grid[0]:f),"y"===P.axis&&(u=this.originalPageX),"x"===P.axis&&(m=this.originalPageY)),{top:m-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(f,a,d){return d=d||this._uiHash(),w.ui.plugin.call(this,f,[a,d,this],!0),/^(drag|start|stop)/.test(f)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),w.Widget.prototype._trigger.call(this,f,a,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),w.ui.plugin.add("draggable","connectToSortable",{start:function(f,a,d){var g=w.extend({},a,{item:d.element});d.sortables=[],w(d.options.connectToSortable).each(function(){var e=w(this).sortable("instance");e&&!e.options.disabled&&(d.sortables.push(e),e.refreshPositions(),e._trigger("activate",f,g))})},stop:function(f,a,d){var g=w.extend({},a,{item:d.element});d.cancelHelperRemoval=!1,w.each(d.sortables,function(){var e=this;e.isOver?(e.isOver=0,d.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(f),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",f,g))})},drag:function(f,a,d){w.each(d.sortables,function(){var g=!1,e=this;e.positionAbs=d.positionAbs,e.helperProportions=d.helperProportions,e.offset.click=d.offset.click,e._intersectsWith(e.containerCache)&&(g=!0,w.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==e&&this._intersectsWith(this.containerCache)&&w.contains(e.element[0],this.element[0])&&(g=!1),g})),g?(e.isOver||(e.isOver=1,d._parent=a.helper.parent(),e.currentItem=a.helper.appendTo(e.element).data("ui-sortable-item",!0),e.options._helper=e.options.helper,e.options.helper=function(){return a.helper[0]},f.target=e.currentItem[0],e._mouseCapture(f,!0),e._mouseStart(f,!0,!0),e.offset.click.top=d.offset.click.top,e.offset.click.left=d.offset.click.left,e.offset.parent.left-=d.offset.parent.left-e.offset.parent.left,e.offset.parent.top-=d.offset.parent.top-e.offset.parent.top,d._trigger("toSortable",f),d.dropped=e.element,w.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,e.fromOutside=d),e.currentItem&&(e._mouseDrag(f),a.position=e.position)):e.isOver&&(e.isOver=0,e.cancelHelperRemoval=!0,e.options._revert=e.options.revert,e.options.revert=!1,e._trigger("out",f,e._uiHash(e)),e._mouseStop(f,!0),e.options.revert=e.options._revert,e.options.helper=e.options._helper,e.placeholder&&e.placeholder.remove(),a.helper.appendTo(d._parent),d._refreshOffsets(f),a.position=d._generatePosition(f,!0),d._trigger("fromSortable",f),d.dropped=!1,w.each(d.sortables,function(){this.refreshPositions()}))})}}),w.ui.plugin.add("draggable","cursor",{start:function(f,a,d){var h=w("body"),g=d.options;h.css("cursor")&&(g._cursor=h.css("cursor")),h.css("cursor",g.cursor)},stop:function(f,a,d){var g=d.options;g._cursor&&w("body").css("cursor",g._cursor)}}),w.ui.plugin.add("draggable","opacity",{start:function(f,a,d){var h=w(a.helper),g=d.options;h.css("opacity")&&(g._opacity=h.css("opacity")),h.css("opacity",g.opacity)},stop:function(f,a,d){var g=d.options;g._opacity&&w(a.helper).css("opacity",g._opacity)}}),w.ui.plugin.add("draggable","scroll",{start:function(d,f,a){a.scrollParentNotHidden||(a.scrollParentNotHidden=a.helper.scrollParent(!1)),a.scrollParentNotHidden[0]!==a.document[0]&&"HTML"!==a.scrollParentNotHidden[0].tagName&&(a.overflowOffset=a.scrollParentNotHidden.offset())},drag:function(m,f,g){var t=g.options,p=!1,d=g.scrollParentNotHidden[0],h=g.document[0];d!==h&&"HTML"!==d.tagName?(t.axis&&"x"===t.axis||(g.overflowOffset.top+d.offsetHeight-m.pageY<t.scrollSensitivity?d.scrollTop=p=d.scrollTop+t.scrollSpeed:m.pageY-g.overflowOffset.top<t.scrollSensitivity&&(d.scrollTop=p=d.scrollTop-t.scrollSpeed)),t.axis&&"y"===t.axis||(g.overflowOffset.left+d.offsetWidth-m.pageX<t.scrollSensitivity?d.scrollLeft=p=d.scrollLeft+t.scrollSpeed:m.pageX-g.overflowOffset.left<t.scrollSensitivity&&(d.scrollLeft=p=d.scrollLeft-t.scrollSpeed))):(t.axis&&"x"===t.axis||(m.pageY-w(h).scrollTop()<t.scrollSensitivity?p=w(h).scrollTop(w(h).scrollTop()-t.scrollSpeed):w(window).height()-(m.pageY-w(h).scrollTop())<t.scrollSensitivity&&(p=w(h).scrollTop(w(h).scrollTop()+t.scrollSpeed))),t.axis&&"y"===t.axis||(m.pageX-w(h).scrollLeft()<t.scrollSensitivity?p=w(h).scrollLeft(w(h).scrollLeft()-t.scrollSpeed):w(window).width()-(m.pageX-w(h).scrollLeft())<t.scrollSensitivity&&(p=w(h).scrollLeft(w(h).scrollLeft()+t.scrollSpeed)))),p!==!1&&w.ui.ddmanager&&!t.dropBehaviour&&w.ui.ddmanager.prepareOffsets(g,m)}}),w.ui.plugin.add("draggable","snap",{start:function(f,a,d){var g=d.options;d.snapElements=[],w(g.snap.constructor!==String?g.snap.items||":data(ui-draggable)":g.snap).each(function(){var m=w(this),h=m.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:m.outerWidth(),height:m.outerHeight(),top:h.top,left:h.left})})},drag:function(ad,Z,Q){var U,T,ah,R,aa,W,af,P,ae,S,ac=Q.options,ab=ac.snapTolerance,V=Z.offset.left,ai=V+Q.helperProportions.width,t=Z.offset.top,ag=t+Q.helperProportions.height;for(ae=Q.snapElements.length-1;ae>=0;ae--){aa=Q.snapElements[ae].left-Q.margins.left,W=aa+Q.snapElements[ae].width,af=Q.snapElements[ae].top-Q.margins.top,P=af+Q.snapElements[ae].height,aa-ab>ai||V>W+ab||af-ab>ag||t>P+ab||!w.contains(Q.snapElements[ae].item.ownerDocument,Q.snapElements[ae].item)?(Q.snapElements[ae].snapping&&Q.options.snap.release&&Q.options.snap.release.call(Q.element,ad,w.extend(Q._uiHash(),{snapItem:Q.snapElements[ae].item})),Q.snapElements[ae].snapping=!1):("inner"!==ac.snapMode&&(U=ab>=Math.abs(af-ag),T=ab>=Math.abs(P-t),ah=ab>=Math.abs(aa-ai),R=ab>=Math.abs(W-V),U&&(Z.position.top=Q._convertPositionTo("relative",{top:af-Q.helperProportions.height,left:0}).top),T&&(Z.position.top=Q._convertPositionTo("relative",{top:P,left:0}).top),ah&&(Z.position.left=Q._convertPositionTo("relative",{top:0,left:aa-Q.helperProportions.width}).left),R&&(Z.position.left=Q._convertPositionTo("relative",{top:0,left:W}).left)),S=U||T||ah||R,"outer"!==ac.snapMode&&(U=ab>=Math.abs(af-t),T=ab>=Math.abs(P-ag),ah=ab>=Math.abs(aa-V),R=ab>=Math.abs(W-ai),U&&(Z.position.top=Q._convertPositionTo("relative",{top:af,left:0}).top),T&&(Z.position.top=Q._convertPositionTo("relative",{top:P-Q.helperProportions.height,left:0}).top),ah&&(Z.position.left=Q._convertPositionTo("relative",{top:0,left:aa}).left),R&&(Z.position.left=Q._convertPositionTo("relative",{top:0,left:W-Q.helperProportions.width}).left)),!Q.snapElements[ae].snapping&&(U||T||ah||R||S)&&Q.options.snap.snap&&Q.options.snap.snap.call(Q.element,ad,w.extend(Q._uiHash(),{snapItem:Q.snapElements[ae].item})),Q.snapElements[ae].snapping=U||T||ah||R||S)}}}),w.ui.plugin.add("draggable","stack",{start:function(h,f,g){var p,m=g.options,d=w.makeArray(w(m.stack)).sort(function(n,a){return(parseInt(w(n).css("zIndex"),10)||0)-(parseInt(w(a).css("zIndex"),10)||0)});d.length&&(p=parseInt(w(d[0]).css("zIndex"),10)||0,w(d).each(function(a){w(this).css("zIndex",p+a)}),this.css("zIndex",p+d.length))}}),w.ui.plugin.add("draggable","zIndex",{start:function(f,a,d){var h=w(a.helper),g=d.options;h.css("zIndex")&&(g._zIndex=h.css("zIndex")),h.css("zIndex",g.zIndex)},stop:function(f,a,d){var g=d.options;g._zIndex&&w(a.helper).css("zIndex",g._zIndex)}}),w.ui.draggable,w.widget("ui.resizable",w.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return !isNaN(parseFloat(a))},_hasScroll:function(f,a){if("hidden"===w(f).css("overflow")){return !1}var d=a&&"left"===a?"scrollLeft":"scrollTop",g=!1;return f[d]>0?!0:(f[d]=1,g=f[d]>0,f[d]=0,g)},_create:function(){var f,a=this.options,d=this;this._addClass("ui-resizable"),w.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(w("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,f={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(f),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(f),this._proportionallyResize()),this._setupHandles(),a.autoHide&&w(this.element).on("mouseenter",function(){a.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){a.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),d._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var d,a=function(f){w(f).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(a(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_setOption:function(a,d){switch(this._super(a,d),a){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var m,f,g,t,p,d=this.options,h=this;if(this.handles=d.handles||(w(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=w(),this.handles.constructor===String){for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),g=this.handles.split(","),this.handles={},f=0;g.length>f;f++){m=w.trim(g[f]),t="ui-resizable-"+m,p=w("<div>"),this._addClass(p,"ui-resizable-handle "+t),p.css({zIndex:d.zIndex}),this.handles[m]=".ui-resizable-"+m,this.element.append(p)}}this._renderAxis=function(v){var a,u,Q,P;v=v||this.element;for(a in this.handles){this.handles[a].constructor===String?this.handles[a]=this.element.children(this.handles[a]).first().show():(this.handles[a].jquery||this.handles[a].nodeType)&&(this.handles[a]=w(this.handles[a]),this._on(this.handles[a],{mousedown:h._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(u=w(this.handles[a],this.element),P=/sw|ne|nw|se|n|s/.test(a)?u.outerHeight():u.outerWidth(),Q=["padding",/ne|nw|n/.test(a)?"Top":/se|sw|s/.test(a)?"Bottom":/^e$/.test(a)?"Right":"Left"].join(""),v.css(Q,P),this._proportionallyResize()),this._handles=this._handles.add(this.handles[a])}},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){h.resizing||(this.className&&(p=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),h.axis=p&&p[1]?p[1]:"se")}),d.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(f){var a,d,g=!1;for(a in this.handles){d=w(this.handles[a])[0],(d===f.target||w.contains(d,f.target))&&(g=!0)}return !this.options.disabled&&g},_mouseStart:function(h){var f,g,p,m=this.options,d=this.element;return this.resizing=!0,this._renderProxy(),f=this._num(this.helper.css("left")),g=this._num(this.helper.css("top")),m.containment&&(f+=w(m.containment).scrollLeft()||0,g+=w(m.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:g},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:d.width(),height:d.height()},this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()},this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()},this.originalPosition={left:f,top:g},this.originalMousePosition={left:h.pageX,top:h.pageY},this.aspectRatio="number"==typeof m.aspectRatio?m.aspectRatio:this.originalSize.width/this.originalSize.height||1,p=w(".ui-resizable-"+this.axis).css("cursor"),w("body").css("cursor","auto"===p?this.axis+"-resize":p),this._addClass("ui-resizable-resizing"),this._propagate("start",h),!0},_mouseDrag:function(t){var f,m,v=this.originalMousePosition,u=this.axis,d=t.pageX-v.left||0,p=t.pageY-v.top||0,g=this._change[u];return this._updatePrevProperties(),g?(f=g.apply(this,[t,d,p]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(f=this._updateRatio(f,t)),f=this._respectSize(f,t),this._updateCache(f),this._propagate("resize",t),m=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),w.isEmptyObject(m)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(u){this.resizing=!1;var p,Q,g,f,P,d,t,m=this.options,v=this;return this._helper&&(p=this._proportionallyResizeElements,Q=p.length&&/textarea/i.test(p[0].nodeName),g=Q&&this._hasScroll(p[0],"left")?0:v.sizeDiff.height,f=Q?0:v.sizeDiff.width,P={width:v.helper.width()-f,height:v.helper.height()-g},d=parseFloat(v.element.css("left"))+(v.position.left-v.originalPosition.left)||null,t=parseFloat(v.element.css("top"))+(v.position.top-v.originalPosition.top)||null,m.animate||this.element.css(w.extend(P,{top:t,left:d})),v.helper.height(v.size.height),v.helper.width(v.size.width),this._helper&&!m.animate&&this._proportionallyResize()),w("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",u),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(g){var m,f,h,u,p,d=this.options;p={minWidth:this._isNumber(d.minWidth)?d.minWidth:0,maxWidth:this._isNumber(d.maxWidth)?d.maxWidth:1/0,minHeight:this._isNumber(d.minHeight)?d.minHeight:0,maxHeight:this._isNumber(d.maxHeight)?d.maxHeight:1/0},(this._aspectRatio||g)&&(m=p.minHeight*this.aspectRatio,h=p.minWidth/this.aspectRatio,f=p.maxHeight*this.aspectRatio,u=p.maxWidth/this.aspectRatio,m>p.minWidth&&(p.minWidth=m),h>p.minHeight&&(p.minHeight=h),p.maxWidth>f&&(p.maxWidth=f),p.maxHeight>u&&(p.maxHeight=u)),this._vBoundaries=p},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(d){var g=this.position,a=this.size,f=this.axis;return this._isNumber(d.height)?d.width=d.height*this.aspectRatio:this._isNumber(d.width)&&(d.height=d.width/this.aspectRatio),"sw"===f&&(d.left=g.left+(a.width-d.width),d.top=null),"nw"===f&&(d.top=g.top+(a.height-d.height),d.left=g.left+(a.width-d.width)),d},_respectSize:function(R){var v=this._vBoundaries,p=this.axis,S=this._isNumber(R.width)&&v.maxWidth&&v.maxWidth<R.width,g=this._isNumber(R.height)&&v.maxHeight&&v.maxHeight<R.height,f=this._isNumber(R.width)&&v.minWidth&&v.minWidth>R.width,Q=this._isNumber(R.height)&&v.minHeight&&v.minHeight>R.height,d=this.originalPosition.left+this.originalSize.width,u=this.originalPosition.top+this.originalSize.height,m=/sw|nw|w/.test(p),P=/nw|ne|n/.test(p);return f&&(R.width=v.minWidth),Q&&(R.height=v.minHeight),S&&(R.width=v.maxWidth),g&&(R.height=v.maxHeight),f&&m&&(R.left=d-v.minWidth),S&&m&&(R.left=d-v.maxWidth),Q&&P&&(R.top=u-v.minHeight),g&&P&&(R.top=u-v.maxHeight),R.width||R.height||R.left||!R.top?R.width||R.height||R.top||!R.left||(R.left=null):R.top=null,R},_getPaddingPlusBorderDimensions:function(d){for(var g=0,a=[],f=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],h=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];4>g;g++){a[g]=parseFloat(f[g])||0,a[g]+=parseFloat(h[g])||0}return{height:a[0]+a[2],width:a[1]+a[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var d,f=0,a=this.helper||this.element;this._proportionallyResizeElements.length>f;f++){d=this._proportionallyResizeElements[f],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(d)),d.css({height:a.height()-this.outerDimensions.height||0,width:a.width()-this.outerDimensions.width||0})}}},_renderProxy:function(){var d=this.element,a=this.options;this.elementOffset=d.offset(),this._helper?(this.helper=this.helper||w("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,d){return{width:this.originalSize.width+d}},w:function(d,g){var a=this.originalSize,f=this.originalPosition;return{left:f.left+g,width:a.width-g}},n:function(d,g,a){var f=this.originalSize,h=this.originalPosition;return{top:h.top+a,height:f.height-a}},s:function(d,f,a){return{height:this.originalSize.height+a}},se:function(f,a,d){return w.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[f,a,d]))},sw:function(f,a,d){return w.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[f,a,d]))},ne:function(f,a,d){return w.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[f,a,d]))},nw:function(f,a,d){return w.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[f,a,d]))}},_propagate:function(d,a){w.ui.plugin.call(this,d,[a,this.ui()]),"resize"!==d&&this._trigger(d,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),w.ui.plugin.add("resizable","animate",{stop:function(u){var p=w(this).resizable("instance"),Q=p.options,g=p._proportionallyResizeElements,f=g.length&&/textarea/i.test(g[0].nodeName),P=f&&p._hasScroll(g[0],"left")?0:p.sizeDiff.height,d=f?0:p.sizeDiff.width,t={width:p.size.width-d,height:p.size.height-P},m=parseFloat(p.element.css("left"))+(p.position.left-p.originalPosition.left)||null,v=parseFloat(p.element.css("top"))+(p.position.top-p.originalPosition.top)||null;p.element.animate(w.extend(t,v&&m?{top:v,left:m}:{}),{duration:Q.animateDuration,easing:Q.animateEasing,step:function(){var a={width:parseFloat(p.element.css("width")),height:parseFloat(p.element.css("height")),top:parseFloat(p.element.css("top")),left:parseFloat(p.element.css("left"))};g&&g.length&&w(g[0]).css({width:a.width,height:a.height}),p._updateCache(a),p._propagate("resize",u)}})}}),w.ui.plugin.add("resizable","containment",{start:function(){var P,t,U,m,g,S,f,v=w(this).resizable("instance"),p=v.options,R=v.element,T=p.containment,Q=T instanceof w?T.get(0):/parent/.test(T)?R.parent().get(0):T;Q&&(v.containerElement=w(Q),/document/.test(T)||T===document?(v.containerOffset={left:0,top:0},v.containerPosition={left:0,top:0},v.parentData={element:w(document),left:0,top:0,width:w(document).width(),height:w(document).height()||document.body.parentNode.scrollHeight}):(P=w(Q),t=[],w(["Top","Right","Left","Bottom"]).each(function(a,d){t[a]=v._num(P.css("padding"+d))}),v.containerOffset=P.offset(),v.containerPosition=P.position(),v.containerSize={height:P.innerHeight()-t[3],width:P.innerWidth()-t[1]},U=v.containerOffset,m=v.containerSize.height,g=v.containerSize.width,S=v._hasScroll(Q,"left")?Q.scrollWidth:g,f=v._hasScroll(Q)?Q.scrollHeight:m,v.parentData={element:Q,left:U.left,top:U.top,width:S,height:f}))},resize:function(R){var P,W,t,m,U=w(this).resizable("instance"),f=U.options,Q=U.containerOffset,v=U.position,T=U._aspectRatio||R.shiftKey,V={top:0,left:0},S=U.containerElement,g=!0;S[0]!==document&&/static/.test(S.css("position"))&&(V=Q),v.left<(U._helper?Q.left:0)&&(U.size.width=U.size.width+(U._helper?U.position.left-Q.left:U.position.left-V.left),T&&(U.size.height=U.size.width/U.aspectRatio,g=!1),U.position.left=f.helper?Q.left:0),v.top<(U._helper?Q.top:0)&&(U.size.height=U.size.height+(U._helper?U.position.top-Q.top:U.position.top),T&&(U.size.width=U.size.height*U.aspectRatio,g=!1),U.position.top=U._helper?Q.top:0),t=U.containerElement.get(0)===U.element.parent().get(0),m=/relative|absolute/.test(U.containerElement.css("position")),t&&m?(U.offset.left=U.parentData.left+U.position.left,U.offset.top=U.parentData.top+U.position.top):(U.offset.left=U.element.offset().left,U.offset.top=U.element.offset().top),P=Math.abs(U.sizeDiff.width+(U._helper?U.offset.left-V.left:U.offset.left-Q.left)),W=Math.abs(U.sizeDiff.height+(U._helper?U.offset.top-V.top:U.offset.top-Q.top)),P+U.size.width>=U.parentData.width&&(U.size.width=U.parentData.width-P,T&&(U.size.height=U.size.width/U.aspectRatio,g=!1)),W+U.size.height>=U.parentData.height&&(U.size.height=U.parentData.height-W,T&&(U.size.width=U.size.height*U.aspectRatio,g=!1)),g||(U.position.left=U.prevPosition.left,U.position.top=U.prevPosition.top,U.size.width=U.prevSize.width,U.size.height=U.prevSize.height)},stop:function(){var u=w(this).resizable("instance"),p=u.options,P=u.containerOffset,g=u.containerPosition,f=u.containerElement,v=w(u.helper),d=v.offset(),t=v.outerWidth()-u.sizeDiff.width,m=v.outerHeight()-u.sizeDiff.height;u._helper&&!p.animate&&/relative/.test(f.css("position"))&&w(this).css({left:d.left-g.left-P.left,width:t,height:m}),u._helper&&!p.animate&&/static/.test(f.css("position"))&&w(this).css({left:d.left-g.left-P.left,width:t,height:m})}}),w.ui.plugin.add("resizable","alsoResize",{start:function(){var d=w(this).resizable("instance"),a=d.options;w(a.alsoResize).each(function(){var f=w(this);f.data("ui-resizable-alsoresize",{width:parseFloat(f.width()),height:parseFloat(f.height()),left:parseFloat(f.css("left")),top:parseFloat(f.css("top"))})})},resize:function(m,f){var g=w(this).resizable("instance"),t=g.options,p=g.originalSize,d=g.originalPosition,h={height:g.size.height-p.height||0,width:g.size.width-p.width||0,top:g.position.top-d.top||0,left:g.position.left-d.left||0};w(t.alsoResize).each(function(){var u=w(this),a=w(this).data("ui-resizable-alsoresize"),P={},v=u.parents(f.originalElement[0]).length?["width","height"]:["width","height","top","left"];w.each(v,function(o,s){var n=(a[s]||0)+(h[s]||0);n&&n>=0&&(P[s]=n||null)}),u.css(P)})},stop:function(){w(this).removeData("ui-resizable-alsoresize")}}),w.ui.plugin.add("resizable","ghost",{start:function(){var d=w(this).resizable("instance"),a=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:0.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}),d._addClass(d.ghost,"ui-resizable-ghost"),w.uiBackCompat!==!1&&"string"==typeof d.options.ghost&&d.ghost.addClass(this.options.ghost),d.ghost.appendTo(d.helper)},resize:function(){var a=w(this).resizable("instance");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=w(this).resizable("instance");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}}),w.ui.plugin.add("resizable","grid",{resize:function(){var ad,Z=w(this).resizable("instance"),Q=Z.options,U=Z.size,T=Z.originalSize,ag=Z.originalPosition,R=Z.axis,aa="number"==typeof Q.grid?[Q.grid,Q.grid]:Q.grid,W=aa[0]||1,af=aa[1]||1,P=Math.round((U.width-T.width)/W)*W,ae=Math.round((U.height-T.height)/af)*af,S=T.width+P,ac=T.height+ae,ab=Q.maxWidth&&S>Q.maxWidth,V=Q.maxHeight&&ac>Q.maxHeight,ah=Q.minWidth&&Q.minWidth>S,t=Q.minHeight&&Q.minHeight>ac;Q.grid=aa,ah&&(S+=W),t&&(ac+=af),ab&&(S-=W),V&&(ac-=af),/^(se|s|e)$/.test(R)?(Z.size.width=S,Z.size.height=ac):/^(ne)$/.test(R)?(Z.size.width=S,Z.size.height=ac,Z.position.top=ag.top-ae):/^(sw)$/.test(R)?(Z.size.width=S,Z.size.height=ac,Z.position.left=ag.left-P):((0>=ac-af||0>=S-W)&&(ad=Z._getPaddingPlusBorderDimensions(this)),ac-af>0?(Z.size.height=ac,Z.position.top=ag.top-ae):(ac=af-ad.height,Z.size.height=ac,Z.position.top=ag.top+T.height-ac),S-W>0?(Z.size.width=S,Z.position.left=ag.left-P):(S=W-ad.width,Z.size.width=S,Z.position.left=ag.left+T.width-S))}}),w.ui.resizable,w.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var a=w(this).css(d).offset().top;0>a&&w(this).css("top",d.top-a)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&w.fn.draggable&&this._makeDraggable(),this.options.resizable&&w.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=this.options.appendTo;return a&&(a.jquery||a.nodeType)?w(a):this.document.find(a||"body").eq(0)},_destroy:function(){var a,d=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=d.parent.children().eq(d.index),a.length&&a[0]!==this.element[0]?a.before(this.element):d.parent.append(this.element)},widget:function(){return this.uiDialog},disable:w.noop,enable:w.noop,close:function(d){var a=this;this._isOpen&&this._trigger("beforeClose",d)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||w.ui.safeBlur(w.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){a._trigger("close",d)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(f,a){var d=!1,h=this.uiDialog.siblings(".ui-front:visible").map(function(){return +w(this).css("z-index")}).get(),g=Math.max.apply(null,h);return g>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",g+1),d=!0),d&&!a&&this._trigger("focus",f),d},open:function(){var a=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=w(w.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable(),a._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).trigger("focus")},_keepFocus:function(d){function a(){var g=w.ui.safeActiveElement(this.document[0]),f=this.uiDialog[0]===g||w.contains(this.uiDialog[0],g);f||this._focusTabbable()}d.preventDefault(),a.call(this),this._delay(a)},_createWrapper:function(){this.uiDialog=w("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(f){if(this.options.closeOnEscape&&!f.isDefaultPrevented()&&f.keyCode&&f.keyCode===w.ui.keyCode.ESCAPE){return f.preventDefault(),this.close(f),void 0}if(f.keyCode===w.ui.keyCode.TAB&&!f.isDefaultPrevented()){var a=this.uiDialog.find(":tabbable"),d=a.filter(":first"),g=a.filter(":last");f.target!==g[0]&&f.target!==this.uiDialog[0]||f.shiftKey?f.target!==d[0]&&f.target!==this.uiDialog[0]||!f.shiftKey||(this._delay(function(){g.trigger("focus")}),f.preventDefault()):(this._delay(function(){d.trigger("focus")}),f.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var a;this.uiDialogTitlebar=w("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(d){w(d.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=w("<button type='button'></button>").button({label:w("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(d){d.preventDefault(),this.close(d)}}),a=w("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(a,"ui-dialog-title"),this._title(a),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":a.attr("id")})},_title:function(a){this.options.title?a.text(this.options.title):a.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=w("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=w("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var d=this,a=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),w.isEmptyObject(a)||w.isArray(a)&&!a.length?(this._removeClass(this.uiDialog,"ui-dialog-buttons"),void 0):(w.each(a,function(e,f){var h,g;f=w.isFunction(f)?{click:f,text:e}:f,f=w.extend({type:"button"},f),h=f.click,g={icon:f.icon,iconPosition:f.iconPosition,showLabel:f.showLabel,icons:f.icons,text:f.text},delete f.click,delete f.icon,delete f.iconPosition,delete f.showLabel,delete f.icons,"boolean"==typeof f.text&&delete f.text,w("<button></button>",f).button(g).appendTo(d.uiButtonSet).on("click",function(){h.apply(d.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function f(e){return{position:e.position,offset:e.offset}}var a=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,g){a._addClass(w(this),"ui-dialog-dragging"),a._blockFrames(),a._trigger("dragStart",e,f(g))},drag:function(e,g){a._trigger("drag",e,f(g))},stop:function(m,h){var e=h.offset.left-a.document.scrollLeft(),g=h.offset.top-a.document.scrollTop();d.position={my:"left top",at:"left"+(e>=0?"+":"")+e+" top"+(g>=0?"+":"")+g,of:a.window},a._removeClass(w(this),"ui-dialog-dragging"),a._unblockFrames(),a._trigger("dragStop",m,f(h))}})},_makeResizable:function(){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var f=this,g=this.options,p=g.resizable,m=this.uiDialog.css("position"),d="string"==typeof p?p:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:g.maxWidth,maxHeight:g.maxHeight,minWidth:g.minWidth,minHeight:this._minHeight(),handles:d,start:function(a,e){f._addClass(w(this),"ui-dialog-resizing"),f._blockFrames(),f._trigger("resizeStart",a,h(e))},resize:function(a,e){f._trigger("resize",a,h(e))},stop:function(v,u){var e=f.uiDialog.offset(),t=e.left-f.document.scrollLeft(),s=e.top-f.document.scrollTop();g.height=f.uiDialog.height(),g.width=f.uiDialog.width(),g.position={my:"left top",at:"left"+(t>=0?"+":"")+t+" top"+(s>=0?"+":"")+s,of:f.window},f._removeClass(w(this),"ui-dialog-resizing"),f._unblockFrames(),f._trigger("resizeStop",v,h(u))}}).css("position",m)},_trackFocus:function(){this._on(this.widget(),{focusin:function(a){this._makeFocusTarget(),this._focusedElement=w(a.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var d=this._trackingInstances(),a=w.inArray(this,d);-1!==a&&d.splice(a,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(f){var a=this,d=!1,g={};w.each(f,function(h,m){a._setOption(h,m),h in a.sizeRelatedOptions&&(d=!0),h in a.resizableRelatedOptions&&(g[h]=m)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(f,a){var d,h,g=this.uiDialog;"disabled"!==f&&(this._super(f,a),"appendTo"===f&&this.uiDialog.appendTo(this._appendTo()),"buttons"===f&&this._createButtons(),"closeText"===f&&this.uiDialogTitlebarClose.button({label:w("<a>").text(""+this.options.closeText).html()}),"draggable"===f&&(d=g.is(":data(ui-draggable)"),d&&!a&&g.draggable("destroy"),!d&&a&&this._makeDraggable()),"position"===f&&this._position(),"resizable"===f&&(h=g.is(":data(ui-resizable)"),h&&!a&&g.resizable("destroy"),h&&"string"==typeof a&&g.resizable("option","handles",a),h||a===!1||this._makeResizable()),"title"===f&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var d,g,a,f=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),f.minWidth>f.width&&(f.width=f.minWidth),d=this.uiDialog.css({height:"auto",width:f.width}).outerHeight(),g=Math.max(0,f.minHeight-d),a="number"==typeof f.maxHeight?Math.max(0,f.maxHeight-d):"none","auto"===f.height?this.element.css({minHeight:g,maxHeight:a,height:"auto"}):this.element.height(Math.max(0,f.height-d)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=w(this);return w("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return w(a.target).closest(".ui-dialog").length?!0:!!w(a.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=!0;this._delay(function(){a=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(d){a||this._allowInteraction(d)||(d.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=w("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),w.uiBackCompat!==!1&&w.widget("ui.dialog",w.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(a,d){"dialogClass"===a&&this.uiDialog.removeClass(this.options.dialogClass).addClass(d),this._superApply(arguments)}}),w.ui.dialog,w.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var f,a=this.options,d=a.accept;this.isover=!1,this.isout=!0,this.accept=w.isFunction(d)?d:function(e){return e.is(d)},this.proportions=function(){return arguments.length?(f=arguments[0],void 0):f?f:f={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(a.scope),a.addClasses&&this._addClass("ui-droppable")},_addToManager:function(a){w.ui.ddmanager.droppables[a]=w.ui.ddmanager.droppables[a]||[],w.ui.ddmanager.droppables[a].push(this)},_splice:function(a){for(var d=0;a.length>d;d++){a[d]===this&&a.splice(d,1)}},_destroy:function(){var a=w.ui.ddmanager.droppables[this.options.scope];this._splice(a)},_setOption:function(f,a){if("accept"===f){this.accept=w.isFunction(a)?a:function(e){return e.is(a)}}else{if("scope"===f){var d=w.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(a)}}this._super(f,a)},_activate:function(d){var a=w.ui.ddmanager.current;this._addActiveClass(),a&&this._trigger("activate",d,this.ui(a))},_deactivate:function(d){var a=w.ui.ddmanager.current;this._removeActiveClass(),a&&this._trigger("deactivate",d,this.ui(a))},_over:function(d){var a=w.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this._addHoverClass(),this._trigger("over",d,this.ui(a)))},_out:function(d){var a=w.ui.ddmanager.current;a&&(a.currentItem||a.element)[0]!==this.element[0]&&this.accept.call(this.element[0],a.currentItem||a.element)&&(this._removeHoverClass(),this._trigger("out",d,this.ui(a)))},_drop:function(f,a){var d=a||w.ui.ddmanager.current,g=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=w(this).droppable("instance");return e.options.greedy&&!e.options.disabled&&e.options.scope===d.options.scope&&e.accept.call(e.element[0],d.currentItem||d.element)&&b(d,w.extend(e,{offset:e.element.offset()}),e.options.tolerance,f)?(g=!0,!1):void 0}),g?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",f,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var b=w.ui.intersect=function(){function a(f,g,d){return f>=g&&g+d>f}return function(P,t,U,m){if(!t.offset){return !1}var g=(P.positionAbs||P.position.absolute).left+P.margins.left,S=(P.positionAbs||P.position.absolute).top+P.margins.top,f=g+P.helperProportions.width,v=S+P.helperProportions.height,p=t.offset.left,R=t.offset.top,T=p+t.proportions().width,Q=R+t.proportions().height;switch(U){case"fit":return g>=p&&T>=f&&S>=R&&Q>=v;case"intersect":return g+P.helperProportions.width/2>p&&T>f-P.helperProportions.width/2&&S+P.helperProportions.height/2>R&&Q>v-P.helperProportions.height/2;case"pointer":return a(m.pageY,R,t.proportions().height)&&a(m.pageX,p,t.proportions().width);case"touch":return(S>=R&&Q>=S||v>=R&&Q>=v||R>S&&v>Q)&&(g>=p&&T>=g||f>=p&&T>=f||p>g&&f>T);default:return !1}}}();w.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,f){var g,t,p=w.ui.ddmanager.droppables[m.options.scope]||[],d=f?f.type:null,h=(m.currentItem||m.element).find(":data(ui-droppable)").addBack();w:for(g=0;p.length>g;g++){if(!(p[g].options.disabled||m&&!p[g].accept.call(p[g].element[0],m.currentItem||m.element))){for(t=0;h.length>t;t++){if(h[t]===p[g].element[0]){p[g].proportions().height=0;continue w}}p[g].visible="none"!==p[g].element.css("display"),p[g].visible&&("mousedown"===d&&p[g]._activate.call(p[g],f),p[g].offset=p[g].element.offset(),p[g].proportions({width:p[g].element[0].offsetWidth,height:p[g].element[0].offsetHeight}))}}},drop:function(f,a){var d=!1;return w.each((w.ui.ddmanager.droppables[f.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&b(f,this,this.options.tolerance,a)&&(d=this._drop.call(this,a)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,a)))}),d},dragStart:function(d,a){d.element.parentsUntil("body").on("scroll.droppable",function(){d.options.refreshPositions||w.ui.ddmanager.prepareOffsets(d,a)})},drag:function(d,a){d.options.refreshPositions&&w.ui.ddmanager.prepareOffsets(d,a),w.each(w.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var f,m,h,e=b(d,this,this.options.tolerance,a),g=!e&&this.isover?"isout":e&&!this.isover?"isover":null;g&&(this.options.greedy&&(m=this.options.scope,h=this.element.parents(":data(ui-droppable)").filter(function(){return w(this).droppable("instance").options.scope===m}),h.length&&(f=w(h[0]).droppable("instance"),f.greedyChild="isover"===g)),f&&"isover"===g&&(f.isover=!1,f.isout=!0,f._out.call(f,a)),this[g]=!0,this["isout"===g?"isover":"isout"]=!1,this["isover"===g?"_over":"_out"].call(this,a),f&&"isout"===g&&(f.isout=!1,f.isover=!0,f._over.call(f,a)))}})},dragStop:function(d,a){d.element.parentsUntil("body").off("scroll.droppable"),d.options.refreshPositions||w.ui.ddmanager.prepareOffsets(d,a)}},w.uiBackCompat!==!1&&w.widget("ui.droppable",w.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),w.ui.droppable,w.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=w("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(a){return void 0===a?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),void 0)},_constrainedValue:function(a){return void 0===a&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var d=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(d),this._refreshValue()},_setOption:function(a,d){"max"===a&&(d=Math.max(this.min,d)),this._super(a,d)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a),this._toggleClass(null,"ui-state-disabled",!!a)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var d=this.options.value,a=this._percentage();this.valueDiv.toggle(this.indeterminate||d>this.min).width(a.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,d===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=w("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":d}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==d&&(this.oldValue=d,this._trigger("change")),d===this.options.max&&this._trigger("complete")}}),w.widget("ui.selectable",w.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var a=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){a.elementPos=w(a.element[0]).offset(),a.selectees=w(a.options.filter,a.element[0]),a._addClass(a.selectees,"ui-selectee"),a.selectees.each(function(){var d=w(this),e=d.offset(),f={left:e.left-a.elementPos.left,top:e.top-a.elementPos.top};w.data(this,"selectable-item",{element:this,$element:d,left:f.left,top:f.top,right:f.left+d.outerWidth(),bottom:f.top+d.outerHeight(),startselected:!1,selected:d.hasClass("ui-selected"),selecting:d.hasClass("ui-selecting"),unselecting:d.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=w("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(f){var a=this,d=this.options;this.opos=[f.pageX,f.pageY],this.elementPos=w(this.element[0]).offset(),this.options.disabled||(this.selectees=w(d.filter,this.element[0]),this._trigger("start",f),w(d.appendTo).append(this.helper),this.helper.css({left:f.pageX,top:f.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=w.data(this,"selectable-item");e.startselected=!0,f.metaKey||f.ctrlKey||(a._removeClass(e.$element,"ui-selected"),e.selected=!1,a._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,a._trigger("unselecting",f,{unselecting:e.element}))}),w(f.target).parents().addBack().each(function(){var e,g=w.data(this,"selectable-item");return g?(e=!f.metaKey&&!f.ctrlKey||!g.$element.hasClass("ui-selected"),a._removeClass(g.$element,e?"ui-unselecting":"ui-selected")._addClass(g.$element,e?"ui-selecting":"ui-unselecting"),g.unselecting=!e,g.selecting=e,g.selected=e,e?a._trigger("selecting",f,{selecting:g.element}):a._trigger("unselecting",f,{unselecting:g.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var f,m=this,v=this.options,u=this.opos[0],d=this.opos[1],p=t.pageX,g=t.pageY;return u>p&&(f=p,p=u,u=f),d>g&&(f=g,g=d,d=f),this.helper.css({left:u,top:d,width:p-u,height:g-d}),this.selectees.each(function(){var e=w.data(this,"selectable-item"),a=!1,h={};e&&e.element!==m.element[0]&&(h.left=e.left+m.elementPos.left,h.right=e.right+m.elementPos.left,h.top=e.top+m.elementPos.top,h.bottom=e.bottom+m.elementPos.top,"touch"===v.tolerance?a=!(h.left>p||u>h.right||h.top>g||d>h.bottom):"fit"===v.tolerance&&(a=h.left>u&&p>h.right&&h.top>d&&g>h.bottom),a?(e.selected&&(m._removeClass(e.$element,"ui-selected"),e.selected=!1),e.unselecting&&(m._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1),e.selecting||(m._addClass(e.$element,"ui-selecting"),e.selecting=!0,m._trigger("selecting",t,{selecting:e.element}))):(e.selecting&&((t.metaKey||t.ctrlKey)&&e.startselected?(m._removeClass(e.$element,"ui-selecting"),e.selecting=!1,m._addClass(e.$element,"ui-selected"),e.selected=!0):(m._removeClass(e.$element,"ui-selecting"),e.selecting=!1,e.startselected&&(m._addClass(e.$element,"ui-unselecting"),e.unselecting=!0),m._trigger("unselecting",t,{unselecting:e.element}))),e.selected&&(t.metaKey||t.ctrlKey||e.startselected||(m._removeClass(e.$element,"ui-selected"),e.selected=!1,m._addClass(e.$element,"ui-unselecting"),e.unselecting=!0,m._trigger("unselecting",t,{unselecting:e.element})))))}),!1}},_mouseStop:function(d){var a=this;return this.dragged=!1,w(".ui-unselecting",this.element[0]).each(function(){var e=w.data(this,"selectable-item");a._removeClass(e.$element,"ui-unselecting"),e.unselecting=!1,e.startselected=!1,a._trigger("unselected",d,{unselected:e.element})}),w(".ui-selecting",this.element[0]).each(function(){var e=w.data(this,"selectable-item");a._removeClass(e.$element,"ui-selecting")._addClass(e.$element,"ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,a._trigger("selected",d,{selected:e.element})}),this._trigger("stop",d),this.helper.remove(),!1}}),w.widget("ui.selectmenu",[w.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=w()},_drawButton:function(){var f,a=this,d=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=w("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),f=w("<span>").appendTo(this.button),this._addClass(f,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(d).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){a._rendered||a._refreshMenu()})},_drawMenu:function(){var a=this;this.menu=w("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=w("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,d){e.preventDefault(),a._setSelection(),a._select(d.item.data("ui-selectmenu-item"),e)},focus:function(e,d){var f=d.item.data("ui-selectmenu-item");null!=a.focusIndex&&f.index!==a.focusIndex&&(a._trigger("focus",e,{item:f}),a.isOpen||a._select(f,e)),a.focusIndex=f.index,a.button.attr("aria-activedescendant",a.menuItems.eq(f.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return !1},this.menuInstance._isDivider=function(){return !1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a,d=this.element.find("option");this.menu.empty(),this._parseOptions(d),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,d.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(w.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(d){var a=w("<span>");return this._setText(a,d.label),this._addClass(a,"ui-selectmenu-text"),a},_renderMenu:function(f,a){var d=this,g="";w.each(a,function(h,m){var e;m.optgroup!==g&&(e=w("<li>",{text:m.optgroup}),d._addClass(e,"ui-selectmenu-optgroup","ui-menu-divider"+(m.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),e.appendTo(f),g=m.optgroup),d._renderItemData(f,m)})},_renderItemData:function(a,d){return this._renderItem(a,d).data("ui-selectmenu-item",d)},_renderItem:function(f,a){var d=w("<li>"),g=w("<div>",{title:a.element.attr("title")});return a.disabled&&this._addClass(d,null,"ui-state-disabled"),this._setText(g,a.label),d.append(g).appendTo(f)},_setText:function(a,d){d?a.text(d):a.html("&#160;")},_move:function(d,g){var a,f,h=".ui-menu-item";this.isOpen?a=this.menuItems.eq(this.focusIndex).parent("li"):(a=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),h+=":not(.ui-state-disabled)"),f="first"===d||"last"===d?a["first"===d?"prevAll":"nextAll"](h).eq(-1):a[d+"All"](h).eq(0),f.length&&this.menuInstance.focus(g,f)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(a){this.isOpen&&(w(a.target).closest(".ui-selectmenu-menu, #"+w.ui.escapeSelector(this.ids.button)).length||this.close(a))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=a.getRangeAt(0))):this.range=document.selection.createRange()},click:function(a){this._setSelection(),this._toggle(a)},keydown:function(d){var a=!0;switch(d.keyCode){case w.ui.keyCode.TAB:case w.ui.keyCode.ESCAPE:this.close(d),a=!1;break;case w.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(d);break;case w.ui.keyCode.UP:d.altKey?this._toggle(d):this._move("prev",d);break;case w.ui.keyCode.DOWN:d.altKey?this._toggle(d):this._move("next",d);break;case w.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(d):this._toggle(d);break;case w.ui.keyCode.LEFT:this._move("prev",d);break;case w.ui.keyCode.RIGHT:this._move("next",d);break;case w.ui.keyCode.HOME:case w.ui.keyCode.PAGE_UP:this._move("first",d);break;case w.ui.keyCode.END:case w.ui.keyCode.PAGE_DOWN:this._move("last",d);break;default:this.menu.trigger(d),a=!1}a&&d.preventDefault()}},_selectFocusedItem:function(a){var d=this.menuItems.eq(this.focusIndex).parent("li");d.hasClass("ui-state-disabled")||this._select(d.data("ui-selectmenu-item"),a)},_select:function(d,f){var a=this.element[0].selectedIndex;this.element[0].selectedIndex=d.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(d)),this._setAria(d),this._trigger("select",f,{item:d}),d.index!==a&&this._trigger("change",f,{item:d}),this.close(f)},_setAria:function(a){var d=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":d,"aria-activedescendant":d}),this.menu.attr("aria-activedescendant",d)},_setOption:function(d,f){if("icons"===d){var a=this.button.find("span.ui-icon");this._removeClass(a,null,this.options.icons.button)._addClass(a,null,f.button)}this._super(d,f),"appendTo"===d&&this.menuWrap.appendTo(this._appendTo()),"width"===d&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a),this.menuInstance.option("disabled",a),this.button.attr("aria-disabled",a),this._toggleClass(this.button,null,"ui-state-disabled",a),this.element.prop("disabled",a),a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var a=this.options.appendTo;return a&&(a=a.jquery||a.nodeType?w(a):this.document.find(a).eq(0)),a&&a[0]||(a=this.element.closest(".ui-front, dialog")),a.length||(a=this.document[0].body),a},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;return a===!1?(this.button.css("width",""),void 0):(null===a&&(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a),void 0)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();return a.disabled=this.element.prop("disabled"),a},_parseOptions:function(f){var a=this,d=[];f.each(function(g,h){d.push(a._parseOption(w(h),g))}),this.items=d},_parseOption:function(d,f){var a=d.parent("optgroup");return{element:d,index:f,value:d.val(),label:d.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||d.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]),w.widget("ui.slider",w.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content"),this._refresh(),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var h,f,g=this.options,p=this.element.find(".ui-slider-handle"),m="<span tabindex='0'></span>",d=[];for(f=g.values&&g.values.length||1,p.length>f&&(p.slice(f).remove(),p=p.slice(0,f)),h=p.length;f>h;h++){d.push(m)}this.handles=p.add(w(d.join("")).appendTo(this.element)),this._addClass(this.handles,"ui-slider-handle","ui-state-default"),this.handle=this.handles.eq(0),this.handles.each(function(a){w(this).data("ui-slider-handle-index",a).attr("tabIndex",0)})},_createRange:function(){var a=this.options;a.range?(a.range===!0&&(a.values?a.values.length&&2!==a.values.length?a.values=[a.values[0],a.values[0]]:w.isArray(a.values)&&(a.values=a.values.slice(0)):a.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=w("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===a.range||"max"===a.range)&&this._addClass(this.range,"ui-slider-range-"+a.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this._mouseDestroy()},_mouseCapture:function(v){var p,S,g,f,Q,d,t,m,P=this,R=this.options;return R.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),p={x:v.pageX,y:v.pageY},S=this._normValueFromMouse(p),g=this._valueMax()-this._valueMin()+1,this.handles.each(function(h){var a=Math.abs(S-P.values(h));(g>a||g===a&&(h===P._lastChangedValue||P.values(h)===R.min))&&(g=a,f=w(this),Q=h)}),d=this._start(v,Q),d===!1?!1:(this._mouseSliding=!0,this._handleIndex=Q,this._addClass(f,null,"ui-state-active"),f.trigger("focus"),t=f.offset(),m=!w(v.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=m?{left:0,top:0}:{left:v.pageX-t.left-f.width()/2,top:v.pageY-t.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(v,Q,S),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(d){var f={x:d.pageX,y:d.pageY},a=this._normValueFromMouse(f);return this._slide(d,this._handleIndex,a),!1},_mouseStop:function(a){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(d){var g,a,f,m,h;return"horizontal"===this.orientation?(g=this.elementSize.width,a=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(g=this.elementSize.height,a=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),f=a/g,f>1&&(f=1),0>f&&(f=0),"vertical"===this.orientation&&(f=1-f),m=this._valueMax()-this._valueMin(),h=this._valueMin()+f*m,this._trimAlignValue(h)},_uiHash:function(d,g,a){var f={handle:this.handles[d],handleIndex:d,value:void 0!==g?g:this.value()};return this._hasMultipleValues()&&(f.value=void 0!==g?g:this.values(d),f.values=a||this.values()),f},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(a,d){return this._trigger("start",a,this._uiHash(d))},_slide:function(g,m,f){var h,u,p=this.value(),d=this.values();this._hasMultipleValues()&&(u=this.values(m?0:1),p=this.values(m),2===this.options.values.length&&this.options.range===!0&&(f=0===m?Math.min(u,f):Math.max(u,f)),d[m]=f),f!==p&&(h=this._trigger("slide",g,this._uiHash(m,f,d)),h!==!1&&(this._hasMultipleValues()?this.values(m,f):this.value(f)))},_stop:function(a,d){this._trigger("stop",a,this._uiHash(d))},_change:function(a,d){this._keySliding||this._mouseSliding||(this._lastChangedValue=d,this._trigger("change",a,this._uiHash(d)))},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(f,a){var d,h,g;if(arguments.length>1){return this.options.values[f]=this._trimAlignValue(a),this._refreshValue(),this._change(null,f),void 0}if(!arguments.length){return this._values()}if(!w.isArray(arguments[0])){return this._hasMultipleValues()?this._values(f):this.value()}for(d=this.options.values,h=arguments[0],g=0;d.length>g;g+=1){d[g]=this._trimAlignValue(h[g]),this._change(null,g)}this._refreshValue()},_setOption:function(f,a){var d,g=0;switch("range"===f&&this.options.range===!0&&("min"===a?(this.options.value=this._values(0),this.options.values=null):"max"===a&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),w.isArray(this.options.values)&&(g=this.options.values.length),this._super(f,a),f){case"orientation":this._detectOrientation(),this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation),this._refreshValue(),this.options.range&&this._refreshRange(a),this.handles.css("horizontal"===a?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=g-1;d>=0;d--){this._change(null,d)}this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_setOptionDisabled:function(a){this._super(a),this._toggleClass(null,"ui-state-disabled",!!a)},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(d){var g,a,f;if(arguments.length){return g=this.options.values[d],g=this._trimAlignValue(g)}if(this._hasMultipleValues()){for(a=this.options.values.slice(),f=0;a.length>f;f+=1){a[f]=this._trimAlignValue(a[f])}return a}return[]},_trimAlignValue:function(d){if(this._valueMin()>=d){return this._valueMin()}if(d>=this._valueMax()){return this._valueMax()}var g=this.options.step>0?this.options.step:1,a=(d-this._valueMin())%g,f=d-a;return 2*Math.abs(a)>=g&&(f+=a>0?g:-g),parseFloat(f.toFixed(5))},_calculateNewMax:function(){var d=this.options.max,g=this._valueMin(),a=this.options.step,f=Math.round((d-g)/a)*a;d=f+g,d>this.options.max&&(d-=a),this.max=parseFloat(d.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(d){var f=""+d,a=f.indexOf(".");return -1===a?0:f.length-a-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(a){"vertical"===a&&this.range.css({width:"",left:""}),"horizontal"===a&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var u,p,Q,g,f,P=this.options.range,d=this.options,t=this,m=this._animateOff?!1:d.animate,v={};this._hasMultipleValues()?this.handles.each(function(a){p=100*((t.values(a)-t._valueMin())/(t._valueMax()-t._valueMin())),v["horizontal"===t.orientation?"left":"bottom"]=p+"%",w(this).stop(1,1)[m?"animate":"css"](v,d.animate),t.options.range===!0&&("horizontal"===t.orientation?(0===a&&t.range.stop(1,1)[m?"animate":"css"]({left:p+"%"},d.animate),1===a&&t.range[m?"animate":"css"]({width:p-u+"%"},{queue:!1,duration:d.animate})):(0===a&&t.range.stop(1,1)[m?"animate":"css"]({bottom:p+"%"},d.animate),1===a&&t.range[m?"animate":"css"]({height:p-u+"%"},{queue:!1,duration:d.animate}))),u=p}):(Q=this.value(),g=this._valueMin(),f=this._valueMax(),p=f!==g?100*((Q-g)/(f-g)):0,v["horizontal"===this.orientation?"left":"bottom"]=p+"%",this.handle.stop(1,1)[m?"animate":"css"](v,d.animate),"min"===P&&"horizontal"===this.orientation&&this.range.stop(1,1)[m?"animate":"css"]({width:p+"%"},d.animate),"max"===P&&"horizontal"===this.orientation&&this.range.stop(1,1)[m?"animate":"css"]({width:100-p+"%"},d.animate),"min"===P&&"vertical"===this.orientation&&this.range.stop(1,1)[m?"animate":"css"]({height:p+"%"},d.animate),"max"===P&&"vertical"===this.orientation&&this.range.stop(1,1)[m?"animate":"css"]({height:100-p+"%"},d.animate))},_handleEvents:{keydown:function(h){var f,g,p,m,d=w(h.target).data("ui-slider-handle-index");switch(h.keyCode){case w.ui.keyCode.HOME:case w.ui.keyCode.END:case w.ui.keyCode.PAGE_UP:case w.ui.keyCode.PAGE_DOWN:case w.ui.keyCode.UP:case w.ui.keyCode.RIGHT:case w.ui.keyCode.DOWN:case w.ui.keyCode.LEFT:if(h.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(w(h.target),null,"ui-state-active"),f=this._start(h,d),f===!1)){return}}switch(m=this.options.step,g=p=this._hasMultipleValues()?this.values(d):this.value(),h.keyCode){case w.ui.keyCode.HOME:p=this._valueMin();break;case w.ui.keyCode.END:p=this._valueMax();break;case w.ui.keyCode.PAGE_UP:p=this._trimAlignValue(g+(this._valueMax()-this._valueMin())/this.numPages);break;case w.ui.keyCode.PAGE_DOWN:p=this._trimAlignValue(g-(this._valueMax()-this._valueMin())/this.numPages);break;case w.ui.keyCode.UP:case w.ui.keyCode.RIGHT:if(g===this._valueMax()){return}p=this._trimAlignValue(g+m);break;case w.ui.keyCode.DOWN:case w.ui.keyCode.LEFT:if(g===this._valueMin()){return}p=this._trimAlignValue(g-m)}this._slide(h,d,p)},keyup:function(d){var a=w(d.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(d,a),this._change(d,a),this._removeClass(w(d.target),null,"ui-state-active"))}}}),w.widget("ui.sortable",w.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(d,f,a){return d>=f&&f+a>d},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,d){this._super(a,d),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var a=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),w.each(this.items,function(){a._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(f,a){var d=null,h=!1,g=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(f),w(f.target).parents().each(function(){return w.data(this,g.widgetName+"-item")===g?(d=w(this),!1):void 0}),w.data(f.target,g.widgetName+"-item")===g&&(d=w(f.target)),d?!this.options.handle||a||(w(this.options.handle,d).find("*").addBack().each(function(){this===f.target&&(h=!0)}),h)?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(h,f,g){var p,m,d=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(h),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},w.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(h),this.originalPageX=h.pageX,this.originalPageY=h.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),d.containment&&this._setContainment(),d.cursor&&"auto"!==d.cursor&&(m=this.document.find("body"),this.storedCursor=m.css("cursor"),m.css("cursor",d.cursor),this.storedStylesheet=w("<style>*{ cursor: "+d.cursor+" !important; }</style>").appendTo(m)),d.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",d.opacity)),d.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",d.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",h,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!g){for(p=this.containers.length-1;p>=0;p--){this.containers[p]._trigger("activate",h,this._uiHash(this))}}return w.ui.ddmanager&&(w.ui.ddmanager.current=this),w.ui.ddmanager&&!d.dropBehaviour&&w.ui.ddmanager.prepareOffsets(this,h),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(h),!0},_mouseDrag:function(m){var f,g,t,p,d=this.options,h=!1;for(this.position=this._generatePosition(m),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-m.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+d.scrollSpeed:m.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-m.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+d.scrollSpeed:m.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(m.pageY-this.document.scrollTop()<d.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-d.scrollSpeed):this.window.height()-(m.pageY-this.document.scrollTop())<d.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+d.scrollSpeed)),m.pageX-this.document.scrollLeft()<d.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-d.scrollSpeed):this.window.width()-(m.pageX-this.document.scrollLeft())<d.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+d.scrollSpeed))),h!==!1&&w.ui.ddmanager&&!d.dropBehaviour&&w.ui.ddmanager.prepareOffsets(this,m)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),f=this.items.length-1;f>=0;f--){if(g=this.items[f],t=g.item[0],p=this._intersectsWithPointer(g),p&&g.instance===this.currentContainer&&t!==this.currentItem[0]&&this.placeholder[1===p?"next":"prev"]()[0]!==t&&!w.contains(this.placeholder[0],t)&&("semi-dynamic"===this.options.type?!w.contains(this.element[0],t):!0)){if(this.direction=1===p?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(g)){break}this._rearrange(m,g),this._trigger("change",m,this._uiHash());break}}return this._contactContainers(m),w.ui.ddmanager&&w.ui.ddmanager.drag(this,m),this._trigger("sort",m,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(h,f){if(h){if(w.ui.ddmanager&&!this.options.dropBehaviour&&w.ui.ddmanager.drop(this,h),this.options.revert){var g=this,p=this.placeholder.offset(),m=this.options.axis,d={};m&&"x"!==m||(d.left=p.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),m&&"y"!==m||(d.top=p.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,w(this.helper).animate(d,parseInt(this.options.revert,10)||500,function(){g._clear(h)})}else{this._clear(h,f)}return !1}},cancel:function(){if(this.dragging){this._mouseUp(new w.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),w.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?w(this.domPosition.prev).after(this.currentItem):w(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(f){var a=this._getItemsAsjQuery(f&&f.connected),d=[];return f=f||{},w(a).each(function(){var e=(w(f.item||this).attr(f.attribute||"id")||"").match(f.expression||/(.+)[\-=_](.+)/);e&&d.push((f.key||e[1]+"[]")+"="+(f.key&&f.expression?e[1]:e[2]))}),!d.length&&f.key&&d.push(f.key+"="),d.join("&")},toArray:function(f){var a=this._getItemsAsjQuery(f&&f.connected),d=[];return f=f||{},a.each(function(){d.push(w(f.item||this).attr(f.attribute||"id")||"")}),d},_intersectsWith:function(Z){var S=this.positionAbs.left,Q=S+this.helperProportions.width,aa=this.positionAbs.top,v=aa+this.helperProportions.height,m=Z.left,V=m+Z.width,f=Z.top,R=f+Z.height,P=this.offset.click.top,U=this.offset.click.left,W="x"===this.options.axis||aa+P>f&&R>aa+P,T="y"===this.options.axis||S+U>m&&V>S+U,g=W&&T;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>Z[this.floating?"width":"height"]?g:S+this.helperProportions.width/2>m&&V>Q-this.helperProportions.width/2&&aa+this.helperProportions.height/2>f&&R>v-this.helperProportions.height/2},_intersectsWithPointer:function(d){var g,a,f="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top,d.height),m="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left,d.width),h=f&&m;return h?(g=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection(),this.floating?"right"===a||"down"===g?2:1:g&&("down"===g?2:1)):!1},_intersectsWithSides:function(d){var g=this._isOverAxis(this.positionAbs.top+this.offset.click.top,d.top+d.height/2,d.height),a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,d.left+d.width/2,d.width),f=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?"right"===h&&a||"left"===h&&!a:f&&("down"===f&&g||"up"===f&&!g)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(u){function p(){d.push(this)}var P,g,f,v,d=[],t=[],m=this._connectWith();if(m&&u){for(P=m.length-1;P>=0;P--){for(f=w(m[P],this.document[0]),g=f.length-1;g>=0;g--){v=w.data(f[g],this.widgetFullName),v&&v!==this&&!v.options.disabled&&t.push([w.isFunction(v.options.items)?v.options.items.call(v.element):w(v.options.items,v.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),v])}}}for(t.push([w.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):w(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),P=t.length-1;P>=0;P--){t[P][0].each(p)}return w(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=w.grep(this.items,function(e){for(var d=0;a.length>d;d++){if(a[d]===e.item[0]){return !1}}return !0})},_refreshItems:function(P){this.items=[],this.containers=[this];var t,U,m,g,S,f,v,p,R=this.items,T=[[w.isFunction(this.options.items)?this.options.items.call(this.element[0],P,{item:this.currentItem}):w(this.options.items,this.element),this]],Q=this._connectWith();if(Q&&this.ready){for(t=Q.length-1;t>=0;t--){for(m=w(Q[t],this.document[0]),U=m.length-1;U>=0;U--){g=w.data(m[U],this.widgetFullName),g&&g!==this&&!g.options.disabled&&(T.push([w.isFunction(g.options.items)?g.options.items.call(g.element[0],P,{item:this.currentItem}):w(g.options.items,g.element),g]),this.containers.push(g))}}}for(t=T.length-1;t>=0;t--){for(S=T[t][1],f=T[t][0],U=0,p=f.length;p>U;U++){v=w(f[U]),v.data(this.widgetName+"-item",S),R.push({item:v,instance:S,width:0,height:0,left:0,top:0})}}},refreshPositions:function(f){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var a,d,h,g;for(a=this.items.length-1;a>=0;a--){d=this.items[a],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(h=this.options.toleranceElement?w(this.options.toleranceElement,d.item):d.item,f||(d.width=h.outerWidth(),d.height=h.outerHeight()),g=h.offset(),d.left=g.left,d.top=g.top)}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(a=this.containers.length-1;a>=0;a--){g=this.containers[a].element.offset(),this.containers[a].containerCache.left=g.left,this.containers[a].containerCache.top=g.top,this.containers[a].containerCache.width=this.containers[a].element.outerWidth(),this.containers[a].containerCache.height=this.containers[a].element.outerHeight()}}return this},_createPlaceholder:function(f){f=f||this;var a,d=f.options;d.placeholder&&d.placeholder.constructor!==String||(a=d.placeholder,d.placeholder={element:function(){var e=f.currentItem[0].nodeName.toLowerCase(),g=w("<"+e+">",f.document[0]);return f._addClass(g,"ui-sortable-placeholder",a||f.currentItem[0].className)._removeClass(g,"ui-sortable-helper"),"tbody"===e?f._createTrPlaceholder(f.currentItem.find("tr").eq(0),w("<tr>",f.document[0]).appendTo(g)):"tr"===e?f._createTrPlaceholder(f.currentItem,g):"img"===e&&g.attr("src",f.currentItem.attr("src")),a||g.css("visibility","hidden"),g},update:function(e,g){(!a||d.forcePlaceholderSize)&&(g.height()||g.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10)),g.width()||g.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||0,10)))}}),f.placeholder=w(d.placeholder.element.call(f.element,f.currentItem)),f.currentItem.after(f.placeholder),d.placeholder.update(f,f.placeholder)},_createTrPlaceholder:function(f,a){var d=this;f.children().each(function(){w("<td>&#160;</td>",d.document[0]).attr("colspan",w(this).attr("colspan")||1).appendTo(a)})},_contactContainers:function(R){var P,W,t,m,U,f,Q,v,T,V,S=null,g=null;for(P=this.containers.length-1;P>=0;P--){if(!w.contains(this.currentItem[0],this.containers[P].element[0])){if(this._intersectsWith(this.containers[P].containerCache)){if(S&&w.contains(this.containers[P].element[0],S.element[0])){continue}S=this.containers[P],g=P}else{this.containers[P].containerCache.over&&(this.containers[P]._trigger("out",R,this._uiHash(this)),this.containers[P].containerCache.over=0)}}}if(S){if(1===this.containers.length){this.containers[g].containerCache.over||(this.containers[g]._trigger("over",R,this._uiHash(this)),this.containers[g].containerCache.over=1)}else{for(t=10000,m=null,T=S.floating||this._isFloating(this.currentItem),U=T?"left":"top",f=T?"width":"height",V=T?"pageX":"pageY",W=this.items.length-1;W>=0;W--){w.contains(this.containers[g].element[0],this.items[W].item[0])&&this.items[W].item[0]!==this.currentItem[0]&&(Q=this.items[W].item.offset()[U],v=!1,R[V]-Q>this.items[W][f]/2&&(v=!0),t>Math.abs(R[V]-Q)&&(t=Math.abs(R[V]-Q),m=this.items[W],this.direction=v?"up":"down"))}if(!m&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[g]){return this.currentContainer.containerCache.over||(this.containers[g]._trigger("over",R,this._uiHash()),this.currentContainer.containerCache.over=1),void 0}m?this._rearrange(R,m,null,!0):this._rearrange(R,null,this.containers[g].element,!0),this._trigger("change",R,this._uiHash()),this.containers[g]._trigger("change",R,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",R,this._uiHash(this)),this.containers[g].containerCache.over=1}}},_createHelper:function(f){var a=this.options,d=w.isFunction(a.helper)?w(a.helper.apply(this.element[0],[f,this.currentItem])):"clone"===a.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||w("parent"!==a.appendTo?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||a.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||a.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" ")),w.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&w.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&w.ui.ie)&&(a={top:0,left:0}),{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,a,d,g=this.options;"parent"===g.containment&&(g.containment=this.helper[0].parentNode),("document"===g.containment||"window"===g.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===g.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===g.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(g.containment)||(f=w(g.containment)[0],a=w(g.containment).offset(),d="hidden"!==w(f).css("overflow"),this.containment=[a.left+(parseInt(w(f).css("borderLeftWidth"),10)||0)+(parseInt(w(f).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(w(f).css("borderTopWidth"),10)||0)+(parseInt(w(f).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(f.scrollWidth,f.offsetWidth):f.offsetWidth)-(parseInt(w(f).css("borderLeftWidth"),10)||0)-(parseInt(w(f).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(d?Math.max(f.scrollHeight,f.offsetHeight):f.offsetHeight)-(parseInt(w(f).css("borderTopWidth"),10)||0)-(parseInt(w(f).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(f,a){a||(a=this.position);var d="absolute"===f?1:-1,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&w.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(h[0].tagName);return{top:a.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:h.scrollTop())*d,left:a.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:h.scrollLeft())*d}},_generatePosition:function(t){var f,m,v=this.options,u=t.pageX,d=t.pageY,p="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&w.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(p[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(u=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(d=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(u=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(d=this.containment[3]+this.offset.click.top)),v.grid&&(f=this.originalPageY+Math.round((d-this.originalPageY)/v.grid[1])*v.grid[1],d=this.containment?f-this.offset.click.top>=this.containment[1]&&f-this.offset.click.top<=this.containment[3]?f:f-this.offset.click.top>=this.containment[1]?f-v.grid[1]:f+v.grid[1]:f,m=this.originalPageX+Math.round((u-this.originalPageX)/v.grid[0])*v.grid[0],u=this.containment?m-this.offset.click.left>=this.containment[0]&&m-this.offset.click.left<=this.containment[2]?m:m-this.offset.click.left>=this.containment[0]?m-v.grid[0]:m+v.grid[0]:m)),{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():g?0:p.scrollTop()),left:u-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():g?0:p.scrollLeft())}},_rearrange:function(d,g,a,f){a?a[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?g.item[0]:g.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var h=this.counter;this._delay(function(){h===this.counter&&this.refreshPositions(!f)})},_clear:function(d,g){function a(n,o,m){return function(e){m._trigger(n,e,o._uiHash(o))}}this.reverting=!1;var f,h=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(f in this._storedCSS){("auto"===this._storedCSS[f]||"static"===this._storedCSS[f])&&(this._storedCSS[f]="")}this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(this.fromOutside&&!g&&h.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||g||h.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(g||(h.push(function(e){this._trigger("remove",e,this._uiHash())}),h.push(function(e){return function(m){e._trigger("receive",m,this._uiHash(this))}}.call(this,this.currentContainer)),h.push(function(e){return function(m){e._trigger("update",m,this._uiHash(this))}}.call(this,this.currentContainer)))),f=this.containers.length-1;f>=0;f--){g||h.push(a("deactivate",this,this.containers[f])),this.containers[f].containerCache.over&&(h.push(a("out",this,this.containers[f])),this.containers[f].containerCache.over=0)}if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,g||this._trigger("beforeStop",d,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!g){for(f=0;h.length>f;f++){h[f].call(this,d)}this._trigger("stop",d,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){w.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(d){var a=d||this;return{helper:a.helper,placeholder:a.placeholder||w([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:d?d.element:null}}}),w.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var d=this._super(),a=this.element;return w.each(["min","max","step"],function(e,f){var g=a.attr(f);null!=g&&g.length&&(d[f]=g)}),d},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a),void 0)},mousewheel:function(a,d){if(d){if(!this.spinning&&!this._start(a)){return !1}this._spin((d>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(f){function a(){var g=this.element[0]===w.ui.safeActiveElement(this.document[0]);g||(this.element.trigger("focus"),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===w.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),f.preventDefault(),a.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,a.call(this)}),this._start(f)!==!1&&this._repeat(null,w(f.currentTarget).hasClass("ui-spinner-up")?1:-1,f)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(a){return w(a.currentTarget).hasClass("ui-state-active")?this._start(a)===!1?!1:(this._repeat(null,w(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(0.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(f){var a=this.options,d=w.ui.keyCode;switch(f.keyCode){case d.UP:return this._repeat(null,1,f),!0;case d.DOWN:return this._repeat(null,-1,f),!0;case d.PAGE_UP:return this._repeat(null,a.page,f),!0;case d.PAGE_DOWN:return this._repeat(null,-a.page,f),!0}return !1},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(d,f,a){d=d||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,f,a)},d),this._spin(f*this.options.step,a)},_spin:function(d,f){var a=this.value()||0;this.counter||(this.counter=1),a=this._adjustValue(a+d*this._increment(this.counter)),this.spinning&&this._trigger("spin",f,{value:a})===!1||(this._value(a),this.counter++)},_increment:function(d){var a=this.options.incremental;return a?w.isFunction(a)?a(d):Math.floor(d*d*d/50000-d*d/500+17*d/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(d){var f=""+d,a=f.indexOf(".");return -1===a?0:f.length-a-1},_adjustValue:function(d){var g,a,f=this.options;return g=null!==f.min?f.min:0,a=d-g,a=Math.round(a/f.step)*f.step,d=g+a,d=parseFloat(d.toFixed(this._precision())),null!==f.max&&d>f.max?f.max:null!==f.min&&f.min>d?f.min:d},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(d,g){var a,f,h;return"culture"===d||"numberFormat"===d?(a=this._parse(this.element.val()),this.options[d]=g,this.element.val(this._format(a)),void 0):(("max"===d||"min"===d||"step"===d)&&"string"==typeof g&&(g=this._parse(g)),"icons"===d&&(f=this.buttons.first().find(".ui-icon"),this._removeClass(f,null,this.options.icons.up),this._addClass(f,null,g.up),h=this.buttons.last().find(".ui-icon"),this._removeClass(h,null,this.options.icons.down),this._addClass(h,null,g.down)),this._super(d,g),void 0)},_setOptionDisabled:function(a){this._super(a),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!a),this.element.prop("disabled",!!a),this.buttons.button(a?"disable":"enable")},_setOptions:A(function(a){this._super(a)}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var a=this.value();return null===a?!1:a===this._adjustValue(a)},_value:function(d,f){var a;""!==d&&(a=this._parse(d),null!==a&&(f||(a=this._adjustValue(a)),d=this._format(a))),this.element.val(d),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:A(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:A(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:A(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:A(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?(A(this._value).call(this,a),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),w.uiBackCompat!==!1&&w.widget("ui.spinner",w.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),w.ui.spinner,w.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var a=/#.*$/;return function(g){var d,f;d=g.href.replace(a,""),f=location.href.replace(a,"");try{d=decodeURIComponent(d)}catch(h){}try{f=decodeURIComponent(f)}catch(h){}return g.hash.length>1&&d===f}}(),_create:function(){var d=this,a=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,a.collapsible),this._processTabs(),a.active=this._initialActive(),w.isArray(a.disabled)&&(a.disabled=w.unique(a.disabled.concat(w.map(this.tabs.filter(".ui-state-disabled"),function(e){return d.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(a.active):w(),this._refresh(),this.active.length&&this.load(a.active)},_initialActive:function(){var f=this.options.active,a=this.options.collapsible,d=location.hash.substring(1);return null===f&&(d&&this.tabs.each(function(e,g){return w(g).attr("aria-controls")===d?(f=e,!1):void 0}),null===f&&(f=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===f||-1===f)&&(f=this.tabs.length?0:!1)),f!==!1&&(f=this.tabs.index(this.tabs.eq(f)),-1===f&&(f=a?!1:0)),!a&&f===!1&&this.anchors.length&&(f=0),f},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):w()}},_tabKeydown:function(f){var a=w(w.ui.safeActiveElement(this.document[0])).closest("li"),d=this.tabs.index(a),g=!0;if(!this._handlePageNav(f)){switch(f.keyCode){case w.ui.keyCode.RIGHT:case w.ui.keyCode.DOWN:d++;break;case w.ui.keyCode.UP:case w.ui.keyCode.LEFT:g=!1,d--;break;case w.ui.keyCode.END:d=this.anchors.length-1;break;case w.ui.keyCode.HOME:d=0;break;case w.ui.keyCode.SPACE:return f.preventDefault(),clearTimeout(this.activating),this._activate(d),void 0;case w.ui.keyCode.ENTER:return f.preventDefault(),clearTimeout(this.activating),this._activate(d===this.options.active?!1:d),void 0;default:return}f.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,g),f.ctrlKey||f.metaKey||(a.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(a){this._handlePageNav(a)||a.ctrlKey&&a.keyCode===w.ui.keyCode.UP&&(a.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(a){return a.altKey&&a.keyCode===w.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):a.altKey&&a.keyCode===w.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(f,a){function d(){return f>g&&(f=0),0>f&&(f=g),f}for(var g=this.tabs.length-1;-1!==w.inArray(d(),this.options.disabled);){f=a?f+1:f-1}return f},_focusNextTab:function(a,d){return a=this._findNextTab(a,d),this.tabs.eq(a).trigger("focus"),a},_setOption:function(a,d){return"active"===a?(this._activate(d),void 0):(this._super(a,d),"collapsible"===a&&(this._toggleClass("ui-tabs-collapsible",null,d),d||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(d),"heightStyle"===a&&this._setupHeightStyle(d),void 0)},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var d=this.options,a=this.tablist.children(":has(a[href])");d.disabled=w.map(a.filter(".ui-state-disabled"),function(e){return a.index(e)}),this._processTabs(),d.active!==!1&&this.anchors.length?this.active.length&&!w.contains(this.tablist[0],this.active[0])?this.tabs.length===d.disabled.length?(d.active=!1,this.active=w()):this._activate(this._findNextTab(Math.max(0,d.active-1),!1)):d.active=this.tabs.index(this.active):(d.active=!1,this.active=w()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var f=this,a=this.tabs,d=this.anchors,g=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(h){w(this).is(".ui-state-disabled")&&h.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){w(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return w("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=w(),this.anchors.each(function(p,u){var Q,P,m,v=w(u).uniqueId().attr("id"),t=w(u).closest("li"),e=t.attr("aria-controls");f._isLocal(u)?(Q=u.hash,m=Q.substring(1),P=f.element.find(f._sanitizeSelector(Q))):(m=t.attr("aria-controls")||w({}).uniqueId()[0].id,Q="#"+m,P=f.element.find(Q),P.length||(P=f._createPanel(m),P.insertAfter(f.panels[p-1]||f.tablist)),P.attr("aria-live","polite")),P.length&&(f.panels=f.panels.add(P)),e&&t.data("ui-tabs-aria-controls",e),t.attr({"aria-controls":m,"aria-labelledby":v}),P.attr("aria-labelledby",v)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),a&&(this._off(a.not(this.tabs)),this._off(d.not(this.anchors)),this._off(g.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(a){return w("<div>").attr("id",a).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(f){var a,d,g;for(w.isArray(f)&&(f.length?f.length===this.anchors.length&&(f=!0):f=!1),g=0;d=this.tabs[g];g++){a=w(d),f===!0||-1!==w.inArray(g,f)?(a.attr("aria-disabled","true"),this._addClass(a,null,"ui-state-disabled")):(a.removeAttr("aria-disabled"),this._removeClass(a,null,"ui-state-disabled"))}this.options.disabled=f,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,f===!0)},_setupEvents:function(d){var a={};d&&w.each(d.split(" "),function(f,g){a[g]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,a),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(f){var a,d=this.element.parent();"fill"===f?(a=d.height(),a-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var h=w(this),g=h.css("position");"absolute"!==g&&"fixed"!==g&&(a-=h.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){a-=w(this).outerHeight(!0)}),this.panels.each(function(){w(this).height(Math.max(0,a-w(this).innerHeight()+w(this).height()))}).css("overflow","auto")):"auto"===f&&(a=0,this.panels.each(function(){a=Math.max(a,w(this).height("").height())}).height(a))},_eventHandler:function(u){var p=this.options,Q=this.active,g=w(u.currentTarget),f=g.closest("li"),P=f[0]===Q[0],d=P&&p.collapsible,t=d?w():this._getPanelForTab(f),m=Q.length?this._getPanelForTab(Q):w(),v={oldTab:Q,oldPanel:m,newTab:d?w():f,newPanel:t};u.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||P&&!p.collapsible||this._trigger("beforeActivate",u,v)===!1||(p.active=d?!1:this.tabs.index(f),this.active=P?w():f,this.xhr&&this.xhr.abort(),m.length||t.length||w.error("jQuery UI Tabs: Mismatching fragment identifier."),t.length&&this.load(this.tabs.index(f),u),this._toggle(u,v))},_toggle:function(m,f){function g(){p.running=!1,p._trigger("activate",m,f)}function t(){p._addClass(f.newTab.closest("li"),"ui-tabs-active","ui-state-active"),d.length&&p.options.show?p._show(d,p.options.show,g):(d.show(),g())}var p=this,d=f.newPanel,h=f.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){p._removeClass(f.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),t()}):(this._removeClass(f.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),h.hide(),t()),h.attr("aria-hidden","true"),f.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),d.length&&h.length?f.oldTab.attr("tabIndex",-1):d.length&&this.tabs.filter(function(){return 0===w(this).attr("tabIndex")}).attr("tabIndex",-1),d.attr("aria-hidden","false"),f.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(f){var a,d=this._findActive(f);d[0]!==this.active[0]&&(d.length||(d=this.active),a=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,currentTarget:a,preventDefault:w.noop}))},_findActive:function(a){return a===!1?w():this.tabs.eq(a)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+w.ui.escapeSelector(a)+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){w.data(this,"ui-tabs-destroy")?w(this).remove():w(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var d=w(this),a=d.data("ui-tabs-aria-controls");a?d.attr("aria-controls",a).removeData("ui-tabs-aria-controls"):d.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(d){var a=this.options.disabled;a!==!1&&(void 0===d?a=!1:(d=this._getIndex(d),a=w.isArray(a)?w.map(a,function(e){return e!==d?e:null}):w.map(this.tabs,function(f,e){return e!==d?e:null})),this._setOptionDisabled(a))},disable:function(d){var a=this.options.disabled;if(a!==!0){if(void 0===d){a=!0}else{if(d=this._getIndex(d),-1!==w.inArray(d,a)){return}a=w.isArray(a)?w.merge([d],a).sort():[d]}this._setOptionDisabled(a)}},load:function(t,f){t=this._getIndex(t);var m=this,v=this.tabs.eq(t),u=v.find(".ui-tabs-anchor"),d=this._getPanelForTab(v),p={tab:v,panel:d},g=function(a,h){"abort"===h&&m.panels.stop(!1,!0),m._removeClass(v,"ui-tabs-loading"),d.removeAttr("aria-busy"),a===m.xhr&&delete m.xhr};this._isLocal(u[0])||(this.xhr=w.ajax(this._ajaxSettings(u,f,p)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(v,"ui-tabs-loading"),d.attr("aria-busy","true"),this.xhr.done(function(a,h,o){setTimeout(function(){d.html(a),m._trigger("load",f,p),g(o,h)},1)}).fail(function(a,h){setTimeout(function(){g(a,h)},1)})))},_ajaxSettings:function(f,a,d){var g=this;return{url:f.attr("href").replace(/#.*$/,""),beforeSend:function(h,m){return g._trigger("beforeLoad",a,w.extend({jqXHR:h,ajaxSettings:m},d))}}},_getPanelForTab:function(d){var a=w(d).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}}),w.uiBackCompat!==!1&&w.widget("ui.tabs",w.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),w.ui.tabs,w.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var a=w(this).attr("title")||"";return w("<a>").text(a).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(f,a){var d=(f.attr("aria-describedby")||"").split(/\s+/);d.push(a),f.data("ui-tooltip-id",a).attr("aria-describedby",w.trim(d.join(" ")))},_removeDescribedBy:function(f){var a=f.data("ui-tooltip-id"),d=(f.attr("aria-describedby")||"").split(/\s+/),g=w.inArray(a,d);-1!==g&&d.splice(g,1),f.removeData("ui-tooltip-id"),d=w.trim(d.join(" ")),d?f.attr("aria-describedby",d):f.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=w("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=w([])},_setOption:function(f,a){var d=this;this._super(f,a),"content"===f&&w.each(this.tooltips,function(g,h){d._updateContent(h.element)})},_setOptionDisabled:function(a){this[a?"_disable":"_enable"]()},_disable:function(){var a=this;w.each(this.tooltips,function(d,e){var f=w.Event("blur");f.target=f.currentTarget=e.element[0],a.close(f,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var d=w(this);return d.is("[title]")?d.data("ui-tooltip-title",d.attr("title")).removeAttr("title"):void 0}))},_enable:function(){this.disabledTitles.each(function(){var a=w(this);a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title"))}),this.disabledTitles=w([])},open:function(f){var a=this,d=w(f?f.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),f&&"mouseover"===f.type&&d.parents().each(function(){var h,g=w(this);g.data("ui-tooltip-open")&&(h=w.Event("blur"),h.target=h.currentTarget=this,a.close(h,!0)),g.attr("title")&&(g.uniqueId(),a.parents[this.id]={element:this,title:g.attr("title")},g.attr("title",""))}),this._registerCloseHandlers(f,d),this._updateContent(d,f))},_updateContent:function(d,g){var a,f=this.options.content,m=this,h=g?g.type:null;return"string"==typeof f||f.nodeType||f.jquery?this._open(g,d,f):(a=f.call(d[0],function(e){m._delay(function(){d.data("ui-tooltip-open")&&(g&&(g.type=h),this._open(g,d,e))})}),a&&this._open(g,d,a),void 0)},_open:function(u,p,P){function g(a){m.of=a,v.is(":hidden")||v.position(m)}var f,v,d,t,m=w.extend({},this.options.position);if(P){if(f=this._find(p)){return f.tooltip.find(".ui-tooltip-content").html(P),void 0}p.is("[title]")&&(u&&"mouseover"===u.type?p.attr("title",""):p.removeAttr("title")),f=this._tooltip(p),v=f.tooltip,this._addDescribedBy(p,v.attr("id")),v.find(".ui-tooltip-content").html(P),this.liveRegion.children().hide(),t=w("<div>").html(v.find(".ui-tooltip-content").html()),t.removeAttr("name").find("[name]").removeAttr("name"),t.removeAttr("id").find("[id]").removeAttr("id"),t.appendTo(this.liveRegion),this.options.track&&u&&/^mouse/.test(u.type)?(this._on(this.document,{mousemove:g}),g(u)):v.position(w.extend({of:p},this.options.position)),v.hide(),this._show(v,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(d=this.delayedShow=setInterval(function(){v.is(":visible")&&(g(m.of),clearInterval(d))},w.fx.interval)),this._trigger("open",u,{tooltip:v})}},_registerCloseHandlers:function(f,a){var d={keyup:function(h){if(h.keyCode===w.ui.keyCode.ESCAPE){var g=w.Event(h);g.currentTarget=a[0],this.close(g,!0)}}};a[0]!==this.element[0]&&(d.remove=function(){this._removeTooltip(this._find(a).tooltip)}),f&&"mouseover"!==f.type||(d.mouseleave="close"),f&&"focusin"!==f.type||(d.focusout="close"),this._on(!0,a,d)},close:function(f){var a,d=this,h=w(f?f.currentTarget:this.element),g=this._find(h);return g?(a=g.tooltip,g.closing||(clearInterval(this.delayedShow),h.data("ui-tooltip-title")&&!h.attr("title")&&h.attr("title",h.data("ui-tooltip-title")),this._removeDescribedBy(h),g.hiding=!0,a.stop(!0),this._hide(a,this.options.hide,function(){d._removeTooltip(w(this))}),h.removeData("ui-tooltip-open"),this._off(h,"mouseleave focusout keyup"),h[0]!==this.element[0]&&this._off(h,"remove"),this._off(this.document,"mousemove"),f&&"mouseleave"===f.type&&w.each(this.parents,function(n,m){w(m.element).attr("title",m.title),delete d.parents[n]}),g.closing=!0,this._trigger("close",f,{tooltip:a}),g.hiding||(g.closing=!1)),void 0):(h.removeData("ui-tooltip-open"),void 0)},_tooltip:function(f){var a=w("<div>").attr("role","tooltip"),d=w("<div>").appendTo(a),g=a.uniqueId().attr("id");return this._addClass(d,"ui-tooltip-content"),this._addClass(a,"ui-tooltip","ui-widget ui-widget-content"),a.appendTo(this._appendTo(f)),this.tooltips[g]={element:f,tooltip:a}},_find:function(a){var d=a.data("ui-tooltip-id");return d?this.tooltips[d]:null},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_appendTo:function(a){var d=a.closest(".ui-front, dialog");return d.length||(d=this.document[0].body),d},_destroy:function(){var a=this;w.each(this.tooltips,function(d,e){var g=w.Event("blur"),f=e.element;g.target=g.currentTarget=f[0],a.close(g,!0),w("#"+d).remove(),f.data("ui-tooltip-title")&&(f.attr("title")||f.attr("title",f.data("ui-tooltip-title")),f.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),w.uiBackCompat!==!1&&w.widget("ui.tooltip",w.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var a=this._superApply(arguments);return this.options.tooltipClass&&a.tooltip.addClass(this.options.tooltipClass),a}}),w.ui.tooltip});
/*
 * dragtable
 *
 * @Version 2.0.15
 *
 * Copyright (c) 2010-2013, Andres akottr@gmail.com
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * Inspired by the the dragtable from Dan Vanderkam (danvk.org/dragtable/)
 * Thanks to the jquery and jqueryui comitters
 *
 * Any comment, bug report, feature-request is welcome
 * Feel free to contact me.
 */
(function(e){e.widget("akottr.dragtable",{options:{revert:false,dragHandle:".table-handle",maxMovingRows:40,excludeFooter:false,onlyHeaderThreshold:100,dragaccept:null,persistState:null,restoreState:null,exact:true,clickDelay:10,containment:null,cursor:"move",cursorAt:false,distance:0,tolerance:"pointer",axis:"x",beforeStart:e.noop,beforeMoving:e.noop,beforeReorganize:e.noop,beforeStop:e.noop},originalTable:{el:null,selectedHandle:null,sortOrder:null,startIndex:0,endIndex:0},sortableTable:{el:e(),selectedHandle:e(),movingRow:e()},persistState:function(){var h=this;this.originalTable.el.find("th").each(function(m){if(this.id!==""){h.originalTable.sortOrder[this.id]=m}});e.ajax({url:this.options.persistState,data:this.originalTable.sortOrder})},_restoreState:function(h){for(var m in h){this.originalTable.startIndex=e("#"+m).closest("th").prevAll().length+1;this.originalTable.endIndex=parseInt(h[m],10)+1;this._bubbleCols()}},_bubbleCols:function(){var m,h,p,o;var s=this.originalTable.startIndex;var q=this.originalTable.endIndex;var n=this.originalTable.el.children();if(this.options.excludeFooter){n=n.not("tfoot")}if(s<q){for(m=s;m<q;m++){p=n.find("> tr > td:nth-child("+m+")").add(n.find("> tr > th:nth-child("+m+")"));o=n.find("> tr > td:nth-child("+(m+1)+")").add(n.find("> tr > th:nth-child("+(m+1)+")"));for(h=0;h<p.length;h++){d(p[h],o[h])}}}else{for(m=s;m>q;m--){p=n.find("> tr > td:nth-child("+m+")").add(n.find("> tr > th:nth-child("+m+")"));o=n.find("> tr > td:nth-child("+(m-1)+")").add(n.find("> tr > th:nth-child("+(m-1)+")"));for(h=0;h<p.length;h++){d(p[h],o[h])}}}},_rearrangeTableBackroundProcessing:function(){var h=this;return function(){h._bubbleCols();h.options.beforeStop(h.originalTable);h.sortableTable.el.remove();b();if(h.options.persistState!==null){e.isFunction(h.options.persistState)?h.options.persistState(h.originalTable):h.persistState()}}},_rearrangeTable:function(){var h=this;return function(){h.originalTable.selectedHandle.removeClass("dragtable-handle-selected");h.sortableTable.el.sortable("disable");h.sortableTable.el.addClass("dragtable-disabled");h.options.beforeReorganize(h.originalTable,h.sortableTable);h.originalTable.endIndex=h.sortableTable.movingRow.prevAll().length+1;setTimeout(h._rearrangeTableBackroundProcessing(),50)}},_generateSortable:function(p){!p.cancelBubble&&(p.cancelBubble=true);var o=this;var A=this.originalTable.el[0].attributes;var B="";for(var m=0;m<A.length;m++){if(A[m].nodeValue&&A[m].nodeName!="id"&&A[m].nodeName!="width"){B+=A[m].nodeName+'="'+A[m].nodeValue+'" '}}var v=[];var u=[];this.originalTable.el.find("tr").slice(0,this.options.maxMovingRows).each(function(F,C){var E=this.attributes;var G="";for(var D=0;D<E.length;D++){if(E[D].nodeValue&&E[D].nodeName!="id"){G+=" "+E[D].nodeName+'="'+E[D].nodeValue+'"'}}v.push(G);u.push(e(this).height())});var q=[];var n=0;var w=o.originalTable.el.children();if(this.options.excludeFooter){w=w.not("tfoot")}w.find("> tr > th").each(function(E,D){var C=e(this).is(":visible")?e(this).outerWidth():0;q.push(C);n+=C});if(o.options.exact){var h=n-o.originalTable.el.outerWidth();q[0]-=h}n+=2;var t='<ul class="dragtable-sortable" style="position:absolute; width:'+n+'px;">';w.find("> tr > th").each(function(E,C){var D=e(this).is(":visible")?e(this).outerWidth():0;t+='<li style="width:'+D+'px;">';t+="<table "+B+">";var F=w.find("> tr > th:nth-child("+(E+1)+")");if(o.options.maxMovingRows>1){F=F.add(w.find("> tr > td:nth-child("+(E+1)+")").slice(0,o.options.maxMovingRows-1))}F.each(function(G){var H=e(this).clone().wrap("<div></div>").parent().html();if(H.toLowerCase().indexOf("<th")===0){t+="<thead>"}t+="<tr "+v[G]+'" style="height:'+u[G]+'px;">';t+=H;if(H.toLowerCase().indexOf("<th")===0){t+="</thead>"}t+="</tr>"});t+="</table>";t+="</li>"});t+="</ul>";this.sortableTable.el=this.originalTable.el.before(t).prev();this.sortableTable.el.find("> li > table").each(function(D,C){e(this).css("width",q[D]+"px")});this.sortableTable.selectedHandle=this.sortableTable.el.find("th .dragtable-handle-selected");var s=!this.options.dragaccept?"li":"li:has("+this.options.dragaccept+")";this.sortableTable.el.sortable({items:s,stop:this._rearrangeTable(),revert:this.options.revert,tolerance:this.options.tolerance,containment:this.options.containment,cursor:this.options.cursor,cursorAt:this.options.cursorAt,distance:this.options.distance,axis:this.options.axis});this.originalTable.startIndex=e(p.target).closest("th").prevAll().length+1;this.options.beforeMoving(this.originalTable,this.sortableTable);this.sortableTable.movingRow=this.sortableTable.el.find("> li:nth-child("+this.originalTable.startIndex+")");f();this.sortableTable.movingRow.trigger(e.extend(e.Event(p.type),{which:1,clientX:p.clientX,clientY:p.clientY,pageX:p.pageX,pageY:p.pageY,screenX:p.screenX,screenY:p.screenY}));var z=this.sortableTable.el.find(".ui-sortable-placeholder");if(!z.height()<=0){z.css("height",this.sortableTable.el.find(".ui-sortable-helper").height())}z.html('<div class="outer" style="height:100%;"><div class="inner" style="height:100%;"></div></div>')},bindTo:{},_create:function(){this.originalTable={el:this.element,selectedHandle:e(),sortOrder:{},startIndex:0,endIndex:0};this.bindTo=this.originalTable.el.find("th");if(this.options.dragaccept){this.bindTo=this.bindTo.filter(this.options.dragaccept)}if(this.bindTo.find(this.options.dragHandle).length>0){this.bindTo=this.bindTo.find(this.options.dragHandle)}if(this.options.restoreState!==null){e.isFunction(this.options.restoreState)?this.options.restoreState(this.originalTable):this._restoreState(this.options.restoreState)}var h=this;this.bindTo.mousedown(function(m){if(m.which!==1){return}if(h.options.beforeStart(h.originalTable)===false){return}clearTimeout(this.downTimer);this.downTimer=setTimeout(function(){h.originalTable.selectedHandle=e(this);h.originalTable.selectedHandle.addClass("dragtable-handle-selected");h._generateSortable(m)},h.options.clickDelay)}).mouseup(function(m){clearTimeout(this.downTimer)})},redraw:function(){this.destroy();this._create()},destroy:function(){this.bindTo.unbind("mousedown");e.Widget.prototype.destroy.apply(this,arguments)}});var g=e(document.body).attr("onselectstart"),a=e(document.body).attr("unselectable");function f(){var h=e('<style id="__dragtable_disable_text_selection__" type="text/css">body { -ms-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;-webkit-user-select:none;user-select:none; }</style>');e(document.head).append(h);e(document.body).attr("onselectstart","return false;").attr("unselectable","on");if(window.getSelection){window.getSelection().removeAllRanges()}else{document.selection.empty()}}function b(){e("#__dragtable_disable_text_selection__").remove();if(g){e(document.body).attr("onselectstart",g)}else{e(document.body).removeAttr("onselectstart")}if(a){e(document.body).attr("unselectable",a)}else{e(document.body).removeAttr("unselectable")}}function d(m,h){var o=m.parentNode;var n=m.nextSibling===h?m:m.nextSibling;h.parentNode.insertBefore(m,h);o.insertBefore(h,n)}})(jQuery);$(function(){$.extend($.support,{touch:typeof Touch=="object"});$.fn.addTouch=function(){if($.support.touch){this.each(function(a,b){b.addEventListener("touchstart",iPadTouchHandler,false);b.addEventListener("touchmove",iPadTouchHandler,false);b.addEventListener("touchend",iPadTouchHandler,false);b.addEventListener("touchcancel",iPadTouchHandler,false)})}return this}});var lastTap=null;var tapValid=false;var tapTimeout=null;function cancelTap(){tapValid=false}var rightClickPending=false;var rightClickEvent=null;var holdTimeout=null;var cancelMouseUp=false;function cancelHold(){if(rightClickPending){window.clearTimeout(holdTimeout);rightClickPending=false;rightClickEvent=null}}function startHold(a){if(rightClickPending){return}rightClickPending=true;rightClickEvent=(a.changedTouches)[0];holdTimeout=window.setTimeout("doRightClick();",800)}function doRightClick(){rightClickPending=false;var b=rightClickEvent,a=document.createEvent("MouseEvent");a.initMouseEvent("mouseup",true,true,window,1,b.screenX,b.screenY,b.clientX,b.clientY,false,false,false,false,0,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("mousedown",true,true,window,1,b.screenX,b.screenY,b.clientX,b.clientY,false,false,false,false,2,null);b.target.dispatchEvent(a);a=document.createEvent("MouseEvent");a.initMouseEvent("contextmenu",true,true,window,1,b.screenX+50,b.screenY+5,b.clientX+50,b.clientY+5,false,false,false,false,2,null);b.target.dispatchEvent(a);cancelMouseUp=true;rightClickEvent=null}function iPadTouchStart(d){var e=d.changedTouches,f=e[0],a="mouseover",b=document.createEvent("MouseEvent");b.initMouseEvent(a,true,true,window,1,f.screenX,f.screenY,f.clientX,f.clientY,false,false,false,false,0,null);f.target.dispatchEvent(b);a="mousedown";b=document.createEvent("MouseEvent");b.initMouseEvent(a,true,true,window,1,f.screenX,f.screenY,f.clientX,f.clientY,false,false,false,false,0,null);f.target.dispatchEvent(b);if(!tapValid){lastTap=f.target;tapValid=true;tapTimeout=window.setTimeout("cancelTap();",600);startHold(d)}else{window.clearTimeout(tapTimeout);if(f.target==lastTap){lastTap=null;tapValid=false;a="click";b=document.createEvent("MouseEvent");b.initMouseEvent(a,true,true,window,1,f.screenX,f.screenY,f.clientX,f.clientY,false,false,false,false,0,null);f.target.dispatchEvent(b);a="dblclick";b=document.createEvent("MouseEvent");b.initMouseEvent(a,true,true,window,1,f.screenX,f.screenY,f.clientX,f.clientY,false,false,false,false,0,null);f.target.dispatchEvent(b)}else{lastTap=f.target;tapValid=true;tapTimeout=window.setTimeout("cancelTap();",600);startHold(d)}}}function iPadTouchHandler(e){var b="",a=0;if(e.touches.length>1){return}switch(e.type){case"touchstart":if($(e.changedTouches[0].target).is("select")){return}iPadTouchStart(e);e.preventDefault();return false;break;case"touchmove":cancelHold();b="mousemove";e.preventDefault();break;case"touchend":if(cancelMouseUp){cancelMouseUp=false;e.preventDefault();return false}cancelHold();b="mouseup";break;default:return}var f=e.changedTouches,g=f[0],d=document.createEvent("MouseEvent");d.initMouseEvent(b,true,true,window,1,g.screenX,g.screenY,g.clientX,g.clientY,false,false,false,false,a,null);g.target.dispatchEvent(d);if(b=="mouseup"&&tapValid&&g.target==lastTap){d=document.createEvent("MouseEvent");d.initMouseEvent("click",true,true,window,1,g.screenX,g.screenY,g.clientX,g.clientY,false,false,false,false,a,null);g.target.dispatchEvent(d)}}
/* jQuery Dynatree Plugin - v1.2.8 - 2015-07-04

* https://github.com/mar10/dynatree/

* Copyright (c) 2015 Martin Wendt; Licensed MIT, GPL */
function _log(g){if(_canLog){var f=Array.prototype.slice.apply(arguments,[1]),n=new Date,m=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds();f[0]=m+" - "+f[0];try{switch(g){case"info":window.console.info.apply(window.console,f);break;case"warn":window.console.warn.apply(window.console,f);break;default:window.console.log.apply(window.console,f)}}catch(h){window.console?-2146827850===h.number&&window.console.log(f.join(", ")):_canLog=!1}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(a){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(a)}function noop(){}function offsetString(a){return 0===a?"":a>0?"+"+a:""+a}function _checkBrowser(){function a(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}}var b,c;return b=a(navigator.userAgent),c={},b.browser&&(c[b.browser]=!0,c.version=b.version),c.chrome?c.webkit=!0:c.webkit&&(c.safari=!0),c}function versionCompare(a,b){var c,d,e,f=(""+a).split("."),g=(""+b).split("."),h=Math.min(f.length,g.length);for(e=0;h>e;e++){if(c=parseInt(f[e],10),d=parseInt(g[e],10),isNaN(c)&&(c=f[e]),isNaN(d)&&(d=g[e]),c!=d){return c>d?1:d>c?-1:0/0}}return f.length===g.length?0:f.length<g.length?-1:1}function _initDragAndDrop(a){var b=a.options.dnd||null;b&&(b.onDragStart||b.onDrop)&&_registerDnd(),b&&b.onDragStart&&a.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:b.revert!==!0?!1:function(a){if(logMsg("draggable.revert(), dropped=",a),"boolean"==typeof a){return !a}var b=$.ui.ddmanager&&$.ui.ddmanager.current&&$.ui.ddmanager.current.helper,c=b&&b.hasClass("dynatree-drop-reject");return c},scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(a){var b=$.ui.dynatree.getNode(a.target);return b?b.tree._onDragEvent("helper",b,null,a,null,null):"<div></div>"},start:function(a,b){var c=b.helper.data("dtSourceNode");return !!c}}),b&&b.onDrop&&a.$tree.droppable({addClasses:!1,tolerance:"pointer",greedy:!1})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},BROWSER=_checkBrowser(),jquerySupports={positionMyOfs:versionCompare($.ui.version,"1.9")>=0},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(a,b,c){this.parent=a,this.tree=b,"string"==typeof c&&(c={title:c}),c.key=null==c.key?"_"+b._nodeCount++:""+c.key,this.data=$.extend({},$.ui.dynatree.nodedatadefaults,c),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(a,b){var c,d=$.extend({},this.data);if(d.activate=this.tree.activeNode===this,d.focus=this.tree.focusNode===this,d.expand=this.bExpanded,d.select=this.bSelected,b&&b(d),a&&this.childList){d.children=[];for(var e=0,f=this.childList.length;f>e;e++){c=this.childList[e],c.isStatusNode()||d.children.push(c.toDict(!0,b))}}else{delete d.children}return d},fromDict:function(a){var b=a.children;return void 0===b?(this.data=$.extend(this.data,a),void this.render()):(a=$.extend({},a),a.children=void 0,this.data=$.extend(this.data,a),this.removeChildren(),void this.addChild(b))},_getInnerHtml:function(){var a,b=this.tree,c=b.options,d=b.cache,e=this.getLevel(),f=this.data,g="";e<c.minExpandLevel?e>1&&(g+=d.tagConnector):g+=this.hasChildren()!==!1?d.tagExpander:d.tagConnector,c.checkbox&&f.hideCheckbox!==!0&&!f.isStatusNode&&(g+=d.tagCheckbox),f.icon?(a="/"===f.icon.charAt(0)?f.icon:c.imagePath+f.icon,g+="<img src='"+a+"' alt='' />"):f.icon===!1||(g+=f.iconClass?"<span class=' "+f.iconClass+"'></span>":d.tagNodeIcon);var h="";if(c.onCustomRender&&(h=c.onCustomRender.call(b,this)||""),!h){var i=f.tooltip?' title="'+f.tooltip.replace(/\"/g,"&quot;")+'"':"",j=f.href||"#";h=c.noLink||f.noLink?'<span style="display:inline-block;" class="'+c.classNames.title+'"'+i+">"+f.title+"</span>":'<a href="'+j+'" class="'+c.classNames.title+'"'+i+">"+f.title+"</a>"}return g+=h},_fixOrder:function(){var a=this.childList;if(a&&this.ul){for(var b=this.ul.firstChild,c=0,d=a.length-1;d>c;c++){var e=a[c],f=b.dtnode;e!==f?(this.tree.logDebug("_fixOrder: mismatch at index "+c+": "+e+" != "+f),this.ul.insertBefore(e.li,f.li)):b=b.nextSibling}}},render:function(a,b){var c=this.tree,d=this.parent,e=this.data,f=c.options,g=f.classNames,h=this.isLastSibling(),i=!1;if(d||this.ul){if(d){this.li||(i=!0,this.li=document.createElement("li"),this.li.dtnode=this,e.key&&f.generateIds&&(this.li.id=f.idPrefix+e.key),this.span=document.createElement("span"),this.span.className=g.title,this.li.appendChild(this.span),d.ul||(d.ul=document.createElement("ul"),d.ul.style.display="none",d.li.appendChild(d.ul)),d.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var j=[];j.push(g.node),e.isFolder&&j.push(g.folder),this.bExpanded&&j.push(g.expanded),this.hasChildren()!==!1&&j.push(g.hasChildren),e.isLazy&&null===this.childList&&j.push(g.lazy),h&&j.push(g.lastsib),this.bSelected&&j.push(g.selected),this.hasSubSel&&j.push(g.partsel),c.activeNode===this&&j.push(g.active),e.addClass&&j.push(e.addClass),j.push(g.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(e.isLazy&&null===this.childList?"d":"")+(h?"l":"")),j.push(g.combinedIconPrefix+(this.bExpanded?"e":"c")+(e.isFolder?"f":"")),this.span.className=j.join(" "),this.li.className=h?g.lastsib:"",i&&f.onCreate&&f.onCreate.call(c,this,this.span),f.onRender&&f.onRender.call(c,this,this.span)}}else{this.li=this.span=null,this.ul=document.createElement("ul"),this.ul.className=f.minExpandLevel>1?g.container+" "+g.noConnector:g.container}if((this.bExpanded||b===!0)&&this.childList){for(var k=0,l=this.childList.length;l>k;k++){this.childList[k].render(!1,b)}this._fixOrder()}if(this.ul){var m="none"===this.ul.style.display,n=!!this.bExpanded;if(a&&f.fx&&m===n){var o=f.fx.duration||200;$(this.ul).animate(f.fx,o)}else{this.ul.style.display=this.bExpanded||!d?"":"none"}}},getKeyPath:function(a){var b=[],c=this.tree.options.keyPathSeparator;return this.visitParents(function(a){a.parent&&b.unshift(a.data.key)},!a),c+b.join(c)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0===this.childList.length?!1:1===this.childList.length&&this.childList[0].isStatusNode()?void 0:!0:!!this.childList},isFirstSibling:function(){var a=this.parent;return !a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return !a||a.childList[a.childList.length-1]===this},isLoading:function(){return !!this._isLoading},getPrevSibling:function(){if(!this.parent){return null}for(var a=this.parent.childList,b=1,c=a.length;c>b;b++){if(a[b]===this){return a[b-1]}}return null},getNextSibling:function(){if(!this.parent){return null}for(var a=this.parent.childList,b=0,c=a.length-1;c>b;b++){if(a[b]===this){return a[b+1]}}return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a){return !1}for(var b=this.parent;b;){if(b===a){return !0}b=b.parent}return !1},countChildren:function(){var a=this.childList;if(!a){return 0}for(var b=a.length,c=0,d=b;d>c;c++){var e=a[c];b+=e.countChildren()}return b},sortChildren:function(a,b){var c=this.childList;if(c){if(a=a||function(a,b){var c=a.data.title.toLowerCase(),d=b.data.title.toLowerCase();return c===d?0:c>d?1:-1},c.sort(a),b){for(var d=0,e=c.length;e>d;d++){c[d].childList&&c[d].sortChildren(a,"$norender$")}}"$norender$"!==b&&this.render()}},_setStatusNode:function(a){var b=this.childList?this.childList[0]:null;if(a){b?(a.isStatusNode=!0,a.key="_statusNode",b.data=a,b.render()):(a.isStatusNode=!0,a.key="_statusNode",b=this.addChild(a))}else{if(b&&b.isStatusNode()){try{this.ul&&(this.ul.removeChild(b.li),b.li=null)}catch(c){}1===this.childList.length?this.childList=[]:this.childList.shift()}}},setLazyNodeStatus:function(a,b){var c=b&&b.tooltip?b.tooltip:null,d=b&&b.info?" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+d,tooltip:c,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+d,tooltip:c,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'."}},_parentList:function(a,b){for(var c=[],d=b?this:this.parent;d;){(a||d.parent)&&c.unshift(d),d=d.parent}return c},getLevel:function(){for(var a=0,b=this.parent;b;){a++,b=b.parent}return a},_getTypeForOuterNodeEvent:function(a){var b=this.tree.options.classNames,c=a.target;if(c.className.indexOf(b.node)<0){return null}for(var d=a.pageX-c.offsetLeft,e=a.pageY-c.offsetTop,f=0,g=c.childNodes.length;g>f;f++){var h=c.childNodes[f],i=h.offsetLeft-c.offsetLeft,j=h.offsetTop-c.offsetTop,k=h.clientWidth,l=h.clientHeight;if(d>=i&&i+k>=d&&e>=j&&j+l>=e){if(h.className==b.title){return"title"}if(h.className==b.expander){return"expander"}if(h.className==b.checkbox||h.className==b.radio){return"checkbox"}if(h.className==b.nodeIcon){return"icon"}}}return"prefix"},getEventTargetType:function(a){var b=a&&a.target?a.target.className:"",c=this.tree.options.classNames;return b.indexOf(c.title)>=0?"title":b.indexOf(c.expander)>=0?"expander":b.indexOf(c.checkbox)>=0||b.indexOf(c.radio)>=0?"checkbox":b.indexOf(c.nodeIcon)>=0?"icon":b.indexOf(c.empty)>=0||b.indexOf(c.vline)>=0||b.indexOf(c.connector)>=0?"prefix":b.indexOf(c.node)>=0?this._getTypeForOuterNodeEvent(a):null},isVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;c>b;b++){if(!a[b].bExpanded){return !1}}return !0},makeVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;c>b;b++){a[b]._expand(!0)}},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",a,b,this);var c=this.tree.options;if(!this.data.isStatusNode){if(a){if(b&&c.onQueryActivate&&c.onQueryActivate.call(this.tree,a,this)===!1){return}if(this.tree.activeNode){if(this.tree.activeNode===this){return}this.tree.activeNode.deactivate()}c.activeVisible&&this.makeVisible(),this.tree.activeNode=this,c.persist&&$.cookie(c.cookieId+"-active",this.data.key,c.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(c.classNames.active),b&&c.onActivate&&c.onActivate.call(this.tree,this)}else{if(this.tree.activeNode===this){if(c.onQueryActivate&&c.onQueryActivate.call(this.tree,!1,this)===!1){return}$(this.span).removeClass(c.classNames.active),c.persist&&$.cookie(c.cookieId+"-active","",c.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,b&&c.onDeactivate&&c.onDeactivate.call(this.tree,this)}}}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=!0,b=!1;if(this.data.isFolder){switch(this.tree.options.clickFolderMode){case 2:a=!1,b=!0;break;case 3:a=b=!0}}null===this.parent&&(b=!1),b&&(this.toggleExpand(),this.focus()),a&&this.activate()},_setSubSel:function(a){a?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var a;if(!this.hasChildren()){return a=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),a}var b,c,d=this.childList,e=!0,f=!0;for(b=0,c=d.length;c>b;b++){var g=d[b],h=g._updatePartSelectionState();h!==!1&&(f=!1),h!==!0&&(e=!1)}return a=e?!0:f?!1:void 0,this._setSubSel(void 0===a),this.bSelected=a===!0,a},_fixSelectionState:function(){var a,b,c;if(this.bSelected){for(this.visit(function(a){a.parent._setSubSel(!0),a.data.unselectable||a._select(!0,!1,!1)}),a=this.parent;a;){a._setSubSel(!0);var d=!0;for(b=0,c=a.childList.length;c>b;b++){var e=a.childList[b];if(!e.bSelected&&!e.data.isStatusNode&&!e.data.unselectable){d=!1;break}}d&&a._select(!0,!1,!1),a=a.parent}}else{for(this._setSubSel(!1),this.visit(function(a){a._setSubSel(!1),a._select(!1,!1,!1)}),a=this.parent;a;){a._select(!1,!1,!1);var f=!1;for(b=0,c=a.childList.length;c>b;b++){if(a.childList[b].bSelected||a.childList[b].hasSubSel){f=!0;break}}a._setSubSel(f),a=a.parent}}},_select:function(a,b,c){var d=this.tree.options;this.data.isStatusNode||this.bSelected!==a&&(b&&d.onQuerySelect&&d.onQuerySelect.call(this.tree,a,this)===!1||(1==d.selectMode&&a&&this.tree.visit(function(a){return a.bSelected?(a._select(!1,!1,!1),!1):void 0}),this.bSelected=a,a?(d.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(d.classNames.selected),c&&3===d.selectMode&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!0,this)):(d.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(d.classNames.selected),c&&3===d.selectMode&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!1,this))))},select:function(a){return this.data.unselectable?this.bSelected:this._select(a!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return !!this.data.isLazy},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===a.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(b){this.tree.logWarning("_loadContent: failed - %o",b),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+b})}},_expand:function(a,b){if(this.bExpanded===a){return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",a,this)}this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var c=this.tree.options;if(!a&&this.getLevel()<c.minExpandLevel){return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this)}if(!c.onQueryExpand||c.onQueryExpand.call(this.tree,a,this)!==!1){this.bExpanded=a,c.persist&&(a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var d=!(this.data.isLazy&&null===this.childList||this._isLoading||b);if(this.render(d),this.bExpanded&&this.parent&&c.autoCollapse){for(var e=this._parentList(!1,!0),f=0,g=e.length;g>f;f++){e[f].collapseSiblings()}}return c.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),a&&this.data.isLazy&&null===this.childList&&!this._isLoading?void this._loadContent():void (c.onExpand&&c.onExpand.call(this.tree,a,this))}},isExpanded:function(){return this.bExpanded},expand:function(a){a=a!==!1,(this.childList||this.data.isLazy||!a)&&(null!==this.parent||a)&&this._expand(a)},scheduleAction:function(a,b){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var c=this;switch(a){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger expand"),c.expand(!0)},b);break;case"activate":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger activate"),c.activate()},b);break;default:throw"Invalid mode "+a}this.tree.logDebug("setTimeout(%s, %s): %s",a,b,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent){for(var a=this.parent.childList,b=0,c=a.length;c>b;b++){a[b]!==this&&a[b].bExpanded&&a[b]._expand(!1)}}},_onClick:function(a){var b=this.getEventTargetType(a);if("expander"===b){this.toggleExpand(),this.focus()}else{if("checkbox"===b){this.toggleSelect(),this.focus()}else{this._userActivate();var c=this.span.getElementsByTagName("a");if(!c[0]){return !0}BROWSER.msie&&parseInt(BROWSER.version,10)<9||c[0].focus()}}a.preventDefault()},_onDblClick:function(){},_onKeydown:function(a){var b,c=!0;switch(a.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(b=this.getPrevSibling();b&&b.bExpanded&&b.childList;){b=b.childList[b.childList.length-1]}!b&&this.parent&&this.parent.parent&&(b=this.parent),b&&b.focus();break;case 40:if(this.bExpanded&&this.childList){b=this.childList[0]}else{for(var d=this._parentList(!1,!0),e=d.length-1;e>=0&&!(b=d[e].getNextSibling());e--){}}b&&b.focus();break;default:c=!1}c&&a.preventDefault()},_onKeypress:function(){},_onFocus:function(a){var b=this.tree.options;"blur"==a.type||"focusout"==a.type?(b.onBlur&&b.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(b.classNames.focused),this.tree.tnFocused=null,b.persist&&$.cookie(b.cookieId+"-focus","",b.cookie)):("focus"==a.type||"focusin"==a.type)&&(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(b.classNames.focused)),this.tree.tnFocused=this,b.onFocus&&b.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(b.classNames.focused),b.persist&&$.cookie(b.cookieId+"-focus",this.data.key,b.cookie))},visit:function(a,b){var c=!0;if(b===!0&&(c=a(this),c===!1||"skip"===c)){return c}if(this.childList){for(var d=0,e=this.childList.length;e>d&&(c=this.childList[d].visit(a,!0),c!==!1);d++){}}return c},visitParents:function(a,b){if(b&&a(this)===!1){return !1}for(var c=this.parent;c;){if(a(c)===!1){return !1}c=c.parent}return !0},remove:function(){if(this===this.tree.root){throw"Cannot remove system root"}return this.parent.removeChild(this)},removeChild:function(a){var b=this.childList;if(1===b.length){if(a!==b[0]){throw"removeChild: invalid child"}return this.removeChildren()}a===this.tree.activeNode&&a.deactivate(),this.tree.options.persist&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),a.bExpanded&&this.tree.persistence.clearExpand(a.data.key)),a.removeChildren(!0),this.ul&&a.li&&this.ul.removeChild(a.li);for(var c=0,d=b.length;d>c;c++){if(b[c]===a){this.childList.splice(c,1);break}}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var c=this.tree,d=this.childList;if(d){for(var e=0,f=d.length;f>e;e++){var g=d[e];g!==c.activeNode||b||g.deactivate(),this.tree.options.persist&&!b&&(g.bSelected&&this.tree.persistence.clearSelect(g.data.key),g.bExpanded&&this.tree.persistence.clearExpand(g.data.key)),g.removeChildren(!0,b),this.ul&&g.li&&$("li",$(this.ul)).remove()}this.childList=null}a||(this._isLoading=!1,this.render())},setTitle:function(a){this.fromDict({title:a})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(a){if(null===this.parent){throw"Use tree.reload() instead"}if(!this.data.isLazy){throw"node.reloadChildren() requires lazy nodes."}if(a){var b=this,c="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(c,function(d,e,f){if(b.tree.$tree.unbind(c),b.tree.logDebug("loaded %o, %o, %o",d,e,f),e!==b){throw"got invalid load event"}a.call(b.tree,e,f)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(a,b){var c=this.tree;if(c.logDebug("%s._loadKeyPath(%s)",this,a),""===a){throw"Key path must not be empty"}var d=a.split(c.options.keyPathSeparator);if(""===d[0]){throw"Key path must be relative (don't start with '/')"}var e=d.shift();if(this.childList){for(var f=0,g=this.childList.length;g>f;f++){var h=this.childList[f];if(h.data.key===e){if(0===d.length){b.call(c,h,"ok")}else{if(!h.data.isLazy||null!==h.childList&&void 0!==h.childList){b.call(c,h,"loaded"),h._loadKeyPath(d.join(c.options.keyPathSeparator),b)}else{c.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,a,h);var i=this;h.reloadChildren(function(e,f){f?(c.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",e,a,e),b.call(c,h,"loaded"),e._loadKeyPath(d.join(c.options.keyPathSeparator),b)):(c.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",i,a),b.call(c,h,"error"))})}}return}}}b.call(c,void 0,"notfound",e,0===d.length),c.logWarning("Node not found: "+e)},resetLazy:function(){if(null===this.parent){throw"Use tree.reload() instead"}if(!this.data.isLazy){throw"node.resetLazy() requires lazy nodes."}this.expand(!1),this.removeChildren()},_addChildNode:function(a,b){var c=this.tree,d=c.options,e=c.persistence;if(a.parent=this,null===this.childList?this.childList=[]:b||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(d.classNames.lastsib),b){var f=$.inArray(b,this.childList);if(0>f){throw"<beforeNode> must be a child of <this>"}this.childList.splice(f,0,a)}else{this.childList.push(a)}var g=c.isInitializing();if(d.persist&&e.cookiesFound&&g?(e.activeKey===a.data.key&&(c.activeNode=a),e.focusedKey===a.data.key&&(c.focusNode=a),a.bExpanded=$.inArray(a.data.key,e.expandedKeyList)>=0,a.bSelected=$.inArray(a.data.key,e.selectedKeyList)>=0):(a.data.activate&&(c.activeNode=a,d.persist&&(e.activeKey=a.data.key)),a.data.focus&&(c.focusNode=a,d.persist&&(e.focusedKey=a.data.key)),a.bExpanded=a.data.expand===!0,a.bExpanded&&d.persist&&e.addExpand(a.data.key),a.bSelected=a.data.select===!0,a.bSelected&&d.persist&&e.addSelect(a.data.key)),d.minExpandLevel>=a.getLevel()&&(this.bExpanded=!0),a.bSelected&&3==d.selectMode){for(var h=this;h;){h.hasSubSel||h._setSubSel(!0),h=h.parent}}return c.bEnableUpdate&&this.render(),a},addChild:function(a,b){if("string"==typeof a){throw"Invalid data type for "+a}if(a&&0!==a.length){if(a instanceof DynaTreeNode){return this._addChildNode(a,b)}a.length||(a=[a]);for(var c=this.tree.enableUpdate(!1),d=null,e=0,f=a.length;f>e;e++){var g=a[e],h=this._addChildNode(new DynaTreeNode(this,this.tree,g),b);d||(d=h),g.children&&h.addChild(g.children,null)}return this.tree.enableUpdate(c),d}},append:function(a){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(a,null)},appendAjax:function(a){var b=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),a.debugLazyDelay){var c=a.debugLazyDelay;return a.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+c),void setTimeout(function(){b.appendAjax(a)},c)}var d=a.success,e=a.error,f="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,g=$.extend({},this.tree.options.ajaxDefaults,a,{success:function(a,c){var e=b.tree.phase,g=b.tree.options;b.tree.phase="init",g.postProcess?a=g.postProcess.call(this,a,this.dataType):a&&a.hasOwnProperty("d")&&(a="string"==typeof a.d?$.parseJSON(a.d):a.d),$.isArray(a)&&0===a.length||b.addChild(a,null),b.tree.phase="postInit",d&&d.call(g,b,a,c),b.tree.logDebug("trigger "+f),b.tree.$tree.trigger(f,[b,!0]),b.tree.phase=e,b.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(a)&&0===a.length&&(b.childList=[],b.render())},error:function(a,c,d){b.tree.logWarning("appendAjax failed:",c,":\n",a,"\n",d),e&&e.call(g,b,a,c,d),b.tree.$tree.trigger(f,[b,!1]),b.setLazyNodeStatus(DTNodeStatus_Error,{info:c,tooltip:""+d})}});$.ajax(g)},move:function(a,b){var c;if(this!==a){if(!this.parent){throw"Cannot move system root"}(void 0===b||"over"==b)&&(b="child");var d=this.parent,e="child"===b?a:a.parent;if(e.isDescendantOf(this)){throw"Cannot move a node to it's own descendant"}if(1==this.parent.childList.length){this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1}else{if(c=$.inArray(this,this.parent.childList),0>c){throw"Internal error"}this.parent.childList.splice(c,1)}if(this.parent.ul&&this.li&&this.parent.ul.removeChild(this.li),this.parent=e,e.hasChildren()){switch(b){case"child":e.childList.push(this);break;case"before":if(c=$.inArray(a,e.childList),0>c){throw"Internal error"}e.childList.splice(c,0,this);break;case"after":if(c=$.inArray(a,e.childList),0>c){throw"Internal error"}e.childList.splice(c+1,0,this);break;default:throw"Invalid mode "+b}}else{e.childList=[this]}if(e.ul||(e.ul=document.createElement("ul"),e.ul.style.display="none",e.li&&e.li.appendChild(e.ul)),this.li&&e.ul.appendChild(this.li),this.tree!==a.tree){throw this.visit(function(b){b.tree=a.tree},null,!0),"Not yet implemented."}d.isDescendantOf(e)||d.render(),e.isDescendantOf(d)||e.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(a,b){var c=new DynaTreeStatus(a,b);return c.read(),c.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(a,b){void 0===a&&(a=$.ui.dynatree.prototype.options.cookieId),b=$.extend({},$.ui.dynatree.prototype.options.cookie,b),this.cookieId=a,this.cookieOpts=b,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var a=$.cookie(this.cookieId+"-active");this.activeKey=a||"",a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-focus"),this.focusedKey=a||"",a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=a?a.split(","):[],a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-select"),this.selectedKeyList=a?a.split(","):[],a&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(a){$.inArray(a,this.expandedKeyList)<0&&(this.expandedKeyList.push(a),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(a){var b=$.inArray(a,this.expandedKeyList);b>=0&&(this.expandedKeyList.splice(b,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(a){$.inArray(a,this.selectedKeyList)<0&&(this.selectedKeyList.push(a),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(a){var b=$.inArray(a,this.selectedKeyList);b>=0&&(this.selectedKeyList.splice(b,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="@@Version",DynaTree.prototype={initialize:function(a){this.phase="init",this.$widget=a,this.options=a.options,this.$tree=a.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(a){var b=(this.$widget,this.options),c=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==b.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),b.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),b.minExpandLevel=1),b.classNames!==$.ui.dynatree.prototype.options.classNames&&(b.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,b.classNames)),b.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(b.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults)),b.dnd!==$.ui.dynatree.prototype.options.dnd&&(b.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,b.dnd)),b.imagePath||$("script").each(function(){var a=/.*dynatree[^\/]*\.js$/i;return this.src.search(a)>=0?(b.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":"skin/",c.logDebug("Guessing imagePath from '%s': '%s'",this.src,b.imagePath),!1):void 0}),this.persistence=new DynaTreeStatus(b.cookieId,b.cookie),b.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+b.classNames.empty+"'></span>",tagVline:"<span class='"+b.classNames.vline+"'></span>",tagExpander:"<span class='"+b.classNames.expander+"'></span>",tagConnector:"<span class='"+b.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+b.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+b.classNames.checkbox+"'></span>",lastentry:void 0},(b.children||b.initAjax&&b.initAjax.url||b.initId)&&$(this.divTree).empty();var d=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var e=this.tnRoot,f=b.persist&&this.persistence.isReloading(),g=!1,h=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),b.children?e.addChild(b.children):b.initAjax&&b.initAjax.url?(g=!0,e.data.isLazy=!0,this._reloadAjax(a)):b.initId?this._createFromTag(e,$("#"+b.initId)):(this._createFromTag(e,d),d.remove()),this._checkConsistency(),g||3!=b.selectMode||e._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(h),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",b.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),g||(b.onPostInit&&b.onPostInit.call(this,f,!1),a&&a.call(this,"ok")),this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url){throw"tree.reload() requires 'initAjax' mode."}var c=this.persistence,d=$.extend({},b.initAjax);d.addActiveKey&&(d.data.activeKey=c.activeKey),d.addFocusedKey&&(d.data.focusedKey=c.focusedKey),d.addExpandedKeyList&&(d.data.expandedKeyList=c.expandedKeyList.join(",")),d.addSelectedKeyList&&(d.data.selectedKeyList=c.selectedKeyList.join(",")),d.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),d.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var e=c.isReloading();d.success=function(c){3==b.selectMode&&c.tree.tnRoot._updatePartSelectionState(),b.onPostInit&&b.onPostInit.call(c.tree,e,!1),a&&a.call(c.tree,"ok")},d.error=function(c,d,f,g){b.onPostInit&&b.onPostInit.call(c.tree,e,!0,d,f,g),a&&a.call(c.tree,"error",d,f,g)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(d)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(a){var b=this.tnRoot.toDict(!0);return a?b:b.children},serializeArray:function(a){for(var b=this.getSelectedNodes(a),c=this.$tree.attr("name")||this.$tree.attr("id"),d=[],e=0,f=b.length;f>e;e++){d.push({name:c,value:b[e].data.key})}return d},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var b=document.getElementById(this.options.idPrefix+a);if(b){return b.dtnode?b.dtnode:null}var c=null;return this.visit(function(b){return b.data.key===a?(c=b,!1):void 0},!0),c},getActiveNode:function(){return this.activeNode},reactivate:function(a){var b=this.activeNode;b&&(this.activeNode=null,b.activate(),a&&b.focus())},getSelectedNodes:function(a){var b=[];return this.tnRoot.visit(function(c){return c.bSelected&&(b.push(c),a===!0)?"skip":void 0}),b},activateKey:function(a){var b=null===a?null:this.getNodeByKey(a);return b?(b.focus(),b.activate(),b):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(a,b){var c=a.split(this.options.keyPathSeparator);return""===c[0]&&c.shift(),c[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),c.shift()),a=c.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(a,b)},selectKey:function(a,b){var c=this.getNodeByKey(a);return c?(c.select(b),c):null},enableUpdate:function(a){return this.bEnableUpdate==a?a:(this.bEnableUpdate=a,a&&this.redraw(),!a)},count:function(){return this.tnRoot.countChildren()},visit:function(a,b){return this.tnRoot.visit(a,b)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length){title=$liSpan.html()}else{if($liA.length){title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title")}else{title=$li.html();var iPos=title.search(/<ul/i);title=$.trim(iPos>=0?title.substring(0,iPos):title)}}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=""+$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(a,b,c,d,e){var f,g=a?$(a.span):null,h=$(b.span),i=0,j="center";if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1000}).prependTo($(this.divTree).parent())),"after"===d||"before"===d||"over"===d){switch(d){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),j="top";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),j="bottom";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),h.addClass("dynatree-drop-target"),i=8}f=jquerySupports.positionMyOfs?{my:"left"+offsetString(i)+" center",at:"left "+j,of:h}:{my:"left center",at:"left "+j,of:h,offset:""+i+" 0"},this.$dndMarker.show().position(f)}else{h.removeClass("dynatree-drop-target"),this.$dndMarker.hide()}"after"===d?h.addClass("dynatree-drop-after"):h.removeClass("dynatree-drop-after"),"before"===d?h.addClass("dynatree-drop-before"):h.removeClass("dynatree-drop-before"),e===!0?(g&&g.addClass("dynatree-drop-accept"),h.addClass("dynatree-drop-accept"),c.addClass("dynatree-drop-accept")):(g&&g.removeClass("dynatree-drop-accept"),h.removeClass("dynatree-drop-accept"),c.removeClass("dynatree-drop-accept")),e===!1?(g&&g.addClass("dynatree-drop-reject"),h.addClass("dynatree-drop-reject"),c.addClass("dynatree-drop-reject")):(g&&g.removeClass("dynatree-drop-reject"),h.removeClass("dynatree-drop-reject"),c.removeClass("dynatree-drop-reject"))},_onDragEvent:function(a,b,c,d,e,f){var g,h,i,j=this.options.dnd,k=null,l=$(b.span);switch(a){case"helper":var m=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append(l.find(".dynatree-title").clone());$("ul.dynatree-container",b.tree.divTree).append(m),m.data("dtSourceNode",b),k=m;break;case"start":b.isStatusNode()?k=!1:j.onDragStart&&(k=j.onDragStart(b)),k===!1?(this.logDebug("tree.onDragStart() cancelled"),e.helper.trigger("mouseup"),e.helper.hide()):l.addClass("dynatree-drag-source");break;case"enter":i=j.onDragEnter?j.onDragEnter(b,c,e,f):null,k=i?$.isArray(i)?{over:$.inArray("over",i)>=0,before:$.inArray("before",i)>=0,after:$.inArray("after",i)>=0}:{over:i===!0||"over"===i,before:i===!0||"before"===i,after:i===!0||"after"===i}:!1,e.helper.data("enterResponse",k);break;case"over":if(h=e.helper.data("enterResponse"),g=null,h===!1){}else{if("string"==typeof h){g=h}else{var n=l.offset(),o={x:d.pageX-n.left,y:d.pageY-n.top},p={x:o.x/l.width(),y:o.y/l.height()};h.after&&p.y>0.75?g="after":!h.over&&h.after&&p.y>0.5?g="after":h.before&&p.y<=0.25?g="before":!h.over&&h.before&&p.y<=0.5?g="before":h.over&&(g="over"),j.preventVoidMoves&&(b===c?g=null:"before"===g&&c&&b===c.getNextSibling()?g=null:"after"===g&&c&&b===c.getPrevSibling()?g=null:"over"===g&&c&&c.parent===b&&c.isLastSibling()&&(g=null)),e.helper.data("hitMode",g)}}"over"===g&&j.autoExpandMS&&b.hasChildren()!==!1&&!b.bExpanded&&b.scheduleAction("expand",j.autoExpandMS),g&&j.onDragOver&&(k=j.onDragOver(b,c,g,e,f),("over"===k||"before"===k||"after"===k)&&(g=k)),this._setDndStatus(c,b,e.helper,g,k!==!1&&null!==g);break;case"drop":var q=e.helper.hasClass("dynatree-drop-reject");g=e.helper.data("hitMode"),g&&j.onDrop&&!q&&j.onDrop(b,c,g,e,f);break;case"leave":b.scheduleAction("cancel"),e.helper.data("enterResponse",null),e.helper.data("hitMode",null),this._setDndStatus(c,b,e.helper,"out",void 0),j.onDragLeave&&j.onDragLeave(b,c,e,f);break;case"stop":l.removeClass("dynatree-drag-source"),j.onDragStop&&j.onDragStop(b);break;default:throw"Unsupported drag event: "+a}return k},cancelDrag:function(){var a=$.ui.ddmanager.current;a&&a.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){return versionCompare($.ui.version,"1.8")<0?(this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()):void (this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality."))},_create:function(){var a=this.options;a.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(a){a=$.event.fix(a||window.event);var b=$.ui.dynatree.getNode(a.target);return b?b._onFocus(a):!1}this.unbind();var b="click.dynatree dblclick.dynatree";this.options.keyboard&&(b+=" keypress.dynatree keydown.dynatree"),this.element.bind(b,function(a){var b=$.ui.dynatree.getNode(a.target);if(!b){return !0}var c=b.tree,d=c.options;c.logDebug("event(%s): dtnode: %s",a.type,b);var e=c.phase;c.phase="userEvent";try{switch(a.type){case"click":return d.onClick&&d.onClick.call(c,b,a)===!1?!1:b._onClick(a);case"dblclick":return d.onDblClick&&d.onDblClick.call(c,b,a)===!1?!1:b._onDblClick(a);case"keydown":return d.onKeydown&&d.onKeydown.call(c,b,a)===!1?!1:b._onKeydown(a);case"keypress":return d.onKeypress&&d.onKeypress.call(c,b,a)===!1?!1:b._onKeypress(a)}}catch(f){c.logWarning("bind(%o): dtnode: %o, error: %o",a,b,f)}finally{c.phase=e}});var c=this.tree.divTree;c.addEventListener?(c.addEventListener("focus",a,!0),c.addEventListener("blur",a,!0)):c.onfocusin=c.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.extend($.ui.dynatree,{version:"1.2.8",buildType:"release",_DynaTreeClass:DynaTree,_DynaTreeNodeClass:DynaTreeNode,getNode:function(a){if(a instanceof DynaTreeNode){return a}for(void 0!==a.selector&&(a=a[0]);a;){if(a.dtnode){return a.dtnode}a=a.parentNode}return null},getPersistData:DynaTreeStatus._getTreePersistData}),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,revert:!1,autoExpandMS:1000,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",radio:"dynatree-radio",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:void 0},versionCompare($.ui.version,"1.8")<0&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(a,b){var c=$(this).data("ui-draggable")||$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null;return d?(c.offset.click.top=-2,c.offset.click.left=16,d.tree._onDragEvent("start",d,null,a,b,c)):void 0},drag:function(a,b){var c=$(this).data("ui-draggable")||$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=$.ui.dynatree.getNode(a.target);if(a.target&&!f){var g=$(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(g){return}}b.helper.data("dtTargetNode",f),e&&e!==f&&e.tree._onDragEvent("leave",e,d,a,b,c),f&&f.tree.options.dnd.onDrop&&(f===e?f.tree._onDragEvent("over",f,d,a,b,c):f.tree._onDragEvent("enter",f,d,a,b,c))},stop:function(a,b){var c=$(this).data("ui-draggable")||$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=a.type,g="mouseup"==f&&1==a.which;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",e,b.helper.data("dtTargetNode")),g||logMsg("Drag was cancelled"),e&&(g&&e.tree._onDragEvent("drop",e,d,a,b,c),e.tree._onDragEvent("leave",e,d,a,b,c)),d&&d.tree._onDragEvent("stop",d,null,a,b,c)}}),didRegisterDnd=!0)}}(jQuery);
/*
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a((typeof(jQuery)!="undefined")?jQuery:window.Zepto)}}(function(g){var d={};d.fileapi=g("<input type='file'/>").get(0).files!==undefined;d.formdata=window.FormData!==undefined;var f=!!g.fn.prop;g.fn.attr2=function(){if(!f){return this.attr.apply(this,arguments)}var h=this.prop.apply(this,arguments);if((h&&h.jquery)||typeof h==="string"){return h}return this.attr.apply(this,arguments)};g.fn.ajaxSubmit=function(o){if(!this.length){e("ajaxSubmit: skipping submit process - no element selected");return this}var n,J,s,u=this;if(typeof o=="function"){o={success:o}}else{if(o===undefined){o={}}}n=o.type||this.attr2("method");J=o.url||this.attr2("action");s=(typeof J==="string")?g.trim(J):"";s=s||window.location.href||"";if(s){s=(s.match(/^([^#]+)/)||[])[1]}o=g.extend(true,{url:s,success:g.ajaxSettings.success,type:n||g.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},o);var B={};this.trigger("form-pre-serialize",[this,o,B]);if(B.veto){e("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(o.beforeSerialize&&o.beforeSerialize(this,o)===false){e("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var t=o.traditional;if(t===undefined){t=g.ajaxSettings.traditional}var z=[];var L,M=this.formToArray(o.semantic,z);if(o.data){o.extraData=o.data;L=g.param(o.data,t)}if(o.beforeSubmit&&o.beforeSubmit(M,this,o)===false){e("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[M,this,o,B]);if(B.veto){e("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var F=g.param(M,t);if(L){F=(F?(F+"&"+L):L)}if(o.type.toUpperCase()=="GET"){o.url+=(o.url.indexOf("?")>=0?"&":"?")+F;o.data=null}else{o.data=F}var O=[];if(o.resetForm){O.push(function(){u.resetForm()})}if(o.clearForm){O.push(function(){u.clearForm(o.includeHidden)})}if(!o.dataType&&o.target){var p=o.success||function(){};O.push(function(P){var q=o.replaceTarget?"replaceWith":"html";g(o.target)[q](P).each(p,arguments)})}else{if(o.success){O.push(o.success)}}o.success=function(S,P,T){var R=o.context||this;for(var Q=0,q=O.length;Q<q;Q++){O[Q].apply(R,[S,P,T||u,u])}};if(o.error){var G=o.error;o.error=function(R,q,P){var Q=o.context||this;G.apply(Q,[R,q,P,u])}}if(o.complete){var m=o.complete;o.complete=function(Q,q){var P=o.context||this;m.apply(P,[Q,q,u])}}var K=g("input[type=file]:enabled",this).filter(function(){return g(this).val()!==""});var v=K.length>0;var I="multipart/form-data";var E=(u.attr("enctype")==I||u.attr("encoding")==I);var D=d.fileapi&&d.formdata;e("fileAPI :"+D);var w=(v||E)&&!D;var C;if(o.iframe!==false&&(o.iframe||w)){if(o.closeKeepAlive){g.get(o.closeKeepAlive,function(){C=N(M)})}else{C=N(M)}}else{if((v||E)&&D){C=A(M)}else{C=g.ajax(o)}}u.removeData("jqxhr").data("jqxhr",C);for(var H=0;H<z.length;H++){z[H]=null}this.trigger("form-submit-notify",[this,o]);return this;function h(S){var T=g.param(S,o.traditional).split("&");var P=T.length;var q=[];var R,Q;for(R=0;R<P;R++){T[R]=T[R].replace(/\+/g," ");Q=T[R].split("=");q.push([decodeURIComponent(Q[0]),decodeURIComponent(Q[1])])}return q}function A(P){var q=new FormData();for(var Q=0;Q<P.length;Q++){q.append(P[Q].name,P[Q].value)}if(o.extraData){var T=h(o.extraData);for(Q=0;Q<T.length;Q++){if(T[Q]){q.append(T[Q][0],T[Q][1])}}}o.data=null;var S=g.extend(true,{},g.ajaxSettings,o,{contentType:false,processData:false,cache:false,type:n||"POST"});if(o.uploadProgress){S.xhr=function(){var U=g.ajaxSettings.xhr();if(U.upload){U.upload.addEventListener("progress",function(aa){var Z=0;var V=aa.loaded||aa.position;var W=aa.total;if(aa.lengthComputable){Z=Math.ceil(V/W*100)}o.uploadProgress(aa,V,W,Z)},false)}return U}}S.data=null;var R=S.beforeSend;S.beforeSend=function(V,U){if(o.formData){U.data=o.formData}else{U.data=q}if(R){R.call(this,V,U)}};return g.ajax(S)}function N(ap){var T=u[0],S,al,af,an,ai,V,aa,W,Z,aj,am,ad;var at=g.Deferred();at.abort=function(au){W.abort(au)};if(ap){for(al=0;al<z.length;al++){S=g(z[al]);if(f){S.prop("disabled",false)}else{S.removeAttr("disabled")}}}af=g.extend(true,{},g.ajaxSettings,o);af.context=af.context||af;ai="jqFormIO"+(new Date().getTime());if(af.iframeTarget){V=g(af.iframeTarget);aj=V.attr2("name");if(!aj){V.attr2("name",ai)}else{ai=aj}}else{V=g('<iframe name="'+ai+'" src="'+af.iframeSrc+'" />');V.css({position:"absolute",top:"-1000px",left:"-1000px"})}aa=V[0];W={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(au){var av=(au==="timeout"?"timeout":"aborted");e("aborting upload... "+av);this.aborted=1;try{if(aa.contentWindow.document.execCommand){aa.contentWindow.document.execCommand("Stop")}}catch(aw){}V.attr("src",af.iframeSrc);W.error=av;if(af.error){af.error.call(af.context,W,av,au)}if(an){g.event.trigger("ajaxError",[W,af,av])}if(af.complete){af.complete.call(af.context,W,av)}}};an=af.global;if(an&&0===g.active++){g.event.trigger("ajaxStart")}if(an){g.event.trigger("ajaxSend",[W,af])}if(af.beforeSend&&af.beforeSend.call(af.context,W,af)===false){if(af.global){g.active--}at.reject();return at}if(W.aborted){at.reject();return at}Z=T.clk;if(Z){aj=Z.name;if(aj&&!Z.disabled){af.extraData=af.extraData||{};af.extraData[aj]=Z.value;if(Z.type=="image"){af.extraData[aj+".x"]=T.clk_x;af.extraData[aj+".y"]=T.clk_y}}}var ae=1;var ab=2;function ac(aw){var av=null;try{if(aw.contentWindow){av=aw.contentWindow.document}}catch(au){e("cannot get iframe.contentWindow document: "+au)}if(av){return av}try{av=aw.contentDocument?aw.contentDocument:aw.document}catch(au){e("cannot get iframe.contentDocument: "+au);av=aw.document}return av}var R=g("meta[name=csrf-token]").attr("content");var Q=g("meta[name=csrf-param]").attr("content");if(Q&&R){af.extraData=af.extraData||{};af.extraData[Q]=R}function ak(){var aC=u.attr2("target"),ay=u.attr2("action"),aw="multipart/form-data",az=u.attr("enctype")||u.attr("encoding")||aw;T.setAttribute("target",ai);if(!n||/post/i.test(n)){T.setAttribute("method","POST")}if(ay!=af.url){T.setAttribute("action",af.url)}if(!af.skipEncodingOverride&&(!n||/post/i.test(n))){u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(af.timeout){ad=setTimeout(function(){am=true;ah(ae)},af.timeout)}function aA(){try{var aD=ac(aa).readyState;e("state = "+aD);if(aD&&aD.toLowerCase()=="uninitialized"){setTimeout(aA,50)}}catch(aE){e("Server abort: ",aE," (",aE.name,")");ah(ab);if(ad){clearTimeout(ad)}ad=undefined}}var aB=[];try{if(af.extraData){for(var av in af.extraData){if(af.extraData.hasOwnProperty(av)){if(g.isPlainObject(af.extraData[av])&&af.extraData[av].hasOwnProperty("name")&&af.extraData[av].hasOwnProperty("value")){aB.push(g('<input type="hidden" name="'+af.extraData[av].name+'">').val(af.extraData[av].value).appendTo(T)[0])}else{aB.push(g('<input type="hidden" name="'+av+'">').val(af.extraData[av]).appendTo(T)[0])}}}}if(!af.iframeTarget){V.appendTo("body")}if(aa.attachEvent){aa.attachEvent("onload",ah)}else{aa.addEventListener("load",ah,false)}setTimeout(aA,15);try{T.submit()}catch(ax){var au=document.createElement("form").submit;au.apply(T)}}finally{T.setAttribute("action",ay);T.setAttribute("enctype",az);if(aC){T.setAttribute("target",aC)}else{u.removeAttr("target")}g(aB).remove()}}if(af.forceSync){ak()}else{setTimeout(ak,10)}var aq,ar,ao=50,U;function ah(aA){if(W.aborted||U){return}ar=ac(aa);if(!ar){e("cannot access response document");aA=ab}if(aA===ae&&W){W.abort("timeout");at.reject(W,"timeout");return}else{if(aA==ab&&W){W.abort("server abort");at.reject(W,"error","server abort");return}}if(!ar||ar.location.href==af.iframeSrc){if(!am){return}}if(aa.detachEvent){aa.detachEvent("onload",ah)}else{aa.removeEventListener("load",ah,false)}var ay="success",aC;try{if(am){throw"timeout"}var ax=af.dataType=="xml"||ar.XMLDocument||g.isXMLDoc(ar);e("isXml="+ax);if(!ax&&window.opera&&(ar.body===null||!ar.body.innerHTML)){if(--ao){e("requeing onLoad callback, DOM not available");setTimeout(ah,250);return}}var aD=ar.body?ar.body:ar.documentElement;W.responseText=aD?aD.innerHTML:null;W.responseXML=ar.XMLDocument?ar.XMLDocument:ar;if(ax){af.dataType="xml"}W.getResponseHeader=function(aG){var aF={"content-type":af.dataType};return aF[aG.toLowerCase()]};if(aD){W.status=Number(aD.getAttribute("status"))||W.status;W.statusText=aD.getAttribute("statusText")||W.statusText}var au=(af.dataType||"").toLowerCase();var aB=/(json|script|text)/.test(au);if(aB||af.textarea){var az=ar.getElementsByTagName("textarea")[0];if(az){W.responseText=az.value;W.status=Number(az.getAttribute("status"))||W.status;W.statusText=az.getAttribute("statusText")||W.statusText}else{if(aB){var av=ar.getElementsByTagName("pre")[0];var aE=ar.getElementsByTagName("body")[0];if(av){W.responseText=av.textContent?av.textContent:av.innerText}else{if(aE){W.responseText=aE.textContent?aE.textContent:aE.innerText}}}}}else{if(au=="xml"&&!W.responseXML&&W.responseText){W.responseXML=ag(W.responseText)}}try{aq=q(W,au,af)}catch(aw){ay="parsererror";W.error=aC=(aw||ay)}}catch(aw){e("error caught: ",aw);ay="error";W.error=aC=(aw||ay)}if(W.aborted){e("upload aborted");ay=null}if(W.status){ay=(W.status>=200&&W.status<300||W.status===304)?"success":"error"}if(ay==="success"){if(af.success){af.success.call(af.context,aq,"success",W)}at.resolve(W.responseText,"success",W);if(an){g.event.trigger("ajaxSuccess",[W,af])}}else{if(ay){if(aC===undefined){aC=W.statusText}if(af.error){af.error.call(af.context,W,ay,aC)}at.reject(W,"error",aC);if(an){g.event.trigger("ajaxError",[W,af,aC])}}}if(an){g.event.trigger("ajaxComplete",[W,af])}if(an&&!--g.active){g.event.trigger("ajaxStop")}if(af.complete){af.complete.call(af.context,W,ay)}U=true;if(af.timeout){clearTimeout(ad)}setTimeout(function(){if(!af.iframeTarget){V.remove()}else{V.attr("src",af.iframeSrc)}W.responseXML=null},100)}var ag=g.parseXML||function(au,av){if(window.ActiveXObject){av=new ActiveXObject("Microsoft.XMLDOM");av.async="false";av.loadXML(au)}else{av=(new DOMParser()).parseFromString(au,"text/xml")}return(av&&av.documentElement&&av.documentElement.nodeName!="parsererror")?av:null};var P=g.parseJSON||function(au){return window["eval"]("("+au+")")};var q=function(az,ax,aw){var av=az.getResponseHeader("content-type")||"",au=ax==="xml"||!ax&&av.indexOf("xml")>=0,ay=au?az.responseXML:az.responseText;if(au&&ay.documentElement.nodeName==="parsererror"){if(g.error){g.error("parsererror")}}if(aw&&aw.dataFilter){ay=aw.dataFilter(ay,ax)}if(typeof ay==="string"){if(ax==="json"||!ax&&av.indexOf("json")>=0){ay=P(ay)}else{if(ax==="script"||!ax&&av.indexOf("javascript")>=0){g.globalEval(ay)}}}return ay};return at}};g.fn.ajaxForm=function(h){h=h||{};h.delegation=h.delegation&&g.isFunction(g.fn.on);if(!h.delegation&&this.length===0){var m={s:this.selector,c:this.context};if(!g.isReady&&m.s){e("DOM not ready, queuing ajaxForm");g(function(){g(m.s,m.c).ajaxForm(h)});return this}e("terminating; zero elements found by selector"+(g.isReady?"":" (DOM not ready)"));return this}if(h.delegation){g(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,h,b).on("click.form-plugin",this.selector,h,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",h,b).bind("click.form-plugin",h,a)};function b(m){var h=m.data;if(!m.isDefaultPrevented()){m.preventDefault();g(m.target).ajaxSubmit(h)}}function a(p){var o=p.target;var m=g(o);if(!(m.is("[type=submit],[type=image]"))){var h=m.closest("[type=submit]");if(h.length===0){return}o=h[0]}var n=this;n.clk=o;if(o.type=="image"){if(p.offsetX!==undefined){n.clk_x=p.offsetX;n.clk_y=p.offsetY}else{if(typeof g.fn.offset=="function"){var q=m.offset();n.clk_x=p.pageX-q.left;n.clk_y=p.pageY-q.top}else{n.clk_x=p.pageX-o.offsetLeft;n.clk_y=p.pageY-o.offsetTop}}}setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}g.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};g.fn.formToArray=function(D,h){var C=[];if(this.length===0){return C}var p=this[0];var F=this.attr("id");var u=D?p.getElementsByTagName("*"):p.elements;var G;if(u&&!/MSIE [678]/.test(navigator.userAgent)){u=g(u).get()}if(F){G=g(':input[form="'+F+'"]').get();if(G.length){u=(u||[]).concat(G)}}if(!u||!u.length){return C}var w,t,s,E,q,A,o;for(w=0,A=u.length;w<A;w++){q=u[w];s=q.name;if(!s||q.disabled){continue}if(D&&p.clk&&q.type=="image"){if(p.clk==q){C.push({name:s,value:g(q).val(),type:q.type});C.push({name:s+".x",value:p.clk_x},{name:s+".y",value:p.clk_y})}continue}E=g.fieldValue(q,true);if(E&&E.constructor==Array){if(h){h.push(q)}for(t=0,o=E.length;t<o;t++){C.push({name:s,value:E[t]})}}else{if(d.fileapi&&q.type=="file"){if(h){h.push(q)}var m=q.files;if(m.length){for(t=0;t<m.length;t++){C.push({name:s,value:m[t],type:q.type})}}else{C.push({name:s,value:"",type:q.type})}}else{if(E!==null&&typeof E!="undefined"){if(h){h.push(q)}C.push({name:s,value:E,type:q.type,required:q.required})}}}}if(!D&&p.clk){var z=g(p.clk),B=z[0];s=B.name;if(s&&!B.disabled&&B.type=="image"){C.push({name:s,value:z.val()});C.push({name:s+".x",value:p.clk_x},{name:s+".y",value:p.clk_y})}}return C};g.fn.formSerialize=function(h){return g.param(this.formToArray(h))};g.fn.fieldSerialize=function(m){var h=[];this.each(function(){var s=this.name;if(!s){return}var p=g.fieldValue(this,m);if(p&&p.constructor==Array){for(var q=0,o=p.length;q<o;q++){h.push({name:s,value:p[q]})}}else{if(p!==null&&typeof p!="undefined"){h.push({name:this.name,value:p})}}});return g.param(h)};g.fn.fieldValue=function(q){for(var p=[],n=0,h=this.length;n<h;n++){var o=this[n];var m=g.fieldValue(o,q);if(m===null||typeof m=="undefined"||(m.constructor==Array&&!m.length)){continue}if(m.constructor==Array){g.merge(p,m)}else{p.push(m)}}return p};g.fieldValue=function(h,u){var o=h.name,C=h.type,D=h.tagName.toLowerCase();if(u===undefined){u=true}if(u&&(!o||h.disabled||C=="reset"||C=="button"||(C=="checkbox"||C=="radio")&&!h.checked||(C=="submit"||C=="image")&&h.form&&h.form.clk!=h||D=="select"&&h.selectedIndex==-1)){return null}if(D=="select"){var w=h.selectedIndex;if(w<0){return null}var A=[],m=h.options;var q=(C=="select-one");var z=(q?w+1:m.length);for(var p=(q?w:0);p<z;p++){var s=m[p];if(s.selected){var B=s.value;if(!B){B=(s.attributes&&s.attributes.value&&!(s.attributes.value.specified))?s.text:s.value}if(q){return B}A.push(B)}}return A}return g(h).val()};g.fn.clearForm=function(h){return this.each(function(){g("input,select,textarea",this).clearFields(h)})};g.fn.clearFields=g.fn.clearInputs=function(h){var m=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var o=this.type,n=this.tagName.toLowerCase();if(m.test(o)||n=="textarea"){this.value=""}else{if(o=="checkbox"||o=="radio"){this.checked=false}else{if(n=="select"){this.selectedIndex=-1}else{if(o=="file"){if(/MSIE/.test(navigator.userAgent)){g(this).replaceWith(g(this).clone(true))}else{g(this).val("")}}else{if(h){if((h===true&&/hidden/.test(o))||(typeof h=="string"&&g(this).is(h))){this.value=""}}}}}}})};g.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};g.fn.enable=function(h){if(h===undefined){h=true}return this.each(function(){this.disabled=!h})};g.fn.selected=function(h){if(h===undefined){h=true}return this.each(function(){var m=this.type;if(m=="checkbox"||m=="radio"){this.checked=h}else{if(this.tagName.toLowerCase()=="option"){var n=g(this).parent("select");if(h&&n[0]&&n[0].type=="select-one"){n.find("option").selected(false)}this.selected=h}}})};g.fn.ajaxSubmit.debug=false;function e(){if(!g.fn.ajaxSubmit.debug){return}var h="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(h)}else{if(window.opera&&window.opera.postError){window.opera.postError(h)}}}}));(function(a){a.fn.splitter=function(b){b=b||{};return this.each(function(){var u;function n(A){if(d.outline){u=u||t.clone(false).insertAfter(h)}v.css("-webkit-user-select","none");t.addClass(d.activeClass);a('<div class="splitterMask"></div>').insertAfter(t);h._posSplit=h[0][d.pxSplit]-A[d.eventPos];a(document).bind("mousemove",p).bind("mouseup",z)}function p(A){var B=h._posSplit+A[d.eventPos];if(d.outline){B=Math.max(0,Math.min(B,e._DA-t._DA));t.css(d.origin,B)}else{q(B)}}function z(A){a("div.splitterMask").remove();t.removeClass(d.activeClass);var B=h._posSplit+A[d.eventPos];if(d.outline){u.remove();u=null;q(B)}v.css("-webkit-user-select","text");a(document).unbind("mousemove",p).unbind("mouseup",z)}function q(A){A=Math.max(h._min,e._DA-g._max,Math.min(A,h._max,e._DA-t._DA-g._min));t._DA=t[0][d.pxSplit];t.css(d.origin,A).css(d.fixed,e._DF);h.css(d.origin,0).css(d.split,A).css(d.fixed,e._DF);g.css(d.origin,A+t._DA).css(d.split,e._DA-t._DA-A).css(d.fixed,e._DF);if(s()){v.trigger("resize")}}function w(E,D){var B=0;for(var A=1;A<arguments.length;A++){B+=Math.max(parseInt(E.css(arguments[A]))||0,0)}return B}function s(){return true}var o=(b.splitHorizontal?"h":b.splitVertical?"v":b.type)||"v";var d=a.extend({activeClass:"active",pxPerKey:8,tabIndex:0,accessKey:""},{v:{keyLeft:39,keyRight:37,cursor:"e-resize",splitbarClass:"vsplitbar",outlineClass:"voutline",type:"v",eventPos:"pageX",origin:"left",split:"width",pxSplit:"offsetWidth",side1:"Left",side2:"Right",fixed:"height",pxFixed:"offsetHeight",side3:"Top",side4:"Bottom"},h:{keyTop:40,keyBottom:38,cursor:"n-resize",splitbarClass:"hsplitbar",outlineClass:"houtline",type:"h",eventPos:"pageY",origin:"top",split:"height",pxSplit:"offsetHeight",side1:"Top",side2:"Bottom",fixed:"width",pxFixed:"offsetWidth",side3:"Left",side4:"Right"}}[o],b);var e=a(this).css({position:"relative"});var v=a(">*",e[0]).css({position:"absolute","z-index":"1","-moz-outline-style":"none"});var h=a(v[0]);var g=a(v[1]);var f=a("<div>").attr({accessKey:d.accessKey,tabIndex:d.tabIndex}).bind(a.browser.opera?"click":"focus",function(){this.focus();t.addClass(d.activeClass)}).bind("keydown",function(D){var B=D.which||D.keyCode;var A=B==d["key"+d.side1]?1:B==d["key"+d.side2]?-1:0;if(A){q(h[0][d.pxSplit]+A*d.pxPerKey,false)}}).bind("mousedown",n).bind("mouseup",z).bind("blur",function(){t.removeClass(d.activeClass)});var t=a(v[2]||"<div></div>").insertAfter(h).css("z-index","100").append(f).attr({"class":d.splitbarClass,unselectable:"on"}).css({position:"absolute","user-select":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none",top:"0px"});if(/^(auto|default|)$/.test(t.css("cursor"))){t.css("cursor",d.cursor)}t._DA=t[0][d.pxSplit];e._PBF=a.boxModel?w(e,"border"+d.side3+"Width","border"+d.side4+"Width"):0;e._PBA=a.boxModel?w(e,"border"+d.side1+"Width","border"+d.side2+"Width"):0;h._pane=d.side1;g._pane=d.side2;a.each([h,g],function(){this._min=d["min"+this._pane]||w(this,"min-"+d.split);this._max=d["max"+this._pane]||w(this,"max-"+d.split)||9999;this._init=d["size"+this._pane]===true?parseInt(a.curCSS(this[0],d.split)):d["size"+this._pane]});var C=h._init;if(!isNaN(g._init)){C=e[0][d.pxSplit]-e._PBA-g._init-t._DA}if(d.cookie){if(!a.cookie){alert("jQuery.splitter(): jQuery cookie plugin required")}var m=parseInt(a.cookie(d.cookie));if(!isNaN(m)){C=m}a(window).bind("unload",function(){var A=String(t.css(d.origin));a.cookie(d.cookie,A,{expires:d.cookieExpires||365,path:d.cookiePath||document.location.pathname})})}if(isNaN(C)){C=Math.round((e[0][d.pxSplit]-e._PBA-t._DA)/2)}if(d.anchorToWindow){e._hadjust=w(e,"borderTopWidth","borderBottomWidth","marginBottom");e._hmin=Math.max(w(e,"minHeight"),20);a(window).bind("resize",function(){var B=e.offset().top;var A=a(window).height();e.css("height",Math.max(A-B-e._hadjust,e._hmin)+"px");if(s()){e.trigger("resize")}}).trigger("resize")}else{if(d.resizeToWidth&&s()){a(window).bind("resize",function(){e.trigger("resize")})}}e.bind("resize",function(B,A){if(B.target!=this){return}e._DF=e[0][d.pxFixed]-e._PBF;e._DA=e[0][d.pxSplit]-e._PBA;if(e._DF<=0||e._DA<=0){return}q(!isNaN(A)?A:(!(d.sizeRight||d.sizeBottom)?h[0][d.pxSplit]:e._DA-g[0][d.pxSplit]-t._DA))}).trigger("resize",[C])})}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(b,a){"object"===typeof module&&module.exports?module.exports=b.document?a(b):a:b.Highcharts=a(b)})("undefined"!==typeof window?window:this,function(b){var a=function(){var e="undefined"===typeof b?window:b,n=e.document,o=e.navigator&&e.navigator.userAgent||"",g=n&&n.createElementNS&&!!n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,m=/(edge|msie|trident)/i.test(o)&&!e.opera,f=/Firefox/.test(o),q=f&&4>parseInt(o.split("Firefox/")[1],10);return e.Highcharts?e.Highcharts.error(16,!0):{product:"Highstock",version:"6.0.3",deg2rad:2*Math.PI/360,doc:n,hasBidiBug:q,hasTouch:n&&void 0!==n.documentElement.ontouchstart,isMS:m,isWebKit:/AppleWebKit/.test(o),isFirefox:f,isTouchDevice:/(Mobile|Android|Windows Phone)/.test(o),SVG_NS:"http://www.w3.org/2000/svg",chartCount:0,seriesTypes:{},symbolSizes:{},svg:g,win:e,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[]}}();(function(e){e.timers=[];var g=e.charts,h=e.doc,f=e.win;e.error=function(n,m){n=e.isNumber(n)?"Highcharts error #"+n+": www.highcharts.com/errors/"+n:n;if(m){throw Error(n)}f.console&&console.log(n)};e.Fx=function(m,n,o){this.options=n;this.elem=m;this.prop=o};e.Fx.prototype={dSetter:function(){var n=this.paths[0],s=this.paths[1],v=[],m=this.now,o=n.length,u;if(1===m){v=this.toD}else{if(o===s.length&&1>m){for(;o--;){u=parseFloat(n[o]),v[o]=isNaN(u)?s[o]:m*parseFloat(s[o]-u)+u}}else{v=s}}this.elem.attr("d",v,null,!0)},update:function(){var n=this.elem,o=this.prop,q=this.now,m=this.options.step;if(this[o+"Setter"]){this[o+"Setter"]()}else{n.attr?n.element&&n.attr(o,q,null,!0):n.style[o]=q+this.unit}m&&m.call(n,q,this)},run:function(u,s,w){var m=this,o=m.options,v=function(p){return v.stopped?!1:m.step(p)},A=f.requestAnimationFrame||function(p){setTimeout(p,13)},n=function(){e.timers=e.grep(e.timers,function(p){return p()});e.timers.length&&A(n)};u===s?(delete o.curAnim[this.prop],o.complete&&0===e.keys(o.curAnim).length&&o.complete()):(this.startTime=+new Date,this.start=u,this.end=s,this.unit=w,this.now=this.start,this.pos=0,v.elem=this.elem,v.prop=this.prop,v()&&1===e.timers.push(v)&&A(n))},step:function(u){var s=+new Date,w,m=this.options,o=this.elem,v=m.complete,A=m.duration,n=m.curAnim;o.attr&&!o.element?u=!1:u||s>=A+this.startTime?(this.now=this.end,this.pos=1,this.update(),w=n[this.prop]=!0,e.objectEach(n,function(p){!0!==p&&(w=!1)}),w&&v&&v.call(o),u=!1):(this.pos=m.easing((s-this.startTime)/A),this.now=this.start+(this.end-this.start)*this.pos,this.update(),u=!0);return u},initPath:function(o,C,u){function K(p){var m,q;for(L=p.length;L--;){m="M"===p[L]||"L"===p[L],q=/[a-zA-Z]/.test(p[L+3]),m&&q&&p.splice(L+1,0,p[L+1],p[L+2],p[L+1],p[L+2])}}function N(p,m){for(;p.length<G;){p[0]=m[G-p.length];var q=p.slice(0,F);[].splice.apply(p,[0,0].concat(q));A&&(q=p.slice(p.length-F),[].splice.apply(p,[p.length,0].concat(q)),L--)}p[0]="M"}function s(p,m){for(var q=(G-p.length)/F;0<q&&q--;){J=p.slice().splice(p.length/n-F,F*n),J[0]=m[G-F-q*F],E&&(J[F-6]=J[F-2],J[F-5]=J[F-1]),[].splice.apply(p,[p.length/n,0].concat(J)),A&&q--}}C=C||"";var I,B=o.startX,v=o.endX,E=-1<C.indexOf("C"),F=E?7:3,G,J,L;C=C.split(" ");u=u.slice();var A=o.isArea,n=A?2:1,M;E&&(K(C),K(u));if(B&&v){for(L=0;L<B.length;L++){if(B[L]===v[0]){I=L;break}else{if(B[0]===v[v.length-B.length+L]){I=L;M=!0;break}}}void 0===I&&(C=[])}C.length&&e.isNumber(I)&&(G=u.length+I*n*F,M?(N(C,u),s(u,C)):(N(u,C),s(C,u)));return[C,u]}};e.Fx.prototype.fillSetter=e.Fx.prototype.strokeSetter=function(){this.elem.attr(this.prop,e.color(this.start).tweenTo(e.color(this.end),this.pos),null,!0)};e.extend=function(m,n){var o;m||(m={});for(o in n){m[o]=n[o]}return m};e.merge=function(){var q,o=arguments,s,m={},n=function(t,u){"object"!==typeof t&&(t={});e.objectEach(u,function(v,p){!e.isObject(v,!0)||e.isClass(v)||e.isDOMElement(v)?t[p]=u[p]:t[p]=n(t[p]||{},v)});return t};!0===o[0]&&(m=o[1],o=Array.prototype.slice.call(o,2));s=o.length;for(q=0;q<s;q++){m=n(m,o[q])}return m};e.pInt=function(m,n){return parseInt(m,n||10)};e.isString=function(m){return"string"===typeof m};e.isArray=function(m){m=Object.prototype.toString.call(m);return"[object Array]"===m||"[object Array Iterator]"===m};e.isObject=function(n,m){return !!n&&"object"===typeof n&&(!m||!e.isArray(n))};e.isDOMElement=function(m){return e.isObject(m)&&"number"===typeof m.nodeType};e.isClass=function(n){var m=n&&n.constructor;return !(!e.isObject(n,!0)||e.isDOMElement(n)||!m||!m.name||"Object"===m.name)};e.isNumber=function(m){return"number"===typeof m&&!isNaN(m)};e.erase=function(m,n){for(var o=m.length;o--;){if(m[o]===n){m.splice(o,1);break}}};e.defined=function(m){return void 0!==m&&null!==m};e.attr=function(o,n,q){var m;e.isString(n)?e.defined(q)?o.setAttribute(n,q):o&&o.getAttribute&&(m=o.getAttribute(n)):e.defined(n)&&e.isObject(n)&&e.objectEach(n,function(p,s){o.setAttribute(s,p)});return m};e.splat=function(m){return e.isArray(m)?m:[m]};e.syncTimeout=function(m,n,o){if(n){return setTimeout(m,n,o)}m.call(0,o)};e.pick=function(){var n=arguments,o,q,m=n.length;for(o=0;o<m;o++){if(q=n[o],void 0!==q&&null!==q){return q}}};e.css=function(n,m){e.isMS&&!e.svg&&m&&void 0!==m.opacity&&(m.filter="alpha(opacity\x3d"+100*m.opacity+")");e.extend(n.style,m)};e.createElement=function(s,o,v,m,n){s=h.createElement(s);var u=e.css;o&&e.extend(s,o);n&&u(s,{padding:0,border:"none",margin:0});v&&u(s,v);m&&m.appendChild(s);return s};e.extendClass=function(n,m){var o=function(){};o.prototype=new n;e.extend(o.prototype,m);return o};e.pad=function(m,n,o){return Array((n||2)+1-String(m).length).join(o||0)+m};e.relativeLength=function(m,n,o){return/%$/.test(m)?n*parseFloat(m)/100+(o||0):parseFloat(m)};e.wrap=function(n,o,q){var m=n[o];n[o]=function(){var p=Array.prototype.slice.call(arguments),s=arguments,t=this;t.proceed=function(){m.apply(t,arguments.length?arguments:s)};p.unshift(m);p=q.apply(this,p);t.proceed=null;return p}};e.getTZOffset=function(n){var m=e.Date;return 60000*(m.hcGetTimezoneOffset&&m.hcGetTimezoneOffset(n)||m.hcTimezoneOffset||0)};e.dateFormat=function(n,A,s){if(!e.defined(A)||isNaN(A)){return e.defaultOptions.lang.invalidDate||""}n=e.pick(n,"%Y-%m-%d %H:%M:%S");var G=e.Date,I=new G(A-e.getTZOffset(A)),o=I[G.hcGetHours](),E=I[G.hcGetDay](),v=I[G.hcGetDate](),u=I[G.hcGetMonth](),B=I[G.hcGetFullYear](),C=e.defaultOptions.lang,D=C.weekdays,F=C.shortWeekdays,H=e.pad,G=e.extend({a:F?F[E]:D[E].substr(0,3),A:D[E],d:H(v),e:H(v,2," "),w:E,b:C.shortMonths[u],B:C.months[u],m:H(u+1),y:B.toString().substr(2,2),Y:B,H:H(o),k:o,I:H(o%12||12),l:o%12||12,M:H(I[G.hcGetMinutes]()),p:12>o?"AM":"PM",P:12>o?"am":"pm",S:H(I.getSeconds()),L:H(Math.round(A%1000),3)},e.dateFormats);e.objectEach(G,function(p,m){for(;-1!==n.indexOf("%"+m);){n=n.replace("%"+m,"function"===typeof p?p(A):p)}});return s?n.substr(0,1).toUpperCase()+n.substr(1):n};e.formatSingle=function(o,n){var q=/\.([0-9])/,m=e.defaultOptions.lang;/f$/.test(o)?(q=(q=o.match(q))?q[1]:-1,null!==n&&(n=e.numberFormat(n,q,m.decimalPoint,-1<o.indexOf(",")?m.thousandsSep:""))):n=e.dateFormat(o,n);return n};e.format=function(n,w){for(var s="{",C=!1,D,o,B,v,u=[],A;n;){s=n.indexOf(s);if(-1===s){break}D=n.slice(0,s);if(C){D=D.split(":");o=D.shift().split(".");v=o.length;A=w;for(B=0;B<v;B++){A&&(A=A[o[B]])}D.length&&(A=e.formatSingle(D.join(":"),A));u.push(A)}else{u.push(D)}n=n.slice(s+1);s=(C=!C)?"}":"{"}u.push(n);return u.join("")};e.getMagnitude=function(m){return Math.pow(10,Math.floor(Math.log(m)/Math.LN10))};e.normalizeTickInterval=function(s,o,v,m,n){var u,w=s;v=e.pick(v,1);u=s/v;o||(o=n?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===m&&(1===v?o=e.grep(o,function(p){return 0===p%1}):0.1>=v&&(o=[1/v])));for(m=0;m<o.length&&!(w=o[m],n&&w*v>=s||!n&&u<=(o[m]+(o[m+1]||o[m]))/2);m++){}return w=e.correctFloat(w*v,-Math.round(Math.log(0.001)/Math.LN10))};e.stableSort=function(n,q){var s=n.length,m,o;for(o=0;o<s;o++){n[o].safeI=o}n.sort(function(p,u){m=q(p,u);return 0===m?p.safeI-u.safeI:m});for(o=0;o<s;o++){delete n[o].safeI}};e.arrayMin=function(m){for(var n=m.length,o=m[0];n--;){m[n]<o&&(o=m[n])}return o};e.arrayMax=function(m){for(var n=m.length,o=m[0];n--;){m[n]>o&&(o=m[n])}return o};e.destroyObjectProperties=function(n,m){e.objectEach(n,function(p,o){p&&p!==m&&p.destroy&&p.destroy();delete n[o]})};e.discardElement=function(n){var m=e.garbageBin;m||(m=e.createElement("div"));n&&m.appendChild(n);m.innerHTML=""};e.correctFloat=function(m,n){return parseFloat(m.toPrecision(n||14))};e.setAnimation=function(n,m){m.renderer.globalAnimation=e.pick(n,m.options.chart.animation,!0)};e.animObject=function(m){return e.isObject(m)?e.merge(m):{duration:m?500:0}};e.timeUnits={millisecond:1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000,month:2419200000,year:31449600000};e.numberFormat=function(n,w,s,B){n=+n||0;w=+w;var C=e.defaultOptions.lang,o=(n.toString().split(".")[1]||"").split("e")[0].length,A,v,u=n.toString().split("e");-1===w?w=Math.min(o,20):e.isNumber(w)||(w=2);v=(Math.abs(u[1]?u[0]:n)+Math.pow(10,-Math.max(w,o)-1)).toFixed(w);o=String(e.pInt(v));A=3<o.length?o.length%3:0;s=e.pick(s,C.decimalPoint);B=e.pick(B,C.thousandsSep);n=(0>n?"-":"")+(A?o.substr(0,A)+B:"");n+=o.substr(A).replace(/(\d{3})(?=\d)/g,"$1"+B);w&&(n+=s+v.slice(-w));u[1]&&(n+="e"+u[1]);return n};Math.easeInOutSine=function(m){return -0.5*(Math.cos(Math.PI*m)-1)};e.getStyle=function(n,m,o){if("width"===m){return Math.min(n.offsetWidth,n.scrollWidth)-e.getStyle(n,"padding-left")-e.getStyle(n,"padding-right")}if("height"===m){return Math.min(n.offsetHeight,n.scrollHeight)-e.getStyle(n,"padding-top")-e.getStyle(n,"padding-bottom")}f.getComputedStyle||e.error(27,!0);if(n=f.getComputedStyle(n,void 0)){n=n.getPropertyValue(m),e.pick(o,"opacity"!==m)&&(n=e.pInt(n))}return n};e.inArray=function(n,m){return(e.indexOfPolyfill||Array.prototype.indexOf).call(m,n)};e.grep=function(n,m){return(e.filterPolyfill||Array.prototype.filter).call(n,m)};e.find=Array.prototype.find?function(m,n){return m.find(n)}:function(n,o){var q,m=n.length;for(q=0;q<m;q++){if(o(n[q],q)){return n[q]}}};e.map=function(n,q){for(var s=[],m=0,o=n.length;m<o;m++){s[m]=q.call(n[m],n[m],m,n)}return s};e.keys=function(m){return(e.keysPolyfill||Object.keys).call(void 0,m)};e.reduce=function(n,m,o){return(e.reducePolyfill||Array.prototype.reduce).call(n,m,o)};e.offset=function(m){var n=h.documentElement;m=m.parentElement?m.getBoundingClientRect():{top:0,left:0};return{top:m.top+(f.pageYOffset||n.scrollTop)-(n.clientTop||0),left:m.left+(f.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}};e.stop=function(n,m){for(var o=e.timers.length;o--;){e.timers[o].elem!==n||m&&m!==e.timers[o].prop||(e.timers[o].stopped=!0)}};e.each=function(n,m,o){return(e.forEachPolyfill||Array.prototype.forEach).call(n,m,o)};e.objectEach=function(n,o,q){for(var m in n){n.hasOwnProperty(m)&&o.call(q,n[m],m,n)}};e.addEvent=function(s,o,v){var m,n,u=s.addEventListener||e.addEventListenerPolyfill;s.hcEvents&&!s.hasOwnProperty("hcEvents")&&(n={},e.objectEach(s.hcEvents,function(p,q){n[q]=p.slice(0)}),s.hcEvents=n);m=s.hcEvents=s.hcEvents||{};u&&u.call(s,o,v,!1);m[o]||(m[o]=[]);m[o].push(v);return function(){e.removeEvent(s,o,v)}};e.removeEvent=function(u,s,w){function m(p,q){var t=u.removeEventListener||e.removeEventListenerPolyfill;t&&t.call(u,p,q,!1)}function o(){var p,q;u.nodeName&&(s?(p={},p[s]=!0):p=A,e.objectEach(p,function(t,z){if(A[z]){for(q=A[z].length;q--;){m(z,A[z][q])}}}))}var v,A=u.hcEvents,n;A&&(s?(v=A[s]||[],w?(n=e.inArray(w,v),-1<n&&(v.splice(n,1),A[s]=v),m(s,w)):(o(),A[s]=[])):(o(),u.hcEvents={}))};e.fireEvent=function(s,o,v,m){var n;n=s.hcEvents;var u,w;v=v||{};if(h.createEvent&&(s.dispatchEvent||s.fireEvent)){n=h.createEvent("Events"),n.initEvent(o,!0,!0),e.extend(n,v),s.dispatchEvent?s.dispatchEvent(n):s.fireEvent(o,n)}else{if(n){for(n=n[o]||[],u=n.length,v.target||e.extend(v,{preventDefault:function(){v.defaultPrevented=!0},target:s,type:o}),o=0;o<u;o++){(w=n[o])&&!1===w.call(s,v)&&v.preventDefault()}}}m&&!v.defaultPrevented&&m(v)};e.animate=function(u,s,w){var m,o="",v,A,n;e.isObject(w)||(n=arguments,w={duration:n[2],easing:n[3],complete:n[4]});e.isNumber(w.duration)||(w.duration=400);w.easing="function"===typeof w.easing?w.easing:Math[w.easing]||Math.easeInOutSine;w.curAnim=e.merge(s);e.objectEach(s,function(p,q){e.stop(u,q);A=new e.Fx(u,w,q);v=null;"d"===q?(A.paths=A.initPath(u,u.d,s.d),A.toD=s.d,m=0,v=1):u.attr?m=u.attr(q):(m=parseFloat(e.getStyle(u,q))||0,"opacity"!==q&&(o="px"));v||(v=p);v&&v.match&&v.match("px")&&(v=v.replace(/px/g,""));A.run(m,v,o)})};e.seriesType=function(s,o,v,m,n){var u=e.getOptions(),w=e.seriesTypes;u.plotOptions[s]=e.merge(u.plotOptions[o],v);w[s]=e.extendClass(w[o]||function(){},m);w[s].prototype.type=s;n&&(w[s].prototype.pointClass=e.extendClass(e.Point,n));return w[s]};e.uniqueKey=function(){var m=Math.random().toString(36).substring(2,9),n=0;return function(){return"highcharts-"+m+"-"+n++}}();f.jQuery&&(f.jQuery.fn.highcharts=function(){var m=[].slice.call(arguments);if(this[0]){return m[0]?(new (e[e.isString(m[0])?m.shift():"Chart"])(this[0],m[0],m[1]),this):g[e.attr(this[0],"data-highcharts-chart")]}})})(a);(function(e){var n=e.each,o=e.isNumber,g=e.map,m=e.merge,f=e.pInt;e.Color=function(h){if(!(this instanceof e.Color)){return new e.Color(h)}this.init(h)};e.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(h){return[f(h[1]),f(h[2]),f(h[3]),parseFloat(h[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(h){return[f(h[1]),f(h[2]),f(h[3]),1]}}],names:{none:"rgba(255,255,255,0)",white:"#ffffff",black:"#000000"},init:function(w){var u,s,v,A;if((this.input=w=this.names[w&&w.toLowerCase?w.toLowerCase():""]||w)&&w.stops){this.stops=g(w.stops,function(h){return new e.Color(h[1])})}else{if(w&&w.charAt&&"#"===w.charAt()&&(u=w.length,w=parseInt(w.substr(1),16),7===u?s=[(w&16711680)>>16,(w&65280)>>8,w&255,1]:4===u&&(s=[(w&3840)>>4|(w&3840)>>8,(w&240)>>4|w&240,(w&15)<<4|w&15,1])),!s){for(v=this.parsers.length;v--&&!s;){A=this.parsers[v],(u=A.regex.exec(w))&&(s=A.parse(u))}}}this.rgba=s||[]},get:function(h){var v=this.input,s=this.rgba,u;this.stops?(u=m(v),u.stops=[].concat(u.stops),n(this.stops,function(q,p){u.stops[p]=[u.stops[p][0],q.get(h)]})):u=s&&o(s[0])?"rgb"===h||!h&&1===s[3]?"rgb("+s[0]+","+s[1]+","+s[2]+")":"a"===h?s[3]:"rgba("+s.join(",")+")":v;return u},brighten:function(h){var s,q=this.rgba;if(this.stops){n(this.stops,function(p){p.brighten(h)})}else{if(o(h)&&0!==h){for(s=0;3>s;s++){q[s]+=f(255*h),0>q[s]&&(q[s]=0),255<q[s]&&(q[s]=255)}}}return this},setOpacity:function(h){this.rgba[3]=h;return this},tweenTo:function(p,u){var s=this.rgba,v=p.rgba;v.length&&s&&s.length?(p=1!==v[3]||1!==s[3],u=(p?"rgba(":"rgb(")+Math.round(v[0]+(s[0]-v[0])*(1-u))+","+Math.round(v[1]+(s[1]-v[1])*(1-u))+","+Math.round(v[2]+(s[2]-v[2])*(1-u))+(p?","+(v[3]+(s[3]-v[3])*(1-u)):"")+")"):u=p.input||"none";return u}};e.color=function(p){return new e.Color(p)}})(a);(function(aA){var W,Z,V=aA.addEvent,al=aA.animate,at=aA.attr,an=aA.charts,ag=aA.color,ak=aA.css,am=aA.createElement,ae=aA.defined,ar=aA.deg2rad,ap=aA.destroyObjectProperties,av=aA.doc,aw=aA.each,ay=aA.extend,az=aA.erase,ah=aA.grep,aq=aA.hasTouch,aa=aA.inArray,U=aA.isArray,ab=aA.isFirefox,S=aA.isMS,au=aA.isObject,af=aA.isString,T=aA.isWebKit,ad=aA.merge,ax=aA.noop,ai=aA.objectEach,ac=aA.pick,aj=aA.pInt,ao=aA.removeEvent,s=aA.stop,Q=aA.svg,I=aA.SVG_NS,L=aA.symbolSizes,o=aA.win;W=aA.SVGElement=function(){return this};ay(W.prototype,{opacity:1,SVG_NS:I,textProps:"direction fontSize fontWeight fontFamily fontStyle color lineHeight width textAlign textDecoration textOverflow textOutline".split(" "),init:function(e,f){this.element="span"===f?am(f):av.createElementNS(this.SVG_NS,f);this.renderer=e},animate:function(f,g,e){g=aA.animObject(ac(g,this.renderer.globalAnimation,!0));0!==g.duration?(e&&(g.complete=e),al(this,f,g)):(this.attr(f,null,e),g.step&&g.step.call(this));return this},colorGradient:function(J,C,K){var m=this.renderer,G,E,v,p,H,A,t,z,e,F,h=[],q;J.radialGradient?E="radialGradient":J.linearGradient&&(E="linearGradient");E&&(v=J[E],H=m.gradients,t=J.stops,F=K.radialReference,U(v)&&(J[E]=v={x1:v[0],y1:v[1],x2:v[2],y2:v[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===E&&F&&!ae(v.gradientUnits)&&(p=v,v=ad(v,m.getRadialAttr(F,p),{gradientUnits:"userSpaceOnUse"})),ai(v,function(f,g){"id"!==g&&h.push(g,f)}),ai(t,function(f){h.push(f)}),h=h.join(","),H[h]?F=H[h].attr("id"):(v.id=F=aA.uniqueKey(),H[h]=A=m.createElement(E).attr(v).add(m.defs),A.radAttr=p,A.stops=[],aw(t,function(f){0===f[1].indexOf("rgba")?(G=aA.color(f[1]),z=G.get("rgb"),e=G.get("a")):(z=f[1],e=1);f=m.createElement("stop").attr({offset:f[0],"stop-color":z,"stop-opacity":e}).add(A);A.stops.push(f)})),q="url("+m.url+"#"+F+")",K.setAttribute(C,q),K.gradient=h,J.toString=function(){return q})},applyTextOutline:function(h){var p=this.element,f,t,q,m,e;-1!==h.indexOf("contrast")&&(h=h.replace(/contrast/g,this.renderer.getContrast(p.style.fill)));h=h.split(" ");t=h[h.length-1];if((q=h[0])&&"none"!==q&&aA.svg){this.fakeTS=!0;h=[].slice.call(p.getElementsByTagName("tspan"));this.ySetter=this.xSetter;q=q.replace(/(^[\d\.]+)(.*?)$/g,function(g,n,u){return 2*n+u});for(e=h.length;e--;){f=h[e],"highcharts-text-outline"===f.getAttribute("class")&&az(h,p.removeChild(f))}m=p.firstChild;aw(h,function(g,n){0===n&&(g.setAttribute("x",p.getAttribute("x")),n=p.getAttribute("y"),g.setAttribute("y",n||0),null===n&&p.setAttribute("y",0));g=g.cloneNode(1);at(g,{"class":"highcharts-text-outline",fill:t,stroke:t,"stroke-width":q,"stroke-linejoin":"round"});p.insertBefore(g,m)})}},attr:function(w,q,A,f){var z,v=this.element,t,m=this,p,h;"string"===typeof w&&void 0!==q&&(z=w,w={},w[z]=q);"string"===typeof w?m=(this[w+"Getter"]||this._defaultGetter).call(this,w,v):(ai(w,function(e,g){p=!1;f||s(this,g);this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)$/.test(g)&&(t||(this.symbolAttr(w),t=!0),p=!0);!this.rotation||"x"!==g&&"y"!==g||(this.doTransform=!0);p||(h=this[g+"Setter"]||this._defaultSetter,h.call(this,e,g,v),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(g)&&this.updateShadows(g,e,h))},this),this.afterSetters());A&&A();return m},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(e,h,g){for(var f=this.shadows,m=f.length;m--;){g.call(f[m],"height"===e?Math.max(h-(f[m].cutHeight||0),0):"d"===e?this.d:h,e,f[m])}},addClass:function(e,g){var f=this.attr("class")||"";-1===f.indexOf(e)&&(g||(e=(f+(f?" ":"")+e).replace("  "," ")),this.attr("class",e));return this},hasClass:function(e){return -1!==aa(e,(this.attr("class")||"").split(" "))},removeClass:function(e){return this.attr("class",(this.attr("class")||"").replace(e,""))},symbolAttr:function(e){var f=this;aw("x y r start end width height innerR anchorX anchorY".split(" "),function(g){f[g]=ac(e[g],f[g])});f.attr({d:f.renderer.symbols[f.symbolName](f.x,f.y,f.width,f.height,f)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":"none")},crisp:function(e,h){var g=this,f={},m;h=h||e.strokeWidth||0;m=Math.round(h)%2/2;e.x=Math.floor(e.x||g.x||0)+m;e.y=Math.floor(e.y||g.y||0)+m;e.width=Math.floor((e.width||g.width||0)-2*m);e.height=Math.floor((e.height||g.height||0)-2*m);ae(e.strokeWidth)&&(e.strokeWidth=h);ai(e,function(n,p){g[p]!==n&&(g[p]=f[p]=n)});return f},css:function(v){var t=this.styles,h={},w=this.element,u,p="",q,m=!t,f=["textOutline","textOverflow","width"];v&&v.color&&(v.fill=v.color);t&&ai(v,function(e,g){e!==t[g]&&(h[g]=e,m=!0)});m&&(t&&(v=ay(t,h)),u=this.textWidth=v&&v.width&&"auto"!==v.width&&"text"===w.nodeName.toLowerCase()&&aj(v.width),this.styles=v,u&&!Q&&this.renderer.forExport&&delete v.width,S&&!Q?ak(this.element,v):(q=function(e,g){return"-"+g.toLowerCase()},ai(v,function(e,g){-1===aa(g,f)&&(p+=g.replace(/([A-Z])/g,q)+":"+e+";")}),p&&at(w,"style",p)),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),v&&v.textOutline&&this.applyTextOutline(v.textOutline)));return this},strokeWidth:function(){return this["stroke-width"]||0},on:function(e,g){var f=this,h=f.element;aq&&"click"===e?(h.ontouchstart=function(m){f.touchEventFired=Date.now();m.preventDefault();g.call(h,m)},h.onclick=function(m){(-1===o.navigator.userAgent.indexOf("Android")||1100<Date.now()-(f.touchEventFired||0))&&g.call(h,m)}):h["on"+e]=g;return this},setRadialReference:function(e){var f=this.renderer.gradients[this.element.gradient];this.element.radialReference=e;f&&f.radAttr&&f.animate(this.renderer.getRadialAttr(e,f.radAttr));return this},translate:function(e,f){return this.attr({translateX:e,translateY:f})},invert:function(e){this.inverted=e;this.updateTransform();return this},updateTransform:function(){var f=this.translateX||0,q=this.translateY||0,m=this.scaleX,w=this.scaleY,e=this.inverted,t=this.rotation,p=this.matrix,h=this.element;e&&(f+=this.width,q+=this.height);f=["translate("+f+","+q+")"];ae(p)&&f.push("matrix("+p.join(",")+")");e?f.push("rotate(90) scale(-1,1)"):t&&f.push("rotate("+t+" "+ac(this.rotationOriginX,h.getAttribute("x"),0)+" "+ac(this.rotationOriginY,h.getAttribute("y")||0)+")");(ae(m)||ae(w))&&f.push("scale("+ac(m,1)+" "+ac(w,1)+")");f.length&&h.setAttribute("transform",f.join(" "))},toFront:function(){var e=this.element;e.parentNode.appendChild(e);return this},align:function(w,q,B){var f,z,t,m,A={};z=this.renderer;t=z.alignedObjects;var p,h;if(w){if(this.alignOptions=w,this.alignByTranslate=q,!B||af(B)){this.alignTo=f=B||"renderer",az(t,this),t.push(this),B=null}}else{w=this.alignOptions,q=this.alignByTranslate,f=this.alignTo}B=ac(B,z[f],z);f=w.align;z=w.verticalAlign;t=(B.x||0)+(w.x||0);m=(B.y||0)+(w.y||0);"right"===f?p=1:"center"===f&&(p=2);p&&(t+=(B.width-(w.width||0))/p);A[q?"translateX":"x"]=Math.round(t);"bottom"===z?h=1:"middle"===z&&(h=2);h&&(m+=(B.height-(w.height||0))/h);A[q?"translateY":"y"]=Math.round(m);this[this.placed?"animate":"attr"](A);this.placed=!0;this.alignAttr=A;return this},getBBox:function(D,B){var H,h=this.renderer,C,F=this.element,q=this.styles,G,m=this.textStr,e,E=h.cache,z=h.cacheKeys,t;B=ac(B,this.rotation);C=B*ar;G=q&&q.fontSize;ae(m)&&(t=m.toString(),-1===t.indexOf("\x3c")&&(t=t.replace(/[0-9]/g,"0")),t+=["",B||0,G,q&&q.width,q&&q.textOverflow].join());t&&!D&&(H=E[t]);if(!H){if(F.namespaceURI===this.SVG_NS||h.forExport){try{(e=this.fakeTS&&function(f){aw(F.querySelectorAll(".highcharts-text-outline"),function(g){g.style.display=f})})&&e("none"),H=F.getBBox?ay({},F.getBBox()):{width:F.offsetWidth,height:F.offsetHeight},e&&e("")}catch(p){}if(!H||0>H.width){H={width:0,height:0}}}else{H=this.htmlGetBBox()}h.isSVG&&(D=H.width,h=H.height,q&&"11px"===q.fontSize&&17===Math.round(h)&&(H.height=h=14),B&&(H.width=Math.abs(h*Math.sin(C))+Math.abs(D*Math.cos(C)),H.height=Math.abs(h*Math.cos(C))+Math.abs(D*Math.sin(C))));if(t&&0<H.height){for(;250<z.length;){delete E[z.shift()]}E[t]||z.push(t);E[t]=H}}return H},show:function(e){return this.attr({visibility:e?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(e){var f=this;f.animate({opacity:0},{duration:e||150,complete:function(){f.attr({y:-9999})}})},add:function(e){var g=this.renderer,f=this.element,h;e&&(this.parentGroup=e);this.parentInverted=e&&e.inverted;void 0!==this.textStr&&g.buildText(this);this.added=!0;if(!e||e.handleZ||this.zIndex){h=this.zIndexSetter()}h||(e?e.element:g.box).appendChild(f);if(this.onAdd){this.onAdd()}return this},safeRemoveChild:function(e){var f=e.parentNode;f&&f.removeChild(e)},destroy:function(){var e=this,g=e.element||{},f=e.renderer.isSVG&&"SPAN"===g.nodeName&&e.parentGroup,h=g.ownerSVGElement;g.onclick=g.onmouseout=g.onmouseover=g.onmousemove=g.point=null;s(e);e.clipPath&&h&&(aw(h.querySelectorAll("[clip-path],[CLIP-PATH]"),function(m){m.getAttribute("clip-path").match(RegExp('[("]#'+e.clipPath.element.id+'[)"]'))&&m.removeAttribute("clip-path")}),e.clipPath=e.clipPath.destroy());if(e.stops){for(h=0;h<e.stops.length;h++){e.stops[h]=e.stops[h].destroy()}e.stops=null}e.safeRemoveChild(g);for(e.destroyShadows();f&&f.div&&0===f.div.childNodes.length;){g=f.parentGroup,e.safeRemoveChild(f.div),delete f.div,f=g}e.alignTo&&az(e.renderer.alignedObjects,e);ai(e,function(n,m){delete e[m]});return null},shadow:function(z,q,C){var f=[],w,t,m=this.element,B,A,p,h;if(!z){this.destroyShadows()}else{if(!this.shadows){A=ac(z.width,3);p=(z.opacity||0.15)/A;h=this.parentInverted?"(-1,-1)":"("+ac(z.offsetX,1)+", "+ac(z.offsetY,1)+")";for(w=1;w<=A;w++){t=m.cloneNode(0),B=2*A+1-2*w,at(t,{isShadow:"true",stroke:z.color||"#000000","stroke-opacity":p*w,"stroke-width":B,transform:"translate"+h,fill:"none"}),C&&(at(t,"height",Math.max(at(t,"height")-B,0)),t.cutHeight=B),q?q.element.appendChild(t):m.parentNode&&m.parentNode.insertBefore(t,m),f.push(t)}this.shadows=f}}return this},destroyShadows:function(){aw(this.shadows||[],function(e){this.safeRemoveChild(e)},this);this.shadows=void 0},xGetter:function(e){"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy"));return this._defaultGetter(e)},_defaultGetter:function(e){e=ac(this[e],this.element?this.element.getAttribute(e):null,0);/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e));return e},dSetter:function(e,g,f){e&&e.join&&(e=e.join(" "));/(NaN| {2}|^$)/.test(e)&&(e="M 0 0");this[g]!==e&&(f.setAttribute(g,e),this[g]=e)},dashstyleSetter:function(e){var f,g=this["stroke-width"];"inherit"===g&&(g=1);if(e=e&&e.toLowerCase()){e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(f=e.length;f--;){e[f]=aj(e[f])*g}e=e.join(",").replace(/NaN/g,"none");this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,g,f){this[g]=e;f.setAttribute(g,e)},titleSetter:function(e){var f=this.element.getElementsByTagName("title")[0];f||(f=av.createElementNS(this.SVG_NS,"title"),this.element.appendChild(f));f.firstChild&&f.removeChild(f.firstChild);f.appendChild(av.createTextNode(String(ac(e),"").replace(/<[^>]*>/g,"")))},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,g,f){"string"===typeof e?f.setAttribute(g,e):e&&this.colorGradient(e,g,f)},visibilitySetter:function(e,g,f){"inherit"===e?f.removeAttribute(g):this[g]!==e&&f.setAttribute(g,e);this[g]=e},zIndexSetter:function(z,t){var h=this.renderer,w=this.parentGroup,u=(w||h).element||h.box,p,B=this.element,q,m,h=u===h.box;p=this.added;var f;ae(z)&&(B.zIndex=z,z=+z,this[t]===z&&(p=!1),this[t]=z);if(p){(z=this.zIndex)&&w&&(w.handleZ=!0);t=u.childNodes;for(f=t.length-1;0<=f&&!q;f--){if(w=t[f],p=w.zIndex,m=!ae(p),w!==B){if(0>z&&m&&!h&&!f){u.insertBefore(B,t[f]),q=!0}else{if(aj(p)<=z||m&&(!ae(z)||0<=z)){u.insertBefore(B,t[f+1]||null),q=!0}}}}q||(u.insertBefore(B,t[h?3:0]||null),q=!0)}return q},_defaultSetter:function(e,g,f){f.setAttribute(g,e)}});W.prototype.yGetter=W.prototype.xGetter;W.prototype.translateXSetter=W.prototype.translateYSetter=W.prototype.rotationSetter=W.prototype.verticalAlignSetter=W.prototype.rotationOriginXSetter=W.prototype.rotationOriginYSetter=W.prototype.scaleXSetter=W.prototype.scaleYSetter=W.prototype.matrixSetter=function(e,f){this[f]=e;this.doTransform=!0};W.prototype["stroke-widthSetter"]=W.prototype.strokeSetter=function(e,g,f){this[g]=e;this.stroke&&this["stroke-width"]?(W.prototype.fillSetter.call(this,this.stroke,"stroke",f),f.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===g&&0===e&&this.hasStroke&&(f.removeAttribute("stroke"),this.hasStroke=!1)};Z=aA.SVGRenderer=function(){this.init.apply(this,arguments)};ay(Z.prototype,{Element:W,SVG_NS:I,init:function(f,q,m,w,e,t){var p;w=this.createElement("svg").attr({version:"1.1","class":"highcharts-root"}).css(this.getStyle(w));p=w.element;f.appendChild(p);at(f,"dir","ltr");-1===f.innerHTML.indexOf("xmlns")&&at(p,"xmlns",this.SVG_NS);this.isSVG=!0;this.box=p;this.boxWrapper=w;this.alignedObjects=[];this.url=(ab||T)&&av.getElementsByTagName("base").length?o.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(av.createTextNode("Created with Highstock 6.0.3"));this.defs=this.createElement("defs").add();this.allowHTML=t;this.forExport=e;this.gradients={};this.cache={};this.cacheKeys=[];this.imgCount=0;this.setSize(q,m,!1);var h;ab&&f.getBoundingClientRect&&(q=function(){ak(f,{left:0,top:0});h=f.getBoundingClientRect();ak(f,{left:Math.ceil(h.left)-h.left+"px",top:Math.ceil(h.top)-h.top+"px"})},q(),this.unSubPixelFix=V(o,"resize",q))},getStyle:function(e){return this.style=ay({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},setStyle:function(e){this.boxWrapper.css(this.getStyle(e))},isHidden:function(){return !this.boxWrapper.getBBox().width},destroy:function(){var e=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();ap(this.gradients||{});this.gradients=null;e&&(this.defs=e.destroy());this.unSubPixelFix&&this.unSubPixelFix();return this.alignedObjects=null},createElement:function(e){var f=new this.Element;f.init(this,e);return f},draw:ax,getRadialAttr:function(e,f){return{cx:e[0]-e[2]/2+f.cx*e[2],cy:e[1]-e[2]/2+f.cy*e[2],r:f.r*e[2]}},getSpanWidth:function(e,g){var f=e.getBBox(!0).width;!Q&&this.forExport&&(f=this.measureSpanWidth(g.firstChild.data,e.styles));return f},applyEllipsis:function(B,t,D,h){var z=B.rotation,w=D,p,C=0,q=D.length,m=function(e){t.removeChild(t.firstChild);e&&t.appendChild(av.createTextNode(e))},f;B.rotation=0;w=this.getSpanWidth(B,t);if(f=w>h){for(;C<=q;){p=Math.ceil((C+q)/2),w=D.substring(0,p)+"\u2026",m(w),w=this.getSpanWidth(B,t),C===q?C=q+1:w>h?q=p-1:C=p}0===q&&m("")}B.rotation=z;return f},escapes:{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;","'":"\x26#39;",'"':"\x26quot"},buildText:function(aL){var aI=aL.element,aD=this,aK=aD.forExport,aJ=ac(aL.textStr,"").toString(),aH=-1!==aJ.indexOf("\x3c"),aF=aI.childNodes,aC,E,w,G,aG=at(aI,"x"),aE=aL.styles,M=aL.textWidth,h=aE&&aE.lineHeight,f=aE&&aE.textOutline,F=aE&&"ellipsis"===aE.textOverflow,v=aE&&"nowrap"===aE.whiteSpace,O=aE&&aE.fontSize,e,aB,u=aF.length,aE=M&&!aL.added&&this.box,t=function(m){var g;g=/(px|em)$/.test(m&&m.style.fontSize)?m.style.fontSize:O||aD.style.fontSize||12;return h?aj(h):aD.fontMetrics(g,m.getAttribute("style")?m:aI).h},B=function(g){ai(aD.escapes,function(n,m){g=g.replace(new RegExp(n,"g"),m)});return g};e=[aJ,F,v,h,f,O,M].join();if(e!==aL.textCache){for(aL.textCache=e;u--;){aI.removeChild(aF[u])}aH||f||F||M||-1!==aJ.indexOf(" ")?(aC=/<.*class="([^"]+)".*>/,E=/<.*style="([^"]+)".*>/,w=/<.*href="([^"]+)".*>/,aE&&aE.appendChild(aI),aJ=aH?aJ.replace(/<(b|strong)>/g,'\x3cspan style\x3d"font-weight:bold"\x3e').replace(/<(i|em)>/g,'\x3cspan style\x3d"font-style:italic"\x3e').replace(/<a/g,"\x3cspan").replace(/<\/(b|strong|i|em|a)>/g,"\x3c/span\x3e").split(/<br.*?>/g):[aJ],aJ=ah(aJ,function(g){return""!==g}),aw(aJ,function(n,q){var p,m=0;n=n.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||\x3cspan").replace(/<\/span>/g,"\x3c/span\x3e|||");p=n.split("|||");aw(p,function(R){if(""!==R||1===p.length){var J={},A=av.createElementNS(aD.SVG_NS,"tspan"),K,g;aC.test(R)&&(K=R.match(aC)[1],at(A,"class",K));E.test(R)&&(g=R.match(E)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),at(A,"style",g));w.test(R)&&!aK&&(at(A,"onclick",'location.href\x3d"'+R.match(w)[1]+'"'),at(A,"class","highcharts-anchor"),ak(A,{cursor:"pointer"}));R=B(R.replace(/<[a-zA-Z\/](.|\n)*?>/g,"")||" ");if(" "!==R){A.appendChild(av.createTextNode(R));m?J.dx=0:q&&null!==aG&&(J.x=aG);at(A,J);aI.appendChild(A);!m&&aB&&(!Q&&aK&&ak(A,{display:"block"}),at(A,"dy",t(A)));if(M){J=R.replace(/([^\^])-/g,"$1- ").split(" ");K=1<p.length||q||1<J.length&&!v;var z=[],H,D=t(A),C=aL.rotation;for(F&&(G=aD.applyEllipsis(aL,A,R,M));!F&&K&&(J.length||z.length);){aL.rotation=0,H=aD.getSpanWidth(aL,A),R=H>M,void 0===G&&(G=R),R&&1!==J.length?(A.removeChild(A.firstChild),z.unshift(J.pop())):(J=z,z=[],J.length&&!v&&(A=av.createElementNS(I,"tspan"),at(A,{dy:D,x:aG}),g&&at(A,"style",g),aI.appendChild(A)),H>M&&(M=H)),J.length&&A.appendChild(av.createTextNode(J.join(" ").replace(/- /g,"-")))}aL.rotation=C}m++}}});aB=aB||aI.childNodes.length}),G&&aL.attr("title",aL.textStr),aE&&aE.removeChild(aI),f&&aL.applyTextOutline&&aL.applyTextOutline(f)):aI.appendChild(av.createTextNode(B(aJ)))}},getContrast:function(e){e=ag(e).rgba;return 510<e[0]+e[1]+e[2]?"#000000":"#FFFFFF"},button:function(G,E,N,p,F,t,K,A,q){var J=this.label(G,E,N,q,null,null,null,null,"button"),C=0;J.attr(ad({padding:8,r:2},F));var z,H,m,h;F=ad({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},F);z=F.style;delete F.style;t=ad(F,{fill:"#e6e6e6"},t);H=t.style;delete t.style;K=ad(F,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},K);m=K.style;delete K.style;A=ad(F,{style:{color:"#cccccc"}},A);h=A.style;delete A.style;V(J.element,S?"mouseover":"mouseenter",function(){3!==C&&J.setState(1)});V(J.element,S?"mouseout":"mouseleave",function(){3!==C&&J.setState(C)});J.setState=function(e){1!==e&&(J.state=C=e);J.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e||0]);J.attr([F,t,K,A][e||0]).css([z,H,m,h][e||0])};J.attr(F).css(ay({cursor:"default"},z));return J.on("click",function(e){3!==C&&p.call(J,e)})},crispLine:function(e,f){e[1]===e[4]&&(e[1]=e[4]=Math.round(e[1])-f%2/2);e[2]===e[5]&&(e[2]=e[5]=Math.round(e[2])+f%2/2);return e},path:function(e){var f={fill:"none"};U(e)?f.d=e:au(e)&&ay(f,e);return this.createElement("path").attr(f)},circle:function(e,g,f){e=au(e)?e:{x:e,y:g,r:f};g=this.createElement("circle");g.xSetter=g.ySetter=function(h,n,m){m.setAttribute("c"+n,h)};return g.attr(e)},arc:function(f,h,g,p,e,m){au(f)?(p=f,h=p.y,g=p.r,f=p.x):p={innerR:p,start:e,end:m};f=this.symbol("arc",f,h,g,g,p);f.r=g;return f},rect:function(f,m,h,q,e,p){e=au(f)?f.r:e;var g=this.createElement("rect");f=au(f)?f:void 0===f?{}:{x:f,y:m,width:Math.max(h,0),height:Math.max(q,0)};void 0!==p&&(f.strokeWidth=p,f=g.crisp(f));f.fill="none";e&&(f.r=e);g.rSetter=function(n,v,t){at(t,{rx:n,ry:n})};return g.attr(f)},setSize:function(f,h,g){var m=this.alignedObjects,e=m.length;this.width=f;this.height=h;for(this.boxWrapper.animate({width:f,height:h},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:ac(g,!0)?void 0:0});e--;){m[e].align()}},g:function(e){var f=this.createElement("g");return e?f.attr({"class":"highcharts-"+e}):f},image:function(f,p,h,q,e){var m={preserveAspectRatio:"none"};1<arguments.length&&ay(m,{x:p,y:h,width:q,height:e});m=this.createElement("image").attr(m);m.element.setAttributeNS?m.element.setAttributeNS("http://www.w3.org/1999/xlink","href",f):m.element.setAttribute("hc-svg-href",f);return m},symbol:function(G,C,K,h,F,z){var J=this,q,f=/^url\((.*?)\)$/,H=f.test(G),B=!H&&(this.symbols[G]?G:"circle"),e=B&&this.symbols[B],E=ae(C)&&e&&e.call(this.symbols,Math.round(C),Math.round(K),h,F,z),t,p;e?(q=this.path(E),q.attr("fill","none"),ay(q,{symbolName:B,x:C,y:K,width:h,height:F}),z&&ay(q,z)):H&&(t=G.match(f)[1],q=this.image(t),q.imgwidth=ac(L[t]&&L[t].width,z&&z.width),q.imgheight=ac(L[t]&&L[t].height,z&&z.height),p=function(){q.attr({width:q.width,height:q.height})},aw(["width","height"],function(g){q[g+"Setter"]=function(v,A){var w={},D=this["img"+A],m="width"===A?"translateX":"translateY";this[A]=v;ae(D)&&(this.element&&this.element.setAttribute(A,D),this.alignByTranslate||(w[m]=((this[A]||0)-D)/2,this.attr(w)))}}),ae(C)&&q.attr({x:C,y:K}),q.isImg=!0,ae(q.imgwidth)&&ae(q.imgheight)?p():(q.attr({width:0,height:0}),am("img",{onload:function(){var g=an[J.chartIndex];0===this.width&&(ak(this,{position:"absolute",top:"-999em"}),av.body.appendChild(this));L[t]={width:this.width,height:this.height};q.imgwidth=this.width;q.imgheight=this.height;q.element&&p();this.parentNode&&this.parentNode.removeChild(this);J.imgCount--;if(!J.imgCount&&g&&g.onload){g.onload()}},src:t}),this.imgCount++));return q},symbols:{circle:function(e,g,f,h){return this.arc(e+f/2,g+h/2,f/2,h/2,{start:0,end:2*Math.PI,open:!1})},square:function(e,g,f,h){return["M",e,g,"L",e+f,g,e+f,g+h,e,g+h,"Z"]},triangle:function(e,g,f,h){return["M",e+f/2,g,"L",e+f,g+h,e,g+h,"Z"]},"triangle-down":function(e,g,f,h){return["M",e,g,"L",e+f,g,e+f/2,g+h,"Z"]},diamond:function(e,g,f,h){return["M",e+f/2,g,"L",e+f,g+h/2,e+f/2,g+h,e,g+h/2,"Z"]},arc:function(C,t,F,h,B){var p=B.start,z=B.r||F,E=B.r||h||F,m=B.end-0.001;F=B.innerR;h=ac(B.open,0.001>Math.abs(B.end-B.start-2*Math.PI));var q=Math.cos(p),f=Math.sin(p),D=Math.cos(m),m=Math.sin(m);B=0.001>B.end-p-Math.PI?0:1;z=["M",C+z*q,t+E*f,"A",z,E,0,B,1,C+z*D,t+E*m];ae(F)&&z.push(h?"M":"L",C+F*D,t+F*m,"A",F,F,0,B,0,C+F*q,t+F*f);z.push(h?"":"Z");return z},callout:function(t,m,z,e,q){var h=Math.min(q&&q.r||0,z,e),p=h+6,w=q&&q.anchorX;q=q&&q.anchorY;var f;f=["M",t+h,m,"L",t+z-h,m,"C",t+z,m,t+z,m,t+z,m+h,"L",t+z,m+e-h,"C",t+z,m+e,t+z,m+e,t+z-h,m+e,"L",t+h,m+e,"C",t,m+e,t,m+e,t,m+e-h,"L",t,m+h,"C",t,m,t,m,t+h,m];w&&w>z?q>m+p&&q<m+e-p?f.splice(13,3,"L",t+z,q-6,t+z+6,q,t+z,q+6,t+z,m+e-h):f.splice(13,3,"L",t+z,e/2,w,q,t+z,e/2,t+z,m+e-h):w&&0>w?q>m+p&&q<m+e-p?f.splice(33,3,"L",t,q+6,t-6,q,t,q-6,t,m+h):f.splice(33,3,"L",t,e/2,w,q,t,e/2,t,m+h):q&&q>e&&w>t+p&&w<t+z-p?f.splice(23,3,"L",w+6,m+e,w,m+e+6,w-6,m+e,t+h,m+e):q&&0>q&&w>t+p&&w<t+z-p&&f.splice(3,3,"L",w-6,m,w,m-6,w+6,m,z-h,m);return f}},clipRect:function(m,f,q,e){var h=aA.uniqueKey(),p=this.createElement("clipPath").attr({id:h}).add(this.defs);m=this.rect(m,f,q,e,0).add(p);m.id=h;m.clipPath=p;m.count=0;return m},text:function(f,h,g,m){var e={};if(m&&(this.allowHTML||!this.forExport)){return this.html(f,h,g)}e.x=Math.round(h||0);g&&(e.y=Math.round(g));if(f||0===f){e.text=f}f=this.createElement("text").attr(e);m||(f.xSetter=function(q,w,t){var A=t.getElementsByTagName("tspan"),p,v=t.getAttribute(w),z;for(z=0;z<A.length;z++){p=A[z],p.getAttribute(w)===v&&p.setAttribute(w,q)}t.setAttribute(w,q)});return f},fontMetrics:function(e,f){e=e||f&&f.style&&f.style.fontSize||this.style&&this.style.fontSize;e=/px/.test(e)?aj(e):/em/.test(e)?parseFloat(e)*(f?this.fontMetrics(null,f.parentNode).f:16):12;f=24>e?e+3:Math.round(1.2*e);return{h:f,b:Math.round(0.8*f),f:e}},rotCorr:function(e,g,f){var h=e;g&&f&&(h=Math.max(h*Math.cos(g*ar),4));return{x:-e/3*Math.sin(g*ar),y:h}},label:function(aX,aJ,aY,aV,aI,aS,aH,G,aW){var aL=this,aP=aL.g("button"!==aW&&"label"),aT=aP.text=aL.text("",0,0,aH).attr({zIndex:1}),aD,aR,aN=0,F=3,A=0,aG,aK,aF,aC,E,aO={},z,aU,aQ=/^url\((.*?)\)$/.test(aV),aB=aQ,aE,n,aM,e;aW&&aP.addClass("highcharts-"+aW);aB=aQ;aE=function(){return(z||0)%2/2};n=function(){var f=aT.element.style,g={};aR=(void 0===aG||void 0===aK||E)&&ae(aT.textStr)&&aT.getBBox();aP.width=(aG||aR.width||0)+2*F+A;aP.height=(aK||aR.height||0)+2*F;aU=F+aL.fontMetrics(f&&f.fontSize,aT).b;aB&&(aD||(aP.box=aD=aL.symbols[aV]||aQ?aL.symbol(aV):aL.rect(),aD.addClass(("button"===aW?"":"highcharts-label-box")+(aW?" highcharts-"+aW+"-box":"")),aD.add(aP),f=aE(),g.x=f,g.y=(G?-aU:0)+f),g.width=Math.round(aP.width),g.height=Math.round(aP.height),aD.attr(ay(g,aO)),aO={})};aM=function(){var f=A+F,g;g=G?0:aU;ae(aG)&&aR&&("center"===E||"right"===E)&&(f+={center:0.5,right:1}[E]*(aG-aR.width));if(f!==aT.x||g!==aT.y){aT.attr("x",f),void 0!==g&&aT.attr("y",g)}aT.x=f;aT.y=g};e=function(f,g){aD?aD.attr(f,g):aO[f]=g};aP.onAdd=function(){aT.add(aP);aP.attr({text:aX||0===aX?aX:"",x:aJ,y:aY});aD&&ae(aI)&&aP.attr({anchorX:aI,anchorY:aS})};aP.widthSetter=function(f){aG=aA.isNumber(f)?f:null};aP.heightSetter=function(f){aK=f};aP["text-alignSetter"]=function(f){E=f};aP.paddingSetter=function(f){ae(f)&&f!==F&&(F=aP.padding=f,aM())};aP.paddingLeftSetter=function(f){ae(f)&&f!==A&&(A=f,aM())};aP.alignSetter=function(f){f={left:0,center:0.5,right:1}[f];f!==aN&&(aN=f,aR&&aP.attr({x:aF}))};aP.textSetter=function(f){void 0!==f&&aT.textSetter(f);n();aM()};aP["stroke-widthSetter"]=function(f,g){f&&(aB=!0);z=this["stroke-width"]=f;e(g,f)};aP.strokeSetter=aP.fillSetter=aP.rSetter=function(f,g){"r"!==g&&("fill"===g&&f&&(aB=!0),aP[g]=f);e(g,f)};aP.anchorXSetter=function(f,g){aI=aP.anchorX=f;e(g,Math.round(f)-aE()-aF)};aP.anchorYSetter=function(f,g){aS=aP.anchorY=f;e(g,f-aC)};aP.xSetter=function(f){aP.x=f;aN&&(f-=aN*((aG||aR.width)+2*F));aF=Math.round(f);aP.attr("translateX",aF)};aP.ySetter=function(f){aC=aP.y=Math.round(f);aP.attr("translateY",aC)};var aZ=aP.css;return ay(aP,{css:function(f){if(f){var g={};f=ad(f);aw(aP.textProps,function(h){void 0!==f[h]&&(g[h]=f[h],delete f[h])});aT.css(g)}return aZ.call(aP,f)},getBBox:function(){return{width:aR.width+2*F,height:aR.height+2*F,x:aR.x-F,y:aR.y-F}},shadow:function(f){f&&(n(),aD&&aD.shadow(f));return aP},destroy:function(){ao(aP.element,"mouseenter");ao(aP.element,"mouseleave");aT&&(aT=aT.destroy());aD&&(aD=aD.destroy());W.prototype.destroy.call(aP);aP=aL=n=aM=e=null}})}});aA.Renderer=Z})(a);(function(C){var J=C.attr,K=C.createElement,H=C.css,g=C.defined,v=C.each,o=C.extend,D=C.isFirefox,I=C.isMS,n=C.isWebKit,B=C.pick,u=C.pInt,s=C.SVGRenderer,w=C.win,A=C.wrap;o(C.SVGElement.prototype,{htmlCss:function(f){var e=this.element;if(e=f&&"SPAN"===e.tagName&&f.width){delete f.width,this.textWidth=e,this.updateTransform()}f&&"ellipsis"===f.textOverflow&&(f.whiteSpace="nowrap",f.overflow="hidden");this.styles=o(this.styles,f);H(this.element,f);return this},htmlGetBBox:function(){var e=this.element;return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var P=this.renderer,N=this.element,G=this.translateX||0,z=this.translateY||0,F=this.x||0,q=this.y||0,h=this.textAlign||"left",Q={left:0,center:0.5,right:1}[h],E=this.styles;H(N,{marginLeft:G,marginTop:z});this.shadows&&v(this.shadows,function(e){H(e,{marginLeft:G+1,marginTop:z+1})});this.inverted&&v(N.childNodes,function(e){P.invertChild(e,N)});if("SPAN"===N.tagName){var M=this.rotation,O=u(this.textWidth),p=E&&E.whiteSpace,L=[M,h,N.innerHTML,this.textWidth,this.textAlign].join();L!==this.cTT&&(E=P.fontMetrics(N.style.fontSize).b,g(M)&&this.setSpanRotation(M,Q,E),H(N,{width:"",whiteSpace:p||"nowrap"}),N.offsetWidth>O&&/[ \-]/.test(N.textContent||N.innerText)&&H(N,{width:O+"px",display:"block",whiteSpace:p||"normal"}),this.getSpanCorrection(N.offsetWidth,E,Q,M,h));H(N,{left:F+(this.xCorr||0)+"px",top:q+(this.yCorr||0)+"px"});n&&(E=N.offsetHeight);this.cTT=L}}else{this.alignOnAdd=!0}},setSpanRotation:function(m,f,p){var q={},h=this.renderer.getTransformKey();q[h]=q.transform="rotate("+m+"deg)";q[h+(D?"Origin":"-origin")]=q.transformOrigin=100*f+"% "+p+"px";H(this.element,q)},getSpanCorrection:function(h,f,m){this.xCorr=-h*m;this.yCorr=-f}});o(s.prototype,{getTransformKey:function(){return I&&!/Edge/.test(w.navigator.userAgent)?"-ms-transform":n?"-webkit-transform":D?"MozTransform":w.opera?"-o-transform":""},html:function(t,h,p){var G=this.createElement("span"),F=G.element,z=G.renderer,e=z.isSVG,E=function(m,f){v(["opacity","visibility"],function(q){A(m,q+"Setter",function(L,N,M,O){L.call(this,N,M,O);f[M]=N})})};G.textSetter=function(f){f!==F.innerHTML&&delete this.bBox;this.textStr=f;F.innerHTML=B(f,"");G.htmlUpdateTransform()};e&&E(G,G.element.style);G.xSetter=G.ySetter=G.alignSetter=G.rotationSetter=function(m,f){"align"===f&&(f="textAlign");G[f]=m;G.htmlUpdateTransform()};G.attr({text:t,x:Math.round(h),y:Math.round(p)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"});F.style.whiteSpace="nowrap";G.css=G.htmlCss;e&&(G.add=function(m){var f,q=z.box.parentNode,L=[];if(this.parentGroup=m){if(f=m.div,!f){for(;m;){L.push(m),m=m.parentGroup}v(L.reverse(),function(N){function P(R,Q){N[Q]=R;I?M[z.getTransformKey()]="translate("+(N.x||N.translateX)+"px,"+(N.y||N.translateY)+"px)":"translateX"===Q?M.left=R+"px":M.top=R+"px";N.doTransform=!0}var M,O=J(N.element,"class");O&&(O={className:O});f=N.div=N.div||K("div",O,{position:"absolute",left:(N.translateX||0)+"px",top:(N.translateY||0)+"px",display:N.display,opacity:N.opacity,pointerEvents:N.styles&&N.styles.pointerEvents},f||q);M=f.style;o(N,{classSetter:function(Q){this.element.setAttribute("class",Q);f.className=Q},on:function(){L[0].div&&G.on.apply({element:L[0].div},arguments);return N},translateXSetter:P,translateYSetter:P});E(N,M)})}}else{f=q}f.appendChild(F);G.added=!0;G.alignOnAdd&&G.htmlUpdateTransform();return G});return G}})})(a);(function(f){function o(){var h=f.defaultOptions.global,p=e.moment;if(h.timezone){if(p){return function(t){return -p.tz(t,h.timezone).utcOffset()}}f.error(25)}return h.useUTC&&h.getTimezoneOffset}function q(){var v=f.defaultOptions.global,A,w=v.useUTC,u=w?"getUTC":"get",p=w?"setUTC":"set",z="Minutes Hours Day Date Month FullYear".split(" "),B=z.concat(["Milliseconds","Seconds"]);f.Date=A=v.Date||e.Date;A.hcTimezoneOffset=w&&v.timezoneOffset;A.hcGetTimezoneOffset=o();A.hcMakeTime=function(C,h,F,t,E,D){var G;w?(G=A.UTC.apply(0,arguments),G+=n(G)):G=(new A(C,h,s(F,1),s(t,0),s(E,0),s(D,0))).getTime();return G};for(v=0;v<z.length;v++){A["hcGet"+z[v]]=u+z[v]}for(v=0;v<B.length;v++){A["hcSet"+B[v]]=p+B[v]}}var m=f.color,n=f.getTZOffset,g=f.merge,s=f.pick,e=f.win;f.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0},chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:f.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:f.isTouchDevice?25:10,backgroundColor:m("#f7f7f7").setOpacity(0.85).get(),borderWidth:1,headerFormat:'\x3cspan style\x3d"font-size: 10px"\x3e{point.key}\x3c/span\x3e\x3cbr/\x3e',pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e {series.name}: \x3cb\x3e{point.y}\x3c/b\x3e\x3cbr/\x3e',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}};f.setOptions=function(h){f.defaultOptions=g(!0,f.defaultOptions,h);q();return f.defaultOptions};f.getOptions=function(){return f.defaultOptions};f.defaultPlotOptions=f.defaultOptions.plotOptions;q()})(a);(function(f){var o=f.correctFloat,q=f.defined,m=f.destroyObjectProperties,n=f.isNumber,g=f.merge,s=f.pick,e=f.deg2rad;f.Tick=function(p,v,u,t){this.axis=p;this.pos=v;this.type=u||"";this.isNewLabel=this.isNew=!0;u||t||this.addLabel()};f.Tick.prototype={addLabel:function(){var E=this.axis,h=E.options,C=E.chart,u=E.categories,p=E.names,v=this.pos,A=h.labels,B=E.tickPositions,D=v===B[0],F=v===B[B.length-1],p=u?s(u[v],p[v],v):v,u=this.label,B=B.info,t;E.isDatetimeAxis&&B&&(t=h.dateTimeLabelFormats[B.higherRanks[v]||B.unitName]);this.isFirst=D;this.isLast=F;h=E.labelFormatter.call({axis:E,chart:C,isFirst:D,isLast:F,dateTimeLabelFormat:t,value:E.isLog?o(E.lin2log(p)):p,pos:v});q(u)?u&&u.attr({text:h}):(this.labelLength=(this.label=u=q(h)&&A.enabled?C.renderer.text(h,0,0,A.useHTML).css(g(A.style)).add(E.labelGroup):null)&&u.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(L){var O=this.axis,B=L.x,A=O.chart.chartWidth,v=O.chart.spacing,E=s(O.labelLeft,Math.min(O.pos,v[3])),v=s(O.labelRight,Math.max(O.pos+O.len,A-v[1])),F=this.label,G=this.rotation,J={left:0,center:0.5,right:1}[O.labelAlign],M=F.getBBox().width,z=O.getSlotWidth(),p=z,N=1,u,I={};if(G){0>G&&B-J*M<E?u=Math.round(B/Math.cos(G*e)-E):0<G&&B+J*M>v&&(u=Math.round((A-B)/Math.cos(G*e)))}else{if(A=B+(1-J)*M,B-J*M<E?p=L.x+p*(1-J)-E:A>v&&(p=v-L.x+p*J,N=-1),p=Math.min(z,p),p<z&&"center"===O.labelAlign&&(L.x+=N*(z-p-J*(z-Math.min(M,p)))),M>p||O.autoRotation&&(F.styles||{}).width){u=p}}u&&(I.width=u,(O.options.labels.style||{}).textOverflow||(I.textOverflow="ellipsis"),F.css(I))},getPosition:function(u,w,B,v){var t=this.axis,z=t.chart,A=v&&z.oldChartHeight||z.chartHeight;return{x:u?t.translate(w+B,null,null,v)+t.transB:t.left+t.offset+(t.opposite?(v&&z.oldChartWidth||z.chartWidth)-t.right-t.left:0),y:u?A-t.bottom+t.offset-(t.opposite?t.height:0):A-t.translate(w+B,null,null,v)-t.transB}},getLabelPosition:function(K,E,v,B,z,F,G,I){var J=this.axis,L=J.transA,A=J.reversed,t=J.staggerLines,M=J.tickRotCorr||{x:0,y:0},u=z.y;q(u)||(u=0===J.side?v.rotation?-8:-v.getBBox().height:2===J.side?M.y+8:Math.cos(v.rotation*e)*(M.y-v.getBBox(!1,0).height/2));K=K+z.x+M.x-(F&&B?F*L*(A?-1:1):0);E=E+u-(F&&!B?F*L*(A?1:-1):0);t&&(v=G/(I||1)%t,J.opposite&&(v=t-v-1),E+=J.labelOffset/t*v);return{x:K,y:Math.round(E)}},getMarkPath:function(u,w,A,v,t,z){return z.crispLine(["M",u,w,"L",u+(t?0:-A),w+(t?A:0)],v)},renderGridLine:function(K,E,v){var B=this.axis,z=B.options,F=this.gridLine,G={},I=this.pos,J=this.type,L=B.tickmarkOffset,A=B.chart.renderer,t=J?J+"Grid":"grid",M=z[t+"LineWidth"],u=z[t+"LineColor"],z=z[t+"LineDashStyle"];F||(G.stroke=u,G["stroke-width"]=M,z&&(G.dashstyle=z),J||(G.zIndex=1),K&&(G.opacity=0),this.gridLine=F=A.path().attr(G).addClass("highcharts-"+(J?J+"-":"")+"grid-line").add(B.gridGroup));if(!K&&F&&(K=B.getPlotLinePath(I+L,F.strokeWidth()*v,K,!0))){F[this.isNew?"attr":"animate"]({d:K,opacity:E})}},renderMark:function(I,A,F){var v=this.axis,t=v.options,B=v.chart.renderer,C=this.type,E=C?C+"Tick":"tick",G=v.tickSize(E),J=this.mark,u=!J,p=I.x;I=I.y;var K=s(t[E+"Width"],!C&&v.isXAxis?1:0),t=t[E+"Color"];G&&(v.opposite&&(G[0]=-G[0]),u&&(this.mark=J=B.path().addClass("highcharts-"+(C?C+"-":"")+"tick").add(v.axisGroup),J.attr({stroke:t,"stroke-width":K})),J[u?"attr":"animate"]({d:this.getMarkPath(p,I,G[0],J.strokeWidth()*F,v.horiz,B),opacity:A}))},renderLabel:function(I,A,F,v){var t=this.axis,B=t.horiz,C=t.options,E=this.label,G=C.labels,J=G.step,u=t.tickmarkOffset,p=!0,K=I.x;I=I.y;E&&n(K)&&(E.xy=I=this.getLabelPosition(K,I,E,B,G,u,v,J),this.isFirst&&!this.isLast&&!s(C.showFirstLabel,1)||this.isLast&&!this.isFirst&&!s(C.showLastLabel,1)?p=!1:!B||t.isRadial||G.step||G.rotation||A||0===F||this.handleOverflow(I),J&&v%J&&(p=!1),p&&n(I.y)?(I.opacity=F,E[this.isNewLabel?"attr":"animate"](I),this.isNewLabel=!1):(E.attr("y",-9999),this.isNewLabel=!0))},render:function(t,v,B){var u=this.axis,p=u.horiz,w=this.getPosition(p,this.pos,u.tickmarkOffset,v),A=w.x,C=w.y,u=p&&A===u.pos+u.len||!p&&C===u.pos?-1:1;B=s(B,1);this.isActive=!0;this.renderGridLine(v,B,u);this.renderMark(w,B,u);this.renderLabel(w,v,B,t);this.isNew=!1},destroy:function(){m(this,this.axis)}}})(a);var d=function(al){var P=al.addEvent,Q=al.animObject,O=al.arrayMax,U=al.arrayMin,ae=al.color,aa=al.correctFloat,I=al.defaultOptions,R=al.defined,W=al.deg2rad,o=al.destroyObjectProperties,ad=al.each,ab=al.extend,ag=al.fireEvent,ah=al.format,aj=al.getMagnitude,ak=al.grep,M=al.inArray,ac=al.isArray,S=al.isNumber,L=al.isString,T=al.merge,n=al.normalizeTickInterval,af=al.objectEach,u=al.pick,s=al.removeEvent,Z=al.splat,ai=al.syncTimeout,N=al.Tick,V=function(){this.init.apply(this,arguments)};al.extend(V.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},maxPadding:0.01,minorTickLength:2,minorTickPosition:"outside",minPadding:0.01,startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:0.05,minPadding:0.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{allowOverlap:!1,enabled:!1,formatter:function(){return al.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(f,h){var g=h.isX,p=this;p.chart=f;p.horiz=f.inverted&&!p.isZAxis?!g:g;p.isXAxis=g;p.coll=p.coll||(g?"xAxis":"yAxis");p.opposite=h.opposite;p.side=h.side||(p.horiz?p.opposite?0:2:p.opposite?1:3);p.setOptions(h);var e=this.options,m=e.type;p.labelFormatter=e.labels.formatter||p.defaultLabelFormatter;p.userOptions=h;p.minPixelPadding=0;p.reversed=e.reversed;p.visible=!1!==e.visible;p.zoomEnabled=!1!==e.zoomEnabled;p.hasNames="category"===m||!0===e.categories;p.categories=e.categories||p.hasNames;p.names=p.names||[];p.plotLinesAndBandsGroups={};p.isLog="logarithmic"===m;p.isDatetimeAxis="datetime"===m;p.positiveValuesOnly=p.isLog&&!p.allowNegativeLog;p.isLinked=R(e.linkedTo);p.ticks={};p.labelEdge=[];p.minorTicks={};p.plotLinesAndBands=[];p.alternateBands={};p.len=0;p.minRange=p.userMinRange=e.minRange||e.maxZoom;p.range=e.range;p.offset=e.offset||0;p.stacks={};p.oldStacks={};p.stacksTouched=0;p.max=null;p.min=null;p.crosshair=u(e.crosshair,Z(f.options.tooltip.crosshairs)[g?0:1],!1);h=p.options.events;-1===M(p,f.axes)&&(g?f.axes.splice(f.xAxis.length,0,p):f.axes.push(p),f[p.coll].push(p));p.series=p.series||[];f.inverted&&!p.isZAxis&&g&&void 0===p.reversed&&(p.reversed=!0);af(h,function(q,t){P(p,t,q)});p.lin2log=e.linearToLogConverter||p.lin2log;p.isLog&&(p.val2lin=p.log2lin,p.lin2val=p.lin2log)},setOptions:function(e){this.options=T(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],T(I[this.coll],e))},defaultLabelFormatter:function(){var p=this.axis,f=this.value,t=p.categories,q=this.dateTimeLabelFormat,m=I.lang,B=m.numericSymbols,m=m.numericSymbolMagnitude||1000,h=B&&B.length,e,z=p.options.labels.format,p=p.isLog?Math.abs(f):p.tickInterval;if(z){e=ah(z,this)}else{if(t){e=f}else{if(q){e=al.dateFormat(q,f)}else{if(h&&1000<=p){for(;h--&&void 0===e;){t=Math.pow(m,h+1),p>=t&&0===10*f%t&&null!==B[h]&&0!==f&&(e=al.numberFormat(f/t,-1)+B[h])}}}}}void 0===e&&(e=10000<=Math.abs(f)?al.numberFormat(f,-1):al.numberFormat(f,-1,void 0,""));return e},getSeriesExtremes:function(){var e=this,f=e.chart;e.hasVisibleSeries=!1;e.dataMin=e.dataMax=e.threshold=null;e.softThreshold=!e.isXAxis;e.buildStacks&&e.buildStacks();ad(e.series,function(q){if(q.visible||!f.options.chart.ignoreHiddenSeries){var h=q.options,p=h.threshold,m;e.hasVisibleSeries=!0;e.positiveValuesOnly&&0>=p&&(p=null);if(e.isXAxis){h=q.xData,h.length&&(q=U(h),m=O(h),S(q)||q instanceof Date||(h=ak(h,S),q=U(h)),e.dataMin=Math.min(u(e.dataMin,h[0],q),q),e.dataMax=Math.max(u(e.dataMax,h[0],m),m))}else{if(q.getExtremes(),m=q.dataMax,q=q.dataMin,R(q)&&R(m)&&(e.dataMin=Math.min(u(e.dataMin,q),q),e.dataMax=Math.max(u(e.dataMax,m),m)),R(p)&&(e.threshold=p),!h.softThreshold||e.positiveValuesOnly){e.softThreshold=!1}}}})},translate:function(B,t,z,w,p,C){var h=this.linkedParent||this,D=1,q=0,m=w?h.oldTransA:h.transA;w=w?h.oldMin:h.min;var f=h.minPixelPadding;p=(h.isOrdinal||h.isBroken||h.isLog&&p)&&h.lin2val;m||(m=h.transA);z&&(D*=-1,q=h.len);h.reversed&&(D*=-1,q-=D*(h.sector||h.len));t?(B=(B*D+q-f)/m+w,p&&(B=h.lin2val(B))):(p&&(B=h.val2lin(B)),B=S(w)?D*(B-w)*m+q+D*f+(S(C)?m*C:0):void 0);return B},toPixels:function(e,f){return this.translate(e,!1,!this.horiz,null,!0)+(f?0:this.pos)},toValue:function(e,f){return this.translate(e-(f?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(G,D,F,E,t){var p=this.chart,K=this.left,J=this.top,C,q,m=F&&p.oldChartHeight||p.chartHeight,H=F&&p.oldChartWidth||p.chartWidth,z;C=this.transB;var h=function(e,f,g){if(e<f||e>g){E?e=Math.min(Math.max(f,e),g):z=!0}return e};t=u(t,this.translate(G,null,null,F));G=F=Math.round(t+C);C=q=Math.round(m-t-C);S(t)?this.horiz?(C=J,q=m-this.bottom,G=F=h(G,K,K+this.width)):(G=K,F=H-this.right,C=q=h(C,J,J+this.height)):(z=!0,E=!1);return z&&!E?null:p.renderer.crispLine(["M",G,C,"L",F,q],D||1)},getLinearTickPositions:function(f,p,e){var t,h=aa(Math.floor(p/f)*f);e=aa(Math.ceil(e/f)*f);var q=[],m;aa(h+f)===h&&(m=20);if(this.single){return[p]}for(p=h;p<=e;){q.push(p);p=aa(p+f,m);if(p===t){break}t=p}return q},getMinorTickInterval:function(){var e=this.options;return !0===e.minorTicks?u(e.minorTickInterval,"auto"):!1===e.minorTicks?null:e.minorTickInterval},getMinorTickPositions:function(){var m=this,w=m.options,f=m.tickPositions,z=m.minorTickInterval,q=[],p=m.pointRangePadding||0,t=m.min-p,p=m.max+p,h=p-t;if(h&&h/z<m.len/3){if(m.isLog){ad(this.paddedTicks,function(g,v,e){v&&q.push.apply(q,m.getLogTickPositions(z,e[v-1],e[v],!0))})}else{if(m.isDatetimeAxis&&"auto"===this.getMinorTickInterval()){q=q.concat(m.getTimeTicks(m.normalizeTimeTickInterval(z),t,p,w.startOfWeek))}else{for(w=t+(f[0]-t)%z;w<=p&&w!==q[0];w+=z){q.push(w)}}}}0!==q.length&&m.trimTicks(q);return q},adjustForMinRange:function(){var D=this.options,z=this.min,C=this.max,B,p,F,t,m,h,E,q;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(R(D.min)||R(D.max)?this.minRange=null:(ad(this.series,function(e){h=e.xData;for(t=E=e.xIncrement?1:h.length-1;0<t;t--){if(m=h[t]-h[t-1],void 0===F||m<F){F=m}}}),this.minRange=Math.min(5*F,this.dataMax-this.dataMin)));C-z<this.minRange&&(p=this.dataMax-this.dataMin>=this.minRange,q=this.minRange,B=(q-C+z)/2,B=[z-B,u(D.min,z-B)],p&&(B[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),z=O(B),C=[z+q,u(D.max,z+q)],p&&(C[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),C=U(C),C-z<q&&(B[0]=C-q,B[1]=u(D.min,C-q),z=O(B)));this.min=z;this.max=C},getClosest:function(){var e;this.categories?e=1:ad(this.series,function(g){var h=g.closestPointRange,f=g.visible||!g.chart.options.chart.ignoreHiddenSeries;!g.noSharedTooltip&&R(h)&&f&&(e=R(e)?Math.min(e,h):h)});return e},nameToX:function(f){var h=ac(this.categories),e=h?this.categories:this.names,g=f.options.x,m;f.series.requireSorting=!1;R(g)||(g=!1===this.options.uniqueNames?f.series.autoIncrement():M(f.name,e));-1===g?h||(m=e.length):m=g;void 0!==m&&(this.names[m]=f.name);return m},updateNames:function(){var e=this;0<this.names.length&&(this.names.length=0,this.minRange=this.userMinRange,ad(this.series||[],function(f){f.xIncrement=null;if(!f.points||f.isDirtyData){f.processData(),f.generatePoints()}ad(f.points,function(m,g){var h;m.options&&(h=e.nameToX(m),void 0!==h&&h!==m.x&&(m.x=h,f.xData[g]=h))})}))},setAxisTranslation:function(B){var q=this,z=q.max-q.min,E=q.axisPointRange||0,t,m=0,D=0,p=q.linkedParent,h=!!q.categories,f=q.transA,C=q.isXAxis;if(C||h||E){t=q.getClosest(),p?(m=p.minPointOffset,D=p.pointRangePadding):ad(q.series,function(e){var g=h?1:C?u(e.options.pointRange,t,0):q.axisPointRange||0;e=e.options.pointPlacement;E=Math.max(E,g);q.single||(m=Math.max(m,L(e)?0:g/2),D=Math.max(D,"on"===e?0:g))}),p=q.ordinalSlope&&t?q.ordinalSlope/t:1,q.minPointOffset=m*=p,q.pointRangePadding=D*=p,q.pointRange=Math.min(E,z),C&&(q.closestPointRange=t)}B&&(q.oldTransA=f);q.translationSlope=q.transA=f=q.options.staticScale||q.len/(z+D||1);q.transB=q.horiz?q.left:q.bottom;q.minPixelPadding=f*m},minFromRange:function(){return this.max-this.range},setTickInterval:function(ax){var aq=this,ay=aq.chart,G=aq.options,av=aq.isLog,F=aq.log2lin,aw=aq.isDatetimeAxis,at=aq.isXAxis,ap=aq.isLinked,E=G.maxPadding,an=G.minPadding,ar=G.tickInterval,am=G.tickPixelInterval,D=aq.categories,au=aq.threshold,p=aq.softThreshold,ao,f,t,K;aw||D||ap||this.getTickAmount();t=u(aq.userMin,G.min);K=u(aq.userMax,G.max);ap?(aq.linkedParent=ay[aq.coll][G.linkedTo],ay=aq.linkedParent.getExtremes(),aq.min=u(ay.min,ay.dataMin),aq.max=u(ay.max,ay.dataMax),G.type!==aq.linkedParent.options.type&&al.error(11,1)):(!p&&R(au)&&(aq.dataMin>=au?(ao=au,an=0):aq.dataMax<=au&&(f=au,E=0)),aq.min=u(t,ao,aq.dataMin),aq.max=u(K,f,aq.dataMax));av&&(aq.positiveValuesOnly&&!ax&&0>=Math.min(aq.min,u(aq.dataMin,aq.min))&&al.error(10,1),aq.min=aa(F(aq.min),15),aq.max=aa(F(aq.max),15));aq.range&&R(aq.max)&&(aq.userMin=aq.min=t=Math.max(aq.dataMin,aq.minFromRange()),aq.userMax=K=aq.max,aq.range=null);ag(aq,"foundExtremes");aq.beforePadding&&aq.beforePadding();aq.adjustForMinRange();!(D||aq.axisPointRange||aq.usePercentage||ap)&&R(aq.min)&&R(aq.max)&&(F=aq.max-aq.min)&&(!R(t)&&an&&(aq.min-=F*an),!R(K)&&E&&(aq.max+=F*E));S(G.softMin)&&(aq.min=Math.min(aq.min,G.softMin));S(G.softMax)&&(aq.max=Math.max(aq.max,G.softMax));S(G.floor)&&(aq.min=Math.max(aq.min,G.floor));S(G.ceiling)&&(aq.max=Math.min(aq.max,G.ceiling));p&&R(aq.dataMin)&&(au=au||0,!R(t)&&aq.min<au&&aq.dataMin>=au?aq.min=au:!R(K)&&aq.max>au&&aq.dataMax<=au&&(aq.max=au));aq.tickInterval=aq.min===aq.max||void 0===aq.min||void 0===aq.max?1:ap&&!ar&&am===aq.linkedParent.options.tickPixelInterval?ar=aq.linkedParent.tickInterval:u(ar,this.tickAmount?(aq.max-aq.min)/Math.max(this.tickAmount-1,1):void 0,D?1:(aq.max-aq.min)*am/Math.max(aq.len,am));at&&!ax&&ad(aq.series,function(e){e.processData(aq.min!==aq.oldMin||aq.max!==aq.oldMax)});aq.setAxisTranslation(!0);aq.beforeSetTickPositions&&aq.beforeSetTickPositions();aq.postProcessTickInterval&&(aq.tickInterval=aq.postProcessTickInterval(aq.tickInterval));aq.pointRange&&!ar&&(aq.tickInterval=Math.max(aq.pointRange,aq.tickInterval));ax=u(G.minTickInterval,aq.isDatetimeAxis&&aq.closestPointRange);!ar&&aq.tickInterval<ax&&(aq.tickInterval=ax);aw||av||ar||(aq.tickInterval=n(aq.tickInterval,null,aj(aq.tickInterval),u(G.allowDecimals,!(0.5<aq.tickInterval&&5>aq.tickInterval&&1000<aq.max&&9999>aq.max)),!!this.tickAmount));this.tickAmount||(aq.tickInterval=aq.unsquish());this.setTickPositions()},setTickPositions:function(){var f=this.options,p,e=f.tickPositions;p=this.getMinorTickInterval();var q=f.tickPositioner,m=f.startOnTick,h=f.endOnTick;this.tickmarkOffset=this.categories&&"between"===f.tickmarkPlacement&&1===this.tickInterval?0.5:0;this.minorTickInterval="auto"===p&&this.tickInterval?this.tickInterval/5:p;this.single=this.min===this.max&&R(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==f.allowDecimals);this.tickPositions=p=e&&e.slice();!p&&(p=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,f.units),this.min,this.max,f.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),p.length>this.len&&(p=[p[0],p.pop()],p[0]===p[1]&&(p.length=1)),this.tickPositions=p,q&&(q=q.apply(this,[this.min,this.max])))&&(this.tickPositions=p=q);this.paddedTicks=p.slice(0);this.trimTicks(p,m,h);this.isLinked||(this.single&&2>p.length&&(this.min-=0.5,this.max+=0.5),e||q||this.adjustTickAmount())},trimTicks:function(f,h,e){var p=f[0],g=f[f.length-1],m=this.minPointOffset||0;if(!this.isLinked){if(h&&-Infinity!==p){this.min=p}else{for(;this.min-m>f[0];){f.shift()}}if(e){this.max=g}else{for(;this.max+m<f[f.length-1];){f.pop()}}0===f.length&&R(p)&&f.push((g+p)/2)}},alignToOthers:function(){var f={},g,e=this.options;!1===this.chart.options.chart.alignTicks||!1===e.alignTicks||this.isLog||ad(this.chart[this.coll],function(h){var m=h.options,m=[h.horiz?m.left:m.top,m.width,m.height,m.pane].join();h.series.length&&(f[m]?g=!0:f[m]=1)});return g},getTickAmount:function(){var f=this.options,g=f.tickAmount,e=f.tickPixelInterval;!R(f.tickInterval)&&this.len<e&&!this.isRadial&&!this.isLog&&f.startOnTick&&f.endOnTick&&(g=2);!g&&this.alignToOthers()&&(g=Math.ceil(this.len/e)+1);4>g&&(this.finalTickAmt=g,g=5);this.tickAmount=g},adjustTickAmount:function(){var f=this.tickInterval,m=this.tickPositions,e=this.tickAmount,p=this.finalTickAmt,h=m&&m.length;if(h<e){for(;m.length<e;){m.push(aa(m[m.length-1]+f))}this.transA*=(h-1)/(e-1);this.max=m[m.length-1]}else{h>e&&(this.tickInterval*=2,this.setTickPositions())}if(R(p)){for(f=e=m.length;f--;){(3===p&&1===f%2||2>=p&&0<f&&f<e-1)&&m.splice(f,1)}this.finalTickAmt=void 0}},setScale:function(){var e,f;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();f=this.len!==this.oldAxisLength;ad(this.series,function(g){if(g.isDirtyData||g.isDirty||g.xAxis.isDirty){e=!0}});f||e||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=f||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(f,p,e,t,m){var q=this,h=q.chart;e=u(e,!0);ad(q.series,function(g){delete g.kdTree});m=ab(m,{min:f,max:p});ag(q,"setExtremes",m,function(){q.userMin=f;q.userMax=p;q.eventArgs=m;e&&h.redraw(t)})},zoom:function(f,h){var e=this.dataMin,p=this.dataMax,g=this.options,m=Math.min(e,u(g.min,e)),g=Math.max(p,u(g.max,p));if(f!==this.min||h!==this.max){this.allowZoomOutside||(R(e)&&(f<m&&(f=m),f>g&&(f=g)),R(p)&&(h<m&&(h=m),h>g&&(h=g))),this.displayBtn=void 0!==f||void 0!==h,this.setExtremes(f,h,!1,void 0,{trigger:"zoom"})}return !0},setAxisSize:function(){var t=this.chart,f=this.options,w=f.offsets||[0,0,0,0],p=this.horiz,m=this.width=Math.round(al.relativeLength(u(f.width,t.plotWidth-w[3]+w[1]),t.plotWidth)),q=this.height=Math.round(al.relativeLength(u(f.height,t.plotHeight-w[0]+w[2]),t.plotHeight)),h=this.top=Math.round(al.relativeLength(u(f.top,t.plotTop+w[0]),t.plotHeight,t.plotTop)),f=this.left=Math.round(al.relativeLength(u(f.left,t.plotLeft+w[3]),t.plotWidth,t.plotLeft));this.bottom=t.chartHeight-q-h;this.right=t.chartWidth-m-f;this.len=Math.max(p?m:q,0);this.pos=p?f:h},getExtremes:function(){var e=this.isLog,f=this.lin2log;return{min:e?aa(f(this.min)):this.min,max:e?aa(f(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(f){var g=this.isLog,e=this.lin2log,h=g?e(this.min):this.min,g=g?e(this.max):this.max;null===f?f=h:h>f?f=h:g<f&&(f=g);return this.translate(f,0,1,0,1)},autoLabelAlign:function(e){e=(u(e,0)-90*this.side+720)%360;return 15<e&&165>e?"right":195<e&&345>e?"left":"center"},tickSize:function(f){var g=this.options,e=g[f+"Length"],h=u(g[f+"Width"],"tick"===f&&this.isXAxis?1:0);if(h&&e){return"inside"===g[f+"Position"]&&(e=-e),[e,h]}},labelMetrics:function(){var e=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[e]&&this.ticks[e].label)},unsquish:function(){var F=this.options.labels,C=this.horiz,E=this.tickInterval,D=E,q=this.len/(((this.categories?1:0)+this.max-this.min)/E),H,z=F.rotation,p=this.labelMetrics(),m,G=Number.MAX_VALUE,t,h=function(e){e/=q||1;e=1<e?Math.ceil(e):1;return e*E};C?(t=!F.staggerLines&&!F.step&&(R(z)?[z]:q<u(F.autoRotationLimit,80)&&F.autoRotation))&&ad(t,function(e){var f;if(e===z||e&&-90<=e&&90>=e){m=h(Math.abs(p.h/Math.sin(W*e))),f=m+Math.abs(e/360),f<G&&(G=f,H=e,D=m)}}):F.step||(D=h(p.h));this.autoRotation=t;this.labelRotation=u(H,z);return D},getSlotWidth:function(){var f=this.chart,m=this.horiz,e=this.options.labels,p=Math.max(this.tickPositions.length-(this.categories?0:1),1),h=f.margin[3];return m&&2>(e.step||0)&&!e.rotation&&(this.staggerLines||1)*this.len/p||!m&&(e.style&&parseInt(e.style.width,10)||h&&h-f.spacing[3]||0.33*f.chartWidth)},renderUnsquish:function(){var am=this.chart,G=am.renderer,K=this.tickPositions,H=this.ticks,C=this.options.labels,ao=this.horiz,F=this.getSlotWidth(),z=Math.max(1,Math.round(F-2*(C.padding||5))),q={},an=this.labelMetrics(),E=C.style&&C.style.textOverflow,p,t=0,h,J;L(C.rotation)||(q.rotation=C.rotation||0);ad(K,function(e){(e=H[e])&&e.labelLength>t&&(t=e.labelLength)});this.maxLabelLength=t;if(this.autoRotation){t>z&&t>an.h?q.rotation=this.labelRotation:this.labelRotation=0}else{if(F&&(p={width:z+"px"},!E)){for(p.textOverflow="clip",h=K.length;!ao&&h--;){if(J=K[h],z=H[J].label){z.styles&&"ellipsis"===z.styles.textOverflow?z.css({textOverflow:"clip"}):H[J].labelLength>F&&z.css({width:F+"px"}),z.getBBox().height>this.len/K.length-(an.h-an.f)&&(z.specCss={textOverflow:"ellipsis"})}}}}q.rotation&&(p={width:(t>0.5*am.chartHeight?0.33*am.chartHeight:am.chartHeight)+"px"},E||(p.textOverflow="ellipsis"));if(this.labelAlign=C.align||this.autoLabelAlign(this.labelRotation)){q.align=this.labelAlign}ad(K,function(e){var f=(e=H[e])&&e.label;f&&(f.attr(q),p&&f.css(T(p,f.specCss)),delete f.specCss,e.rotation=q.rotation)});this.tickRotCorr=G.rotCorr(an.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||R(this.min)&&R(this.max)&&this.tickPositions&&0<this.tickPositions.length},addTitle:function(f){var p=this.chart.renderer,e=this.horiz,q=this.opposite,m=this.options.title,h;this.axisTitle||((h=m.textAlign)||(h=(e?{low:"left",middle:"center",high:"right"}:{low:q?"right":"left",middle:"center",high:q?"left":"right"})[m.align]),this.axisTitle=p.text(m.text,0,0,m.useHTML).attr({zIndex:7,rotation:m.rotation||0,align:h}).addClass("highcharts-axis-title").css(m.style).add(this.axisGroup),this.axisTitle.isNew=!0);m.style.width||this.isRadial||this.axisTitle.css({width:this.len});this.axisTitle[f?"show":"hide"](!0)},generateTick:function(e){var f=this.ticks;f[e]?f[e].addLabel():f[e]=new N(this,e)},getOffset:function(){var aD=this,aA=aD.chart,aC=aA.renderer,aB=aD.options,an=aD.tickPositions,az=aD.ticks,aw=aD.horiz,au=aD.side,am=aA.inverted&&!aD.isZAxis?[1,0,3,2][au]:au,ay,ar,av=0,ao,ap=0,G=aB.title,ax=aB.labels,E=0,at=aA.axisOffset,aA=aA.clipOffset,aq=[-1,1,1,-1][au],t=aB.className,g=aD.axisParent,F=this.tickSize("tick");ay=aD.hasData();aD.showAxis=ar=ay||u(aB.showEmpty,!0);aD.staggerLines=aD.horiz&&ax.staggerLines;aD.axisGroup||(aD.gridGroup=aC.g("grid").attr({zIndex:aB.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(t||"")).add(g),aD.axisGroup=aC.g("axis").attr({zIndex:aB.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(t||"")).add(g),aD.labelGroup=aC.g("axis-labels").attr({zIndex:ax.zIndex||7}).addClass("highcharts-"+aD.coll.toLowerCase()+"-labels "+(t||"")).add(g));ay||aD.isLinked?(ad(an,function(f,e){aD.generateTick(f,e)}),aD.renderUnsquish(),!1===ax.reserveSpace||0!==au&&2!==au&&{1:"left",3:"right"}[au]!==aD.labelAlign&&"center"!==aD.labelAlign||ad(an,function(e){E=Math.max(az[e].getLabelSize(),E)}),aD.staggerLines&&(E*=aD.staggerLines,aD.labelOffset=E*(aD.opposite?-1:1))):af(az,function(e,f){e.destroy();delete az[f]});G&&G.text&&!1!==G.enabled&&(aD.addTitle(ar),ar&&!1!==G.reserveSpace&&(aD.titleOffset=av=aD.axisTitle.getBBox()[aw?"height":"width"],ao=G.offset,ap=R(ao)?0:u(G.margin,aw?5:10)));aD.renderLine();aD.offset=aq*u(aB.offset,at[au]);aD.tickRotCorr=aD.tickRotCorr||{x:0,y:0};aC=0===au?-aD.labelMetrics().h:2===au?aD.tickRotCorr.y:0;ap=Math.abs(E)+ap;E&&(ap=ap-aC+aq*(aw?u(ax.y,aD.tickRotCorr.y+8*aq):ax.x));aD.axisTitleMargin=u(ao,ap);at[au]=Math.max(at[au],aD.axisTitleMargin+av+aq*aD.offset,ap,ay&&an.length&&F?F[0]+aq*aD.offset:0);aB=aB.offset?0:2*Math.floor(aD.axisLine.strokeWidth()/2);aA[am]=Math.max(aA[am],aB)},getLinePath:function(f){var p=this.chart,e=this.opposite,q=this.offset,m=this.horiz,h=this.left+(e?this.width:0)+q,q=p.chartHeight-this.bottom-(e?this.height:0)+q;e&&(f*=-1);return p.renderer.crispLine(["M",m?this.left:h,m?q:this.top,"L",m?p.chartWidth-this.right:h,m?q:p.chartHeight-this.bottom],f)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var F=this.horiz,C=this.left,E=this.top,D=this.len,q=this.options.title,H=F?C:E,z=this.opposite,p=this.offset,m=q.x||0,G=q.y||0,t=this.axisTitle,h=this.chart.renderer.fontMetrics(q.style&&q.style.fontSize,t),t=Math.max(t.getBBox(null,0).height-h.h-1,0),D={low:H+(F?0:D),middle:H+D/2,high:H+(F?D:0)}[q.align],C=(F?E+this.height:C)+(F?1:-1)*(z?-1:1)*this.axisTitleMargin+[-t,t,h.f,-t][this.side];return{x:F?D+m:C+(z?this.width:0)+p+m,y:F?C+G-(z?this.height:0)+p:D+G}},renderMinorTick:function(f){var g=this.chart.hasRendered&&S(this.oldMin),e=this.minorTicks;e[f]||(e[f]=new N(this,f,"minor"));g&&e[f].isNew&&e[f].render(null,!0);e[f].render(null,!1,1)},renderTick:function(f,m){var e=this.isLinked,p=this.ticks,h=this.chart.hasRendered&&S(this.oldMin);if(!e||f>=this.min&&f<=this.max){p[f]||(p[f]=new N(this,f)),h&&p[f].isNew&&p[f].render(m,!0,0.1),p[f].render(m)}},render:function(){var az=this,ay=az.chart,ax=az.options,au=az.isLog,aq=az.lin2log,G=az.isLinked,aw=az.tickPositions,ao=az.axisTitle,at=az.ticks,E=az.minorTicks,an=az.alternateBands,F=ax.stackLabels,av=ax.alternateGridColor,D=az.tickmarkOffset,ar=az.axisLine,am=az.showAxis,ap=Q(ay.renderer.globalAnimation),v,g;az.labelEdge.length=0;az.overlap=!1;ad([at,E,an],function(e){af(e,function(f){f.isActive=!1})});if(az.hasData()||G){az.minorTickInterval&&!az.categories&&ad(az.getMinorTickPositions(),function(e){az.renderMinorTick(e)}),aw.length&&(ad(aw,function(e,f){az.renderTick(e,f)}),D&&(0===az.min||az.single)&&(at[-1]||(at[-1]=new N(az,-1,null,!0)),at[-1].render(-1))),av&&ad(aw,function(f,e){g=void 0!==aw[e+1]?aw[e+1]+D:az.max-D;0===e%2&&f<az.max&&g<=az.max+(ay.polar?-D:D)&&(an[f]||(an[f]=new al.PlotLineOrBand(az)),v=f+D,an[f].options={from:au?aq(v):v,to:au?aq(g):g,color:av},an[f].render(),an[f].isActive=!0)}),az._addedPlotLB||(ad((ax.plotLines||[]).concat(ax.plotBands||[]),function(e){az.addPlotBandOrLine(e)}),az._addedPlotLB=!0)}ad([at,E,an],function(f){var e,m=[],h=ap.duration;af(f,function(p,q){p.isActive||(p.render(q,!1,0),p.isActive=!1,m.push(q))});ai(function(){for(e=m.length;e--;){f[m[e]]&&!f[m[e]].isActive&&(f[m[e]].destroy(),delete f[m[e]])}},f!==an&&ay.hasRendered&&h?h:0)});ar&&(ar[ar.isPlaced?"animate":"attr"]({d:this.getLinePath(ar.strokeWidth())}),ar.isPlaced=!0,ar[am?"show":"hide"](!0));ao&&am&&(ax=az.getTitlePosition(),S(ax.y)?(ao[ao.isNew?"attr":"animate"](ax),ao.isNew=!1):(ao.attr("y",-9999),ao.isNew=!0));F&&F.enabled&&az.renderStackTotals();az.isDirty=!1},redraw:function(){this.visible&&(this.render(),ad(this.plotLinesAndBands,function(e){e.render()}));ad(this.series,function(e){e.isDirty=!0})},keepProps:"extKey hcEvents names series userMax userMin".split(" "),destroy:function(f){var h=this,e=h.stacks,m=h.plotLinesAndBands,g;f||s(h);af(e,function(p,q){o(p);e[q]=null});ad([h.ticks,h.minorTicks,h.alternateBands],function(p){o(p)});if(m){for(f=m.length;f--;){m[f].destroy()}}ad("stackTotalGroup axisLine axisTitle axisGroup gridGroup labelGroup cross".split(" "),function(p){h[p]&&(h[p]=h[p].destroy())});for(g in h.plotLinesAndBandsGroups){h.plotLinesAndBandsGroups[g]=h.plotLinesAndBandsGroups[g].destroy()}af(h,function(q,p){-1===M(p,h.keepProps)&&delete h[p]})},drawCrosshair:function(f,p){var e,t=this.crosshair,m=u(t.snap,!0),q,h=this.cross;f||(f=this.cross&&this.cross.e);this.crosshair&&!1!==(R(p)||!m)?(m?R(p)&&(q=this.isXAxis?p.plotX:this.len-p.plotY):q=f&&(this.horiz?f.chartX-this.pos:this.len-f.chartY+this.pos),R(q)&&(e=this.getPlotLinePath(p&&(this.isXAxis?p.x:u(p.stackY,p.y)),null,null,null,q)||null),R(e)?(p=this.categories&&!this.isRadial,h||(this.cross=h=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(p?"category ":"thin ")+t.className).attr({zIndex:u(t.zIndex,2)}).add(),h.attr({stroke:t.color||(p?ae("#ccd6eb").setOpacity(0.25).get():"#cccccc"),"stroke-width":u(t.width,1)}).css({"pointer-events":"none"}),t.dashStyle&&h.attr({dashstyle:t.dashStyle})),h.show().attr({d:e}),p&&!t.width&&h.attr({"stroke-width":this.transA}),this.cross.e=f):this.hideCrosshair()):this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}});return al.Axis=V}(a);(function(v){var C=v.Axis,D=v.Date,A=v.dateFormat,e=v.defaultOptions,s=v.defined,g=v.each,w=v.extend,B=v.getMagnitude,f=v.getTZOffset,u=v.normalizeTickInterval,o=v.pick,n=v.timeUnits;C.prototype.getTimeTicks=function(M,E,G,K){var N=[],p={},z=e.global.useUTC,P,h=new D(E-Math.max(f(E),f(G))),Q=D.hcMakeTime,q=M.unitRange,I=M.count,L,m;if(s(E)){h[D.hcSetMilliseconds](q>=n.second?0:I*Math.floor(h.getMilliseconds()/I));if(q>=n.second){h[D.hcSetSeconds](q>=n.minute?0:I*Math.floor(h.getSeconds()/I))}if(q>=n.minute){h[D.hcSetMinutes](q>=n.hour?0:I*Math.floor(h[D.hcGetMinutes]()/I))}if(q>=n.hour){h[D.hcSetHours](q>=n.day?0:I*Math.floor(h[D.hcGetHours]()/I))}if(q>=n.day){h[D.hcSetDate](q>=n.month?1:I*Math.floor(h[D.hcGetDate]()/I))}q>=n.month&&(h[D.hcSetMonth](q>=n.year?0:I*Math.floor(h[D.hcGetMonth]()/I)),P=h[D.hcGetFullYear]());if(q>=n.year){h[D.hcSetFullYear](P-P%I)}if(q===n.week){h[D.hcSetDate](h[D.hcGetDate]()-h[D.hcGetDay]()+o(K,1))}P=h[D.hcGetFullYear]();K=h[D.hcGetMonth]();var F=h[D.hcGetDate](),O=h[D.hcGetHours]();if(D.hcTimezoneOffset||D.hcGetTimezoneOffset){m=(!z||!!D.hcGetTimezoneOffset)&&(G-E>4*n.month||f(E)!==f(G)),h=h.getTime(),L=f(h),h=new D(h+L)}z=h.getTime();for(E=1;z<G;){N.push(z),z=q===n.year?Q(P+E*I,0):q===n.month?Q(P,K+E*I):!m||q!==n.day&&q!==n.week?m&&q===n.hour?Q(P,K,F,O+E*I,0,0,L)-L:z+q*I:Q(P,K,F+E*I*(q===n.day?1:7)),E++}N.push(z);q<=n.hour&&10000>N.length&&g(N,function(t){0===t%1800000&&"000000000"===A("%H%M%S%L",t)&&(p[t]="day")})}N.info=w(M,{higherRanks:p,totalRange:q*I});return N};C.prototype.normalizeTimeTickInterval=function(q,t){var z=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];t=z[z.length-1];var h=n[t[0]],p=t[1],m;for(m=0;m<z.length&&!(t=z[m],h=n[t[0]],p=t[1],z[m+1]&&q<=(h*p[p.length-1]+n[z[m+1][0]])/2);m++){}h===n.year&&q<5*h&&(p=[1,2,5]);q=u(q/h,p,"year"===t[0]?Math.max(B(q/h),1):1);return{unitRange:h,count:q,unitName:t[0]}}})(a);(function(e){var n=e.Axis,o=e.getMagnitude,g=e.map,m=e.normalizeTickInterval,f=e.pick;n.prototype.getLogTickPositions=function(G,H,J,s){var u=this.options,A=this.len,v=this.lin2log,B=this.log2lin,C=[];s||(this._minorAutoInterval=null);if(0.5<=G){G=Math.round(G),C=this.getLinearTickPositions(G,H,J)}else{if(0.08<=G){for(var A=Math.floor(H),E,F,I,z,h,u=0.3<G?[1,2,4]:0.15<G?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];A<J+1&&!h;A++){for(F=u.length,E=0;E<F&&!h;E++){I=B(v(A)*u[E]),I>H&&(!s||z<=J)&&void 0!==z&&C.push(z),z>J&&(h=!0),z=I}}}else{H=v(H),J=v(J),G=s?this.getMinorTickInterval():u.tickInterval,G=f("auto"===G?null:G,this._minorAutoInterval,u.tickPixelInterval/(s?5:1)*(J-H)/((s?A/this.tickPositions.length:A)||1)),G=m(G,null,o(G)),C=g(this.getLinearTickPositions(G,H,J),B),s||(this._minorAutoInterval=G/5)}}s||(this.tickInterval=G);return C};n.prototype.log2lin=function(h){return Math.log(h)/Math.LN10};n.prototype.lin2log=function(h){return Math.pow(10,h)}})(a);(function(n,v){var w=n.arrayMax,s=n.arrayMin,e=n.defined,m=n.destroyObjectProperties,g=n.each,o=n.erase,u=n.merge,f=n.pick;n.PlotLineOrBand=function(h,p){this.axis=h;p&&(this.options=p,this.id=p.id)};n.PlotLineOrBand.prototype={render:function(){var R=this,Q=R.axis,O=Q.horiz,T=R.options,U=T.label,W=R.label,Z=T.to,E=T.from,P=T.value,I=e(E)&&e(Z),z=e(P),K=R.svgElem,N=!K,S=[],t=T.color,q=f(T.zIndex,0),M=T.events,S={"class":"highcharts-plot-"+(I?"band ":"line ")+(T.className||"")},V={},F=Q.chart.renderer,L=I?"bands":"lines",G=Q.log2lin;Q.isLog&&(E=G(E),Z=G(Z),P=G(P));z?(S={stroke:t,"stroke-width":T.width},T.dashStyle&&(S.dashstyle=T.dashStyle)):I&&(t&&(S.fill=t),T.borderWidth&&(S.stroke=T.borderColor,S["stroke-width"]=T.borderWidth));V.zIndex=q;L+="-"+q;(t=Q.plotLinesAndBandsGroups[L])||(Q.plotLinesAndBandsGroups[L]=t=F.g("plot-"+L).attr(V).add());N&&(R.svgElem=K=F.path().attr(S).add(t));if(z){S=Q.getPlotLinePath(P,K.strokeWidth())}else{if(I){S=Q.getPlotBandPath(E,Z,T)}else{return}}N&&S&&S.length?(K.attr({d:S}),M&&n.objectEach(M,function(h,p){K.on(p,function(A){M[p].apply(R,[A])})})):K&&(S?(K.show(),K.animate({d:S})):(K.hide(),W&&(R.label=W=W.destroy())));U&&e(U.text)&&S&&S.length&&0<Q.width&&0<Q.height&&!S.flat?(U=u({align:O&&I&&"center",x:O?!I&&4:10,verticalAlign:!O&&I&&"middle",y:O?I?16:10:I?6:-4,rotation:O&&!I&&90},U),this.renderLabel(U,S,I,q)):W&&W.hide();return R},renderLabel:function(p,q,h,t){var z=this.label,A=this.axis.chart.renderer;z||(z={align:p.textAlign||p.align,rotation:p.rotation,"class":"highcharts-plot-"+(h?"band":"line")+"-label "+(p.className||"")},z.zIndex=t,this.label=z=A.text(p.text,0,0,p.useHTML).attr(z).add(),z.css(p.style));t=q.xBounds||[q[1],q[4],h?q[6]:q[1]];q=q.yBounds||[q[2],q[5],h?q[7]:q[2]];h=s(t);A=s(q);z.align(p,!1,{x:h,y:A,width:w(t)-h,height:w(q)-A});z.show()},destroy:function(){o(this.axis.plotLinesAndBands,this);delete this.axis;m(this)}};n.extend(v.prototype,{getPlotBandPath:function(t,z){var p=this.getPlotLinePath(z,null,null,!0),A=this.getPlotLinePath(t,null,null,!0),B=[],C=this.horiz,h=1,q;t=t<this.min&&z<this.min||t>this.max&&z>this.max;if(A&&p){for(t&&(q=A.toString()===p.toString(),h=0),t=0;t<A.length;t+=6){C&&p[t+1]===A[t+1]?(p[t+1]+=h,p[t+4]+=h):C||p[t+2]!==A[t+2]||(p[t+2]+=h,p[t+5]+=h),B.push("M",A[t+1],A[t+2],"L",A[t+4],A[t+5],p[t+4],p[t+5],p[t+1],p[t+2],"z"),B.flat=q}}return B},addPlotBand:function(h){return this.addPlotBandOrLine(h,"plotBands")},addPlotLine:function(h){return this.addPlotBandOrLine(h,"plotLines")},addPlotBandOrLine:function(t,q){var p=(new n.PlotLineOrBand(this,t)).render(),z=this.userOptions;p&&(q&&(z[q]=z[q]||[],z[q].push(t)),this.plotLinesAndBands.push(p));return p},removePlotBandOrLine:function(p){for(var q=this.plotLinesAndBands,h=this.options,t=this.userOptions,z=q.length;z--;){q[z].id===p&&q[z].destroy()}g([h.plotLines||[],t.plotLines||[],h.plotBands||[],t.plotBands||[]],function(A){for(z=A.length;z--;){A[z].id===p&&o(A,A[z])}})},removePlotBand:function(h){this.removePlotBandOrLine(h)},removePlotLine:function(h){this.removePlotBandOrLine(h)}})})(a,d);(function(s){var A=s.dateFormat,B=s.each,v=s.extend,e=s.format,n=s.isNumber,g=s.map,u=s.merge,w=s.pick,f=s.splat,o=s.syncTimeout,m=s.timeUnits;s.Tooltip=function(){this.init.apply(this,arguments)};s.Tooltip.prototype={init:function(h,p){this.chart=h;this.options=p;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.split=p.split&&!h.inverted;this.shared=p.shared||this.split},cleanSplit:function(h){B(this.chart.series,function(p){var q=p&&p.tt;q&&(!q.isActive||h?p.tt=q.destroy():q.isActive=!1)})},getLabel:function(){var h=this.chart.renderer,p=this.options;this.label||(this.split?this.label=h.g("tooltip"):(this.label=h.label("",0,0,p.shape||"callout",null,null,p.useHTML,null,"tooltip").attr({padding:p.padding,r:p.borderRadius}),this.label.attr({fill:p.backgroundColor,"stroke-width":p.borderWidth}).css(p.style).shadow(p.shadow)),this.label.attr({zIndex:8}).add());return this.label},update:function(h){this.destroy();u(!0,this.chart.options.tooltip.userOptions,h);this.init(this.chart,u(!0,this.options,h))},destroy:function(){this.label&&(this.label=this.label.destroy());this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy());clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(t,C,D,E){var h=this,q=h.now,p=!1!==h.options.animation&&!h.isHidden&&(1<Math.abs(t-q.x)||1<Math.abs(C-q.y)),z=h.followPointer||1<h.len;v(q,{x:p?(2*q.x+t)/3:t,y:p?(q.y+C)/2:C,anchorX:z?void 0:p?(2*q.anchorX+D)/3:D,anchorY:z?void 0:p?(q.anchorY+E)/2:E});h.getLabel().attr(q);p&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){h&&h.move(t,C,D,E)},32))},hide:function(h){var p=this;clearTimeout(this.hideTimer);h=w(h,this.options.hideDelay,500);this.isHidden||(this.hideTimer=o(function(){p.getLabel()[h?"fadeOut":"hide"]();p.isHidden=!0},h))},getAnchor:function(I,E){var F,G=this.chart,H=G.inverted,J=G.plotTop,t=G.plotLeft,z=0,q=0,p,D;I=f(I);F=I[0].tooltipPos;this.followPointer&&E&&(void 0===E.chartX&&(E=G.pointer.normalize(E)),F=[E.chartX-G.plotLeft,E.chartY-J]);F||(B(I,function(h){p=h.series.yAxis;D=h.series.xAxis;z+=h.plotX+(!H&&D?D.left-t:0);q+=(h.plotLow?(h.plotLow+h.plotHigh)/2:h.plotY)+(!H&&p?p.top-J:0)}),z/=I.length,q/=I.length,F=[H?G.plotWidth-q:z,this.shared&&!H&&1<I.length&&E?E.chartY-J:H?G.plotHeight-z:q]);return g(F,Math.round)},getPosition:function(N,G,H){var I=this.chart,L=this.distance,O={},z=I.inverted&&H.h||0,D,t=["y",I.chartHeight,G,H.plotY+I.plotTop,I.plotTop,I.plotTop+I.plotHeight],p=["x",I.chartWidth,N,H.plotX+I.plotLeft,I.plotLeft,I.plotLeft+I.plotWidth],E=!this.followPointer&&w(H.ttBelow,!I.inverted===!!H.negative),F=function(S,R,J,P,C,h){var Q=J<P-L,T=P+L+J<R,U=P-L-J;P+=L;if(E&&T){O[S]=P}else{if(!E&&Q){O[S]=U}else{if(Q){O[S]=Math.min(h-J,0>U-z?U:U-z)}else{if(T){O[S]=Math.max(C,P+z+J>R?P:P+z)}else{return !1}}}}},K=function(h,Q,C,J){var P;J<L||J>Q-L?P=!1:O[h]=J<C/2?1:J>Q-C/2?Q-C-2:J-C/2;return P},M=function(h){var C=t;t=p;p=C;D=h},q=function(){!1!==F.apply(0,t)?!1!==K.apply(0,p)||D||(M(!0),q()):D?O.x=O.y=0:(M(!0),q())};(I.inverted||1<this.len)&&M();q();return O},defaultFormatter:function(h){var p=this.points||f(this),q;q=[h.tooltipFooterHeaderFormatter(p[0])];q=q.concat(h.bodyFormatter(p));q.push(h.tooltipFooterHeaderFormatter(p[0],!0));return q},refresh:function(G,z){var D,E=this.options,F,H=G,q,t={},p=[];D=E.formatter||this.defaultFormatter;var t=this.shared,h;E.enabled&&(clearTimeout(this.hideTimer),this.followPointer=f(H)[0].series.tooltipOptions.followPointer,q=this.getAnchor(H,z),z=q[0],F=q[1],!t||H.series&&H.series.noSharedTooltip?t=H.getLabelConfig():(B(H,function(C){C.setState("hover");p.push(C.getLabelConfig())}),t={x:H[0].category,y:H[0].y},t.points=p,H=H[0]),this.len=p.length,t=D.call(t,this),h=H.series,this.distance=w(h.tooltipOptions.distance,16),!1===t?this.hide():(D=this.getLabel(),this.isHidden&&D.attr({opacity:1}).show(),this.split?this.renderSplit(t,f(G)):(E.style.width||D.css({width:this.chart.spacingBox.width}),D.attr({text:t&&t.join?t.join(""):t}),D.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+w(H.colorIndex,h.colorIndex)),D.attr({stroke:E.borderColor||H.color||h.color||"#666666"}),this.updatePosition({plotX:z,plotY:F,negative:H.negative,ttBelow:H.ttBelow,h:q[2]||0})),this.isHidden=!1))},renderSplit:function(z,E){var F=this,G=[],H=this.chart,I=H.renderer,t=!0,q=this.options,D=0,p=this.getLabel();s.isString(z)&&(z=[!1,z]);B(z.slice(0,E.length+1),function(C,K){if(!1!==C){K=E[K-1]||{isHeader:!0,plotX:E[0].plotX};var J=K.series||F,L=J.tt,h=K.series||{},M="highcharts-color-"+w(K.colorIndex,h.colorIndex,"none");L||(J.tt=L=I.label(null,null,null,"callout",null,null,q.useHTML).addClass("highcharts-tooltip-box "+M).attr({padding:q.padding,r:q.borderRadius,fill:q.backgroundColor,stroke:q.borderColor||K.color||h.color||"#333333","stroke-width":q.borderWidth}).add(p));L.isActive=!0;L.attr({text:C});L.css(q.style).shadow(q.shadow);C=L.getBBox();h=C.width+L.strokeWidth();K.isHeader?(D=C.height,h=Math.max(0,Math.min(K.plotX+H.plotLeft-h/2,H.chartWidth-h))):h=K.plotX+H.plotLeft-w(q.distance,16)-h;0>h&&(t=!1);C=(K.series&&K.series.yAxis&&K.series.yAxis.pos)+(K.plotY||0);C-=H.plotTop;G.push({target:K.isHeader?H.plotHeight+D:C,rank:K.isHeader?1:0,size:J.tt.getBBox().height+1,point:K,x:h,tt:L})}});this.cleanSplit();s.distribute(G,H.plotHeight+D);B(G,function(h){var J=h.point,C=J.series;h.tt.attr({visibility:void 0===h.pos?"hidden":"inherit",x:t||J.isHeader?h.x:J.plotX+H.plotLeft+w(q.distance,16),y:h.pos+H.plotTop,anchorX:J.isHeader?J.plotX+H.plotLeft:J.plotX+C.xAxis.pos,anchorY:J.isHeader?h.pos+H.plotTop-15:J.plotY+C.yAxis.pos})})},updatePosition:function(h){var p=this.chart,q=this.getLabel(),q=(this.options.positioner||this.getPosition).call(this,q.width,q.height,h);this.move(Math.round(q.x),Math.round(q.y||0),h.plotX+p.plotLeft,h.plotY+p.plotTop)},getDateFormat:function(F,z,C,D){var E=A("%m-%d %H:%M:%S.%L",z),G,q,p={millisecond:15,second:12,minute:9,hour:6,day:3},t="millisecond";for(q in m){if(F===m.week&&+A("%w",z)===C&&"00:00:00.000"===E.substr(6)){q="week";break}if(m[q]>F){q=t;break}if(p[q]&&E.substr(p[q])!=="01-01 00:00:00.000".substr(p[q])){break}"week"!==q&&(t=q)}q&&(G=D[q]);return G},getXDateFormat:function(h,p,q){p=p.dateTimeLabelFormats;var t=q&&q.closestPointRange;return(t?this.getDateFormat(t,h.x,q.options.startOfWeek,p):p.day)||p.year},tooltipFooterHeaderFormatter:function(t,C){C=C?"footer":"header";var D=t.series,E=D.tooltipOptions,h=E.xDateFormat,q=D.xAxis,p=q&&"datetime"===q.options.type&&n(t.key),z=E[C+"Format"];p&&!h&&(h=this.getXDateFormat(t,E,q));p&&h&&B(t.point&&t.point.tooltipDateKeys||["key"],function(F){z=z.replace("{point."+F+"}","{point."+F+":"+h+"}")});return e(z,{point:t,series:D})},bodyFormatter:function(h){return g(h,function(p){var q=p.series.tooltipOptions;return(q[(p.point.formatPrefix||"point")+"Formatter"]||p.point.tooltipFormatter).call(p.point,q[(p.point.formatPrefix||"point")+"Format"])})}}})(a);(function(D){var K=D.addEvent,L=D.attr,I=D.charts,g=D.color,v=D.css,o=D.defined,H=D.each,J=D.extend,n=D.find,C=D.fireEvent,u=D.isObject,s=D.offset,w=D.pick,A=D.splat,B=D.Tooltip;D.Pointer=function(e,f){this.init(e,f)};D.Pointer.prototype={init:function(f,h){this.options=h;this.chart=f;this.runChartClick=h.chart.events&&!!h.chart.events.click;this.pinchDown=[];this.lastValidTouch={};B&&(f.tooltip=new B(f,h.tooltip),this.followTouchMove=w(h.tooltip.followTouchMove,!0));this.setDOMEvents()},zoomOption:function(h){var f=this.chart,p=f.options.chart,m=p.zoomType||"",f=f.inverted;/touch/.test(h.type)&&(m=w(p.pinchType,m));this.zoomX=h=/x/.test(m);this.zoomY=m=/y/.test(m);this.zoomHor=h&&!f||m&&f;this.zoomVert=m&&!f||h&&f;this.hasZoom=h||m},normalize:function(f,h){var e;e=f.touches?f.touches.length?f.touches.item(0):f.changedTouches[0]:f;h||(this.chartPosition=h=s(this.chart.container));return J(f,{chartX:Math.round(e.pageX-h.left),chartY:Math.round(e.pageY-h.top)})},getCoordinates:function(f){var e={xAxis:[],yAxis:[]};H(this.chart.axes,function(h){e[h.isXAxis?"xAxis":"yAxis"].push({axis:h,value:h.toValue(f[h.horiz?"chartX":"chartY"])})});return e},findNearestKDPoint:function(h,p,m){var f;H(h,function(q){var e=!(q.noSharedTooltip&&p)&&0>q.options.findNearestPointBy.indexOf("y");q=q.searchPoint(m,e);if((e=u(q,!0))&&!(e=!u(f,!0))){var e=f.distX-q.distX,z=f.dist-q.dist,t=(q.series.group&&q.series.group.zIndex)-(f.series.group&&f.series.group.zIndex),e=0<(0!==e&&p?e:0!==z?z:0!==t?t:f.series.index>q.series.index?-1:1)}e&&(f=q)});return f},getPointFromEvent:function(f){f=f.target;for(var e;f&&!e;){e=f.point,f=f.parentNode}return e},getChartCoordinatesFromPoint:function(h,q){var f=h.series,p=f.xAxis,f=f.yAxis,m=w(h.clientX,h.plotX);if(p&&f){return q?{chartX:p.len+p.pos-m,chartY:f.len+f.pos-h.plotY}:{chartX:m+p.pos,chartY:h.plotY+f.pos}}},getHoverData:function(M,G,F,p,z,f,O){var E,q=[],N=O&&O.isBoosting;p=!(!p||!M);O=G&&!G.stickyTracking?[G]:D.grep(F,function(e){return e.visible&&!(!z&&e.directTouch)&&w(e.options.enableMouseTracking,!0)&&e.stickyTracking});G=(E=p?M:this.findNearestKDPoint(O,z,f))&&E.series;E&&(z&&!G.noSharedTooltip?(O=D.grep(F,function(e){return e.visible&&!(!z&&e.directTouch)&&w(e.options.enableMouseTracking,!0)&&!e.noSharedTooltip}),H(O,function(e){var h=n(e.points,function(m){return m.x===E.x&&!m.isNull});u(h)&&(N&&(h=e.getPoint(h)),q.push(h))})):q.push(E));return{hoverPoint:E,hoverSeries:G,hoverPoints:q}},runPointActions:function(p,G){var F=this.chart,t=F.tooltip&&F.tooltip.options.enabled?F.tooltip:void 0,q=t?t.shared:!1,f=G||F.hoverPoint,z=f&&f.series||F.hoverSeries,z=this.getHoverData(f,z,F.series,!!G||z&&z.directTouch&&this.isDirectTouch,q,p,{isBoosting:F.isBoosting}),E,f=z.hoverPoint;E=z.hoverPoints;G=(z=z.hoverSeries)&&z.tooltipOptions.followPointer;q=q&&z&&!z.noSharedTooltip;if(f&&(f!==F.hoverPoint||t&&t.isHidden)){H(F.hoverPoints||[],function(e){-1===D.inArray(e,E)&&e.setState()});H(E||[],function(e){e.setState("hover")});if(F.hoverSeries!==z){z.onMouseOver()}F.hoverPoint&&F.hoverPoint.firePointEvent("mouseOut");if(!f.series){return}f.firePointEvent("mouseOver");F.hoverPoints=E;F.hoverPoint=f;t&&t.refresh(q?E:f,p)}else{G&&t&&!t.isHidden&&(f=t.getAnchor([{}],p),t.updatePosition({plotX:f[0],plotY:f[1]}))}this.unDocMouseMove||(this.unDocMouseMove=K(F.container.ownerDocument,"mousemove",function(e){var h=I[D.hoverChartIndex];if(h){h.pointer.onDocumentMouseMove(e)}}));H(F.axes,function(M){var m=w(M.crosshair.snap,!0),h=m?D.find(E,function(e){return e.series[M.coll]===M}):void 0;h||!m?M.drawCrosshair(p,h):M.hideCrosshair()})},reset:function(q,F){var h=this.chart,E=h.hoverSeries,t=h.hoverPoint,p=h.hoverPoints,e=h.tooltip,z=e&&e.shared?p:t;q&&z&&H(A(z),function(f){f.series.isCartesian&&void 0===f.plotX&&(q=!1)});if(q){e&&z&&(e.refresh(z),t&&(t.setState(t.state,!0),H(h.axes,function(f){f.crosshair&&f.drawCrosshair(null,t)})))}else{if(t){t.onMouseOut()}p&&H(p,function(f){f.setState()});if(E){E.onMouseOut()}e&&e.hide(F);this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove());H(h.axes,function(f){f.hideCrosshair()});this.hoverX=h.hoverPoints=h.hoverPoint=null}},scaleGroups:function(h,p){var f=this.chart,m;H(f.series,function(e){m=h||e.getPlotBox();e.xAxis&&e.xAxis.zoomEnabled&&e.group&&(e.group.attr(m),e.markerGroup&&(e.markerGroup.attr(m),e.markerGroup.clip(p?f.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(m))});f.clipRect.attr(p||f.clipBox)},dragStart:function(f){var e=this.chart;e.mouseIsDown=f.type;e.cancelClick=!1;e.mouseDownX=this.mouseDownX=f.chartX;e.mouseDownY=this.mouseDownY=f.chartY},drag:function(S){var R=this.chart,P=R.options.chart,N=S.chartX,E=S.chartY,M=this.zoomHor,z=this.zoomVert,G=R.plotLeft,Q=R.plotTop,F=R.plotWidth,q=R.plotHeight,O,T=this.selectionMarker,p=this.mouseDownX,U=this.mouseDownY,t=P.panKey&&S[P.panKey+"Key"];T&&T.touch||(N<G?N=G:N>G+F&&(N=G+F),E<Q?E=Q:E>Q+q&&(E=Q+q),this.hasDragged=Math.sqrt(Math.pow(p-N,2)+Math.pow(U-E,2)),10<this.hasDragged&&(O=R.isInsidePlot(p-G,U-Q),R.hasCartesianSeries&&(this.zoomX||this.zoomY)&&O&&!t&&!T&&(this.selectionMarker=T=R.renderer.rect(G,Q,M?1:F,z?1:q,0).attr({fill:P.selectionMarkerFill||g("#335cad").setOpacity(0.25).get(),"class":"highcharts-selection-marker",zIndex:7}).add()),T&&M&&(N-=p,T.attr({width:Math.abs(N),x:(0<N?0:N)+p})),T&&z&&(N=E-U,T.attr({height:Math.abs(N),y:(0<N?0:N)+U})),O&&!T&&P.panning&&R.pan(S,P.panning)))},drop:function(O){var M=this,F=this.chart,E=this.hasPinched;if(this.selectionMarker){var q={originalEvent:O,xAxis:[],yAxis:[]},z=this.selectionMarker,p=z.attr?z.attr("x"):z.x,t=z.attr?z.attr("y"):z.y,G=z.attr?z.attr("width"):z.width,N=z.attr?z.attr("height"):z.height,h;if(this.hasDragged||E){H(F.axes,function(m){if(m.zoomEnabled&&o(m.min)&&(E||M[{xAxis:"zoomX",yAxis:"zoomY"}[m.coll]])){var P=m.horiz,e="touchend"===O.type?m.minPixelPadding:0,f=m.toValue((P?p:t)+e),P=m.toValue((P?p+G:t+N)-e);q[m.coll].push({axis:m,min:Math.min(f,P),max:Math.max(f,P)});h=!0}}),h&&C(F,"selection",q,function(e){F.zoom(J(e,E?{animation:!1}:null))})}this.selectionMarker=this.selectionMarker.destroy();E&&this.scaleGroups()}F&&(v(F.container,{cursor:F._cursor}),F.cancelClick=10<this.hasDragged,F.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e);this.zoomOption(e);e.preventDefault&&e.preventDefault();this.dragStart(e)},onDocumentMouseUp:function(e){I[D.hoverChartIndex]&&I[D.hoverChartIndex].pointer.drop(e)},onDocumentMouseMove:function(f){var e=this.chart,h=this.chartPosition;f=this.normalize(f,h);!h||this.inClass(f.target,"highcharts-tracker")||e.isInsidePlot(f.chartX-e.plotLeft,f.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(e){var f=I[D.hoverChartIndex];f&&(e.relatedTarget||e.toElement)&&(f.pointer.reset(),f.pointer.chartPosition=null)},onContainerMouseMove:function(e){var f=this.chart;o(D.hoverChartIndex)&&I[D.hoverChartIndex]&&I[D.hoverChartIndex].mouseIsDown||(D.hoverChartIndex=f.index);e=this.normalize(e);e.returnValue=!1;"mousedown"===f.mouseIsDown&&this.drag(e);!this.inClass(e.target,"highcharts-tracker")&&!f.isInsidePlot(e.chartX-f.plotLeft,e.chartY-f.plotTop)||f.openMenu||this.runPointActions(e)},inClass:function(f,h){for(var e;f;){if(e=L(f,"class")){if(-1!==e.indexOf(h)){return !0}if(-1!==e.indexOf("highcharts-container")){return !1}}f=f.parentNode}},onTrackerMouseOut:function(f){var e=this.chart.hoverSeries;f=f.relatedTarget||f.toElement;this.isDirectTouch=!1;if(!(!e||!f||e.stickyTracking||this.inClass(f,"highcharts-tooltip")||this.inClass(f,"highcharts-series-"+e.index)&&this.inClass(f,"highcharts-tracker"))){e.onMouseOut()}},onContainerClick:function(m){var h=this.chart,t=h.hoverPoint,q=h.plotLeft,p=h.plotTop;m=this.normalize(m);h.cancelClick||(t&&this.inClass(m.target,"highcharts-tracker")?(C(t.series,"click",J(m,{point:t})),h.hoverPoint&&t.firePointEvent("click",m)):(J(m,this.getCoordinates(m)),h.isInsidePlot(m.chartX-q,m.chartY-p)&&C(h,"click",m)))},setDOMEvents:function(){var f=this,m=f.chart.container,h=m.ownerDocument;m.onmousedown=function(e){f.onContainerMouseDown(e)};m.onmousemove=function(e){f.onContainerMouseMove(e)};m.onclick=function(e){f.onContainerClick(e)};this.unbindContainerMouseLeave=K(m,"mouseleave",f.onContainerMouseLeave);D.unbindDocumentMouseUp||(D.unbindDocumentMouseUp=K(h,"mouseup",f.onDocumentMouseUp));D.hasTouch&&(m.ontouchstart=function(e){f.onContainerTouchStart(e)},m.ontouchmove=function(e){f.onContainerTouchMove(e)},D.unbindDocumentTouchEnd||(D.unbindDocumentTouchEnd=K(h,"touchend",f.onDocumentTouchEnd)))},destroy:function(){var e=this;e.unDocMouseMove&&e.unDocMouseMove();this.unbindContainerMouseLeave();D.chartCount||(D.unbindDocumentMouseUp&&(D.unbindDocumentMouseUp=D.unbindDocumentMouseUp()),D.unbindDocumentTouchEnd&&(D.unbindDocumentTouchEnd=D.unbindDocumentTouchEnd()));clearInterval(e.tooltipTimeout);D.objectEach(e,function(f,h){e[h]=null})}}})(a);(function(e){var n=e.charts,o=e.each,g=e.extend,m=e.map,f=e.noop,q=e.pick;g(e.Pointer.prototype,{pinchTranslate:function(t,v,z,w,u,s){this.zoomHor&&this.pinchTranslateDirection(!0,t,v,z,w,u,s);this.zoomVert&&this.pinchTranslateDirection(!1,t,v,z,w,u,s)},pinchTranslateDirection:function(ad,U,P,L,T,R,W,Z){var ab=this.chart,ac=ad?"x":"y",E=ad?"X":"Y",S="chart"+E,I=ad?"width":"height",H=ab["plot"+(ad?"Left":"Top")],K,N,V=Z||1,z=ab.inverted,s=ab.bounds[ad?"h":"v"],O=1===U.length,aa=U[0][S],F=P[0][S],M=!O&&U[1][S],G=!O&&P[1][S],Q;P=function(){!O&&20<Math.abs(aa-M)&&(V=Z||Math.abs(F-G)/Math.abs(aa-M));N=(H-F)/V+aa;K=ab["plot"+(ad?"Width":"Height")]/V};P();U=N;U<s.min?(U=s.min,Q=!0):U+K>s.max&&(U=s.max-K,Q=!0);Q?(F-=0.8*(F-W[ac][0]),O||(G-=0.8*(G-W[ac][1])),P()):W[ac]=[F,G];z||(R[ac]=N-H,R[I]=K);R=z?1/V:V;T[I]=K;T[ac]=U;L[z?ad?"scaleY":"scaleX":"scale"+E]=V;L["translate"+E]=R*H+(F-R*aa)},pinch:function(C){var F=this,h=F.chart,D=F.pinchDown,u=C.touches,p=u.length,v=F.lastValidTouch,z=F.hasZoom,A=F.selectionMarker,B={},E=1===p&&(F.inClass(C.target,"highcharts-tracker")&&h.runTrackerClick||F.runChartClick),s={};1<p&&(F.initiated=!0);z&&F.initiated&&!E&&C.preventDefault();m(u,function(t){return F.normalize(t)});"touchstart"===C.type?(o(u,function(w,t){D[t]={chartX:w.chartX,chartY:w.chartY}}),v.x=[D[0].chartX,D[1]&&D[1].chartX],v.y=[D[0].chartY,D[1]&&D[1].chartY],o(h.axes,function(G){if(G.zoomEnabled){var t=h.bounds[G.horiz?"h":"v"],J=G.minPixelPadding,I=G.toPixels(q(G.options.min,G.dataMin)),H=G.toPixels(q(G.options.max,G.dataMax)),w=Math.max(I,H);t.min=Math.min(G.pos,Math.min(I,H)-J);t.max=Math.max(G.pos+G.len,w+J)}}),F.res=!0):F.followTouchMove&&1===p?this.runPointActions(F.normalize(C)):D.length&&(A||(F.selectionMarker=A=g({destroy:f,touch:!0},h.plotBox)),F.pinchTranslate(D,u,B,A,s,v),F.hasPinched=z,F.scaleGroups(B,s),F.res&&(F.res=!1,this.reset(!1,0)))},touch:function(u,s){var w=this.chart,v,p;if(w.index!==e.hoverChartIndex){this.onContainerMouseLeave({relatedTarget:!0})}e.hoverChartIndex=w.index;1===u.touches.length?(u=this.normalize(u),(p=w.isInsidePlot(u.chartX-w.plotLeft,u.chartY-w.plotTop))&&!w.openMenu?(s&&this.runPointActions(u),"touchmove"===u.type&&(s=this.pinchDown,v=s[0]?4<=Math.sqrt(Math.pow(s[0].chartX-u.chartX,2)+Math.pow(s[0].chartY-u.chartY,2)):!1),q(v,!0)&&this.pinch(u)):s&&this.reset()):2===u.touches.length&&this.pinch(u)},onContainerTouchStart:function(h){this.zoomOption(h);this.touch(h,!0)},onContainerTouchMove:function(h){this.touch(h)},onDocumentTouchEnd:function(p){n[e.hoverChartIndex]&&n[e.hoverChartIndex].pointer.drop(p)}})})(a);(function(C){var J=C.addEvent,K=C.charts,H=C.css,g=C.doc,v=C.extend,o=C.noop,D=C.Pointer,I=C.removeEvent,n=C.win,B=C.wrap;if(!C.hasTouch&&(n.PointerEvent||n.MSPointerEvent)){var u={},s=!!n.PointerEvent,w=function(){var e=[];e.item=function(f){return this[f]};C.objectEach(u,function(f){e.push({pageX:f.pageX,pageY:f.pageY,target:f.target})});return e},A=function(p,f,m,h){"touch"!==p.pointerType&&p.pointerType!==p.MSPOINTER_TYPE_TOUCH||!K[C.hoverChartIndex]||(h(p),h=K[C.hoverChartIndex].pointer,h[f]({type:m,target:p.currentTarget,preventDefault:o,touches:w()}))};v(D.prototype,{onContainerPointerDown:function(e){A(e,"onContainerTouchStart","touchstart",function(f){u[f.pointerId]={pageX:f.pageX,pageY:f.pageY,target:f.currentTarget}})},onContainerPointerMove:function(e){A(e,"onContainerTouchMove","touchmove",function(f){u[f.pointerId]={pageX:f.pageX,pageY:f.pageY};u[f.pointerId].target||(u[f.pointerId].target=f.currentTarget)})},onDocumentPointerUp:function(e){A(e,"onDocumentTouchEnd","touchend",function(f){delete u[f.pointerId]})},batchMSEvents:function(e){e(this.chart.container,s?"pointerdown":"MSPointerDown",this.onContainerPointerDown);e(this.chart.container,s?"pointermove":"MSPointerMove",this.onContainerPointerMove);e(g,s?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});B(D.prototype,"init",function(h,f,m){h.call(this,f,m);this.hasZoom&&H(f.container,{"-ms-touch-action":"none","touch-action":"none"})});B(D.prototype,"setDOMEvents",function(e){e.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(J)});B(D.prototype,"destroy",function(e){this.batchMSEvents(I);e.call(this)})}})(a);(function(A){var H=A.addEvent,I=A.css,C=A.discardElement,e=A.defined,u=A.each,n=A.isFirefox,B=A.marginNames,D=A.merge,g=A.pick,w=A.setAnimation,s=A.stableSort,o=A.win,v=A.wrap;A.Legend=function(f,h){this.init(f,h)};A.Legend.prototype={init:function(f,h){this.chart=f;this.setOptions(h);h.enabled&&(this.render(),H(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(f){var h=g(f.padding,8);this.options=f;this.itemStyle=f.itemStyle;this.itemHiddenStyle=D(this.itemStyle,f.itemHiddenStyle);this.itemMarginTop=f.itemMarginTop||0;this.padding=h;this.initialItemY=h-5;this.itemHeight=this.maxItemWidth=0;this.symbolWidth=g(f.symbolWidth,16);this.pages=[]},update:function(h,m){var f=this.chart;this.setOptions(D(!0,this.options,h));this.destroy();f.isDirtyLegend=f.isDirtyBox=!0;g(m,!0)&&f.redraw()},colorizeItem:function(L,J){L.legendGroup[J?"removeClass":"addClass"]("highcharts-legend-item-hidden");var K=this.options,G=L.legendItem,q=L.legendLine,F=L.legendSymbol,t=this.itemHiddenStyle.color,K=J?K.itemStyle.color:t,p=J?L.color||t:t,z=L.options&&L.options.marker,E={fill:p};G&&G.css({fill:K,color:K});q&&q.attr({stroke:p});F&&(z&&F.isMarker&&(E=L.pointAttribs(),J||(E.stroke=E.fill=t)),F.attr(E))},positionItem:function(p){var z=this.options,h=z.symbolPadding,z=!z.rtl,t=p._legendItemPos,m=t[0],t=t[1],q=p.checkbox;(p=p.legendGroup)&&p.element&&p.translate(z?m:this.legendWidth-m-2*h-4,t);q&&(q.x=m,q.y=t)},destroyItem:function(f){var h=f.checkbox;u(["legendItem","legendLine","legendSymbol","legendGroup"],function(m){f[m]&&(f[m]=f[m].destroy())});h&&C(f.checkbox)},destroy:function(){function f(h){this[h]&&(this[h]=this[h].destroy())}u(this.getAllItems(),function(h){u(["legendItem","legendGroup"],f,h)});u("clipRect up down pager nav box title group".split(" "),f,this);this.display=null},positionCheckboxes:function(){var m=this.group&&this.group.alignAttr,q,h=this.clipHeight||this.legendHeight,p=this.titleHeight;m&&(q=m.translateY,u(this.allItems,function(z){var f=z.checkbox,t;f&&(t=q+p+f.y+(this.scrollOffset||0)+3,I(f,{left:m.translateX+z.checkboxOffset+f.x-20+"px",top:t+"px",display:t>q-6&&t<q+h-6?"":"none"}))},this))},renderTitle:function(){var m=this.options,q=this.padding,h=m.title,p=0;h.text&&(this.title||(this.title=this.chart.renderer.label(h.text,q-3,q-4,null,null,null,m.useHTML,null,"legend-title").attr({zIndex:1}).css(h.style).add(this.group)),m=this.title.getBBox(),p=m.height,this.offsetWidth=m.width,this.contentGroup.attr({translateY:p}));this.titleHeight=p},setText:function(f){var h=this.options;f.legendItem.attr({text:h.labelFormat?A.format(h.labelFormat,f):h.labelFormatter.call(f)})},renderItem:function(ac){var aa=this.chart,ab=aa.renderer,W=this.options,R="horizontal"===W.layout,V=this.symbolWidth,S=W.symbolPadding,Q=this.itemStyle,T=this.itemHiddenStyle,U=this.padding,z=R?g(W.itemDistance,20):0,O=!W.rtl,L=W.width,Z=W.itemMarginBottom||0,F=this.itemMarginTop,K=ac.legendItem,G=!ac.series,P=!G&&ac.series.drawLegendSymbol?ac.series:ac,J=P.options,t=this.createCheckboxForItem&&J&&J.showCheckbox,J=V+S+z+(t?20:0),E=W.useHTML,q=ac.options.className;K||(ac.legendGroup=ab.g("legend-item").addClass("highcharts-"+P.type+"-series highcharts-color-"+ac.colorIndex+(q?" "+q:"")+(G?" highcharts-series-"+ac.index:"")).attr({zIndex:1}).add(this.scrollGroup),ac.legendItem=K=ab.text("",O?V+S:-S,this.baseline||0,E).css(D(ac.visible?Q:T)).attr({align:O?"left":"right",zIndex:2}).add(ac.legendGroup),this.baseline||(V=Q.fontSize,this.fontMetrics=ab.fontMetrics(V,K),this.baseline=this.fontMetrics.f+3+F,K.attr("y",this.baseline)),this.symbolHeight=W.symbolHeight||this.fontMetrics.f,P.drawLegendSymbol(this,ac),this.setItemEvents&&this.setItemEvents(ac,K,E),t&&this.createCheckboxForItem(ac));this.colorizeItem(ac,ac.visible);Q.width||K.css({width:(W.itemWidth||W.width||aa.spacingBox.width)-J});this.setText(ac);ab=K.getBBox();Q=ac.checkboxOffset=W.itemWidth||ac.legendItemWidth||ab.width+J;this.itemHeight=ab=Math.round(ac.legendItemHeight||ab.height||this.symbolHeight);R&&this.itemX-U+Q>(L||aa.spacingBox.width-2*U-W.x)&&(this.itemX=U,this.itemY+=F+this.lastLineHeight+Z,this.lastLineHeight=0);this.maxItemWidth=Math.max(this.maxItemWidth,Q);this.lastItemY=F+this.itemY+Z;this.lastLineHeight=Math.max(ab,this.lastLineHeight);ac._legendItemPos=[this.itemX,this.itemY];R?this.itemX+=Q:(this.itemY+=F+ab+Z,this.lastLineHeight=ab);this.offsetWidth=L||Math.max((R?this.itemX-U-(ac.checkbox?0:z):Q)+U,this.offsetWidth)},getAllItems:function(){var f=[];u(this.chart.series,function(m){var h=m&&m.options;m&&g(h.showInLegend,e(h.linkedTo)?!1:void 0,!0)&&(f=f.concat(m.legendItems||("point"===h.legendType?m.data:m)))});return f},adjustMargins:function(m,q){var f=this.chart,p=this.options,h=p.align.charAt(0)+p.verticalAlign.charAt(0)+p.layout.charAt(0);p.floating||u([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(z,t){z.test(h)&&!e(m[t])&&(f[B[t]]=Math.max(f[B[t]],f.legend[(t+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][t]*p[t%2?"x":"y"]+g(p.margin,12)+q[t]))})},render:function(){var N=this,K=N.chart,M=K.renderer,J=N.group,F,E,z,t,h=N.box,G=N.options,L=N.padding;N.itemX=L;N.itemY=N.initialItemY;N.offsetWidth=0;N.lastItemY=0;J||(N.group=J=M.g("legend").attr({zIndex:7}).add(),N.contentGroup=M.g().attr({zIndex:1}).add(J),N.scrollGroup=M.g().add(N.contentGroup));N.renderTitle();F=N.getAllItems();s(F,function(m,f){return(m.options&&m.options.legendIndex||0)-(f.options&&f.options.legendIndex||0)});G.reversed&&F.reverse();N.allItems=F;N.display=E=!!F.length;N.lastLineHeight=0;u(F,function(f){N.renderItem(f)});z=(G.width||N.offsetWidth)+L;t=N.lastItemY+N.lastLineHeight+N.titleHeight;t=N.handleOverflow(t);t+=L;h||(N.box=h=M.rect().addClass("highcharts-legend-box").attr({r:G.borderRadius}).add(J),h.isNew=!0);h.attr({stroke:G.borderColor,"stroke-width":G.borderWidth||0,fill:G.backgroundColor||"none"}).shadow(G.shadow);0<z&&0<t&&(h[h.isNew?"attr":"animate"](h.crisp.call({},{x:0,y:0,width:z,height:t},h.strokeWidth())),h.isNew=!1);h[E?"show":"hide"]();N.legendWidth=z;N.legendHeight=t;u(F,function(f){N.positionItem(f)});E&&J.align(D(G,{width:z,height:t}),!0,"spacingBox");K.isResizing||this.positionCheckboxes()},handleOverflow:function(Q){var N=this,P=this.chart,L=P.renderer,F=this.options,K=F.y,G=this.padding,P=P.spacingBox.height+("top"===F.verticalAlign?-K:K)-G,K=F.maxHeight,E,q=this.clipRect,J=F.navigation,O=g(J.animation,!0),T=J.arrowSize||12,z=this.nav,M=this.pages,R,h=this.allItems,S=function(f){"number"===typeof f?q.attr({height:f}):q&&(N.clipRect=q.destroy(),N.contentGroup.clip());N.contentGroup.div&&(N.contentGroup.div.style.clip=f?"rect("+G+"px,9999px,"+(G+f)+"px,0)":"auto")};"horizontal"!==F.layout||"middle"===F.verticalAlign||F.floating||(P/=2);K&&(P=Math.min(P,K));M.length=0;Q>P&&!1!==J.enabled?(this.clipHeight=E=Math.max(P-20-this.titleHeight-G,0),this.currentPage=g(this.currentPage,1),this.fullHeight=Q,u(h,function(m,f){var t=m._legendItemPos[1];m=Math.round(m.legendItem.getBBox().height);var p=M.length;if(!p||t-M[p-1]>E&&(R||t)!==M[p-1]){M.push(R||t),p++}f===h.length-1&&t+m-M[p-1]>E&&M.push(t);t!==R&&(R=t)}),q||(q=N.clipRect=L.clipRect(0,G,9999,0),N.contentGroup.clip(q)),S(E),z||(this.nav=z=L.g().attr({zIndex:1}).add(this.group),this.up=L.symbol("triangle",0,0,T,T).on("click",function(){N.scroll(-1,O)}).add(z),this.pager=L.text("",15,10).addClass("highcharts-legend-navigation").css(J.style).add(z),this.down=L.symbol("triangle-down",0,0,T,T).on("click",function(){N.scroll(1,O)}).add(z)),N.scroll(0),Q=P):z&&(S(),this.nav=z.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0);return Q},scroll:function(t,G){var p=this.pages,F=p.length;t=this.currentPage+t;var q=this.clipHeight,E=this.options.navigation,z=this.pager,h=this.padding;t>F&&(t=F);0<t&&(void 0!==G&&w(G,this.chart),this.nav.attr({translateX:h,translateY:q+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({"class":1===t?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),z.attr({text:t+"/"+F}),this.down.attr({x:18+this.pager.getBBox().width,"class":t===F?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===t?E.inactiveColor:E.activeColor}).css({cursor:1===t?"default":"pointer"}),this.down.attr({fill:t===F?E.inactiveColor:E.activeColor}).css({cursor:t===F?"default":"pointer"}),this.scrollOffset=-p[t-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=t,this.positionCheckboxes())}};A.LegendSymbolMixin={drawRectangle:function(h,p){var f=h.symbolHeight,m=h.options.squareSymbol;p.legendSymbol=this.chart.renderer.rect(m?(h.symbolWidth-f)/2:0,h.baseline-f+1,m?f:h.symbolWidth,f,g(h.options.symbolRadius,f/2)).addClass("highcharts-point").attr({zIndex:3}).add(p.legendGroup)},drawLineMarker:function(K){var G=this.options,J=G.marker,F=K.symbolWidth,q=K.symbolHeight,E=q/2,t=this.chart.renderer,p=this.legendGroup;K=K.baseline-Math.round(0.3*K.fontMetrics.b);var z;z={"stroke-width":G.lineWidth||0};G.dashStyle&&(z.dashstyle=G.dashStyle);this.legendLine=t.path(["M",0,K,"L",F,K]).addClass("highcharts-graph").attr(z).add(p);J&&!1!==J.enabled&&(G=Math.min(g(J.radius,E),E),0===this.symbol.indexOf("url")&&(J=D(J,{width:q,height:q}),G=0),this.legendSymbol=J=t.symbol(this.symbol,F/2-G,K-G,2*G,2*G,J).addClass("highcharts-point").add(p),J.isMarker=!0)}};(/Trident\/7\.0/.test(o.navigator.userAgent)||n)&&v(A.Legend.prototype,"positionItem",function(h,p){var f=this,m=function(){p._legendItemPos&&h.call(f,p)};m();setTimeout(m)})})(a);(function(aw){var aa=aw.addEvent,ab=aw.animate,W=aw.animObject,af=aw.attr,ao=aw.doc,aj=aw.Axis,S=aw.createElement,ac=aw.defaultOptions,ah=aw.discardElement,N=aw.charts,an=aw.css,al=aw.defined,aq=aw.each,ar=aw.extend,au=aw.find,av=aw.fireEvent,U=aw.grep,am=aw.isNumber,ad=aw.isObject,T=aw.isString,ae=aw.Legend,L=aw.marginNames,ap=aw.merge,R=aw.objectEach,Q=aw.Pointer,ai=aw.pick,at=aw.pInt,V=aw.removeEvent,ag=aw.seriesTypes,Z=aw.splat,ak=aw.svg,o=aw.syncTimeout,I=aw.win,s=aw.Chart=function(){this.getArgs.apply(this,arguments)};aw.chart=function(f,g,e){return new s(f,g,e)};ar(s.prototype,{callbacks:[],getArgs:function(){var e=[].slice.call(arguments);if(T(e[0])||e[0].nodeName){this.renderTo=e.shift()}this.init(e[0],e[1])},init:function(p,f){var t,q,h=p.series,m=p.plotOptions||{};p.series=null;t=ap(ac,p);for(q in t.plotOptions){t.plotOptions[q].tooltip=m[q]&&ap(m[q].tooltip)||void 0}t.tooltip.userOptions=p.chart&&p.chart.forExport&&p.tooltip.userOptions||p.tooltip;t.series=p.series=h;this.userOptions=p;p=t.chart;q=p.events;this.margin=[];this.spacing=[];this.bounds={h:{},v:{}};this.labelCollectors=[];this.callback=f;this.isResizing=0;this.options=t;this.axes=[];this.series=[];this.hasCartesianSeries=p.showAxes;var g=this;g.index=N.length;N.push(g);aw.chartCount++;q&&R(q,function(e,n){aa(g,n,e)});g.xAxis=[];g.yAxis=[];g.pointCount=g.colorCounter=g.symbolCounter=0;g.firstRender()},initSeries:function(f){var e=this.options.chart;(e=ag[f.type||e.type||e.defaultSeriesType])||aw.error(17,!0);e=new e;e.init(this,f);return e},orderSeries:function(e){var f=this.series;for(e=e||0;e<f.length;e++){f[e]&&(f[e].index=e,f[e].name=f[e].name||"Series "+(f[e].index+1))}},isInsidePlot:function(f,g,e){var h=e?g:f;f=e?f:g;return 0<=h&&h<=this.plotWidth&&0<=f&&f<=this.plotHeight},redraw:function(E){var F=this.axes,D=this.series,p=this.pointer,J=this.legend,t=this.isDirtyLegend,f,K,z=this.hasCartesianSeries,e=this.isDirtyBox,q,C=this.renderer,G=C.isHidden(),H=[];this.setResponsive&&this.setResponsive(!1);aw.setAnimation(E,this);G&&this.temporaryDisplay();this.layOutTitles();for(E=D.length;E--;){if(q=D[E],q.options.stacking&&(f=!0,q.isDirty)){K=!0;break}}if(K){for(E=D.length;E--;){q=D[E],q.options.stacking&&(q.isDirty=!0)}}aq(D,function(g){g.isDirty&&"point"===g.options.legendType&&(g.updateTotals&&g.updateTotals(),t=!0);g.isDirtyData&&av(g,"updatedData")});t&&J.options.enabled&&(J.render(),this.isDirtyLegend=!1);f&&this.getStacks();z&&aq(F,function(g){g.updateNames();g.setScale()});this.getMargins();z&&(aq(F,function(g){g.isDirty&&(e=!0)}),aq(F,function(g){var h=g.min+","+g.max;g.extKey!==h&&(g.extKey=h,H.push(function(){av(g,"afterSetExtremes",ar(g.eventArgs,g.getExtremes()));delete g.eventArgs}));(e||f)&&g.redraw()}));e&&this.drawChartBox();av(this,"predraw");aq(D,function(g){(e||g.isDirty)&&g.visible&&g.redraw();g.isDirtyData=!1});p&&p.reset(!0);C.draw();av(this,"redraw");av(this,"render");G&&this.temporaryDisplay(!0);aq(H,function(g){g.call()})},get:function(f){function m(g){return g.id===f||g.options&&g.options.id===f}var e,h=this.series,p;e=au(this.axes,m)||au(this.series,m);for(p=0;!e&&p<h.length;p++){e=au(h[p].points||[],m)}return e},getAxes:function(){var f=this,g=this.options,e=g.xAxis=Z(g.xAxis||{}),g=g.yAxis=Z(g.yAxis||{});aq(e,function(h,m){h.index=m;h.isX=!0});aq(g,function(h,m){h.index=m});e=e.concat(g);aq(e,function(h){new aj(f,h)})},getSelectedPoints:function(){var e=[];aq(this.series,function(f){e=e.concat(U(f.data||[],function(g){return g.selected}))});return e},getSelectedSeries:function(){return U(this.series,function(e){return e.selected})},setTitle:function(f,h,e){var p=this,m=p.options,g;g=m.title=ap({style:{color:"#333333",fontSize:m.isStock?"16px":"18px"}},m.title,f);m=m.subtitle=ap({style:{color:"#666666"}},m.subtitle,h);aq([["title",f,g],["subtitle",h,m]],function(t,v){var q=t[0],u=p[q],w=t[1];t=t[2];u&&w&&(p[q]=u=u.destroy());t&&!u&&(p[q]=p.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+q,zIndex:t.zIndex||4}).add(),p[q].update=function(n){p.setTitle(!v&&n,v&&n)},p[q].css(t.style))});p.layOutTitles(e)},layOutTitles:function(f){var m=0,e,n=this.renderer,h=this.spacingBox;aq(["title","subtitle"],function(p){var g=this[p],t=this.options[p];p="title"===p?-3:t.verticalAlign?0:m+2;var q;g&&(q=t.style.fontSize,q=n.fontMetrics(q,g).b,g.css({width:(t.width||h.width+t.widthAdjust)+"px"}).align(ar({y:p+q},t),!1,"spacingBox"),t.floating||t.verticalAlign||(m=Math.ceil(m+g.getBBox(t.useHTML).height)))},this);e=this.titleOffset!==m;this.titleOffset=m;!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&ai(f,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var f=this.options.chart,e=f.width,f=f.height,g=this.renderTo;al(e)||(this.containerWidth=aw.getStyle(g,"width"));al(f)||(this.containerHeight=aw.getStyle(g,"height"));this.chartWidth=Math.max(0,e||this.containerWidth||600);this.chartHeight=Math.max(0,aw.relativeLength(f,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},temporaryDisplay:function(f){var e=this.renderTo;if(f){for(;e&&e.style;){e.hcOrigStyle&&(aw.css(e,e.hcOrigStyle),delete e.hcOrigStyle),e.hcOrigDetached&&(ao.body.removeChild(e),e.hcOrigDetached=!1),e=e.parentNode}}else{for(;e&&e.style;){ao.body.contains(e)||e.parentNode||(e.hcOrigDetached=!0,ao.body.appendChild(e));if("none"===aw.getStyle(e,"display",!1)||e.hcOricDetached){e.hcOrigStyle={display:e.style.display,height:e.style.height,overflow:e.style.overflow},f={display:"block",overflow:"hidden"},e!==this.renderTo&&(f.height=0),aw.css(e,f),e.offsetWidth||e.style.setProperty("display","block","important")}e=e.parentNode;if(e===ao.body){break}}}},setClassName:function(e){this.container.className="highcharts-container "+(e||"")},getContainer:function(){var f,t=this.options,p=t.chart,q,h;f=this.renderTo;var e=aw.uniqueKey(),m;f||(this.renderTo=f=p.renderTo);T(f)&&(this.renderTo=f=ao.getElementById(f));f||aw.error(13,!0);q=at(af(f,"data-highcharts-chart"));am(q)&&N[q]&&N[q].hasRendered&&N[q].destroy();af(f,"data-highcharts-chart",this.index);f.innerHTML="";p.skipClone||f.offsetWidth||this.temporaryDisplay();this.getChartSize();q=this.chartWidth;h=this.chartHeight;m=ar({position:"relative",overflow:"hidden",width:q+"px",height:h+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},p.style);this.container=f=S("div",{id:e},m,f);this._cursor=f.style.cursor;this.renderer=new (aw[p.renderer]||aw.Renderer)(f,q,h,null,p.forExport,t.exporting&&t.exporting.allowHTML);this.setClassName(p.className);this.renderer.setStyle(p.style);this.renderer.chartIndex=this.index},getMargins:function(f){var g=this.spacing,e=this.margin,h=this.titleOffset;this.resetMargins();h&&!al(e[0])&&(this.plotTop=Math.max(this.plotTop,h+this.options.title.margin+g[0]));this.legend&&this.legend.display&&this.legend.adjustMargins(e,g);this.extraMargin&&(this[this.extraMargin.type]=(this[this.extraMargin.type]||0)+this.extraMargin.value);this.adjustPlotArea&&this.adjustPlotArea();f||this.getAxisMargins()},getAxisMargins:function(){var f=this,g=f.axisOffset=[0,0,0,0],e=f.margin;f.hasCartesianSeries&&aq(f.axes,function(h){h.visible&&h.getOffset()});aq(L,function(m,h){al(e[h])||(f[m]+=g[h])});f.setChartSize()},reflow:function(m){var e=this,q=e.options.chart,h=e.renderTo,p=al(q.width)&&al(q.height),f=q.width||aw.getStyle(h,"width"),q=q.height||aw.getStyle(h,"height"),h=m?m.target:I;if(!p&&!e.isPrinting&&f&&q&&(h===I||h===ao)){if(f!==e.containerWidth||q!==e.containerHeight){clearTimeout(e.reflowTimeout),e.reflowTimeout=o(function(){e.container&&e.setSize(void 0,void 0,!1)},m?100:0)}e.containerWidth=f;e.containerHeight=q}},initReflow:function(){var e=this,f;f=aa(I,"resize",function(g){e.reflow(g)});aa(e,"destroy",f)},setSize:function(h,p,f){var m=this,e=m.renderer;m.isResizing+=1;aw.setAnimation(f,m);m.oldChartHeight=m.chartHeight;m.oldChartWidth=m.chartWidth;void 0!==h&&(m.options.chart.width=h);void 0!==p&&(m.options.chart.height=p);m.getChartSize();h=e.globalAnimation;(h?ab:an)(m.container,{width:m.chartWidth+"px",height:m.chartHeight+"px"},h);m.setChartSize(!0);e.setSize(m.chartWidth,m.chartHeight,f);aq(m.axes,function(g){g.isDirty=!0;g.setScale()});m.isDirtyLegend=!0;m.isDirtyBox=!0;m.layOutTitles();m.getMargins();m.redraw(f);m.oldChartHeight=null;av(m,"resize");o(function(){m&&av(m,"endResize",null,function(){--m.isResizing})},W(h).duration)},setChartSize:function(C){var w=this.inverted,B=this.renderer,z=this.chartWidth,q=this.chartHeight,h=this.options.chart,D=this.spacing,t=this.clipOffset,m,f,E,p;this.plotLeft=m=Math.round(this.plotLeft);this.plotTop=f=Math.round(this.plotTop);this.plotWidth=E=Math.max(0,Math.round(z-m-this.marginRight));this.plotHeight=p=Math.max(0,Math.round(q-f-this.marginBottom));this.plotSizeX=w?p:E;this.plotSizeY=w?E:p;this.plotBorderWidth=h.plotBorderWidth||0;this.spacingBox=B.spacingBox={x:D[3],y:D[0],width:z-D[3]-D[1],height:q-D[0]-D[2]};this.plotBox=B.plotBox={x:m,y:f,width:E,height:p};z=2*Math.floor(this.plotBorderWidth/2);w=Math.ceil(Math.max(z,t[3])/2);B=Math.ceil(Math.max(z,t[0])/2);this.clipBox={x:w,y:B,width:Math.floor(this.plotSizeX-Math.max(z,t[1])/2-w),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(z,t[2])/2-B))};C||aq(this.axes,function(e){e.setAxisSize();e.setAxisTranslation()})},resetMargins:function(){var e=this,f=e.options.chart;aq(["margin","spacing"],function(h){var n=f[h],m=ad(n)?n:[n,n,n,n];aq(["Top","Right","Bottom","Left"],function(p,g){e[h][g]=ai(f[h+p],m[g])})});aq(L,function(h,g){e[h]=ai(e.margin[g],e.spacing[g])});e.axisOffset=[0,0,0,0];e.clipOffset=[0,0,0,0]},drawChartBox:function(){var aF=this.options.chart,aC=this.renderer,aE=this.chartWidth,aD=this.chartHeight,az=this.chartBackground,M=this.plotBackground,D=this.plotBorder,aB,P=this.plotBGImage,K=aF.backgroundColor,E=aF.plotBackgroundColor,aA=aF.plotBackgroundImage,ax,H=this.plotLeft,O=this.plotTop,ay=this.plotWidth,q=this.plotHeight,z=this.plotBox,G=this.clipRect,J=this.clipBox,F="animate";az||(this.chartBackground=az=aC.rect().addClass("highcharts-background").add(),F="attr");aB=aF.borderWidth||0;ax=aB+(aF.shadow?8:0);K={fill:K||"none"};if(aB||az["stroke-width"]){K.stroke=aF.borderColor,K["stroke-width"]=aB}az.attr(K).shadow(aF.shadow);az[F]({x:ax/2,y:ax/2,width:aE-ax-aB%2,height:aD-ax-aB%2,r:aF.borderRadius});F="animate";M||(F="attr",this.plotBackground=M=aC.rect().addClass("highcharts-plot-background").add());M[F](z);M.attr({fill:E||"none"}).shadow(aF.plotShadow);aA&&(P?P.animate(z):this.plotBGImage=aC.image(aA,H,O,ay,q).add());G?G.animate({width:J.width,height:J.height}):this.clipRect=aC.clipRect(J);F="animate";D||(F="attr",this.plotBorder=D=aC.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add());D.attr({stroke:aF.plotBorderColor,"stroke-width":aF.plotBorderWidth||0,fill:"none"});D[F](D.crisp({x:H,y:O,width:ay,height:q},-D.strokeWidth()));this.isDirtyBox=!1},propFromSeries:function(){var f=this,m=f.options.chart,e,q=f.options.series,h,p;aq(["inverted","angular","polar"],function(g){e=ag[m.type||m.defaultSeriesType];p=m[g]||e&&e.prototype[g];for(h=q&&q.length;!p&&h--;){(e=ag[q[h].type])&&e.prototype[g]&&(p=!0)}f[g]=p})},linkSeries:function(){var e=this,f=e.series;aq(f,function(g){g.linkedSeries.length=0});aq(f,function(h){var g=h.options.linkedTo;T(g)&&(g=":previous"===g?e.series[h.index-1]:e.get(g))&&g.linkedParent!==h&&(g.linkedSeries.push(h),h.linkedParent=g,h.visible=ai(h.options.visible,g.options.visible,h.visible))})},renderSeries:function(){aq(this.series,function(e){e.translate();e.render()})},renderLabels:function(){var f=this,e=f.options.labels;e.items&&aq(e.items,function(q){var m=ar(e.style,q.style),p=at(m.left)+f.plotLeft,h=at(m.top)+f.plotTop+12;delete m.left;delete m.top;f.renderer.text(q.html,p,h).attr({zIndex:2}).css(m).add()})},render:function(){var f=this.axes,m=this.renderer,e=this.options,q,h,p;this.setTitle();this.legend=new ae(this,e.legend);this.getStacks&&this.getStacks();this.getMargins(!0);this.setChartSize();e=this.plotWidth;q=this.plotHeight=Math.max(this.plotHeight-21,0);aq(f,function(g){g.setScale()});this.getAxisMargins();h=1.1<e/this.plotWidth;p=1.05<q/this.plotHeight;if(h||p){aq(f,function(g){(g.horiz&&h||!g.horiz&&p)&&g.setTickInterval(!0)}),this.getMargins()}this.drawChartBox();this.hasCartesianSeries&&aq(f,function(g){g.visible&&g.render()});this.seriesGroup||(this.seriesGroup=m.g("series-group").attr({zIndex:3}).add());this.renderSeries();this.renderLabels();this.addCredits();this.setResponsive&&this.setResponsive();this.hasRendered=!0},addCredits:function(e){var f=this;e=ap(!0,this.options.credits,e);e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){e.href&&(I.location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position),this.credits.update=function(g){f.credits=f.credits.destroy();f.addCredits(g)})},destroy:function(){var p=this,t=p.axes,h=p.series,q=p.container,m,f=q&&q.parentNode;av(p,"destroy");p.renderer.forExport?aw.erase(N,p):N[p.index]=void 0;aw.chartCount--;p.renderTo.removeAttribute("data-highcharts-chart");V(p);for(m=t.length;m--;){t[m]=t[m].destroy()}this.scroller&&this.scroller.destroy&&this.scroller.destroy();for(m=h.length;m--;){h[m]=h[m].destroy()}aq("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(g){var e=p[g];e&&e.destroy&&(p[g]=e.destroy())});q&&(q.innerHTML="",V(q),f&&ah(q));R(p,function(g,e){delete p[e]})},isReadyToRender:function(){var e=this;return ak||I!=I.top||"complete"===ao.readyState?!0:(ao.attachEvent("onreadystatechange",function(){ao.detachEvent("onreadystatechange",e.firstRender);"complete"===ao.readyState&&e.firstRender()}),!1)},firstRender:function(){var e=this,f=e.options;if(e.isReadyToRender()){e.getContainer();av(e,"init");e.resetMargins();e.setChartSize();e.propFromSeries();e.getAxes();aq(f.series||[],function(g){e.initSeries(g)});e.linkSeries();av(e,"beforeRender");Q&&(e.pointer=new Q(e,f));e.render();if(!e.renderer.imgCount&&e.onload){e.onload()}e.temporaryDisplay(!0)}},onload:function(){aq([this.callback].concat(this.callbacks),function(e){e&&void 0!==this.index&&e.apply(this,[this])},this);av(this,"load");av(this,"render");al(this.index)&&!1!==this.options.chart.reflow&&this.initReflow();this.onload=null}})})(a);(function(o){var w,A=o.each,u=o.extend,e=o.erase,m=o.fireEvent,g=o.format,s=o.isArray,v=o.isNumber,f=o.pick,n=o.removeEvent;o.Point=w=function(){};o.Point.prototype={init:function(p,h,q){this.series=p;this.color=p.color;this.applyOptions(h,q);p.options.colorByPoint?(h=p.options.colors||p.chart.options.colors,this.color=this.color||h[p.colorCounter],h=h.length,q=p.colorCounter,p.colorCounter++,p.colorCounter===h&&(p.colorCounter=0)):q=p.colorIndex;this.colorIndex=f(this.colorIndex,q);p.chart.pointCount++;return this},applyOptions:function(p,h){var q=this.series,t=q.options.pointValKey||q.pointValKey;p=w.prototype.optionsToObject.call(this,p);u(this,p);this.options=this.options?u(this.options,p):p;p.group&&delete this.group;t&&(this.y=this[t]);this.isNull=f(this.isValid&&!this.isValid(),null===this.x||!v(this.y,!0));this.selected&&(this.state="select");"name" in this&&void 0===h&&q.xAxis&&q.xAxis.hasNames&&(this.x=q.xAxis.nameToX(this));void 0===this.x&&q&&(this.x=void 0===h?q.autoIncrement(this):h);return this},optionsToObject:function(t){var z={},C=this.series,D=C.options.keys,E=D||C.pointArrayMap||["y"],p=E.length,B=0,q=0;if(v(t)||null===t){z[E[0]]=t}else{if(s(t)){for(!D&&t.length>p&&(C=typeof t[0],"string"===C?z.name=t[0]:"number"===C&&(z.x=t[0]),B++);q<p;){D&&void 0===t[B]||(z[E[q]]=t[B]),B++,q++}}else{"object"===typeof t&&(z=t,t.dataLabels&&(C._hasPointLabels=!0),t.marker&&(C._hasPointMarkers=!0))}}return z},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){var p=this.series,h=p.zones,p=p.zoneAxis||"y",q=0,t;for(t=h[q];this[p]>=t.value;){t=h[++q]}t&&t.color&&!this.options.color&&(this.color=t.color);return t},destroy:function(){var p=this.series.chart,h=p.hoverPoints,q;p.pointCount--;h&&(this.setState(),e(h,this),h.length||(p.hoverPoints=null));if(this===p.hoverPoint){this.onMouseOut()}if(this.graphic||this.dataLabel){n(this),this.destroyElements()}this.legendItem&&p.legend.destroyItem(this);for(q in this){this[q]=null}},destroyElements:function(){for(var p=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],h,q=6;q--;){h=p[q],this[h]&&(this[h]=this[h].destroy())}},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(p){var q=this.series,t=q.tooltipOptions,z=f(t.valueDecimals,""),B=t.valuePrefix||"",h=t.valueSuffix||"";A(q.pointArrayMap||["y"],function(C){C="{point."+C;if(B||h){p=p.replace(C+"}",B+C+"}"+h)}p=p.replace(C+"}",C+":,."+z+"f}")});return g(p,{point:this,series:this.series})},firePointEvent:function(p,h,q){var t=this,z=this.series.options;(z.point.events[p]||t.options&&t.options.events&&t.options.events[p])&&this.importEvents();"click"===p&&z.allowPointSelect&&(q=function(B){t.select&&t.select(null,B.ctrlKey||B.metaKey||B.shiftKey)});m(this,p,h,q)},visible:!0}})(a);(function(ae){var L=ae.addEvent,M=ae.animObject,I=ae.arrayMax,Q=ae.arrayMin,W=ae.correctFloat,S=ae.Date,v=ae.defaultOptions,N=ae.defaultPlotOptions,R=ae.defined,o=ae.each,V=ae.erase,T=ae.extend,aa=ae.fireEvent,ab=ae.grep,ac=ae.isArray,ad=ae.isNumber,B=ae.isString,U=ae.merge,O=ae.objectEach,A=ae.pick,P=ae.removeEvent,n=ae.splat,Z=ae.SVGElement,u=ae.syncTimeout,s=ae.win;ae.Series=ae.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1000},events:{},marker:{lineWidth:0,lineColor:"#ffffff",radius:4,states:{hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":ae.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1000,findNearestPointBy:"x"},{isCartesian:!0,pointClass:ae.Point,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(f,m){var e=this,q,h=f.series,p;e.chart=f;e.options=m=e.setOptions(m);e.linkedSeries=[];e.bindAxes();T(e,{name:m.name,state:"",visible:!1!==m.visible,selected:!0===m.selected});q=m.events;O(q,function(g,t){L(e,t,g)});if(q&&q.click||m.point&&m.point.events&&m.point.events.click||m.allowPointSelect){f.runTrackerClick=!0}e.getColor();e.getSymbol();o(e.parallelArrays,function(g){e[g+"Data"]=[]});e.setData(m.data,!1);e.isCartesian&&(f.hasCartesianSeries=!0);h.length&&(p=h[h.length-1]);e._i=A(p&&p._i,-1)+1;f.orderSeries(this.insert(h))},insert:function(e){var f=this.options.index,g;if(ad(f)){for(g=e.length;g--;){if(f>=A(e[g].options.index,e[g]._i)){e.splice(g+1,0,this);break}}-1===g&&e.unshift(this);g+=1}else{e.push(this)}return A(g,e.length-1)},bindAxes:function(){var e=this,h=e.options,m=e.chart,f;o(e.axisTypes||[],function(g){o(m[g],function(p){f=p.options;if(h[g]===f.index||void 0!==h[g]&&h[g]===f.id||void 0===h[g]&&0===f.index){e.insert(p.series),e[g]=p,p.isDirty=!0}});e[g]||e.optionalAxis===g||ae.error(18,!0)})},updateParallelArrays:function(f,p){var q=f.series,h=arguments,m=ad(p)?function(e){var t="y"===e&&q.toYData?q.toYData(f):f[e];q[e+"Data"][p]=t}:function(e){Array.prototype[p].apply(q[e+"Data"],Array.prototype.slice.call(h,2))};o(q.parallelArrays,m)},autoIncrement:function(){var f=this.options,g=this.xIncrement,e,h=f.pointIntervalUnit,g=A(g,f.pointStart,0);this.pointInterval=e=A(this.pointInterval,f.pointInterval,1);h&&(f=new S(g),"day"===h?f=+f[S.hcSetDate](f[S.hcGetDate]()+e):"month"===h?f=+f[S.hcSetMonth](f[S.hcGetMonth]()+e):"year"===h&&(f=+f[S.hcSetFullYear](f[S.hcGetFullYear]()+e)),e=f-g);this.xIncrement=g+e;return g},setOptions:function(f){var m=this.chart,e=m.options,q=e.plotOptions,h=(m.userOptions||{}).plotOptions||{},p=q[this.type];this.userOptions=f;m=U(p,q.series,f);this.tooltipOptions=U(v.tooltip,v.plotOptions.series&&v.plotOptions.series.tooltip,v.plotOptions[this.type].tooltip,e.tooltip.userOptions,q.series&&q.series.tooltip,q[this.type].tooltip,f.tooltip);this.stickyTracking=A(f.stickyTracking,h[this.type]&&h[this.type].stickyTracking,h.series&&h.series.stickyTracking,this.tooltipOptions.shared&&!this.noSharedTooltip?!0:m.stickyTracking);null===p.marker&&delete m.marker;this.zoneAxis=m.zoneAxis;f=this.zones=(m.zones||[]).slice();!m.negativeColor&&!m.negativeFillColor||m.zones||f.push({value:m[this.zoneAxis+"Threshold"]||m.threshold||0,className:"highcharts-negative",color:m.negativeColor,fillColor:m.negativeFillColor});f.length&&R(f[f.length-1].value)&&f.push({color:this.color,fillColor:this.fillColor});return m},getCyclic:function(z,q,w){var t,m=this.chart,f=this.userOptions,p=z+"Index",C=z+"Counter",h=w?w.length:A(m.options.chart[z+"Count"],m[z+"Count"]);q||(t=A(f[p],f["_"+p]),R(t)||(m.series.length||(m[C]=0),f["_"+p]=t=m[C]%h,m[C]+=1),w&&(q=w[t]));void 0!==t&&(this[p]=t);this[z]=q},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||N[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},drawLegendSymbol:ae.LegendSymbolMixin.drawLineMarker,setData:function(K,ah,ag,G){var aj=this,E=aj.points,af=E&&E.length||0,D,H=aj.options,F=aj.chart,z=null,J=aj.xAxis,ai=H.turboThreshold,q=this.xData,w=this.yData,ak=(D=aj.pointArrayMap)&&D.length;K=K||[];D=K.length;ah=A(ah,!0);if(!1!==G&&D&&af===D&&!aj.cropped&&!aj.hasGroupedData&&aj.visible){o(K,function(e,f){E[f].update&&e!==H.data[f]&&E[f].update(e,!1,null,!1)})}else{aj.xIncrement=null;aj.colorCounter=0;o(this.parallelArrays,function(e){aj[e+"Data"].length=0});if(ai&&D>ai){for(ag=0;null===z&&ag<D;){z=K[ag],ag++}if(ad(z)){for(ag=0;ag<D;ag++){q[ag]=this.autoIncrement(),w[ag]=K[ag]}}else{if(ac(z)){if(ak){for(ag=0;ag<D;ag++){z=K[ag],q[ag]=z[0],w[ag]=z.slice(1,ak+1)}}else{for(ag=0;ag<D;ag++){z=K[ag],q[ag]=z[0],w[ag]=z[1]}}}else{ae.error(12)}}}else{for(ag=0;ag<D;ag++){void 0!==K[ag]&&(z={series:aj},aj.pointClass.prototype.applyOptions.apply(z,[K[ag]]),aj.updateParallelArrays(z,ag))}}w&&B(w[0])&&ae.error(14,!0);aj.data=[];aj.options.data=aj.userOptions.data=K;for(ag=af;ag--;){E[ag]&&E[ag].destroy&&E[ag].destroy()}J&&(J.minRange=J.userMinRange);aj.isDirty=F.isDirtyBox=!0;aj.isDirtyData=!!E;ag=!1}"point"===H.legendType&&(this.processData(),this.generatePoints());ah&&F.redraw(ag)},processData:function(aj){var ag=this.xData,ah=this.yData,J=ag.length,af;af=0;var D,F,K=this.xAxis,z,G=this.options;z=G.cropThreshold;var E=this.getExtremesFromAll||G.getExtremesFromAll,H=this.isCartesian,G=K&&K.val2lin,ai=K&&K.isLog,ak=this.requireSorting,q,t;if(H&&!this.isDirty&&!K.isDirty&&!this.yAxis.isDirty&&!aj){return !1}K&&(aj=K.getExtremes(),q=aj.min,t=aj.max);if(H&&this.sorted&&!E&&(!z||J>z||this.forceCrop)){if(ag[J-1]<q||ag[0]>t){ag=[],ah=[]}else{if(ag[0]<q||ag[J-1]>t){af=this.cropData(this.xData,this.yData,q,t),ag=af.xData,ah=af.yData,af=af.start,D=!0}}}for(z=ag.length||1;--z;){J=ai?G(ag[z])-G(ag[z-1]):ag[z]-ag[z-1],0<J&&(void 0===F||J<F)?F=J:0>J&&ak&&(ae.error(15),ak=!1)}this.cropped=D;this.cropStart=af;this.processedXData=ag;this.processedYData=ah;this.closestPointRange=F},cropData:function(z,q,w,t){var m=z.length,f=0,p=m,C=A(this.cropShoulder,1),h;for(h=0;h<m;h++){if(z[h]>=w){f=Math.max(0,h-C);break}}for(w=h;w<m;w++){if(z[w]>t){p=w+C;break}}return{xData:z.slice(f,p),yData:q.slice(f,p),start:f,end:p}},generatePoints:function(){var af=this.options,G=af.data,K=this.data,H,D=this.processedXData,p=this.processedYData,F=this.pointClass,t=D.length,E=this.cropStart||0,z,q=this.hasGroupedData,af=af.keys,C,J=[],ag;K||q||(K=[],K.length=G.length,K=this.data=K);af&&q&&(this.options.keys=!1);for(ag=0;ag<t;ag++){z=E+ag,q?(C=(new F).init(this,[D[ag]].concat(n(p[ag]))),C.dataGroup=this.groupMap[ag]):(C=K[z])||void 0===G[z]||(K[z]=C=(new F).init(this,G[z],D[ag])),C&&(C.index=z,J[ag]=C)}this.options.keys=af;if(K&&(t!==(H=K.length)||q)){for(ag=0;ag<H;ag++){ag!==E||q||(ag+=t),K[ag]&&(K[ag].destroyElements(),K[ag].plotX=void 0)}}this.data=K;this.points=J},getExtremes:function(J){var G=this.yAxis,D=this.processedXData,F,w=[],q=0;F=this.xAxis.getExtremes();var E=F.min,z=F.max,p,t,C,H;J=J||this.stackedYData||this.processedYData||[];F=J.length;for(H=0;H<F;H++){if(t=D[H],C=J[H],p=(ad(C,!0)||ac(C))&&(!G.positiveValuesOnly||C.length||0<C),t=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(D[H+1]||t)>=E&&(D[H-1]||t)<=z,p&&t){if(p=C.length){for(;p--;){null!==C[p]&&(w[q++]=C[p])}}else{w[q++]=C}}}this.dataMin=Q(w);this.dataMax=I(w)},translate:function(){this.processedXData||this.processData();this.generatePoints();var aw=this.options,au=aw.stacking,av=this.xAxis,aq=av.categories,at=this.yAxis,am=this.points,ao=am.length,ar=!!this.modifyValue,ap=aw.pointPlacement,an="between"===ap||ad(ap),G=aw.threshold,af=aw.startFromThreshold?G:0,ak,al,ah,ai,F=Number.MAX_VALUE;"between"===ap&&(ap=0.5);ad(ap)&&(ap*=A(aw.pointRange||av.pointRange));for(aw=0;aw<ao;aw++){var aj=am[aw],H=aj.x,q=aj.y;al=aj.low;var h=au&&at.stacks[(this.negStacks&&q<(af?0:G)?"-":"")+this.stackKey],ag;at.positiveValuesOnly&&null!==q&&0>=q&&(aj.isNull=!0);aj.plotX=ak=W(Math.min(Math.max(-100000,av.translate(H,0,0,0,1,ap,"flags"===this.type)),100000));au&&this.visible&&!aj.isNull&&h&&h[H]&&(ai=this.getStackIndicator(ai,H,this.index),ag=h[H],q=ag.points[ai.key],al=q[0],q=q[1],al===af&&ai.key===h[H].base&&(al=A(G,at.min)),at.positiveValuesOnly&&0>=al&&(al=null),aj.total=aj.stackTotal=ag.total,aj.percentage=ag.total&&aj.y/ag.total*100,aj.stackY=q,ag.setOffset(this.pointXOffset||0,this.barW||0));aj.yBottom=R(al)?at.translate(al,0,1,0,1):null;ar&&(q=this.modifyValue(q,aj));aj.plotY=al="number"===typeof q&&Infinity!==q?Math.min(Math.max(-100000,at.translate(q,0,1,0,1)),100000):void 0;aj.isInside=void 0!==al&&0<=al&&al<=at.len&&0<=ak&&ak<=av.len;aj.clientX=an?W(av.translate(H,0,0,0,1,ap)):ak;aj.negative=aj.y<(G||0);aj.category=aq&&void 0!==aq[aj.x]?aq[aj.x]:aj.x;aj.isNull||(void 0!==ah&&(F=Math.min(F,Math.abs(ak-ah))),ah=ak);aj.zone=this.zones.length&&aj.getZone()}this.closestPointRangePx=F},getValidPoints:function(f,g){var e=this.chart;return ab(f||this.points||[],function(h){return g&&!e.isInsidePlot(h.plotX,h.plotY,e.inverted)?!1:!h.isNull})},setClip:function(E){var z=this.chart,D=this.options,C=z.renderer,q=z.inverted,h=this.clipBox,w=h||z.clipBox,m=this.sharedClipKey||["_sharedClip",E&&E.duration,E&&E.easing,w.height,D.xAxis,D.yAxis].join(),t=z[m],p=z[m+"m"];t||(E&&(w.width=0,q&&(w.x=z.plotSizeX),z[m+"m"]=p=C.clipRect(q?z.plotSizeX+99:-99,q?-z.plotLeft:-z.plotTop,99,q?z.chartWidth:z.chartHeight)),z[m]=t=C.clipRect(w),t.count={length:0});E&&!t.count[this.index]&&(t.count[this.index]=!0,t.count.length+=1);!1!==D.clip&&(this.group.clip(E||h?t:z.clipRect),this.markerGroup.clip(p),this.sharedClipKey=m);E||(t.count[this.index]&&(delete t.count[this.index],--t.count.length),0===t.count.length&&m&&z[m]&&(h||(z[m]=z[m].destroy()),z[m+"m"]&&(z[m+"m"]=z[m+"m"].destroy())))},animate:function(f){var g=this.chart,e=M(this.options.animation),h;f?this.setClip(e):(h=this.sharedClipKey,(f=g[h])&&f.animate({width:g.plotSizeX,x:0},e),g[h+"m"]&&g[h+"m"].animate({width:g.plotSizeX+99,x:0},e),this.animate=null)},afterAnimate:function(){this.setClip();aa(this,"afterAnimate");this.finishedAnimating=!0},drawPoints:function(){var K=this.points,F=this.chart,J,G,C,p,E=this.options.marker,t,D,w,q=this[this.specialGroup]||this.markerGroup,z,H=A(E.enabled,this.xAxis.isRadial?!0:null,this.closestPointRangePx>=2*E.radius);if(!1!==E.enabled||this._hasPointMarkers){for(J=0;J<K.length;J++){G=K[J],p=G.graphic,t=G.marker||{},D=!!G.marker,C=H&&void 0===t.enabled||t.enabled,w=G.isInside,C&&!G.isNull?(C=A(t.symbol,this.symbol),G.hasImage=0===C.indexOf("url"),z=this.markerAttribs(G,G.selected&&"select"),p?p[w?"show":"hide"](!0).animate(z):w&&(0<z.width||G.hasImage)&&(G.graphic=p=F.renderer.symbol(C,z.x,z.y,z.width,z.height,D?t:E).add(q)),p&&p.attr(this.pointAttribs(G,G.selected&&"select")),p&&p.addClass(G.getClassName(),!0)):p&&(G.graphic=p.destroy())}}},markerAttribs:function(f,m){var e=this.options.marker,p=f.marker||{},h=A(p.radius,e.radius);m&&(e=e.states[m],m=p.states&&p.states[m],h=A(m&&m.radius,e&&e.radius,h+(e&&e.radiusPlus||0)));f.hasImage&&(h=0);f={x:Math.floor(f.plotX)-h,y:f.plotY-h};h&&(f.width=f.height=2*h);return f},pointAttribs:function(m,t){var f=this.options.marker,z=m&&m.options,p=z&&z.marker||{},w=this.color,q=z&&z.color,h=m&&m.color,z=A(p.lineWidth,f.lineWidth);m=m&&m.zone&&m.zone.color;w=q||m||h||w;m=p.fillColor||f.fillColor||w;w=p.lineColor||f.lineColor||w;t&&(f=f.states[t],t=p.states&&p.states[t]||{},z=A(t.lineWidth,f.lineWidth,z+A(t.lineWidthPlus,f.lineWidthPlus,0)),m=t.fillColor||f.fillColor||m,w=t.lineColor||f.lineColor||w);return{stroke:w,"stroke-width":z,fill:m}},destroy:function(){var p=this,t=p.chart,g=/AppleWebKit\/533/.test(s.navigator.userAgent),z,q,w=p.data||[],h,f;aa(p,"destroy");P(p);o(p.axisTypes||[],function(e){(f=p[e])&&f.series&&(V(f.series,p),f.isDirty=f.forceRedraw=!0)});p.legendItem&&p.chart.legend.destroyItem(p);for(q=w.length;q--;){(h=w[q])&&h.destroy&&h.destroy()}p.points=null;clearTimeout(p.animationTimeout);O(p,function(e,m){e instanceof Z&&!e.survive&&(z=g&&"group"===m?"hide":"destroy",e[z]())});t.hoverSeries===p&&(t.hoverSeries=null);V(t.series,p);t.orderSeries();O(p,function(m,e){delete p[e]})},getGraphPath:function(D,w,C){var z=this,p=z.options,t=p.step,h,E=[],q=[],m;D=D||z.points;(h=D.reversed)&&D.reverse();(t={right:1,center:2}[t]||t&&3)&&h&&(t=4-t);!p.connectNulls||w||C||(D=this.getValidPoints(D));o(D,function(G,g){var f=G.plotX,F=G.plotY,e=D[g-1];(G.leftCliff||e&&e.rightCliff)&&!C&&(m=!0);G.isNull&&!R(w)&&0<g?m=!p.connectNulls:G.isNull&&!w?m=!0:(0===g||m?g=["M",G.plotX,G.plotY]:z.getPointSpline?g=z.getPointSpline(D,G,g):t?(g=1===t?["L",e.plotX,F]:2===t?["L",(e.plotX+f)/2,e.plotY,"L",(e.plotX+f)/2,F]:["L",f,e.plotY],g.push("L",f,F)):g=["L",f,F],q.push(G.x),t&&q.push(G.x),E.push.apply(E,g),m=!1)});E.xMap=q;return z.graphPath=E},drawGraph:function(){var f=this,g=this.options,e=(this.gappedPath||this.getGraphPath).call(this),h=[["graph","highcharts-graph",g.lineColor||this.color,g.dashStyle]];o(this.zones,function(m,p){h.push(["zone-graph-"+p,"highcharts-graph highcharts-zone-graph-"+p+" "+(m.className||""),m.color||f.color,m.dashStyle||g.dashStyle])});o(h,function(t,m){var p=t[0],q=f[p];q?(q.endX=f.preventGraphAnimation?null:e.xMap,q.animate({d:e})):e.length&&(f[p]=f.chart.renderer.path(e).addClass(t[1]).attr({zIndex:1}).add(f.group),q={stroke:t[2],"stroke-width":g.lineWidth,fill:f.fillGraph&&f.color||"none"},t[3]?q.dashstyle=t[3]:"square"!==g.linecap&&(q["stroke-linecap"]=q["stroke-linejoin"]="round"),q=f[p].attr(q).shadow(2>m&&g.shadow));q&&(q.startX=e.xMap,q.isArea=e.isArea)})},applyZones:function(){var at=this,ap=this.chart,ar=ap.renderer,aq=this.zones,am,ao,aj=this.clips||[],an,ak=this.graph,ai=this.area,al=Math.max(ap.chartWidth,ap.chartHeight),E=this[(this.zoneAxis||"y")+"Axis"],F,af,ah=ap.inverted,G,H,ag,z,K=!1;aq.length&&(ak||ai)&&E&&void 0!==E.min&&(af=E.reversed,G=E.horiz,ak&&ak.hide(),ai&&ai.hide(),F=E.getExtremes(),o(aq,function(f,e){am=af?G?ap.plotWidth:0:G?0:E.toPixels(F.min);am=Math.min(Math.max(A(ao,am),0),al);ao=Math.min(Math.max(Math.round(E.toPixels(A(f.value,F.max),!0)),0),al);K&&(am=ao=E.toPixels(F.max));H=Math.abs(am-ao);ag=Math.min(am,ao);z=Math.max(am,ao);E.isXAxis?(an={x:ah?z:ag,y:0,width:H,height:al},G||(an.x=ap.plotHeight-an.x)):(an={x:0,y:ah?z:ag,width:al,height:H},G&&(an.y=ap.plotWidth-an.y));ah&&ar.isVML&&(an=E.isXAxis?{x:0,y:af?ag:z,height:an.width,width:ap.chartWidth}:{x:an.y-ap.plotLeft-ap.spacingBox.x,y:0,width:an.height,height:ap.chartHeight});aj[e]?aj[e].animate(an):(aj[e]=ar.clipRect(an),ak&&at["zone-graph-"+e].clip(aj[e]),ai&&at["zone-area-"+e].clip(aj[e]));K=f.value>F.max}),this.clips=aj)},invertGroups:function(f){function m(){o(["group","markerGroup"],function(g){e[g]&&(p.renderer.isVML&&e[g].attr({width:e.yAxis.len,height:e.xAxis.len}),e[g].width=e.yAxis.len,e[g].height=e.xAxis.len,e[g].invert(f))})}var e=this,p=e.chart,h;e.xAxis&&(h=L(p,"resize",m),L(e,"destroy",h),m(f),e.invertGroups=m)},plotGroup:function(m,t,f,w,p){var q=this[m],h=!q;h&&(this[m]=q=this.chart.renderer.g().attr({zIndex:w||0.1}).add(p));q.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(R(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(q.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0);q.attr({visibility:f})[h?"attr":"animate"](this.getPlotBox());return q},getPlotBox:function(){var f=this.chart,g=this.xAxis,e=this.yAxis;f.inverted&&(g=e,e=this.xAxis);return{translateX:g?g.left:f.plotLeft,translateY:e?e.top:f.plotTop,scaleX:1,scaleY:1}},render:function(){var F=this,C=F.chart,E,D=F.options,t=!!F.animate&&C.renderer.isSVG&&M(D.animation).duration,z=F.visible?"inherit":"hidden",p=D.zIndex,w=F.hasRendered,q=C.seriesGroup,h=C.inverted;E=F.plotGroup("group","series",z,p,q);F.markerGroup=F.plotGroup("markerGroup","markers",z,p,q);t&&F.animate(!0);E.inverted=F.isCartesian?h:!1;F.drawGraph&&(F.drawGraph(),F.applyZones());F.drawDataLabels&&F.drawDataLabels();F.visible&&F.drawPoints();F.drawTracker&&!1!==F.options.enableMouseTracking&&F.drawTracker();F.invertGroups(h);!1===D.clip||F.sharedClipKey||w||E.clip(C.clipRect);t&&F.animate();w||(F.animationTimeout=u(function(){F.afterAnimate()},t));F.isDirty=!1;F.hasRendered=!0},redraw:function(){var f=this.chart,m=this.isDirty||this.isDirtyData,e=this.group,p=this.xAxis,h=this.yAxis;e&&(f.inverted&&e.attr({width:f.plotWidth,height:f.plotHeight}),e.animate({translateX:A(p&&p.left,f.plotLeft),translateY:A(h&&h.top,f.plotTop)}));this.translate();this.render();m&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(f,m){var e=this.xAxis,p=this.yAxis,h=this.chart.inverted;return this.searchKDTree({clientX:h?e.len-f.chartY+e.pos:f.chartX-e.pos,plotY:h?p.len-f.chartX+p.pos:f.chartY-p.pos},m)},buildKDTree:function(){function f(h,t,m){var p,q;if(q=h&&h.length){return p=g.kdAxisArray[t%m],h.sort(function(w,z){return w[p]-z[p]}),q=Math.floor(q/2),{point:h[q],left:f(h.slice(0,q),t+1,m),right:f(h.slice(q+1),t+1,m)}}}this.buildingKdTree=!0;var g=this,e=-1<g.options.findNearestPointBy.indexOf("y")?2:1;delete g.kdTree;u(function(){g.kdTree=f(g.getValidPoints(null,!g.directTouch),e,e);g.buildingKdTree=!1},g.options.kdNow?0:1)},searchKDTree:function(m,t){function f(G,E,e,D){var H=E.point,z=w.kdAxisArray[e%D],g,C,F=H;C=R(G[p])&&R(H[p])?Math.pow(G[p]-H[p],2):null;g=R(G[q])&&R(H[q])?Math.pow(G[q]-H[q],2):null;g=(C||0)+(g||0);H.dist=R(g)?Math.sqrt(g):Number.MAX_VALUE;H.distX=R(C)?Math.sqrt(C):Number.MAX_VALUE;z=G[z]-H[z];g=0>z?"left":"right";C=0>z?"right":"left";E[g]&&(g=f(G,E[g],e+1,D),F=g[h]<F[h]?g:H);E[C]&&Math.sqrt(z*z)<F[h]&&(G=f(G,E[C],e+1,D),F=G[h]<F[h]?G:F);return F}var w=this,p=this.kdAxisArray[0],q=this.kdAxisArray[1],h=t?"distX":"dist";t=-1<w.options.findNearestPointBy.indexOf("y")?2:1;this.kdTree||this.buildingKdTree||this.buildKDTree();if(this.kdTree){return f(m,this.kdTree,t,t)}}})})(a);(function(o){var w=o.Axis,A=o.Chart,u=o.correctFloat,e=o.defined,m=o.destroyObjectProperties,g=o.each,s=o.format,v=o.objectEach,f=o.pick,n=o.Series;o.StackItem=function(q,p,t,z,B){var h=q.chart.inverted;this.axis=q;this.isNegative=t;this.options=p;this.x=z;this.total=null;this.points={};this.stack=B;this.rightCliff=this.leftCliff=0;this.alignOptions={align:p.align||(h?t?"left":"right":"center"),verticalAlign:p.verticalAlign||(h?"middle":t?"bottom":"top"),y:f(p.y,h?4:t?14:-6),x:f(p.x,h?t?-6:6:0)};this.textAlign=p.textAlign||(h?t?"right":"left":"center")};o.StackItem.prototype={destroy:function(){m(this,this.axis)},render:function(h){var p=this.options,q=p.format,q=q?s(q,this):p.formatter.call(this);this.label?this.label.attr({text:q,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(q,null,null,p.useHTML).css(p.style).attr({align:this.textAlign,rotation:p.rotation,visibility:"hidden"}).add(h)},setOffset:function(p,h){var q=this.axis,t=q.chart,z=q.translate(q.usePercentage?100:this.total,0,0,0,1),q=q.translate(0),q=Math.abs(z-q);p=t.xAxis[0].translate(this.x)+p;z=this.getStackBox(t,this,p,z,h,q);if(h=this.label){h.align(this.alignOptions,null,z),z=h.alignAttr,h[!1===this.options.crop||t.isInsidePlot(z.x,z.y)?"show":"hide"](!0)}},getStackBox:function(t,p,B,C,D,h){var z=p.axis.reversed,q=t.inverted;t=t.plotHeight;p=p.isNegative&&!z||!p.isNegative&&z;return{x:q?p?C:C-h:B,y:q?t-B-D:p?t-C-h:t-C,width:q?h:D,height:q?D:h}}};A.prototype.getStacks=function(){var h=this;g(h.yAxis,function(p){p.stacks&&p.hasVisibleSeries&&(p.oldStacks=p.stacks)});g(h.series,function(p){!p.options.stacking||!0!==p.visible&&!1!==h.options.chart.ignoreHiddenSeries||(p.stackKey=p.type+f(p.options.stack,""))})};w.prototype.buildStacks=function(){var p=this.series,h=f(this.options.reversedStacks,!0),q=p.length,t;if(!this.isXAxis){this.usePercentage=!1;for(t=q;t--;){p[h?t:q-t-1].setStackedPoints()}for(t=0;t<q;t++){p[t].modifyStacks()}}};w.prototype.renderStackTotals=function(){var p=this.chart,h=p.renderer,q=this.stacks,t=this.stackTotalGroup;t||(this.stackTotalGroup=t=h.g("stack-labels").attr({visibility:"visible",zIndex:6}).add());t.translate(p.plotLeft,p.plotTop);v(q,function(z){v(z,function(B){B.render(t)})})};w.prototype.resetStacks=function(){var p=this,h=p.stacks;p.isXAxis||v(h,function(q){v(q,function(t,z){t.touched<p.stacksTouched?(t.destroy(),delete q[z]):(t.total=null,t.cum=null)})})};w.prototype.cleanStacks=function(){var h;this.isXAxis||(this.oldStacks&&(h=this.stacks=this.oldStacks),v(h,function(p){v(p,function(q){q.cum=q.total})}))};n.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var P=this.processedXData,N=this.processedYData,S=[],T=N.length,V=this.options,W=V.threshold,Q=V.startFromThreshold?W:0,O=V.stack,V=V.stacking,L=this.stackKey,G="-"+L,H=this.negStacks,D=this.yAxis,R=D.stacks,z=D.oldStacks,q,K,U,E,I,F,M;D.stacksTouched+=1;for(I=0;I<T;I++){F=P[I],M=N[I],q=this.getStackIndicator(q,F,this.index),E=q.key,U=(K=H&&M<(Q?0:W))?G:L,R[U]||(R[U]={}),R[U][F]||(z[U]&&z[U][F]?(R[U][F]=z[U][F],R[U][F].total=null):R[U][F]=new o.StackItem(D,D.options.stackLabels,K,F,O)),U=R[U][F],null!==M&&(U.points[E]=U.points[this.index]=[f(U.cum,Q)],e(U.cum)||(U.base=E),U.touched=D.stacksTouched,0<q.index&&!1===this.singleStacks&&(U.points[E][0]=U.points[this.index+","+F+",0"][0])),"percent"===V?(K=K?L:G,H&&R[K]&&R[K][F]?(K=R[K][F],U.total=K.total=Math.max(K.total,U.total)+Math.abs(M)||0):U.total=u(U.total+(Math.abs(M)||0))):U.total=u(U.total+(M||0)),U.cum=f(U.cum,Q)+(M||0),null!==M&&(U.points[E].push(U.cum),S[I]=U.cum)}"percent"===V&&(D.usePercentage=!0);this.stackedYData=S;D.oldStacks={}}};n.prototype.modifyStacks=function(){var q=this,p=q.stackKey,t=q.yAxis.stacks,z=q.processedXData,B,h=q.options.stacking;q[h+"Stacker"]&&g([p,"-"+p],function(E){for(var D=z.length,C,F;D--;){if(C=z[D],B=q.getStackIndicator(B,C,q.index,E),F=(C=t[E]&&t[E][C])&&C.points[B.key]){q[h+"Stacker"](F,C,D)}}})};n.prototype.percentStacker=function(p,h,q){h=h.total?100/h.total:0;p[0]=u(p[0]*h);p[1]=u(p[1]*h);this.stackedYData[q]=p[1]};n.prototype.getStackIndicator=function(p,h,q,t){!e(p)||p.x!==h||t&&p.key!==t?p={x:h,index:0,key:t}:p.index++;p.key=[q,h,p.index].join();return p}})(a);(function(Z){var A=Z.addEvent,B=Z.animate,v=Z.Axis,M=Z.createElement,S=Z.css,O=Z.defined,o=Z.each,I=Z.erase,N=Z.extend,n=Z.fireEvent,R=Z.inArray,P=Z.isNumber,T=Z.isObject,U=Z.isArray,V=Z.merge,W=Z.objectEach,u=Z.pick,Q=Z.Point,J=Z.Series,s=Z.seriesTypes,L=Z.setAnimation,g=Z.splat;N(Z.Chart.prototype,{addSeries:function(f,e,p){var h,m=this;f&&(e=u(e,!0),n(m,"addSeries",{options:f},function(){h=m.initSeries(f);m.isDirtyLegend=!0;m.linkSeries();e&&m.redraw(p)}));return h},addAxis:function(m,f,q,h){var t=f?"xAxis":"yAxis",p=this.options;m=V(m,{index:this[t].length,isX:f});f=new v(this,m);p[t]=g(p[t]||{});p[t].push(m);u(q,!0)&&this.redraw(h);return f},showLoading:function(h){var f=this,t=f.options,m=f.loadingDiv,q=t.loading,p=function(){m&&S(m,{left:f.plotLeft+"px",top:f.plotTop+"px",width:f.plotWidth+"px",height:f.plotHeight+"px"})};m||(f.loadingDiv=m=M("div",{className:"highcharts-loading highcharts-loading-hidden"},null,f.container),f.loadingSpan=M("span",{className:"highcharts-loading-inner"},null,m),A(f,"redraw",p));m.className="highcharts-loading";f.loadingSpan.innerHTML=h||t.lang.loading;S(m,N(q.style,{zIndex:10}));S(f.loadingSpan,q.labelStyle);f.loadingShown||(S(m,{opacity:0,display:""}),B(m,{opacity:q.style.opacity||0.5},{duration:q.showDuration||0}));f.loadingShown=!0;p()},hideLoading:function(){var f=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",B(e,{opacity:0},{duration:f.loading.hideDuration||100,complete:function(){S(e,{display:"none"})}}));this.loadingShown=!1},propsRequireDirtyBox:"backgroundColor borderColor borderWidth margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions tooltip".split(" "),update:function(D,z,p){var t=this,C={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},w=D.chart,q,E,m=[];if(w){V(!0,t.options.chart,w);"className" in w&&t.setClassName(w.className);if("inverted" in w||"polar" in w){t.propFromSeries(),q=!0}"alignTicks" in w&&(q=!0);W(w,function(e,f){-1!==R("chart."+f,t.propsRequireUpdateSeries)&&(E=!0);-1!==R(f,t.propsRequireDirtyBox)&&(t.isDirtyBox=!0)});"style" in w&&t.renderer.setStyle(w.style)}D.colors&&(this.options.colors=D.colors);D.plotOptions&&V(!0,this.options.plotOptions,D.plotOptions);W(D,function(f,e){if(t[e]&&"function"===typeof t[e].update){t[e].update(f,!1)}else{if("function"===typeof t[C[e]]){t[C[e]](f)}}"chart"!==e&&-1!==R(e,t.propsRequireUpdateSeries)&&(E=!0)});o("xAxis yAxis zAxis series colorAxis pane".split(" "),function(e){D[e]&&(o(g(D[e]),function(h,f){(f=O(h.id)&&t.get(h.id)||t[e][f])&&f.coll===e&&(f.update(h,!1),p&&(f.touched=!0));if(!f&&p){if("series"===e){t.addSeries(h,!1).touched=!0}else{if("xAxis"===e||"yAxis"===e){t.addAxis(h,"xAxis"===e,!1).touched=!0}}}}),p&&o(t[e],function(f){f.touched?delete f.touched:m.push(f)}))});o(m,function(e){e.remove(!1)});q&&o(t.axes,function(e){e.update({},!1)});E&&o(t.series,function(e){e.update({},!1)});D.loading&&V(!0,t.options.loading,D.loading);q=w&&w.width;w=w&&w.height;P(q)&&q!==t.chartWidth||P(w)&&w!==t.chartHeight?t.setSize(q,w):u(z,!0)&&t.redraw()},setSubtitle:function(e){this.setTitle(void 0,e)}});N(Q.prototype,{update:function(G,F,E,C){function D(){z.applyOptions(G);null===z.y&&t&&(z.graphic=t.destroy());T(G,!0)&&(t&&t.element&&G&&G.marker&&void 0!==G.marker.symbol&&(z.graphic=t.destroy()),G&&G.dataLabels&&z.dataLabel&&(z.dataLabel=z.dataLabel.destroy()),z.connector&&(z.connector=z.connector.destroy()));f=z.index;q.updateParallelArrays(z,f);w.data[f]=T(w.data[f],!0)||T(G,!0)?z.options:G;q.isDirty=q.isDirtyData=!0;!q.fixedBox&&q.hasCartesianSeries&&(p.isDirtyBox=!0);"point"===w.legendType&&(p.isDirtyLegend=!0);F&&p.redraw(E)}var z=this,q=z.series,t=z.graphic,f,p=q.chart,w=q.options;F=u(F,!0);!1===C?D():z.firePointEvent("update",{options:G},D)},remove:function(f,e){this.series.removePoint(R(this,this.series.data),f,e)}});N(J.prototype,{addPoint:function(ab,aa,H,F){var G=this.options,D=this.data,w=this.chart,E=this.xAxis,E=E&&E.hasNames&&E.names,q=G.data,z,t,C=this.xData,K,p;aa=u(aa,!0);z={series:this};this.pointClass.prototype.applyOptions.apply(z,[ab]);p=z.x;K=C.length;if(this.requireSorting&&p<C[K-1]){for(t=!0;K&&C[K-1]>p;){K--}}this.updateParallelArrays(z,"splice",K,0,0);this.updateParallelArrays(z,K);E&&z.name&&(E[p]=z.name);q.splice(K,0,ab);t&&(this.data.splice(K,0,null),this.processData());"point"===G.legendType&&this.generatePoints();H&&(D[0]&&D[0].remove?D[0].remove(!1):(D.shift(),this.updateParallelArrays(z,"shift"),q.shift()));this.isDirtyData=this.isDirty=!0;aa&&w.redraw(F)},removePoint:function(D,C,z){var p=this,w=p.data,t=w[D],m=p.points,q=p.chart,h=function(){m&&m.length===w.length&&m.splice(D,1);w.splice(D,1);p.options.data.splice(D,1);p.updateParallelArrays(t||{series:p},"splice",D,1);t&&t.destroy();p.isDirty=!0;p.isDirtyData=!0;C&&q.redraw()};L(z,q);C=u(C,!0);t?t.firePointEvent("remove",null,h):h()},remove:function(h,f,t){function m(){q.destroy();p.isDirtyLegend=p.isDirtyBox=!0;p.linkSeries();u(h,!0)&&p.redraw(f)}var q=this,p=q.chart;!1!==t?n(q,"remove",null,m):m()},update:function(K,H){var C=this,E=C.chart,F=C.userOptions,t=C.oldType||C.type,D=K.type||F.type||E.options.chart.type,w=s[t].prototype,p,q=["group","markerGroup","dataLabelsGroup"],z=["navigatorSeries","baseSeries"],G=C.finishedAnimating&&{animation:!1};if(Object.keys&&"data"===Object.keys(K).toString()){return this.setData(K.data,H)}if(D&&D!==t||void 0!==K.zIndex){q.length=0}z=q.concat(z);o(z,function(e){z[e]=C[e];delete C[e]});K=V(F,G,{index:C.index,pointStart:C.xData[0]},{data:C.options.data},K);C.remove(!1,null,!1);for(p in w){C[p]=void 0}N(C,s[D||t].prototype);o(z,function(e){C[e]=z[e]});C.init(E,K);C.oldType=t;E.linkSeries();u(H,!0)&&E.redraw(!1)}});N(v.prototype,{update:function(f,e){var h=this.chart;f=h.options[this.coll][this.options.index]=V(this.userOptions,f);this.destroy(!0);this.init(h,N(f,{events:void 0}));h.isDirtyBox=!0;u(e,!0)&&h.redraw()},remove:function(f){for(var e=this.chart,p=this.coll,h=this.series,m=h.length;m--;){h[m]&&h[m].remove(!1)}I(e.axes,this);I(e[p],this);U(e.options[p])?e.options[p].splice(this.options.index,1):delete e.options[p];o(e[p],function(q,t){q.options.index=t});this.destroy();e.isDirtyBox=!0;u(f,!0)&&e.redraw()},setTitle:function(f,e){this.update({title:f},e)},setCategories:function(f,e){this.update({categories:f},e)}})})(a);(function(e){var n=e.color,o=e.each,g=e.map,m=e.pick,f=e.Series,q=e.seriesType;q("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(B){var u=[],t=[],H=this.xAxis,A=this.yAxis,v=A.stacks[this.stackKey],C={},E=this.index,F=A.series,G=F.length,I,z=m(A.options.reversedStacks,!0)?1:-1,s;B=B||this.points;if(this.options.stacking){for(s=0;s<B.length;s++){B[s].leftNull=B[s].rightNull=null,C[B[s].x]=B[s]}e.objectEach(v,function(p,h){null!==p.total&&t.push(h)});t.sort(function(p,h){return p-h});I=g(F,function(){return this.visible});o(t,function(p,K){var w=0,D,J;if(C[p]&&!C[p].isNull){u.push(C[p]),o([-1,1],function(M){var N=1===M?"rightNull":"leftNull",O=0,L=v[t[K+M]];if(L){for(s=E;0<=s&&s<G;){D=L.points[s],D||(s===E?C[p][N]=!0:I[s]&&(J=v[p].points[s])&&(O-=J[1]-J[0])),s+=z}}C[p][1===M?"rightCliff":"leftCliff"]=O})}else{for(s=E;0<=s&&s<G;){if(D=v[p].points[s]){w=D[1];break}s+=z}w=A.translate(w,0,1,0,1);u.push({isNull:!0,plotX:H.translate(p,0,0,0,1),x:p,plotY:w,yBottom:w})}})}return u},getGraphPath:function(J){var u=f.prototype.getGraphPath,t=this.options,L=t.stacking,A=this.yAxis,v,B,E=[],F=[],I=this.index,M,z=A.stacks[this.stackKey],h=t.threshold,N=A.getThreshold(t.threshold),s,t=t.connectNulls||"percent"===L,G=function(D,H,p){var C=J[D];D=L&&z[C.x].points[I];var K=C[p+"Null"]||0;p=C[p+"Cliff"]||0;var w,O,C=!0;p||K?(w=(K?D[0]:D[1])+p,O=D[0]+p,C=!!K):!L&&J[H]&&J[H].isNull&&(w=O=h);void 0!==w&&(F.push({plotX:M,plotY:null===w?N:A.getThreshold(w),isNull:C,isCliff:!0}),E.push({plotX:M,plotY:null===O?N:A.getThreshold(O),doCurve:!1}))};J=J||this.points;L&&(J=this.getStackPoints(J));for(v=0;v<J.length;v++){if(B=J[v].isNull,M=m(J[v].rectPlotX,J[v].plotX),s=m(J[v].yBottom,N),!B||t){t||G(v,v-1,"left"),B&&!L&&t||(F.push(J[v]),E.push({x:v,plotX:M,plotY:s})),t||G(v,v+1,"right")}}v=u.call(this,F,!0,!0);E.reversed=!0;B=u.call(this,E,!0,!0);B.length&&(B[0]="L");B=v.concat(B);u=u.call(this,F,!1,t);B.xMap=v.xMap;this.areaPath=B;return u},drawGraph:function(){this.areaPath=[];f.prototype.drawGraph.apply(this);var h=this,t=this.areaPath,s=this.options,u=[["area","highcharts-area",this.color,s.fillColor]];o(this.zones,function(v,p){u.push(["zone-area-"+p,"highcharts-area highcharts-zone-area-"+p+" "+v.className,v.color||h.color,v.fillColor||s.fillColor])});o(u,function(v){var p=v[0],w=h[p];w?(w.endX=h.preventGraphAnimation?null:t.xMap,w.animate({d:t})):(w=h[p]=h.chart.renderer.path(t).addClass(v[1]).attr({fill:m(v[3],n(v[2]).setOpacity(m(s.fillOpacity,0.75)).get()),zIndex:0}).add(h.group),w.isArea=!0);w.startX=t.xMap;w.shiftUnit=s.step?2:1})},drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})})(a);(function(e){var f=e.pick;e=e.seriesType;e("spline","line",{},{getPointSpline:function(A,C,g){var v=C.plotX,o=C.plotY,B=A[g-1];g=A[g+1];var D,n,w,u;if(B&&!B.isNull&&!1!==B.doCurve&&!C.isCliff&&g&&!g.isNull&&!1!==g.doCurve&&!C.isCliff){A=B.plotY;w=g.plotX;g=g.plotY;var s=0;D=(1.5*v+B.plotX)/2.5;n=(1.5*o+A)/2.5;w=(1.5*v+w)/2.5;u=(1.5*o+g)/2.5;w!==D&&(s=(u-n)*(w-v)/(w-D)+o-u);n+=s;u+=s;n>A&&n>o?(n=Math.max(A,o),u=2*o-n):n<A&&n<o&&(n=Math.min(A,o),u=2*o-n);u>g&&u>o?(u=Math.max(g,o),n=2*o-u):u<g&&u<o&&(u=Math.min(g,o),n=2*o-u);C.rightContX=w;C.rightContY=u}C=["C",f(B.rightContX,B.plotX),f(B.rightContY,B.plotY),f(D,v),f(n,o),v,o];B.rightContX=B.rightContY=null;return C}})})(a);(function(e){var f=e.seriesTypes.area.prototype,g=e.seriesType;g("areaspline","spline",e.defaultPlotOptions.area,{getStackPoints:f.getStackPoints,getGraphPath:f.getGraphPath,drawGraph:f.drawGraph,drawLegendSymbol:e.LegendSymbolMixin.drawRectangle})})(a);(function(o){var w=o.animObject,A=o.color,u=o.each,e=o.extend,m=o.isNumber,g=o.merge,s=o.pick,v=o.Series,f=o.seriesType,n=o.svg;f("column","line",{borderRadius:0,crisp:!0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:0.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){v.prototype.init.apply(this,arguments);var p=this,h=p.chart;h.hasRendered&&u(h.series,function(q){q.type===p.type&&(q.isDirty=!0)})},getColumnMetrics:function(){var J=this,B=J.options,F=J.xAxis,G=J.yAxis,H=F.reversed,I,E={},D=0;!1===B.grouping?D=1:u(J.chart.series,function(C){var p=C.options,t=C.yAxis,h;C.type!==J.type||!C.visible&&J.chart.options.chart.ignoreHiddenSeries||G.len!==t.len||G.pos!==t.pos||(p.stacking?(I=C.stackKey,void 0===E[I]&&(E[I]=D++),h=E[I]):!1!==p.grouping&&(h=D++),C.columnIndex=h)});var z=Math.min(Math.abs(F.transA)*(F.ordinalSlope||B.pointRange||F.closestPointRange||F.tickInterval||1),F.len),K=z*B.groupPadding,q=(z-2*K)/(D||1),B=Math.min(B.maxPointWidth||F.len,s(B.pointWidth,q*(1-2*B.pointPadding)));J.columnMetrics={width:B,offset:(q-B)/2+(K+((J.columnIndex||0)+(H?1:0))*q-z/2)*(H?-1:1)};return J.columnMetrics},crispCol:function(q,p,z,B){var C=this.chart,h=this.borderWidth,t=-(h%2?0.5:0),h=h%2?0.5:1;C.inverted&&C.renderer.isVML&&(h+=1);this.options.crisp&&(z=Math.round(q+z)+t,q=Math.round(q)+t,z-=q);B=Math.round(p+B)+h;t=0.5>=Math.abs(p)&&0.5<B;p=Math.round(p)+h;B-=p;t&&B&&(--p,B+=1);return{x:q,y:p,width:z,height:B}},translate:function(){var L=this,E=L.chart,H=L.options,I=L.dense=2>L.closestPointRange*L.xAxis.transA,I=L.borderWidth=s(H.borderWidth,I?0:1),J=L.yAxis,K=H.threshold,G=L.translatedThreshold=J.getThreshold(K),F=s(H.minPointLength,5),D=L.getColumnMetrics(),B=D.width,z=L.barW=Math.max(B,1+2*I),t=L.pointXOffset=D.offset;E.inverted&&(G-=0.5);H.pointPadding&&(z=Math.ceil(z));v.prototype.translate.apply(L);u(L.points,function(M){var O=s(M.yBottom,G),N=999+Math.abs(O),N=Math.min(Math.max(-N,M.plotY),J.len+N),q=M.plotX+t,P=z,p=Math.min(N,O),h,C=Math.max(N,O)-p;F&&Math.abs(C)<F&&(C=F,h=!J.reversed&&!M.negative||J.reversed&&M.negative,M.y===K&&L.dataMax<=K&&J.min<K&&(h=!h),p=Math.abs(p-G)>F?O-F:G-(h?F:0));M.barX=q;M.pointWidth=B;M.tooltipPos=E.inverted?[J.len+J.pos-E.plotLeft-N,L.xAxis.len-q-P/2,C]:[q+P/2,N+J.pos-E.plotTop,C];M.shapeType="rect";M.shapeArgs=L.crispCol.apply(L,M.isNull?[q,G,P,0]:[q,p,P,C])})},getSymbol:o.noop,drawLegendSymbol:o.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(F,p){var B=this.options,C,D=this.pointAttrToOptions||{};C=D.stroke||"borderColor";var E=D["stroke-width"]||"borderWidth",z=F&&F.color||this.color,q=F&&F[C]||B[C]||this.color||z,t=F&&F[E]||B[E]||this[E]||0,D=B.dashStyle;F&&this.zones.length&&(z=F.getZone(),z=F.options.color||z&&z.color||this.color);p&&(F=g(B.states[p],F.options.states&&F.options.states[p]||{}),p=F.brightness,z=F.color||void 0!==p&&A(z).brighten(F.brightness).get()||z,q=F[C]||q,t=F[E]||t,D=F.dashStyle||D);C={fill:z,stroke:q,"stroke-width":t};D&&(C.dashstyle=D);return C},drawPoints:function(){var q=this,p=this.chart,t=q.options,z=p.renderer,B=t.animationLimit||250,h;u(q.points,function(D){var C=D.graphic;if(m(D.plotY)&&null!==D.y){h=D.shapeArgs;if(C){C[p.pointCount<B?"animate":"attr"](g(h))}else{D.graphic=C=z[D.shapeType](h).add(D.group||q.group)}t.borderRadius&&C.attr({r:t.borderRadius});C.attr(q.pointAttribs(D,D.selected&&"select")).shadow(t.shadow,null,t.stacking&&!t.borderRadius);C.addClass(D.getClassName(),!0)}else{C&&(D.graphic=C.destroy())}})},animate:function(z){var q=this,C=this.yAxis,D=q.options,E=this.chart.inverted,p={},B=E?"translateX":"translateY",t;n&&(z?(p.scaleY=0.001,z=Math.min(C.pos+C.len,Math.max(C.pos,C.toPixels(D.threshold))),E?p.translateX=z-C.len:p.translateY=z,q.group.attr(p)):(t=q.group.attr(B),q.group.animate({scaleY:1},e(w(q.options.animation),{step:function(h,F){p[B]=t+F.pos*(C.pos-t);q.group.attr(p)}})),q.animate=null))},remove:function(){var p=this,q=p.chart;q.hasRendered&&u(q.series,function(h){h.type===p.type&&(h.isDirty=!0)});v.prototype.remove.apply(p,arguments)}})})(a);(function(e){e=e.seriesType;e("bar","column",null,{inverted:!0})})(a);(function(e){var f=e.Series;e=e.seriesType;e("scatter","line",{lineWidth:0,findNearestPointBy:"xy",marker:{enabled:!0},tooltip:{headerFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e \x3cspan style\x3d"font-size: 0.85em"\x3e {series.name}\x3c/span\x3e\x3cbr/\x3e',pointFormat:"x: \x3cb\x3e{point.x}\x3c/b\x3e\x3cbr/\x3ey: \x3cb\x3e{point.y}\x3c/b\x3e\x3cbr/\x3e"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&f.prototype.drawGraph.call(this)}})})(a);(function(e){var h=e.deg2rad,m=e.isNumber,f=e.pick,g=e.relativeLength;e.CenteredSeriesMixin={getCenter:function(){var s=this.options,A=this.chart,o=2*(s.slicedOffset||0),v=A.plotWidth-2*o,A=A.plotHeight-2*o,w=s.center,w=[f(w[0],"50%"),f(w[1],"50%"),s.size||"100%",s.innerSize||0],B=Math.min(v,A),u,n;for(u=0;4>u;++u){n=w[u],s=2>u||2===u&&/%$/.test(n),w[u]=g(n,[v,A,B,w[2]][u])+(s?o:0)}w[3]>w[2]&&(w[3]=w[2]);return w},getStartAndEndRadians:function(n,o){n=m(n)?n:0;o=m(o)&&o>n&&360>o-n?o:n+360;return{start:h*(n+-90),end:h*(o+-90)}}}})(a);(function(A){var H=A.addEvent,I=A.CenteredSeriesMixin,C=A.defined,e=A.each,u=A.extend,n=I.getStartAndEndRadians,B=A.inArray,D=A.noop,g=A.pick,w=A.Point,s=A.Series,o=A.seriesType,v=A.setAnimation;o("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:0.1,shadow:!1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:A.seriesTypes.column.prototype.pointAttribs,animate:function(h){var p=this,f=p.points,m=p.startAngleRad;h||(e(f,function(z){var q=z.graphic,t=z.shapeArgs;q&&(q.attr({r:z.startR||p.center[3]/2,start:m,end:m}),q.animate({r:t.r,start:t.start,end:t.end},p.options.animation))}),p.animate=null)},updateTotals:function(){var t,E=0,p=this.points,z=p.length,q,h=this.options.ignoreHiddenPoint;for(t=0;t<z;t++){q=p[t],E+=h&&!q.visible?0:q.isNull?0:q.y}this.total=E;for(t=0;t<z;t++){q=p[t],q.percentage=0<E&&(q.visible||!h)?q.y/E*100:0,q.total=E}},generatePoints:function(){s.prototype.generatePoints.call(this);this.updateTotals()},translate:function(Q){this.generatePoints();var N=0,P=this.options,L=P.slicedOffset,E=L+(P.borderWidth||0),K,z,G,F=n(P.startAngle,P.endAngle),J=this.startAngleRad=F.start,F=(this.endAngleRad=F.end)-J,O=this.points,S,q=P.dataLabels.distance,P=P.ignoreHiddenPoint,M,R=O.length,p;Q||(this.center=Q=this.getCenter());this.getX=function(h,f,m){G=Math.asin(Math.min((h-Q[1])/(Q[2]/2+m.labelDistance),1));return Q[0]+(f?-1:1)*Math.cos(G)*(Q[2]/2+m.labelDistance)};for(M=0;M<R;M++){p=O[M];p.labelDistance=g(p.options.dataLabels&&p.options.dataLabels.distance,q);this.maxLabelDistance=Math.max(this.maxLabelDistance||0,p.labelDistance);K=J+N*F;if(!P||p.visible){N+=p.percentage/100}z=J+N*F;p.shapeType="arc";p.shapeArgs={x:Q[0],y:Q[1],r:Q[2]/2,innerR:Q[3]/2,start:Math.round(1000*K)/1000,end:Math.round(1000*z)/1000};G=(z+K)/2;G>1.5*Math.PI?G-=2*Math.PI:G<-Math.PI/2&&(G+=2*Math.PI);p.slicedTranslation={translateX:Math.round(Math.cos(G)*L),translateY:Math.round(Math.sin(G)*L)};z=Math.cos(G)*Q[2]/2;S=Math.sin(G)*Q[2]/2;p.tooltipPos=[Q[0]+0.7*z,Q[1]+0.7*S];p.half=G<-Math.PI/2||G>Math.PI/2?1:0;p.angle=G;K=Math.min(E,p.labelDistance/5);p.labelPos=[Q[0]+z+Math.cos(G)*p.labelDistance,Q[1]+S+Math.sin(G)*p.labelDistance,Q[0]+z+Math.cos(G)*K,Q[1]+S+Math.sin(G)*K,Q[0]+z,Q[1]+S,0>p.labelDistance?"center":p.half?"right":"left",G]}},drawGraph:null,drawPoints:function(){var t=this,F=t.chart.renderer,p,E,q,h,z=t.options.shadow;z&&!t.shadowGroup&&(t.shadowGroup=F.g("shadow").add(t.group));e(t.points,function(m){E=m.graphic;if(m.isNull){E&&(m.graphic=E.destroy())}else{h=m.shapeArgs;p=m.getTranslate();var f=m.shadowGroup;z&&!f&&(f=m.shadowGroup=F.g("shadow").add(t.shadowGroup));f&&f.attr(p);q=t.pointAttribs(m,m.selected&&"select");E?E.setRadialReference(t.center).attr(q).animate(u(h,p)):(m.graphic=E=F[m.shapeType](h).setRadialReference(t.center).attr(p).add(t.group),m.visible||E.attr({visibility:"hidden"}),E.attr(q).attr({"stroke-linejoin":"round"}).shadow(z,f));E.addClass(m.getClassName())}})},searchPoint:D,sortByAngle:function(f,h){f.sort(function(m,p){return void 0!==m.angle&&(p.angle-m.angle)*h})},drawLegendSymbol:A.LegendSymbolMixin.drawRectangle,getCenter:I.getCenter,getSymbol:D},{init:function(){w.prototype.init.apply(this,arguments);var f=this,h;f.name=g(f.name,"Slice");h=function(m){f.slice("select"===m.type)};H(f,"select",h);H(f,"unselect",h);return f},isValid:function(){return A.isNumber(this.y,!0)&&0<=this.y},setVisible:function(p,z){var h=this,t=h.series,m=t.chart,q=t.options.ignoreHiddenPoint;z=g(z,q);p!==h.visible&&(h.visible=h.options.visible=p=void 0===p?!h.visible:p,t.options.data[B(h,t.data)]=h.options,e(["graphic","dataLabel","connector","shadowGroup"],function(f){if(h[f]){h[f][p?"show":"hide"](!0)}}),h.legendItem&&m.legend.colorizeItem(h,p),p||"hover"!==h.state||h.setState(""),q&&(t.isDirty=!0),z&&m.redraw())},slice:function(h,p,f){var m=this.series;v(f,m.chart);g(p,!0);this.sliced=this.options.sliced=C(h)?h:!this.sliced;m.options.data[B(this,m.data)]=this.options;this.graphic.animate(this.getTranslate());this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(f){var h=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(h.x,h.y,h.r+f,h.r+f,{innerR:this.shapeArgs.r,start:h.start,end:h.end})}})})(a);(function(C){var J=C.addEvent,K=C.arrayMax,H=C.defined,g=C.each,v=C.extend,o=C.format,D=C.map,I=C.merge,n=C.noop,B=C.pick,u=C.relativeLength,s=C.Series,w=C.seriesTypes,A=C.stableSort;C.distribute=function(t,p){function G(h,f){return h.target-f.target}var q,F=!0,e=t,E=[],z;z=0;for(q=t.length;q--;){z+=t[q].size}if(z>p){A(t,function(h,f){return(f.rank||0)-(h.rank||0)});for(z=q=0;z<=p;){z+=t[q].size,q++}E=t.splice(q-1,t.length)}A(t,G);for(t=D(t,function(f){return{size:f.size,targets:[f.target],align:B(f.align,0.5)}});F;){for(q=t.length;q--;){F=t[q],z=(Math.min.apply(0,F.targets)+Math.max.apply(0,F.targets))/2,F.pos=Math.min(Math.max(0,z-F.size*F.align),p-F.size)}q=t.length;for(F=!1;q--;){0<q&&t[q-1].pos+t[q-1].size>t[q].pos&&(t[q-1].size+=t[q].size,t[q-1].targets=t[q-1].targets.concat(t[q].targets),t[q-1].align=0.5,t[q-1].pos+t[q-1].size>p&&(t[q-1].pos=p-t[q-1].size),t.splice(q,1),F=!0)}}q=0;g(t,function(h){var f=0;g(h.targets,function(){e[q].pos=h.pos+f;f+=e[q].size;q++})});e.push.apply(e,E);A(e,G)};s.prototype.drawDataLabels=function(){function O(f,e){var h=e.filter;return h?(e=h.operator,f=f[h.property],h=h.value,"\x3e"===e&&f>h||"\x3c"===e&&f<h||"\x3e\x3d"===e&&f>=h||"\x3c\x3d"===e&&f<=h||"\x3d\x3d"===e&&f==h||"\x3d\x3d\x3d"===e&&f===h?!0:!1):!0}var Q=this,N=Q.options,E=N.dataLabels,M=Q.points,z,G,F=Q.hasRendered||0,L,P,p=B(E.defer,!!N.animation),t=Q.chart.renderer;if(E.enabled||Q._hasPointLabels){Q.dlProcessOptions&&Q.dlProcessOptions(E),P=Q.plotGroup("dataLabelsGroup","data-labels",p&&!F?"hidden":"visible",E.zIndex||6),p&&(P.attr({opacity:+F}),F||J(Q,"afterAnimate",function(){Q.visible&&P.show(!0);P[N.animation?"animate":"attr"]({opacity:1},{duration:200})})),G=E,g(M,function(U){var S,h=U.dataLabel,m,V,T=U.connector,e=!h,R;z=U.dlOptions||U.options&&U.options.dataLabels;(S=B(z&&z.enabled,G.enabled)&&!U.isNull)&&(S=!0===O(U,z||E));S&&(E=I(G,z),m=U.getLabelConfig(),R=E[U.formatPrefix+"Format"]||E.format,L=H(R)?o(R,m):(E[U.formatPrefix+"Formatter"]||E.formatter).call(m,E),R=E.style,m=E.rotation,R.color=B(E.color,R.color,Q.color,"#000000"),"contrast"===R.color&&(U.contrastColor=t.getContrast(U.color||Q.color),R.color=E.inside||0>B(U.labelDistance,E.distance)||N.stacking?U.contrastColor:"#000000"),N.cursor&&(R.cursor=N.cursor),V={fill:E.backgroundColor,stroke:E.borderColor,"stroke-width":E.borderWidth,r:E.borderRadius||0,rotation:m,padding:E.padding,zIndex:1},C.objectEach(V,function(f,q){void 0===f&&delete V[q]}));!h||S&&H(L)?S&&H(L)&&(h?V.text=L:(h=U.dataLabel=t[m?"text":"label"](L,0,-9999,E.shape,null,null,E.useHTML,null,"data-label"),h.addClass("highcharts-data-label-color-"+U.colorIndex+" "+(E.className||"")+(E.useHTML?"highcharts-tracker":""))),h.attr(V),h.css(R).shadow(E.shadow),h.added||h.add(P),Q.alignDataLabel(U,h,E,null,e)):(U.dataLabel=h=h.destroy(),T&&(U.connector=T.destroy()))})}};s.prototype.alignDataLabel=function(R,Q,M,E,L){var O=this.chart,z=O.inverted,F=B(R.dlBox&&R.dlBox.centerX,R.plotX,-9999),G=B(R.plotY,-9999),P=Q.getBBox(),q,t=M.rotation,N=M.align,S=this.visible&&(R.series.forceDL||O.isInsidePlot(F,Math.round(G),z)||E&&O.isInsidePlot(F,z?E.x+1:E.y+E.height-1,z)),h="justify"===B(M.overflow,"justify");if(S&&(q=M.style.fontSize,q=O.renderer.fontMetrics(q,Q).b,E=v({x:z?this.yAxis.len-G:F,y:Math.round(z?this.xAxis.len-F:G),width:0,height:0},E),v(M,{width:P.width,height:P.height}),t?(h=!1,F=O.renderer.rotCorr(q,t),F={x:E.x+M.x+E.width/2+F.x,y:E.y+M.y+{top:0,middle:0.5,bottom:1}[M.verticalAlign]*E.height},Q[L?"attr":"animate"](F).attr({align:N}),G=(t+720)%360,G=180<G&&360>G,"left"===N?F.y-=G?P.height:0:"center"===N?(F.x-=P.width/2,F.y-=P.height/2):"right"===N&&(F.x-=P.width,F.y-=G?0:P.height)):(Q.align(M,null,E),F=Q.alignAttr),h?R.isLabelJustified=this.justifyDataLabel(Q,M,F,P,E,L):B(M.crop,!0)&&(S=O.isInsidePlot(F.x,F.y)&&O.isInsidePlot(F.x+P.width,F.y+P.height)),M.shape&&!t)){Q[L?"attr":"animate"]({anchorX:z?O.plotWidth-R.plotY:R.plotX,anchorY:z?O.plotHeight-R.plotX:R.plotY})}S||(Q.attr({y:-9999}),Q.placed=!1)};s.prototype.justifyDataLabel=function(Q,P,N,M,F,z){var O=this.chart,E=P.align,L=P.verticalAlign,G,q,t=Q.box?0:Q.padding||0;G=N.x+t;0>G&&("right"===E?P.align="left":P.x=-G,q=!0);G=N.x+M.width-t;G>O.plotWidth&&("left"===E?P.align="right":P.x=O.plotWidth-G,q=!0);G=N.y+t;0>G&&("bottom"===L?P.verticalAlign="top":P.y=-G,q=!0);G=N.y+M.height-t;G>O.plotHeight&&("top"===L?P.verticalAlign="bottom":P.y=O.plotHeight-G,q=!0);q&&(Q.placed=!z,Q.align(P,null,F));return q};w.pie&&(w.pie.prototype.drawDataLabels=function(){var ah=this,ai=ah.data,af,ae=ah.chart,ab=ah.options.dataLabels,ac=B(ab.connectorPadding,10),Z=B(ab.connectorWidth,1),T=ae.plotWidth,ad=ae.plotHeight,G,V=ah.center,W=V[2]/2,ag=V[1],Q,U,S,aa,P=[[],[]],E,m,z,R,L=[0,0,0,0];ah.visible&&(ab.enabled||ah._hasPointLabels)&&(g(ai,function(e){e.dataLabel&&e.visible&&e.dataLabel.shortened&&(e.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.dataLabel.shortened=!1)}),s.prototype.drawDataLabels.apply(ah),g(ai,function(e){e.dataLabel&&e.visible&&(P[e.half].push(e),e.dataLabel._pos=null)}),g(P,function(f,q){var e,t,M=f.length,F=[],h;if(M){for(ah.sortByAngle(f,q-0.5),0<ah.maxLabelDistance&&(e=Math.max(0,ag-W-ah.maxLabelDistance),t=Math.min(ag+W+ah.maxLabelDistance,ae.plotHeight),g(f,function(p){0<p.labelDistance&&p.dataLabel&&(p.top=Math.max(0,ag-W-p.labelDistance),p.bottom=Math.min(ag+W+p.labelDistance,ae.plotHeight),h=p.dataLabel.getBBox().height||21,p.positionsIndex=F.push({target:p.labelPos[1]-p.top+h/2,size:h,rank:p.y})-1)}),C.distribute(F,t+h-e)),R=0;R<M;R++){af=f[R],t=af.positionsIndex,S=af.labelPos,Q=af.dataLabel,z=!1===af.visible?"hidden":"inherit",m=e=S[1],F&&H(F[t])&&(void 0===F[t].pos?z="hidden":(aa=F[t].size,m=af.top+F[t].pos)),delete af.positionIndex,E=ab.justify?V[0]+(q?-1:1)*(W+af.labelDistance):ah.getX(m<af.top+2||m>af.bottom-2?e:m,q,af),Q._attr={visibility:z,align:S[6]},Q._pos={x:E+ab.x+({left:ac,right:-ac}[S[6]]||0),y:m+ab.y-10},S.x=E,S.y=m,B(ab.crop,!0)&&(U=Q.getBBox().width,e=null,E-U<ac?(e=Math.round(U-E+ac),L[3]=Math.max(e,L[3])):E+U>T-ac&&(e=Math.round(E+U-T+ac),L[1]=Math.max(e,L[1])),0>m-aa/2?L[0]=Math.max(Math.round(-m+aa/2),L[0]):m+aa/2>ad&&(L[2]=Math.max(Math.round(m+aa/2-ad),L[2])),Q.sideOverflow=e)}}}),0===K(L)||this.verifyDataLabelOverflow(L))&&(this.placeDataLabels(),Z&&g(this.points,function(e){var f;G=e.connector;if((Q=e.dataLabel)&&Q._pos&&e.visible&&0<e.labelDistance){z=Q._attr.visibility;if(f=!G){e.connector=G=ae.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex).add(ah.dataLabelsGroup),G.attr({"stroke-width":Z,stroke:ab.connectorColor||e.color||"#666666"})}G[f?"attr":"animate"]({d:ah.connectorPath(e.labelPos)});G.attr("visibility",z)}else{G&&(e.connector=G.destroy())}}))},w.pie.prototype.connectorPath=function(f){var e=f.x,h=f.y;return B(this.options.dataLabels.softConnector,!0)?["M",e+("left"===f[6]?5:-5),h,"C",e,h,2*f[2]-f[4],2*f[3]-f[5],f[2],f[3],"L",f[4],f[5]]:["M",e+("left"===f[6]?5:-5),h,"L",f[2],f[3],"L",f[4],f[5]]},w.pie.prototype.placeDataLabels=function(){g(this.points,function(f){var e=f.dataLabel;e&&f.visible&&((f=e._pos)?(e.sideOverflow&&(e._attr.width=e.getBBox().width-e.sideOverflow,e.css({width:e._attr.width+"px",textOverflow:"ellipsis"}),e.shortened=!0),e.attr(e._attr),e[e.moved?"animate":"attr"](f),e.moved=!0):e&&e.attr({y:-9999}))},this)},w.pie.prototype.alignDataLabel=n,w.pie.prototype.verifyDataLabelOverflow=function(t){var q=this.center,G=this.options,F=G.center,E=G.minSize||80,p,z=null!==G.size;z||(null!==F[0]?p=Math.max(q[2]-Math.max(t[1],t[3]),E):(p=Math.max(q[2]-t[1]-t[3],E),q[0]+=(t[3]-t[1])/2),null!==F[1]?p=Math.max(Math.min(p,q[2]-Math.max(t[0],t[2])),E):(p=Math.max(Math.min(p,q[2]-t[0]-t[2]),E),q[1]+=(t[0]-t[2])/2),p<q[2]?(q[2]=p,q[3]=Math.min(u(G.innerSize||0,p),p),this.translate(q),this.drawDataLabels&&this.drawDataLabels()):z=!0);return z});w.column&&(w.column.prototype.alignDataLabel=function(N,M,G,F,t){var L=this.chart.inverted,q=N.series,z=N.dlBox||N.shapeArgs,E=B(N.below,N.plotY>B(this.translatedThreshold,q.yAxis.len)),m=B(G.inside,!!this.options.stacking);z&&(F=I(z),0>F.y&&(F.height+=F.y,F.y=0),z=F.y+F.height-q.yAxis.len,0<z&&(F.height-=z),L&&(F={x:q.yAxis.len-F.y-F.height,y:q.xAxis.len-F.x-F.width,width:F.height,height:F.width}),m||(L?(F.x+=E?0:F.width,F.width=0):(F.y+=E?F.height:0,F.height=0)));G.align=B(G.align,!L||m?"center":E?"right":"left");G.verticalAlign=B(G.verticalAlign,L||m?"middle":E?"top":"bottom");s.prototype.alignDataLabel.call(this,N,M,G,F,t);N.isLabelJustified&&N.contrastColor&&N.dataLabel.css({color:N.contrastColor})})})(a);(function(e){var h=e.Chart,m=e.each,f=e.objectEach,g=e.pick;e=e.addEvent;e(h.prototype,"render",function(){var n=[];m(this.labelCollectors||[],function(o){n=n.concat(o())});m(this.yAxis||[],function(o){o.options.stackLabels&&!o.options.stackLabels.allowOverlap&&f(o.stacks,function(p){f(p,function(q){n.push(q.label)})})});m(this.series||[],function(q){var s=q.options.dataLabels,o=q.dataLabelCollections||["dataLabel"];(s.enabled||q._hasPointLabels)&&!s.allowOverlap&&q.visible&&m(o,function(t){m(q.points,function(p){p[t]&&(p[t].labelrank=g(p.labelrank,p.shapeArgs&&p.shapeArgs.height),n.push(p[t]))})})});this.hideOverlappingLabels(n)});h.prototype.hideOverlappingLabels=function(D){var u=D.length,n,E,o,B,s,p,v,w,A,C=function(t,q,J,I,H,z,G,F){return !(H>t+J||H+G<t||z>q+I||z+F<q)};for(E=0;E<u;E++){if(n=D[E]){n.oldOpacity=n.opacity,n.newOpacity=1,n.width||(o=n.getBBox(),n.width=o.width,n.height=o.height)}}D.sort(function(t,q){return(q.labelrank||0)-(t.labelrank||0)});for(E=0;E<u;E++){for(o=D[E],n=E+1;n<u;++n){if(B=D[n],o&&B&&o!==B&&o.placed&&B.placed&&0!==o.newOpacity&&0!==B.newOpacity&&(s=o.alignAttr,p=B.alignAttr,v=o.parentGroup,w=B.parentGroup,A=2*(o.box?0:o.padding||0),s=C(s.x+v.translateX,s.y+v.translateY,o.width-A,o.height-A,p.x+w.translateX,p.y+w.translateY,B.width-A,B.height-A))){(o.labelrank<B.labelrank?o:B).newOpacity=0}}}m(D,function(t){var q,z;t&&(z=t.newOpacity,t.oldOpacity!==z&&t.placed&&(z?t.show(!0):q=function(){t.hide()},t.alignAttr.opacity=z,t[t.isOld?"animate":"attr"](t.alignAttr,null,q)),t.isOld=!0)})}})(a);(function(T){var v=T.addEvent,A=T.Chart,u=T.createElement,I=T.css,O=T.defaultOptions,K=T.defaultPlotOptions,n=T.each,B=T.extend,J=T.fireEvent,g=T.hasTouch,N=T.inArray,L=T.isObject,P=T.Legend,Q=T.merge,R=T.pick,S=T.Point,s=T.Series,M=T.seriesTypes,C=T.svg,o;o=T.TrackerMixin={drawTrackerPoint:function(){var f=this,e=f.chart.pointer,h=function(m){var p=e.getPointFromEvent(m);void 0!==p&&(e.isDirectTouch=!0,p.onMouseOver(m))};n(f.points,function(m){m.graphic&&(m.graphic.element.point=m);m.dataLabel&&(m.dataLabel.div?m.dataLabel.div.point=m:m.dataLabel.element.point=m)});f._hasTracking||(n(f.trackerGroups,function(m){if(f[m]){f[m].addClass("highcharts-tracker").on("mouseover",h).on("mouseout",function(p){e.onTrackerMouseOut(p)});if(g){f[m].on("touchstart",h)}f.options.cursor&&f[m].css(I).css({cursor:f.options.cursor})}}),f._hasTracking=!0)},drawTrackerGraph:function(){var Z=this,W=Z.options,V=W.trackByArea,H=[].concat(V?Z.areaPath:Z.graphPath),G=H.length,D=Z.chart,U=D.pointer,E=D.renderer,F=D.options.tooltip.snap,z=Z.tracker,w,q=function(){if(D.hoverSeries!==Z){Z.onMouseOver()}},aa="rgba(192,192,192,"+(C?0.0001:0.002)+")";if(G&&!V){for(w=G+1;w--;){"M"===H[w]&&H.splice(w+1,0,H[w+1]-F,H[w+2],"L"),(w&&"M"===H[w]||w===G)&&H.splice(w,0,"L",H[w-2]+F,H[w-1])}}z?z.attr({d:H}):Z.graph&&(Z.tracker=E.path(H).attr({"stroke-linejoin":"round",visibility:Z.visible?"visible":"hidden",stroke:aa,fill:V?aa:"none","stroke-width":Z.graph.strokeWidth()+(V?0:2*F),zIndex:2}).add(Z.group),n([Z.tracker,Z.markerGroup],function(e){e.addClass("highcharts-tracker").on("mouseover",q).on("mouseout",function(f){U.onTrackerMouseOut(f)});W.cursor&&e.css({cursor:W.cursor});if(g){e.on("touchstart",q)}}))}};M.column&&(M.column.prototype.drawTracker=o.drawTrackerPoint);M.pie&&(M.pie.prototype.drawTracker=o.drawTrackerPoint);M.scatter&&(M.scatter.prototype.drawTracker=o.drawTrackerPoint);B(P.prototype,{setItemEvents:function(m,e,t){var p=this,q=p.chart.renderer.boxWrapper,h="highcharts-legend-"+(m.series?"point":"series")+"-active";(t?e:m.legendGroup).on("mouseover",function(){m.setState("hover");q.addClass(h);e.css(p.options.itemHoverStyle)}).on("mouseout",function(){e.css(Q(m.visible?p.itemStyle:p.itemHiddenStyle));q.removeClass(h);m.setState()}).on("click",function(w){var f=function(){m.setVisible&&m.setVisible()};w={browserEvent:w};m.firePointEvent?m.firePointEvent("legendItemClick",w,f):J(m,"legendItemClick",w,f)})},createCheckboxForItem:function(e){e.checkbox=u("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container);v(e.checkbox,"click",function(f){J(e.series||e,"checkboxClick",{checked:f.target.checked,item:e},function(){e.select()})})}});O.legend.itemStyle.cursor="pointer";B(A.prototype,{showResetZoom:function(){var p=this,h=O.lang,w=p.options.chart.resetZoomButton,t=w.theme,q=t.states,m="chart"===w.relativeTo?null:"plotBox";this.resetZoomButton=p.renderer.button(h.resetZoom,null,null,function(){p.zoomOut()},t,q&&q.hover).attr({align:w.position.align,title:h.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(w.position,!1,m)},zoomOut:function(){var e=this;J(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(m){var h,p=this.pointer,t=!1,q;!m||m.resetSelection?(n(this.axes,function(e){h=e.zoom()}),p.initiated=!1):n(m.xAxis.concat(m.yAxis),function(e){var f=e.axis;p[f.isXAxis?"zoomX":"zoomY"]&&(h=f.zoom(e.min,e.max),f.displayBtn&&(t=!0))});q=this.resetZoomButton;t&&!q?this.showResetZoom():!t&&L(q)&&(this.resetZoomButton=q.destroy());h&&this.redraw(R(this.options.chart.animation,m&&m.animation,100>this.pointCount))},pan:function(m,h){var t=this,q=t.hoverPoints,p;q&&n(q,function(e){e.setState()});n("xy"===h?[1,0]:[1],function(U){U=t[U?"xAxis":"yAxis"][0];var H=U.horiz,F=m[H?"chartX":"chartY"],H=H?"mouseDownX":"mouseDownY",G=t[H],z=(U.pointRange||0)/2,f=U.getExtremes(),D=U.toValue(G-F,!0)+z,z=U.toValue(G+U.len-F,!0)-z,E=z<D,G=E?z:D,D=E?D:z,z=Math.min(f.dataMin,U.toValue(U.toPixels(f.min)-U.minPixelPadding)),E=Math.max(f.dataMax,U.toValue(U.toPixels(f.max)+U.minPixelPadding)),w;w=z-G;0<w&&(D+=w,G=z);w=D-E;0<w&&(D=E,G-=w);U.series.length&&G!==f.min&&D!==f.max&&(U.setExtremes(G,D,!1,!1,{trigger:"pan"}),p=!0);t[H]=F});p&&t.redraw(!1);I(t.container,{cursor:"move"})}});B(S.prototype,{select:function(m,h){var p=this,t=p.series,q=t.chart;m=R(m,!p.selected);p.firePointEvent(m?"select":"unselect",{accumulate:h},function(){p.selected=p.options.selected=m;t.options.data[N(p,t.data)]=p.options;p.setState(m&&"select");h||n(q.getSelectedPoints(),function(e){e.selected&&e!==p&&(e.selected=e.options.selected=!1,t.options.data[N(e,t.data)]=e.options,e.setState(""),e.firePointEvent("unselect"))})})},onMouseOver:function(f){var e=this.series.chart,h=e.pointer;f=f?h.normalize(f):h.getChartCoordinatesFromPoint(this,e.inverted);h.runPointActions(f,this)},onMouseOut:function(){var e=this.series.chart;this.firePointEvent("mouseOut");n(e.hoverPoints||[],function(f){f.setState()});e.hoverPoints=e.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var e=this,f=Q(e.series.options.point,e.options).events;e.events=f;T.objectEach(f,function(h,m){v(e,m,h)});this.hasImportedEvents=!0}},setState:function(ad,ac){var W=Math.floor(this.plotX),aa=this.plotY,Z=this.series,H=Z.options.states[ad]||{},ab=K[Z.type].marker&&Z.options.marker,U=ab&&!1===ab.enabled,V=ab&&ab.states&&ab.states[ad]||{},G=!1===V.enabled,F=Z.stateMarkerGraphic,E=this.marker||{},ae=Z.chart,t=Z.halo,z,p=ab&&Z.markerAttribs;ad=ad||"";if(!(ad===this.state&&!ac||this.selected&&"select"!==ad||!1===H.enabled||ad&&(G||U&&!1===V.enabled)||ad&&E.states&&E.states[ad]&&!1===E.states[ad].enabled)){p&&(z=Z.markerAttribs(this,ad));if(this.graphic){this.state&&this.graphic.removeClass("highcharts-point-"+this.state),ad&&this.graphic.addClass("highcharts-point-"+ad),this.graphic.animate(Z.pointAttribs(this,ad),R(ae.options.chart.animation,H.animation)),z&&this.graphic.animate(z,R(ae.options.chart.animation,V.animation,ab.animation)),F&&F.hide()}else{if(ad&&V){ab=E.symbol||Z.symbol;F&&F.currentSymbol!==ab&&(F=F.destroy());if(F){F[ac?"animate":"attr"]({x:z.x,y:z.y})}else{ab&&(Z.stateMarkerGraphic=F=ae.renderer.symbol(ab,z.x,z.y,z.width,z.height).add(Z.markerGroup),F.currentSymbol=ab)}F&&F.attr(Z.pointAttribs(this,ad))}F&&(F[ad&&ae.isInsidePlot(W,aa,ae.inverted)?"show":"hide"](),F.element.point=this)}(W=H.halo)&&W.size?(t||(Z.halo=t=ae.renderer.path().add((this.graphic||F).parentGroup)),t[ac?"animate":"attr"]({d:this.haloPath(W.size)}),t.attr({"class":"highcharts-halo highcharts-color-"+R(this.colorIndex,Z.colorIndex)}),t.point=this,t.attr(B({fill:this.color||Z.color,"fill-opacity":W.opacity,zIndex:-1},W.attributes))):t&&t.point&&t.point.haloPath&&t.animate({d:t.point.haloPath(0)});this.state=ad}},haloPath:function(e){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-e,this.plotY-e,2*e,2*e)}});B(s.prototype,{onMouseOver:function(){var f=this.chart,e=f.hoverSeries;if(e&&e!==this){e.onMouseOut()}this.options.events.mouseOver&&J(this,"mouseOver");this.setState("hover");f.hoverSeries=this},onMouseOut:function(){var h=this.options,f=this.chart,p=f.tooltip,m=f.hoverPoint;f.hoverSeries=null;if(m){m.onMouseOut()}this&&h.events.mouseOut&&J(this,"mouseOut");!p||this.stickyTracking||p.shared&&!this.noSharedTooltip||p.hide();this.setState()},setState:function(p){var h=this,q=h.options,w=h.graph,t=q.states,m=q.lineWidth,q=0;p=p||"";if(h.state!==p&&(n([h.group,h.markerGroup,h.dataLabelsGroup],function(e){e&&(h.state&&e.removeClass("highcharts-series-"+h.state),p&&e.addClass("highcharts-series-"+p))}),h.state=p,!t[p]||!1!==t[p].enabled)&&(p&&(m=t[p].lineWidth||m+(t[p].lineWidthPlus||0)),w&&!w.dashstyle)){for(m={"stroke-width":m},w.animate(m,R(h.chart.options.chart.animation,t[p]&&t[p].animation));h["zone-graph-"+q];){h["zone-graph-"+q].attr(m),q+=1}}},setVisible:function(p,h){var D=this,w=D.chart,t=D.legendItem,m,z=w.options.chart.ignoreHiddenSeries,q=D.visible;m=(D.visible=p=D.options.visible=D.userOptions.visible=void 0===p?!q:p)?"show":"hide";n(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(e){if(D[e]){D[e][m]()}});if(w.hoverSeries===D||(w.hoverPoint&&w.hoverPoint.series)===D){D.onMouseOut()}t&&w.legend.colorizeItem(D,p);D.isDirty=!0;D.options.stacking&&n(w.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)});n(D.linkedSeries,function(e){e.setVisible(p,!1)});z&&(w.isDirtyBox=!0);!1!==h&&w.redraw();J(D,m)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){this.selected=e=void 0===e?!this.selected:e;this.checkbox&&(this.checkbox.checked=e);J(this,e?"select":"unselect")},drawTracker:o.drawTrackerGraph})})(a);(function(f){var o=f.Chart,q=f.each,m=f.inArray,n=f.isArray,g=f.isObject,s=f.pick,e=f.splat;o.prototype.setResponsive=function(z){var A=this.options.responsive,w=[],v=this.currentResponsive;A&&A.rules&&q(A.rules,function(h){void 0===h._id&&(h._id=f.uniqueKey());this.matchResponsiveRule(h,w,z)},this);var u=f.merge.apply(0,f.map(w,function(h){return f.find(A.rules,function(p){return p._id===h}).chartOptions})),w=w.toString()||void 0;w!==(v&&v.ruleIds)&&(v&&this.update(v.undoOptions,z),w?(this.currentResponsive={ruleIds:w,mergedOptions:u,undoOptions:this.currentOptions(u)},this.update(u,z)):this.currentResponsive=void 0)};o.prototype.matchResponsiveRule=function(p,v){var u=p.condition;(u.callback||function(){return this.chartWidth<=s(u.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=s(u.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=s(u.minWidth,0)&&this.chartHeight>=s(u.minHeight,0)}).call(this)&&v.push(p._id)};o.prototype.currentOptions=function(u){function h(t,p,w,z){var A;f.objectEach(t,function(B,C){if(!z&&-1<m(C,["series","xAxis","yAxis"])){for(B=e(B),w[C]=[],A=0;A<B.length;A++){p[C][A]&&(w[C][A]={},h(B[A],p[C][A],w[C][A],z+1))}}else{g(B)?(w[C]=n(B)?[]:{},h(B,p[C]||{},w[C],z+1)):w[C]=p[C]||null}})}var v={};h(u,this.options,v,0);return v}})(a);(function(v){var C=v.addEvent,D=v.Axis,A=v.Chart,e=v.css,s=v.dateFormat,g=v.defined,w=v.each,B=v.extend,f=v.noop,u=v.pick,o=v.timeUnits,n=v.wrap;n(v.Series.prototype,"init",function(h){var m;h.apply(this,Array.prototype.slice.call(arguments,1));(m=this.xAxis)&&m.options.ordinal&&C(this,"updatedData",function(){delete m.ordinalIndex})});n(D.prototype,"getTimeTicks",function(T,P,R,S,L,M,F,I){var O=0,G,N,h={},p,J,Q,z=[],H=-Number.MAX_VALUE,E=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!M||3>M.length||void 0===R){return T.call(this,P,R,S,L)}J=M.length;for(G=0;G<J;G++){Q=G&&M[G-1]>S;M[G]<R&&(O=G);if(G===J-1||M[G+1]-M[G]>5*F||Q){if(M[G]>H){for(N=T.call(this,P,M[O],M[G],L);N.length&&N[0]<=H;){N.shift()}N.length&&(H=N[N.length-1]);z=z.concat(N)}O=G+1}if(Q){break}}T=N.info;if(I&&T.unitRange<=o.hour){G=z.length-1;for(O=1;O<G;O++){s("%d",z[O])!==s("%d",z[O-1])&&(h[z[O]]="day",p=!0)}p&&(h[z[0]]="day");T.higherRanks=h}z.info=T;if(I&&g(E)){I=T=z.length;G=[];var K;for(p=[];I--;){O=this.translate(z[I]),K&&(p[I]=K-O),G[I]=K=O}p.sort();p=p[Math.floor(p.length/2)];p<0.6*E&&(p=null);I=z[T-1]>S?T-1:T;for(K=void 0;I--;){O=G[I],S=Math.abs(K-O),K&&S<0.8*E&&(null===p||S<0.8*p)?(h[z[I]]&&!h[z[I+1]]?(S=I+1,K=O):S=I,z.splice(S,1)):K=O}}return z});B(D.prototype,{beforeSetTickPositions:function(){var L,I=[],J=!1,K,F=this.getExtremes(),E=F.min,G=F.max,z,M=this.isXAxis&&!!this.options.breaks,F=this.options.ordinal,p=Number.MAX_VALUE,H=this.chart.options.chart.ignoreHiddenSeries;K="highcharts-navigator-xaxis"===this.options.className;!this.options.overscroll||this.max!==this.dataMax||this.chart.mouseIsDown&&!K||this.eventArgs&&(!this.eventArgs||"navigator"===this.eventArgs.trigger)||(this.max+=this.options.overscroll,!K&&g(this.userMin)&&(this.min+=this.options.overscroll));if(F||M){w(this.series,function(h,m){if(!(H&&!1===h.visible||!1===h.takeOrdinalPosition&&!M)&&(I=I.concat(h.processedXData),L=I.length,I.sort(function(q,t){return q-t}),p=Math.min(p,u(h.closestPointRange,p)),L)){for(m=L-1;m--;){I[m]===I[m+1]&&I.splice(m,1)}}});L=I.length;if(2<L){K=I[1]-I[0];for(z=L-1;z--&&!J;){I[z+1]-I[z]!==K&&(J=!0)}!this.options.keepOrdinalPadding&&(I[0]-E>K||G-I[I.length-1]>K)&&(J=!0)}else{this.options.overscroll&&(2===L?p=I[1]-I[0]:1===L?(p=this.options.overscroll,I=[I[0],I[0]+p]):p=this.overscrollPointsRange)}J?(this.options.overscroll&&(this.overscrollPointsRange=p,I=I.concat(this.getOverscrollPositions())),this.ordinalPositions=I,K=this.ordinal2lin(Math.max(E,I[0]),!0),z=Math.max(this.ordinal2lin(Math.min(G,I[I.length-1]),!0),1),this.ordinalSlope=G=(G-E)/(z-K),this.ordinalOffset=E-K*G):(this.overscrollPointsRange=u(this.closestPointRange,this.overscrollPointsRange),this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=void 0)}this.isOrdinal=F&&J;this.groupIntervalFactor=null},val2lin:function(p,t){var z=this.ordinalPositions;if(z){var h=z.length,q,m;for(q=h;q--;){if(z[q]===p){m=q;break}}for(q=h-1;q--;){if(p>z[q]||0===q){p=(p-z[q])/(z[q+1]-z[q]);m=q+p;break}}t=t?m:this.ordinalSlope*(m||0)+this.ordinalOffset}else{t=p}return t},lin2val:function(p,z){var E=this.ordinalPositions;if(E){var h=this.ordinalSlope,t=this.ordinalOffset,m=E.length-1,q;if(z){0>p?p=E[0]:p>m?p=E[m]:(m=Math.floor(p),q=p-m)}else{for(;m--;){if(z=h*m+t,p>=z){h=h*(m+1)+t;q=(p-z)/(h-z);break}}}return void 0!==q&&void 0!==E[m]?E[m]+(q?q*(E[m+1]-E[m]):0):p}return p},getExtendedPositions:function(){var J=this,G=J.chart,H=J.series[0].currentDataGrouping,I=J.ordinalIndex,E=H?H.count+H.unitName:"raw",z=J.options.overscroll,F=J.getExtremes(),t,q;I||(I=J.ordinalIndex={});I[E]||(t={series:[],chart:G,getExtremes:function(){return{min:F.dataMin,max:F.dataMax+z}},options:{ordinal:!0},val2lin:D.prototype.val2lin,ordinal2lin:D.prototype.ordinal2lin},w(J.series,function(h){q={xAxis:t,xData:h.xData.slice(),chart:G,destroyGroupedData:f};q.xData=q.xData.concat(J.getOverscrollPositions());q.options={dataGrouping:H?{enabled:!0,forced:!0,approximation:"open",units:[[H.unitName,[H.count]]]}:{enabled:!1}};h.processData.apply(q);t.series.push(q)}),J.beforeSetTickPositions.apply(t),I[E]=t.ordinalPositions);return I[E]},getOverscrollPositions:function(){var m=this.options.overscroll,p=this.overscrollPointsRange,q=[],h=this.dataMax;if(v.defined(p)){for(q.push(h);h<=this.dataMax+m;){h+=p,q.push(h)}}return q},getGroupIntervalFactor:function(p,t,z){var h;z=z.processedXData;var q=z.length,m=[];h=this.groupIntervalFactor;if(!h){for(h=0;h<q-1;h++){m[h]=z[h+1]-z[h]}m.sort(function(F,E){return F-E});m=m[Math.floor(q/2)];p=Math.max(p,z[0]);t=Math.min(t,z[q-1]);this.groupIntervalFactor=h=q*m/(t-p)}return h},postProcessTickInterval:function(h){var m=this.ordinalSlope;return m?this.options.breaks?this.closestPointRange||h:h/(m/this.closestPointRange):h}});D.prototype.ordinal2lin=D.prototype.val2lin;n(A.prototype,"pan",function(Q,M){var O=this.xAxis[0],P=O.options.overscroll,L=M.chartX,H=!1;if(O.options.ordinal&&O.series.length){var I=this.mouseDownX,J=O.getExtremes(),G=J.dataMax,E=J.min,K=J.max,S=this.hoverPoints,z=O.closestPointRange||O.overscrollPointsRange,I=(I-L)/(O.translationSlope*(O.ordinalSlope||z)),F={ordinalPositions:O.getExtendedPositions()},z=O.lin2val,N=O.val2lin,R;F.ordinalPositions?1<Math.abs(I)&&(S&&w(S,function(h){h.setState()}),0>I?(S=F,R=O.ordinalPositions?O:F):(S=O.ordinalPositions?O:F,R=F),F=R.ordinalPositions,G>F[F.length-1]&&F.push(G),this.fixedRange=K-E,I=O.toFixedRange(null,null,z.apply(S,[N.apply(S,[E,!0])+I,!0]),z.apply(R,[N.apply(R,[K,!0])+I,!0])),I.min>=Math.min(J.dataMin,E)&&I.max<=Math.max(G,K)+P&&O.setExtremes(I.min,I.max,!0,!1,{trigger:"pan"}),this.mouseDownX=L,e(this.container,{cursor:"move"})):H=!0}else{H=!0}H&&(P&&(O.max=O.dataMax+P),Q.apply(this,Array.prototype.slice.call(arguments,1)))})})(a);(function(o){function w(){return Array.prototype.slice.call(arguments,1)}function A(h){h.apply(this);this.drawBreaks(this.xAxis,["x"]);this.drawBreaks(this.yAxis,u(this.pointArrayMap,["y"]))}var u=o.pick,e=o.wrap,m=o.each,g=o.extend,s=o.isArray,v=o.fireEvent,f=o.Axis,n=o.Series;g(f.prototype,{isInBreak:function(p,q){var t=p.repeat||Infinity,z=p.from,B=p.to-p.from;q=q>=z?(q-z)%t:t-(z-q)%t;return p.inclusive?q<=B:q<B&&0!==q},isInAnyBreak:function(q,z){var B=this.options.breaks,C=B&&B.length,D,p,t;if(C){for(;C--;){this.isInBreak(B[C],q)&&(D=!0,p||(p=u(B[C].showPoints,this.isXAxis?!1:!0)))}t=D&&z?D&&!p:D}return t}});e(f.prototype,"setTickPositions",function(h){h.apply(this,Array.prototype.slice.call(arguments,1));if(this.options.breaks){var p=this.tickPositions,q=this.tickPositions.info,t=[],z;for(z=0;z<p.length;z++){this.isInAnyBreak(p[z])||t.push(p[z])}this.tickPositions=t;this.tickPositions.info=q}});e(f.prototype,"init",function(p,h,q){var t=this;q.breaks&&q.breaks.length&&(q.ordinal=!1);p.call(this,h,q);p=this.options.breaks;t.isBroken=s(p)&&!!p.length;t.isBroken&&(t.val2lin=function(B){var z=B,D,C;for(C=0;C<t.breakArray.length;C++){if(D=t.breakArray[C],D.to<=B){z-=D.len}else{if(D.from>=B){break}else{if(t.isInBreak(D,B)){z-=B-D.from;break}}}}return z},t.lin2val=function(B){var z,C;for(C=0;C<t.breakArray.length&&!(z=t.breakArray[C],z.from>=B);C++){z.to<B?B+=z.len:t.isInBreak(z,B)&&(B+=z.len)}return B},t.setExtremes=function(B,z,E,D,C){for(;this.isInAnyBreak(B);){B-=this.closestPointRange}for(;this.isInAnyBreak(z);){z-=this.closestPointRange}f.prototype.setExtremes.call(this,B,z,E,D,C)},t.setAxisTranslation=function(K){f.prototype.setAxisTranslation.call(this,K);K=t.options.breaks;var I=[],G=[],F=0,D,C,B=t.userMin||t.min,z=t.userMax||t.max,E=u(t.pointRangePadding,0),H,J;m(K,function(L){C=L.repeat||Infinity;t.isInBreak(L,B)&&(B+=L.to%C-B%C);t.isInBreak(L,z)&&(z-=z%C-L.from%C)});m(K,function(L){H=L.from;for(C=L.repeat||Infinity;H-C>B;){H-=C}for(;H<B;){H+=C}for(J=H;J<z;J+=C){I.push({value:J,move:"in"}),I.push({value:J+(L.to-L.from),move:"out",size:L.breakSize})}});I.sort(function(L,M){return L.value===M.value?("in"===L.move?0:1)-("in"===M.move?0:1):L.value-M.value});D=0;H=B;m(I,function(L){D+="in"===L.move?1:-1;1===D&&"in"===L.move&&(H=L.value);0===D&&(G.push({from:H,to:L.value,len:L.value-H-(L.size||0)}),F+=L.value-H-(L.size||0))});t.breakArray=G;t.unitLength=z-B-F+E;v(t,"afterBreaks");t.options.staticScale?t.transA=t.options.staticScale:t.unitLength&&(t.transA*=(z-t.min+E)/t.unitLength);E&&(t.minPixelPadding=t.transA*t.minPointOffset);t.min=B;t.max=z})});e(n.prototype,"generatePoints",function(t){t.apply(this,w(arguments));var z=this.xAxis,C=this.yAxis,D=this.points,E,p=D.length,B=this.options.connectNulls,q;if(z&&C&&(z.options.breaks||C.options.breaks)){for(;p--;){E=D[p],q=null===E.y&&!1===B,q||!z.isInAnyBreak(E.x,!0)&&!C.isInAnyBreak(E.y,!0)||(D.splice(p,1),this.data[p]&&this.data[p].destroyElements())}}});o.Series.prototype.drawBreaks=function(t,p){var B=this,C=B.points,D,h,z,q;t&&m(p,function(E){D=t.breakArray||[];h=t.isXAxis?t.min:u(B.options.threshold,t.min);m(C,function(F){q=u(F["stack"+E.toUpperCase()],F[E]);m(D,function(G){z=!1;if(h<G.from&&q>G.to||h>G.from&&q<G.from){z="pointBreak"}else{if(h<G.from&&q>G.from&&q<G.to||h>G.from&&q>G.to&&q<G.from){z="pointInBreak"}}z&&v(t,z,{point:F,brk:G})})})})};o.Series.prototype.gappedPath=function(){var p=this.options.gapSize,q=this.points.slice(),t=q.length-1,z=this.yAxis,B;if(p&&0<t){for("value"!==this.options.gapUnit&&(p*=this.closestPointRange);t--;){q[t+1].x-q[t].x>p&&(B=(q[t].x+q[t+1].x)/2,q.splice(t+1,0,{isNull:!0,x:B}),this.options.stacking&&(B=z.stacks[this.stackKey][B]=new o.StackItem(z,z.options.stackLabels,!1,B,this.stack),B.total=0))}}return this.getGraphPath(q)};e(o.seriesTypes.column.prototype,"drawPoints",A);e(o.Series.prototype,"drawPoints",A)})(a);(function(Z){var A=Z.arrayMax,B=Z.arrayMin,v=Z.Axis,M=Z.defaultPlotOptions,S=Z.defined,O=Z.each,o=Z.extend,I=Z.format,N=Z.isNumber,n=Z.merge,R=Z.pick,P=Z.Point,T=Z.Tooltip,U=Z.wrap,V=Z.Series.prototype,W=V.processData,u=V.generatePoints,Q=V.destroy,J={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},s={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},L=Z.defaultDataGroupingUnits=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],g=Z.approximations={sum:function(f){var e=f.length,h;if(!e&&f.hasNulls){h=null}else{if(e){for(h=0;e--;){h+=f[e]}}}return h},average:function(f){var e=f.length;f=g.sum(f);N(f)&&e&&(f/=e);return f},averages:function(){var e=[];O(arguments,function(f){e.push(g.average(f))});return void 0===e[0]?void 0:e},open:function(e){return e.length?e[0]:e.hasNulls?null:void 0},high:function(e){return e.length?A(e):e.hasNulls?null:void 0},low:function(e){return e.length?B(e):e.hasNulls?null:void 0},close:function(e){return e.length?e[e.length-1]:e.hasNulls?null:void 0},ohlc:function(h,f,p,m){h=g.open(h);f=g.high(f);p=g.low(p);m=g.close(m);if(N(h)||N(f)||N(p)||N(m)){return[h,f,p,m]}},range:function(f,e){f=g.low(f);e=g.high(e);if(N(f)||N(e)){return[f,e]}if(null===f&&null===e){return null}}};V.groupData=function(am,al,ak,ai){var aj=this.data,ag=this.options.data,ah=[],ad=[],ab=[],ae=am.length,af,ac,G=!!al,K=[];ai="function"===typeof ai?ai:g[ai]||s[this.type]&&g[s[this.type].approximation]||g[J.approximation];var D=this.pointArrayMap,aa=D&&D.length,F=0;ac=0;var E,p;aa?O(D,function(){K.push([])}):K.push([]);E=aa||1;for(p=0;p<=ae&&!(am[p]>=ak[0]);p++){}for(p;p<=ae;p++){for(;void 0!==ak[F+1]&&am[p]>=ak[F+1]||p===ae;){af=ak[F];this.dataGroupInfo={start:ac,length:K[0].length};ac=ai.apply(this,K);void 0!==ac&&(ah.push(af),ad.push(ac),ab.push(this.dataGroupInfo));ac=p;for(af=0;af<E;af++){K[af].length=0,K[af].hasNulls=!1}F+=1;if(p===ae){break}}if(p===ae){break}if(D){af=this.cropStart+p;var H=aj&&aj[af]||this.pointClass.prototype.applyOptions.apply({series:this},[ag[af]]),q;for(af=0;af<aa;af++){q=H[D[af]],N(q)?K[af].push(q):null===q&&(K[af].hasNulls=!0)}}else{af=G?al[p]:null,N(af)?K[0].push(af):null===af&&(K[0].hasNulls=!0)}}return[ah,ad,ab]};V.processData=function(){var K=this.chart,G=this.options.dataGrouping,F=!1!==this.allowDG&&G&&R(G.enabled,K.options.isStock),E=this.visible||!K.options.chart.ignoreHiddenSeries,H,D=this.currentDataGrouping,z;this.forceCrop=F;this.groupPixelWidth=null;this.hasProcessed=!0;if(!1!==W.apply(this,arguments)&&F){this.destroyGroupedData();var aa=this.processedXData,C=this.processedYData,ab=K.plotSizeX,K=this.xAxis,w=K.options.ordinal,h=this.groupPixelWidth=K.getGroupPixelWidth&&K.getGroupPixelWidth();if(h){this.isDirty=H=!0;this.points=null;F=K.getExtremes();z=F.min;F=F.max;w=w&&K.getGroupIntervalFactor(z,F,this)||1;h=h*(F-z)/ab*w;ab=K.getTimeTicks(K.normalizeTimeTickInterval(h,G.units||L),Math.min(z,aa[0]),Math.max(F,aa[aa.length-1]),K.options.startOfWeek,aa,this.closestPointRange);aa=V.groupData.apply(this,[aa,C,ab,G.approximation]);C=aa[0];w=aa[1];if(G.smoothed&&C.length){G=C.length-1;for(C[G]=Math.min(C[G],F);G--&&0<G;){C[G]+=h/2}C[0]=Math.max(C[0],z)}z=ab.info;this.closestPointRange=ab.info.totalRange;this.groupMap=aa[2];S(C[0])&&C[0]<K.dataMin&&E&&(K.min===K.dataMin&&(K.min=C[0]),K.dataMin=C[0]);this.processedXData=C;this.processedYData=w}else{this.groupMap=null}this.hasGroupedData=H;this.currentDataGrouping=z;this.preventGraphAnimation=(D&&D.totalRange)!==(z&&z.totalRange)}};V.destroyGroupedData=function(){var e=this.groupedData;O(e||[],function(f,h){f&&(e[h]=f.destroy?f.destroy():null)});this.groupedData=null};V.generatePoints=function(){u.apply(this);this.destroyGroupedData();this.groupedData=this.hasGroupedData?this.points:null};U(P.prototype,"update",function(e){this.dataGroup?Z.error(24):e.apply(this,[].slice.call(arguments,1))});U(T.prototype,"tooltipFooterHeaderFormatter",function(F,E,C){var w=E.series,D=w.tooltipOptions,z=w.options.dataGrouping,p=D.xDateFormat,t,m=w.xAxis,q=Z.dateFormat;return m&&"datetime"===m.options.type&&z&&N(E.key)?(F=w.currentDataGrouping,z=z.dateTimeLabelFormats,F?(m=z[F.unitName],1===F.count?p=m[0]:(p=m[1],t=m[2])):!p&&z&&(p=this.getXDateFormat(E,D,m)),p=q(p,E.key),t&&(p+=q(t,E.key+F.totalRange-1)),I(D[(C?"footer":"header")+"Format"],{point:o(E.point,{key:p}),series:w})):F.call(this,E,C)});V.destroy=function(){for(var f=this.groupedData||[],e=f.length;e--;){f[e]&&f[e].destroy()}Q.apply(this)};U(V,"setOptions",function(h,f){h=h.call(this,f);var q=this.type,m=this.chart.options.plotOptions,p=M[q].dataGrouping;s[q]&&(p||(p=n(J,s[q])),h.dataGrouping=n(p,m.series&&m.series.dataGrouping,m[q].dataGrouping,f.dataGrouping));this.chart.options.isStock&&(this.requireSorting=!0);return h});U(v.prototype,"setScale",function(e){e.call(this);O(this.series,function(f){f.hasProcessed=!1})});v.prototype.getGroupPixelWidth=function(){var m=this.series,h=m.length,w,q=0,t=!1,p;for(w=h;w--;){(p=m[w].options.dataGrouping)&&(q=Math.max(q,p.groupPixelWidth))}for(w=h;w--;){(p=m[w].options.dataGrouping)&&m[w].hasProcessed&&(h=(m[w].processedXData||m[w].data).length,m[w].groupPixelWidth||h>this.chart.plotSizeX/q||h&&p.forced)&&(t=!0)}return t?q:0};v.prototype.setDataGrouping=function(f,e){var h;e=R(e,!0);f||(f={forced:!1,units:null});if(this instanceof v){for(h=this.series.length;h--;){this.series[h].update({dataGrouping:f},!1)}}else{O(this.chart.options.series,function(m){m.dataGrouping=f},!1)}e&&this.chart.redraw()}})(a);(function(e){var h=e.each,m=e.Point,f=e.seriesType,g=e.seriesTypes;f("ohlc","column",{lineWidth:1,tooltip:{pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e \x3cb\x3e {series.name}\x3c/b\x3e\x3cbr/\x3eOpen: {point.open}\x3cbr/\x3eHigh: {point.high}\x3cbr/\x3eLow: {point.low}\x3cbr/\x3eClose: {point.close}\x3cbr/\x3e'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0},{directTouch:!1,pointArrayMap:["open","high","low","close"],toYData:function(n){return[n.open,n.high,n.low,n.close]},pointValKey:"close",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointAttribs:function(n,q){q=g.column.prototype.pointAttribs.call(this,n,q);var o=this.options;delete q.fill;!n.options.color&&o.upColor&&n.open<n.close&&(q.stroke=o.upColor);return q},translate:function(){var o=this,s=o.yAxis,n=!!o.modifyValue,q=["plotOpen","plotHigh","plotLow","plotClose","yBottom"];g.column.prototype.translate.apply(o);h(o.points,function(p){h([p.open,p.high,p.low,p.close,p.low],function(u,t){null!==u&&(n&&(u=o.modifyValue(u)),p[q[t]]=s.toPixels(u,!0))});p.tooltipPos[1]=p.plotHigh+s.pos-o.chart.plotTop})},drawPoints:function(){var n=this,o=n.chart;h(n.points,function(v){var u,A,w,s,p=v.graphic,z,B=!p;void 0!==v.plotY&&(p||(v.graphic=p=o.renderer.path().add(n.group)),p.attr(n.pointAttribs(v,v.selected&&"select")),A=p.strokeWidth()%2/2,z=Math.round(v.plotX)-A,w=Math.round(v.shapeArgs.width/2),s=["M",z,Math.round(v.yBottom),"L",z,Math.round(v.plotHigh)],null!==v.open&&(u=Math.round(v.plotOpen)+A,s.push("M",z,u,"L",z-w,u)),null!==v.close&&(u=Math.round(v.plotClose)+A,s.push("M",z,u,"L",z+w,u)),p[B?"attr":"animate"]({d:s}).addClass(v.getClassName(),!0))})},animate:null},{getClassName:function(){return m.prototype.getClassName.call(this)+(this.open<this.close?" highcharts-point-up":" highcharts-point-down")}})})(a);(function(e){var n=e.defaultPlotOptions,o=e.each,g=e.merge,m=e.seriesType,f=e.seriesTypes;m("candlestick","ohlc",g(n.column,{states:{hover:{lineWidth:2}},tooltip:n.ohlc.tooltip,threshold:null,lineColor:"#000000",lineWidth:1,upColor:"#ffffff",stickyTracking:!0}),{pointAttribs:function(s,u){var w=f.column.prototype.pointAttribs.call(this,s,u),v=this.options,h=s.open<s.close,t=v.lineColor||this.color;w["stroke-width"]=v.lineWidth;w.fill=s.options.color||(h?v.upColor||this.color:this.color);w.stroke=s.lineColor||(h?v.upLineColor||t:t);u&&(s=v.states[u],w.fill=s.color||w.fill,w.stroke=s.lineColor||w.stroke,w["stroke-width"]=s.lineWidth||w["stroke-width"]);return w},drawPoints:function(){var p=this,q=p.chart;o(p.points,function(s){var E=s.graphic,h,v,u,z,A,B,C,D=!E;void 0!==s.plotY&&(E||(s.graphic=E=q.renderer.path().add(p.group)),E.attr(p.pointAttribs(s,s.selected&&"select")).shadow(p.options.shadow),A=E.strokeWidth()%2/2,B=Math.round(s.plotX)-A,h=s.plotOpen,v=s.plotClose,u=Math.min(h,v),h=Math.max(h,v),C=Math.round(s.shapeArgs.width/2),v=Math.round(u)!==Math.round(s.plotHigh),z=h!==s.yBottom,u=Math.round(u)+A,h=Math.round(h)+A,A=[],A.push("M",B-C,h,"L",B-C,u,"L",B+C,u,"L",B+C,h,"Z","M",B,u,"L",B,v?Math.round(s.plotHigh):u,"M",B,h,"L",B,z?Math.round(s.yBottom):h),E[D?"attr":"animate"]({d:A}).addClass(s.getClassName(),!0))})}})})(a);d=function(e){var g=e.each,h=e.seriesTypes,f=e.stableSort;return{translate:function(){h.column.prototype.translate.apply(this);var I=this.options,B=this.chart,s=this.points,J=s.length-1,L,o,G=I.onSeries;L=G&&B.get(G);var I=I.onKey||"y",G=L&&L.options.step,A=L&&L.points,u=A&&A.length,C=this.xAxis,E=this.yAxis,F=C.getExtremes(),H=0,K,v,n;if(L&&L.visible&&u){for(H=(L.pointXOffset||0)+(L.barW||0)/2,L=L.currentDataGrouping,v=A[u-1].x+(L?L.totalRange:0),f(s,function(p,m){return p.x-m.x}),I="plot"+I[0].toUpperCase()+I.substr(1);u--&&s[J]&&!(L=s[J],K=A[u],K.x<=L.x&&void 0!==K[I]&&(L.x<=v&&(L.plotY=K[I],K.x<L.x&&!G&&(n=A[u+1])&&void 0!==n[I]&&(L.plotY+=(L.x-K.x)/(n.x-K.x)*(n[I]-K[I]))),J--,u++,0>J));){}}g(s,function(p,m){var q;void 0===p.plotY&&(p.x>=F.min&&p.x<=F.max?p.plotY=B.chartHeight-C.bottom-(C.opposite?C.height:0)+C.offset-E.top:p.shapeArgs={});p.plotX+=H;(o=s[m-1])&&o.plotX===p.plotX&&(void 0===o.stackIndex&&(o.stackIndex=0),q=o.stackIndex+1);p.stackIndex=q})}}}(a);(function(o,w){var A=o.addEvent,u=o.each,e=o.merge,m=o.noop,g=o.Renderer,s=o.seriesType,v=o.TrackerMixin,f=o.VMLRenderer,n=o.SVGRenderer.prototype.symbols;s("flags","column",{pointRange:0,shape:"flag",stackDistance:12,textAlign:"center",tooltip:{pointFormat:"{point.text}\x3cbr/\x3e"},threshold:null,y:-30,fillColor:"#ffffff",lineWidth:1,states:{hover:{lineColor:"#000000",fillColor:"#ccd6eb"}},style:{fontSize:"11px",fontWeight:"bold"}},{sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:o.Series.prototype.init,pointAttribs:function(q,t){var z=this.options,B=q&&q.color||this.color,C=z.lineColor,p=q&&q.lineWidth;q=q&&q.fillColor||z.fillColor;t&&(q=z.states[t].fillColor,C=z.states[t].lineColor,p=z.states[t].lineWidth);return{fill:q||B,stroke:C||B,"stroke-width":p||z.lineWidth||0}},translate:w.translate,drawPoints:function(){var G=this.points,E=this.chart,I=E.renderer,K,M,O=this.options,C=O.y,F,R,B,Q,L,H,N=this.yAxis,P={},D=[];for(R=G.length;R--;){B=G[R],H=B.plotX>this.xAxis.len,K=B.plotX,Q=B.stackIndex,F=B.options.shape||O.shape,M=B.plotY,void 0!==M&&(M=B.plotY+C-(void 0!==Q&&Q*O.stackDistance)),B.anchorX=Q?void 0:B.plotX,L=Q?void 0:B.plotY,Q=B.graphic,void 0!==M&&0<=K&&!H?(Q||(Q=B.graphic=I.label("",null,null,F,null,null,O.useHTML).attr(this.pointAttribs(B)).css(e(O.style,B.style)).attr({align:"flag"===F?"left":"center",width:O.width,height:O.height,"text-align":O.textAlign}).addClass("highcharts-point").add(this.markerGroup),B.graphic.div&&(B.graphic.div.point=B),Q.shadow(O.shadow),Q.isNew=!0),0<K&&(K-=Q.strokeWidth()%2),Q.attr({text:B.options.title||O.title||"A"})[Q.isNew?"attr":"animate"]({y:M,anchorY:L}),P[B.plotX]?P[B.plotX].size=Math.max(P[B.plotX].size,Q.width):P[B.plotX]={align:0,size:Q.width,target:K,anchorX:K},B.tooltipPos=E.inverted?[N.len+N.pos-E.plotLeft-M,this.xAxis.len-K]:[K,M+N.pos-E.plotTop]):Q&&(B.graphic=Q.destroy())}o.objectEach(P,function(h){h.plotX=h.anchorX;D.push(h)});o.distribute(D,this.xAxis.len);u(G,function(p){var h=p.graphic&&P[p.plotX];h&&(p.graphic[p.graphic.isNew?"attr":"animate"]({x:h.pos,anchorX:p.anchorX}),p.graphic.isNew=!1)});O.useHTML&&o.wrap(this.markerGroup,"on",function(h){return o.SVGElement.prototype.on.apply(h.apply(this,[].slice.call(arguments,1)),[].slice.call(arguments,1))})},drawTracker:function(){var h=this.points;v.drawTrackerPoint.apply(this);u(h,function(p){var q=p.graphic;q&&A(q.element,"mouseover",function(){0<p.stackIndex&&!p.raised&&(p._y=q.y,q.attr({y:p._y-8}),p.raised=!0);u(h,function(t){t!==p&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)})})})},animate:m,buildKDTree:m,setClip:m});n.flag=function(q,t,z,B,C){var p=C&&C.anchorX||q;C=C&&C.anchorY||t;return n.circle(p-1,C-1,2,2).concat(["M",p,C,"L",q,t+B,q,t,q+z,t,q+z,t+B,q,t+B,"Z"])};u(["circle","square"],function(h){n[h+"pin"]=function(t,z,B,C,p){var q=p&&p.anchorX;p=p&&p.anchorY;"circle"===h&&C>B&&(t-=Math.round((C-B)/2),B=C);t=n[h](t,z,B,C);q&&p&&(t.push("M","circle"===h?t[1]-t[4]:t[1]+t[4]/2,z>p?z:z+C,"L",q,p),t=t.concat(n.circle(q-1,p-1,2,2)));return t}});g===f&&u(["flag","circlepin","squarepin"],function(h){f.prototype.symbols[h]=n[h]})})(a,d);(function(O){function u(f,e,h){this.init(f,e,h)}var v=O.addEvent,s=O.Axis,B=O.correctFloat,J=O.defaultOptions,D=O.defined,n=O.destroyObjectProperties,A=O.each,C=O.fireEvent,g=O.hasTouch,I=O.isTouchDevice,H=O.merge,K=O.pick,L=O.removeEvent,M=O.wrap,N,o={height:I?20:14,barBorderRadius:0,buttonBorderRadius:0,liveRedraw:O.svg&&!I,margin:10,minWidth:6,step:0.2,zIndex:3,barBackgroundColor:"#cccccc",barBorderWidth:1,barBorderColor:"#cccccc",buttonArrowColor:"#333333",buttonBackgroundColor:"#e6e6e6",buttonBorderColor:"#cccccc",buttonBorderWidth:1,rifleColor:"#333333",trackBackgroundColor:"#f2f2f2",trackBorderColor:"#f2f2f2",trackBorderWidth:1};J.scrollbar=H(!0,o,J.scrollbar);O.swapXY=N=function(h,f){var p=h.length,m;if(f){for(f=0;f<p;f+=3){m=h[f+1],h[f+1]=h[f+2],h[f+2]=m}}return h};u.prototype={init:function(f,e,h){this.scrollbarButtons=[];this.renderer=f;this.userOptions=e;this.options=H(o,e);this.chart=h;this.size=K(this.options.size,this.options.height);e.enabled&&(this.render(),this.initEvents(),this.addEvents())},render:function(){var h=this.renderer,q=this.options,p=this.size,m;this.group=m=h.g("scrollbar").attr({zIndex:q.zIndex,translateY:-99999}).add();this.track=h.rect().addClass("highcharts-scrollbar-track").attr({x:0,r:q.trackBorderRadius||0,height:p,width:p}).add(m);this.track.attr({fill:q.trackBackgroundColor,stroke:q.trackBorderColor,"stroke-width":q.trackBorderWidth});this.trackBorderWidth=this.track.strokeWidth();this.track.attr({y:-this.trackBorderWidth%2/2});this.scrollbarGroup=h.g().add(m);this.scrollbar=h.rect().addClass("highcharts-scrollbar-thumb").attr({height:p,width:p,r:q.barBorderRadius||0}).add(this.scrollbarGroup);this.scrollbarRifles=h.path(N(["M",-3,p/4,"L",-3,2*p/3,"M",0,p/4,"L",0,2*p/3,"M",3,p/4,"L",3,2*p/3],q.vertical)).addClass("highcharts-scrollbar-rifles").add(this.scrollbarGroup);this.scrollbar.attr({fill:q.barBackgroundColor,stroke:q.barBorderColor,"stroke-width":q.barBorderWidth});this.scrollbarRifles.attr({stroke:q.rifleColor,"stroke-width":1});this.scrollbarStrokeWidth=this.scrollbar.strokeWidth();this.scrollbarGroup.translate(-this.scrollbarStrokeWidth%2/2,-this.scrollbarStrokeWidth%2/2);this.drawScrollbarButton(0);this.drawScrollbarButton(1)},position:function(p,m,E,z){var w=this.options.vertical,t=0,q=this.rendered?"animate":"attr";this.x=p;this.y=m+this.trackBorderWidth;this.width=E;this.xOffset=this.height=z;this.yOffset=t;w?(this.width=this.yOffset=E=t=this.size,this.xOffset=m=0,this.barWidth=z-2*E,this.x=p+=this.options.margin):(this.height=this.xOffset=z=m=this.size,this.barWidth=E-2*z,this.y+=this.options.margin);this.group[q]({translateX:p,translateY:this.y});this.track[q]({width:E,height:z});this.scrollbarButtons[1][q]({translateX:w?0:E-m,translateY:w?z-t:0})},drawScrollbarButton:function(m){var z=this.renderer,w=this.scrollbarButtons,t=this.options,p=this.size,q;q=z.g().add(this.group);w.push(q);q=z.rect().addClass("highcharts-scrollbar-button").add(q);q.attr({stroke:t.buttonBorderColor,"stroke-width":t.buttonBorderWidth,fill:t.buttonBackgroundColor});q.attr(q.crisp({x:-0.5,y:-0.5,width:p+1,height:p+1,r:t.buttonBorderRadius},q.strokeWidth()));q=z.path(N(["M",p/2+(m?-1:1),p/2-3,"L",p/2+(m?-1:1),p/2+3,"L",p/2+(m?2:-2),p/2],t.vertical)).addClass("highcharts-scrollbar-arrow").add(w[m]);q.attr({fill:t.buttonArrowColor})},setRange:function(G,F){var E=this.options,z=E.vertical,w=E.minWidth,t=this.barWidth,q,m,p=this.rendered&&!this.hasDragged?"animate":"attr";D(t)&&(G=Math.max(G,0),q=Math.ceil(t*G),this.calculatedWidth=m=B(t*Math.min(F,1)-q),m<w&&(q=(t-w+m)*G,m=w),w=Math.floor(q+this.xOffset+this.yOffset),t=m/2-0.5,this.from=G,this.to=F,z?(this.scrollbarGroup[p]({translateY:w}),this.scrollbar[p]({height:m}),this.scrollbarRifles[p]({translateY:t}),this.scrollbarTop=w,this.scrollbarLeft=0):(this.scrollbarGroup[p]({translateX:w}),this.scrollbar[p]({width:m}),this.scrollbarRifles[p]({translateX:t}),this.scrollbarLeft=w,this.scrollbarTop=0),12>=m?this.scrollbarRifles.hide():this.scrollbarRifles.show(!0),!1===E.showFull&&(0>=G&&1<=F?this.group.hide():this.group.show()),this.rendered=!0)},initEvents:function(){var e=this;e.mouseMoveHandler=function(h){var q=e.chart.pointer.normalize(h),p=e.options.vertical?"chartY":"chartX",m=e.initPositions;!e.grabbedCenter||h.touches&&0===h.touches[0][p]||(q=e.cursorToScrollbarPosition(q)[p],p=e[p],p=q-p,e.hasDragged=!0,e.updatePosition(m[0]+p,m[1]+p),e.hasDragged&&C(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMType:h.type,DOMEvent:h}))};e.mouseUpHandler=function(f){e.hasDragged&&C(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMType:f.type,DOMEvent:f});e.grabbedCenter=e.hasDragged=e.chartX=e.chartY=null};e.mouseDownHandler=function(f){f=e.chart.pointer.normalize(f);f=e.cursorToScrollbarPosition(f);e.chartX=f.chartX;e.chartY=f.chartY;e.initPositions=[e.from,e.to];e.grabbedCenter=!0};e.buttonToMinClick=function(f){var h=B(e.to-e.from)*e.options.step;e.updatePosition(B(e.from-h),B(e.to-h));C(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMEvent:f})};e.buttonToMaxClick=function(f){var h=(e.to-e.from)*e.options.step;e.updatePosition(e.from+h,e.to+h);C(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMEvent:f})};e.trackClick=function(h){var t=e.chart.pointer.normalize(h),q=e.to-e.from,p=e.y+e.scrollbarTop,m=e.x+e.scrollbarLeft;e.options.vertical&&t.chartY>p||!e.options.vertical&&t.chartX>m?e.updatePosition(e.from+q,e.to+q):e.updatePosition(e.from-q,e.to-q);C(e,"changed",{from:e.from,to:e.to,trigger:"scrollbar",DOMEvent:h})}},cursorToScrollbarPosition:function(f){var e=this.options,e=e.minWidth>this.calculatedWidth?e.minWidth:0;return{chartX:(f.chartX-this.x-this.xOffset)/(this.barWidth-e),chartY:(f.chartY-this.y-this.yOffset)/(this.barWidth-e)}},updatePosition:function(f,e){1<e&&(f=B(1-B(e-f)),e=1);0>f&&(e=B(e-f),f=0);this.from=f;this.to=e},update:function(e){this.destroy();this.init(this.chart.renderer,H(!0,this.options,e),this.chart)},addEvents:function(){var m=this.options.inverted?[1,0]:[0,1],h=this.scrollbarButtons,w=this.scrollbarGroup.element,t=this.mouseDownHandler,q=this.mouseMoveHandler,p=this.mouseUpHandler,m=[[h[m[0]].element,"click",this.buttonToMinClick],[h[m[1]].element,"click",this.buttonToMaxClick],[this.track.element,"click",this.trackClick],[w,"mousedown",t],[w.ownerDocument,"mousemove",q],[w.ownerDocument,"mouseup",p]];g&&m.push([w,"touchstart",t],[w.ownerDocument,"touchmove",q],[w.ownerDocument,"touchend",p]);A(m,function(e){v.apply(null,e)});this._events=m},removeEvents:function(){A(this._events,function(e){L.apply(null,e)});this._events.length=0},destroy:function(){var e=this.chart.scroller;this.removeEvents();A(["track","scrollbarRifles","scrollbar","scrollbarGroup","group"],function(f){this[f]&&this[f].destroy&&(this[f]=this[f].destroy())},this);e&&this===e.scrollbar&&(e.scrollbar=null,n(e.scrollbarButtons))}};M(s.prototype,"init",function(f){var e=this;f.apply(e,Array.prototype.slice.call(arguments,1));e.options.scrollbar&&e.options.scrollbar.enabled&&(e.options.scrollbar.vertical=!e.horiz,e.options.startOnTick=e.options.endOnTick=!1,e.scrollbar=new u(e.chart.renderer,e.options.scrollbar,e.chart),v(e.scrollbar,"changed",function(h){var q=Math.min(K(e.options.min,e.min),e.min,e.dataMin),p=Math.max(K(e.options.max,e.max),e.max,e.dataMax)-q,m;e.horiz&&!e.reversed||!e.horiz&&e.reversed?(m=q+p*this.to,q+=p*this.from):(m=q+p*(1-this.from),q+=p*(1-this.to));e.setExtremes(q,m,!0,!1,h)}))});M(s.prototype,"render",function(m){var f=Math.min(K(this.options.min,this.min),this.min,K(this.dataMin,this.min)),t=Math.max(K(this.options.max,this.max),this.max,K(this.dataMax,this.max)),q=this.scrollbar,p=this.titleOffset||0;m.apply(this,Array.prototype.slice.call(arguments,1));if(q){this.horiz?(q.position(this.left,this.top+this.height+2+this.chart.scrollbarsOffsets[1]+(this.opposite?0:p+this.axisTitleMargin+this.offset),this.width,this.height),p=1):(q.position(this.left+this.width+2+this.chart.scrollbarsOffsets[0]+(this.opposite?p+this.axisTitleMargin+this.offset:0),this.top,this.width,this.height),p=0);if(!this.opposite&&!this.horiz||this.opposite&&this.horiz){this.chart.scrollbarsOffsets[p]+=this.scrollbar.size+this.scrollbar.options.margin}isNaN(f)||isNaN(t)||!D(this.min)||!D(this.max)?q.setRange(0,0):(p=(this.min-f)/(t-f),f=(this.max-f)/(t-f),this.horiz&&!this.reversed||!this.horiz&&this.reversed?q.setRange(p,f):q.setRange(1-f,1-p))}});M(s.prototype,"getOffset",function(f){var e=this.horiz?2:1,h=this.scrollbar;f.apply(this,Array.prototype.slice.call(arguments,1));h&&(this.chart.scrollbarsOffsets=[0,0],this.chart.axisOffset[e]+=h.size+h.options.margin)});M(s.prototype,"destroy",function(e){this.scrollbar&&(this.scrollbar=this.scrollbar.destroy());e.apply(this,Array.prototype.slice.call(arguments,1))});O.Scrollbar=u})(a);(function(ag){function M(e){this.init(e)}var N=ag.addEvent,L=ag.Axis,R=ag.Chart,aa=ag.color,U=ag.defaultOptions,v=ag.defined,O=ag.destroyObjectProperties,S=ag.each,o=ag.erase,Z=ag.error,V=ag.extend,ac=ag.grep,ad=ag.hasTouch,ae=ag.isArray,af=ag.isNumber,I=ag.isObject,W=ag.merge,P=ag.pick,B=ag.removeEvent,Q=ag.Scrollbar,n=ag.Series,ab=ag.seriesTypes,u=ag.wrap,s=[].concat(ag.defaultDataGroupingUnits),T=function(e){var f=ac(arguments,af);if(f.length){return Math[e].apply(0,f)}};s[4]=["day",[1,2,3,4]];s[5]=["week",[1,2,3]];ab=void 0===ab.areaspline?"line":"areaspline";V(U,{navigator:{height:40,margin:25,maskInside:!0,handles:{width:7,height:15,symbols:["navigator-handle","navigator-handle"],enabled:!0,lineWidth:1,backgroundColor:"#f2f2f2",borderColor:"#999999"},maskFill:aa("#6685c2").setOpacity(0.3).get(),outlineColor:"#cccccc",outlineWidth:1,series:{type:ab,fillOpacity:0.05,lineWidth:1,compare:null,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:s},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",className:"highcharts-navigator-series",lineColor:null,marker:{enabled:!1},pointRange:0,threshold:null},xAxis:{overscroll:0,className:"highcharts-navigator-xaxis",tickLength:0,lineWidth:0,gridLineColor:"#e6e6e6",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#999999"},x:3,y:-4},crosshair:!1},yAxis:{className:"highcharts-navigator-yaxis",gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:0.1,maxPadding:0.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickLength:0,tickWidth:0}}});ag.Renderer.prototype.symbols["navigator-handle"]=function(h,f,q,p,m){h=m.width/2;f=Math.round(h/3)+0.5;m=m.height;return["M",-h-1,0.5,"L",h,0.5,"L",h,m+0.5,"L",-h-1,m+0.5,"L",-h-1,0.5,"M",-f,4,"L",-f,m-3,"M",f-1,4,"L",f-1,m-3]};M.prototype={drawHandle:function(g,f,p,h){var m=this.navigatorOptions.handles.height;this.handles[f][h](p?{translateX:Math.round(this.left+this.height/2),translateY:Math.round(this.top+parseInt(g,10)+0.5-m)}:{translateX:Math.round(this.left+parseInt(g,10)),translateY:Math.round(this.top+this.height/2-m/2-1)})},drawOutline:function(G,F,E,C){var D=this.navigatorOptions.maskInside,z=this.outline.strokeWidth(),A=z/2,z=z%2/2,w=this.outlineHeight,t=this.scrollbarHeight,q=this.size,p=this.left-t,H=this.top;E?(p-=A,E=H+F+z,F=H+G+z,G=["M",p+w,H-t-z,"L",p+w,E,"L",p,E,"L",p,F,"L",p+w,F,"L",p+w,H+q+t].concat(D?["M",p+w,E-A,"L",p+w,F+A]:[])):(G+=p+t-z,F+=p+t-z,H+=A,G=["M",p,H,"L",G,H,"L",G,H+w,"L",F,H+w,"L",F,H,"L",p+q+2*t,H].concat(D?["M",G-A,H,"L",F+A,H]:[]));this.outline[C]({d:G})},drawMasks:function(G,F,E,C){var D=this.left,z=this.top,A=this.height,w,t,q,p;E?(q=[D,D,D],p=[z,z+G,z+F],t=[A,A,A],w=[G,F-G,this.size-F]):(q=[D,D+G,D+F],p=[z,z,z],t=[G,F-G,this.size-F],w=[A,A,A]);S(this.shades,function(f,e){f[C]({x:q[e],y:p[e],width:t[e],height:w[e]})})},renderElements:function(){var p=this,m=p.navigatorOptions,C=m.maskInside,A=p.chart,w=A.inverted,z=A.renderer,t;p.navigatorGroup=t=z.g("navigator").attr({zIndex:8,visibility:"hidden"}).add();var q={cursor:w?"ns-resize":"ew-resize"};S([!C,C,!C],function(e,f){p.shades[f]=z.rect().addClass("highcharts-navigator-mask"+(1===f?"-inside":"-outside")).attr({fill:e?m.maskFill:"rgba(0,0,0,0)"}).css(1===f&&q).add(t)});p.outline=z.path().addClass("highcharts-navigator-outline").attr({"stroke-width":m.outlineWidth,stroke:m.outlineColor}).add(t);m.handles.enabled&&S([0,1],function(e){m.handles.inverted=A.inverted;p.handles[e]=z.symbol(m.handles.symbols[e],-m.handles.width/2-1,0,m.handles.width,m.handles.height,m.handles);p.handles[e].attr({zIndex:7-e}).addClass("highcharts-navigator-handle highcharts-navigator-handle-"+["left","right"][e]).add(t);var f=m.handles;p.handles[e].attr({fill:f.backgroundColor,stroke:f.borderColor,"stroke-width":f.lineWidth}).css(q)})},update:function(e){S(this.series||[],function(f){f.baseSeries&&delete f.baseSeries.navigatorSeries});this.destroy();W(!0,this.chart.options.navigator,this.options,e);this.init(this.chart)},render:function(ah,ai,K,H){var J=this.chart,G,F,E=this.scrollbarHeight,D,aj=this.xAxis;G=aj.fake?J.xAxis[0]:aj;var C=this.navigatorEnabled,ak,z=this.rendered;F=J.inverted;var al,w=J.xAxis[0].minRange,A=J.xAxis[0].options.maxRange;if(!this.hasDragged||v(K)){if(!af(ah)||!af(ai)){if(z){K=0,H=P(aj.width,G.width)}else{return}}this.left=P(aj.left,J.plotLeft+E+(F?J.plotWidth:0));this.size=ak=D=P(aj.len,(F?J.plotHeight:J.plotWidth)-2*E);J=F?E:D+2*E;K=P(K,aj.toPixels(ah,!0));H=P(H,aj.toPixels(ai,!0));af(K)&&Infinity!==Math.abs(K)||(K=0,H=J);ah=aj.toValue(K,!0);ai=aj.toValue(H,!0);al=Math.abs(ag.correctFloat(ai-ah));al<w?this.grabbedLeft?K=aj.toPixels(ai-w,!0):this.grabbedRight&&(H=aj.toPixels(ah+w,!0)):v(A)&&al>A&&(this.grabbedLeft?K=aj.toPixels(ai-A,!0):this.grabbedRight&&(H=aj.toPixels(ah+A,!0)));this.zoomedMax=Math.min(Math.max(K,H,0),ak);this.zoomedMin=Math.min(Math.max(this.fixedWidth?this.zoomedMax-this.fixedWidth:Math.min(K,H),0),ak);this.range=this.zoomedMax-this.zoomedMin;ak=Math.round(this.zoomedMax);K=Math.round(this.zoomedMin);C&&(this.navigatorGroup.attr({visibility:"visible"}),z=z&&!this.hasDragged?"animate":"attr",this.drawMasks(K,ak,F,z),this.drawOutline(K,ak,F,z),this.navigatorOptions.handles.enabled&&(this.drawHandle(K,0,F,z),this.drawHandle(ak,1,F,z)));this.scrollbar&&(F?(F=this.top-E,G=this.left-E+(C||!G.opposite?0:(G.titleOffset||0)+G.axisTitleMargin),E=D+2*E):(F=this.top+(C?this.height:-E),G=this.left-E),this.scrollbar.position(G,F,J,E),this.scrollbar.setRange(this.zoomedMin/D,this.zoomedMax/D));this.rendered=!0}},addMouseEvents:function(){var m=this,e=m.chart,w=e.container,q=[],t,p;m.mouseMoveHandler=t=function(f){m.onMouseMove(f)};m.mouseUpHandler=p=function(f){m.onMouseUp(f)};q=m.getPartsEvents("mousedown");q.push(N(w,"mousemove",t),N(w.ownerDocument,"mouseup",p));ad&&(q.push(N(w,"touchmove",t),N(w.ownerDocument,"touchend",p)),q.concat(m.getPartsEvents("touchstart")));m.eventsToUnbind=q;m.series&&m.series[0]&&q.push(N(m.series[0].xAxis,"foundExtremes",function(){e.navigator.modifyNavigatorAxisExtremes()}))},getPartsEvents:function(f){var e=this,g=[];S(["shades","handles"],function(h){S(e[h],function(p,m){g.push(N(p.element,f,function(q){e[h+"Mousedown"](q,m)}))})});return g},shadesMousedown:function(E,D){E=this.chart.pointer.normalize(E);var A=this.chart,C=this.xAxis,z=this.zoomedMin,t=this.left,w=this.size,q=this.range,p=E.chartX,m;A.inverted&&(p=E.chartY,t=this.top);1===D?(this.grabbedCenter=p,this.fixedWidth=q,this.dragOffset=p-z):(E=p-t-q/2,0===D?E=Math.max(0,E):2===D&&E+q>=w&&(E=w-q,m=this.getUnionExtremes().dataMax),E!==z&&(this.fixedWidth=q,D=C.toFixedRange(E,E+q,null,m),A.xAxis[0].setExtremes(Math.min(D.min,D.max),Math.max(D.min,D.max),!0,null,{trigger:"navigator"})))},handlesMousedown:function(f,e){this.chart.pointer.normalize(f);f=this.chart;var g=f.xAxis[0],h=f.inverted&&!g.reversed||!f.inverted&&g.reversed;0===e?(this.grabbedLeft=!0,this.otherHandlePos=this.zoomedMax,this.fixedExtreme=h?g.min:g.max):(this.grabbedRight=!0,this.otherHandlePos=this.zoomedMin,this.fixedExtreme=h?g.max:g.min);f.fixedRange=null},onMouseMove:function(p){var m=this,A=m.chart,C=m.left,z=m.navigatorSize,t=m.range,w=m.dragOffset,q=A.inverted;p.touches&&0===p.touches[0].pageX||(p=A.pointer.normalize(p),A=p.chartX,q&&(C=m.top,A=p.chartY),m.grabbedLeft?(m.hasDragged=!0,m.render(0,0,A-C,m.otherHandlePos)):m.grabbedRight?(m.hasDragged=!0,m.render(0,0,m.otherHandlePos,A-C)):m.grabbedCenter&&(m.hasDragged=!0,A<w?A=w:A>z+w-t&&(A=z+w-t),m.render(0,0,A-w,A-w+t)),m.hasDragged&&m.scrollbar&&m.scrollbar.options.liveRedraw&&(p.DOMType=p.type,setTimeout(function(){m.onMouseUp(p)},0)))},onMouseUp:function(m){var h=this.chart,w=this.xAxis,z=this.scrollbar,t,p,q=m.DOMEvent||m;(!this.hasDragged||z&&z.hasDragged)&&"scrollbar"!==m.trigger||(this.zoomedMin===this.otherHandlePos?t=this.fixedExtreme:this.zoomedMax===this.otherHandlePos&&(p=this.fixedExtreme),this.zoomedMax===this.size&&(p=this.getUnionExtremes().dataMax),w=w.toFixedRange(this.zoomedMin,this.zoomedMax,t,p),v(w.min)&&h.xAxis[0].setExtremes(Math.min(w.min,w.max),Math.max(w.min,w.max),!0,this.hasDragged?!1:null,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:q}));"mousemove"!==m.DOMType&&(this.grabbedLeft=this.grabbedRight=this.grabbedCenter=this.fixedWidth=this.fixedExtreme=this.otherHandlePos=this.hasDragged=this.dragOffset=null)},removeEvents:function(){this.eventsToUnbind&&(S(this.eventsToUnbind,function(e){e()}),this.eventsToUnbind=void 0);this.removeBaseSeriesEvents()},removeBaseSeriesEvents:function(){var e=this.baseSeries||[];this.navigatorEnabled&&e[0]&&(!1!==this.navigatorOptions.adaptToUpdatedData&&S(e,function(f){B(f,"updatedData",this.updatedDataHandler)},this),e[0].xAxis&&B(e[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes))},init:function(F){var E=F.options,C=E.navigator,D=C.enabled,A=E.scrollbar,w=A.enabled,E=D?C.height:0,z=w?A.height:0;this.handles=[];this.shades=[];this.chart=F;this.setBaseSeries();this.height=E;this.scrollbarHeight=z;this.scrollbarEnabled=w;this.navigatorEnabled=D;this.navigatorOptions=C;this.scrollbarOptions=A;this.outlineHeight=E+z;this.opposite=P(C.opposite,!D&&F.inverted);var t=this,A=t.baseSeries,w=F.xAxis.length,q=F.yAxis.length,p=A&&A[0]&&A[0].xAxis||F.xAxis[0];F.extraMargin={type:t.opposite?"plotTop":"marginBottom",value:(D||!F.inverted?t.outlineHeight:0)+C.margin};F.inverted&&(F.extraMargin.type=t.opposite?"marginRight":"plotLeft");F.isDirtyBox=!0;t.navigatorEnabled?(t.xAxis=new L(F,W({breaks:p.options.breaks,ordinal:p.options.ordinal},C.xAxis,{id:"navigator-x-axis",yAxis:"navigator-y-axis",isX:!0,type:"datetime",index:w,offset:0,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1},F.inverted?{offsets:[z,0,-z,0],width:E}:{offsets:[0,-z,0,z],height:E})),t.yAxis=new L(F,W(C.yAxis,{id:"navigator-y-axis",alignTicks:!1,offset:0,index:q,zoomEnabled:!1},F.inverted?{width:E}:{height:E})),A||C.series.data?t.updateNavigatorSeries():0===F.series.length&&u(F,"redraw",function(e,f){0<F.series.length&&!t.series&&(t.setBaseSeries(),F.redraw=e);e.call(F,f)}),t.renderElements(),t.addMouseEvents()):t.xAxis={translate:function(f,J){var K=F.xAxis[0],H=K.getExtremes(),G=K.len-2*z,m=T("min",K.options.min,H.dataMin),K=T("max",K.options.max,H.dataMax)-m;return J?f*K/G+m:G*(f-m)/K},toPixels:function(e){return this.translate(e)},toValue:function(e){return this.translate(e,!0)},toFixedRange:L.prototype.toFixedRange,fake:!0};F.options.scrollbar.enabled&&(F.scrollbar=t.scrollbar=new Q(F.renderer,W(F.options.scrollbar,{margin:t.navigatorEnabled?0:10,vertical:F.inverted}),F),N(t.scrollbar,"changed",function(e){var f=t.size,g=f*this.to,f=f*this.from;t.hasDragged=t.scrollbar.hasDragged;t.render(0,0,f,g);(F.options.scrollbar.liveRedraw||"mousemove"!==e.DOMType)&&setTimeout(function(){t.onMouseUp(e)})}));t.addBaseSeriesEvents();t.addChartEvents()},getUnionExtremes:function(h){var f=this.chart.xAxis[0],q=this.xAxis,t=q.options,p=f.options,m;h&&null===f.dataMin||(m={dataMin:P(t&&t.min,T("min",p.min,f.dataMin,q.dataMin,q.min)),dataMax:P(t&&t.max,T("max",p.max,f.dataMax,q.dataMax,q.max))});return m},setBaseSeries:function(f,e){var g=this.chart,h=this.baseSeries=[];f=f||g.options&&g.options.navigator.baseSeries||0;S(g.series||[],function(m,p){m.options.isInternal||!m.options.showInNavigator&&(p!==f&&m.options.id!==f||!1===m.options.showInNavigator)||h.push(m)});this.xAxis&&!this.xAxis.fake&&this.updateNavigatorSeries(e)},updateNavigatorSeries:function(E){var C=this,A=C.chart,w=C.baseSeries,z,q,p=C.navigatorOptions.series,F,m={enableMouseTracking:!1,index:null,linkedTo:null,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",showInLegend:!1,stacking:!1,isInternal:!0,visible:!0},D=C.series=ag.grep(C.series||[],function(e){var f=e.baseSeries;return 0>ag.inArray(f,w)?(f&&(B(f,"updatedData",C.updatedDataHandler),delete f.navigatorSeries),e.destroy(),!1):!0});w&&w.length&&S(w,function(e){var g=e.navigatorSeries,f=V({color:e.color},ae(p)?U.navigator.series:p);g&&!1===C.navigatorOptions.adaptToUpdatedData||(m.name="Navigator "+w.length,z=e.options||{},F=z.navigatorOptions||{},q=W(z,m,f,F),f=F.data||f.data,C.hasNavigatorData=C.hasNavigatorData||!!f,q.data=f||z.data&&z.data.slice(0),g&&g.options?g.update(q,E):(e.navigatorSeries=A.initSeries(q),e.navigatorSeries.baseSeries=e,D.push(e.navigatorSeries)))});if(p.data&&(!w||!w.length)||ae(p)){C.hasNavigatorData=!1,p=ag.splat(p),S(p,function(f,e){m.name="Navigator "+(D.length+1);q=W(U.navigator.series,{color:A.series[e]&&!A.series[e].options.isInternal&&A.series[e].color||A.options.colors[e]||A.options.colors[0]},m,f);q.data=f.data;q.data&&(C.hasNavigatorData=!0,D.push(A.initSeries(q)))})}this.addBaseSeriesEvents()},addBaseSeriesEvents:function(){var f=this,e=f.baseSeries||[];e[0]&&e[0].xAxis&&N(e[0].xAxis,"foundExtremes",this.modifyBaseAxisExtremes);S(e,function(g){N(g,"show",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!0,!1)});N(g,"hide",function(){this.navigatorSeries&&this.navigatorSeries.setVisible(!1,!1)});!1!==this.navigatorOptions.adaptToUpdatedData&&g.xAxis&&N(g,"updatedData",this.updatedDataHandler);N(g,"remove",function(){this.navigatorSeries&&(o(f.series,this.navigatorSeries),this.navigatorSeries.remove(!1),delete this.navigatorSeries)})},this)},modifyNavigatorAxisExtremes:function(){var f=this.xAxis,e;f.getExtremes&&(!(e=this.getUnionExtremes(!0))||e.dataMin===f.min&&e.dataMax===f.max||(f.min=e.dataMin,f.max=e.dataMax))},modifyBaseAxisExtremes:function(){var J=this.chart.navigator,H=this.getExtremes(),G=H.dataMin,E=H.dataMax,H=H.max-H.min,F=J.stickToMin,D=J.stickToMax,C=this.options.overscroll,A,z,w=J.series&&J.series[0],t=!!this.setExtremes;this.eventArgs&&"rangeSelectorButton"===this.eventArgs.trigger||(F&&(z=G,A=z+H),D&&(A=E+C,F||(z=Math.max(A-H,w&&w.xData?w.xData[0]:-Number.MAX_VALUE))),t&&(F||D)&&af(z)&&(this.min=this.userMin=z,this.max=this.userMax=A));J.stickToMin=J.stickToMax=null},updatedDataHandler:function(){var e=this.chart.navigator,f=this.navigatorSeries;e.stickToMax=Math.round(e.zoomedMax)>=Math.round(e.size);e.stickToMin=af(this.xAxis.min)&&this.xAxis.min<=this.xData[0]&&(!this.chart.fixedRange||!e.stickToMax);f&&!e.hasNavigatorData&&(f.options.pointStart=this.xData[0],f.setData(this.options.data,!1,null,!1))},addChartEvents:function(){N(this.chart,"redraw",function(){var f=this.navigator,e=f&&(f.baseSeries&&f.baseSeries[0]&&f.baseSeries[0].xAxis||f.scrollbar&&this.xAxis[0]);e&&f.render(e.min,e.max)})},destroy:function(){this.removeEvents();this.xAxis&&(o(this.chart.xAxis,this.xAxis),o(this.chart.axes,this.xAxis));this.yAxis&&(o(this.chart.yAxis,this.yAxis),o(this.chart.axes,this.yAxis));S(this.series||[],function(e){e.destroy&&e.destroy()});S("series xAxis yAxis shades outline scrollbarTrack scrollbarRifles scrollbarGroup scrollbar navigatorGroup rendered".split(" "),function(e){this[e]&&this[e].destroy&&this[e].destroy();this[e]=null},this);S([this.handles],function(e){O(e)},this)}};ag.Navigator=M;u(L.prototype,"zoom",function(p,m,C){var A=this.chart,z=A.options,t=z.chart.zoomType,w=z.navigator,z=z.rangeSelector,q;this.isXAxis&&(w&&w.enabled||z&&z.enabled)&&("x"===t?A.resetZoomButton="blocked":"y"===t?q=!1:"xy"===t&&this.options.range&&(A=this.previousZoom,v(m)?this.previousZoom=[this.min,this.max]:A&&(m=A[0],C=A[1],delete this.previousZoom)));return void 0!==q?q:p.call(this,m,C)});u(R.prototype,"init",function(f,e,g){N(this,"beforeRender",function(){var h=this.options;if(h.navigator.enabled||h.scrollbar.enabled){this.scroller=this.navigator=new M(this)}});f.call(this,e,g)});u(R.prototype,"setChartSize",function(m){var h=this.legend,w=this.navigator,z,t,p,q;m.apply(this,[].slice.call(arguments,1));w&&(t=h&&h.options,p=w.xAxis,q=w.yAxis,z=w.scrollbarHeight,this.inverted?(w.left=w.opposite?this.chartWidth-z-w.height:this.spacing[3]+z,w.top=this.plotTop+z):(w.left=this.plotLeft+z,w.top=w.navigatorOptions.top||this.chartHeight-w.height-z-this.spacing[2]-(this.rangeSelector&&this.extraBottomMargin?this.rangeSelector.getHeight():0)-(t&&"bottom"===t.verticalAlign&&t.enabled&&!t.floating?h.legendHeight+P(t.margin,10):0)),p&&q&&(this.inverted?p.options.left=q.options.left=w.left:p.options.top=q.options.top=w.top,p.setAxisSize(),q.setAxisSize()))});u(n.prototype,"addPoint",function(h,f,t,p,m){var q=this.options.turboThreshold;q&&this.xData.length>q&&I(f,!0)&&this.chart.navigator&&Z(20,!0);h.call(this,f,t,p,m)});u(R.prototype,"addSeries",function(g,f,m,h){g=g.call(this,f,!1,h);this.navigator&&this.navigator.setBaseSeries(null,!1);P(m,!0)&&this.redraw();return g});u(n.prototype,"update",function(f,e,g){f.call(this,e,!1);this.chart.navigator&&!this.options.isInternal&&this.chart.navigator.setBaseSeries(null,!1);P(g,!0)&&this.chart.redraw()});R.prototype.callbacks.push(function(f){var e=f.navigator;e&&(f=f.xAxis[0].getExtremes(),e.render(f.min,f.max))})})(a);(function(Z){function A(e){this.init(e)}var B=Z.addEvent,v=Z.Axis,M=Z.Chart,S=Z.css,O=Z.createElement,o=Z.dateFormat,I=Z.defaultOptions,N=I.global.useUTC,n=Z.defined,R=Z.destroyObjectProperties,P=Z.discardElement,T=Z.each,U=Z.extend,V=Z.fireEvent,W=Z.Date,u=Z.isNumber,Q=Z.merge,J=Z.pick,s=Z.pInt,L=Z.splat,g=Z.wrap;U(I,{rangeSelector:{verticalAlign:"top",buttonTheme:{"stroke-width":0,width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputPosition:{align:"right",x:0,y:0},buttonPosition:{align:"left",x:0,y:0},labelStyle:{color:"#666666"}}});I.lang=Q(I.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"});A.prototype={clickButton:function(af,ad){var ab=this,H=ab.chart,K=ab.buttonOptions[af],G=H.xAxis[0],F=H.scroller&&H.scroller.getUnionExtremes()||G||{},E=F.dataMin,w=F.dataMax,D,C=G&&Math.round(Math.min(G.max,J(w,G.max))),q=K.type,ag,F=K._range,f,ac,ae,aa=K.dataGrouping;if(null!==E&&null!==w){H.fixedRange=F;aa&&(this.forcedDataGrouping=!0,v.prototype.setDataGrouping.call(G||{chart:this.chart},aa,!1));if("month"===q||"year"===q){G?(q={range:K,max:C,dataMin:E,dataMax:w},D=G.minFromRange.call(q),u(q.newMax)&&(C=q.newMax)):F=K}else{if(F){D=Math.max(C-F,E),C=Math.min(D+F,w)}else{if("ytd"===q){if(G){void 0===w&&(E=Number.MAX_VALUE,w=Number.MIN_VALUE,T(H.series,function(e){e=e.xData;E=Math.min(e[0],E);w=Math.max(e[e.length-1],w)}),ad=!1),C=ab.getYTDExtremes(w,E,N),D=f=C.min,C=C.max}else{B(H,"beforeRender",function(){ab.clickButton(af)});return}}else{"all"===q&&G&&(D=E,C=w)}}}D+=K._offsetMin;C+=K._offsetMax;ab.setSelected(af);G?G.setExtremes(D,C,J(ad,1),null,{trigger:"rangeSelectorButton",rangeSelectorButton:K}):(ag=L(H.options.xAxis)[0],ae=ag.range,ag.range=F,ac=ag.min,ag.min=f,B(H,"load",function(){ag.range=ae;ag.min=ac}))}},setSelected:function(e){this.selected=this.options.selected=e},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(m){var f=this,t=m.options.rangeSelector,q=t.buttons||[].concat(f.defaultButtons),w=t.selected,p=function(){var e=f.minInput,h=f.maxInput;e&&e.blur&&V(e,"blur");h&&h.blur&&V(h,"blur")};f.chart=m;f.options=t;f.buttons=[];m.extraTopMargin=t.height;f.buttonOptions=q;this.unMouseDown=B(m.container,"mousedown",p);this.unResize=B(m,"resize",p);T(q,f.computeButtonRange);void 0!==w&&q[w]&&this.clickButton(w,!1);B(m,"load",function(){m.xAxis&&m.xAxis[0]&&B(m.xAxis[0],"setExtremes",function(e){this.max-this.min!==m.fixedRange&&"rangeSelectorButton"!==e.trigger&&"updatedData"!==e.trigger&&f.forcedDataGrouping&&this.setDataGrouping(!1,!1)})})},updateButtonStates:function(){var K=this.chart,H=K.xAxis[0],G=Math.round(H.max-H.min),E=!H.hasVisibleSeries,K=K.scroller&&K.scroller.getUnionExtremes()||H,F=K.dataMin,D=K.dataMax,K=this.getYTDExtremes(D,F,N),C=K.min,z=K.max,q=this.selected,w=u(q),f=this.options.allButtonsEnabled,aa=this.buttons;T(this.buttonOptions,function(ad,p){var t=ad._range,h=ad.type,af=ad.count||1,e=aa[p],ag=0;ad=ad._offsetMax-ad._offsetMin;p=p===q;var ab=t>D-F,m=t<H.minRange,ae=!1,ac=!1,t=t===G;("month"===h||"year"===h)&&G>=86400000*{month:28,year:365}[h]*af+ad&&G<=86400000*{month:31,year:366}[h]*af+ad?t=!0:"ytd"===h?(t=z-C+ad===G,ae=!p):"all"===h&&(t=H.max-H.min>=D-F,ac=!p&&w&&t);h=!f&&(ab||m||ac||E);af=p&&t||t&&!w&&!ae;h?ag=3:af&&(w=!0,ag=2);e.state!==ag&&e.setState(ag)})},computeButtonRange:function(h){var f=h.type,p=h.count||1,m={millisecond:1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000};if(m[f]){h._range=m[f]*p}else{if("month"===f||"year"===f){h._range=86400000*{month:30,year:365}[f]*p}}h._offsetMin=J(h.offsetMin,0);h._offsetMax=J(h.offsetMax,0);h._range+=h._offsetMax-h._offsetMin},setInputValue:function(h,f){var p=this.chart.options.rangeSelector,m=this[h+"Input"];n(f)&&(m.previousValue=m.HCTime,m.HCTime=f);m.value=o(p.inputEditDateFormat||"%Y-%m-%d",m.HCTime);this[h+"DateBox"].attr({text:o(p.inputDateFormat||"%b %e, %Y",m.HCTime)})},showInput:function(f){var e=this.inputGroup,h=this[f+"DateBox"];S(this[f+"Input"],{left:e.translateX+h.x+"px",top:e.translateY+"px",width:h.width-2+"px",height:h.height-2+"px",border:"2px solid silver"})},hideInput:function(e){S(this[e+"Input"],{border:0,width:"1px",height:"1px"});this.setInputValue(e)},drawInput:function(H){function F(){var m=e.value,f=(q.inputDateParser||Date.parse)(m),aa=w.xAxis[0],K=w.scroller&&w.scroller.xAxis?w.scroller.xAxis:aa,z=K.dataMin,K=K.dataMax;f!==e.previousValue&&(e.previousValue=f,u(f)||(f=m.split("-"),f=Date.UTC(s(f[0]),s(f[1])-1,s(f[2]))),u(f)&&(N||(f+=60000*(new Date).getTimezoneOffset()),h?f>E.maxInput.HCTime?f=void 0:f<z&&(f=z):f<E.minInput.HCTime?f=void 0:f>K&&(f=K),void 0!==f&&aa.setExtremes(h?f:aa.min,h?aa.max:f,void 0,void 0,{trigger:"rangeSelectorInput"})))}var E=this,w=E.chart,C=w.renderer.style||{},t=w.renderer,q=w.options.rangeSelector,p=E.div,h="min"===H,e,G,D=this.inputGroup;this[H+"Label"]=G=t.label(I.lang[h?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).addClass("highcharts-range-label").attr({padding:2}).add(D);D.offset+=G.width+5;this[H+"DateBox"]=t=t.label("",D.offset).addClass("highcharts-range-input").attr({padding:2,width:q.inputBoxWidth||90,height:q.inputBoxHeight||17,stroke:q.inputBoxBorderColor||"#cccccc","stroke-width":1,"text-align":"center"}).on("click",function(){E.showInput(H);E[H+"Input"].focus()}).add(D);D.offset+=t.width+(h?10:0);this[H+"Input"]=e=O("input",{name:H,className:"highcharts-range-selector",type:"text"},{top:w.plotTop+"px"},p);G.css(Q(C,q.labelStyle));t.css(Q({color:"#333333"},C,q.inputStyle));S(e,U({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:C.fontSize,fontFamily:C.fontFamily,top:"-9999em"},q.inputStyle));e.onfocus=function(){E.showInput(H)};e.onblur=function(){E.hideInput(H)};e.onchange=F;e.onkeypress=function(f){13===f.keyCode&&F()}},getPosition:function(){var f=this.chart,e=f.options.rangeSelector,f="top"===e.verticalAlign?f.plotTop-f.axisOffset[0]:0;return{buttonTop:f+e.buttonPosition.y,inputTop:f+e.inputPosition.y-10}},getYTDExtremes:function(h,t,p){var m=new W(h),q=m[W.hcGetFullYear]();p=p?W.UTC(q,0,1):+new W(q,0,1);t=Math.max(t||0,p);m=m.getTime();return{max:Math.min(h||m,m),min:t}},render:function(aA,az){var ay=this,aw=ay.chart,ax=aw.renderer,av=aw.container,au=aw.options,at=au.exporting&&!1!==au.exporting.enabled&&au.navigation&&au.navigation.buttonOptions,ap=I.lang,ar=ay.div,aq=au.rangeSelector,au=aq.floating,ao=ay.buttons,ar=ay.inputGroup,an=aq.buttonTheme,ai=aq.buttonPosition,ag=aq.inputPosition,af=aq.inputEnabled,ae=an&&an.states,am=aw.plotLeft,al,ak=ay.buttonGroup,aj;aj=ay.rendered;var ah=ay.options.verticalAlign,ad=aw.legend,ac=ad&&ad.options,f=ai.y,p=ag.y,ab=aj||!1,aa=0,D=0,t;if(!1!==aq.enabled){aj||(ay.group=aj=ax.g("range-selector-group").attr({zIndex:7}).add(),ay.buttonGroup=ak=ax.g("range-selector-buttons").add(aj),ay.zoomText=ax.text(ap.rangeSelectorZoom,J(am+ai.x,am),15).css(aq.labelStyle).add(ak),al=J(am+ai.x,am)+ay.zoomText.getBBox().width+5,T(ay.buttonOptions,function(h,e){ao[e]=ax.button(h.text,al,0,function(){var q=h.events&&h.events.click,m;q&&(m=q.call(h));!1!==m&&ay.clickButton(e);ay.isActive=!0},an,ae&&ae.hover,ae&&ae.select,ae&&ae.disabled).attr({"text-align":"center"}).add(ak);al+=ao[e].width+J(aq.buttonSpacing,5)}),!1!==af&&(ay.div=ar=O("div",null,{position:"relative",height:0,zIndex:1}),av.parentNode.insertBefore(ar,av),ay.inputGroup=ar=ax.g("input-group").add(aj),ar.offset=0,ay.drawInput("min"),ay.drawInput("max")));am=aw.plotLeft-aw.spacing[3];ay.updateButtonStates();at&&this.titleCollision(aw)&&"top"===ah&&"right"===ai.align&&ai.y+ak.getBBox().height-12<(at.y||0)+at.height&&(aa=-40);"left"===ai.align?t=ai.x-aw.spacing[3]:"right"===ai.align&&(t=ai.x+aa-aw.spacing[1]);ak.align({y:ai.y,width:ak.getBBox().width,align:ai.align,x:t},!0,aw.spacingBox);ay.group.placed=ab;ay.buttonGroup.placed=ab;!1!==af&&(aa=at&&this.titleCollision(aw)&&"top"===ah&&"right"===ag.align&&ag.y-ar.getBBox().height-12<(at.y||0)+at.height+aw.spacing[0]?-40:0,"left"===ag.align?t=am:"right"===ag.align&&(t=-Math.max(aw.axisOffset[1],-aa)),ar.align({y:ag.y,width:ar.getBBox().width,align:ag.align,x:ag.x+t-2},!0,aw.spacingBox),av=ar.alignAttr.translateX+ar.alignOptions.x-aa+ar.getBBox().x+2,at=ar.alignOptions.width,ap=ak.alignAttr.translateX+ak.getBBox().x,t=ak.getBBox().width+20,(ag.align===ai.align||ap+t>av&&av+at>ap&&f<p+ar.getBBox().height)&&ar.attr({translateX:ar.alignAttr.translateX+(aw.axisOffset[1]>=-aa?0:-aa),translateY:ar.alignAttr.translateY+ak.getBBox().height+10}),ay.setInputValue("min",aA),ay.setInputValue("max",az),ay.inputGroup.placed=ab);ay.group.align({verticalAlign:ah},!0,aw.spacingBox);aA=ay.group.getBBox().height+20;az=ay.group.alignAttr.translateY;"bottom"===ah&&(ad=ac&&"bottom"===ac.verticalAlign&&ac.enabled&&!ac.floating?ad.legendHeight+J(ac.margin,10):0,aA=aA+ad-20,D=az-aA-(au?0:aq.y)-10);if("top"===ah){au&&(D=0),aw.titleOffset&&(D=aw.titleOffset+aw.options.title.margin),D+=aw.margin[0]-aw.spacing[0]||0}else{if("middle"===ah){if(p===f){D=0>p?az+void 0:az}else{if(p||f){D=0>p||0>f?D-Math.min(p,f):az-aA+NaN}}}}ay.group.translate(aq.x,aq.y+Math.floor(D));!1!==af&&(ay.minInput.style.marginTop=ay.group.translateY+"px",ay.maxInput.style.marginTop=ay.group.translateY+"px");ay.rendered=!0}},getHeight:function(){var h=this.options,f=this.group,p=h.y,m=h.buttonPosition.y,h=h.inputPosition.y,f=f?f.getBBox(!0).height+13+p:0,p=Math.min(h,m);if(0>h&&0>m||0<h&&0<m){f+=Math.abs(p)}return f},titleCollision:function(e){return !(e.options.title.text||e.options.subtitle.text)},update:function(f){var e=this.chart;Q(!0,e.options.rangeSelector,f);this.destroy();this.init(e);e.rangeSelector.render()},destroy:function(){var f=this,m=f.minInput,h=f.maxInput;f.unMouseDown();f.unResize();R(f.buttons);m&&(m.onfocus=m.onblur=m.onchange=null);h&&(h.onfocus=h.onblur=h.onchange=null);Z.objectEach(f,function(e,p){e&&"chart"!==p&&(e.destroy?e.destroy():e.nodeType&&P(this[p]));e!==A.prototype[p]&&(f[p]=null)},this)}};v.prototype.toFixedRange=function(h,f,q,m){var p=this.chart&&this.chart.fixedRange;h=J(q,this.translate(h,!0,!this.horiz));f=J(m,this.translate(f,!0,!this.horiz));q=p&&(f-h)/p;0.7<q&&1.3>q&&(m?h=f-p:f=h+p);u(h)||(h=f=void 0);return{min:h,max:f}};v.prototype.minFromRange=function(){var p=this.range,m={month:"Month",year:"FullYear"}[p.type],C,w=this.max,z,t,q=function(f,E){var D=new Date(f),h=D["get"+m]();D["set"+m](h+E);h===D["get"+m]()&&D.setDate(0);return D.getTime()-f};u(p)?(C=w-p,t=p):(C=w+q(w,-p.count),this.chart&&(this.chart.fixedRange=w-C));z=J(this.dataMin,Number.MIN_VALUE);u(C)||(C=z);C<=z&&(C=z,void 0===t&&(t=q(C,p.count)),this.newMax=Math.min(C+t,this.dataMax));u(w)||(C=void 0);return C};g(M.prototype,"init",function(f,e,h){B(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new A(this))});f.call(this,e,h)});g(M.prototype,"render",function(h,f,q){var m=this.axes,p=this.rangeSelector;p&&(T(m,function(e){e.updateNames();e.setScale()}),this.getAxisMargins(),p.render(),m=p.options.verticalAlign,p.options.floating||("bottom"===m?this.extraBottomMargin=!0:"middle"!==m&&(this.extraTopMargin=!0)));h.call(this,f,q)});g(M.prototype,"update",function(h,w,q,p){var t=this.rangeSelector,m;this.extraTopMargin=this.extraBottomMargin=!1;t&&(t.render(),m=w.rangeSelector&&w.rangeSelector.verticalAlign||t.options&&t.options.verticalAlign,t.options.floating||("bottom"===m?this.extraBottomMargin=!0:"middle"!==m&&(this.extraTopMargin=!0)));h.call(this,Z.merge(!0,w,{chart:{marginBottom:J(w.chart&&w.chart.marginBottom,this.margin.bottom),spacingBottom:J(w.chart&&w.chart.spacingBottom,this.spacing.bottom)}}),q,p)});g(M.prototype,"redraw",function(h,f,p){var m=this.rangeSelector;m&&!m.options.floating&&(m.render(),m=m.options.verticalAlign,"bottom"===m?this.extraBottomMargin=!0:"middle"!==m&&(this.extraTopMargin=!0));h.call(this,f,p)});M.prototype.adjustPlotArea=function(){var e=this.rangeSelector;this.rangeSelector&&(e=e.getHeight(),this.extraTopMargin&&(this.plotTop+=e),this.extraBottomMargin&&(this.marginBottom+=e))};M.prototype.callbacks.push(function(m){function h(){w=m.xAxis[0].getExtremes();u(w.min)&&q.render(w.min,w.max)}var w,q=m.rangeSelector,t,p;q&&(p=B(m.xAxis[0],"afterSetExtremes",function(e){q.render(e.min,e.max)}),t=B(m,"redraw",h),h());B(m,"destroy",function(){q&&(t(),p())})});Z.RangeSelector=A})(a);(function(ag){var M=ag.arrayMax,N=ag.arrayMin,L=ag.Axis,R=ag.Chart,aa=ag.defined,U=ag.each,v=ag.extend,O=ag.format,S=ag.grep,o=ag.inArray,Z=ag.isNumber,V=ag.isString,ac=ag.map,ad=ag.merge,ae=ag.pick,af=ag.Point,I=ag.Renderer,W=ag.Series,P=ag.splat,B=ag.SVGRenderer,Q=ag.VMLRenderer,n=ag.wrap,ab=W.prototype,u=ab.init,s=ab.processData,T=af.prototype.tooltipFormatter;ag.StockChart=ag.stockChart=function(E,C,A){var D=V(E)||E.nodeName,z=arguments[D?1:0],m=z.series,f=ag.getOptions(),e,J=ae(z.navigator&&z.navigator.enabled,f.navigator.enabled,!0),H=J?{startOnTick:!1,endOnTick:!1}:null,G={marker:{enabled:!1,radius:2}},F={shadow:!1,borderWidth:0};z.xAxis=ac(P(z.xAxis||{}),function(g){return ad({minPadding:0,maxPadding:0,overscroll:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},f.xAxis,g,{type:"datetime",categories:null},H)});z.yAxis=ac(P(z.yAxis||{}),function(g){e=ae(g.opposite,!0);return ad({labels:{y:-2},opposite:e,showLastLabel:!1,title:{text:null}},f.yAxis,g)});z.series=null;z=ad({chart:{panning:!0,pinchType:"x"},navigator:{enabled:J},scrollbar:{enabled:ae(f.scrollbar.enabled,!0)},rangeSelector:{enabled:ae(f.rangeSelector.enabled,!0)},title:{text:null},tooltip:{split:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:G,spline:G,area:G,areaspline:G,arearange:G,areasplinerange:G,column:F,columnrange:F,candlestick:F,ohlc:F}},z,{isStock:!0});z.series=m;return D?new R(E,z,A):new R(z,C)};n(L.prototype,"autoLabelAlign",function(f){var e=this.chart,h=this.options,e=e._labelPanes=e._labelPanes||{},g=this.options.labels;return this.chart.options.isStock&&"yAxis"===this.coll&&(h=h.top+","+h.height,!e[h]&&g.enabled)?(15===g.x&&(g.x=0),void 0===g.align&&(g.align="right"),e[h]=this,"right"):f.apply(this,[].slice.call(arguments,1))});n(L.prototype,"destroy",function(f){var e=this.chart,g=this.options&&this.options.top+","+this.options.height;g&&e._labelPanes&&e._labelPanes[g]===this&&delete e._labelPanes[g];return f.apply(this,Array.prototype.slice.call(arguments,1))});n(L.prototype,"getPlotLinePath",function(ar,ap,ao,an,am,ak){var aq=this,J=this.isLinked&&!this.series?this.linkedParent.series:this.series,ai=aq.chart,G=ai.renderer,p=aq.left,m=aq.top,h,f,al,aj,ah=[],K=[],H,z;if("xAxis"!==aq.coll&&"yAxis"!==aq.coll){return ar.apply(this,[].slice.call(arguments,1))}K=function(g){var e="xAxis"===g?"yAxis":"xAxis";g=aq.options[e];return Z(g)?[ai[e][g]]:V(g)?[ai.get(g)]:ac(J,function(q){return q[e]})}(aq.coll);U(aq.isXAxis?ai.yAxis:ai.xAxis,function(g){if(aa(g.options.id)?-1===g.options.id.indexOf("navigator"):1){var e=g.isXAxis?"yAxis":"xAxis",e=aa(g.options[e])?ai[e][g.options[e]]:ai[e][0];aq===e&&K.push(g)}});H=K.length?[]:[aq.isXAxis?ai.yAxis[0]:ai.xAxis[0]];U(K,function(e){-1!==o(e,H)||ag.find(H,function(g){return g.pos===e.pos&&g.len&&e.len})||H.push(e)});z=ae(ak,aq.translate(ap,null,null,an));Z(z)&&(aq.horiz?U(H,function(g){var e;f=g.pos;aj=f+g.len;h=al=Math.round(z+aq.transB);if(h<p||h>p+aq.width){am?h=al=Math.min(Math.max(p,h),p+aq.width):e=!0}e||ah.push("M",h,f,"L",al,aj)}):U(H,function(g){var e;h=g.pos;al=h+g.len;f=aj=Math.round(m+aq.height-z);if(f<m||f>m+aq.height){am?f=aj=Math.min(Math.max(m,f),aq.top+aq.height):e=!0}e||ah.push("M",h,f,"L",al,aj)}));return 0<ah.length?G.crispPolyLine(ah,ao||1):null});B.prototype.crispPolyLine=function(f,e){var g;for(g=0;g<f.length;g+=6){f[g+1]===f[g+4]&&(f[g+1]=f[g+4]=Math.round(f[g+1])-e%2/2),f[g+2]===f[g+5]&&(f[g+2]=f[g+5]=Math.round(f[g+2])+e%2/2)}return f};I===Q&&(Q.prototype.crispPolyLine=B.prototype.crispPolyLine);n(L.prototype,"hideCrosshair",function(f,e){f.call(this,e);this.crossLabel&&(this.crossLabel=this.crossLabel.hide())});n(L.prototype,"drawCrosshair",function(ah,K,G){var H,F;ah.call(this,K,G);if(aa(this.crosshair.label)&&this.crosshair.label.enabled&&this.cross){ah=this.chart;var E=this.options.crosshair.label,D=this.horiz;H=this.opposite;F=this.left;var C=this.top,A=this.crossLabel,z,t=E.format,h="",aj="inside"===this.options.tickPosition,ai=!1!==this.crosshair.snap,J=0;K||(K=this.cross&&this.cross.e);z=D?"center":H?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center";A||(A=this.crossLabel=ah.renderer.label(null,null,null,E.shape||"callout").addClass("highcharts-crosshair-label"+(this.series[0]&&" highcharts-color-"+this.series[0].colorIndex)).attr({align:E.align||z,padding:ae(E.padding,8),r:ae(E.borderRadius,3),zIndex:2}).add(this.labelGroup),A.attr({fill:E.backgroundColor||this.series[0]&&this.series[0].color||"#666666",stroke:E.borderColor||"","stroke-width":E.borderWidth||0}).css(v({color:"#ffffff",fontWeight:"normal",fontSize:"11px",textAlign:"center"},E.style)));D?(z=ai?G.plotX+F:K.chartX,C+=H?0:this.height):(z=H?this.width+F:0,C=ai?G.plotY+C:K.chartY);t||E.formatter||(this.isDatetimeAxis&&(h="%b %d, %Y"),t="{value"+(h?":"+h:"")+"}");K=ai?G[this.isXAxis?"x":"y"]:this.toValue(D?K.chartX:K.chartY);A.attr({text:t?O(t,{value:K}):E.formatter.call(this,K),x:z,y:C,visibility:"visible"});K=A.getBBox();if(D){if(aj&&!H||!aj&&H){C=A.y-K.height}}else{C=A.y-K.height/2}D?(H=F-K.x,F=F+this.width-K.x):(H="left"===this.labelAlign?F:0,F="right"===this.labelAlign?F+this.width:ah.chartWidth);A.translateX<H&&(J=H-A.translateX);A.translateX+K.width>=F&&(J=-(A.translateX+K.width-F));A.attr({x:z+J,y:C,anchorX:D?z:this.opposite?0:ah.chartWidth,anchorY:D?this.opposite?ah.chartHeight:0:C+K.height/2})}});ab.init=function(){u.apply(this,arguments);this.setCompare(this.options.compare)};ab.setCompare=function(e){this.modifyValue="value"===e||"percent"===e?function(f,h){var g=this.compareValue;if(void 0!==f&&void 0!==g){return f="value"===e?f-g:f/g*100-(100===this.options.compareBase?0:100),h&&(h.change=f),f}}:null;this.userOptions.compare=e;this.chart.hasRendered&&(this.isDirty=!0)};ab.processData=function(){var p,m=-1,A,z,w=!0===this.options.compareStart?0:1,t,q;s.apply(this,arguments);if(this.xAxis&&this.processedYData){for(A=this.processedXData,z=this.processedYData,t=z.length,this.pointArrayMap&&(m=o("close",this.pointArrayMap),-1===m&&(m=o(this.pointValKey||"y",this.pointArrayMap))),p=0;p<t-w;p++){if(q=z[p]&&-1<m?z[p][m]:z[p],Z(q)&&A[p+w]>=this.xAxis.min&&0!==q){this.compareValue=q;break}}}};n(ab,"getExtremes",function(f){var e;f.apply(this,[].slice.call(arguments,1));this.modifyValue&&(e=[this.modifyValue(this.dataMin),this.modifyValue(this.dataMax)],this.dataMin=N(e),this.dataMax=M(e))});L.prototype.setCompare=function(f,e){this.isXAxis||(U(this.series,function(g){g.setCompare(f)}),ae(e,!0)&&this.chart.redraw())};af.prototype.tooltipFormatter=function(e){e=e.replace("{point.change}",(0<this.change?"+":"")+ag.numberFormat(this.change,ae(this.series.tooltipOptions.changeDecimals,2)));return T.apply(this,[e])};n(W.prototype,"render",function(e){this.chart.is3d&&this.chart.is3d()||this.chart.polar||!this.xAxis||this.xAxis.isRadial||(!this.clipBox&&this.animate?(this.clipBox=ad(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]?this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}):this.clipBox&&(this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len));e.call(this)});n(R.prototype,"getSelectedPoints",function(f){var e=f.call(this);U(this.series,function(g){g.hasGroupedData&&(e=e.concat(S(g.points||[],function(h){return h.selected})))});return e});n(R.prototype,"update",function(f,e){"scrollbar" in e&&this.navigator&&(ad(!0,this.options.scrollbar,e.scrollbar),this.navigator.update({},!1),delete e.scrollbar);return f.apply(this,Array.prototype.slice.call(arguments,1))})})(a);return a});(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(d){var f=d.deg2rad,e=d.isNumber,b=d.pick,g=d.relativeLength;d.CenteredSeriesMixin={getCenter:function(){var n=this.options,q=this.chart,o=2*(n.slicedOffset||0),h=q.plotWidth-2*o,q=q.plotHeight-2*o,t=n.center,t=[b(t[0],"50%"),b(t[1],"50%"),n.size||"100%",n.innerSize||0],m=Math.min(h,q),p,s;for(p=0;4>p;++p){s=t[p],n=2>p||2===p&&/%$/.test(s),t[p]=g(s,[h,q,m,t[2]][p])+(n?o:0)}t[3]>t[2]&&(t[3]=t[2]);return t},getStartAndEndRadians:function(h,m){h=e(h)?h:0;m=e(m)&&m>h&&360>m-h?m:h+360;return{start:f*(h+-90),end:f*(m+-90)}}}})(a);(function(f){function h(m,e){this.init(m,e)}var g=f.CenteredSeriesMixin,d=f.each,p=f.extend,b=f.merge,o=f.splat;p(h.prototype,{coll:"pane",init:function(m,e){this.chart=e;this.background=[];e.pane.push(this);this.setOptions(m)},setOptions:function(e){this.options=b(this.defaultOptions,this.chart.angular?{background:{}}:void 0,e)},render:function(){var m=this.options,e=this.options.background,n=this.chart.renderer;this.group||(this.group=n.g("pane-group").attr({zIndex:m.zIndex||0}).add());this.updateCenter();if(e){for(e=o(e),m=Math.max(e.length,this.background.length||0),n=0;n<m;n++){e[n]&&this.axis?this.renderBackground(b(this.defaultBackgroundOptions,e[n]),n):this.background[n]&&(this.background[n]=this.background[n].destroy(),this.background.splice(n,1))}}},renderBackground:function(m,e){var n="animate";this.background[e]||(this.background[e]=this.chart.renderer.path().add(this.group),n="attr");this.background[e][n]({d:this.axis.getPlotBandPath(m.from,m.to,m)}).attr({fill:m.backgroundColor,stroke:m.borderColor,"stroke-width":m.borderWidth,"class":"highcharts-pane "+(m.className||"")})},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"#cccccc",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#ffffff"],[1,"#e6e6e6"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"},updateCenter:function(e){this.center=(e||this.axis||{}).center=g.getCenter.call(this)},update:function(m,e){b(!0,this.options,m);this.setOptions(this.options);this.render();d(this.chart.axes,function(n){n.pane===this&&(n.pane=null,n.update({},e))},this)}});f.Pane=h})(a);(function(z){var C=z.each,B=z.extend,A=z.map,d=z.merge,f=z.noop,q=z.pick,o=z.pInt,u=z.wrap,s,h,p=z.Axis.prototype;z=z.Tick.prototype;s={getOffset:f,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:f,setCategories:f,setTitle:f};h={defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(e){e=this.options=d(this.defaultOptions,this.defaultRadialOptions,e);e.plotBands||(e.plotBands=[])},getOffset:function(){p.getOffset.call(this);this.chart.axisOffset[this.side]=0},getLinePath:function(e,n){e=this.center;var m=this.chart,g=q(n,e[2]/2-this.offset);this.isCircular||void 0!==n?(n=this.chart.renderer.symbols.arc(this.left+e[0],this.top+e[1],g,g,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0}),n.xBounds=[this.left+e[0]],n.yBounds=[this.top+e[1]-g]):(n=this.postTranslate(this.angleRad,g),n=["M",e[0]+m.plotLeft,e[1]+m.plotTop,"L",n.x,n.y]);return n},setAxisTranslation:function(){p.setAxisTranslation.call(this);this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){if(this.autoConnect=this.isCircular&&void 0===q(this.userMax,this.options.max)&&this.endAngleRad-this.startAngleRad===2*Math.PI){this.max+=this.categories&&1||this.pointRange||this.closestPointRange||0}},setAxisSize:function(){p.setAxisSize.call(this);this.isRadial&&(this.pane.updateCenter(this),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*q(this.sector,1)/2)},getPosition:function(e,g){return this.postTranslate(this.isCircular?this.translate(e):this.angleRad,q(this.isCircular?g:this.translate(e),this.center[2]/2)-this.offset)},postTranslate:function(e,n){var m=this.chart,g=this.center;e=this.startAngleRad+e;return{x:m.plotLeft+g[0]+Math.cos(e)*n,y:m.plotTop+g[1]+Math.sin(e)*n}},getPlotBandPath:function(H,G,I){var F=this.center,E=this.startAngleRad,v=F[2]/2,w=[q(I.outerRadius,"100%"),I.innerRadius,q(I.thickness,10)],D=Math.min(this.offset,0),J=/%$/,t,e=this.isCircular;"polygon"===this.options.gridLineInterpolation?F=this.getPlotLinePath(H).concat(this.getPlotLinePath(G,!0)):(H=Math.max(H,this.min),G=Math.min(G,this.max),e||(w[0]=this.translate(H),w[1]=this.translate(G)),w=A(w,function(g){J.test(g)&&(g=o(g,10)*v/100);return g}),"circle"!==I.shape&&e?(H=E+this.translate(H),G=E+this.translate(G)):(H=-Math.PI/2,G=1.5*Math.PI,t=!0),w[0]-=D,w[2]-=D,F=this.chart.renderer.symbols.arc(this.left+F[0],this.top+F[1],w[0],w[0],{start:Math.min(H,G),end:Math.max(H,G),innerR:q(w[1],w[0]-w[2]),open:t}));return F},getPlotLinePath:function(E,D){var w=this,t=w.center,F=w.chart,m=w.getPosition(E),n,v,G;w.isCircular?G=["M",t[0]+F.plotLeft,t[1]+F.plotTop,"L",m.x,m.y]:"circle"===w.options.gridLineInterpolation?(E=w.translate(E))&&(G=w.getLinePath(0,E)):(C(F.xAxis,function(e){e.pane===w.pane&&(n=e)}),G=[],E=w.translate(E),t=n.tickPositions,n.autoConnect&&(t=t.concat([t[0]])),D&&(t=[].concat(t).reverse()),C(t,function(e,b){v=n.getPosition(e,E);G.push(b?"L":"M",v.x,v.y)}));return G},getTitlePosition:function(){var e=this.center,m=this.chart,g=this.options.title;return{x:m.plotLeft+e[0]+(g.x||0),y:m.plotTop+e[1]-{high:0.5,middle:0.25,low:0}[g.align]*e[2]+(g.y||0)}}};u(p,"init",function(G,D,H){var E=D.angular,v=D.polar,w=H.isX,F=E&&w,e,I=D.options,n=H.pane||0,J=this.pane=D.pane&&D.pane[n],n=J&&J.options;if(E){if(B(this,F?s:h),e=!w){this.defaultRadialOptions=this.defaultRadialGaugeOptions}}else{v&&(B(this,h),this.defaultRadialOptions=(e=w)?this.defaultRadialXOptions:d(this.defaultYAxisOptions,this.defaultRadialYOptions))}E||v?(this.isRadial=!0,D.inverted=!1,I.chart.zoomType=null):this.isRadial=!1;J&&e&&(J.axis=this);G.call(this,D,H);!F&&J&&(E||v)&&(G=this.options,this.angleRad=(G.angle||0)*Math.PI/180,this.startAngleRad=(n.startAngle-90)*Math.PI/180,this.endAngleRad=(q(n.endAngle,n.startAngle+360)-90)*Math.PI/180,this.offset=G.offset||0,this.isCircular=e)});u(p,"autoLabelAlign",function(e){if(!this.isRadial){return e.apply(this,[].slice.call(arguments,1))}});u(z,"getPosition",function(e,w,n,m,t){var v=this.axis;return v.getPosition?v.getPosition(n):e.call(this,w,n,m,t)});u(z,"getLabelPosition",function(J,H,K,w,E,e,I,v,L){var G=this.axis,F=e.y,D=20,t=e.align,n=(G.translate(this.pos)+G.startAngleRad+Math.PI/2)/Math.PI*180%360;G.isRadial?(J=G.getPosition(this.pos,G.center[2]/2+q(e.distance,-25)),"auto"===e.rotation?w.attr({rotation:n}):null===F&&(F=G.chart.renderer.fontMetrics(w.styles.fontSize).b-w.getBBox().height/2),null===t&&(G.isCircular?(this.label.getBBox().width>G.len*G.tickInterval/(G.max-G.min)&&(D=0),t=n>D&&n<180-D?"left":n>180+D&&n<360-D?"right":"center"):t="center",w.attr({align:t})),J.x+=e.x,J.y+=F):J=J.call(this,H,K,w,E,e,I,v,L);return J});u(z,"getMarkPath",function(m,F,t,n,w,v,D){var E=this.axis;E.isRadial?(m=E.getPosition(this.pos,E.center[2]/2+n),F=["M",F,t,"L",m.x,m.y]):F=m.call(this,F,t,n,w,v,D);return F})})(a);(function(f){var o=f.each,h=f.pick,d=f.defined,q=f.seriesType,b=f.seriesTypes,p=f.Series.prototype,g=f.Point.prototype;q("arearange","area",{lineWidth:1,threshold:null,tooltip:{pointFormat:'\x3cspan style\x3d"color:{series.color}"\x3e\u25cf\x3c/span\x3e {series.name}: \x3cb\x3e{point.low}\x3c/b\x3e - \x3cb\x3e{point.high}\x3c/b\x3e\x3cbr/\x3e'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0}},{pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(e){return[e.low,e.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(e){var n=this.chart,m=this.xAxis.postTranslate(e.rectPlotX,this.yAxis.len-e.plotHigh);e.plotHighX=m.x-n.plotLeft;e.plotHigh=m.y-n.plotTop;e.plotLowX=e.plotX},translate:function(){var e=this,n=e.yAxis,m=!!e.modifyValue;b.area.prototype.translate.apply(e);o(e.points,function(s){var v=s.low,u=s.high,t=s.plotY;null===u||null===v?(s.isNull=!0,s.plotY=null):(s.plotLow=t,s.plotHigh=n.translate(m?e.modifyValue(u,s):u,0,1,0,1),m&&(s.yBottom=s.plotHigh))});this.chart.polar&&o(this.points,function(s){e.highToXY(s);s.tooltipPos=[(s.plotHighX+s.plotLowX)/2,(s.plotHigh+s.plotLow)/2]})},getGraphPath:function(B){var A=[],C=[],u,z=b.area.prototype.getGraphPath,v,t,n;n=this.options;var s=this.chart.polar&&!1!==n.connectEnds,m=n.connectNulls,w=n.step;B=B||this.points;for(u=B.length;u--;){v=B[u],v.isNull||s||m||B[u+1]&&!B[u+1].isNull||C.push({plotX:v.plotX,plotY:v.plotY,doCurve:!1}),t={polarPlotY:v.polarPlotY,rectPlotX:v.rectPlotX,yBottom:v.yBottom,plotX:h(v.plotHighX,v.plotX),plotY:v.plotHigh,isNull:v.isNull},C.push(t),A.push(t),v.isNull||s||m||B[u-1]&&!B[u-1].isNull||C.push({plotX:v.plotX,plotY:v.plotY,doCurve:!1})}B=z.call(this,B);w&&(!0===w&&(w="left"),n.step={left:"right",center:"center",right:"left"}[w]);A=z.call(this,A);C=z.call(this,C);n.step=w;n=[].concat(B,A);this.chart.polar||"M"!==C[0]||(C[0]="L");this.graphPath=n;this.areaPath=this.areaPath.concat(B,C);n.isArea=!0;n.xMap=B.xMap;this.areaPath.xMap=B.xMap;return n},drawDataLabels:function(){var A=this.data,w=A.length,B,t=[],v=this.options.dataLabels,u=v.align,s=v.verticalAlign,m=v.inside,n,e,z=this.chart.inverted;if(v.enabled||this._hasPointLabels){for(B=w;B--;){if(n=A[B]){e=m?n.plotHigh<n.plotLow:n.plotHigh>n.plotLow,n.y=n.high,n._plotY=n.plotY,n.plotY=n.plotHigh,t[B]=n.dataLabel,n.dataLabel=n.dataLabelUpper,n.below=e,z?u||(v.align=e?"right":"left"):s||(v.verticalAlign=e?"top":"bottom"),v.x=v.xHigh,v.y=v.yHigh}}p.drawDataLabels&&p.drawDataLabels.apply(this,arguments);for(B=w;B--;){if(n=A[B]){e=m?n.plotHigh<n.plotLow:n.plotHigh>n.plotLow,n.dataLabelUpper=n.dataLabel,n.dataLabel=t[B],n.y=n.low,n.plotY=n._plotY,n.below=!e,z?u||(v.align=e?"left":"right"):s||(v.verticalAlign=e?"bottom":"top"),v.x=v.xLow,v.y=v.yLow}}p.drawDataLabels&&p.drawDataLabels.apply(this,arguments)}v.align=u;v.verticalAlign=s},alignDataLabel:function(){b.column.prototype.alignDataLabel.apply(this,arguments)},drawPoints:function(){var e=this.points.length,n,m;p.drawPoints.apply(this,arguments);for(m=0;m<e;){n=this.points[m],n.lowerGraphic=n.graphic,n.graphic=n.upperGraphic,n._plotY=n.plotY,n._plotX=n.plotX,n.plotY=n.plotHigh,d(n.plotHighX)&&(n.plotX=n.plotHighX),m++}p.drawPoints.apply(this,arguments);for(m=0;m<e;){n=this.points[m],n.upperGraphic=n.graphic,n.graphic=n.lowerGraphic,n.plotY=n._plotY,n.plotX=n._plotX,m++}},setStackedPoints:f.noop},{setState:function(){var e=this.state,n=this.series,m=n.chart.polar;d(this.plotHigh)||(this.plotHigh=n.yAxis.toPixels(this.high,!0));d(this.plotLow)||(this.plotLow=this.plotY=n.yAxis.toPixels(this.low,!0));g.setState.apply(this,arguments);this.graphic=this.upperGraphic;this.plotY=this.plotHigh;m&&(this.plotX=this.plotHighX);this.state=e;n.stateMarkerGraphic&&(n.lowerStateMarkerGraphic=n.stateMarkerGraphic,n.stateMarkerGraphic=n.upperStateMarkerGraphic);g.setState.apply(this,arguments);this.plotY=this.plotLow;this.graphic=this.lowerGraphic;m&&(this.plotX=this.plotLowX);n.stateMarkerGraphic&&(n.upperStateMarkerGraphic=n.stateMarkerGraphic,n.stateMarkerGraphic=n.lowerStateMarkerGraphic,n.lowerStateMarkerGraphic=void 0)},haloPath:function(){var e=this.series.chart.polar,m;this.plotY=this.plotLow;e&&(this.plotX=this.plotLowX);m=g.haloPath.apply(this,arguments);this.plotY=this.plotHigh;e&&(this.plotX=this.plotHighX);return m=m.concat(g.haloPath.apply(this,arguments))},destroy:function(){this.upperGraphic&&(this.upperGraphic=this.upperGraphic.destroy());return g.destroy.apply(this,arguments)}})})(a);(function(b){var d=b.seriesType;d("areasplinerange","arearange",null,{getPointSpline:b.seriesTypes.spline.prototype.getPointSpline})})(a);(function(f){var o=f.defaultPlotOptions,h=f.each,d=f.merge,q=f.noop,b=f.pick,p=f.seriesType,g=f.seriesTypes.column.prototype;p("columnrange","arearange",d(o.column,o.arearange,{pointRange:null,marker:null,states:{hover:{halo:!1}}}),{translate:function(){var w=this,v=w.yAxis,z=w.xAxis,s=z.startAngleRad,u,t=w.chart,n=w.xAxis.isRadial,e=Math.max(t.chartWidth,t.chartHeight)+999,m;g.translate.apply(w);h(w.points,function(A){var D=A.shapeArgs,E=w.options.minPointLength,C,B;A.plotHigh=m=Math.min(Math.max(-e,v.translate(A.high,0,1,0,1)),e);A.plotLow=Math.min(Math.max(-e,A.plotY),e);B=m;C=b(A.rectPlotY,A.plotY)-m;Math.abs(C)<E?(E-=C,C+=E,B-=E/2):0>C&&(C*=-1,B-=C);n?(u=A.barX+s,A.shapeType="path",A.shapeArgs={d:w.polarArc(B+C,B,u,u+A.pointWidth)}):(D.height=C,D.y=B,A.tooltipPos=t.inverted?[v.len+v.pos-t.plotLeft-B-C/2,z.len+z.pos-t.plotTop-D.x-D.width/2,C]:[z.left-t.plotLeft+D.x+D.width/2,v.pos-t.plotTop+B+C/2,C])})},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:q,getSymbol:q,crispCol:g.crispCol,drawPoints:g.drawPoints,drawTracker:g.drawTracker,getColumnMetrics:g.getColumnMetrics,pointAttribs:g.pointAttribs,animate:function(){return g.animate.apply(this,arguments)},polarArc:function(){return g.polarArc.apply(this,arguments)},translate3dPoints:function(){return g.translate3dPoints.apply(this,arguments)},translate3dShapes:function(){return g.translate3dShapes.apply(this,arguments)}},{setState:g.pointClass.prototype.setState})})(a);(function(p){var u=p.each,s=p.isNumber,q=p.merge,d=p.pick,f=p.pInt,h=p.Series,g=p.seriesType,o=p.TrackerMixin;g("gauge","line",{dataLabels:{enabled:!0,defer:!1,y:15,borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2,borderWidth:1,borderColor:"#cccccc"},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1},{angular:!0,directTouch:!0,drawGraph:p.noop,fixedBox:!0,forceDL:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var e=this.yAxis,m=this.options,n=e.center;this.generatePoints();u(this.points,function(C){var B=q(m.dial,C.dial),w=f(d(B.radius,80))*n[2]/200,t=f(d(B.baseLength,70))*w/100,v=f(d(B.rearLength,10))*w/100,b=B.baseWidth||3,A=B.topWidth||1,z=m.overshoot,D=e.startAngleRad+e.translate(C.y,null,null,null,!0);s(z)?(z=z/180*Math.PI,D=Math.max(e.startAngleRad-z,Math.min(e.endAngleRad+z,D))):!1===m.wrap&&(D=Math.max(e.startAngleRad,Math.min(e.endAngleRad,D)));D=180*D/Math.PI;C.shapeType="path";C.shapeArgs={d:B.path||["M",-v,-b/2,"L",t,-b/2,w,-A/2,w,A/2,t,b/2,-v,b/2,"z"],translateX:n[0],translateY:n[1],rotation:D};C.plotX=n[0];C.plotY=n[1]})},drawPoints:function(){var e=this,m=e.yAxis.center,t=e.pivot,w=e.options,v=w.pivot,n=e.chart.renderer;u(e.points,function(C){var z=C.graphic,B=C.shapeArgs,b=B.d,A=q(w.dial,C.dial);z?(z.animate(B),B.d=b):(C.graphic=n[C.shapeType](B).attr({rotation:B.rotation,zIndex:1}).addClass("highcharts-dial").add(e.group),C.graphic.attr({stroke:A.borderColor||"none","stroke-width":A.borderWidth||0,fill:A.backgroundColor||"#000000"}))});t?t.animate({translateX:m[0],translateY:m[1]}):(e.pivot=n.circle(0,0,d(v.radius,5)).attr({zIndex:2}).addClass("highcharts-pivot").translate(m[0],m[1]).add(e.group),e.pivot.attr({"stroke-width":v.borderWidth||0,stroke:v.borderColor||"#cccccc",fill:v.backgroundColor||"#000000"}))},animate:function(e){var m=this;e||(u(m.points,function(n){var t=n.graphic;t&&(t.attr({rotation:180*m.yAxis.startAngleRad/Math.PI}),t.animate({rotation:n.shapeArgs.rotation},m.options.animation))}),m.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup);h.prototype.render.call(this);this.group.clip(this.chart.clipRect)},setData:function(e,m){h.prototype.setData.call(this,e,!1);this.processData();this.generatePoints();d(m,!0)&&this.chart.redraw()},drawTracker:o&&o.drawTrackerPoint},{setState:function(e){this.state=e}})})(a);(function(e){var g=e.each,f=e.noop,d=e.pick,h=e.seriesType,b=e.seriesTypes;h("boxplot","column",{threshold:null,tooltip:{pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e \x3cb\x3e {series.name}\x3c/b\x3e\x3cbr/\x3eMaximum: {point.high}\x3cbr/\x3eUpper quartile: {point.q3}\x3cbr/\x3eMedian: {point.median}\x3cbr/\x3eLower quartile: {point.q1}\x3cbr/\x3eMinimum: {point.low}\x3cbr/\x3e'},whiskerLength:"50%",fillColor:"#ffffff",lineWidth:1,medianWidth:2,states:{hover:{brightness:-0.3}},whiskerWidth:2},{pointArrayMap:["low","q1","median","q3","high"],toYData:function(m){return[m.low,m.q1,m.median,m.q3,m.high]},pointValKey:"high",pointAttribs:function(n){var o=this.options,m=n&&n.color||this.color;return{fill:n.fillColor||o.fillColor||m,stroke:o.lineColor||m,"stroke-width":o.lineWidth||0}},drawDataLabels:f,translate:function(){var m=this.yAxis,n=this.pointArrayMap;b.column.prototype.translate.apply(this);g(this.points,function(o){g(n,function(p){null!==o[p]&&(o[p+"Plot"]=m.translate(o[p],0,1,0,1))})})},drawPoints:function(){var K=this,D=K.options,J=K.chart.renderer,I,C,F,H,G,E,s=0,t,o,B,z,M=!1!==K.doQuartiles,L,w=K.options.whiskerLength;g(K.points,function(v){var N=v.graphic,u=N?"animate":"attr",n=v.shapeArgs,m={},A={},q={},p=v.color||K.color;void 0!==v.plotY&&(t=n.width,o=Math.floor(n.x),B=o+t,z=Math.round(t/2),I=Math.floor(M?v.q1Plot:v.lowPlot),C=Math.floor(M?v.q3Plot:v.lowPlot),F=Math.floor(v.highPlot),H=Math.floor(v.lowPlot),N||(v.graphic=N=J.g("point").add(K.group),v.stem=J.path().addClass("highcharts-boxplot-stem").add(N),w&&(v.whiskers=J.path().addClass("highcharts-boxplot-whisker").add(N)),M&&(v.box=J.path(void 0).addClass("highcharts-boxplot-box").add(N)),v.medianShape=J.path(void 0).addClass("highcharts-boxplot-median").add(N)),m.stroke=v.stemColor||D.stemColor||p,m["stroke-width"]=d(v.stemWidth,D.stemWidth,D.lineWidth),m.dashstyle=v.stemDashStyle||D.stemDashStyle,v.stem.attr(m),w&&(A.stroke=v.whiskerColor||D.whiskerColor||p,A["stroke-width"]=d(v.whiskerWidth,D.whiskerWidth,D.lineWidth),v.whiskers.attr(A)),M&&(N=K.pointAttribs(v),v.box.attr(N)),q.stroke=v.medianColor||D.medianColor||p,q["stroke-width"]=d(v.medianWidth,D.medianWidth,D.lineWidth),v.medianShape.attr(q),E=v.stem.strokeWidth()%2/2,s=o+z+E,v.stem[u]({d:["M",s,C,"L",s,F,"M",s,I,"L",s,H]}),M&&(E=v.box.strokeWidth()%2/2,I=Math.floor(I)+E,C=Math.floor(C)+E,o+=E,B+=E,v.box[u]({d:["M",o,C,"L",o,I,"L",B,I,"L",B,C,"L",o,C,"z"]})),w&&(E=v.whiskers.strokeWidth()%2/2,F+=E,H+=E,L=/%$/.test(w)?z*parseFloat(w)/100:w/2,v.whiskers[u]({d:["M",s-L,F,"L",s+L,F,"M",s-L,H,"L",s+L,H]})),G=Math.round(v.medianPlot),E=v.medianShape.strokeWidth()%2/2,G+=E,v.medianShape[u]({d:["M",o,G,"L",B,G]}))})},setStackedPoints:f})})(a);(function(d){var f=d.each,e=d.noop,b=d.seriesType,g=d.seriesTypes;b("errorbar","boxplot",{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'\x3cspan style\x3d"color:{point.color}"\x3e\u25cf\x3c/span\x3e {series.name}: \x3cb\x3e{point.low}\x3c/b\x3e - \x3cb\x3e{point.high}\x3c/b\x3e\x3cbr/\x3e'},whiskerWidth:null},{type:"errorbar",pointArrayMap:["low","high"],toYData:function(h){return[h.low,h.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:g.arearange?function(){var h=this.pointValKey;g.arearange.prototype.drawDataLabels.call(this);f(this.data,function(m){m.y=m[h]})}:e,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||g.column.prototype.getColumnMetrics.call(this)}})})(a);(function(f){var o=f.correctFloat,h=f.isNumber,d=f.pick,q=f.Point,b=f.Series,p=f.seriesType,g=f.seriesTypes;p("waterfall","column",{dataLabels:{inside:!0},lineWidth:1,lineColor:"#333333",dashStyle:"dot",borderColor:"#333333",states:{hover:{lineWidthPlus:0}}},{pointValKey:"y",translate:function(){var K=this.options,J=this.yAxis,M,E,H,F,C,G,w,t,B,A,O=d(K.minPointLength,5),N=O/2,L=K.threshold,s=K.stacking,I;g.column.prototype.translate.apply(this);t=B=L;E=this.points;M=0;for(K=E.length;M<K;M++){H=E[M],w=this.processedYData[M],F=H.shapeArgs,C=s&&J.stacks[(this.negStacks&&w<L?"-":"")+this.stackKey],I=this.getStackIndicator(I,H.x,this.index),A=C?C[H.x].points[I.key]:[0,w],H.isSum?H.y=o(w):H.isIntermediateSum&&(H.y=o(w-B)),G=Math.max(t,t+H.y)+A[0],F.y=J.translate(G,0,1,0,1),H.isSum?(F.y=J.translate(A[1],0,1,0,1),F.height=Math.min(J.translate(A[0],0,1,0,1),J.len)-F.y):H.isIntermediateSum?(F.y=J.translate(A[1],0,1,0,1),F.height=Math.min(J.translate(B,0,1,0,1),J.len)-F.y,B=A[1]):(F.height=0<w?J.translate(t,0,1,0,1)-F.y:J.translate(t,0,1,0,1)-J.translate(t-w,0,1,0,1),t+=C&&C[H.x]?C[H.x].total:w),0>F.height&&(F.y+=F.height,F.height*=-1),H.plotY=F.y=Math.round(F.y)-this.borderWidth%2/2,F.height=Math.max(Math.round(F.height),0.001),H.yBottom=F.y+F.height,F.height<=O&&!H.isNull?(F.height=O,F.y-=N,H.plotY=F.y,H.minPointLengthOffset=0>H.y?-N:N):H.minPointLengthOffset=0,F=H.plotY+(H.negative?F.height:0),this.chart.inverted?H.tooltipPos[0]=J.len-F:H.tooltipPos[1]=F}},processData:function(B){var A=this.yData,C=this.options.data,w,z=A.length,v,u,n,s,m,t;u=v=n=s=this.options.threshold||0;for(t=0;t<z;t++){m=A[t],w=C&&C[t]?C[t]:{},"sum"===m||w.isSum?A[t]=o(u):"intermediateSum"===m||w.isIntermediateSum?A[t]=o(v):(u+=m,v+=m),n=Math.min(u,n),s=Math.max(u,s)}b.prototype.processData.call(this,B);this.options.stacking||(this.dataMin=n,this.dataMax=s)},toYData:function(e){return e.isSum?0===e.x?null:"sum":e.isIntermediateSum?0===e.x?null:"intermediateSum":e.y},pointAttribs:function(e,m){var n=this.options.upColor;n&&!e.options.color&&(e.color=0<e.y?n:null);e=g.column.prototype.pointAttribs.call(this,e,m);delete e.dashstyle;return e},getGraphPath:function(){return["M",0,0]},getCrispPath:function(){var m=this.data,n=m.length,w=this.graph.strokeWidth()+this.borderWidth,w=Math.round(w)%2/2,t=this.yAxis.reversed,z=[],v,s,u;for(u=1;u<n;u++){s=m[u].shapeArgs;v=m[u-1].shapeArgs;s=["M",v.x+v.width,v.y+m[u-1].minPointLengthOffset+w,"L",s.x,v.y+m[u-1].minPointLengthOffset+w];if(0>m[u-1].y&&!t||0<m[u-1].y&&t){s[2]+=v.height,s[5]+=v.height}z=z.concat(s)}return z},drawGraph:function(){b.prototype.drawGraph.call(this);this.graph.attr({d:this.getCrispPath()})},setStackedPoints:function(){var m=this.options,n,s;b.prototype.setStackedPoints.apply(this,arguments);n=this.stackedYData?this.stackedYData.length:0;for(s=1;s<n;s++){m.data[s].isSum||m.data[s].isIntermediateSum||(this.stackedYData[s]+=this.stackedYData[s-1])}},getExtremes:function(){if(this.options.stacking){return b.prototype.getExtremes.apply(this,arguments)}}},{getClassName:function(){var e=q.prototype.getClassName.call(this);this.isSum?e+=" highcharts-sum":this.isIntermediateSum&&(e+=" highcharts-intermediate-sum");return e},isValid:function(){return h(this.y,!0)||this.isSum||this.isIntermediateSum}})})(a);(function(d){var f=d.Series,e=d.seriesType,b=d.seriesTypes;e("polygon","scatter",{marker:{enabled:!1,states:{hover:{enabled:!1}}},stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:""},trackByArea:!0},{type:"polygon",getGraphPath:function(){for(var h=f.prototype.getGraphPath.call(this),g=h.length+1;g--;){(g===h.length||"M"===h[g])&&0<g&&h.splice(g,0,"z")}return this.areaPath=h},drawGraph:function(){this.options.fillColor=this.color;b.area.prototype.drawGraph.call(this)},drawLegendSymbol:d.LegendSymbolMixin.drawRectangle,drawTracker:f.prototype.drawTracker,setStackedPoints:d.noop})})(a);(function(D){var G=D.arrayMax,F=D.arrayMin,E=D.Axis,h=D.color,o=D.each,z=D.isNumber,q=D.noop,C=D.pick,B=D.pInt,p=D.Point,s=D.Series,A=D.seriesType,u=D.seriesTypes;A("bubble","scatter",{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"},{pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",bubblePadding:!0,zoneAxis:"z",directTouch:!0,pointAttribs:function(b,f){var e=C(this.options.marker.fillOpacity,0.5);b=s.prototype.pointAttribs.call(this,b,f);1!==e&&(b.fill=h(b.fill).setOpacity(e).get("rgba"));return b},getRadii:function(N,O,M,L){var J,K,H,I=this.zData,v=[],t=this.options,m="width"!==t.sizeBy,n=t.zThreshold,w=O-N;K=0;for(J=I.length;K<J;K++){H=I[K],t.sizeByAbsoluteValue&&null!==H&&(H=Math.abs(H-n),O=Math.max(O-n,Math.abs(N-n)),N=0),null===H?H=null:H<N?H=M/2-1:(H=0<w?(H-N)/w:0.5,m&&0<=H&&(H=Math.sqrt(H)),H=Math.ceil(M+H*(L-M))/2),v.push(H)}this.radii=v},animate:function(d){var e=this.options.animation;d||(o(this.points,function(f){var m=f.graphic,g;m&&m.width&&(g={x:m.x,y:m.y,width:m.width,height:m.height},m.attr({x:f.plotX,y:f.plotY,width:1,height:1}),m.animate(g,e))}),this.animate=null)},translate:function(){var e,t=this.data,n,m,f=this.radii;u.scatter.prototype.translate.call(this);for(e=t.length;e--;){n=t[e],m=f?f[e]:0,z(m)&&m>=this.minPxSize/2?(n.marker=D.extend(n.marker,{radius:m,width:2*m,height:2*m}),n.dlBox={x:n.plotX-m,y:n.plotY-m,width:2*m,height:2*m}):n.shapeArgs=n.plotY=n.dlBox=void 0}},alignDataLabel:u.column.prototype.alignDataLabel,buildKDTree:q,applyZones:q},{haloPath:function(d){return p.prototype.haloPath.call(this,0===d?0:(this.marker?this.marker.radius||0:0)+d)},ttBelow:!1});E.prototype.beforePadding=function(){var M=this,J=this.len,I=this.chart,H=0,t=J,v=this.isXAxis,m=v?"xData":"yData",N=this.min,L={},b=Math.min(I.plotWidth,I.plotHeight),K=Number.MAX_VALUE,Q=-Number.MAX_VALUE,P=this.max-N,e=J/P,O=[];o(this.series,function(g){var f=g.options;!g.bubblePadding||!g.visible&&I.options.chart.ignoreHiddenSeries||(M.allowZoomOutside=!0,O.push(g),v&&(o(["minSize","maxSize"],function(n){var w=f[n],R=/%$/.test(w),w=B(w);L[n]=R?b*w/100:w}),g.minPxSize=L.minSize,g.maxPxSize=Math.max(L.maxSize,L.minSize),g=g.zData,g.length&&(K=C(f.zMin,Math.min(K,Math.max(F(g),!1===f.displayNegative?f.zThreshold:-Number.MAX_VALUE))),Q=C(f.zMax,Math.max(Q,G(g))))))});o(O,function(g){var R=g[m],w=R.length,n;v&&g.getRadii(K,Q,g.minPxSize,g.maxPxSize);if(0<P){for(;w--;){z(R[w])&&M.dataMin<=R[w]&&R[w]<=M.dataMax&&(n=g.radii[w],H=Math.min((R[w]-N)*e-n,H),t=Math.max((R[w]-N)*e+n,t))}}});O.length&&0<P&&!this.isLog&&(t-=J,e*=(J+H-t)/J,o([["min","userMin",H],["max","userMax",t]],function(d){void 0===C(M.options[d[0]],M[d[1]])&&(M[d[0]]+=d[2]/e)}))}})(a);(function(f){function o(z,A){var w=this.chart,u=this.options.animation,v=this.group,t=this.markerGroup,s=this.xAxis.center,n=w.plotLeft,m=w.plotTop;w.polar?w.renderer.isSVG&&(!0===u&&(u={}),A?(z={translateX:s[0]+n,translateY:s[1]+m,scaleX:0.001,scaleY:0.001},v.attr(z),t&&t.attr(z)):(z={translateX:n,translateY:m,scaleX:1,scaleY:1},v.animate(z,u),t&&t.animate(z,u),this.animate=null)):z.call(this,A)}var h=f.each,d=f.pick,q=f.seriesTypes,b=f.wrap,p=f.Series.prototype,g=f.Pointer.prototype;p.searchPointByAngle=function(m){var n=this.chart,s=this.xAxis.pane.center;return this.searchKDTree({clientX:180+-180/Math.PI*Math.atan2(m.chartX-s[0]-n.plotLeft,m.chartY-s[1]-n.plotTop)})};p.getConnectors=function(E,F,C,A){var D,B,z,v,w,u,s,G;B=A?1:0;D=0<=F&&F<=E.length-1?F:0>F?E.length-1+F:0;F=0>D-1?E.length-(1+B):D-1;B=D+1>E.length-1?B:D+1;z=E[F];B=E[B];v=z.plotX;z=z.plotY;w=B.plotX;u=B.plotY;B=E[D].plotX;D=E[D].plotY;v=(1.5*B+v)/2.5;z=(1.5*D+z)/2.5;w=(1.5*B+w)/2.5;s=(1.5*D+u)/2.5;u=Math.sqrt(Math.pow(v-B,2)+Math.pow(z-D,2));G=Math.sqrt(Math.pow(w-B,2)+Math.pow(s-D,2));v=Math.atan2(z-D,v-B);s=Math.PI/2+(v+Math.atan2(s-D,w-B))/2;Math.abs(v-s)>Math.PI/2&&(s-=Math.PI);v=B+Math.cos(s)*u;z=D+Math.sin(s)*u;w=B+Math.cos(Math.PI+s)*G;s=D+Math.sin(Math.PI+s)*G;B={rightContX:w,rightContY:s,leftContX:v,leftContY:z,plotX:B,plotY:D};C&&(B.prevPointCont=this.getConnectors(E,F,!1,A));return B};b(p,"buildKDTree",function(e){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.options.findNearestPointBy="xy");e.apply(this)});p.toXY=function(m){var n,t=this.chart,s=m.plotX;n=m.plotY;m.rectPlotX=s;m.rectPlotY=n;n=this.xAxis.postTranslate(m.plotX,this.yAxis.len-n);m.plotX=m.polarPlotX=n.x-t.plotLeft;m.plotY=m.polarPlotY=n.y-t.plotTop;this.kdByAngle?(t=(s/Math.PI*180+this.xAxis.pane.options.startAngle)%360,0>t&&(t+=360),m.clientX=t):m.clientX=m.plotX};q.spline&&(b(q.spline.prototype,"getPointSpline",function(m,n,t,s){this.chart.polar?s?(m=this.getConnectors(n,s,!0,this.connectEnds),m=["C",m.prevPointCont.rightContX,m.prevPointCont.rightContY,m.leftContX,m.leftContY,m.plotX,m.plotY]):m=["M",t.plotX,t.plotY]:m=m.call(this,n,t,s);return m}),q.areasplinerange&&(q.areasplinerange.prototype.getPointSpline=q.spline.prototype.getPointSpline));b(p,"translate",function(e){var m=this.chart;e.call(this);if(m.polar&&(this.kdByAngle=m.tooltip&&m.tooltip.shared,!this.preventPostTranslate)){for(e=this.points,m=e.length;m--;){this.toXY(e[m])}}});b(p,"getGraphPath",function(m,n){var v=this,t,u,s;if(this.chart.polar){n=n||this.points;for(t=0;t<n.length;t++){if(!n[t].isNull){u=t;break}}!1!==this.options.connectEnds&&void 0!==u&&(this.connectEnds=!0,n.splice(n.length,0,n[u]),s=!0);h(n,function(e){void 0===e.polarPlotY&&v.toXY(e)})}t=m.apply(this,[].slice.call(arguments,1));s&&n.pop();return t});b(p,"animate",o);q.column&&(q=q.column.prototype,q.polarArc=function(m,n,u,s){var v=this.xAxis.center,t=this.yAxis.len;return this.chart.renderer.symbols.arc(v[0],v[1],t-n,null,{start:u,end:s,innerR:t-d(m,t)})},b(q,"animate",o),b(q,"translate",function(m){var n=this.xAxis,u=n.startAngleRad,s,v,t;this.preventPostTranslate=!0;m.call(this);if(n.isRadial){for(s=this.points,t=s.length;t--;){v=s[t],m=v.barX+u,v.shapeType="path",v.shapeArgs={d:this.polarArc(v.yBottom,v.plotY,m,m+v.pointWidth)},this.toXY(v),v.tooltipPos=[v.plotX,v.plotY],v.ttBelow=v.plotY>n.center[1]}}}),b(q,"alignDataLabel",function(m,u,e,n,t,s){this.chart.polar?(m=u.rectPlotX/Math.PI*180,null===n.align&&(n.align=20<m&&160>m?"left":200<m&&340>m?"right":"center"),null===n.verticalAlign&&(n.verticalAlign=45>m||315<m?"bottom":135<m&&225>m?"top":"middle"),p.alignDataLabel.call(this,u,e,n,t,s)):m.call(this,u,e,n,t,s)}));b(g,"getCoordinates",function(n,t){var m=this.chart,s={xAxis:[],yAxis:[]};m.polar?h(m.axes,function(e){var w=e.isXAxis,v=e.center,u=t.chartX-v[0]-m.plotLeft,v=t.chartY-v[1]-m.plotTop;s[w?"xAxis":"yAxis"].push({axis:e,value:e.translate(w?Math.PI-Math.atan2(u,v):Math.sqrt(Math.pow(u,2)+Math.pow(v,2)),!0)})}):s=n.call(this,t);return s});b(f.Chart.prototype,"getAxes",function(e){this.pane||(this.pane=[]);h(f.splat(this.options.pane),function(m){new f.Pane(m,this)},this);e.call(this)});b(f.Chart.prototype,"drawChartBox",function(e){e.call(this);h(this.pane,function(m){m.render()})});b(f.Chart.prototype,"get",function(e,m){return f.find(this.pane,function(n){return n.options.id===m})||e.call(this,m)})})(a)});(function(a){"object"===typeof module&&module.exports?module.exports=a:a(Highcharts)})(function(a){(function(w){function g(e){return e.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#x27;").replace(/\//g,"\x26#x2F;")}function n(e){for(var h=e.childNodes.length;h--;){e.appendChild(e.childNodes[h])}}function d(e){var h;e&&e.onclick&&s.createEvent&&(h=s.createEvent("Events"),h.initEvent("click",!0,!1),e.onclick(h))}function p(e){return e.isNull&&e.series.chart.options.accessibility.keyboardNavigation.skipNullPoints||e.series.options.skipKeyboardNavigation||!e.series.visible}var o=w.win,s=o.document,u=w.each,f=w.erase,I=w.addEvent,b=w.removeEvent,H=w.fireEvent,M=w.dateFormat,J=w.merge,G={position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"},L={"default":["series","data point","data points"],line:["line","data point","data points"],spline:["line","data point","data points"],area:["line","data point","data points"],areaspline:["line","data point","data points"],pie:["pie","slice","slices"],column:["column series","column","columns"],bar:["bar series","bar","bars"],scatter:["scatter series","data point","data points"],boxplot:["boxplot series","box","boxes"],arearange:["arearange series","data point","data points"],areasplinerange:["areasplinerange series","data point","data points"],bubble:["bubble series","bubble","bubbles"],columnrange:["columnrange series","column","columns"],errorbar:["errorbar series","errorbar","errorbars"],funnel:["funnel","data point","data points"],pyramid:["pyramid","data point","data points"],waterfall:["waterfall series","column","columns"],map:["map","area","areas"],mapline:["line","data point","data points"],mappoint:["point series","data point","data points"],mapbubble:["bubble series","bubble","bubbles"]},K={boxplot:" Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile and maximum. ",arearange:" Arearange charts are line charts displaying a range between a lower and higher value for each point. ",areasplinerange:" These charts are line charts displaying a range between a lower and higher value for each point. ",bubble:" Bubble charts are scatter charts where each data point also has a size value. ",columnrange:" Columnrange charts are column charts displaying a range between a lower and higher value for each point. ",errorbar:" Errorbar series are used to display the variability of the data. ",funnel:" Funnel charts are used to display reduction of data in stages. ",pyramid:" Pyramid charts consist of a single pyramid with item heights corresponding to each point value. ",waterfall:" A waterfall chart is a column chart where each column contributes towards a total end value. "};w.Series.prototype.commonKeys="name id category x value y".split(" ");w.Series.prototype.specialKeys="z open high q3 median q1 low close".split(" ");w.seriesTypes.pie&&(w.seriesTypes.pie.prototype.specialKeys=[]);w.Series.prototype.keyboardMoveVertical=!0;u(["column","pie"],function(e){w.seriesTypes[e]&&(w.seriesTypes[e].prototype.keyboardMoveVertical=!1)});w.setOptions({accessibility:{enabled:!0,pointDescriptionThreshold:30,keyboardNavigation:{enabled:!0}}});w.wrap(w.Series.prototype,"render",function(e){e.apply(this,Array.prototype.slice.call(arguments,1));this.chart.options.accessibility.enabled&&this.setA11yDescription()});w.Series.prototype.setA11yDescription=function(){var e=this.chart.options.accessibility,m=this.points&&this.points.length&&this.points[0].graphic&&this.points[0].graphic.element,h=m&&m.parentNode||this.graph&&this.graph.element||this.group&&this.group.element;h&&(h.lastChild===m&&n(h),this.points&&(this.points.length<e.pointDescriptionThreshold||!1===e.pointDescriptionThreshold)&&u(this.points,function(q){q.graphic&&(q.graphic.element.setAttribute("role","img"),q.graphic.element.setAttribute("tabindex","-1"),q.graphic.element.setAttribute("aria-label",q.series.options.pointDescriptionFormatter&&q.series.options.pointDescriptionFormatter(q)||e.pointDescriptionFormatter&&e.pointDescriptionFormatter(q)||q.buildPointInfoString()))}),1<this.chart.series.length||e.describeSingleSeries)&&(h.setAttribute("role",this.options.exposeElementToA11y?"img":"region"),h.setAttribute("tabindex","-1"),h.setAttribute("aria-label",e.seriesDescriptionFormatter&&e.seriesDescriptionFormatter(this)||this.buildSeriesInfoString()))};w.Series.prototype.buildSeriesInfoString=function(){var e=L[this.type]||L["default"],h=this.description||this.options.description;return(this.name?this.name+", ":"")+(1===this.chart.types.length?e[0]:"series")+" "+(this.index+1)+" of "+this.chart.series.length+(1===this.chart.types.length?" with ":". "+e[0]+" with ")+(this.points.length+" "+(1===this.points.length?e[1]:e[2]))+(h?". "+h:"")+(1<this.chart.yAxis.length&&this.yAxis?". Y axis, "+this.yAxis.getDescription():"")+(1<this.chart.xAxis.length&&this.xAxis?". X axis, "+this.xAxis.getDescription():"")};w.Point.prototype.buildPointInfoString=function(){var h=this,t=h.series,q=t.chart.options.accessibility,e="",m=t.xAxis&&t.xAxis.isDatetimeAxis,q=m&&M(q.pointDateFormatter&&q.pointDateFormatter(h)||q.pointDateFormat||w.Tooltip.prototype.getXDateFormat(h,t.chart.options.tooltip,t.xAxis),h.x);w.find(t.specialKeys,function(v){return void 0!==h[v]})?(m&&(e=q),u(t.commonKeys.concat(t.specialKeys),function(v){void 0===h[v]||m&&"x"===v||(e+=(e?". ":"")+v+", "+h[v])})):e=(this.name||q||this.category||this.id||"x, "+this.x)+", "+(void 0!==this.value?this.value:this.y);return this.index+1+". "+e+"."+(this.description?" "+this.description:"")};w.Axis.prototype.getDescription=function(){return this.userOptions&&this.userOptions.description||this.axisTitle&&this.axisTitle.textStr||this.options.id||this.categories&&"categories"||"values"};w.Axis.prototype.panStep=function(h,t){var q=t||3;t=this.getExtremes();var e=(t.max-t.min)/q*h,q=t.max+e,e=t.min+e,m=q-e;0>h&&e<t.dataMin?(e=t.dataMin,q=e+m):0<h&&q>t.dataMax&&(q=t.dataMax,e=q-m);this.setExtremes(e,q)};w.wrap(w.Series.prototype,"init",function(e){e.apply(this,Array.prototype.slice.call(arguments,1));var h=this.chart;h.options.accessibility.enabled&&(h.types=h.types||[],0>h.types.indexOf(this.type)&&h.types.push(this.type),I(this,"remove",function(){var q=this,m=!1;u(h.series,function(t){t!==q&&0>h.types.indexOf(q.type)&&(m=!0)});m||f(h.types,q.type)}))});w.Chart.prototype.getTypeDescription=function(){var e=this.types&&this.types[0],h=this.series[0]&&this.series[0].mapTitle;if(e){if("map"===e){return h?"Map of "+h:"Map of unspecified region."}if(1<this.types.length){return"Combination chart."}if(-1<["spline","area","areaspline"].indexOf(e)){return"Line chart."}}else{return"Empty chart."}return e+" chart."+(K[e]||"")};w.Chart.prototype.getAxesDescription=function(){var h=this.xAxis.length,q=this.yAxis.length,m={},e;if(h){if(m.xAxis="The chart has "+h+(1<h?" X axes":" X axis")+" displaying ",2>h){m.xAxis+=this.xAxis[0].getDescription()+"."}else{for(e=0;e<h-1;++e){m.xAxis+=(e?", ":"")+this.xAxis[e].getDescription()}m.xAxis+=" and "+this.xAxis[e].getDescription()+"."}}if(q){if(m.yAxis="The chart has "+q+(1<q?" Y axes":" Y axis")+" displaying ",2>q){m.yAxis+=this.yAxis[0].getDescription()+"."}else{for(e=0;e<q-1;++e){m.yAxis+=(e?", ":"")+this.yAxis[e].getDescription()}m.yAxis+=" and "+this.yAxis[e].getDescription()+"."}}return m};w.Chart.prototype.addAccessibleContextMenuAttribs=function(){var e=this.exportDivElements;e&&(u(e,function(h){"DIV"!==h.tagName||h.children&&h.children.length||(h.setAttribute("role","menuitem"),h.setAttribute("tabindex",-1))}),e[0].parentNode.setAttribute("role","menu"),e[0].parentNode.setAttribute("aria-label","Chart export"))};w.Point.prototype.highlight=function(){var e=this.series.chart;this.graphic&&this.graphic.element.focus&&this.graphic.element.focus();this.isNull?e.tooltip&&e.tooltip.hide(0):(this.onMouseOver(),e.tooltip&&e.tooltip.refresh(e.tooltip.shared?[this]:this));e.highlightedPoint=this;return this};w.Chart.prototype.highlightAdjacentPoint=function(m){var A=this.series,z=this.highlightedPoint,h=z&&z.index||0,q=z&&z.series.points,t=this.series&&this.series[this.series.length-1],v=t&&t.points&&t.points[t.points.length-1],t=z&&z.series.connectEnds&&h>q.length-3?2:1;if(!A[0]||!A[0].points){return !1}if(z){if(q[h]!==z){for(v=0;v<q.length;++v){if(q[v]===z){h=v;break}}}A=A[z.series.index+(m?1:-1)];h=q[h+(m?t:-1)]||A&&A.points[m?0:A.points.length-(A.connectEnds?2:1)];if(void 0===h){return !1}}else{h=m?A[0].points[0]:v}return p(h)?(this.highlightedPoint=h,this.highlightAdjacentPoint(m)):h.highlight()};w.Series.prototype.highlightFirstValidPoint=function(){for(var h=this.chart.highlightedPoint,q=h.series===this?h.index:0,h=this.points,m=q,e=h.length;m<e;++m){if(!p(h[m])){return h[m].highlight()}}for(;0<=q;--q){if(!p(h[q])){return h[q].highlight()}}return !1};w.Chart.prototype.highlightAdjacentSeries=function(m){var A,z,h=this.highlightedPoint,q=(A=this.series&&this.series[this.series.length-1])&&A.points&&A.points[A.points.length-1];if(!this.highlightedPoint){return A=m?this.series&&this.series[0]:A,(z=m?A&&A.points&&A.points[0]:q)?z.highlight():!1}A=this.series[h.series.index+(m?-1:1)];if(!A){return !1}m:{var q=Infinity,t,v=A.points.length;if(void 0===h.plotX||void 0===h.plotY){z=void 0}else{for(;v--;){t=A.points[v];if(void 0===t.plotX||void 0===t.plotY){z=void 0;break m}t=(h.plotX-t.plotX)*(h.plotX-t.plotX)*4+(h.plotY-t.plotY)*(h.plotY-t.plotY)*1;t<q&&(q=t,z=v)}z=A.points[z||0]}}if(!z){return !1}if(!A.visible){return z.highlight(),m=this.highlightAdjacentSeries(m),m?m:(h.highlight(),!1)}z.highlight();return z.series.highlightFirstValidPoint()};w.Chart.prototype.highlightAdjacentPointVertical=function(h){var q=this.highlightedPoint,m=Infinity,e;if(void 0===q.plotX||void 0===q.plotY){return !1}u(this.series,function(t){u(t.points,function(v){if(void 0!==v.plotY&&void 0!==v.plotX&&v!==q){var z=v.plotY-q.plotY,A=Math.abs(v.plotX-q.plotX),A=Math.abs(z)*Math.abs(z)+A*A*4;t.yAxis.reversed&&(z*=-1);!(0>z&&h||0<z&&!h||5>A||p(v))&&A<m&&(m=A,e=v)}})});return e?e.highlight():!1};w.Chart.prototype.showExportMenu=function(){this.exportSVGElements&&this.exportSVGElements[0]&&(this.exportSVGElements[0].element.onclick(),this.highlightExportItem(0))};w.Chart.prototype.highlightExportItem=function(e){var m=this.exportDivElements&&this.exportDivElements[e],h=this.exportDivElements&&this.exportDivElements[this.highlightedExportItem];if(m&&"DIV"===m.tagName&&(!m.children||!m.children.length)){m.focus&&m.focus();if(h&&h.onmouseout){h.onmouseout()}if(m.onmouseover){m.onmouseover()}this.highlightedExportItem=e;return !0}};w.Chart.prototype.highlightRangeSelectorButton=function(e){var h=this.rangeSelector.buttons;h[this.highlightedRangeSelectorItemIx]&&h[this.highlightedRangeSelectorItemIx].setState(this.oldRangeSelectorItemState||0);this.highlightedRangeSelectorItemIx=e;return h[e]?(h[e].element.focus&&h[e].element.focus(),this.oldRangeSelectorItemState=h[e].state,h[e].setState(2),!0):!1};w.Chart.prototype.highlightLegendItem=function(e){var h=this.legend.allItems;h[this.highlightedLegendItemIx]&&H(h[this.highlightedLegendItemIx].legendGroup.element,"mouseout");this.highlightedLegendItemIx=e;return h[e]?(h[e].legendGroup.element.focus&&h[e].legendGroup.element.focus(),H(h[e].legendGroup.element,"mouseover"),!0):!1};w.Chart.prototype.hideExportMenu=function(){var e=this.exportDivElements;if(e){u(e,function(h){H(h,"mouseleave")});if(e[this.highlightedExportItem]&&e[this.highlightedExportItem].onmouseout){e[this.highlightedExportItem].onmouseout()}this.highlightedExportItem=0;this.renderTo.focus()}};w.Chart.prototype.addKeyboardNavEvents=function(){function h(t){this.id=t.id;this.keyCodeMap=t.keyCodeMap;this.move=t.move;this.validate=t.validate;this.init=t.init;this.terminate=t.terminate}function q(z,v,t){return new h(J({keyCodeMap:v,move:function(A){this.terminate&&this.terminate(A);e.keyboardNavigationModuleIndex+=A;var B=e.keyboardNavigationModules[e.keyboardNavigationModuleIndex];if(B){if(B.validate&&!B.validate()){return this.move(A)}if(B.init){return B.init(A),!0}}e.keyboardNavigationModuleIndex=0;0<A?e.tabExitAnchor.focus():e.renderTo.focus();return !1}},{id:z},t))}function m(t){t=t||o.event;var v=e.keyboardNavigationModules[e.keyboardNavigationModuleIndex];v&&v.run(t)&&t.preventDefault()}var e=this;h.prototype={run:function(t){var v=this,B=t.which||t.keyCode,A=!1,z=!1;u(this.keyCodeMap,function(C){-1<C[0].indexOf(B)&&(A=!0,z=!1===C[1].call(v,B,t)?!1:!0)});A||9!==B||(z=this.move(t.shiftKey?-1:1));return z}};e.keyboardNavigationModules=[q("entry",[]),q("points",[[[37,39],function(t){e.highlightAdjacentPoint(39===t);return !0}],[[38,40],function(t){e[e.highlightedPoint&&e.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](38!==t);return !0}],[[13,32],function(){e.highlightedPoint&&e.highlightedPoint.firePointEvent("click")}]],{init:function(){delete e.highlightedPoint;for(var t=0;t<e.series.length;++t){for(var z=0,v=e.series[t].points&&e.series[t].points.length;z<v;++z){if(!p(e.series[t].points[z])){return e.series[t].points[z].highlight()}}}},terminate:function(){e.tooltip&&e.tooltip.hide(0);delete e.highlightedPoint}}),q("exporting",[[[37,38],function(){for(var t=e.highlightedExportItem||0,v=!0;t--;){if(e.highlightExportItem(t)){v=!1;break}}if(v){return e.hideExportMenu(),this.move(-1)}}],[[39,40],function(){for(var t=!0,v=(e.highlightedExportItem||0)+1;v<e.exportDivElements.length;++v){if(e.highlightExportItem(v)){t=!1;break}}if(t){return e.hideExportMenu(),this.move(1)}}],[[13,32],function(){d(e.exportDivElements[e.highlightedExportItem])}]],{validate:function(){return e.exportChart&&!(e.options.exporting&&!1===e.options.exporting.enabled)},init:function(t){e.highlightedPoint=null;e.showExportMenu();if(0>t&&e.exportDivElements){for(t=e.exportDivElements.length;-1<t&&!e.highlightExportItem(t);--t){}}},terminate:function(){e.hideExportMenu()}}),q("mapZoom",[[[38,40,37,39],function(t){e[38===t||40===t?"yAxis":"xAxis"][0].panStep(39>t?-1:1)}],[[9],function(t,v){e.mapNavButtons[e.focusedMapNavButtonIx].setState(0);if(v.shiftKey&&!e.focusedMapNavButtonIx||!v.shiftKey&&e.focusedMapNavButtonIx){return e.mapZoom(),this.move(v.shiftKey?-1:1)}e.focusedMapNavButtonIx+=v.shiftKey?-1:1;t=e.mapNavButtons[e.focusedMapNavButtonIx];t.element.focus&&t.element.focus();t.setState(2)}],[[13,32],function(){d(e.mapNavButtons[e.focusedMapNavButtonIx].element)}]],{validate:function(){return e.mapZoom&&e.mapNavButtons&&2===e.mapNavButtons.length},init:function(t){var z=e.mapNavButtons[0],v=e.mapNavButtons[1],z=0<t?z:v;u(e.mapNavButtons,function(B,A){B.element.setAttribute("tabindex",-1);B.element.setAttribute("role","button");B.element.setAttribute("aria-label","Zoom "+(A?"out":"")+"chart")});z.element.focus&&z.element.focus();z.setState(2);e.focusedMapNavButtonIx=0<t?0:1}}),q("rangeSelector",[[[37,39,38,40],function(t){t=37===t||38===t?-1:1;if(!e.highlightRangeSelectorButton(e.highlightedRangeSelectorItemIx+t)){return this.move(t)}}],[[13,32],function(){3!==e.oldRangeSelectorItemState&&d(e.rangeSelector.buttons[e.highlightedRangeSelectorItemIx].element)}]],{validate:function(){return e.rangeSelector&&e.rangeSelector.buttons&&e.rangeSelector.buttons.length},init:function(t){u(e.rangeSelector.buttons,function(v){v.element.setAttribute("tabindex","-1");v.element.setAttribute("role","button");v.element.setAttribute("aria-label","Select range "+(v.text&&v.text.textStr))});e.highlightRangeSelectorButton(0<t?0:e.rangeSelector.buttons.length-1)}}),q("rangeSelectorInput",[[[9,38,40],function(t,v){t=9===t&&v.shiftKey||38===t?-1:1;v=e.highlightedInputRangeIx+=t;if(1<v||0>v){return this.move(t)}e.rangeSelector[v?"maxInput":"minInput"].focus()}]],{validate:function(){return e.rangeSelector&&e.rangeSelector.inputGroup&&"hidden"!==e.rangeSelector.inputGroup.element.getAttribute("visibility")&&!1!==e.options.rangeSelector.inputEnabled&&e.rangeSelector.minInput&&e.rangeSelector.maxInput},init:function(t){e.highlightedInputRangeIx=0<t?0:1;e.rangeSelector[e.highlightedInputRangeIx?"maxInput":"minInput"].focus()}}),q("legend",[[[37,39,38,40],function(t){t=37===t||38===t?-1:1;if(!e.highlightLegendItem(e.highlightedLegendItemIx+t)){return this.move(t)}}],[[13,32],function(){d(e.legend.allItems[e.highlightedLegendItemIx].legendItem.element.parentNode)}]],{validate:function(){return e.legend&&e.legend.allItems&&!(e.colorAxis&&e.colorAxis.length)&&!1!==(e.options.legend&&e.options.legend.keyboardNavigation&&e.options.legend.keyboardNavigation.enabled)},init:function(t){u(e.legend.allItems,function(v){v.legendGroup.element.setAttribute("tabindex","-1");v.legendGroup.element.setAttribute("role","button");v.legendGroup.element.setAttribute("aria-label","Toggle visibility of series "+v.name)});e.highlightLegendItem(0<t?0:e.legend.allItems.length-1)}})];e.keyboardNavigationModuleIndex=0;e.container.hasAttribute&&!e.container.hasAttribute("tabIndex")&&e.container.setAttribute("tabindex","0");e.tabExitAnchor||(e.tabExitAnchor=s.createElement("div"),e.tabExitAnchor.setAttribute("tabindex","-1"),J(!0,e.tabExitAnchor.style,G),e.renderTo.appendChild(e.tabExitAnchor));I(e.renderTo,"keydown",m);I(e,"destroy",function(){e.renderTo&&b(e.renderTo,"keydown",m)})};w.Chart.prototype.addScreenReaderRegion=function(N,E){var D=this,F=D.series,C=D.options,B=C.accessibility,A=D.screenReaderRegion=s.createElement("div"),t=s.createElement("h4"),q=s.createElement("a"),v=s.createElement("h4"),z=D.types||[],z=(1===z.length&&"pie"===z[0]||"map"===z[0])&&{}||D.getAxesDescription(),O=F[0]&&L[F[0].type]||L["default"];A.setAttribute("id",N);A.setAttribute("role","region");A.setAttribute("aria-label","Chart screen reader information.");A.innerHTML=B.screenReaderSectionFormatter&&B.screenReaderSectionFormatter(D)||"\x3cdiv\x3eUse regions/landmarks to skip ahead to chart"+(1<F.length?" and navigate between data series":"")+".\x3c/div\x3e\x3ch3\x3e"+(C.title.text?g(C.title.text):"Chart")+(C.subtitle&&C.subtitle.text?". "+g(C.subtitle.text):"")+"\x3c/h3\x3e\x3ch4\x3eLong description.\x3c/h4\x3e\x3cdiv\x3e"+(C.chart.description||"No description available.")+"\x3c/div\x3e\x3ch4\x3eStructure.\x3c/h4\x3e\x3cdiv\x3eChart type: "+(C.chart.typeDescription||D.getTypeDescription())+"\x3c/div\x3e"+(1===F.length?"\x3cdiv\x3e"+O[0]+" with "+F[0].points.length+" "+(1===F[0].points.length?O[1]:O[2])+".\x3c/div\x3e":"")+(z.xAxis?"\x3cdiv\x3e"+z.xAxis+"\x3c/div\x3e":"")+(z.yAxis?"\x3cdiv\x3e"+z.yAxis+"\x3c/div\x3e":"");D.getCSV&&(q.innerHTML="View as data table.",q.href="#"+E,q.setAttribute("tabindex","-1"),q.onclick=B.onTableAnchorClick||function(){D.viewData();s.getElementById(E).focus()},t.appendChild(q),A.appendChild(t));v.innerHTML="Chart graphic.";D.renderTo.insertBefore(v,D.renderTo.firstChild);D.renderTo.insertBefore(A,D.renderTo.firstChild);J(!0,v.style,G);J(!0,A.style,G)};w.Chart.prototype.callbacks.push(function(F){var D=F.options,C=D.accessibility;if(C.enabled){var E=s.createElementNS("http://www.w3.org/2000/svg","title"),A=s.createElementNS("http://www.w3.org/2000/svg","g"),B=F.container.getElementsByTagName("desc")[0],v=F.container.getElementsByTagName("text"),q="highcharts-title-"+F.index,h="highcharts-data-table-"+F.index,e="highcharts-information-region-"+F.index,z=D.title.text||"Chart",O=D.exporting&&D.exporting.csv&&D.exporting.csv.columnHeaderFormatter,N=[];E.textContent=g(z);E.id=q;B.parentNode.insertBefore(E,B);F.renderTo.setAttribute("role","region");F.renderTo.setAttribute("aria-label","Interactive chart. "+z+". Use up and down arrows to navigate with most screen readers.");if(F.exportSVGElements&&F.exportSVGElements[0]&&F.exportSVGElements[0].element){var P=F.exportSVGElements[0].element.onclick,E=F.exportSVGElements[0].element.parentNode;F.exportSVGElements[0].element.onclick=function(){P.apply(this,Array.prototype.slice.call(arguments));F.addAccessibleContextMenuAttribs();F.highlightExportItem(0)};F.exportSVGElements[0].element.setAttribute("role","button");F.exportSVGElements[0].element.setAttribute("aria-label","View export menu");A.appendChild(F.exportSVGElements[0].element);A.setAttribute("role","region");A.setAttribute("aria-label","Chart export menu");E.appendChild(A)}F.rangeSelector&&u(["minInput","maxInput"],function(m,t){F.rangeSelector[m]&&(F.rangeSelector[m].setAttribute("tabindex","-1"),F.rangeSelector[m].setAttribute("role","textbox"),F.rangeSelector[m].setAttribute("aria-label","Select "+(t?"end":"start")+" date."))});u(v,function(m){m.setAttribute("aria-hidden","true")});F.addScreenReaderRegion(e,h);C.keyboardNavigation.enabled&&F.addKeyboardNavEvents();J(!0,D.exporting,{csv:{columnHeaderFormatter:function(t,m,R){if(!t){return"Category"}if(t instanceof w.Axis){return t.options.title&&t.options.title.text||(t.isDatetimeAxis?"DateTime":"Category")}var Q=N[N.length-1];1<R&&(Q&&Q.text)!==t.name&&N.push({text:t.name,span:R});return O?O.call(this,t,m,R):1<R?m:t.name}}});w.wrap(F,"getTable",function(m){return m.apply(this,Array.prototype.slice.call(arguments,1)).replace("\x3ctable\x3e",'\x3ctable id\x3d"'+h+'" summary\x3d"Table representation of chart"\x3e\x3ccaption\x3e'+z+"\x3c/caption\x3e")});w.wrap(F,"viewData",function(t){if(!this.dataTableDiv){t.apply(this,Array.prototype.slice.call(arguments,1));var m=s.getElementById(h),V=m.getElementsByTagName("thead")[0],U=m.getElementsByTagName("tbody")[0],T=V.firstChild.children,S="\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e",R,Q;m.setAttribute("tabindex","-1");u(U.children,function(W){R=W.firstChild;Q=s.createElement("th");Q.setAttribute("scope","row");Q.innerHTML=R.innerHTML;R.parentNode.replaceChild(Q,R)});u(T,function(W){"TH"===W.tagName&&W.setAttribute("scope","col")});N.length&&(u(N,function(W){S+='\x3cth scope\x3d"col" colspan\x3d"'+W.span+'"\x3e'+W.text+"\x3c/th\x3e"}),V.insertAdjacentHTML("afterbegin",S))}})}})})(a)});(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.crossfilter=b()}}})(function(){var f,b,a;return(function d(g,q,m){function h(w,t){if(!q[w]){if(!g[w]){var s=typeof require=="function"&&require;if(!t&&s){return s(w,!0)}if(e){return e(w,!0)}var v=new Error("Cannot find module '"+w+"'");throw v.code="MODULE_NOT_FOUND",v}var n=q[w]={exports:{}};g[w][0].call(n.exports,function(o){var u=g[w][1][o];return h(u?u:o)},n,n.exports,d,g,q,m)}return q[w].exports}var e=typeof require=="function"&&require;for(var p=0;p<m.length;p++){h(m[p])}return h})({1:[function(g,h,e){h.exports=g("./src/crossfilter").crossfilter},{"./src/crossfilter":8}],2:[function(g,h,e){(function(F){var A=1/0;var z="[object Symbol]";var v={"function":true,object:true};var s=(v[typeof e]&&e&&!e.nodeType)?e:undefined;var I=(v[typeof h]&&h&&!h.nodeType)?h:undefined;var B=u(s&&I&&typeof F=="object"&&F);var m=u(v[typeof self]&&self);var p=u(v[typeof window]&&window);var D=u(v[typeof this]&&this);var E=B||((p!==(D&&D.window))&&p)||m||D||Function("return this")();function u(J){return(J&&J.Object===Object)?J:null}var w=Object.prototype;var q=w.toString;var C=E.Symbol;var G=C?C.prototype:undefined,t=G?G.toString:undefined;function H(K){if(typeof K=="string"){return K}if(n(K)){return t?t.call(K):""}var J=(K+"");return(J=="0"&&(1/K)==-A)?"-0":J}function o(J){return !!J&&typeof J=="object"}function n(J){return typeof J=="symbol"||(o(J)&&q.call(J)==z)}h.exports=H}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],3:[function(g,h,e){(function(m){var ae=g("lodash._basetostring");var A="Expected a function";var ac="__lodash_hash_undefined__";var ai="[object Function]",B="[object GeneratorFunction]";var o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g;var ak=/[\\^$.*+?()[\]{}|]/g;var ab=/\\(\\)?/g;var at=/^\[object .+?Constructor\]$/;var W={"function":true,object:true};var ax=(W[typeof e]&&e&&!e.nodeType)?e:undefined;var R=(W[typeof h]&&h&&!h.nodeType)?h:undefined;var P=M(ax&&R&&typeof m=="object"&&m);var ap=M(W[typeof self]&&self);var z=M(W[typeof window]&&window);var O=M(W[typeof this]&&this);var T=P||((z!==(O&&O.window))&&z)||ap||O||Function("return this")();function M(az){return(az&&az.Object===Object)?az:null}function Z(aA){var az=false;if(aA!=null&&typeof aA.toString!="function"){try{az=!!(aA+"")}catch(aB){}}return az}var K=Array.prototype,n=Object.prototype;var ag=Function.prototype.toString;var C=n.hasOwnProperty;var Q=n.toString;var G=RegExp("^"+ag.call(C).replace(ak,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var S=K.splice;var E=af(T,"Map"),aa=af(Object,"create");function aj(az){var aA=-1,aC=az?az.length:0;this.clear();while(++aA<aC){var aB=az[aA];this.set(aB[0],aB[1])}}function H(){this.__data__=aa?aa(null):{}}function L(az){return this.has(az)&&delete this.__data__[az]}function w(aA){var aB=this.__data__;if(aa){var az=aB[aA];return az===ac?undefined:az}return C.call(aB,aA)?aB[aA]:undefined}function J(az){var aA=this.__data__;return aa?aA[az]!==undefined:C.call(aA,az)}function an(az,aB){var aA=this.__data__;aA[az]=(aa&&aB===undefined)?ac:aB;return this}aj.prototype.clear=H;aj.prototype["delete"]=L;aj.prototype.get=w;aj.prototype.has=J;aj.prototype.set=an;function ao(az){var aA=-1,aC=az?az.length:0;this.clear();while(++aA<aC){var aB=az[aA];this.set(aB[0],aB[1])}}function aq(){this.__data__=[]}function aw(aA){var aB=this.__data__,az=ah(aB,aA);if(az<0){return false}var aC=aB.length-1;if(az==aC){aB.pop()}else{S.call(aB,az,1)}return true}function U(aA){var aB=this.__data__,az=ah(aB,aA);return az<0?undefined:aB[az][1]}function al(az){return ah(this.__data__,az)>-1}function v(aA,aC){var aB=this.__data__,az=ah(aB,aA);if(az<0){aB.push([aA,aC])}else{aB[az][1]=aC}return this}ao.prototype.clear=aq;ao.prototype["delete"]=aw;ao.prototype.get=U;ao.prototype.has=al;ao.prototype.set=v;function t(az){var aA=-1,aC=az?az.length:0;this.clear();while(++aA<aC){var aB=az[aA];this.set(aB[0],aB[1])}}function N(){this.__data__={hash:new aj,map:new (E||ao),string:new aj}}function ay(az){return av(this,az)["delete"](az)}function ad(az){return av(this,az).get(az)}function ar(az){return av(this,az).has(az)}function D(az,aA){av(this,az).set(az,aA);return this}t.prototype.clear=N;t.prototype["delete"]=ay;t.prototype.get=ad;t.prototype.has=ar;t.prototype.set=D;function ah(aB,az){var aA=aB.length;while(aA--){if(au(aB[aA][0],az)){return aA}}return -1}function av(aB,az){var aA=aB.__data__;return s(az)?aA[typeof az=="string"?"string":"hash"]:aA.map}function af(az,aA){var aB=az[aA];return p(aB)?aB:undefined}function s(aA){var az=typeof aA;return(az=="string"||az=="number"||az=="symbol"||az=="boolean")?(aA!=="__proto__"):(aA===null)}var V=q(function(aA){var az=[];u(aA).replace(o,function(aD,aE,aB,aC){az.push(aB?aC.replace(ab,"$1"):(aE||aD))});return az});function F(az){if(az!=null){try{return ag.call(az)}catch(aA){}try{return(az+"")}catch(aA){}}return""}function q(aA,aB){if(typeof aA!="function"||(aB&&typeof aB!="function")){throw new TypeError(A)}var az=function(){var aE=arguments,aF=aB?aB.apply(this,aE):aE[0],aD=az.cache;if(aD.has(aF)){return aD.get(aF)}var aC=aA.apply(this,aE);az.cache=aD.set(aF,aC);return aC};az.cache=new (q.Cache||t);return az}q.Cache=t;function au(aA,az){return aA===az||(aA!==aA&&az!==az)}function I(aA){var az=am(aA)?Q.call(aA):"";return az==ai||az==B}function am(aA){var az=typeof aA;return !!aA&&(az=="object"||az=="function")}function p(aA){if(!am(aA)){return false}var az=(I(aA)||Z(aA))?G:at;return az.test(F(aA))}function u(az){return az==null?"":ae(az)}h.exports=V}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"lodash._basetostring":2}],4:[function(q,g,G){var p=q("lodash._stringtopath");var A=1/0;var D="[object Function]",B="[object GeneratorFunction]",z="[object Symbol]";var F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/;var w=Object.prototype;var o=w.toString;function C(H){return v(H)?H:p(H)}function m(J,H){if(v(J)){return false}var I=typeof J;if(I=="number"||I=="symbol"||I=="boolean"||J==null||h(J)){return true}return E.test(J)||!F.test(J)||(H!=null&&J in Object(H))}function s(I){if(typeof I=="string"||h(I)){return I}var H=(I+"");return(H=="0"&&(1/I)==-A)?"-0":H}var v=Array.isArray;function e(I){var H=t(I)?o.call(I):"";return H==D||H==B}function t(I){var H=typeof I;return !!I&&(H=="object"||H=="function")}function n(H){return !!H&&typeof H=="object"}function h(H){return typeof H=="symbol"||(n(H)&&o.call(H)==z)}function u(J,M,H){M=m(M,J)?[M]:C(M);var I=-1,K=M.length;if(!K){J=undefined;K=1}while(++I<K){var L=J==null?undefined:J[s(M[I])];if(L===undefined){I=K;L=H}J=e(L)?L.call(J):L}return J}g.exports=u},{"lodash._stringtopath":3}],5:[function(g,h,e){h.exports={version:"1.4.0-alpha.05"}},{}],6:[function(m,n,e){if(typeof Uint8Array!=="undefined"){crossfilter_array8=function(q){return new Uint8Array(q)};crossfilter_array16=function(q){return new Uint16Array(q)};crossfilter_array32=function(q){return new Uint32Array(q)};crossfilter_arrayLengthen=function(t,q){if(t.length>=q){return t}var s=new t.constructor(q);s.set(t);return s};crossfilter_arrayWiden=function(t,q){var s;switch(q){case 16:s=crossfilter_array16(t.length);break;case 32:s=crossfilter_array32(t.length);break;default:throw new Error("invalid array width!")}s.set(t);return s}}function h(t){var s=new Array(t),q=-1;while(++q<t){s[q]=0}return s}function p(t,q){var s=t.length;while(s<q){t[s++]=0}return t}function g(s,q){if(q>32){throw new Error("invalid array width!")}return s}function o(q){this.length=q;this.subarrays=1;this.width=8;this.masks={0:0};this[0]=crossfilter_array8(q)}o.prototype.lengthen=function(t){var s,q;for(s=0,q=this.subarrays;s<q;++s){this[s]=crossfilter_arrayLengthen(this[s],t)}this.length=t};o.prototype.add=function(){var s,t,v,u,q;for(u=0,q=this.subarrays;u<q;++u){s=this.masks[u];t=this.width-(32*u);v=~s&-~s;if(t>=32&&!v){continue}if(t<32&&(v&(1<<t))){this[u]=crossfilter_arrayWiden(this[u],t<<=1);this.width=32*u+t}this.masks[u]|=v;return{offset:u,one:v}}this[this.subarrays]=crossfilter_array8(this.length);this.masks[this.subarrays]=1;this.width+=8;return{offset:this.subarrays++,one:1}};o.prototype.copy=function(s,u){var t,q;for(t=0,q=this.subarrays;t<q;++t){this[t][s]=this[t][u]}};o.prototype.truncate=function(u){var t,q;for(t=0,q=this.subarrays;t<q;++t){for(var s=this.length-1;s>=u;s--){this[t][s]=0}this[t].length=u}this.length=u};o.prototype.zero=function(t){var s,q;for(s=0,q=this.subarrays;s<q;++s){if(this[s][t]){return false}}return true};o.prototype.zeroExcept=function(v,u,t){var s,q;for(s=0,q=this.subarrays;s<q;++s){if(s===u?this[s][v]&t:this[s][v]){return false}}return true};o.prototype.zeroExceptMask=function(u,s){var t,q;for(t=0,q=this.subarrays;t<q;++t){if(this[t][u]&s[t]){return false}}return true};o.prototype.only=function(v,u,t){var s,q;for(s=0,q=this.subarrays;s<q;++s){if(this[s][v]!=(s===u?t:0)){return false}}return true};o.prototype.onlyExcept=function(A,z,v,u,w){var s;var t,q;for(t=0,q=this.subarrays;t<q;++t){s=this[t][A];if(t===z){s&=v}if(s!=(t===u?w:0)){return false}}return true};n.exports={array8:h,array16:h,array32:h,arrayLengthen:p,arrayWiden:g,bitarray:o}},{}],7:[function(h,n,g){var e=h("./identity");function m(o){function p(t,s,w,v){while(w<v){var u=w+v>>>1;if(o(t[u])<s){w=u+1}else{v=u}}return w}function q(t,s,w,v){while(w<v){var u=w+v>>>1;if(s<o(t[u])){v=u}else{w=u+1}}return w}q.right=q;q.left=p;return q}n.exports=m(e);n.exports.by=m},{"./identity":12}],8:[function(n,e,F){var h=n("./array");var q=n("./filter");var D=n("./identity");var B=n("./null");var w=n("./zero");var A=n("./heapselect");var u=n("./heap");var E=n("./bisect");var m=n("./insertionsort");var z=n("./permute");var s=n("./quicksort");var t=n("./reduce");var o=n("./../package.json");var p=n("lodash.result");F.crossfilter=g;F.crossfilter.heap=u;F.crossfilter.heapselect=A;F.crossfilter.bisect=E;F.crossfilter.insertionsort=m;F.crossfilter.permute=z;F.crossfilter.quicksort=s;F.crossfilter.version=o.version;function g(){var S={add:W,remove:K,dimension:J,groupAll:V,size:Z,all:T,onChange:O,isElementFiltered:R};var L=[],I=0,H,U=[],M=[],P=[],Q=[];H=new h.bitarray(0);function W(ab){var ac=I,aa=ab.length;if(aa){L=L.concat(ab);H.lengthen(I+=aa);M.forEach(function(ad){ad(ab,ac,aa)});N("dataAdded")}return S}function K(){var ac=v(I,I),ad=[];for(var ab=0,aa=0;ab<I;++ab){if(!H.zero(ab)){ac[ab]=aa++}else{ad.push(ab)}}U.forEach(function(ae){ae(-1,-1,[],ad,true)});P.forEach(function(ae){ae(ac)});for(var ab=0,aa=0;ab<I;++ab){if(!H.zero(ab)){if(ab!==aa){H.copy(aa,ab),L[aa]=L[ab]}++aa}}L.length=I=aa;H.truncate(aa);N("dataRemoved")}function R(ac,ad){var ag,ae,af,aa,ab=Array(H.subarrays);for(ag=0;ag<H.subarrays;ag++){ab[ag]=~0}if(ad){for(ae=0,aa=ad.length;ae<aa;ae++){af=ad[ae].id();ab[af>>7]&=~(1<<(af&63))}}return H.zeroExceptMask(ac,ab)}function J(aH,ay){if(typeof aH==="string"){var ae=aH;aH=function(aT){return p(aT,ae)}}var aJ={filter:aA,filterExact:ag,filterRange:at,filterFunction:aP,filterAll:ac,top:ai,bottom:aa,group:ap,groupAll:aD,dispose:ar,remove:ar,accessor:aH,id:function(){return aC}};var aj,ab,aE,aC,aS,az,aq,aR,av,aB,an,ao,am,ah,af,aw,aQ=s.by(function(aT){return av[aT]}),aK=q.filterAll,al,aG=[],aO=[],aF=0,ak=0,aI=0;M.unshift(aM);M.push(au);P.push(ax);var aL=H.add();aE=aL.offset;aj=aL.one;ab=~aj;aC=(aE<<7)|(Math.log(aj)/Math.log(2));aM(L,0,I);au(L,0,I);function aM(a5,aZ,aY){if(ay){aI=0;aU=0;k=[];for(i=0;i<a5.length;i++){for(aU=0,k=aH(a5[i]);aU<k.length;aU++){aI++}}av=[];ao=C(a5.length);ah=v(aI,1);aw=[];var a4=C(aI);for(l=0,i=0;i<a5.length;i++){k=aH(a5[i]);if(!k.length){ao[i]=0;aw.push(i);continue}ao[i]=k.length;for(aU=0;aU<k.length;aU++){av.push(k[aU]);a4[l]=i;l++}}var aV=aQ(C(aI),0,aI);av=z(av,aV);aB=z(a4,aV)}else{av=a5.map(aH);aB=aQ(C(aY),0,aY);av=z(av,aB)}if(ay){aY=aI}var aT=aK(av),a0=aT[0],a3=aT[1];if(al){for(i=0;i<aY;++i){if(!al(av[i],i)){H[aE][aB[i]+aZ]|=aj;if(ay){ah[i]=1}}}}else{for(i=0;i<a0;++i){H[aE][aB[i]+aZ]|=aj;if(ay){ah[i]=1}}for(i=a3;i<aY;++i){H[aE][aB[i]+aZ]|=aj;if(ay){ah[i]=1}}}if(!aZ){aS=av;az=aB;an=ao;am=ah;aF=a0;ak=a3;return}var a2=aS,a1=az,aX=am;i0=0,i1=0;if(ay){old_n0=aZ;aZ=a2.length;aY=aI}aS=ay?new Array(aZ+aY):new Array(I);az=ay?new Array(aZ+aY):v(I,I);if(ay){am=v(aZ+aY,1)}if(ay){var aW=an.length;an=h.arrayLengthen(an,I);for(var aU=0;aU+aW<I;aU++){an[aU+aW]=ao[aU]}}for(i=0;i0<aZ&&i1<aY;++i){if(a2[i0]<av[i1]){aS[i]=a2[i0];if(ay){am[i]=aX[i0]}az[i]=a1[i0++]}else{aS[i]=av[i1];if(ay){am[i]=aX[i1]}az[i]=aB[i1++]+(ay?old_n0:aZ)}}for(;i0<aZ;++i0,++i){aS[i]=a2[i0];if(ay){am[i]=aX[i0]}az[i]=a1[i0]}for(;i1<aY;++i1,++i){aS[i]=av[i1];if(ay){am[i]=aX[i1]}az[i]=aB[i1]+(ay?old_n0:aZ)}aT=aK(aS),aF=aT[0],ak=aT[1]}function au(aU,aV,aT){aG.forEach(function(aW){aW(av,aB,aV,aT)});av=aB=null}function ax(aT){for(var aW=0,aV=0,aU;aW<I;++aW){if(!H.zero(aU=az[aW])){if(aW!==aV){aS[aV]=aS[aW]}az[aV]=aT[aU];++aV}}aS.length=aV;while(aV<I){az[aV++]=0}var aX=aK(aS);aF=aX[0],ak=aX[1]}function aN(aU){var a1=aU[0],a4=aU[1];if(al){al=null;ad(function(a6,a5){return a1<=a5&&a5<a4},aU[0]===0&&aU[1]===az.length);aF=a1;ak=a4;return aJ}var aX,aW,aV,a0=[],aY=[],a3=[],a2=[];if(a1<aF){for(aX=a1,aW=Math.min(aF,a4);aX<aW;++aX){a0.push(az[aX]);a3.push(aX)}}else{if(a1>aF){for(aX=aF,aW=Math.min(a1,ak);aX<aW;++aX){aY.push(az[aX]);a2.push(aX)}}}if(a4>ak){for(aX=Math.max(a1,ak),aW=a4;aX<aW;++aX){a0.push(az[aX]);a3.push(aX)}}else{if(a4<ak){for(aX=Math.max(aF,a4),aW=ak;aX<aW;++aX){aY.push(az[aX]);a2.push(aX)}}}if(!ay){for(aX=0;aX<a0.length;aX++){H[aE][a0[aX]]^=aj}for(aX=0;aX<aY.length;aX++){H[aE][aY[aX]]^=aj}}else{var aT=[];var aZ=[];for(aX=0;aX<a0.length;aX++){an[a0[aX]]++;am[a3[aX]]=0;if(an[a0[aX]]===1){H[aE][a0[aX]]^=aj;aT.push(a0[aX])}}for(aX=0;aX<aY.length;aX++){an[aY[aX]]--;am[a2[aX]]=1;if(an[aY[aX]]===0){H[aE][aY[aX]]^=aj;aZ.push(aY[aX])}}a0=aT;aY=aZ;if(aU[0]===0&&aU[1]===az.length){for(aX=0;aX<aw.length;aX++){if((H[aE][aV=aw[aX]]&aj)){H[aE][aV]^=aj;a0.push(aV)}}}else{for(aX=0;aX<aw.length;aX++){if(!(H[aE][aV=aw[aX]]&aj)){H[aE][aV]^=aj;aY.push(aV)}}}}aF=a1;ak=a4;U.forEach(function(a5){a5(aj,aE,a0,aY)});N("filtered");return aJ}function aA(aT){return aT==null?ac():Array.isArray(aT)?at(aT):typeof aT==="function"?aP(aT):ag(aT)}function ag(aT){return aN((aK=q.filterExact(E,aT))(aS))}function at(aT){return aN((aK=q.filterRange(E,aT))(aS))}function ac(){return aN((aK=q.filterAll)(aS))}function aP(aT){al=aT;aK=q.filterAll;ad(aT,false);aF=0;ak=I;return aJ}function ad(aY,a2){var aW,aV,a3,a0=[],aX=[],a4=[],a1=[],aU=az.length;if(!ay){for(aW=0;aW<aU;++aW){if(!(H[aE][aV=az[aW]]&aj)^!!(a3=aY(aS[aW],aW))){if(a3){a0.push(aV)}else{aX.push(aV)}}}}if(ay){for(aW=0;aW<aU;++aW){if(aY(aS[aW],aW)){a0.push(az[aW]);a4.push(aW)}else{aX.push(az[aW]);a1.push(aW)}}}if(!ay){for(aW=0;aW<a0.length;aW++){if(H[aE][a0[aW]]&aj){H[aE][a0[aW]]&=ab}}for(aW=0;aW<aX.length;aW++){if(!(H[aE][aX[aW]]&aj)){H[aE][aX[aW]]|=aj}}}else{var aT=[];var aZ=[];for(aW=0;aW<a0.length;aW++){if(am[a4[aW]]===1){an[a0[aW]]++;am[a4[aW]]=0;if(an[a0[aW]]===1){H[aE][a0[aW]]^=aj;aT.push(a0[aW])}}}for(aW=0;aW<aX.length;aW++){if(am[a1[aW]]===0){an[aX[aW]]--;am[a1[aW]]=1;if(an[aX[aW]]===0){H[aE][aX[aW]]^=aj;aZ.push(aX[aW])}}}a0=aT;aX=aZ;if(a2){for(aW=0;aW<aw.length;aW++){if((H[aE][aV=aw[aW]]&aj)){H[aE][aV]^=aj;a0.push(aV)}}}else{for(aW=0;aW<aw.length;aW++){if(!(H[aE][aV=aw[aW]]&aj)){H[aE][aV]^=aj;aX.push(aV)}}}}U.forEach(function(a5){a5(aj,aE,a0,aX)});N("filtered")}function ai(aU,aT){var aY=[],aW=ak,aV,aX=0;if(aT&&aT>0){aX=aT}while(--aW>=aF&&aU>0){if(H.zero(aV=az[aW])){if(aX>0){--aX}else{aY.push(L[aV]);--aU}}}if(ay){for(aW=0;aW<aw.length&&aU>0;aW++){if(H.zero(aV=aw[aW])){if(aX>0){--aX}else{aY.push(L[aV]);--aU}}}}return aY}function aa(aT,aX){var aY=[],aV,aU,aW=0;if(aX&&aX>0){aW=aX}if(ay){for(aV=0;aV<aw.length&&aT>0;aV++){if(H.zero(aU=aw[aV])){if(aW>0){--aW}else{aY.push(L[aU]);--aT}}}}aV=aF;while(aV<ak&&aT>0){if(H.zero(aU=az[aV])){if(aW>0){--aW}else{aY.push(L[aU]);--aT}}aV++}return aY}function ap(bm){var a0={top:a6,all:aV,reduce:a4,reduceCount:aY,reduceSum:bd,order:bc,orderNatural:bg,size:a8,dispose:bj,remove:bj};aO.push(a0);var bh,aX,a5=8,a2=G(a5),bb=0,a9,bn,aZ,aU,a3,a1=B,bi=B,bf=true,bk=bm===B;if(arguments.length<1){bm=D}U.push(a1);aG.push(a7);P.push(aT);a7(aS,az,0,I);function a7(bs,br,bv,bu){if(ay){n0old=bv;bv=aS.length-bs.length;bu=bs.length}var by=bh,bp=ay?[]:v(bb,a2),bx=aZ,bG=aU,bq=a3,bt=bb,bB=0,bA=0,bC,bo,bF,bE,bD,bw;if(bf){bx=bq=B}if(bf){bG=bq=B}bh=new Array(bb),bb=0;if(ay){aX=bt>1?aX:[]}else{aX=bt>1?h.arrayLengthen(aX,I):v(I,a2)}if(bt){bF=(bo=by[0]).key}while(bA<bu&&!((bE=bm(bs[bA]))>=bE)){++bA}while(bA<bu){if(bo&&bF<=bE){bD=bo,bw=bF;bp[bB]=bb;if(bo=by[++bB]){bF=bo.key}}else{bD={key:bE,value:bq()},bw=bE}bh[bb]=bD;while(bE<=bw){bC=br[bA]+(ay?n0old:bv);if(ay){if(aX[bC]){aX[bC].push(bb)}else{aX[bC]=[bb]}}else{aX[bC]=bb}bD.value=bx(bD.value,L[bC],true);if(!H.zeroExcept(bC,aE,ab)){bD.value=bG(bD.value,L[bC],false)}if(++bA>=bu){break}bE=bm(bs[bA])}bz()}while(bB<bt){bh[bp[bB]=bb]=by[bB++];bz()}if(ay){for(i=0;i<I;i++){if(!aX[i]){aX[i]=[]}}}if(bb>bB){if(ay){aX=z(aX,bp,true)}else{for(bB=0;bB<bv;++bB){aX[bB]=bp[aX[bB]]}}}bC=U.indexOf(a1);if(bb>1){a1=bl;bi=be}else{if(!bb&&bk){bb=1;bh=[{key:null,value:bq()}]}if(bb===1){a1=ba;bi=aW}else{a1=B;bi=B}aX=null}U[bC]=a1;function bz(){if(ay){bb++;return}if(++bb===a2){bp=h.arrayWiden(bp,a5<<=1);aX=h.arrayWiden(aX,a5);a2=G(a5)}}}function aT(){if(bb>1){var bq=bb,bs=bh,br=v(bq,bq);for(var bp=0,bo=0;bp<I;++bp){if(!H.zero(bp)){br[aX[bo]=aX[bp]]=1;++bo}}bh=[],bb=0;for(bp=0;bp<bq;++bp){if(br[bp]){br[bp]=bb++;bh.push(bs[bp])}}if(bb>1){for(var bp=0;bp<bo;++bp){aX[bp]=br[aX[bp]]}}else{aX=null}U[U.indexOf(a1)]=bb>1?(bi=be,a1=bl):bb===1?(bi=aW,a1=ba):bi=a1=B}else{if(bb===1){if(bk){return}for(var bp=0;bp<I;++bp){if(!H.zero(bp)){return}}bh=[],bb=0;U[U.indexOf(a1)]=a1=bi=B}}}function bl(br,bu,bw,bv,bx){if((br===aj&&bu===aE)||bf){return}var bs,bq,bp,bo,bt;if(ay){for(bs=0,bo=bw.length;bs<bo;++bs){if(H.zeroExcept(bp=bw[bs],aE,ab)){for(bq=0;bq<aX[bp].length;bq++){bt=bh[aX[bp][bq]];bt.value=aZ(bt.value,L[bp],false,bq)}}}for(bs=0,bo=bv.length;bs<bo;++bs){if(H.onlyExcept(bp=bv[bs],aE,ab,bu,br)){for(bq=0;bq<aX[bp].length;bq++){bt=bh[aX[bp][bq]];bt.value=aU(bt.value,L[bp],bx,bq)}}}return}for(bs=0,bo=bw.length;bs<bo;++bs){if(H.zeroExcept(bp=bw[bs],aE,ab)){bt=bh[aX[bp]];bt.value=aZ(bt.value,L[bp],false)}}for(bs=0,bo=bv.length;bs<bo;++bs){if(H.onlyExcept(bp=bv[bs],aE,ab,bu,br)){bt=bh[aX[bp]];bt.value=aU(bt.value,L[bp],bx)}}}function ba(bq,bt,bv,bu,bw){if((bq===aj&&bt===aE)||bf){return}var br,bp,bo,bs=bh[0];for(br=0,bo=bv.length;br<bo;++br){if(H.zeroExcept(bp=bv[br],aE,ab)){bs.value=aZ(bs.value,L[bp],false)}}for(br=0,bo=bu.length;br<bo;++br){if(H.onlyExcept(bp=bu[br],aE,ab,bt,bq)){bs.value=aU(bs.value,L[bp],bw)}}}function be(){var bp,bo,bq;for(bp=0;bp<bb;++bp){bh[bp].value=a3()}if(ay){for(bp=0;bp<I;++bp){for(bo=0;bo<aX[bp].length;bo++){bq=bh[aX[bp][bo]];bq.value=aZ(bq.value,L[bp],true,bo)}}for(bp=0;bp<I;++bp){if(!H.zeroExcept(bp,aE,ab)){for(bo=0;bo<aX[bp].length;bo++){bq=bh[aX[bp][bo]];bq.value=aU(bq.value,L[bp],false,bo)}}}return}for(bp=0;bp<I;++bp){bq=bh[aX[bp]];bq.value=aZ(bq.value,L[bp],true)}for(bp=0;bp<I;++bp){if(!H.zeroExcept(bp,aE,ab)){bq=bh[aX[bp]];bq.value=aU(bq.value,L[bp],false)}}}function aW(){var bo,bp=bh[0];bp.value=a3();for(bo=0;bo<I;++bo){bp.value=aZ(bp.value,L[bo],true)}for(bo=0;bo<I;++bo){if(!H.zeroExcept(bo,aE,ab)){bp.value=aU(bp.value,L[bo],false)}}}function aV(){if(bf){bi(),bf=false}return bh}function a6(bo){var bp=a9(aV(),0,bh.length,bo);return bn.sort(bp,0,bp.length)}function a4(bq,bo,bp){aZ=bq;aU=bo;a3=bp;bf=true;return a0}function aY(){return a4(t.reduceIncrement,t.reduceDecrement,w)}function bd(bo){return a4(t.reduceAdd(bo),t.reduceSubtract(bo),w)}function bc(bp){a9=A.by(bo);bn=u.by(bo);function bo(bq){return bp(bq.value)}return a0}function bg(){return bc(D)}function a8(){return bb}function bj(){var bo=U.indexOf(a1);if(bo>=0){U.splice(bo,1)}bo=aG.indexOf(a7);if(bo>=0){aG.splice(bo,1)}bo=P.indexOf(aT);if(bo>=0){P.splice(bo,1)}return a0}return aY().orderNatural()}function aD(){var aU=ap(B),aT=aU.all;delete aU.all;delete aU.top;delete aU.order;delete aU.orderNatural;delete aU.size;aU.value=function(){return aT()[0].value};return aU}function ar(){aO.forEach(function(aU){aU.dispose()});var aT=M.indexOf(aM);if(aT>=0){M.splice(aT,1)}aT=M.indexOf(au);if(aT>=0){M.splice(aT,1)}aT=P.indexOf(ax);if(aT>=0){P.splice(aT,1)}H.masks[aE]&=ab;return ac()}return aJ}function V(){var ak={reduce:af,reduceCount:am,reduceSum:aj,value:ah,dispose:al,remove:al};var ab,ac,ag,ai,aa=true;U.push(ad);M.push(an);an(L,0,I);function an(ap,aq){var ao;if(aa){return}for(ao=aq;ao<I;++ao){ab=ac(ab,L[ao],true);if(!H.zero(ao)){ab=ag(ab,L[ao],false)}}}function ad(au,ap,at,av,ar){var aq,ao,aw;if(aa){return}for(aq=0,aw=at.length;aq<aw;++aq){if(H.zero(ao=at[aq])){ab=ac(ab,L[ao],ar)}}for(aq=0,aw=av.length;aq<aw;++aq){if(H.only(ao=av[aq],ap,au)){ab=ag(ab,L[ao],ar)}}}function ae(){var ao;ab=ai();for(ao=0;ao<I;++ao){ab=ac(ab,L[ao],true);if(!H.zero(ao)){ab=ag(ab,L[ao],false)}}}function af(aq,ao,ap){ac=aq;ag=ao;ai=ap;aa=true;return ak}function am(){return af(t.reduceIncrement,t.reduceDecrement,w)}function aj(ao){return af(t.reduceAdd(ao),t.reduceSubtract(ao),w)}function ah(){if(aa){ae(),aa=false}return ab}function al(){var ao=U.indexOf(ad);if(ao>=0){U.splice(ao)}ao=M.indexOf(an);if(ao>=0){M.splice(ao)}return ak}return am()}function Z(){return I}function T(){return L}function O(aa){if(typeof aa!=="function"){console.warn("onChange callback parameter must be a function!");return}Q.push(aa);return function(){Q.splice(Q.indexOf(aa),1)}}function N(aa){for(var ab=0;ab<Q.length;ab++){Q[ab](aa)}}return arguments.length?W(arguments[0]):S}function v(I,H){return(H<257?h.array8:H<65537?h.array16:h.array32)(I)}function C(J){var H=v(J,J);for(var I=-1;++I<J;){H[I]=I}return H}function G(H){return H===8?256:H===16?65536:4294967296}},{"./../package.json":5,"./array":6,"./bisect":7,"./filter":9,"./heap":10,"./heapselect":11,"./identity":12,"./insertionsort":13,"./null":14,"./permute":15,"./quicksort":16,"./reduce":17,"./zero":18,"lodash.result":4}],9:[function(m,n,g){function h(q,p){return function(s){var t=s.length;return[q.left(s,p,0,t),q.right(s,p,0,t)]}}function e(t,q){var s=q[0],p=q[1];return function(u){var v=u.length;return[t.left(u,s,0,v),t.left(u,p,0,v)]}}function o(p){return[0,p.length]}n.exports={filterExact:h,filterRange:e,filterAll:o}},{}],10:[function(m,n,g){var e=m("./identity");function h(s){function o(t,w,u){var z=u-w,v=(z>>>1)+1;while(--v>0){p(t,v,z,w)}return t}function q(u,z,v){var A=v-z,w;while(--A>0){w=u[z],u[z]=u[z+A],u[z+A]=w,p(u,1,A,z)}return u}function p(u,v,B,w){var z=u[--w+v],t=s(z),A;while((A=v<<1)<=B){if(A<B&&s(u[w+A])>s(u[w+A+1])){A++}if(t<=s(u[w+A])){break}u[w+v]=u[w+A];v=A}u[w+v]=z}o.sort=q;return o}n.exports=h(e);n.exports.by=h},{"./identity":12}],11:[function(m,n,h){var e=m("./identity");var g=m("./heap");function o(s){var q=g.by(s);function p(C,A,t,u){var z=new Array(u=Math.min(t-A,u)),v,w,D,B;for(w=0;w<u;++w){z[w]=C[A++]}q(z,0,u);if(A<t){v=s(z[0]);do{if(D=s(B=C[A])>v){z[0]=B;v=s(q(z,0,u)[0])}}while(++A<t)}return z}return p}n.exports=o(e);n.exports.by=o},{"./heap":10,"./identity":12}],12:[function(h,m,g){function e(n){return n}m.exports=e},{}],13:[function(m,n,h){var g=m("./identity");function e(p){function o(s,A,v){for(var z=A+1;z<v;++z){for(var u=z,w=s[z],q=p(w);u>A&&p(s[u-1])>q;--u){s[u]=s[u-1]}s[u]=w}return s}return o}n.exports=e(g);n.exports.by=e},{"./identity":12}],14:[function(g,h,e){function m(){return null}h.exports=m},{}],15:[function(g,h,e){function m(u,p,o){for(var q=0,t=p.length,s=o?JSON.parse(JSON.stringify(u)):new Array(t);q<t;++q){s[q]=u[p[q]]}return s}h.exports=m},{}],16:[function(m,n,h){var g=m("./identity");var p=m("./insertionsort");function e(t){var q=p.by(t);function s(v,z,w){return(w-z<o?q:u)(v,z,w)}function u(ab,H,z){var B=(z-H)/6|0,R=H+B,M=z-1-B,P=H+z-1>>1,Q=P-B,N=P+B;var G=ab[R],Z=t(G),F=ab[Q],W=t(F),D=ab[P],V=t(D),C=ab[N],U=t(C),A=ab[M],T=t(A);var I;if(Z>W){I=G,G=F,F=I,I=Z,Z=W,W=I}if(U>T){I=C,C=A,A=I,I=U,U=T,T=I}if(Z>V){I=G,G=D,D=I,I=Z,Z=V,V=I}if(W>V){I=F,F=D,D=I,I=W,W=V,V=I}if(Z>U){I=G,G=C,C=I,I=Z,Z=U,U=I}if(V>U){I=D,D=C,C=I,I=V,V=U,U=I}if(W>T){I=F,F=A,A=I,I=W,W=T,T=I}if(W>V){I=F,F=D,D=I,I=W,W=V,V=I}if(U>T){I=C,C=A,A=I,I=U,U=T,T=I}var ad=F,L=W,aa=C,J=U;ab[R]=G;ab[Q]=ab[H];ab[P]=D;ab[N]=ab[z-1];ab[M]=A;var O=H+1,ac=z-2;var w=L<=J&&L>=J;if(w){for(var S=O;S<=ac;++S){var v=ab[S],K=t(v);if(K<L){if(S!==O){ab[S]=ab[O];ab[O]=v}++O}else{if(K>L){while(true){var E=t(ab[ac]);if(E>L){ac--;continue}else{if(E<L){ab[S]=ab[O];ab[O++]=ab[ac];ab[ac--]=v;break}else{ab[S]=ab[ac];ab[ac--]=v;break}}}}}}}else{for(var S=O;S<=ac;S++){var v=ab[S],K=t(v);if(K<L){if(S!==O){ab[S]=ab[O];ab[O]=v}++O}else{if(K>J){while(true){var E=t(ab[ac]);if(E>J){ac--;if(ac<S){break}continue}else{if(E<L){ab[S]=ab[O];ab[O++]=ab[ac];ab[ac--]=v}else{ab[S]=ab[ac];ab[ac--]=v}break}}}}}}ab[H]=ab[O-1];ab[O-1]=ad;ab[z-1]=ab[ac+1];ab[ac+1]=aa;s(ab,H,O-1);s(ab,ac+2,z);if(w){return ab}if(O<R&&ac>M){var ae,E;while((ae=t(ab[O]))<=L&&ae>=L){++O}while((E=t(ab[ac]))<=J&&E>=J){--ac}for(var S=O;S<=ac;S++){var v=ab[S],K=t(v);if(K<=L&&K>=L){if(S!==O){ab[S]=ab[O];ab[O]=v}O++}else{if(K<=J&&K>=J){while(true){var E=t(ab[ac]);if(E<=J&&E>=J){ac--;if(ac<S){break}continue}else{if(E<L){ab[S]=ab[O];ab[O++]=ab[ac];ab[ac--]=v}else{ab[S]=ab[ac];ab[ac--]=v}break}}}}}}return s(ab,O,ac+1)}return s}var o=32;n.exports=e(g);n.exports.by=e},{"./identity":12,"./insertionsort":13}],17:[function(h,m,e){function g(q){return q+1}function p(q){return q-1}function n(q){return function(t,s){return t+ +q(s)}}function o(q){return function(t,s){return t-q(s)}}m.exports={reduceIncrement:g,reduceDecrement:p,reduceAdd:n,reduceSubtract:o}},{}],18:[function(h,m,e){function g(){return 0}m.exports=g},{}]},{},[1])(1)});jQuery.fn.extend({selectbox:function(a){return this.each(function(){new jQuery.SelectBox(this,a)})}});if(!window.console){var console={log:function(a){}}}jQuery.SelectBox=function(K,f){var b=f||{data_present:true};b.inputClass=b.inputClass||"selectbox";b.containerClass=b.containerClass||"selectbox-wrapper";b.hoverClass=b.hoverClass||"current";b.currentClass=b.selectedClass||"selected";b.debug=b.debug||false;b.set_readonly=z;b.readOnly=false;var q=K.id;var h=-1;var e=false;var J=0;var C=$(K);var A=n(b);var d=t(b);var E=$("<table>").attr("cellSpacing",0).attr("cellPadding",0).append($("<tbody>"));b.data_get_callback=u;b._input=d;b._table=E;b._options=f;b._this=this;var w=false;var F=u(d.attr("id"),E,f);b._data_container=F;if(b.auto_complete==true){I(d,F)}var m=$("<tr>");if(b.auto_complete!=true){var H=$("<td>").attr("valign","top").addClass("column_one").click({table:E,opt:b},function(L){setTimeout(function(){a(L)},10)});m.append(H);H.append($("<span>").addClass("menu_prefix"))}var G=$("<td>").attr("valign","top").addClass("column_two").click({table:E,opt:b},function(L){setTimeout(function(){a(L)},10)});var D=$("<td>").attr("valign","top").addClass("column_three").click({table:E,opt:b},function(L){setTimeout(function(){a(L)},10)});m.append(G).append(D);G.append(d);D.append($("<span>").addClass("menu_ex"));E.append(m);C.hide().before(E).before(A);B(F);$(document.body).click({table:E,hasfocus:J},function(L){if(J!=0){o(L.data.table)}});if(typeof(b.scrollBody)!="undefined"){$(b.scrollBody).scroll({table:E,hasfocus:J},function(L){if(J!=0){o(L.data.table)}})}d.click({table:E},function(L){if(A[0].style.display=="block"&&!w){o(L.data.table);return}w=false}).keydown({table:E},function(L){switch(L.keyCode){case 38:L.preventDefault();s(-1);break;case 40:L.preventDefault();s(1);break;case 13:L.preventDefault();$("li."+b.hoverClass).trigger("click");break;case 27:o(L.data.table);break}}).blur({table:E},function(L){if(A.is(":visible")&&J>0){if(b.debug){console.log("container visible and has focus")}L.data.table.addClass("active")}else{L.data.table.removeClass("active")}});function a(L){if(L.data.opt.readOnly){return}if(A[0].style.display=="none"){e=true;J=1;A.css("min-width",d.width()+110);A.css("max-height",$(window).height()-d.offset().top-d.height()-2);A.slideDown(300)}else{e=false;J=0;A.slideUp("fast")}if(e){L.data.table.addClass("active")}else{L.data.table.removeClass("active")}}function I(O,N){var M=null;var L=$(N);d.autocomplete({delay:0,minLength:0,source:function(Q,P){o();var R=new RegExp($.ui.autocomplete.escapeRegex(Q.term),"i");P(L.children("li").map(function(){var S=$(this).text();if(this.value&&(!Q.term||R.test(S))){return{label:S.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(Q.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:S,option:this}}}))},select:function(S,T){T.item.option.selected=true;var P=$("li."+b.currentClass,A).get(0);var Q=(""+P.id).split("_");var R=Q[Q.length-1];C.val(R);o()},change:function(Q,R){if(!R.item){var S=new RegExp("^"+$.ui.autocomplete.escapeRegex($(this).val())+"$","i"),P=false;L.children("ul").each(function(){if($(this).text().match(S)){this.selected=P=true;M=true;return false}});if(!P&&M){$(this).val("");L.val("");O.data("ui-autocomplete").term="";M=null;return false}}}});d.data("ui-autocomplete")._renderItem=function(P,Q){return $("<li></li>").data("ui-autocomplete-item",Q).append("<a>"+Q.label+"</a>").appendTo(P)}}function o(L){J=0;w=false;A.slideUp("fast");if(L){L.removeClass("active")}}function B(L){A.append(L).hide()}function n(M){var L=document.createElement("div");A=$(L);A.attr("id",q+"_container");A.css("width",M.width);A.addClass(M.containerClass);A.mouseover(function(N){J=2});A.mouseout(function(N){J=-1});return A}function t(M){var L=document.createElement("input");var N=$(L);N.attr("id",q+"_input");N.attr("type","text");if(typeof(M.auto_complete)=="undefined"||M.auto_complete==false){N.attr("readonly","true");N.addClass(M.inputClass)}else{N.attr("autocomplete","on")}N.attr("tabIndex",C.attr("tabindex"));return N}function s(M){var L=$("li",A);if(!L){return}h+=M;if(h<0){h=0}else{if(h>=L.length){h=L.length-1}}L.removeClass(b.hoverClass);$(L[h]).addClass(b.hoverClass)}function g(){var L=$("li."+b.currentClass,A).get(0);var M=(""+L.id).split("_");var N=M[M.length-1];C.val(N);if(d.val()!=$(L).html()){if(typeof(b.change_listener)=="function"){b.change_listener.call(null,$(L).html(),d);if(typeof(b.set_current)=="undefined"||b.set_current==false){return true}}}d.val($(L).html());return true}function v(){return C.val()}function p(){return d.val()}function z(L){b.readOnly=L;if(b.readOnly){$(this._table).find(".selectbox").addClass("selectbox_readonly");$(this._table).find(".menu_ex").addClass("selectbox_readonly");$(this._table).find(".menu_prefix").addClass("selectbox_readonly")}else{$(this._table).find(".selectbox").removeClass("selectbox_readonly");$(this._table).find(".menu_ex").removeClass("selectbox_readonly");$(this._table).find(".menu_prefix").removeClass("selectbox_readonly")}}function u(Q,O,M,P){var R=new Array();var L=P;$(L).empty();if(!L){L=document.createElement("ul");return L}C.children("option").each(function(){var S=document.createElement("li");S.setAttribute("id",Q+"_"+$(this).val());S.innerHTML=$(this).html();if($(this).is(":selected")){d.val($(this).html());$(S).addClass(M.currentClass)}L.appendChild(S);$(S).mouseover(function(T){J=1;if(M.debug){console.log("over on : "+this.id)}jQuery(T.target,A).addClass(M.hoverClass)}).mouseout(function(T){J=-1;if(M.debug){console.log("out on : "+this.id)}jQuery(T.target,A).removeClass(M.hoverClass)}).click(function(T){var U=$("li."+M.hoverClass,A).get(0);if(M.debug){console.log("click on :"+this.id)}$("li."+M.currentClass).removeClass(M.currentClass);$(this).addClass(M.currentClass);g();o(O)})});if(M.set_current==true){var N=$("li",A).html();d.val(N)}return L}return f};(function(a){var b={set:{colors:1,values:1,backgroundColor:1,scaleColors:1,normalizeFunction:1,focus:1},get:{selectedRegions:1,selectedMarkers:1,mapObject:1,regionName:1}};a.fn.vectorMap=function(e){var f,d,f=this.children(".jvectormap-container").data("mapObject");if(e==="addMap"){jvm.Map.maps[arguments[1]]=arguments[2]}else{if((e==="set"||e==="get")&&b[e][arguments[1]]){d=arguments[1].charAt(0).toUpperCase()+arguments[1].substr(1);return f[e+d].apply(f,Array.prototype.slice.call(arguments,2))}else{e=e||{};e.container=this;f=new jvm.Map(e)}}return this}})(jQuery);
/* Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(d){var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],m=Array.prototype.slice,n,b;if(d.event.fixHooks){for(var f=e.length;f;){d.event.fixHooks[e[--f]]=d.event.mouseHooks}}var g=d.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var q=o.length;q;){this.addEventListener(o[--q],p,false)}}else{this.onmousewheel=p}d.data(this,"mousewheel-line-height",g.getLineHeight(this));d.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var q=o.length;q;){this.removeEventListener(o[--q],p,false)}}else{this.onmousewheel=null}},getLineHeight:function(q){return parseInt(d(q)["offsetParent" in d.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(q){return d(q).height()},settings:{adjustOldDeltas:true}};d.fn.extend({mousewheel:function(q){return q?this.bind("mousewheel",q):this.trigger("mousewheel")},unmousewheel:function(q){return this.unbind("mousewheel",q)}});function p(q){var t=q||window.event,z=m.call(arguments,1),B=0,v=0,u=0,w=0;q=d.event.fix(t);q.type="mousewheel";if("detail" in t){u=t.detail*-1}if("wheelDelta" in t){u=t.wheelDelta}if("wheelDeltaY" in t){u=t.wheelDeltaY}if("wheelDeltaX" in t){v=t.wheelDeltaX*-1}if("axis" in t&&t.axis===t.HORIZONTAL_AXIS){v=u*-1;u=0}B=u===0?v:u;if("deltaY" in t){u=t.deltaY*-1;B=u}if("deltaX" in t){v=t.deltaX;if(u===0){B=v*-1}}if(u===0&&v===0){return}if(t.deltaMode===1){var A=d.data(this,"mousewheel-line-height");B*=A;u*=A;v*=A}else{if(t.deltaMode===2){var s=d.data(this,"mousewheel-page-height");B*=s;u*=s;v*=s}}w=Math.max(Math.abs(u),Math.abs(v));if(!b||w<b){b=w;if(a(t,w)){b/=40}}if(a(t,w)){B/=40;v/=40;u/=40}B=Math[B>=1?"floor":"ceil"](B/b);v=Math[v>=1?"floor":"ceil"](v/b);u=Math[u>=1?"floor":"ceil"](u/b);q.deltaX=v;q.deltaY=u;q.deltaFactor=b;q.deltaMode=0;z.unshift(q,B,v,u);if(n){clearTimeout(n)}n=setTimeout(h,200);return(d.event.dispatch||d.event.handle).apply(this,z)}function h(){b=null}function a(s,q){return g.settings.adjustOldDeltas&&s.type==="mousewheel"&&q%120===0}}));var jvm={inherits:function(d,b){function a(){}a.prototype=b.prototype;d.prototype=new a();d.prototype.constructor=d;d.parentClass=b},mixin:function(b,a){var d;for(d in a.prototype){if(a.prototype.hasOwnProperty(d)){b.prototype[d]=a.prototype[d]}}},min:function(a){var d=Number.MAX_VALUE,b;if(a instanceof Array){for(b=0;b<a.length;b++){if(a[b]<d){d=a[b]}}}else{for(b in a){if(a[b]<d){d=a[b]}}}return d},max:function(b){var a=Number.MIN_VALUE,d;if(b instanceof Array){for(d=0;d<b.length;d++){if(b[d]>a){a=b[d]}}}else{for(d in b){if(b[d]>a){a=b[d]}}}return a},keys:function(a){var d=[],b;for(b in a){d.push(b)}return d},values:function(b){var a=[],e,d;for(d=0;d<arguments.length;d++){b=arguments[d];for(e in b){a.push(b[e])}}return a},whenImageLoaded:function(d){var b=new jvm.$.Deferred(),a=jvm.$("<img/>");a.error(function(){b.reject()}).load(function(){b.resolve(a)});a.attr("src",d);return b},isImageUrl:function(a){return/\.\w{3,4}$/.test(a)}};jvm.$=jQuery;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d,e){var b;if(this==null){throw new TypeError('"this" is null or not defined')}var f=Object(this);var a=f.length>>>0;if(a===0){return -1}var g=+e||0;if(Math.abs(g)===Infinity){g=0}if(g>=a){return -1}b=Math.max(g>=0?g:a-Math.abs(g),0);while(b<a){if(b in f&&f[b]===d){return b}b++}return -1}}jvm.AbstractElement=function(b,a){this.node=this.createElement(b);this.name=b;this.properties={};if(a){this.set(a)}};jvm.AbstractElement.prototype.set=function(d,b){var a;if(typeof d==="object"){for(a in d){this.properties[a]=d[a];this.applyAttr(a,d[a])}}else{this.properties[d]=b;this.applyAttr(d,b)}};jvm.AbstractElement.prototype.get=function(a){return this.properties[a]};jvm.AbstractElement.prototype.applyAttr=function(b,a){this.node.setAttribute(b,a)};jvm.AbstractElement.prototype.remove=function(){jvm.$(this.node).remove()};jvm.AbstractCanvasElement=function(b,d,a){this.container=b;this.setSize(d,a);this.rootElement=new jvm[this.classPrefix+"GroupElement"]();this.node.appendChild(this.rootElement.node);this.container.appendChild(this.node)};jvm.AbstractCanvasElement.prototype.add=function(a,b){b=b||this.rootElement;b.add(a);a.canvas=this};jvm.AbstractCanvasElement.prototype.addPath=function(a,d,e){var b=new jvm[this.classPrefix+"PathElement"](a,d);this.add(b,e);return b};jvm.AbstractCanvasElement.prototype.addCircle=function(a,d,e){var b=new jvm[this.classPrefix+"CircleElement"](a,d);this.add(b,e);return b};jvm.AbstractCanvasElement.prototype.addImage=function(a,d,e){var b=new jvm[this.classPrefix+"ImageElement"](a,d);this.add(b,e);return b};jvm.AbstractCanvasElement.prototype.addText=function(a,d,e){var b=new jvm[this.classPrefix+"TextElement"](a,d);this.add(b,e);return b};jvm.AbstractCanvasElement.prototype.addGroup=function(b){var a=new jvm[this.classPrefix+"GroupElement"]();if(b){b.node.appendChild(a.node)}else{this.node.appendChild(a.node)}a.canvas=this;return a};jvm.AbstractShapeElement=function(b,a,d){this.style=d||{};this.style.current=this.style.current||{};this.isHovered=false;this.isSelected=false;this.updateStyle()};jvm.AbstractShapeElement.prototype.setStyle=function(d,b){var a={};if(typeof d==="object"){a=d}else{a[d]=b}jvm.$.extend(this.style.current,a);this.updateStyle()};jvm.AbstractShapeElement.prototype.updateStyle=function(){var a={};jvm.AbstractShapeElement.mergeStyles(a,this.style.initial);jvm.AbstractShapeElement.mergeStyles(a,this.style.current);if(this.isHovered){jvm.AbstractShapeElement.mergeStyles(a,this.style.hover)}if(this.isSelected){jvm.AbstractShapeElement.mergeStyles(a,this.style.selected);if(this.isHovered){jvm.AbstractShapeElement.mergeStyles(a,this.style.selectedHover)}}this.set(a)};jvm.AbstractShapeElement.mergeStyles=function(b,d){var a;d=d||{};for(a in d){if(d[a]===null){delete b[a]}else{b[a]=d[a]}}};jvm.SVGElement=function(b,a){jvm.SVGElement.parentClass.apply(this,arguments)};jvm.inherits(jvm.SVGElement,jvm.AbstractElement);jvm.SVGElement.svgns="http://www.w3.org/2000/svg";jvm.SVGElement.prototype.createElement=function(a){return document.createElementNS(jvm.SVGElement.svgns,a)};jvm.SVGElement.prototype.addClass=function(a){this.node.setAttribute("class",a)};jvm.SVGElement.prototype.getElementCtr=function(a){return jvm["SVG"+a]};jvm.SVGElement.prototype.getBBox=function(){return this.node.getBBox()};jvm.SVGGroupElement=function(){jvm.SVGGroupElement.parentClass.call(this,"g")};jvm.inherits(jvm.SVGGroupElement,jvm.SVGElement);jvm.SVGGroupElement.prototype.add=function(a){this.node.appendChild(a.node)};jvm.SVGCanvasElement=function(b,d,a){this.classPrefix="SVG";jvm.SVGCanvasElement.parentClass.call(this,"svg");this.defsElement=new jvm.SVGElement("defs");this.node.appendChild(this.defsElement.node);jvm.AbstractCanvasElement.apply(this,arguments)};jvm.inherits(jvm.SVGCanvasElement,jvm.SVGElement);jvm.mixin(jvm.SVGCanvasElement,jvm.AbstractCanvasElement);jvm.SVGCanvasElement.prototype.setSize=function(b,a){this.width=b;this.height=a;this.node.setAttribute("width",b);this.node.setAttribute("height",a)};jvm.SVGCanvasElement.prototype.applyTransformParams=function(d,b,a){this.scale=d;this.transX=b;this.transY=a;this.rootElement.node.setAttribute("transform","scale("+d+") translate("+b+", "+a+")")};jvm.SVGShapeElement=function(b,a,d){jvm.SVGShapeElement.parentClass.call(this,b,a);jvm.AbstractShapeElement.apply(this,arguments)};jvm.inherits(jvm.SVGShapeElement,jvm.SVGElement);jvm.mixin(jvm.SVGShapeElement,jvm.AbstractShapeElement);jvm.SVGShapeElement.prototype.applyAttr=function(a,d){var e,f,b=this;if(a==="fill"&&jvm.isImageUrl(d)){if(!jvm.SVGShapeElement.images[d]){jvm.whenImageLoaded(d).then(function(g){f=new jvm.SVGElement("image");f.node.setAttributeNS("http://www.w3.org/1999/xlink","href",d);f.applyAttr("x","0");f.applyAttr("y","0");f.applyAttr("width",g[0].width);f.applyAttr("height",g[0].height);e=new jvm.SVGElement("pattern");e.applyAttr("id","image"+jvm.SVGShapeElement.imageCounter);e.applyAttr("x",0);e.applyAttr("y",0);e.applyAttr("width",g[0].width/2);e.applyAttr("height",g[0].height/2);e.applyAttr("viewBox","0 0 "+g[0].width+" "+g[0].height);e.applyAttr("patternUnits","userSpaceOnUse");e.node.appendChild(f.node);b.canvas.defsElement.node.appendChild(e.node);jvm.SVGShapeElement.images[d]=jvm.SVGShapeElement.imageCounter++;b.applyAttr("fill","url(#image"+jvm.SVGShapeElement.images[d]+")")})}else{this.applyAttr("fill","url(#image"+jvm.SVGShapeElement.images[d]+")")}}else{jvm.SVGShapeElement.parentClass.prototype.applyAttr.apply(this,arguments)}};jvm.SVGShapeElement.imageCounter=1;jvm.SVGShapeElement.images={};jvm.SVGPathElement=function(a,b){jvm.SVGPathElement.parentClass.call(this,"path",a,b);this.node.setAttribute("fill-rule","evenodd")};jvm.inherits(jvm.SVGPathElement,jvm.SVGShapeElement);jvm.SVGCircleElement=function(a,b){jvm.SVGCircleElement.parentClass.call(this,"circle",a,b)};jvm.inherits(jvm.SVGCircleElement,jvm.SVGShapeElement);jvm.SVGImageElement=function(a,b){jvm.SVGImageElement.parentClass.call(this,"image",a,b)};jvm.inherits(jvm.SVGImageElement,jvm.SVGShapeElement);jvm.SVGImageElement.prototype.applyAttr=function(a,d){var b=this;if(a=="image"){jvm.whenImageLoaded(d).then(function(e){b.node.setAttributeNS("http://www.w3.org/1999/xlink","href",d);b.width=e[0].width;b.height=e[0].height;b.applyAttr("width",b.width);b.applyAttr("height",b.height);var f=0;if(d.indexOf("marker.png")!==-1){f=15}else{if(d.indexOf("balloon.png")!==-1){f=11}}b.applyAttr("x",b.cx-b.width/2);b.applyAttr("y",b.cy-b.height/2-f);jvm.$(b.node).trigger("imageloaded",[e])})}else{if(a=="cx"){this.cx=d;if(this.width){this.applyAttr("x",d-this.width/2)}}else{if(a=="cy"){this.cy=d;if(this.height){this.applyAttr("y",d-this.height/2)}}else{jvm.SVGImageElement.parentClass.prototype.applyAttr.apply(this,arguments)}}}};jvm.SVGTextElement=function(a,b){jvm.SVGTextElement.parentClass.call(this,"text",a,b)};jvm.inherits(jvm.SVGTextElement,jvm.SVGShapeElement);jvm.SVGTextElement.prototype.applyAttr=function(a,b){if(a==="text"){this.node.textContent=b}else{jvm.SVGTextElement.parentClass.prototype.applyAttr.apply(this,arguments)}};jvm.VMLElement=function(b,a){if(!jvm.VMLElement.VMLInitialized){jvm.VMLElement.initializeVML()}jvm.VMLElement.parentClass.apply(this,arguments)};jvm.inherits(jvm.VMLElement,jvm.AbstractElement);jvm.VMLElement.VMLInitialized=false;jvm.VMLElement.initializeVML=function(){try{if(!document.namespaces.rvml){document.namespaces.add("rvml","urn:schemas-microsoft-com:vml")}jvm.VMLElement.prototype.createElement=function(b){return document.createElement("<rvml:"+b+' class="rvml">')}}catch(a){jvm.VMLElement.prototype.createElement=function(b){return document.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");jvm.VMLElement.VMLInitialized=true};jvm.VMLElement.prototype.getElementCtr=function(a){return jvm["VML"+a]};jvm.VMLElement.prototype.addClass=function(a){jvm.$(this.node).addClass(a)};jvm.VMLElement.prototype.applyAttr=function(a,b){this.node[a]=b};jvm.VMLElement.prototype.getBBox=function(){var a=jvm.$(this.node);return{x:a.position().left/this.canvas.scale,y:a.position().top/this.canvas.scale,width:a.width()/this.canvas.scale,height:a.height()/this.canvas.scale}};jvm.VMLGroupElement=function(){jvm.VMLGroupElement.parentClass.call(this,"group");this.node.style.left="0px";this.node.style.top="0px";this.node.coordorigin="0 0"};jvm.inherits(jvm.VMLGroupElement,jvm.VMLElement);jvm.VMLGroupElement.prototype.add=function(a){this.node.appendChild(a.node)};jvm.VMLCanvasElement=function(b,d,a){this.classPrefix="VML";jvm.VMLCanvasElement.parentClass.call(this,"group");jvm.AbstractCanvasElement.apply(this,arguments);this.node.style.position="absolute"};jvm.inherits(jvm.VMLCanvasElement,jvm.VMLElement);jvm.mixin(jvm.VMLCanvasElement,jvm.AbstractCanvasElement);jvm.VMLCanvasElement.prototype.setSize=function(f,b){var g,a,e,d;this.width=f;this.height=b;this.node.style.width=f+"px";this.node.style.height=b+"px";this.node.coordsize=f+" "+b;this.node.coordorigin="0 0";if(this.rootElement){g=this.rootElement.node.getElementsByTagName("shape");for(e=0,d=g.length;e<d;e++){g[e].coordsize=f+" "+b;g[e].style.width=f+"px";g[e].style.height=b+"px"}a=this.node.getElementsByTagName("group");for(e=0,d=a.length;e<d;e++){a[e].coordsize=f+" "+b;a[e].style.width=f+"px";a[e].style.height=b+"px"}}};jvm.VMLCanvasElement.prototype.applyTransformParams=function(d,b,a){this.scale=d;this.transX=b;this.transY=a;this.rootElement.node.coordorigin=(this.width-b-this.width/100)+","+(this.height-a-this.height/100);this.rootElement.node.coordsize=this.width/d+","+this.height/d};jvm.VMLShapeElement=function(b,a){jvm.VMLShapeElement.parentClass.call(this,b,a);this.fillElement=new jvm.VMLElement("fill");this.strokeElement=new jvm.VMLElement("stroke");this.node.appendChild(this.fillElement.node);this.node.appendChild(this.strokeElement.node);this.node.stroked=false;jvm.AbstractShapeElement.apply(this,arguments)};jvm.inherits(jvm.VMLShapeElement,jvm.VMLElement);jvm.mixin(jvm.VMLShapeElement,jvm.AbstractShapeElement);jvm.VMLShapeElement.prototype.applyAttr=function(a,b){switch(a){case"fill":this.node.fillcolor=b;break;case"fill-opacity":this.fillElement.node.opacity=Math.round(b*100)+"%";break;case"stroke":if(b==="none"){this.node.stroked=false}else{this.node.stroked=true}this.node.strokecolor=b;break;case"stroke-opacity":this.strokeElement.node.opacity=Math.round(b*100)+"%";break;case"stroke-width":if(parseInt(b,10)===0){this.node.stroked=false}else{this.node.stroked=true}this.node.strokeweight=b;break;case"d":this.node.path=jvm.VMLPathElement.pathSvgToVml(b);break;default:jvm.VMLShapeElement.parentClass.prototype.applyAttr.apply(this,arguments)}};jvm.VMLPathElement=function(a,b){var d=new jvm.VMLElement("skew");jvm.VMLPathElement.parentClass.call(this,"shape",a,b);this.node.coordorigin="0 0";d.node.on=true;d.node.matrix="0.01,0,0,0.01,0,0";d.node.offset="0,0";this.node.appendChild(d.node)};jvm.inherits(jvm.VMLPathElement,jvm.VMLShapeElement);jvm.VMLPathElement.prototype.applyAttr=function(a,b){if(a==="d"){this.node.path=jvm.VMLPathElement.pathSvgToVml(b)}else{jvm.VMLShapeElement.prototype.applyAttr.call(this,a,b)}};jvm.VMLPathElement.pathSvgToVml=function(e){var a=0,f=0,d,b;e=e.replace(/(-?\d+)e(-?\d+)/g,"0");return e.replace(/([MmLlHhVvCcSs])\s*((?:-?\d*(?:\.\d+)?\s*,?\s*)+)/g,function(o,n,p,h){p=p.replace(/(\d)-/g,"$1,-").replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/\s+/g,",").split(",");if(!p[0]){p.shift()}for(var m=0,g=p.length;m<g;m++){p[m]=Math.round(100*p[m])}switch(n){case"m":a+=p[0];f+=p[1];return"t"+p.join(",");case"M":a=p[0];f=p[1];return"m"+p.join(",");case"l":a+=p[0];f+=p[1];return"r"+p.join(",");case"L":a=p[0];f=p[1];return"l"+p.join(",");case"h":a+=p[0];return"r"+p[0]+",0";case"H":a=p[0];return"l"+a+","+f;case"v":f+=p[0];return"r0,"+p[0];case"V":f=p[0];return"l"+a+","+f;case"c":d=a+p[p.length-4];b=f+p[p.length-3];a+=p[p.length-2];f+=p[p.length-1];return"v"+p.join(",");case"C":d=p[p.length-4];b=p[p.length-3];a=p[p.length-2];f=p[p.length-1];return"c"+p.join(",");case"s":p.unshift(f-b);p.unshift(a-d);d=a+p[p.length-4];b=f+p[p.length-3];a+=p[p.length-2];f+=p[p.length-1];return"v"+p.join(",");case"S":p.unshift(f+f-b);p.unshift(a+a-d);d=p[p.length-4];b=p[p.length-3];a=p[p.length-2];f=p[p.length-1];return"c"+p.join(",")}return""}).replace(/z/g,"e")};jvm.VMLCircleElement=function(a,b){jvm.VMLCircleElement.parentClass.call(this,"oval",a,b)};jvm.inherits(jvm.VMLCircleElement,jvm.VMLShapeElement);jvm.VMLCircleElement.prototype.applyAttr=function(a,b){switch(a){case"r":this.node.style.width=b*2+"px";this.node.style.height=b*2+"px";this.applyAttr("cx",this.get("cx")||0);this.applyAttr("cy",this.get("cy")||0);break;case"cx":if(!b){return}this.node.style.left=b-(this.get("r")||0)+"px";break;case"cy":if(!b){return}this.node.style.top=b-(this.get("r")||0)+"px";break;default:jvm.VMLCircleElement.parentClass.prototype.applyAttr.call(this,a,b)}};jvm.VectorCanvas=function(b,d,a){this.mode=window.SVGAngle?"svg":"vml";if(this.mode=="svg"){this.impl=new jvm.SVGCanvasElement(b,d,a)}else{this.impl=new jvm.VMLCanvasElement(b,d,a)}this.impl.mode=this.mode;return this.impl};jvm.SimpleScale=function(a){this.scale=a};jvm.SimpleScale.prototype.getValue=function(a){return a};jvm.OrdinalScale=function(a){this.scale=a};jvm.OrdinalScale.prototype.getValue=function(a){return this.scale[a]};jvm.OrdinalScale.prototype.getTicks=function(){var b=[],a;for(a in this.scale){b.push({label:a,value:this.scale[a]})}return b};jvm.NumericScale=function(e,a,b,d){this.scale=[];a=a||"linear";if(e){this.setScale(e)}if(a){this.setNormalizeFunction(a)}if(typeof b!=="undefined"){this.setMin(b)}if(typeof d!=="undefined"){this.setMax(d)}};jvm.NumericScale.prototype={setMin:function(a){this.clearMinValue=a;if(typeof this.normalize==="function"){this.minValue=this.normalize(a)}else{this.minValue=a}},setMax:function(a){this.clearMaxValue=a;if(typeof this.normalize==="function"){this.maxValue=this.normalize(a)}else{this.maxValue=a}},setScale:function(b){var a;this.scale=[];for(a=0;a<b.length;a++){this.scale[a]=[b[a]]}},setNormalizeFunction:function(a){if(a==="polynomial"){this.normalize=function(b){return Math.pow(b,0.2)}}else{if(a==="linear"){delete this.normalize}else{this.normalize=a}}this.setMin(this.clearMinValue);this.setMax(this.clearMaxValue)},getValue:function(d){var g=[],e=0,a,b=0,f;if(typeof this.normalize==="function"){d=this.normalize(d)}for(b=0;b<this.scale.length-1;b++){a=this.vectorLength(this.vectorSubtract(this.scale[b+1],this.scale[b]));g.push(a);e+=a}f=(this.maxValue-this.minValue)/e;for(b=0;b<g.length;b++){g[b]*=f}b=0;d-=this.minValue;while(d-g[b]>=0){d-=g[b];b++}if(b==this.scale.length-1){d=this.vectorToNum(this.scale[b])}else{d=(this.vectorToNum(this.vectorAdd(this.scale[b],this.vectorMult(this.vectorSubtract(this.scale[b+1],this.scale[b]),(d)/(g[b])))))}return d},vectorToNum:function(a){var b=0,d;for(d=0;d<a.length;d++){b+=Math.round(a[d])*Math.pow(256,a.length-d-1)}return b},vectorSubtract:function(e,d){var a=[],b;for(b=0;b<e.length;b++){a[b]=e[b]-d[b]}return a},vectorAdd:function(e,d){var a=[],b;for(b=0;b<e.length;b++){a[b]=e[b]+d[b]}return a},vectorMult:function(b,d){var a=[],e;for(e=0;e<b.length;e++){a[e]=b[e]*d}return a},vectorLength:function(b){var a=0,d;for(d=0;d<b.length;d++){a+=b[d]*b[d]}return Math.sqrt(a)},getTicks:function(){var a=5,f=[this.clearMinValue,this.clearMaxValue],e=f[1]-f[0],n=Math.pow(10,Math.floor(Math.log(e/a)/Math.LN10)),h=a/e*n,g=[],d,b;if(h<=0.15){n*=10}else{if(h<=0.35){n*=5}else{if(h<=0.75){n*=2}}}f[0]=Math.floor(f[0]/n)*n;f[1]=Math.ceil(f[1]/n)*n;d=f[0];while(d<=f[1]){if(d==f[0]){b=this.clearMinValue}else{if(d==f[1]){b=this.clearMaxValue}else{b=d}}g.push({label:d,value:this.getValue(b)});d+=n}return g}};jvm.ColorScale=function(a,b,d,e){jvm.ColorScale.parentClass.apply(this,arguments)};jvm.inherits(jvm.ColorScale,jvm.NumericScale);jvm.ColorScale.prototype.setScale=function(b){var a;for(a=0;a<b.length;a++){this.scale[a]=jvm.ColorScale.rgbToArray(b[a])}};jvm.ColorScale.prototype.getValue=function(a){return jvm.ColorScale.numToRgb(jvm.ColorScale.parentClass.prototype.getValue.call(this,a))};jvm.ColorScale.arrayToRgb=function(a){var b="#",f,e;for(e=0;e<a.length;e++){f=a[e].toString(16);b+=f.length==1?"0"+f:f}return b};jvm.ColorScale.numToRgb=function(a){a=a.toString(16);while(a.length<6){a="0"+a}return"#"+a};jvm.ColorScale.rgbToArray=function(a){a=a.substr(1);return[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)]};jvm.Legend=function(a){this.params=a||{};this.map=this.params.map;this.series=this.params.series;this.body=jvm.$("<div/>");this.body.addClass("jvectormap-legend");if(this.params.cssClass){this.body.addClass(this.params.cssClass)}if(a.vertical){this.map.legendCntVertical.append(this.body)}else{this.map.legendCntHorizontal.append(this.body)}this.render()};jvm.Legend.prototype.render=function(){var g=this.series.scale.getTicks(),e,a=jvm.$("<div/>").addClass("jvectormap-legend-inner"),d,f,b;this.body.html("");if(this.params.title){this.body.append(jvm.$("<div/>").addClass("jvectormap-legend-title").html(this.params.title))}this.body.append(a);for(e=0;e<g.length;e++){d=jvm.$("<div/>").addClass("jvectormap-legend-tick");f=jvm.$("<div/>").addClass("jvectormap-legend-tick-sample");switch(this.series.params.attribute){case"fill":if(jvm.isImageUrl(g[e].value)){f.css("background","url("+g[e].value+")")}else{f.css("background",g[e].value)}break;case"stroke":f.css("background",g[e].value);break;case"image":f.css("background","url("+g[e].value+") no-repeat center center");break;case"r":jvm.$("<div/>").css({"border-radius":g[e].value,border:this.map.params.markerStyle.initial["stroke-width"]+"px "+this.map.params.markerStyle.initial.stroke+" solid",width:g[e].value*2+"px",height:g[e].value*2+"px",background:this.map.params.markerStyle.initial.fill}).appendTo(f);break}d.append(f);b=g[e].label;if(this.params.labelRender){b=this.params.labelRender(b)}d.append(jvm.$("<div>"+b+" </div>").addClass("jvectormap-legend-tick-text"));a.append(d)}a.append(jvm.$("<div/>").css("clear","both"))};jvm.DataSeries=function(e,b,d){var a;e=e||{};e.attribute=e.attribute||"fill";this.elements=b;this.params=e;this.map=d;if(e.attributes){this.setAttributes(e.attributes)}if(jvm.$.isArray(e.scale)){a=(e.attribute==="fill"||e.attribute==="stroke")?jvm.ColorScale:jvm.NumericScale;this.scale=new a(e.scale,e.normalizeFunction,e.min,e.max)}else{if(e.scale){this.scale=new jvm.OrdinalScale(e.scale)}else{this.scale=new jvm.SimpleScale(e.scale)}}this.values=e.values||{};this.setValues(this.values);if(this.params.legend){this.legend=new jvm.Legend($.extend({map:this.map,series:this},this.params.legend))}};jvm.DataSeries.prototype={setAttributes:function(d,a){var b=d,e;if(typeof d=="string"){if(this.elements[d]){this.elements[d].setStyle(this.params.attribute,a)}}else{for(e in b){if(this.elements[e]){this.elements[e].element.setStyle(this.params.attribute,b[e])}}}},setValues:function(b){var a=-Number.MAX_VALUE,e=Number.MAX_VALUE,f,g,d={};if(!(this.scale instanceof jvm.OrdinalScale)&&!(this.scale instanceof jvm.SimpleScale)){if(typeof this.params.min==="undefined"||typeof this.params.max==="undefined"){for(g in b){f=parseFloat(b[g]);if(f>a){a=f}if(f<e){e=f}}}if(typeof this.params.min==="undefined"){this.scale.setMin(e);this.params.min=e}else{this.scale.setMin(this.params.min)}if(typeof this.params.max==="undefined"){this.scale.setMax(a);this.params.max=a}else{this.scale.setMax(this.params.max)}for(g in b){if(g!="indexOf"){f=parseFloat(b[g]);if(!isNaN(f)){d[g]=this.scale.getValue(f)}else{d[g]=this.elements[g].element.style.initial[this.params.attribute]}}}}else{for(g in b){if(b[g]){d[g]=this.scale.getValue(b[g])}else{d[g]=this.elements[g].element.style.initial[this.params.attribute]}}}this.setAttributes(d);jvm.$.extend(this.values,b)},clear:function(){var b,a={};for(b in this.values){if(this.elements[b]){a[b]=this.elements[b].element.shape.style.initial[this.params.attribute]}}this.setAttributes(a);this.values={}},setScale:function(a){this.scale.setScale(a);if(this.values){this.setValues(this.values)}},setNormalizeFunction:function(a){this.scale.setNormalizeFunction(a);if(this.values){this.setValues(this.values)}}};jvm.Proj={degRad:180/Math.PI,radDeg:Math.PI/180,radius:6381372,sgn:function(a){if(a>0){return 1}else{if(a<0){return -1}else{return a}}},mill:function(b,a,d){return{x:this.radius*(a-d)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+0.4*b)*this.radDeg))/0.8}},mill_inv:function(a,d,b){return{lat:(2.5*Math.atan(Math.exp(0.8*d/this.radius))-5*Math.PI/8)*this.degRad,lng:(b*this.radDeg+a/this.radius)*this.degRad}},merc:function(b,a,d){return{x:this.radius*(a-d)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+b*Math.PI/360))}},merc_inv:function(a,d,b){return{lat:(2*Math.atan(Math.exp(d/this.radius))-Math.PI/2)*this.degRad,lng:(b*this.radDeg+a/this.radius)*this.degRad}},aea:function(s,t,q){var p=0,d=q*this.radDeg,m=29.5*this.radDeg,g=45.5*this.radDeg,u=s*this.radDeg,o=t*this.radDeg,f=(Math.sin(m)+Math.sin(g))/2,b=Math.cos(m)*Math.cos(m)+2*f*Math.sin(m),e=f*(o-d),h=Math.sqrt(b-2*f*Math.sin(u))/f,a=Math.sqrt(b-2*f*Math.sin(p))/f;return{x:h*Math.sin(e)*this.radius,y:-(a-h*Math.cos(e))*this.radius}},aea_inv:function(e,h,s){var u=e/this.radius,t=h/this.radius,q=0,d=s*this.radDeg,p=29.5*this.radDeg,m=45.5*this.radDeg,g=(Math.sin(p)+Math.sin(m))/2,b=Math.cos(p)*Math.cos(p)+2*g*Math.sin(p),a=Math.sqrt(b-2*g*Math.sin(q))/g,o=Math.sqrt(u*u+(a-t)*(a-t)),f=Math.atan(u/(a-t));return{lat:(Math.asin((b-o*o*g*g)/(2*g)))*this.degRad,lng:(d+f/g)*this.degRad}},lcc:function(p,q,o){var h=0,b=o*this.radDeg,m=q*this.radDeg,g=33*this.radDeg,e=45*this.radDeg,t=p*this.radDeg,d=Math.log(Math.cos(g)*(1/Math.cos(e)))/Math.log(Math.tan(Math.PI/4+e/2)*(1/Math.tan(Math.PI/4+g/2))),s=(Math.cos(g)*Math.pow(Math.tan(Math.PI/4+g/2),d))/d,f=s*Math.pow(1/Math.tan(Math.PI/4+t/2),d),a=s*Math.pow(1/Math.tan(Math.PI/4+h/2),d);return{x:f*Math.sin(d*(m-b))*this.radius,y:-(a-f*Math.cos(d*(m-b)))*this.radius}},lcc_inv:function(d,g,q){var t=d/this.radius,s=g/this.radius,p=0,b=q*this.radDeg,o=33*this.radDeg,h=45*this.radDeg,f=Math.log(Math.cos(o)*(1/Math.cos(h)))/Math.log(Math.tan(Math.PI/4+h/2)*(1/Math.tan(Math.PI/4+o/2))),u=(Math.cos(o)*Math.pow(Math.tan(Math.PI/4+o/2),f))/f,a=u*Math.pow(1/Math.tan(Math.PI/4+p/2),f),m=this.sgn(f)*Math.sqrt(t*t+(a-s)*(a-s)),e=Math.atan(t/(a-s));return{lat:(2*Math.atan(Math.pow(u/m,1/f))-Math.PI/2)*this.degRad,lng:(b+e/f)*this.degRad}}};jvm.MapObject=function(a){};jvm.MapObject.prototype.getLabelText=function(a){var b;if(this.config.label){if(typeof this.config.label.render==="function"){b=this.config.label.render(a)}else{b=a}}else{b=null}return b};jvm.MapObject.prototype.getLabelOffsets=function(a){var b;if(this.config.label){if(typeof this.config.label.offsets==="function"){b=this.config.label.offsets(a)}else{if(typeof this.config.label.offsets==="object"){b=this.config.label.offsets[a]}}}return b||[0,0]};jvm.MapObject.prototype.setHovered=function(a){if(this.isHovered!==a){this.isHovered=a;this.shape.isHovered=a;if(this.label){this.label.isHovered=a;this.label.updateStyle()}}};jvm.MapObject.prototype.setSelected=function(a){if(this.isSelected!==a){this.isSelected=a;this.shape.isSelected=a;this.shape.updateStyle();if(this.label){this.label.isSelected=a;this.label.updateStyle()}jvm.$(this.shape).trigger("selected",[a])}};jvm.MapObject.prototype.setStyle=function(){this.shape.setStyle.apply(this.shape,arguments)};jvm.MapObject.prototype.remove=function(){this.shape.remove();if(this.label){this.label.remove()}};jvm.Region=function(b){var f,e,d,a,g;this.config=b;this.map=this.config.map;this.shape=b.canvas.addPath({d:b.path,"data-code":b.code},b.style,b.canvas.rootElement);this.shape.addClass("jvectormap-region jvectormap-element");f=this.shape.getBBox();e=this.getLabelText(b.code);if(this.config.label&&e){d=this.getLabelOffsets(b.code);this.labelX=f.x+f.width/2+d[0];this.labelY=f.y+f.height/2+d[1];this.label=b.canvas.addText({text:e,"text-anchor":"middle","alignment-baseline":"central",x:this.labelX,y:this.labelY,"data-code":b.code},b.labelStyle,b.labelsGroup);this.label.addClass("jvectormap-region jvectormap-element")}};jvm.inherits(jvm.Region,jvm.MapObject);jvm.Region.prototype.updateLabelPosition=function(){if(this.label){this.label.set({x:this.labelX*this.map.scale+this.map.transX*this.map.scale,y:this.labelY*this.map.scale+this.map.transY*this.map.scale})}};jvm.Marker=function(a){var d,b;this.config=a;this.map=this.config.map;this.isImage=!!this.config.style.initial.image;this.createShape();d=this.getLabelText(a.index);if(this.config.label&&d){this.offsets=this.getLabelOffsets(a.index);this.labelX=a.cx/this.map.scale-this.map.transX;this.labelY=a.cy/this.map.scale-this.map.transY;this.label=a.canvas.addText({text:d,"data-index":a.index,dy:"0.6ex",x:this.labelX,y:this.labelY},a.labelStyle,a.labelsGroup);this.label.addClass("jvectormap-marker jvectormap-element")}};jvm.inherits(jvm.Marker,jvm.MapObject);jvm.Marker.prototype.createShape=function(){var a=this;if(this.shape){this.shape.remove()}this.shape=this.config.canvas[this.isImage?"addImage":"addCircle"]({"data-index":this.config.index,cx:this.config.cx,cy:this.config.cy},this.config.style,this.config.group);this.shape.addClass("jvectormap-marker jvectormap-element");if(this.isImage){jvm.$(this.shape.node).bind("imageloaded",function(){a.updateLabelPosition()})}};jvm.Marker.prototype.updateLabelPosition=function(){if(this.label){this.label.set({x:this.labelX*this.map.scale+this.offsets[0]+this.map.transX*this.map.scale+5+(this.isImage?(this.shape.width||0)/2:this.shape.properties.r),y:this.labelY*this.map.scale+this.map.transY*this.map.scale+this.offsets[1]})}};jvm.Marker.prototype.setStyle=function(b,a){var d;jvm.Marker.parentClass.prototype.setStyle.apply(this,arguments);if(b==="r"){this.updateLabelPosition()}d=!!this.shape.get("image");if(d!=this.isImage){this.isImage=d;this.config.style=jvm.$.extend(true,{},this.shape.style);this.createShape()}};jvm.Map=function(d){var b=this,a;this.params=jvm.$.extend(true,{},jvm.Map.defaultParams,d);if(!jvm.Map.maps[this.params.map]){throw new Error("Attempt to use map which was not loaded: "+this.params.map)}this.mapData=jvm.Map.maps[this.params.map];this.markers={};this.regions={};this.regionsColors={};this.regionsData={};this.container=jvm.$("<div>").addClass("jvectormap-container");if(this.params.container){this.params.container.append(this.container)}this.container.data("mapObject",this);this.defaultWidth=this.mapData.width;this.defaultHeight=this.mapData.height;this.setBackgroundColor(this.params.backgroundColor);this.onResize=function(){b.updateSize()};for(a in jvm.Map.apiEvents){if(this.params[a]){this.container.bind(jvm.Map.apiEvents[a]+".jvectormap",this.params[a])}}this.canvas=new jvm.VectorCanvas(this.container[0],this.width,this.height);if(("ontouchstart" in window)||(window.DocumentTouch&&document instanceof DocumentTouch)){if(this.params.bindTouchEvents){this.bindContainerTouchEvents()}}this.bindContainerEvents();this.bindElementEvents();this.createTip();if(this.params.zoomButtons){this.bindZoomButtons()}this.createRegions();this.createMarkers(this.params.markers||{});this.updateSize();if(this.params.focusOn){if(typeof this.params.focusOn==="string"){this.params.focusOn={region:this.params.focusOn}}else{if(jvm.$.isArray(this.params.focusOn)){this.params.focusOn={regions:this.params.focusOn}}}this.setFocus(this.params.focusOn)}if(this.params.selectedRegions){this.setSelectedRegions(this.params.selectedRegions)}if(this.params.selectedMarkers){this.setSelectedMarkers(this.params.selectedMarkers)}this.legendCntHorizontal=jvm.$("<div/>").addClass("jvectormap-legend-cnt jvectormap-legend-cnt-h");this.legendCntVertical=jvm.$("<div/>").addClass("jvectormap-legend-cnt jvectormap-legend-cnt-v");this.container.append(this.legendCntHorizontal);this.container.append(this.legendCntVertical);if(this.params.series){this.createSeries()}};jvm.Map.prototype={transX:0,transY:0,scale:1,baseTransX:0,baseTransY:0,baseScale:1,width:0,height:0,setBackgroundColor:function(a){this.container.css("background-color",a)},resize:function(){var a=this.baseScale;if(this.width/this.height>this.defaultWidth/this.defaultHeight){this.baseScale=this.height/this.defaultHeight;this.baseTransX=Math.abs(this.width-this.defaultWidth*this.baseScale)/(2*this.baseScale)}else{this.baseScale=this.width/this.defaultWidth;this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale)}this.scale*=this.baseScale/a;this.transX*=this.baseScale/a;this.transY*=this.baseScale/a},updateSize:function(){this.width=this.container.width();this.height=this.container.height()-40;this.resize();this.canvas.setSize(this.width,this.height);this.applyTransform()},reset:function(){var b,a;for(b in this.series){for(a=0;a<this.series[b].length;a++){this.series[b][a].clear()}}this.scale=this.baseScale;this.transX=this.baseTransX;this.transY=this.baseTransY;this.applyTransform()},applyTransform:function(){var d,b,a,e;if(this.defaultWidth*this.scale<=this.width){d=(this.width-this.defaultWidth*this.scale)/(2*this.scale);a=(this.width-this.defaultWidth*this.scale)/(2*this.scale)}else{d=0;a=(this.width-this.defaultWidth*this.scale)/this.scale}if(this.defaultHeight*this.scale<=this.height){b=(this.height-this.defaultHeight*this.scale)/(2*this.scale);e=(this.height-this.defaultHeight*this.scale)/(2*this.scale)}else{b=0;e=(this.height-this.defaultHeight*this.scale)/this.scale}if(this.transY>b){this.transY=b}else{if(this.transY<e){this.transY=e}}if(this.transX>d){this.transX=d}else{if(this.transX<a){this.transX=a}}this.canvas.applyTransformParams(this.scale,this.transX,this.transY);if(this.markers){this.repositionMarkers()}this.repositionLabels();this.container.trigger("viewportChange",[this.scale/this.baseScale,this.transX,this.transY])},bindContainerEvents:function(){var b=false,d,a,e=this;if(this.params.panOnDrag){this.container.mousemove(function(f){if(b){e.transX-=(d-f.pageX)/e.scale;e.transY-=(a-f.pageY)/e.scale;e.applyTransform();d=f.pageX;a=f.pageY}return false}).mousedown(function(f){b=true;d=f.pageX;a=f.pageY;return false});this.onContainerMouseUp=function(){b=false};jvm.$("body").mouseup(this.onContainerMouseUp)}if(this.params.zoomOnScroll){this.container.mousewheel(function(m,q,g,f){var p=jvm.$(e.container).offset(),o=m.pageX-p.left,n=m.pageY-p.top,h=Math.pow(1+e.params.zoomOnScrollSpeed/1000,m.deltaFactor*m.deltaY);e.tip.hide();e.setScale(e.scale*h,o,n);m.preventDefault()})}},bindContainerTouchEvents:function(){var b,f,a=this,n,m,e,d,h,g=function(s){var q=s.originalEvent.touches,u,t,p,o;if(s.type=="touchstart"){h=0}if(q.length==1){if(h==1){p=a.transX;o=a.transY;a.transX-=(n-q[0].pageX)/a.scale;a.transY-=(m-q[0].pageY)/a.scale;a.applyTransform();a.tip.hide();if(p!=a.transX||o!=a.transY){s.preventDefault()}}n=q[0].pageX;m=q[0].pageY}else{if(q.length==2){if(h==2){t=Math.sqrt(Math.pow(q[0].pageX-q[1].pageX,2)+Math.pow(q[0].pageY-q[1].pageY,2))/f;a.setScale(b*t,e,d);a.tip.hide();s.preventDefault()}else{u=jvm.$(a.container).offset();if(q[0].pageX>q[1].pageX){e=q[1].pageX+(q[0].pageX-q[1].pageX)/2}else{e=q[0].pageX+(q[1].pageX-q[0].pageX)/2}if(q[0].pageY>q[1].pageY){d=q[1].pageY+(q[0].pageY-q[1].pageY)/2}else{d=q[0].pageY+(q[1].pageY-q[0].pageY)/2}e-=u.left;d-=u.top;b=a.scale;f=Math.sqrt(Math.pow(q[0].pageX-q[1].pageX,2)+Math.pow(q[0].pageY-q[1].pageY,2))}}}h=q.length};jvm.$(this.container).bind("touchstart",g);jvm.$(this.container).bind("touchmove",g)},bindElementEvents:function(){var b=this,a;this.container.mousemove(function(){a=true});this.container.delegate("[class~='jvectormap-element']","mouseover mouseout",function(o){var f=jvm.$(this).attr("class").baseVal||jvm.$(this).attr("class"),h=f.indexOf("jvectormap-region")===-1?"marker":"region",m=h=="region"?jvm.$(this).attr("data-code"):jvm.$(this).attr("data-index"),g=h=="region"?b.regions[m].element:b.markers[m].element,d=h=="region"?b.mapData.paths[m].name:(b.markers[m].config.name||""),n=jvm.$.Event(h+"TipShow.jvectormap"),p=jvm.$.Event(h+"Over.jvectormap");if(o.type=="mouseover"){b.container.trigger(p,[m]);if(!p.isDefaultPrevented()){g.setHovered(true)}b.tip.text(d);b.container.trigger(n,[b.tip,m]);if(!n.isDefaultPrevented()){b.tip.show();b.tipWidth=b.tip.width();b.tipHeight=b.tip.height()}}else{g.setHovered(false);b.tip.hide();b.container.trigger(h+"Out.jvectormap",[m])}});this.container.delegate("[class~='jvectormap-element']","mousedown",function(){a=false});this.container.delegate("[class~='jvectormap-element']","mouseup",function(){var e=jvm.$(this).attr("class").baseVal?jvm.$(this).attr("class").baseVal:jvm.$(this).attr("class"),g=e.indexOf("jvectormap-region")===-1?"marker":"region",h=g=="region"?jvm.$(this).attr("data-code"):jvm.$(this).attr("data-index"),d=jvm.$.Event(g+"Click.jvectormap"),f=g=="region"?b.regions[h].element:b.markers[h].element;b.container.trigger(d,[h]);if((g==="region"&&b.params.regionsSelectable)||(g==="marker"&&b.params.markersSelectable)){if(!d.isDefaultPrevented()){if(b.params[g+"sSelectableOne"]){b.clearSelected(g+"s")}f.setSelected(!f.isSelected)}}})},bindZoomButtons:function(){var a=this;jvm.$("<div/>").addClass("jvectormap-zoomin").text("+").appendTo(this.container);jvm.$("<div/>").addClass("jvectormap-zoomout").html("&#x2212;").appendTo(this.container);this.container.find(".jvectormap-zoomin").click(function(){a.setScale(a.scale*a.params.zoomStep,a.width/2,a.height/2,false,a.params.zoomAnimate)});this.container.find(".jvectormap-zoomout").click(function(){a.setScale(a.scale/a.params.zoomStep,a.width/2,a.height/2,false,a.params.zoomAnimate)})},createTip:function(){var a=this;this.tip=jvm.$("<div/>").addClass("jvectormap-tip").appendTo(jvm.$("body"));this.container.mousemove(function(h){var d=50;var b=a.tip.prevObject[0].innerHTML;if(b!==""&&b!==undefined&&b!==null){if(b.match("[<>/]")===null){d=0}}var g=h.pageX-15-a.tipWidth,f=h.pageY-d;if(g<5){g=h.pageX+15}if(f<5){f=h.pageY+15}a.tip.css({left:g,top:f})})},setScale:function(z,d,a,q,g){var s=jvm.$.Event("zoom.jvectormap"),v,o=this,t=0,m=Math.abs(Math.round((z-this.scale)*60/Math.max(z,this.scale))),p,u,f,h,n,w,e,b,A=new jvm.$.Deferred();if(z>this.params.zoomMax*this.baseScale){z=this.params.zoomMax*this.baseScale}else{if(z<this.params.zoomMin*this.baseScale){z=this.params.zoomMin*this.baseScale}}if(typeof d!="undefined"&&typeof a!="undefined"){zoomStep=z/this.scale;if(q){e=d+this.defaultWidth*(this.width/(this.defaultWidth*z))/2;b=a+this.defaultHeight*(this.height/(this.defaultHeight*z))/2}else{e=this.transX-(zoomStep-1)/z*d;b=this.transY-(zoomStep-1)/z*a}}if(g&&m>0){p=this.scale;u=(z-p)/m;f=this.transX*this.scale;n=this.transY*this.scale;h=(e*z-f)/m;w=(b*z-n)/m;v=setInterval(function(){t+=1;o.scale=p+u*t;o.transX=(f+h*t)/o.scale;o.transY=(n+w*t)/o.scale;o.applyTransform();if(t==m){clearInterval(v);o.container.trigger(s,[z/o.baseScale]);A.resolve()}},10)}else{this.transX=e;this.transY=b;this.scale=z;this.applyTransform();this.container.trigger(s,[z/this.baseScale]);A.resolve()}return A},setFocus:function(e){var h,d,g,b,f,a;e=e||{};if(e.region){b=[e.region]}else{if(e.regions){b=e.regions}}if(b){for(f=0;f<b.length;f++){if(this.regions[b[f]]){d=this.regions[b[f]].element.shape.getBBox();if(d){if(typeof h=="undefined"){h=d}else{g={x:Math.min(h.x,d.x),y:Math.min(h.y,d.y),width:Math.max(h.x+h.width,d.x+d.width)-Math.min(h.x,d.x),height:Math.max(h.y+h.height,d.y+d.height)-Math.min(h.y,d.y)};h=g}}}}return this.setScale(Math.min(this.width/h.width,this.height/h.height),-(h.x+h.width/2),-(h.y+h.height/2),true,e.animate)}else{if(e.lat&&e.lng){a=this.latLngToPoint(e.lat,e.lng);e.x=this.transX-a.x/this.scale;e.y=this.transY-a.y/this.scale}else{if(e.x&&e.y){e.x*=-this.defaultWidth;e.y*=-this.defaultHeight}}return this.setScale(e.scale*this.baseScale,e.x,e.y,true,e.animate)}},getSelected:function(d){var a,b=[];for(a in this[d]){if(this[d][a].element.isSelected){b.push(a)}}return b},getSelectedRegions:function(){return this.getSelected("regions")},getSelectedMarkers:function(){return this.getSelected("markers")},setSelected:function(b,d){var a;if(typeof d!="object"){d=[d]}if(jvm.$.isArray(d)){for(a=0;a<d.length;a++){this[b][d[a]].element.setSelected(true)}}else{for(a in d){this[b][a].element.setSelected(!!d[a])}}},setSelectedRegions:function(a){this.setSelected("regions",a)},setSelectedMarkers:function(a){this.setSelected("markers",a)},clearSelected:function(e){var a={},d=this.getSelected(e),b;for(b=0;b<d.length;b++){a[d[b]]=false}this.setSelected(e,a)},clearSelectedRegions:function(){this.clearSelected("regions")},clearSelectedMarkers:function(){this.clearSelected("markers")},getMapObject:function(){return this},getRegionName:function(a){return this.mapData.paths[a].name},createRegions:function(){var a,d,b=this;this.regionLabelsGroup=this.regionLabelsGroup||this.canvas.addGroup();for(a in this.mapData.paths){d=new jvm.Region({map:this,path:this.mapData.paths[a].path,code:a,style:jvm.$.extend(true,{},this.params.regionStyle),labelStyle:jvm.$.extend(true,{},this.params.regionLabelStyle),canvas:this.canvas,labelsGroup:this.regionLabelsGroup,label:this.canvas.mode!="vml"?(this.params.labels&&this.params.labels.regions):null});jvm.$(d.shape).bind("selected",function(g,f){b.container.trigger("regionSelected.jvectormap",[jvm.$(this.node).attr("data-code"),f,b.getSelectedRegions()])});this.regions[a]={element:d,config:this.mapData.paths[a]}}},createMarkers:function(h){var e,d,b,g,a,f=this;this.markersGroup=this.markersGroup||this.canvas.addGroup();this.markerLabelsGroup=this.markerLabelsGroup||this.canvas.addGroup();if(jvm.$.isArray(h)){a=h.slice();h={};for(e=0;e<a.length;e++){h[e]=a[e]}}for(e in h){g=h[e] instanceof Array?{latLng:h[e]}:h[e];b=this.getMarkerPosition(g);if(b!==false){d=new jvm.Marker({map:this,style:jvm.$.extend(true,{},this.params.markerStyle,{initial:g.style||{}}),labelStyle:jvm.$.extend(true,{},this.params.markerLabelStyle),index:e,cx:b.x,cy:b.y,group:this.markersGroup,canvas:this.canvas,labelsGroup:this.markerLabelsGroup,label:this.canvas.mode!="vml"?(this.params.labels&&this.params.labels.markers):null});jvm.$(d.shape).bind("selected",function(n,m){f.container.trigger("markerSelected.jvectormap",[jvm.$(this.node).attr("data-index"),m,f.getSelectedMarkers()])});if(this.markers[e]){this.removeMarkers([e])}this.markers[e]={element:d,config:g}}}},repositionMarkers:function(){var b,a;for(b in this.markers){a=this.getMarkerPosition(this.markers[b].config);if(a!==false){this.markers[b].element.setStyle({cx:a.x,cy:a.y})}}},repositionLabels:function(){var a;for(a in this.regions){this.regions[a].element.updateLabelPosition()}for(a in this.markers){this.markers[a].element.updateLabelPosition()}},getMarkerPosition:function(a){if(jvm.Map.maps[this.params.map].projection){return this.latLngToPoint.apply(this,a.latLng||[0,0])}else{return{x:a.coords[0]*this.scale+this.transX*this.scale,y:a.coords[1]*this.scale+this.transY*this.scale}}},addMarker:function(f,a,e){var h={},g=[],b,d,e=e||[];h[f]=a;for(d=0;d<e.length;d++){b={};if(typeof e[d]!=="undefined"){b[f]=e[d]}g.push(b)}this.addMarkers(h,g)},addMarkers:function(d,b){var a;b=b||[];this.createMarkers(d);for(a=0;a<b.length;a++){this.series.markers[a].setValues(b[a]||{})}},removeMarkers:function(b){var a;for(a=0;a<b.length;a++){this.markers[b[a]].element.remove();delete this.markers[b[a]]}},removeAllMarkers:function(){var a,b=[];for(a in this.markers){b.push(a)}this.removeMarkers(b)},latLngToPoint:function(g,d){var a,e=jvm.Map.maps[this.params.map].projection,f=e.centralMeridian,b,h;if(d<(-180+f)){d+=360}a=jvm.Proj[e.type](g,d,f);b=this.getInsetForPoint(a.x,a.y);if(b){h=b.bbox;a.x=(a.x-h[0].x)/(h[1].x-h[0].x)*b.width*this.scale;a.y=(a.y-h[0].y)/(h[1].y-h[0].y)*b.height*this.scale;return{x:a.x+this.transX*this.scale+b.left*this.scale,y:a.y+this.transY*this.scale+b.top*this.scale}}else{return false}},pointToLatLng:function(m,h){var b=jvm.Map.maps[this.params.map].projection,d=b.centralMeridian,a=jvm.Map.maps[this.params.map].insets,e,o,n,g,f;for(e=0;e<a.length;e++){o=a[e];n=o.bbox;g=m-(this.transX*this.scale+o.left*this.scale);f=h-(this.transY*this.scale+o.top*this.scale);g=(g/(o.width*this.scale))*(n[1].x-n[0].x)+n[0].x;f=(f/(o.height*this.scale))*(n[1].y-n[0].y)+n[0].y;if(g>n[0].x&&g<n[1].x&&f>n[0].y&&f<n[1].y){return jvm.Proj[b.type+"_inv"](g,-f,d)}}return false},getInsetForPoint:function(a,f){var b=jvm.Map.maps[this.params.map].insets,d,e;for(d=0;d<b.length;d++){e=b[d].bbox;if(a>e[0].x&&a<e[1].x&&f>e[0].y&&f<e[1].y){return b[d]}}},createSeries:function(){var b,a;this.series={markers:[],regions:[]};for(a in this.params.series){for(b=0;b<this.params.series[a].length;b++){this.series[a][b]=new jvm.DataSeries(this.params.series[a][b],this[a],this)}}},remove:function(){this.tip.remove();this.container.remove();jvm.$(window).unbind("resize",this.onResize);jvm.$("body").unbind("mouseup",this.onContainerMouseUp)}};jvm.Map.maps={};jvm.Map.defaultParams={map:"world_mill_en",backgroundColor:"#505050",zoomButtons:true,zoomOnScroll:true,zoomOnScrollSpeed:3,panOnDrag:true,zoomMax:8,zoomMin:1,zoomStep:1.6,zoomAnimate:true,regionsSelectable:false,markersSelectable:false,bindTouchEvents:true,regionStyle:{initial:{fill:"white","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{"fill-opacity":0.8,cursor:"pointer"},selected:{fill:"yellow"},selectedHover:{}},regionLabelStyle:{initial:{"font-family":"Verdana","font-size":"12","font-weight":"bold",cursor:"default",fill:"black"},hover:{cursor:"pointer"}},markerStyle:{initial:{fill:"grey",stroke:"#505050","fill-opacity":1,"stroke-width":1,"stroke-opacity":1,r:5},hover:{stroke:"black","stroke-width":2,cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{"font-family":"Verdana","font-size":"12","font-weight":"bold",cursor:"default",fill:"black"},hover:{cursor:"pointer"}}};jvm.Map.apiEvents={onRegionTipShow:"regionTipShow",onRegionOver:"regionOver",onRegionOut:"regionOut",onRegionClick:"regionClick",onRegionSelected:"regionSelected",onMarkerTipShow:"markerTipShow",onMarkerOver:"markerOver",onMarkerOut:"markerOut",onMarkerClick:"markerClick",onMarkerSelected:"markerSelected",onViewportChange:"viewportChange"};jvm.MultiMap=function(b){var a=this;this.maps={};this.params=jvm.$.extend(true,{},jvm.MultiMap.defaultParams,b);this.params.maxLevel=this.params.maxLevel||Number.MAX_VALUE;this.params.main=this.params.main||{};this.params.main.multiMapLevel=0;this.history=[this.addMap(this.params.main.map,this.params.main)];this.defaultProjection=this.history[0].mapData.projection.type;this.mapsLoaded={};this.params.container.css({position:"relative"});this.backButton=jvm.$("<div/>").addClass("jvectormap-goback").text("Back").appendTo(this.params.container);this.backButton.hide();this.backButton.click(function(){a.goBack()});this.spinner=jvm.$("<div/>").addClass("jvectormap-spinner").appendTo(this.params.container);this.spinner.hide()};jvm.MultiMap.prototype={addMap:function(b,a){var d=jvm.$("<div/>").css({width:"100%",height:"100%"});this.params.container.append(d);this.maps[b]=new jvm.Map(jvm.$.extend(a,{container:d}));if(this.params.maxLevel>a.multiMapLevel){this.maps[b].container.bind("regionClick.jvectormap",{scope:this},function(m,h){var f=m.data.scope,g=f.params.mapNameByCode(h,f);if(!f.drillDownPromise||f.drillDownPromise.state()!=="pending"){f.drillDown(g,h)}})}return this.maps[b]},downloadMap:function(d){var b=this,a=jvm.$.Deferred();if(!this.mapsLoaded[d]){jvm.$.get(this.params.mapUrlByCode(d,this)).then(function(){b.mapsLoaded[d]=true;a.resolve()},function(){a.reject()})}else{a.resolve()}return a},drillDown:function(b,f){var a=this.history[this.history.length-1],e=this,d=a.setFocus({region:f,animate:true}),g=this.downloadMap(f);d.then(function(){if(g.state()==="pending"){e.spinner.show()}});g.always(function(){e.spinner.hide()});this.drillDownPromise=jvm.$.when(g,d);this.drillDownPromise.then(function(){a.params.container.hide();if(!e.maps[b]){e.addMap(b,{map:b,multiMapLevel:a.params.multiMapLevel+1})}else{e.maps[b].params.container.show()}e.history.push(e.maps[b]);e.backButton.show()})},goBack:function(){var a=this.history.pop(),d=this.history[this.history.length-1],b=this;a.setFocus({scale:1,x:0.5,y:0.5,animate:true}).then(function(){a.params.container.hide();d.params.container.show();d.updateSize();if(b.history.length===1){b.backButton.hide()}d.setFocus({scale:1,x:0.5,y:0.5,animate:true})})}};jvm.MultiMap.defaultParams={mapNameByCode:function(a,b){return a.toLowerCase()+"_"+b.defaultProjection+"_en"},mapUrlByCode:function(a,b){return"jquery-jvectormap-data-"+a.toLowerCase()+"-"+b.defaultProjection+"-en.js"}};$.fn.vectorMap("addMap","world_mill_en",{insets:[{width:900,top:0,height:440.7063107441331,bbox:[{y:-12671671.123330014,x:-20004297.151525836},{y:6930392.02513512,x:20026572.394749384}],left:0}],paths:{BD:{path:"M652.71,228.85l-0.04,1.38l-0.46,-0.21l-0.42,0.3l0.05,0.65l-0.17,-1.37l-0.48,-1.26l-1.08,-1.6l-0.23,-0.13l-2.31,-0.11l-0.31,0.36l0.21,0.98l-0.6,1.11l-0.8,-0.4l-0.37,0.09l-0.23,0.3l-0.54,-0.21l-0.78,-0.19l-0.38,-2.04l-0.83,-1.89l0.4,-1.5l-0.16,-0.35l-1.24,-0.57l0.36,-0.62l1.5,-0.95l0.02,-0.49l-1.62,-1.26l0.64,-1.31l1.7,1.0l0.12,0.04l0.96,0.11l0.19,1.62l0.25,0.26l2.38,0.37l2.32,-0.04l1.06,0.33l-0.92,1.79l-0.97,0.13l-0.23,0.16l-0.77,1.51l0.05,0.35l1.37,1.37l0.5,-0.14l0.35,-1.46l0.24,-0.0l1.24,3.92Z",name:"Bangladesh"},BE:{path:"M429.28,143.95l1.76,0.25l0.13,-0.01l2.16,-0.64l1.46,1.34l1.26,0.71l-0.23,1.8l-0.44,0.08l-0.24,0.25l-0.2,1.36l-1.8,-1.22l-0.23,-0.05l-1.14,0.23l-1.62,-1.43l-1.15,-1.31l-0.21,-0.1l-0.95,-0.04l-0.21,-0.68l1.66,-0.54Z",name:"Belgium"},BF:{path:"M413.48,260.21l-1.22,-0.46l-0.13,-0.02l-1.17,0.1l-0.15,0.06l-0.73,0.53l-0.87,-0.41l-0.39,-0.75l-0.13,-0.13l-0.98,-0.48l-0.14,-1.2l0.63,-0.99l0.05,-0.18l-0.05,-0.73l1.9,-2.01l0.08,-0.14l0.35,-1.65l0.49,-0.44l1.05,0.3l0.21,-0.02l1.05,-0.52l0.13,-0.13l0.3,-0.58l1.87,-1.1l0.11,-0.1l0.43,-0.72l2.23,-1.01l1.21,-0.32l0.51,0.4l0.19,0.06l1.25,-0.01l-0.14,0.89l0.01,0.13l0.34,1.16l0.06,0.11l1.35,1.59l0.07,1.13l0.24,0.28l2.64,0.53l-0.05,1.39l-0.42,0.59l-1.11,0.21l-0.22,0.17l-0.46,0.99l-0.69,0.23l-2.12,-0.05l-1.14,-0.2l-0.19,0.03l-0.72,0.36l-1.07,-0.17l-4.35,0.12l-0.29,0.29l-0.06,1.44l0.25,1.45Z",name:"Burkina Faso"},BG:{path:"M477.63,166.84l0.51,0.9l0.33,0.14l0.9,-0.21l1.91,0.47l3.68,0.16l0.17,-0.05l1.2,-0.75l2.78,-0.67l1.72,1.05l1.02,0.24l-0.97,0.97l-0.91,2.17l0.0,0.24l0.56,1.19l-1.58,-0.3l-0.16,0.01l-2.55,0.95l-0.2,0.28l-0.02,1.23l-1.92,0.24l-1.68,-0.99l-0.27,-0.02l-1.94,0.8l-1.52,-0.07l-0.15,-1.72l-0.12,-0.21l-0.99,-0.76l0.18,-0.18l0.02,-0.39l-0.17,-0.22l0.33,-0.75l0.91,-0.91l0.01,-0.42l-1.16,-1.25l-0.18,-0.89l0.24,-0.27Z",name:"Bulgaria"},BA:{path:"M468.39,164.66l0.16,0.04l0.43,-0.0l-0.43,0.93l0.06,0.34l1.08,1.06l-0.28,1.09l-0.5,0.13l-0.47,0.28l-0.86,0.74l-0.1,0.16l-0.28,1.29l-1.81,-0.94l-0.9,-1.22l-1.0,-0.73l-1.1,-1.1l-0.55,-0.96l-1.11,-1.3l0.3,-0.75l0.59,0.46l0.42,-0.04l0.46,-0.54l1.0,-0.06l2.11,0.5l1.72,-0.03l1.06,0.64Z",name:"Bosnia and Herzegovina"},BN:{path:"M707.34,273.57l0.76,-0.72l1.59,-1.03l-0.18,1.93l-0.9,-0.06l-0.28,0.14l-0.31,0.51l-0.68,-0.78Z",name:"Brunei"},BO:{path:"M263.83,340.79l-0.23,-0.12l-2.86,-0.11l-0.28,0.17l-0.77,1.67l-1.17,-1.51l-0.18,-0.11l-3.28,-0.64l-0.28,0.1l-2.02,2.3l-1.43,0.29l-0.91,-3.35l-1.31,-2.88l0.75,-2.41l-0.09,-0.32l-1.23,-1.03l-0.31,-1.76l-0.05,-0.12l-1.12,-1.6l1.49,-2.62l0.01,-0.28l-1.0,-2.0l0.48,-0.72l0.02,-0.29l-0.37,-0.78l0.87,-1.13l0.06,-0.18l0.05,-2.17l0.12,-1.71l0.5,-0.8l0.01,-0.3l-1.9,-3.58l1.3,0.15l1.34,-0.05l0.23,-0.12l0.51,-0.7l2.12,-0.99l1.31,-0.93l2.81,-0.37l-0.21,1.51l0.01,0.13l0.29,0.91l-0.19,1.64l0.11,0.27l2.72,2.27l0.15,0.07l2.71,0.41l0.92,0.88l0.12,0.07l1.64,0.49l1.0,0.71l0.18,0.06l1.5,-0.02l1.24,0.64l0.1,1.31l0.05,0.14l0.44,0.68l0.02,0.73l-0.44,0.03l-0.27,0.39l0.96,2.99l0.28,0.21l4.43,0.1l-0.28,1.12l0.0,0.15l0.27,1.02l0.15,0.19l1.27,0.67l0.52,1.42l-0.42,1.91l-0.66,1.1l-0.04,0.2l0.21,1.3l-0.19,0.13l-0.01,-0.27l-0.15,-0.24l-2.33,-1.33l-0.14,-0.04l-2.38,-0.03l-4.36,0.76l-0.21,0.16l-1.2,2.29l-0.03,0.13l-0.06,1.37l-0.79,2.53l-0.05,-0.08Z",name:"Bolivia"},JP:{path:"M781.17,166.78l1.8,0.67l0.28,-0.04l1.38,-1.01l0.43,2.67l-3.44,0.77l-0.18,0.12l-2.04,2.79l-3.71,-1.94l-0.42,0.15l-1.29,3.11l-2.32,0.04l-0.3,-2.63l1.12,-2.1l2.51,-0.16l0.28,-0.25l0.73,-4.22l0.58,-1.9l2.59,2.84l2.0,1.1ZM773.66,187.36l-0.92,2.24l-0.01,0.2l0.4,1.3l-1.18,1.81l-3.06,1.28l-4.35,0.17l-0.19,0.08l-3.4,3.06l-1.36,-0.87l-0.1,-1.95l-0.34,-0.28l-4.35,0.62l-2.99,1.33l-2.87,0.05l-0.28,0.2l0.09,0.33l2.37,1.93l-1.57,4.44l-1.35,0.97l-0.9,-0.79l0.57,-2.32l-0.15,-0.34l-1.5,-0.77l-0.81,-1.53l2.04,-0.75l0.14,-0.1l1.28,-1.72l2.47,-1.43l1.84,-1.92l4.83,-0.82l2.62,0.57l0.33,-0.16l2.45,-4.77l1.38,1.14l0.38,0.0l5.1,-4.02l0.09,-0.11l1.57,-3.57l0.02,-0.16l-0.42,-3.22l0.94,-1.67l2.27,-0.47l1.26,3.82l-0.07,2.23l-2.26,2.86l-0.06,0.19l0.04,2.93ZM757.85,196.18l0.22,0.66l-1.11,1.33l-0.8,-0.7l-0.33,-0.04l-1.28,0.65l-0.14,0.15l-0.54,1.34l-1.17,-0.57l0.02,-1.03l1.2,-1.45l1.24,0.28l0.29,-0.1l0.9,-1.03l1.51,0.5Z",name:"Japan"},BI:{path:"M494.7,295.83l-0.14,-2.71l-0.04,-0.13l-0.34,-0.62l0.93,0.12l0.3,-0.16l0.67,-1.25l0.9,0.11l0.11,0.76l0.08,0.16l0.46,0.48l0.02,0.56l-0.55,0.48l-0.96,1.29l-0.82,0.82l-0.61,0.07Z",name:"Burundi"},BJ:{path:"M427.4,268.94l-1.58,0.22l-0.52,-1.45l0.11,-5.73l-0.08,-0.21l-0.43,-0.44l-0.09,-1.13l-0.09,-0.19l-1.52,-1.52l0.24,-1.01l0.7,-0.23l0.18,-0.16l0.45,-0.97l1.07,-0.21l0.19,-0.12l0.53,-0.73l0.73,-0.65l0.68,-0.0l1.69,1.3l-0.08,0.67l0.02,0.14l0.52,1.38l-0.44,0.9l-0.01,0.24l0.2,0.52l-1.1,1.42l-0.76,0.76l-0.08,0.13l-0.47,1.59l0.05,1.69l-0.13,3.79Z",name:"Benin"},BT:{path:"M650.38,213.78l0.88,0.75l-0.13,1.24l-1.77,0.07l-2.1,-0.18l-1.57,0.4l-2.02,-0.91l-0.02,-0.24l1.54,-1.87l1.18,-0.6l1.67,0.59l1.32,0.08l1.01,0.67Z",name:"Bhutan"},JM:{path:"M226.67,238.37l1.64,0.23l1.2,0.56l0.11,0.19l-1.25,0.03l-0.14,0.04l-0.65,0.37l-1.24,-0.37l-1.17,-0.77l0.11,-0.22l0.86,-0.15l0.52,0.08Z",name:"Jamaica"},BW:{path:"M484.91,331.96l0.53,0.52l0.82,1.53l2.83,2.86l0.14,0.08l0.85,0.22l0.03,0.81l0.74,1.66l0.21,0.17l1.87,0.39l1.17,0.87l-3.13,1.71l-2.3,2.01l-0.07,0.1l-0.82,1.74l-0.66,0.88l-1.24,0.19l-0.24,0.2l-0.65,1.98l-1.4,0.55l-1.9,-0.12l-1.2,-0.74l-1.06,-0.32l-0.22,0.02l-1.22,0.62l-0.14,0.14l-0.58,1.21l-1.16,0.79l-1.18,1.13l-1.5,0.23l-0.4,-0.68l0.22,-1.53l-0.04,-0.19l-1.48,-2.54l-0.11,-0.11l-0.53,-0.31l-0.0,-7.25l2.18,-0.08l0.29,-0.3l0.07,-9.0l1.63,-0.08l3.69,-0.86l0.84,0.93l0.38,0.05l1.53,-0.97l0.79,-0.03l1.3,-0.53l0.23,0.1l0.92,1.96Z",name:"Botswana"},BR:{path:"M259.49,274.87l1.42,0.25l1.97,0.62l0.28,-0.05l0.67,-0.55l1.76,-0.38l2.8,-0.94l0.12,-0.08l0.92,-0.96l0.05,-0.33l-0.15,-0.32l0.73,-0.06l0.36,0.35l-0.27,0.93l0.17,0.36l0.76,0.34l0.44,0.9l-0.58,0.73l-0.06,0.13l-0.4,2.13l0.03,0.19l0.62,1.22l0.17,1.11l0.11,0.19l1.54,1.18l0.15,0.06l1.23,0.12l0.29,-0.15l0.2,-0.36l0.71,-0.11l1.13,-0.44l0.79,-0.63l1.25,0.19l0.65,-0.08l1.32,0.2l0.32,-0.18l0.23,-0.51l-0.05,-0.31l-0.31,-0.37l0.11,-0.31l0.75,0.17l0.13,0.0l1.1,-0.24l1.34,0.5l1.08,0.51l0.33,-0.05l0.67,-0.58l0.27,0.05l0.28,0.57l0.31,0.17l1.2,-0.18l0.17,-0.08l1.03,-1.05l0.76,-1.82l1.39,-2.16l0.49,-0.07l0.52,1.17l1.4,4.37l0.2,0.2l1.14,0.35l0.05,1.39l-1.8,1.97l0.01,0.42l0.78,0.75l0.18,0.08l4.16,0.37l0.08,2.25l0.5,0.22l1.78,-1.54l2.98,0.85l4.07,1.5l1.07,1.28l-0.37,1.23l0.36,0.38l2.83,-0.75l4.8,1.3l3.75,-0.09l3.6,2.02l3.27,2.84l1.93,0.72l2.13,0.11l0.76,0.66l1.22,4.56l-0.96,4.03l-1.22,1.58l-3.52,3.51l-1.63,2.91l-1.75,2.09l-0.5,0.04l-0.26,0.19l-0.72,1.99l0.18,4.76l-0.95,5.56l-0.74,0.96l-0.06,0.15l-0.43,3.39l-2.49,3.34l-0.06,0.13l-0.4,2.56l-1.9,1.07l-0.13,0.16l-0.51,1.38l-2.59,0.0l-3.94,1.01l-1.82,1.19l-2.85,0.81l-3.01,2.17l-2.12,2.65l-0.06,0.13l-0.36,2.0l0.01,0.13l0.4,1.42l-0.45,2.63l-0.53,1.23l-1.76,1.53l-2.76,4.79l-2.16,2.15l-1.69,1.29l-0.09,0.12l-1.12,2.6l-1.3,1.26l-0.45,-1.02l0.99,-1.18l0.01,-0.37l-1.5,-1.95l-1.98,-1.54l-2.58,-1.77l-0.2,-0.05l-0.81,0.07l-2.42,-2.05l-0.25,-0.07l-0.77,0.14l2.75,-3.07l2.8,-2.61l1.67,-1.09l2.11,-1.49l0.13,-0.24l0.05,-2.15l-0.07,-0.2l-1.26,-1.54l-0.35,-0.09l-0.64,0.27l0.3,-0.95l0.34,-1.57l0.01,-1.52l-0.16,-0.26l-0.9,-0.48l-0.27,-0.01l-0.86,0.39l-0.65,-0.08l-0.23,-0.8l-0.23,-2.39l-0.04,-0.12l-0.47,-0.79l-0.14,-0.12l-1.69,-0.71l-0.25,0.01l-0.93,0.47l-2.29,-0.44l0.15,-3.3l-0.03,-0.15l-0.62,-1.22l0.57,-0.39l0.13,-0.3l-0.22,-1.37l0.67,-1.13l0.44,-2.04l-0.01,-0.17l-0.59,-1.61l-0.14,-0.16l-1.25,-0.66l-0.22,-0.82l0.35,-1.41l-0.28,-0.37l-4.59,-0.1l-0.78,-2.41l0.34,-0.02l0.28,-0.31l-0.03,-1.1l-0.05,-0.16l-0.45,-0.68l-0.1,-1.4l-0.16,-0.24l-1.45,-0.76l-0.14,-0.03l-1.48,0.02l-1.04,-0.73l-1.62,-0.48l-0.93,-0.9l-0.16,-0.08l-2.72,-0.41l-2.53,-2.12l0.18,-1.54l-0.01,-0.13l-0.29,-0.91l0.26,-1.83l-0.34,-0.34l-3.28,0.43l-0.14,0.05l-1.3,0.93l-2.16,1.01l-0.12,0.09l-0.47,0.65l-1.12,0.05l-1.84,-0.21l-0.12,0.01l-1.33,0.41l-0.82,-0.21l0.16,-3.6l-0.48,-0.26l-1.97,1.43l-1.96,-0.06l-0.86,-1.23l-0.22,-0.13l-1.23,-0.11l0.34,-0.69l-0.05,-0.33l-1.36,-1.5l-0.92,-2.0l0.45,-0.32l0.13,-0.25l-0.0,-0.87l1.34,-0.64l0.17,-0.32l-0.23,-1.23l0.56,-0.77l0.05,-0.13l0.16,-1.03l2.7,-1.61l2.01,-0.47l0.16,-0.09l0.24,-0.27l2.11,0.11l0.31,-0.25l1.13,-6.87l0.06,-1.12l-0.4,-1.53l-0.1,-0.15l-1.0,-0.82l0.01,-1.45l1.08,-0.32l0.39,0.2l0.44,-0.24l0.08,-0.96l-0.25,-0.32l-1.22,-0.22l-0.02,-1.01l4.57,0.05l0.22,-0.09l0.6,-0.63l0.44,0.5l0.47,1.42l0.45,0.16l0.27,-0.18l1.21,1.16l0.23,0.08l1.95,-0.16l0.23,-0.14l0.43,-0.67l1.76,-0.55l1.05,-0.42l0.18,-0.2l0.25,-0.92l1.65,-0.66l0.18,-0.35l-0.14,-0.53l-0.26,-0.22l-1.91,-0.19l-0.29,-1.33l0.1,-1.64l-0.15,-0.28l-0.44,-0.25Z",name:"Brazil"},BS:{path:"M227.51,216.69l0.3,0.18l-0.24,1.07l0.03,-1.04l-0.09,-0.21ZM226.5,224.03l-0.13,0.03l-0.54,-1.3l-0.09,-0.12l-0.78,-0.64l0.4,-1.26l0.33,0.05l0.79,2.0l0.01,1.24ZM225.76,216.5l-2.16,0.34l-0.07,-0.41l0.85,-0.16l1.36,0.07l0.02,0.16Z",name:"The Bahamas"},BY:{path:"M480.08,135.28l2.09,0.02l0.13,-0.03l2.72,-1.3l0.16,-0.19l0.55,-1.83l1.94,-1.06l0.15,-0.31l-0.2,-1.33l1.33,-0.52l2.58,-1.3l2.39,0.8l0.3,0.75l0.37,0.17l1.22,-0.39l2.18,0.75l0.2,1.36l-0.48,0.85l0.01,0.32l1.57,2.26l0.92,0.6l-0.1,0.41l0.19,0.35l1.61,0.57l0.48,0.6l-0.64,0.49l-1.91,-0.11l-0.18,0.05l-0.48,0.32l-0.1,0.39l0.57,1.1l0.51,1.78l-1.79,0.17l-0.18,0.08l-0.77,0.73l-0.09,0.19l-0.13,1.31l-0.75,-0.22l-2.11,0.15l-0.56,-0.66l-0.39,-0.06l-0.8,0.49l-0.79,-0.4l-0.13,-0.03l-1.94,-0.07l-2.76,-0.79l-2.58,-0.27l-1.98,0.07l-0.15,0.05l-1.31,0.86l-0.8,0.09l-0.04,-1.16l-0.03,-0.12l-0.63,-1.28l1.22,-0.56l0.17,-0.27l0.01,-1.35l-0.04,-0.15l-0.66,-1.24l-0.08,-1.12Z",name:"Belarus"},BZ:{path:"M198.03,239.7l0.28,0.19l0.43,-0.1l0.82,-1.42l0.0,0.07l0.29,0.29l0.16,0.0l-0.02,0.35l-0.39,1.08l0.02,0.25l0.16,0.29l-0.23,0.8l0.04,0.24l0.09,0.14l-0.25,1.12l-0.38,0.53l-0.33,0.06l-0.21,0.15l-0.41,0.74l-0.25,0.0l0.17,-2.58l0.01,-2.2Z",name:"Belize"},RU:{path:"M688.57,38.85l0.63,2.39l0.44,0.19l2.22,-1.23l7.18,0.07l5.54,2.49l1.85,1.77l-0.55,2.34l-2.64,1.42l-6.57,2.76l-1.95,1.5l0.12,0.53l3.09,0.68l3.69,1.23l0.21,-0.01l1.98,-0.81l1.16,2.84l0.5,0.08l1.03,-1.18l3.86,-0.74l7.79,0.78l0.56,2.05l0.27,0.22l10.47,0.71l0.32,-0.29l0.13,-3.34l4.98,0.8l3.96,-0.02l3.88,2.43l1.06,2.79l-1.38,1.83l0.01,0.38l3.15,3.64l0.1,0.08l3.94,1.86l0.4,-0.14l2.28,-4.56l3.75,1.94l0.22,0.02l4.18,-1.22l4.76,1.4l0.26,-0.04l1.74,-1.23l3.98,0.63l0.32,-0.41l-1.71,-4.1l3.0,-1.86l22.39,3.04l2.06,2.67l0.1,0.08l6.55,3.51l0.17,0.03l10.08,-0.86l4.86,0.73l1.91,1.72l-0.29,3.13l0.18,0.31l3.08,1.26l0.19,0.01l3.32,-0.9l4.37,-0.11l4.78,0.87l4.61,-0.48l4.26,3.82l0.32,0.05l3.1,-1.4l0.12,-0.45l-1.91,-2.67l0.92,-1.64l7.78,1.22l5.22,-0.26l7.12,2.1l9.6,5.22l6.4,4.15l-0.2,2.44l0.14,0.28l1.69,1.04l0.45,-0.31l-0.51,-2.66l6.31,0.58l4.52,3.61l-2.1,1.52l-4.02,0.42l-0.27,0.29l-0.06,3.83l-0.81,0.67l-2.14,-0.11l-1.91,-1.39l-3.19,-1.13l-0.51,-1.63l-0.21,-0.2l-2.54,-0.67l-0.13,-0.0l-2.69,0.5l-1.12,-1.19l0.48,-1.36l-0.38,-0.39l-3.0,0.98l-0.17,0.44l1.02,1.76l-1.27,1.55l-3.09,1.71l-3.15,-0.29l-0.3,0.18l0.07,0.34l2.22,2.1l1.47,3.22l1.15,1.09l0.25,1.41l-0.48,0.76l-4.47,-0.81l-0.17,0.02l-6.97,2.9l-2.2,0.44l-0.11,0.05l-3.83,2.68l-3.63,2.32l-0.1,0.11l-0.76,1.4l-3.3,-2.4l-0.3,-0.03l-6.31,2.85l-0.99,-1.21l-0.4,-0.06l-2.32,1.54l-3.23,-0.49l-0.33,0.2l-0.79,2.39l-2.97,3.51l-0.07,0.21l0.09,1.47l0.22,0.27l2.62,0.74l-0.3,4.7l-2.06,0.12l-0.26,0.2l-1.07,2.94l0.04,0.27l0.83,1.19l-4.03,1.63l-0.18,0.21l-0.83,3.72l-3.55,0.79l-0.23,0.23l-0.73,3.32l-3.22,2.76l-0.76,-1.88l-1.07,-4.88l-1.39,-7.59l1.17,-4.76l2.05,-2.08l0.09,-0.19l0.11,-1.46l3.67,-0.77l0.15,-0.08l4.47,-4.61l4.29,-3.82l4.48,-3.01l0.11,-0.14l2.01,-5.43l-0.31,-0.4l-3.04,0.33l-0.24,0.17l-1.47,3.11l-5.98,3.94l-1.91,-4.36l-0.33,-0.17l-6.46,1.3l-0.15,0.08l-6.27,6.33l-0.01,0.41l1.7,1.87l-5.04,0.87l-3.51,0.34l0.16,-2.32l-0.26,-0.32l-3.89,-0.56l-0.19,0.04l-3.02,1.77l-7.63,-0.63l-8.24,1.1l-0.16,0.07l-8.11,7.09l-9.6,8.31l0.16,0.52l3.79,0.42l1.16,2.03l0.17,0.14l2.43,0.76l0.31,-0.08l1.5,-1.61l2.49,0.2l3.46,3.6l0.08,2.67l-1.91,3.26l-0.04,0.14l-0.21,3.91l-1.11,5.09l-3.73,4.55l-0.87,2.21l-6.73,7.14l-1.59,1.77l-3.23,1.72l-1.38,0.03l-1.48,-1.39l-0.37,-0.03l-3.36,2.22l-0.11,0.14l-0.16,0.42l-0.01,-1.09l1.0,-0.06l0.28,-0.27l0.36,-3.6l-0.61,-2.51l1.85,-0.94l2.94,0.53l0.32,-0.15l1.71,-3.1l0.84,-3.38l0.97,-1.18l1.32,-2.88l-0.34,-0.42l-4.14,0.95l-2.18,1.25l-3.51,-0.0l-0.95,-2.81l-0.1,-0.14l-2.97,-2.3l-0.11,-0.05l-4.19,-1.0l-0.89,-3.08l-0.87,-2.03l-0.95,-1.46l-1.54,-3.37l-0.12,-0.14l-2.27,-1.28l-3.83,-1.02l-3.37,0.1l-3.11,0.61l-0.13,0.06l-2.07,1.69l0.04,0.49l1.23,0.72l0.03,1.53l-1.34,1.05l-2.26,3.51l-0.05,0.17l0.02,1.27l-3.25,1.9l-2.87,-1.17l-0.14,-0.02l-2.86,0.26l-1.22,-1.02l-0.12,-0.06l-1.5,-0.35l-0.23,0.04l-3.62,2.27l-3.24,0.53l-2.28,0.79l-3.08,-0.51l-2.24,0.03l-1.49,-1.61l-2.45,-1.57l-0.11,-0.04l-2.6,-0.43l-3.17,0.43l-2.31,0.59l-3.31,-1.28l-0.45,-2.31l-0.21,-0.23l-2.94,-0.85l-2.26,-0.39l-2.77,-1.36l-0.37,0.09l-2.59,3.45l-0.03,0.32l0.91,1.74l-2.15,2.01l-3.47,-0.79l-2.44,-0.12l-1.59,-1.46l-0.2,-0.08l-2.55,-0.05l-2.12,-0.98l-0.24,-0.01l-3.85,1.57l-4.74,2.79l-2.59,0.55l-0.79,0.21l-1.21,-1.81l-0.29,-0.13l-3.05,0.41l-0.96,-1.25l-0.14,-0.1l-1.65,-0.6l-1.15,-1.82l-0.13,-0.12l-1.38,-0.6l-0.19,-0.02l-3.49,0.82l-3.35,-1.85l-0.38,0.08l-1.08,1.4l-5.36,-8.17l-3.02,-2.52l0.72,-0.85l0.01,-0.38l-0.37,-0.08l-6.22,3.21l-1.98,0.16l0.17,-1.51l-0.2,-0.31l-3.22,-1.17l-0.19,-0.0l-2.3,0.74l-0.72,-3.27l-0.24,-0.23l-4.5,-0.75l-0.21,0.04l-2.2,1.42l-6.21,1.27l-0.11,0.05l-1.16,0.81l-9.3,1.19l-0.18,0.09l-1.15,1.17l-0.02,0.39l1.56,2.01l-2.02,0.74l-0.16,0.42l0.35,0.68l-2.18,1.49l0.02,0.51l3.83,2.16l-0.45,1.13l-3.31,-0.13l-0.25,0.12l-0.57,0.77l-2.97,-1.59l-0.15,-0.04l-3.97,0.07l-0.13,0.03l-2.53,1.32l-2.84,-1.28l-5.52,-2.3l-0.12,-0.02l-3.91,0.09l-0.16,0.05l-5.17,3.6l-0.13,0.21l-0.25,1.89l-2.17,-1.6l-0.44,0.1l-2.0,3.59l0.06,0.37l0.55,0.5l-1.32,2.23l0.04,0.36l2.13,2.17l0.23,0.09l1.7,-0.08l1.42,1.89l-0.23,1.5l0.19,0.32l0.94,0.38l-0.89,1.44l-2.3,0.49l-0.17,0.11l-2.49,3.2l0.0,0.37l2.2,2.81l-0.23,1.93l0.06,0.22l2.56,3.32l-1.27,1.02l-0.4,0.66l-0.8,-0.15l-1.65,-1.75l-0.18,-0.09l-0.66,-0.09l-1.45,-0.64l-0.72,-1.16l-0.18,-0.13l-2.34,-0.63l-0.17,0.0l-1.32,0.41l-0.31,-0.4l-0.12,-0.09l-3.49,-1.48l-3.67,-0.49l-2.1,-0.52l-0.3,0.1l-0.12,0.14l-2.96,-2.4l-2.89,-1.19l-1.69,-1.42l1.27,-0.35l0.16,-0.1l2.08,-2.61l-0.04,-0.41l-1.02,-0.9l3.21,-1.12l0.2,-0.31l-0.07,-0.69l-0.37,-0.26l-1.86,0.42l0.05,-0.86l1.11,-0.76l2.35,-0.23l0.25,-0.19l0.39,-1.07l0.0,-0.19l-0.51,-1.64l0.95,-1.58l0.04,-0.16l-0.03,-0.95l-0.22,-0.28l-3.69,-1.06l-1.43,0.02l-1.45,-1.44l-0.29,-0.08l-1.83,0.49l-2.88,-1.04l0.04,-0.42l-0.04,-0.18l-0.89,-1.43l-0.23,-0.14l-1.77,-0.14l-0.13,-0.66l0.52,-0.56l0.01,-0.4l-1.6,-1.9l-0.27,-0.1l-2.55,0.32l-0.71,-0.16l-0.3,0.1l-0.53,0.63l-0.58,-0.08l-0.56,-1.97l-0.48,-0.94l0.17,-0.11l1.92,0.11l0.2,-0.06l0.97,-0.74l0.05,-0.42l-0.72,-0.91l-0.13,-0.1l-1.43,-0.51l0.09,-0.36l-0.13,-0.33l-0.97,-0.59l-1.43,-2.06l0.44,-0.77l0.04,-0.19l-0.25,-1.64l-0.2,-0.24l-2.45,-0.84l-0.19,-0.0l-1.05,0.34l-0.25,-0.62l-0.18,-0.17l-2.5,-0.84l-0.74,-1.93l-0.21,-1.7l-0.13,-0.21l-0.92,-0.63l0.83,-0.89l0.07,-0.27l-0.71,-3.26l1.69,-2.01l0.03,-0.34l-0.24,-0.41l2.63,-1.9l-0.01,-0.49l-2.31,-1.57l5.08,-4.61l2.33,-2.24l1.01,-2.08l-0.09,-0.37l-3.52,-2.56l0.94,-2.38l-0.04,-0.29l-2.14,-2.86l1.61,-3.35l-0.01,-0.29l-2.81,-4.58l2.19,-3.04l-0.06,-0.42l-3.7,-2.76l0.32,-2.67l1.87,-0.38l4.26,-1.77l2.46,-1.47l3.96,2.58l0.12,0.05l6.81,1.04l9.37,4.87l1.81,1.92l0.15,2.55l-2.61,2.06l-3.95,1.07l-11.1,-3.15l-0.17,0.0l-1.84,0.53l-0.1,0.53l3.97,2.97l0.15,1.77l0.16,4.14l0.19,0.27l3.21,1.22l1.94,1.03l0.44,-0.22l0.32,-1.94l-0.07,-0.25l-1.32,-1.52l1.25,-1.2l5.87,2.45l0.24,-0.01l2.11,-0.98l0.13,-0.42l-1.55,-2.75l5.52,-3.84l2.13,0.22l2.28,1.42l0.43,-0.12l1.46,-2.87l-0.04,-0.33l-1.97,-2.37l1.14,-2.38l-0.02,-0.3l-1.42,-2.07l6.15,1.22l1.14,1.92l-2.74,0.46l-0.25,0.3l0.02,2.36l0.12,0.24l1.97,1.44l0.25,0.05l3.87,-0.91l0.22,-0.23l0.58,-2.55l5.09,-1.98l8.67,-3.69l1.22,0.14l-2.06,2.2l0.18,0.5l3.11,0.45l0.23,-0.07l1.71,-1.41l4.59,-0.12l0.12,-0.03l3.53,-1.72l2.7,2.48l0.42,-0.01l2.85,-2.88l-0.0,-0.43l-2.42,-2.35l1.0,-1.13l7.2,1.31l3.42,1.36l9.06,4.97l0.39,-0.08l1.67,-2.27l-0.04,-0.4l-2.46,-2.23l-0.06,-0.82l-0.26,-0.27l-2.64,-0.38l0.69,-1.76l0.0,-0.22l-1.32,-3.47l-0.07,-1.27l4.52,-4.09l0.08,-0.11l1.6,-4.18l1.67,-0.84l6.33,1.2l0.46,2.31l-2.31,3.67l0.05,0.38l1.49,1.41l0.77,3.04l-0.56,6.05l0.09,0.24l2.62,2.54l-0.99,2.65l-4.87,5.96l0.17,0.48l2.86,0.61l0.31,-0.13l0.94,-1.42l2.67,-1.04l0.18,-0.19l0.64,-2.01l2.11,-1.98l0.05,-0.37l-1.38,-2.32l1.11,-2.74l-0.24,-0.41l-2.53,-0.33l-0.53,-2.16l1.96,-4.42l-0.05,-0.32l-3.03,-3.48l4.21,-2.94l0.12,-0.3l-0.52,-3.04l0.72,-0.06l1.18,2.35l-0.97,4.39l0.2,0.35l2.68,0.84l0.37,-0.38l-1.05,-3.07l3.89,-1.71l5.05,-0.24l4.55,2.62l0.36,-0.05l0.05,-0.36l-2.19,-3.84l-0.23,-4.78l4.07,-0.92l5.98,0.21l5.47,-0.64l0.2,-0.48l-1.88,-2.37l2.65,-2.99l2.75,-0.13l0.12,-0.03l4.82,-2.48l6.56,-0.67l0.23,-0.14l0.76,-1.27l6.33,-0.46l1.97,1.11l0.28,0.01l5.55,-2.71l4.53,0.08l0.29,-0.21l0.67,-2.18l2.29,-2.15l5.75,-2.13l3.48,1.4l-2.7,1.03l-0.19,0.31l0.26,0.26l5.47,0.78ZM871.83,65.73l0.25,-0.15l1.99,0.01l3.3,1.2l-0.08,0.22l-2.41,1.03l-5.73,0.49l-0.31,-1.0l2.99,-1.8ZM797.64,48.44l-2.22,1.51l-3.85,-0.43l-4.35,-1.85l0.42,-1.13l4.42,0.72l5.59,1.17ZM783.82,46.06l-1.71,3.25l-9.05,-0.14l-4.11,1.15l-4.64,-3.04l1.21,-3.13l3.11,-0.91l6.53,0.22l8.66,2.59ZM780.37,145.71l2.28,5.23l-3.09,-0.89l-0.37,0.19l-1.54,4.65l0.04,0.27l2.38,3.17l-0.05,1.4l-1.41,-1.41l-0.46,0.04l-1.23,1.81l-0.33,-1.86l0.28,-3.1l-0.28,-3.41l0.58,-2.46l0.11,-4.39l-0.03,-0.13l-1.44,-3.2l0.21,-4.39l2.19,-1.49l0.09,-0.41l-0.81,-1.3l0.48,-0.21l0.56,1.94l0.86,3.23l-0.05,3.36l1.03,3.35ZM780.16,57.18l-3.4,0.03l-5.06,-0.53l1.97,-1.59l2.95,-0.42l3.35,1.75l0.18,0.77ZM683.84,31.18l-13.29,1.97l4.16,-6.56l1.88,-0.58l1.77,0.34l6.08,3.02l-0.6,1.8ZM670.94,28.02l-5.18,0.65l-6.89,-1.58l-4.03,-2.07l-1.88,-3.98l-0.18,-0.16l-2.8,-0.93l5.91,-3.62l5.25,-1.29l4.73,2.88l5.63,5.44l-0.57,4.66ZM564.37,68.98l-0.85,0.23l-7.93,-0.57l-0.6,-1.84l-0.21,-0.2l-4.34,-1.18l-0.3,-2.08l2.34,-0.92l0.19,-0.29l-0.08,-2.43l4.85,-4.0l-0.12,-0.52l-1.68,-0.43l5.47,-3.94l0.11,-0.33l-0.6,-2.02l5.36,-2.55l8.22,-3.27l8.29,-0.96l4.34,-1.94l4.67,-0.65l1.45,1.72l-1.43,1.37l-8.8,2.52l-7.65,2.42l-7.92,4.84l-3.73,4.75l-3.92,4.58l-0.07,0.23l0.51,3.88l0.11,0.2l4.32,3.39ZM548.86,18.57l-3.28,0.75l-2.25,0.44l-0.22,0.19l-0.3,0.81l-2.67,0.86l-2.27,-1.14l1.2,-1.51l-0.23,-0.49l-3.14,-0.1l2.48,-0.54l3.55,-0.07l0.44,1.36l0.49,0.12l1.4,-1.35l2.2,-0.9l3.13,1.08l-0.54,0.49ZM477.5,133.25l-4.21,0.05l-2.69,-0.34l0.39,-1.03l3.24,-1.06l2.51,0.58l0.85,0.43l-0.2,0.71l-0.0,0.15l0.12,0.52Z",name:"Russia"},RW:{path:"M497.03,288.12l0.78,1.11l-0.12,1.19l-0.49,0.21l-1.25,-0.15l-0.3,0.16l-0.67,1.24l-1.01,-0.13l0.16,-0.92l0.22,-0.12l0.15,-0.24l0.09,-1.37l0.49,-0.48l0.42,0.18l0.25,-0.01l1.26,-0.65Z",name:"Rwanda"},RS:{path:"M469.75,168.65l0.21,-0.21l0.36,-1.44l-0.08,-0.29l-1.06,-1.03l0.54,-1.16l-0.28,-0.43l-0.26,0.0l0.55,-0.67l-0.01,-0.39l-0.77,-0.86l-0.45,-0.89l1.56,-0.67l1.39,0.12l1.22,1.1l0.26,0.91l0.16,0.19l1.38,0.66l0.17,1.12l0.14,0.21l1.46,0.9l0.35,-0.03l0.62,-0.54l0.09,0.06l-0.28,0.25l-0.03,0.42l0.29,0.34l-0.44,0.5l-0.07,0.26l0.22,1.12l0.07,0.14l1.02,1.1l-0.81,0.84l-0.42,0.96l0.04,0.3l0.12,0.15l-0.15,0.16l-1.04,0.04l-0.39,0.08l0.33,-0.81l-0.29,-0.41l-0.21,0.01l-0.39,-0.45l-0.13,-0.09l-0.32,-0.11l-0.27,-0.4l-0.14,-0.11l-0.4,-0.16l-0.31,-0.37l-0.34,-0.09l-0.45,0.17l-0.18,0.18l-0.29,0.84l-0.96,-0.65l-0.81,-0.33l-0.32,-0.37l-0.22,-0.18Z",name:"Republic of Serbia"},LT:{path:"M478.13,133.31l-0.14,-0.63l0.25,-0.88l-0.15,-0.35l-1.17,-0.58l-2.43,-0.57l-0.45,-2.51l2.58,-0.97l4.14,0.22l2.3,-0.32l0.26,0.54l0.22,0.17l1.26,0.22l2.25,1.6l0.19,1.23l-1.87,1.01l-0.14,0.18l-0.54,1.83l-2.54,1.21l-2.18,-0.02l-0.52,-0.91l-0.18,-0.14l-1.11,-0.32Z",name:"Lithuania"},LU:{path:"M435.95,147.99l0.33,0.49l-0.11,1.07l-0.39,0.04l-0.29,-0.15l0.21,-1.4l0.25,-0.05Z",name:"Luxembourg"},LR:{path:"M401.37,273.67l-0.32,0.01l-2.48,-1.15l-2.24,-1.89l-2.14,-1.38l-1.47,-1.42l0.44,-0.59l0.05,-0.13l0.12,-0.65l1.07,-1.3l1.08,-1.09l0.52,-0.07l0.43,-0.18l0.84,1.24l-0.15,0.89l0.07,0.25l0.49,0.54l0.22,0.1l0.71,0.01l0.27,-0.16l0.42,-0.83l0.19,0.02l-0.06,0.52l0.23,1.12l-0.5,1.03l0.06,0.35l0.73,0.69l0.14,0.08l0.71,0.15l0.92,0.91l0.06,0.76l-0.17,0.22l-0.06,0.15l-0.17,1.8Z",name:"Liberia"},RO:{path:"M477.94,155.19l1.02,-0.64l1.49,0.33l1.52,0.01l1.09,0.73l0.32,0.01l0.81,-0.46l1.8,-0.3l0.18,-0.1l0.54,-0.64l0.86,0.0l0.64,0.26l0.71,0.87l0.8,1.35l1.39,1.81l0.07,1.25l-0.26,1.3l0.01,0.15l0.45,1.42l0.15,0.18l1.12,0.57l0.25,0.01l1.05,-0.45l0.86,0.4l0.03,0.43l-0.92,0.51l-0.63,-0.24l-0.4,0.22l-0.64,3.41l-1.12,-0.24l-1.78,-1.09l-0.23,-0.04l-2.95,0.71l-1.25,0.77l-3.55,-0.16l-1.89,-0.47l-0.14,-0.0l-0.75,0.17l-0.61,-1.07l-0.3,-0.36l0.36,-0.32l-0.04,-0.48l-0.62,-0.38l-0.36,0.03l-0.62,0.54l-1.15,-0.71l-0.18,-1.14l-0.17,-0.22l-1.4,-0.67l-0.24,-0.86l-0.09,-0.14l-0.96,-0.87l1.49,-0.44l0.16,-0.11l1.51,-2.14l1.15,-2.09l1.44,-0.63Z",name:"Romania"},GW:{path:"M383.03,256.73l-1.12,-0.88l-0.14,-0.06l-0.94,-0.15l-0.43,-0.54l0.01,-0.27l-0.13,-0.26l-0.68,-0.48l-0.05,-0.16l0.99,-0.31l0.77,0.08l0.15,-0.02l0.61,-0.26l4.25,0.1l-0.02,0.44l-0.19,0.18l-0.08,0.29l0.17,0.66l-0.17,0.14l-0.44,0.0l-0.16,0.05l-0.57,0.37l-0.66,-0.04l-0.24,0.1l-0.92,1.03Z",name:"Guinea Bissau"},GT:{path:"M195.13,249.89l-1.05,-0.35l-1.5,-0.04l-1.06,-0.47l-1.19,-0.93l0.04,-0.53l0.27,-0.55l-0.03,-0.31l-0.24,-0.32l1.02,-1.77l3.04,-0.01l0.3,-0.28l0.06,-0.88l-0.19,-0.3l-0.3,-0.11l-0.23,-0.45l-0.11,-0.12l-0.9,-0.58l-0.35,-0.33l0.37,-0.0l0.3,-0.3l0.0,-1.15l4.05,0.02l-0.02,1.74l-0.2,2.89l0.3,0.32l0.67,-0.0l0.75,0.42l0.4,-0.11l-0.62,0.53l-1.17,0.7l-0.13,0.16l-0.18,0.49l0.0,0.21l0.14,0.34l-0.35,0.44l-0.49,0.13l-0.2,0.41l0.03,0.06l-0.27,0.16l-0.86,0.64l-0.12,0.22ZM199.35,245.38l0.07,-0.13l0.05,0.02l-0.13,0.11Z",name:"Guatemala"},GR:{path:"M487.2,174.55l-0.64,1.54l-0.43,0.24l-1.41,-0.08l-1.28,-0.28l-0.14,0.0l-3.03,0.77l-0.13,0.51l1.39,1.34l-0.78,0.29l-1.2,0.0l-1.23,-1.42l-0.47,0.02l-0.47,0.65l-0.04,0.27l0.56,1.76l0.06,0.11l1.02,1.12l-0.66,0.45l-0.04,0.46l1.39,1.35l1.15,0.79l0.02,1.06l-1.91,-0.63l-0.36,0.42l0.56,1.12l-1.2,0.23l-0.22,0.4l0.8,2.14l-1.15,0.02l-1.89,-1.15l-0.89,-2.19l-0.43,-1.91l-0.05,-0.11l-0.98,-1.35l-1.24,-1.62l-0.13,-0.63l1.07,-1.32l0.06,-0.14l0.13,-0.81l0.68,-0.36l0.16,-0.25l0.03,-0.54l1.4,-0.23l0.12,-0.05l0.87,-0.6l1.26,0.05l0.25,-0.11l0.34,-0.43l0.33,-0.07l1.81,0.08l0.13,-0.02l1.87,-0.77l1.64,0.97l0.19,0.04l2.28,-0.28l0.26,-0.29l0.02,-0.95l0.56,0.36ZM480.44,192.0l1.05,0.74l0.01,0.0l-1.26,-0.23l0.2,-0.51ZM481.76,192.79l1.86,-0.15l1.53,0.17l-0.02,0.19l0.34,0.3l-2.28,0.15l0.01,-0.13l-0.25,-0.31l-1.19,-0.22ZM485.65,193.28l0.65,-0.16l-0.05,0.12l-0.6,0.04Z",name:"Greece"},GQ:{path:"M444.81,282.04l-0.21,-0.17l0.74,-2.4l3.56,0.05l0.02,2.42l-3.34,-0.02l-0.76,0.13Z",name:"Equatorial Guinea"},GY:{path:"M271.34,264.25l1.43,0.81l1.44,1.53l0.06,1.19l0.28,0.28l0.84,0.05l2.13,1.92l-0.34,1.93l-1.37,0.59l-0.17,0.34l0.12,0.51l-0.43,1.21l0.03,0.26l1.11,1.82l0.26,0.14l0.56,0.0l0.32,1.29l1.25,1.78l-0.08,0.01l-1.34,-0.21l-0.24,0.06l-0.78,0.64l-1.06,0.41l-0.76,0.1l-0.22,0.15l-0.18,0.32l-0.95,-0.1l-1.38,-1.05l-0.19,-1.13l-0.6,-1.18l0.37,-1.96l0.65,-0.83l0.03,-0.32l-0.57,-1.17l-0.15,-0.14l-0.62,-0.27l0.25,-0.85l-0.08,-0.3l-0.58,-0.58l-0.24,-0.09l-1.15,0.1l-1.41,-1.58l0.48,-0.49l0.09,-0.22l-0.04,-0.92l1.31,-0.34l0.73,-0.52l0.04,-0.44l-0.75,-0.82l0.16,-0.66l1.74,-1.3Z",name:"Guyana"},GE:{path:"M525.41,174.19l0.26,-0.88l-0.0,-0.17l-0.63,-2.06l-0.1,-0.15l-1.45,-1.12l-0.11,-0.05l-1.31,-0.33l-0.66,-0.69l1.97,0.48l3.65,0.49l3.3,1.41l0.39,0.5l0.33,0.1l1.43,-0.45l2.14,0.58l0.7,1.14l0.13,0.12l1.06,0.47l-0.18,0.11l-0.08,0.43l1.08,1.41l-0.06,0.06l-1.16,-0.15l-1.82,-0.84l-0.31,0.04l-0.55,0.44l-3.29,0.44l-2.32,-1.41l-0.17,-0.04l-2.25,0.12Z",name:"Georgia"},GB:{path:"M412.82,118.6l-2.31,3.4l-0.0,0.33l0.31,0.13l2.52,-0.49l2.34,0.02l-0.56,2.51l-2.22,3.13l0.22,0.47l2.43,0.21l2.35,4.35l0.17,0.14l1.58,0.51l1.49,3.78l0.73,1.37l0.2,0.15l2.76,0.59l-0.25,1.75l-1.18,0.91l-0.08,0.39l0.87,1.49l-1.96,1.51l-3.31,-0.02l-4.15,0.88l-1.07,-0.59l-0.35,0.04l-1.55,1.44l-2.17,-0.35l-0.22,0.05l-1.61,1.15l-0.78,-0.38l3.31,-3.12l2.18,-0.7l0.21,-0.31l-0.26,-0.27l-3.78,-0.54l-0.48,-0.9l2.3,-0.92l0.13,-0.46l-1.29,-1.71l0.39,-1.83l3.46,0.29l0.32,-0.24l0.37,-1.99l-0.06,-0.24l-1.71,-2.17l-0.18,-0.11l-2.91,-0.58l-0.43,-0.68l0.82,-1.4l-0.03,-0.35l-0.82,-0.97l-0.46,0.01l-0.85,1.05l-0.11,-2.6l-0.05,-0.16l-1.19,-1.7l0.86,-3.53l1.81,-2.75l1.88,0.26l2.38,-0.24ZM406.39,132.84l-1.09,1.92l-1.65,-0.62l-1.26,0.02l0.41,-1.46l0.0,-0.16l-0.42,-1.51l1.62,-0.11l2.39,1.92Z",name:"United Kingdom"},GA:{path:"M448.76,294.47l-2.38,-2.34l-1.63,-2.04l-1.46,-2.48l0.06,-0.66l0.54,-0.81l0.61,-1.82l0.46,-1.69l0.63,-0.11l3.62,0.03l0.3,-0.3l-0.02,-2.75l0.88,-0.12l1.47,0.32l0.13,0.0l1.39,-0.3l-0.13,0.87l0.03,0.19l0.7,1.29l0.3,0.16l1.74,-0.19l0.36,0.29l-1.01,2.7l0.05,0.29l1.13,1.42l0.25,1.82l-0.3,1.56l-0.64,0.99l-1.93,-0.09l-1.26,-1.13l-0.5,0.17l-0.16,0.91l-1.48,0.27l-0.12,0.05l-0.86,0.63l-0.08,0.39l0.81,1.42l-1.48,1.08Z",name:"Gabon"},GN:{path:"M399.83,265.31l-0.69,-0.06l-0.3,0.16l-0.43,0.85l-0.39,-0.01l-0.3,-0.33l0.14,-0.87l-0.05,-0.22l-1.05,-1.54l-0.37,-0.11l-0.61,0.27l-0.84,0.12l0.02,-0.54l-0.04,-0.17l-0.35,-0.57l0.07,-0.63l-0.03,-0.17l-0.57,-1.11l-0.7,-0.9l-0.24,-0.12l-2.0,-0.0l-0.19,0.07l-0.51,0.42l-0.6,0.05l-0.21,0.11l-0.43,0.55l-0.3,0.7l-1.04,0.86l-0.91,-1.24l-1.0,-1.02l-0.69,-0.37l-0.52,-0.42l-0.3,-1.11l-0.37,-0.56l-0.1,-0.1l-0.4,-0.23l0.77,-0.85l0.62,0.04l0.18,-0.05l0.58,-0.38l0.46,-0.0l0.19,-0.07l0.39,-0.34l0.1,-0.3l-0.17,-0.67l0.15,-0.14l0.09,-0.2l0.03,-0.57l0.87,0.02l1.76,0.6l0.13,0.01l0.55,-0.06l0.22,-0.13l0.08,-0.12l1.18,0.17l0.17,-0.02l0.09,0.56l0.3,0.25l0.4,-0.0l0.14,-0.03l0.56,-0.29l0.23,0.05l0.63,0.59l0.15,0.07l1.07,0.2l0.24,-0.06l0.65,-0.52l0.77,-0.32l0.55,-0.32l0.3,0.04l0.44,0.45l0.34,0.74l0.84,0.87l-0.35,0.45l-0.06,0.15l-0.1,0.82l0.42,0.31l0.35,-0.16l0.05,0.04l-0.1,0.59l0.09,0.27l0.42,0.4l-0.06,0.02l-0.18,0.21l-0.2,0.86l0.03,0.21l0.56,1.02l0.52,1.71l-0.65,0.21l-0.15,0.12l-0.24,0.35l-0.03,0.28l0.16,0.41l-0.1,0.76l-0.12,0.0Z",name:"Guinea"},GM:{path:"M379.18,251.48l0.15,-0.55l2.51,-0.07l0.21,-0.09l0.48,-0.52l0.58,-0.03l0.91,0.58l0.16,0.05l0.78,0.01l0.14,-0.03l0.59,-0.31l0.16,0.24l-0.71,0.38l-0.94,-0.04l-1.02,-0.51l-0.3,0.01l-0.86,0.55l-0.37,0.02l-0.14,0.04l-0.53,0.31l-1.81,-0.04Z",name:"Gambia"},GL:{path:"M304.13,6.6l8.19,-3.63l8.72,0.28l0.19,-0.06l3.12,-2.28l8.75,-0.61l19.94,0.8l14.93,4.75l-3.92,2.01l-9.52,0.27l-13.48,0.6l-0.27,0.2l0.09,0.33l1.26,1.09l0.22,0.07l8.81,-0.67l7.49,2.07l0.19,-0.01l4.68,-1.78l1.76,1.84l-2.59,3.26l-0.01,0.36l0.34,0.11l6.35,-2.2l12.09,-2.32l7.31,1.14l1.17,2.13l-9.9,4.05l-1.43,1.32l-7.91,0.98l-0.26,0.31l0.29,0.29l5.25,0.25l-2.63,3.72l-2.02,3.61l-0.04,0.15l0.08,6.05l0.07,0.19l2.61,3.0l-3.4,0.2l-4.12,1.66l-0.04,0.54l4.5,2.67l0.53,3.9l-2.39,0.42l-0.19,0.48l2.91,3.83l-5.0,0.32l-0.27,0.22l0.12,0.33l2.69,1.84l-0.65,1.35l-3.36,0.71l-3.46,0.01l-0.21,0.51l3.05,3.15l0.02,1.53l-4.54,-1.79l-0.32,0.06l-1.29,1.26l0.11,0.5l3.33,1.15l3.17,2.74l0.85,3.29l-4.0,0.78l-1.83,-1.66l-3.1,-2.64l-0.36,-0.02l-0.13,0.33l0.8,2.92l-2.76,2.26l-0.09,0.33l0.28,0.2l6.59,0.19l2.47,0.18l-5.86,3.38l-6.76,3.43l-7.26,1.48l-2.73,0.02l-0.16,0.05l-2.67,1.72l-3.44,4.42l-5.28,2.86l-1.73,0.18l-3.33,1.01l-3.59,0.96l-0.15,0.1l-2.15,2.52l-0.07,0.19l-0.03,2.76l-1.21,2.49l-4.03,3.1l-0.1,0.33l0.98,2.94l-2.31,6.57l-3.21,0.21l-3.6,-3.0l-0.19,-0.07l-4.9,-0.02l-2.29,-1.97l-1.69,-3.78l-4.31,-4.86l-1.23,-2.52l-0.34,-3.58l-0.08,-0.17l-3.35,-3.67l0.85,-2.92l-0.09,-0.31l-1.5,-1.34l2.33,-4.7l3.67,-1.57l0.15,-0.13l1.02,-1.93l0.52,-3.47l-0.44,-0.31l-2.85,1.57l-1.33,0.64l-2.12,0.59l-2.81,-1.32l-0.15,-2.79l0.88,-2.17l2.09,-0.06l5.07,1.2l0.34,-0.17l-0.11,-0.37l-4.3,-2.9l-2.24,-1.58l-0.25,-0.05l-2.38,0.62l-1.7,-0.93l2.62,-4.1l-0.03,-0.36l-1.51,-1.75l-1.97,-3.3l-3.01,-5.21l-0.1,-0.11l-3.04,-1.85l0.03,-1.94l-0.18,-0.28l-6.82,-3.01l-5.35,-0.38l-6.69,0.21l-6.03,0.37l-2.81,-1.59l-3.84,-2.9l5.94,-1.5l5.01,-0.28l0.28,-0.29l-0.26,-0.31l-10.68,-1.38l-5.38,-2.1l0.27,-1.68l9.3,-2.6l9.18,-2.68l0.19,-0.16l0.97,-2.05l-0.18,-0.42l-6.29,-1.91l1.81,-1.9l8.58,-4.05l3.6,-0.63l0.23,-0.4l-0.92,-2.37l5.59,-1.5l7.66,-0.95l7.58,-0.05l2.65,1.84l0.31,0.02l6.52,-3.29l5.85,2.24l3.55,0.49l5.17,1.95l0.38,-0.16l-0.13,-0.39l-5.77,-3.16l0.29,-2.26Z",name:"Greenland"},KW:{path:"M540.87,207.81l0.41,0.94l-0.18,0.51l0.0,0.21l0.65,1.66l-1.15,0.05l-0.54,-1.12l-0.24,-0.17l-1.73,-0.2l1.44,-2.06l1.33,0.18Z",name:"Kuwait"},GH:{path:"M423.16,269.88l-3.58,1.34l-1.41,0.87l-2.13,0.69l-1.91,-0.61l0.09,-0.75l-0.03,-0.17l-1.04,-2.07l0.62,-2.7l1.04,-2.08l0.03,-0.19l-1.0,-5.46l0.05,-1.12l4.04,-0.11l1.08,0.18l0.18,-0.03l0.72,-0.36l0.75,0.13l-0.11,0.48l0.06,0.26l0.98,1.22l-0.0,1.77l0.24,1.99l0.05,0.13l0.55,0.81l-0.52,2.14l0.19,1.37l0.69,1.66l0.38,0.62Z",name:"Ghana"},OM:{path:"M568.16,231.0l-0.08,0.1l-0.84,1.61l-0.93,-0.11l-0.27,0.11l-0.58,0.73l-0.4,1.32l-0.01,0.14l0.29,1.61l-0.07,0.09l-1.0,-0.01l-0.16,0.04l-1.56,0.97l-0.14,0.2l-0.23,1.17l-0.41,0.4l-1.44,-0.02l-0.17,0.05l-0.98,0.65l-0.13,0.25l0.01,0.87l-0.97,0.57l-1.27,-0.22l-0.19,0.03l-1.63,0.84l-0.88,0.11l-2.55,-5.57l7.2,-2.49l0.19,-0.19l1.67,-5.23l-0.03,-0.25l-1.1,-1.78l0.05,-0.89l0.68,-1.03l0.05,-0.16l0.01,-0.89l0.96,-0.44l0.07,-0.5l-0.32,-0.26l0.16,-1.31l0.85,-0.01l1.03,1.67l0.09,0.09l1.4,0.96l0.11,0.05l1.82,0.34l1.37,0.45l1.75,2.32l0.13,0.1l0.7,0.26l-0.0,0.3l-1.25,2.19l-1.01,0.8ZM561.88,218.47l-0.01,0.02l-0.15,-0.29l0.3,-0.38l-0.14,0.65Z",name:"Oman"},SOL:{path:"M543.2,261.06l-1.07,1.46l-1.65,1.99l-1.91,0.01l-8.08,-2.95l-0.89,-0.84l-0.9,-1.19l-0.81,-1.23l0.44,-0.73l0.76,-1.12l0.49,0.28l0.52,1.05l1.13,1.06l0.2,0.08l1.24,0.01l2.42,-0.65l2.77,-0.31l2.17,-0.78l1.31,-0.19l0.84,-0.43l1.03,-0.06l-0.01,4.54Z",name:"Somaliland"},_2:{path:"M384.23,230.37l0.07,-0.06l0.28,-0.89l0.99,-1.13l0.07,-0.13l0.8,-3.54l3.4,-2.8l0.09,-0.13l0.76,-2.17l0.07,5.5l-2.07,0.21l-0.24,0.17l-0.61,1.36l-0.02,0.16l0.43,3.46l-4.01,-0.01ZM391.82,218.2l0.07,-0.06l0.75,-1.93l1.86,-0.25l0.94,0.34l1.14,0.0l0.18,-0.06l0.73,-0.56l1.41,-0.08l-0.0,2.72l-7.08,-0.12Z",name:"Western Sahara"},_1:{path:"M472.71,172.84l-0.07,-0.43l-0.16,-0.22l-0.53,-0.27l-0.38,-0.58l0.3,-0.43l0.51,-0.19l0.18,-0.18l0.3,-0.87l0.12,-0.04l0.22,0.26l0.12,0.09l0.38,0.15l0.28,0.41l0.15,0.12l0.34,0.12l0.43,0.5l0.15,0.07l-0.12,0.3l-0.27,0.32l-0.03,0.18l-0.31,0.06l-1.48,0.47l-0.15,0.17Z",name:"Kosovo"},JO:{path:"M510.26,200.93l0.28,-0.57l2.53,1.0l0.27,-0.02l4.57,-2.77l0.84,2.84l-0.28,0.25l-4.95,1.37l-0.14,0.49l2.24,2.48l-0.5,0.28l-0.13,0.14l-0.35,0.78l-1.76,0.35l-0.2,0.14l-0.57,0.94l-0.94,0.73l-2.45,-0.38l-0.03,-0.12l1.23,-4.32l-0.04,-1.1l0.34,-0.75l0.03,-0.12l0.0,-1.63Z",name:"Jordan"},HR:{path:"M455.49,162.73l1.53,0.09l0.24,-0.1l0.29,-0.34l0.64,0.38l0.14,0.04l0.98,0.06l0.32,-0.3l-0.01,-0.66l0.67,-0.25l0.19,-0.22l0.21,-1.11l1.72,-0.72l0.65,0.32l1.94,1.37l2.07,0.6l0.22,-0.02l0.67,-0.33l0.47,0.94l0.67,0.76l-0.63,0.77l-0.91,-0.55l-0.16,-0.04l-1.69,0.04l-2.2,-0.51l-1.17,0.07l-0.21,0.11l-0.36,0.42l-0.67,-0.53l-0.46,0.12l-0.52,1.29l0.05,0.31l1.21,1.42l0.58,0.99l1.15,1.14l0.95,0.68l0.92,1.23l0.1,0.09l1.75,0.91l-1.87,-0.89l-1.5,-1.11l-2.23,-0.88l-1.77,-1.9l0.12,-0.06l0.1,-0.47l-1.07,-1.22l-0.04,-0.94l-0.21,-0.27l-1.61,-0.49l-0.35,0.14l-0.53,0.93l-0.41,-0.57l0.04,-0.73Z",name:"Croatia"},HT:{path:"M237.82,234.68l1.35,0.1l1.95,0.37l0.18,1.15l-0.16,0.83l-0.51,0.37l-0.06,0.44l0.57,0.68l-0.02,0.22l-1.31,-0.35l-1.26,0.17l-1.49,-0.18l-0.15,0.02l-1.03,0.43l-1.02,-0.61l0.09,-0.36l2.04,0.32l1.9,0.21l0.19,-0.05l0.9,-0.58l0.05,-0.47l-1.05,-1.03l0.02,-0.86l-0.23,-0.3l-1.13,-0.29l0.18,-0.23Z",name:"Haiti"},HU:{path:"M461.96,157.92l0.68,-1.66l-0.03,-0.29l-0.15,-0.22l0.84,-0.0l0.3,-0.26l0.12,-0.84l0.88,0.57l0.98,0.38l0.16,0.01l2.1,-0.39l0.23,-0.21l0.14,-0.45l0.88,-0.1l1.06,-0.43l0.13,0.1l0.28,0.04l1.18,-0.4l0.14,-0.1l0.52,-0.67l0.63,-0.15l2.6,0.95l0.26,-0.03l0.38,-0.23l1.12,0.7l0.1,0.49l-1.31,0.57l-0.14,0.13l-1.18,2.14l-1.44,2.04l-1.85,0.55l-1.51,-0.13l-0.14,0.02l-1.92,0.82l-0.85,0.42l-1.91,-0.55l-1.83,-1.31l-0.74,-0.37l-0.44,-0.97l-0.26,-0.18Z",name:"Hungary"},HN:{path:"M202.48,251.87l-0.33,-0.62l-0.18,-0.14l-0.5,-0.15l0.13,-0.76l-0.11,-0.28l-0.34,-0.28l-0.6,-0.23l-0.18,-0.01l-0.81,0.22l-0.16,-0.24l-0.72,-0.39l-0.51,-0.48l-0.12,-0.07l-0.31,-0.09l0.24,-0.3l0.04,-0.3l-0.16,-0.4l0.1,-0.28l1.14,-0.69l1.0,-0.86l0.09,0.04l0.3,-0.05l0.47,-0.39l0.49,-0.03l0.14,0.13l0.29,0.06l0.31,-0.1l1.16,0.22l1.24,-0.08l0.81,-0.28l0.29,-0.25l0.63,0.1l0.69,0.18l0.65,-0.06l0.49,-0.2l1.04,0.32l0.38,0.06l0.7,0.44l0.71,0.56l0.92,0.41l0.1,0.11l-0.11,-0.01l-0.23,0.09l-0.3,0.3l-0.76,0.29l-0.58,0.0l-0.15,0.04l-0.45,0.26l-0.31,-0.07l-0.37,-0.34l-0.28,-0.07l-0.26,0.07l-0.18,0.15l-0.23,0.43l-0.04,-0.0l-0.33,0.28l-0.03,0.4l-0.76,0.61l-0.45,0.3l-0.15,0.16l-0.51,-0.36l-0.41,0.06l-0.45,0.56l-0.41,-0.01l-0.59,0.06l-0.27,0.31l0.04,0.96l-0.07,0.0l-0.25,0.16l-0.24,0.45l-0.42,0.06Z",name:"Honduras"},PR:{path:"M254.95,238.31l1.15,0.21l0.2,0.23l-0.36,0.36l-1.76,-0.01l-1.2,0.07l-0.09,-0.69l0.17,-0.18l1.89,0.01Z",name:"Puerto Rico"},PS:{path:"M509.66,201.06l-0.0,1.44l-0.29,0.63l-0.59,0.19l0.02,-0.11l0.52,-0.31l-0.02,-0.53l-0.41,-0.2l0.36,-1.28l0.41,0.17Z",name:"Palestine"},PT:{path:"M398.65,173.6l0.75,-0.63l0.7,-0.3l0.51,1.2l0.28,0.18l1.48,-0.0l0.2,-0.08l0.33,-0.3l1.16,0.08l0.52,1.11l-0.95,0.66l-0.13,0.24l-0.03,2.2l-0.33,0.35l-0.08,0.18l-0.08,1.17l-0.86,0.19l-0.2,0.44l0.93,1.64l-0.64,1.79l0.07,0.31l0.72,0.72l-0.24,0.56l-0.9,1.05l-0.07,0.26l0.17,0.77l-0.73,0.54l-1.18,-0.36l-0.16,-0.0l-0.85,0.21l0.31,-1.81l-0.23,-1.87l-0.23,-0.25l-0.99,-0.24l-0.49,-0.91l0.18,-1.72l0.93,-0.99l0.08,-0.16l0.17,-1.17l0.52,-1.76l-0.04,-1.36l-0.51,-1.14l-0.09,-0.8Z",name:"Portugal"},PY:{path:"M264.33,341.43l0.93,-2.96l0.07,-1.42l1.1,-2.1l4.19,-0.73l2.22,0.04l2.12,1.21l0.07,0.76l0.7,1.38l-0.16,3.48l0.24,0.31l2.64,0.5l0.19,-0.03l0.9,-0.45l1.47,0.62l0.38,0.64l0.23,2.35l0.3,1.07l0.25,0.21l0.93,0.12l0.16,-0.02l0.8,-0.37l0.61,0.33l-0.0,1.25l-0.33,1.53l-0.5,1.57l-0.39,2.26l-2.14,1.94l-1.85,0.4l-2.74,-0.4l-2.13,-0.62l2.26,-3.75l0.03,-0.24l-0.36,-1.18l-0.17,-0.19l-2.55,-1.03l-3.04,-1.95l-2.07,-0.43l-4.4,-4.12Z",name:"Paraguay"},PA:{path:"M213.65,263.79l0.18,-0.43l0.02,-0.18l-0.06,-0.28l0.23,-0.18l-0.01,-0.48l-0.4,-0.29l-0.01,-0.62l0.57,-0.13l0.68,0.69l-0.04,0.39l0.26,0.33l1.0,0.11l0.27,-0.1l0.49,0.44l0.24,0.07l1.34,-0.22l1.04,-0.62l1.49,-0.5l0.86,-0.73l0.99,0.11l0.18,0.28l1.35,0.08l1.02,0.4l0.78,0.72l0.71,0.53l-0.1,0.12l-0.05,0.3l0.53,1.34l-0.28,0.44l-0.6,-0.13l-0.36,0.22l-0.2,0.76l-0.41,-0.36l-0.44,-1.12l0.49,-0.53l-0.14,-0.49l-0.51,-0.14l-0.41,-0.72l-0.11,-0.11l-1.25,-0.7l-0.19,-0.04l-1.1,0.16l-0.22,0.15l-0.47,0.81l-0.9,0.56l-0.49,0.08l-0.22,0.17l-0.25,0.52l0.05,0.32l0.93,1.07l-0.41,0.21l-0.29,0.3l-0.81,0.09l-0.36,-1.26l-0.53,-0.1l-0.21,0.28l-0.5,-0.09l-0.44,-0.88l-0.22,-0.16l-0.99,-0.16l-0.61,-0.28l-0.13,-0.03l-1.0,0.0Z",name:"Panama"},PG:{path:"M808.4,298.6l0.62,0.46l1.19,1.56l1.04,0.77l-0.18,0.37l-0.42,0.15l-0.92,-0.82l-1.05,-1.53l-0.27,-0.96ZM804.09,296.06l-0.3,0.26l-0.36,-1.11l-0.66,-1.06l-2.55,-1.89l-1.42,-0.59l0.17,-0.15l1.16,0.6l0.85,0.55l1.01,0.58l0.97,1.02l0.9,0.76l0.24,1.03ZM796.71,297.99l0.15,0.82l0.34,0.24l1.43,-0.19l0.19,-0.11l0.68,-0.82l1.36,-0.87l0.13,-0.31l-0.21,-1.13l1.04,-0.03l0.3,0.25l-0.04,1.17l-0.74,1.34l-1.17,0.18l-0.22,0.15l-0.35,0.62l-2.51,1.13l-1.21,-0.0l-1.99,-0.71l-1.19,-0.58l0.07,-0.28l1.98,0.32l1.46,-0.2l0.24,-0.21l0.25,-0.79ZM789.24,303.52l0.11,0.15l2.19,1.62l1.6,2.62l0.27,0.14l1.09,-0.06l-0.07,0.77l0.23,0.32l1.23,0.27l-0.14,0.09l0.05,0.53l2.39,0.95l-0.11,0.28l-1.33,0.14l-0.51,-0.55l-0.18,-0.09l-4.59,-0.65l-1.87,-1.55l-1.38,-1.35l-1.28,-2.17l-0.16,-0.13l-3.27,-1.1l-0.19,0.0l-2.12,0.72l-1.58,0.85l-0.15,0.31l0.28,1.63l-1.65,0.73l-1.37,-0.4l-2.3,-0.09l-0.08,-15.65l3.95,1.57l4.58,1.42l1.67,1.25l1.32,1.19l0.36,1.39l0.19,0.21l4.06,1.51l0.39,0.85l-1.9,0.22l-0.25,0.39l0.55,1.68Z",name:"Papua New Guinea"},PE:{path:"M246.44,329.21l-0.63,1.25l-1.05,0.54l-2.25,-1.33l-0.19,-0.93l-0.16,-0.21l-4.95,-2.58l-4.46,-2.79l-1.87,-1.52l-0.94,-1.91l0.33,-0.6l-0.01,-0.31l-2.11,-3.33l-2.46,-4.66l-2.36,-5.02l-1.04,-1.18l-0.77,-1.81l-0.08,-0.11l-1.95,-1.64l-1.54,-0.88l0.61,-0.85l0.02,-0.31l-1.15,-2.27l0.69,-1.56l1.59,-1.26l0.12,0.42l-0.56,0.47l-0.11,0.25l0.07,0.92l0.36,0.27l0.97,-0.19l0.85,0.23l0.99,1.19l0.41,0.05l1.42,-1.03l0.11,-0.16l0.46,-1.64l1.45,-2.06l2.92,-0.96l0.11,-0.07l2.73,-2.62l0.84,-1.72l0.02,-0.18l-0.3,-1.65l0.28,-0.1l1.49,1.06l0.77,1.14l0.1,0.09l1.08,0.6l1.43,2.55l0.21,0.15l1.86,0.31l0.18,-0.03l1.25,-0.6l0.77,0.37l0.17,0.03l1.4,-0.2l1.57,0.96l-1.45,2.29l0.23,0.46l0.63,0.05l0.66,0.7l-1.51,-0.08l-0.24,0.1l-0.27,0.31l-1.96,0.46l-2.95,1.74l-0.14,0.21l-0.17,1.1l-0.6,0.82l-0.05,0.23l0.21,1.13l-1.31,0.63l-0.17,0.27l0.0,0.91l-0.53,0.37l-0.1,0.37l1.04,2.27l1.31,1.46l-0.44,0.9l0.24,0.43l1.52,0.13l0.87,1.23l0.24,0.13l2.21,0.07l0.18,-0.06l1.55,-1.13l-0.14,3.22l0.23,0.3l1.14,0.29l0.16,-0.0l1.18,-0.36l1.97,3.71l-0.45,0.71l-0.04,0.14l-0.12,1.8l-0.05,2.07l-0.92,1.2l-0.03,0.31l0.38,0.8l-0.48,0.72l-0.02,0.3l1.01,2.02l-1.5,2.64Z",name:"Peru"},PK:{path:"M609.08,187.76l1.66,1.21l0.71,2.11l0.2,0.19l3.62,1.01l-1.98,1.95l-2.65,0.4l-3.75,-0.68l-0.26,0.08l-1.23,1.22l-0.07,0.31l0.89,2.46l0.88,1.92l0.1,0.12l1.67,1.14l-1.8,1.35l-0.12,0.25l0.04,1.85l-2.35,2.67l-1.59,2.79l-2.5,2.72l-2.76,-0.2l-0.24,0.09l-2.76,2.83l0.04,0.45l1.54,1.13l0.27,1.94l0.09,0.17l1.34,1.29l0.4,1.83l-5.14,-0.01l-0.22,0.09l-1.53,1.63l-1.52,-0.56l-0.76,-1.88l-1.93,-2.03l-0.25,-0.09l-4.6,0.5l-4.05,0.05l-3.1,0.33l0.77,-2.53l3.48,-1.33l0.19,-0.33l-0.21,-1.24l-0.19,-0.23l-1.01,-0.37l-0.06,-2.18l-0.17,-0.26l-2.32,-1.16l-0.96,-1.57l-0.56,-0.65l3.16,1.05l0.14,0.01l2.45,-0.4l1.44,0.33l0.3,-0.1l0.4,-0.47l1.58,0.22l0.14,-0.01l3.25,-1.14l0.2,-0.27l0.08,-2.23l1.23,-1.38l1.73,0.0l0.28,-0.2l0.22,-0.61l1.68,-0.32l0.86,0.24l0.27,-0.05l0.98,-0.78l0.11,-0.26l-0.13,-1.57l0.96,-1.52l1.51,-0.67l0.14,-0.41l-0.74,-1.4l1.86,0.07l0.26,-0.13l0.69,-1.01l0.05,-0.2l-0.09,-0.94l1.14,-1.09l0.09,-0.28l-0.29,-1.41l-0.51,-1.07l1.23,-1.05l2.6,-0.58l2.86,-0.33l1.33,-0.54l1.3,-0.29Z",name:"Pakistan"},PH:{path:"M737.11,263.82l0.25,1.66l0.14,1.34l-0.54,1.46l-0.64,-1.79l-0.5,-0.1l-1.17,1.28l-0.05,0.32l0.74,1.71l-0.49,0.81l-2.6,-1.28l-0.61,-1.57l0.68,-1.07l-0.07,-0.4l-1.59,-1.19l-0.42,0.06l-0.69,0.91l-1.01,-0.08l-0.21,0.06l-1.58,1.2l-0.17,-0.3l0.87,-1.88l1.48,-0.66l1.18,-0.81l0.71,0.92l0.34,0.1l1.9,-0.69l0.18,-0.18l0.34,-0.94l1.57,-0.06l0.29,-0.32l-0.1,-1.38l1.41,0.83l0.36,2.06ZM734.94,254.42l0.56,2.24l-1.41,-0.49l-0.4,0.3l0.07,0.94l0.51,1.3l-0.54,0.26l-0.08,-1.34l-0.25,-0.28l-0.56,-0.1l-0.23,-0.91l1.03,0.14l0.34,-0.31l-0.03,-0.96l-0.06,-0.18l-1.14,-1.44l1.62,0.04l0.57,0.78ZM724.68,238.33l1.48,0.71l0.33,-0.04l0.44,-0.38l0.05,0.13l-0.37,0.97l0.01,0.23l0.81,1.75l-0.59,1.92l-1.37,0.79l-0.14,0.2l-0.39,2.07l0.01,0.14l0.56,2.04l0.23,0.21l1.33,0.28l0.14,-0.0l1.0,-0.27l2.82,1.28l-0.2,1.16l0.12,0.29l0.66,0.5l-0.13,0.56l-1.54,-0.99l-0.89,-1.29l-0.49,0.0l-0.44,0.65l-1.34,-1.28l-0.26,-0.08l-2.18,0.36l-0.96,-0.44l0.09,-0.72l0.69,-0.57l-0.01,-0.47l-0.75,-0.59l-0.47,0.14l-0.15,0.43l-0.86,-1.02l-0.34,-1.02l-0.07,-1.74l0.49,0.41l0.49,-0.21l0.26,-3.99l0.73,-2.1l1.23,0.0ZM731.12,258.92l-0.82,0.75l-0.83,1.64l-0.52,0.5l-1.17,-1.33l0.36,-0.47l0.62,-0.7l0.07,-0.15l0.24,-1.35l0.73,-0.08l-0.31,1.29l0.16,0.34l0.37,-0.09l1.21,-1.6l-0.12,1.24ZM726.66,255.58l0.85,0.45l0.14,0.03l1.28,-0.0l-0.03,0.62l-1.04,0.96l-1.15,0.55l-0.05,-0.71l0.17,-1.26l-0.01,-0.13l-0.16,-0.51ZM724.92,252.06l-0.45,1.5l-0.7,-0.83l-0.95,-1.43l1.44,0.06l0.67,0.7ZM717.48,261.28l-1.87,1.35l0.21,-0.3l1.81,-1.57l1.5,-1.75l0.97,-1.84l0.23,1.08l-1.56,1.33l-1.29,1.7Z",name:"Philippines"},PL:{path:"M458.8,144.25l-0.96,-1.98l0.18,-1.06l-0.01,-0.15l-0.62,-1.8l-0.82,-1.11l0.56,-0.73l0.05,-0.28l-0.51,-1.51l1.48,-0.87l3.88,-1.58l3.06,-1.14l2.23,0.52l0.15,0.66l0.29,0.23l2.4,0.04l3.11,0.39l4.56,-0.05l1.12,0.32l0.51,0.89l0.1,1.45l0.03,0.12l0.66,1.23l-0.01,1.08l-1.33,0.61l-0.14,0.41l0.74,1.5l0.07,1.53l1.22,2.79l-0.19,0.66l-1.09,0.33l-0.14,0.09l-2.27,2.72l-0.04,0.31l0.35,0.8l-2.22,-1.16l-0.21,-0.02l-1.72,0.44l-1.1,-0.31l-0.21,0.02l-1.3,0.61l-1.11,-1.02l-0.32,-0.05l-0.81,0.35l-1.15,-1.61l-0.21,-0.12l-1.65,-0.17l-0.19,-0.82l-0.23,-0.23l-1.72,-0.37l-0.34,0.17l-0.25,0.56l-0.88,-0.44l0.12,-0.69l-0.25,-0.35l-1.78,-0.27l-1.08,-0.97Z",name:"Poland"},ZM:{path:"M502.81,308.32l1.09,1.04l0.58,1.94l-0.39,0.66l-0.5,2.05l-0.0,0.14l0.45,1.95l-0.69,0.77l-0.06,0.11l-0.76,2.37l0.15,0.36l0.62,0.31l-6.85,1.9l-0.22,0.33l0.2,1.54l-1.62,0.3l-0.12,0.05l-1.43,1.02l-0.11,0.15l-0.25,0.73l-0.73,0.17l-0.14,0.08l-2.18,2.12l-1.33,1.6l-0.65,0.05l-0.83,-0.29l-2.75,-0.28l-0.24,-0.1l-0.15,-0.27l-0.99,-0.58l-0.12,-0.04l-1.73,-0.14l-1.88,0.54l-1.5,-1.48l-1.61,-2.01l0.11,-7.73l4.92,0.03l0.29,-0.37l-0.19,-0.79l0.34,-0.86l0.0,-0.21l-0.41,-1.11l0.26,-1.14l-0.01,-0.16l-0.12,-0.36l0.18,0.01l0.1,0.56l0.31,0.25l1.14,-0.06l1.44,0.21l0.76,1.05l0.19,0.12l2.01,0.35l0.19,-0.03l1.24,-0.65l0.44,1.03l0.22,0.18l1.81,0.34l0.85,0.99l1.02,1.39l0.24,0.12l1.92,0.02l0.3,-0.32l-0.21,-2.74l-0.47,-0.23l-0.53,0.36l-1.58,-0.89l-0.51,-0.34l0.29,-2.36l0.44,-2.99l-0.03,-0.18l-0.5,-0.99l0.61,-1.38l0.53,-0.24l3.26,-0.41l0.89,0.23l1.01,0.62l1.04,0.44l1.6,0.43l1.35,0.72Z",name:"Zambia"},EE:{path:"M482.19,120.88l0.23,-1.68l-0.43,-0.31l-0.75,0.37l-1.34,-1.1l-0.18,-1.75l2.92,-0.95l3.07,-0.53l2.66,0.6l2.48,-0.1l0.18,0.31l-1.65,1.96l-0.06,0.26l0.71,3.25l-0.88,0.94l-1.85,-0.01l-2.08,-1.3l-1.14,-0.47l-0.2,-0.01l-1.69,0.51Z",name:"Estonia"},EG:{path:"M508.07,208.8l-0.66,1.06l-0.53,2.03l-0.64,1.32l-0.32,0.26l-1.74,-1.85l-1.77,-3.86l-0.48,-0.09l-0.26,0.25l-0.07,0.32l1.04,2.88l1.55,2.76l1.89,4.18l0.94,1.48l0.83,1.54l2.08,2.73l-0.3,0.28l-0.1,0.23l0.08,1.72l0.11,0.22l2.91,2.37l-28.78,0.0l0.0,-19.06l-0.73,-2.2l0.61,-1.59l0.0,-0.2l-0.34,-1.04l0.73,-1.08l3.13,-0.04l2.36,0.72l2.48,0.81l1.15,0.43l0.23,-0.01l1.93,-0.87l1.02,-0.78l2.08,-0.21l1.59,0.31l0.62,1.24l0.52,0.03l0.46,-0.71l1.86,0.59l1.95,0.16l0.17,-0.04l0.92,-0.52l1.48,4.24Z",name:"Egypt"},ZA:{path:"M467.06,373.27l-0.13,-0.29l0.01,-1.58l-0.02,-0.12l-0.71,-1.64l0.59,-0.37l0.14,-0.26l-0.07,-2.13l-0.05,-0.15l-1.63,-2.58l-1.25,-2.31l-1.71,-3.37l0.88,-0.98l0.7,0.52l0.39,1.08l0.23,0.19l1.1,0.19l1.55,0.51l0.14,0.01l1.35,-0.2l0.11,-0.04l2.24,-1.39l0.14,-0.25l0.0,-9.4l0.16,0.09l1.39,2.38l-0.22,1.53l0.04,0.19l0.56,0.94l0.3,0.14l1.79,-0.27l0.16,-0.08l1.23,-1.18l1.17,-0.79l0.1,-0.12l0.57,-1.19l1.02,-0.52l0.9,0.28l1.16,0.73l0.14,0.05l2.04,0.13l0.13,-0.02l1.6,-0.62l0.18,-0.19l0.63,-1.93l1.18,-0.19l0.19,-0.12l0.78,-1.05l0.81,-1.71l2.18,-1.91l3.44,-1.88l0.89,0.02l1.17,0.43l0.21,-0.0l0.76,-0.29l1.07,0.21l1.15,3.55l0.63,1.82l-0.44,2.9l0.1,0.52l-0.74,-0.29l-0.18,-0.01l-0.72,0.19l-0.21,0.2l-0.22,0.74l-0.66,0.97l-0.05,0.18l0.02,0.93l0.09,0.21l1.49,1.46l0.27,0.08l1.47,-0.29l0.22,-0.18l0.43,-1.01l1.29,0.02l-0.51,1.63l-0.29,2.2l-0.59,1.12l-2.2,1.78l-1.06,1.39l-0.72,1.44l-1.39,1.93l-2.81,2.84l-1.75,1.65l-1.85,1.24l-2.55,1.06l-1.23,0.14l-0.24,0.18l-0.22,0.54l-1.27,-0.35l-0.2,0.01l-1.15,0.5l-2.62,-0.52l-0.12,0.0l-1.46,0.33l-0.98,-0.14l-0.16,0.02l-2.55,1.1l-2.11,0.44l-1.59,1.07l-0.93,0.06l-0.97,-0.92l-0.19,-0.08l-0.72,-0.04l-1.0,-1.16l-0.25,0.05ZM493.72,359.24l-1.12,-0.86l-0.31,-0.03l-1.23,0.59l-1.36,1.07l-1.39,1.78l0.01,0.38l1.88,2.11l0.31,0.09l0.9,-0.27l0.18,-0.15l0.4,-0.77l1.28,-0.39l0.18,-0.16l0.42,-0.88l0.76,-1.32l-0.05,-0.37l-0.87,-0.82Z",name:"South Africa"},EC:{path:"M220.2,293.48l1.25,-1.76l0.02,-0.31l-0.54,-1.09l-0.5,-0.06l-0.78,0.94l-1.03,-0.75l0.33,-0.46l0.05,-0.23l-0.38,-2.04l0.66,-0.28l0.17,-0.19l0.45,-1.52l0.93,-1.58l0.04,-0.2l-0.13,-0.78l1.19,-0.47l1.57,-0.91l2.35,1.34l0.17,0.04l0.28,-0.02l0.52,0.91l0.21,0.15l2.12,0.35l0.2,-0.03l0.55,-0.31l1.08,0.73l0.97,0.54l0.31,1.67l-0.71,1.49l-2.64,2.54l-2.95,0.97l-0.15,0.11l-1.53,2.18l-0.49,1.68l-1.1,0.8l-0.87,-1.05l-0.15,-0.1l-1.01,-0.27l-0.13,-0.0l-0.7,0.14l-0.03,-0.43l0.6,-0.5l0.1,-0.31l-0.26,-0.91Z",name:"Ecuador"},AL:{path:"M470.27,171.7l0.38,0.19l0.45,-0.18l0.4,0.61l0.11,0.1l0.46,0.24l0.13,0.87l-0.3,0.95l-0.0,0.17l0.36,1.28l0.12,0.17l0.9,0.63l-0.03,0.44l-0.67,0.35l-0.16,0.22l-0.14,0.88l-0.96,1.18l-0.06,-0.03l-0.04,-0.48l-0.12,-0.22l-1.28,-0.92l-0.19,-1.25l0.2,-1.96l0.33,-0.89l-0.06,-0.3l-0.36,-0.41l-0.13,-0.75l0.66,-0.9Z",name:"Albania"},AO:{path:"M461.62,299.93l0.55,1.67l0.73,1.54l1.56,2.18l0.28,0.12l1.66,-0.2l0.81,-0.34l1.28,0.33l0.33,-0.14l0.39,-0.67l0.56,-1.3l1.37,-0.09l0.27,-0.21l0.07,-0.23l0.67,-0.01l-0.13,0.53l0.29,0.37l2.74,-0.02l0.04,1.29l0.03,0.13l0.46,0.87l-0.35,1.52l0.18,1.55l0.07,0.16l0.75,0.85l-0.13,2.89l0.41,0.29l0.56,-0.21l1.11,0.05l1.5,-0.37l0.9,0.12l0.18,0.53l-0.27,1.15l0.01,0.17l0.4,1.08l-0.33,0.85l-0.01,0.18l0.12,0.51l-4.83,-0.03l-0.3,0.3l-0.12,8.13l0.07,0.19l1.69,2.1l1.27,1.25l-4.03,0.92l-5.93,-0.36l-1.66,-1.19l-0.18,-0.06l-10.15,0.11l-0.34,0.13l-1.35,-1.05l-0.17,-0.06l-1.62,-0.08l-1.6,0.45l-0.88,0.36l-0.17,-1.2l0.34,-2.19l0.85,-2.32l0.14,-1.13l0.79,-2.24l0.57,-1.0l1.42,-1.64l0.82,-1.15l0.05,-0.13l0.26,-1.88l-0.13,-1.51l-0.07,-0.16l-0.72,-0.87l-1.23,-2.91l0.09,-0.37l0.73,-0.95l0.05,-0.27l-1.27,-4.12l-1.19,-1.54l0.1,-0.2l0.86,-0.28l0.78,0.03l0.83,-0.29l7.12,0.03ZM451.81,298.94l-0.17,0.07l-0.5,-1.42l0.85,-0.92l0.53,-0.29l0.48,0.44l-0.56,0.32l-0.1,0.1l-0.41,0.65l-0.05,0.14l-0.07,0.91Z",name:"Angola"},KZ:{path:"M598.42,172.08l-1.37,0.54l-3.3,2.09l-0.11,0.12l-1.01,1.97l-0.56,0.01l-0.6,-1.24l-0.26,-0.17l-2.95,-0.09l-0.46,-2.22l-0.29,-0.24l-0.91,-0.02l0.17,-2.72l-0.12,-0.26l-3.0,-2.22l-0.2,-0.06l-4.29,0.24l-2.8,0.42l-2.36,-2.7l-6.4,-3.65l-0.23,-0.03l-6.45,1.83l-0.22,0.29l0.1,10.94l-0.84,0.1l-1.65,-2.21l-0.11,-0.09l-1.69,-0.84l-0.2,-0.02l-2.84,0.63l-0.14,0.07l-0.71,0.64l-0.02,-0.11l0.57,-1.17l0.0,-0.26l-0.48,-1.05l-0.17,-0.16l-2.78,-0.99l-1.08,-2.62l-0.13,-0.15l-1.24,-0.7l-0.04,-0.48l2.07,0.25l0.34,-0.29l0.09,-2.03l1.84,-0.44l2.12,0.45l0.36,-0.25l0.45,-3.04l-0.45,-2.06l-0.31,-0.23l-2.44,0.15l-2.07,-0.75l-0.23,0.01l-2.88,1.38l-2.21,0.62l-0.96,-0.38l0.22,-1.39l-0.06,-0.23l-1.6,-2.12l-0.25,-0.12l-1.72,0.08l-1.87,-1.91l1.33,-2.24l-0.06,-0.38l-0.55,-0.5l1.72,-3.08l2.3,1.7l0.48,-0.2l0.29,-2.26l4.99,-3.48l3.76,-0.08l5.46,2.27l2.96,1.33l0.26,-0.01l2.59,-1.36l3.82,-0.06l3.13,1.67l0.38,-0.09l0.63,-0.85l3.36,0.14l0.29,-0.19l0.63,-1.57l-0.13,-0.37l-3.64,-2.05l2.0,-1.36l0.1,-0.38l-0.32,-0.62l2.09,-0.76l0.13,-0.47l-1.65,-2.13l0.89,-0.91l9.27,-1.18l0.13,-0.05l1.17,-0.82l6.2,-1.27l2.26,-1.43l4.19,0.7l0.74,3.39l0.38,0.22l2.52,-0.81l2.9,1.06l-0.18,1.63l0.32,0.33l2.52,-0.23l5.0,-2.58l0.03,0.39l3.16,2.62l5.57,8.48l0.49,0.02l1.18,-1.53l3.22,1.78l0.21,0.03l3.5,-0.83l1.21,0.52l1.16,1.82l0.15,0.12l1.67,0.61l1.01,1.32l0.28,0.11l3.04,-0.41l1.1,1.64l-1.68,1.89l-1.97,0.28l-0.26,0.29l-0.12,3.09l-1.2,1.23l-4.81,-1.01l-0.35,0.2l-1.77,5.51l-1.14,0.62l-4.92,1.23l-0.2,0.41l2.14,5.06l-1.45,0.67l-0.17,0.31l0.15,1.28l-1.05,-0.3l-1.21,-1.04l-0.17,-0.07l-3.73,-0.32l-4.15,-0.08l-0.92,0.31l-3.46,-1.24l-0.22,0.01l-1.42,0.63l-0.17,0.21l-0.32,1.49l-3.82,-0.97l-0.15,0.0l-1.65,0.43l-0.2,0.17l-0.51,1.21Z",name:"Kazakhstan"},ET:{path:"M516.0,247.63l1.21,0.92l0.3,0.04l1.3,-0.53l0.46,0.41l0.19,0.08l1.65,0.03l2.05,0.96l0.67,0.88l1.07,0.79l1.0,1.45l0.7,0.68l-0.72,0.92l-0.85,1.19l-0.04,0.25l0.19,0.67l0.04,0.74l0.29,0.28l1.4,0.04l0.55,-0.15l0.23,0.19l-0.41,0.67l0.01,0.32l0.92,1.39l0.93,1.23l0.99,0.94l0.1,0.06l8.19,2.99l1.51,0.01l-6.51,6.95l-3.14,0.11l-0.18,0.06l-2.15,1.71l-1.51,0.04l-0.22,0.1l-0.6,0.69l-1.46,-0.0l-0.93,-0.78l-0.32,-0.04l-2.29,1.05l-0.12,0.1l-0.64,0.9l-1.44,-0.17l-0.51,-0.26l-0.17,-0.03l-0.56,0.07l-0.68,-0.02l-3.1,-2.08l-0.17,-0.05l-1.62,0.0l-0.68,-0.65l0.0,-1.28l-0.21,-0.29l-1.19,-0.38l-1.42,-2.63l-0.13,-0.12l-1.05,-0.53l-0.46,-1.0l-1.27,-1.23l-0.17,-0.08l-1.08,-0.13l0.53,-0.9l1.17,-0.05l0.26,-0.17l0.37,-0.77l0.03,-0.14l-0.03,-2.23l0.7,-2.49l1.08,-0.65l0.14,-0.19l0.24,-1.0l1.03,-1.85l1.47,-1.22l0.09,-0.12l1.02,-2.51l0.36,-1.96l2.62,0.48l0.33,-0.18l0.63,-1.55Z",name:"Ethiopia"},ZW:{path:"M498.95,341.2l-1.16,-0.23l-0.16,0.01l-0.74,0.28l-1.11,-0.41l-1.02,-0.04l-1.52,-1.13l-0.12,-0.05l-1.79,-0.37l-0.65,-1.46l-0.01,-0.86l-0.22,-0.29l-0.99,-0.26l-2.74,-2.77l-0.77,-1.46l-0.52,-0.5l-0.72,-1.54l2.24,0.23l0.78,0.28l0.12,0.02l0.85,-0.06l0.21,-0.11l1.38,-1.66l2.11,-2.05l0.81,-0.18l0.22,-0.2l0.27,-0.8l1.29,-0.93l1.53,-0.28l0.11,0.66l0.3,0.25l2.02,-0.05l1.04,0.48l0.5,0.59l0.18,0.1l1.13,0.18l1.11,0.7l0.01,3.06l-0.49,1.82l-0.11,1.94l0.03,0.16l0.35,0.68l-0.24,1.3l-0.27,0.17l-0.12,0.15l-0.64,1.83l-2.49,2.8Z",name:"Zimbabwe"},ES:{path:"M398.67,172.8l0.09,-1.45l-0.06,-0.2l-0.82,-1.05l3.16,-1.96l3.01,0.54l3.33,-0.02l2.64,0.52l2.14,-0.15l3.9,0.1l0.91,1.08l0.14,0.09l4.61,1.38l0.26,-0.04l0.77,-0.55l2.66,1.29l0.17,0.03l2.59,-0.35l0.1,1.28l-2.2,1.85l-3.13,0.62l-0.23,0.23l-0.21,0.92l-1.54,1.68l-0.97,2.4l0.02,0.26l0.85,1.46l-1.27,1.14l-0.09,0.14l-0.5,1.73l-1.73,0.53l-0.15,0.1l-1.68,2.1l-3.03,0.04l-2.38,-0.05l-0.17,0.05l-1.57,1.01l-0.9,1.01l-0.96,-0.19l-0.82,-0.86l-0.69,-1.6l-0.22,-0.18l-2.14,-0.41l-0.13,-0.62l0.83,-0.97l0.39,-0.86l-0.06,-0.33l-0.73,-0.73l0.63,-1.74l-0.02,-0.25l-0.8,-1.41l0.69,-0.15l0.23,-0.27l0.09,-1.29l0.33,-0.36l0.08,-0.2l0.03,-2.16l1.03,-0.72l0.1,-0.37l-0.7,-1.5l-0.25,-0.17l-1.46,-0.11l-0.22,0.07l-0.34,0.3l-1.17,0.0l-0.55,-1.29l-0.39,-0.16l-1.02,0.44l-0.45,0.36Z",name:"Spain"},ER:{path:"M527.15,253.05l-0.77,-0.74l-1.01,-1.47l-1.14,-0.86l-0.62,-0.84l-0.11,-0.09l-2.18,-1.02l-0.12,-0.03l-1.61,-0.03l-0.52,-0.46l-0.31,-0.05l-1.31,0.54l-1.38,-1.06l-0.46,0.12l-0.69,1.68l-2.49,-0.46l-0.2,-0.76l1.06,-3.69l0.24,-1.65l0.66,-0.66l1.76,-0.4l0.16,-0.1l0.97,-1.13l1.24,2.55l0.68,2.34l0.09,0.14l1.4,1.27l3.39,2.4l1.37,1.43l2.14,2.34l0.94,0.6l-0.32,0.26l-0.85,-0.17Z",name:"Eritrea"},ME:{path:"M469.05,172.9l-0.57,-0.8l-0.1,-0.09l-0.82,-0.46l0.16,-0.33l0.35,-1.57l0.72,-0.62l0.27,-0.16l0.48,0.38l0.35,0.4l0.12,0.08l0.79,0.32l0.66,0.43l-0.43,0.62l-0.28,0.11l-0.07,-0.25l-0.53,-0.1l-1.09,1.49l-0.05,0.23l0.06,0.32Z",name:"Montenegro"},MD:{path:"M488.2,153.75l0.14,-0.11l1.49,-0.28l1.75,0.95l1.06,0.14l0.92,0.7l-0.15,0.9l0.15,0.31l0.8,0.46l0.33,1.2l0.09,0.14l0.72,0.66l-0.11,0.28l0.1,0.33l-0.06,0.02l-1.25,-0.08l-0.17,-0.29l-0.39,-0.12l-0.52,0.25l-0.16,0.36l0.13,0.42l-0.6,0.88l-0.43,1.03l-0.22,0.12l-0.32,-1.0l0.25,-1.34l-0.08,-1.38l-0.06,-0.17l-1.43,-1.87l-0.81,-1.36l-0.78,-0.95l-0.12,-0.09l-0.29,-0.12Z",name:"Moldova"},MG:{path:"M544.77,316.45l0.64,1.04l0.6,1.62l0.4,3.04l0.63,1.21l-0.22,1.07l-0.15,0.26l-0.59,-1.05l-0.52,-0.01l-0.47,0.76l-0.04,0.23l0.46,1.84l-0.19,0.92l-0.61,0.53l-0.1,0.21l-0.16,2.15l-0.97,2.98l-1.24,3.59l-1.55,4.97l-0.96,3.67l-1.08,2.93l-1.94,0.61l-2.05,1.06l-3.2,-1.53l-0.62,-1.26l-0.18,-2.39l-0.87,-2.07l-0.22,-1.8l0.4,-1.69l1.01,-0.4l0.19,-0.28l0.01,-0.79l1.15,-1.91l0.04,-0.11l0.23,-1.66l-0.03,-0.17l-0.57,-1.21l-0.46,-1.58l-0.19,-2.25l0.82,-1.36l0.33,-1.51l1.11,-0.1l1.4,-0.53l0.9,-0.45l1.03,-0.03l0.21,-0.09l1.41,-1.45l2.12,-1.65l0.75,-1.29l0.03,-0.24l-0.17,-0.56l0.53,0.15l0.32,-0.1l1.38,-1.77l0.06,-0.18l0.04,-1.44l0.54,-0.74l0.62,0.77Z",name:"Madagascar"},MA:{path:"M378.66,230.13l0.07,-0.75l0.93,-0.72l0.82,-1.37l0.04,-0.21l-0.14,-0.8l0.8,-1.74l1.33,-1.61l0.79,-0.4l0.14,-0.15l0.66,-1.55l0.08,-1.46l0.83,-1.52l1.6,-0.94l0.11,-0.11l1.56,-2.71l1.2,-0.99l2.24,-0.29l0.17,-0.08l1.95,-1.83l1.3,-0.77l2.09,-2.28l0.07,-0.26l-0.61,-3.34l0.92,-2.3l0.33,-1.44l1.52,-1.79l2.48,-1.27l1.86,-1.16l0.1,-0.11l1.67,-2.93l0.72,-1.59l1.54,0.01l1.43,1.14l0.21,0.06l2.33,-0.19l2.55,0.62l0.97,0.03l0.83,1.6l0.15,1.71l0.86,2.96l0.09,0.14l0.5,0.45l-0.31,0.73l-3.11,0.44l-0.16,0.07l-1.07,0.97l-1.36,0.23l-0.25,0.28l-0.1,1.85l-2.74,1.02l-0.14,0.11l-0.9,1.3l-1.93,0.69l-2.56,0.44l-4.04,2.01l-0.17,0.27l0.02,2.91l-0.08,0.0l-0.3,0.31l0.05,1.15l-1.25,0.07l-0.16,0.06l-0.73,0.55l-0.98,0.0l-0.85,-0.33l-0.15,-0.02l-2.11,0.29l-0.24,0.19l-0.76,1.95l-0.63,0.16l-0.21,0.19l-1.15,3.29l-3.42,2.81l-0.1,0.17l-0.81,3.57l-0.98,1.12l-0.3,0.85l-5.13,0.19Z",name:"Morocco"},UZ:{path:"M587.83,186.48l0.06,-1.46l-0.19,-0.29l-3.31,-1.24l-2.57,-1.4l-1.63,-1.38l-2.79,-1.98l-1.2,-2.98l-0.12,-0.14l-0.84,-0.54l-0.18,-0.05l-2.61,0.13l-0.76,-0.48l-0.25,-2.25l-0.17,-0.24l-3.37,-1.6l-0.32,0.04l-2.08,1.73l-2.11,1.02l-0.16,0.35l0.31,1.14l-2.14,0.03l-0.09,-10.68l6.1,-1.74l6.25,3.57l2.36,2.72l0.27,0.1l2.92,-0.44l4.17,-0.23l2.78,2.06l-0.18,2.87l0.29,0.32l0.98,0.02l0.46,2.22l0.28,0.24l3.0,0.09l0.61,1.25l0.28,0.17l0.93,-0.02l0.26,-0.16l1.06,-2.06l3.21,-2.03l1.3,-0.5l0.19,0.08l-1.75,1.62l0.05,0.48l1.85,1.12l0.27,0.02l1.65,-0.69l2.4,1.27l-2.69,1.79l-1.79,-0.27l-0.89,0.06l-0.22,-0.52l0.48,-1.26l-0.34,-0.4l-3.35,0.69l-0.22,0.18l-0.78,1.87l-1.07,1.47l-1.93,-0.13l-0.29,0.16l-0.65,1.29l0.16,0.42l1.69,0.64l0.48,1.91l-1.25,2.6l-1.64,-0.53l-1.18,-0.03Z",name:"Uzbekistan"},MM:{path:"M670.1,233.39l-1.46,1.11l-1.68,0.11l-0.26,0.19l-1.1,2.7l-0.95,0.42l-0.14,0.42l1.21,2.27l1.61,1.92l0.94,1.55l-0.82,1.99l-0.77,0.42l-0.13,0.39l0.64,1.35l1.62,1.97l0.26,1.32l-0.04,1.15l0.02,0.13l0.92,2.18l-1.3,2.23l-0.79,1.69l-0.1,-0.77l0.74,-1.87l-0.02,-0.26l-0.8,-1.42l0.2,-2.68l-0.06,-0.2l-0.98,-1.27l-0.8,-2.98l-0.45,-3.22l-1.11,-2.22l-0.45,-0.1l-1.64,1.28l-2.74,1.76l-1.26,-0.2l-1.27,-0.49l0.79,-2.93l0.0,-0.14l-0.52,-2.42l-1.93,-2.97l0.26,-0.8l-0.22,-0.39l-1.37,-0.31l-1.65,-1.98l-0.12,-1.5l0.41,0.19l0.42,-0.26l0.05,-1.7l1.08,-0.54l0.16,-0.34l-0.24,-1.0l0.5,-0.79l0.05,-0.15l0.08,-2.35l1.58,0.49l0.36,-0.15l1.12,-2.19l0.15,-1.34l1.35,-2.18l0.04,-0.17l-0.07,-1.35l2.97,-1.71l1.67,0.45l0.38,-0.33l-0.18,-1.46l0.7,-0.4l0.15,-0.32l-0.13,-0.72l0.94,-0.13l0.74,1.41l0.11,0.12l0.95,0.56l0.07,1.89l-0.09,2.08l-2.28,2.15l-0.09,0.19l-0.3,3.15l0.35,0.32l2.37,-0.39l0.53,2.17l0.2,0.21l1.3,0.42l-0.63,1.9l0.14,0.36l1.86,0.99l1.1,0.49l0.24,0.0l1.45,-0.6l0.04,0.51l-2.01,1.6l-0.56,0.96l-1.34,0.56Z",name:"Myanmar"},ML:{path:"M390.79,248.2l0.67,-0.37l0.14,-0.18l0.36,-1.31l0.51,-0.04l1.68,0.69l0.21,0.0l1.34,-0.48l0.89,0.16l0.3,-0.13l0.29,-0.44l9.89,-0.04l0.29,-0.21l0.56,-1.8l-0.11,-0.33l-0.33,-0.24l-2.37,-22.1l3.41,-0.04l8.37,5.73l8.38,5.68l0.56,1.15l0.14,0.14l1.56,0.75l0.99,0.36l0.03,1.45l0.33,0.29l2.45,-0.22l0.01,5.52l-1.3,1.64l-0.06,0.15l-0.18,1.37l-1.99,0.36l-3.4,0.22l-0.19,0.09l-0.85,0.83l-1.48,0.09l-1.49,0.01l-0.54,-0.43l-0.26,-0.05l-1.38,0.36l-2.39,1.08l-0.13,0.12l-0.44,0.73l-1.88,1.11l-0.11,0.12l-0.3,0.57l-0.86,0.42l-1.1,-0.31l-0.28,0.07l-0.69,0.62l-0.09,0.16l-0.35,1.66l-1.93,2.04l-0.08,0.23l0.05,0.76l-0.63,0.99l-0.04,0.19l0.14,1.23l-0.81,0.29l-0.32,0.17l-0.27,-0.75l-0.39,-0.18l-0.65,0.26l-0.36,-0.04l-0.29,0.14l-0.37,0.6l-1.69,-0.02l-0.63,-0.34l-0.32,0.02l-0.12,0.09l-0.47,-0.45l0.1,-0.6l-0.09,-0.27l-0.31,-0.3l-0.33,-0.05l-0.05,0.02l0.02,-0.21l0.46,-0.59l-0.02,-0.39l-0.99,-1.02l-0.34,-0.74l-0.56,-0.56l-0.17,-0.09l-0.5,-0.07l-0.19,0.04l-0.58,0.35l-0.79,0.33l-0.65,0.51l-0.85,-0.16l-0.63,-0.59l-0.14,-0.07l-0.41,-0.08l-0.2,0.03l-0.59,0.31l-0.07,0.0l-0.1,-0.63l0.11,-0.85l-0.21,-0.98l-0.11,-0.17l-0.86,-0.66l-0.45,-1.34l-0.1,-1.36Z",name:"Mali"},MN:{path:"M641.06,150.59l2.41,-0.53l4.76,-2.8l3.67,-1.49l2.06,0.96l0.12,0.03l2.5,0.05l1.59,1.45l0.19,0.08l2.47,0.12l3.59,0.81l0.27,-0.07l2.43,-2.28l0.06,-0.36l-0.93,-1.77l2.33,-3.1l2.66,1.3l2.26,0.39l2.75,0.8l0.44,2.3l0.19,0.22l3.56,1.38l0.18,0.01l2.35,-0.6l3.1,-0.42l2.4,0.41l2.37,1.52l1.49,1.63l0.23,0.1l2.29,-0.03l3.13,0.52l0.15,-0.01l2.28,-0.79l3.27,-0.53l0.11,-0.04l3.56,-2.23l1.31,0.31l1.26,1.05l0.22,0.07l2.45,-0.22l-0.98,1.96l-1.77,3.21l-0.01,0.28l0.64,1.31l0.35,0.16l1.35,-0.38l2.4,0.48l0.22,-0.04l1.78,-1.09l1.82,0.92l2.11,2.07l-0.17,0.68l-1.79,-0.31l-3.74,0.45l-1.85,0.96l-1.78,2.01l-3.74,1.18l-2.46,1.61l-2.45,-0.6l-1.42,-0.28l-0.31,0.13l-1.31,1.99l0.0,0.33l0.78,1.15l0.3,0.74l-1.58,0.93l-1.75,1.59l-2.83,1.03l-3.77,0.12l-4.05,1.05l-2.81,1.54l-0.95,-0.8l-0.19,-0.07l-2.96,0.0l-3.64,-1.8l-2.55,-0.48l-3.38,0.41l-5.13,-0.67l-2.66,0.06l-1.35,-1.65l-1.12,-2.78l-0.21,-0.18l-1.5,-0.33l-2.98,-1.89l-0.12,-0.04l-3.37,-0.43l-2.84,-0.51l-0.75,-1.13l0.93,-3.54l-0.04,-0.24l-1.73,-2.55l-0.15,-0.12l-3.52,-1.18l-1.99,-1.61l-0.54,-1.85Z",name:"Mongolia"},MK:{path:"M472.73,173.87l0.08,0.01l0.32,-0.25l0.08,-0.44l1.29,-0.41l1.37,-0.28l1.03,-0.04l1.06,0.82l0.14,1.59l-0.22,0.04l-0.17,0.11l-0.32,0.4l-1.2,-0.05l-0.18,0.05l-0.9,0.61l-1.45,0.23l-0.85,-0.59l-0.3,-1.09l0.22,-0.71Z",name:"Macedonia"},MW:{path:"M507.18,313.84l-0.67,1.85l-0.01,0.16l0.7,3.31l0.31,0.24l0.75,-0.03l0.78,0.71l0.99,1.75l0.2,3.03l-0.91,0.45l-0.14,0.15l-0.59,1.38l-1.24,-1.21l-0.17,-1.62l0.49,-1.12l0.02,-0.16l-0.15,-1.03l-0.13,-0.21l-0.99,-0.65l-0.26,-0.03l-0.53,0.18l-1.31,-1.12l-1.15,-0.59l0.66,-2.06l0.75,-0.84l0.07,-0.27l-0.47,-2.04l0.48,-1.94l0.4,-0.65l0.03,-0.24l-0.64,-2.15l-0.08,-0.13l-0.44,-0.42l1.34,0.26l1.25,1.73l0.67,3.3Z",name:"Malawi"},MR:{path:"M390.54,247.66l-1.48,-1.58l-1.51,-1.88l-0.12,-0.09l-1.64,-0.67l-1.17,-0.74l-0.17,-0.05l-1.4,0.03l-0.12,0.03l-1.14,0.52l-1.15,-0.21l-0.26,0.08l-0.44,0.43l-0.11,-0.72l0.68,-1.29l0.31,-2.43l-0.28,-2.63l-0.29,-1.27l0.24,-1.24l-0.03,-0.2l-0.65,-1.24l-1.19,-1.05l0.32,-0.51l9.64,0.02l0.3,-0.34l-0.46,-3.71l0.51,-1.12l2.17,-0.22l0.27,-0.3l-0.08,-6.5l7.91,0.13l0.31,-0.3l0.01,-3.5l8.17,5.63l-2.89,0.04l-0.29,0.33l2.42,22.56l0.12,0.21l0.26,0.19l-0.43,1.38l-9.83,0.04l-0.25,0.13l-0.27,0.41l-0.77,-0.14l-0.15,0.01l-1.3,0.47l-1.64,-0.67l-0.14,-0.02l-0.79,0.06l-0.27,0.22l-0.39,1.39l-0.53,0.29Z",name:"Mauritania"},UG:{path:"M500.74,287.17l-2.84,-0.02l-0.92,0.32l-1.37,0.71l-0.29,-0.12l0.02,-1.6l0.54,-0.89l0.04,-0.13l0.14,-1.96l0.49,-1.09l0.91,-1.24l0.97,-0.68l0.8,-0.89l-0.13,-0.49l-0.79,-0.27l0.13,-2.55l0.78,-0.52l1.45,0.51l0.18,0.01l1.97,-0.57l1.72,0.01l0.18,-0.06l1.29,-0.97l0.98,1.44l0.29,1.24l1.05,2.75l-0.84,1.68l-1.94,2.66l-0.06,0.18l0.02,2.36l-4.8,0.18Z",name:"Uganda"},MY:{path:"M717.6,273.52l-1.51,0.7l-2.13,-0.41l-2.88,-0.0l-0.29,0.21l-0.84,2.77l-0.9,0.82l-0.08,0.12l-1.23,3.34l-1.81,0.47l-2.29,-0.68l-0.14,-0.01l-1.2,0.22l-0.14,0.07l-1.36,1.18l-1.47,-0.17l-0.12,0.01l-1.46,0.46l-1.51,-1.25l-0.24,-0.97l1.26,0.59l0.2,0.02l1.93,-0.47l0.22,-0.22l0.47,-1.98l0.9,-0.4l2.97,-0.54l0.17,-0.09l1.8,-1.98l1.02,-1.32l0.9,1.03l0.48,-0.04l0.43,-0.7l1.02,0.07l0.32,-0.27l0.25,-2.72l1.84,-1.67l1.23,-1.89l0.73,-0.01l1.12,1.11l0.1,0.99l0.18,0.24l1.66,0.71l1.85,0.67l-0.09,0.51l-1.45,0.11l-0.26,0.4l0.35,0.97ZM673.78,269.53l0.17,1.14l0.35,0.25l1.65,-0.3l0.18,-0.11l0.68,-0.86l0.31,0.13l1.41,1.45l0.99,1.59l0.13,1.57l-0.26,1.09l0.0,0.15l0.24,0.84l0.18,1.46l0.11,0.2l0.82,0.64l0.92,2.08l-0.03,0.52l-1.4,0.13l-2.29,-1.79l-2.86,-1.92l-0.27,-1.16l-0.07,-0.13l-1.39,-1.61l-0.33,-1.99l-0.05,-0.12l-0.84,-1.27l0.26,-1.72l-0.03,-0.18l-0.45,-0.87l0.13,-0.13l1.71,0.92Z",name:"Malaysia"},MX:{path:"M133.41,213.83l0.61,0.09l0.27,-0.09l0.93,-1.01l0.08,-0.18l0.09,-1.22l-0.09,-0.23l-1.93,-1.94l-1.46,-0.77l-2.96,-5.62l-0.86,-2.1l2.44,-0.18l2.68,-0.25l-0.03,0.08l0.17,0.4l3.79,1.35l5.81,1.97l6.96,-0.02l0.3,-0.3l0.0,-0.84l3.91,0.0l0.87,0.93l1.27,0.87l1.44,1.17l0.79,1.37l0.62,1.49l0.12,0.14l1.35,0.85l2.08,0.82l0.35,-0.1l1.49,-2.04l1.81,-0.05l1.63,1.01l1.21,1.8l0.86,1.58l1.47,1.55l0.53,1.82l0.73,1.32l0.14,0.13l1.98,0.84l1.78,0.59l0.61,-0.03l-0.78,1.89l-0.45,1.96l-0.19,3.58l-0.24,1.27l0.01,0.14l0.43,1.43l0.78,1.31l0.49,1.98l0.06,0.12l1.63,1.9l0.61,1.51l0.98,1.28l0.16,0.11l2.58,0.67l0.98,1.02l0.31,0.08l2.17,-0.71l1.91,-0.26l1.87,-0.47l1.67,-0.49l1.59,-1.06l0.11,-0.14l0.6,-1.52l0.22,-2.21l0.35,-0.62l1.58,-0.64l2.59,-0.59l2.18,0.09l1.43,-0.2l0.39,0.36l-0.07,1.02l-1.28,1.48l-0.65,1.68l0.07,0.32l0.33,0.32l-0.79,2.49l-0.28,-0.3l-0.24,-0.09l-1.0,0.08l-0.24,0.15l-0.74,1.28l-0.19,-0.13l-0.28,-0.03l-0.3,0.12l-0.19,0.29l0.0,0.06l-4.34,-0.02l-0.3,0.3l-0.0,1.16l-0.83,0.0l-0.28,0.19l0.08,0.33l0.93,0.86l0.9,0.58l0.24,0.48l0.16,0.15l0.2,0.08l-0.03,0.38l-2.94,0.01l-0.26,0.15l-1.21,2.09l0.02,0.33l0.25,0.33l-0.21,0.44l-0.04,0.22l-2.42,-2.35l-1.36,-0.87l-2.04,-0.67l-0.13,-0.01l-1.4,0.19l-2.07,0.98l-1.14,0.23l-1.72,-0.66l-1.85,-0.48l-2.31,-1.16l-1.92,-0.38l-2.79,-1.18l-2.04,-1.2l-0.6,-0.66l-0.19,-0.1l-1.37,-0.15l-2.45,-0.78l-1.07,-1.18l-2.63,-1.44l-1.2,-1.56l-0.44,-0.93l0.5,-0.15l0.2,-0.39l-0.2,-0.58l0.46,-0.55l0.07,-0.19l0.01,-0.91l-0.06,-0.18l-0.81,-1.13l-0.25,-1.08l-0.86,-1.36l-2.21,-2.63l-2.53,-2.09l-1.2,-1.63l-0.11,-0.09l-2.08,-1.06l-0.34,-0.48l0.35,-1.53l-0.16,-0.34l-1.24,-0.61l-1.39,-1.23l-0.6,-1.81l-0.24,-0.2l-1.25,-0.2l-1.38,-1.35l-1.11,-1.25l-0.1,-0.76l-0.05,-0.13l-1.33,-2.04l-0.85,-2.02l0.04,-0.99l-0.14,-0.27l-1.81,-1.1l-0.2,-0.04l-0.74,0.11l-1.34,-0.72l-0.42,0.16l-0.4,1.12l-0.0,0.19l0.41,1.3l0.24,2.04l0.06,0.15l0.88,1.16l1.84,1.86l0.4,0.61l0.12,0.1l0.27,0.14l0.29,0.82l0.31,0.2l0.2,-0.02l0.43,1.51l0.09,0.14l0.72,0.65l0.51,0.91l1.58,1.4l0.8,2.42l0.77,1.23l0.66,1.19l0.13,1.34l0.28,0.27l1.08,0.08l0.92,1.1l0.83,1.08l-0.03,0.24l-0.88,0.81l-0.13,-0.0l-0.59,-1.42l-0.07,-0.11l-1.67,-1.53l-1.81,-1.28l-1.15,-0.61l0.07,-1.85l-0.38,-1.45l-0.12,-0.17l-2.91,-2.03l-0.39,0.04l-0.11,0.11l-0.42,-0.46l-0.11,-0.08l-1.49,-0.63l-1.09,-1.16Z",name:"Mexico"},VU:{path:"M839.92,325.66l0.78,0.73l-0.18,0.07l-0.6,-0.8ZM839.13,322.74l0.27,1.36l-0.13,-0.06l-0.21,-0.02l-0.29,0.08l-0.22,-0.43l-0.03,-1.32l0.61,0.4Z",name:"Vanuatu"},FR:{path:"M444.58,172.63l-0.68,1.92l-0.72,-0.38l-0.51,-1.79l0.43,-0.95l1.15,-0.83l0.33,2.04ZM429.71,147.03l1.77,1.57l0.26,0.07l1.16,-0.23l2.12,1.44l0.56,0.28l0.16,0.03l0.61,-0.06l1.09,0.78l0.13,0.05l3.18,0.53l-1.09,1.94l-0.3,2.16l-0.48,0.38l-1.0,-0.26l-0.37,0.32l0.07,0.66l-1.73,1.68l-0.09,0.21l-0.04,1.42l0.41,0.29l0.96,-0.4l0.67,1.07l-0.09,0.78l0.04,0.19l0.61,0.97l-0.71,0.78l-0.07,0.28l0.65,2.39l0.21,0.21l1.09,0.31l-0.2,0.95l-2.08,1.58l-4.81,-0.8l-0.13,0.01l-3.65,0.99l-0.22,0.24l-0.25,1.6l-2.59,0.35l-2.74,-1.33l-0.31,0.03l-0.79,0.57l-4.38,-1.31l-0.79,-0.94l1.16,-1.64l0.05,-0.15l0.48,-6.17l-0.06,-0.21l-2.58,-3.3l-1.89,-1.65l-0.11,-0.06l-3.64,-1.17l-0.2,-1.88l2.92,-0.63l4.14,0.82l0.35,-0.36l-0.65,-3.0l1.77,1.05l0.27,0.02l5.83,-2.54l0.17,-0.19l0.71,-2.54l1.75,-0.53l0.27,0.88l0.27,0.21l1.04,0.05l1.08,1.23Z",name:"France"},FG:{path:"M289.1,278.45l-0.85,0.84l-0.88,0.13l-0.25,-0.51l-0.21,-0.16l-0.56,-0.1l-0.25,0.07l-0.63,0.55l-0.62,-0.29l0.5,-0.88l0.21,-1.11l0.42,-1.05l-0.03,-0.28l-0.93,-1.42l-0.18,-1.54l1.13,-1.87l2.42,0.78l2.55,2.04l0.33,0.81l-1.4,2.16l-0.77,1.84Z",name:"French Guiana"},FI:{path:"M492.26,76.42l-0.38,3.12l0.12,0.28l3.6,2.69l-2.14,2.96l-0.01,0.33l2.83,4.61l-1.61,3.36l0.03,0.31l2.15,2.87l-0.96,2.44l0.1,0.35l3.51,2.55l-0.81,1.72l-2.28,2.19l-5.28,4.79l-4.51,0.31l-4.39,1.37l-3.87,0.75l-1.34,-1.89l-0.11,-0.09l-2.23,-1.14l0.53,-3.54l-0.01,-0.14l-1.17,-3.37l1.12,-2.13l2.23,-2.44l5.69,-4.33l1.65,-0.84l0.16,-0.31l-0.26,-1.73l-0.15,-0.22l-3.4,-1.91l-0.77,-1.47l-0.07,-6.45l-0.12,-0.24l-3.91,-2.94l-3.0,-1.92l0.97,-0.76l2.6,2.17l0.21,0.07l3.2,-0.21l2.63,1.03l0.3,-0.05l2.39,-1.94l0.09,-0.13l1.18,-3.12l3.63,-1.42l2.87,1.59l-0.98,2.87Z",name:"Finland"},FJ:{path:"M869.98,327.07l-1.31,0.44l-0.14,-0.41l0.96,-0.41l0.85,-0.17l1.43,-0.78l-0.16,0.65l-1.64,0.67ZM867.58,329.12l0.54,0.47l-0.31,1.0l-1.32,0.3l-1.13,-0.26l-0.17,-0.78l0.72,-0.66l0.98,0.27l0.25,-0.04l0.43,-0.29Z",name:"Fiji"},FK:{path:"M268.15,427.89l2.6,-1.73l1.98,0.77l0.31,-0.05l1.32,-1.17l1.58,1.18l-0.54,0.84l-3.1,0.92l-1.0,-1.04l-0.39,-0.04l-1.9,1.35l-0.86,-1.04Z",name:"Falkland Islands"},NI:{path:"M202.1,252.6l0.23,-0.0l0.12,-0.11l0.68,-0.09l0.22,-0.15l0.23,-0.43l0.2,-0.01l0.28,-0.31l-0.04,-0.97l0.29,-0.03l0.5,0.02l0.25,-0.11l0.37,-0.46l0.51,0.35l0.4,-0.06l0.23,-0.28l0.45,-0.29l0.87,-0.7l0.11,-0.21l0.02,-0.26l0.23,-0.12l0.25,-0.48l0.29,0.27l0.14,0.07l0.5,0.12l0.22,-0.03l0.48,-0.28l0.66,-0.02l0.87,-0.33l0.36,-0.32l0.21,0.01l-0.11,0.48l0.0,0.14l0.22,0.8l-0.54,0.85l-0.27,1.03l-0.09,1.18l0.14,0.72l0.05,0.95l-0.24,0.15l-0.13,0.19l-0.23,1.09l0.0,0.14l0.14,0.53l-0.42,0.53l-0.06,0.24l0.12,0.69l0.08,0.15l0.18,0.19l-0.26,0.23l-0.49,-0.11l-0.35,-0.44l-0.16,-0.1l-0.79,-0.21l-0.23,0.03l-0.45,0.26l-1.51,-0.62l-0.31,0.05l-0.17,0.15l-1.81,-1.62l-0.6,-0.9l-1.04,-0.79l-0.77,-0.71Z",name:"Nicaragua"},NL:{path:"M436.22,136.65l1.82,0.08l0.36,0.89l-0.6,2.96l-0.53,1.06l-1.32,0.0l-0.3,0.34l0.35,2.89l-0.83,-0.47l-1.56,-1.43l-0.29,-0.07l-2.26,0.67l-1.02,-0.15l0.68,-0.48l0.1,-0.12l2.14,-4.84l3.25,-1.35Z",name:"Netherlands"},NO:{path:"M491.45,67.31l7.06,3.0l-2.52,0.94l-0.11,0.49l2.43,2.49l-3.82,1.59l-1.48,0.3l0.89,-2.61l-0.14,-0.36l-3.21,-1.78l-0.25,-0.02l-3.89,1.52l-0.17,0.17l-1.2,3.17l-2.19,1.78l-2.53,-0.99l-0.13,-0.02l-3.15,0.21l-2.69,-2.25l-0.38,-0.01l-1.43,1.11l-1.47,0.17l-0.26,0.26l-0.33,2.57l-4.42,-0.65l-0.33,0.22l-0.6,2.19l-2.17,-0.01l-0.27,0.16l-4.15,7.68l-3.88,5.76l-0.0,0.33l0.81,1.23l-0.7,1.27l-2.3,-0.06l-0.28,0.18l-1.63,3.72l-0.02,0.13l0.15,5.17l0.07,0.18l1.51,1.84l-0.79,4.24l-2.04,2.5l-0.92,1.75l-1.39,-1.88l-0.44,-0.05l-4.89,4.21l-3.16,0.81l-3.24,-1.74l-0.86,-3.82l-0.78,-8.6l2.18,-2.36l6.56,-3.28l5.0,-4.16l4.63,-5.74l5.99,-8.09l4.17,-3.23l6.84,-5.49l5.39,-1.92l4.06,0.24l0.23,-0.09l3.72,-3.67l4.51,0.19l4.4,-0.89ZM484.58,19.95l4.42,1.82l-3.25,2.68l-7.14,0.65l-7.16,-0.91l-0.39,-1.37l-0.28,-0.22l-3.48,-0.1l-2.25,-2.15l7.09,-1.48l3.55,1.36l0.28,-0.03l2.42,-1.66l6.18,1.41ZM481.99,33.92l-4.73,1.85l-3.76,-1.06l1.27,-1.02l0.04,-0.43l-1.18,-1.35l4.46,-0.94l0.89,1.83l0.17,0.15l2.83,0.96ZM466.5,23.95l7.64,3.87l-5.63,1.94l-0.19,0.19l-1.35,3.88l-2.08,0.96l-0.16,0.19l-1.14,4.18l-2.71,0.18l-4.94,-2.95l1.95,-1.63l-0.08,-0.51l-3.7,-1.54l-4.79,-4.54l-1.78,-4.01l6.29,-1.88l1.25,1.81l0.25,0.13l3.57,-0.08l0.26,-0.17l0.87,-1.79l3.41,-0.18l3.08,1.94Z",name:"Norway"},NA:{path:"M461.88,357.98l-1.61,-1.77l-0.94,-1.9l-0.54,-2.58l-0.62,-1.95l-0.83,-4.05l-0.06,-3.13l-0.33,-1.5l-0.07,-0.14l-0.95,-1.06l-1.27,-2.12l-1.3,-3.1l-0.59,-1.71l-1.98,-2.46l-0.13,-1.67l0.99,-0.4l1.44,-0.42l1.48,0.07l1.42,1.11l0.31,0.03l0.32,-0.15l9.99,-0.11l1.66,1.18l0.16,0.06l6.06,0.37l4.69,-1.06l2.01,-0.57l1.5,0.14l0.63,0.37l-1.0,0.41l-0.7,0.01l-0.16,0.05l-1.38,0.88l-0.79,-0.88l-0.29,-0.09l-3.83,0.9l-1.84,0.08l-0.29,0.3l-0.07,8.99l-2.18,0.08l-0.29,0.3l-0.0,17.47l-2.04,1.27l-1.21,0.18l-1.51,-0.49l-0.99,-0.18l-0.36,-1.0l-0.1,-0.14l-0.99,-0.74l-0.4,0.04l-0.98,1.09Z",name:"Namibia"},NC:{path:"M835.87,338.68l2.06,1.63l1.01,0.94l-0.49,0.32l-1.21,-0.62l-1.76,-1.16l-1.58,-1.36l-1.61,-1.79l-0.16,-0.41l0.54,0.02l1.32,0.83l1.08,0.87l0.79,0.73Z",name:"New Caledonia"},NE:{path:"M426.67,254.17l0.03,-1.04l-0.24,-0.3l-2.66,-0.53l-0.06,-1.0l-0.07,-0.17l-1.37,-1.62l-0.3,-1.04l0.15,-0.94l1.37,-0.09l0.19,-0.09l0.85,-0.83l3.34,-0.22l2.22,-0.41l0.24,-0.26l0.2,-1.5l1.32,-1.65l0.07,-0.19l-0.01,-5.74l3.4,-1.13l7.24,-5.12l8.46,-4.95l3.76,1.08l1.35,1.39l0.36,0.05l1.39,-0.77l0.55,3.66l0.12,0.2l0.82,0.6l0.03,0.69l0.1,0.21l0.87,0.74l-0.47,0.99l-0.96,5.26l-0.13,3.25l-3.08,2.34l-0.1,0.15l-1.08,3.37l0.08,0.31l0.94,0.86l-0.01,1.51l0.29,0.3l1.25,0.05l-0.14,0.66l-0.51,0.11l-0.24,0.26l-0.06,0.57l-0.04,0.0l-1.59,-2.62l-0.21,-0.14l-0.59,-0.1l-0.23,0.05l-1.83,1.33l-1.79,-0.68l-1.42,-0.17l-0.17,0.03l-0.65,0.32l-1.39,-0.07l-0.19,0.06l-1.4,1.03l-1.12,0.05l-2.97,-1.29l-0.26,0.01l-1.12,0.59l-1.08,-0.04l-0.85,-0.88l-0.11,-0.07l-2.51,-0.95l-0.14,-0.02l-2.69,0.3l-0.16,0.07l-0.65,0.55l-0.1,0.16l-0.34,1.41l-0.69,0.98l-0.05,0.15l-0.13,1.72l-1.47,-1.13l-0.18,-0.06l-0.9,0.01l-0.2,0.08l-0.32,0.28Z",name:"Niger"},NG:{path:"M442.0,272.7l-2.4,0.83l-0.88,-0.12l-0.19,0.04l-0.89,0.52l-1.78,-0.05l-1.23,-1.44l-0.88,-1.87l-1.77,-1.66l-0.21,-0.08l-3.78,0.03l0.13,-3.75l-0.06,-1.58l0.44,-1.47l0.74,-0.75l1.21,-1.56l0.04,-0.29l-0.22,-0.56l0.44,-0.9l0.01,-0.24l-0.54,-1.44l0.26,-2.97l0.72,-1.06l0.33,-1.37l0.51,-0.43l2.53,-0.28l2.38,0.9l0.89,0.91l0.2,0.09l1.28,0.04l0.15,-0.03l1.06,-0.56l2.9,1.26l0.13,0.02l1.28,-0.06l0.16,-0.06l1.39,-1.02l1.36,0.07l0.15,-0.03l0.64,-0.32l1.22,0.13l1.9,0.73l0.28,-0.04l1.86,-1.35l0.33,0.06l1.62,2.67l0.29,0.14l0.32,-0.04l0.73,0.74l-0.19,0.37l-0.12,0.74l-2.03,1.89l-0.07,0.11l-0.66,1.62l-0.35,1.28l-0.48,0.51l-0.07,0.12l-0.48,1.67l-1.26,0.98l-0.1,0.15l-0.38,1.24l-0.58,1.07l-0.2,0.91l-1.43,0.7l-1.26,-0.93l-0.19,-0.06l-0.95,0.04l-0.2,0.09l-1.41,1.39l-0.61,0.02l-0.26,0.17l-1.19,2.42l-0.61,1.67Z",name:"Nigeria"},NZ:{path:"M857.9,379.62l1.85,3.1l0.33,0.14l0.22,-0.28l0.04,-1.41l0.57,0.4l0.35,2.06l0.17,0.22l2.02,0.94l1.78,0.26l0.22,-0.06l1.31,-1.01l0.84,0.22l-0.53,2.27l-0.67,1.5l-1.71,-0.05l-0.25,0.12l-0.67,0.89l-0.05,0.23l0.21,1.15l-0.31,0.46l-2.15,3.57l-1.6,0.99l-0.28,-0.51l-0.15,-0.13l-0.72,-0.3l1.27,-2.15l0.01,-0.29l-0.82,-1.63l-0.15,-0.14l-2.5,-1.09l0.05,-0.69l1.67,-0.94l0.15,-0.21l0.42,-2.24l-0.11,-1.95l-0.03,-0.12l-0.97,-1.85l0.05,-0.41l-0.09,-0.25l-1.18,-1.17l-1.94,-2.49l-0.86,-1.64l0.38,-0.09l1.24,1.43l0.12,0.08l1.81,0.68l0.67,2.39ZM853.93,393.55l0.57,1.24l0.44,0.12l1.51,-1.03l0.52,0.91l0.0,1.09l-0.88,1.31l-1.62,2.2l-1.26,1.2l-0.05,0.38l0.64,1.02l-1.4,0.03l-0.14,0.04l-2.14,1.16l-0.14,0.17l-0.67,2.0l-1.38,3.06l-3.07,2.19l-2.12,-0.06l-1.55,-0.99l-0.14,-0.05l-2.53,-0.2l-0.31,-0.84l1.25,-2.15l3.07,-2.97l1.62,-0.59l1.81,-1.17l2.18,-1.63l1.55,-1.65l1.08,-2.18l0.9,-0.72l0.11,-0.17l0.35,-1.56l1.37,-1.07l0.4,0.91Z",name:"New Zealand"},NP:{path:"M641.26,213.53l-0.14,0.95l0.32,1.64l-0.21,0.78l-1.83,0.04l-2.98,-0.62l-1.86,-0.25l-1.37,-1.3l-0.18,-0.08l-3.38,-0.34l-3.21,-1.49l-2.38,-1.34l-2.16,-0.92l0.84,-2.2l1.51,-1.18l0.89,-0.57l1.83,0.77l2.5,1.76l1.39,0.41l0.78,1.21l0.17,0.13l1.91,0.53l2.0,1.17l2.92,0.66l2.63,0.24Z",name:"Nepal"},CI:{path:"M413.53,272.08l-0.83,0.02l-1.79,-0.49l-1.64,0.03l-3.04,0.46l-1.73,0.72l-2.4,0.89l-0.12,-0.02l0.16,-1.7l0.19,-0.25l0.06,-0.2l-0.08,-0.99l-0.09,-0.19l-1.06,-1.05l-0.15,-0.08l-0.71,-0.15l-0.51,-0.48l0.45,-0.92l0.02,-0.19l-0.24,-1.16l0.07,-0.43l0.14,-0.0l0.3,-0.26l0.15,-1.1l-0.02,-0.15l-0.13,-0.34l0.09,-0.13l0.83,-0.27l0.19,-0.37l-0.62,-2.02l-0.55,-1.0l0.14,-0.59l0.35,-0.14l0.24,-0.16l0.53,0.29l0.14,0.04l1.93,0.02l0.26,-0.14l0.36,-0.58l0.39,0.01l0.43,-0.17l0.28,0.79l0.43,0.16l0.56,-0.31l0.89,-0.32l0.92,0.45l0.39,0.75l0.14,0.13l1.13,0.53l0.3,-0.03l0.81,-0.59l1.02,-0.08l1.49,0.57l0.62,3.33l-1.03,2.09l-0.65,2.84l0.02,0.2l1.05,2.08l-0.07,0.64Z",name:"Ivory Coast"},CH:{path:"M444.71,156.27l0.05,0.3l-0.34,0.69l0.13,0.4l1.13,0.58l1.07,0.1l-0.12,0.81l-0.87,0.42l-1.75,-0.37l-0.34,0.18l-0.47,1.1l-0.86,0.07l-0.33,-0.38l-0.41,-0.04l-1.34,1.01l-1.02,0.13l-0.93,-0.58l-0.82,-1.32l-0.37,-0.12l-0.77,0.32l0.02,-0.84l1.74,-1.69l0.09,-0.25l-0.04,-0.38l0.73,0.19l0.26,-0.06l0.6,-0.48l2.02,0.02l0.24,-0.12l0.38,-0.51l2.31,0.84Z",name:"Switzerland"},CO:{path:"M232.24,284.95l-0.94,-0.52l-1.22,-0.82l-0.31,-0.01l-0.62,0.35l-1.88,-0.31l-0.54,-0.95l-0.29,-0.15l-0.37,0.03l-2.34,-1.33l-0.15,-0.35l0.57,-0.11l0.24,-0.32l-0.1,-1.15l0.46,-0.71l1.11,-0.15l0.21,-0.13l1.05,-1.57l0.95,-1.31l-0.08,-0.43l-0.73,-0.47l0.4,-1.24l0.01,-0.16l-0.53,-2.15l0.44,-0.54l0.06,-0.24l-0.4,-2.13l-0.06,-0.13l-0.93,-1.22l0.21,-0.8l0.52,0.12l0.32,-0.13l0.47,-0.75l0.03,-0.27l-0.52,-1.32l0.09,-0.11l1.14,0.07l0.22,-0.08l1.82,-1.71l0.96,-0.25l0.22,-0.28l0.02,-0.81l0.43,-2.01l1.28,-1.04l1.48,-0.05l0.27,-0.19l0.12,-0.31l1.73,0.19l0.2,-0.05l1.96,-1.28l0.97,-0.56l1.16,-1.16l0.64,0.11l0.43,0.44l-0.31,0.55l-1.49,0.39l-0.19,0.16l-0.6,1.2l-0.97,0.74l-0.73,0.94l-0.06,0.13l-0.3,1.76l-0.68,1.44l0.23,0.43l1.1,0.14l0.27,0.97l0.08,0.13l0.49,0.49l0.17,0.85l-0.27,0.86l-0.01,0.14l0.09,0.53l0.2,0.23l0.52,0.18l0.54,0.79l0.27,0.13l3.18,-0.24l1.31,0.29l1.7,2.08l0.31,0.1l0.96,-0.26l1.75,0.13l1.41,-0.27l0.56,0.27l-0.36,1.07l-0.54,0.81l-0.05,0.13l-0.2,1.8l0.51,1.79l0.07,0.12l0.65,0.68l0.05,0.32l-1.16,1.14l0.05,0.47l0.86,0.52l0.6,0.79l0.31,1.01l-0.7,-0.81l-0.44,-0.01l-0.74,0.77l-4.75,-0.05l-0.3,0.31l0.03,1.57l0.25,0.29l1.2,0.21l-0.02,0.24l-0.1,-0.05l-0.22,-0.02l-1.41,0.41l-0.22,0.29l-0.01,1.82l0.11,0.23l1.04,0.85l0.35,1.3l-0.06,1.02l-1.02,6.26l-0.84,-0.89l-0.19,-0.09l-0.25,-0.02l1.35,-2.13l-0.1,-0.42l-1.92,-1.17l-0.2,-0.04l-1.41,0.2l-0.82,-0.39l-0.26,0.0l-1.29,0.62l-1.63,-0.27l-1.4,-2.5l-0.12,-0.12l-1.1,-0.61l-0.83,-1.2l-1.67,-1.19l-0.27,-0.04l-0.54,0.19Z",name:"Colombia"},CN:{path:"M740.32,148.94l0.22,0.21l4.3,1.03l2.84,2.2l0.99,2.92l0.28,0.2l3.8,0.0l0.15,-0.04l2.13,-1.24l3.5,-0.8l-1.05,2.29l-0.95,1.13l-0.06,0.12l-0.85,3.41l-1.56,2.81l-2.83,-0.51l-0.19,0.03l-2.15,1.09l-0.15,0.34l0.65,2.59l-0.33,3.3l-1.03,0.07l-0.28,0.3l0.01,0.75l-1.09,-1.2l-0.48,0.05l-0.94,1.6l-3.76,1.26l-0.2,0.36l0.29,1.19l-1.67,-0.08l-1.11,-0.88l-0.42,0.05l-1.69,2.08l-2.71,1.57l-2.04,1.88l-3.42,0.84l-0.11,0.05l-1.8,1.34l-1.54,0.46l0.52,-0.53l0.06,-0.33l-0.44,-0.96l1.84,-1.84l0.02,-0.41l-1.32,-1.56l-0.36,-0.08l-2.23,1.08l-2.83,2.06l-1.52,1.85l-2.32,0.13l-0.2,0.09l-1.28,1.37l-0.03,0.37l1.32,1.97l0.18,0.13l1.83,0.43l0.07,1.08l0.18,0.26l1.98,0.84l0.3,-0.03l2.66,-1.96l2.06,1.04l0.12,0.03l1.4,0.07l0.27,1.0l-3.24,0.73l-0.17,0.11l-1.13,1.5l-2.38,1.4l-0.1,0.1l-1.29,1.99l0.1,0.42l2.6,1.5l0.97,2.72l1.52,2.56l1.66,2.08l-0.03,1.76l-1.4,0.67l-0.15,0.38l0.6,1.47l0.13,0.15l1.29,0.75l-0.35,2.0l-0.58,1.96l-1.22,0.21l-0.2,0.14l-1.83,2.93l-2.02,3.51l-2.29,3.13l-3.4,2.42l-3.42,2.18l-2.75,0.3l-0.15,0.06l-1.32,1.01l-0.68,-0.67l-0.41,-0.01l-1.37,1.27l-3.42,1.28l-2.62,0.4l-0.24,0.21l-0.8,2.57l-0.95,0.11l-0.53,-1.54l0.52,-0.89l-0.19,-0.44l-3.36,-0.84l-0.17,0.01l-1.09,0.4l-2.36,-0.64l-1.0,-0.9l0.35,-1.34l-0.23,-0.37l-2.22,-0.47l-1.15,-0.94l-0.36,-0.02l-2.08,1.37l-2.35,0.29l-1.98,-0.01l-0.13,0.03l-1.32,0.63l-1.28,0.38l-0.21,0.33l0.33,2.65l-0.78,-0.04l-0.14,-0.39l-0.07,-1.04l-0.41,-0.26l-1.72,0.71l-0.96,-0.43l-1.63,-0.86l0.65,-1.95l-0.19,-0.38l-1.43,-0.46l-0.56,-2.27l-0.34,-0.22l-2.26,0.38l0.25,-2.65l2.29,-2.15l0.09,-0.2l0.1,-2.21l-0.07,-2.09l-0.15,-0.25l-1.02,-0.6l-0.8,-1.52l-0.31,-0.16l-1.42,0.2l-2.16,-0.32l0.55,-0.74l0.01,-0.35l-1.17,-1.7l-0.41,-0.08l-1.67,1.07l-1.97,-0.63l-0.25,0.03l-2.89,1.73l-2.26,1.99l-1.82,0.3l-1.0,-0.66l-0.15,-0.05l-1.28,-0.06l-1.75,-0.61l-0.24,0.02l-1.35,0.69l-0.1,0.08l-1.2,1.45l-0.14,-1.41l-0.4,-0.25l-1.46,0.55l-2.83,-0.26l-2.77,-0.61l-1.99,-1.17l-1.91,-0.54l-0.78,-1.21l-0.17,-0.13l-1.36,-0.38l-2.54,-1.79l-2.01,-0.84l-0.28,0.02l-0.89,0.56l-3.31,-1.83l-2.35,-1.67l-0.57,-2.49l1.34,0.28l0.36,-0.28l0.08,-1.42l-0.05,-0.19l-0.93,-1.34l0.24,-2.18l-0.07,-0.22l-2.69,-3.32l-0.15,-0.1l-3.97,-1.11l-0.69,-2.05l-0.11,-0.15l-1.79,-1.3l-0.39,-0.73l-0.36,-1.57l0.08,-1.09l-0.18,-0.3l-1.52,-0.66l-0.22,-0.01l-0.51,0.18l-0.52,-2.21l0.59,-0.55l0.06,-0.35l-0.22,-0.44l2.12,-1.24l1.63,-0.55l2.58,0.39l0.31,-0.16l0.87,-1.75l3.05,-0.34l0.21,-0.12l0.84,-1.12l3.87,-1.59l0.15,-0.14l0.35,-0.68l0.03,-0.17l-0.17,-1.51l1.52,-0.7l0.15,-0.39l-2.12,-5.0l4.62,-1.15l1.35,-0.72l0.14,-0.17l1.72,-5.37l4.7,0.99l0.28,-0.08l1.39,-1.43l0.08,-0.2l0.11,-2.95l1.83,-0.26l0.18,-0.1l1.85,-2.08l0.61,-0.17l0.57,1.97l0.1,0.15l2.2,1.75l3.48,1.17l1.59,2.36l-0.93,3.53l0.04,0.24l0.9,1.35l0.2,0.13l2.98,0.53l3.32,0.43l2.97,1.89l1.49,0.35l1.08,2.67l1.52,1.88l0.24,0.11l2.74,-0.07l5.15,0.67l3.36,-0.41l2.39,0.43l3.67,1.81l0.13,0.03l2.92,-0.0l1.02,0.86l0.34,0.03l2.88,-1.59l3.98,-1.03l3.81,-0.13l3.02,-1.12l1.77,-1.61l1.73,-1.01l0.13,-0.37l-0.41,-1.01l-0.72,-1.07l1.09,-1.66l1.21,0.24l2.57,0.63l0.24,-0.04l2.46,-1.62l3.78,-1.19l0.13,-0.09l1.8,-2.03l1.66,-0.84l3.54,-0.41l1.93,0.35l0.34,-0.22l0.27,-1.12l-0.08,-0.29l-2.27,-2.22l-2.08,-1.07l-0.29,0.01l-1.82,1.12l-2.36,-0.47l-0.14,0.01l-1.18,0.34l-0.46,-0.94l1.69,-3.08l1.1,-2.21l2.75,1.12l0.26,-0.02l3.53,-2.06l0.15,-0.26l-0.02,-1.35l2.18,-3.39l1.35,-1.04l0.12,-0.24l-0.03,-1.85l-0.15,-0.25l-1.0,-0.58l1.68,-1.37l3.01,-0.59l3.25,-0.09l3.67,0.99l2.08,1.18l1.51,3.3l0.95,1.45l0.85,1.99l0.92,3.19ZM697.0,237.37l-1.95,1.12l-1.74,-0.68l-0.06,-1.9l1.08,-1.03l2.62,-0.7l1.23,0.05l0.37,0.65l-1.01,1.08l-0.54,1.4Z",name:"China"},CM:{path:"M453.76,278.92l-0.26,-0.11l-0.18,-0.02l-1.42,0.31l-1.56,-0.33l-1.17,0.16l-3.7,-0.05l0.3,-1.63l-0.04,-0.21l-0.98,-1.66l-0.15,-0.13l-1.03,-0.38l-0.46,-1.01l-0.13,-0.14l-0.48,-0.27l0.02,-0.46l0.62,-1.72l1.1,-2.25l0.54,-0.02l0.2,-0.09l1.41,-1.39l0.73,-0.03l1.32,0.97l0.31,0.03l1.72,-0.85l0.16,-0.2l0.22,-1.0l0.57,-1.03l0.36,-1.18l1.26,-0.98l0.1,-0.15l0.49,-1.7l0.48,-0.51l0.07,-0.13l0.35,-1.3l0.63,-1.54l2.06,-1.92l0.09,-0.17l0.12,-0.79l0.24,-0.41l-0.04,-0.36l-0.89,-0.91l0.04,-0.45l0.28,-0.06l0.85,1.39l0.16,1.59l-0.09,1.66l0.04,0.17l1.09,1.84l-0.86,-0.02l-0.72,0.17l-1.07,-0.24l-0.34,0.17l-0.54,1.19l0.06,0.34l1.48,1.47l1.06,0.44l0.32,0.94l0.73,1.6l-0.32,0.57l-1.23,2.49l-0.54,0.41l-0.12,0.21l-0.19,1.95l0.24,1.08l-0.18,0.67l0.07,0.28l1.13,1.25l0.24,0.93l0.92,1.29l1.1,0.8l0.1,1.01l0.26,0.73l-0.12,0.93l-1.65,-0.49l-2.02,-0.66l-3.19,-0.11Z",name:"Cameroon"},CL:{path:"M246.8,429.1l-1.14,0.78l-2.25,1.21l-0.16,0.23l-0.37,2.94l-0.75,0.06l-2.72,-1.07l-2.83,-2.34l-3.06,-1.9l-0.71,-1.92l0.67,-1.84l-0.02,-0.25l-1.22,-2.13l-0.31,-5.41l1.02,-2.95l2.59,-2.4l-0.13,-0.51l-3.32,-0.8l2.06,-2.4l0.07,-0.15l0.79,-4.77l2.44,0.95l0.4,-0.22l1.31,-6.31l-0.16,-0.33l-1.68,-0.8l-0.42,0.21l-0.72,3.47l-1.01,-0.27l0.74,-4.06l0.85,-5.46l1.12,-1.96l0.03,-0.22l-0.71,-2.82l-0.19,-2.94l0.76,-0.07l0.26,-0.2l1.53,-4.62l1.73,-4.52l1.07,-4.2l-0.56,-4.2l0.73,-2.2l0.01,-0.12l-0.29,-3.3l1.46,-3.34l0.45,-5.19l0.8,-5.52l0.78,-5.89l-0.18,-4.33l-0.49,-3.47l1.1,-0.56l0.13,-0.13l0.44,-0.88l0.9,1.29l0.32,1.8l0.1,0.18l1.16,0.97l-0.73,2.33l0.01,0.21l1.33,2.91l0.97,3.6l0.35,0.22l1.57,-0.31l0.16,0.34l-0.79,2.51l-2.61,1.25l-0.17,0.28l0.08,4.36l-0.48,0.79l0.01,0.33l0.6,0.84l-1.62,1.55l-1.67,2.6l-0.89,2.47l-0.02,0.13l0.23,2.56l-1.5,2.76l-0.03,0.21l1.15,4.8l0.11,0.17l0.54,0.42l-0.01,2.37l-1.4,2.7l-0.03,0.15l0.06,2.25l-1.8,1.78l-0.09,0.21l0.02,2.73l0.71,2.63l-1.33,0.94l-0.12,0.17l-0.67,2.64l-0.59,3.03l0.4,3.55l-0.84,0.51l-0.14,0.31l0.58,3.5l0.08,0.16l0.96,0.99l-0.7,1.08l0.11,0.43l1.04,0.55l0.19,0.8l-0.89,0.48l-0.16,0.31l0.26,1.77l-0.89,4.06l-1.31,2.67l-0.03,0.19l0.28,1.53l-0.73,1.88l-1.85,1.37l-0.12,0.26l0.22,3.46l0.06,0.16l0.88,1.19l0.28,0.12l1.32,-0.17l-0.04,2.13l0.04,0.15l1.04,1.95l0.24,0.16l5.94,0.44ZM248.79,430.71l0.0,7.41l0.3,0.3l2.67,0.0l1.01,0.06l-0.54,0.91l-1.99,1.01l-1.13,-0.1l-1.42,-0.27l-1.87,-1.06l-2.57,-0.49l-3.09,-1.9l-2.52,-1.83l-2.65,-2.93l0.93,0.32l3.54,2.29l3.32,1.23l0.34,-0.09l1.29,-1.57l0.83,-2.32l2.11,-1.28l1.43,0.32Z",name:"Chile"},CA:{path:"M280.14,145.66l-1.66,2.88l0.06,0.37l0.37,0.03l1.5,-1.01l1.17,0.49l-0.64,0.83l0.13,0.46l2.22,0.89l0.28,-0.03l1.02,-0.7l2.09,0.83l-0.69,2.1l0.37,0.38l1.43,-0.45l0.27,1.43l0.74,1.88l-0.95,2.5l-0.88,0.09l-1.34,-0.48l0.49,-2.34l-0.14,-0.32l-0.7,-0.4l-0.36,0.04l-2.81,2.66l-0.63,-0.05l1.2,-1.01l-0.1,-0.52l-2.4,-0.77l-2.79,0.18l-4.65,-0.09l-0.22,-0.54l1.37,-0.99l0.01,-0.48l-0.82,-0.65l1.91,-1.79l2.57,-5.17l1.49,-1.81l2.04,-1.07l0.63,0.08l-0.27,0.51l-1.33,2.07ZM193.92,74.85l-0.01,4.24l0.19,0.28l0.33,-0.07l3.14,-3.22l2.65,2.5l-0.71,3.04l0.06,0.26l2.42,2.88l0.46,0.0l2.66,-3.14l1.83,-3.74l0.03,-0.12l0.13,-4.53l3.23,0.31l3.63,0.64l3.18,2.08l0.13,1.91l-1.79,2.22l-0.0,0.37l1.69,2.2l-0.28,1.8l-4.74,2.84l-3.33,0.62l-2.5,-1.21l-0.41,0.17l-0.73,2.05l-2.39,3.44l-0.74,1.78l-2.78,2.61l-3.48,0.26l-0.17,0.07l-1.98,1.68l-0.1,0.21l-0.15,2.33l-2.68,0.45l-0.17,0.09l-3.1,3.2l-2.75,4.38l-0.99,3.06l-0.14,4.31l0.25,0.31l3.5,0.58l1.07,3.24l1.18,2.76l0.34,0.18l3.43,-0.69l4.55,1.52l2.45,1.32l1.76,1.65l0.12,0.07l3.11,0.96l2.63,1.46l0.13,0.04l4.12,0.2l2.41,0.3l-0.36,2.81l0.8,3.51l1.81,3.78l0.08,0.1l3.73,3.17l0.34,0.03l1.93,-1.08l0.13,-0.15l1.35,-3.44l0.01,-0.18l-1.31,-5.38l-0.08,-0.14l-1.46,-1.5l3.68,-1.51l2.84,-2.46l1.45,-2.55l0.04,-0.17l-0.2,-2.39l-0.04,-0.12l-1.7,-3.07l-2.9,-2.64l2.79,-3.66l0.05,-0.27l-1.08,-3.38l-0.8,-5.75l1.45,-0.75l4.18,1.03l2.6,0.38l0.18,-0.03l1.93,-0.95l2.18,1.23l3.01,2.18l0.73,1.42l0.25,0.16l4.18,0.27l-0.06,2.95l0.83,4.7l0.22,0.24l2.19,0.55l1.75,2.08l0.38,0.07l3.63,-2.03l0.11,-0.11l2.38,-4.06l1.36,-1.43l1.76,3.01l3.26,4.68l2.68,4.19l-0.94,2.09l0.12,0.38l3.31,1.98l2.23,1.98l0.13,0.07l3.94,0.89l1.48,1.02l0.96,2.82l0.22,0.2l1.85,0.43l0.88,1.13l0.17,3.53l-1.68,1.16l-1.76,1.14l-4.08,1.17l-0.11,0.06l-3.08,2.65l-4.11,0.52l-5.35,-0.69l-3.76,-0.02l-2.62,0.23l-0.2,0.1l-2.05,2.29l-3.13,1.41l-0.11,0.08l-3.6,4.24l-2.87,2.92l-0.05,0.36l0.33,0.14l2.13,-0.52l0.15,-0.08l3.98,-4.15l5.16,-2.63l3.58,-0.31l1.82,1.3l-2.09,1.91l-0.09,0.29l0.8,3.46l0.82,2.37l0.15,0.17l3.25,1.56l0.16,0.03l4.14,-0.45l0.21,-0.12l2.03,-2.86l0.11,1.46l0.13,0.22l1.26,0.88l-2.7,1.78l-5.51,1.83l-2.52,1.26l-2.75,2.16l-1.52,-0.18l-0.08,-2.16l4.19,-2.47l0.14,-0.34l-0.3,-0.22l-4.01,0.1l-2.66,0.36l-1.45,-1.56l0.0,-4.16l-0.11,-0.23l-1.11,-0.91l-0.28,-0.05l-1.5,0.48l-0.7,-0.7l-0.45,0.02l-1.91,2.39l-0.8,2.5l-0.82,1.31l-0.95,0.43l-0.77,0.15l-0.23,0.2l-0.18,0.56l-8.2,0.02l-0.13,0.03l-1.19,0.61l-2.95,2.45l-0.78,1.13l-4.6,0.01l-0.12,0.02l-1.13,0.48l-0.13,0.44l0.37,0.55l0.2,0.82l-0.01,0.09l-3.1,1.42l-2.63,0.5l-2.84,1.57l-0.47,0.0l-0.72,-0.4l-0.18,-0.27l0.03,-0.15l0.52,-1.0l1.2,-1.71l0.73,-1.8l0.02,-0.17l-1.03,-5.47l-0.15,-0.21l-2.35,-1.32l0.16,-0.29l-0.05,-0.35l-0.37,-0.38l-0.22,-0.09l-0.56,0.0l-0.35,-0.34l-0.11,-0.65l-0.46,-0.2l-0.39,0.26l-0.2,-0.03l-0.11,-0.33l-0.48,-0.25l-0.21,-0.71l-0.15,-0.18l-3.97,-2.07l-4.8,-2.39l-0.25,-0.01l-2.19,0.89l-0.72,0.03l-3.04,-0.82l-0.14,-0.0l-1.94,0.4l-2.4,-0.98l-2.56,-0.51l-1.7,-0.19l-0.62,-0.44l-0.42,-1.67l-0.3,-0.23l-0.85,0.02l-0.29,0.3l-0.01,0.95l-69.26,-0.01l-4.77,-3.14l-1.78,-1.41l-4.51,-1.38l-1.3,-2.73l0.34,-1.96l-0.17,-0.33l-3.06,-1.37l-0.41,-2.58l-0.11,-0.18l-2.92,-2.4l-0.05,-1.53l1.32,-1.59l0.07,-0.2l-0.07,-2.21l-0.16,-0.26l-4.19,-2.22l-2.52,-4.02l-1.56,-2.6l-0.08,-0.09l-2.28,-1.64l-1.65,-1.48l-1.31,-1.89l-0.38,-0.1l-2.51,1.21l-2.28,1.92l-2.03,-2.22l-1.85,-1.71l-2.44,-1.04l-2.28,-0.12l0.03,-37.72l4.27,0.98l4.0,2.13l2.61,0.4l0.24,-0.07l2.17,-1.81l2.92,-1.33l3.63,0.53l0.18,-0.03l3.72,-1.94l3.89,-1.06l1.6,1.72l0.37,0.06l1.87,-1.04l0.14,-0.19l0.48,-1.83l1.37,0.38l4.18,3.96l0.41,0.0l2.89,-2.62l0.28,2.79l0.37,0.26l3.08,-0.73l0.17,-0.12l0.85,-1.16l2.81,0.24l3.83,1.86l5.86,1.61l3.46,0.75l2.44,-0.26l2.89,1.89l-3.12,1.89l-0.14,0.31l0.24,0.24l4.53,0.92l6.84,-0.5l2.04,-0.71l2.54,2.44l0.39,0.02l2.72,-2.16l-0.01,-0.48l-2.26,-1.61l1.27,-1.16l2.94,-0.19l1.94,-0.42l1.89,0.97l2.49,2.32l0.24,0.08l2.71,-0.33l4.35,1.9l0.17,0.02l3.86,-0.67l3.62,0.1l0.31,-0.33l-0.26,-2.44l1.9,-0.65l3.58,1.36l-0.01,3.84l0.23,0.29l0.34,-0.17l1.51,-3.23l1.81,0.1l0.31,-0.22l1.13,-4.37l-0.08,-0.29l-2.68,-2.73l-2.83,-1.76l0.19,-4.73l2.77,-3.15l3.06,0.69l2.44,1.97l3.24,4.88l-2.05,2.02l0.15,0.51l4.41,0.85ZM265.85,150.7l-0.84,0.04l-3.15,-0.99l-1.77,-1.17l0.19,-0.06l3.17,0.79l2.39,1.27l0.01,0.12ZM249.41,3.71l6.68,0.49l5.34,0.79l4.34,1.6l-0.08,1.24l-5.91,2.56l-6.03,1.21l-2.36,1.38l-0.14,0.34l0.29,0.22l4.37,-0.02l-4.96,3.01l-4.06,1.64l-0.11,0.08l-4.21,4.62l-5.07,0.92l-0.12,0.05l-1.53,1.1l-7.5,0.59l-0.28,0.28l0.24,0.31l2.67,0.54l-1.04,0.6l-0.09,0.44l1.89,2.49l-2.11,1.66l-3.83,1.52l-0.15,0.13l-1.14,2.01l-3.41,1.55l-0.16,0.36l0.35,1.19l0.3,0.22l3.98,-0.19l0.03,0.78l-6.42,2.99l-6.44,-1.41l-7.41,0.79l-3.72,-0.62l-4.48,-0.26l-0.25,-2.0l4.37,-1.13l0.21,-0.38l-1.14,-3.55l1.13,-0.28l6.61,2.29l0.35,-0.12l-0.04,-0.37l-3.41,-3.45l-0.14,-0.08l-3.57,-0.92l1.62,-1.7l4.36,-1.3l0.2,-0.18l0.71,-1.94l-0.12,-0.36l-3.45,-2.15l-0.88,-2.43l6.36,0.23l1.94,0.61l0.23,-0.02l3.91,-2.1l0.15,-0.32l-0.26,-0.24l-5.69,-0.67l-8.69,0.37l-4.3,-1.92l-2.12,-2.39l-2.82,-1.68l-0.44,-1.65l3.41,-1.06l2.93,-0.2l4.91,-0.99l3.69,-2.28l2.93,0.31l2.64,1.68l0.42,-0.1l1.84,-3.23l3.17,-0.96l4.45,-0.69l7.56,-0.26l1.26,0.64l0.18,0.03l7.2,-1.06l10.81,0.8ZM203.94,57.59l0.01,0.32l1.97,2.97l0.51,-0.01l2.26,-3.75l6.05,-1.89l4.08,4.72l-0.36,2.95l0.38,0.33l4.95,-1.36l0.11,-0.05l2.23,-1.77l5.37,2.31l3.32,2.14l0.3,1.89l0.36,0.25l4.48,-1.01l2.49,2.8l0.14,0.09l5.99,1.78l2.09,1.74l2.18,3.83l-4.29,1.91l-0.01,0.54l5.9,2.83l3.95,0.94l3.54,3.84l0.2,0.1l3.58,0.25l-0.67,2.51l-4.18,4.54l-2.84,-1.61l-3.91,-3.95l-0.26,-0.09l-3.24,0.52l-0.25,0.26l-0.32,2.37l0.1,0.26l2.63,2.38l3.42,1.89l0.96,1.0l1.57,3.8l-0.74,2.43l-2.85,-0.96l-6.26,-3.15l-0.38,0.09l0.04,0.39l3.54,3.4l2.55,2.31l0.23,0.78l-6.26,-1.43l-5.33,-2.25l-2.73,-1.73l0.67,-0.86l-0.09,-0.45l-7.38,-4.01l-0.44,0.27l0.03,0.89l-6.85,0.61l-1.8,-1.17l1.43,-2.6l4.56,-0.07l5.15,-0.52l0.23,-0.45l-0.76,-1.34l0.8,-1.89l3.21,-4.06l0.05,-0.29l-0.72,-1.95l-0.97,-1.47l-0.11,-0.1l-3.84,-2.1l-4.53,-1.33l1.09,-0.75l0.05,-0.45l-2.65,-2.75l-0.18,-0.09l-2.12,-0.24l-1.91,-1.47l-0.39,0.02l-1.27,1.25l-4.4,0.56l-9.06,-0.99l-5.28,-1.31l-4.01,-0.67l-1.72,-1.31l2.32,-1.85l0.1,-0.33l-0.28,-0.2l-3.3,-0.02l-0.74,-4.36l1.86,-4.09l2.46,-1.88l5.74,-1.15l-1.5,2.55ZM261.28,159.28l0.19,0.14l1.82,0.42l1.66,-0.05l-0.66,0.68l-0.75,0.16l-3.0,-1.25l-0.46,-0.77l0.51,-0.52l0.68,1.19ZM230.87,84.48l-2.48,0.19l-0.52,-1.74l0.96,-2.17l2.03,-0.53l1.71,1.04l0.02,1.6l-0.22,0.46l-1.5,1.16ZM229.52,58.19l0.14,0.82l-4.99,-0.22l-2.73,0.63l-0.59,-0.23l-2.61,-2.4l0.08,-1.38l0.94,-0.25l5.61,0.51l4.14,2.54ZM222.12,105.0l-0.79,1.63l-0.75,-0.22l-0.52,-0.91l0.04,-0.09l0.84,-1.01l0.74,0.06l0.44,0.55ZM183.77,38.22l2.72,1.65l0.16,0.04l4.83,-0.01l1.92,1.52l-0.51,1.75l0.18,0.36l2.84,1.14l1.56,1.19l0.16,0.06l3.37,0.22l3.65,0.42l4.07,-1.1l5.05,-0.43l3.96,0.35l2.53,1.8l0.48,1.79l-1.37,1.16l-3.6,1.03l-3.22,-0.59l-7.17,0.76l-5.1,0.09l-4.0,-0.6l-6.48,-1.56l-0.81,-2.57l-0.3,-2.49l-0.1,-0.19l-2.51,-2.25l-0.16,-0.07l-5.12,-0.63l-2.61,-1.45l0.75,-1.71l4.88,0.32ZM207.46,91.26l0.42,1.62l0.42,0.19l1.12,-0.55l1.35,0.99l2.74,1.39l2.73,1.2l0.2,1.74l0.35,0.26l1.72,-0.29l1.31,0.97l-1.72,0.96l-3.68,-0.9l-1.34,-1.71l-0.43,-0.04l-2.46,2.1l-3.23,1.85l-0.74,-1.98l-0.31,-0.19l-2.47,0.28l1.49,-1.34l0.1,-0.19l0.32,-3.15l0.79,-3.45l1.34,0.25ZM215.59,102.66l-2.73,2.0l-1.49,-0.08l-0.37,-0.7l1.61,-1.56l3.0,0.03l-0.02,0.3ZM202.79,24.07l0.11,0.12l2.54,1.53l-3.01,1.47l-4.55,4.07l-4.3,0.38l-5.07,-0.68l-2.51,-2.09l0.03,-1.72l1.86,-1.4l0.1,-0.34l-0.29,-0.2l-4.49,0.04l-2.63,-1.79l-1.45,-2.36l1.61,-2.38l1.65,-1.69l2.47,-0.4l0.19,-0.48l-0.72,-0.89l5.1,-0.26l3.1,3.05l0.13,0.07l4.21,1.25l3.99,1.06l1.92,3.65ZM187.5,59.3l-0.15,0.1l-2.59,3.4l-2.5,-0.15l-1.47,-3.92l0.04,-2.24l1.22,-1.92l2.34,-1.26l5.11,0.17l4.28,1.06l-3.36,3.86l-2.9,0.9ZM186.19,48.8l-1.15,1.63l-3.42,-0.35l-2.68,-1.15l1.11,-1.88l3.34,-1.27l2.01,1.63l0.79,1.38ZM185.78,35.41l-0.95,0.13l-4.48,-0.33l-0.4,-0.91l4.5,0.07l1.45,0.82l-0.1,0.21ZM180.76,32.56l-3.43,1.03l-1.85,-1.14l-1.01,-1.92l-0.16,-1.87l2.87,0.2l1.39,0.35l2.75,1.75l-0.55,1.6ZM181.03,76.32l-1.21,1.2l-3.19,-1.26l-0.18,-0.01l-1.92,0.45l-2.88,-1.67l1.84,-1.16l1.6,-1.77l2.45,1.17l1.45,0.77l2.05,2.28ZM169.72,54.76l2.83,0.97l0.14,0.01l4.25,-0.58l0.47,1.01l-2.19,2.16l0.07,0.48l3.61,1.95l-0.41,3.84l-3.87,1.68l-2.23,-0.36l-1.73,-1.75l-6.07,-3.53l0.03,-1.01l4.79,0.55l0.3,-0.16l-0.04,-0.34l-2.55,-2.89l2.59,-2.05ZM174.44,40.56l1.49,1.87l0.07,2.48l-1.07,3.52l-3.87,0.48l-2.41,-0.72l0.05,-2.72l-0.33,-0.3l-3.79,0.36l-0.13,-3.31l2.36,0.14l0.15,-0.03l3.7,-1.74l3.44,0.29l0.31,-0.22l0.03,-0.12ZM170.14,31.5l0.75,1.74l-3.52,-0.52l-4.19,-1.77l-4.65,-0.17l1.65,-1.11l-0.05,-0.52l-2.86,-1.26l-0.13,-1.58l4.52,0.7l6.66,1.99l1.84,2.5ZM134.64,58.08l-1.08,1.93l0.34,0.44l5.44,-1.41l3.37,2.32l0.37,-0.02l2.66,-2.28l2.03,1.38l2.01,4.53l0.53,0.04l1.26,-1.93l0.03,-0.27l-1.67,-4.55l1.82,-0.58l2.36,0.73l2.69,1.84l1.53,4.46l0.77,3.24l0.15,0.19l4.22,2.26l4.32,2.04l-0.21,1.51l-3.87,0.34l-0.19,0.5l1.45,1.54l-0.65,1.23l-4.3,-0.65l-4.4,-1.19l-2.97,0.28l-4.67,1.48l-6.31,0.65l-4.27,0.39l-1.26,-1.91l-0.15,-0.12l-3.42,-1.2l-0.16,-0.01l-2.05,0.45l-2.66,-3.02l1.2,-0.34l3.82,-0.76l3.58,0.19l3.27,-0.78l0.23,-0.29l-0.24,-0.29l-4.84,-1.06l-5.42,0.35l-3.4,-0.09l-0.97,-1.22l5.39,-1.7l0.21,-0.33l-0.3,-0.25l-3.82,0.06l-3.95,-1.1l1.88,-3.13l1.68,-1.81l6.54,-2.84l2.11,0.77ZM158.85,56.58l-1.82,2.62l-3.38,-2.9l0.49,-0.39l3.17,-0.18l1.54,0.86ZM149.71,42.7l1.0,1.87l0.37,0.14l2.17,-0.83l2.33,0.2l0.38,2.16l-1.38,2.17l-8.33,0.76l-6.34,2.15l-3.51,0.1l-0.22,-1.13l4.98,-2.12l0.17,-0.34l-0.31,-0.23l-11.27,0.6l-3.04,-0.78l3.14,-4.57l2.2,-1.35l6.87,1.7l4.4,3.0l0.14,0.05l4.37,0.39l0.27,-0.48l-3.41,-4.68l1.96,-1.62l2.28,0.53l0.79,2.32ZM145.44,29.83l-2.18,0.77l-3.79,-0.0l0.02,-0.31l2.34,-1.5l1.2,0.23l2.42,0.83ZM144.83,34.5l-4.44,1.46l-3.18,-1.48l1.6,-1.36l3.51,-0.53l3.1,0.75l-0.6,1.16ZM119.02,65.87l-6.17,2.07l-1.19,-1.82l-0.13,-0.11l-5.48,-2.32l0.92,-1.7l1.73,-3.44l2.16,-3.15l-0.02,-0.36l-2.09,-2.56l7.84,-0.71l3.59,1.02l6.32,0.27l2.35,1.37l2.25,1.71l-2.68,1.04l-6.21,3.41l-3.1,3.28l-0.08,0.21l0.0,1.81ZM129.66,35.4l-0.3,3.55l-1.77,1.67l-2.34,0.27l-4.62,2.2l-3.89,0.76l-2.83,-0.93l3.85,-3.52l5.04,-3.36l3.75,0.07l3.11,-0.7ZM111.24,152.74l-0.82,0.29l-3.92,-1.39l-0.7,-1.06l-0.12,-0.1l-2.15,-1.09l-0.41,-0.84l-0.2,-0.16l-2.44,-0.56l-0.84,-1.56l0.1,-0.36l2.34,0.64l1.53,0.5l2.28,0.34l0.78,1.04l1.24,1.55l0.09,0.08l2.42,1.3l0.81,1.39ZM88.54,134.82l0.14,0.02l2.0,-0.23l-0.67,3.48l0.06,0.24l1.78,2.22l-0.24,-0.0l-1.4,-1.42l-0.91,-1.53l-1.26,-1.08l-0.42,-1.35l0.09,-0.66l0.82,0.31Z",name:"Canada"},CG:{path:"M453.66,296.61l-0.9,-0.82l-0.35,-0.04l-0.83,0.48l-0.77,0.83l-1.65,-2.13l1.66,-1.2l0.08,-0.39l-0.81,-1.43l0.59,-0.43l1.62,-0.29l0.24,-0.24l0.1,-0.58l0.94,0.84l0.19,0.08l2.21,0.11l0.27,-0.14l0.81,-1.29l0.32,-1.76l-0.27,-1.96l-0.06,-0.15l-1.08,-1.35l1.02,-2.74l-0.09,-0.34l-0.62,-0.5l-0.22,-0.06l-1.66,0.18l-0.55,-1.03l0.12,-0.73l2.85,0.09l1.98,0.65l2.0,0.59l0.38,-0.25l0.17,-1.3l1.26,-2.24l1.34,-1.19l1.54,0.38l1.35,0.12l-0.11,1.15l-0.74,1.34l-0.5,1.61l-0.31,2.22l0.12,1.41l-0.4,0.9l-0.06,0.88l-0.24,0.67l-1.57,1.15l-1.24,1.41l-1.09,2.43l-0.03,0.13l0.08,1.95l-0.55,0.69l-1.46,1.23l-1.32,1.41l-0.61,-0.29l-0.13,-0.57l-0.29,-0.23l-1.36,-0.02l-0.23,0.1l-0.72,0.81l-0.41,-0.16Z",name:"Republic of the Congo"},CF:{path:"M459.41,266.56l1.9,-0.17l0.22,-0.12l0.36,-0.5l0.14,0.02l0.55,0.51l0.29,0.07l3.15,-0.96l0.12,-0.07l1.05,-0.97l1.29,-0.87l0.12,-0.33l-0.17,-0.61l0.38,-0.12l2.36,0.15l0.15,-0.03l2.36,-1.17l0.12,-0.1l1.78,-2.72l1.18,-0.96l1.23,-0.34l0.21,0.79l0.07,0.13l1.37,1.5l0.01,0.86l-0.39,1.0l-0.01,0.17l0.16,0.78l0.1,0.17l0.91,0.76l1.89,1.09l1.24,0.92l0.02,0.67l0.12,0.23l1.67,1.3l0.99,1.03l0.61,1.46l0.14,0.15l1.79,0.95l0.2,0.4l-0.44,0.14l-1.54,-0.06l-1.98,-0.26l-0.93,0.22l-0.19,0.14l-0.3,0.48l-0.57,0.05l-0.91,-0.49l-0.26,-0.01l-2.7,1.21l-1.04,-0.23l-0.21,0.03l-0.34,0.19l-0.12,0.13l-0.64,1.3l-1.67,-0.43l-1.77,-0.24l-1.58,-0.91l-2.06,-0.85l-0.27,0.02l-1.42,0.88l-0.97,1.27l-0.06,0.14l-0.19,1.46l-1.3,-0.11l-1.67,-0.42l-0.27,0.07l-1.55,1.41l-0.99,1.76l-0.14,-1.18l-0.13,-0.22l-1.1,-0.78l-0.86,-1.2l-0.2,-0.84l-0.07,-0.13l-1.07,-1.19l0.16,-0.59l0.0,-0.15l-0.24,-1.01l0.18,-1.77l0.5,-0.38l0.09,-0.11l1.18,-2.4Z",name:"Central African Republic"},CD:{path:"M497.85,276.25l-0.14,2.77l0.2,0.3l0.57,0.19l-0.47,0.52l-1.0,0.71l-0.96,1.31l-0.56,1.22l-0.16,2.04l-0.54,0.89l-0.04,0.15l-0.02,1.76l-0.63,0.61l-0.09,0.2l-0.08,1.33l-0.2,0.11l-0.15,0.21l-0.23,1.37l0.03,0.2l0.6,1.08l0.16,2.96l0.44,2.29l-0.24,1.25l0.01,0.15l0.5,1.46l0.07,0.12l1.41,1.37l1.09,2.56l-0.51,-0.11l-3.45,0.45l-0.67,0.3l-0.15,0.15l-0.71,1.61l0.01,0.26l0.52,1.03l-0.43,2.9l-0.31,2.55l0.13,0.29l0.7,0.46l1.75,0.99l0.31,-0.01l0.26,-0.17l0.15,1.9l-1.44,-0.02l-0.94,-1.28l-0.94,-1.1l-0.17,-0.1l-1.76,-0.33l-0.5,-1.18l-0.42,-0.15l-1.44,0.75l-1.79,-0.32l-0.77,-1.05l-0.2,-0.12l-1.59,-0.23l-0.97,0.04l-0.1,-0.53l-0.27,-0.25l-0.86,-0.06l-1.13,-0.15l-1.62,0.37l-1.04,-0.06l-0.32,0.09l0.11,-2.56l-0.08,-0.21l-0.77,-0.87l-0.17,-1.41l0.36,-1.47l-0.03,-0.21l-0.48,-0.91l-0.04,-1.52l-0.3,-0.29l-2.65,0.02l0.13,-0.53l-0.29,-0.37l-1.28,0.01l-0.28,0.21l-0.07,0.24l-1.35,0.09l-0.26,0.18l-0.62,1.45l-0.25,0.42l-1.17,-0.3l-0.19,0.01l-0.79,0.34l-1.44,0.18l-1.41,-1.96l-0.7,-1.47l-0.61,-1.86l-0.28,-0.21l-7.39,-0.03l-0.92,0.3l-0.78,-0.03l-0.78,0.25l-0.11,-0.25l0.35,-0.15l0.18,-0.26l0.07,-1.02l0.33,-0.52l0.72,-0.42l0.52,0.2l0.33,-0.08l0.76,-0.86l0.99,0.02l0.11,0.48l0.16,0.2l0.94,0.44l0.35,-0.07l1.46,-1.56l1.44,-1.21l0.68,-0.85l0.06,-0.2l-0.08,-1.99l1.04,-2.33l1.1,-1.23l1.62,-1.19l0.11,-0.14l0.29,-0.8l0.08,-0.94l0.38,-0.82l0.03,-0.16l-0.13,-1.38l0.3,-2.16l0.47,-1.51l0.73,-1.31l0.04,-0.12l0.15,-1.51l0.21,-1.66l0.89,-1.16l1.16,-0.7l1.9,0.79l1.69,0.95l1.81,0.24l1.85,0.48l0.35,-0.16l0.71,-1.43l0.16,-0.09l1.03,0.23l0.19,-0.02l2.65,-1.19l0.86,0.46l0.17,0.03l0.81,-0.08l0.23,-0.14l0.31,-0.5l0.75,-0.17l1.83,0.26l1.64,0.06l0.72,-0.21l1.39,1.9l0.16,0.11l1.12,0.3l0.24,-0.04l0.58,-0.36l1.05,0.15l0.15,-0.02l1.15,-0.44l0.47,0.84l0.08,0.09l2.08,1.57Z",name:"Democratic Republic of the Congo"},CZ:{path:"M463.29,152.22l-0.88,-0.47l-0.18,-0.03l-1.08,0.15l-1.86,-0.94l-0.21,-0.02l-0.88,0.24l-0.13,0.07l-1.25,1.17l-1.63,-0.91l-1.38,-1.36l-1.22,-0.75l-0.24,-1.24l-0.33,-0.75l1.53,-0.6l0.98,-0.84l1.74,-0.62l0.11,-0.07l0.47,-0.47l0.46,0.27l0.24,0.03l0.96,-0.3l1.06,0.95l0.15,0.07l1.57,0.24l-0.1,0.6l0.16,0.32l1.36,0.68l0.41,-0.15l0.28,-0.62l1.29,0.28l0.19,0.84l0.26,0.23l1.73,0.18l0.74,1.02l-0.17,0.0l-0.25,0.13l-0.32,0.49l-0.46,0.11l-0.22,0.23l-0.13,0.57l-0.32,0.1l-0.2,0.22l-0.03,0.14l-0.65,0.25l-1.05,-0.05l-0.28,0.17l-0.22,0.43Z",name:"Czech Republic"},CY:{path:"M505.03,193.75l-1.51,0.68l-1.0,-0.3l-0.32,-0.63l0.69,-0.06l0.41,0.13l0.19,-0.0l0.62,-0.22l0.31,0.02l0.06,0.22l0.49,0.17l0.06,-0.01Z",name:"Cyprus"},MT:{path:"M458.2,191.05l-0.51,0.28l-0.5,-0.3l-0.32,-0.23l0.62,-0.22l0.31,0.02l0.06,0.22l0.49,0.17l0.06,-0.01Z",name:"Malta"},CR:{path:"M213.0,263.84l-0.98,-0.4l-0.3,-0.31l0.16,-0.24l0.05,-0.21l-0.09,-0.56l-0.1,-0.18l-0.76,-0.65l-0.99,-0.5l-0.74,-0.28l-0.13,-0.58l-0.12,-0.18l-0.66,-0.45l-0.34,-0.0l-0.13,0.31l0.13,0.59l-0.17,0.21l-0.34,-0.42l-0.14,-0.1l-0.7,-0.22l-0.23,-0.34l0.01,-0.62l0.31,-0.74l-0.14,-0.38l-0.3,-0.15l0.47,-0.4l1.48,0.6l0.26,-0.02l0.47,-0.27l0.58,0.15l0.35,0.44l0.17,0.11l0.74,0.17l0.27,-0.07l0.3,-0.27l0.52,1.09l0.97,1.02l0.77,0.71l-0.41,0.1l-0.23,0.3l0.01,1.02l0.12,0.24l0.2,0.14l-0.07,0.05l-0.11,0.3l0.08,0.37l-0.23,0.63Z",name:"Costa Rica"},CU:{path:"M215.01,226.09l2.08,0.18l1.94,0.03l2.24,0.86l0.95,0.92l0.25,0.08l2.22,-0.28l0.79,0.55l3.68,2.81l0.19,0.06l0.77,-0.03l1.18,0.42l-0.12,0.47l0.27,0.37l1.78,0.1l1.59,0.9l-0.11,0.22l-1.5,0.3l-1.64,0.13l-1.75,-0.2l-2.69,0.19l1.0,-0.86l-0.03,-0.48l-1.02,-0.68l-0.13,-0.05l-1.52,-0.16l-0.74,-0.64l-0.57,-1.42l-0.3,-0.19l-1.36,0.1l-2.23,-0.67l-0.71,-0.52l-0.14,-0.06l-3.2,-0.4l-0.42,-0.25l0.56,-0.39l0.12,-0.33l-0.27,-0.22l-2.46,-0.13l-0.2,0.06l-1.72,1.31l-0.94,0.03l-0.25,0.15l-0.29,0.53l-1.04,0.24l-0.29,-0.07l0.7,-0.43l0.1,-0.11l0.5,-0.87l1.04,-0.54l1.23,-0.49l1.86,-0.25l0.62,-0.28Z",name:"Cuba"},SZ:{path:"M500.95,353.41l-0.41,0.97l-1.16,0.23l-1.29,-1.26l-0.02,-0.71l0.63,-0.93l0.23,-0.7l0.47,-0.12l1.04,0.4l0.32,1.05l0.2,1.08Z",name:"Swaziland"},SY:{path:"M510.84,199.83l0.09,-0.11l0.07,-0.2l-0.04,-1.08l0.56,-1.4l1.3,-1.01l0.1,-0.34l-0.41,-1.11l-0.24,-0.19l-0.89,-0.11l-0.2,-1.84l0.55,-1.05l1.3,-1.22l0.09,-0.19l0.09,-1.09l0.39,0.27l0.25,0.04l2.66,-0.77l1.35,0.52l2.06,-0.01l2.93,-1.08l1.35,0.04l2.14,-0.34l-0.83,1.16l-1.31,0.68l-0.16,0.3l0.23,2.03l-0.9,3.25l-5.43,2.87l-4.79,2.91l-2.32,-0.92Z",name:"Syria"},KG:{path:"M599.04,172.15l0.38,-0.9l1.43,-0.37l4.04,1.02l0.37,-0.23l0.36,-1.64l1.17,-0.52l3.45,1.24l0.2,-0.0l0.86,-0.31l4.09,0.08l3.61,0.31l1.18,1.02l0.11,0.06l1.19,0.34l-0.13,0.26l-3.84,1.58l-0.13,0.1l-0.81,1.08l-3.08,0.34l-0.24,0.16l-0.85,1.7l-2.43,-0.37l-0.14,0.01l-1.79,0.61l-2.39,1.4l-0.12,0.39l0.25,0.49l-0.48,0.45l-4.57,0.43l-3.04,-0.94l-2.45,0.18l0.14,-1.02l2.42,0.44l0.27,-0.08l0.81,-0.81l1.76,0.27l0.21,-0.05l3.21,-2.14l-0.03,-0.51l-2.97,-1.57l-0.26,-0.01l-1.64,0.69l-1.38,-0.84l1.81,-1.67l-0.09,-0.5l-0.46,-0.18Z",name:"Kyrgyzstan"},KE:{path:"M523.3,287.04l0.06,0.17l1.29,1.8l-1.46,0.84l-0.11,0.11l-0.55,0.93l-0.81,0.16l-0.24,0.24l-0.34,1.69l-0.81,1.06l-0.46,1.58l-0.76,0.63l-3.3,-2.3l-0.16,-1.32l-0.15,-0.23l-9.35,-5.28l-0.02,-2.4l1.92,-2.63l0.91,-1.83l0.01,-0.24l-1.09,-2.86l-0.29,-1.24l-1.09,-1.63l2.93,-2.85l0.92,0.3l0.0,1.19l0.09,0.22l0.86,0.83l0.21,0.08l1.65,0.0l3.09,2.08l0.16,0.05l0.79,0.03l0.54,-0.06l0.58,0.28l1.67,0.2l0.28,-0.12l0.69,-0.98l2.04,-0.94l0.86,0.73l0.19,0.07l1.1,0.0l-1.82,2.36l-0.06,0.18l0.03,9.12Z",name:"Kenya"},SS:{path:"M505.7,261.39l0.02,1.64l-0.27,0.55l-1.15,0.05l-0.24,0.15l-0.85,1.44l0.22,0.45l1.44,0.17l1.15,1.12l0.42,0.95l0.14,0.15l1.06,0.54l1.33,2.45l-3.06,2.98l-1.44,1.08l-1.75,0.01l-1.92,0.56l-1.5,-0.53l-0.27,0.03l-0.85,0.57l-1.98,-1.5l-0.56,-1.02l-0.37,-0.13l-1.32,0.5l-1.08,-0.15l-0.2,0.04l-0.56,0.35l-0.9,-0.24l-1.44,-1.97l-0.39,-0.77l-0.13,-0.13l-1.78,-0.94l-0.65,-1.5l-1.08,-1.12l-1.57,-1.22l-0.02,-0.68l-0.12,-0.23l-1.37,-1.02l-1.17,-0.68l0.2,-0.08l0.86,-0.48l0.14,-0.18l0.63,-2.22l0.6,-1.02l1.47,-0.28l0.35,0.56l1.29,1.48l0.14,0.09l0.69,0.22l0.22,-0.02l0.83,-0.4l1.58,0.08l0.26,0.39l0.25,0.13l2.49,0.0l0.3,-0.25l0.06,-0.35l1.13,-0.42l0.18,-0.18l0.22,-0.63l0.68,-0.38l1.95,1.37l0.23,0.05l1.29,-0.26l0.19,-0.12l1.23,-1.8l1.36,-1.37l0.08,-0.25l-0.21,-1.52l-0.06,-0.15l-0.25,-0.3l0.94,-0.08l0.26,-0.21l0.1,-0.32l0.6,0.09l-0.25,1.67l0.3,1.83l0.11,0.19l1.22,0.94l0.25,0.73l-0.04,1.2l0.26,0.31l0.09,0.01Z",name:"South Sudan"},SR:{path:"M278.1,270.26l2.71,0.45l0.31,-0.14l0.19,-0.32l1.82,-0.16l2.25,0.56l-1.09,1.81l-0.04,0.19l0.2,1.72l0.05,0.13l0.9,1.35l-0.39,0.99l-0.21,1.09l-0.48,0.8l-1.2,-0.44l-0.17,-0.01l-1.12,0.24l-0.95,-0.21l-0.35,0.2l-0.25,0.73l0.05,0.29l0.3,0.35l-0.06,0.13l-1.01,-0.15l-1.42,-2.03l-0.32,-1.36l-0.29,-0.23l-0.63,-0.0l-0.95,-1.56l0.41,-1.16l0.01,-0.17l-0.08,-0.35l1.29,-0.56l0.18,-0.22l0.35,-1.97Z",name:"Suriname"},KH:{path:"M680.28,257.89l-0.93,-1.2l-1.24,-2.56l-0.56,-2.9l1.45,-1.92l3.07,-0.46l2.26,0.35l2.03,0.98l0.38,-0.11l1.0,-1.55l1.86,0.79l0.52,1.51l-0.28,2.82l-4.05,1.88l-0.12,0.45l0.79,1.1l-2.2,0.17l-2.08,0.98l-1.89,-0.33Z",name:"Cambodia"},SV:{path:"M197.02,248.89l0.18,-0.05l0.59,0.17l0.55,0.51l0.64,0.35l0.06,0.22l0.37,0.21l1.01,-0.28l0.38,0.13l0.16,0.13l-0.14,0.81l-0.18,0.38l-1.22,-0.03l-0.84,-0.23l-1.11,-0.52l-1.31,-0.15l-0.49,-0.38l0.02,-0.08l0.76,-0.57l0.46,-0.27l0.11,-0.35Z",name:"El Salvador"},SK:{path:"M468.01,150.02l0.05,0.07l0.36,0.1l0.85,-0.37l1.12,1.02l0.33,0.05l1.38,-0.65l1.07,0.3l0.16,0.0l1.69,-0.43l1.95,1.02l-0.51,0.64l-0.45,1.2l-0.32,0.2l-2.55,-0.93l-0.17,-0.01l-0.82,0.2l-0.17,0.11l-0.53,0.68l-0.94,0.32l-0.14,-0.11l-0.29,-0.04l-1.18,0.48l-0.95,0.09l-0.26,0.21l-0.15,0.47l-1.84,0.34l-0.82,-0.31l-1.14,-0.73l-0.2,-0.89l0.42,-0.84l0.91,0.05l0.12,-0.02l0.86,-0.33l0.18,-0.21l0.03,-0.13l0.32,-0.1l0.2,-0.22l0.12,-0.55l0.39,-0.1l0.18,-0.13l0.3,-0.45l0.43,-0.0Z",name:"Slovakia"},KR:{path:"M737.31,185.72l0.84,0.08l0.27,-0.12l0.89,-1.2l1.63,-0.13l1.1,-0.2l0.21,-0.16l0.12,-0.24l1.86,2.95l0.59,1.79l0.02,3.17l-0.84,1.38l-2.23,0.55l-1.95,1.14l-1.91,0.21l-0.22,-1.21l0.45,-2.07l-0.01,-0.17l-0.99,-2.67l1.54,-0.4l0.17,-0.46l-1.55,-2.24Z",name:"South Korea"},SI:{path:"M455.77,159.59l1.79,0.21l0.18,-0.04l1.2,-0.68l2.12,-0.08l0.21,-0.1l0.38,-0.42l0.1,0.01l0.28,0.62l-1.71,0.71l-0.18,0.22l-0.21,1.1l-0.71,0.26l-0.2,0.28l0.01,0.55l-0.59,-0.04l-0.79,-0.47l-0.38,0.06l-0.36,0.41l-0.84,-0.05l0.05,-0.15l-0.56,-1.24l0.21,-1.17Z",name:"Slovenia"},KP:{path:"M747.76,172.02l-0.23,-0.04l-0.26,0.08l-1.09,1.02l-0.78,1.06l-0.06,0.19l0.09,1.95l-1.12,0.57l-0.53,0.58l-0.88,0.82l-1.69,0.51l-1.09,0.79l-0.12,0.22l-0.07,1.17l-0.22,0.25l0.09,0.47l0.96,0.46l1.22,1.1l-0.19,0.37l-0.91,0.16l-1.75,0.14l-0.22,0.12l-0.87,1.18l-0.95,-0.09l-0.3,0.18l-0.97,-0.44l-0.39,0.13l-0.25,0.44l-0.29,0.09l-0.03,-0.2l-0.18,-0.23l-0.62,-0.25l-0.43,-0.29l0.52,-0.97l0.52,-0.3l0.13,-0.38l-0.18,-0.42l0.59,-1.47l0.01,-0.21l-0.16,-0.48l-0.22,-0.2l-1.41,-0.31l-0.82,-0.55l1.74,-1.62l2.73,-1.58l1.62,-1.96l0.96,0.76l0.17,0.06l2.17,0.11l0.31,-0.37l-0.32,-1.31l3.61,-1.21l0.16,-0.13l0.79,-1.34l1.25,1.38Z",name:"North Korea"},SO:{path:"M543.8,256.48l0.61,-0.05l1.14,-0.37l1.31,-0.25l0.12,-0.05l1.11,-0.81l0.57,-0.0l0.03,0.39l-0.23,1.49l0.01,1.25l-0.52,0.92l-0.7,2.71l-1.19,2.79l-1.54,3.2l-2.13,3.66l-2.12,2.79l-2.92,3.39l-2.47,2.0l-3.76,2.5l-2.33,1.9l-2.77,3.06l-0.61,1.35l-0.28,0.29l-1.22,-1.69l-0.03,-8.92l2.12,-2.76l0.59,-0.68l1.47,-0.04l0.18,-0.06l2.15,-1.71l3.16,-0.11l0.21,-0.09l7.08,-7.55l1.76,-2.12l1.14,-1.57l0.06,-0.18l0.01,-4.67Z",name:"Somalia"},SN:{path:"M379.28,250.34l-0.95,-1.82l-0.09,-0.1l-0.83,-0.6l0.62,-0.28l0.13,-0.11l1.21,-1.8l0.6,-1.31l0.71,-0.68l1.09,0.2l0.18,-0.02l1.17,-0.53l1.25,-0.03l1.17,0.73l1.59,0.65l1.47,1.83l1.59,1.7l0.12,1.56l0.49,1.46l0.1,0.14l0.85,0.65l0.18,0.82l-0.08,0.57l-0.13,0.05l-1.29,-0.19l-0.29,0.13l-0.11,0.16l-0.35,0.04l-1.83,-0.61l-5.84,-0.13l-0.12,0.02l-0.6,0.26l-0.87,-0.06l-1.01,0.32l-0.26,-1.26l1.9,0.04l0.16,-0.04l0.54,-0.32l0.37,-0.02l0.15,-0.05l0.78,-0.5l0.92,0.46l0.12,0.03l1.09,0.04l0.15,-0.03l1.08,-0.57l0.11,-0.44l-0.51,-0.74l-0.39,-0.1l-0.76,0.39l-0.62,-0.01l-0.92,-0.58l-0.18,-0.05l-0.79,0.04l-0.2,0.09l-0.48,0.51l-2.41,0.06Z",name:"Senegal"},SL:{path:"M392.19,267.53l-0.44,-0.12l-1.73,-0.97l-1.24,-1.28l-0.4,-0.84l-0.27,-1.65l1.21,-1.0l0.09,-0.12l0.27,-0.66l0.32,-0.41l0.56,-0.05l0.16,-0.07l0.5,-0.41l1.75,0.0l0.59,0.77l0.49,0.96l-0.07,0.64l0.04,0.19l0.36,0.58l-0.03,0.84l0.24,0.2l-0.64,0.65l-1.13,1.37l-0.06,0.14l-0.12,0.66l-0.43,0.58Z",name:"Sierra Leone"},SB:{path:"M826.74,311.51l0.23,0.29l-0.95,-0.01l-0.39,-0.63l0.65,0.27l0.45,0.09ZM825.01,308.52l-1.18,-1.39l-0.37,-1.06l0.24,0.0l0.82,1.84l0.49,0.6ZM823.21,309.42l-0.44,0.03l-1.43,-0.24l-0.32,-0.24l0.08,-0.5l1.29,0.31l0.72,0.47l0.11,0.18ZM817.9,303.81l2.59,1.44l0.3,0.41l-1.21,-0.66l-1.34,-0.89l-0.34,-0.3ZM813.77,302.4l0.48,0.34l0.1,0.08l-0.33,-0.17l-0.25,-0.25Z",name:"Solomon Islands"},SA:{path:"M528.24,243.1l-0.2,-0.69l-0.07,-0.12l-0.69,-0.71l-0.18,-0.94l-0.12,-0.19l-1.24,-0.89l-1.28,-2.09l-0.7,-2.08l-0.07,-0.11l-1.73,-1.79l-0.11,-0.07l-1.03,-0.39l-1.57,-2.36l-0.27,-1.72l0.1,-1.53l-0.03,-0.15l-1.44,-2.93l-1.25,-1.13l-1.34,-0.56l-0.72,-1.33l0.11,-0.49l-0.02,-0.2l-0.7,-1.38l-0.08,-0.1l-0.68,-0.56l-0.97,-1.98l-2.8,-4.03l-0.25,-0.13l-0.85,0.01l0.29,-1.11l0.12,-0.97l0.23,-0.81l2.52,0.39l0.23,-0.06l1.08,-0.84l0.6,-0.95l1.78,-0.35l0.22,-0.17l0.37,-0.83l0.74,-0.42l0.08,-0.46l-2.17,-2.4l4.55,-1.26l0.12,-0.06l0.36,-0.32l2.83,0.71l3.67,1.91l7.04,5.5l0.17,0.06l4.64,0.22l2.06,0.24l0.55,1.15l0.28,0.17l1.56,-0.06l0.9,2.15l0.14,0.15l1.14,0.57l0.39,0.85l0.11,0.13l1.59,1.06l0.12,0.91l-0.23,0.83l0.01,0.18l0.32,0.9l0.07,0.11l0.68,0.7l0.33,0.86l0.37,0.65l0.09,0.1l0.76,0.53l0.25,0.04l0.45,-0.12l0.35,0.75l0.1,0.63l0.96,2.68l0.23,0.19l7.53,1.33l0.27,-0.09l0.24,-0.26l0.87,1.41l-1.58,4.96l-7.34,2.54l-7.28,1.02l-2.34,1.17l-0.12,0.1l-1.74,2.63l-0.86,0.32l-0.49,-0.68l-0.28,-0.12l-0.92,0.12l-2.32,-0.25l-0.41,-0.23l-0.15,-0.04l-2.89,0.06l-0.63,0.2l-0.91,-0.59l-0.43,0.11l-0.66,1.27l-0.03,0.21l0.21,0.89l-0.6,0.45Z",name:"Saudi Arabia"},SE:{path:"M476.42,90.44l-0.15,0.1l-2.43,2.86l-0.07,0.24l0.36,2.31l-3.84,3.1l-4.83,3.38l-0.11,0.15l-1.82,5.45l0.03,0.26l1.78,2.68l2.27,1.99l-2.13,3.88l-2.49,0.82l-0.2,0.24l-0.95,6.05l-1.32,3.09l-2.82,-0.32l-0.3,0.16l-1.34,2.64l-2.48,0.14l-0.76,-3.15l-2.09,-4.04l-1.85,-5.01l1.03,-1.98l2.06,-2.53l0.06,-0.13l0.83,-4.45l-0.06,-0.25l-1.54,-1.86l-0.15,-5.0l1.52,-3.48l2.28,0.06l0.27,-0.16l0.87,-1.59l-0.01,-0.31l-0.8,-1.21l3.79,-5.63l4.07,-7.54l2.23,0.01l0.29,-0.22l0.59,-2.15l4.46,0.66l0.34,-0.26l0.34,-2.64l1.21,-0.14l3.24,2.08l3.78,2.85l0.06,6.37l0.03,0.14l0.67,1.29l-3.95,1.07Z",name:"Sweden"},SD:{path:"M505.98,259.75l-0.31,-0.9l-0.1,-0.14l-1.2,-0.93l-0.27,-1.66l0.29,-1.83l-0.25,-0.34l-1.16,-0.17l-0.33,0.21l-0.11,0.37l-1.3,0.11l-0.21,0.49l0.55,0.68l0.18,1.29l-1.31,1.33l-1.18,1.72l-1.04,0.21l-2.0,-1.4l-0.32,-0.02l-0.95,0.52l-0.14,0.16l-0.21,0.6l-1.16,0.43l-0.19,0.23l-0.04,0.27l-2.08,0.0l-0.25,-0.39l-0.24,-0.13l-1.81,-0.09l-0.14,0.03l-0.8,0.38l-0.49,-0.16l-1.22,-1.39l-0.42,-0.67l-0.31,-0.14l-1.81,0.35l-0.2,0.14l-0.72,1.24l-0.61,2.14l-0.73,0.4l-0.62,0.22l-0.83,-0.68l-0.12,-0.6l0.38,-0.97l0.01,-1.14l-0.08,-0.2l-1.39,-1.53l-0.25,-0.97l0.03,-0.57l-0.11,-0.25l-0.81,-0.66l-0.03,-1.34l-0.04,-0.14l-0.52,-0.98l-0.31,-0.15l-0.42,0.07l0.12,-0.44l0.63,-1.03l0.03,-0.23l-0.24,-0.88l0.69,-0.66l0.02,-0.41l-0.4,-0.46l0.58,-1.39l1.04,-1.71l1.97,0.16l0.32,-0.3l-0.12,-10.24l0.02,-0.8l2.59,-0.01l0.3,-0.3l0.0,-4.92l29.19,0.0l0.68,2.17l-0.4,0.35l-0.1,0.27l0.36,2.69l0.93,3.15l0.12,0.16l2.05,1.4l-0.99,1.15l-1.75,0.4l-0.15,0.08l-0.79,0.79l-0.08,0.17l-0.24,1.69l-1.07,3.75l-0.0,0.16l0.25,0.96l-0.38,2.1l-0.98,2.41l-1.52,1.3l-1.07,1.94l-0.25,0.99l-1.08,0.64l-0.13,0.18l-0.46,1.65Z",name:"Sudan"},DO:{path:"M241.7,234.97l0.15,-0.22l1.73,0.01l1.43,0.64l0.15,0.03l0.45,-0.04l0.36,0.74l0.28,0.17l1.02,-0.04l-0.04,0.43l0.27,0.33l1.03,0.09l0.91,0.7l-0.57,0.64l-0.99,-0.47l-0.16,-0.03l-1.11,0.11l-0.79,-0.12l-0.26,0.09l-0.38,0.4l-0.66,0.11l-0.28,-0.45l-0.38,-0.12l-0.83,0.37l-0.14,0.13l-0.85,1.49l-0.27,-0.17l-0.1,-0.58l0.05,-0.67l-0.07,-0.21l-0.44,-0.53l0.35,-0.25l0.12,-0.19l0.19,-1.0l-0.2,-1.4Z",name:"Dominican Republic"},DJ:{path:"M528.78,253.36l0.34,0.45l-0.06,0.76l-1.26,0.54l-0.05,0.53l0.82,0.53l-0.57,0.83l-0.3,-0.25l-0.27,-0.05l-0.56,0.17l-1.07,-0.03l-0.04,-0.56l-0.16,-0.56l0.76,-1.07l0.76,-0.97l0.89,0.18l0.25,-0.06l0.51,-0.42Z",name:"Djibouti"},DK:{path:"M452.4,129.07l-1.27,2.39l-2.25,-1.69l-0.26,-1.08l3.15,-1.0l0.63,1.39ZM447.87,126.25l-0.35,0.76l-0.47,-0.24l-0.38,0.09l-1.8,2.53l-0.03,0.29l0.56,1.4l-1.22,0.4l-1.68,-0.41l-0.92,-1.76l-0.07,-3.47l0.38,-0.88l0.62,-0.93l2.07,-0.21l0.19,-0.1l0.84,-0.95l1.5,-0.76l-0.06,1.26l-0.7,1.1l-0.03,0.25l0.3,1.0l0.18,0.19l1.06,0.42Z",name:"Denmark"},DE:{path:"M445.51,131.69l0.03,0.94l0.21,0.28l2.32,0.74l-0.02,1.0l0.37,0.3l2.55,-0.65l1.36,-0.89l2.63,1.27l1.09,1.01l0.51,1.51l-0.6,0.78l-0.0,0.36l0.88,1.17l0.58,1.68l-0.18,1.08l0.03,0.18l0.87,1.81l-0.66,0.2l-0.55,-0.32l-0.36,0.05l-0.58,0.58l-1.73,0.62l-0.99,0.84l-1.77,0.7l-0.16,0.4l0.42,0.94l0.26,1.34l0.14,0.2l1.25,0.76l1.22,1.2l-0.71,1.2l-0.81,0.37l-0.17,0.32l0.34,1.99l-0.04,0.09l-0.47,-0.39l-0.17,-0.07l-1.2,-0.1l-1.85,0.57l-2.15,-0.13l-0.29,0.18l-0.21,0.5l-0.96,-0.67l-0.24,-0.05l-0.67,0.16l-2.6,-0.94l-0.34,0.1l-0.42,0.57l-1.64,-0.02l0.26,-1.88l1.24,-2.15l-0.21,-0.45l-3.54,-0.58l-0.98,-0.71l0.12,-1.26l-0.05,-0.2l-0.44,-0.64l0.27,-2.18l-0.38,-3.14l1.17,-0.0l0.27,-0.17l0.63,-1.26l0.65,-3.17l-0.02,-0.17l-0.41,-1.0l0.32,-0.47l1.77,-0.16l0.37,0.6l0.47,0.06l1.7,-1.69l0.06,-0.33l-0.55,-1.24l-0.09,-1.51l1.5,0.36l0.16,-0.01l1.22,-0.4Z",name:"Germany"},YE:{path:"M553.53,242.65l-1.51,0.58l-0.17,0.16l-0.48,1.14l-0.07,0.79l-2.31,1.0l-3.98,1.19l-2.28,1.8l-0.97,0.12l-0.7,-0.14l-0.23,0.05l-1.42,1.03l-1.51,0.47l-2.07,0.13l-0.68,0.15l-0.17,0.1l-0.49,0.6l-0.57,0.16l-0.18,0.13l-0.3,0.49l-1.06,-0.05l-0.13,0.02l-0.73,0.32l-1.48,-0.11l-0.55,-1.26l0.07,-1.32l-0.04,-0.16l-0.39,-0.72l-0.48,-1.85l-0.52,-0.79l0.08,-0.02l0.22,-0.36l-0.23,-1.05l0.24,-0.39l0.04,-0.19l-0.09,-0.95l0.96,-0.72l0.11,-0.31l-0.23,-0.98l0.46,-0.88l0.75,0.49l0.26,0.03l0.63,-0.22l2.76,-0.06l0.5,0.25l2.42,0.26l0.85,-0.11l0.52,0.71l0.35,0.1l1.17,-0.43l0.15,-0.12l1.75,-2.64l2.22,-1.11l6.95,-0.96l2.55,5.58Z",name:"Yemen"},AT:{path:"M463.17,154.15l-0.14,0.99l-1.15,0.01l-0.24,0.47l0.39,0.56l-0.75,1.84l-0.36,0.4l-2.06,0.07l-0.14,0.04l-1.18,0.67l-1.96,-0.23l-3.43,-0.78l-0.5,-0.97l-0.33,-0.16l-2.47,0.55l-0.2,0.16l-0.18,0.37l-1.27,-0.38l-1.28,-0.09l-0.81,-0.41l0.25,-0.51l0.03,-0.18l-0.05,-0.28l0.35,-0.08l1.16,0.81l0.45,-0.13l0.27,-0.64l2.0,0.12l1.84,-0.57l1.05,0.09l0.71,0.59l0.47,-0.11l0.23,-0.54l0.02,-0.17l-0.32,-1.85l0.69,-0.31l0.13,-0.12l0.73,-1.23l1.61,0.89l0.35,-0.04l1.35,-1.27l0.7,-0.19l1.84,0.93l0.18,0.03l1.08,-0.15l0.81,0.43l-0.07,0.15l-0.02,0.2l0.24,1.06Z",name:"Austria"},DZ:{path:"M450.58,224.94l-8.31,4.86l-7.23,5.12l-3.46,1.13l-2.42,0.22l-0.02,-1.33l-0.2,-0.28l-1.15,-0.42l-1.45,-0.69l-0.55,-1.13l-0.1,-0.12l-8.45,-5.72l-17.72,-12.17l0.03,-0.38l-0.02,-3.21l3.84,-1.91l2.46,-0.41l2.1,-0.75l0.14,-0.11l0.9,-1.3l2.84,-1.06l0.19,-0.27l0.09,-1.81l1.21,-0.2l0.15,-0.07l1.06,-0.96l3.19,-0.46l0.23,-0.18l0.46,-1.08l-0.08,-0.34l-0.6,-0.54l-0.83,-2.85l-0.18,-1.8l-0.82,-1.57l2.13,-1.37l2.65,-0.49l0.13,-0.05l1.55,-1.15l2.34,-0.85l4.2,-0.51l4.07,-0.23l1.21,0.41l0.23,-0.01l2.3,-1.11l2.52,-0.02l0.94,0.62l0.2,0.05l1.25,-0.13l-0.36,1.03l-0.01,0.14l0.39,2.66l-0.56,2.2l-1.49,1.52l-0.08,0.24l0.22,2.12l0.11,0.2l1.94,1.58l0.02,0.54l0.12,0.23l1.45,1.06l1.04,4.85l0.81,2.42l0.13,1.19l-0.43,2.17l0.17,1.28l-0.31,1.53l0.2,1.56l-0.9,1.02l-0.01,0.38l1.43,1.88l0.09,1.06l0.04,0.13l0.89,1.48l0.37,0.12l1.03,-0.43l1.79,1.12l0.89,1.34Z",name:"Algeria"},US:{path:"M892.64,99.05l1.16,0.57l0.21,0.02l1.45,-0.38l1.92,0.99l2.17,0.47l-1.65,0.72l-1.75,-0.79l-0.93,-0.7l-0.21,-0.06l-2.11,0.22l-0.35,-0.2l0.09,-0.87ZM183.29,150.37l0.39,1.54l0.12,0.17l0.78,0.55l0.14,0.05l1.74,0.2l2.52,0.5l2.4,0.98l0.17,0.02l1.96,-0.4l3.01,0.81l0.91,-0.02l2.22,-0.88l4.67,2.33l3.86,2.01l0.21,0.71l0.15,0.18l0.33,0.17l-0.02,0.05l0.23,0.43l0.67,0.1l0.21,-0.05l0.1,-0.07l0.05,0.29l0.09,0.16l0.5,0.5l0.21,0.09l0.56,0.0l0.13,0.13l-0.2,0.36l0.12,0.41l2.49,1.39l0.99,5.24l-0.69,1.68l-1.16,1.64l-0.6,1.18l-0.06,0.31l0.04,0.22l0.28,0.43l0.11,0.1l0.85,0.47l0.15,0.04l0.63,0.0l0.14,-0.04l2.87,-1.58l2.6,-0.49l3.28,-1.5l0.17,-0.23l0.04,-0.43l-0.23,-0.93l-0.24,-0.39l0.74,-0.32l4.7,-0.01l0.25,-0.13l0.77,-1.15l2.9,-2.41l1.04,-0.52l8.35,-0.02l0.28,-0.21l0.2,-0.6l0.7,-0.14l1.06,-0.48l0.13,-0.11l0.92,-1.49l0.75,-2.39l1.67,-2.08l0.59,0.6l0.3,0.07l1.52,-0.49l0.88,0.72l-0.0,4.14l0.08,0.2l1.6,1.72l0.31,0.72l-2.42,1.35l-2.55,1.05l-2.64,0.9l-0.14,0.11l-1.33,1.81l-0.44,0.7l-0.05,0.15l-0.03,1.6l0.03,0.14l0.83,1.59l0.24,0.16l0.78,0.06l-1.15,0.33l-1.25,-0.04l-1.83,0.52l-2.51,0.29l-2.17,0.88l-0.17,0.36l0.33,0.22l3.55,-0.54l0.15,0.11l-2.87,0.73l-1.19,0.0l-0.16,-0.33l-0.36,0.06l-0.76,0.82l0.17,0.5l0.42,0.08l-0.45,1.75l-1.4,1.74l-0.04,-0.17l-0.21,-0.22l-0.48,-0.13l-0.77,-0.69l-0.36,-0.03l-0.12,0.34l0.52,1.58l0.09,0.14l0.52,0.43l0.03,0.87l-0.74,1.05l-0.39,0.63l0.05,-0.12l-0.08,-0.34l-1.19,-1.03l-0.28,-2.31l-0.26,-0.26l-0.32,0.19l-0.48,1.27l-0.01,0.19l0.39,1.33l-1.14,-0.31l-0.36,0.18l0.14,0.38l1.57,0.85l0.1,2.58l0.22,0.28l0.55,0.15l0.21,0.81l0.33,2.72l-1.46,1.94l-2.5,0.81l-0.12,0.07l-1.58,1.58l-1.15,0.17l-0.15,0.06l-1.27,1.03l-0.09,0.13l-0.32,0.85l-2.71,1.79l-1.45,1.37l-1.18,1.64l-0.05,0.12l-0.39,1.96l0.0,0.13l0.44,1.91l0.85,2.37l1.1,1.91l0.03,1.2l1.16,3.07l-0.08,1.74l-0.1,0.99l-0.57,1.48l-0.54,0.24l-0.97,-0.26l-0.34,-1.02l-0.12,-0.16l-0.89,-0.58l-2.44,-4.28l-0.34,-0.94l0.49,-1.71l-0.02,-0.21l-0.7,-1.5l-2.0,-2.35l-0.11,-0.08l-0.98,-0.42l-0.25,0.01l-2.42,1.19l-0.26,-0.08l-1.26,-1.29l-1.57,-0.68l-0.16,-0.02l-2.79,0.34l-2.18,-0.3l-1.98,0.19l-1.12,0.45l-0.14,0.44l0.4,0.65l-0.04,1.02l0.09,0.22l0.29,0.3l-0.06,0.05l-0.77,-0.33l-0.26,0.01l-0.87,0.48l-1.64,-0.08l-1.79,-1.39l-0.23,-0.06l-2.11,0.33l-1.75,-0.61l-0.14,-0.01l-1.61,0.2l-2.11,0.64l-0.11,0.06l-2.25,1.99l-2.53,1.21l-1.43,1.38l-0.58,1.22l-0.03,0.12l-0.03,1.86l0.13,1.32l0.3,0.62l-0.46,0.04l-1.71,-0.57l-1.85,-0.79l-0.63,-1.14l-0.54,-1.85l-0.07,-0.12l-1.45,-1.51l-0.86,-1.58l-1.26,-1.87l-0.09,-0.09l-1.76,-1.09l-0.17,-0.04l-2.05,0.05l-0.23,0.12l-1.44,1.97l-1.84,-0.72l-1.19,-0.76l-0.6,-1.45l-0.9,-1.52l-1.49,-1.21l-1.27,-0.87l-0.89,-0.96l-0.22,-0.1l-4.34,-0.0l-0.3,0.3l-0.0,0.84l-6.62,0.02l-5.66,-1.93l-3.48,-1.24l0.11,-0.25l-0.3,-0.42l-3.18,0.3l-2.6,0.2l-0.35,-1.19l-0.08,-0.13l-1.62,-1.61l-0.13,-0.08l-1.02,-0.29l-0.22,-0.66l-0.25,-0.2l-1.31,-0.13l-0.82,-0.7l-0.16,-0.07l-2.25,-0.27l-0.48,-0.34l-0.28,-1.44l-0.07,-0.14l-2.41,-2.84l-2.03,-3.89l0.08,-0.58l-0.1,-0.27l-1.08,-0.94l-1.87,-2.36l-0.33,-2.31l-0.07,-0.15l-1.24,-1.5l0.52,-2.4l-0.09,-2.57l-0.78,-2.3l0.96,-2.83l0.61,-5.66l-0.46,-4.26l-0.79,-2.71l-0.68,-1.4l0.13,-0.26l3.24,0.97l1.28,2.88l0.52,0.06l0.62,-0.84l0.06,-0.22l-0.4,-2.61l-0.74,-2.29l68.9,-0.0l0.3,-0.3l0.01,-0.95l0.32,-0.01ZM32.5,67.43l1.75,1.99l0.41,0.04l1.02,-0.81l3.79,0.25l-0.1,0.72l0.24,0.34l3.83,0.77l2.6,-0.44l5.21,1.41l4.84,0.43l1.9,0.57l0.15,0.01l3.25,-0.71l3.72,1.32l2.52,0.58l-0.03,38.14l0.29,0.3l2.41,0.11l2.34,1.0l1.7,1.59l2.22,2.42l0.42,0.03l2.41,-2.04l2.25,-1.08l1.23,1.76l1.71,1.53l2.24,1.62l1.54,2.56l2.56,4.09l0.11,0.11l4.1,2.17l0.06,1.93l-1.12,1.35l-1.22,-1.14l-2.08,-1.05l-0.68,-2.94l-0.09,-0.16l-3.18,-2.84l-1.32,-3.35l-0.25,-0.19l-2.43,-0.24l-3.93,-0.09l-2.85,-1.02l-5.24,-3.85l-6.77,-2.04l-3.52,0.3l-4.84,-1.7l-2.96,-1.6l-0.23,-0.02l-2.78,0.8l-0.21,0.35l0.46,2.31l-1.11,0.19l-2.9,0.78l-2.24,1.26l-2.42,0.68l-0.29,-1.79l1.07,-3.49l2.54,-1.11l0.12,-0.45l-0.69,-0.96l-0.41,-0.07l-3.19,2.12l-1.76,2.54l-3.57,2.62l-0.03,0.46l1.63,1.59l-2.14,2.38l-2.64,1.49l-2.49,1.09l-0.16,0.17l-0.58,1.48l-3.8,1.79l-0.14,0.14l-0.75,1.57l-2.75,1.41l-1.62,-0.25l-0.16,0.02l-2.35,0.98l-2.54,1.19l-2.06,1.15l-4.05,0.93l-0.1,-0.15l2.45,-1.45l2.49,-1.1l2.61,-1.88l3.03,-0.39l0.19,-0.1l1.2,-1.41l3.43,-2.11l0.61,-0.75l1.81,-1.24l0.13,-0.2l0.42,-2.7l1.24,-2.12l-0.03,-0.35l-0.34,-0.09l-2.73,1.05l-0.67,-0.53l-0.39,0.02l-1.13,1.11l-1.43,-1.62l-0.49,0.06l-0.41,0.8l-0.67,-1.31l-0.42,-0.12l-2.43,1.43l-1.18,-0.0l-0.18,-1.86l0.43,-1.3l-0.09,-0.33l-1.61,-1.33l-0.26,-0.06l-3.11,0.68l-2.0,-1.66l-1.61,-0.85l-0.01,-1.97l-0.11,-0.23l-1.76,-1.48l0.86,-1.96l2.01,-2.13l0.88,-1.94l1.79,-0.25l1.65,0.6l0.31,-0.06l1.91,-1.8l1.67,0.31l0.22,-0.04l1.91,-1.23l0.13,-0.33l-0.47,-1.82l-0.15,-0.19l-1.0,-0.52l1.51,-1.27l0.09,-0.34l-0.29,-0.19l-1.62,0.06l-2.66,0.88l-0.13,0.09l-0.62,0.72l-1.77,-0.8l-0.16,-0.02l-3.48,0.44l-3.5,-0.92l-1.06,-1.61l-2.78,-2.09l3.07,-1.51l5.52,-2.01l1.65,0.0l-0.28,1.73l0.31,0.35l5.29,-0.16l0.23,-0.49l-2.03,-2.59l-0.1,-0.08l-3.03,-1.58l-1.79,-2.12l-2.4,-1.83l-3.18,-1.27l1.13,-1.84l4.28,-0.14l0.15,-0.05l3.16,-2.0l0.13,-0.17l0.57,-2.07l2.43,-2.02l2.42,-0.52l4.67,-1.98l2.22,0.29l0.2,-0.04l3.74,-2.37l3.57,0.91ZM37.66,123.49l-2.31,1.26l-1.04,-0.75l-0.31,-1.35l2.06,-1.16l1.24,-0.51l1.48,0.22l0.76,0.81l-1.89,1.49ZM30.89,233.84l1.2,0.57l0.35,0.3l0.48,0.69l-1.6,0.86l-0.3,0.31l-0.24,-0.14l0.05,-0.54l-0.02,-0.15l-0.36,-0.83l0.05,-0.12l0.39,-0.38l0.07,-0.31l-0.09,-0.27ZM29.06,231.89l0.5,0.14l0.31,0.19l-0.46,0.1l-0.34,-0.43ZM25.02,230.13l0.2,-0.11l0.4,0.47l-0.43,-0.05l-0.17,-0.31ZM21.29,228.68l0.1,-0.07l0.22,0.02l0.02,0.21l-0.02,0.02l-0.32,-0.18ZM6.0,113.33l-1.19,0.45l-1.5,-0.64l-0.94,-0.63l1.76,-0.46l1.71,0.29l0.16,0.98Z",name:"United States of America"},LV:{path:"M473.99,127.16l0.07,-2.15l1.15,-2.11l2.05,-1.07l1.84,2.48l0.25,0.12l2.01,-0.07l0.29,-0.25l0.45,-2.58l1.85,-0.56l0.98,0.4l2.13,1.33l0.16,0.05l1.97,0.01l1.02,0.7l0.21,1.67l0.71,1.84l-2.44,1.23l-1.36,0.53l-2.28,-1.62l-0.12,-0.05l-1.18,-0.2l-0.28,-0.6l-0.31,-0.17l-2.43,0.35l-4.17,-0.23l-0.12,0.02l-2.45,0.93Z",name:"Latvia"},UY:{path:"M276.9,363.17l1.3,-0.23l2.4,2.04l0.22,0.07l0.82,-0.07l2.48,1.7l1.93,1.5l1.28,1.67l-0.95,1.14l-0.04,0.31l0.63,1.45l-0.96,1.57l-2.65,1.47l-1.73,-0.53l-0.15,-0.01l-1.25,0.28l-2.22,-1.16l-0.16,-0.03l-1.56,0.08l-1.33,-1.36l0.17,-1.58l0.48,-0.55l0.07,-0.2l-0.02,-2.74l0.66,-2.8l0.57,-2.02Z",name:"Uruguay"},LB:{path:"M510.44,198.11l-0.48,0.03l-0.26,0.17l-0.15,0.32l-0.21,-0.0l0.72,-1.85l1.19,-1.9l0.74,0.09l0.27,0.73l-1.19,0.93l-0.09,0.13l-0.54,1.36Z",name:"Lebanon"},LA:{path:"M684.87,248.8l0.61,-0.86l0.05,-0.16l0.11,-2.17l-0.08,-0.22l-1.96,-2.16l-0.15,-2.44l-0.08,-0.18l-1.9,-2.1l-0.19,-0.1l-1.89,-0.18l-0.29,0.15l-0.42,0.76l-1.21,0.06l-0.67,-0.41l-0.31,-0.0l-2.2,1.29l-0.05,-1.77l0.61,-2.7l-0.27,-0.37l-1.44,-0.1l-0.12,-1.31l-0.12,-0.21l-0.87,-0.65l0.38,-0.68l1.76,-1.41l0.08,0.22l0.27,0.2l1.33,0.07l0.31,-0.34l-0.35,-2.75l0.85,-0.25l1.32,1.88l1.11,2.36l0.27,0.17l2.89,0.02l0.78,1.82l-1.32,0.56l-0.12,0.09l-0.72,0.93l0.1,0.45l2.93,1.52l3.62,5.27l1.88,1.78l0.58,1.67l-0.38,2.11l-1.87,-0.79l-0.37,0.11l-0.99,1.54l-1.51,-0.73Z",name:"Laos"},TW:{path:"M725.6,222.5l-1.5,4.22l-0.82,1.65l-1.01,-1.7l-0.26,-1.8l1.4,-2.48l1.8,-1.81l0.76,0.53l-0.38,1.39Z",name:"Taiwan"},HK:{path:"M707.6,228.5l-0.5,0.22l-0.02,-0.2l-0.26,-0.3l0.4,-0.3l0.36,0.53l-0.38,0.39Z",name:"Hong Kong"},TT:{path:"M266.35,259.46l0.41,-0.39l0.09,-0.23l-0.04,-0.75l1.14,-0.26l0.2,0.03l-0.07,1.37l-1.73,0.23Z",name:"Trinidad and Tobago"},BB:{path:"M270.7,252.5l0.2,-0.2l0.02,-0.1l-0.02,-0.3l0.64,-0.26l0.2,0.03l-0.07,0.37l-0.13,0.23Z",name:"Barbados"},TR:{path:"M513.25,175.38l3.63,1.17l0.14,0.01l2.88,-0.45l2.11,0.26l0.18,-0.03l2.9,-1.53l2.51,-0.13l2.25,1.37l0.36,0.88l-0.23,1.36l0.19,0.33l1.81,0.72l0.61,0.53l-1.31,0.64l-0.16,0.34l0.76,3.24l-0.44,0.8l0.01,0.3l1.19,2.02l-0.71,0.29l-0.74,-0.62l-0.15,-0.07l-2.91,-0.37l-0.15,0.02l-1.04,0.43l-2.78,0.44l-1.44,-0.03l-2.83,1.06l-1.95,0.01l-1.28,-0.52l-0.2,-0.01l-2.62,0.76l-0.7,-0.48l-0.47,0.22l-0.13,1.49l-1.01,0.94l-0.58,-0.82l0.79,-0.9l0.04,-0.34l-0.31,-0.15l-1.46,0.23l-2.03,-0.64l-0.3,0.07l-1.65,1.58l-3.58,0.3l-1.94,-1.47l-0.17,-0.06l-2.7,-0.1l-0.28,0.17l-0.51,1.06l-1.47,0.29l-2.32,-1.46l-0.17,-0.05l-2.55,0.05l-1.4,-2.7l-1.72,-1.54l1.11,-2.06l-0.07,-0.37l-1.35,-1.19l2.47,-2.51l3.74,-0.11l0.26,-0.17l0.96,-2.07l4.56,0.38l0.19,-0.05l2.97,-1.92l2.84,-0.83l4.03,-0.06l4.31,2.08ZM488.85,176.8l-1.81,1.38l-0.57,-1.01l0.02,-0.36l0.45,-0.25l0.13,-0.15l0.78,-1.87l-0.11,-0.37l-0.72,-0.47l1.91,-0.71l1.89,0.35l0.25,0.97l0.17,0.2l1.87,0.83l-0.19,0.31l-2.82,0.16l-0.18,0.07l-1.06,0.91Z",name:"Turkey"},LK:{path:"M625.44,266.07l-0.35,2.4l-0.9,0.61l-1.91,0.5l-1.04,-1.75l-0.43,-3.5l1.0,-3.6l1.34,1.09l1.13,1.72l1.16,2.52Z",name:"Sri Lanka"},TN:{path:"M444.91,206.18l-0.99,-4.57l-0.12,-0.18l-1.43,-1.04l-0.02,-0.53l-0.11,-0.22l-1.95,-1.59l-0.19,-1.85l1.44,-1.47l0.08,-0.14l0.59,-2.34l-0.38,-2.77l0.44,-1.28l2.52,-1.08l1.41,0.28l-0.06,1.2l0.43,0.28l1.81,-0.9l0.02,0.06l-1.14,1.28l-0.08,0.2l-0.02,1.32l0.11,0.24l0.74,0.6l-0.29,2.18l-1.56,1.35l-0.09,0.32l0.48,1.54l0.28,0.21l1.11,0.04l0.55,1.17l0.15,0.14l0.76,0.35l-0.12,1.79l-1.1,0.72l-0.8,0.91l-1.68,1.04l-0.13,0.32l0.25,1.08l-0.18,0.96l-0.74,0.39Z",name:"Tunisia"},TL:{path:"M734.21,307.22l0.17,-0.34l1.99,-0.52l1.72,-0.08l0.78,-0.3l0.29,0.1l-0.43,0.32l-2.57,1.09l-1.71,0.59l-0.05,-0.49l-0.19,-0.36Z",name:"East Timor"},TM:{path:"M553.16,173.51l-0.12,1.0l-0.26,-0.65l0.38,-0.34ZM553.54,173.16l0.13,-0.12l0.43,-0.09l-0.56,0.21ZM555.68,172.6l0.65,-0.14l1.53,0.76l1.71,2.29l0.27,0.12l1.27,-0.14l2.81,-0.04l0.29,-0.38l-0.35,-1.27l1.98,-0.97l1.96,-1.63l3.05,1.44l0.25,2.23l0.14,0.22l0.96,0.61l0.18,0.05l2.61,-0.13l0.68,0.44l1.2,2.97l0.1,0.13l2.85,2.03l1.67,1.41l2.66,1.45l3.13,1.17l-0.05,1.23l-0.36,-0.04l-1.12,-0.73l-0.44,0.14l-0.34,0.89l-1.96,0.52l-0.22,0.23l-0.47,2.17l-1.26,0.78l-1.93,0.42l-0.21,0.18l-0.46,1.14l-1.64,0.33l-2.3,-0.97l-0.2,-2.23l-0.28,-0.27l-1.76,-0.1l-2.78,-2.48l-0.15,-0.07l-1.95,-0.31l-2.82,-1.48l-1.78,-0.27l-0.18,0.03l-1.03,0.51l-1.6,-0.08l-0.22,0.08l-1.72,1.6l-1.83,0.46l-0.39,-1.7l0.36,-3.0l-0.16,-0.3l-1.73,-0.88l0.57,-1.77l-0.25,-0.39l-1.33,-0.14l0.41,-1.85l2.05,0.63l0.21,-0.01l2.2,-0.95l0.09,-0.49l-1.78,-1.75l-0.69,-1.66l-0.07,-0.03Z",name:"Turkmenistan"},TJ:{path:"M597.99,178.71l-0.23,0.23l-2.57,-0.47l-0.35,0.25l-0.24,1.7l0.32,0.34l2.66,-0.22l3.15,0.95l4.47,-0.42l0.58,2.45l0.39,0.21l0.71,-0.25l1.22,0.53l-0.06,1.01l0.29,1.28l-2.19,-0.0l-1.71,-0.21l-0.23,0.07l-1.51,1.25l-1.05,0.27l-0.77,0.51l-0.71,-0.67l0.22,-2.28l-0.24,-0.32l-0.43,-0.08l0.17,-0.57l-0.16,-0.36l-1.36,-0.66l-0.34,0.05l-1.08,1.01l-0.09,0.15l-0.25,1.09l-0.24,0.26l-1.36,-0.05l-0.27,0.14l-0.65,1.06l-0.58,-0.39l-0.3,-0.02l-1.68,0.86l-0.36,-0.16l1.28,-2.65l0.02,-0.2l-0.54,-2.17l-0.18,-0.21l-1.53,-0.58l0.41,-0.82l1.89,0.13l0.26,-0.12l1.19,-1.63l0.77,-1.82l2.66,-0.55l-0.33,0.87l0.01,0.23l0.36,0.82l0.3,0.18l0.23,-0.02Z",name:"Tajikistan"},LS:{path:"M493.32,359.69l0.69,0.65l-0.65,1.12l-0.38,0.8l-1.27,0.39l-0.18,0.15l-0.4,0.77l-0.59,0.18l-1.59,-1.78l1.16,-1.5l1.3,-1.02l0.97,-0.46l0.94,0.72Z",name:"Lesotho"},TH:{path:"M677.42,253.68l-1.7,-0.88l-0.14,-0.03l-1.77,0.04l0.3,-1.64l-0.3,-0.35l-2.21,0.01l-0.3,0.28l-0.2,2.76l-2.15,5.9l-0.02,0.13l0.17,1.83l0.28,0.27l1.45,0.07l0.93,2.1l0.44,2.15l0.08,0.15l1.4,1.44l0.16,0.09l1.43,0.27l1.04,1.05l-0.58,0.73l-1.24,0.22l-0.15,-0.99l-0.15,-0.22l-2.04,-1.1l-0.36,0.06l-0.23,0.23l-0.72,-0.71l-0.41,-1.18l-0.06,-0.11l-1.33,-1.42l-1.22,-1.2l-0.5,0.13l-0.15,0.54l-0.14,-0.41l0.26,-1.48l0.73,-2.38l1.2,-2.57l1.37,-2.35l0.02,-0.27l-0.95,-2.26l0.03,-1.19l-0.29,-1.42l-0.06,-0.13l-1.65,-2.0l-0.46,-0.99l0.62,-0.34l0.13,-0.15l0.92,-2.23l-0.02,-0.27l-1.05,-1.74l-1.57,-1.86l-1.04,-1.96l0.76,-0.34l0.16,-0.16l1.07,-2.63l1.58,-0.1l0.16,-0.06l1.43,-1.11l1.24,-0.52l0.84,0.62l0.13,1.43l0.28,0.27l1.34,0.09l-0.54,2.39l0.05,2.39l0.45,0.25l2.48,-1.45l0.6,0.36l0.17,0.04l1.47,-0.07l0.25,-0.15l0.41,-0.73l1.58,0.15l1.76,1.93l0.15,2.44l0.08,0.18l1.94,2.15l-0.1,1.96l-0.66,0.93l-2.25,-0.34l-3.24,0.49l-0.19,0.12l-1.6,2.12l-0.06,0.24l0.48,2.46Z",name:"Thailand"},TF:{path:"M593.76,417.73l1.38,0.84l2.15,0.37l0.04,0.31l-0.59,1.24l-3.36,0.19l-0.05,-1.38l0.43,-1.56Z",name:"French Southern and Antarctic Lands"},TG:{path:"M425.23,269.29l-1.49,0.4l-0.43,-0.68l-0.64,-1.54l-0.18,-1.16l0.54,-2.21l-0.04,-0.24l-0.59,-0.86l-0.23,-1.9l0.0,-1.82l-0.07,-0.19l-0.95,-1.19l0.1,-0.41l1.58,0.04l-0.23,0.97l0.08,0.28l1.55,1.55l0.09,1.13l0.08,0.19l0.42,0.43l-0.11,5.66l0.52,1.53Z",name:"Togo"},TD:{path:"M457.57,252.46l0.23,-1.08l-0.28,-0.36l-1.32,-0.05l0.0,-1.35l-0.1,-0.22l-0.9,-0.82l0.99,-3.1l3.12,-2.37l0.12,-0.23l0.13,-3.33l0.95,-5.2l0.53,-1.09l-0.07,-0.36l-0.94,-0.81l-0.03,-0.7l-0.12,-0.23l-0.84,-0.61l-0.57,-3.76l2.21,-1.26l19.67,9.88l0.12,9.74l-1.83,-0.15l-0.28,0.14l-1.14,1.89l-0.68,1.62l0.05,0.31l0.33,0.38l-0.61,0.58l-0.08,0.3l0.25,0.93l-0.58,0.95l-0.29,1.01l0.34,0.37l0.67,-0.11l0.39,0.73l0.03,1.4l0.11,0.23l0.8,0.65l-0.01,0.24l-1.38,0.37l-0.11,0.06l-1.27,1.03l-1.83,2.76l-2.21,1.1l-2.34,-0.15l-0.82,0.25l-0.2,0.37l0.19,0.68l-1.16,0.79l-1.01,0.94l-2.92,0.89l-0.5,-0.46l-0.17,-0.08l-0.41,-0.05l-0.28,0.12l-0.38,0.54l-1.36,0.12l0.1,-0.18l0.01,-0.27l-0.78,-1.72l-0.35,-1.03l-0.17,-0.18l-1.03,-0.41l-1.29,-1.28l0.36,-0.78l0.9,0.2l0.14,-0.0l0.67,-0.17l1.36,0.02l0.26,-0.45l-1.32,-2.22l0.09,-1.64l-0.17,-1.68l-0.04,-0.13l-0.93,-1.53Z",name:"Chad"},LY:{path:"M457.99,226.38l-1.57,0.87l-1.25,-1.28l-0.13,-0.08l-3.85,-1.11l-1.04,-1.57l-0.09,-0.09l-1.98,-1.23l-0.27,-0.02l-0.93,0.39l-0.72,-1.2l-0.09,-1.07l-0.06,-0.16l-1.33,-1.75l0.83,-0.94l0.07,-0.24l-0.21,-1.64l0.31,-1.43l-0.17,-1.29l0.43,-2.26l-0.15,-1.33l-0.73,-2.18l0.99,-0.52l0.16,-0.21l0.22,-1.16l-0.22,-1.06l1.54,-0.95l0.81,-0.92l1.19,-0.78l0.14,-0.23l0.12,-1.76l2.57,0.84l0.16,0.01l0.99,-0.23l2.01,0.45l3.19,1.2l1.12,2.36l0.2,0.16l2.24,0.53l3.5,1.14l2.65,1.36l0.29,-0.01l1.22,-0.71l1.27,-1.32l0.07,-0.29l-0.55,-2.0l0.69,-1.19l1.7,-1.23l1.61,-0.35l3.2,0.54l0.78,1.14l0.24,0.13l0.85,0.01l0.84,0.47l2.35,0.31l0.42,0.63l-0.79,1.16l-0.04,0.26l0.35,1.08l-0.61,1.6l-0.0,0.2l0.73,2.16l0.0,24.24l-2.58,0.01l-0.3,0.29l-0.02,0.62l-19.55,-9.83l-0.28,0.01l-2.53,1.44Z",name:"Libya"},AE:{path:"M550.59,223.8l0.12,0.08l1.92,-0.41l3.54,0.15l0.23,-0.09l1.71,-1.79l1.86,-1.7l1.31,-1.36l0.26,0.5l0.28,1.72l-0.93,0.01l-0.3,0.26l-0.21,1.73l0.11,0.27l0.08,0.06l-0.7,0.32l-0.17,0.27l-0.01,0.99l-0.68,1.02l-0.05,0.15l-0.06,0.96l-0.32,0.36l-7.19,-1.27l-0.79,-2.22Z",name:"United Arab Emirates"},VE:{path:"M240.66,256.5l0.65,0.91l-0.03,1.13l-1.05,1.39l-0.03,0.31l0.95,2.0l0.32,0.17l1.08,-0.16l0.24,-0.21l0.56,-1.83l-0.06,-0.29l-0.71,-0.81l-0.1,-1.58l2.9,-0.96l0.19,-0.37l-0.29,-1.02l0.45,-0.41l0.72,1.43l0.26,0.16l1.65,0.04l1.46,1.27l0.08,0.72l0.3,0.27l2.28,0.02l2.55,-0.25l1.34,1.06l0.14,0.06l1.92,0.31l0.2,-0.03l1.4,-0.79l0.15,-0.25l0.02,-0.36l2.82,-0.14l1.17,-0.01l-0.41,0.14l-0.14,0.46l0.86,1.19l0.22,0.12l1.93,0.18l1.73,1.13l0.37,1.9l0.31,0.24l1.21,-0.05l0.52,0.32l-1.63,1.21l-0.11,0.17l-0.22,0.92l0.07,0.27l0.63,0.69l-0.31,0.24l-1.48,0.39l-0.22,0.3l0.04,1.03l-0.59,0.6l-0.01,0.41l1.67,1.87l0.23,0.48l-0.72,0.76l-2.71,0.91l-1.78,0.39l-0.13,0.06l-0.6,0.49l-1.84,-0.58l-1.89,-0.33l-0.18,0.03l-0.47,0.23l-0.02,0.53l0.96,0.56l-0.08,1.58l0.35,1.58l0.26,0.23l1.91,0.19l0.02,0.07l-1.54,0.62l-0.18,0.2l-0.25,0.92l-0.88,0.35l-1.85,0.58l-0.16,0.13l-0.4,0.64l-1.66,0.14l-1.22,-1.18l-0.79,-2.52l-0.67,-0.88l-0.66,-0.43l0.99,-0.98l0.09,-0.26l-0.09,-0.56l-0.08,-0.16l-0.66,-0.69l-0.47,-1.54l0.18,-1.67l0.55,-0.85l0.45,-1.35l-0.15,-0.36l-0.89,-0.43l-0.19,-0.02l-1.39,0.28l-1.76,-0.13l-0.92,0.23l-1.64,-2.01l-0.17,-0.1l-1.54,-0.33l-3.05,0.23l-0.5,-0.73l-0.15,-0.12l-0.45,-0.15l-0.05,-0.28l0.28,-0.86l0.01,-0.15l-0.2,-1.01l-0.08,-0.15l-0.5,-0.5l-0.3,-1.08l-0.25,-0.22l-0.89,-0.12l0.54,-1.18l0.29,-1.73l0.66,-0.85l0.94,-0.7l0.09,-0.11l0.3,-0.6Z",name:"Venezuela"},AF:{path:"M574.42,192.1l2.24,0.95l0.18,0.02l1.89,-0.38l0.22,-0.18l0.46,-1.14l1.82,-0.4l1.5,-0.91l0.14,-0.19l0.46,-2.12l1.93,-0.51l0.2,-0.18l0.26,-0.68l0.87,0.57l0.13,0.05l0.79,0.09l1.35,0.02l1.83,0.59l0.75,0.34l0.26,-0.01l1.66,-0.85l0.7,0.46l0.42,-0.09l0.72,-1.17l1.32,0.05l0.23,-0.1l0.39,-0.43l0.07,-0.14l0.24,-1.08l0.86,-0.81l0.94,0.46l-0.2,0.64l0.23,0.38l0.49,0.09l-0.21,2.15l0.09,0.25l0.99,0.94l0.38,0.03l0.83,-0.57l1.06,-0.27l0.12,-0.06l1.46,-1.21l1.63,0.2l2.4,0.0l0.17,0.32l-1.12,0.25l-1.23,0.52l-2.86,0.33l-2.69,0.6l-0.13,0.06l-1.46,1.25l-0.07,0.36l0.58,1.18l0.25,1.21l-1.13,1.08l-0.09,0.25l0.09,0.98l-0.53,0.79l-2.22,-0.08l-0.28,0.44l0.83,1.57l-1.3,0.58l-0.13,0.11l-1.06,1.69l-0.05,0.18l0.13,1.51l-0.73,0.58l-0.78,-0.22l-0.14,-0.01l-1.91,0.36l-0.23,0.19l-0.2,0.57l-1.65,-0.0l-0.22,0.1l-1.4,1.56l-0.08,0.19l-0.08,2.13l-2.99,1.05l-1.67,-0.23l-0.27,0.1l-0.39,0.46l-1.43,-0.31l-2.43,0.4l-3.69,-1.23l1.96,-2.15l0.08,-0.24l-0.21,-1.78l-0.23,-0.26l-1.69,-0.42l-0.19,-1.62l-0.77,-2.08l0.98,-1.41l-0.14,-0.45l-0.82,-0.31l0.6,-1.79l0.93,-3.21Z",name:"Afghanistan"},IQ:{path:"M534.42,190.89l0.13,0.14l1.5,0.78l0.15,1.34l-1.13,0.87l-0.11,0.16l-0.58,2.2l0.04,0.24l1.73,2.67l0.12,0.1l2.99,1.49l1.18,1.94l-0.39,1.89l0.29,0.36l0.5,-0.0l0.02,1.17l0.08,0.2l0.83,0.86l-2.36,-0.29l-0.29,0.13l-1.74,2.49l-4.4,-0.21l-7.03,-5.49l-3.73,-1.94l-2.92,-0.74l-0.89,-3.0l5.33,-2.81l0.15,-0.19l0.95,-3.43l-0.2,-2.0l1.19,-0.61l0.11,-0.09l1.23,-1.73l0.92,-0.38l2.75,0.35l0.81,0.68l0.31,0.05l0.94,-0.38l1.5,3.17Z",name:"Iraq"},IS:{path:"M384.26,87.96l-0.51,2.35l0.08,0.28l2.61,2.58l-2.99,2.83l-7.16,2.72l-2.08,0.7l-9.51,-1.71l1.89,-1.36l-0.07,-0.53l-4.4,-1.59l3.33,-0.59l0.25,-0.32l-0.11,-1.2l-0.25,-0.27l-4.82,-0.88l1.38,-2.2l3.54,-0.57l3.8,2.74l0.33,0.01l3.68,-2.18l3.02,1.12l0.25,-0.02l4.01,-2.18l3.72,0.27Z",name:"Iceland"},IR:{path:"M556.2,187.5l2.05,-0.52l0.13,-0.07l1.69,-1.57l1.55,0.08l0.15,-0.03l1.02,-0.5l1.64,0.25l2.82,1.48l1.91,0.3l2.8,2.49l0.18,0.08l1.61,0.09l0.19,2.09l-1.0,3.47l-0.69,2.04l0.18,0.38l0.73,0.28l-0.85,1.22l-0.04,0.28l0.81,2.19l0.19,1.72l0.23,0.26l1.69,0.42l0.17,1.43l-2.18,2.39l-0.01,0.4l1.22,1.42l1.0,1.62l0.12,0.11l2.23,1.11l0.06,2.2l0.2,0.27l1.03,0.38l0.14,0.83l-3.38,1.3l-0.18,0.19l-0.87,2.85l-4.44,-0.76l-2.75,-0.62l-2.64,-0.32l-1.01,-3.11l-0.17,-0.19l-1.2,-0.48l-0.18,-0.01l-1.99,0.51l-2.42,1.25l-2.89,-0.84l-2.48,-2.03l-2.41,-0.79l-1.61,-2.47l-1.84,-3.63l-0.36,-0.15l-1.22,0.4l-1.48,-0.84l-0.37,0.06l-0.72,0.82l-1.08,-1.12l-0.02,-1.35l-0.3,-0.29l-0.43,0.0l0.34,-1.64l-0.04,-0.22l-1.29,-2.11l-0.12,-0.11l-3.0,-1.49l-1.62,-2.49l0.52,-1.98l1.18,-0.92l0.11,-0.27l-0.19,-1.66l-0.16,-0.23l-1.55,-0.81l-1.58,-3.33l-1.3,-2.2l0.41,-0.75l0.03,-0.21l-0.73,-3.12l1.2,-0.59l0.35,0.9l1.26,1.35l0.15,0.09l1.81,0.39l0.91,-0.09l0.15,-0.06l2.9,-2.13l0.7,-0.16l0.48,0.56l-0.75,1.26l0.05,0.37l1.56,1.53l0.28,0.08l0.37,-0.09l0.7,1.89l0.21,0.19l2.31,0.59l1.69,1.4l0.15,0.07l3.66,0.49l3.91,-0.76l0.23,-0.19l0.19,-0.52Z",name:"Iran"},AM:{path:"M530.51,176.08l2.91,-0.39l0.41,0.63l0.11,0.1l0.66,0.36l-0.32,0.47l0.07,0.41l1.1,0.84l-0.53,0.7l0.06,0.42l1.06,0.8l1.01,0.44l0.04,1.56l-0.44,0.04l-0.88,-1.46l0.01,-0.37l-0.3,-0.31l-0.98,0.01l-0.65,-0.69l-0.26,-0.09l-0.38,0.06l-0.97,-0.82l-1.64,-0.65l0.2,-1.2l-0.02,-0.16l-0.28,-0.69Z",name:"Armenia"},IT:{path:"M451.68,158.58l0.2,0.16l3.3,0.75l-0.22,1.26l0.02,0.18l0.35,0.78l-1.4,-0.32l-0.21,0.03l-2.04,1.1l-0.16,0.29l0.13,1.47l-0.29,0.82l0.02,0.24l0.82,1.57l0.1,0.11l2.28,1.5l1.29,2.53l2.79,2.43l0.2,0.07l1.83,-0.02l0.31,0.34l-0.46,0.39l0.06,0.5l4.06,1.97l2.06,1.49l0.17,0.36l-0.24,0.53l-1.08,-1.07l-0.15,-0.08l-2.18,-0.49l-0.33,0.15l-1.05,1.91l0.11,0.4l1.63,0.98l-0.22,1.12l-0.84,0.14l-0.22,0.15l-1.27,2.38l-0.54,0.12l0.01,-0.47l0.48,-1.46l0.5,-0.58l0.03,-0.35l-0.97,-1.69l-0.76,-1.48l-0.17,-0.15l-0.94,-0.33l-0.68,-1.18l-0.16,-0.13l-1.53,-0.52l-1.03,-1.14l-0.19,-0.1l-1.78,-0.19l-1.88,-1.3l-2.27,-1.94l-1.64,-1.68l-0.76,-2.94l-0.21,-0.21l-1.22,-0.35l-2.01,-1.0l-0.24,-0.01l-1.15,0.42l-0.11,0.07l-1.38,1.36l-0.5,0.11l0.19,-0.87l-0.21,-0.35l-1.19,-0.34l-0.56,-2.06l0.76,-0.82l0.03,-0.36l-0.68,-1.08l0.04,-0.31l0.68,0.42l0.19,0.04l1.21,-0.15l0.14,-0.06l1.18,-0.89l0.25,0.29l0.25,0.1l1.19,-0.1l0.25,-0.18l0.45,-1.04l1.61,0.34l0.19,-0.02l1.1,-0.53l0.17,-0.22l0.15,-0.95l1.19,0.35l0.35,-0.16l0.23,-0.47l2.11,-0.47l0.45,0.89ZM459.35,184.63l-0.71,1.81l0.0,0.23l0.33,0.79l-0.37,1.03l-1.6,-0.91l-1.33,-0.34l-3.24,-1.36l0.23,-0.99l2.73,0.24l3.95,-0.5ZM443.95,175.91l1.26,1.77l-0.31,3.47l-0.82,-0.13l-0.26,0.08l-0.83,0.79l-0.64,-0.52l-0.1,-3.42l-0.44,-1.34l0.91,0.1l0.21,-0.06l1.01,-0.74Z",name:"Italy"},VN:{path:"M690.8,230.21l-2.86,1.93l-2.09,2.46l-0.06,0.11l-0.55,1.8l0.04,0.26l4.26,6.1l2.31,1.63l1.46,1.97l1.12,4.62l-0.32,4.3l-1.97,1.57l-2.85,1.62l-2.09,2.14l-2.83,2.13l-0.67,-1.19l0.65,-1.58l-0.09,-0.35l-1.47,-1.14l1.67,-0.79l2.57,-0.18l0.22,-0.47l-0.89,-1.24l3.88,-1.8l0.17,-0.24l0.31,-3.05l-0.01,-0.13l-0.56,-1.63l0.44,-2.48l-0.01,-0.15l-0.63,-1.81l-0.08,-0.12l-1.87,-1.77l-3.64,-5.3l-0.11,-0.1l-2.68,-1.39l0.45,-0.59l1.53,-0.65l0.16,-0.39l-0.97,-2.27l-0.27,-0.18l-2.89,-0.02l-1.04,-2.21l-1.28,-1.83l0.96,-0.46l1.97,0.01l2.43,-0.3l0.13,-0.05l1.95,-1.29l1.04,0.85l0.13,0.06l1.98,0.42l-0.32,1.21l0.09,0.3l1.19,1.07l0.12,0.07l1.88,0.51Z",name:"Vietnam"},AR:{path:"M258.11,341.34l1.4,1.81l0.51,-0.06l0.89,-1.94l2.51,0.1l0.36,0.49l4.6,4.31l0.15,0.08l1.99,0.39l3.01,1.93l2.5,1.01l0.28,0.91l-2.4,3.97l0.17,0.44l2.57,0.74l2.81,0.41l2.09,-0.44l0.14,-0.07l2.27,-2.06l0.09,-0.17l0.38,-2.2l0.88,-0.36l1.05,1.29l-0.04,1.88l-1.98,1.4l-1.72,1.13l-2.84,2.65l-3.34,3.73l-0.07,0.12l-0.63,2.22l-0.67,2.85l0.02,2.73l-0.47,0.54l-0.07,0.17l-0.36,3.28l0.12,0.27l3.03,2.32l-0.31,1.78l0.11,0.29l1.44,1.15l-0.11,1.17l-2.32,3.57l-3.59,1.51l-4.95,0.6l-2.72,-0.29l-0.32,0.38l0.5,1.67l-0.49,2.13l0.01,0.16l0.4,1.29l-1.27,0.88l-2.41,0.39l-2.33,-1.05l-0.31,0.04l-0.97,0.78l-0.11,0.27l0.35,2.98l0.16,0.23l1.69,0.91l0.31,-0.02l1.08,-0.75l0.46,0.96l-2.1,0.88l-2.01,1.89l-0.09,0.18l-0.36,3.05l-0.51,1.42l-2.16,0.01l-0.19,0.07l-1.96,1.59l-0.1,0.15l-0.72,2.34l0.08,0.31l2.46,2.31l0.13,0.07l2.09,0.56l-0.74,2.45l-2.86,1.75l-0.12,0.14l-1.59,3.71l-2.2,1.24l-0.1,0.09l-1.03,1.54l-0.04,0.23l0.81,3.45l0.06,0.13l1.13,1.32l-2.59,-0.57l-5.89,-0.44l-0.92,-1.73l0.05,-2.4l-0.34,-0.3l-1.49,0.19l-0.72,-0.98l-0.2,-3.21l1.79,-1.33l0.1,-0.13l0.79,-2.04l0.02,-0.16l-0.27,-1.52l1.31,-2.69l0.91,-4.15l-0.23,-1.72l0.91,-0.49l0.15,-0.33l-0.27,-1.16l-0.15,-0.2l-0.87,-0.46l0.65,-1.01l-0.04,-0.37l-1.06,-1.09l-0.54,-3.2l0.83,-0.51l0.14,-0.29l-0.42,-3.6l0.58,-2.98l0.64,-2.5l1.41,-1.0l0.12,-0.32l-0.75,-2.8l-0.01,-2.48l1.81,-1.78l0.09,-0.22l-0.06,-2.3l1.39,-2.69l0.03,-0.14l0.01,-2.58l-0.11,-0.24l-0.57,-0.45l-1.1,-4.59l1.49,-2.73l0.04,-0.17l-0.23,-2.59l0.86,-2.38l1.6,-2.48l1.74,-1.65l0.04,-0.39l-0.64,-0.89l0.42,-0.7l0.04,-0.16l-0.08,-4.26l2.55,-1.23l0.16,-0.18l0.86,-2.75l-0.01,-0.22l-0.22,-0.48l1.84,-2.1l3.0,0.59ZM256.77,438.98l-2.1,0.15l-1.18,-1.14l-0.19,-0.08l-1.53,-0.09l-2.38,-0.0l-0.0,-6.28l0.4,0.65l1.25,2.55l0.11,0.12l3.26,2.07l3.19,0.8l-0.82,1.26Z",name:"Argentina"},AU:{path:"M705.55,353.06l0.09,0.09l0.37,0.05l0.13,-0.35l-0.57,-1.69l0.48,0.3l0.71,0.99l0.34,0.11l0.2,-0.29l-0.04,-1.37l-0.04,-0.14l-1.22,-2.07l-0.28,-0.9l-0.51,-0.69l0.24,-1.33l0.52,-0.7l0.34,-1.32l0.01,-0.13l-0.25,-1.44l0.51,-0.94l0.1,1.03l0.23,0.26l0.32,-0.14l1.01,-1.72l1.94,-0.84l1.27,-1.14l1.84,-0.92l1.0,-0.18l0.6,0.28l0.26,-0.0l1.94,-0.96l1.48,-0.28l0.19,-0.13l0.32,-0.49l0.51,-0.18l1.42,0.05l2.63,-0.76l0.11,-0.06l1.36,-1.15l0.08,-0.1l0.61,-1.33l1.42,-1.27l0.1,-0.19l0.11,-1.03l0.06,-1.32l1.39,-1.74l0.85,1.79l0.4,0.14l1.07,-0.51l0.11,-0.45l-0.77,-1.05l0.53,-0.84l0.86,0.43l0.43,-0.22l0.29,-1.85l1.29,-1.19l0.6,-0.98l1.16,-0.4l0.2,-0.27l0.02,-0.34l0.74,0.2l0.38,-0.27l0.03,-0.44l1.98,-0.61l1.7,1.08l1.36,1.48l0.22,0.1l1.55,0.02l1.57,0.24l0.33,-0.4l-0.48,-1.27l1.09,-1.86l1.06,-0.63l0.1,-0.42l-0.28,-0.46l0.93,-1.24l1.36,-0.8l1.16,0.27l0.14,0.0l2.1,-0.48l0.23,-0.3l-0.05,-1.3l-0.18,-0.26l-1.08,-0.49l0.44,-0.12l1.52,0.58l1.39,1.06l2.11,0.65l0.19,-0.0l0.59,-0.21l1.44,0.72l0.27,0.0l1.37,-0.68l0.84,0.2l0.26,-0.06l0.37,-0.3l0.82,0.89l-0.56,1.14l-0.84,0.91l-0.75,0.07l-0.26,0.38l0.26,0.9l-0.67,1.15l-0.88,1.24l-0.05,0.25l0.18,0.72l0.12,0.17l1.99,1.42l1.96,0.84l1.25,0.86l1.8,1.51l0.19,0.07l0.63,-0.0l1.15,0.58l0.34,0.7l0.17,0.15l2.39,0.88l0.24,-0.02l1.65,-0.88l0.14,-0.16l0.49,-1.37l0.52,-1.19l0.31,-1.39l0.75,-2.02l0.01,-0.19l-0.33,-1.16l0.16,-0.67l0.0,-0.13l-0.28,-1.41l0.3,-1.78l0.42,-0.45l0.05,-0.33l-0.33,-0.73l0.56,-1.25l0.48,-1.39l0.07,-0.69l0.58,-0.59l0.48,0.84l0.17,1.53l0.17,0.24l0.47,0.23l0.09,0.9l0.05,0.14l0.87,1.23l0.17,1.33l-0.09,0.89l0.03,0.15l0.9,2.0l0.43,0.13l1.38,-0.83l0.71,0.92l1.06,0.88l-0.22,0.96l0.0,0.14l0.53,2.2l0.38,1.3l0.15,0.18l0.52,0.26l0.62,2.01l-0.23,1.27l0.02,0.18l0.81,1.76l0.14,0.14l2.69,1.35l3.21,2.21l-0.2,0.4l0.04,0.34l1.39,1.6l0.95,2.78l0.43,0.16l0.79,-0.46l0.85,0.96l0.39,0.05l0.22,-0.15l0.36,2.33l0.09,0.18l1.78,1.63l1.16,1.01l1.9,2.1l0.67,2.05l0.06,1.47l-0.17,1.64l0.03,0.17l1.16,2.22l-0.14,2.28l-0.43,1.24l-0.68,2.44l0.04,1.63l-0.48,1.92l-1.06,2.43l-1.79,1.32l-0.1,0.12l-0.91,2.15l-0.82,1.37l-0.76,2.47l-0.98,1.46l-0.63,2.14l-0.33,2.02l0.1,0.82l-1.21,0.85l-2.71,0.1l-0.13,0.03l-2.31,1.19l-1.21,1.17l-1.34,1.11l-1.89,-1.18l-1.33,-0.46l0.32,-1.24l-0.4,-0.35l-1.46,0.61l-2.06,1.98l-1.99,-0.73l-1.43,-0.46l-1.45,-0.22l-2.32,-0.81l-1.51,-1.67l-0.45,-2.11l-0.6,-1.5l-0.07,-0.11l-1.23,-1.16l-0.16,-0.08l-1.96,-0.28l0.59,-0.99l0.03,-0.24l-0.61,-2.1l-0.54,-0.08l-1.16,1.85l-1.23,0.29l0.73,-0.88l0.06,-0.12l0.37,-1.57l0.93,-1.33l0.05,-0.2l-0.2,-2.07l-0.53,-0.17l-2.01,2.35l-1.52,0.94l-0.12,0.14l-0.82,1.93l-1.5,-0.9l0.07,-1.32l-0.06,-0.2l-1.57,-2.04l-1.15,-0.92l0.3,-0.41l-0.1,-0.44l-3.21,-1.69l-0.13,-0.03l-1.69,-0.08l-2.35,-1.31l-0.16,-0.04l-4.55,0.27l-3.24,0.99l-2.8,0.91l-2.33,-0.18l-0.17,0.03l-2.63,1.41l-2.14,0.64l-0.2,0.19l-0.47,1.42l-0.8,0.99l-1.99,0.06l-1.55,0.24l-2.27,-0.5l-1.79,0.3l-1.71,0.13l-0.19,0.09l-1.38,1.39l-0.58,-0.1l-0.21,0.04l-1.26,0.8l-1.13,0.85l-1.72,-0.1l-1.6,-0.0l-2.58,-1.76l-1.21,-0.49l0.04,-1.19l1.04,-0.32l0.16,-0.12l0.42,-0.64l0.05,-0.19l-0.09,-0.97l0.3,-2.0l-0.28,-1.64l-1.34,-2.84l-0.39,-1.49l0.1,-1.51l-0.04,-0.17l-0.96,-1.72l-0.06,-0.73l-0.09,-0.19l-1.04,-1.01l-0.3,-2.02l-0.05,-0.12l-1.23,-1.83ZM784.95,393.35l2.39,1.01l0.2,0.01l3.26,-0.96l1.19,0.16l0.16,3.19l-0.78,0.95l-0.07,0.16l-0.19,1.83l-0.43,-0.41l-0.44,0.03l-1.61,1.96l-0.4,-0.12l-1.38,-0.09l-1.43,-2.42l-0.37,-2.03l-1.4,-2.53l0.04,-0.94l1.27,0.2Z",name:"Australia"},IL:{path:"M509.04,199.22l0.71,0.0l0.27,-0.17l0.15,-0.33l0.19,-0.01l0.02,0.73l-0.27,0.34l0.02,0.08l-0.32,0.62l-0.65,-0.27l-0.41,0.19l-0.52,1.85l0.16,0.35l0.14,0.07l-0.17,0.1l-0.14,0.21l-0.11,0.73l0.39,0.33l0.81,-0.26l0.03,0.64l-0.97,3.43l-1.28,-3.67l0.62,-0.78l-0.03,-0.41l0.58,-1.16l0.5,-2.07l0.27,-0.54Z",name:"Israel"},IN:{path:"M615.84,192.58l2.4,2.97l-0.24,2.17l0.05,0.2l0.94,1.35l-0.06,0.97l-1.46,-0.3l-0.35,0.36l0.7,3.06l0.12,0.18l2.46,1.75l3.11,1.72l-1.23,0.96l-0.1,0.13l-0.97,2.55l0.16,0.38l2.41,1.02l2.37,1.33l3.27,1.52l3.43,0.37l1.37,1.3l0.17,0.08l1.92,0.25l3.0,0.62l2.15,-0.04l0.28,-0.22l0.29,-1.06l0.0,-0.13l-0.32,-1.66l0.16,-0.94l1.0,-0.37l0.23,2.28l0.18,0.24l2.28,1.02l0.2,0.02l1.52,-0.41l2.06,0.18l2.08,-0.08l0.29,-0.27l0.18,-1.66l-0.1,-0.26l-0.53,-0.44l1.38,-0.23l0.15,-0.07l2.26,-2.0l2.75,-1.65l1.97,0.63l0.25,-0.03l1.54,-0.99l0.89,1.28l-0.72,0.97l0.2,0.48l2.49,0.37l0.11,0.61l-0.69,0.39l-0.15,0.3l0.15,1.22l-1.36,-0.37l-0.23,0.03l-3.24,1.86l-0.15,0.28l0.07,1.44l-1.33,2.16l-0.04,0.13l-0.12,1.24l-0.98,1.91l-1.72,-0.53l-0.39,0.28l-0.09,2.66l-0.52,0.83l-0.04,0.23l0.21,0.89l-0.71,0.36l-1.21,-3.85l-0.29,-0.21l-0.69,0.01l-0.29,0.23l-0.28,1.17l-0.84,-0.84l0.6,-1.17l0.97,-0.13l0.23,-0.16l1.15,-2.25l-0.18,-0.42l-1.54,-0.47l-2.3,0.04l-2.13,-0.33l-0.19,-1.63l-0.26,-0.26l-1.13,-0.13l-1.93,-1.13l-0.42,0.13l-0.88,1.82l0.08,0.37l1.47,1.15l-1.21,0.77l-0.1,0.1l-0.56,0.97l0.13,0.42l1.31,0.61l-0.36,1.35l0.01,0.2l0.85,1.95l0.37,2.05l-0.26,0.68l-1.55,-0.02l-3.09,0.54l-0.25,0.32l0.13,1.84l-1.21,1.4l-3.64,1.79l-2.79,3.04l-1.86,1.61l-2.48,1.68l-0.13,0.25l-0.0,1.0l-1.07,0.55l-2.21,0.9l-1.13,0.13l-0.25,0.19l-0.75,1.96l-0.02,0.15l0.52,3.31l0.13,2.03l-1.03,2.35l-0.03,0.12l-0.01,4.03l-1.02,0.1l-0.23,0.15l-1.14,1.93l0.04,0.36l0.44,0.48l-1.83,0.57l-0.18,0.15l-0.81,1.65l-0.74,0.53l-2.14,-2.12l-1.14,-3.47l-0.96,-2.57l-0.9,-1.26l-1.3,-2.38l-0.61,-3.14l-0.44,-1.62l-2.29,-3.56l-1.03,-4.94l-0.74,-3.29l0.01,-3.12l-0.49,-2.51l-0.41,-0.22l-3.56,1.53l-1.59,-0.28l-2.96,-2.87l0.94,-0.74l0.06,-0.41l-0.74,-1.03l-2.73,-2.1l1.35,-1.43l5.38,0.01l0.29,-0.36l-0.5,-2.29l-0.09,-0.15l-1.33,-1.28l-0.27,-1.96l-0.12,-0.2l-1.36,-1.0l2.42,-2.48l2.77,0.2l0.24,-0.1l2.62,-2.85l1.59,-2.8l2.41,-2.74l0.07,-0.2l-0.04,-1.82l2.01,-1.51l-0.01,-0.49l-1.95,-1.33l-0.83,-1.81l-0.82,-2.27l0.98,-0.97l3.64,0.66l2.89,-0.42l0.17,-0.08l2.18,-2.15Z",name:"India"},TZ:{path:"M505.77,287.58l0.36,0.23l8.95,5.03l0.15,1.3l0.13,0.21l3.4,2.37l-1.07,2.88l-0.02,0.14l0.15,1.42l0.15,0.23l1.47,0.84l0.05,0.42l-0.66,1.44l-0.02,0.18l0.13,0.72l-0.16,1.16l0.03,0.19l0.87,1.57l1.03,2.48l0.12,0.14l0.53,0.32l-1.59,1.18l-2.64,0.95l-1.45,-0.04l-0.2,0.07l-0.81,0.69l-1.64,0.06l-0.68,0.3l-2.9,-0.69l-1.71,0.17l-0.65,-3.18l-0.05,-0.12l-1.35,-1.88l-0.19,-0.12l-2.41,-0.46l-1.38,-0.74l-1.63,-0.44l-0.96,-0.41l-0.95,-0.58l-1.31,-3.09l-1.47,-1.46l-0.45,-1.31l0.24,-1.34l-0.39,-1.99l0.71,-0.08l0.18,-0.09l0.91,-0.91l0.98,-1.31l0.59,-0.5l0.11,-0.24l-0.02,-0.81l-0.08,-0.2l-0.47,-0.5l-0.1,-0.67l0.51,-0.23l0.18,-0.25l0.14,-1.47l-0.05,-0.2l-0.76,-1.09l0.45,-0.15l2.71,0.03l5.01,-0.19Z",name:"Tanzania"},AZ:{path:"M539.36,175.66l0.16,0.09l1.11,0.2l0.32,-0.15l0.4,-0.71l1.22,-0.99l1.11,1.33l1.26,2.09l0.22,0.14l1.06,0.13l0.28,0.29l-1.46,0.17l-0.26,0.24l-0.43,2.26l-0.39,0.92l-0.85,0.63l-0.12,0.25l0.06,1.2l-0.22,0.05l-1.28,-1.25l0.74,-1.25l-0.03,-0.35l-0.74,-0.86l-0.3,-0.1l-1.05,0.27l-2.49,1.82l-0.04,-1.46l-0.18,-0.27l-1.09,-0.47l-0.8,-0.6l0.53,-0.7l-0.06,-0.42l-1.11,-0.84l0.34,-0.51l-0.11,-0.43l-0.89,-0.48l-0.33,-0.49l0.25,-0.2l1.78,0.81l1.35,0.18l0.25,-0.09l0.34,-0.35l0.02,-0.39l-1.04,-1.36l0.28,-0.18l0.49,0.07l1.65,1.74ZM533.53,180.16l0.63,0.67l0.22,0.09l0.8,-0.0l0.04,0.31l0.66,1.09l-0.94,-0.21l-1.16,-1.24l-0.25,-0.71Z",name:"Azerbaijan"},IE:{path:"M405.17,135.35l0.36,2.16l-1.78,2.84l-4.28,1.91l-3.02,-0.43l1.81,-3.13l0.02,-0.26l-1.23,-3.26l3.24,-2.56l1.54,-1.32l0.37,1.33l-0.49,1.77l0.3,0.38l1.49,-0.05l1.68,0.63Z",name:"Ireland"},ID:{path:"M756.56,287.86l0.69,4.02l0.15,0.21l2.59,1.5l0.39,-0.07l2.05,-2.61l2.75,-1.45l2.09,-0.0l2.08,0.85l1.85,0.89l2.52,0.46l0.08,15.44l-1.72,-1.6l-0.15,-0.07l-2.54,-0.51l-0.29,0.1l-0.53,0.62l-2.53,0.06l0.78,-1.51l1.48,-0.66l0.17,-0.34l-0.65,-2.74l-1.23,-2.19l-0.14,-0.13l-4.85,-2.13l-2.09,-0.23l-3.7,-2.28l-0.41,0.1l-0.67,1.11l-0.63,0.14l-0.41,-0.67l-0.01,-1.01l-0.14,-0.25l-1.39,-0.89l2.05,-0.69l1.73,0.05l0.29,-0.39l-0.21,-0.66l-0.29,-0.21l-3.5,-0.0l-0.9,-1.36l-0.19,-0.13l-2.14,-0.44l-0.65,-0.76l2.86,-0.51l1.28,-0.79l3.75,0.96l0.32,0.76ZM758.01,300.37l-0.79,1.04l-0.14,-1.07l0.4,-0.81l0.29,-0.47l0.24,0.31l-0.0,1.0ZM747.45,292.9l0.48,1.02l-1.45,-0.69l-2.09,-0.21l-1.45,0.16l-1.28,-0.07l0.35,-0.81l2.86,-0.1l2.58,0.68ZM741.15,285.69l-0.16,-0.25l-0.72,-3.08l0.47,-1.86l0.35,-0.38l0.1,0.73l0.25,0.26l1.28,0.19l0.18,0.78l-0.11,1.8l-0.96,-0.18l-0.35,0.22l-0.38,1.52l0.05,0.24ZM741.19,285.75l0.76,0.97l-0.11,0.05l-0.65,-1.02ZM739.18,293.52l-0.61,0.54l-1.44,-0.38l-0.25,-0.55l1.93,-0.09l0.36,0.48ZM728.4,295.87l-0.27,-0.07l-2.26,0.89l-0.37,-0.41l0.27,-0.8l-0.09,-0.33l-1.68,-1.37l0.17,-2.29l-0.42,-0.3l-1.67,0.76l-0.17,0.29l0.21,2.92l0.09,3.34l-1.22,0.28l-0.78,-0.54l0.65,-2.1l0.01,-0.14l-0.39,-2.42l-0.29,-0.25l-0.86,-0.02l-0.63,-1.4l0.99,-1.61l0.35,-1.97l1.24,-3.73l0.49,-0.96l1.95,-1.7l1.86,0.69l3.16,0.35l2.92,-0.1l0.17,-0.06l2.24,-1.65l0.11,0.14l-1.8,2.22l-1.72,0.44l-2.41,-0.48l-4.21,0.13l-2.19,0.36l-0.25,0.24l-0.36,1.9l0.08,0.27l2.24,2.23l0.4,0.02l1.29,-1.08l3.19,-0.58l-0.19,0.06l-1.04,1.4l-2.13,0.94l-0.12,0.45l2.26,3.06l-0.37,0.69l0.03,0.32l1.51,1.95ZM728.48,295.97l0.59,0.76l-0.02,1.37l-1.0,0.55l-0.64,-0.58l1.09,-1.84l-0.02,-0.26ZM728.64,286.95l0.79,-0.14l-0.07,0.39l-0.72,-0.24ZM732.38,310.1l-1.89,0.49l-0.06,-0.06l0.17,-0.64l1.0,-1.42l2.14,-0.87l0.1,0.2l0.04,0.58l-1.49,1.72ZM728.26,305.71l-0.17,0.63l-3.53,0.67l-3.02,-0.28l-0.0,-0.42l1.66,-0.44l1.47,0.71l0.16,0.03l1.75,-0.21l1.69,-0.69ZM722.98,310.33l-0.74,0.03l-2.52,-1.35l1.42,-0.3l1.19,0.7l0.72,0.63l-0.06,0.28ZM716.24,305.63l0.66,0.49l0.22,0.06l1.35,-0.18l0.31,0.53l-4.18,0.77l-0.8,-0.01l0.51,-0.86l1.2,-0.02l0.24,-0.12l0.49,-0.65ZM715.84,280.21l0.09,0.34l2.25,1.86l-2.25,0.22l-0.24,0.17l-0.84,1.71l-0.03,0.15l0.1,2.11l-2.27,1.62l-0.13,0.24l-0.06,2.46l-0.74,2.92l-0.02,-0.05l-0.39,-0.16l-2.62,1.04l-0.86,-1.33l-0.23,-0.14l-1.71,-0.14l-1.19,-0.76l-0.25,-0.03l-2.78,0.84l-0.79,-1.05l-0.26,-0.12l-1.61,0.13l-1.8,-0.25l-0.36,-3.13l-0.15,-0.23l-1.18,-0.65l-1.13,-2.02l-0.33,-2.1l0.27,-2.19l1.05,-1.17l0.28,1.12l0.1,0.16l1.71,1.41l0.28,0.05l1.55,-0.49l1.54,0.17l0.23,-0.07l1.4,-1.21l1.05,-0.19l2.3,0.68l0.16,0.0l2.04,-0.53l0.21,-0.19l1.26,-3.41l0.91,-0.82l0.09,-0.14l0.8,-2.64l2.63,0.0l1.71,0.33l-1.19,1.89l0.02,0.34l1.74,2.24l-0.37,1.0ZM692.67,302.0l0.26,0.19l4.8,0.25l0.28,-0.16l0.44,-0.83l4.29,1.12l0.85,1.52l0.23,0.15l3.71,0.45l2.37,1.15l-2.06,0.69l-2.77,-1.0l-2.25,0.07l-2.57,-0.18l-2.31,-0.45l-2.94,-0.97l-1.84,-0.25l-0.13,0.01l-0.97,0.29l-4.34,-0.98l-0.38,-0.94l-0.25,-0.19l-1.76,-0.14l1.31,-1.84l2.81,0.14l1.97,0.96l0.95,0.19l0.28,0.74ZM685.63,299.27l-2.36,0.04l-2.07,-2.05l-3.17,-2.02l-1.06,-1.5l-1.88,-2.02l-1.22,-1.85l-1.9,-3.49l-2.2,-2.11l-0.71,-2.08l-0.94,-1.99l-0.1,-0.12l-2.21,-1.54l-1.35,-2.17l-1.86,-1.39l-2.53,-2.68l-0.14,-0.81l1.22,0.08l3.76,0.47l2.16,2.4l1.94,1.7l1.37,1.04l2.35,2.67l0.22,0.1l2.44,0.04l1.99,1.62l1.42,2.06l0.09,0.09l1.67,1.0l-0.88,1.8l0.11,0.39l1.44,0.87l0.13,0.04l0.68,0.05l0.41,1.62l0.87,1.4l0.22,0.14l1.71,0.21l1.06,1.38l-0.61,3.04l-0.09,3.6Z",name:"Indonesia"},UA:{path:"M500.54,141.42l0.9,0.13l0.27,-0.11l0.52,-0.62l0.68,0.13l2.43,-0.3l1.32,1.57l-0.45,0.48l-0.07,0.26l0.21,1.03l0.27,0.24l1.85,0.15l0.76,1.22l-0.05,0.55l0.2,0.31l3.18,1.15l0.18,0.01l1.75,-0.47l1.42,1.41l0.22,0.09l1.42,-0.03l3.44,0.99l0.02,0.65l-0.97,1.62l-0.03,0.24l0.52,1.67l-0.29,0.79l-2.24,0.22l-0.14,0.05l-1.29,0.89l-0.13,0.23l-0.07,1.16l-1.75,0.22l-0.12,0.04l-1.6,0.98l-2.27,0.16l-0.12,0.04l-2.16,1.17l-0.16,0.29l0.15,1.94l0.14,0.23l1.23,0.75l0.18,0.04l2.06,-0.15l-0.22,0.51l-2.67,0.54l-3.27,1.72l-1.0,-0.45l0.45,-1.19l-0.19,-0.39l-2.34,-0.78l0.15,-0.2l2.32,-1.0l0.09,-0.49l-0.73,-0.72l-0.15,-0.08l-3.69,-0.75l-0.14,-0.96l-0.35,-0.25l-2.32,0.39l-0.21,0.15l-0.91,1.7l-1.77,2.1l-0.93,-0.44l-0.24,-0.0l-1.05,0.45l-0.48,-0.25l0.13,-0.07l0.14,-0.15l0.43,-1.04l0.67,-0.97l0.04,-0.26l-0.1,-0.31l0.04,-0.02l0.11,0.19l0.24,0.15l1.48,0.09l0.78,-0.25l0.07,-0.53l-0.27,-0.19l0.09,-0.25l-0.08,-0.33l-0.81,-0.74l-0.34,-1.24l-0.14,-0.18l-0.73,-0.42l0.15,-0.87l-0.11,-0.29l-1.13,-0.86l-0.15,-0.06l-0.97,-0.11l-1.79,-0.97l-0.2,-0.03l-1.66,0.32l-0.13,0.06l-0.52,0.41l-0.95,-0.0l-0.23,0.11l-0.56,0.66l-1.74,0.29l-0.79,0.43l-1.01,-0.68l-0.16,-0.05l-1.57,-0.01l-1.52,-0.35l-0.23,0.04l-0.71,0.45l-0.09,-0.43l-0.13,-0.19l-1.18,-0.74l0.38,-1.02l0.53,-0.64l0.35,0.12l0.37,-0.41l-0.57,-1.29l2.1,-2.5l1.16,-0.36l0.2,-0.2l0.27,-0.92l-0.01,-0.2l-1.1,-2.52l0.79,-0.09l0.13,-0.05l1.3,-0.86l1.83,-0.07l2.48,0.26l2.84,0.8l1.91,0.06l0.88,0.45l0.29,-0.01l0.72,-0.44l0.49,0.58l0.25,0.11l2.2,-0.16l0.94,0.3l0.39,-0.26l0.15,-1.57l0.61,-0.59l2.01,-0.19Z",name:"Ukraine"},QA:{path:"M548.47,221.47l-0.15,-1.72l0.59,-1.23l0.38,-0.16l0.54,0.6l0.04,1.4l-0.47,1.37l-0.41,0.11l-0.53,-0.37Z",name:"Qatar"},MZ:{path:"M507.71,314.14l1.65,-0.18l2.96,0.7l0.2,-0.02l0.6,-0.29l1.68,-0.06l0.18,-0.07l0.8,-0.69l1.5,0.02l2.74,-0.98l1.74,-1.27l0.25,0.7l-0.1,2.47l0.31,2.27l0.1,3.97l0.42,1.24l-0.7,1.71l-0.94,1.73l-1.52,1.52l-5.06,2.21l-2.88,2.8l-1.01,0.51l-1.72,1.81l-0.99,0.58l-0.15,0.23l-0.21,1.86l0.04,0.19l1.17,1.95l0.47,1.47l0.03,0.74l0.39,0.28l0.05,-0.01l-0.06,2.13l-0.39,1.19l0.1,0.33l0.42,0.32l-0.28,0.83l-0.95,0.86l-2.03,0.88l-3.08,1.49l-1.1,0.99l-0.09,0.28l0.21,1.13l0.21,0.23l0.38,0.11l-0.14,0.89l-1.39,-0.02l-0.17,-0.94l-0.38,-1.23l-0.2,-0.89l0.44,-2.91l-0.01,-0.14l-0.65,-1.88l-1.15,-3.55l2.52,-2.85l0.68,-1.89l0.29,-0.18l0.14,-0.2l0.28,-1.53l-0.03,-0.19l-0.36,-0.7l0.1,-1.83l0.49,-1.84l-0.01,-3.26l-0.14,-0.25l-1.3,-0.83l-0.11,-0.04l-1.08,-0.17l-0.47,-0.55l-0.1,-0.08l-1.16,-0.54l-0.13,-0.03l-1.83,0.04l-0.32,-2.25l7.19,-1.99l1.32,1.12l0.29,0.06l0.55,-0.19l0.75,0.49l0.11,0.81l-0.49,1.11l-0.02,0.15l0.19,1.81l0.09,0.18l1.63,1.59l0.48,-0.1l0.72,-1.68l0.99,-0.49l0.17,-0.29l-0.21,-3.29l-0.04,-0.13l-1.11,-1.92l-0.9,-0.82l-0.21,-0.08l-0.62,0.03l-0.63,-2.98l0.61,-1.67Z",name:"Mozambique"}},height:440.7063107441331,projection:{type:"mill",centralMeridian:11.5},width:900});(function(){if(typeof Math.sgn=="undefined"){Math.sgn=function(G){return G==0?0:G>0?1:-1}}var o={subtract:function(H,G){return{x:H.x-G.x,y:H.y-G.y}},dotProduct:function(H,G){return(H.x*G.x)+(H.y*G.y)},square:function(G){return Math.sqrt((G.x*G.x)+(G.y*G.y))},scale:function(G,H){return{x:G.x*H,y:G.y*H}}},D=64,w=Math.pow(2,-D-1);var t=function(P,H){var M=[],O=g(P,H),J=H.length-1,G=(2*J)-1,L=u(O,G,M,0),Q=o.subtract(P,H[0]),N=o.square(Q),R=0;for(var K=0;K<L;K++){Q=o.subtract(P,C(H,J,M[K],null,null));var I=o.square(Q);if(I<N){N=I;R=M[K]}}Q=o.subtract(P,H[J]);I=o.square(Q);if(I<N){N=I;R=1}return{location:R,distance:N}};var b=function(G,H){var I=t(G,H);return{point:C(H,H.length-1,I.location,null,null),location:I.location}};var g=function(V,L){var O=L.length-1,H=(2*O)-1,T=[],R=[],J=[],U=[],S=[[1,0.6,0.3,0.1],[0.4,0.6,0.6,0.4],[0.1,0.3,0.6,1]];for(var Q=0;Q<=O;Q++){T[Q]=o.subtract(L[Q],V)}for(var Q=0;Q<=O-1;Q++){R[Q]=o.subtract(L[Q+1],L[Q]);R[Q]=o.scale(R[Q],3)}for(var W=0;W<=O-1;W++){for(var N=0;N<=O;N++){if(!J[W]){J[W]=[]}J[W][N]=o.dotProduct(R[W],T[N])}}for(Q=0;Q<=H;Q++){if(!U[Q]){U[Q]=[]}U[Q].y=0;U[Q].x=parseFloat(Q)/H}var K=O,M=O-1;for(var P=0;P<=K+M;P++){var I=Math.max(0,P-M),G=Math.min(P,K);for(Q=I;Q<=G;Q++){j=P-Q;U[Q+j].y+=J[j][Q]*S[j][Q]}}return U};var u=function(N,I,Q,K){var H=[],P=[],L,M,O=[],G=[];switch(d(N,I)){case 0:return 0;case 1:if(K>=D){Q[0]=(N[0].x+N[I].x)/2;return 1}if(e(N,I)){Q[0]=m(N,I);return 1}break}C(N,I,0.5,H,P);L=u(H,I,O,K+1);M=u(P,I,G,K+1);for(var J=0;J<L;J++){Q[J]=O[J]}for(var J=0;J<M;J++){Q[J+L]=G[J]}return(L+M)};var d=function(L,K){var J=0,H,G;H=G=Math.sgn(L[0].y);for(var I=1;I<=K;I++){H=Math.sgn(L[I].y);if(H!=G){J++}G=H}return J};var e=function(O,I){var U,H,G,Q,N,aa,Z,W,K,J,ac,M,R,ab,L,P;aa=O[0].y-O[I].y;Z=O[I].x-O[0].x;W=O[0].x*O[I].y-O[I].x*O[0].y;var T=max_distance_below=0;for(var V=1;V<I;V++){var S=aa*O[V].x+Z*O[V].y+W;if(S>T){T=S}else{if(S<max_distance_below){max_distance_below=S}}}ac=0;M=1;R=0;ab=aa;L=Z;P=W-T;K=ac*L-ab*M;J=1/K;H=(M*P-L*R)*J;ab=aa;L=Z;P=W-max_distance_below;K=ac*L-ab*M;J=1/K;G=(M*P-L*R)*J;Q=Math.min(H,G);N=Math.max(H,G);U=N-Q;return(U<w)?1:0};var m=function(I,J){var M=1,O=0,P=I[J].x-I[0].x,Q=I[J].y-I[0].y,G=I[0].x-0,K=I[0].y-0,N=P*O-Q*M,H=1/N,L=(P*K-Q*G)*H;return 0+M*L};var C=function(N,M,K,L,J){var G=[[]];for(var H=0;H<=M;H++){G[0][H]=N[H]}for(var I=1;I<=M;I++){for(var H=0;H<=M-I;H++){if(!G[I]){G[I]=[]}if(!G[I][H]){G[I][H]={}}G[I][H].x=(1-K)*G[I-1][H].x+K*G[I-1][H+1].x;G[I][H].y=(1-K)*G[I-1][H].y+K*G[I-1][H+1].y}}if(L!=null){for(H=0;H<=M;H++){L[H]=G[H][0]}}if(J!=null){for(H=0;H<=M;H++){J[H]=G[M-H][H]}}return(G[M][0])};var A={};var h=function(J){var Q=A[J];if(!Q){Q=[];var K=function(){return function(R){return Math.pow(R,J)}},I=function(){return function(R){return Math.pow((1-R),J)}},O=function(R){return function(S){return R}},P=function(){return function(R){return R}},G=function(){return function(R){return 1-R}},H=function(R){return function(T){var U=1;for(var S=0;S<R.length;S++){U=U*R[S](T)}return U}};Q.push(new K());for(var N=1;N<J;N++){var M=[new O(J)];for(var L=0;L<(J-N);L++){M.push(new P())}for(var L=0;L<N;L++){M.push(new G())}Q.push(new H(M))}Q.push(new I());A[J]=Q}return Q};var q=function(K,G){var L=h(K.length-1),I=0,H=0;for(var J=0;J<K.length;J++){I=I+(K[J].x*L[J](G));H=H+(K[J].y*L[J](G))}return{x:I,y:H}};var f=function(H,G){return Math.sqrt(Math.pow(H.x-G.x,2)+Math.pow(H.y-G.y,2))};var B=function(G){return G[0].x==G[1].x&&G[0].y==G[1].y};var p=function(M,H,N){if(B(M)){return{point:M[0],location:H}}var J=q(M,H),G=0,I=H,K=N>0?1:-1,L=null;while(G<Math.abs(N)){I+=(0.005*K);L=q(M,I);G+=f(L,J);J=L}return{point:L,location:I}};var v=function(L){if(B(L)){return 0}var I=q(L,0),G=0,H=0,J=1,K=null;while(H<1){H+=(0.005*J);K=q(L,H);G+=f(K,I);I=K}return G};var F=function(H,G,I){return p(H,G,I).point};var a=function(H,G,I){return p(H,G,I).location};var s=function(L,H){var K=q(L,H),J=q(L.slice(0,L.length-1),H),G=J.y-K.y,I=J.x-K.x;return G==0?Infinity:Math.atan(G/I)};var z=function(I,G,J){var H=p(I,G,J);if(H.location>1){H.location=1}if(H.location<0){H.location=0}return s(I,H.location)};var E=function(J,N,I,G){G=G==null?0:G;var H=p(J,N,G),K=s(J,H.location),O=Math.atan(-1/K),L=I/2*Math.sin(O),M=I/2*Math.cos(O);return[{x:H.point.x+M,y:H.point.y+L},{x:H.point.x-M,y:H.point.y-L}]};var n=window.jsBezier={distanceFromCurve:t,gradientAtPoint:s,gradientAtPointAlongCurveFrom:z,nearestPointOnCurve:b,pointOnCurve:q,pointAlongCurveFrom:F,perpendicularToCurveAt:E,locationAlongCurveFrom:a,getLength:v}})();(function(){var o=function(p){return Object.prototype.toString.call(p)==="[object Array]"},f=function(p){return Object.prototype.toString.call(p)==="[object Number]"},a=function(p){return typeof p==="string"},n=function(p){return typeof p==="boolean"},d=function(p){return p==null},e=function(p){return p==null?false:Object.prototype.toString.call(p)==="[object Object]"},m=function(p){return Object.prototype.toString.call(p)==="[object Date]"},g=function(p){return Object.prototype.toString.call(p)==="[object Function]"},h=function(q){for(var p in q){if(q.hasOwnProperty(p)){return false}}return true},b=function(s,q,p){s=o(s)?s:[s.x,s.y];q=o(q)?q:[q.x,q.y];return p(s,q)};jsPlumbUtil={isArray:o,isString:a,isBoolean:n,isNull:d,isObject:e,isDate:m,isFunction:g,isEmpty:h,isNumber:f,clone:function(q){if(a(q)){return""+q}else{if(n(q)){return !!q}else{if(m(q)){return new Date(q.getTime())}else{if(g(q)){return q}else{if(o(q)){var p=[];for(var t=0;t<q.length;t++){p.push(this.clone(q[t]))}return p}else{if(e(q)){var u={};for(var s in q){u[s]=this.clone(q[s])}return u}else{return q}}}}}}},merge:function(q,p){var v=this.clone(q);for(var u in p){if(v[u]==null||a(p[u])||n(p[u])){v[u]=p[u]}else{if(o(p[u])){var s=[];if(o(v[u])){s.push.apply(s,v[u])}s.push.apply(s,p[u]);v[u]=s}else{if(e(p[u])){if(!e(v[u])){v[u]={}}for(var t in p[u]){v[u][t]=p[u][t]}}}}}return v},copyValues:function(q,t,s){for(var p=0;p<q.length;p++){s[q[p]]=t[q[p]]}},functionChain:function(s,u,q){for(var p=0;p<q.length;p++){var t=q[p][0][q[p][1]].apply(q[p][0],q[p][2]);if(t===u){return t}}return s},populate:function(s,q){var p=function(z){var v=z.match(/(\$\{.*?\})/g);if(v!=null){for(var u=0;u<v.length;u++){var w=q[v[u].substring(2,v[u].length-1)];if(w!=null){z=z.replace(v[u],w)}}}return z},t=function(A){if(A!=null){if(a(A)){return p(A)}else{if(o(A)){var z=[];for(var v=0;v<A.length;v++){z.push(t(A[v]))}return z}else{if(e(A)){var w={};for(var u in A){w[u]=t(A[u])}return w}else{return A}}}}};return t(s)},convertStyle:function(q,p){if("transparent"===q){return q}var z=q,w=function(s){return s.length==1?"0"+s:s},t=function(s){return w(Number(s).toString(16))},u=/(rgb[a]?\()(.*)(\))/;if(q.match(u)){var v=q.match(u)[2].split(",");z="#"+t(v[0])+t(v[1])+t(v[2]);if(!p&&v.length==4){z=z+t(v[3])}}return z},gradient:function(q,p){return b(q,p,function(t,s){if(s[0]==t[0]){return s[1]>t[1]?Infinity:-Infinity}else{if(s[1]==t[1]){return s[0]>t[0]?0:-0}else{return(s[1]-t[1])/(s[0]-t[0])}}})},normal:function(q,p){return -1/this.gradient(q,p)},lineLength:function(q,p){return b(q,p,function(t,s){return Math.sqrt(Math.pow(s[1]-t[1],2)+Math.pow(s[0]-t[0],2))})},segment:function(q,p){return b(q,p,function(t,s){if(s[0]>t[0]){return(s[1]>t[1])?2:1}else{if(s[0]==t[0]){return s[1]>t[1]?2:1}else{return(s[1]>t[1])?3:4}}})},theta:function(q,p){return b(q,p,function(w,v){var u=jsPlumbUtil.gradient(w,v),z=Math.atan(u),A=jsPlumbUtil.segment(w,v);if((A==4||A==3)){z+=Math.PI}if(z<0){z+=(2*Math.PI)}return z})},intersects:function(v,u){var s=v.x,p=v.x+v.w,B=v.y,z=v.y+v.h,t=u.x,q=u.x+u.w,A=u.y,w=u.y+u.h;return((s<=t&&t<=p)&&(B<=A&&A<=z))||((s<=q&&q<=p)&&(B<=A&&A<=z))||((s<=t&&t<=p)&&(B<=w&&w<=z))||((s<=q&&t<=p)&&(B<=w&&w<=z))||((t<=s&&s<=q)&&(A<=B&&B<=w))||((t<=p&&p<=q)&&(A<=B&&B<=w))||((t<=s&&s<=q)&&(A<=z&&z<=w))||((t<=p&&s<=q)&&(A<=z&&z<=w))},segmentMultipliers:[null,[1,-1],[1,1],[-1,1],[-1,-1]],inverseSegmentMultipliers:[null,[-1,-1],[-1,1],[1,1],[1,-1]],pointOnLine:function(p,v,q){var u=jsPlumbUtil.gradient(p,v),B=jsPlumbUtil.segment(p,v),A=q>0?jsPlumbUtil.segmentMultipliers[B]:jsPlumbUtil.inverseSegmentMultipliers[B],t=Math.atan(u),w=Math.abs(q*Math.sin(t))*A[1],z=Math.abs(q*Math.cos(t))*A[0];return{x:p.x+z,y:p.y+w}},perpendicularLineTo:function(s,t,u){var q=jsPlumbUtil.gradient(s,t),v=Math.atan(-1/q),w=u/2*Math.sin(v),p=u/2*Math.cos(v);return[{x:t.x+p,y:t.y+w},{x:t.x-p,y:t.y-w}]},findWithFunction:function(p,s){if(p){for(var q=0;q<p.length;q++){if(s(p[q])){return q}}}return -1},clampToGrid:function(p,v,s,u,t){var q=function(C,w){var B=C%w,z=Math.floor(C/w),A=B>=(w/2)?1:0;return(z+A)*w};return[u||s==null?p:q(p,s[0]),t||s==null?v:q(v,s[1])]},indexOf:function(p,q){return jsPlumbUtil.findWithFunction(p,function(s){return s==q})},removeWithFunction:function(q,s){var p=jsPlumbUtil.findWithFunction(q,s);if(p>-1){q.splice(p,1)}return p!=-1},remove:function(q,s){var p=jsPlumbUtil.indexOf(q,s);if(p>-1){q.splice(p,1)}return p!=-1},addWithFunction:function(s,q,p){if(jsPlumbUtil.findWithFunction(s,p)==-1){s.push(q)}},addToList:function(u,q,t,s){var p=u[q];if(p==null){p=[];u[q]=p}p[s?"unshift":"push"](t);return p},extend:function(z,v,u,w){u=u||{};w=w||{};v=o(v)?v:[v];for(var t=0;t<v.length;t++){for(var s in v[t].prototype){if(v[t].prototype.hasOwnProperty(s)){z.prototype[s]=v[t].prototype[s]}}}var q=function(A){return function(){for(var B=0;B<v.length;B++){if(v[B].prototype[A]){v[B].prototype[A].apply(this,arguments)}}return u[A].apply(this,arguments)}};for(var p in u){z.prototype[p]=q(p)}return z},uuid:function(){return("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var q=Math.random()*16|0,p=s=="x"?q:(q&3|8);return p.toString(16)}))},logEnabled:true,log:function(){if(jsPlumbUtil.logEnabled&&typeof console!="undefined"){try{var q=arguments[arguments.length-1];console.log(q)}catch(p){}}},group:function(p){if(jsPlumbUtil.logEnabled&&typeof console!="undefined"){console.group(p)}},groupEnd:function(p){if(jsPlumbUtil.logEnabled&&typeof console!="undefined"){console.groupEnd(p)}},time:function(p){if(jsPlumbUtil.logEnabled&&typeof console!="undefined"){console.time(p)}},timeEnd:function(p){if(jsPlumbUtil.logEnabled&&typeof console!="undefined"){console.timeEnd(p)}},removeElement:function(p){if(p!=null&&p.parentNode!=null){p.parentNode.removeChild(p)}},removeElements:function(q){for(var p=0;p<q.length;p++){jsPlumbUtil.removeElement(q[p])}},sizeElement:function(t,p,u,q,s){if(t){t.style.height=s+"px";t.height=s;t.style.width=q+"px";t.width=q;t.style.left=p+"px";t.style.top=u+"px"}},wrap:function(s,p,q){s=s||function(){};p=p||function(){};return function(){var t=null;try{t=p.apply(this,arguments)}catch(u){jsPlumbUtil.log("jsPlumb function failed : "+u)}if(q==null||(t!==q)){try{t=s.apply(this,arguments)}catch(u){jsPlumbUtil.log("wrapped function failed : "+u)}}return t}}};jsPlumbUtil.EventGenerator=function(){var q={},s=false;var p=["ready"];this.bind=function(u,v,t){jsPlumbUtil.addToList(q,u,v,true);return this};this.fire=function(A,B,t){if(!s&&q[A]){var v=q[A].length,z=0,u=false,w=null;if(!this.shouldFireEvent||this.shouldFireEvent(A,B,t)){while(!u&&z<v&&w!==false){if(jsPlumbUtil.findWithFunction(p,function(D){return D===A})!=-1){q[A][z](B,t)}else{try{w=q[A][z](B,t)}catch(C){jsPlumbUtil.log("jsPlumb: fire failed for event "+A+" : "+C)}}z++;if(q==null||q[A]==null){u=true}}}}return this};this.unbind=function(t){if(t){delete q[t]}else{q={}}return this};this.getListener=function(t){return q[t]};this.setSuspendEvents=function(t){s=t};this.isSuspendEvents=function(){return s};this.cleanupListeners=function(){for(var t in q){q[t].splice(0);delete q[t]}}};jsPlumbUtil.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}};if(!Function.prototype.bind){Function.prototype.bind=function(p){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var u=Array.prototype.slice.call(arguments,1),t=this,q=function(){},s=function(){return t.apply(this instanceof q&&p?this:p,u.concat(Array.prototype.slice.call(arguments)))};q.prototype=this.prototype;s.prototype=new q();return s}}})();(function(){var b=!!document.createElement("canvas").getContext,a=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),e=function(){if(e.vml===undefined){var g=document.body.appendChild(document.createElement("div"));g.innerHTML='<v:shape id="vml_flag1" adj="1" />';var f=g.firstChild;if(f!=null&&f.style!=null){f.style.behavior="url(#default#VML)";e.vml=f?typeof f.adj=="object":true}else{e.vml=false}g.parentNode.removeChild(g)}return e.vml};var d=function(o){var n={},m=[],g={},f={},h={};this.register=function(s){var q=jsPlumb.CurrentLibrary,v=q.getElementObject(s),u=o.getId(s),p=q.getOffset(v);if(!n[u]){n[u]=s;m.push(s);g[u]={}}var t=function(C,w){if(C){for(var z=0;z<C.childNodes.length;z++){if(C.childNodes[z].nodeType!=3&&C.childNodes[z].nodeType!=8){var B=q.getElementObject(C.childNodes[z]),D=o.getId(C.childNodes[z],null,true);if(D&&f[D]&&f[D]>0){var A=q.getOffset(B);g[u][D]={id:D,offset:{left:A.left-p.left,top:A.top-p.top}};h[D]=u}t(C.childNodes[z])}}}};t(s)};this.updateOffsets=function(v){var A=jsPlumb.CurrentLibrary,s=A.getElementObject(v),u=A.getDOMElement(s),q=o.getId(u),t=g[q],p=A.getOffset(s);if(t){for(var z in t){var B=A.getElementObject(z),w=A.getOffset(B);g[q][z]={id:z,offset:{left:w.left-p.left,top:w.top-p.top}};h[z]=q}}};this.endpointAdded=function(t){var z=jsPlumb.CurrentLibrary,C=document.body,q=o.getId(t),B=z.getElementObject(t),D=jsPlumb.CurrentLibrary.getOffset(B),s=t.parentNode,v=s==C;f[q]=f[q]?f[q]+1:1;while(s!=null&&s!=C){var w=o.getId(s,null,true);if(w&&n[w]){var E=-1,A=z.getElementObject(s),u=z.getOffset(A);if(g[w][q]==null){g[w][q]={id:q,offset:{left:D.left-u.left,top:D.top-u.top}};h[q]=w}break}s=s.parentNode}};this.endpointDeleted=function(q){if(f[q.elementId]){f[q.elementId]--;if(f[q.elementId]<=0){for(var p in g){if(g[p]){delete g[p][q.elementId];delete h[q.elementId]}}}}};this.changeId=function(q,p){g[p]=g[q];g[q]={};h[p]=h[q];h[q]=null};this.getElementsForDraggable=function(p){return g[p]};this.elementRemoved=function(p){var q=h[p];if(q){delete g[q][p];delete h[p]}};this.reset=function(){n={};m=[];g={};f={}}};if(!window.console){window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}}}window.jsPlumbAdapter={headless:false,getAttribute:function(f,g){return f.getAttribute(g)},setAttribute:function(h,f,g){h.setAttribute(f,g)},appendToRoot:function(f){document.body.appendChild(f)},getRenderModes:function(){return["canvas","svg","vml"]},isRenderModeAvailable:function(f){return{canvas:b,svg:a,vml:e()}[f]},getDragManager:function(f){return new d(f)},setRenderMode:function(n){var m;if(n){n=n.toLowerCase();var g=this.isRenderModeAvailable("canvas"),f=this.isRenderModeAvailable("svg"),h=this.isRenderModeAvailable("vml");if(n==="svg"){if(f){m="svg"}else{if(g){m="canvas"}else{if(h){m="vml"}}}}else{if(n==="canvas"&&g){m="canvas"}else{if(h){m="vml"}}}}return m}}})();(function(){var g=jsPlumbUtil,B=function(J,I){p.CurrentLibrary.addClass(m(J),I)},n=function(J,I){return p.CurrentLibrary.hasClass(m(J),I)},o=function(J,I){p.CurrentLibrary.removeClass(m(J),I)},m=function(I){return p.CurrentLibrary.getElementObject(I)},H=function(I){return p.CurrentLibrary.getDOMElement(I)},z=function(J,I){var L=p.CurrentLibrary.getOffset(m(J));if(I!=null&&L!=null){var K=I.getZoom();return{left:L.left/K,top:L.top/K}}else{return L}},a=function(I){return p.CurrentLibrary.getSize(m(I))},s=function(){return""+(new Date()).getTime()},F=function(I){if(I._jsPlumb.paintStyle&&I._jsPlumb.hoverPaintStyle){var J={};p.extend(J,I._jsPlumb.paintStyle);p.extend(J,I._jsPlumb.hoverPaintStyle);delete I._jsPlumb.hoverPaintStyle;if(J.gradient&&I._jsPlumb.paintStyle.fillStyle){delete J.gradient}I._jsPlumb.hoverPaintStyle=J}},f=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],w={mouseout:"mouseexit"},G=function(K,O,N,J){var M=K.getAttachedElements();if(M){for(var L=0,I=M.length;L<I;L++){if(!J||J!=M[L]){M[L].setHover(O,true,N)}}}},q=function(I){return I==null?null:I.split(" ")},t=function(J,N,L){if(J.getDefaultType){var O=J.getTypeDescriptor();var M=g.merge({},J.getDefaultType());for(var K=0,I=J._jsPlumb.types.length;K<I;K++){M=g.merge(M,J._jsPlumb.instance.getType(J._jsPlumb.types[K],O))}if(N){M=g.populate(M,N)}J.applyType(M,L);if(!L){J.repaint()}}},C=window.jsPlumbUIComponent=function(N){jsPlumbUtil.EventGenerator.apply(this,arguments);var T=this,S=arguments,J=T.idPrefix,M=J+(new Date()).getTime(),Q=p.CurrentLibrary;this._jsPlumb={instance:N._jsPlumb,parameters:N.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:false,beforeDetach:N.beforeDetach,beforeDrop:N.beforeDrop,overlayPlacements:[],hoverClass:N.hoverClass||N._jsPlumb.Defaults.HoverClass||p.Defaults.HoverClass,types:[]};this.getId=function(){return M};if(N.events){for(var P in N.events){T.bind(P,N.events[P])}}this.clone=function(){var U={};this.constructor.apply(U,S);return U}.bind(this);this.isDetachAllowed=function(U){var V=true;if(this._jsPlumb.beforeDetach){try{V=this._jsPlumb.beforeDetach(U)}catch(W){g.log("jsPlumb: beforeDetach callback failed",W)}}return V};this.isDropAllowed=function(ab,W,Z,U,V){var aa=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:ab,targetId:W,scope:Z,connection:U,dropEndpoint:V});if(this._jsPlumb.beforeDrop){try{aa=this._jsPlumb.beforeDrop({sourceId:ab,targetId:W,scope:Z,connection:U,dropEndpoint:V})}catch(ac){g.log("jsPlumb: beforeDrop callback failed",ac)}}return aa};var O=[],R=function(W,V,U){O.push([W,V,U]);W.bind(V,U)},K=[],L=function(Z,aa,V){var U=w[V]||V,W=function(ab){aa.fire(U,aa,ab)};K.push([Z,V,W]);Q.bind(Z,V,W)},I=function(Z,V,W){var U=w[V]||V;Q.unbind(Z,V,W)};this.bindListeners=function(W,U,V){R(W,"click",function(Z,aa){U.fire("click",U,aa)});R(W,"dblclick",function(Z,aa){U.fire("dblclick",U,aa)});R(W,"contextmenu",function(Z,aa){U.fire("contextmenu",U,aa)});R(W,"mouseenter",function(Z,aa){if(!U.isHover()){V(true);U.fire("mouseenter",U,aa)}});R(W,"mouseexit",function(Z,aa){if(U.isHover()){V(false);U.fire("mouseexit",U,aa)}});R(W,"mousedown",function(Z,aa){U.fire("mousedown",U,aa)});R(W,"mouseup",function(Z,aa){U.fire("mouseup",U,aa)})};this.unbindListeners=function(){for(var U=0;U<O.length;U++){var V=O[U];V[0].unbind(V[1],V[2])}O=null};this.attachListeners=function(W,Z){for(var V=0,U=f.length;V<U;V++){L(W,Z,f[V])}};this.detachListeners=function(){for(var U=0;U<K.length;U++){I(K[U][0],K[U][1],K[U][2])}K=null};this.reattachListenersForElement=function(W){if(arguments.length>1){for(var V=0,U=f.length;V<U;V++){I(W,f[V])}for(V=1,U=arguments.length;V<U;V++){this.attachListeners(W,arguments[V])}}}};jsPlumbUtil.extend(C,jsPlumbUtil.EventGenerator,{getParameter:function(I){return this._jsPlumb.parameters[I]},setParameter:function(I,J){this._jsPlumb.parameters[I]=J},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(I){this._jsPlumb.parameters=I},addClass:function(I){if(this.canvas!=null){B(this.canvas,I)}},removeClass:function(I){if(this.canvas!=null){o(this.canvas,I)}},setType:function(I,K,J){this._jsPlumb.types=q(I)||[];t(this,K,J)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(J,I){t(this,J,I)},hasType:function(I){return jsPlumbUtil.indexOf(this._jsPlumb.types,I)!=-1},addType:function(L,O,M){var K=q(L),N=false;if(K!=null){for(var J=0,I=K.length;J<I;J++){if(!this.hasType(K[J])){this._jsPlumb.types.push(K[J]);N=true}}if(N){t(this,O,M)}}},removeType:function(M,N){var K=q(M),O=false,L=function(Q){var P=g.indexOf(this._jsPlumb.types,Q);if(P!=-1){this._jsPlumb.types.splice(P,1);return true}return false}.bind(this);if(K!=null){for(var J=0,I=K.length;J<I;J++){O=L(K[J])||O}if(O){t(this,null,N)}}},toggleType:function(M,O,N){var L=q(M);if(L!=null){for(var K=0,J=L.length;K<J;K++){var I=jsPlumbUtil.indexOf(this._jsPlumb.types,L[K]);if(I!=-1){this._jsPlumb.types.splice(I,1)}else{this._jsPlumb.types.push(L[K])}}t(this,O,N)}},applyType:function(J,K){this.setPaintStyle(J.paintStyle,K);this.setHoverPaintStyle(J.hoverPaintStyle,K);if(J.parameters){for(var I in J.parameters){this.setParameter(I,J.parameters[I])}}},setPaintStyle:function(I,J){this._jsPlumb.paintStyle=I;this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle;F(this);if(!J){this.repaint()}},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(I,J){this._jsPlumb.hoverPaintStyle=I;F(this);if(!J){this.repaint()}},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},cleanup:function(){this.unbindListeners();this.detachListeners()},destroy:function(){this.cleanupListeners();this.clone=null;this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(J,L,K){var I=p.CurrentLibrary;if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=J;if(this.canvas!=null){if(this._jsPlumb.instance.hoverClass!=null){I[J?"addClass":"removeClass"](this.canvas,this._jsPlumb.instance.hoverClass)}}if(this._jsPlumb.hoverPaintStyle!=null){this._jsPlumb.paintStyleInUse=J?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle;if(!this._jsPlumb.instance.isSuspendDrawing()){K=K||s();this.repaint({timestamp:K,recalc:false})}}if(this.getAttachedElements&&!L){G(this,J,s(),this)}}}});var E="__label",D=function(K,M){var I=-1;for(var L=0,J=K._jsPlumb.overlays.length;L<J;L++){if(M===K._jsPlumb.overlays[L].id){I=L;break}}return I},v=function(J,L){var I={cssClass:L.cssClass,labelStyle:J.labelStyle,id:E,component:J,_jsPlumb:J._jsPlumb.instance},K=p.extend(I,L);return new p.Overlays[J._jsPlumb.instance.getRenderMode()].Label(K)},e=function(I,M){var K=null;if(g.isArray(M)){var J=M[0],L=p.extend({component:I,_jsPlumb:I._jsPlumb.instance},M[1]);if(M.length==3){p.extend(L,M[2])}K=new p.Overlays[I._jsPlumb.instance.getRenderMode()][J](L)}else{if(M.constructor==String){K=new p.Overlays[I._jsPlumb.instance.getRenderMode()][M]({component:I,_jsPlumb:I._jsPlumb.instance})}else{K=M}}I._jsPlumb.overlays.push(K)},d=function(L,O){var I=L.defaultOverlayKeys||[],N=O.overlays,J=function(P){return L._jsPlumb.instance.Defaults[P]||p.Defaults[P]||[]};if(!N){N=[]}for(var M=0,K=I.length;M<K;M++){N.unshift.apply(N,J(I[M]))}return N},u=window.OverlayCapableJsPlumbUIComponent=function(N){C.apply(this,arguments);this._jsPlumb.overlays=[];var L=d(this,N);if(L){for(var K=0,J=L.length;K<J;K++){e(this,L[K])}}if(N.label){var M=N.labelLocation||this.defaultLabelLocation||0.5,I=N.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle||p.Defaults.LabelStyle;this._jsPlumb.overlays.push(v(this,{label:N.label,location:M,labelStyle:I}))}};jsPlumbUtil.extend(u,C,{applyType:function(K,L){this.removeAllOverlays(L);if(K.overlays){for(var J=0,I=K.overlays.length;J<I;J++){this.addOverlay(K.overlays[J],true)}}},setHover:function(K,M,L){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){for(var J=0,I=this._jsPlumb.overlays.length;J<I;J++){this._jsPlumb.overlays[J][K?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)}}},addOverlay:function(I,J){e(this,I);if(!J){this.repaint()}},getOverlay:function(J){var I=D(this,J);return I>=0?this._jsPlumb.overlays[I]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(J){var I=this.getOverlay(J);if(I){I.hide()}},hideOverlays:function(){for(var J=0,I=this._jsPlumb.overlays.length;J<I;J++){this._jsPlumb.overlays[J].hide()}},showOverlay:function(J){var I=this.getOverlay(J);if(I){I.show()}},showOverlays:function(){for(var J=0,I=this._jsPlumb.overlays.length;J<I;J++){this._jsPlumb.overlays[J].show()}},removeAllOverlays:function(K){for(var J=0,I=this._jsPlumb.overlays.length;J<I;J++){if(this._jsPlumb.overlays[J].cleanup){this._jsPlumb.overlays[J].cleanup()}}this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length);if(!K){this.repaint()}},removeOverlay:function(J){var I=D(this,J);if(I!=-1){var K=this._jsPlumb.overlays[I];if(K.cleanup){K.cleanup()}this._jsPlumb.overlays.splice(I,1)}},removeOverlays:function(){for(var J=0,I=arguments.length;J<I;J++){this.removeOverlay(arguments[J])}},getLabel:function(){var I=this.getOverlay(E);return I!=null?I.getLabel():null},getLabelOverlay:function(){return this.getOverlay(E)},setLabel:function(I){var J=this.getOverlay(E);if(!J){var K=I.constructor==String||I.constructor==Function?{label:I}:I;J=v(this,K);this._jsPlumb.overlays.push(J)}else{if(I.constructor==String||I.constructor==Function){J.setLabel(I)}else{if(I.label){J.setLabel(I.label)}if(I.location){J.setLocation(I.location)}}}if(!this._jsPlumb.instance.isSuspendDrawing()){this.repaint()}},cleanup:function(){for(var I=0;I<this._jsPlumb.overlays.length;I++){this._jsPlumb.overlays[I].cleanup();this._jsPlumb.overlays[I].destroy()}this._jsPlumb.overlays.splice(0)}});var h=0,b=function(){var I=h+1;h++;return I};var A=window.jsPlumbInstance=function(J){this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:true,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:false,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:false,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:false,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"};if(J){p.extend(this.Defaults,J)}this.logEnabled=this.Defaults.LogEnabled;this._connectionTypes={};this._endpointTypes={};jsPlumbUtil.EventGenerator.apply(this);var a5=this,aB=b(),aE=a5.bind,at={},aa=1,ae=function(bb){var bc=H(bb);return{el:bc,id:(jsPlumbUtil.isString(bb)&&bc==null)?bb:I(bc)}};this.getInstanceIndex=function(){return aB};this.setZoom=function(bc,bb){aa=bc;if(bb){a5.repaintEverything()}};this.getZoom=function(){return aa};for(var ar in this.Defaults){at[ar]=this.Defaults[ar]}this.bind=function(bc,bb){if("ready"===bc&&L){bb()}else{aE.apply(a5,[bc,bb])}};a5.importDefaults=function(bc){for(var bb in bc){a5.Defaults[bb]=bc[bb]}return a5};a5.restoreDefaults=function(){a5.Defaults=p.extend({},at);return a5};var O=null,aZ=null,L=false,S=[],aH={},aJ={},ag={},a7={},a0={},a4={},ak=false,ad=[],aQ=false,aT=null,R=this.Defaults.Scope,W=null,au=1,ai=function(){return""+au++},aK=function(bc,bb){if(a5.Defaults.Container){p.CurrentLibrary.appendElement(bc,a5.Defaults.Container)}else{if(!bb){jsPlumbAdapter.appendToRoot(bc)}else{p.CurrentLibrary.appendElement(bc,bb)}}},az=function(bb){return bb._nodes?bb._nodes:bb},aU=function(bf,bi,bh,bd){if(!jsPlumbAdapter.headless&&!aQ){var bb=I(bf),bj=a5.dragManager.getElementsForDraggable(bb);if(bh==null){bh=s()}var bc=V({elId:bb,offset:bi,recalc:false,timestamp:bh});if(bj){for(var bg in bj){V({elId:bj[bg].id,offset:{left:bc.o.left+bj[bg].offset.left,top:bc.o.top+bj[bg].offset.top},recalc:false,timestamp:bh})}}a5.anchorManager.redraw(bb,bi,bh,null,bd);if(bj){for(var be in bj){a5.anchorManager.redraw(bj[be].id,bi,bh,bj[be].offset,bd,true)}}}},ax=function(bd,bf){var bg=null,be,bh;if(g.isArray(bd)){bg=[];for(var bc=0,bb=bd.length;bc<bb;bc++){be=m(bd[bc]);bh=a5.getAttribute(be,"id");bg.push(bf(be,bh))}}else{be=m(bd);bh=a5.getAttribute(be,"id");bg=bf(be,bh)}return bg},am=function(bb){return aJ[bb]},aW=function(bg,bb,bj){if(!jsPlumbAdapter.headless){var bc=bb==null?false:bb,bh=p.CurrentLibrary;if(bc){if(bh.isDragSupported(bg)&&!bh.isAlreadyDraggable(bg)){var bl=bj||a5.Defaults.DragOptions||p.Defaults.DragOptions;bl=p.extend({},bl);var bi=bh.dragEvents.drag,bd=bh.dragEvents.stop,bf=bh.dragEvents.start;bl[bf]=g.wrap(bl[bf],function(){a5.setHoverSuspended(true);a5.select({source:bg}).addClass(a5.elementDraggingClass+" "+a5.sourceElementDraggingClass,true);a5.select({target:bg}).addClass(a5.elementDraggingClass+" "+a5.targetElementDraggingClass,true);a5.setConnectionBeingDragged(true)});bl[bi]=g.wrap(bl[bi],function(){var bm=bh.getUIPosition(arguments,a5.getZoom());aU(bg,bm,null,true);B(bg,"jsPlumb_dragged")});bl[bd]=g.wrap(bl[bd],function(){var bm=bh.getUIPosition(arguments,a5.getZoom());aU(bg,bm);o(bg,"jsPlumb_dragged");a5.setHoverSuspended(false);a5.select({source:bg}).removeClass(a5.elementDraggingClass+" "+a5.sourceElementDraggingClass,true);a5.select({target:bg}).removeClass(a5.elementDraggingClass+" "+a5.targetElementDraggingClass,true);a5.setConnectionBeingDragged(false)});var be=I(bg);a4[be]=true;var bk=a4[be];bl.disabled=bk==null?false:!bk;bh.initDraggable(bg,bl,false,a5);a5.dragManager.register(bg)}}}},aq=function(be,bi){var bb=p.extend({},be);if(bi){p.extend(bb,bi)}if(bb.source){if(bb.source.endpoint){bb.sourceEndpoint=bb.source}else{bb.source=H(bb.source)}}if(bb.target){if(bb.target.endpoint){bb.targetEndpoint=bb.target}else{bb.target=H(bb.target)}}if(be.uuids){bb.sourceEndpoint=am(be.uuids[0]);bb.targetEndpoint=am(be.uuids[1])}if(bb.sourceEndpoint&&bb.sourceEndpoint.isFull()){g.log(a5,"could not add connection; source endpoint is full");return}if(bb.targetEndpoint&&bb.targetEndpoint.isFull()){g.log(a5,"could not add connection; target endpoint is full");return}if(!bb.type&&bb.sourceEndpoint){bb.type=bb.sourceEndpoint.connectionType}if(bb.sourceEndpoint&&bb.sourceEndpoint.connectorOverlays){bb.overlays=bb.overlays||[];for(var bh=0,bg=bb.sourceEndpoint.connectorOverlays.length;bh<bg;bh++){bb.overlays.push(bb.sourceEndpoint.connectorOverlays[bh])}}if(!bb["pointer-events"]&&bb.sourceEndpoint&&bb.sourceEndpoint.connectorPointerEvents){bb["pointer-events"]=bb.sourceEndpoint.connectorPointerEvents}var bf,bc,bd,bj;if(bb.target&&!bb.target.endpoint&&!bb.targetEndpoint&&!bb.newConnection){bf=I(bb.target);bc=aN[bf];bd=ay[bf];if(bc){if(!ah[bf]){return}bc.isTarget=true;bj=bd!=null?bd:a5.addEndpoint(bb.target,bc);if(a1[bf]){ay[bf]=bj}bb.targetEndpoint=bj;bj._doNotDeleteOnDetach=false;bj._deleteOnDetach=true}}if(bb.source&&!bb.source.endpoint&&!bb.sourceEndpoint&&!bb.newConnection){bf=I(bb.source);bc=ap[bf];bd=aP[bf];if(bc){if(!ab[bf]){return}bj=bd!=null?bd:a5.addEndpoint(bb.source,bc);if(aS[bf]){aP[bf]=bj}bb.sourceEndpoint=bj;bj._doNotDeleteOnDetach=false;bj._deleteOnDetach=true}}return bb},ac=function(bf){var be=a5.Defaults.ConnectionType||a5.getDefaultConnectionType(),bd=a5.Defaults.EndpointType||p.Endpoint,bc=p.CurrentLibrary.getParent;if(bf.container){bf.parent=bf.container}else{if(bf.sourceEndpoint){bf.parent=bf.sourceEndpoint.parent}else{if(bf.source.constructor==bd){bf.parent=bf.source.parent}else{bf.parent=bc(bf.source)}}}bf._jsPlumb=a5;bf.newConnection=ac;bf.newEndpoint=av;bf.endpointsByUUID=aJ;bf.endpointsByElement=aH;bf.finaliseConnection=ba;var bb=new be(bf);bb.id="con_"+ai();a9("click","click",bb);a9("dblclick","dblclick",bb);a9("contextmenu","contextmenu",bb);return bb},ba=function(be,bf,bb,bd){bf=bf||{};if(!be.suspendedEndpoint){S.push(be)}if(be.suspendedEndpoint==null||bd){a5.anchorManager.newConnection(be)}aU(be.source);if(!bf.doNotFireConnectionEvent&&bf.fireEvent!==false){var bc={connection:be,source:be.source,target:be.target,sourceId:be.sourceId,targetId:be.targetId,sourceEndpoint:be.endpoints[0],targetEndpoint:be.endpoints[1]};a5.fire("connection",bc,bb)}},a9=function(bb,bc,bd){bd.bind(bb,function(bf,be){a5.fire(bc,bd,be)})},an=function(bd){if(bd.container){return bd.container}else{var bb=p.CurrentLibrary.getTagName(bd.source),bc=p.CurrentLibrary.getParent(bd.source);if(bb&&bb.toLowerCase()==="td"){return p.CurrentLibrary.getParent(bc)}else{return bc}}},av=function(be){var bd=a5.Defaults.EndpointType||p.Endpoint;var bb=p.extend({},be);bb.parent=an(bb);bb._jsPlumb=a5;bb.newConnection=ac;bb.newEndpoint=av;bb.endpointsByUUID=aJ;bb.endpointsByElement=aH;bb.finaliseConnection=ba;bb.fireDetachEvent=aR;bb.floatingConnections=a0;bb.getParentFromParams=an;bb.elementId=I(bb.source);var bc=new bd(bb);bc.id="ep_"+ai();a9("click","endpointClick",bc);a9("dblclick","endpointDblClick",bc);a9("contextmenu","contextmenu",bc);if(!jsPlumbAdapter.headless){a5.dragManager.endpointAdded(bb.source)}return bc},U=function(be,bd,bg){var bc=aH[be];if(bc&&bc.length){for(var bh=0,bj=bc.length;bh<bj;bh++){for(var bf=0,bi=bc[bh].connections.length;bf<bi;bf++){var bb=bd(bc[bh].connections[bf]);if(bb){return}}if(bg){bg(bc[bh])}}}},a3=function(bc,bb){return ax(bc,function(bd,be){a4[be]=bb;if(p.CurrentLibrary.isDragSupported(bd)){p.CurrentLibrary.setDraggable(bd,bb)}})},aO=function(bd,be,bb){be=be==="block";var bc=null;if(bb){if(be){bc=function(bg){bg.setVisible(true,true,true)}}else{bc=function(bg){bg.setVisible(false,true,true)}}}var bf=ae(bd);U(bf.id,function(bh){if(be&&bb){var bg=bh.sourceId===bf.id?1:0;if(bh.endpoints[bg].isVisible()){bh.setVisible(true)}}else{bh.setVisible(be)}},bc)},a2=function(bb){return ax(bb,function(bd,bc){var be=a4[bc]==null?false:a4[bc];be=!be;a4[bc]=be;p.CurrentLibrary.setDraggable(bd,be);return be})},aF=function(bb,bd){var bc=null;if(bd){bc=function(be){var bf=be.isVisible();be.setVisible(!bf)}}U(bb,function(bf){var be=bf.isVisible();bf.setVisible(!be)},bc)},V=function(bg){var be=bg.timestamp,bb=bg.recalc,bf=bg.offset,bc=bg.elId,bd;if(aQ&&!be){be=aT}if(!bb){if(be&&be===a7[bc]){return{o:bg.offset||ag[bc],s:ad[bc]}}}if(bb||!bf){bd=m(bc);if(bd!=null){ad[bc]=a(bd);ag[bc]=z(bd,a5);a7[bc]=be}}else{ag[bc]=bf;if(ad[bc]==null){bd=m(bc);if(bd!=null){ad[bc]=a(bd)}}a7[bc]=be}if(ag[bc]&&!ag[bc].right){ag[bc].right=ag[bc].left+ad[bc][0];ag[bc].bottom=ag[bc].top+ad[bc][1];ag[bc].width=ad[bc][0];ag[bc].height=ad[bc][1];ag[bc].centerx=ag[bc].left+(ag[bc].width/2);ag[bc].centery=ag[bc].top+(ag[bc].height/2)}return{o:ag[bc],s:ad[bc]}},aD=function(bb){var bc=ag[bb];if(!bc){return V({elId:bb})}else{return{o:bc,s:ad[bb]}}},I=function(bb,bc,bd){if(jsPlumbUtil.isString(bb)){return bb}if(bb==null){return null}var be=jsPlumbAdapter.getAttribute(bb,"id");if(!be||be==="undefined"){if(arguments.length==2&&arguments[1]!==undefined){be=bc}else{if(arguments.length==1||(arguments.length==3&&!arguments[2])){be="jsPlumb_"+aB+"_"+ai()}}if(!bd){jsPlumbAdapter.setAttribute(bb,"id",be)}}return be};this.setConnectionBeingDragged=function(bb){ak=bb};this.isConnectionBeingDragged=function(){return ak};this.connectorClass="_jsPlumb_connector";this.hoverClass="_jsPlumb_hover";this.endpointClass="_jsPlumb_endpoint";this.endpointConnectedClass="_jsPlumb_endpoint_connected";this.endpointFullClass="_jsPlumb_endpoint_full";this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed";this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden";this.overlayClass="_jsPlumb_overlay";this.draggingClass="_jsPlumb_dragging";this.elementDraggingClass="_jsPlumb_element_dragging";this.sourceElementDraggingClass="_jsPlumb_source_element_dragging";this.targetElementDraggingClass="_jsPlumb_target_element_dragging";this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor";this.hoverSourceClass="_jsPlumb_source_hover";this.hoverTargetClass="_jsPlumb_target_hover";this.dragSelectClass="_jsPlumb_drag_select";this.Anchors={};this.Connectors={canvas:{},svg:{},vml:{}};this.Endpoints={canvas:{},svg:{},vml:{}};this.Overlays={canvas:{},svg:{},vml:{}};this.ConnectorRenderers={};this.SVG="svg";this.CANVAS="canvas";this.VML="vml";this.addEndpoint=function(be,bf,bp){bp=bp||{};var bd=p.extend({},bp);p.extend(bd,bf);bd.endpoint=bd.endpoint||a5.Defaults.Endpoint||p.Defaults.Endpoint;bd.paintStyle=bd.paintStyle||a5.Defaults.EndpointStyle||p.Defaults.EndpointStyle;be=az(be);var bh=[],bk=(g.isArray(be)||(be.length!=null&&!g.isString(be)))?be:[be];for(var bi=0,bg=bk.length;bi<bg;bi++){var bn=H(bk[bi]),bc=I(bn);bd.source=bn;V({elId:bc,timestamp:aT});var bm=av(bd);if(bd.parentAnchor){bm.parentAnchor=bd.parentAnchor}g.addToList(aH,bc,bm);var bl=ag[bc],bj=ad[bc],bo=bm.anchor.compute({xy:[bl.left,bl.top],wh:bj,element:bm,timestamp:aT}),bb={anchorLoc:bo,timestamp:aT};if(aQ){bb.recalc=false}if(!aQ){bm.paint(bb)}bh.push(bm);bm._doNotDeleteOnDetach=true}return bh.length==1?bh[0]:bh};this.addEndpoints=function(bg,bc,bb){var bf=[];for(var be=0,bd=bc.length;be<bd;be++){var bh=a5.addEndpoint(bg,bc[be],bb);if(g.isArray(bh)){Array.prototype.push.apply(bf,bh)}else{bf.push(bh)}}return bf};this.animate=function(bd,bc,bb){bb=bb||{};var be=m(bd),bh=I(bd),bg=p.CurrentLibrary.dragEvents.step,bf=p.CurrentLibrary.dragEvents.complete;bb[bg]=g.wrap(bb[bg],function(){a5.repaint(bh)});bb[bf]=g.wrap(bb[bf],function(){a5.repaint(bh)});p.CurrentLibrary.animate(be,bc,bb)};this.checkCondition=function(be,bg){var bb=a5.getListener(be),bf=true;if(bb&&bb.length>0){try{for(var bd=0,bc=bb.length;bd<bc;bd++){bf=bf&&bb[bd](bg)}}catch(bh){g.log(a5,"cannot check condition ["+be+"]"+bh)}}return bf};this.checkASyncCondition=function(bd,bf,be,bc){var bb=a5.getListener(bd);if(bb&&bb.length>0){try{bb[0](bf,be,bc)}catch(bg){g.log(a5,"cannot asynchronously check condition ["+bd+"]"+bg)}}};this.connect=function(be,bc){var bb=aq(be,bc),bd;if(bb){bd=ac(bb);ba(bd,bb)}return bd};this.deleteEndpoint=function(bd,bc){var bb=a5.setSuspendDrawing(true);var be=(typeof bd=="string")?aJ[bd]:bd;if(be){a5.deleteObject({endpoint:be})}if(!bb){a5.setSuspendDrawing(false,bc)}return a5};this.deleteEveryEndpoint=function(){var bb=a5.setSuspendDrawing(true);for(var bf in aH){var bc=aH[bf];if(bc&&bc.length){for(var be=0,bd=bc.length;be<bd;be++){a5.deleteEndpoint(bc[be],true)}}}aH={};aJ={};a5.anchorManager.reset();a5.dragManager.reset();if(!bb){a5.setSuspendDrawing(false)}return a5};var aR=function(be,bg,bb){var bd=a5.Defaults.ConnectionType||a5.getDefaultConnectionType(),bc=be.constructor==bd,bf=bc?{connection:be,source:be.source,target:be.target,sourceId:be.sourceId,targetId:be.targetId,sourceEndpoint:be.endpoints[0],targetEndpoint:be.endpoints[1]}:be;if(bg){a5.fire("connectionDetached",bf,bb)}a5.anchorManager.connectionDetached(bf)};this.unregisterEndpoint=function(bg){if(bg._jsPlumb.uuid){aJ[bg._jsPlumb.uuid]=null}a5.anchorManager.deleteEndpoint(bg);for(var bf in aH){var bb=aH[bf];if(bb){var be=[];for(var bd=0,bc=bb.length;bd<bc;bd++){if(bb[bd]!=bg){be.push(bb[bd])}}aH[bf]=be}if(aH[bf].length<1){delete aH[bf]}}};this.detach=function(){if(arguments.length===0){return}var bf=a5.Defaults.ConnectionType||a5.getDefaultConnectionType(),bg=arguments[0].constructor==bf,be=arguments.length==2?bg?(arguments[1]||{}):arguments[0]:arguments[0],bj=(be.fireEvent!==false),bc=be.forceDetach,bd=bg?arguments[0]:be.connection;if(bd){if(bc||jsPlumbUtil.functionChain(true,false,[[bd.endpoints[0],"isDetachAllowed",[bd]],[bd.endpoints[1],"isDetachAllowed",[bd]],[bd,"isDetachAllowed",[bd]],[a5,"checkCondition",["beforeDetach",bd]]])){bd.endpoints[0].detach(bd,false,true,bj)}}else{var bb=p.extend({},be);if(bb.uuids){am(bb.uuids[0]).detachFrom(am(bb.uuids[1]),bj)}else{if(bb.sourceEndpoint&&bb.targetEndpoint){bb.sourceEndpoint.detachFrom(bb.targetEndpoint)}else{var bi=I(H(bb.source)),bh=I(H(bb.target));U(bi,function(bk){if((bk.sourceId==bi&&bk.targetId==bh)||(bk.targetId==bi&&bk.sourceId==bh)){if(a5.checkCondition("beforeDetach",bk)){bk.endpoints[0].detach(bk,false,true,bj)}}})}}}};this.detachAllConnections=function(be,bf){bf=bf||{};be=H(be);var bg=I(be),bb=aH[bg];if(bb&&bb.length){for(var bd=0,bc=bb.length;bd<bc;bd++){bb[bd].detachAll(bf.fireEvent!==false)}}return a5};this.detachEveryConnection=function(bb){bb=bb||{};a5.doWhileSuspended(function(){for(var bf in aH){var bc=aH[bf];if(bc&&bc.length){for(var be=0,bd=bc.length;be<bd;be++){bc[be].detachAll(bb.fireEvent!==false)}}}S.splice(0)});return a5};this.deleteObject=function(bb){var bk={endpoints:{},connections:{},endpointCount:0,connectionCount:0},bj=bb.fireEvent!==false,bi=bb.deleteAttachedObjects!==false;var bg=function(bl){if(bl!=null&&bk.connections[bl.id]==null){bl._jsPlumb&&bl.setHover(false);bk.connections[bl.id]=bl;bk.connectionCount++;if(bi){for(var bm=0;bm<bl.endpoints.length;bm++){if(bl.endpoints[bm]._deleteOnDetach){be(bl.endpoints[bm])}}}}};var be=function(bm){if(bm!=null&&bk.endpoints[bm.id]==null){bm._jsPlumb&&bm.setHover(false);bk.endpoints[bm.id]=bm;bk.endpointCount++;if(bi){for(var bl=0;bl<bm.connections.length;bl++){var bn=bm.connections[bl];bg(bn)}}}};if(bb.connection){bg(bb.connection)}else{be(bb.endpoint)}for(var bd in bk.connections){var bh=bk.connections[bd];bh.endpoints[0].detachFromConnection(bh);bh.endpoints[1].detachFromConnection(bh);jsPlumbUtil.removeWithFunction(S,function(bl){return bh.id==bl.id});aR(bh,bj,bb.originalEvent);bh.cleanup();bh.destroy()}for(var bc in bk.endpoints){var bf=bk.endpoints[bc];a5.unregisterEndpoint(bf);bf.cleanup();bf.destroy()}return bk};this.draggable=function(be,bc){var bd,bb,bf;if(typeof be=="object"&&be.length){for(bd=0,bb=be.length;bd<bb;bd++){bf=H(be[bd]);if(bf){aW(bf,true,bc)}}}else{if(be._nodes){for(bd=0,bb=be._nodes.length;bd<bb;bd++){bf=H(be._nodes[bd]);if(bf){aW(bf,true,bc)}}}else{bf=H(be);if(bf){aW(bf,true,bc)}}}return a5};this.extend=function(bc,bb){return p.CurrentLibrary.extend(bc,bb)};var a6=function(bg,bf,bd,bb){for(var be=0,bc=bg.length;be<bc;be++){bg[be][bf].apply(bg[be],bd)}return bb(bg)},T=function(bg,bf,bd){var bc=[];for(var be=0,bb=bg.length;be<bb;be++){bc.push([bg[be][bf].apply(bg[be],bd),bg[be]])}return bc},aj=function(bd,bc,bb){return function(){return a6(bd,bc,arguments,bb)}},ao=function(bc,bb){return function(){return T(bc,bb,arguments)}},a8=function(bb,bf){var be=[];if(bb){if(typeof bb=="string"){if(bb==="*"){return bb}be.push(bb)}else{bb=m(bb);if(bf){be=bb}else{for(var bd=0,bc=bb.length;bd<bc;bd++){be.push(ae(bb[bd]).id)}}}}return be},aw=function(bd,bc,bb){if(bd==="*"){return true}return bd.length>0?jsPlumbUtil.indexOf(bd,bc)!=-1:!bb};this.getConnections=function(bk,bc){if(!bk){bk={}}else{if(bk.constructor==String){bk={scope:bk}}}var bj=bk.scope||a5.getDefaultScope(),bi=a8(bj,true),bb=a8(bk.source),bg=a8(bk.target),be=(!bc&&bi.length>1)?{}:[],bl=function(bn,bo){if(!bc&&bi.length>1){var bm=be[bn];if(bm==null){bm=be[bn]=[]}bm.push(bo)}else{be.push(bo)}};for(var bd=0,bf=S.length;bd<bf;bd++){var bh=S[bd];if(aw(bi,bh.scope)&&aw(bb,bh.sourceId)&&aw(bg,bh.targetId)){bl(bh.scope,bh)}}return be};var M=function(bb,bc){return function(bf){for(var bd=0,be=bb.length;bd<be;bd++){bf(bb[bd])}return bc(bb)}},P=function(bb){return function(bc){return bb[bc]}};var Q=function(bg,bh){var bb={length:bg.length,each:M(bg,bh),get:P(bg)},bf=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],be=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],bc,bd;for(bc=0,bd=bf.length;bc<bd;bc++){bb[bf[bc]]=aj(bg,bf[bc],bh)}for(bc=0,bd=be.length;bc<bd;bc++){bb[be[bc]]=ao(bg,be[bc])}return bb};var aA=function(bc){var bb=Q(bc,aA);return p.CurrentLibrary.extend(bb,{setDetachable:aj(bc,"setDetachable",aA),setReattach:aj(bc,"setReattach",aA),setConnector:aj(bc,"setConnector",aA),detach:function(){for(var bd=0,be=bc.length;bd<be;bd++){a5.detach(bc[bd])}},isDetachable:ao(bc,"isDetachable"),isReattach:ao(bc,"isReattach")})};var aV=function(bc){var bb=Q(bc,aV);return p.CurrentLibrary.extend(bb,{setEnabled:aj(bc,"setEnabled",aV),setAnchor:aj(bc,"setAnchor",aV),isEnabled:ao(bc,"isEnabled"),detachAll:function(){for(var bd=0,be=bc.length;bd<be;bd++){bc[bd].detachAll()}},remove:function(){for(var bd=0,be=bc.length;bd<be;bd++){a5.deleteObject({endpoint:bc[bd]})}}})};this.select=function(bb){bb=bb||{};bb.scope=bb.scope||"*";return aA(bb.connections||a5.getConnections(bb,true))};this.selectEndpoints=function(bm){bm=bm||{};bm.scope=bm.scope||"*";var be=!bm.element&&!bm.source&&!bm.target,bh=be?"*":a8(bm.element),bb=be?"*":a8(bm.source),bq=be?"*":a8(bm.target),bj=a8(bm.scope,true);var bs=[];for(var bc in aH){var bn=aw(bh,bc,true),bk=aw(bb,bc,true),bp=bb!="*",br=aw(bq,bc,true),bg=bq!="*";if(bn||bk||br){inner:for(var bl=0,bf=aH[bc].length;bl<bf;bl++){var bi=aH[bc][bl];if(aw(bj,bi.scope,true)){var bo=(bp&&bb.length>0&&!bi.isSource),bd=(bg&&bq.length>0&&!bi.isTarget);if(bo||bd){continue inner}bs.push(bi)}}}}return aV(bs)};this.getAllConnections=function(){return S};this.getDefaultScope=function(){return R};this.getEndpoint=am;this.getEndpoints=function(bb){return aH[ae(bb).id]};this.getDefaultEndpointType=function(){return p.Endpoint};this.getDefaultConnectionType=function(){return p.Connection};this.getId=I;this.getOffset=function(bc){var bb=ag[bc];return V({elId:bc})};this.getSelector=function(){return p.CurrentLibrary.getSelector.apply(null,arguments)};this.getSize=function(bc){var bb=ad[bc];if(!bb){V({elId:bc})}return ad[bc]};this.appendElement=aK;var aG=false;this.isHoverSuspended=function(){return aG};this.setHoverSuspended=function(bb){aG=bb};var aL=function(bb){return function(){return jsPlumbAdapter.isRenderModeAvailable(bb)}};this.isCanvasAvailable=aL("canvas");this.isSVGAvailable=aL("svg");this.isVMLAvailable=aL("vml");this.hide=function(bb,bc){aO(bb,"none",bc);return a5};this.idstamp=ai;this.connectorsInitialized=false;var aX=[],aM=["canvas","svg","vml"];this.registerConnectorType=function(bb,bc){aX.push([bb,bc])};this.init=function(){var bd=function(bg,be,bf){p.Connectors[bg][be]=function(){bf.apply(this,arguments);p.ConnectorRenderers[bg].apply(this,arguments)};jsPlumbUtil.extend(p.Connectors[bg][be],[bf,p.ConnectorRenderers[bg]])};if(!p.connectorsInitialized){for(var bc=0;bc<aX.length;bc++){for(var bb=0;bb<aM.length;bb++){bd(aM[bb],aX[bc][1],aX[bc][0])}}p.connectorsInitialized=true}if(!L){a5.anchorManager=new p.AnchorManager({jsPlumbInstance:a5});a5.setRenderMode(a5.Defaults.RenderMode);L=true;a5.fire("ready",a5)}}.bind(this);this.log=O;this.jsPlumbUIComponent=C;this.makeAnchor=function(){var bf=function(bi,bj){if(p.Anchors[bi]){return new p.Anchors[bi](bj)}if(!a5.Defaults.DoNotThrowErrors){throw {msg:"jsPlumb: unknown anchor type '"+bi+"'"}}};if(arguments.length===0){return null}var bh=arguments[0],bd=arguments[1],bc=arguments[2],be=null;if(bh.compute&&bh.getOrientation){return bh}else{if(typeof bh=="string"){be=bf(arguments[0],{elementId:bd,jsPlumbInstance:a5})}else{if(g.isArray(bh)){if(g.isArray(bh[0])||g.isString(bh[0])){if(bh.length==2&&g.isString(bh[0])&&g.isObject(bh[1])){var bb=p.extend({elementId:bd,jsPlumbInstance:a5},bh[1]);be=bf(bh[0],bb)}else{be=new p.DynamicAnchor({anchors:bh,selector:null,elementId:bd,jsPlumbInstance:bc})}}else{var bg={x:bh[0],y:bh[1],orientation:(bh.length>=4)?[bh[2],bh[3]]:[0,0],offsets:(bh.length>=6)?[bh[4],bh[5]]:[0,0],elementId:bd,jsPlumbInstance:bc,cssClass:bh.length==7?bh[6]:null};be=new p.Anchor(bg);be.clone=function(){return new p.Anchor(bg)}}}}}if(!be.id){be.id="anchor_"+ai()}return be};this.makeAnchors=function(be,bc,bb){var bg=[];for(var bd=0,bf=be.length;bd<bf;bd++){if(typeof be[bd]=="string"){bg.push(p.Anchors[be[bd]]({elementId:bc,jsPlumbInstance:bb}))}else{if(g.isArray(be[bd])){bg.push(a5.makeAnchor(be[bd],bc,bb))}}}return bg};this.makeDynamicAnchor=function(bb,bc){return new p.DynamicAnchor({anchors:bb,selector:bc,elementId:null,jsPlumbInstance:a5})};var aN={},ay={},a1={},al={},Z=function(bb,bc){bb.paintStyle=bb.paintStyle||a5.Defaults.EndpointStyles[bc]||a5.Defaults.EndpointStyle||p.Defaults.EndpointStyles[bc]||p.Defaults.EndpointStyle;bb.hoverPaintStyle=bb.hoverPaintStyle||a5.Defaults.EndpointHoverStyles[bc]||a5.Defaults.EndpointHoverStyle||p.Defaults.EndpointHoverStyles[bc]||p.Defaults.EndpointHoverStyle;bb.anchor=bb.anchor||a5.Defaults.Anchors[bc]||a5.Defaults.Anchor||p.Defaults.Anchors[bc]||p.Defaults.Anchor;bb.endpoint=bb.endpoint||a5.Defaults.Endpoints[bc]||a5.Defaults.Endpoint||p.Defaults.Endpoints[bc]||p.Defaults.Endpoint},ap={},aP={},aS={},ab={},K={},N={},ah={},aI=function(bc,bh,bb){var bf=bc.target||bc.srcElement,be=false,bg=a5.getSelector(bh,bb);for(var bd=0;bd<bg.length;bd++){if(bg[bd]==bf){be=true;break}}return be};this.makeTarget=function(be,bf,bm){var bc=p.extend({_jsPlumb:a5},bm);p.extend(bc,bf);Z(bc,1);var bj=p.CurrentLibrary,bk=bc.scope||a5.Defaults.Scope,bg=!(bc.deleteEndpointsOnDetach===false),bd=bc.maxConnections||-1,bb=bc.onMaxConnections;_doOne=function(bt){var br=ae(bt),bq=br.id,bp=new C(bc),bo=p.extend({},bc.dropOptions||{});aN[bq]=bc;a1[bq]=bc.uniqueEndpoint;al[bq]=bd;ah[bq]=true;var bn=function(){a5.currentlyDragging=false;var bw=p.CurrentLibrary.getDropEvent(arguments),by=a5.select({target:bq}).length,bJ=m(bj.getDragObject(arguments)),bx=a5.getAttribute(bJ,"dragId"),bH=a5.getAttribute(bJ,"originalScope"),bC=a0[bx],bE=bC.endpoints[0].isFloating()?0:1,bv=bC.endpoints[0],bu=bc.endpoint?p.extend({},bc.endpoint):{};if(!ah[bq]||al[bq]>0&&by>=al[bq]){if(bb){bb({element:br.el,connection:bC},bw)}return false}bv.anchor.locked=false;if(bH){bj.setDragScope(bJ,bH)}var bB=bp.isDropAllowed(bE===0?bq:bC.sourceId,bE===0?bC.targetId:bq,bC.scope,bC,null);if(bC.suspendedEndpoint){bC[bE?"targetId":"sourceId"]=bC.suspendedEndpoint.elementId;bC[bE?"target":"source"]=bC.suspendedEndpoint.element;bC.endpoints[bE]=bC.suspendedEndpoint}if(bB){var bD=bj.getElementObject(br.el),bI=ay[bq]||a5.addEndpoint(bD,bc);if(bc.uniqueEndpoint){ay[bq]=bI}bI._doNotDeleteOnDetach=false;bI._deleteOnDetach=true;if(bI.anchor.positionFinder!=null){var bF=bj.getUIPosition(arguments,a5.getZoom()),bA=z(bD,a5),bG=a(bD),bz=bI.anchor.positionFinder(bF,bA,bG,bI.anchor.constructorParams);bI.anchor.x=bz[0];bI.anchor.y=bz[1]}bC[bE?"target":"source"]=bI.element;bC[bE?"targetId":"sourceId"]=bI.elementId;bC.endpoints[bE].detachFromConnection(bC);if(bC.endpoints[bE]._deleteOnDetach){bC.endpoints[bE].deleteAfterDragStop=true}bI.addConnection(bC);bC.endpoints[bE]=bI;bC.deleteEndpointsOnDetach=bg;if(bE==1){a5.anchorManager.updateOtherEndpoint(bC.sourceId,bC.suspendedElementId,bC.targetId,bC)}else{a5.anchorManager.sourceChanged(bC.suspendedEndpoint.elementId,bC.sourceId,bC)}ba(bC,null,bw)}else{if(bC.suspendedEndpoint){if(bC.isReattach()){bC.setHover(false);bC.floatingAnchorIndex=null;bC.suspendedEndpoint.addConnection(bC);a5.repaint(bv.elementId)}else{bv.detach(bC,false,true,true,bw)}}}};var bs=bj.dragEvents.drop;bo.scope=bo.scope||bk;bo[bs]=g.wrap(bo[bs],bn);bj.initDroppable(m(br.el),bo,true)};be=az(be);var bi=be.length&&be.constructor!=String?be:[be];for(var bh=0,bl=bi.length;bh<bl;bh++){_doOne(bi[bh])}return a5};this.unmakeTarget=function(bb,bd){var bc=ae(bb);p.CurrentLibrary.destroyDroppable(bc.el);if(!bd){delete aN[bc.id];delete a1[bc.id];delete al[bc.id];delete ah[bc.id]}return a5};this.makeSource=function(bf,bg,bl){var bd=p.extend({},bl);p.extend(bd,bg);Z(bd,0);var bj=p.CurrentLibrary,be=bd.maxConnections||-1,bc=bd.onMaxConnections,bb=function(bn){var bo=bn.id,bu=m(bn.el),bw=function(){return bd.parent==null?null:bd.parent==="parent"?bn.el.parentNode:H(bd.parent)},bm=bd.parent!=null?a5.getId(bw()):bo;ap[bm]=bd;aS[bm]=bd.uniqueEndpoint;ab[bm]=true;var bp=bj.dragEvents.stop,bt=bj.dragEvents.drag,bv=p.extend({},bd.dragOptions||{}),br=bv.drag,bx=bv.stop,by=null,bs=false;N[bm]=be;bv.scope=bv.scope||bd.scope;bv[bt]=g.wrap(bv[bt],function(){if(br){br.apply(this,arguments)}bs=false});bv[bp]=g.wrap(bv[bp],function(){if(bx){bx.apply(this,arguments)}a5.currentlyDragging=false;if(by._jsPlumb!=null){bj.unbind(by.canvas,"mousedown");var bA=bd.anchor||a5.Defaults.Anchor,bB=by.anchor,bD=by.connections[0];by.setAnchor(a5.makeAnchor(bA,bo,a5),true);if(bd.parent){var bC=bw();if(bC){var bz=by.elementId,bE=bd.container||a5.Defaults.Container||p.Defaults.Container;by.setElement(bC,bE);by.endpointWillMoveAfterConnection=false;bD.previousConnection=null;jsPlumbUtil.removeWithFunction(S,function(bF){return bF.id===bD.id});a5.anchorManager.connectionDetached({sourceId:bD.sourceId,targetId:bD.targetId,connection:bD});ba(bD)}}by.repaint();a5.repaint(by.elementId);a5.repaint(bD.targetId)}});var bq=function(bD){if(!ab[bm]){return}if(bd.filter){var bK=bj.getOriginalEvent(bD),bz=jsPlumbUtil.isString(bd.filter)?aI(bK,bu,bd.filter):bd.filter(bK,bu);if(bz===false){return}}var bB=a5.select({source:bm}).length;if(N[bm]>=0&&bB>=N[bm]){if(bc){bc({element:bu,maxConnections:be},bD)}return false}var bI=V({elId:bo}).o,bF=a5.getZoom(),bH=(((bD.pageX||bD.page.x)/bF)-bI.left)/bI.width,bG=(((bD.pageY||bD.page.y)/bF)-bI.top)/bI.height,bN=bH,bM=bG;if(bd.parent){var bE=bw(),bC=I(bE);bI=V({elId:bC}).o;bN=((bD.pageX||bD.page.x)-bI.left)/bI.width;bM=((bD.pageY||bD.page.y)-bI.top)/bI.height}var bL={};p.extend(bL,bd);bL.isSource=true;bL.anchor=[bH,bG,0,0];bL.parentAnchor=[bN,bM,0,0];bL.dragOptions=bv;if(bd.parent){var bA=bL.container||a5.Defaults.Container||p.Defaults.Container;if(bA){bL.container=bA}else{bL.container=p.CurrentLibrary.getParent(bw())}}by=a5.addEndpoint(bo,bL);bs=true;by.endpointWillMoveAfterConnection=bd.parent!=null;by.endpointWillMoveTo=bd.parent?bw():null;by._doNotDeleteOnDetach=false;by._deleteOnDetach=true;var bJ=function(){if(bs){bs=false;a5.deleteEndpoint(by)}};a5.registerListener(by.canvas,"mouseup",bJ);a5.registerListener(bu,"mouseup",bJ);bj.trigger(by.canvas,"mousedown",bD)};a5.registerListener(bu,"mousedown",bq);K[bo]=bq;if(bd.filter&&jsPlumbUtil.isString(bd.filter)){bj.setDragFilter(bu,bd.filter)}};bf=az(bf);var bi=bf.length&&bf.constructor!=String?bf:[bf];for(var bh=0,bk=bi.length;bh<bk;bh++){bb(ae(bi[bh]))}return a5};this.unmakeSource=function(bc,be){var bd=ae(bc),bb=K[bd.id];if(bb){a5.unregisterListener(bd.el,"mousedown",bb)}if(!be){delete ap[bd.id];delete aS[bd.id];delete ab[bd.id];delete K[bd.id];delete N[bd.id]}return a5};this.unmakeEverySource=function(){for(var bb in ab){a5.unmakeSource(bb,true)}ap={};aS={};ab={};K={}};this.unmakeEveryTarget=function(){for(var bb in ah){a5.unmakeTarget(bb,true)}aN={};a1={};al={};ah={};return a5};var aC=function(bg,bf,bh,bb){var bc=bg=="source"?ab:ah;bf=az(bf);if(g.isString(bf)){bc[bf]=bb?!bc[bf]:bh}else{if(bf.length){for(var bd=0,be=bf.length;bd<be;bd++){var bi=ae(bf[bd]);bc[bi.id]=bb?!bc[bi.id]:bh}}}return a5};this.toggleSourceEnabled=function(bb){aC("source",bb,null,true);return a5.isSourceEnabled(bb)};this.setSourceEnabled=function(bb,bc){return aC("source",bb,bc)};this.isSource=function(bb){return ab[ae(bb).id]!=null};this.isSourceEnabled=function(bb){return ab[ae(bb).id]===true};this.toggleTargetEnabled=function(bb){aC("target",bb,null,true);return a5.isTargetEnabled(bb)};this.isTarget=function(bb){return ah[ae(bb).id]!=null};this.isTargetEnabled=function(bb){return ah[ae(bb).id]===true};this.setTargetEnabled=function(bb,bc){return aC("target",bb,bc)};this.ready=function(bb){a5.bind("ready",bb)};this.repaint=function(bd,bf,be){if(typeof bd=="object"&&bd.length){for(var bb=0,bc=bd.length;bb<bc;bb++){aU(bd[bb],bf,be)}}else{aU(bd,bf,be)}return a5};this.repaintEverything=function(){var bc=s();for(var bb in aH){aU(bb,null,bc)}return a5};this.removeAllEndpoints=function(bc,bd){var bb=function(bi){var bg=ae(bi),bh=aH[bg.id],be,bf;if(bh){for(be=0,bf=bh.length;be<bf;be++){a5.deleteEndpoint(bh[be])}}delete aH[bg.id];if(bd){if(bg.el&&bg.el.nodeType!=3&&bg.el.nodeType!=8){for(be=0,bf=bg.el.childNodes.length;be<bf;be++){bb(bg.el.childNodes[be])}}}};bb(bc);return a5};this.remove=function(bb,bd){var bc=ae(bb);a5.doWhileSuspended(function(){a5.removeAllEndpoints(bc.id,true);a5.dragManager.elementRemoved(bc.id);delete a0[bc.id];a5.anchorManager.clearFor(bc.id);a5.anchorManager.removeFloatingConnection(bc.id)},bd===false);if(bc.el){p.CurrentLibrary.removeElement(bc.el)}};var af={},aY=function(){for(var bc in af){for(var bb=0,bd=af[bc].length;bb<bd;bb++){var be=af[bc][bb];p.CurrentLibrary.unbind(be.el,be.event,be.listener)}}af={}};this.registerListener=function(bc,bb,bd){p.CurrentLibrary.bind(bc,bb,bd);jsPlumbUtil.addToList(af,bb,{el:bc,event:bb,listener:bd})};this.unregisterListener=function(bc,bb,bd){p.CurrentLibrary.unbind(bc,bb,bd);jsPlumbUtil.removeWithFunction(af,function(be){return be.type==bb&&be.listener==bd})};this.reset=function(){a5.deleteEveryEndpoint();a5.unbind();aN={};ay={};a1={};al={};ap={};aP={};aS={};N={};S.splice(0);aY();a5.anchorManager.reset();if(!jsPlumbAdapter.headless){a5.dragManager.reset()}};this.setDefaultScope=function(bb){R=bb;return a5};this.setDraggable=a3;this.setId=function(bd,be,bi){var bb;if(jsPlumbUtil.isString(bd)){bb=bd}else{bd=H(bd);bb=a5.getId(bd)}var bc=a5.getConnections({source:bb,scope:"*"},true),bg=a5.getConnections({target:bb,scope:"*"},true);be=""+be;if(!bi){bd=H(bb);jsPlumbAdapter.setAttribute(bd,"id",be)}else{bd=H(be)}aH[be]=aH[bb]||[];for(var bh=0,bj=aH[be].length;bh<bj;bh++){aH[be][bh].setElementId(be);aH[be][bh].setReferenceElement(bd)}delete aH[bb];a5.anchorManager.changeId(bb,be);if(!jsPlumbAdapter.headless){a5.dragManager.changeId(bb,be)}var bf=function(bo,bk,bn){for(var bl=0,bm=bo.length;bl<bm;bl++){bo[bl].endpoints[bk].setElementId(be);bo[bl].endpoints[bk].setReferenceElement(bd);bo[bl][bn+"Id"]=be;bo[bl][bn]=bd}};bf(bc,0,"source");bf(bg,1,"target");a5.repaint(be)};this.setDebugLog=function(bb){O=bb};this.setSuspendDrawing=function(bd,bb){var bc=aQ;aQ=bd;if(bd){aT=new Date().getTime()}else{aT=null}if(bb){a5.repaintEverything()}return bc};this.isSuspendDrawing=function(){return aQ};this.getSuspendedAt=function(){return aT};this.doWhileSuspended=function(bc,bb){var be=a5.isSuspendDrawing();if(!be){a5.setSuspendDrawing(true)}try{bc()}catch(bd){g.log("Function run while suspended failed",bd)}if(!be){a5.setSuspendDrawing(false,!bb)}};this.updateOffset=V;this.getOffset=function(bb){return ag[bb]};this.getSize=function(bb){return ad[bb]};this.getCachedData=aD;this.timestamp=s;this.setRenderMode=function(be){W=jsPlumbAdapter.setRenderMode(be);var bb,bd;if(W==p.CANVAS){var bc=function(bf){p.CurrentLibrary.bind(document,bf,function(bj){if(!a5.currentlyDragging&&W==p.CANVAS){for(bb=0,bd=S.length;bb<bd;bb++){var bh=S[bb].getConnector()[bf](bj);if(bh){return}}for(var bi in aH){var bg=aH[bi];for(bb=0,bd=bg.length;bb<bd;bb++){if(bg[bb].endpoint[bf]&&bg[bb].endpoint[bf](bj)){return}}}}})};bc("click");bc("dblclick");bc("mousemove");bc("mousedown");bc("mouseup");bc("contextmenu")}return W};this.getRenderMode=function(){return W};this.show=function(bb,bc){aO(bb,"block",bc);return a5};this.getTestHarness=function(){return{endpointsByElement:aH,endpointCount:function(bb){var bc=aH[bb];return bc?bc.length:0},connectionCount:function(bb){bb=bb||R;var bc=a5.getConnections({scope:bb});return bc?bc.length:0},getId:I,makeAnchor:self.makeAnchor,makeDynamicAnchor:self.makeDynamicAnchor}};this.toggleVisible=aF;this.toggleDraggable=a2;this.addListener=this.bind;this.adjustForParentOffsetAndScroll=function(bg,bd){var be=null,bb=bg;if(bd.tagName.toLowerCase()==="svg"&&bd.parentNode){be=bd.parentNode}else{if(bd.offsetParent){be=bd.offsetParent}}if(be!=null){var bc=be.tagName.toLowerCase()==="body"?{left:0,top:0}:z(be,a5),bf=be.tagName.toLowerCase()==="body"?{left:0,top:0}:{left:be.scrollLeft,top:be.scrollTop};bb[0]=bg[0]-bc.left+bf.left;bb[1]=bg[1]-bc.top+bf.top}return bb};if(!jsPlumbAdapter.headless){a5.dragManager=jsPlumbAdapter.getDragManager(a5);a5.recalculateOffsets=a5.dragManager.updateOffsets}};jsPlumbUtil.extend(A,jsPlumbUtil.EventGenerator,{setAttribute:function(K,I,J){jsPlumbAdapter.setAttribute(K,I,J)},getAttribute:function(J,I){return jsPlumbAdapter.getAttribute(p.CurrentLibrary.getDOMElement(J),I)},registerConnectionType:function(J,I){this._connectionTypes[J]=p.extend({},I)},registerConnectionTypes:function(J){for(var I in J){this._connectionTypes[I]=p.extend({},J[I])}},registerEndpointType:function(J,I){this._endpointTypes[J]=p.extend({},I)},registerEndpointTypes:function(J){for(var I in J){this._endpointTypes[I]=p.extend({},J[I])}},getType:function(J,I){return I==="connection"?this._connectionTypes[J]:this._endpointTypes[J]},setIdChanged:function(J,I){this.setId(J,I,true)}});var p=new A();if(typeof window!="undefined"){window.jsPlumb=p}p.getInstance=function(J){var I=new A(J);I.init();return I};if(typeof define==="function"){define("jsplumb",[],function(){return p});define("jsplumbinstance",[],function(){return p.getInstance()})}if(typeof exports!=="undefined"){exports.jsPlumb=p}})();(function(){var f=function(n,h){var m=false;return{drag:function(){if(m){m=false;return true}var o=jsPlumb.CurrentLibrary.getUIPosition(arguments,h.getZoom());if(n.element){jsPlumb.CurrentLibrary.setOffset(n.element,o);h.repaint(n.element,o)}},stopDrag:function(){m=true}}};var b=function(p,m,h){var s=document.createElement("div");s.style.position="absolute";var o=jsPlumb.CurrentLibrary.getElementObject(s);jsPlumb.CurrentLibrary.appendElement(s,m);var q=h.getId(s);h.updateOffset({elId:q});p.id=q;p.element=s};var g=function(s,q,t,p,n,m,h){var o=new jsPlumb.FloatingAnchor({reference:q,referenceCanvas:p,jsPlumbInstance:m});return h({paintStyle:s,endpoint:t,anchor:o,source:n,scope:"__floating"})};var d=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];var a=function(n,m){var h=0;if(m!=null){for(var o=0;o<n.connections.length;o++){if(n.connections[o].sourceId==m||n.connections[o].targetId==m){h=o;break}}}return n.connections[h]};var e=function(m,h){return jsPlumbUtil.findWithFunction(h.connections,function(n){return n.id==m.id})};jsPlumb.Endpoint=function(N){var O=N._jsPlumb,p=jsPlumb.CurrentLibrary,M=jsPlumbAdapter.getAttribute,s=p.getElementObject,P=p.getDOMElement,o=jsPlumbUtil,H=N.newConnection,K=N.newEndpoint,n=N.finaliseConnection,A=N.fireDetachEvent,B=N.floatingConnections;this.idPrefix="_jsplumb_e_";this.defaultLabelLocation=[0.5,0.5];this.defaultOverlayKeys=["Overlays","EndpointOverlays"];this.parent=N.parent;OverlayCapableJsPlumbUIComponent.apply(this,arguments);this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:N.connectorStyle,connectorHoverStyle:N.connectorHoverStyle,connectorClass:N.connectorClass,connectorHoverClass:N.connectorHoverClass,connectorOverlays:N.connectorOverlays,connector:N.connector,connectorTooltip:N.connectorTooltip}};this._jsPlumb.enabled=!(N.enabled===false);this._jsPlumb.visible=true;this.element=P(N.source);this._jsPlumb.uuid=N.uuid;this._jsPlumb.floatingEndpoint=null;var t=null;if(this._jsPlumb.uuid){N.endpointsByUUID[this._jsPlumb.uuid]=this}this.elementId=N.elementId;this._jsPlumb.connectionCost=N.connectionCost;this._jsPlumb.connectionsDirected=N.connectionsDirected;this._jsPlumb.currentAnchorClass="";this._jsPlumb.events={};var w=function(){p.removeClass(this.element,O.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this.removeClass(O.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();this.addClass(O.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);p.addClass(this.element,O.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass)}.bind(this);this.setAnchor=function(R,S){this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId);this.anchor=this._jsPlumb.instance.makeAnchor(R,this.elementId,O);w();this.anchor.bind("anchorChanged",function(T){this.fire("anchorChanged",{endpoint:this,anchor:T});w()}.bind(this));if(!S){this._jsPlumb.instance.repaint(this.elementId)}return this};var D=N.anchor?N.anchor:N.anchors?N.anchors:(O.Defaults.Anchor||"Top");this.setAnchor(D,true);var Q=function(R){if(this.connections.length>0){this.connections[0].setHover(R,false)}else{this.setHover(R)}}.bind(this);if(!N._transient){this._jsPlumb.instance.anchorManager.add(this,this.elementId)}this.setEndpoint=function(S){if(this.endpoint!=null){this.endpoint.cleanup();this.endpoint.destroy()}var R=function(V,Z){var W=O.getRenderMode();if(jsPlumb.Endpoints[W][V]){return new jsPlumb.Endpoints[W][V](Z)}if(!O.Defaults.DoNotThrowErrors){throw {msg:"jsPlumb: unknown endpoint type '"+V+"'"}}};var T={_jsPlumb:this._jsPlumb.instance,cssClass:N.cssClass,parent:N.parent,container:N.container,tooltip:N.tooltip,connectorTooltip:N.connectorTooltip,endpoint:this};if(o.isString(S)){this.endpoint=R(S,T)}else{if(o.isArray(S)){T=o.merge(S[1],T);this.endpoint=R(S[0],T)}else{this.endpoint=S.clone()}}var U=jsPlumb.extend({},T);this.endpoint.clone=function(){if(o.isString(S)){return R(S,T)}else{if(o.isArray(S)){T=o.merge(S[1],T);return R(S[0],T)}}}.bind(this);this.type=this.endpoint.type;this.bindListeners(this.endpoint,this,Q)};this.setEndpoint(N.endpoint||O.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot");this.setPaintStyle(N.paintStyle||N.style||O.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,true);this.setHoverPaintStyle(N.hoverPaintStyle||O.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,true);this._jsPlumb.paintStyleInUse=this.getPaintStyle();o.copyValues(d,N,this);this.isSource=N.isSource||false;this.isTarget=N.isTarget||false;this._jsPlumb.maxConnections=N.maxConnections||O.Defaults.MaxConnections;this.canvas=this.endpoint.canvas;this.addClass(O.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);p.addClass(this.element,O.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this.connections=N.connections||[];this.connectorPointerEvents=N["connector-pointer-events"];this.scope=N.scope||O.getDefaultScope();this.timestamp=null;this.reattachConnections=N.reattach||O.Defaults.ReattachConnections;this.connectionsDetachable=O.Defaults.ConnectionsDetachable;if(N.connectionsDetachable===false||N.detachable===false){this.connectionsDetachable=false}this.dragAllowedWhenFull=N.dragAllowedWhenFull||true;if(N.onMaxConnections){this.bind("maxConnections",N.onMaxConnections)}this.addConnection=function(R){this.connections.push(R);this[(this.connections.length>0?"add":"remove")+"Class"](O.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](O.endpointFullClass)};this.detachFromConnection=function(S,R){R=R==null?e(S,this):R;if(R>=0){this.connections.splice(R,1);this[(this.connections.length>0?"add":"remove")+"Class"](O.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](O.endpointFullClass)}};this.detach=function(T,W,U,ab,R,S,V){var aa=V==null?e(T,this):V,Z=false;ab=(ab!==false);if(aa>=0){if(U||T._forceDetach||(T.isDetachable()&&T.isDetachAllowed(T)&&this.isDetachAllowed(T))){O.deleteObject({connection:T,fireEvent:(!W&&ab),originalEvent:R});Z=true}}return Z};this.detachAll=function(S,R){while(this.connections.length>0){this.detach(this.connections[0],false,true,S!==false,R,this,0)}return this};this.detachFrom=function(V,U,R){var W=[];for(var T=0;T<this.connections.length;T++){if(this.connections[T].endpoints[1]==V||this.connections[T].endpoints[0]==V){W.push(this.connections[T])}}for(var S=0;S<W.length;S++){this.detach(W[S],false,true,U,R)}return this};this.getElement=function(){return this.element};this.setElement=function(R){var T=this._jsPlumb.instance.getId(R),S=this.elementId;o.removeWithFunction(N.endpointsByElement[this.elementId],function(U){return U.id==this.id}.bind(this));this.element=P(R);this.elementId=O.getId(this.element);O.anchorManager.rehomeEndpoint(this,S,this.element);O.dragManager.endpointAdded(this.element);o.addToList(N.endpointsByElement,T,this);return this};this.makeInPlaceCopy=function(){var U=this.anchor.getCurrentLocation({element:this}),T=this.anchor.getOrientation(this),S=this.anchor.getCssClass(),R={bind:function(){},compute:function(){return[U[0],U[1]]},getCurrentLocation:function(){return[U[0],U[1]]},getOrientation:function(){return T},getCssClass:function(){return S}};return K({anchor:R,source:this.element,paintStyle:this.getPaintStyle(),endpoint:N.hideOnDrag?"Blank":this.endpoint,_transient:true,scope:this.scope})};this.isFloating=function(){return this.anchor!=null&&this.anchor.isFloating};this.connectorSelector=function(){var R=this.connections[0];if(this.isTarget&&R){return R}else{return(this.connections.length<this._jsPlumb.maxConnections)||this._jsPlumb.maxConnections==-1?null:R}};this.setStyle=this.setPaintStyle;this.paint=function(V){V=V||{};var ad=V.timestamp,ac=!(V.recalc===false);if(!ad||this.timestamp!==ad){var U=O.updateOffset({elId:this.elementId,timestamp:ad});var aj=V.offset?V.offset.o:U.o;if(aj!=null){var aa=V.anchorPoint,W=V.connectorPaintStyle;if(aa==null){var R=V.dimensions||U.s,T={xy:[aj.left,aj.top],wh:R,element:this,timestamp:ad};if(ac&&this.anchor.isDynamic&&this.connections.length>0){var af=a(this,V.elementWithPrecedence),ai=af.endpoints[0]==this?1:0,Z=ai===0?af.sourceId:af.targetId,ah=O.getCachedData(Z),ae=ah.o,ag=ah.s;T.txy=[ae.left,ae.top];T.twh=ag;T.tElement=af.endpoints[ai]}aa=this.anchor.compute(T)}this.endpoint.compute(aa,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,W||this.paintStyleInUse);this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor);this.timestamp=ad;for(var ab=0;ab<this._jsPlumb.overlays.length;ab++){var S=this._jsPlumb.overlays[ab];if(S.isVisible()){this._jsPlumb.overlayPlacements[ab]=S.draw(this.endpoint,this._jsPlumb.paintStyleInUse);S.paint(this._jsPlumb.overlayPlacements[ab])}}}}};this.repaint=this.paint;if(p.isDragSupported(this.element)&&(this.isSource||this.isTarget)){var G={id:null,element:null},F=null,m=false,q=null,h=f(G,O);var u=function(){F=this.connectorSelector();var V=true;if(!this.isEnabled()){V=false}if(F==null&&!this.isSource){V=false}if(this.isSource&&this.isFull()&&!this.dragAllowedWhenFull){V=false}if(F!=null&&!F.isDetachable()){V=false}if(V===false){if(p.stopDrag){p.stopDrag()}h.stopDrag();return false}for(var U=0;U<this.connections.length;U++){this.connections[U].setHover(false)}this.addClass("endpointDrag");O.setConnectionBeingDragged(true);if(F&&!this.isFull()&&this.isSource){F=null}O.updateOffset({elId:this.elementId});t=this.makeInPlaceCopy();t.referenceEndpoint=this;t.paint();b(G,this.parent,O);var ab=s(t.canvas),Z=jsPlumb.CurrentLibrary.getOffset(ab,O),T=O.adjustForParentOffsetAndScroll([Z.left,Z.top],t.canvas),aa=s(this.canvas);p.setOffset(G.element,{left:T[0],top:T[1]});if(this.parentAnchor){this.anchor=O.makeAnchor(this.parentAnchor,this.elementId,O)}O.setAttribute(this.canvas,"dragId",G.id);O.setAttribute(this.canvas,"elId",this.elementId);this._jsPlumb.floatingEndpoint=g(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,G.element,O,K);this.canvas.style.visibility="hidden";if(F==null){this.anchor.locked=true;this.setHover(false,false);F=H({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:G.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:N.connectorStyle,hoverPaintStyle:N.connectorHoverStyle,connector:N.connector,overlays:N.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass});F.addClass(O.draggingClass);this._jsPlumb.floatingEndpoint.addClass(O.draggingClass);O.fire("connectionDrag",F)}else{m=true;F.setHover(false);v(ab,false,true);var S=F.endpoints[0].id==this.id?0:1;F.floatingAnchorIndex=S;this.detachFromConnection(F);var W=jsPlumb.CurrentLibrary.getDragScope(aa);O.setAttribute(this.canvas,"originalScope",W);var R=p.getDropScope(aa);p.setDragScope(aa,R);O.fire("connectionDrag",F);if(S===0){q=[F.source,F.sourceId,aa,W];F.source=G.element;F.sourceId=G.id}else{q=[F.target,F.targetId,aa,W];F.target=G.element;F.targetId=G.id}F.endpoints[S===0?1:0].anchor.locked=true;F.suspendedEndpoint=F.endpoints[S];F.suspendedElement=F.endpoints[S].getElement();F.suspendedElementId=F.endpoints[S].elementId;F.suspendedElementType=S===0?"source":"target";F.suspendedEndpoint.setHover(false);this._jsPlumb.floatingEndpoint.referenceEndpoint=F.suspendedEndpoint;F.endpoints[S]=this._jsPlumb.floatingEndpoint;F.addClass(O.draggingClass);this._jsPlumb.floatingEndpoint.addClass(O.draggingClass)}B[G.id]=F;O.anchorManager.addFloatingConnection(G.id,F);o.addToList(N.endpointsByElement,G.id,this._jsPlumb.floatingEndpoint);O.currentlyDragging=true}.bind(this);var I=N.dragOptions||{},C=jsPlumb.extend({},p.defaultDragOptions),E=p.dragEvents.start,L=p.dragEvents.stop,z=p.dragEvents.drag;I=jsPlumb.extend(C,I);I.scope=I.scope||this.scope;I[E]=o.wrap(I[E],u,false);I[z]=o.wrap(I[z],h.drag);I[L]=o.wrap(I[L],function(){O.setConnectionBeingDragged(false);var S=p.getDropEvent(arguments);var R=F.floatingAnchorIndex==null?1:F.floatingAnchorIndex;F.endpoints[R===0?1:0].anchor.locked=false;F.removeClass(O.draggingClass);if(F.endpoints[R]==this._jsPlumb.floatingEndpoint){if(m&&F.suspendedEndpoint){if(R===0){F.source=q[0];F.sourceId=q[1]}else{F.target=q[0];F.targetId=q[1]}p.setDragScope(q[2],q[3]);F.endpoints[R]=F.suspendedEndpoint;if(F.isReattach()||F._forceReattach||F._forceDetach||!F.endpoints[R===0?1:0].detach(F,false,false,true,S)){F.setHover(false);F.floatingAnchorIndex=null;F._forceDetach=null;F._forceReattach=null;this._jsPlumb.floatingEndpoint.detachFromConnection(F);F.suspendedEndpoint.addConnection(F);O.repaint(q[1])}}}O.remove(G.element,false);O.remove(t.canvas,false);if(this.deleteAfterDragStop){O.deleteObject({endpoint:this})}else{if(this._jsPlumb){this._jsPlumb.floatingEndpoint=null;this.canvas.style.visibility="visible";this.anchor.locked=false;this.paint({recalc:false})}}O.fire("connectionDragStop",F);O.currentlyDragging=false;F=null}.bind(this));var J=s(this.canvas);p.initDraggable(J,I,true,O)}var v=function(T,aa,W,ab){if((this.isTarget||aa)&&p.isDropSupported(this.element)){var U=N.dropOptions||O.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;U=jsPlumb.extend({},U);U.scope=U.scope||this.scope;var S=p.dragEvents.drop,Z=p.dragEvents.over,R=p.dragEvents.out,V=function(){this.removeClass(O.endpointDropAllowedClass);this.removeClass(O.endpointDropForbiddenClass);var ac=p.getDropEvent(arguments),ap=s(p.getDragObject(arguments)),ae=O.getAttribute(ap,"dragId"),ag=O.getAttribute(ap,"elId"),ao=O.getAttribute(ap,"originalScope"),aj=B[ae];var ah=aj.suspendedEndpoint&&(aj.suspendedEndpoint.id==this.id||this.referenceEndpoint&&aj.suspendedEndpoint.id==this.referenceEndpoint.id);if(ah){aj._forceReattach=true;return}if(aj!=null){var al=aj.floatingAnchorIndex==null?1:aj.floatingAnchorIndex,am=al===0?1:0;if(ao){jsPlumb.CurrentLibrary.setDragScope(ap,ao)}var an=ab!=null?ab.isEnabled():true;if(this.isFull()){this.fire("maxConnections",{endpoint:this,connection:aj,maxConnections:this._jsPlumb.maxConnections},ac)}if(!this.isFull()&&!(al===0&&!this.isSource)&&!(al==1&&!this.isTarget)&&an){var ai=true;if(aj.suspendedEndpoint&&aj.suspendedEndpoint.id!=this.id){if(al===0){aj.source=aj.suspendedEndpoint.element;aj.sourceId=aj.suspendedEndpoint.elementId}else{aj.target=aj.suspendedEndpoint.element;aj.targetId=aj.suspendedEndpoint.elementId}if(!aj.isDetachAllowed(aj)||!aj.endpoints[al].isDetachAllowed(aj)||!aj.suspendedEndpoint.isDetachAllowed(aj)||!O.checkCondition("beforeDetach",aj)){ai=false}}if(al===0){aj.source=this.element;aj.sourceId=this.elementId}else{aj.target=this.element;aj.targetId=this.elementId}var ak=function(){aj.floatingAnchorIndex=null};var ad=function(){aj.endpoints[al].detachFromConnection(aj);if(aj.suspendedEndpoint){aj.suspendedEndpoint.detachFromConnection(aj)}aj.endpoints[al]=this;this.addConnection(aj);var au=this.getParameters();for(var ar in au){aj.setParameter(ar,au[ar])}if(!aj.suspendedEndpoint){if(au.draggable){jsPlumb.CurrentLibrary.initDraggable(this.element,I,true,O)}}else{var at=aj.suspendedEndpoint.getElement(),aq=aj.suspendedEndpoint.elementId;A({source:al===0?at:aj.source,target:al==1?at:aj.target,sourceId:al===0?aq:aj.sourceId,targetId:al==1?aq:aj.targetId,sourceEndpoint:al===0?aj.suspendedEndpoint:aj.endpoints[0],targetEndpoint:al==1?aj.suspendedEndpoint:aj.endpoints[1],connection:aj},true,ac)}if(al==1){O.anchorManager.updateOtherEndpoint(aj.sourceId,aj.suspendedElementId,aj.targetId,aj)}else{O.anchorManager.sourceChanged(aj.suspendedEndpoint.elementId,aj.sourceId,aj)}n(aj,null,ac,true);ak()}.bind(this);var af=function(){if(aj.suspendedEndpoint){aj.endpoints[al]=aj.suspendedEndpoint;aj.setHover(false);aj._forceDetach=true;if(al===0){aj.source=aj.suspendedEndpoint.element;aj.sourceId=aj.suspendedEndpoint.elementId}else{aj.target=aj.suspendedEndpoint.element;aj.targetId=aj.suspendedEndpoint.elementId}aj.suspendedEndpoint.addConnection(aj);aj.endpoints[0].repaint();aj.repaint();O.repaint(aj.sourceId);aj._forceDetach=false}ak()};ai=ai&&this.isDropAllowed(aj.sourceId,aj.targetId,aj.scope,aj,this);if(ai){ad()}else{af()}}O.currentlyDragging=false}}.bind(this);U[S]=o.wrap(U[S],V);U[Z]=o.wrap(U[Z],function(){var ad=p.getDragObject(arguments),ah=O.getAttribute(ad,"dragId"),ag=B[ah];if(ag!=null){var ac=ag.floatingAnchorIndex==null?1:ag.floatingAnchorIndex;var af=(this.isTarget&&ag.floatingAnchorIndex!==0)||(ag.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==ag.suspendedEndpoint.id);if(af){var ae=O.checkCondition("checkDropAllowed",{sourceEndpoint:ag.endpoints[ac],targetEndpoint:this,connection:ag});this[(ae?"add":"remove")+"Class"](O.endpointDropAllowedClass);this[(ae?"remove":"add")+"Class"](O.endpointDropForbiddenClass);ag.endpoints[ac].anchor.over(this.anchor,this)}}}.bind(this));U[R]=o.wrap(U[R],function(){var ad=p.getDragObject(arguments),ag=O.getAttribute(ad,"dragId"),af=B[ag];if(af!=null){var ac=af.floatingAnchorIndex==null?1:af.floatingAnchorIndex;var ae=(this.isTarget&&af.floatingAnchorIndex!==0)||(af.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==af.suspendedEndpoint.id);if(ae){this.removeClass(O.endpointDropAllowedClass);this.removeClass(O.endpointDropForbiddenClass);af.endpoints[ac].anchor.out()}}}.bind(this));p.initDroppable(T,U,true,W)}}.bind(this);v(s(this.canvas),true,!(N._transient||this.anchor.isFloating),this);if(N.type){this.addType(N.type,N.data,O.isSuspendDrawing())}return this};jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(m,p,h){this._jsPlumb.visible=m;if(this.canvas){this.canvas.style.display=m?"block":"none"}this[m?"showOverlays":"hideOverlays"]();if(!p){for(var o=0;o<this.connections.length;o++){this.connections[o].setVisible(m);if(!h){var n=this===this.connections[o].endpoints[0]?1:0;if(this.connections[o].endpoints[n].connections.length==1){this.connections[o].endpoints[n].setVisible(m,true,true)}}}}},getAttachedElements:function(){return this.connections},applyType:function(h,m){if(h.maxConnections!=null){this._jsPlumb.maxConnections=h.maxConnections}if(h.scope){this.scope=h.scope}jsPlumbUtil.copyValues(d,h,this)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(h){this._jsPlumb.enabled=h},cleanup:function(){jsPlumb.CurrentLibrary.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this.anchor=null;this.endpoint.cleanup();this.endpoint.destroy();this.endpoint=null;var h=jsPlumb.CurrentLibrary.getElementObject(this.canvas);jsPlumb.CurrentLibrary.destroyDraggable(h);jsPlumb.CurrentLibrary.destroyDroppable(h)},setHover:function(m){if(this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){this.endpoint.setHover(m)}},isFull:function(){return !(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(h){this._jsPlumb.connectionCost=h},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(h){this._jsPlumb.connectionsDirected=h},setElementId:function(h){this.elementId=h;this.anchor.elementId=h},setReferenceElement:function(h){this.element=jsPlumb.CurrentLibrary.getDOMElement(h)},setDragAllowedWhenFull:function(h){this.dragAllowedWhenFull=h},equals:function(h){return this.anchor.equals(h.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(h){return this.anchor.compute(h)}})})();(function(){var d=function(e,f,h,g){if(!e.Defaults.DoNotThrowErrors&&jsPlumb.Connectors[f][h]==null){throw {msg:"jsPlumb: unknown connector type '"+h+"'"}}return new jsPlumb.Connectors[f][h](g)},a=function(g,f,e){return(g)?e.makeAnchor(g,f,e):null},b=function(A,g,h,f,s,n,o,p,m,q){var t;if(f){h.endpoints[s]=f;f.addConnection(h)}else{if(!n.endpoints){n.endpoints=[null,null]}var C=n.endpoints[s]||n.endpoint||A.Defaults.Endpoints[s]||jsPlumb.Defaults.Endpoints[s]||A.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;if(!n.endpointStyles){n.endpointStyles=[null,null]}if(!n.endpointHoverStyles){n.endpointHoverStyles=[null,null]}var z=n.endpointStyles[s]||n.endpointStyle||A.Defaults.EndpointStyles[s]||jsPlumb.Defaults.EndpointStyles[s]||A.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;if(z.fillStyle==null&&m!=null){z.fillStyle=m.strokeStyle}if(z.outlineColor==null&&m!=null){z.outlineColor=m.outlineColor}if(z.outlineWidth==null&&m!=null){z.outlineWidth=m.outlineWidth}var w=n.endpointHoverStyles[s]||n.endpointHoverStyle||A.Defaults.EndpointHoverStyles[s]||jsPlumb.Defaults.EndpointHoverStyles[s]||A.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;if(q!=null){if(w==null){w={}}if(w.fillStyle==null){w.fillStyle=q.strokeStyle}}var v=n.anchors?n.anchors[s]:n.anchor?n.anchor:a(A.Defaults.Anchors[s],p,A)||a(jsPlumb.Defaults.Anchors[s],p,A)||a(A.Defaults.Anchor,p,A)||a(jsPlumb.Defaults.Anchor,p,A),B=n.uuids?n.uuids[s]:null;t=g({paintStyle:z,hoverPaintStyle:w,endpoint:C,connections:[h],uuid:B,anchor:v,source:o,scope:n.scope,container:n.container,reattach:n.reattach||A.Defaults.ReattachConnections,detachable:n.detachable||A.Defaults.ConnectionsDetachable});h.endpoints[s]=t;if(n.drawEndpoints===false){t.setVisible(false,true,true)}}return t};jsPlumb.Connection=function(E){var z=E.newConnection,A=E.newEndpoint,h=jsPlumb.CurrentLibrary,C=h.getAttribute,n=h.getElementObject,G=h.getDOMElement,g=jsPlumbUtil,t=h.getOffset;this.connector=null;this.idPrefix="_jsplumb_c_";this.defaultLabelLocation=0.5;this.defaultOverlayKeys=["Overlays","ConnectionOverlays"];this.parent=E.parent;this.previousConnection=E.previousConnection;this.source=G(E.source);this.target=G(E.target);if(E.sourceEndpoint){this.source=E.sourceEndpoint.endpointWillMoveTo||E.sourceEndpoint.getElement()}if(E.targetEndpoint){this.target=E.targetEndpoint.getElement()}OverlayCapableJsPlumbUIComponent.apply(this,arguments);this.sourceId=this._jsPlumb.instance.getId(this.source);this.targetId=this._jsPlumb.instance.getId(this.target);this.scope=E.scope;this.endpoints=[];this.endpointStyles=[];var F=this._jsPlumb.instance;this._jsPlumb.visible=true;this._jsPlumb.editable=E.editable===true;this._jsPlumb.params={parent:E.parent,cssClass:E.cssClass,container:E.container,"pointer-events":E["pointer-events"],editorParams:E.editorParams};this._jsPlumb.lastPaintedAt=null;this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}};var v=b(F,A,this,E.sourceEndpoint,0,E,this.source,this.sourceId,E.paintStyle,E.hoverPaintStyle);if(v){g.addToList(E.endpointsByElement,this.sourceId,v)}var u=b(F,A,this,E.targetEndpoint,1,E,this.target,this.targetId,E.paintStyle,E.hoverPaintStyle);if(u){g.addToList(E.endpointsByElement,this.targetId,u)}if(!this.scope){this.scope=this.endpoints[0].scope}if(E.deleteEndpointsOnDetach!=null){this.endpoints[0]._deleteOnDetach=E.deleteEndpointsOnDetach;this.endpoints[1]._deleteOnDetach=E.deleteEndpointsOnDetach}else{if(!this.endpoints[0]._doNotDeleteOnDetach){this.endpoints[0]._deleteOnDetach=true}if(!this.endpoints[1]._doNotDeleteOnDetach){this.endpoints[1]._deleteOnDetach=true}}this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||E.connector||F.Defaults.Connector||jsPlumb.Defaults.Connector,true);if(E.path){this.connector.setPath(E.path)}this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||E.paintStyle||F.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,true);this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||E.hoverPaintStyle||F.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,true);this._jsPlumb.paintStyleInUse=this.getPaintStyle();var m=F.getSuspendedAt();F.updateOffset({elId:this.sourceId,timestamp:m});F.updateOffset({elId:this.targetId,timestamp:m});if(!F.isSuspendDrawing()){var f=F.getCachedData(this.sourceId),p=f.o,o=f.s,D=F.getCachedData(this.targetId),e=D.o,q=D.s,s=m||F.timestamp(),w=this.endpoints[0].anchor.compute({xy:[p.left,p.top],wh:o,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[e.left,e.top],twh:q,tElement:this.endpoints[1],timestamp:s});this.endpoints[0].paint({anchorLoc:w,timestamp:s});w=this.endpoints[1].anchor.compute({xy:[e.left,e.top],wh:q,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[p.left,p.top],twh:o,tElement:this.endpoints[0],timestamp:s});this.endpoints[1].paint({anchorLoc:w,timestamp:s})}this._jsPlumb.detachable=F.Defaults.ConnectionsDetachable;if(E.detachable===false){this._jsPlumb.detachable=false}if(this.endpoints[0].connectionsDetachable===false){this._jsPlumb.detachable=false}if(this.endpoints[1].connectionsDetachable===false){this._jsPlumb.detachable=false}this._jsPlumb.reattach=E.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||F.Defaults.ReattachConnections;this._jsPlumb.cost=E.cost||this.endpoints[0].getConnectionCost();this._jsPlumb.directed=E.directed;if(E.directed==null){this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected()}var H=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(H,this.endpoints[0].getParameters());jsPlumb.extend(H,this.getParameters());this.setParameters(H);var B=E.type||this.endpoints[0].connectionType||this.endpoints[1].connectionType;if(B){this.addType(B,E.data,true)}};jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(e,f){if(e.detachable!=null){this.setDetachable(e.detachable)}if(e.reattach!=null){this.setReattach(e.reattach)}if(e.scope){this.scope=e.scope}this.setConnector(e.connector,f)},getTypeDescriptor:function(){return"connection"},getAttachedElements:function(){return this.endpoints},addClass:function(f,e){if(e){this.endpoints[0].addClass(f);this.endpoints[1].addClass(f);if(this.suspendedEndpoint){this.suspendedEndpoint.addClass(f)}}if(this.connector){this.connector.addClass(f)}},removeClass:function(f,e){if(e){this.endpoints[0].removeClass(f);this.endpoints[1].removeClass(f);if(this.suspendedEndpoint){this.suspendedEndpoint.removeClass(f)}}if(this.connector){this.connector.removeClass(f)}},isVisible:function(){return this._jsPlumb.visible},setVisible:function(e){this._jsPlumb.visible=e;this[e?"showOverlays":"hideOverlays"]();if(this.connector&&this.connector.canvas){this.connector.canvas.style.display=e?"block":"none"}this.repaint()},setEditable:function(f){if(this.connector&&this.connector.isEditable()){this._jsPlumb.editable=f}return this._jsPlumb.editable},isEditable:function(){return this._jsPlumb.editable},editStarted:function(){this.setSuspendEvents(true);this.fire("editStarted",{path:this.connector.getPath()});this._jsPlumb.instance.setHoverSuspended(true)},editCompleted:function(){this.fire("editCompleted",{path:this.connector.getPath()});this.setSuspendEvents(false);this.setHover(false);this._jsPlumb.instance.setHoverSuspended(false)},editCanceled:function(){this.fire("editCanceled",{path:this.connector.getPath()});this.setHover(false);this._jsPlumb.instance.setHoverSuspended(false)},cleanup:function(){this.endpoints=null;this.source=null;this.target=null;if(this.connector!=null){this.connector.cleanup();this.connector.destroy()}this.connector=null},isDetachable:function(){return this._jsPlumb.detachable===true},setDetachable:function(e){this._jsPlumb.detachable=e===true},isReattach:function(){return this._jsPlumb.reattach===true},setReattach:function(e){this._jsPlumb.reattach=e===true},setHover:function(e){if(this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){this.connector.setHover(e);jsPlumb.CurrentLibrary[e?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass);jsPlumb.CurrentLibrary[e?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass)}},getCost:function(){return this._jsPlumb.cost},setCost:function(e){this._jsPlumb.cost=e},isDirected:function(){return this._jsPlumb.directed===true},moveParent:function(h){var g=jsPlumb.CurrentLibrary,f=g.getParent(this.connector.canvas);if(this.connector.bgCanvas){g.removeElement(this.connector.bgCanvas);g.appendElement(this.connector.bgCanvas,h)}g.removeElement(this.connector.canvas);g.appendElement(this.connector.canvas,h);for(var e=0;e<this._jsPlumb.overlays.length;e++){if(this._jsPlumb.overlays[e].isAppendedAtTopLevel){g.removeElement(this._jsPlumb.overlays[e].canvas);g.appendElement(this._jsPlumb.overlays[e].canvas,h);if(this._jsPlumb.overlays[e].reattachListeners){this._jsPlumb.overlays[e].reattachListeners(this.connector)}}}if(this.connector.reattachListeners){this.connector.reattachListeners()}},getConnector:function(){return this.connector},setConnector:function(h,f){var e=jsPlumbUtil;if(this.connector!=null){this.connector.cleanup();this.connector.destroy()}var m={_jsPlumb:this._jsPlumb.instance,parent:this._jsPlumb.params.parent,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},g=this._jsPlumb.instance.getRenderMode();if(e.isString(h)){this.connector=d(this._jsPlumb.instance,g,h,m)}else{if(e.isArray(h)){if(h.length==1){this.connector=d(this._jsPlumb.instance,g,h[0],m)}else{this.connector=d(this._jsPlumb.instance,g,h[0],e.merge(h[1],m))}}}this.bindListeners(this.connector,this,function(n){this.setHover(n,false)}.bind(this));this.canvas=this.connector.canvas;if(this._jsPlumb.editable&&jsPlumb.ConnectorEditors!=null&&jsPlumb.ConnectorEditors[this.connector.type]&&this.connector.isEditable()){new jsPlumb.ConnectorEditors[this.connector.type]({connector:this.connector,connection:this,params:this._jsPlumb.params.editorParams||{}})}else{editable=false}if(!f){this.repaint()}},paint:function(H){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){H=H||{};var u=H.elId,v=H.ui,q=H.recalc,g=H.timestamp,w=false,G=w?this.sourceId:this.targetId,n=w?this.targetId:this.sourceId,h=w?0:1,J=w?1:0;if(g==null||g!=this._jsPlumb.lastPaintedAt){var K=this._jsPlumb.instance.updateOffset({elId:n,offset:v,recalc:q,timestamp:g}).o,s=this._jsPlumb.instance.updateOffset({elId:G,timestamp:g}).o,B=this.endpoints[J],f=this.endpoints[h];if(H.clearEdits){B.anchor.clearUserDefinedLocation();f.anchor.clearUserDefinedLocation();this.connector.setEdited(false)}if(!K||!s){return}var m=B.anchor.getCurrentLocation({xy:[K.left,K.top],wh:[K.width,K.height],element:B,timestamp:g}),F=f.anchor.getCurrentLocation({xy:[s.left,s.top],wh:[s.width,s.height],element:f,timestamp:g});this.connector.resetBounds();this.connector.compute({sourcePos:m,targetPos:F,sourceEndpoint:this.endpoints[J],targetEndpoint:this.endpoints[h],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:K,targetInfo:s,clearEdits:H.clearEdits===true});var t={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};for(var E=0;E<this._jsPlumb.overlays.length;E++){var A=this._jsPlumb.overlays[E];if(A.isVisible()){this._jsPlumb.overlayPlacements[E]=A.draw(this.connector,this._jsPlumb.paintStyleInUse);t.minX=Math.min(t.minX,this._jsPlumb.overlayPlacements[E].minX);t.maxX=Math.max(t.maxX,this._jsPlumb.overlayPlacements[E].maxX);t.minY=Math.min(t.minY,this._jsPlumb.overlayPlacements[E].minY);t.maxY=Math.max(t.maxY,this._jsPlumb.overlayPlacements[E].maxY)}}var e=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,I=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),D={xmin:Math.min(this.connector.bounds.minX-(e+I),t.minX),ymin:Math.min(this.connector.bounds.minY-(e+I),t.minY),xmax:Math.max(this.connector.bounds.maxX+(e+I),t.maxX),ymax:Math.max(this.connector.bounds.maxY+(e+I),t.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,D);for(var C=0;C<this._jsPlumb.overlays.length;C++){var z=this._jsPlumb.overlays[C];if(z.isVisible()){z.paint(this._jsPlumb.overlayPlacements[C],D)}}}this._jsPlumb.lastPaintedAt=g}},repaint:function(e){e=e||{};this.paint({elId:this.sourceId,recalc:!(e.recalc===false),timestamp:e.timestamp,clearEdits:e.clearEdits})}})})();(function(){jsPlumb.AnchorManager=function(E){var g={},z={},C={},s={},G={},D={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},m={},u=this,n={},v=E.jsPlumbInstance,h=jsPlumb.CurrentLibrary,t={},p=function(S,T,O,K,P,I){if(S===T){return{orientation:D.IDENTITY,a:["top","top"]}}var J=Math.atan2((K.centery-O.centery),(K.centerx-O.centerx)),N=Math.atan2((O.centery-K.centery),(O.centerx-K.centerx)),M=((O.left<=K.left&&O.right>=K.left)||(O.left<=K.right&&O.right>=K.right)||(O.left<=K.left&&O.right>=K.right)||(K.left<=O.left&&K.right>=O.right)),R=((O.top<=K.top&&O.bottom>=K.top)||(O.top<=K.bottom&&O.bottom>=K.bottom)||(O.top<=K.top&&O.bottom>=K.bottom)||(K.top<=O.top&&K.bottom>=O.bottom)),Q=function(U){return[P.isContinuous?P.verifyEdge(U[0]):U[0],I.isContinuous?I.verifyEdge(U[1]):U[1]]},L={orientation:D.DIAGONAL,theta:J,theta2:N};if(!(M||R)){if(K.left>O.left&&K.top>O.top){L.a=["right","top"]}else{if(K.left>O.left&&O.top>K.top){L.a=["top","left"]}else{if(K.left<O.left&&K.top<O.top){L.a=["top","right"]}else{if(K.left<O.left&&K.top>O.top){L.a=["left","top"]}}}}}else{if(M){L.orientation=D.HORIZONTAL;L.a=O.top<K.top?["bottom","top"]:["top","bottom"]}else{L.orientation=D.VERTICAL;L.a=O.left<K.left?["right","left"]:["left","right"]}}L.a=Q(L.a);return L},H=function(W,S,Q,R,Z,T,K){var aa=[],J=S[Z?0:1]/(R.length+1);for(var U=0;U<R.length;U++){var ab=(U+1)*J,I=T*S[Z?1:0];if(K){ab=S[Z?0:1]-ab}var P=(Z?ab:I),M=Q[0]+P,O=P/S[0],N=(Z?I:ab),L=Q[1]+N,V=N/S[1];aa.push([M,L,O,V,R[U][1],R[U][2]])}return aa},F=function(I){return function(K,J){var L=true;if(I){L=K[0][0]<J[0][0]}else{L=K[0][0]>J[0][0]}return L===false?-1:1}},e=function(J,I){var L=J[0][0]<0?-Math.PI-J[0][0]:Math.PI-J[0][0],K=I[0][0]<0?-Math.PI-I[0][0]:Math.PI-I[0][0];if(L>K){return 1}else{return J[0][1]>I[0][1]?1:-1}},A={top:function(J,I){return J[0]>I[0]?1:-1},right:F(true),bottom:F(true),left:e},w=function(I,J){return I.sort(J)},o=function(J,I){var N=v.getCachedData(J),L=N.s,M=N.o,K=function(U,ad,Q,T,ab,aa,P){if(T.length>0){var Z=w(T,A[U]),V=U==="right"||U==="top",O=H(U,ad,Q,Z,ab,aa,V);var ae=function(ah,ag){var af=v.adjustForParentOffsetAndScroll([ag[0],ag[1]],ah.canvas);C[ah.id]=[af[0],af[1],ag[2],ag[3]];G[ah.id]=P};for(var R=0;R<O.length;R++){var W=O[R][4],ac=W.endpoints[0].elementId===J,S=W.endpoints[1].elementId===J;if(ac){ae(W.endpoints[0],O[R])}else{if(S){ae(W.endpoints[1],O[R])}}}}};K("bottom",L,[M.left,M.top],I.bottom,true,1,[0,1]);K("top",L,[M.left,M.top],I.top,true,0,[0,-1]);K("left",L,[M.left,M.top],I.left,false,0,[-1,0]);K("right",L,[M.left,M.top],I.right,false,1,[1,0])};this.reset=function(){g={};m={};n={}};this.addFloatingConnection=function(I,J){t[I]=J};this.removeFloatingConnection=function(I){delete t[I]};this.newConnection=function(L){var N=L.sourceId,K=L.targetId,I=L.endpoints,M=true,J=function(O,P,R,Q,S){if((N==K)&&R.isContinuous){h.removeElement(I[1].canvas);M=false}jsPlumbUtil.addToList(m,Q,[S,P,R.constructor==jsPlumb.DynamicAnchor])};J(0,I[0],I[0].anchor,K,L);if(M){J(1,I[1],I[1].anchor,N,L)}};var f=function(I){(function(L,J){if(L){var K=function(M){return M[4]==J};jsPlumbUtil.removeWithFunction(L.top,K);jsPlumbUtil.removeWithFunction(L.left,K);jsPlumbUtil.removeWithFunction(L.bottom,K);jsPlumbUtil.removeWithFunction(L.right,K)}})(n[I.elementId],I.id)};this.connectionDetached=function(N){var J=N.connection||N,M=N.sourceId,K=N.targetId,I=J.endpoints,L=function(O,P,R,Q,S){if(R!=null&&R.constructor==jsPlumb.FloatingAnchor){}else{jsPlumbUtil.removeWithFunction(m[Q],function(T){return T[0].id==S.id})}};L(1,I[1],I[1].anchor,M,J);L(0,I[0],I[0].anchor,K,J);f(J.endpoints[0]);f(J.endpoints[1]);u.redraw(J.sourceId);u.redraw(J.targetId)};this.add=function(J,I){jsPlumbUtil.addToList(g,I,J)};this.changeId=function(J,I){m[I]=m[J];g[I]=g[J];delete m[J];delete g[J]};this.getConnectionsFor=function(I){return m[I]||[]};this.getEndpointsFor=function(I){return g[I]||[]};this.deleteEndpoint=function(I){jsPlumbUtil.removeWithFunction(g[I.elementId],function(J){return J.id==I.id});f(I)};this.clearFor=function(I){delete g[I];g[I]=[]};var q=function(ae,P,Z,M,S,T,V,R,ag,U,L,ad){var ab=-1,K=-1,N=M.endpoints[V],W=N.id,Q=[1,0][V],I=[[P,Z],M,S,T,W],J=ae[ag],af=N._continuousAnchorEdge?ae[N._continuousAnchorEdge]:null;if(af){var ac=jsPlumbUtil.findWithFunction(af,function(ah){return ah[4]==W});if(ac!=-1){af.splice(ac,1);for(var aa=0;aa<af.length;aa++){jsPlumbUtil.addWithFunction(L,af[aa][1],function(ah){return ah.id==af[aa][1].id});jsPlumbUtil.addWithFunction(ad,af[aa][1].endpoints[V],function(ah){return ah.id==af[aa][1].endpoints[V].id});jsPlumbUtil.addWithFunction(ad,af[aa][1].endpoints[Q],function(ah){return ah.id==af[aa][1].endpoints[Q].id})}}}for(aa=0;aa<J.length;aa++){if(E.idx==1&&J[aa][3]===T&&K==-1){K=aa}jsPlumbUtil.addWithFunction(L,J[aa][1],function(ah){return ah.id==J[aa][1].id});jsPlumbUtil.addWithFunction(ad,J[aa][1].endpoints[V],function(ah){return ah.id==J[aa][1].endpoints[V].id});jsPlumbUtil.addWithFunction(ad,J[aa][1].endpoints[Q],function(ah){return ah.id==J[aa][1].endpoints[Q].id})}if(ab!=-1){J[ab]=I}else{var O=R?K!=-1?K:0:J.length;J.splice(O,0,I)}N._continuousAnchorEdge=ag};this.updateOtherEndpoint=function(J,M,N,I){var L=jsPlumbUtil.findWithFunction(m[J],function(O){return O[0].id===I.id}),K=jsPlumbUtil.findWithFunction(m[M],function(O){return O[0].id===I.id});if(L!=-1){m[J][L][0]=I;m[J][L][1]=I.endpoints[1];m[J][L][2]=I.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor}if(K>-1){m[M].splice(K,1);jsPlumbUtil.addToList(m,N,[I,I.endpoints[0],I.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor])}};this.sourceChanged=function(J,L,K){jsPlumbUtil.removeWithFunction(m[J],function(M){return M[0].id===K.id});var I=jsPlumbUtil.findWithFunction(m[K.targetId],function(M){return M[0].id===K.id});if(I>-1){m[K.targetId][I][0]=K;m[K.targetId][I][1]=K.endpoints[0];m[K.targetId][I][2]=K.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor}jsPlumbUtil.addToList(m,L,[K,K.endpoints[1],K.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])};this.rehomeEndpoint=function(L,J,O){var K=g[J]||[],M=v.getId(O);if(M!==J){var I=jsPlumbUtil.indexOf(K,L);if(I>-1){var P=K.splice(I,1)[0];u.add(P,M)}}for(var N=0;N<L.connections.length;N++){if(L.connections[N].sourceId==J){L.connections[N].sourceId=L.elementId;L.connections[N].source=L.element;u.sourceChanged(J,L.elementId,L.connections[N])}else{if(L.connections[N].targetId==J){L.connections[N].targetId=L.elementId;L.connections[N].target=L.element;u.updateOtherEndpoint(L.connections[N].sourceId,J,L.elementId,L.connections[N])}}}};this.redraw=function(W,ac,K,N,ah,aa){if(!v.isSuspendDrawing()){var am=g[W]||[],al=m[W]||[],J=[],ak=[],L=[];K=K||v.timestamp();N=N||{left:0,top:0};if(ac){ac={left:ac.left+N.left,top:ac.top+N.top}}var R=v.updateOffset({elId:W,offset:ac,recalc:false,timestamp:K}),T={};for(var ai=0;ai<al.length;ai++){var O=al[ai][0],Q=O.sourceId,M=O.targetId,P=O.endpoints[0].anchor.isContinuous,V=O.endpoints[1].anchor.isContinuous;if(P||V){var aj=Q+"_"+M,af=M+"_"+Q,ae=T[aj],U=O.sourceId==W?1:0;if(P&&!n[Q]){n[Q]={top:[],right:[],bottom:[],left:[]}}if(V&&!n[M]){n[M]={top:[],right:[],bottom:[],left:[]}}if(W!=M){v.updateOffset({elId:M,timestamp:K})}if(W!=Q){v.updateOffset({elId:Q,timestamp:K})}var S=v.getCachedData(M),I=v.getCachedData(Q);if(M==Q&&(P||V)){q(n[Q],-Math.PI/2,0,O,false,M,0,false,"top",Q,J,ak)}else{if(!ae){ae=p(Q,M,I.o,S.o,O.endpoints[0].anchor,O.endpoints[1].anchor);T[aj]=ae}if(P){q(n[Q],ae.theta,0,O,false,M,0,false,ae.a[0],Q,J,ak)}if(V){q(n[M],ae.theta2,-1,O,true,Q,1,true,ae.a[1],M,J,ak)}}if(P){jsPlumbUtil.addWithFunction(L,Q,function(an){return an===Q})}if(V){jsPlumbUtil.addWithFunction(L,M,function(an){return an===M})}jsPlumbUtil.addWithFunction(J,O,function(an){return an.id==O.id});if((P&&U===0)||(V&&U===1)){jsPlumbUtil.addWithFunction(ak,O.endpoints[U],function(an){return an.id==O.endpoints[U].id})}}}for(ai=0;ai<am.length;ai++){if(am[ai].connections.length===0&&am[ai].anchor.isContinuous){if(!n[W]){n[W]={top:[],right:[],bottom:[],left:[]}}q(n[W],-Math.PI/2,0,{endpoints:[am[ai],am[ai]],paint:function(){}},false,W,0,false,"top",W,J,ak);jsPlumbUtil.addWithFunction(L,W,function(an){return an===W})}}for(ai=0;ai<L.length;ai++){o(L[ai],n[L[ai]])}for(ai=0;ai<am.length;ai++){am[ai].paint({timestamp:K,offset:R,dimensions:R.s,recalc:aa!==true})}for(ai=0;ai<ak.length;ai++){var ab=v.getCachedData(ak[ai].elementId);ak[ai].paint({timestamp:K,offset:ab,dimensions:ab.s})}for(ai=0;ai<al.length;ai++){var Z=al[ai][1];if(Z.anchor.constructor==jsPlumb.DynamicAnchor){Z.paint({elementWithPrecedence:W,timestamp:K});jsPlumbUtil.addWithFunction(J,al[ai][0],function(an){return an.id==al[ai][0].id});for(var ag=0;ag<Z.connections.length;ag++){if(Z.connections[ag]!==al[ai][0]){jsPlumbUtil.addWithFunction(J,Z.connections[ag],function(an){return an.id==Z.connections[ag].id})}}}else{if(Z.anchor.constructor==jsPlumb.Anchor){jsPlumbUtil.addWithFunction(J,al[ai][0],function(an){return an.id==al[ai][0].id})}}}var ad=t[W];if(ad){ad.paint({timestamp:K,recalc:false,elId:W})}for(ai=0;ai<J.length;ai++){J[ai].paint({elId:W,timestamp:K,recalc:false,clearEdits:ah})}}};var B=function(K){jsPlumbUtil.EventGenerator.apply(this);this.type="Continuous";this.isDynamic=true;this.isContinuous=true;var N=K.faces||["top","right","bottom","left"],J=!(K.clockwise===false),S={},Q={top:"bottom",right:"left",left:"right",bottom:"top"},M={top:"right",right:"bottom",left:"top",bottom:"left"},O={top:"left",right:"top",left:"bottom",bottom:"right"},L=J?M:O,I=J?O:M,R=K.cssClass||"";for(var P=0;P<N.length;P++){S[N[P]]=true}this.verifyEdge=function(T){if(S[T]){return T}else{if(S[Q[T]]){return Q[T]}else{if(S[L[T]]){return L[T]}else{if(S[I[T]]){return I[T]}}}}return T};this.compute=function(T){return s[T.element.id]||C[T.element.id]||[0,0]};this.getCurrentLocation=function(T){return s[T.element.id]||C[T.element.id]||[0,0]};this.getOrientation=function(T){return G[T.id]||[0,0]};this.clearUserDefinedLocation=function(){delete s[K.elementId]};this.setUserDefinedLocation=function(T){s[K.elementId]=T};this.getCssClass=function(){return R};this.setCssClass=function(T){R=T}};v.continuousAnchorFactory={get:function(J){var I=z[J.elementId];if(!I){I=new B(J);z[J.elementId]=I}return I},clear:function(I){delete z[I]}}};jsPlumb.Anchor=function(f){this.x=f.x||0;this.y=f.y||0;this.elementId=f.elementId;this.cssClass=f.cssClass||"";this.userDefinedLocation=null;this.orientation=f.orientation||[0,0];jsPlumbUtil.EventGenerator.apply(this);var e=f.jsPlumbInstance;this.lastReturnValue=null;this.offsets=f.offsets||[0,0];this.timestamp=null;this.compute=function(o){var n=o.xy,g=o.wh,h=o.element,m=o.timestamp;if(o.clearUserDefinedLocation){this.userDefinedLocation=null}if(m&&m===self.timestamp){return this.lastReturnValue}if(this.userDefinedLocation!=null){this.lastReturnValue=this.userDefinedLocation}else{this.lastReturnValue=[n[0]+(this.x*g[0])+this.offsets[0],n[1]+(this.y*g[1])+this.offsets[1]];this.lastReturnValue=e.adjustForParentOffsetAndScroll(this.lastReturnValue,h.canvas)}this.timestamp=m;return this.lastReturnValue};this.getCurrentLocation=function(g){return(this.lastReturnValue==null||(g.timestamp!=null&&this.timestamp!=g.timestamp))?this.compute(g):this.lastReturnValue}};jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(e){if(!e){return false}var f=e.getOrientation(),g=this.getOrientation();return this.x==e.x&&this.y==e.y&&this.offsets[0]==e.offsets[0]&&this.offsets[1]==e.offsets[1]&&g[0]==f[0]&&g[1]==f[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(e){this.userDefinedLocation=e},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(e){return this.orientation},getCssClass:function(){return this.cssClass}});jsPlumb.FloatingAnchor=function(g){jsPlumb.Anchor.apply(this,arguments);var f=g.reference,h=jsPlumb.CurrentLibrary,n=g.jsPlumbInstance,o=g.referenceCanvas,q=h.getSize(h.getElementObject(o)),s=0,m=0,e=null,p=null;this.orientation=null;this.x=0;this.y=0;this.isFloating=true;this.compute=function(w){var v=w.xy,u=w.element,t=[v[0]+(q[0]/2),v[1]+(q[1]/2)];t=n.adjustForParentOffsetAndScroll(t,u.canvas);p=t;return t};this.getOrientation=function(u){if(e){return e}else{var t=f.getOrientation(u);return[Math.abs(t[0])*s*-1,Math.abs(t[1])*m*-1]}};this.over=function(t,u){e=t.getOrientation(u)};this.out=function(){e=null};this.getCurrentLocation=function(t){return p==null?this.compute(t):p}};jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var d=function(g,f,e){return g.constructor==jsPlumb.Anchor?g:f.makeAnchor(g,e,f)};jsPlumb.DynamicAnchor=function(o){jsPlumb.Anchor.apply(this,arguments);this.isSelective=true;this.isDynamic=true;this.anchors=[];this.elementId=o.elementId;this.jsPlumbInstance=o.jsPlumbInstance;for(var h=0;h<o.anchors.length;h++){this.anchors[h]=d(o.anchors[h],this.jsPlumbInstance,this.elementId)}this.addAnchor=function(q){this.anchors.push(d(q,this.jsPlumbInstance,this.elementId))};this.getAnchors=function(){return this.anchors};this.locked=false;var g=this.anchors.length>0?this.anchors[0]:null,m=this.anchors.length>0?0:-1,n=g,f=this,e=function(z,u,t,A,s){var q=A[0]+(z.x*s[0]),B=A[1]+(z.y*s[1]),w=A[0]+(s[0]/2),v=A[1]+(s[1]/2);return(Math.sqrt(Math.pow(u-q,2)+Math.pow(t-B,2))+Math.sqrt(Math.pow(w-q,2)+Math.pow(v-B,2)))},p=o.selector||function(D,s,t,u,q){var w=t[0]+(u[0]/2),v=t[1]+(u[1]/2);var A=-1,C=Infinity;for(var z=0;z<q.length;z++){var B=e(q[z],w,v,D,s);if(B<C){A=z+0;C=B}}return q[A]};this.compute=function(w){var v=w.xy,q=w.wh,t=w.timestamp,s=w.txy,z=w.twh;if(w.clearUserDefinedLocation){userDefinedLocation=null}this.timestamp=t;var u=f.getUserDefinedLocation();if(u!=null){return u}if(this.locked||s==null||z==null){return g.compute(w)}else{w.timestamp=null}g=p(v,q,s,z,this.anchors);this.x=g.x;this.y=g.y;if(g!=n){this.fire("anchorChanged",g)}n=g;return g.compute(w)};this.getCurrentLocation=function(q){return this.getUserDefinedLocation()||(g!=null?g.getCurrentLocation(q):null)};this.getOrientation=function(q){return g!=null?g.getOrientation(q):[0,0]};this.over=function(q,s){if(g!=null){g.over(q,s)}};this.out=function(){if(g!=null){g.out()}};this.getCssClass=function(){return(g&&g.getCssClass())||""}};jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(e,n,g,f,m,h){jsPlumb.Anchors[m]=function(p){var o=p.jsPlumbInstance.makeAnchor([e,n,g,f,0,0],p.elementId,p.jsPlumbInstance);o.type=m;if(h){h(o,p)}return o}};b(0.5,0,0,-1,"TopCenter");b(0.5,1,0,1,"BottomCenter");b(0,0.5,-1,0,"LeftMiddle");b(1,0.5,1,0,"RightMiddle");b(0.5,0,0,-1,"Top");b(0.5,1,0,1,"Bottom");b(0,0.5,-1,0,"Left");b(1,0.5,1,0,"Right");b(0.5,0.5,0,0,"Center");b(1,0,0,-1,"TopRight");b(1,1,0,1,"BottomRight");b(0,0,0,-1,"TopLeft");b(0,1,0,1,"BottomLeft");jsPlumb.Defaults.DynamicAnchors=function(e){return e.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],e.elementId,e.jsPlumbInstance)};jsPlumb.Anchors.AutoDefault=function(f){var e=f.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(f));e.type="AutoDefault";return e};var a=function(f,e){jsPlumb.Anchors[f]=function(h){var g=h.jsPlumbInstance.makeAnchor(["Continuous",{faces:e}],h.elementId,h.jsPlumbInstance);g.type=f;return g}};jsPlumb.Anchors.Continuous=function(e){return e.jsPlumbInstance.continuousAnchorFactory.get(e)};a("ContinuousLeft",["left"]);a("ContinuousTop",["top"]);a("ContinuousBottom",["bottom"]);a("ContinuousRight",["right"]);jsPlumb.Anchors.Assign=b(0,0,0,0,"Assign",function(f,g){var e=g.position||"Fixed";f.positionFinder=e.constructor==String?g.jsPlumbInstance.AnchorPositionFinders[e]:e;f.constructorParams=g});jsPlumb.AnchorPositionFinders={Fixed:function(h,e,g,f){return[(h.left-e.left)/g[0],(h.top-e.top)/g[1]]},Grid:function(e,s,m,f){var q=e.left-s.left,p=e.top-s.top,o=m[0]/(f.grid[0]),n=m[1]/(f.grid[1]),h=Math.floor(q/o),g=Math.floor(p/n);return[((h*o)+(o/2))/m[0],((g*n)+(n/2))/m[1]]}};jsPlumb.Anchors.Perimeter=function(e){e=e||{};var f=e.anchorCount||60,m=e.shape;if(!m){throw new Error("no shape supplied to Perimeter Anchor type")}var g=function(){var A=0.5,z=Math.PI*2/f,B=0,v=[];for(var w=0;w<f;w++){var u=A+(A*Math.sin(B)),C=A+(A*Math.cos(B));v.push([u,C,0,0]);B+=z}return v},n=function(w){var A=f/w.length,u=[],v=function(E,H,D,G,I){A=f*I;var C=(D-E)/A,B=(G-H)/A;for(var F=0;F<A;F++){u.push([E+(C*F),H+(B*F),0,0])}};for(var z=0;z<w.length;z++){v.apply(null,w[z])}return u},q=function(u){var w=[];for(var v=0;v<u.length;v++){w.push([u[v][0],u[v][1],u[v][2],u[v][3],1/u.length])}return n(w)},o=function(){return q([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])};var h={Circle:g,Ellipse:g,Diamond:function(){return q([[0.5,0,1,0.5],[1,0.5,0.5,1],[0.5,1,0,0.5],[0,0.5,0.5,0]])},Rectangle:o,Square:o,Triangle:function(){return q([[0.5,0,1,1],[1,1,0,1],[0,1,0.5,0]])},Path:function(C){var A=C.points,B=[],v=0;for(var z=0;z<A.length-1;z++){var u=Math.sqrt(Math.pow(A[z][2]-A[z][0])+Math.pow(A[z][3]-A[z][1]));v+=u;B.push([A[z][0],A[z][1],A[z+1][0],A[z+1][1],u])}for(var w=0;w<B.length;w++){B[w][4]=B[w][4]/v}return n(B)}},s=function(B,A){var C=[],z=A/180*Math.PI;for(var w=0;w<B.length;w++){var v=B[w][0]-0.5,u=B[w][1]-0.5;C.push([0.5+((v*Math.cos(z))-(u*Math.sin(z))),0.5+((v*Math.sin(z))+(u*Math.cos(z))),B[w][2],B[w][3]])}return C};if(!h[m]){throw new Error("Shape ["+m+"] is unknown by Perimeter Anchor type")}var t=h[m](e);if(e.rotation){t=s(t,e.rotation)}var p=e.jsPlumbInstance.makeDynamicAnchor(t);p.type="Perimeter";return p}})();(function(){jsPlumb.DOMElementComponent=jsPlumbUtil.extend(jsPlumb.jsPlumbUIComponent,function(m){this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(n){}});jsPlumb.Segments={AbstractSegment:function(m){this.params=m;this.findClosestPointOnPath=function(n,o){return{d:Infinity,x:null,y:null,l:null}};this.getBounds=function(){return{minX:Math.min(m.x1,m.x2),minY:Math.min(m.y1,m.y2),maxX:Math.max(m.x1,m.x2),maxY:Math.max(m.y1,m.y2)}}},Straight:function(t){var w=jsPlumb.Segments.AbstractSegment.apply(this,arguments),q,s,z,p,o,v,u,n=function(){q=Math.sqrt(Math.pow(o-p,2)+Math.pow(u-v,2));s=jsPlumbUtil.gradient({x:p,y:v},{x:o,y:u});z=-1/s};this.type="Straight";this.getLength=function(){return q};this.getGradient=function(){return s};this.getCoordinates=function(){return{x1:p,y1:v,x2:o,y2:u}};this.setCoordinates=function(m){p=m.x1;v=m.y1;o=m.x2;u=m.y2;n()};this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2});this.getBounds=function(){return{minX:Math.min(p,o),minY:Math.min(v,u),maxX:Math.max(p,o),maxY:Math.max(v,u)}};this.pointOnPath=function(A,B){if(A===0&&!B){return{x:p,y:v}}else{if(A==1&&!B){return{x:o,y:u}}else{var m=B?A>0?A:q+A:A*q;return jsPlumbUtil.pointOnLine({x:p,y:v},{x:o,y:u},m)}}};this.gradientAtPoint=function(m){return s};this.pointAlongPathFrom=function(m,D,C){var B=this.pointOnPath(m,C),A=D<=0?{x:p,y:v}:{x:o,y:u};if(D<=0&&Math.abs(D)>1){D*=-1}return jsPlumbUtil.pointOnLine(B,A,D)};this.findClosestPointOnPath=function(A,G){if(s===0){return{x:A,y:v,d:Math.abs(G-v)}}else{if(s==Infinity||s==-Infinity){return{x:p,y:G,d:Math.abs(A-1)}}else{var m=v-(s*p),B=G-(z*A),C=(B-m)/(s-z),F=(s*C)+m,E=jsPlumbUtil.lineLength([A,G],[C,F]),D=jsPlumbUtil.lineLength([C,F],[p,v]);return{d:E,x:C,y:F,l:D/q}}}}},Arc:function(q){var z=jsPlumb.Segments.AbstractSegment.apply(this,arguments),t=function(B,A){return jsPlumbUtil.theta([q.cx,q.cy],[B,A])},m=function(F,B){if(F.anticlockwise){var A=F.startAngle<F.endAngle?F.startAngle+p:F.startAngle,E=Math.abs(A-F.endAngle);return A-(E*B)}else{var D=F.endAngle<F.startAngle?F.endAngle+p:F.endAngle,C=Math.abs(D-F.startAngle);return F.startAngle+(C*B)}},p=2*Math.PI;this.radius=q.r;this.anticlockwise=q.ac;this.type="Arc";if(q.startAngle&&q.endAngle){this.startAngle=q.startAngle;this.endAngle=q.endAngle;this.x1=q.cx+(this.radius*Math.cos(q.startAngle));this.y1=q.cy+(this.radius*Math.sin(q.startAngle));this.x2=q.cx+(this.radius*Math.cos(q.endAngle));this.y2=q.cy+(this.radius*Math.sin(q.endAngle))}else{this.startAngle=t(q.x1,q.y1);this.endAngle=t(q.x2,q.y2);this.x1=q.x1;this.y1=q.y1;this.x2=q.x2;this.y2=q.y2}if(this.endAngle<0){this.endAngle+=p}if(this.startAngle<0){this.startAngle+=p}this.segment=jsPlumbUtil.segment([this.x1,this.y1],[this.x2,this.y2]);var u=this.endAngle<this.startAngle?this.endAngle+p:this.endAngle;this.sweep=Math.abs(u-this.startAngle);if(this.anticlockwise){this.sweep=p-this.sweep}var w=2*Math.PI*this.radius,n=this.sweep/p,o=w*n;this.getLength=function(){return o};this.getBounds=function(){return{minX:q.cx-q.r,maxX:q.cx+q.r,minY:q.cy-q.r,maxY:q.cy+q.r}};var s=1e-10,v=function(C){var B=Math.floor(C),A=Math.ceil(C);if(C-B<s){return B}else{if(A-C<s){return A}}return C};this.pointOnPath=function(A,E){if(A===0){return{x:this.x1,y:this.y1,theta:this.startAngle}}else{if(A==1){return{x:this.x2,y:this.y2,theta:this.endAngle}}}if(E){A=A/o}var D=m(this,A),C=q.cx+(q.r*Math.cos(D)),B=q.cy+(q.r*Math.sin(D));return{x:v(C),y:v(B),theta:D}};this.gradientAtPoint=function(B,D){var C=this.pointOnPath(B,D);var A=jsPlumbUtil.normal([q.cx,q.cy],[C.x,C.y]);if(!this.anticlockwise&&(A==Infinity||A==-Infinity)){A*=-1}return A};this.pointAlongPathFrom=function(I,A,H){var C=this.pointOnPath(I,H),B=A/w*2*Math.PI,D=this.anticlockwise?-1:1,G=C.theta+(D*B),F=q.cx+(this.radius*Math.cos(G)),E=q.cy+(this.radius*Math.sin(G));return{x:F,y:E}}},Bezier:function(q){var n=jsPlumb.Segments.AbstractSegment.apply(this,arguments),p=[{x:q.x1,y:q.y1},{x:q.cp1x,y:q.cp1y},{x:q.cp2x,y:q.cp2y},{x:q.x2,y:q.y2}],m={minX:Math.min(q.x1,q.x2,q.cp1x,q.cp2x),minY:Math.min(q.y1,q.y2,q.cp1y,q.cp2y),maxX:Math.max(q.x1,q.x2,q.cp1x,q.cp2x),maxY:Math.max(q.y1,q.y2,q.cp1y,q.cp2y)};this.type="Bezier";var o=function(t,s,u){if(u){s=jsBezier.locationAlongCurveFrom(t,s>0?0:1,s)}return s};this.pointOnPath=function(s,t){s=o(p,s,t);return jsBezier.pointOnCurve(p,s)};this.gradientAtPoint=function(s,t){s=o(p,s,t);return jsBezier.gradientAtPoint(p,s)};this.pointAlongPathFrom=function(s,u,t){s=o(p,s,t);return jsBezier.pointAlongCurveFrom(p,s,u)};this.getLength=function(){return jsBezier.getLength(p)};this.getBounds=function(){return m}}};var h=function(){this.resetBounds=function(){this.bounds={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}};this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(I){h.apply(this,arguments);var G=[],n=false,z=0,o=[],C=[],m=I.stub||0,t=jsPlumbUtil.isArray(m)?m[0]:m,B=jsPlumbUtil.isArray(m)?m[1]:m,E=I.gap||0,u=jsPlumbUtil.isArray(E)?E[0]:E,w=jsPlumbUtil.isArray(E)?E[1]:E,v=null,p=false,s=null;this.isEditable=function(){return false};this.setEdited=function(K){p=K};this.getPath=function(){};this.setPath=function(K){};this.findSegmentForPoint=function(K,O){var L={d:Infinity,s:null,x:null,y:null,l:null};for(var M=0;M<G.length;M++){var N=G[M].findClosestPointOnPath(K,O);if(N.d<L.d){L.d=N.d;L.l=N.l;L.x=N.x;L.y=N.y;L.s=G[M]}}return L};var H=function(){var M=0;for(var L=0;L<G.length;L++){var K=G[L].getLength();C[L]=K/z;o[L]=[M,(M+=(K/z))]}},q=function(M,O){if(O){M=M>0?M/z:(z+M)/z}var K=o.length-1,L=1;for(var N=0;N<o.length;N++){if(o[N][1]>=M){K=N;L=M==1?1:M===0?0:(M-o[N][0])/C[N];break}}return{segment:G[K],proportion:L,index:K}},F=function(M,L,N){if(N.x1==N.x2&&N.y1==N.y2){return}var K=new jsPlumb.Segments[L](N);G.push(K);z+=K.getLength();M.updateBounds(K)},J=function(){z=0;G.splice(0,G.length);o.splice(0,o.length);C.splice(0,C.length)};this.setSegments=function(L){v=[];z=0;for(var K=0;K<L.length;K++){v.push(L[K]);z+=L[K].getLength()}};var A=function(ac){this.lineWidth=ac.lineWidth;var K=jsPlumbUtil.segment(ac.sourcePos,ac.targetPos),W=ac.targetPos[0]<ac.sourcePos[0],U=ac.targetPos[1]<ac.sourcePos[1],N=ac.lineWidth||1,ab=ac.sourceEndpoint.anchor.orientation||ac.sourceEndpoint.anchor.getOrientation(ac.sourceEndpoint),L=ac.targetEndpoint.anchor.orientation||ac.targetEndpoint.anchor.getOrientation(ac.targetEndpoint),Q=W?ac.targetPos[0]:ac.sourcePos[0],P=U?ac.targetPos[1]:ac.sourcePos[1],S=Math.abs(ac.targetPos[0]-ac.sourcePos[0]),aa=Math.abs(ac.targetPos[1]-ac.sourcePos[1]);if(ab[0]===0&&ab[1]===0||L[0]===0&&L[1]===0){var O=S>aa?0:1,M=[1,0][O];ab=[];L=[];ab[O]=ac.sourcePos[O]>ac.targetPos[O]?-1:1;L[O]=ac.sourcePos[O]>ac.targetPos[O]?1:-1;ab[M]=0;L[M]=0}var V=W?S+(u*ab[0]):u*ab[0],T=U?aa+(u*ab[1]):u*ab[1],ae=W?w*L[0]:S+(w*L[0]),ad=U?w*L[1]:aa+(w*L[1]),Z=((ab[0]*L[0])+(ab[1]*L[1]));var R={sx:V,sy:T,tx:ae,ty:ad,lw:N,xSpan:Math.abs(ae-V),ySpan:Math.abs(ad-T),mx:(V+ae)/2,my:(T+ad)/2,so:ab,to:L,x:Q,y:P,w:S,h:aa,segment:K,startStubX:V+(ab[0]*t),startStubY:T+(ab[1]*t),endStubX:ae+(L[0]*B),endStubY:ad+(L[1]*B),isXGreaterThanStubTimes2:Math.abs(V-ae)>(t+B),isYGreaterThanStubTimes2:Math.abs(T-ad)>(t+B),opposite:Z==-1,perpendicular:Z===0,orthogonal:Z==1,sourceAxis:ab[0]===0?"y":"x",points:[Q,P,S,aa,V,T,ae,ad]};R.anchorOrientation=R.opposite?"opposite":R.orthogonal?"orthogonal":"perpendicular";return R};this.getSegments=function(){return G};this.updateBounds=function(L){var K=L.getBounds();this.bounds.minX=Math.min(this.bounds.minX,K.minX);this.bounds.maxX=Math.max(this.bounds.maxX,K.maxX);this.bounds.minY=Math.min(this.bounds.minY,K.minY);this.bounds.maxY=Math.max(this.bounds.maxY,K.maxY)};var D=function(){console.log("SEGMENTS:");for(var K=0;K<G.length;K++){console.log(G[K].type,G[K].getLength(),o[K])}};this.pointOnPath=function(L,M){var K=q(L,M);return K.segment&&K.segment.pointOnPath(K.proportion,M)||[0,0]};this.gradientAtPoint=function(L){var K=q(L,absolute);return K.segment&&K.segment.gradientAtPoint(K.proportion,absolute)||0};this.pointAlongPathFrom=function(L,N,M){var K=q(L,M);return K.segment&&K.segment.pointAlongPathFrom(K.proportion,N,false)||[0,0]};this.compute=function(K){if(!p){s=A(K)}J();this._compute(s,K);this.x=s.points[0];this.y=s.points[1];this.w=s.points[2];this.h=s.points[3];this.segment=s.segment;H()};return{addSegment:F,prepareCompute:A,sourceStub:t,targetStub:B,maxStub:Math.max(t,B),sourceGap:u,targetGap:w,maxGap:Math.max(u,w)}};jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,h);var e=function(){this.type="Straight";var m=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(o,n){m.addSegment(this,"Straight",{x1:o.sx,y1:o.sy,x2:o.startStubX,y2:o.startStubY});m.addSegment(this,"Straight",{x1:o.startStubX,y1:o.startStubY,x2:o.endStubX,y2:o.endStubY});m.addSegment(this,"Straight",{x1:o.endStubX,y1:o.endStubY,x2:o.tx,y2:o.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(e,"Straight");var a=function(q){q=q||{};var o=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),p=q.stub||50,m=q.curviness||150,n=10;this.type="Bezier";this.getCurviness=function(){return m};this._findControlPoint=function(C,s,z,t,v){var A=t.anchor.getOrientation(t),B=v.anchor.getOrientation(v),w=A[0]!=B[0]||A[1]==B[1],u=[];if(!w){if(A[0]===0){u.push(s[0]<z[0]?C[0]+n:C[0]-n)}else{u.push(C[0]-(m*A[0]))}if(A[1]===0){u.push(s[1]<z[1]?C[1]+n:C[1]-n)}else{u.push(C[1]+(m*B[1]))}}else{if(B[0]===0){u.push(z[0]<s[0]?C[0]+n:C[0]-n)}else{u.push(C[0]+(m*B[0]))}if(B[1]===0){u.push(z[1]<s[1]?C[1]+n:C[1]-n)}else{u.push(C[1]+(m*A[1]))}}return u};this._compute=function(w,u){var v=u.sourcePos,D=u.targetPos,E=Math.abs(v[0]-D[0]),A=Math.abs(v[1]-D[1]),B=v[0]<D[0]?E:0,z=v[1]<D[1]?A:0,t=v[0]<D[0]?0:E,s=v[1]<D[1]?0:A,F=this._findControlPoint([B,z],v,D,u.sourceEndpoint,u.targetEndpoint),C=this._findControlPoint([t,s],D,v,u.targetEndpoint,u.sourceEndpoint);o.addSegment(this,"Bezier",{x1:B,y1:z,x2:t,y2:s,cp1x:F[0],cp1y:F[1],cp2x:C[0],cp2y:C[1]})}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(a,"Bezier");jsPlumb.Endpoints.AbstractEndpoint=function(n){h.apply(this,arguments);var m=this.compute=function(s,o,t,q){var p=this._compute.apply(this,arguments);this.x=p[0];this.y=p[1];this.w=p[2];this.h=p[3];this.bounds.minX=this.x;this.bounds.minY=this.y;this.bounds.maxX=this.x+this.w;this.bounds.maxY=this.y+this.h;return p};return{compute:m,cssClass:n.cssClass}};jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,h);jsPlumb.Endpoints.Dot=function(n){this.type="Dot";var m=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);n=n||{};this.radius=n.radius||10;this.defaultOffset=0.5*this.radius;this.defaultInnerRadius=this.radius/3;this._compute=function(z,o,p,s){this.radius=p.radius||this.radius;var v=z[0]-this.radius,u=z[1]-this.radius,A=this.radius*2,t=this.radius*2;if(p.strokeStyle){var q=p.lineWidth||1;v-=q;u-=q;A+=(q*2);t+=(q*2)}return[v,u,A,t,this.radius]}};jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint);jsPlumb.Endpoints.Rectangle=function(n){this.type="Rectangle";var m=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);n=n||{};this.width=n.width||20;this.height=n.height||20;this._compute=function(u,q,w,t){var s=w.width||this.width,p=w.height||this.height,o=u[0]-(s/2),v=u[1]-(p/2);return[o,v,s,p]}};jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var d=function(m){jsPlumb.DOMElementComponent.apply(this,arguments);this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(d,jsPlumb.DOMElementComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(m){this._jsPlumb.displayElements.push(m)}});jsPlumb.Endpoints.Image=function(q){this.type="Image";d.apply(this,arguments);jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var m=q.onload,p=q.src||q.url,o=q.parent,n=q.cssClass?" "+q.cssClass:"";this._jsPlumb.img=new Image();this._jsPlumb.ready=false;this._jsPlumb.initialized=false;this._jsPlumb.deleted=false;this._jsPlumb.widthToUse=q.width;this._jsPlumb.heightToUse=q.height;this._jsPlumb.endpoint=q.endpoint;this._jsPlumb.img.onload=function(){if(this._jsPlumb!=null){this._jsPlumb.ready=true;this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width;this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height;if(m){m(this)}}}.bind(this);this._jsPlumb.endpoint.setImage=function(t,v){var u=t.constructor==String?t:t.src;m=v;this._jsPlumb.img.src=u;if(this.canvas!=null){this.canvas.setAttribute("src",this._jsPlumb.img.src)}}.bind(this);this._jsPlumb.endpoint.setImage(p,m);this._compute=function(u,s,v,t){this.anchorPoint=u;if(this._jsPlumb.ready){return[u[0]-this._jsPlumb.widthToUse/2,u[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]}else{return[0,0,0,0]}};this.canvas=document.createElement("img");this.canvas.style.margin=0;this.canvas.style.padding=0;this.canvas.style.outline=0;this.canvas.style.position="absolute";this.canvas.className=this._jsPlumb.instance.endpointClass+n;if(this._jsPlumb.widthToUse){this.canvas.setAttribute("width",this._jsPlumb.widthToUse)}if(this._jsPlumb.heightToUse){this.canvas.setAttribute("height",this._jsPlumb.heightToUse)}this._jsPlumb.instance.appendElement(this.canvas,o);this.attachListeners(this.canvas,this);this.actuallyPaint=function(v,u,t){if(!this._jsPlumb.deleted){if(!this._jsPlumb.initialized){this.canvas.setAttribute("src",this._jsPlumb.img.src);this.appendDisplayElement(this.canvas);this._jsPlumb.initialized=true}var s=this.anchorPoint[0]-(this._jsPlumb.widthToUse/2),w=this.anchorPoint[1]-(this._jsPlumb.heightToUse/2);jsPlumbUtil.sizeElement(this.canvas,s,w,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}};this.paint=function(t,s){if(this._jsPlumb!=null){if(this._jsPlumb.ready){this.actuallyPaint(t,s)}else{window.setTimeout(function(){this.paint(t,s)}.bind(this),200)}}}};jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[d,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=true;jsPlumbUtil.removeElement(this.canvas);this.canvas=null}});jsPlumb.Endpoints.Blank=function(n){var m=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank";d.apply(this,arguments);this._compute=function(q,o,s,p){return[q[0],q[1],10,0]};this.canvas=document.createElement("div");this.canvas.style.display="block";this.canvas.style.width="1px";this.canvas.style.height="1px";this.canvas.style.background="transparent";this.canvas.style.position="absolute";this.canvas.className=this._jsPlumb.endpointClass;jsPlumb.appendElement(this.canvas,n.parent);this.paint=function(p,o){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}};jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,d],{cleanup:function(){if(this.canvas){this.canvas.parentNode.removeChild(this.canvas)}}});jsPlumb.Endpoints.Triangle=function(n){this.type="Triangle";var m=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);n=n||{};n.width=n.width||55;n.height=n.height||55;this.width=n.width;this.height=n.height;this._compute=function(u,q,w,t){var s=w.width||self.width,p=w.height||self.height,o=u[0]-(s/2),v=u[1]-(p/2);return[o,v,s,p]}};var g=jsPlumb.Overlays.AbstractOverlay=function(m){this.visible=true;this.isAppendedAtTopLevel=true;this.component=m.component;this.loc=m.location==null?0.5:m.location;this.endpointLoc=m.endpointLocation==null?[0.5,0.5]:m.endpointLocation};g.prototype={cleanup:function(){this.component=null;this.canvas=null;this.endpointLoc=null},setVisible:function(m){this.visible=m;this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(false)},show:function(){this.setVisible(true)},incrementLocation:function(m){this.loc+=m;this.component.repaint()},setLocation:function(m){this.loc=m;this.component.repaint()},getLocation:function(){return this.loc}};jsPlumb.Overlays.Arrow=function(q){this.type="Arrow";g.apply(this,arguments);this.isAppendedAtTopLevel=false;q=q||{};var m=jsPlumbUtil;this.length=q.length||20;this.width=q.width||20;this.id=q.id;var p=(q.direction||1)<0?-1:1,o=q.paintStyle||{lineWidth:1},n=q.foldback||0.623;this.computeMaxSize=function(){return self.width*1.5};this.draw=function(D,I){var z,F,t,A,w;if(D.pointAlongPathFrom){if(m.isString(this.loc)||this.loc>1||this.loc<0){var u=parseInt(this.loc,10);z=D.pointAlongPathFrom(u,p*this.length/2,true);F=D.pointOnPath(u,true);t=m.pointOnLine(z,F,this.length)}else{if(this.loc==1){z=D.pointOnPath(this.loc);F=D.pointAlongPathFrom(this.loc,-(this.length));t=m.pointOnLine(z,F,this.length);if(p==-1){var H=t;t=z;z=H}}else{if(this.loc===0){t=D.pointOnPath(this.loc);F=D.pointAlongPathFrom(this.loc,this.length);z=m.pointOnLine(t,F,this.length);if(p==-1){var E=t;t=z;z=E}}else{z=D.pointAlongPathFrom(this.loc,p*this.length/2);F=D.pointOnPath(this.loc);t=m.pointOnLine(z,F,this.length)}}}A=m.perpendicularLineTo(z,t,this.width);w=m.pointOnLine(z,t,n*this.length);var B={hxy:z,tail:A,cxy:w},C=o.strokeStyle||I.strokeStyle,G=o.fillStyle||I.strokeStyle,v=o.lineWidth||I.lineWidth,s={component:D,d:B,lineWidth:v,strokeStyle:C,fillStyle:G,minX:Math.min(z.x,A[0].x,A[1].x),maxX:Math.max(z.x,A[0].x,A[1].x),minY:Math.min(z.y,A[0].y,A[1].y),maxY:Math.max(z.y,A[0].y,A[1].y)};return s}else{return{component:D,minX:0,maxX:0,minY:0,maxY:0}}}};jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,g);jsPlumb.Overlays.PlainArrow=function(n){n=n||{};var m=jsPlumb.extend(n,{foldback:1});jsPlumb.Overlays.Arrow.call(this,m);this.type="PlainArrow"};jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow);jsPlumb.Overlays.Diamond=function(o){o=o||{};var m=o.length||40,n=jsPlumb.extend(o,{length:m/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,n);this.type="Diamond"};jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var f=function(m){if(m._jsPlumb.cachedDimensions==null){m._jsPlumb.cachedDimensions=m.getDimensions()}return m._jsPlumb.cachedDimensions};var b=function(n){jsPlumb.DOMElementComponent.apply(this,arguments);g.apply(this,arguments);var m=jsPlumb.CurrentLibrary;this.id=n.id;this._jsPlumb.div=null;this._jsPlumb.initialised=false;this._jsPlumb.component=n.component;this._jsPlumb.cachedDimensions=null;this._jsPlumb.create=n.create;this.getElement=function(){if(this._jsPlumb.div==null){var p=this._jsPlumb.div=m.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));p.style.position="absolute";var o=n._jsPlumb.overlayClass+" "+(this.cssClass?this.cssClass:n.cssClass?n.cssClass:"");p.className=o;this._jsPlumb.instance.appendElement(p,this._jsPlumb.component.parent);this._jsPlumb.instance.getId(p);this.attachListeners(p,this);this.canvas=p}return this._jsPlumb.div};this.draw=function(s,z){var o=f(this);if(o!=null&&o.length==2){var p={x:0,y:0};if(s.pointOnPath){var q=this.loc,t=false;if(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1){q=parseInt(this.loc,10);t=true}p=s.pointOnPath(q,t)}else{var v=this.loc.constructor==Array?this.loc:this.endpointLoc;p={x:v[0]*s.w,y:v[1]*s.h}}var w=p.x-(o[0]/2),u=p.y-(o[1]/2);return{component:s,d:{minx:w,miny:u,td:o,cxy:p},minX:w,maxX:w+o[0],minY:u,maxY:u+o[1]}}else{return{minX:0,maxX:0,minY:0,maxY:0}}}};jsPlumbUtil.extend(b,[jsPlumb.DOMElementComponent,g],{getDimensions:function(){return jsPlumb.CurrentLibrary.getSize(jsPlumb.CurrentLibrary.getElementObject(this.getElement()))},setVisible:function(m){this._jsPlumb.div.style.display=m?"block":"none"},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){if(this._jsPlumb.div!=null){jsPlumb.CurrentLibrary.removeElement(this._jsPlumb.div)}},computeMaxSize:function(){var m=f(this);return Math.max(m[0],m[1])},reattachListeners:function(m){if(this._jsPlumb.div){this.reattachListenersForElement(this._jsPlumb.div,this,m)}},paint:function(n,m){if(!this._jsPlumb.initialised){this.getElement();n.component.appendDisplayElement(this._jsPlumb.div);this.attachListeners(this._jsPlumb.div,n.component);this._jsPlumb.initialised=true}this._jsPlumb.div.style.left=(n.component.x+n.d.minx)+"px";this._jsPlumb.div.style.top=(n.component.y+n.d.miny)+"px"}});jsPlumb.Overlays.Custom=function(m){this.type="Custom";b.apply(this,arguments)};jsPlumbUtil.extend(jsPlumb.Overlays.Custom,b);jsPlumb.Overlays.GuideLines=function(){var m=this;m.length=50;m.lineWidth=5;this.type="GuideLines";g.apply(this,arguments);jsPlumb.jsPlumbUIComponent.apply(this,arguments);this.draw=function(o,u){var t=o.pointAlongPathFrom(m.loc,m.length/2),s=o.pointOnPath(m.loc),q=jsPlumbUtil.pointOnLine(t,s,m.length),p=jsPlumbUtil.perpendicularLineTo(t,q,40),n=jsPlumbUtil.perpendicularLineTo(q,t,20);return{connector:o,head:t,tail:q,headLine:n,tailLine:p,minX:Math.min(t.x,q.x,n[0].x,n[1].x),minY:Math.min(t.y,q.y,n[0].y,n[1].y),maxX:Math.max(t.x,q.x,n[0].x,n[1].x),maxY:Math.max(t.y,q.y,n[0].y,n[1].y)}}};jsPlumb.Overlays.Label=function(n){this.labelStyle=n.labelStyle||jsPlumb.Defaults.LabelStyle;this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var m=jsPlumb.extend({create:function(){return document.createElement("div")}},n);jsPlumb.Overlays.Custom.call(this,m);this.type="Label";this.label=n.label||"";this.labelText=null};jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null;this.label=null;this.labelText=null;this.cssClass=null;this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(m){this.label=m;this.labelText=null;this.clearCachedDimensions();this.update();this.component.repaint()},getDimensions:function(){this.update();return b.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var m=this.label(this);this.getElement().innerHTML=m.replace(/\r\n/g,"<br/>")}else{if(this.labelText==null){this.labelText=this.label;this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>")}}}})})();(function(){var a=function(B){this.type="Flowchart";B=B||{};B.stub=B.stub==null?30:B.stub;var p=this,A=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=B.midpoint==null?0.5:B.midpoint,z=[],v=[],d=B.grid,o=B.alwaysRespectStubs,h=null,u=null,t=null,q,g=B.cornerRadius!=null?B.cornerRadius:0,m=function(C){return C<0?-1:C===0?0:1},n=function(G,I,H,F){if(u==I&&t==H){return}var E=u==null?F.sx:u,D=t==null?F.sy:t,C=E==I?"v":"h",K=m(I-E),J=m(H-D);u=I;t=H;G.push([E,D,I,H,C,K,J])},w=function(C){return Math.sqrt(Math.pow(C[0]-C[2],2)+Math.pow(C[1]-C[3],2))},f=function(C){var D=[];D.push.apply(D,C);return D},b=function(C){p.bounds.minX=Math.min(p.bounds.minX,C[2]);p.bounds.maxX=Math.max(p.bounds.maxX,C[2]);p.bounds.minY=Math.min(p.bounds.minY,C[3]);p.bounds.maxY=Math.max(p.bounds.maxY,C[3])},s=function(D,I,C){var K,H;for(var G=0;G<I.length-1;G++){K=K||f(I[G]);H=f(I[G+1]);if(g>0&&K[4]!=H[4]){var O=Math.min(g,w(K),w(H));K[2]-=K[5]*O;K[3]-=K[6]*O;H[0]+=H[5]*O;H[1]+=H[6]*O;var P=(K[6]==H[5]&&H[5]==1)||((K[6]==H[5]&&H[5]===0)&&K[5]!=H[6])||(K[6]==H[5]&&H[5]==-1),L=H[1]>K[3]?1:-1,M=H[0]>K[2]?1:-1,J=L==M,F=(J&&P||(!J&&!P))?H[0]:K[2],E=(J&&P||(!J&&!P))?K[3]:H[1];A.addSegment(D,"Straight",{x1:K[0],y1:K[1],x2:K[2],y2:K[3]});A.addSegment(D,"Arc",{r:O,x1:K[2],y1:K[3],x2:H[0],y2:H[1],cx:F,cy:E,ac:P})}else{var Q=(K[2]==K[0])?0:(K[2]>K[0])?(C.lw/2):-(C.lw/2),N=(K[3]==K[1])?0:(K[3]>K[1])?(C.lw/2):-(C.lw/2);A.addSegment(D,"Straight",{x1:K[0]-Q,y1:K[1]-N,x2:K[2]+Q,y2:K[3]+N})}K=H}A.addSegment(D,"Straight",{x1:H[0],y1:H[1],x2:H[2],y2:H[3]})};this.setSegments=function(C){h=C};this.isEditable=function(){return true};this.getOriginalSegments=function(){return h||v};this._compute=function(E,S){if(S.clearEdits){h=null}if(h!=null){s(this,h,E);return}v=[];u=null;t=null;q=null;var Q=E.startStubX+((E.endStubX-E.startStubX)*e),O=E.startStubY+((E.endStubY-E.startStubY)*e);var M=function(Z,W,U,V){return Z+(W*((1-U)*V)+A.maxStub)},F={x:[0,1],y:[1,0]},I=function(U){return[E.startStubX,E.startStubY,E.endStubX,E.endStubY]},H={perpendicular:I,orthogonal:I,opposite:function(W){var Z=E,V=W=="x"?0:1,U={x:function(){return((Z.so[V]==1&&(((Z.startStubX>Z.endStubX)&&(Z.tx>Z.startStubX))||((Z.sx>Z.endStubX)&&(Z.tx>Z.sx)))))||((Z.so[V]==-1&&(((Z.startStubX<Z.endStubX)&&(Z.tx<Z.startStubX))||((Z.sx<Z.endStubX)&&(Z.tx<Z.sx)))))},y:function(){return((Z.so[V]==1&&(((Z.startStubY>Z.endStubY)&&(Z.ty>Z.startStubY))||((Z.sy>Z.endStubY)&&(Z.ty>Z.sy)))))||((Z.so[V]==-1&&(((Z.startStubY<Z.endStubY)&&(Z.ty<Z.startStubY))||((Z.sy<Z.endStubY)&&(Z.ty<Z.sy)))))}};if(!o&&U[W]()){return{x:[(E.sx+E.tx)/2,E.startStubY,(E.sx+E.tx)/2,E.endStubY],y:[E.startStubX,(E.sy+E.ty)/2,E.endStubX,(E.sy+E.ty)/2]}[W]}else{return[E.startStubX,E.startStubY,E.endStubX,E.endStubY]}}},P={perpendicular:function(W,ai,V,ap,ac){var an=E,ao={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},am={x:[[an.startStubX,an.endStubX],null,[an.endStubX,an.startStubX]],y:[[an.startStubY,an.endStubY],null,[an.endStubY,an.startStubY]]},ag={x:[[Q,an.startStubY],[Q,an.endStubY]],y:[[an.startStubX,O],[an.endStubX,O]]},U={x:[[an.endStubX,an.startStubY]],y:[[an.startStubX,an.endStubY]]},af={x:[[an.startStubX,an.endStubY],[an.endStubX,an.endStubY]],y:[[an.endStubX,an.startStubY],[an.endStubX,an.endStubY]]},al={x:[[an.startStubX,O],[an.endStubX,O],[an.endStubX,an.endStubY]],y:[[Q,an.startStubY],[Q,an.endStubY],[an.endStubX,an.endStubY]]},ak={x:[an.startStubY,an.endStubY],y:[an.startStubX,an.endStubX]},ae=F[W][0],aq=F[W][1],ad=an.so[ae]+1,ah=an.to[aq]+1,Z=(an.to[aq]==-1&&(ak[W][1]<ak[W][0]))||(an.to[aq]==1&&(ak[W][1]>ak[W][0])),ab=am[W][ad][0],aa=am[W][ad][1],aj=ao[W][ad][ah];if(an.segment==aj[3]||(an.segment==aj[2]&&Z)){return ag[W]}else{if(an.segment==aj[2]&&aa<ab){return U[W]}else{if((an.segment==aj[2]&&aa>=ab)||(an.segment==aj[1]&&!Z)){return al[W]}else{if(an.segment==aj[0]||(an.segment==aj[1]&&Z)){return af[W]}}}}},orthogonal:function(aa,Z,ab,V,U){var ac=E,W={x:ac.so[0]==-1?Math.min(Z,V):Math.max(Z,V),y:ac.so[1]==-1?Math.min(Z,V):Math.max(Z,V)}[aa];return{x:[[W,ab],[W,U],[V,U]],y:[[ab,W],[U,W],[U,V]]}[aa]},opposite:function(W,af,V,ad,ae){var ab=E,Z={x:"y",y:"x"}[W],ac={x:"height",y:"width"}[W],U=ab["is"+W.toUpperCase()+"GreaterThanStubTimes2"];if(S.sourceEndpoint.elementId==S.targetEndpoint.elementId){var aa=V+((1-S.sourceEndpoint.anchor[Z])*S.sourceInfo[ac])+A.maxStub;return{x:[[af,aa],[ad,aa]],y:[[aa,af],[aa,ad]]}[W]}else{if(!U||(ab.so[J]==1&&af>ad)||(ab.so[J]==-1&&af<ad)){return{x:[[af,O],[ad,O]],y:[[Q,af],[Q,ad]]}[W]}else{if((ab.so[J]==1&&af<ad)||(ab.so[J]==-1&&af>ad)){return{x:[[Q,ab.sy],[Q,ab.ty]],y:[[ab.sx,O],[ab.tx,O]]}[W]}}}}};var R=H[E.anchorOrientation](E.sourceAxis),J=E.sourceAxis=="x"?0:1,C=E.sourceAxis=="x"?1:0,L=R[J],D=R[C],T=R[J+2],G=R[C+2];n(v,R[0],R[1],E);var K=P[E.anchorOrientation](E.sourceAxis,L,D,T,G);if(K){for(var N=0;N<K.length;N++){n(v,K[N][0],K[N][1],E)}}n(v,R[2],R[3],E);n(v,E.tx,E.ty,E);s(this,v,E)};this.getPath=function(){var G=null,J=null,I=[],D=h||v;for(var F=0;F<D.length;F++){var C=D[F],H=C[4],E=(H=="v"?3:2);if(G!=null&&J===H){G[E]=C[E]}else{if(C[0]!=C[2]||C[1]!=C[3]){I.push({start:[C[0],C[1]],end:[C[2],C[3]]});G=C;J=C[4]}}}return I};this.setPath=function(K){h=[];for(var F=0;F<K.length;F++){var E=K[F].start[0],D=K[F].start[1],H=K[F].end[0],G=K[F].end[1],C=E==H?"v":"h",J=m(H-E),I=m(G-D);h.push([E,D,H,G,C,J,I])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(a,"Flowchart")})();(function(){var e=function(g,m,f,h){this.m=(h-m)/(f-g);this.b=-1*((this.m*g)-m);this.rectIntersect=function(v,u,A,t){var s=[],o,B;o=(u-this.b)/this.m;if(o>=v&&o<=(v+A)){s.push([o,(this.m*o)+this.b])}B=(this.m*(v+A))+this.b;if(B>=u&&B<=(u+t)){s.push([(B-this.b)/this.m,B])}o=((u+t)-this.b)/this.m;if(o>=v&&o<=(v+A)){s.push([o,(this.m*o)+this.b])}B=(this.m*v)+this.b;if(B>=u&&B<=(u+t)){s.push([(B-this.b)/this.m,B])}if(s.length==2){var q=(s[0][0]+s[1][0])/2,p=(s[0][1]+s[1][1])/2;s.push([q,p]);var n=q<=v+(A/2)?-1:1,z=p<=u+(t/2)?-1:1;s.push([n,z]);return s}return null}},b=function(g,m,f,h){if(g<=f&&h<=m){return 1}else{if(g<=f&&m<=h){return 2}else{if(f<=g&&h>=m){return 3}}}return 4},d=function(m,h,o,g,n,s,q,f,p){if(f<=p){return[m,h]}if(o===1){if(g[3]<=0&&n[3]>=1){return[m+(g[2]<0.5?-1*s:s),h]}else{if(g[2]>=1&&n[2]<=0){return[m,h+(g[3]<0.5?-1*q:q)]}else{return[m+(-1*s),h+(-1*q)]}}}else{if(o===2){if(g[3]>=1&&n[3]<=0){return[m+(g[2]<0.5?-1*s:s),h]}else{if(g[2]>=1&&n[2]<=0){return[m,h+(g[3]<0.5?-1*q:q)]}else{return[m+(1*s),h+(-1*q)]}}}else{if(o===3){if(g[3]>=1&&n[3]<=0){return[m+(g[2]<0.5?-1*s:s),h]}else{if(g[2]<=0&&n[2]>=1){return[m,h+(g[3]<0.5?-1*q:q)]}else{return[m+(-1*s),h+(-1*q)]}}}else{if(o===4){if(g[3]<=0&&n[3]>=1){return[m+(g[2]<0.5?-1*s:s),h]}else{if(g[2]<=0&&n[2]>=1){return[m,h+(g[3]<0.5?-1*q:q)]}else{return[m+(1*s),h+(-1*q)]}}}}}}};var a=function(m){m=m||{};this.type="StateMachine";var s=this,p=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),f=m.curviness||10,n=m.margin||5,o=m.proximityLimit||80,g=m.orientation&&m.orientation==="clockwise",h=m.loopbackRadius||25,q=m.showLoopback!==false;this._compute=function(F,aa){var N=Math.abs(aa.sourcePos[0]-aa.targetPos[0]),V=Math.abs(aa.sourcePos[1]-aa.targetPos[1]),L=Math.min(aa.sourcePos[0],aa.targetPos[0]),J=Math.min(aa.sourcePos[1],aa.targetPos[1]);if(!q||(aa.sourceEndpoint.elementId!==aa.targetEndpoint.elementId)){var E=aa.sourcePos[0]<aa.targetPos[0]?0:N,B=aa.sourcePos[1]<aa.targetPos[1]?0:V,Q=aa.sourcePos[0]<aa.targetPos[0]?N:0,O=aa.sourcePos[1]<aa.targetPos[1]?V:0;if(aa.sourcePos[2]===0){E-=n}if(aa.sourcePos[2]===1){E+=n}if(aa.sourcePos[3]===0){B-=n}if(aa.sourcePos[3]===1){B+=n}if(aa.targetPos[2]===0){Q-=n}if(aa.targetPos[2]===1){Q+=n}if(aa.targetPos[3]===0){O-=n}if(aa.targetPos[3]===1){O+=n}var K=(E+Q)/2,H=(B+O)/2,t=(-1*K)/H,R=Math.atan(t),M=(t==Infinity||t==-Infinity)?0:Math.abs(f/2*Math.sin(R)),P=(t==Infinity||t==-Infinity)?0:Math.abs(f/2*Math.cos(R)),u=b(E,B,Q,O),G=Math.sqrt(Math.pow(Q-E,2)+Math.pow(O-B,2)),I=d(K,H,u,aa.sourcePos,aa.targetPos,f,f,G,o);p.addSegment(this,"Bezier",{x1:Q,y1:O,x2:E,y2:B,cp1x:I[0],cp1y:I[1],cp2x:I[0],cp2y:I[1]})}else{var Z=aa.sourcePos[0],U=aa.sourcePos[0],D=aa.sourcePos[1]-n,A=aa.sourcePos[1]-n,C=Z,z=D-h,W=2*h,v=2*h,T=C-h,S=z-h;F.points[0]=T;F.points[1]=S;F.points[2]=W;F.points[3]=v;p.addSegment(this,"Arc",{x1:(Z-T)+4,y1:D-S,startAngle:0,endAngle:2*Math.PI,r:h,ac:!g,x2:(Z-T)-4,y2:D-S,cx:C-T,cy:z-S})}}};jsPlumb.registerConnectorType(a,"StateMachine")})();(function(){var a=function(h){h=h||{};var d=this,f=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),g=h.stub||50,b=h.curviness||150,e=10;this.type="Bezier";this.getCurviness=function(){return b};this._findControlPoint=function(w,m,t,n,q){var u=n.anchor.getOrientation(n),v=q.anchor.getOrientation(q),s=u[0]!=v[0]||u[1]==v[1],o=[];if(!s){if(u[0]===0){o.push(m[0]<t[0]?w[0]+e:w[0]-e)}else{o.push(w[0]-(b*u[0]))}if(u[1]===0){o.push(m[1]<t[1]?w[1]+e:w[1]-e)}else{o.push(w[1]+(b*v[1]))}}else{if(v[0]===0){o.push(t[0]<m[0]?w[0]+e:w[0]-e)}else{o.push(w[0]+(b*v[0]))}if(v[1]===0){o.push(t[1]<m[1]?w[1]+e:w[1]-e)}else{o.push(w[1]+(b*u[1]))}}return o};this._compute=function(s,o){var q=o.sourcePos,z=o.targetPos,A=Math.abs(q[0]-z[0]),u=Math.abs(q[1]-z[1]),v=q[0]<z[0]?A:0,t=q[1]<z[1]?u:0,n=q[0]<z[0]?0:A,m=q[1]<z[1]?0:u,B=d._findControlPoint([v,t],q,z,o.sourceEndpoint,o.targetEndpoint),w=d._findControlPoint([n,m],z,q,o.targetEndpoint,o.sourceEndpoint);f.addSegment(this,"Bezier",{x1:v,y1:t,x2:n,y2:m,cp1x:B[0],cp1y:B[1],cp2x:w[0],cp2y:w[1]})}};jsPlumb.registerConnectorType(a,"Bezier")})();(function(){var g=null,q=function(z,w){return jsPlumb.CurrentLibrary.hasClass(a(z),w)},a=function(w){return jsPlumb.CurrentLibrary.getElementObject(w)},u=function(w){return jsPlumb.CurrentLibrary.getOffset(a(w))},v=function(w){return jsPlumb.CurrentLibrary.getPageXY(w)},m=function(w){return jsPlumb.CurrentLibrary.getClientXY(w)};var s=window.CanvasMouseAdapter=function(){var A=this;A.overlayPlacements=[];jsPlumb.jsPlumbUIComponent.apply(this,arguments);jsPlumbUtil.EventGenerator.apply(this,arguments);this._over=function(H){var J=u(a(A.canvas)),L=v(H),E=L[0]-J.left,K=L[1]-J.top;if(E>0&&K>0&&E<A.canvas.width&&K<A.canvas.height){for(var F=0;F<A.overlayPlacements.length;F++){var G=A.overlayPlacements[F];if(G&&(G[0]<=E&&G[1]>=E&&G[2]<=K&&G[3]>=K)){return true}}var I=A.canvas.getContext("2d").getImageData(parseInt(E,10),parseInt(K,10),1,1);return I.data[0]!==0||I.data[1]!==0||I.data[2]!==0||I.data[3]!==0}return false};var z=false,w=false,D=null,C=false,B=function(F,E){return F!==null&&q(F,E)};this.mousemove=function(H){var J=v(H),G=m(H),F=document.elementFromPoint(G[0],G[1]),I=B(F,"_jsPlumb_overlay");var E=g===null&&(B(F,"_jsPlumb_endpoint")||B(F,"_jsPlumb_connector"));if(!z&&E&&A._over(H)){z=true;A.fire("mouseenter",A,H);return true}else{if(z&&(!A._over(H)||!E)&&!I){z=false;A.fire("mouseexit",A,H)}}A.fire("mousemove",A,H)};this.click=function(E){if(z&&A._over(E)&&!C){A.fire("click",A,E)}C=false};this.dblclick=function(E){if(z&&A._over(E)&&!C){A.fire("dblclick",A,E)}C=false};this.mousedown=function(E){if(A._over(E)&&!w){w=true;D=u(a(A.canvas));A.fire("mousedown",A,E)}};this.mouseup=function(E){w=false;A.fire("mouseup",A,E)};this.contextmenu=function(E){if(z&&A._over(E)&&!C){A.fire("contextmenu",A,E)}C=false}};jsPlumbUtil.extend(s,[jsPlumb.jsPlumbUIComponent,jsPlumbUtil.EventGenerator]);var f=function(z){var w=document.createElement("canvas");z._jsPlumb.instance.appendElement(w,z.parent);w.style.position="absolute";if(z["class"]){w.className=z["class"]}z._jsPlumb.instance.getId(w,z.uuid);if(z.tooltip){w.setAttribute("title",z.tooltip)}return w};var t=window.CanvasComponent=function(z){s.apply(this,arguments);var w=[];this.getDisplayElements=function(){return w};this.appendDisplayElement=function(A){w.push(A)}};jsPlumbUtil.extend(t,s);var b=[null,[1,-1],[1,1],[-1,1],[-1,-1]];var e=function(w,A,C){if(A.gradient){var B=C();for(var z=0;z<A.gradient.stops.length;z++){B.addColorStop(A.gradient.stops[z][0],A.gradient.stops[z][1])}w.strokeStyle=B}};var p=function(C,z,B,A,w){({Straight:function(E,Q,T,K,J){var W=E.params;Q.save();e(Q,T,function(){return Q.createLinearGradient(W.x1,W.y1,W.x2,W.y2)});Q.beginPath();Q.translate(K,J);if(T.dashstyle&&T.dashstyle.split(" ").length===2){var O=T.dashstyle.split(" ");if(O.length!==2){O=[2,2]}var D=[O[0]*T.lineWidth,O[1]*T.lineWidth],P=(W.x2-W.x1)/(W.y2-W.y1),M=jsPlumbUtil.segment([W.x1,W.y1],[W.x2,W.y2]),U=b[M],I=Math.atan(P),R=Math.sqrt(Math.pow(W.x2-W.x1,2)+Math.pow(W.y2-W.y1,2)),H=Math.floor(R/(D[0]+D[1])),V=[W.x1,W.y1];for(var S=0;S<H;S++){Q.moveTo(V[0],V[1]);var N=V[0]+(Math.abs(Math.sin(I)*D[0])*U[0]),L=V[1]+(Math.abs(Math.cos(I)*D[0])*U[1]),G=V[0]+(Math.abs(Math.sin(I)*(D[0]+D[1]))*U[0]),F=V[1]+(Math.abs(Math.cos(I)*(D[0]+D[1]))*U[1]);Q.lineTo(N,L);V=[G,F]}Q.moveTo(V[0],V[1]);Q.lineTo(W.x2,W.y2)}else{Q.moveTo(W.x1,W.y1);Q.lineTo(W.x2,W.y2)}Q.stroke();Q.restore()},Bezier:function(H,E,G,F,D){var I=H.params;E.save();e(E,G,function(){return E.createLinearGradient(I.x2+F,I.y2+D,I.x1+F,I.y1+D)});E.beginPath();E.translate(F,D);E.moveTo(I.x1,I.y1);E.bezierCurveTo(I.cp1x,I.cp1y,I.cp2x,I.cp2y,I.x2,I.y2);E.stroke();E.restore()},Arc:function(H,E,G,F,D){var I=H.params;E.save();E.beginPath();E.translate(F,D);E.arc(I.cx,I.cy,I.r,H.startAngle,H.endAngle,I.ac);E.stroke();E.restore()}})[C.type](C,z,B,A,w)};var o=jsPlumb.ConnectorRenderers.canvas=function(A){t.apply(this,arguments);var w=function(F,C,B){this.ctx.save();jsPlumb.extend(this.ctx,F);var D=this.getSegments();for(var E=0;E<D.length;E++){p(D[E],this.ctx,F,C,B)}this.ctx.restore()}.bind(this);var z=this._jsPlumb.instance.connectorClass+" "+(A.cssClass||"");this.canvas=f({"class":z,_jsPlumb:this._jsPlumb,parent:A.parent});this.ctx=this.canvas.getContext("2d");this.appendDisplayElement(this.canvas);this.paint=function(B,E,H){if(B!=null){var K=[this.x,this.y],C=[this.w,this.h],D,L=0,J=0;if(H!=null){if(H.xmin<0){K[0]+=H.xmin;L=-H.xmin}if(H.ymin<0){K[1]+=H.ymin;J=-H.ymin}C[0]=H.xmax+((H.xmin<0)?-H.xmin:0);C[1]=H.ymax+((H.ymin<0)?-H.ymin:0)}this.translateX=L;this.translateY=J;jsPlumbUtil.sizeElement(this.canvas,K[0],K[1],C[0],C[1]);if(B.outlineColor!=null){var G=B.outlineWidth||1,I=B.lineWidth+(2*G),F={strokeStyle:B.outlineColor,lineWidth:I};w(F,L,J)}w(B,L,J)}}};jsPlumbUtil.extend(o,t);var d=function(A){t.apply(this,arguments);var z=this._jsPlumb.instance.endpointClass+" "+(A.cssClass||""),w={"class":z,_jsPlumb:this._jsPlumb,parent:A.parent,tooltip:self.tooltip};this.canvas=f(w);this.ctx=this.canvas.getContext("2d");this.appendDisplayElement(this.canvas);this.paint=function(D,B,G){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h);if(D.outlineColor!=null){var F=D.outlineWidth||1,C=D.lineWidth+(2*F);var E={strokeStyle:D.outlineColor,lineWidth:C}}this._paint.apply(this,arguments)}};jsPlumbUtil.extend(d,t);jsPlumb.Endpoints.canvas.Dot=function(B){jsPlumb.Endpoints.Dot.apply(this,arguments);d.apply(this,arguments);var A=this,z=function(C){try{return parseInt(C,10)}catch(D){if(C.substring(C.length-1)=="%"){return parseInt(C.substring(0,C-1),10)}}},w=function(E){var C=A.defaultOffset,D=A.defaultInnerRadius;if(E.offset){C=z(E.offset)}if(E.innerRadius){D=z(E.innerRadius)}return[C,D]};this._paint=function(G){if(G!=null){var C=A.canvas.getContext("2d"),D=B.endpoint.anchor.getOrientation(B.endpoint);jsPlumb.extend(C,G);if(G.gradient){var J=w(G.gradient),I=D[1]==1?J[0]*-1:J[0],F=D[0]==1?J[0]*-1:J[0],H=C.createRadialGradient(A.radius,A.radius,A.radius,A.radius+F,A.radius+I,J[1]);for(var E=0;E<G.gradient.stops.length;E++){H.addColorStop(G.gradient.stops[E][0],G.gradient.stops[E][1])}C.fillStyle=H}C.beginPath();C.arc(A.radius,A.radius,A.radius,0,Math.PI*2,true);C.closePath();if(G.fillStyle||G.gradient){C.fill()}if(G.strokeStyle){C.stroke()}}}};jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Dot,[jsPlumb.Endpoints.Dot,d]);jsPlumb.Endpoints.canvas.Rectangle=function(z){var w=this;jsPlumb.Endpoints.Rectangle.apply(this,arguments);d.apply(this,arguments);this._paint=function(A){var I=w.canvas.getContext("2d"),D=z.endpoint.anchor.getOrientation(z.endpoint);jsPlumb.extend(I,A);if(A.gradient){var H=D[1]==1?w.h:D[1]===0?w.h/2:0;var G=D[1]==-1?w.h:D[1]===0?w.h/2:0;var C=D[0]==1?w.w:D[0]===0?w.w/2:0;var B=D[0]==-1?w.w:D[0]===0?w.w/2:0;var F=I.createLinearGradient(C,H,B,G);for(var E=0;E<A.gradient.stops.length;E++){F.addColorStop(A.gradient.stops[E][0],A.gradient.stops[E][1])}I.fillStyle=F}I.beginPath();I.rect(0,0,w.w,w.h);I.closePath();if(A.fillStyle||A.gradient){I.fill()}if(A.strokeStyle){I.stroke()}}};jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Rectangle,[jsPlumb.Endpoints.Rectangle,d]);jsPlumb.Endpoints.canvas.Triangle=function(z){var w=this;jsPlumb.Endpoints.Triangle.apply(this,arguments);d.apply(this,arguments);this._paint=function(D){var B=w.canvas.getContext("2d"),A=0,F=0,E=0,C=z.endpoint.anchor.getOrientation(z.endpoint);if(C[0]==1){A=w.width;F=w.height;E=180}if(C[1]==-1){A=w.width;E=90}if(C[1]==1){F=w.height;E=-90}B.fillStyle=D.fillStyle;B.translate(A,F);B.rotate(E*Math.PI/180);B.beginPath();B.moveTo(0,0);B.lineTo(w.width/2,w.height/2);B.lineTo(0,w.height);B.closePath();if(D.fillStyle||D.gradient){B.fill()}if(D.strokeStyle){B.stroke()}}};jsPlumbUtil.extend(jsPlumb.Endpoints.canvas.Triangle,[jsPlumb.Endpoints.Triangle,d]);jsPlumb.Endpoints.canvas.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.canvas.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.canvas.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.canvas.Custom=jsPlumb.Overlays.Custom;var n=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments)};jsPlumbUtil.extend(n,jsPlumb.jsPlumbUIComponent);var h=function(z,w){z.apply(this,w);n.apply(this,w);this.paint=function(D,B){var A=D.component.ctx,C=D.d;if(C){A.save();A.lineWidth=D.lineWidth;A.beginPath();A.translate(D.component.translateX,D.component.translateY);A.moveTo(C.hxy.x,C.hxy.y);A.lineTo(C.tail[0].x,C.tail[0].y);A.lineTo(C.cxy.x,C.cxy.y);A.lineTo(C.tail[1].x,C.tail[1].y);A.lineTo(C.hxy.x,C.hxy.y);A.closePath();if(D.strokeStyle){A.strokeStyle=D.strokeStyle;A.stroke()}if(D.fillStyle){A.fillStyle=D.fillStyle;A.fill()}A.restore()}}};jsPlumb.Overlays.canvas.Arrow=function(){h.apply(this,[jsPlumb.Overlays.Arrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.canvas.Arrow,[jsPlumb.Overlays.Arrow,n]);jsPlumb.Overlays.canvas.PlainArrow=function(){h.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.canvas.PlainArrow,[jsPlumb.Overlays.PlainArrow,n]);jsPlumb.Overlays.canvas.Diamond=function(){h.apply(this,[jsPlumb.Overlays.Diamond,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.canvas.Diamond,[jsPlumb.Overlays.Diamond,n])})();(function(){var p={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},D="stroke-dasharray",I="dashstyle",f="linearGradient",b="radialGradient",d="fill",a="stop",H="stroke",v="stroke-width",m="style",q="none",A="jsplumb_gradient_",t="lineWidth",K={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},h=function(N,L){for(var M in L){N.setAttribute(M,""+L[M])}},g=function(M,L){var N=document.createElementNS(K.svg,M);L=L||{};L.version="1.1";L.xmlns=K.xhtml;h(N,L);return N},s=function(L){return"position:absolute;left:"+L[0]+"px;top:"+L[1]+"px"},n=function(M){for(var L=0;L<M.childNodes.length;L++){if(M.childNodes[L].tagName==f||M.childNodes[L].tagName==b){M.removeChild(M.childNodes[L])}}},C=function(V,Q,N,L,R){var O=A+R._jsPlumb.instance.idstamp();n(V);var T;if(!N.gradient.offset){T=g(f,{id:O,gradientUnits:"userSpaceOnUse"})}else{T=g(b,{id:O})}V.appendChild(T);for(var S=0;S<N.gradient.stops.length;S++){var P=R.segment==1||R.segment==2?S:N.gradient.stops.length-1-S,U=jsPlumbUtil.convertStyle(N.gradient.stops[P][1],true),W=g(a,{offset:Math.floor(N.gradient.stops[S][0]*100)+"%","stop-color":U});T.appendChild(W)}var M=N.strokeStyle?H:d;Q.setAttribute(m,M+":url(#"+O+")")},E=function(S,O,M,L,P){if(M.gradient){C(S,O,M,L,P)}else{n(S);O.setAttribute(m,"")}O.setAttribute(d,M.fillStyle?jsPlumbUtil.convertStyle(M.fillStyle,true):q);O.setAttribute(H,M.strokeStyle?jsPlumbUtil.convertStyle(M.strokeStyle,true):q);if(M.lineWidth){O.setAttribute(v,M.lineWidth)}if(M[I]&&M[t]&&!M[D]){var T=M[I].indexOf(",")==-1?" ":",",Q=M[I].split(T),N="";Q.forEach(function(U){N+=(Math.floor(U*M.lineWidth)+T)});O.setAttribute(D,N)}else{if(M[D]){O.setAttribute(D,M[D])}}for(var R in p){if(M[R]){O.setAttribute(p[R],M[R])}}},J=function(N){var L=/([0-9].)(p[xt])\s(.*)/,M=N.match(L);return{size:M[1]+M[2],font:M[3]}},w=function(Q,R,M){var S=M.split(" "),P=Q.className,O=P.baseVal.split(" ");for(var N=0;N<S.length;N++){if(R){if(O.indexOf(S[N])==-1){O.push(S[N])}}else{var L=O.indexOf(S[N]);if(L!=-1){O.splice(L,1)}}}Q.className.baseVal=O.join(" ")},B=function(M,L){w(M,true,L)},o=function(M,L){w(M,false,L)},G=function(M,N,L){if(M.childNodes.length>L){M.insertBefore(N,M.childNodes[L])}else{M.appendChild(N)}};jsPlumbUtil.svg={addClass:B,removeClass:o,node:g,attr:h,pos:s};var z=function(P){var N=P.pointerEventsSpec||"all",O={};jsPlumb.jsPlumbUIComponent.apply(this,P.originalArgs);this.canvas=null;this.path=null;this.svg=null;var M=P.cssClass+" "+(P.originalArgs[0].cssClass||""),Q={style:"",width:0,height:0,"pointer-events":N,position:"absolute"};this.svg=g("svg",Q);if(P.useDivWrapper){this.canvas=document.createElement("div");this.canvas.style.position="absolute";jsPlumbUtil.sizeElement(this.canvas,0,0,1,1);this.canvas.className=M}else{h(this.svg,{"class":M});this.canvas=this.svg}P._jsPlumb.appendElement(this.canvas,P.originalArgs[0].parent);if(P.useDivWrapper){this.canvas.appendChild(this.svg)}var L=[this.canvas];this.getDisplayElements=function(){return L};this.appendDisplayElement=function(R){L.push(R)};this.paint=function(T,S,U){if(T!=null){var W=[this.x,this.y],R=[this.w,this.h],V;if(U!=null){if(U.xmin<0){W[0]+=U.xmin}if(U.ymin<0){W[1]+=U.ymin}R[0]=U.xmax+((U.xmin<0)?-U.xmin:0);R[1]=U.ymax+((U.ymin<0)?-U.ymin:0)}if(P.useDivWrapper){jsPlumbUtil.sizeElement(this.canvas,W[0],W[1],R[0],R[1]);W[0]=0;W[1]=0;V=s([0,0])}else{V=s([W[0],W[1]])}O.paint.apply(this,arguments);h(this.svg,{style:V,width:R[0],height:R[1]})}};return{renderer:O}};jsPlumbUtil.extend(z,jsPlumb.jsPlumbUIComponent,{cleanup:function(){jsPlumbUtil.removeElement(this.canvas);this.svg=null;this.canvas=null;this.path=null}});var e=jsPlumb.ConnectorRenderers.svg=function(N){var L=this,M=z.apply(this,[{cssClass:N._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:N._jsPlumb}]);M.renderer.paint=function(O,S,Z){var T=L.getSegments(),P="",Q=[0,0];if(Z.xmin<0){Q[0]=-Z.xmin}if(Z.ymin<0){Q[1]=-Z.ymin}for(var R=0;R<T.length;R++){P+=jsPlumb.Segments.svg.SegmentRenderer.getPath(T[R]);P+=" "}var aa={d:P,transform:"translate("+Q[0]+","+Q[1]+")","pointer-events":N["pointer-events"]||"visibleStroke"},V=null,U=[L.x,L.y,L.w,L.h];if(O.outlineColor){var W=O.outlineWidth||1,ab=O.lineWidth+(2*W);V=jsPlumb.CurrentLibrary.extend({},O);V.strokeStyle=jsPlumbUtil.convertStyle(O.outlineColor);V.lineWidth=ab;if(L.bgPath==null){L.bgPath=g("path",aa);G(L.svg,L.bgPath,0);L.attachListeners(L.bgPath,L)}else{h(L.bgPath,aa)}E(L.svg,L.bgPath,V,U,L)}if(L.path==null){L.path=g("path",aa);G(L.svg,L.path,O.outlineColor?1:0);L.attachListeners(L.path,L)}else{h(L.path,aa)}E(L.svg,L.path,O,U,L)};this.reattachListeners=function(){if(this.bgPath){this.reattachListenersForElement(this.bgPath,this)}if(this.path){this.reattachListenersForElement(this.path,this)}}};jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,z);jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(L){return({Straight:function(){var M=L.getCoordinates();return"M "+M.x1+" "+M.y1+" L "+M.x2+" "+M.y2},Bezier:function(){var M=L.params;return"M "+M.x1+" "+M.y1+" C "+M.cp1x+" "+M.cp1y+" "+M.cp2x+" "+M.cp2y+" "+M.x2+" "+M.y2},Arc:function(){var O=L.params,M=L.sweep>Math.PI?1:0,N=L.anticlockwise?0:1;return"M"+L.x1+" "+L.y1+" A "+L.radius+" "+O.r+" 0 "+M+","+N+" "+L.x2+" "+L.y2}})[L.type]()}}};var F=window.SvgEndpoint=function(M){var L=z.apply(this,[{cssClass:M._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:true,_jsPlumb:M._jsPlumb}]);L.renderer.paint=function(O){var N=jsPlumb.extend({},O);if(N.outlineColor){N.strokeWidth=N.outlineWidth;N.strokeStyle=jsPlumbUtil.convertStyle(N.outlineColor,true)}if(this.node==null){this.node=this.makeNode(N);this.svg.appendChild(this.node);this.attachListeners(this.node,this)}else{if(this.updateNode!=null){this.updateNode(this.node)}}E(this.svg,this.node,N,[this.x,this.y,this.w,this.h],this);s(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(F,z,{reattachListeners:function(){if(this.node){this.reattachListenersForElement(this.node,this)}}});jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments);F.apply(this,arguments);this.makeNode=function(L){return g("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})};this.updateNode=function(L){h(L,{cx:this.w/2,cy:this.h/2,r:this.radius})}};jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,F]);jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments);F.apply(this,arguments);this.makeNode=function(L){return g("rect",{width:this.w,height:this.h})};this.updateNode=function(L){h(L,{width:this.w,height:this.h})}};jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,F]);jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var u=function(O,N){O.apply(this,N);jsPlumb.jsPlumbUIComponent.apply(this,N);this.isAppendedAtTopLevel=false;var L=this;this.path=null;this.paint=function(S,P){if(S.component.svg&&P){if(this.path==null){this.path=g("path",{"pointer-events":"all"});S.component.svg.appendChild(this.path);this.attachListeners(this.path,S.component);this.attachListeners(this.path,this)}var Q=N&&(N.length==1)?(N[0].cssClass||""):"",R=[0,0];if(P.xmin<0){R[0]=-P.xmin}if(P.ymin<0){R[1]=-P.ymin}h(this.path,{d:M(S.d),"class":Q,stroke:S.strokeStyle?S.strokeStyle:null,fill:S.fillStyle?S.fillStyle:null,transform:"translate("+R[0]+","+R[1]+")"})}};var M=function(P){return"M"+P.hxy.x+","+P.hxy.y+" L"+P.tail[0].x+","+P.tail[0].y+" L"+P.cxy.x+","+P.cxy.y+" L"+P.tail[1].x+","+P.tail[1].y+" L"+P.hxy.x+","+P.hxy.y};this.reattachListeners=function(){if(this.path){this.reattachListenersForElement(this.path,this)}}};jsPlumbUtil.extend(u,jsPlumb.jsPlumbUIComponent,{cleanup:function(){if(this.path!=null){jsPlumb.CurrentLibrary.removeElement(this.path)}}});jsPlumb.Overlays.svg.Arrow=function(){u.apply(this,[jsPlumb.Overlays.Arrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,u]);jsPlumb.Overlays.svg.PlainArrow=function(){u.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,u]);jsPlumb.Overlays.svg.Diamond=function(){u.apply(this,[jsPlumb.Overlays.Diamond,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,u]);jsPlumb.Overlays.svg.GuideLines=function(){var P=null,L=this,O,N;jsPlumb.Overlays.GuideLines.apply(this,arguments);this.paint=function(S,Q){if(P==null){P=g("path");S.connector.svg.appendChild(P);L.attachListeners(P,S.connector);L.attachListeners(P,L);O=g("path");S.connector.svg.appendChild(O);L.attachListeners(O,S.connector);L.attachListeners(O,L);N=g("path");S.connector.svg.appendChild(N);L.attachListeners(N,S.connector);L.attachListeners(N,L)}var R=[0,0];if(Q.xmin<0){R[0]=-Q.xmin}if(Q.ymin<0){R[1]=-Q.ymin}h(P,{d:M(S.head,S.tail),stroke:"red",fill:null,transform:"translate("+R[0]+","+R[1]+")"});h(O,{d:M(S.tailLine[0],S.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+R[0]+","+R[1]+")"});h(N,{d:M(S.headLine[0],S.headLine[1]),stroke:"green",fill:null,transform:"translate("+R[0]+","+R[1]+")"})};var M=function(R,Q){return"M "+R.x+","+R.y+" L"+Q.x+","+Q.y}};jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)})();(function(){var m={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},d=null;if(document.createStyleSheet&&document.namespaces){var p=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],h="behavior:url(#default#VML);position:absolute;";d=document.createStyleSheet();for(var v=0;v<p.length;v++){d.addRule(p[v],h)}document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var z=1000,w={},a=function(B,A){var D=jsPlumb.getId(B),C=w[D];if(!C){C=g("group",[0,0,z,z],{"class":A});C.style.backgroundColor="red";w[D]=C}return C},f=function(B,C){for(var A in C){B[A]=C[A]}},g=function(B,F,G,D,A,C){G=G||{};var E=document.createElement("jsplumb:"+B);if(C){A.appendElement(E,D)}else{jsPlumb.CurrentLibrary.appendElement(E,D)}E.className=(G["class"]?G["class"]+" ":"")+"jsplumb_vml";n(E,F);f(E,G);return E},n=function(B,A,C){B.style.left=A[0]+"px";B.style.top=A[1]+"px";B.style.width=A[2]+"px";B.style.height=A[3]+"px";B.style.position="absolute";if(C){B.style.zIndex=C}},t=jsPlumb.vml.convertValue=function(A){return Math.floor(A*z)},b=function(D,B,C,A){if("transparent"===B){A.setOpacity(C,"0.0")}else{A.setOpacity(C,"1.0")}},u=function(E,A,H,I){var D={};if(A.strokeStyle){D.stroked="true";var J=jsPlumbUtil.convertStyle(A.strokeStyle,true);D.strokecolor=J;b(D,J,"stroke",H);D.strokeweight=A.lineWidth+"px"}else{D.stroked="false"}if(A.fillStyle){D.filled="true";var B=jsPlumbUtil.convertStyle(A.fillStyle,true);D.fillcolor=B;b(D,B,"fill",H)}else{D.filled="false"}if(A.dashstyle){if(H.strokeNode==null){H.strokeNode=g("stroke",[0,0,0,0],{dashstyle:A.dashstyle},E,I)}else{H.strokeNode.dashstyle=A.dashstyle}}else{if(A["stroke-dasharray"]&&A.lineWidth){var K=A["stroke-dasharray"].indexOf(",")==-1?" ":",",F=A["stroke-dasharray"].split(K),C="";for(var G=0;G<F.length;G++){C+=(Math.floor(F[G]/A.lineWidth)+K)}if(H.strokeNode==null){H.strokeNode=g("stroke",[0,0,0,0],{dashstyle:C},E,I)}else{H.strokeNode.dashstyle=C}}}f(E,D)},q=function(){var A=this,C={};jsPlumb.jsPlumbUIComponent.apply(this,arguments);this.opacityNodes={stroke:null,fill:null};this.initOpacityNodes=function(D){A.opacityNodes.stroke=g("stroke",[0,0,1,1],{opacity:"0.0"},D,A._jsPlumb.instance);A.opacityNodes.fill=g("fill",[0,0,1,1],{opacity:"0.0"},D,A._jsPlumb.instance)};this.setOpacity=function(D,F){var E=A.opacityNodes[D];if(E){E.opacity=""+F}};var B=[];this.getDisplayElements=function(){return B};this.appendDisplayElement=function(E,D){if(!D){A.canvas.parentNode.appendChild(E)}B.push(E)}};jsPlumbUtil.extend(q,jsPlumb.jsPlumbUIComponent,{cleanup:function(){if(this.bgCanvas){jsPlumbUtil.removeElement(this.bgCanvas)}jsPlumbUtil.removeElement(this.canvas)}});var e=jsPlumb.ConnectorRenderers.vml=function(B){this.strokeNode=null;this.canvas=null;q.apply(this,arguments);var A=this._jsPlumb.instance.connectorClass+(B.cssClass?(" "+B.cssClass):"");this.paint=function(D){if(D!==null){this.w=Math.max(this.w,1);this.h=Math.max(this.h,1);var G=this.getSegments(),E={path:""},H=[this.x,this.y,this.w,this.h];for(var F=0;F<G.length;F++){E.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(G[F]);E.path+=" "}if(D.outlineColor){var J=D.outlineWidth||1,K=D.lineWidth+(2*J),I={strokeStyle:jsPlumbUtil.convertStyle(D.outlineColor),lineWidth:K};for(var C in m){I[C]=D[C]}if(this.bgCanvas==null){E["class"]=A;E.coordsize=(H[2]*z)+","+(H[3]*z);this.bgCanvas=g("shape",H,E,B.parent,this._jsPlumb.instance,true);n(this.bgCanvas,H);this.appendDisplayElement(this.bgCanvas,true);this.attachListeners(this.bgCanvas,this);this.initOpacityNodes(this.bgCanvas,["stroke"])}else{E.coordsize=(H[2]*z)+","+(H[3]*z);n(this.bgCanvas,H);f(this.bgCanvas,E)}u(this.bgCanvas,I,this)}if(this.canvas==null){E["class"]=A;E.coordsize=(H[2]*z)+","+(H[3]*z);this.canvas=g("shape",H,E,B.parent,this._jsPlumb.instance,true);this.appendDisplayElement(this.canvas,true);this.attachListeners(this.canvas,this);this.initOpacityNodes(this.canvas,["stroke"])}else{E.coordsize=(H[2]*z)+","+(H[3]*z);n(this.canvas,H);f(this.canvas,E)}u(this.canvas,D,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(e,q,{reattachListeners:function(){if(this.canvas){this.reattachListenersForElement(this.canvas,this)}}});var o=window.VmlEndpoint=function(A){q.apply(this,arguments);this._jsPlumb.vml=null;this.canvas=document.createElement("div");this.canvas.style.position="absolute";this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(A.cssClass?(" "+A.cssClass):"");A._jsPlumb.appendElement(this.canvas,A.parent);this.paint=function(D,C){var E={},B=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h);if(this._jsPlumb.vml==null){E["class"]=this._jsPlumb.clazz;B=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],E,C,this.canvas,this._jsPlumb.instance);this.attachListeners(B,this);this.appendDisplayElement(B,true);this.appendDisplayElement(this.canvas,true);this.initOpacityNodes(B,["fill"])}else{n(B,[0,0,this.w,this.h]);f(B,E)}u(B,D,this)}};jsPlumbUtil.extend(o,q,{reattachListeners:function(){if(this._jsPlumb.vml){this.reattachListenersForElement(this._jsPlumb.vml,this)}}});jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(A){return({Straight:function(B){var C=B.params;return"m"+t(C.x1)+","+t(C.y1)+" l"+t(C.x2)+","+t(C.y2)+" e"},Bezier:function(B){var C=B.params;return"m"+t(C.x1)+","+t(C.y1)+" c"+t(C.cp1x)+","+t(C.cp1y)+","+t(C.cp2x)+","+t(C.cp2y)+","+t(C.x2)+","+t(C.y2)+" e"},Arc:function(G){var I=G.params,B=Math.min(I.x1,I.x2),F=Math.max(I.x1,I.x2),J=Math.min(I.y1,I.y2),D=Math.max(I.y1,I.y2),H=G.anticlockwise?1:0,C=(G.anticlockwise?"at ":"wa "),E=function(){var K=[null,[function(){return[B,J]},function(){return[B-I.r,J-I.r]}],[function(){return[B-I.r,J]},function(){return[B,J-I.r]}],[function(){return[B-I.r,J-I.r]},function(){return[B,J]}],[function(){return[B,J-I.r]},function(){return[B-I.r,J]}]][G.segment][H]();return t(K[0])+","+t(K[1])+","+t(K[0]+(2*I.r))+","+t(K[1]+(2*I.r))};return C+E()+","+t(I.x1)+","+t(I.y1)+","+t(I.x2)+","+t(I.y2)+" e"}})[A.type](A)}}};jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments);o.apply(this,arguments);this.getVml=function(D,E,B,C,A){return g("oval",D,E,C,A)}};jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o);jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments);o.apply(this,arguments);this.getVml=function(D,E,B,C,A){return g("rect",D,E,C,A)}};jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o);jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var s=function(E,C){E.apply(this,C);q.apply(this,C);var B=this,D=null;B.canvas=null;B.isAppendedAtTopLevel=true;var A=function(F){return"m "+t(F.hxy.x)+","+t(F.hxy.y)+" l "+t(F.tail[0].x)+","+t(F.tail[0].y)+" "+t(F.cxy.x)+","+t(F.cxy.y)+" "+t(F.tail[1].x)+","+t(F.tail[1].y)+" x e"};this.paint=function(J,K){var G={},P=J.d,I=J.component;if(J.strokeStyle){G.stroked="true";G.strokecolor=jsPlumbUtil.convertStyle(J.strokeStyle,true)}if(J.lineWidth){G.strokeweight=J.lineWidth+"px"}if(J.fillStyle){G.filled="true";G.fillcolor=J.fillStyle}var F=Math.min(P.hxy.x,P.tail[0].x,P.tail[1].x,P.cxy.x),S=Math.min(P.hxy.y,P.tail[0].y,P.tail[1].y,P.cxy.y),L=Math.max(P.hxy.x,P.tail[0].x,P.tail[1].x,P.cxy.x),H=Math.max(P.hxy.y,P.tail[0].y,P.tail[1].y,P.cxy.y),R=Math.abs(L-F),N=Math.abs(H-S),M=[F,S,R,N];G.path=A(P);G.coordsize=(I.w*z)+","+(I.h*z);M[0]=I.x;M[1]=I.y;M[2]=I.w;M[3]=I.h;if(B.canvas==null){var Q=I._jsPlumb.overlayClass||"";var O=C&&(C.length==1)?(C[0].cssClass||""):"";G["class"]=O+" "+Q;B.canvas=g("shape",M,G,I.canvas.parentNode,I._jsPlumb.instance,true);I.appendDisplayElement(B.canvas,true);B.attachListeners(B.canvas,I);B.attachListeners(B.canvas,B)}else{n(B.canvas,M);f(B.canvas,G)}};this.reattachListeners=function(){if(B.canvas){B.reattachListenersForElement(B.canvas,B)}};this.cleanup=function(){if(B.canvas!=null){jsPlumb.CurrentLibrary.removeElement(B.canvas)}}};jsPlumbUtil.extend(s,q);jsPlumb.Overlays.vml.Arrow=function(){s.apply(this,[jsPlumb.Overlays.Arrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,s]);jsPlumb.Overlays.vml.PlainArrow=function(){s.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,s]);jsPlumb.Overlays.vml.Diamond=function(){s.apply(this,[jsPlumb.Overlays.Diamond,arguments])};jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,s])})();(function(b){var a=function(d){return typeof(d)=="string"?b("#"+d):b(d)};jsPlumb.CurrentLibrary={addClass:function(f,d){f=a(f);try{if(f[0].className.constructor==SVGAnimatedString){jsPlumbUtil.svg.addClass(f[0],d)}}catch(g){}try{f.addClass(d)}catch(g){}},animate:function(f,e,d){f.animate(e,d)},appendElement:function(e,d){a(d).append(e)},ajax:function(d){d=d||{};d.type=d.type||"get";b.ajax(d)},bind:function(d,e,f){d=a(d);d.bind(e,f)},destroyDraggable:function(d){if(b(d).data("draggable")){b(d).draggable("destroy")}},destroyDroppable:function(d){if(b(d).data("droppable")){b(d).droppable("destroy")}},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},extend:function(e,d){return b.extend(e,d)},getClientXY:function(d){return[d.clientX,d.clientY]},getDragObject:function(d){return d[1].draggable||d[1].helper},getDragScope:function(d){return b(d).draggable("option","scope")},getDropEvent:function(d){return d[0]},getDropScope:function(d){return b(d).droppable("option","scope")},getDOMElement:function(d){if(d==null){return null}if(typeof(d)=="string"){return document.getElementById(d)}else{if(d.context||d.length!=null){return d[0]}else{return d}}},getElementObject:a,getOffset:function(d){return d.offset()},getOriginalEvent:function(d){return d.originalEvent},getPageXY:function(d){return[d.pageX,d.pageY]},getParent:function(d){return a(d).parent()},getScrollLeft:function(d){return d.scrollLeft()},getScrollTop:function(d){return d.scrollTop()},getSelector:function(e,d){if(arguments.length==2){return a(e).find(d)}else{return b(e)}},getSize:function(d){d=b(d);return[d.outerWidth(),d.outerHeight()]},getTagName:function(d){var f=a(d);return f.length>0?f[0].tagName:null},getUIPosition:function(e,f){f=f||1;if(e.length==1){ret={left:e[0].pageX,top:e[0].pageY}}else{var g=e[1],d=g.offset;ret=d||g.absolutePosition;g.position.left/=f;g.position.top/=f}return{left:ret.left/f,top:ret.top/f}},hasClass:function(e,d){return e.hasClass(d)},initDraggable:function(f,e,g,d){e=e||{};f=b(f);e.start=jsPlumbUtil.wrap(e.start,function(){b("body").addClass(d.dragSelectClass)},false);e.stop=jsPlumbUtil.wrap(e.stop,function(){b("body").removeClass(d.dragSelectClass)});if(!e.doNotRemoveHelper){e.helper=null}if(g){e.scope=e.scope||jsPlumb.Defaults.Scope}f.draggable(e)},initDroppable:function(e,d){d.scope=d.scope||jsPlumb.Defaults.Scope;b(e).droppable(d)},isAlreadyDraggable:function(d){return b(d).hasClass("ui-draggable")},isDragSupported:function(e,d){return b(e).draggable},isDropSupported:function(e,d){return b(e).droppable},removeClass:function(f,d){f=a(f);try{if(f[0].className.constructor==SVGAnimatedString){jsPlumbUtil.svg.removeClass(f[0],d);return}}catch(g){}f.removeClass(d)},removeElement:function(d){a(d).remove()},setDragFilter:function(e,d){if(jsPlumb.CurrentLibrary.isAlreadyDraggable(e)){e.draggable("option","cancel",d)}},setDraggable:function(e,d){e.draggable("option","disabled",!d)},setDragScope:function(e,d){e.draggable("option","scope",d)},setOffset:function(d,e){a(d).offset(e)},trigger:function(f,g,d){var e=jQuery._data(a(f)[0],"handle");e(d)},unbind:function(d,e,f){d=a(d);d.unbind(e,f)}};b(document).ready(jsPlumb.init)})(jQuery);(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports=="object"&&typeof module=="object"){module.exports=a}else{a(jQuery)}}})(function(f,h){var s={beforeShow:b,move:b,change:b,show:b,hide:b,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},e=[],m=!!/msie/i.exec(window.navigator.userAgent),q=(function(){function C(G,F){return !!~(""+G).indexOf(F)}var E=document.createElement("div");var D=E.style;D.cssText="background-color:rgba(0,0,0,.5)";return C(D.backgroundColor,"rgba")||C(D.backgroundColor,"hsla")})(),w=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),v=(function(){var C="";if(m){for(var D=1;D<=6;D++){C+="<div class='sp-"+D+"'></div>"}}return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",C,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")})();function A(E,G,K,C){var I=[];for(var H=0;H<E.length;H++){var J=E[H];if(J){var D=tinycolor(J);var M=D.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";M+=(tinycolor.equals(G,J))?" sp-thumb-active":"";var L=D.toString(C.preferredFormat||"rgb");var F=q?("background-color:"+D.toRgbString()):"filter:"+D.toFilter();I.push('<span title="'+L+'" data-color="'+D.toRgbString()+'" class="'+M+'"><span class="sp-thumb-inner" style="'+F+';" /></span>')}else{var N="sp-clear-display";I.push(f("<div />").append(f('<span data-color="" style="background-color:transparent;" class="'+N+'"></span>').attr("title",C.noColorSelectedText)).html())}}return"<div class='sp-cf "+K+"'>"+I.join("")+"</div>"}function u(){for(var C=0;C<e.length;C++){if(e[C]){e[C].hide()}}}function t(E,C){var D=f.extend({},s,E);D.callbacks={move:B(D.move,C),change:B(D.change,C),show:B(D.show,C),hide:B(D.hide,C),beforeShow:B(D.beforeShow,C)};return D}function z(bi,ar){var bh=t(ar,bi),bd=bh.flat,ag=bh.showSelectionPalette,E=bh.localStorageKey,av=bh.theme,ab=bh.callbacks,M=g(an,10),W=false,aA=false,aW=0,ap=0,aX=0,aJ=0,T=0,aI=0,a8=0,aC=0,ai=0,Z=0,aM=0,a9=1,at=[],aw=[],bf={},aS=bh.selectionPalette.slice(0),aR=bh.maxSelectionSize,F="sp-dragging",O=null;var ah=bi.ownerDocument,V=ah.body,L=f(bi),a6=false,aY=f(v,ah).addClass(av),C=aY.find(".sp-picker-container"),Q=aY.find(".sp-color"),aV=aY.find(".sp-dragger"),U=aY.find(".sp-hue"),bc=aY.find(".sp-slider"),aO=aY.find(".sp-alpha-inner"),aj=aY.find(".sp-alpha"),aP=aY.find(".sp-alpha-handle"),S=aY.find(".sp-input"),aa=aY.find(".sp-palette"),bg=aY.find(".sp-initial"),aB=aY.find(".sp-cancel"),ay=aY.find(".sp-clear"),P=aY.find(".sp-choose"),a0=aY.find(".sp-palette-toggle"),ac=L.is("input"),J=ac&&L.attr("type")==="color"&&p(),aL=ac&&!bd,a4=(aL)?f(w).addClass(av).addClass(bh.className).addClass(bh.replacerClassName):f([]),aG=(aL)?a4:L,R=a4.find(".sp-preview-inner"),ad=bh.color||(ac&&L.val()),aZ=false,af=bh.preferredFormat,aE=af,N=!bh.showButtons||bh.clickoutFiresChange,K=!ad,be=bh.allowEmpty&&!J;function D(){if(bh.showPaletteOnly){bh.showPalette=true}a0.text(bh.showPaletteOnly?bh.togglePaletteMoreText:bh.togglePaletteLessText);if(bh.palette){at=bh.palette.slice(0);aw=f.isArray(at[0])?at:[at];bf={};for(var bm=0;bm<aw.length;bm++){for(var bl=0;bl<aw[bm].length;bl++){var bk=tinycolor(aw[bm][bl]).toRgbString();bf[bk]=true}}}aY.toggleClass("sp-flat",bd);aY.toggleClass("sp-input-disabled",!bh.showInput);aY.toggleClass("sp-alpha-enabled",bh.showAlpha);aY.toggleClass("sp-clear-enabled",be);aY.toggleClass("sp-buttons-disabled",!bh.showButtons);aY.toggleClass("sp-palette-buttons-disabled",!bh.togglePaletteOnly);aY.toggleClass("sp-palette-disabled",!bh.showPalette);aY.toggleClass("sp-palette-only",bh.showPaletteOnly);aY.toggleClass("sp-initial-disabled",!bh.showInitial);aY.addClass(bh.className).addClass(bh.containerClassName);an()}function aT(){if(m){aY.find("*:not(input)").attr("unselectable","on")}D();if(aL){L.after(a4).hide()}if(!be){ay.hide()}if(bd){L.after(aY).hide()}else{var bl=bh.appendTo==="parent"?L.parent():f(bh.appendTo);if(bl.length!==1){bl=f("body")}bl.append(aY)}a1();aG.bind("click.spectrum touchstart.spectrum",function(bn){if(!a6){aH()}bn.stopPropagation();if(!f(bn.target).is("input")){bn.preventDefault()}});if(L.is(":disabled")||(bh.disabled===true)){ae()}aY.click(o);S.change(a2);S.bind("paste",function(){setTimeout(a2,1)});S.keydown(function(bn){if(bn.keyCode==13){a2()}});aB.text(bh.cancelText);aB.bind("click.spectrum",function(bn){bn.stopPropagation();bn.preventDefault();aF();aQ()});ay.attr("title",bh.clearText);ay.bind("click.spectrum",function(bn){bn.stopPropagation();bn.preventDefault();K=true;aU();if(bd){az(true)}});P.text(bh.chooseText);P.bind("click.spectrum",function(bn){bn.stopPropagation();bn.preventDefault();if(m&&S.is(":focus")){S.trigger("change")}if(aK()){az(true);aQ()}});a0.text(bh.showPaletteOnly?bh.togglePaletteMoreText:bh.togglePaletteLessText);a0.bind("click.spectrum",function(bn){bn.stopPropagation();bn.preventDefault();bh.showPaletteOnly=!bh.showPaletteOnly;if(!bh.showPaletteOnly&&!bd){aY.css("left","-="+(C.outerWidth(true)+5))}D()});d(aj,function(bp,bo,bn){a9=(bp/aI);K=false;if(bn.shiftKey){a9=Math.round(a9*10)/10}aU()},I,bj);d(U,function(bo,bn){ai=parseFloat(bn/aJ);K=false;if(!bh.showAlpha){a9=1}aU()},I,bj);d(Q,function(bu,bs,br){if(!br.shiftKey){O=null}else{if(!O){var bp=Z*aW;var bn=ap-(aM*ap);var bo=Math.abs(bu-bp)>Math.abs(bs-bn);O=bo?"x":"y"}}var bq=!O||O==="x";var bt=!O||O==="y";if(bq){Z=parseFloat(bu/aW)}if(bt){aM=parseFloat((ap-bs)/ap)}K=false;if(!bh.showAlpha){a9=1}aU()},I,bj);if(!!ad){am(ad);aN();aE=af||tinycolor(ad).format;a5(ad)}else{aN()}if(bd){H()}function bm(bn){if(bn.data&&bn.data.ignore){am(f(bn.target).closest(".sp-thumb-el").data("color"));aU()}else{am(f(bn.target).closest(".sp-thumb-el").data("color"));aU();az(true);if(bh.hideAfterPaletteSelect){aQ()}}return false}var bk=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";aa.delegate(".sp-thumb-el",bk,bm);bg.delegate(".sp-thumb-el:nth-child(1)",bk,{ignore:true},bm)}function a1(){if(E&&window.localStorage){try{var bk=window.localStorage[E].split(",#");if(bk.length>1){delete window.localStorage[E];f.each(bk,function(bm,bn){a5(bn)})}}catch(bl){}try{aS=window.localStorage[E].split(";")}catch(bl){}}}function a5(bk){if(ag){var bl=tinycolor(bk).toRgbString();if(!bf[bl]&&f.inArray(bl,aS)===-1){aS.push(bl);while(aS.length>aR){aS.shift()}}if(E&&window.localStorage){try{window.localStorage[E]=aS.join(";")}catch(bm){}}}}function a7(){var bm=[];if(bh.showPalette){for(var bl=0;bl<aS.length;bl++){var bk=tinycolor(aS[bl]).toRgbString();if(!bf[bk]){bm.push(aS[bl])}}}return bm.reverse().slice(0,bh.maxSelectionSize)}function ba(){var bk=a3();var bl=f.map(aw,function(bm,bn){return A(bm,bk,"sp-palette-row sp-palette-row-"+bn,bh)});a1();if(aS){bl.push(A(a7(),bk,"sp-palette-row sp-palette-row-selection",bh))}aa.html(bl.join(""))}function aD(){if(bh.showInitial){var bk=aZ;var bl=a3();bg.html(A([bk,bl],bl,"sp-palette-row-initial",bh))}}function I(){if(ap<=0||aW<=0||aJ<=0){an()}aA=true;aY.addClass(F);O=null;L.trigger("dragstart.spectrum",[a3()])}function bj(){aA=false;aY.removeClass(F);L.trigger("dragstop.spectrum",[a3()])}function a2(){var bl=S.val();if((bl===null||bl==="")&&be){am(null);az(true)}else{var bk=tinycolor(bl);if(bk.isValid()){am(bk);az(true)}else{S.addClass("sp-validation-error")}}}function aH(){if(W){aQ()}else{H()}}function H(){var bk=f.Event("beforeShow.spectrum");if(W){an();return}L.trigger(bk,[a3()]);if(ab.beforeShow(a3())===false||bk.isDefaultPrevented()){return}u();W=true;f(ah).bind("keydown.spectrum",au);f(ah).bind("click.spectrum",al);f(window).bind("resize.spectrum",M);a4.addClass("sp-active");aY.removeClass("sp-hidden");an();aN();aZ=a3();aD();ab.show(aZ);L.trigger("show.spectrum",[aZ])}function au(bk){if(bk.keyCode===27){aQ()}}function al(bk){if(bk.button==2){return}if(aA){return}if(N){az(true)}else{aF()}aQ()}function aQ(){if(!W||bd){return}W=false;f(ah).unbind("keydown.spectrum",au);f(ah).unbind("click.spectrum",al);f(window).unbind("resize.spectrum",M);a4.removeClass("sp-active");aY.addClass("sp-hidden");ab.hide(a3());L.trigger("hide.spectrum",[a3()])}function aF(){am(aZ,true)}function am(bk,bm){if(tinycolor.equals(bk,a3())){aN();return}var bl,bn;if(!bk&&be){K=true}else{K=false;bl=tinycolor(bk);bn=bl.toHsv();ai=(bn.h%360)/360;Z=bn.s;aM=bn.v;a9=bn.a}aN();if(bl&&bl.isValid()&&!bm){aE=af||bl.getFormat()}}function a3(bk){bk=bk||{};if(be&&K){return null}return tinycolor.fromRatio({h:ai,s:Z,v:aM,a:Math.round(a9*100)/100},{format:bk.format||aE})}function aK(){return !S.hasClass("sp-validation-error")}function aU(){aN();ab.move(a3());L.trigger("move.spectrum",[a3()])}function aN(){S.removeClass("sp-validation-error");bb();var bm=tinycolor.fromRatio({h:ai,s:1,v:1});Q.css("background-color",bm.toHexString());var br=aE;if(a9<1&&!(a9===0&&br==="name")){if(br==="hex"||br==="hex3"||br==="hex6"||br==="name"){br="rgb"}}var bk=a3({format:br}),bn="";R.removeClass("sp-clear-display");R.css("background-color","transparent");if(!bk&&be){R.addClass("sp-clear-display")}else{var bo=bk.toHexString(),bs=bk.toRgbString();if(q||bk.alpha===1){R.css("background-color",bs)}else{R.css("background-color","transparent");R.css("filter",bk.toFilter())}if(bh.showAlpha){var bp=bk.toRgb();bp.a=0;var bl=tinycolor(bp).toRgbString();var bq="linear-gradient(left, "+bl+", "+bo+")";if(m){aO.css("filter",tinycolor(bl).toFilter({gradientType:1},bo))}else{aO.css("background","-webkit-"+bq);aO.css("background","-moz-"+bq);aO.css("background","-ms-"+bq);aO.css("background","linear-gradient(to right, "+bl+", "+bo+")")}}bn=bk.toString(br)}if(bh.showInput){S.val(bn)}if(bh.showPalette){ba()}aD()}function bb(){var bm=Z;var bk=aM;if(be&&K){aP.hide();bc.hide();aV.hide()}else{aP.show();bc.show();aV.show();var bp=bm*aW;var bn=ap-(bk*ap);bp=Math.max(-aX,Math.min(aW-aX,bp-aX));bn=Math.max(-aX,Math.min(ap-aX,bn-aX));aV.css({top:bn+"px",left:bp+"px"});var bl=a9*aI;aP.css({left:(bl-(a8/2))+"px"});var bo=(ai)*aJ;bc.css({top:(bo-aC)+"px"})}}function az(bl){var bk=a3(),bn="",bm=!tinycolor.equals(bk,aZ);if(bk){bn=bk.toString(aE);a5(bk)}if(ac){L.val(bn)}if(bl&&bm){ab.change(bk);L.trigger("change",[bk])}}function an(){aW=Q.width();ap=Q.height();aX=aV.height();T=U.width();aJ=U.height();aC=bc.height();aI=aj.width();a8=aP.width();if(!bd){aY.css("position","absolute");if(bh.offset){aY.offset(bh.offset)}else{aY.offset(a(aY,aG))}}bb();if(bh.showPalette){ba()}L.trigger("reflow.spectrum")}function G(){L.show();aG.unbind("click.spectrum touchstart.spectrum");aY.remove();a4.remove();e[ao.id]=null}function ak(bk,bl){if(bk===h){return f.extend({},bh)}if(bl===h){return bh[bk]}bh[bk]=bl;D()}function aq(){a6=false;L.prop("disabled",false);aG.removeClass("sp-disabled")}function ae(){aQ();a6=true;L.prop("disabled",true);aG.addClass("sp-disabled")}function ax(bk){bh.offset=bk;an()}aT();var ao={show:H,hide:aQ,toggle:aH,reflow:an,option:ak,enable:aq,disable:ae,offset:ax,set:function(bk){am(bk);az()},get:a3,destroy:G,container:aY};ao.id=e.push(ao)-1;return ao}function a(J,K){var I=0;var G=J.outerWidth();var M=J.outerHeight();var C=K.outerHeight();var L=J[0].ownerDocument;var D=L.documentElement;var H=D.clientWidth+f(L).scrollLeft();var E=D.clientHeight+f(L).scrollTop();var F=K.offset();F.top+=C;F.left-=Math.min(F.left,(F.left+G>H&&H>G)?Math.abs(F.left+G-H):0);F.top-=Math.min(F.top,((F.top+M>E&&E>M)?Math.abs(M+C-I):I));return F}function b(){}function o(C){C.stopPropagation()}function B(D,E){var F=Array.prototype.slice;var C=F.call(arguments,2);return function(){return D.apply(E,C.concat(F.call(arguments)))}}function d(H,M,D,E){M=M||function(){};D=D||function(){};E=E||function(){};var N=document;var P=false;var G={};var Q=0;var O=0;var J=("ontouchstart" in window);var I={};I.selectstart=L;I.dragstart=L;I["touchmove mousemove"]=F;I["touchend mouseup"]=K;function L(R){if(R.stopPropagation){R.stopPropagation()}if(R.preventDefault){R.preventDefault()}R.returnValue=false}function F(V){if(P){if(m&&N.documentMode<9&&!V.button){return K()}var T=V.originalEvent&&V.originalEvent.touches&&V.originalEvent.touches[0];var S=T&&T.pageX||V.pageX;var R=T&&T.pageY||V.pageY;var W=Math.max(0,Math.min(S-G.left,O));var U=Math.max(0,Math.min(R-G.top,Q));if(J){L(V)}M.apply(H,[W,U,V])}}function C(S){var R=(S.which)?(S.which==3):(S.button==2);if(!R&&!P){if(D.apply(H,arguments)!==false){P=true;Q=f(H).height();O=f(H).width();G=f(H).offset();f(N).bind(I);f(N.body).addClass("sp-dragging");F(S);L(S)}}}function K(){if(P){f(N).unbind(I);f(N.body).removeClass("sp-dragging");setTimeout(function(){E.apply(H,arguments)},0)}P=false}f(H).bind("touchstart mousedown",C)}function g(D,F,C){var E;return function(){var H=this,G=arguments;var I=function(){E=null;D.apply(H,G)};if(C){clearTimeout(E)}if(C||!E){E=setTimeout(I,F)}}}function p(){return f.fn.spectrum.inputTypeColorSupport()}var n="spectrum.id";f.fn.spectrum=function(F,C){if(typeof F=="string"){var E=this;var D=Array.prototype.slice.call(arguments,1);this.each(function(){var G=e[f(this).data(n)];if(G){var H=G[F];if(!H){throw new Error("Spectrum: no such method: '"+F+"'")}if(F=="get"){E=G.get()}else{if(F=="container"){E=G.container}else{if(F=="option"){E=G.option.apply(G,D)}else{if(F=="destroy"){G.destroy();f(this).removeData(n)}else{H.apply(G,D)}}}}}});return E}return this.spectrum("destroy").each(function(){var G=f.extend({},F,f(this).data());var H=z(this,G);f(this).data(n,H.id)})};f.fn.spectrum.load=true;f.fn.spectrum.loadOpts={};f.fn.spectrum.draggable=d;f.fn.spectrum.defaults=s;f.fn.spectrum.inputTypeColorSupport=function p(){if(typeof p._cachedResult==="undefined"){var C=f("<input type='color' value='!' />")[0];p._cachedResult=C.type==="color"&&C.value!=="!"}return p._cachedResult};f.spectrum={};f.spectrum.localization={};f.spectrum.palettes={};f.fn.spectrum.processNativeColorInputs=function(){var C=f("input[type=color]");if(C.length&&!p()){C.spectrum({preferredFormat:"hex6"})}};(function(){var ai=/^[\s,#]+/,S=/\s+$/,an=0,Z=Math,ad=Z.round,av=Z.min,U=Z.max,L=Z.random;var ap=function(ay,aA){ay=(ay)?ay:"";aA=aA||{};if(ay instanceof ap){return ay}if(!(this instanceof ap)){return new ap(ay,aA)}var az=am(ay);this._originalInput=ay,this._r=az.r,this._g=az.g,this._b=az.b,this._a=az.a,this._roundA=ad(100*this._a)/100,this._format=aA.format||az.format;this._gradientType=aA.gradientType;if(this._r<1){this._r=ad(this._r)}if(this._g<1){this._g=ad(this._g)}if(this._b<1){this._b=ad(this._b)}this._ok=az.ok;this._tc_id=an++};ap.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return !this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ay=this.toRgb();return(ay.r*299+ay.g*587+ay.b*114)/1000},setAlpha:function(ay){this._a=M(ay);this._roundA=ad(100*this._a)/100;return this},toHsv:function(){var ay=J(this._r,this._g,this._b);return{h:ay.h*360,s:ay.s,v:ay.v,a:this._a}},toHsvString:function(){var az=J(this._r,this._g,this._b);var aB=ad(az.h*360),aA=ad(az.s*100),ay=ad(az.v*100);return(this._a==1)?"hsv("+aB+", "+aA+"%, "+ay+"%)":"hsva("+aB+", "+aA+"%, "+ay+"%, "+this._roundA+")"},toHsl:function(){var ay=O(this._r,this._g,this._b);return{h:ay.h*360,s:ay.s,l:ay.l,a:this._a}},toHslString:function(){var az=O(this._r,this._g,this._b);var aB=ad(az.h*360),aA=ad(az.s*100),ay=ad(az.l*100);return(this._a==1)?"hsl("+aB+", "+aA+"%, "+ay+"%)":"hsla("+aB+", "+aA+"%, "+ay+"%, "+this._roundA+")"},toHex:function(ay){return al(this._r,this._g,this._b,ay)},toHexString:function(ay){return"#"+this.toHex(ay)},toHex8:function(){return aw(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:ad(this._r),g:ad(this._g),b:ad(this._b),a:this._a}},toRgbString:function(){return(this._a==1)?"rgb("+ad(this._r)+", "+ad(this._g)+", "+ad(this._b)+")":"rgba("+ad(this._r)+", "+ad(this._g)+", "+ad(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:ad(aq(this._r,255)*100)+"%",g:ad(aq(this._g,255)*100)+"%",b:ad(aq(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return(this._a==1)?"rgb("+ad(aq(this._r,255)*100)+"%, "+ad(aq(this._g,255)*100)+"%, "+ad(aq(this._b,255)*100)+"%)":"rgba("+ad(aq(this._r,255)*100)+"%, "+ad(aq(this._g,255)*100)+"%, "+ad(aq(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return ax[al(this._r,this._g,this._b,true)]||false},toFilter:function(aB){var aC="#"+aw(this._r,this._g,this._b,this._a);var az=aC;var ay=this._gradientType?"GradientType = 1, ":"";if(aB){var aA=ap(aB);az=aA.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+ay+"startColorstr="+aC+",endColorstr="+az+")"},toString:function(aB){var ay=!!aB;aB=aB||this._format;var aA=false;var az=this._a<1&&this._a>=0;var aC=!ay&&az&&(aB==="hex"||aB==="hex6"||aB==="hex3"||aB==="name");if(aC){if(aB==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(aB==="rgb"){aA=this.toRgbString()}if(aB==="prgb"){aA=this.toPercentageRgbString()}if(aB==="hex"||aB==="hex6"){aA=this.toHexString()}if(aB==="hex3"){aA=this.toHexString(true)}if(aB==="hex8"){aA=this.toHex8String()}if(aB==="name"){aA=this.toName()}if(aB==="hsl"){aA=this.toHslString()}if(aB==="hsv"){aA=this.toHsvString()}return aA||this.toHexString()},_applyModification:function(aA,az){var ay=aA.apply(null,[this].concat([].slice.call(az)));this._r=ay._r;this._g=ay._g;this._b=ay._b;this.setAlpha(ay._a);return this},lighten:function(){return this._applyModification(R,arguments)},brighten:function(){return this._applyModification(D,arguments)},darken:function(){return this._applyModification(Q,arguments)},desaturate:function(){return this._applyModification(W,arguments)},saturate:function(){return this._applyModification(aj,arguments)},greyscale:function(){return this._applyModification(G,arguments)},spin:function(){return this._applyModification(ao,arguments)},_applyCombination:function(az,ay){return az.apply(null,[this].concat([].slice.call(ay)))},analogous:function(){return this._applyCombination(ab,arguments)},complement:function(){return this._applyCombination(ag,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(ae,arguments)},triad:function(){return this._applyCombination(H,arguments)},tetrad:function(){return this._applyCombination(au,arguments)}};ap.fromRatio=function(ay,aB){if(typeof ay=="object"){var az={};for(var aA in ay){if(ay.hasOwnProperty(aA)){if(aA==="a"){az[aA]=ay[aA]}else{az[aA]=P(ay[aA])}}}ay=az}return ap(ay,aB)};function am(az){var aA={r:0,g:0,b:0};var ay=1;var aB=false;var aC=false;if(typeof az=="string"){az=V(az)}if(typeof az=="object"){if(az.hasOwnProperty("r")&&az.hasOwnProperty("g")&&az.hasOwnProperty("b")){aA=I(az.r,az.g,az.b);aB=true;aC=String(az.r).substr(-1)==="%"?"prgb":"rgb"}else{if(az.hasOwnProperty("h")&&az.hasOwnProperty("s")&&az.hasOwnProperty("v")){az.s=P(az.s);az.v=P(az.v);aA=ak(az.h,az.s,az.v);aB=true;aC="hsv"}else{if(az.hasOwnProperty("h")&&az.hasOwnProperty("s")&&az.hasOwnProperty("l")){az.s=P(az.s);az.l=P(az.l);aA=ac(az.h,az.s,az.l);aB=true;aC="hsl"}}}if(az.hasOwnProperty("a")){ay=az.a}}ay=M(ay);return{ok:aB,format:az.format||aC,r:av(255,U(aA.r,0)),g:av(255,U(aA.g,0)),b:av(255,U(aA.b,0)),a:ay}}function I(aA,az,ay){return{r:aq(aA,255)*255,g:aq(az,255)*255,b:aq(ay,255)*255}}function O(ay,aC,aE){ay=aq(ay,255);aC=aq(aC,255);aE=aq(aE,255);var aF=U(ay,aC,aE),aA=av(ay,aC,aE);var aB,aG,az=(aF+aA)/2;if(aF==aA){aB=aG=0}else{var aD=aF-aA;aG=az>0.5?aD/(2-aF-aA):aD/(aF+aA);switch(aF){case ay:aB=(aC-aE)/aD+(aC<aE?6:0);break;case aC:aB=(aE-ay)/aD+2;break;case aE:aB=(ay-aC)/aD+4;break}aB/=6}return{h:aB,s:aG,l:az}}function ac(aD,aG,aC){var ay,aE,aF;aD=aq(aD,360);aG=aq(aG,100);aC=aq(aC,100);function aB(aJ,aI,aH){if(aH<0){aH+=1}if(aH>1){aH-=1}if(aH<1/6){return aJ+(aI-aJ)*6*aH}if(aH<1/2){return aI}if(aH<2/3){return aJ+(aI-aJ)*(2/3-aH)*6}return aJ}if(aG===0){ay=aE=aF=aC}else{var az=aC<0.5?aC*(1+aG):aC+aG-aC*aG;var aA=2*aC-az;ay=aB(aA,az,aD+1/3);aE=aB(aA,az,aD);aF=aB(aA,az,aD-1/3)}return{r:ay*255,g:aE*255,b:aF*255}}function J(ay,aB,aD){ay=aq(ay,255);aB=aq(aB,255);aD=aq(aD,255);var aE=U(ay,aB,aD),az=av(ay,aB,aD);var aA,aG,aF=aE;var aC=aE-az;aG=aE===0?0:aC/aE;if(aE==az){aA=0}else{switch(aE){case ay:aA=(aB-aD)/aC+(aB<aD?6:0);break;case aB:aA=(aD-ay)/aC+2;break;case aD:aA=(ay-aB)/aC+4;break}aA/=6}return{h:aA,s:aG,v:aF}}function ak(aC,aJ,aH){aC=aq(aC,360)*6;aJ=aq(aJ,100);aH=aq(aH,100);var aB=Z.floor(aC),aE=aC-aB,aA=aH*(1-aJ),az=aH*(1-aE*aJ),aI=aH*(1-(1-aE)*aJ),aG=aB%6,ay=[aH,az,aA,aA,aI,aH][aG],aD=[aI,aH,aH,az,aA,aA][aG],aF=[aA,aA,aI,aH,aH,az][aG];return{r:ay*255,g:aD*255,b:aF*255}}function al(aB,aA,ay,aC){var az=[aa(ad(aB).toString(16)),aa(ad(aA).toString(16)),aa(ad(ay).toString(16))];if(aC&&az[0].charAt(0)==az[0].charAt(1)&&az[1].charAt(0)==az[1].charAt(1)&&az[2].charAt(0)==az[2].charAt(1)){return az[0].charAt(0)+az[1].charAt(0)+az[2].charAt(0)}return az.join("")}function aw(aC,aB,ay,az){var aA=[aa(af(az)),aa(ad(aC).toString(16)),aa(ad(aB).toString(16)),aa(ad(ay).toString(16))];return aA.join("")}ap.equals=function(az,ay){if(!az||!ay){return false}return ap(az).toRgbString()==ap(ay).toRgbString()};ap.random=function(){return ap.fromRatio({r:L(),g:L(),b:L()})};function W(az,aA){aA=(aA===0)?0:(aA||10);var ay=ap(az).toHsl();ay.s-=aA/100;ay.s=C(ay.s);return ap(ay)}function aj(az,aA){aA=(aA===0)?0:(aA||10);var ay=ap(az).toHsl();ay.s+=aA/100;ay.s=C(ay.s);return ap(ay)}function G(ay){return ap(ay).desaturate(100)}function R(az,aA){aA=(aA===0)?0:(aA||10);var ay=ap(az).toHsl();ay.l+=aA/100;ay.l=C(ay.l);return ap(ay)}function D(ay,aA){aA=(aA===0)?0:(aA||10);var az=ap(ay).toRgb();az.r=U(0,av(255,az.r-ad(255*-(aA/100))));az.g=U(0,av(255,az.g-ad(255*-(aA/100))));az.b=U(0,av(255,az.b-ad(255*-(aA/100))));return ap(az)}function Q(az,aA){aA=(aA===0)?0:(aA||10);var ay=ap(az).toHsl();ay.l-=aA/100;ay.l=C(ay.l);return ap(ay)}function ao(aA,aB){var az=ap(aA).toHsl();var ay=(ad(az.h)+aB)%360;az.h=ay<0?360+ay:ay;return ap(az)}function ag(az){var ay=ap(az).toHsl();ay.h=(ay.h+180)%360;return ap(ay)}function H(az){var ay=ap(az).toHsl();var aA=ay.h;return[ap(az),ap({h:(aA+120)%360,s:ay.s,l:ay.l}),ap({h:(aA+240)%360,s:ay.s,l:ay.l})]}function au(az){var ay=ap(az).toHsl();var aA=ay.h;return[ap(az),ap({h:(aA+90)%360,s:ay.s,l:ay.l}),ap({h:(aA+180)%360,s:ay.s,l:ay.l}),ap({h:(aA+270)%360,s:ay.s,l:ay.l})]}function ae(az){var ay=ap(az).toHsl();var aA=ay.h;return[ap(az),ap({h:(aA+72)%360,s:ay.s,l:ay.l}),ap({h:(aA+216)%360,s:ay.s,l:ay.l})]}function ab(az,aC,aD){aC=aC||6;aD=aD||30;var ay=ap(az).toHsl();var aB=360/aD;var aA=[ap(az)];for(ay.h=((ay.h-(aB*aC>>1))+720)%360;--aC;){ay.h=(ay.h+aB)%360;aA.push(ap(ay))}return aA}function T(aA,aD){aD=aD||6;var aC=ap(aA).toHsv();var aF=aC.h,aE=aC.s,az=aC.v;var aB=[];var ay=1/aD;while(aD--){aB.push(ap({h:aF,s:aE,v:az}));az=(az+ay)%1}return aB}ap.mix=function(aI,aH,aE){aE=(aE===0)?0:(aE||50);var aC=ap(aI).toRgb();var aA=ap(aH).toRgb();var ay=aE/100;var aG=ay*2-1;var aF=aA.a-aC.a;var aD;if(aG*aF==-1){aD=aG}else{aD=(aG+aF)/(1+aG*aF)}aD=(aD+1)/2;var aB=1-aD;var az={r:aA.r*aD+aC.r*aB,g:aA.g*aD+aC.g*aB,b:aA.b*aD+aC.b*aB,a:aA.a*ay+aC.a*(1-ay)};return ap(az)};ap.readability=function(aG,aF){var aC=ap(aG);var aA=ap(aF);var aB=aC.toRgb();var az=aA.toRgb();var aD=aC.getBrightness();var ay=aA.getBrightness();var aE=(Math.max(aB.r,az.r)-Math.min(aB.r,az.r)+Math.max(aB.g,az.g)-Math.min(aB.g,az.g)+Math.max(aB.b,az.b)-Math.min(aB.b,az.b));return{brightness:Math.abs(aD-ay),color:aE}};ap.isReadable=function(az,ay){var aA=ap.readability(az,ay);return aA.brightness>125&&aA.color>500};ap.mostReadable=function(aF,aE){var aB=null;var az=0;var aG=false;for(var aD=0;aD<aE.length;aD++){var aA=ap.readability(aF,aE[aD]);var aC=aA.brightness>125&&aA.color>500;var ay=3*(aA.brightness/125)+(aA.color/500);if((aC&&!aG)||(aC&&aG&&ay>az)||((!aC)&&(!aG)&&ay>az)){aG=aC;az=ay;aB=ap(aE[aD])}}return aB};var ar=ap.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var ax=ap.hexNames=at(ar);function at(aA){var az={};for(var ay in aA){if(aA.hasOwnProperty(ay)){az[aA[ay]]=ay}}return az}function M(ay){ay=parseFloat(ay);if(isNaN(ay)||ay<0||ay>1){ay=1}return ay}function aq(aA,ay){if(ah(aA)){aA="100%"}var az=N(aA);aA=av(ay,U(0,parseFloat(aA)));if(az){aA=parseInt(aA*ay,10)/100}if((Z.abs(aA-ay)<0.000001)){return 1}return(aA%ay)/parseFloat(ay)}function C(ay){return av(1,U(0,ay))}function E(ay){return parseInt(ay,16)}function ah(ay){return typeof ay=="string"&&ay.indexOf(".")!=-1&&parseFloat(ay)===1}function N(ay){return typeof ay==="string"&&ay.indexOf("%")!=-1}function aa(ay){return ay.length==1?"0"+ay:""+ay}function P(ay){if(ay<=1){ay=(ay*100)+"%"}return ay}function af(ay){return Math.round(parseFloat(ay)*255).toString(16)}function K(ay){return(E(ay)/255)}var F=(function(){var aC="[-\\+]?\\d+%?";var aB="[-\\+]?\\d*\\.\\d+%?";var ay="(?:"+aB+")|(?:"+aC+")";var aA="[\\s|\\(]+("+ay+")[,|\\s]+("+ay+")[,|\\s]+("+ay+")\\s*\\)?";var az="[\\s|\\(]+("+ay+")[,|\\s]+("+ay+")[,|\\s]+("+ay+")[,|\\s]+("+ay+")\\s*\\)?";return{rgb:new RegExp("rgb"+aA),rgba:new RegExp("rgba"+az),hsl:new RegExp("hsl"+aA),hsla:new RegExp("hsla"+az),hsv:new RegExp("hsv"+aA),hsva:new RegExp("hsva"+az),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function V(az){az=az.replace(ai,"").replace(S,"").toLowerCase();var ay=false;if(ar[az]){az=ar[az];ay=true}else{if(az=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}}var aA;if((aA=F.rgb.exec(az))){return{r:aA[1],g:aA[2],b:aA[3]}}if((aA=F.rgba.exec(az))){return{r:aA[1],g:aA[2],b:aA[3],a:aA[4]}}if((aA=F.hsl.exec(az))){return{h:aA[1],s:aA[2],l:aA[3]}}if((aA=F.hsla.exec(az))){return{h:aA[1],s:aA[2],l:aA[3],a:aA[4]}}if((aA=F.hsv.exec(az))){return{h:aA[1],s:aA[2],v:aA[3]}}if((aA=F.hsva.exec(az))){return{h:aA[1],s:aA[2],v:aA[3],a:aA[4]}}if((aA=F.hex8.exec(az))){return{a:K(aA[1]),r:E(aA[2]),g:E(aA[3]),b:E(aA[4]),format:ay?"name":"hex8"}}if((aA=F.hex6.exec(az))){return{r:E(aA[1]),g:E(aA[2]),b:E(aA[3]),format:ay?"name":"hex"}}if((aA=F.hex3.exec(az))){return{r:E(aA[1]+""+aA[1]),g:E(aA[2]+""+aA[2]),b:E(aA[3]+""+aA[3]),format:ay?"name":"hex"}}return false}window.tinycolor=ap})();f(function(){if(f.fn.spectrum.load){f.fn.spectrum.processNativeColorInputs()}})});
/* jQRangeSlider 5.7.1 - 2015-01-23 - Copyright (C) Guillaume Gautreau 2012 - MIT and GPLv3 licenses.*/
!function(b){b.widget("ui.rangeSliderMouseTouch",b.ui.mouse,{enabled:!0,_mouseInit:function(){var a=this;b.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,function(d){return a._touchStart(d)})},_mouseDestroy:function(){b(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),b.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),b.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(a){if(!this.enabled){return !1}a.which=1,a.preventDefault(),this._fillTouchEvent(a);var f=this,e=this._mouseDownEvent;this._mouseDown(a),e!==this._mouseDownEvent&&(this._touchEndDelegate=function(d){f._touchEnd(d)},this._touchMoveDelegate=function(d){f._touchMove(d)},b(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(a){return this.enabled?b.ui.mouse.prototype._mouseDown.apply(this,[a]):!1},_touchEnd:function(a){this._fillTouchEvent(a),this._mouseUp(a),b(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,b(document).trigger("mouseup")},_touchMove:function(d){return d.preventDefault(),this._fillTouchEvent(d),this._mouseMove(d)},_fillTouchEvent:function(e){var d;d="undefined"==typeof e.targetTouches&&"undefined"==typeof e.changedTouches?e.originalEvent.targetTouches[0]||e.originalEvent.changedTouches[0]:e.targetTouches[0]||e.changedTouches[0],e.pageX=d.pageX,e.pageY=d.pageY,e.which=1}})}(jQuery),function(b){b.widget("ui.rangeSliderDraggable",b.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){b.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(b.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,b.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(a,d){"containment"===a&&(this.options.containment=null===d||0===b(d).length?null:b(d))},_mouseStart:function(d){return this._cache(),this.cache.click={left:d.pageX,top:d.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(e){var d=e.pageX-this.cache.click.left;return d=this._constraintPosition(d+this.cache.initialOffset.left),this._applyPosition(d),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(d){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(d=Math.min(d,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),d=Math.max(d,this.cache.parent.offset.left)),d},_applyPosition:function(e){var d={top:this.cache.offset.top,left:e};this.element.offset({left:e}),this.cache.offset=d},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var d=this.element.parent();this.cache.parent={offset:d.offset(),width:d.width()}}else{this.cache.parent=null}},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(e,d){return parseInt(e.css(d),10)||0},_triggerMouseEvent:function(e){var d=this._prepareEventData();this.element.trigger(e,d)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(e,d){e.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0,symmetricPositionning:!1},_values:null,_valuesChanged:!1,_initialized:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(e.proxy(this.resize,this),1),setTimeout(e.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var a=this;this._resizeProxy=function(b){a.resize(b)},e(window).resize(this._resizeProxy)},_initWidth:function(){if(!this.container){return}this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this._initialized=!0,this.values(this._values.min,this._values.max)},_setOption:function(g,f){this._setWheelOption(g,f),this._setArrowsOption(g,f),this._setLabelsOption(g,f),this._setLabelsDurations(g,f),this._setFormatterOption(g,f),this._setBoundsOption(g,f),this._setRangeOption(g,f),this._setStepOption(g,f),this._setScalesOption(g,f),this._setEnabledOption(g,f),this._setPositionningOption(g,f)},_validProperty:function(g,f,h){return null===g||"undefined"==typeof g[f]?h:g[f]},_setStepOption:function(g,f){"step"===g&&(this.options.step=f,this._leftHandle("option","step",f),this._rightHandle("option","step",f),this._changed(!0))},_setScalesOption:function(g,f){"scales"===g&&(f===!1||null===f?(this.options.scales=!1,this._destroyRuler()):f instanceof Array&&(this.options.scales=f,this._updateRuler()))},_setRangeOption:function(g,f){"range"===g&&(this._bar("option","range",f),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(g,f){"bounds"===g&&"undefined"!=typeof f.min&&"undefined"!=typeof f.max&&this.bounds(f.min,f.max)},_setWheelOption:function(g,f){("wheelMode"===g||"wheelSpeed"===g)&&(this._bar("option",g,f),this.options[g]=this._bar("option",g))},_setLabelsOption:function(g,f){if("valueLabels"===g){if("hide"!==f&&"show"!==f&&"change"!==f){return}this.options.valueLabels=f,"hide"!==f?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(g,f){"formatter"===g&&null!==f&&"function"==typeof f&&"hide"!==this.options.valueLabels&&(this._leftLabel("option","formatter",f),this.options.formatter=this._rightLabel("option","formatter",f))},_setArrowsOption:function(g,f){"arrows"!==g||f!==!0&&f!==!1||f===this.options.arrows||(f===!0?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):f===!1&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(g,f){if("durationIn"===g||"durationOut"===g||"delayOut"===g){if(parseInt(f,10)!==f){return}null!==this.labels.left&&this._leftLabel("option",g,f),null!==this.labels.right&&this._rightLabel("option",g,f),this.options[g]=f}},_setEnabledOption:function(g,f){"enabled"===g&&this.toggle(f)},_setPositionningOption:function(g,f){"symmetricPositionning"===g&&(this._rightHandle("option",g,f),this.options[g]=this._leftHandle("option",g,f))},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=e("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=e("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(a){return e("<div />")[this._handleType()](a).bind("sliderDrag",e.proxy(this._changing,this)).bind("stop",e.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step,symmetricPositionning:this.options.symmetricPositionning}).appendTo(this.container)},_createBar:function(){this.bar=e("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",e.proxy(this._changing,this)).bind("stop",e.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(a){var g,f=e("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+a+"Arrow").css("position","absolute").css(a,0).appendTo(this.element);return g="right"===a?e.proxy(this._scrollRightClick,this):e.proxy(this._scrollLeftClick,this),f.bind("mousedown touchstart",g),f},_proxy:function(g,f,m){var h=Array.prototype.slice.call(m);return g&&g[f]?g[f].apply(g,h):null},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(g,f){return f===this.rightHandle&&(g-=f.outerWidth()),g*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-f.outerWidth(!0))+this.options.bounds.min},_trigger:function(g){var f=this;setTimeout(function(){f.element.trigger(g,{label:f.element,values:f.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){if(!this.options){return}"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){if(!this.options){return}"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(b){b===!0&&this._deactivateLabels(),(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),b!==!0&&this._trigger("userValuesChanged"),this._valuesChanged=!1),b===!0&&this._reactivateLabels()},_updateValues:function(){var g=this._leftHandle("value"),f=this._rightHandle("value"),n=this._min(g,f),m=this._max(g,f),h=n!==this._values.min||m!==this._values.max;return this._values.min=this._min(g,f),this._values.max=this._max(g,f),h},_min:function(g,f){return Math.min(g,f)},_max:function(g,f){return Math.max(g,f)},_createLabel:function(a,g){var f;return null===a?(f=this._getLabelConstructorParameters(a,g),a=e("<div />").appendTo(this.element)[this._labelType()](f)):(f=this._getLabelRefreshParameters(a,g),a[this._labelType()](f)),a},_getLabelConstructorParameters:function(g,f){return{handle:f,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return this.options.formatter===!1||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(b){return Math.round(b)},_destroyLabel:function(b){return null!==b&&(b[this._labelType()]("destroy"),b.remove(),b=null),b},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right)},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(b){return this.options.enabled?(b.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollRight",4*this._stepRatio(),1)):!1},_continueScrolling:function(m,h,s,q){if(!this.options.enabled){return !1}this._bar(m,s),q=q||5,q--;var p=this,o=16,n=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===q&&(h>o?h=Math.max(o,h/1.5):s=Math.min(n,2*s),q=5),p._continueScrolling(m,h,s,q)},h)},_scrollLeftClick:function(b){return this.options.enabled?(b.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollLeft",4*this._stepRatio(),1)):!1},_bindStopScroll:function(){var a=this;this._stopScrollHandle=function(b){b.preventDefault(),a._stopScroll()},e(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){e(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=e("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&e.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),this.options.scales!==!1&&e.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(g,f){var h;if("undefined"!=typeof g&&"undefined"!=typeof f){if(!this._initialized){return this._values.min=g,this._values.max=f,this._values}this._deactivateLabels(),h=this._bar("values",g,f),this._changed(!0),this._reactivateLabels()}else{h=this._bar("values",g,f)}return h},min:function(b){return this._values.min=this.values(b,this._values.max).min,this._values.min},max:function(b){return this._values.max=this.values(this._values.min,b).max,this._values.max},bounds:function(g,f){return this._isValidValue(g)&&this._isValidValue(f)&&f>g&&(this._setBounds(g,f),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(b){return"undefined"!=typeof b&&parseFloat(b)===b},_setBounds:function(g,f){this.options.bounds={min:g,max:f},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(b){this._bar("zoomIn",b)},zoomOut:function(b){this._bar("zoomOut",b)},scrollLeft:function(b){this._bar("startScroll"),this._bar("scrollLeft",b),this._bar("stopScroll")},scrollRight:function(b){this._bar("startScroll"),this._bar("scrollRight",b),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(b){b===d&&(b=!this.options.enabled),this.options.enabled!==b&&this._toggle(b)},_toggle:function(g){this.options.enabled=g,this.element.toggleClass("ui-rangeSlider-disabled",!g);var f=g?"enable":"disable";this._bar(f),this._leftHandle(f),this._rightHandle(f),this._leftLabel(f),this._rightLabel(f)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,e(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,e.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(b){this["_"+b]("destroy"),this[b].remove(),this[b]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(b){b.widget("ui.rangeSliderHandle",b.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){b.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),b.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(a,d){"isLeft"!==a||d!==!0&&d!==!1||d===this.options.isLeft?"step"===a&&this._checkStep(d)?(this.options.step=d,this.update()):"bounds"===a?(this.options.bounds=d,this.update()):"range"===a&&this._checkRange(d)?(this.options.range=d,this.update()):"symmetricPositionning"===a&&(this.options.symmetricPositionning=d===!0,this.update()):(this.options.isLeft=d,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),b.ui.rangeSliderDraggable.prototype._setOption.apply(this,[a,d])},_checkRange:function(d){return d===!1||!this._isValidValue(d.min)&&!this._isValidValue(d.max)},_isValidValue:function(d){return"undefined"!=typeof d&&d!==!1&&parseFloat(d)!==d},_checkStep:function(d){return d===!1||parseFloat(d)===d},_initElement:function(){b.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(b.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){b.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var d=this.element.parent();this.cache.parent={element:d,offset:d.offset(),padding:{left:this._parsePixels(d,"paddingLeft")},width:d.width()}},_position:function(e){var d=this._getPositionForValue(e);this._applyPosition(d)},_constraintPosition:function(e){var d=this._getValueForPosition(e);return this._getPositionForValue(d)},_applyPosition:function(a){b.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[a]),this._left=a,this._setValue(this._getValueForPosition(a)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var a=b.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return a.value=this._value,a},_setValue:function(d){d!==this._value&&(this._value=d)},_constraintValue:function(e){if(e=Math.min(e,this._bounds().max),e=Math.max(e,this._bounds().min),e=this._round(e),this.options.range!==!1){var d=this.options.range.min||!1,f=this.options.range.max||!1;d!==!1&&(e=Math.max(e,this._round(d))),f!==!1&&(e=Math.min(e,this._round(f))),e=Math.min(e,this._bounds().max),e=Math.max(e,this._bounds().min)}return e},_round:function(d){return this.options.step!==!1&&this.options.step>0?Math.round(d/this.options.step)*this.options.step:d},_getPositionForValue:function(g){if(!this.cache||!this.cache.parent||null===this.cache.parent.offset){return 0}g=this._constraintValue(g);var f=(g-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),n=this.cache.parent.width,m=this.cache.parent.offset.left,h=this.options.isLeft?0:this.cache.width.outer;return this.options.symmetricPositionning?f*(n-2*this.cache.width.outer)+m+h:f*n+m-h},_getValueForPosition:function(e){var d=this._getRawValueForPositionAndBounds(e,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(d)},_getRawValueForPositionAndBounds:function(h,g,p){var o,n,m=null===this.cache.parent.offset?0:this.cache.parent.offset.left;return this.options.symmetricPositionning?(h-=this.options.isLeft?0:this.cache.width.outer,o=this.cache.parent.width-2*this.cache.width.outer):(h+=this.options.isLeft?0:this.cache.width.outer,o=this.cache.parent.width),0===o?this._value:(n=(h-m)/o,n*(p-g)+g)},value:function(d){return"undefined"!=typeof d&&(this._cache(),d=this._constraintValue(d),this._position(d)),this._value},update:function(){this._cache();var e=this._constraintValue(this._value),d=this._getPositionForValue(e);e!==this._value?(this._triggerMouseEvent("updating"),this._position(e),this._triggerMouseEvent("update")):d!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(e),this._triggerMouseEvent("update"))},position:function(d){return"undefined"!=typeof d&&(this._cache(),d=this._constraintPosition(d),this._applyPosition(d)),this._left},add:function(e,d){return e+d},substract:function(e,d){return e-d},stepsBetween:function(e,d){return this.options.step===!1?d-e:(d-e)/this.options.step},multiplyStep:function(e,d){return e*d},moveRight:function(e){var d;return this.options.step===!1?(d=this._left,this.position(this._left+e),this._left-d):(d=this._value,this.value(this.add(d,this.multiplyStep(this.options.step,e))),this.stepsBetween(d,this._value))},moveLeft:function(d){return -this.moveRight(-d)},stepRatio:function(){if(this.options.step===!1){return 1}var d=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/d}})}(jQuery),function(e){function d(g,f){return"undefined"==typeof g?f||!1:g}e.widget("ui.rangeSliderBar",e.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){e.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",e.proxy(this._onInitialized,this)).bind("mousestart",e.proxy(this._cache,this)).bind("stop",e.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",e.proxy(this._onInitialized,this)).bind("mousestart",e.proxy(this._cache,this)).bind("stop",e.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,e.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(g,f){"range"===g?this._setRangeOption(f):"wheelSpeed"===g?this._setWheelSpeedOption(f):"wheelMode"===g&&this._setWheelModeOption(f)},_setRangeOption:function(b){if(("object"!=typeof b||null===b)&&(b=!1),b!==!1||this.options.range!==!1){if(b!==!1){var g=d(b.min,this.options.range.min),f=d(b.max,this.options.range.max);this.options.range={min:g,max:f}}else{this.options.range=!1}this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(b){"number"==typeof b&&b>0&&(this.options.wheelSpeed=b)},_setWheelModeOption:function(b){(null===b||b===!1||"zoom"===b||"scroll"===b)&&(this.options.wheelMode!==b&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(b),this.options.wheelMode=b)},_bindMouseWheel:function(a){"zoom"===a?this.element.parent().bind("mousewheel.bar",e.proxy(this._mouseWheelZoom,this)):"scroll"===a&&this.element.parent().bind("mousewheel.bar",e.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(this.options.range===!1){return !1}var g=this._values.max,f={min:!1,max:!1};f.max="undefined"!=typeof this.options.range.min&&this.options.range.min!==!1?this._leftHandle("substract",g,this.options.range.min):!1,f.min="undefined"!=typeof this.options.range.max&&this.options.range.max!==!1?this._leftHandle("substract",g,this.options.range.max):!1,this._leftHandle("option","range",f)},_setRightRange:function(){var g=this._values.min,f={min:!1,max:!1};f.min="undefined"!=typeof this.options.range.min&&this.options.range.min!==!1?this._rightHandle("add",g,this.options.range.min):!1,f.max="undefined"!=typeof this.options.range.max&&this.options.range.max!==!1?this._rightHandle("add",g,this.options.range.max):!1,this._rightHandle("option","range",f)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var g=this._leftHandle("position"),f=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:g}),this.element.css("width",f-g)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(g,f){var h=Array.prototype.slice.call(f);return g[this.options.type].apply(g,h)},_cache:function(){e.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(a){e.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[a]),this._deactivateRange()},_mouseStop:function(a){e.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[a]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(g,f){if(this._cacheIfNecessary(),f.element[0]===this.options.leftHandle[0]){if(this._switchedValues()){return this._switchHandles(),void this._onDragRightHandle(g,f)}this._values.min=f.value,this.cache.offset.left=f.offset.left,this.cache.leftHandle.offset=f.offset,this._positionBar()}},_onDragRightHandle:function(g,f){if(this._cacheIfNecessary(),f.element[0]===this.options.rightHandle[0]){if(this._switchedValues()){return this._switchHandles(),void this._onDragLeftHandle(g,f)}this._values.max=f.value,this.cache.rightHandle.offset=f.offset,this._positionBar()}},_positionBar:function(){var b=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=b,this.element.css("width",b).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var b=this._values.min;return this._values.min=this._values.max,this._values.max=b,!0}return !1},_switchHandles:function(){var b=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=b,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",e.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",e.proxy(this._onDragRightHandle,this))},_constraintPosition:function(a){var g,f={};return f.left=e.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[a]),f.left=this._leftHandle("position",f.left),g=this._rightHandle("position",f.left+this.cache.width.outer-this.cache.rightHandle.width),f.width=g-f.left+this.cache.rightHandle.width,f},_applyPosition:function(a){e.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[a.left]),this.element.width(a.width)},_mouseWheelZoom:function(a,s,q,p){if(!this.enabled){return !1}var o=this._values.min+(this._values.max-this._values.min)/2,n={},m={};return this.options.range===!1||this.options.range.min===!1?(n.max=o,m.min=o):(n.max=o-this.options.range.min/2,m.min=o+this.options.range.min/2),this.options.range!==!1&&this.options.range.max!==!1&&(n.min=o-this.options.range.max/2,m.max=o+this.options.range.max/2),this._leftHandle("option","range",n),this._rightHandle("option","range",m),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(e.proxy(this._wheelStop,this),200),this.zoomIn(p*this.options.wheelSpeed),!1},_mouseWheelScroll:function(a,h,g,f){return this.enabled?(this._wheelTimeout===!1?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(e.proxy(this._wheelStop,this),200),this.scrollLeft(f*this.options.wheelSpeed),!1):!1},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(b){return this._leftHandle("value",b)},max:function(b){return this._rightHandle("value",b)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(b){return b=b||1,0>b?this.scrollRight(-b):(b=this._leftHandle("moveLeft",b),this._rightHandle("moveLeft",b),this.update(),void this._triggerMouseEvent("scroll"))},scrollRight:function(b){return b=b||1,0>b?this.scrollLeft(-b):(b=this._rightHandle("moveRight",b),this._leftHandle("moveRight",b),this.update(),void this._triggerMouseEvent("scroll"))},zoomIn:function(g){if(g=g||1,0>g){return this.zoomOut(-g)}var f=this._rightHandle("moveLeft",g);g>f&&(f/=2,this._rightHandle("moveRight",f)),this._leftHandle("moveRight",f),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(g){if(g=g||1,0>g){return this.zoomIn(-g)}var f=this._rightHandle("moveRight",g);g>f&&(f/=2,this._rightHandle("moveLeft",f)),this._leftHandle("moveLeft",f),this.update(),this._triggerMouseEvent("zoom")},values:function(g,f){if("undefined"!=typeof g&&"undefined"!=typeof f){var m=Math.min(g,f),h=Math.max(g,f);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",m),this._values.max=this._rightHandle("value",h),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(e){function d(a,h,g,f){this.label1=a,this.label2=h,this.type=g,this.options=f,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=a,this.right=h,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(e.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(e.proxy(this.AfterInit,this),1000),this._resizeProxy=e.proxy(this.onWindowResize,this),e(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(e(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(n,m){this.CacheWidth(n,m),this.CacheHeight(n,m),m.offset=n.offset(),m.margin={left:this.ParsePixels("marginLeft",n),right:this.ParsePixels("marginRight",n)},m.border={left:this.ParsePixels("borderLeftWidth",n),right:this.ParsePixels("borderRightWidth",n)}},this.CacheWidth=function(n,m){m.width=n.width(),m.outerWidth=n.outerWidth()},this.CacheHeight=function(n,m){m.outerHeightMargin=n.outerHeight(!0)},this.ParsePixels=function(n,m){return parseInt(m.css(n),10)||0},this.BindHandle=function(m){m.bind("updating.positionner",e.proxy(this.onHandleUpdating,this)),m.bind("update.positionner",e.proxy(this.onHandleUpdated,this)),m.bind("moving.positionner",e.proxy(this.onHandleMoving,this)),m.bind("stop.positionner",e.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var n=this.GetRawPosition(this.cache.label1,this.cache.handle1),m=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.label1[g]("option","isLeft")?this.ConstraintPositions(n,m):this.ConstraintPositions(m,n),this.PositionLabel(this.label1,n.left,this.cache.label1),this.PositionLabel(this.label2,m.left,this.cache.label2)}},this.PositionLabel=function(n,m,t){var s,q,p,o=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;o-m>=0?(n.css("right",""),n.offset({left:m})):(s=o+this.cache.offsetParent.width,q=m+t.margin.left+t.outerWidth+t.margin.right,p=s-q,n.css("left",""),n.css("right",p))},this.ConstraintPositions=function(n,m){(n.center<m.center&&n.outerRight>m.outerLeft||n.center>m.center&&m.outerRight>n.outerLeft)&&(n=this.getLeftPosition(n,m),m=this.getRightPosition(n,m))},this.getLeftPosition=function(n,m){var p=(m.center+n.center)/2,o=p-n.cache.outerWidth-n.cache.margin.right+n.cache.border.left;return n.left=o,n},this.getRightPosition=function(n,m){var o=(m.center+n.center)/2;return m.left=o+m.cache.margin.left+m.cache.border.left,m},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){this.moving===!0&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(n,m){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(m),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(b){null!==this.cache&&(b.element[0]===this.handle1[0]?this.UpdatePosition(b,this.cache.handle1):this.UpdatePosition(b,this.cache.handle2))},this.UpdatePosition=function(n,m){m.offset=n.offset,m.value=n.value},this.GetRawPosition=function(n,m){var t=m.offset.left+m.outerWidth/2,s=t-n.outerWidth/2,q=s+n.outerWidth-n.border.left-n.border.right,p=s-n.margin.left-n.border.left,o=m.offset.top-n.outerHeightMargin;return{left:s,outerLeft:p,top:o,right:q,outerRight:p+n.outerWidth+n.margin.left+n.margin.right,cache:n,center:t}},this.Init()}e.widget("ui.rangeSliderLabel",e.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_value:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",e.proxy(this._onMoving,this)).bind("update.label",e.proxy(this._onUpdate,this)).bind("switch.label",e.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),e.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=e("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=e("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var b=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,b)},_setOption:function(g,f){"show"===g?this._updateShowOption(f):("durationIn"===g||"durationOut"===g||"delayOut"===g)&&this._updateDurations(g,f),this._setFormatterOption(g,f)},_setFormatterOption:function(g,f){"formatter"===g&&("function"==typeof f||f===!1)&&(this.options.formatter=f,this._display(this._value))},_updateShowOption:function(b){this.options.show=b,"show"!==this.options.show?(this.element.hide(),this._positionner.moving=!1):(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(g,f){parseInt(f,10)===f&&(this._positionner.options[g]=f,this.options[g]=f)},_display:function(b){this._displayText(this.options.formatter===!1?Math.round(b):this.options.formatter(b)),this._value=b},_displayText:function(b){this._valueContainer.text(b)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_positionLabels:function(){this._positionner.PositionLabels()},_mouseDown:function(b){this.options.handle.trigger(b)},_mouseUp:function(b){this.options.handle.trigger(b)},_mouseMove:function(b){this.options.handle.trigger(b)},_onMoving:function(g,f){this._display(f.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(g,f){this.options.isLeft=f,this._toggleClass(),this._positionLabels()},pair:function(b){null===this._positionner&&(this._positionner=new d(this.element,b,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),b[this.widgetName]("positionner",this._positionner))},positionner:function(b){return"undefined"!=typeof b&&(this._positionner=b),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionLabels()}})}(jQuery),function(b){b.widget("ui.dateRangeSlider",b.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){b.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),b.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min.valueOf()),max:new Date(this.options.bounds.max.valueOf()),scales:this.options.scales})},_setOption:function(a,d){("defaultValues"===a||"bounds"===a)&&"undefined"!=typeof d&&null!==d&&this._isValidDate(d.min)&&this._isValidDate(d.max)?b.ui.rangeSlider.prototype._setOption.apply(this,[a,{min:d.min.valueOf(),max:d.max.valueOf()}]):b.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(a){if("bounds"===a||"defaultValues"===a){var d=b.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(d.min),max:new Date(d.max)}}return b.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(e){var d=e.getMonth()+1,f=e.getDate();return""+e.getFullYear()+"-"+(10>d?"0"+d:d)+"-"+(10>f?"0"+f:f)},_getFormatter:function(){var d=this.options.formatter;return(this.options.formatter===!1||null===this.options.formatter)&&(d=this._defaultFormatter),function(e){return function(a){return e(new Date(a))}}(d)},values:function(a,f){var e=null;return e=this._isValidDate(a)&&this._isValidDate(f)?b.ui.rangeSlider.prototype.values.apply(this,[a.valueOf(),f.valueOf()]):b.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(e?e.min:null),max:new Date(e?e.max:null)}},min:function(a){return new Date(this._isValidDate(a)?b.ui.rangeSlider.prototype.min.apply(this,[a.valueOf()]):b.ui.rangeSlider.prototype.min.apply(this))},max:function(a){return new Date(this._isValidDate(a)?b.ui.rangeSlider.prototype.max.apply(this,[a.valueOf()]):b.ui.rangeSlider.prototype.max.apply(this))},bounds:function(a,f){var e;return e=this._isValidDate(a)&&this._isValidDate(f)?b.ui.rangeSlider.prototype.bounds.apply(this,[a.valueOf(),f.valueOf()]):b.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(e.min),max:new Date(e.max)}},_isValidDate:function(d){return"undefined"!=typeof d&&d instanceof Date},_toArray:function(d){return Array.prototype.slice.call(d)}})}(jQuery),function(b){b.widget("ui.dateRangeSliderHandle",b.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),b.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(e){var d=this._getRawValueForPositionAndBounds(e,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(d))},_setOption:function(a,d){return"step"===a?(this.options.step=d,this._createSteps(),void this.update()):(b.ui.rangeSliderHandle.prototype._setOption.apply(this,[a,d]),void ("bounds"===a&&this._createBoundsValues()))},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(this.options.step===!1||!this._isValidStep()){return void (this._steps=!1)}var g=new Date(this.options.bounds.min.valueOf()),f=new Date(this.options.bounds.max.valueOf()),n=g,m=0,h=new Date;for(this._steps=[];f>=n&&(1===m||h.valueOf()!==n.valueOf());){h=n,this._steps.push(n.valueOf()),n=this._addStep(g,m,this.options.step),m++}h.valueOf()===n.valueOf()&&(this._steps=!1)},_isValidStep:function(){return"object"==typeof this.options.step},_addStep:function(f,e,h){var g=new Date(f.valueOf());return g=this._addThing(g,"FullYear",e,h.years),g=this._addThing(g,"Month",e,h.months),g=this._addThing(g,"Date",e,7*h.weeks),g=this._addThing(g,"Date",e,h.days),g=this._addThing(g,"Hours",e,h.hours),g=this._addThing(g,"Minutes",e,h.minutes),g=this._addThing(g,"Seconds",e,h.seconds)},_addThing:function(f,e,h,g){return 0===h||0===(g||0)?f:(f["set"+e](f["get"+e]()+h*(g||0)),f)},_round:function(m){if(this._steps===!1){return m}for(var h,s,q=this.options.bounds.max.valueOf(),p=this.options.bounds.min.valueOf(),o=Math.max(0,(m-p)/(q-p)),n=Math.floor(this._steps.length*o);this._steps[n]>m;){n--}for(;n+1<this._steps.length&&this._steps[n+1]<=m;){n++}return n>=this._steps.length-1?this._steps[this._steps.length-1]:0===n?this._steps[0]:(h=this._steps[n],s=this._steps[n+1],s-m>m-h?h:s)},update:function(){this._createBoundsValues(),this._createSteps(),b.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(e,d){return this._addStep(new Date(e),1,d).valueOf()},substract:function(e,d){return this._addStep(new Date(e),-1,d).valueOf()},stepsBetween:function(m,h){if(this.options.step===!1){return h-m}var s=Math.min(m,h),q=Math.max(m,h),p=0,o=!1,n=m>h;for(this.add(s,this.options.step)-s<0&&(o=!0);q>s;){o?q=this.add(q,this.options.step):s=this.add(s,this.options.step),p++}return n?-p:p},multiplyStep:function(f,e){var h={};for(var g in f){f.hasOwnProperty(g)&&(h[g]=f[g]*e)}return h},stepRatio:function(){if(this.options.step===!1){return 1}var d=this._steps.length;return this.cache.parent.width/d}})}(jQuery),function(b){b.widget("ui.editRangeSlider",b.ui.rangeSlider,{options:{type:"text",round:1},_create:function(){b.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-editRangeSlider")},destroy:function(){this.element.removeClass("ui-editRangeSlider"),b.ui.rangeSlider.prototype.destroy.apply(this)},_setOption:function(a,d){("type"===a||"step"===a)&&this._setLabelOption(a,d),"type"===a&&(this.options[a]=null===this.labels.left?d:this._leftLabel("option",a)),b.ui.rangeSlider.prototype._setOption.apply(this,[a,d])},_setLabelOption:function(e,d){null!==this.labels.left&&(this._leftLabel("option",e,d),this._rightLabel("option",e,d))},_labelType:function(){return"editRangeSliderLabel"},_createLabel:function(a,f){var e=b.ui.rangeSlider.prototype._createLabel.apply(this,[a,f]);return null===a&&e.bind("valueChange",b.proxy(this._onValueChange,this)),e},_addPropertiesToParameter:function(d){return d.type=this.options.type,d.step=this.options.step,d.id=this.element.attr("id"),d},_getLabelConstructorParameters:function(a,f){var e=b.ui.rangeSlider.prototype._getLabelConstructorParameters.apply(this,[a,f]);return this._addPropertiesToParameter(e)},_getLabelRefreshParameters:function(a,f){var e=b.ui.rangeSlider.prototype._getLabelRefreshParameters.apply(this,[a,f]);return this._addPropertiesToParameter(e)},_onValueChange:function(e,d){var f=!1;f=d.isLeft?this._values.min!==this.min(d.value):this._values.max!==this.max(d.value),f&&this._trigger("userValuesChanged")}})}(jQuery),function(b){b.widget("ui.editRangeSliderLabel",b.ui.rangeSliderLabel,{options:{type:"text",step:!1,id:""},_input:null,_text:"",_create:function(){b.ui.rangeSliderLabel.prototype._create.apply(this),this._createInput()},_setOption:function(a,d){"type"===a?this._setTypeOption(d):"step"===a&&this._setStepOption(d),b.ui.rangeSliderLabel.prototype._setOption.apply(this,[a,d])},_createInput:function(){this._input=b("<input type='"+this.options.type+"' />").addClass("ui-editRangeSlider-inputValue").appendTo(this._valueContainer),this._setInputName(),this._input.bind("keyup",b.proxy(this._onKeyUp,this)),this._input.blur(b.proxy(this._onChange,this)),"number"===this.options.type&&(this.options.step!==!1&&this._input.attr("step",this.options.step),this._input.click(b.proxy(this._onChange,this))),this._input.val(this._text)},_setInputName:function(){var d=this.options.isLeft?"left":"right";this._input.attr("name",this.options.id+d)},_onSwitch:function(a,d){b.ui.rangeSliderLabel.prototype._onSwitch.apply(this,[a,d]),this._setInputName()},_destroyInput:function(){this._input.remove(),this._input=null},_onKeyUp:function(d){return 13===d.which?(this._onChange(d),!1):void 0},_onChange:function(){var d=this._returnCheckedValue(this._input.val());d!==!1&&this._triggerValue(d)},_triggerValue:function(e){var d=this.options.handle[this.options.handleType]("option","isLeft");this.element.trigger("valueChange",[{isLeft:d,value:e}])},_returnCheckedValue:function(e){var d=parseFloat(e);return isNaN(d)||isNaN(Number(e))?!1:d},_setTypeOption:function(d){"text"!==d&&"number"!==d||this.options.type===d||(this._destroyInput(),this.options.type=d,this._createInput())},_setStepOption:function(d){this.options.step=d,"number"===this.options.type&&this._input.attr("step",d!==!1?d:"any")},_displayText:function(d){this._input.val(d),this._text=d},enable:function(){b.ui.rangeSliderLabel.prototype.enable.apply(this),this._input.attr("disabled",null)},disable:function(){b.ui.rangeSliderLabel.prototype.disable.apply(this),this._input.attr("disabled","disabled")}})}(jQuery),function(e){var d={first:function(b){return b},next:function(b){return b+1},format:function(){},label:function(b){return Math.round(b)},stop:function(){return !1}};e.widget("ui.ruler",{options:{min:0,max:100,scales:[]},_create:function(){this.element.addClass("ui-ruler"),this._createScales()},destroy:function(){this.element.removeClass("ui-ruler"),this.element.empty()},_regenerate:function(){this.element.empty(),this._createScales()},_setOption:function(g,f){return"min"===g||"max"===g&&f!==this.options[g]?(this.options[g]=f,void this._regenerate()):"scales"===g&&f instanceof Array?(this.options.scales=f,void this._regenerate()):void 0},_createScales:function(){if(this.options.max!==this.options.min){for(var b=0;b<this.options.scales.length;b++){this._createScale(this.options.scales[b],b)}}},_createScale:function(h,g){var b=e.extend({},d,h),a=e("<div class='ui-ruler-scale' />").appendTo(this.element);a.addClass("ui-ruler-scale"+g),this._createTicks(a,b)},_createTicks:function(n,m){var u,t,s,q=m.first(this.options.min,this.options.max),p=this.options.max-this.options.min,o=!0;do{u=q,q=m.next(u),t=(Math.min(q,this.options.max)-Math.max(u,this.options.min))/p,s=this._createTick(u,q,m),n.append(s),s.css("width",100*t+"%"),o&&u>this.options.min&&s.css("margin-left",100*(u-this.options.min)/p+"%"),o=!1}while(!this._stop(m,q))},_stop:function(g,f){return g.stop(f)||f>=this.options.max},_createTick:function(a,p,o){var n=e("<div class='ui-ruler-tick' style='display:inline-block' />"),m=e("<div class='ui-ruler-tick-inner' />").appendTo(n),h=e("<span class='ui-ruler-tick-label' />").appendTo(m);return h.text(o.label(a,p)),o.format(n,a,p),n}})}(jQuery);(function(a){a.fn.ellipsis=function(d){if(typeof(this.text)!="function"){return}var b=this.text();if(typeof(d)!="undefined"&&b.length>d){this.text(b.substr(0,d)+"...")}return this}})(jQuery);var rdx=new function(){this.ext=new Object();this.EXTENSIONS=[];this.INFO="INFO";this.ERROR="ERROR";this.ERROR_RETRY="ERROR_RETRY";this.CONFIRMATION="confirmation";this.WARNING="warning";this.MAX_TOOLTIP_CONSTANT_LENGTH=500;this.SORT_ASCENDING="ascending";this.SORT_DESCENDING="descending";this.SERVER_SORTING=false;this.NON_REGEX_SEARCH=false;this.FRAMEWORK_BASE="/admin_ui";this.APP_IMAGE_BASE="/";this.STATUS_BAR_ENTITY_NAME_IDENTIFIER="";this.APP_I18N_BASE="/";this.APP_I18N_FILE_NAME="";this.APP_HELP_BASE="/";this.APP_HELP_OBJECT_NAME="";this.APP_TOOL_BAR_ACTIONS=[];this.APP_ERR_CODES=[];this.STAND_ALONE=false;this.CONTEXT_MENU=true;this.PAGINATION_DEFAULT_PAGE_SIZE=25;this.PAGINATION_PAGE_NUMBER_OPTION=[25,50,100,250];this.JOBS=false;this.LICENSE_KEY="license";this.FEATURE_KEY="feature";this._REGISTRY=new Object();this._registry_tree_key="tree";this.custom_status_activity_message={};this.BRAND_LOGO_CSS="citrix_logo";this.BRAND_LOGO_LINK="http://www.citrix.com/netscaler";this.BRAND_LOGO_NAME="CITRIX";this.COMPANY_LOGO_LINK="http://www.citrix.com";this.COPYRIGHT_LINK="http://www.citrix.com/netscaler";this.COPYRIGHT_BRAND_NAME="Citrix Systems, Inc.";this.HELP_SUPPORTED=true;this.RDX_TOOLTIPS=false;this.SHOW_VIEW_SETTINGS=true;this.SETTINGS_RESOURCE_NAME="uiinternal";this.SETTINGS_RESOURCE_VALUE_PROPERTY_NAME="property_value";this.SETTINGS_RESOURCE_KEY_PROPERTY_NAME="property_name";this.CUXIP_LEARN_MORE_LINK="http://www.citrix.com/community/ux-improvement-program.html";this.BROWSER=null;this.BROWSER_VERSION=null;this.SAFARI="safari";this.IE="ie";this.FIREFOX="firefox";this.CHROME="chrome";this.OS=null;this.MAC="mac";this.WINDOWS="windows";this.UNIX="x11";this.LINUX="linux";this.DEVICE=null;this.ANDROID="android";this.IOS="ios";this.BLACKBERRY="blackberry";this.WINDOWS_MOBILE="windows_mobile";this.SUCCESS="success";this.FAILED="failed";this.IN_PROGRESS="inprogress";this.COMPLETED="completed";this.DONE="Done";this.LINEAR="linear";this.PROGRESSIVE="progressive";this.PROGRESS_INFO="progressive_info";this.PROGRESS_BAR="progress_bar";this.MULTI_PROGRESS_BAR="multi_progress_bar";this.STOP_AFTER_FIRST_FAILURE="stop_after_first_failure";this.TABLE_HAS_SCROLLABLE_HEADER=true;this.ACTION="generic_action";this.EXTRA_ACTION="extra_action";this.position={LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"};this.TAB_BUTTON="tab_button";this.DEFAULT_BUTTON="default_button";this.BLUE_BUTTON="blue_button";this.LINK="link";this.SUMMARY="summary";this.HEADING="heading";this.TITLE="title";this.THIN_SEPARATOR="thin_separator";this.OPEN="OPEN";this.CLOSE="CLOSE";this.SEPARATOR="separator";this.SEPARATOR_LABEL="";this.ELEMENTS_READONLY=false;this.INLINE="inline";this.SLIDER="slider";this.DIALOG="dialog";this.SECTION="section";this.APP_EXPRESSION_EDITOR_METHOD_FILE_PATH=null;this.API_TYPE={NITRO:"NITRO",REST:"REST"};this.APP_NITRO_TO_CLI_PARSER=null;this.API=this.API_TYPE.NITRO;this.ALL="ALL";this.REMOVE="REMOVE";this.NONE="NONE";this.USE_DOUBLE_ENCODING=this.NONE;this.register_tree=function(a){this._REGISTRY[this._registry_tree_key]=a};this.get_tree=function(){return this._REGISTRY[this._registry_tree_key]};this.unregister_tree=function(){if(this._REGISTRY[this._registry_tree_key]){delete this._REGISTRY[this._registry_tree_key]}};this.HELP_SLIDER="help_slider";this.EXTENSION_SUPPORT_IN_EXPRESSION_EDITOR=true;this.transactions_callbacks={};this.transactions_callbacks.filter_context_data_callback=null;this.transactions_callbacks.filter_resource_events_callback=null;this.transactions_callbacks.do_resc_data_alteration_callback=null;this.transactions_callbacks.is_resc_data_alteration_req_callback=null};rdx.tree_component=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={is_serachbox_needed:true,placeholder:"Search Ciphers"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._clear=true;this._parent_data=[];this._child_parent_mapping=null;this._input_search=null;this._clear_span=null};rdx.tree_component.prototype.render=function(){if(this._properties.is_serachbox_needed){var a=$("<div>").addClass("search_div");this._input_search=$("<input type = 'text'>").attr("placeholder",this._properties.placeholder).addClass("search_text_box");this._clear_span=$("<span>").addClass("clear hidden");a.append(this._input_search);a.append(this._clear_span);this._parent.append(a);this._clear_span.bind("mouseover",function(){$(this).addClass("hover")});this._clear_span.bind("mouseout",function(){$(this).removeClass("hover").removeClass("active")});this._clear_span.bind("mousedown",function(){$(this).addClass("active")});this._clear_span.bind("click",{tree:this,search_box:this._input_search},function(d){var b=d.data.tree;b.search("");d.data.search_box.val("");$(this).addClass("hidden")});a.bind("keyup",{tree:this},function(e){var d=e.data.tree;var g=d._input_search;var h=d._clear_span;var f=g.val();var b=d.search(f);if(f==""){h.addClass("hidden")}else{if(b){h.removeClass("hidden")}}d.set_all_rows_selected();d.set_all_rows_unselected()})}this.tree_div=$("<div>");this.tree_div.dynatree(this._properties);this.tree_div.addClass("tree_list");this._parent.append(this.tree_div);this._tree=this._get_tree();this._tree_root=this.get_root()};rdx.tree_component.prototype._get_tree=function(){return this.tree_div.dynatree("getTree")};rdx.tree_component.prototype.get_root=function(){return this.tree_div.dynatree("getRoot")};rdx.tree_component.prototype.get_node_by_key=function(a){return this._tree.getNodeByKey(a)};rdx.tree_component.prototype.get_node_title=function(a){return rdx.utils.is_defined(a.data["title"])?a.data["title"]:data};rdx.tree_component.prototype.get_node_parent=function(a){return a.parent};rdx.tree_component.prototype.add_child=function(a,b){a.addChild({title:b,key:b})};rdx.tree_component.prototype.has_children=function(a){return(a.childList==null)?false:true};rdx.tree_component.prototype.get_child_list=function(a){return a.childList};rdx.tree_component.prototype.get_selected_items_data=function(){var d=[];var a=this._tree.getSelectedNodes();for(var b=0;b<a.length;b++){var e=a[b];if(rdx.utils.is_defined(e.li)&&(rdx.utils.is_not_defined(e.li.hidden)||e.li.hidden==false)){d.push(e)}else{if(!rdx.utils.is_defined(e.li)){d.push(e)}}}return d};rdx.tree_component.prototype.remove_node=function(g){var a=g;var f=g.parent;var e=f.childList;if(rdx.utils.is_defined(e)&&e.length==1){if(a!==e[0]){return}return f.removeChildren()}if(a===f.tree.activeNode){a.deactivate()}if(f.tree.options.persist){if(a.bSelected){f.tree.persistence.clearSelect(a.data.key)}if(a.bExpanded){f.tree.persistence.clearExpand(a.data.key)}}a.removeChildren(true);if(f.ul){if(a.li&&f.ul.childNodes.length>0){f.ul.removeChild(a.li)}}if(rdx.utils.is_defined(e)){for(var d=0,b=e.length;d<b;d++){if(e[d]===a){f.childList.splice(d,1);break}}}};rdx.tree_component.prototype.toggle_collapse=function(){this._tree_root.visit(function(a){a.toggleExpand()})};rdx.tree_component.prototype.set_all_rows_selected=function(){this._tree_root.visit(function(a){a.select(true)})};rdx.tree_component.prototype.set_all_rows_unselected=function(){this._tree_root.visit(function(a){a.select(false)})};rdx.tree_component.prototype.get_count_of_child_nodes=function(){var a=this.get_child_list(this._tree_root);var e=0;if(rdx.utils.is_defined(a)){for(var b=0;b<a.length;b++){var d=a[b];if((rdx.utils.is_not_defined(d.li.hidden)||d.li.hidden==false)){e++}}}return e};rdx.tree_component.prototype.get_rows_data=function(){var e=[];var d=this._tree_root.getChildren();if(d!=null){for(var a=0;a<d.length;a++){var b=d[a];if(rdx.utils.is_defined(b.li)&&(rdx.utils.is_not_defined(b.li.hidden)||b.li.hidden==false)){e.push(b)}else{if(!rdx.utils.is_defined(b.li)){e.push(b)}}}}return e};rdx.tree_component.prototype.search=function(e){this.show_all_nodes();if(e.length<1&&!this._clear){this._clear=true;this._tree_root.visit(function(f){$(f.li).show()});this.toggle_collapse();this.refresh_tree()}else{if(e.length>=1){this._clear=false;var d=this.get_child_list(this._tree_root);if(rdx.utils.is_defined(d)){for(var b=0;b<d.length;b++){var a={hide:false};this._search_node(d[b],e,a)}}}}this.tree_div.trigger(rdx.events.UPDATE_COUNT);return true};rdx.tree_component.prototype._search_node=function(g,h,b){var f=this.get_child_list(g);if(rdx.utils.is_defined(f)){var a=true;for(var e=0;e<f.length;e++){var d={hide:false};this._search_node(f[e],h,d);a=a&&d.hide}if(a&&!this._is_pattern_present(g,h)){this._hide_node(g);b.hide=true}else{if(this._is_pattern_present(g,h)){b.hide=false;g.visit(function(m){m.expand(true);$(m.li).show();m.li.hidden=false})}else{b.hide=false}}}else{if(!this._is_pattern_present(g,h)){this._hide_node(g);b.hide=true}else{b.hide=false}}};rdx.tree_component.prototype._is_pattern_present=function(a,b){if((a.data.title.toLowerCase()).indexOf(b.toLowerCase())>=0){return true}return false};rdx.tree_component.prototype._hide_node=function(a){if(rdx.utils.is_defined(a.li)){$(a.li).hide();a.li.hidden=true}};rdx.tree_component.prototype.show_all_nodes=function(){this._tree_root.visit(function(a){a.expand(true);$(a.li).show();a.li.hidden=false})};rdx.tree_component.prototype.delete_selected_item=function(d){var g;if(rdx.utils.is_defined(d)){g=d}else{g=this.get_selected_items_data()}var h={};var e=[];var n=[];for(var m=0;m<g.length;m++){var q=g[m];if($.type(q)==="string"){q=this.get_node_by_key(q)}if(rdx.utils.is_not_defined(q)){return n}var o=this.get_node_title(q);if(rdx.utils.is_not_defined(h[o])){h[o]=1;if($.inArray(o,this._parent_data)==-1){var p=this.get_node_parent(q);this.remove_node(q);var f=false;for(var a=0;a<n.length;a++){if($.inArray(n[a]["value"],this._child_parent_mapping[o])!=-1){f=true;break}}if($.inArray(q.data["title"],e)==-1&&!f){e.push(q.data["title"]);n.push({value:q.data["title"]})}if(!this.has_children(p)&&rdx.utils.is_defined(this.get_node_by_key(p.data.key))){this.remove_node(p)}}else{if(!this.has_children(q)){this.remove_node(q)}else{var b=this.get_child_list(q);for(var a=0;a<b.length;a++){this.remove_node(b[a])}this.remove_node(q)}if($.inArray(q.data["title"],e)==-1){e.push(q.data["title"]);n.push({value:q.data["title"]})}q=this.get_node_by_key(o)}}}this.set_all_rows_selected();this.set_all_rows_unselected();this.tree_div.trigger(rdx.events.UPDATE_COUNT);if(!this._clear_span.hasClass("hidden")){this._clear_span.trigger("click")}return n};rdx.tree_component.prototype.add_item=function(f){var b=new Array();if($.inArray(f.value,this._parent_data)==-1){this._add_child_nodes_to_all_parents(f.value,true)}else{b=this._parent_child_mapping[f.value];var a=this.get_root();var e=this.get_node_by_key(f.value);if(rdx.utils.is_not_defined(e)){this.add_child(a,f.value,f.value)}for(var d=0;d<b.length;d++){this._add_child_nodes_to_all_parents(b[d],false)}}};rdx.tree_component.prototype._add_child_nodes_to_all_parents=function(m,d){var b=this._child_parent_mapping[m];for(var e=0;e<b.length;e++){var g=this.get_node_by_key(b[e]);if(g!=null){if(rdx.utils.is_empty(g.data.children)){this.add_child(g,m,m)}else{var f=false;for(var h=0;h<g.data.children.length;h++){if(m==g.data.children[h]["key"]){f=true;break}}if(f==false){this.add_child(g,m,m)}}}else{if(d==true){var a=this.get_root();this.add_child(a,b[e],b[e]);g=this.get_node_by_key(b[e]);this.add_child(g,m,m)}}}};rdx.tree_component.prototype.add_items=function(f){this._tree_root.removeChildren();this._tree_root.addChild(f);this._parent_data=[];this._child_parent_mapping={};this._parent_child_mapping={};for(var b=0;b<f.length;b++){var e=f[b];this._parent_data.push(e.key);if(rdx.utils.is_defined(e.children)){this._parent_child_mapping[e.key]=[];for(var a=0;a<e.children.length;a++){var d=e.children[a]["key"];this._parent_child_mapping[e.key].push(d);if(rdx.utils.is_defined(this._child_parent_mapping[d])){this._child_parent_mapping[d].push(e.key)}else{this._child_parent_mapping[d]=[];this._child_parent_mapping[d].push(e.key)}}}}};rdx.tree_component.prototype.delete_all_items=function(){this._tree_root.removeChildren()};rdx.tree_component.prototype.set_sort_info=function(){};rdx.tree_component.prototype.get_component_type=function(){return rdx.form_constants.TREE};rdx.tree_component.prototype.get_component=function(){return this._tree};rdx.tree_component.prototype.refresh_tree=function(){var e=this._tree_root.getChildren();data=[];if(rdx.utils.is_defined(e)){for(var d=0;d<e.length;d++){var h=e[d].childList;var m=e[d].data.key;if(rdx.utils.is_defined(h)){var b=[];for(var a=0;a<h.length;a++){var g=h[a];b.push({title:g.data.key,key:g.data.key})}var f={title:m,key:m,children:b}}data.push(f)}this._tree_root.removeChildren();this._tree_root.addChild(data)}};rdx.utils=new function(){this.predefined_nitro_params=["count","filter","action","args","attrs","entityname","pageno","pagesize","format","httpheaders","warning","view","sessionid","rawdata"];this.is_ie=function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf("trident")!=-1)};this.is_instrumentation_enabled=function(){var instrumentation_enabled=false;if(rdx.utils.is_defined(rdx.dopper_enable_setting)&&rdx.dopper_enable_setting.enabled=="true"){var instrumentation_enabled=(rdx.utils.is_defined(rdx.dopper_enable_setting.doppler_instrumentation_enabled)&&rdx.dopper_enable_setting.doppler_instrumentation_enabled=="true");return instrumentation_enabled}return instrumentation_enabled};this.get_view_title=function(){var view_title=$(".dynatree-active a").text();return view_title.replace(/\ /g,"_")};this.is_chrome_safari=function(){return(this.is_chrome()||this.is_safari())};this.is_chrome=function(){var n_vendor=null;if(rdx.utils.is_defined(navigator.vendor)){n_vendor=navigator.vendor.toLowerCase()}else{n_vendor=""}var n_agent=navigator.userAgent.toLowerCase();return(n_agent.indexOf("chrome")!=-1)&&(n_vendor.indexOf("google")!=-1)};this.is_safari=function(){var n_vendor=null;if(rdx.utils.is_defined(navigator.vendor)){n_vendor=navigator.vendor.toLowerCase()}else{n_vendor=""}var n_agent=navigator.userAgent.toLowerCase();return(n_agent.indexOf("safari")!=-1)&&(n_vendor.indexOf("apple")!=-1)};this.is_firefox=function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf("firefox")!=-1)};this.get_browser_version=function(){var nAgt=navigator.userAgent;var fullVersion=""+parseFloat(navigator.appVersion);var verOffset,ix,version;if((nAgt.indexOf("Trident"))!=-1){if((nAgt.indexOf("rv:")!=-1)){version=nAgt.match(/Trident\/\d{1,2}.\d{1,2}.*rv:([0-9]*)/i);if(version){fullVersion=version[1]}}else{if((verOffset=nAgt.indexOf("MSIE"))!=-1){fullVersion=nAgt.substring(verOffset+5)}}}else{if((verOffset=nAgt.indexOf("Chrome"))!=-1){fullVersion=nAgt.substring(verOffset+7)}else{if((verOffset=nAgt.indexOf("Safari"))!=-1){fullVersion=nAgt.substring(verOffset+7);if((verOffset=nAgt.indexOf("Version"))!=-1){fullVersion=nAgt.substring(verOffset+8)}}else{if((verOffset=nAgt.indexOf("Firefox"))!=-1){fullVersion=nAgt.substring(verOffset+8)}}}}if((ix=fullVersion.indexOf(";"))!=-1){fullVersion=fullVersion.substring(0,ix)}if((ix=fullVersion.indexOf(" "))!=-1){fullVersion=fullVersion.substring(0,ix)}return fullVersion};this.browser=function(){var uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}return browser};this.is_mac=function(){var os="";if(rdx.utils.is_defined(navigator.appVersion)){os=navigator.appVersion.toLowerCase()}return(os.indexOf("mac")!=-1)};this.is_windows=function(){var os="";if(rdx.utils.is_defined(navigator.appVersion)){os=navigator.appVersion.toLowerCase()}return(os.indexOf("win")!=-1)};this.is_linux=function(){var os="";if(rdx.utils.is_defined(navigator.appVersion)){os=navigator.appVersion.toLowerCase()}return(os.indexOf("linux")!=-1)};this.is_unix=function(){var os="";if(rdx.utils.is_defined(navigator.appVersion)){os=navigator.appVersion.toLowerCase()}return(os.indexOf("x11")!=-1)};this.is_android=function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf("android")!=-1)};this.is_blackberry=function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf("blackberry")!=-1)};this.is_iOS=function(){var ua=navigator.userAgent.toLowerCase();return((ua.indexOf("iphone")!=-1)||(ua.indexOf("ipad")!=-1)||(ua.indexOf("ipod")!=-1))};this.is_windows_mobile=function(){var ua=navigator.userAgent.toLowerCase();return(ua.indexOf("emobile")!=-1)};this.is_mobile=function(){return(this.is_android()||this.is_blackberry()||this.is_iOS()||this.is_windows_mobile())};this.do_logout=function(has_session_timed_out,refresh_page,callback){$(window).trigger($.Event("beforeunload"));window.onunload();var login=new Object();login.sessionid=this.get_cookie("SESSID");if(has_session_timed_out){this._reset_cookie_and_redirect_root("Deleted",null,callback)}else{var utils=this;rdx.model.remove(this.get_resource("login"),new rdx.callback(null,function(response,refresh_page){var value="";if(rdx.utils.is_defined(response.login)&&rdx.utils.is_defined(response.login[0])&&rdx.utils.is_defined(response.login[0]["sessionid"])){value=response.login[0]["sessionid"]}utils._reset_cookie_and_redirect_root(value,refresh_page,callback)},[refresh_page]),login)}};this._reset_cookie_and_redirect_root=function(value,refresh_page,callback){if(rdx.utils.is_not_defined(refresh_page)){refresh_page=true}this.set_cookie("SESSID",value,1);window.onbeforeunload=function(){};window.onunload=function(){};var header_view=null;try{header_view=this.get_view("header_view")}catch(e){}if(refresh_page==true){if(this.is_defined(header_view,header_view.view_properties.logout_url)){window.location.href=header_view.view_properties.logout_url}else{window.location.href="/"}}else{callback.call_back()}};this.get_url_query_param=function(param_key){var url=rdx.utils.is_not_empty(window.location.search)?window.location.search:window.location.href;return this.split_url_on_param_key(url,param_key)};this.split_url_on_param_key=function(url,param_key){var regexS="[\\?&]"+param_key+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(results!=null){return results[1]}return null};this.get_detailed_error_message=function(err){var error_message="";if(typeof(err)=="string"){return err}if(this.is_defined(err.name)){error_message+=err.name+": "}error_message+=err.message;if(this.is_defined(err.lineNumber)){error_message+=" at line "+err.lineNumber}if(this.is_defined(err.fileName)){error_message+=" in file "+err.fileName}return error_message};this.populate_selected_duration=function(duration,reverse){if(rdx.utils.is_defined(reverse)&&reverse==true){var duration_map={last_1_hour:"Last 1 Hour",last_1_day:"Last 1 Day",last_1_week:"Last 1 Week",last_1_month:"Last 1 Month",last_3_months:"Last 3 Months",last_6_months:"Last 6 Months",last_1_year:"Last 1 Year"};return duration_map[duration]||duration}else{var duration_map_re={"Last 1 Hour":"last_1_hour","Last 1 Day":"last_1_day","Last 1 Week":"last_1_week","Last 1 Month":"last_1_month","Last 3 Months":"last_3_months","Last 6 Months":"last_6_months","Last 1 Year":"last_1_year"};return duration_map_re[duration]||duration}};this.merge=function(object1,object2){return $.extend(true,{},object1,object2)};this.is_array=function(object){return this.is_defined(object)&&!(object.propertyIsEnumerable("length"))&&typeof(object)=="object"&&typeof(object.length)=="number"};this.clone_array=function(array){return array.slice()};this.unshift_clone_array=function(array,elements){var clone=this.clone_array(array);elements.splice(0,0,0,0);clone.splice.apply(clone,elements);return clone};this.create_2D_array=function(m,n){n=n||m;var array=new Array(m);for(var i=0;i<m;i++){array[i]=new Array(n)}return array};this.random=function(){return(Math.random()+"").replace(/\./,"")};this.get_view=function(view_str){if(rdx.utils.is_defined(view_str)&&rdx.utils.is_object(view_str)){return view_str}else{if(rdx.views&&rdx.views[view_str]){return rdx.views[view_str]}}throw"View definition is not found: "+view_str};this.get_resource=function(resource_str){if(rdx.utils.is_object(resource_str)&&(rdx.utils.is_defined(resource_str.get_url)||rdx.utils.is_defined(resource_str.get_all))){return resource_str}if(rdx.resources&&rdx.resources[resource_str]){return rdx.resources[resource_str]}throw"Resource definition is not found: "+resource_str};this.get_resource_key_label=function(resource_str,key){if(rdx.utils.is_defined(rdx.resources[resource_str])){var rsrc_properties=rdx.resources[resource_str].properties;if(rdx.utils.is_defined(rsrc_properties[key])&&rdx.utils.is_defined(rsrc_properties[key].label)){return rdx.i18n.get_string(rsrc_properties[key].label)}throw"Resource key label is not found"+rsrc_properties[key].key}throw"Resource definition is not found: "+resource_str};this.get_enum=function(enum_str){if(rdx.enums&&rdx.enums[enum_str]){return rdx.enums[enum_str]}throw"Enum definition is not found: "+enum_str};this.create_right_aligned_table=function(content){var right_aligned_table=$(document.createElement("table")).addClass("full_width_table").attr("cellPadding",0).attr("cellSpacing",0);if(!right_aligned_table.html().match(/<tbody>/i)){right_aligned_table.append(document.createElement("tbody"))}var row=$(right_aligned_table[0].tBodies[0].insertRow(-1));$(row[0].insertCell(-1)).attr("align","right").append(content);return right_aligned_table};this.set_focus_on_first_editable_component=function(parent){if(!parent||!parent.childNodes){return false}for(var i=0,end_index=parent.childNodes.length;i<end_index;i++){var child_node=parent.childNodes[i];var node_name=child_node.nodeName.toLowerCase();if(child_node.className=="hidden"){continue}if((node_name=="input"||node_name=="textarea"||node_name=="select"||node_name=="button")&&child_node.type!="hidden"&&child_node.disabled!=true&&child_node.readOnly!=true){try{child_node.focus()}catch(err){}return true}if(this.set_focus_on_first_editable_component(child_node)){return true}}return false};this.set_focus_on_first_clickable_component=function(parent){if(!parent||!parent.childNodes){return false}for(var i=0,end_index=parent.childNodes.length;i<end_index;i++){var child_node=parent.childNodes[i];var node_name=child_node.nodeName.toLowerCase();if((node_name=="button"||node_name=="a")&&child_node.type!="hidden"&&child_node.disabled!=true&&child_node.readOnly!=true){try{child_node.focus()}catch(err){}return true}if(this.set_focus_on_first_clickable_component(child_node)){return true}}return false};this.add_image_error_handler=function(img,path){if(!path){path=rdx.images.SPACER_IMG}img.bind(rdx.events.ERROR,{ns_img:img,ns_path:path},function(event){event.data.ns_img.attr("src",event.data.ns_path)})};this.set_width=function(element,width){var non_content_width=element.outerWidth(true)-element.width();element.width(width-non_content_width)};this.set_height=function(element,height){var non_content_height=element.outerHeight(true)-element.height();element.height(height-non_content_height)};this.set_cookie=function(name,value,seconds,end_of_session){var expires="";var path="; path=/";var secure=(location.protocol=="https:")?"; secure":"";if(!end_of_session){if(!seconds){seconds=60*60*24*30*12}var date=new Date();date.setTime(date.getTime()+(seconds*1000));expires="; expires="+date.toGMTString()}document.cookie=name+"="+escape(value)+expires+path+secure};this.get_cookie=function(name){name=name+"=";var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=cookies[i];while(cookie.charAt(0)==" "){cookie=cookie.substring(1,cookie.length)}if(cookie.indexOf(name)==0){return unescape(cookie.substring(name.length,cookie.length))}}return null};this.starts_with=function(value,key){if(rdx.utils.is_not_defined(value)||rdx.utils.is_not_defined(key)){return false}if(key.length>value.length){return false}if(!rdx.utils.is_function(value.slice)){return false}return(value.slice(0,key.length)==key)};this.replace_in_rule=function(rule,sub_rule_to_match,operator){operator=operator||" || ";var match_index=rule.indexOf(sub_rule_to_match);var rule_string="";if(match_index!=-1){var mod_rule=rule.replace(sub_rule_to_match,"");var split_rules=mod_rule.split("||");var rule_string="";var or_op_prefix=" || ";for(var ind=0;ind<split_rules.length;ind++){var str=split_rules[ind];if(rdx.utils.is_not_empty(rdx.utils.trim(str))){rule_string+=str+or_op_prefix}}}if(rdx.utils.is_empty(rule_string)){return rule}rule_string=rule_string.substring(0,(rule_string.length-or_op_prefix.length));return rule_string};this.ends_with=function(value,key){if(rdx.utils.is_not_defined(value)||rdx.utils.is_not_defined(key)){return false}if(key.length>value.length){return false}if(!rdx.utils.is_function(value.slice)){return false}return(value.slice(-key.length)==key)};this.sort_string=function(a,b){return(a==b)?0:((a<b)?-1:1)};this.sort_string_case_insensitive=function(a,b){return(a.toLowerCase()==b.toLowerCase())?0:((a.toLowerCase()<b.toLowerCase())?-1:1)};this.sort_date=function(a,b){var a=parseInt(a)?parseInt(a):a;var b=parseInt(b)?parseInt(b):b;var a_time=(new Date(a)).getTime();var b_time=(new Date(b)).getTime();return a_time-b_time};this.sort_number=function(a,b){try{a=parseFloat(a.replace(eval("/["+rdx.i18n.get_grouping_separator()+"]/g"),""));b=parseFloat(b.replace(eval("/["+rdx.i18n.get_grouping_separator()+"]/g"),""));return a-b}catch(err){return rdx.utils.sort_string(a,b)}};this.sort_ip_port_protocol=function(a,b){a=a.replace(/[:.]\d* - [\w-_]+$/,"");b=b.replace(/[:.]\d* - [\w-_]+$/,"");return this.sort_ip(a,b)};this.sort_ip=function(a,b){var a_is_ipv6=rdx.utils.is_ipv6(a);var b_is_ipv6=rdx.utils.is_ipv6(b);if(a_is_ipv6!=b_is_ipv6){if(!a_is_ipv6&&b_is_ipv6){return -1}return 1}if(a_is_ipv6){return this.sort_ipv6(a,b)}return this.sort_ipv4(a,b)};this.sort_ipv6=function(a,b){var arr=a.split("/");a=arr[0];arr=b.split("/");b=arr[0];try{var a_addr=this.get_ipv6_address_bytes(a);var b_addr=this.get_ipv6_address_bytes(b);for(var i=0;i<16;i++){if(a_addr[i]!=b_addr[i]){return(a_addr[i]&255)-(b_addr[i]&255)}}}catch(err){}return 1};this.sort_ipv4=function(a,b){var a_tokens=a.split(".");var b_tokens=b.split(".");if(a_tokens.length==4&&b_tokens.length==4){try{var d1=parseInt(a_tokens[0]);var d2=parseInt(a_tokens[1]);var d3=parseInt(a_tokens[2]);var d4=parseInt(a_tokens[3]);var d11=parseInt(b_tokens[0]);var d22=parseInt(b_tokens[1]);var d33=parseInt(b_tokens[2]);var d44=parseInt(b_tokens[3])}catch(err){return 1}if(d1>d11){return 1}if(d1<d11){return -1}if(d2>d22){return 1}if(d2<d22){return -1}if(d3>d33){return 1}if(d3<d33){return -1}if(d4>d44){return 1}if(d4<d44){return -1}return 0}return this.sort_string(a,b)};this.sort_default=function(a,b){return this.sort_number(a,b)};this.get_ipv6_address_bytes=function(ipv6_str){var ipv6_arr=ipv6_str.split(":");var no_of_octets_missing=8-ipv6_arr.length+1;var new_ipv6_arr=new Array();for(var i=0,end_index=ipv6_arr.length;i<end_index;i++){if(ipv6_arr[i]==""){for(var j=0;j<no_of_octets_missing;j++){new_ipv6_arr.push("0000")}}else{new_ipv6_arr.push(this.ensure_four_digits_in_octet(ipv6_arr[i]))}}var byte_arr=new Array(16);var j=0;for(var i=0,end_index=new_ipv6_arr.length;i<end_index;i++){byte_arr[j++]=parseInt(new_ipv6_arr[i].substr(0,2),16);byte_arr[j++]=parseInt(new_ipv6_arr[i].substr(2,2),16)}return byte_arr};this.ensure_four_digits_in_octet=function(str){switch(str.length){case 4:return str;case 3:return"0"+str;case 2:return"00"+str;case 1:return"000"+str}return str};this.is_ipv4=function(ip_address){if(rdx.utils.is_defined(ip_address)){return(ip_address.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)||ip_address.match(/^\*$/))}return false};this.is_ip_group=function(ip_address){if(rdx.utils.is_defined(ip_address)){if(ip_address.indexOf("-")>-1){ip_address=ip_address.split("-")[0]}if(ip_address.indexOf("~")>-1){ip_address=ip_address.split("~")[0]}return rdx.utils.is_ipv4(ip_address)}return false};this.convert_ip_to_string=function(ip_address){if(rdx.utils.is_defined(ip_address)){if(ip_address.indexOf("-")>-1){ip_address=ip_address.split("-")[0]}if(rdx.utils.is_defined(ip_address)&&ip_address.indexOf("~")>-1){ip_address=ip_address.split("~")[0]}var string=ip_address.split(".").map(function(i){return(+i).toString(16).padStart(2,"0")});return string.join("")}return""};this.is_email=function(email){if(rdx.utils.is_defined(email)){var regex=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return regex.test(email)}return false};this.is_netmask=function(netmask){var correct_range={128:1,192:1,224:1,240:1,248:1,252:1,254:1,255:1,0:1};var each_octet=netmask.split(".");for(var i=0;i<=3;i++){if(!(each_octet[i] in correct_range)){return false}}if((each_octet[0]==0)||(each_octet[0]!=255&&each_octet[1]!=0)||(each_octet[1]!=255&&each_octet[2]!=0)||(each_octet[2]!=255&&each_octet[3]!=0)){return false}return true};this.is_ipv6=function(ip_address){if(rdx.utils.is_defined(ip_address)){return(ip_address.match(/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?(\/(1[0-2][0-8]|[1-9][0-9]|[0-9]))?\s*$/)||ip_address.match(/^\*$/))}return false};this.expand_ipv6=function(ip_address){ip_address=this.trim(ip_address);if(this.is_ipv6(ip_address)){var fullAddress="";var expandedAddress="";var prefixlen="";var sides=[];var validGroupCount=8;var validGroupSize=4;sides=this.get_prefix_stripped_ipv6(ip_address,true);var address=sides.stripped_ip;if(this.is_not_empty(sides.prefix)){prefixlen="/"+sides.prefix}if(new RegExp("::","g").test(address)==false){fullAddress=address}else{sides=address.split("::");var groupsPresent=0;for(var i=0;i<sides.length;i++){groupsPresent+=sides[i].split(":").length}fullAddress+=sides[0]+":";for(var i=0;i<validGroupCount-groupsPresent;i++){fullAddress+="0000:"}fullAddress+=sides[1]}var groups=fullAddress.split(":");for(var i=0;i<validGroupCount;i++){while(groups[i].length<validGroupSize){groups[i]="0"+groups[i]}expandedAddress+=(i!=validGroupCount-1)?groups[i]+":":groups[i]}return expandedAddress+prefixlen}else{return null}};this.is_valid_mac=function(mac_address){if(rdx.utils.is_defined(mac_address)){return(mac_address.match(/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/))}return false};this.is_function=function(object){return(object!=null&&typeof(object)=="function")};this.is_callback=function(object){return(rdx.utils.is_defined(object)&&typeof object=="object"&&rdx.utils.is_defined(object.call_back)&&typeof object.call_back=="function")};this.is_defined=function(){var is_defined=true;for(var index=0;index<arguments.length;index++){if((typeof(arguments[index])=="undefined"||arguments[index]==null)){is_defined=false;break}}return is_defined};this.is_not_defined=function(){var is_not_defined=false;for(var index=0;index<arguments.length;index++){if((typeof(arguments[index])=="undefined"||arguments[index]==null)){is_not_defined=true;break}}return is_not_defined};this.is_string=function(data){if(rdx.utils.is_defined(data)&&typeof(data)=="string"){return true}return false};this.is_boolean=function(data){if(rdx.utils.is_defined(data)&&typeof(data)=="boolean"){return true}return false};this.is_empty=function(){var is_empty=true;for(var index=0;index<arguments.length;index++){if(this.is_defined(arguments[index])&&arguments[index]!=""){is_empty=false;break}}return is_empty};this.is_not_empty=function(){var is_not_empty=false;for(var index=0;index<arguments.length;index++){if(this.is_defined(arguments[index])&&arguments[index].toString()!=""){is_not_empty=true;break}}return is_not_empty};this.load_script=function(file_name,callback){var load_status=false;$.ajax({async:false,type:"GET",url:file_name,cache:true,dataType:"script",success:function(){load_status=true;if(rdx.utils.is_defined(callback)&&rdx.utils.is_callback(callback)){callback.call_back()}}})};this.load_json=function(file_name){return Promise.resolve($.ajax({url:file_name,dataType:"json"}))};this.count_property=function(obj){var count=0;for(var prop in obj){if(obj.hasOwnProperty(prop)){count++}}return count};this.clone_resrc_with_keys=function(resrc_defn,orig_resrc,keys1){if(rdx.utils.is_not_defined(orig_resrc)){return null}var new_resrc=new Object();var keys;if(this.is_defined(keys1)&&this.is_array(keys1)){keys=keys1}else{keys=resrc_defn.primary_keys}last=keys.length;for(var i=0;i<last;i++){if(rdx.utils.is_defined(orig_resrc[keys[i]])){new_resrc[keys[i]]=orig_resrc[keys[i]]}}return new_resrc};this.clone_resrc_on_resrc_props=function(resrc_defn,orig_resrc){var resource_properties=resrc_defn.properties;var resrc_keys=new Array();for(var key in resource_properties){var resrc_key;if(this.is_defined(resource_properties[key])){resrc_key=resource_properties[key].key;if(this.is_defined(resrc_key)){resrc_keys.push(resrc_key)}}}return this.clone_resrc_with_keys(resrc_defn,orig_resrc,resrc_keys)};this.is_same_array=function(first_arry,sec_arry,check_valid_range){var index=0;if(rdx.utils.is_not_defined(first_arry)||rdx.utils.is_not_defined(sec_arry)){return false}if((first_arry.length!=sec_arry.length)&&(rdx.utils.is_not_defined(check_valid_range))){return false}if(rdx.utils.is_defined(check_valid_range)){if(check_valid_range<=Math.min(first_arry.length,sec_arry.length)){index=check_valid_range}else{return false}}else{index=first_arry.length}for(len=0;len<index;len++){if(first_arry[len]!=sec_arry[len]){return false}}return true};this.remove_duplicates_in_array=function(origArr){if(this.is_not_defined(origArr)||!this.is_array(origArr)){return origArr}var newArr=[],origLen=origArr.length,found,x,y;for(x=0;x<origLen;x++){found=undefined;for(y=0;y<newArr.length;y++){if(origArr[x]===newArr[y]){found=true;break}}if(!found){newArr.push(origArr[x])}}return newArr};this.remove_duplicates_in_json_array=function(json_data_arr,prop_name){if(this.is_not_defined(json_data_arr)||!this.is_array(json_data_arr)){return json_data_arr}var new_arr=[];var lookup={};for(var i in json_data_arr){lookup[json_data_arr[i][prop_name]]=json_data_arr[i]}for(i in lookup){new_arr.push(lookup[i])}return new_arr};this.is_value_in_json_array=function(json_data_arr,prop_name,prop_value){var found=false;if(this.is_not_defined(json_data_arr)||!this.is_array(json_data_arr)||this.is_not_defined(prop_name)||this.is_not_defined(prop_value)){return false}for(var i in json_data_arr){var pval=json_data_arr[i][prop_name];if(this.is_not_defined(pval)){continue}if(pval===prop_value){found=true;break}}return found};this.is_object=function(obj){if(((Object(obj)===obj)&&Object.prototype.toString.call(obj))=="[object Object]"){return true}return false};this.is_same_object=function(resrc1,resrc2,keys_to_compare,do_strict){var strict_check=rdx.utils.is_not_defined(do_strict)?true:do_strict;if(this.is_not_defined(resrc1)||this.is_not_defined(resrc2)){return false}for(var i=0;i<keys_to_compare.length;i++){if(do_strict==false&&rdx.utils.is_empty(resrc1[keys_to_compare[i]])){continue}if(resrc1[keys_to_compare[i]]!=resrc2[keys_to_compare[i]]){if(rdx.utils.is_array(resrc1[keys_to_compare[i]])&&rdx.utils.is_array(resrc2[keys_to_compare[i]])){if(rdx.utils.is_same_array(resrc1[keys_to_compare[i]],resrc2[keys_to_compare[i]])){continue}else{return false}}else{if(rdx.utils.is_object(resrc1[keys_to_compare[i]])&&rdx.utils.is_object(resrc2[keys_to_compare[i]])){if(rdx.utils.is_same_object(resrc1[keys_to_compare[i]],resrc2[keys_to_compare[i]])){continue}}else{return false}}}}return true};this.is_num=function(val_str){return this.is_defined(val_str)&&val_str.replace(/\d/g,"").length>0};this.is_number=function(val_str){if(rdx.utils.is_not_defined(val_str)){return false}var match_str=val_str.match(/^([0-9]+\.[0-9]+)$|^([0-9]*\.[0-9]+)$|^([0-9]*)$/);return rdx.utils.is_defined(match_str)};this.prevent_default=function(event){if(rdx.utils.is_not_defined(event)){return}if(!rdx.utils.is_ie()){event.preventDefault()}else{event.returnValue=false}};this.get_collated_key=function(response_data,keys){var collated_key="";for(var j=0;j<keys.length;j++){collated_key+=((j!=0)?"^":"")+response_data[keys[j]]}return collated_key};this.get_key_based_structure_for_response=function(response,primary_keys){var return_map=new Array();for(var i=0,end_index=response.length;i<end_index;i++){return_map[this.get_collated_key(response[i],primary_keys)]=response[i]}return return_map};this.get_formatted_string=function(string,key,value){if(this.is_not_defined(string)||string==""){return""}var key_reg_exp=new RegExp("\\{"+key+"\\}","g");string=string.replace(key_reg_exp,value);return string};this.append_text_to_value=function(object,key,title,is_append){var value=object[key];if(rdx.utils.is_not_defined(value)){return"--"}if(rdx.utils.is_defined(is_append)&&is_append==false){return title+value}return value+title};this.escape_regex_value=function(regex_value){if(rdx.utils.is_not_empty(regex_value)){regex_value=regex_value.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}return regex_value};this.openwindow=function(str_URL,target_window,width,height){target_window=target_window.replace(/\./g,"");var wndw=window.open(str_URL,target_window,"toolbar=no,status=no,width="+width+",height="+height+",scrollbars=yes,resizable=yes");if(!wndw){alert(rdx.i18n.get_string("rdx.link_popup_blocker_msg"))}else{try{var centerx=(screen.width-width)/2;var centery=(screen.height-height)/2;wndw.moveTo(centerx,centery);wndw.focus()}catch(err){}}return wndw};this.convert_seconds_to_minutes=function(seconds,flag_for_hours){if(rdx.utils.is_not_defined(seconds)){return}flag_for_hours=(rdx.utils.is_not_defined(flag_for_hours))?false:flag_for_hours;if(flag_for_hours==true){var hours=Math.floor(seconds/3600);seconds%=3600}var minutes=Math.floor(seconds/60);seconds=Math.floor(seconds%60);if(minutes<10&&flag_for_hours==false){minutes="0"+minutes}if(seconds<10&&flag_for_hours==false){seconds="0"+seconds}if(flag_for_hours==false){var result=minutes+" : "+seconds}else{if(hours>0){if(hours==1){result=hours+" hour "+minutes+" minutes"}else{result=hours+" hours "+minutes+" minutes"}}else{if(minutes>0){if(minutes==1){result=minutes+" minute "+seconds+" seconds"}else{result=minutes+" minutes "+seconds+" seconds"}}else{if(seconds>0){if(seconds==1){result=" "+seconds+" second"}else{result=" "+seconds+" seconds"}}else{if(seconds==0){result=seconds+" second"}}}}}return result};this.ajax=function(method,url,params,sucess_callback,isAsync,error_callback,timeout,type){isAsync=this.is_not_defined(isAsync)?true:false;var req=window.XMLHttpRequest?new window.XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");try{req.onreadystatechange=function(){if(req.readyState!=rdx.ajax_handler_constants.HTTP_RESPONSE_READY_STATE){return}var return_params=null;if(method==rdx.ajax_handler_constants.GET&&type=="XML"){return_params=req.responseXML}if(rdx.utils.is_defined(sucess_callback)&&req.status==rdx.ajax_handler_constants.HTTP_RESPONSE_SUCCESS_STATUS){sucess_callback.call_back([return_params,req.responseText])}else{if(rdx.utils.is_defined(error_callback)){error_callback.call_back()}}};req.open(method,url,isAsync);if(this.is_defined(timeout)){req.timeout=timeout}if(method==rdx.ajax_handler_constants.POST){req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,"application/x-www-form-urlencoded")}req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_IF_MODIFIED_SINCE,new Date(0));if(rdx.utils.is_defined(rdx.ajax_handler_constants.CUSTOM_HEADERS)){for(var key in rdx.ajax_handler_constants.CUSTOM_HEADERS){req.setRequestHeader(key,rdx.ajax_handler_constants.CUSTOM_HEADERS[key])}}if(method==rdx.ajax_handler_constants.POST||method==rdx.ajax_handler_constants.PUT){req.send(params)}else{req.send()}}catch(err){var error_message=rdx.i18n.get_string("rdx.ajax_request_error",{url:this._url,error:this.get_detailed_error_message(err)});if(this.is_defined(error_callback)){error_callback.call_back([error_message])}else{rdx.message_box.error(error_message);rdx.status_bar.update_status(error_message,rdx.ERROR)}}};this.convert_array_to_map=function(arrayObj){if(this.is_not_defined(arrayObj)||!this.is_array(arrayObj)){return arrayObj}var mapObj={};for(var i=0,end_index=arrayObj.length;i<end_index;i++){mapObj[arrayObj[i]]=arrayObj[i]}return mapObj};this.is_object_not_empty=function(object){return !this.is_object_empty(object)};this.is_object_empty=function(object){if(this.is_not_defined(object)){return true}var is_empty=true;for(var key in object){if(object.hasOwnProperty(key)){is_empty=false;break}}return is_empty};this.get_elements_not_in_second_array=function(first_arr,second_arr){if(this.is_defined(first_arr)&&this.is_array(first_arr)){if(this.is_defined(second_arr)&&this.is_array(second_arr)){var result=new Array();map_second=this.convert_array_to_map(second_arr);for(var i=0;i<first_arr.length;i++){var key=first_arr[i];if(this.is_not_defined(map_second[key])){result.push(first_arr[i])}}return result}else{return first_arr}}return null};this.get_resource_objects_not_in_second_array=function(first_array_of_objects,second_array_of_objects,resource){if(rdx.utils.is_not_defined(resource)||rdx.utils.is_not_defined(resource.primary_keys)){return null}var first_str_arr=new Array();var second_str_arr=new Array();var first_map={};if(this.is_defined(first_array_of_objects)&&this.is_array(first_array_of_objects)){var first_arr_of_objects=new Array();first_arr_of_objects=first_arr_of_objects.concat(first_array_of_objects);var first_arr_of_arr_pkey_values=new Array(resource.primary_keys.length);for(var index=0;index<resource.primary_keys.length;index++){var key=resource.primary_keys[index];first_arr_of_arr_pkey_values[index]=this.to_string_array(first_arr_of_objects,key)}first_str_arr=this.merge_2D_array_to_1D_array(first_arr_of_arr_pkey_values,"_");for(var index=0;index<first_str_arr.length;index++){first_map[first_str_arr[index]]=first_arr_of_objects[index]}}if(this.is_defined(second_array_of_objects)&&this.is_array(second_array_of_objects)){var second_arr_of_objects=new Array();second_arr_of_objects=second_arr_of_objects.concat(second_array_of_objects);var second_arr_of_arr_pkey_values=new Array(resource.primary_keys.length);for(var index=0;index<resource.primary_keys.length;index++){var key=resource.primary_keys[index];second_arr_of_arr_pkey_values[index]=this.to_string_array(second_arr_of_objects,key)}second_str_arr=this.merge_2D_array_to_1D_array(second_arr_of_arr_pkey_values,"_")}var result_str_arr=this.get_elements_not_in_second_array(first_str_arr,second_str_arr);var result_array_of_objects=new Array();for(var index=0;index<result_str_arr.length;index++){result_array_of_objects.push(first_map[result_str_arr[index]])}return result_array_of_objects};this.merge_2D_array_to_1D_array=function(array_2D,delimiter){if(rdx.utils.is_not_defined(array_2D)||!(rdx.utils.is_array(array_2D))){return null}delimiter=rdx.utils.is_defined(delimiter)?delimiter:"";var merged_1D_array=new Array();for(var index=0;index<array_2D.length;index++){if(!(rdx.utils.is_array(array_2D[index]))){return null}}for(var index=0;index<array_2D.length;index++){for(var index_j=0;index_j<array_2D[index].length;index_j++){var first_str=rdx.utils.is_defined(merged_1D_array[index_j])?merged_1D_array[index_j]:"";var second_str=array_2D[index][index_j];merged_1D_array[index_j]=this.trim(first_str)+delimiter+this.trim(second_str)}}return merged_1D_array};this.merge_array_at_index=function(arr1,arr2,index){if(rdx.utils.is_not_defined(arr1,arr2,index)){return null}var first_arr=arr1.splice(0,index);arr1=first_arr.concat(arr2.concat(arr1));return arr1};this.html_decode=function(str){if(this.is_not_defined(str)||typeof(str)!=="string"){return str}str=str.replace(/&amp;/g,"&");str=str.replace(/&quot;/g,'"');str=str.replace(/&lt;/g,"<");str=str.replace(/&gt;/g,">");str=str.replace(/&apos;/g,"'");str=str.replace(/&nbsp;/g," ");str=str.replace(/&#x2F;/g,"/");return str};this.html_encode=function(str,enc_quote_flg,enc_space_flg){if(rdx.utils.is_not_defined(str)){return null}if(rdx.utils.is_not_defined(enc_space_flg)){enc_space_flg=true}if(typeof(str)=="string"){str=str.replace(/&/g,"&amp;");str=str.replace(/\"/g,"&quot;");str=str.replace(/</g,"&lt;");str=str.replace(/>/g,"&gt;");str=str.replace(/'char/g,"&apos;");if(enc_space_flg){str=str.replace(/ /g,"&nbsp;")}if(enc_quote_flg){str=str.replace(/'/g,"&#39;")}}return str};this.get_formatted_response=function(response){var formatted_response=response;if(this.is_array(response)){if(response.length>0){formatted_response=response[0]}else{formatted_response=null}}return formatted_response};this.to_string_array=function(array_of_objects,key){if(this.is_not_defined(array_of_objects,key)||!this.is_array(array_of_objects)){return array_of_objects}var string_array=new Array(array_of_objects.length);for(var i=0,end_index=string_array.length;i<end_index;i++){string_array[i]=array_of_objects[i][key]}return string_array};this.update_key_based_map=function(map,key,array_of_objects){if(this.is_not_defined(map,key,array_of_objects)||!this.is_array(array_of_objects)){return}for(var i=0,end_index=array_of_objects.length;i<end_index;i++){var value=array_of_objects[i][key];if(this.is_defined(map[value])){continue}map[value]=array_of_objects[i]}};this.object_keys=function(object){if(this.is_not_defined(object)){return object}var keys=new Array();for(var key in object){keys.push(key)}return keys};this.object_values=function(object){if(this.is_not_defined(object)){return object}var values=new Array();for(var key in object){values.push(object[key])}return values};this.sort_array=function(array,key){if(this.is_not_defined(array,key)||!this.is_array(array)){return}array.sort(function(a,b){a=a[key];b=b[key];if(a<b){return -1}if(a>b){return 1}return 0})};this.log=function(){if(this.is_not_defined(console,console.log)){return}for(var i=0,end_index=arguments.length;i<end_index;i++){console.log(arguments[i])}};this.trim=function(val){if(rdx.utils.is_defined(val)){return $.trim(val)}return val};this.trim_left=function(val){if(rdx.utils.is_defined(val)&&(typeof(val)=="string")){return val.replace(/^\s+/,"")}return val};this.slide_up_down=function(element,close,callback,time_duration){var time=time_duration;if(rdx.utils.is_not_defined(time)){time="100"}var slide_complete=function(){if(rdx.utils.is_defined(callback)){callback.call_back()}};if(close){if(rdx.utils.is_safari()){element.hide();slide_complete.apply()}else{element.slideUp(time,slide_complete)}}else{if(rdx.utils.is_safari()){element.show();slide_complete.apply()}else{element.slideDown(time,slide_complete)}}};this.get_last_octet_ipv6=function(ipAddress){var index=ipAddress.lastIndexOf(":");if(index!=-1&&ipAddress.length>index){ipAddress=ipAddress.substring(index+1)}index=ipAddress.lastIndexOf(".");if(index!=-1&&ipAddress.length>index){ipAddress=ipAddress.substring(index+1)}index=ipAddress.indexOf("/");if(index==0){return 0}else{if(index!=-1){return(ipAddress.substring(0,index))}else{if(ipAddress==""){return 0}else{return(ipAddress)}}}};this.get_last_octet_ipv4=function(ipAddress){return(ipAddress.split(".")[3])};this.get_last_octet_ip=function(ipAddress){if(ipAddress.indexOf(":")!=-1){return this.get_last_octet_ipv6(ipAddress)}else{return this.get_last_octet_ipv4(ipAddress)}};this.get_prefix_stripped_ipv6=function(ipAddress,send_object){var index=ipAddress.indexOf("/");var object={};if(index!=-1&&ipAddress.length>index){object.stripped_ip=ipAddress.substring(0,index);object.prefix=ipAddress.substring(index+1,ipAddress.length)}else{object.stripped_ip=ipAddress;object.prefix=""}if(rdx.utils.is_defined(send_object)&&send_object==true){return object}else{return object.stripped_ip}};this.decimal_to_hex=function(decimal){return decimal.toString(16)};this.hex_to_decimal=function(hex){return parseInt(hex,16)};this.roundUpTwoDeci=function(num){return num.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0]};this.increment_ipv6_address_by_one=function(ipAddress){var stripped_ip=this.get_prefix_stripped_ipv6(ipAddress,true);var range_start=this.get_last_octet_ipv6(ipAddress);var index=stripped_ip.stripped_ip.lastIndexOf(range_start);var ip_start_string="";if(index!=-1&&stripped_ip.stripped_ip.length>index){ip_start_string=stripped_ip.stripped_ip.substring(0,index)}else{if(index==-1&&range_start==0){ip_start_string=stripped_ip.stripped_ip}}var i=this.hex_to_decimal(range_start);i++;var constructed_ip=ip_start_string+this.decimal_to_hex(i);if(stripped_ip.prefix!=""){constructed_ip+=("/"+stripped_ip.prefix)}return constructed_ip};this.charater_range_increment=function(charaters_array,index){if(charaters_array[index]=="z"){charaters_array[index]="a";this.charater_range_increment(charaters_array,index-1)}else{if(charaters_array[index]=="Z"){charaters_array[index]="A";this.charater_range_increment(charaters_array,index-1)}else{charaters_array[index]=String.fromCharCode(charaters_array[index].charCodeAt()+1)}}return(charaters_array.join(""))};this.is_character_uppercase=function(character){if(character.charCodeAt()>=65&&character.charCodeAt()<=90){return true}return false};this.is_character_lowercase=function(character){if(character.charCodeAt()>=97&&character.charCodeAt()<=122){return true}return false};this.check_valid_range=function(start,end,carry){if((this.is_character_uppercase(start)&&!this.is_character_uppercase(end))||(this.is_character_lowercase(start)&&!this.is_character_lowercase(end))){return 0}if((carry&&start>=end)||start>end){return 2}else{return 1}};this.generate_unique_id=function(prefix){var id=null;var date=new Date();var components=[date.getYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()];id=components.join("");if(rdx.utils.is_defined(prefix)){id=prefix+id}return id};this.get_html=function(object){if(rdx.utils.is_not_defined(object)){return""}return($("<div>").append((object).clone()).html())};this.get_data_value=function(data,key){if(rdx.utils.is_not_defined(data)){return null}var data_obj=rdx.utils.get_formatted_response(data);if(rdx.utils.is_not_defined(data_obj)){return null}return data_obj[key]};this.set_data_value=function(data,key,value){var key_index=key.indexOf(".");if(key_index!=-1){var str_array=key.split(".");var parsed_key_token=str_array[0];var sub_data=data[parsed_key_token];var sub_key=key.substring((key_index+1));if(rdx.utils.is_not_defined(sub_data)||rdx.utils.is_not_defined(sub_key)){return}if(rdx.utils.is_array(sub_data)&&rdx.utils.is_array(value)&&(value.length==sub_data.length)){for(var index=0;index<sub_data.length;index++){this.set_data_value(sub_data[index],sub_key,value[index])}}else{if(rdx.utils.is_array(sub_data)){for(var index=0;index<sub_data.length;index++){this.set_data_value(sub_data[index],sub_key,value)}}else{this.set_data_value(sub_data,sub_key,value)}}}else{if(rdx.utils.is_array(data)&&rdx.utils.is_array(value)&&(value.length==data.length)){for(var index=0;index<data.length;index++){data[index][key]=value[index]}}else{if(rdx.utils.is_array(data)){for(var index=0;index<data.length;index++){data[index][key]=value}}else{data[key]=value}}}return};this.get_elapsed_time=function(start_date){var seconds=(new Date()-start_date)/1000;var days=Math.floor(seconds/86400);seconds=(min>0)?(seconds%86400):seconds;var min=Math.floor(seconds/60);var sec=Math.floor(seconds%60);return(((days<=9)?"0"+days:days)+":"+((min<=9)?"0"+min:min)+":"+((sec<=9)?"0"+sec:sec))};this.get_activity=function(resource_context,resource,operation,resource_for_operation){var default_value="";if(operation==rdx.model_constants.REMOVE){default_value="rdx.ajax_status_removing"}else{if(operation==rdx.model_constants.SET){default_value="rdx.ajax_status_configuring"}else{if(operation==rdx.model_constants.ADD){default_value="rdx.ajax_status_creating"}else{if(operation==rdx.model_constants.POST){default_value="rdx.ajax_status_creating"}}}}var resource_url_activity=resource[operation+"_url_activity"];var activity=default_value||"";if(resource_url_activity){activity=resource_url_activity}else{if(resource_context&&resource_context.activity){activity=resource_context.activity}else{if(rdx.utils.is_empty(activity)&&rdx.utils.is_defined(rdx.custom_status_activity_message)&&rdx.utils.is_defined(rdx.custom_status_activity_message[operation])&&rdx.utils.is_defined(rdx.custom_status_activity_message[operation]["activity"])){activity=rdx.custom_status_activity_message[operation]["activity"]}}}var obj_type=rdx.i18n.get_string(resource.obj_type);var substitutes={obj_type:obj_type};if(rdx.utils.is_defined(resource_for_operation)&&rdx.utils.is_defined(resource.primary_keys)&&resource.primary_keys.length>0){for(var i=0;i<resource.primary_keys.length;i++){if(rdx.utils.is_defined(resource_for_operation[resource.primary_keys[i]])){substitutes[resource.primary_keys[i]]=resource_for_operation[resource.primary_keys[i]]}}}return rdx.i18n.get_string(activity,substitutes)};this.get_status=function(resource_context,resource,operation,resource_for_operation){var default_value="";if(operation==rdx.model_constants.REMOVE){if(resource.binding_resource){default_value="rdx.ajax_status_removing_binding_completed"}else{if(rdx.utils.is_defined(resource[operation+"_url_activity"])){var substitutes={obj_type:resource[operation+"_url_activity"]};return rdx.i18n.get_string("rdx.ajax_activity_completed",substitutes)}else{default_value="rdx.ajax_status_removing_completed"}}}else{if(operation==rdx.model_constants.SET){default_value="rdx.ajax_status_configuring_completed"}else{if(operation==rdx.model_constants.ADD){if(resource.binding_resource){default_value="rdx.ajax_status_adding_binding_completed"}else{default_value="rdx.ajax_status_creating_completed"}}}}var resource_url_status=resource[operation+"_url_status"];var activity=default_value||"";if(resource_url_status){activity=resource_url_status}else{if(resource_context&&resource_context.activity){activity=resource_context.activity}else{if(rdx.utils.is_empty(activity)&&rdx.utils.is_defined(rdx.custom_status_activity_message)&&rdx.utils.is_defined(rdx.custom_status_activity_message[operation])&&rdx.utils.is_defined(rdx.custom_status_activity_message[operation]["status"])){activity=rdx.custom_status_activity_message[operation]["status"]}}}var obj_type=rdx.i18n.get_string(resource.obj_type);var substitutes={obj_type:obj_type};if(rdx.utils.is_defined(resource_for_operation)&&rdx.utils.is_defined(resource.primary_keys)&&resource.primary_keys.length>0){for(var i=0;i<resource.primary_keys.length;i++){if(rdx.utils.is_defined(resource_for_operation[resource.primary_keys[i]])){substitutes[resource.primary_keys[i]]=resource_for_operation[resource.primary_keys[i]]}}}if(resource.binding_resource){if(operation==rdx.model_constants.REMOVE){substitutes.obj_type=substitutes.obj_type.replace(" to "," from ")}substitutes.obj_type=substitutes.obj_type.replace(" Binding","")}return rdx.i18n.get_string(activity,substitutes)};this.find_location_to_insert_in_array=function(element,array,field_name,first_iteration,start,end){if(rdx.utils.is_not_defined(first_iteration)){var array_to_sort=[];for(var i=0;i<=array.length-1;i++){array_to_sort.push(Number(array[i][field_name]))}array_to_sort.sort(function sortmyway(data_A,data_B){return(data_A-data_B)});array=array_to_sort}if(rdx.utils.is_not_defined(start)){start=0}if(rdx.utils.is_not_defined(end)){end=array.length-1}var pivot=parseInt(start+(end-start)/2);if(array[pivot]==Number(element)){return pivot}if(array[pivot]<Number(element)){return rdx.utils.find_location_to_insert_in_array(element,array,field_name,false,pivot+1,end)}else{return rdx.utils.find_location_to_insert_in_array(element,array,field_name,false,start,pivot-1)}};this._initialize_expression_editor=function(){if(typeof neo_pi_syntax==="undefined"&&rdx.utils.is_defined(rdx.APP_EXPRESSION_EDITOR_METHOD_FILE_PATH)){rdx.utils.load_script(rdx.APP_EXPRESSION_EDITOR_METHOD_FILE_PATH)}if(typeof neo_epaExpressionData==="undefined"&&rdx.utils.is_defined(rdx.EPA_EXPRESSION_EDITOR_WIN_FILE_PATH)&&rdx.utils.is_defined(rdx.EPA_EXPRESSION_EDITOR_MAC_FILE_PATH)){rdx.utils.load_script(rdx.EPA_EXPRESSION_EDITOR_WIN_FILE_PATH);rdx.utils.load_script(rdx.EPA_EXPRESSION_EDITOR_MAC_FILE_PATH)}};this._initialize_command_spec_editor=function(){if((typeof neo_rba_entitygroup_mapping==="undefined"||typeof neo_rba_commandset==="undefined")&&rdx.utils.is_defined(rdx.CMD_SPEC_EDITOR_FILE_PATH)){rdx.utils.load_script(rdx.CMD_SPEC_EDITOR_FILE_PATH)}};this.parse_url=function(url,predefined_rdx_params,custom_param){var parsed_url={};for(i=0;i<this.predefined_nitro_params.length;i++){var param_name=this.predefined_nitro_params[i];var param_data=this.split_url_on_param_key(url,param_name);if(param_data!=null){var payload=param_data.split(",");var query_params=[];for(var j=0;j<payload.length;j++){var single_param=payload[j];if(single_param.indexOf(":")!=-1){var name_value_pair=single_param.split(":");query_params.push({name:decodeURIComponent(name_value_pair[0]),value:decodeURIComponent(name_value_pair[1])})}}if($.inArray(param_name,predefined_rdx_params)>-1){if(query_params.length==0){parsed_url[param_name]=param_data}else{if(rdx.utils.is_defined(parsed_url[param_name])){parsed_url[param_name]=parsed_url[param_name].concat(query_params)}else{parsed_url[param_name]=query_params}}}else{if(rdx.utils.is_defined(parsed_url[custom_param])){parsed_url[custom_param]=parsed_url[custom_param].concat(query_params)}else{parsed_url[custom_param]=query_params}}}}return parsed_url};this.is_settings_implemented=function(view){var is_implemented=false;if(rdx.utils.is_defined(rdx.view_constants.VIEWS_WITH_SETTINGS)&&this.is_array(rdx.view_constants.VIEWS_WITH_SETTINGS)&&rdx.view_constants.VIEWS_WITH_SETTINGS.length){for(var i=0,end_index=rdx.view_constants.VIEWS_WITH_SETTINGS.length;i<end_index;i++){var current_view=rdx.view_constants.VIEWS_WITH_SETTINGS[i];if(current_view==view){is_implemented=true;break}}}return is_implemented};this.create_settings_key=function(user_name,view_name){return user_name+"_"+view_name};this.is_hover=function(element,event){var element_x_position=element.offset().left;var element_y_position=element.offset().top;var mouse_x=null;var mouse_y=null;if(event.pageX){mouse_x=event.pageX}else{if(event.clientX){mouse_x=event.clientX+$(window).scrollLeft()}}if(event.pageY){mouse_y=event.pageY}else{if(event.clientY){mouse_y=event.clientY+$(window).scrollTop()}}if(rdx.utils.is_defined(mouse_x)&&rdx.utils.is_defined(mouse_y)){if(mouse_x>element_x_position&&mouse_x<element_x_position+element.outerWidth()){if(mouse_y>element_y_position&&mouse_y<element_y_position+element.outerHeight()){return true}}}return false};this.trigger_select_element=function(element){if(document.createEvent){var event=document.createEvent("MouseEvents");event.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);element[0].dispatchEvent(event)}else{if(element.fireEvent){element[0].fireEvent("onmousedown")}}};this.get_file_name=function(element){var file_name=element;if(rdx.utils.is_not_empty(element)){if(element.indexOf("/")!=-1){var dummy=element.split("/");file_name=dummy[dummy.length-1]}}return file_name};this.get_page_name=function(){var path=window.location.pathname;if(rdx.utils.is_defined(path)){return path.substr(path.lastIndexOf("/")+1)}};this.convert_epoch_to_readable_time=function(object,property){if(rdx.utils.is_not_defined(object)||rdx.utils.is_not_defined(property)){return 0}var start_time_epoc;var converted_format;var epoc_seconds=object[property];if(rdx.utils.is_not_defined(epoc_seconds)){return 0}start_time_epoc=Number(epoc_seconds);var date=new Date(start_time_epoc*1000);var hours=date.getHours();var minutes=date.getMinutes();var am_pm;if(hours>12){hours=hours-12;am_pm="PM";if(hours==12){am_pm="AM"}else{if(hours<10){hours="0"+hours}}}else{am_pm="AM";if(hours==12){am_pm="PM"}else{if(hours<10){hours="0"+hours}}}if(minutes<10){minutes="0"+minutes}converted_format=date.toDateString()+" "+hours+":"+minutes+" "+am_pm;return converted_format};this.get_epoch_milli_seconds=function(date_str){var r=/^\s*(\d{4})-(\d\d)-(\d\d)\s+(\d\d):(\d\d):(\d\d)\s+UTC\s*$/;var m=(""+date_str).match(r);return(m)?(Date.UTC(m[1],m[2]-1,m[3],m[4],m[5],m[6])):undefined};this.browser_time_to_gmt_epoch_milli_seconds=function(date_str){var r=/^\s*(\d{4})-(\d\d)-(\d\d)\s+(\d\d):(\d\d):(\d\d)\s+UTC\s*$/;var m=(""+date_str).match(r);offset=(new Date().getTimezoneOffset())*60000;return(m)?(Date.UTC(m[1],m[2]-1,m[3],m[4],m[5],m[6])+offset):undefined};this.get_object_length=function(obj){var length=0;if(rdx.utils.is_not_defined(obj)){return}for(var key in obj){if(obj.hasOwnProperty(key)){length++}}return length};this.merge_and_set_url_params=function(view,action_view_context){if(view.get_view_context()&&rdx.utils.is_function(view.get_view_context().get_properties)){var view_context_properties=view.get_view_context().get_properties();view_context_properties=$.extend({},view_context_properties,action_view_context);if(view._view_definition.view_context){view_context_properties=$.extend({},view_context_properties,view._view_definition.view_context)}view.get_view_context().set_url_params(view_context_properties)}};this.get_rest_handler=function(success_callback,error_callback,req,method,url,properties){var handler=null;if(rdx.ajax_handler_constants.API==rdx.API_TYPE.NITRO){handler=new rdx.nitro_handler(success_callback,error_callback,req,method,url,properties)}else{if(rdx.ajax_handler_constants.API==rdx.API_TYPE.REST){handler=new rdx.pure_rest_api_handler(success_callback,error_callback,req,method,url,properties)}}return handler};this.basename=function(path){return path.replace(/\\/g,"/").replace(/.*\//,"")};this.dirname=function(path){return path.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};this.has_class_svg=function(elem,name){return new RegExp("(\\s|^)"+name+"(\\s|$)").test(elem.getAttribute("class"))};this.remove_class_svg=function(elem,name){var remove=elem.getAttribute("class").replace(new RegExp("(\\s|^)"+name+"(\\s|$)","g"),"$2");rdx.utils.has_class_svg(elem,name)&&elem.setAttribute("class",remove)};this.add_class_svg=function(elem,name){!rdx.utils.has_class_svg(elem,name)&&elem.setAttribute("class",(!!elem.getAttribute("class")?elem.getAttribute("class")+" ":"")+name)};this.replace_class_svg=function(node,new_class,old_class){if(rdx.utils.has_class_svg(node,old_class)){rdx.utils.remove_class_svg(node,old_class)}rdx.utils.add_class_svg(node,new_class)};this.get_month_name=function(month_index){if(month_index>=0&&month_index<=11){var month=new Array();month[0]="January";month[1]="February";month[2]="March";month[3]="April";month[4]="May";month[5]="June";month[6]="July";month[7]="August";month[8]="September";month[9]="October";month[10]="November";month[11]="December";return month[month_index]}};this.get_month_index=function(month_name){var month=new Array();month.January=1;month.February=2;month.March=3;month.April=4;month.May=5;month.June=6;month.July=7;month.August=8;month.September=9;month.October=10;month.November=11;month.December=12;var month_short=[];month.Jan=1;month.Feb=2;month.Mar=3;month.Apr=4;month.May=5;month.Jun=6;month.Jul=7;month.Aug=8;month.Sep=9;month.Oct=10;month.Nov=11;month.Dec=12;return month[month_name]?month[month_name]:month_short[month_name]};this.format_data_dd_m_yyyy_hh_mm_ss=function(date){var date_string="";if(rdx.utils.is_defined(date)){date_string=date_string+date.getDate();date_string=date_string+" ";date_string=date_string+this.get_month_name(date.getMonth());date_string=date_string+" ";date_string=date_string+date.getFullYear();date_string=date_string+" ";date_string=date_string+" "+rdx.utils.get_value_in_two_digits(date.getHours());date_string=date_string+":";date_string=date_string+rdx.utils.get_value_in_two_digits(date.getMinutes());date_string=date_string+":";date_string=date_string+rdx.utils.get_value_in_two_digits(date.getSeconds())}return date_string};this.get_value_in_two_digits=function(value){var final_value=value;if(value<10){return("0"+value.toString())}return final_value};this.get_am_pm=function(hours){return hours>=12?rdx.i18n.get_string("rdx.time_pm_text"):rdx.i18n.get_string("rdx.time_am_text")};this.insert_at_caret=function(textarea,text){var txtarea=textarea.get_component()[0];var scrollPos=txtarea.scrollTop;var strPos=0;var br=((txtarea.selectionStart||txtarea.selectionStart=="0")?"ff":(document.selection?"ie":false));if(br=="ie"){txtarea.focus();var range=document.selection.createRange();range.moveStart("character",-txtarea.value.length);strPos=range.text.length}else{if(br=="ff"){strPos=txtarea.selectionStart}}var front=(txtarea.value).substring(0,strPos);var back=(txtarea.value).substring(strPos,txtarea.value.length);if(strPos==0&&txtarea.value.length>0){front="";back=txtarea.value}txtarea.value=front+text+back;strPos=strPos+text.length;if(br=="ie"){txtarea.focus();var range=document.selection.createRange();range.moveStart("character",-txtarea.value.length);range.moveStart("character",strPos);range.moveEnd("character",0);range.select()}else{if(br=="ff"){txtarea.selectionStart=strPos;txtarea.selectionEnd=strPos;txtarea.focus()}}txtarea.scrollTop=scrollPos};this._get_button=function(label,tooltip,classname){var button=$(document.createElement("input"));button.attr("type","button");button.attr("value",rdx.i18n.get_string(label));button.attr("title",rdx.i18n.get_string(tooltip));button.addClass(classname);return button};this._get_cuxip_learn_more_link=function(){return rdx.CUXIP_LEARN_MORE_LINK};this.is_pure_rest_api=function(resource){return(rdx.utils.is_defined(resource)&&rdx.utils.is_defined(resource.is_nitro_resource)&&resource.is_nitro_resource===false)};this.is_nitro_api=function(url){return(rdx.utils.starts_with(url,"/nitro")||rdx.utils.starts_with(url,"/rapi"))};this.copy_text_to_clipboard=function(dom_element){$(dom_element).css("background","#f2f2f2");var dom_text=$(dom_element).text();$(dom_element).select();var successful=document.execCommand("copy")};this.getCaretPosition=function(editableDiv){var caretPos=0,sel,range;if(window.getSelection){sel=window.getSelection();if(sel.rangeCount){range=sel.getRangeAt(0);if(range.commonAncestorContainer.parentNode==editableDiv){caretPos=range.endOffset}}}else{if(document.selection&&document.selection.createRange){range=document.selection.createRange();if(range.parentElement()==editableDiv){var tempEl=document.createElement("span");editableDiv.insertBefore(tempEl,editableDiv.firstChild);var tempRange=range.duplicate();tempRange.moveToElementText(tempEl);tempRange.setEndPoint("EndToEnd",range);caretPos=tempRange.text.length}}}return caretPos};this.cursor_position=function(context){var selection=window.getSelection();var range;if(selection){try{range=selection.getRangeAt(0);var pre_range=document.createRange();pre_range.selectNodeContents(context);pre_range.setEnd(range.startContainer,range.startOffset);var this_text=pre_range.cloneContents();var at_start=this_text.textContent.length===0;var post_range=document.createRange();post_range.selectNodeContents(context);post_range.setStart(range.endContainer,range.endOffset);var next_text=post_range.cloneContents();var at_end=next_text.textContent.length===0}catch(e){console.log(e)}return{cursor_start:at_start,cursor_end:at_end,text_after_cursor:next_text,post_range:post_range,text_before_cursor:this_text}}else{return null}};this._get_cuxip_learn_more_link=function(){return rdx.CUXIP_LEARN_MORE_LINK};this.remove_file_extension=function(filename){var lastDotPosition=filename.lastIndexOf(".");if(lastDotPosition===-1){return filename}else{return filename.substr(0,lastDotPosition)}};this.launchIntoFullscreen=function(element){$(document.body).addClass("fullscreen");if(element.requestFullscreen){element.requestFullscreen()}else{if(element.mozRequestFullScreen){element.mozRequestFullScreen()}else{if(element.webkitRequestFullscreen){element.webkitRequestFullscreen()}else{if(element.msRequestFullscreen){element.msRequestFullscreen()}}}}};this.exitFullscreen=function(){$(document.body).removeClass("fullscreen");if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}};this.interchange_key_value_in_object=function(object){if(rdx.utils.is_object_empty(object)){return object}var new_obj={};for(var key in object){new_obj[object[key]]=key}return new_obj};this.position_element_absolute_to_dom=function(element,parent_dom){var viewport_width=$(window).width();var viewport_height=$(window).height();var documentscroll_top=$(window).scrollTop();var documentscroll_left=$(window).scrollLeft();var mintop=documentscroll_top;var maxtop=documentscroll_top+viewport_height;var minleft=documentscroll_left;var maxleft=documentscroll_left+viewport_width;var parent_offset=parent_dom.offset();var parent_height=parent_dom.outerHeight();var parent_width=parent_dom.outerWidth();var elem_height=element.height();var elem_width=element.width();var elem_top=(parent_offset.top-(elem_height/2)+(parent_height/2));var elem_left=parent_offset.left+parent_width;if((elem_top>mintop&&(elem_top+elem_height)<maxtop)&&(elem_left+elem_width<maxleft)){element.css({top:parent_offset.top-(element.height()/2)+(parent_height/2),left:parent_dom.offset().left+parent_width-0.1});return}elem_top=parent_offset.top-(elem_height/2)+(parent_height/2);elem_left=parent_offset.left-elem_width;if(elem_top>mintop&&(elem_top+elem_height)<maxtop&&elem_left>minleft){element.css({top:parent_offset.top-(element.height()/2)+(parent_height/2),left:parent_offset.left-element.width()+0.1});return}elem_top=parent_offset.top+parent_height;elem_left=parent_offset.left-(elem_width/2)+(parent_width/2);if((elem_top+elem_height<maxtop)&&elem_left>minleft&&(elem_left+elem_width)<maxleft){element.css({top:parent_offset.top+parent_height-0.1,left:parent_offset.left-(element.width()/2)+(parent_width/2)});return}elem_top=parent_offset.top-elem_height;elem_left=parent_offset.left-(elem_width/2)+(parent_width/2);if(elem_top>mintop&&elem_left>minleft&&(elem_left+elem_width<maxleft)){element.css({top:parent_offset.top-(element.height())+0.1,left:parent_offset.left-(element.width()/2)+(parent_width/2)});return}var elem_top=(parent_offset.top-(elem_height/2)+(parent_height/2));var elem_left=parent_offset.left+parent_width;if((elem_top>mintop&&(elem_top+elem_height)<maxtop)&&(elem_left+elem_width<maxleft)){element.css({top:parent_offset.top-(element.height()/2)+(parent_height/2),left:parent_dom.offset().left+parent_width-0.1});return}};this.is_back_button_needed=function(base_view){return(rdx.utils.is_not_defined(base_view._view_definition.view_properties.add_back_button)||base_view._view_definition.view_properties.add_back_button==true)&&rdx.utils.is_function(base_view._view.get_is_back_button_required)&&(base_view._view.get_is_back_button_required()==true)&&(base_view._view._base_view.is_show_in_slider()==false)&&rdx.utils.is_not_defined(base_view._view._base_view.get_crumb_handler())};this.update_resource_bindings=function(resource){var parent_resc=resource.name.replace(/_[a-zA-Z]*_[a-zA-Z]*$/,"");var binding_resc=resource.name.replace(/^[a-zA-Z]*_|_[a-zA-Z]*$/g,"");if(rdx.resources&&rdx.resources[parent_resc]){$(rdx.utils.get_resource(parent_resc)).trigger(rdx.events.MODEL_CHANGED,[[],null,{refresh_action:rdx.view_constants.REFRESH_ALL}])}if(rdx.resources&&rdx.resources[binding_resc]){$(rdx.utils.get_resource(binding_resc)).trigger(rdx.events.MODEL_CHANGED,[[],null,{refresh_action:rdx.view_constants.REFRESH_ALL}])}};this.get_all_indexes=function(arr,val){var indexes=[],i;for(i=0;i<arr.length;i++){if(arr[i]===val){indexes.push(i)}}return indexes};this.download_file=function(user_defined_properties){var DEFAULT_PROPERTIES={file_url:null,error_message:null,failure_callback:null,success_callback:null};var properties=$.extend({},DEFAULT_PROPERTIES,user_defined_properties);if(rdx.utils.is_not_defined(properties.file_url)){return}if(rdx.utils.is_defined(this._download_iframe_holder)){this._download_iframe_holder.remove()}var iframe=$("<iframe>").attr("frameborder",0).attr("width","0px").attr("height","0px");iframe.attr("src",properties.file_url);$(document.body).append(iframe);this._download_iframe_holder=iframe;iframe.bind(rdx.events.LOAD,{iframe:iframe,properties:properties},function(event){var data=null;try{data=event.data.iframe.contents().text()}catch(err){rdx.message_box.error("File not found");return}if(rdx.utils.is_not_defined(data)){return}var ifame=event.data.iframe;try{var result=JSON.parse(data);var failure_callback=event.data.properties.failure_callback;if(result[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]!=0){var callback=new rdx.callback();if($.inArray(result[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.RESPONSE_SESSION_EXPIRY_ERROR_CODES)!=-1){callback=new rdx.callback(rdx.utils,rdx.utils.do_logout,[true])}if(rdx.utils.is_defined(failure_callback)){failure_callback.call_back();callback.call_back()}else{rdx.message_box.error(result.message,callback)}return}var success_callback=event.data.properties.success_callback;if(rdx.utils.is_defined(success_callback)){success_callback.call_back()}}catch(err){}})};this.render_d3charts=function(data,parent_dom,chart_config){var default_properties={type:"sparkline",columnNames:{x:"x",y:"y"},color:"#f68d73",numberFormat:"percent",margin:{top:10,right:10,bottom:10,left:10},max_val_prop:"max_value",lablePosX:"before"};var properties=$.extend({},default_properties,chart_config);var parent_width=parent_dom.width()>0?parent_dom.width():100;var parent_height=parent_dom.height()>0?parent_dom.height():27;parent_dom.width(parent_width);parent_dom.css("padding",0);var chart_main_div=$("<div>").css({width:parent_width+"px",height:parent_height+"px"});parent_dom.append(chart_main_div);var chart_type=properties.type;switch(chart_type){case"sparkline":var sparkline_config=advCharts.sparkline().x(function(d){return d[properties.columnNames.x]}).y(function(d){return d[properties.columnNames.y]}).fill(false).lineColor(properties.color).showMinMaxPoints(true).showStartEndPoints(true).margin(properties.margin);d3.select(chart_main_div[0]).datum(data).call(sparkline_config);break;case"minicolbar":var minicolbar_config=advCharts.miniColBar().columnNames(properties.columnNames).fillBack(true).fillColor(properties.color).margin(properties.margin).numberFormat(properties.numberFormat).maxValue(data[properties.max_val_prop]).lablePosX(properties.lablePosX).lablePosY("center");d3.select(chart_main_div[0]).datum(data).call(minicolbar_config);break}};this.render_dom_structure=function(data,info_config,no_width){if(rdx.utils.is_defined(no_width)&&no_width==true){var parent_dom=$("<div>")}else{var parent_dom=$("<div>").css("width","100%")}var default_properties={color:"#f68d73",margin:{top:10,right:10,bottom:10,left:10},max_val_prop:"max_value"};var properties=$.extend({},default_properties,info_config);var parent_width=parent_dom.width()>0?parent_dom.width():10;var parent_height=parent_dom.outerHeight()>0?parent_dom.outerHeight()/2:5;var chart_parent_div=$("<div>").css({width:"50%",display:"inline-block"});var chart_main_div=$("<div>").addClass("square_colored_box").css({padding:parent_height+"px",background:properties.color,border:"1px solid rgba(0, 0, 0, .2)","float":"right",margin:"0 5px","border-radius":"1px"});chart_parent_div.append(chart_main_div);var value_div=$("<div>").css({width:"50%",display:"inline-block"});var value=$("<div>").addClass("dom_value_div").append(properties.count).css("float","left");value_div.append(value);parent_dom.append(chart_parent_div).append(value_div);return parent_dom};this._render_tooltip=function(dom_element,message){var tooltip_cell=$("<div>").addClass("rdx_help_cell_container").addClass("help_cell_container_inactive").attr("tabindex",0).appendTo(dom_element);var help_cell=$("<span>").addClass("help_cell").appendTo(tooltip_cell);dom_element.addClass("tooltip_holder");var tooltip=new rdx.tooltip(tooltip_cell);dom_element.bind(rdx.events.MOUSE_OVER,{tooltip_cell:tooltip_cell},function(event){event.data.tooltip_cell.removeClass("help_cell_container_inactive");event.stopPropagation()});dom_element.bind(rdx.events.MOUSE_LEAVE,{tooltip_cell:tooltip_cell,that:this},function(event){event.data.that._handle_component_mouse_leave_event(event)});this._register_help_cell_events(tooltip_cell,tooltip,message)};this._handle_component_mouse_leave_event=function(event){if(!(event.data.tooltip_cell.hasClass("component_focussed"))){if(!(rdx.utils.is_hover(event.data.tooltip_cell,event))){event.data.tooltip_cell.addClass("help_cell_container_inactive")}}event.stopPropagation()};this._remove_tooltip=function(event){event.data.tooltip.remove_tooltip(event);event.data.that._tooltip=null;event.stopPropagation()};this._register_help_cell_events=function(tooltip_cell,tooltip,message){var properties={};tooltip_cell.bind(rdx.events.MOUSE_OVER,{tooltip:tooltip,that:this},function(event){properties.message=message;properties.remove_handler_callback=event.data.that._tooltip_callback_handler;event.data.that._tooltip=event.data.tooltip.render(properties);event.stopPropagation()});tooltip_cell.bind(rdx.events.MOUSE_LEAVE,{tooltip:tooltip,that:this},function(event){if(!(rdx.utils.is_hover(event.data.that._tooltip,event))&&!(rdx.utils.is_hover($(this),event))){event.data.that._remove_tooltip(event)}event.stopPropagation()})};this._tooltip_callback_handler=function(tooltip_cell){if(!(tooltip_cell.hasClass("component_focussed"))){tooltip_cell.addClass("help_cell_container_inactive")}};this.array_groupby=function(arr,prop){return arr.reduce(function(groups,item){if(!rdx.utils.is_array(prop)){prop=[prop]}var key="";for(var i=0;i<prop.length;i++){key=key+item[prop[i]]}key=key.replace(/ /g,"");groups[key]=groups[key]||[];groups[key].push(item);return groups},{})};this.base64Encode=function(str){if(rdx.utils.is_defined(str)){if(rdx.utils.is_defined($.base64)){return $.base64.btoa(window.unescape(encodeURIComponent(str)))}else{return window.btoa(window.unescape(encodeURIComponent(str)))}}};this.base64Decode=function(str){if(rdx.utils.is_defined(str)){var temp_string;if(rdx.utils.is_defined($.base64)){temp_string=$.base64.atob(str)}else{temp_string=window.atob(str)}try{return decodeURIComponent(escape(temp_string))}catch(e){if(e instanceof URIError){return temp_string}else{throw e}}}}};rdx.react_utils=new function(){this.create_react_component=function(h,d,f){var e='<input type="hidden" id="deploymentType" value="local"/><div id="app"  style="visibility:hidden" class="container"></div>';$(document.body).append(e);var n=$("<div>").attr("id",d.id);h.append(n);var g={};for(var a in d.props){g[a]=d.props[a]}if(d.custom_object_key){g[d.custom_object_key]=f}var b=d.component_name.prototype.returnReact();var m=d.component_name.prototype.returnReactDom();m.render(b.createElement(d.component_name,g,null),document.getElementById(d.id))}};if(rdx&&(!rdx.utils.is_ie()||(rdx.utils.is_ie()&&rdx.utils.get_browser_version()>=9))){!function(){var hu={version:"3.5.12"};var bV=[].slice,dV=function(e){return bV.call(e)};var bU=this.document;function ee(e){return e&&(e.ownerDocument||e.document||e).documentElement}function fF(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(bU){try{dV(bU.documentElement.childNodes)[0].nodeType}catch(hj){dV=function(ik){var e=ik.length,il=new Array(e);while(e--){il[e]=ik[e]}return il}}}if(!Date.getEpochTime){Date.getEpochTime=function(){return +new Date()}}if(bU){try{bU.createElement("DIV").style.setProperty("opacity",0,"")}catch(fD){var dT=this.Element.prototype,b8=dT.setAttribute,hc=dT.setAttributeNS,dH=this.CSSStyleDeclaration.prototype,gU=dH.setProperty;dT.setAttribute=function(e,ik){b8.call(this,e,ik+"")};dT.setAttributeNS=function(il,e,ik){hc.call(this,il,e,ik+"")};dH.setProperty=function(e,il,ik){gU.call(this,e,il+"",ik)}}}hu.ascending=fp;function fp(ik,e){return ik<e?-1:ik>e?1:ik>=e?0:NaN}hu.descending=function(ik,e){return e<ik?-1:e>ik?1:e>=ik?0:NaN};hu.min=function(ip,im){var il=-1,io=ip.length,ik,e;if(arguments.length===1){while(++il<io){if((e=ip[il])!=null&&e>=e){ik=e;break}}while(++il<io){if((e=ip[il])!=null&&ik>e){ik=e}}}else{while(++il<io){if((e=im.call(ip,ip[il],il))!=null&&e>=e){ik=e;break}}while(++il<io){if((e=im.call(ip,ip[il],il))!=null&&ik>e){ik=e}}}return ik};hu.max=function(ip,im){var il=-1,io=ip.length,ik,e;if(arguments.length===1){while(++il<io){if((e=ip[il])!=null&&e>=e){ik=e;break}}while(++il<io){if((e=ip[il])!=null&&e>ik){ik=e}}}else{while(++il<io){if((e=im.call(ip,ip[il],il))!=null&&e>=e){ik=e;break}}while(++il<io){if((e=im.call(ip,ip[il],il))!=null&&e>ik){ik=e}}}return ik};hu.extent=function(iq,im){var il=-1,ip=iq.length,ik,e,io;if(arguments.length===1){while(++il<ip){if((e=iq[il])!=null&&e>=e){ik=io=e;break}}while(++il<ip){if((e=iq[il])!=null){if(ik>e){ik=e}if(io<e){io=e}}}}else{while(++il<ip){if((e=im.call(iq,iq[il],il))!=null&&e>=e){ik=io=e;break}}while(++il<ip){if((e=im.call(iq,iq[il],il))!=null){if(ik>e){ik=e}if(io<e){io=e}}}}return[ik,io]};function hz(e){return e===null?NaN:+e}function bi(e){return !isNaN(e)}hu.sum=function(ip,im){var il=0,io=ip.length,e,ik=-1;if(arguments.length===1){while(++ik<io){if(bi(e=+ip[ik])){il+=e}}}else{while(++ik<io){if(bi(e=+im.call(ip,ip[ik],ik))){il+=e}}}return il};hu.mean=function(iq,io){var im=0,ip=iq.length,e,il=-1,ik=ip;if(arguments.length===1){while(++il<ip){if(bi(e=hz(iq[il]))){im+=e}else{--ik}}}else{while(++il<ip){if(bi(e=hz(io.call(iq,iq[il],il)))){im+=e}else{--ik}}}if(ik){return im/ik}};hu.quantile=function(il,iq){var im=(il.length-1)*iq+1,io=Math.floor(im),ik=+il[io-1],ip=im-io;return ip?ik+ip*(il[io]-ik):ik};hu.median=function(ip,im){var ik=[],io=ip.length,e,il=-1;if(arguments.length===1){while(++il<io){if(bi(e=hz(ip[il]))){ik.push(e)}}}else{while(++il<io){if(bi(e=hz(im.call(ip,ip[il],il)))){ik.push(e)}}}if(ik.length){return hu.quantile(ik.sort(fp),0.5)}};hu.variance=function(ip,io){var e=ip.length,ik=0,ir,iq,it=0,im=-1,il=0;if(arguments.length===1){while(++im<e){if(bi(ir=hz(ip[im]))){iq=ir-ik;ik+=iq/++il;it+=iq*(ir-ik)}}}else{while(++im<e){if(bi(ir=hz(io.call(ip,ip[im],im)))){iq=ir-ik;ik+=iq/++il;it+=iq*(ir-ik)}}}if(il>1){return it/(il-1)}};hu.deviation=function(){var e=hu.variance.apply(this,arguments);return e?Math.sqrt(e):e};function gu(e){return{left:function(il,ik,ip,io){if(arguments.length<3){ip=0}if(arguments.length<4){io=il.length}while(ip<io){var im=ip+io>>>1;if(e(il[im],ik)<0){ip=im+1}else{io=im}}return ip},right:function(il,ik,ip,io){if(arguments.length<3){ip=0}if(arguments.length<4){io=il.length}while(ip<io){var im=ip+io>>>1;if(e(il[im],ik)>0){io=im}else{ip=im+1}}return ip}}}var c5=gu(fp);hu.bisectLeft=c5.left;hu.bisect=hu.bisectRight=c5.right;hu.bisector=function(e){return gu(e.length===1?function(il,ik){return fp(e(il),ik)}:e)};hu.shuffle=function(ip,io,im){if((e=arguments.length)<3){im=ip.length;if(e<2){io=0}}var e=im-io,il,ik;while(e){ik=Math.random()*e--|0;il=ip[e+io],ip[e+io]=ip[ik+io],ip[ik+io]=il}return ip};hu.permute=function(im,ik){var il=ik.length,e=new Array(il);while(il--){e[il]=im[ik[il]]}return e};hu.pairs=function(ip){var e=0,io=ip.length-1,im,il=ip[0],ik=new Array(io<0?0:io);while(e<io){ik[e]=[im=il,il=ip[++e]]}return ik};hu.zip=function(){if(!(ip=arguments.length)){return[]}for(var im=-1,e=hu.min(arguments,fj),il=new Array(e);++im<e;){for(var ik=-1,ip,io=il[im]=new Array(ip);++ik<ip;){io[ik]=arguments[ik][im]}}return il};function fj(e){return e.length}hu.transpose=function(e){return hu.zip.apply(hu,e)};hu.keys=function(il){var ik=[];for(var e in il){ik.push(e)}return ik};hu.values=function(il){var e=[];for(var ik in il){e.push(il[ik])}return e};hu.entries=function(il){var e=[];for(var ik in il){e.push({key:ik,value:il[ik]})}return e};hu.merge=function(io){var iq=io.length,ik,im=-1,il=0,e,ip;while(++im<iq){il+=io[im].length}e=new Array(il);while(--iq>=0){ip=io[iq];ik=ip.length;while(--ik>=0){e[--il]=ip[ik]}}return e};var cM=Math.abs;hu.range=function(iq,io,ip){if(arguments.length<3){ip=1;if(arguments.length<2){io=iq;iq=0}}if((io-iq)/ip===Infinity){throw new Error("infinite range")}var ik=[],e=gq(cM(ip)),im=-1,il;iq*=e,io*=e,ip*=e;if(ip<0){while((il=iq+ip*++im)>io){ik.push(il/e)}}else{while((il=iq+ip*++im)<io){ik.push(il/e)}}return ik};function gq(e){var ik=1;while(e*ik%1){ik*=10}return ik}function ia(il,ik){for(var e in ik){Object.defineProperty(il.prototype,e,{value:ik[e],enumerable:false})}}hu.map=function(e,im){var io=new aO();if(e instanceof aO){e.forEach(function(ir,it){io.set(ir,it)})}else{if(Array.isArray(e)){var il=-1,iq=e.length,ip;if(arguments.length===1){while(++il<iq){io.set(il,e[il])}}else{while(++il<iq){io.set(im.call(e,ip=e[il],il),ip)}}}else{for(var ik in e){io.set(ik,e[ik])}}}return io};function aO(){this._=Object.create(null)}var dh="__proto__",cL="\x00";ia(aO,{has:gO,get:function(e){return this._[a7(e)]},set:function(e,ik){return this._[a7(e)]=ik},remove:c2,keys:fC,values:function(){var e=[];for(var ik in this._){e.push(this._[ik])}return e},entries:function(){var e=[];for(var ik in this._){e.push({key:a8(ik),value:this._[ik]})}return e},size:hM,empty:aG,forEach:function(ik){for(var e in this._){ik.call(this,a8(e),this._[e])}}});function a7(e){return(e+="")===dh||e[0]===cL?cL+e:e}function a8(e){return(e+="")[0]===cL?e.slice(1):e}function gO(e){return a7(e) in this._}function c2(e){return(e=a7(e)) in this._&&delete this._[e]}function fC(){var ik=[];for(var e in this._){ik.push(a8(e))}return ik}function hM(){var ik=0;for(var e in this._){++ik}return ik}function aG(){for(var e in this._){return false}return true}hu.nest=function(){var im={},il=[],iq=[],ik,io;function ip(it,iA,iy){if(iy>=il.length){return io?io.call(im,iA):ik?iA.sort(ik):iA}var iz=-1,ir=iA.length,iC=il[iy++],ix,iw,iv,iu=new aO(),iB;while(++iz<ir){if(iB=iu.get(ix=iC(iw=iA[iz]))){iB.push(iw)}else{iu.set(ix,[iw])}}if(it){iw=it();iv=function(iE,iD){iw.set(iE,ip(it,iD,iy))}}else{iw={};iv=function(iE,iD){iw[iE]=ip(it,iD,iy)}}iu.forEach(iv);return iw}function e(it,iu){if(iu>=il.length){return it}var iv=[],ir=iq[iu++];it.forEach(function(iw,ix){iv.push({key:iw,values:e(ix,iu)})});return ir?iv.sort(function(ix,iw){return ir(ix.key,iw.key)}):iv}im.map=function(it,ir){return ip(ir,it,0)};im.entries=function(ir){return e(ip(hu.map,ir,0),0)};im.key=function(ir){il.push(ir);return im};im.sortKeys=function(ir){iq[il.length-1]=ir;return im};im.sortValues=function(ir){ik=ir;return im};im.rollup=function(ir){io=ir;return im};return im};hu.set=function(im){var il=new dy();if(im){for(var e=0,ik=im.length;e<ik;++e){il.add(im[e])}}return il};function dy(){this._=Object.create(null)}ia(dy,{has:gO,add:function(e){this._[a7(e+="")]=true;return e},remove:c2,values:fC,size:hM,empty:aG,forEach:function(ik){for(var e in this._){ik.call(this,a8(e))}}});hu.behavior={};function gr(e){return e}hu.rebind=function(il,ik){var e=1,io=arguments.length,im;while(++e<io){il[im=arguments[e]]=eG(il,ik,ik[im])}return il};function eG(ik,e,il){return function(){var im=il.apply(e,arguments);return im===e?ik:im}}function dm(il,ik){if(ik in il){return ik}ik=ik.charAt(0).toUpperCase()+ik.slice(1);for(var im=0,io=O.length;im<io;++im){var e=O[im]+ik;if(e in il){return e}}}var O=["webkit","ms","moz","Moz","o","O"];function aN(){}hu.dispatch=function(){var e=new e1(),ik=-1,il=arguments.length;while(++ik<il){e[arguments[ik]]=fn(e)}return e};function e1(){}e1.prototype.on=function(il,im){var ik=il.indexOf("."),e="";if(ik>=0){e=il.slice(ik+1);il=il.slice(0,ik)}if(il){return arguments.length<2?this[il].on(e):this[il].on(e,im)}if(arguments.length===2){if(im==null){for(il in this){if(this.hasOwnProperty(il)){this[il].on(e,null)}}}return this}};function fn(e){var il=[],ik=new aO();function im(){var iq=il,ip=-1,ir=iq.length,io;while(++ip<ir){if(io=iq[ip].on){io.apply(this,arguments)}}return e}im.on=function(ip,ir){var io=ik.get(ip),iq;if(arguments.length<2){return io&&io.on}if(io){io.on=null;il=il.slice(0,iq=il.indexOf(io)).concat(il.slice(iq+1));ik.remove(ip)}if(ir){il.push(ik.set(ip,{on:ir}))}return e};return im}hu.event=null;function A(){hu.event.preventDefault()}function ak(){var il=hu.event,ik;while(ik=il.sourceEvent){il=ik}return il}function ho(il){var e=new e1(),ik=0,im=arguments.length;while(++ik<im){e[arguments[ik]]=fn(e)}e.of=function(ip,io){return function(iq){try{var ir=iq.sourceEvent=hu.event;iq.target=il;hu.event=iq;e[iq.type].apply(ip,io)}finally{hu.event=ir}}};return e}hu.requote=function(e){return e.replace(de,"\\$&")};var de=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var ic={}.__proto__?function(ik,e){ik.__proto__=e}:function(ik,e){for(var il in e){ik[il]=e[il]}};function d7(e){ic(e,d6);return e}var dw=function(e,ik){return ik.querySelector(e)},gd=function(e,ik){return ik.querySelectorAll(e)},a=function(il,e){var ik=il.matches||il[dm(il,"matchesSelector")];a=function(io,im){return ik.call(io,im)};return a(il,e)};if(typeof Sizzle==="function"){dw=function(e,ik){return Sizzle(e,ik)[0]||null};gd=Sizzle;a=Sizzle.matchesSelector}hu.selection=function(){return hu.select(bU.documentElement)};var d6=hu.selection.prototype=[];d6.select=function(ip){var il=[],iu,e,it,im;ip=D(ip);for(var iq=-1,io=this.length;++iq<io;){il.push(iu=[]);iu.parentNode=(it=this[iq]).parentNode;for(var ir=-1,ik=it.length;++ir<ik;){if(im=it[ir]){iu.push(e=ip.call(im,im.__data__,ir,iq));if(e&&"__data__" in im){e.__data__=im.__data__}}else{iu.push(null)}}}return d7(il)};function D(e){return typeof e==="function"?e:function(){return dw(e,this)}}d6.selectAll=function(io){var ik=[],it,il;io=c7(io);for(var ip=-1,im=this.length;++ip<im;){for(var ir=this[ip],iq=-1,e=ir.length;++iq<e;){if(il=ir[iq]){ik.push(it=dV(io.call(il,il.__data__,iq,ip)));it.parentNode=il}}}return d7(ik)};function c7(e){return typeof e==="function"?e:function(){return gd(e,this)}}var ek={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};hu.ns={prefix:ek,qualify:function(e){var ik=e.indexOf(":"),il=e;if(ik>=0&&(il=e.slice(0,ik))!=="xmlns"){e=e.slice(ik+1)}return ek.hasOwnProperty(il)?{space:ek[il],local:e}:e}};d6.attr=function(e,il){if(arguments.length<2){if(typeof e==="string"){var ik=this.node();e=hu.ns.qualify(e);return e.local?ik.getAttributeNS(e.space,e.local):ik.getAttribute(e)}for(il in e){this.each(bB(il,e[il]))}return this}return this.each(bB(e,il))};function bB(il,iq){il=hu.ns.qualify(il);function ik(){this.removeAttribute(il)}function ir(){this.removeAttributeNS(il.space,il.local)}function ip(){this.setAttribute(il,iq)}function io(){this.setAttributeNS(il.space,il.local,iq)}function e(){var it=iq.apply(this,arguments);if(it==null){this.removeAttribute(il)}else{this.setAttribute(il,it)}}function im(){var it=iq.apply(this,arguments);if(it==null){this.removeAttributeNS(il.space,il.local)}else{this.setAttributeNS(il.space,il.local,it)}}return iq==null?il.local?ir:ik:typeof iq==="function"?il.local?im:e:il.local?io:ip}function cN(e){return e.trim().replace(/\s+/g," ")}d6.classed=function(e,im){if(arguments.length<2){if(typeof e==="string"){var il=this.node(),io=(e=gB(e)).length,ik=-1;if(im=il.classList){while(++ik<io){if(!im.contains(e[ik])){return false}}}else{im=il.getAttribute("class");while(++ik<io){if(!gW(e[ik]).test(im)){return false}}}return true}for(im in e){this.each(gK(im,e[im]))}return this}return this.each(gK(e,im))};function gW(e){return new RegExp("(?:^|\\s+)"+hu.requote(e)+"(?:\\s+|$)","g")}function gB(e){return(e+"").trim().split(/^|\s+/)}function gK(ik,im){ik=gB(ik).map(h8);var io=ik.length;function e(){var ip=-1;while(++ip<io){ik[ip](this,im)}}function il(){var iq=-1,ip=im.apply(this,arguments);while(++iq<io){ik[iq](this,ip)}}return typeof im==="function"?il:e}function h8(e){var ik=gW(e);return function(il,im){if(io=il.classList){return im?io.add(e):io.remove(e)}var io=il.getAttribute("class")||"";if(im){ik.lastIndex=0;if(!ik.test(io)){il.setAttribute("class",cN(io+" "+e))}}else{il.setAttribute("class",cN(io.replace(ik," ")))}}}d6.style=function(e,im,ik){var io=arguments.length;if(io<3){if(typeof e!=="string"){if(io<2){im=""}for(ik in e){this.each(fS(ik,e[ik],im))}return this}if(io<2){var il=this.node();return fF(il).getComputedStyle(il,null).getPropertyValue(e)}ik=""}return this.each(fS(e,im,ik))};function fS(il,ip,im){function ik(){this.style.removeProperty(il)}function io(){this.style.setProperty(il,ip,im)}function e(){var iq=ip.apply(this,arguments);if(iq==null){this.style.removeProperty(il)}else{this.style.setProperty(il,iq,im)}}return ip==null?ik:typeof ip==="function"?e:io}d6.property=function(e,ik){if(arguments.length<2){if(typeof e==="string"){return this.node()[e]}for(ik in e){this.each(hO(ik,e[ik]))}return this}return this.each(hO(e,ik))};function hO(ik,im){function e(){delete this[ik]}function il(){this[ik]=im}function io(){var ip=im.apply(this,arguments);if(ip==null){delete this[ik]}else{this[ik]=ip}}return im==null?e:typeof im==="function"?io:il}d6.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var ik=e.apply(this,arguments);this.textContent=ik==null?"":ik}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};d6.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var ik=e.apply(this,arguments);this.innerHTML=ik==null?"":ik}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};d6.append=function(e){e=aJ(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function aJ(e){function ik(){var im=this.ownerDocument,io=this.namespaceURI;return io?im.createElementNS(io,e):im.createElement(e)}function il(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=hu.ns.qualify(e)).local?il:ik}d6.insert=function(e,ik){e=aJ(e);ik=D(ik);return this.select(function(){return this.insertBefore(e.apply(this,arguments),ik.apply(this,arguments)||null)})};d6.remove=function(){return this.each(eq)};function eq(){var e=this.parentNode;if(e){e.removeChild(this)}}d6.data=function(ir,iu){var io=-1,ik=this.length,it,il;if(!arguments.length){ir=new Array(ik=(it=this[0]).length);while(++io<ik){if(il=it[io]){ir[io]=il.__data__}}return ir}function ip(iE,iz){var iB,iw=iE.length,iy=iz.length,iD=Math.min(iw,iy),iH=new Array(iy),iF=new Array(iy),iC=new Array(iw),ix,iv;if(iu){var iI=new aO(),iG=new Array(iw),iA;for(iB=-1;++iB<iw;){if(ix=iE[iB]){if(iI.has(iA=iu.call(ix,ix.__data__,iB))){iC[iB]=ix}else{iI.set(iA,ix)}iG[iB]=iA}}for(iB=-1;++iB<iy;){if(!(ix=iI.get(iA=iu.call(iz,iv=iz[iB],iB)))){iF[iB]=P(iv)}else{if(ix!==true){iH[iB]=ix;ix.__data__=iv}}iI.set(iA,true)}for(iB=-1;++iB<iw;){if(iB in iG&&iI.get(iG[iB])!==true){iC[iB]=iE[iB]}}}else{for(iB=-1;++iB<iD;){ix=iE[iB];iv=iz[iB];if(ix){ix.__data__=iv;iH[iB]=ix}else{iF[iB]=P(iv)}}for(;iB<iy;++iB){iF[iB]=P(iz[iB])}for(;iB<iw;++iB){iC[iB]=iE[iB]}}iF.update=iH;iF.parentNode=iH.parentNode=iC.parentNode=iE.parentNode;iq.push(iF);im.push(iH);e.push(iC)}var iq=b1([]),im=d7([]),e=d7([]);if(typeof ir==="function"){while(++io<ik){ip(it=this[io],ir.call(it,it.parentNode.__data__,io))}}else{while(++io<ik){ip(it=this[io],ir)}}im.enter=function(){return iq};im.exit=function(){return e};return im};function P(e){return{__data__:e}}d6.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};d6.filter=function(e){var il=[],it,ir,im;if(typeof e!=="function"){e=bf(e)}for(var ip=0,io=this.length;ip<io;ip++){il.push(it=[]);it.parentNode=(ir=this[ip]).parentNode;for(var iq=0,ik=ir.length;iq<ik;iq++){if((im=ir[iq])&&e.call(im,im.__data__,iq,ip)){it.push(im)}}}return d7(il)};function bf(e){return function(){return a(this,e)}}d6.order=function(){for(var ik=-1,e=this.length;++ik<e;){for(var ip=this[ik],il=ip.length-1,im=ip[il],io;--il>=0;){if(io=ip[il]){if(im&&im!==io.nextSibling){im.parentNode.insertBefore(io,im)}im=io}}}return this};d6.sort=function(ik){ik=gT.apply(this,arguments);for(var il=-1,e=this.length;++il<e;){this[il].sort(ik)}return this.order()};function gT(e){if(!arguments.length){e=fp}return function(il,ik){return il&&ik?e(il.__data__,ik.__data__):!il-!ik}}d6.each=function(e){return cO(this,function(im,il,ik){e.call(im,im.__data__,il,ik)})};function cO(ik,ir){for(var il=0,e=ik.length;il<e;il++){for(var ip=ik[il],im=0,iq=ip.length,io;im<iq;im++){if(io=ip[im]){ir(io,im,il)}}}return ik}d6.call=function(ik){var e=dV(arguments);ik.apply(e[0]=this,e);return this};d6.empty=function(){return !this.node()};d6.node=function(){for(var ik=0,e=this.length;ik<e;ik++){for(var io=this[ik],il=0,ip=io.length;il<ip;il++){var im=io[il];if(im){return im}}}return null};d6.size=function(){var e=0;cO(this,function(){++e});return e};function b1(e){ic(e,fa);return e}var fa=[];hu.selection.enter=b1;hu.selection.enter.prototype=fa;fa.append=d6.append;fa.empty=d6.empty;fa.node=d6.node;fa.call=d6.call;fa.size=d6.size;fa.select=function(ip){var il=[],iv,e,it,iu,io;for(var iq=-1,im=this.length;++iq<im;){it=(iu=this[iq]).update;il.push(iv=[]);iv.parentNode=iu.parentNode;for(var ir=-1,ik=iu.length;++ir<ik;){if(io=iu[ir]){iv.push(it[ir]=e=ip.call(iu.parentNode,io.__data__,ir,iq));e.__data__=io.__data__}else{iv.push(null)}}}return d7(il)};fa.insert=function(e,ik){if(arguments.length<2){ik=gA(this)}return d6.insert.call(this,e,ik)};function gA(il){var e,ik;return function(ir,io,im){var iq=il[im].update,it=iq.length,ip;if(im!=ik){ik=im,e=0}if(io>=e){e=io+1}while(!(ip=iq[e])&&++e<it){}return ip}}hu.select=function(e){var ik;if(typeof e==="string"){ik=[dw(e,bU)];ik.parentNode=bU.documentElement}else{ik=[e];ik.parentNode=ee(e)}return d7([ik])};hu.selectAll=function(e){var ik;if(typeof e==="string"){ik=dV(gd(e,bU));ik.parentNode=bU.documentElement}else{ik=dV(e);ik.parentNode=null}return d7([ik])};d6.on=function(ik,il,e){var im=arguments.length;if(im<3){if(typeof ik!=="string"){if(im<2){il=false}for(e in ik){this.each(n(e,ik[e],il))}return this}if(im<2){return(im=this.node()["__on"+ik])&&im._}e=false}return this.each(n(ik,il,e))};function n(it,im,iu){var e="__on"+it,ip=it.indexOf("."),ik=fx;if(ip>0){it=it.slice(0,ip)}var il=bQ.get(it);if(il){it=il,ik=aw}function io(){var iv=this[e];if(iv){this.removeEventListener(it,iv,iv.$);delete this[e]}}function ir(){var iv=ik(im,dV(arguments));io.call(this);this.addEventListener(it,this[e]=iv,iv.$=iu);iv._=im}function iq(){var iy=new RegExp("^__on([^.]+)"+hu.requote(it)+"$"),ix;for(var iw in this){if(ix=iw.match(iy)){var iv=this[iw];this.removeEventListener(ix[1],iv,iv.$);delete this[iw]}}}return ip?im?ir:io:im?aN:iq}var bQ=hu.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(bU){bQ.forEach(function(e){if("on"+e in bU){bQ.remove(e)}})}function fx(ik,e){return function(il){var im=hu.event;hu.event=il;e[0]=this.__data__;try{ik.apply(this,e)}finally{hu.event=im}}}function aw(il,e){var ik=fx(il,e);return function(ip){var io=this,im=ip.relatedTarget;if(!im||im!==io&&!(im.compareDocumentPosition(io)&8)){ik.call(io,ip)}}}var ci,gQ=0;function bR(ip){var il=".dragsuppress-"+ ++gQ,io="click"+il,ik=hu.select(fF(ip)).on("touchmove"+il,A).on("dragstart"+il,A).on("selectstart"+il,A);if(ci==null){ci="onselectstart" in ip?false:dm(ip.style,"userSelect")}if(ci){var im=ee(ip).style,e=im[ci];im[ci]="none"}return function(iq){ik.on(il,null);if(ci){im[ci]=e}if(iq){var ir=function(){ik.on(io,null)};ik.on(io,function(){A();ir()},true);setTimeout(ir,0)}}}hu.mouse=function(e){return a4(e,ak())};var cJ=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function a4(im,ir){if(ir.changedTouches){ir=ir.changedTouches[0]}var io=im.ownerSVGElement||im;if(io.createSVGPoint){var ik=io.createSVGPoint();if(cJ<0){var iq=fF(im);if(iq.scrollX||iq.scrollY){io=hu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var il=io[0][0].getScreenCTM();cJ=!(il.f||il.e);io.remove()}}if(cJ){ik.x=ir.pageX,ik.y=ir.pageY}else{ik.x=ir.clientX,ik.y=ir.clientY}ik=ik.matrixTransform(im.getScreenCTM().inverse());return[ik.x,ik.y]}var ip=im.getBoundingClientRect();return[ir.clientX-ip.left-im.clientLeft,ir.clientY-ip.top-im.clientTop]}hu.touch=function(e,im,ik){if(arguments.length<3){ik=im,im=ak().changedTouches}if(im){for(var il=0,ip=im.length,io;il<ip;++il){if((io=im[il]).identifier===ik){return a4(e,io)}}}};hu.behavior.drag=function(){var io=ho(im,"drag","dragstart","dragend"),e=null,ik=il(aN,hu.mouse,fF,"mousemove","mouseup"),ip=il(hs,hu.touch,gr,"touchmove","touchend");function im(){this.on("mousedown.drag",ik).on("touchstart.drag",ip)}function il(iv,iq,iu,it,ir){return function(){var iC=this,iD=hu.event.target,iI=iC.parentNode,iE=io.of(iC,arguments),iG=0,ix=iv(),iw=".drag"+(ix==null?"":"-"+ix),iA,iy=hu.select(iu(iD)).on(it+iw,iF).on(ir+iw,iH),iB=bR(iD),iz=iq(iI,ix);if(e){iA=e.apply(iC,arguments);iA=[iA.x-iz[0],iA.y-iz[1]]}else{iA=[0,0]}iE({type:"dragstart"});function iF(){var iK=iq(iI,ix),iL,iJ;if(!iK){return}iL=iK[0]-iz[0];iJ=iK[1]-iz[1];iG|=iL|iJ;iz=iK;iE({type:"drag",x:iK[0]+iA[0],y:iK[1]+iA[1],dx:iL,dy:iJ})}function iH(){if(!iq(iI,ix)){return}iy.on(it+iw,null).on(ir+iw,null);iB(iG);iE({type:"dragend"})}}}im.origin=function(iq){if(!arguments.length){return e}e=iq;return im};return hu.rebind(im,io,"on")};function hs(){return hu.event.changedTouches[0].identifier}hu.touches=function(e,ik){if(arguments.length<2){ik=ak().touches}return ik?dV(ik).map(function(im){var il=a4(e,im);il.identifier=im.identifier;return il}):[]};var gt=0.000001,eK=gt*gt,gk=Math.PI,ge=2*gk,gL=ge-gt,ew=gk/2,N=gk/180,hL=180/gk;function cf(e){return e>0?1:e<0?-1:0}function e6(ik,e,il){return(e[0]-ik[0])*(il[1]-ik[1])-(e[1]-ik[1])*(il[0]-ik[0])}function aj(e){return e>1?0:e<-1?gk:Math.acos(e)}function cl(e){return e>1?ew:e<-1?-ew:Math.asin(e)}function d4(e){return((e=Math.exp(e))-1/e)/2}function bL(e){return((e=Math.exp(e))+1/e)/2}function fz(e){return((e=Math.exp(2*e))-1)/(e+1)}function aK(e){return(e=Math.sin(e/2))*e}var gh=Math.SQRT2,ag=2,ae=4;hu.interpolateZoom=function(ik,e){var iv=ik[0],iA=ik[1],it=ik[2],iu=e[0],iz=e[1],iq=e[2],ir=iu-iv,ip=iz-iA,iB=ir*ir+ip*ip,ix,il;if(iB<eK){il=Math.log(iq/it)/gh;ix=function(iD){return[iv+iD*ir,iA+iD*ip,it*Math.exp(gh*iD*il)]}}else{var iC=Math.sqrt(iB),io=(iq*iq-it*it+ae*iB)/(2*it*ag*iC),im=(iq*iq-it*it-ae*iB)/(2*iq*ag*iC),iy=Math.log(Math.sqrt(io*io+1)-io),iw=Math.log(Math.sqrt(im*im+1)-im);il=(iw-iy)/gh;ix=function(iE){var iF=iE*il,iG=bL(iy),iD=it/(ag*iC)*(iG*fz(gh*iF+iy)-d4(iy));return[iv+iD*ir,iA+iD*ip,it*iG/bL(gh*iF+iy)]}}ix.duration=il*1000;return ix};hu.behavior.zoom=function(){var iy={x:0,y:0,k:1},iO,iv,iQ,iD=[960,500],im=f1,e=250,iN=0,iH="mousedown.zoom",iP="mousemove.zoom",iI="mouseup.zoom",iE,iL="touchstart.zoom",iu,iJ=ho(il,"zoomstart","zoom","zoomend"),iM,iK,ir,ip;if(!hb){hb="onwheel" in bU?(cD=function(){return -hu.event.deltaY*(hu.event.deltaMode?120:1)},"wheel"):"onmousewheel" in bU?(cD=function(){return hu.event.wheelDelta},"mousewheel"):(cD=function(){return -hu.event.detail},"MozMousePixelScroll")}function il(iS){iS.on(iH,io).on(hb+".zoom",iz).on("dblclick.zoom",iw).on(iL,iq)}il.event=function(iS){iS.each(function(){var iU=iJ.of(this,arguments),iT=iy;if(ay){hu.select(this).transition().each("start.zoom",function(){iy=this.__chart__||{x:0,y:0,k:1};iF(iU)}).tween("zoom:zoom",function(){var iX=iD[0],iW=iD[1],iV=iv?iv[0]:iX/2,iZ=iv?iv[1]:iW/2,iY=hu.interpolateZoom([(iV-iy.x)/iy.k,(iZ-iy.y)/iy.k,iX/iy.k],[(iV-iT.x)/iT.k,(iZ-iT.y)/iT.k,iX/iT.k]);return function(i4){var i2=iY(i4),i3=iX/i2[2];this.__chart__=iy={x:iV-i2[0]*i3,y:iZ-i2[1]*i3,k:i3};iC(iU)}}).each("interrupt.zoom",function(){iB(iU)}).each("end.zoom",function(){iB(iU)})}else{this.__chart__=iy;iF(iU);iC(iU);iB(iU)}})};il.translate=function(iS){if(!arguments.length){return[iy.x,iy.y]}iy={x:+iS[0],y:+iS[1],k:iy.k};ix();return il};il.scale=function(iS){if(!arguments.length){return iy.k}iy={x:iy.x,y:iy.y,k:null};it(+iS);ix();return il};il.scaleExtent=function(iS){if(!arguments.length){return im}im=iS==null?f1:[+iS[0],+iS[1]];return il};il.center=function(iS){if(!arguments.length){return iQ}iQ=iS&&[+iS[0],+iS[1]];return il};il.size=function(iS){if(!arguments.length){return iD}iD=iS&&[+iS[0],+iS[1]];return il};il.duration=function(iS){if(!arguments.length){return e}e=+iS;return il};il.x=function(iS){if(!arguments.length){return iK}iK=iS;iM=iS.copy();iy={x:0,y:0,k:1};return il};il.y=function(iS){if(!arguments.length){return ip}ip=iS;ir=iS.copy();iy={x:0,y:0,k:1};return il};function ik(iS){return[(iS[0]-iy.x)/iy.k,(iS[1]-iy.y)/iy.k]}function iG(iS){return[iS[0]*iy.k+iy.x,iS[1]*iy.k+iy.y]}function it(iS){iy.k=Math.max(im[0],Math.min(im[1],iS))}function iR(iT,iS){iS=iG(iS);iy.x+=iT[0]-iS[0];iy.y+=iT[1]-iS[1]}function iA(iU,iV,iS,iT){iU.__chart__={x:iy.x,y:iy.y,k:iy.k};it(Math.pow(2,iT));iR(iv=iV,iS);iU=hu.select(iU);if(e>0){iU=iU.transition().duration(e)}iU.call(il.event)}function ix(){if(iK){iK.domain(iM.range().map(function(iS){return(iS-iy.x)/iy.k}).map(iM.invert))}if(ip){ip.domain(ir.range().map(function(iS){return(iS-iy.y)/iy.k}).map(ir.invert))}}function iF(iS){if(!iN++){iS({type:"zoomstart"})}}function iC(iS){ix();iS({type:"zoom",scale:iy.k,translate:[iy.x,iy.y]})}function iB(iS){if(!--iN){iS({type:"zoomend"}),iv=null}}function io(){var iY=this,iU=iJ.of(iY,arguments),iS=0,iV=hu.select(fF(iY)).on(iP,iW).on(iI,iZ),iT=ik(hu.mouse(iY)),iX=bR(iY);c0.call(iY);iF(iU);function iW(){iS=1;iR(hu.mouse(iY),iT);iC(iU)}function iZ(){iV.on(iP,null).on(iI,null);iX(iS);iB(iU)}}function iq(){var iY=this,i2=iJ.of(iY,arguments),iW={},i4=0,iZ,iT=".zoom-"+hu.event.changedTouches[0].identifier,iU="touchmove"+iT,i8="touchend"+iT,iX=[],i5=hu.select(iY),iV=bR(iY);i3();iF(i2);i5.on(iH,null).on(iL,i3);function iS(){var i9=hu.touches(iY);iZ=iy.k;i9.forEach(function(ja){if(ja.identifier in iW){iW[ja.identifier]=ik(ja)}});return i9}function i3(){var jg=hu.event.target;hu.select(jg).on(iU,i6).on(i8,i7);iX.push(jg);var jd=hu.event.changedTouches;for(var je=0,jc=jd.length;je<jc;++je){iW[jd[je].identifier]=null}var jf=iS(),jb=Date.getEpochTime();if(jf.length===1){if(jb-iu<500){var ja=jf[0];iA(iY,ja,iW[ja.identifier],Math.floor(Math.log(iy.k)/Math.LN2)+1);A()}iu=jb}else{if(jf.length>1){var ja=jf[0],i9=jf[1],ji=ja[0]-i9[0],jh=ja[1]-i9[1];i4=ji*ji+jh*jh}}}function i6(){var jd=hu.touches(iY),jh,jb,jg,ja;c0.call(iY);for(var jc=0,i9=jd.length;jc<i9;++jc,ja=null){jg=jd[jc];if(ja=iW[jg.identifier]){if(jb){break}jh=jg,jb=ja}}if(ja){var jf=(jf=jg[0]-jh[0])*jf+(jf=jg[1]-jh[1])*jf,je=i4&&Math.sqrt(jf/i4);jh=[(jh[0]+jg[0])/2,(jh[1]+jg[1])/2];jb=[(jb[0]+ja[0])/2,(jb[1]+ja[1])/2];it(je*iZ)}iu=null;iR(jh,jb);iC(i2)}function i7(){if(hu.event.touches.length){var jb=hu.event.changedTouches;for(var ja=0,jc=jb.length;ja<jc;++ja){delete iW[jb[ja].identifier]}for(var i9 in iW){return void iS()}}hu.selectAll(iX).on(iT,null);i5.on(iH,io).on(iL,iq);iV();iB(i2)}}function iz(){var iS=iJ.of(this,arguments);if(iE){clearTimeout(iE)}else{c0.call(this),iO=ik(iv=iQ||hu.mouse(this)),iF(iS)}iE=setTimeout(function(){iE=null;iB(iS)},50);A();it(Math.pow(2,cD()*0.002)*iy.k);iR(iv,iO);iC(iS)}function iw(){var iT=hu.mouse(this),iS=Math.log(iy.k)/Math.LN2;iA(this,iT,ik(iT),hu.event.shiftKey?Math.ceil(iS)-1:Math.floor(iS)+1)}return hu.rebind(il,iJ,"on")};var f1=[0,Infinity],cD,hb;hu.color=g1;function g1(){}g1.prototype.toString=function(){return this.rgb()+""};hu.hsl=eO;function eO(il,ik,e){return this instanceof eO?void (this.h=+il,this.s=+ik,this.l=+e):arguments.length<2?il instanceof eO?new eO(il.h,il.s,il.l):a3(""+il,gD,eO):new eO(il,ik,e)}var eE=eO.prototype=new g1();eE.brighter=function(e){e=Math.pow(0.7,arguments.length?e:1);return new eO(this.h,this.s,this.l/e)};eE.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);return new eO(this.h,this.s,e*this.l)};eE.rgb=function(){return bn(this.h,this.s,this.l)};function bn(ip,io,e){var im,il;ip=isNaN(ip)?0:(ip%=360)<0?ip+360:ip;io=isNaN(io)?0:io<0?0:io>1?1:io;e=e<0?0:e>1?1:e;il=e<=0.5?e*(1+io):e+io-e*io;im=2*e-il;function ik(ir){if(ir>360){ir-=360}else{if(ir<0){ir+=360}}if(ir<60){return im+(il-im)*ir/60}if(ir<180){return il}if(ir<240){return im+(il-im)*(240-ir)/60}return im}function iq(ir){return Math.round(ik(ir)*255)}return new ey(iq(ip+120),iq(ip),iq(ip-120))}hu.hcl=bJ;function bJ(ik,il,e){return this instanceof bJ?void (this.h=+ik,this.c=+il,this.l=+e):arguments.length<2?ik instanceof bJ?new bJ(ik.h,ik.c,ik.l):ik instanceof ct?gN(ik.l,ik.a,ik.b):gN((ik=d8((ik=hu.rgb(ik)).r,ik.g,ik.b)).l,ik.a,ik.b):new bJ(ik,il,e)}var hm=bJ.prototype=new g1();hm.brighter=function(e){return new bJ(this.h,this.c,Math.min(100,this.l+bz*(arguments.length?e:1)))};hm.darker=function(e){return new bJ(this.h,this.c,Math.max(0,this.l-bz*(arguments.length?e:1)))};hm.rgb=function(){return bK(this.h,this.c,this.l).rgb()};function bK(ik,il,e){if(isNaN(ik)){ik=0}if(isNaN(il)){il=0}return new ct(e,Math.cos(ik*=N)*il,Math.sin(ik)*il)}hu.lab=ct;function ct(il,ik,e){return this instanceof ct?void (this.l=+il,this.a=+ik,this.b=+e):arguments.length<2?il instanceof ct?new ct(il.l,il.a,il.b):il instanceof bJ?bK(il.h,il.c,il.l):d8((il=ey(il)).r,il.g,il.b):new ct(il,ik,e)}var bz=18;var bo=0.95047,bm=1,bj=1.08883;var gE=ct.prototype=new g1();gE.brighter=function(e){return new ct(Math.min(100,this.l+bz*(arguments.length?e:1)),this.a,this.b)};gE.darker=function(e){return new ct(Math.max(0,this.l-bz*(arguments.length?e:1)),this.a,this.b)};gE.rgb=function(){return aI(this.l,this.a,this.b)};function aI(im,il,ik){var ip=(im+16)/116,e=ip+il/500,io=ip-ik/200;e=g7(e)*bo;ip=g7(ip)*bm;io=g7(io)*bj;return new ey(d(3.2404542*e-1.5371385*ip-0.4985314*io),d(-0.969266*e+1.8760108*ip+0.041556*io),d(0.0556434*e-0.2040259*ip+1.0572252*io))}function gN(il,ik,e){return il>0?new bJ(Math.atan2(e,ik)*hL,Math.sqrt(ik*ik+e*e),il):new bJ(NaN,NaN,il)}function g7(e){return e>0.206893034?e*e*e:(e-4/29)/7.787037}function gw(e){return e>0.008856?Math.pow(e,1/3):7.787037*e+4/29}function d(e){return Math.round(255*(e<=0.00304?12.92*e:1.055*Math.pow(e,1/2.4)-0.055))}hu.rgb=ey;function ey(il,ik,e){return this instanceof ey?void (this.r=~~il,this.g=~~ik,this.b=~~e):arguments.length<2?il instanceof ey?new ey(il.r,il.g,il.b):a3(""+il,ey,bn):new ey(il,ik,e)}function dk(e){return new ey(e>>16,e>>8&255,e&255)}function dD(e){return dk(e)+""}var eP=ey.prototype=new g1();eP.brighter=function(ik){ik=Math.pow(0.7,arguments.length?ik:1);var io=this.r,im=this.g,e=this.b,il=30;if(!io&&!im&&!e){return new ey(il,il,il)}if(io&&io<il){io=il}if(im&&im<il){im=il}if(e&&e<il){e=il}return new ey(Math.min(255,io/ik),Math.min(255,im/ik),Math.min(255,e/ik))};eP.darker=function(e){e=Math.pow(0.7,arguments.length?e:1);return new ey(e*this.r,e*this.g,e*this.b)};eP.hsl=function(){return gD(this.r,this.g,this.b)};eP.toString=function(){return"#"+cB(this.r)+cB(this.g)+cB(this.b)};function cB(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function a3(ip,im,iq){var e=0,il=0,io=0,it,ir,ik;it=/([a-z]+)\((.*)\)/.exec(ip=ip.toLowerCase());if(it){ir=it[2].split(",");switch(it[1]){case"hsl":return iq(parseFloat(ir[0]),parseFloat(ir[1])/100,parseFloat(ir[2])/100);case"rgb":return im(e3(ir[0]),e3(ir[1]),e3(ir[2]))}}if(ik=at.get(ip)){return im(ik.r,ik.g,ik.b)}if(ip!=null&&ip.charAt(0)==="#"&&!isNaN(ik=parseInt(ip.slice(1),16))){if(ip.length===4){e=(ik&3840)>>4;e=e>>4|e;il=ik&240;il=il>>4|il;io=ik&15;io=io<<4|io}else{if(ip.length===7){e=(ik&16711680)>>16;il=(ik&65280)>>8;io=ik&255}}}return im(e,il,io)}function gD(e,io,iq){var il=Math.min(e/=255,io/=255,iq/=255),ir=Math.max(e,io,iq),ip=ir-il,im,it,ik=(ir+il)/2;if(ip){it=ik<0.5?ip/(ir+il):ip/(2-ir-il);if(e==ir){im=(io-iq)/ip+(io<iq?6:0)}else{if(io==ir){im=(iq-e)/ip+2}else{im=(e-io)/ip+4}}im*=60}else{im=NaN;it=ik>0&&ik<1?0:im}return new eO(im,it,ik)}function d8(im,il,ik){im=dK(im);il=dK(il);ik=dK(ik);var e=gw((0.4124564*im+0.3575761*il+0.1804375*ik)/bo),ip=gw((0.2126729*im+0.7151522*il+0.072175*ik)/bm),io=gw((0.0193339*im+0.119192*il+0.9503041*ik)/bj);return ct(116*ip-16,500*(e-ip),200*(ip-io))}function dK(e){return(e/=255)<=0.04045?e/12.92:Math.pow((e+0.055)/1.055,2.4)}function e3(ik){var e=parseFloat(ik);return ik.charAt(ik.length-1)==="%"?Math.round(e*2.55):e}var at=hu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});at.forEach(function(e,ik){at.set(e,dk(ik))});function V(e){return typeof e==="function"?e:function(){return e}}hu.functor=V;hu.xhr=ad(gr);function ad(e){return function(ik,il,im){if(arguments.length===2&&typeof il==="function"){im=il,il=null}return h5(ik,il,e,im)}}function h5(e,il,io,it){var iu={},ir=hu.dispatch("beforesend","progress","load","error"),im={},ip=new XMLHttpRequest(),iq=null;if(this.XDomainRequest&&!("withCredentials" in ip)&&/^(http(s)?:)?\/\//.test(e)){ip=new XDomainRequest()}"onload" in ip?ip.onload=ip.onerror=ik:ip.onreadystatechange=function(){ip.readyState>3&&ik()};function ik(){var iw=ip.status,iv;if(!iw&&fP(ip)||iw>=200&&iw<300||iw===304){try{iv=io.call(iu,ip)}catch(ix){ir.error.call(iu,ix);return}ir.load.call(iu,iv)}else{ir.error.call(iu,ip)}}ip.onprogress=function(iv){var iw=hu.event;hu.event=iv;try{ir.progress.call(iu,ip)}finally{hu.event=iw}};iu.header=function(iv,iw){iv=(iv+"").toLowerCase();if(arguments.length<2){return im[iv]}if(iw==null){delete im[iv]}else{im[iv]=iw+""}return iu};iu.mimeType=function(iv){if(!arguments.length){return il}il=iv==null?null:iv+"";return iu};iu.responseType=function(iv){if(!arguments.length){return iq}iq=iv;return iu};iu.response=function(iv){io=iv;return iu};["get","post"].forEach(function(iv){iu[iv]=function(){return iu.send.apply(iu,[iv].concat(dV(arguments)))}});iu.send=function(iy,iw,ix){if(arguments.length===2&&typeof iw==="function"){ix=iw,iw=null}ip.open(iy,e,true);if(il!=null&&!("accept" in im)){im.accept=il+",*/*"}if(ip.setRequestHeader){for(var iv in im){ip.setRequestHeader(iv,im[iv])}}if(il!=null&&ip.overrideMimeType){ip.overrideMimeType(il)}if(iq!=null){ip.responseType=iq}if(ix!=null){iu.on("error",ix).on("load",function(iz){ix(null,iz)})}ir.beforesend.call(iu,ip);ip.send(iw==null?null:iw);return iu};iu.abort=function(){ip.abort();return iu};hu.rebind(iu,ir,"on");return it==null?iu:iu.get(ed(it))}function ed(e){return e.length===1?function(ik,il){e(ik==null?il:null)}:e}function fP(ik){var e=ik.responseType;return e&&e!=="text"?ik.response:ik.responseText}hu.dsv=function(e,ik){var im=new RegExp('["'+e+"\n]"),ip=e.charCodeAt(0);function ir(iu,iw,ix){if(arguments.length<3){ix=iw,iw=null}var iv=h5(iu,ik,iw==null?io:il(iw),ix);iv.row=function(iy){return arguments.length?iv.response((iw=iy)==null?io:il(iy)):iw};return iv}function io(iu){return ir.parse(iu.responseText)}function il(iu){return function(iv){return ir.parse(iv.responseText,iu)}}ir.parse=function(iw,iu){var iv;return ir.parseRows(iw,function(iz,iy){if(iv){return iv(iz,iy-1)}var ix=new Function("d","return {"+iz.map(function(iA,iB){return JSON.stringify(iA)+": d["+iB+"]"}).join(",")+"}");iv=iu?function(iB,iA){return iu(ix(iB),iA)}:ix})};ir.parseRows=function(iD,iy){var iv={},ix={},iF=[],iz=iD.length,iC=0,iu=0,iE,iA;function iw(){if(iC>=iz){return ix}if(iA){return iA=false,iv}var iH=iC;if(iD.charCodeAt(iH)===34){var iI=iH;while(iI++<iz){if(iD.charCodeAt(iI)===34){if(iD.charCodeAt(iI+1)!==34){break}++iI}}iC=iI+2;var iJ=iD.charCodeAt(iI+1);if(iJ===13){iA=true;if(iD.charCodeAt(iI+2)===10){++iC}}else{if(iJ===10){iA=true}}return iD.slice(iH+1,iI).replace(/""/g,'"')}while(iC<iz){var iJ=iD.charCodeAt(iC++),iG=1;if(iJ===10){iA=true}else{if(iJ===13){iA=true;if(iD.charCodeAt(iC)===10){++iC,++iG}}else{if(iJ!==ip){continue}}}return iD.slice(iH,iC-iG)}return iD.slice(iH)}while((iE=iw())!==ix){var iB=[];while(iE!==iv&&iE!==ix){iB.push(iE);iE=iw()}if(iy&&(iB=iy(iB,iu++))==null){continue}iF.push(iB)}return iF};ir.format=function(iw){if(Array.isArray(iw[0])){return ir.formatRows(iw)}var iv=new dy(),iu=[];iw.forEach(function(iy){for(var ix in iy){if(!iv.has(ix)){iu.push(iv.add(ix))}}});return[iu.map(iq).join(e)].concat(iw.map(function(ix){return iu.map(function(iy){return iq(ix[iy])}).join(e)})).join("\n")};ir.formatRows=function(iu){return iu.map(it).join("\n")};function it(iu){return iu.map(iq).join(e)}function iq(iu){return im.test(iu)?'"'+iu.replace(/\"/g,'""')+'"':iu}return ir};hu.csv=hu.dsv(",","text/csv");hu.tsv=hu.dsv("	","text/tab-separated-values");var d9,al,cw,fm,hA=this[dm(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};hu.timer=function(){g9.apply(this,arguments)};function g9(ip,e,il){var io=arguments.length;if(io<2){e=0}if(io<3){il=Date.getEpochTime()}var ik=il+e,im={c:ip,t:ik,n:null};if(al){al.n=im}else{d9=im}al=im;if(!cw){fm=clearTimeout(fm);cw=1;hA(hB)}return im}function hB(){var ik=bM(),e=ai()-ik;if(e>24){if(isFinite(e)){clearTimeout(fm);fm=setTimeout(hB,e)}cw=0}else{cw=1;hA(hB)}}hu.timer.flush=function(){bM();ai()};function bM(){var e=Date.getEpochTime(),ik=d9;while(ik){if(e>=ik.t&&ik.c(e-ik.t)){ik.c=null}ik=ik.n}return e}function ai(){var ik,e=d9,il=Infinity;while(e){if(e.c){if(e.t<il){il=e.t}e=(ik=e).n}else{e=ik?ik.n=e.n:d9=e.n}}al=ik;return il}function em(e,ik){return ik-(e?Math.ceil(Math.log(e)/Math.LN10):1)}hu.round=function(e,ik){return ik?Math.round(e*(ik=Math.pow(10,ik)))/ik:Math.round(e)};var cA=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(dU);hu.formatPrefix=function(il,e){var ik=0;if(il=+il){if(il<0){il*=-1}if(e){il=hu.round(il,em(il,e))}ik=1+Math.floor(1e-12+Math.log(il)/Math.LN10);ik=Math.max(-24,Math.min(24,Math.floor((ik-1)/3)*3))}return cA[8+ik/3]};function dU(il,ik){var e=Math.pow(10,cM(8-ik)*3);return{scale:ik>8?function(im){return im/e}:function(im){return im*e},symbol:il}}function bv(e){var im=e.decimal,ip=e.thousands,io=e.grouping,il=e.currency,ik=io&&ip?function(ix,iu){var it=ix.length,ir=[],iq=0,iw=io[0],iv=0;while(it>0&&iw>0){if(iv+iw+1>iu){iw=Math.max(1,iu-iv)}ir.push(ix.substring(it-=iw,it+iw));if((iv+=iw+1)>iu){break}iw=io[iq=(iq+1)%io.length]}return ir.reverse().join(ip)}:gr;return function(iE){var iz=cF.exec(iE),iG=iz[1]||" ",iB=iz[2]||">",ir=iz[3]||"-",iu=iz[4]||"",iv=iz[5],iq=+iz[6],iH=iz[7],iy=iz[8],iC=iz[9],it=1,iA="",iF="",ix=false,iD=true;if(iy){iy=+iy.substring(1)}if(iv||iG==="0"&&iB==="="){iv=iG="0";iB="="}switch(iC){case"n":iH=true;iC="g";break;case"%":it=100;iF="%";iC="f";break;case"p":it=100;iF="%";iC="r";break;case"b":case"o":case"x":case"X":if(iu==="#"){iA="0"+iC.toLowerCase()}case"c":iD=false;case"d":ix=true;iy=0;break;case"s":it=-1;iC="r";break}if(iu==="$"){iA=il[0],iF=il[1]}if(iC=="r"&&!iy){iC="g"}if(iy!=null){if(iC=="g"){iy=Math.max(1,Math.min(21,iy))}else{if(iC=="e"||iC=="f"){iy=Math.max(0,Math.min(20,iy))}}}iC=B.get(iC)||bu;var iw=iv&&iH;return function(iQ){var iO=iF;if(ix&&iQ%1){return""}var iK=iQ<0||iQ===0&&1/iQ<0?(iQ=-iQ,"-"):ir==="-"?"":ir;if(it<0){var iR=hu.formatPrefix(iQ,iy);iQ=iR.scale(iQ);iO=iR.symbol+iF}else{iQ*=it}iQ=iC(iQ,iy);var iM=iQ.lastIndexOf("."),iP,iI;if(iM<0){var iL=iD?iQ.lastIndexOf("e"):-1;if(iL<0){iP=iQ,iI=""}else{iP=iQ.substring(0,iL),iI=iQ.substring(iL)}}else{iP=iQ.substring(0,iM);iI=im+iQ.substring(iM+1)}if(!iv&&iH){iP=ik(iP,Infinity)}var iJ=iA.length+iP.length+iI.length+(iw?0:iK.length),iN=iJ<iq?new Array(iJ=iq-iJ+1).join(iG):"";if(iw){iP=ik(iN+iP,iN.length?iq-iI.length:Infinity)}iK+=iA;iQ=iP+iI;return(iB==="<"?iK+iQ+iN:iB===">"?iN+iK+iQ:iB==="^"?iN.substring(0,iJ>>=1)+iK+iQ+iN.substring(iJ):iK+(iw?iQ:iN+iQ))+iO}}}var cF=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var B=hu.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,ik){return e.toPrecision(ik)},e:function(e,ik){return e.toExponential(ik)},f:function(e,ik){return e.toFixed(ik)},r:function(e,ik){return(e=hu.round(e,em(e,ik))).toFixed(Math.max(0,Math.min(20,em(e*(1+1e-15),ik))))}});function bu(e){return e+""}var fN=hu.time={},hy=Date;function cr(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}cr.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){f7.setUTCDate.apply(this._,arguments)},setDay:function(){f7.setUTCDay.apply(this._,arguments)},setFullYear:function(){f7.setUTCFullYear.apply(this._,arguments)},setHours:function(){f7.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){f7.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){f7.setUTCMinutes.apply(this._,arguments)},setMonth:function(){f7.setUTCMonth.apply(this._,arguments)},setSeconds:function(){f7.setUTCSeconds.apply(this._,arguments)},setTime:function(){f7.setTime.apply(this._,arguments)}};var f7=Date.prototype;function c6(ip,e,ik){function it(iu){var iw=ip(iu),iv=im(iw,1);return iu-iw<iv-iu?iw:iv}function ir(iu){e(iu=ip(new hy(iu-1)),1);return iu}function im(iv,iu){e(iv=new hy(+iv),iu);return iv}function io(iw,iv,iu){var ix=ir(iw),iy=[];if(iu>1){while(ix<iv){if(!(ik(ix)%iu)){iy.push(new Date(+ix))}e(ix,1)}}else{while(ix<iv){iy.push(new Date(+ix)),e(ix,1)}}return iy}function il(ix,iw,iv){try{hy=cr;var iu=new cr();iu._=ix;return io(iu,iw,iv)}finally{hy=Date}}ip.floor=ip;ip.round=it;ip.ceil=ir;ip.offset=im;ip.range=io;var iq=ip.utc=dZ(ip);iq.floor=iq;iq.round=dZ(it);iq.ceil=dZ(ir);iq.offset=dZ(im);iq.range=il;return ip}function dZ(e){return function(il,ik){try{hy=cr;var im=new cr();im._=il;return e(im,ik)._}finally{hy=Date}}}fN.year=c6(function(e){e=fN.day(e);e.setMonth(0,1);return e},function(e,ik){e.setFullYear(e.getFullYear()+ik)},function(e){return e.getFullYear()});fN.years=fN.year.range;fN.years.utc=fN.year.utc.range;fN.day=c6(function(ik){var e=new hy(2000,0);e.setFullYear(ik.getFullYear(),ik.getMonth(),ik.getDate());return e},function(e,ik){e.setDate(e.getDate()+ik)},function(e){return e.getDate()-1});fN.days=fN.day.range;fN.days.utc=fN.day.utc.range;fN.dayOfYear=function(e){var ik=fN.year(e);return Math.floor((e-ik-(e.getTimezoneOffset()-ik.getTimezoneOffset())*60000)/86400000)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(ik,il){il=7-il;var e=fN[ik]=c6(function(im){(im=fN.day(im)).setDate(im.getDate()-(im.getDay()+il)%7);return im},function(im,io){im.setDate(im.getDate()+Math.floor(io)*7)},function(io){var im=fN.year(io).getDay();return Math.floor((fN.dayOfYear(io)+(im+il)%7)/7)-(im!==il)});fN[ik+"s"]=e.range;fN[ik+"s"].utc=e.utc.range;fN[ik+"OfYear"]=function(io){var im=fN.year(io).getDay();return Math.floor((fN.dayOfYear(io)+(im+il)%7)/7)}});fN.week=fN.sunday;fN.weeks=fN.sunday.range;fN.weeks.utc=fN.sunday.utc.range;fN.weekOfYear=fN.sundayOfYear;function ax(iD){var iI=iD.dateTime,iy=iD.date,ik=iD.time,it=iD.periods,e=iD.days,iu=iD.shortDays,ix=iD.months,io=iD.shortMonths;function iH(iP){var iR=iP.length;function iQ(iU){var iT=[],iV=-1,iS=0,iY,iX,iW;while(++iV<iR){if(iP.charCodeAt(iV)===37){iT.push(iP.slice(iS,iV));if((iX=aU[iY=iP.charAt(++iV)])!=null){iY=iP.charAt(++iV)}if(iW=iF[iY]){iY=iW(iU,iX==null?iY==="e"?" ":"0":iX)}iT.push(iY);iS=iV+1}}iT.push(iP.slice(iS,iV));return iT.join("")}iQ.parse=function(iU){var iW={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},iV=iB(iW,iP,iU,0);if(iV!=iU.length){return null}if("p" in iW){iW.H=iW.H%12+iW.p*12}var iS=iW.Z!=null&&hy!==cr,iT=new (iS?cr:hy)();if("j" in iW){iT.setFullYear(iW.y,0,iW.j)}else{if("W" in iW||"U" in iW){if(!("w" in iW)){iW.w="W" in iW?1:0}iT.setFullYear(iW.y,0,1);iT.setFullYear(iW.y,0,"W" in iW?(iW.w+6)%7+iW.W*7-(iT.getDay()+5)%7:iW.w+iW.U*7-(iT.getDay()+6)%7)}else{iT.setFullYear(iW.y,iW.m,iW.d)}}iT.setHours(iW.H+(iW.Z/100|0),iW.M+iW.Z%100,iW.S,iW.L);return iS?iT._:iT};iQ.toString=function(){return iP};return iQ}function iB(iS,iX,iV,iT){var iW,iP,iY,iU=0,iQ=iX.length,iR=iV.length;while(iU<iQ){if(iT>=iR){return -1}iW=iX.charCodeAt(iU++);if(iW===37){iY=iX.charAt(iU++);iP=iE[iY in aU?iX.charAt(iU++):iY];if(!iP||(iT=iP(iS,iV,iT))<0){return -1}}else{if(iW!=iV.charCodeAt(iT++)){return -1}}}return iT}iH.utc=function(iQ){var iP=iH(iQ);function iR(iS){try{hy=cr;var iT=new hy();iT._=iS;return iP(iT)}finally{hy=Date}}iR.parse=function(iT){try{hy=cr;var iS=iP.parse(iT);return iS&&iS._}finally{hy=Date}};iR.toString=iP.toString;return iR};iH.multi=iH.utc.multi=gv;var iz=hu.map(),iL=cQ(e),iM=g0(e),iK=cQ(iu),ip=g0(iu),iN=cQ(ix),iO=g0(ix),iv=cQ(io),im=g0(io);it.forEach(function(iQ,iP){iz.set(iQ.toLowerCase(),iP)});var iF={a:function(iP){return iu[iP.getDay()]},A:function(iP){return e[iP.getDay()]},b:function(iP){return io[iP.getMonth()]},B:function(iP){return ix[iP.getMonth()]},c:iH(iI),d:function(iQ,iP){return dF(iQ.getDate(),iP,2)},e:function(iQ,iP){return dF(iQ.getDate(),iP,2)},H:function(iQ,iP){return dF(iQ.getHours(),iP,2)},I:function(iQ,iP){return dF(iQ.getHours()%12||12,iP,2)},j:function(iQ,iP){return dF(1+fN.dayOfYear(iQ),iP,3)},L:function(iQ,iP){return dF(iQ.getMilliseconds(),iP,3)},m:function(iQ,iP){return dF(iQ.getMonth()+1,iP,2)},M:function(iQ,iP){return dF(iQ.getMinutes(),iP,2)},p:function(iP){return it[+(iP.getHours()>=12)]},S:function(iQ,iP){return dF(iQ.getSeconds(),iP,2)},U:function(iQ,iP){return dF(fN.sundayOfYear(iQ),iP,2)},w:function(iP){return iP.getDay()},W:function(iQ,iP){return dF(fN.mondayOfYear(iQ),iP,2)},x:iH(iy),X:iH(ik),y:function(iQ,iP){return dF(iQ.getFullYear()%100,iP,2)},Y:function(iQ,iP){return dF(iQ.getFullYear()%10000,iP,4)},Z:f2,"%":function(){return"%"}};var iE={a:iw,A:il,b:iJ,B:iC,c:ir,d:b9,e:b9,H:aW,I:aW,j:J,L:g3,m:gP,M:c1,p:iA,S:d5,U:bA,w:d1,W:dO,x:iG,X:iq,y:S,Y:bH,Z:bb,"%":fA};function iw(iQ,iP,iR){iK.lastIndex=0;var iS=iK.exec(iP.slice(iR));return iS?(iQ.w=ip.get(iS[0].toLowerCase()),iR+iS[0].length):-1}function il(iQ,iP,iR){iL.lastIndex=0;var iS=iL.exec(iP.slice(iR));return iS?(iQ.w=iM.get(iS[0].toLowerCase()),iR+iS[0].length):-1}function iJ(iQ,iP,iR){iv.lastIndex=0;var iS=iv.exec(iP.slice(iR));return iS?(iQ.m=im.get(iS[0].toLowerCase()),iR+iS[0].length):-1}function iC(iQ,iP,iR){iN.lastIndex=0;var iS=iN.exec(iP.slice(iR));return iS?(iQ.m=iO.get(iS[0].toLowerCase()),iR+iS[0].length):-1}function ir(iQ,iP,iR){return iB(iQ,iF.c.toString(),iP,iR)}function iG(iQ,iP,iR){return iB(iQ,iF.x.toString(),iP,iR)}function iq(iQ,iP,iR){return iB(iQ,iF.X.toString(),iP,iR)}function iA(iQ,iP,iR){var iS=iz.get(iP.slice(iR,iR+=2).toLowerCase());return iS==null?-1:(iQ.p=iS,iR)}return iH}var aU={"-":"",_:" ","0":"0"},gc=/^\s*\d+/,fe=/^%/;function dF(io,ip,il){var e=io<0?"-":"",ik=(e?-io:io)+"",im=ik.length;return e+(im<il?new Array(il-im+1).join(ip)+ik:ik)}function cQ(e){return new RegExp("^(?:"+e.map(hu.requote).join("|")+")","i")}function g0(il){var ik=new aO(),e=-1,im=il.length;while(++e<im){ik.set(il[e].toLowerCase(),e)}return ik}function d1(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+1));return im?(ik.w=+im[0],il+im[0].length):-1}function bA(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il));return im?(ik.U=+im[0],il+im[0].length):-1}function dO(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il));return im?(ik.W=+im[0],il+im[0].length):-1}function bH(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+4));return im?(ik.y=+im[0],il+im[0].length):-1}function S(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+2));return im?(ik.y=c8(+im[0]),il+im[0].length):-1}function bb(ik,e,il){return/^[+-]\d{4}$/.test(e=e.slice(il,il+5))?(ik.Z=-e,il+5):-1}function c8(e){return e+(e>68?1900:2000)}function gP(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+2));return im?(ik.m=im[0]-1,il+im[0].length):-1}function b9(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+2));return im?(ik.d=+im[0],il+im[0].length):-1}function J(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+3));return im?(ik.j=+im[0],il+im[0].length):-1}function aW(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+2));return im?(ik.H=+im[0],il+im[0].length):-1}function c1(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+2));return im?(ik.M=+im[0],il+im[0].length):-1}function d5(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+2));return im?(ik.S=+im[0],il+im[0].length):-1}function g3(ik,e,il){gc.lastIndex=0;var im=gc.exec(e.slice(il,il+3));return im?(ik.L=+im[0],il+im[0].length):-1}function f2(io){var im=io.getTimezoneOffset(),il=im>0?"-":"+",ik=cM(im)/60|0,e=cM(im)%60;return il+dF(ik,"0",2)+dF(e,"0",2)}function fA(ik,e,il){fe.lastIndex=0;var im=fe.exec(e.slice(il,il+1));return im?il+im[0].length:-1}function gv(e){var il=e.length,ik=-1;while(++ik<il){e[ik][0]=this(e[ik][0])}return function(im){var io=0,ip=e[io];while(!ip[1](im)){ip=e[++io]}return ip[0](im)}}hu.locale=function(e){return{numberFormat:bv(e),timeFormat:ax(e)}};var dn=hu.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});hu.format=dn.numberFormat;hu.geo={};function fi(){}fi.prototype={s:0,t:0,add:function(e){dv(e,this.t,hV);dv(hV.s,this.s,this);if(this.s){this.t+=hV.t}else{this.s=hV.t}},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var hV=new fi();function dv(im,il,ip){var ik=ip.s=im+il,e=ik-im,io=ik-e;ip.t=im-io+(il-e)}hu.geo.stream=function(e,ik){if(e&&E.hasOwnProperty(e.type)){E[e.type](e,ik)}else{aV(e,ik)}};function aV(ik,e){if(ik&&eY.hasOwnProperty(ik.type)){eY[ik.type](ik,e)}}var E={Feature:function(e,ik){aV(e.geometry,ik)},FeatureCollection:function(e,im){var il=e.features,ik=-1,io=il.length;while(++ik<io){aV(il[ik].geometry,im)}}};var eY={Sphere:function(e,ik){ik.sphere()},Point:function(e,ik){e=e.coordinates;ik.point(e[0],e[1],e[2])},MultiPoint:function(e,il){var im=e.coordinates,ik=-1,io=im.length;while(++ik<io){e=im[ik],il.point(e[0],e[1],e[2])}},LineString:function(e,ik){cu(e.coordinates,ik,0)},MultiLineString:function(e,il){var im=e.coordinates,ik=-1,io=im.length;while(++ik<io){cu(im[ik],il,0)}},Polygon:function(e,ik){hl(e.coordinates,ik)},MultiPolygon:function(e,il){var im=e.coordinates,ik=-1,io=im.length;while(++ik<io){hl(im[ik],il)}},GeometryCollection:function(e,im){var il=e.geometries,ik=-1,io=il.length;while(++ik<io){aV(il[ik],im)}}};function cu(im,il,e){var ik=-1,ip=im.length-e,io;il.lineStart();while(++ik<ip){io=im[ik],il.point(io[0],io[1],io[2])}il.lineEnd()}function hl(il,ik){var e=-1,im=il.length;ik.polygonStart();while(++e<im){cu(il[e],ik,1)}ik.polygonEnd()}hu.geo.area=function(e){bg=0;hu.geo.stream(e,hr);return bg};var bg,fW=new fi();var hr={sphere:function(){bg+=4*gk},point:aN,lineStart:aN,lineEnd:aN,polygonStart:function(){fW.reset();hr.lineStart=cc},polygonEnd:function(){var e=2*fW;bg+=e<0?4*gk+e:e;hr.lineStart=hr.lineEnd=hr.point=aN}};function cc(){var ik,e,im,il,io;hr.point=function(ir,iq){hr.point=ip;im=(ik=ir)*N,il=Math.cos(iq=(e=iq)*N/2+gk/4),io=Math.sin(iq)};function ip(it,iA){it*=N;iA=iA*N/2+gk/4;var iw=it-im,iv=iw>=0?1:-1,ix=iv*iw,iq=Math.cos(iA),iu=Math.sin(iA),ir=io*iu,iz=il*iq+ir*Math.cos(ix),iy=ir*iv*Math.sin(ix);fW.add(Math.atan2(iy,iz));im=it,il=iq,io=iu}hr.lineEnd=function(){ip(ik,e)}}function aB(e){var il=e[0],ik=e[1],im=Math.cos(ik);return[im*Math.cos(il),im*Math.sin(il),Math.sin(ik)]}function aE(ik,e){return ik[0]*e[0]+ik[1]*e[1]+ik[2]*e[2]}function c4(ik,e){return[ik[1]*e[2]-ik[2]*e[1],ik[2]*e[0]-ik[0]*e[2],ik[0]*e[1]-ik[1]*e[0]]}function cH(ik,e){ik[0]+=e[0];ik[1]+=e[1];ik[2]+=e[2]}function gl(e,ik){return[e[0]*ik,e[1]*ik,e[2]*ik]}function fr(ik){var e=Math.sqrt(ik[0]*ik[0]+ik[1]*ik[1]+ik[2]*ik[2]);ik[0]/=e;ik[1]/=e;ik[2]/=e}function ig(e){return[Math.atan2(e[1],e[0]),cl(e[2])]}function eZ(ik,e){return cM(ik[0]-e[0])<gt&&cM(ik[1]-e[1])<gt}hu.geo.bounds=function(){var im,iE,ik,iC,io,iw,iy,ip,it,iq,iu;var e={point:iz,lineStart:iv,lineEnd:iB,polygonStart:function(){e.point=iA;e.lineStart=ir;e.lineEnd=ix;it=0;hr.polygonStart()},polygonEnd:function(){hr.polygonEnd();e.point=iz;e.lineStart=iv;e.lineEnd=iB;if(fW<0){im=-(ik=180),iE=-(iC=90)}else{if(it>gt){iC=90}else{if(it<-gt){iE=-90}}}iu[0]=im,iu[1]=ik}};function iz(iI,iH){iq.push(iu=[im=iI,ik=iI]);if(iH<iE){iE=iH}if(iH>iC){iC=iH}}function il(iL,iR){var iH=aB([iL*N,iR*N]);if(ip){var iN=c4(ip,iH),iO=[iN[1],-iN[0],0],iM=c4(iO,iN);fr(iM);iM=ig(iM);var iP=iL-io,iQ=iP>0?1:-1,iI=iM[0]*hL*iQ,iK=cM(iP)>180;if(iK^(iQ*io<iI&&iI<iQ*iL)){var iJ=iM[1]*hL;if(iJ>iC){iC=iJ}}else{if(iI=(iI+360)%360-180,iK^(iQ*io<iI&&iI<iQ*iL)){var iJ=-iM[1]*hL;if(iJ<iE){iE=iJ}}else{if(iR<iE){iE=iR}if(iR>iC){iC=iR}}}if(iK){if(iL<io){if(iD(im,iL)>iD(im,ik)){ik=iL}}else{if(iD(iL,ik)>iD(im,ik)){im=iL}}}else{if(ik>=im){if(iL<im){im=iL}if(iL>ik){ik=iL}}else{if(iL>io){if(iD(im,iL)>iD(im,ik)){ik=iL}}else{if(iD(iL,ik)>iD(im,ik)){im=iL}}}}}else{iz(iL,iR)}ip=iH,io=iL}function iv(){e.point=il}function iB(){iu[0]=im,iu[1]=ik;e.point=iz;ip=null}function iA(iI,iH){if(ip){var iJ=iI-io;it+=cM(iJ)>180?iJ+(iJ>0?360:-360):iJ}else{iw=iI,iy=iH}hr.point(iI,iH);il(iI,iH)}function ir(){hr.lineStart()}function ix(){iA(iw,iy);hr.lineEnd();if(cM(it)>gt){im=-(ik=180)}iu[0]=im,iu[1]=ik;ip=null}function iD(iI,iH){return(iH-=iI)<0?iH+360:iH}function iG(iI,iH){return iI[0]-iH[0]}function iF(iH,iI){return iI[0]<=iI[1]?iI[0]<=iH&&iH<=iI[1]:iH<iI[0]||iI[1]<iH}return function(iM){iC=ik=-(im=iE=Infinity);iq=[];hu.geo.stream(iM,e);var iO=iq.length;if(iO){iq.sort(iG);for(var iL=1,iJ=iq[0],iI,iH=[iJ];iL<iO;++iL){iI=iq[iL];if(iF(iI[0],iJ)||iF(iI[1],iJ)){if(iD(iJ[0],iI[1])>iD(iJ[0],iJ[1])){iJ[1]=iI[1]}if(iD(iI[0],iJ[1])>iD(iJ[0],iJ[1])){iJ[0]=iI[0]}}else{iH.push(iJ=iI)}}var iN=-Infinity,iK;for(var iO=iH.length-1,iL=0,iJ=iH[iO],iI;iL<=iO;iJ=iI,++iL){iI=iH[iL];if((iK=iD(iJ[1],iI[0]))>iN){iN=iK,im=iI[0],ik=iJ[1]}}}iq=iu=null;return im===Infinity||iE===Infinity?[[NaN,NaN],[NaN,NaN]]:[[im,iE],[ik,iC]]}}();hu.geo.centroid=function(il){ei=eg=dR=ds=dc=dQ=dr=da=dP=dq=c9=0;hu.geo.stream(il,gn);var ik=dP,io=dq,im=c9,e=ik*ik+io*io+im*im;if(e<eK){ik=dQ,io=dr,im=da;if(eg<gt){ik=dR,io=ds,im=dc}e=ik*ik+io*io+im*im;if(e<eK){return[NaN,NaN]}}return[Math.atan2(io,ik)*hL,cl(im/Math.sqrt(e))*hL]};var ei,eg,dR,ds,dc,dQ,dr,da,dP,dq,c9;var gn={sphere:aN,point:cg,lineStart:fq,lineEnd:aL,polygonStart:function(){gn.lineStart=by},polygonEnd:function(){gn.lineStart=fq}};function cg(ik,e){ik*=N;var il=Math.cos(e*=N);gz(il*Math.cos(ik),il*Math.sin(ik),Math.sin(e))}function gz(e,il,ik){++ei;dR+=(e-dR)/ei;ds+=(il-ds)/ei;dc+=(ik-dc)/ei}function fq(){var e,ik,im;gn.point=function(ip,io){ip*=N;var iq=Math.cos(io*=N);e=iq*Math.cos(ip);ik=iq*Math.sin(ip);im=Math.sin(io);gn.point=il;gz(e,ik,im)};function il(ir,iq){ir*=N;var it=Math.cos(iq*=N),io=it*Math.cos(ir),iv=it*Math.sin(ir),iu=Math.sin(iq),ip=Math.atan2(Math.sqrt((ip=ik*iu-im*iv)*ip+(ip=im*io-e*iu)*ip+(ip=e*iv-ik*io)*ip),e*io+ik*iv+im*iu);eg+=ip;dQ+=ip*(e+(e=io));dr+=ip*(ik+(ik=iv));da+=ip*(im+(im=iu));gz(e,ik,im)}}function aL(){gn.point=cg}function by(){var ik,e,il,im,ip;gn.point=function(ir,iq){ik=ir,e=iq;gn.point=io;ir*=N;var it=Math.cos(iq*=N);il=it*Math.cos(ir);im=it*Math.sin(ir);ip=Math.sin(iq);gz(il,im,ip)};gn.lineEnd=function(){io(ik,e);gn.lineEnd=aL;gn.point=cg};function io(iw,iD){iw*=N;var iu=Math.cos(iD*=N),iz=iu*Math.cos(iw),iy=iu*Math.sin(iw),ix=Math.sin(iD),iv=im*ix-ip*iy,it=ip*iz-il*ix,ir=il*iy-im*iz,iq=Math.sqrt(iv*iv+it*it+ir*ir),iC=il*iz+im*iy+ip*ix,iB=iq&&-aj(iC)/iq,iA=Math.atan2(iq,iC);dP+=iB*iv;dq+=iB*it;c9+=iB*ir;eg+=iA;dQ+=iA*(il+(il=iz));dr+=iA*(im+(im=iy));da+=iA*(ip+(ip=ix));gz(il,im,ip)}}function fc(ik,e){function il(im,io){return im=ik(im,io),e(im[0],im[1])}if(ik.invert&&e.invert){il.invert=function(im,io){return im=e.invert(im,io),im&&ik.invert(im[0],im[1])}}return il}function an(){return true}function cx(iq,ik,iv,it,im){var iu=[],io=[];iq.forEach(function(iD){if((iG=iD.length-1)<=0){return}var iG,iF=iD[0],iE=iD[iG];if(eZ(iF,iE)){im.lineStart();for(var iC=0;iC<iG;++iC){im.point((iF=iD[iC])[0],iF[1])}im.lineEnd();return}var iB=new b(iF,iD,null,true),iA=new b(iF,null,iB,false);iB.o=iA;iu.push(iB);io.push(iA);iB=new b(iE,iD,null,false);iA=new b(iE,null,iB,true);iB.o=iA;iu.push(iB);io.push(iA)});io.sort(ik);hQ(iu);hQ(io);if(!iu.length){return}for(var ip=0,ix=iv,il=io.length;ip<il;++ip){io[ip].e=ix=!ix}var e=iu[0],iy,iw;while(1){var ir=e,iz=true;while(ir.v){if((ir=ir.n)===e){return}}iy=ir.z;im.lineStart();do{ir.v=ir.o.v=true;if(ir.e){if(iz){for(var ip=0,il=iy.length;ip<il;++ip){im.point((iw=iy[ip])[0],iw[1])}}else{it(ir.x,ir.n.x,1,im)}ir=ir.n}else{if(iz){iy=ir.p.z;for(var ip=iy.length-1;ip>=0;--ip){im.point((iw=iy[ip])[0],iw[1])}}else{it(ir.x,ir.p.x,-1,im)}ir=ir.p}ir=ir.o;iy=ir.z;iz=!iz}while(!ir.v);im.lineEnd()}}function hQ(io){if(!(im=io.length)){return}var im,il=0,ik=io[0],e;while(++il<im){ik.n=e=io[il];e.p=ik;ik=e}ik.n=e=io[0];e.p=ik}function b(ik,il,e,im){this.x=ik;this.z=il;this.o=e;this.e=im;this.v=false;this.n=this.p=null}function eo(e,im,ik,il){return function(iE,it){var ix=im(it),ir=iE.invert(il[0],il[1]);var iG={point:iB,lineStart:iz,lineEnd:iF,polygonStart:function(){iG.point=ip;iG.lineStart=iu;iG.lineEnd=iA;iC=[];iy=[]},polygonEnd:function(){iG.point=iB;iG.lineStart=iz;iG.lineEnd=iF;iC=hu.merge(iC);var iH=fT(ir,iy);if(iC.length){if(!iq){it.polygonStart(),iq=true}cx(iC,d2,iH,ik,it)}else{if(iH){if(!iq){it.polygonStart(),iq=true}it.lineStart();ik(null,null,1,it);it.lineEnd()}}if(iq){it.polygonEnd(),iq=false}iC=iy=null},sphere:function(){it.polygonStart();it.lineStart();ik(null,null,1,it);it.lineEnd();it.polygonEnd()}};function iB(iJ,iI){var iH=iE(iJ,iI);if(e(iJ=iH[0],iI=iH[1])){it.point(iJ,iI)}}function iv(iJ,iI){var iH=iE(iJ,iI);ix.point(iH[0],iH[1])}function iz(){iG.point=iv;ix.lineStart()}function iF(){iG.point=iB;ix.lineEnd()}var iC;var iD=U(),io=im(iD),iq=false,iy,iw;function ip(iJ,iI){iw.push([iJ,iI]);var iH=iE(iJ,iI);io.point(iH[0],iH[1])}function iu(){io.lineStart();iw=[]}function iA(){ip(iw[0][0],iw[0][1]);io.lineEnd();var iJ=io.clean(),iL=iD.buffer(),iK,iM=iL.length;iw.pop();iy.push(iw);iw=null;if(!iM){return}if(iJ&1){iK=iL[0];var iM=iK.length-1,iI=-1,iH;if(iM>0){if(!iq){it.polygonStart(),iq=true}it.lineStart();while(++iI<iM){it.point((iH=iK[iI])[0],iH[1])}it.lineEnd()}return}if(iM>1&&iJ&2){iL.push(iL.pop().concat(iL.shift()))}iC.push(iL.filter(eU))}return iG}}function eU(e){return e.length>1}function U(){var ik=[],e;return{lineStart:function(){ik.push(e=[])},point:function(im,il){e.push([im,il])},lineEnd:aN,buffer:function(){var il=ik;ik=[];e=null;return il},rejoin:function(){if(ik.length>1){ik.push(ik.pop().concat(ik.shift()))}}}}function d2(ik,e){return((ik=ik.x)[0]<0?ik[1]-ew-gt:ew-ik[1])-((e=e.x)[0]<0?e[1]-ew-gt:ew-e[1])}var m=eo(an,eL,di,[-gk,-gk/2]);function eL(io){var ik=NaN,e=NaN,im=NaN,il;return{lineStart:function(){io.lineStart();il=1},point:function(iq,ip){var it=iq>0?gk:-gk,ir=cM(iq-ik);if(cM(ir-gk)<gt){io.point(ik,e=(e+ip)/2>0?ew:-ew);io.point(im,e);io.lineEnd();io.lineStart();io.point(it,e);io.point(iq,e);il=0}else{if(im!==it&&ir>=gk){if(cM(ik-im)<gt){ik-=im*gt}if(cM(iq-it)<gt){iq-=it*gt}e=z(ik,e,iq,ip);io.point(im,e);io.lineEnd();io.lineStart();io.point(it,e);il=0}}io.point(ik=iq,e=ip);im=it},lineEnd:function(){io.lineEnd();ik=e=NaN},clean:function(){return 2-il}}}function z(ip,io,im,il){var ik,e,iq=Math.sin(ip-im);return cM(iq)>gt?Math.atan((Math.sin(io)*(e=Math.cos(il))*Math.sin(im)-Math.sin(il)*(ik=Math.cos(io))*Math.sin(ip))/(ik*e*iq)):(io+il)/2}function di(ip,io,im,il){var e;if(ip==null){e=im*ew;il.point(-gk,e);il.point(0,e);il.point(gk,e);il.point(gk,0);il.point(gk,-e);il.point(0,-e);il.point(-gk,-e);il.point(-gk,0);il.point(-gk,e)}else{if(cM(ip[0]-io[0])>gt){var ik=ip[0]<io[0]?gk:-gk;e=im*ik/2;il.point(-ik,e);il.point(0,e);il.point(ik,e)}else{il.point(io[0],io[1])}}}function fT(iE,iA){var iM=iE[0],iN=iE[1],e=[Math.sin(iM),-Math.cos(iM),0],iz=0,iK=0;fW.reset();for(var iJ=0,iB=iA.length;iJ<iB;++iJ){var it=iA[iJ],iD=it.length;if(!iD){continue}var ip=it[0],il=ip[0],iL=ip[1]/2+gk/4,ir=Math.sin(iL),ik=Math.cos(iL),iI=1;while(true){if(iI===iD){iI=0}iE=it[iI];var iC=iE[0],iy=iE[1]/2+gk/4,im=Math.sin(iy),iH=Math.cos(iy),iG=iC-il,iu=iG>=0?1:-1,iw=iu*iG,io=iw>gk,iF=ir*im;fW.add(Math.atan2(iF*iu*Math.sin(iw),ik*iH+iF*Math.cos(iw)));iz+=io?iG+iu*ge:iG;if(io^il>=iM^iC>=iM){var iv=c4(aB(ip),aB(iE));fr(iv);var ix=c4(e,iv);fr(ix);var iq=(io^iG>=0?-1:1)*cl(ix[2]);if(iN>iq||iN===iq&&(iv[0]||iv[1])){iK+=io^iG>=0?1:-1}}if(!iI++){break}il=iC,ir=im,ik=iH,ip=iE}}return(iz<-gt||iz<gt&&fW<0)^iK&1}function aR(io){var ip=Math.cos(io),im=ip>0,iq=cM(ip)>gt,ir=cb(io,6*N);return eo(il,it,ir,im?[0,-io]:[-gk,io-gk]);function il(iv,iu){return Math.cos(iv)*Math.cos(iu)>ip}function it(iz){var iy,ix,iu,iw,iv;return{lineStart:function(){iw=iu=false;iv=1},point:function(iB,iA){var iF=[iB,iA],iE,iC=il(iB,iA),iG=im?iC?0:e(iB,iA):iC?e(iB+(iB<0?gk:-gk),iA):0;if(!iy&&(iw=iu=iC)){iz.lineStart()}if(iC!==iu){iE=ik(iy,iF);if(eZ(iy,iE)||eZ(iF,iE)){iF[0]+=gt;iF[1]+=gt;iC=il(iF[0],iF[1])}}if(iC!==iu){iv=0;if(iC){iz.lineStart();iE=ik(iF,iy);iz.point(iE[0],iE[1])}else{iE=ik(iy,iF);iz.point(iE[0],iE[1]);iz.lineEnd()}iy=iE}else{if(iq&&iy&&im^iC){var iD;if(!(iG&ix)&&(iD=ik(iF,iy,true))){iv=0;if(im){iz.lineStart();iz.point(iD[0][0],iD[0][1]);iz.point(iD[1][0],iD[1][1]);iz.lineEnd()}else{iz.point(iD[1][0],iD[1][1]);iz.lineEnd();iz.lineStart();iz.point(iD[0][0],iD[0][1])}}}}if(iC&&(!iy||!eZ(iy,iF))){iz.point(iF[0],iF[1])}iy=iF,iu=iC,ix=iG},lineEnd:function(){if(iu){iz.lineEnd()}iy=null},clean:function(){return iv|(iw&&iu)<<1}}}function ik(iV,iU,iy){var iw=aB(iV),iu=aB(iU);var iD=[1,0,0],iA=c4(iw,iu),iG=aE(iA,iA),iT=iA[0],iM=iG-iT*iT;if(!iM){return !iy&&iV}var iP=ip*iG/iM,iO=-ip*iT/iM,iW=c4(iD,iA),iN=gl(iD,iP),iL=gl(iA,iO);cH(iN,iL);var iI=iW,iH=aE(iN,iI),iz=aE(iI,iI),iF=iH*iH-iz*(aE(iN,iN)-1);if(iF<0){return}var iJ=Math.sqrt(iF),iK=gl(iI,(-iH-iJ)/iz);cH(iK,iN);iK=ig(iK);if(!iy){return iK}var ix=iV[0],iv=iU[0],iR=iV[1],iQ=iU[1],iC;if(iv<ix){iC=ix,ix=iv,iv=iC}var iB=iv-ix,iX=cM(iB-gk)<gt,iS=iX||iB<gt;if(!iX&&iQ<iR){iC=iR,iR=iQ,iQ=iC}if(iS?iX?iR+iQ>0^iK[1]<(cM(iK[0]-ix)<gt?iR:iQ):iR<=iK[1]&&iK[1]<=iQ:iB>gk^(ix<=iK[0]&&iK[0]<=iv)){var iE=gl(iI,(-iH+iJ)/iz);cH(iE,iN);return[iK,ig(iE)]}}function e(iv,iu){var ix=im?io:gk-io,iw=0;if(iv<-ix){iw|=1}else{if(iv>ix){iw|=2}}if(iu<-ix){iw|=4}else{if(iu>ix){iw|=8}}return iw}}function aq(ik,im,e,il){return function(iA){var iw=iA.a,iv=iA.b,ip=iw.x,iz=iw.y,iu=iv.x,it=iv.y,ir=0,iq=1,iy=iu-ip,ix=it-iz,io;io=ik-ip;if(!iy&&io>0){return}io/=iy;if(iy<0){if(io<ir){return}if(io<iq){iq=io}}else{if(iy>0){if(io>iq){return}if(io>ir){ir=io}}}io=e-ip;if(!iy&&io<0){return}io/=iy;if(iy<0){if(io>iq){return}if(io>ir){ir=io}}else{if(iy>0){if(io<ir){return}if(io<iq){iq=io}}}io=im-iz;if(!ix&&io>0){return}io/=ix;if(ix<0){if(io<ir){return}if(io<iq){iq=io}}else{if(ix>0){if(io>iq){return}if(io>ir){ir=io}}}io=il-iz;if(!ix&&io<0){return}io/=ix;if(ix<0){if(io>iq){return}if(io>ir){ir=io}}else{if(ix>0){if(io<ir){return}if(io<iq){iq=io}}}if(ir>0){iA.a={x:ip+ir*iy,y:iz+ir*ix}}if(iq<1){iA.b={x:ip+iq*iy,y:iz+iq*ix}}return iA}}var cP=1000000000;hu.geo.clipExtent=function(){var il,ip,ik,im,iq,io,e={stream:function(ir){if(iq){iq.valid=false}iq=io(ir);iq.valid=true;return iq},extent:function(ir){if(!arguments.length){return[[il,ip],[ik,im]]}io=el(il=+ir[0][0],ip=+ir[0][1],ik=+ir[1][0],im=+ir[1][1]);if(iq){iq.valid=false,iq=null}return e}};return e.extent([[0,0],[960,500]])};function el(ik,io,e,il){return function(ix){var it=ix,iC=U(),iu=aq(ik,io,e,il),iK,iD,iA;var iO={point:iJ,lineStart:iG,lineEnd:iM,polygonStart:function(){ix=iC;iK=[];iD=[];iL=true},polygonEnd:function(){ix=it;iK=hu.merge(iK);var iQ=iF([ik,il]),iP=iL&&iQ,iR=iK.length;if(iP||iR){ix.polygonStart();if(iP){ix.lineStart();iB(null,null,1,ix);ix.lineEnd()}if(iR){cx(iK,ip,iQ,iB,ix)}ix.polygonEnd()}iK=iD=iA=null}};function iF(iP){var iX=0,iQ=iD.length,iV=iP[1];for(var iT=0;iT<iQ;++iT){for(var iS=1,iY=iD[iT],iR=iY.length,iW=iY[0],iU;iS<iR;++iS){iU=iY[iS];if(iW[1]<=iV){if(iU[1]>iV&&e6(iW,iU,iP)>0){++iX}}else{if(iU[1]<=iV&&e6(iW,iU,iP)<0){--iX}}iW=iU}}return iX!==0}function iB(iU,iT,iS,iR){var iQ=0,iP=0;if(iU==null||(iQ=im(iU,iS))!==(iP=im(iT,iS))||iq(iU,iT)<0^iS>0){do{iR.point(iQ===0||iQ===3?ik:e,iQ>1?il:io)}while((iQ=(iQ+iS+4)%4)!==iP)}else{iR.point(iT[0],iT[1])}}function iE(iP,iQ){return ik<=iP&&iP<=e&&io<=iQ&&iQ<=il}function iJ(iP,iQ){if(iE(iP,iQ)){ix.point(iP,iQ)}}var iI,iy,iH,iN,iw,iv,iz,iL;function iG(){iO.point=ir;if(iD){iD.push(iA=[])}iz=true;iv=false;iN=iw=NaN}function iM(){if(iK){ir(iI,iy);if(iH&&iv){iC.rejoin()}iK.push(iC.buffer())}iO.point=iJ;if(iv){ix.lineEnd()}}function ir(iP,iS){iP=Math.max(-cP,Math.min(cP,iP));iS=Math.max(-cP,Math.min(cP,iS));var iR=iE(iP,iS);if(iD){iA.push([iP,iS])}if(iz){iI=iP,iy=iS,iH=iR;iz=false;if(iR){ix.lineStart();ix.point(iP,iS)}}else{if(iR&&iv){ix.point(iP,iS)}else{var iQ={a:{x:iN,y:iw},b:{x:iP,y:iS}};if(iu(iQ)){if(!iv){ix.lineStart();ix.point(iQ.a.x,iQ.a.y)}ix.point(iQ.b.x,iQ.b.y);if(!iR){ix.lineEnd()}iL=false}else{if(iR){ix.lineStart();ix.point(iP,iS);iL=false}}}}iN=iP,iw=iS,iv=iR}return iO};function im(it,ir){return cM(it[0]-ik)<gt?ir>0?0:3:cM(it[0]-e)<gt?ir>0?2:1:cM(it[1]-io)<gt?ir>0?1:0:ir>0?3:2}function ip(it,ir){return iq(it.x,ir.x)}function iq(iv,it){var iu=im(iv,1),ir=im(it,1);return iu!==ir?iu-ir:iu===0?it[1]-iv[1]:iu===1?iv[0]-it[0]:iu===2?iv[1]-it[1]:it[0]-iv[0]}}function cd(im){var il=0,ik=gk/3,e=fo(im),io=e(il,ik);io.parallels=function(ip){if(!arguments.length){return[il/gk*180,ik/gk*180]}return e(il=ip[0]*gk/180,ik=ip[1]*gk/180)};return io}function R(ik,e){var io=Math.sin(ik),iq=(io+Math.sin(e))/2,ip=1+io*(2*iq-io),im=Math.sqrt(ip)/iq;function il(it,ir){var iu=Math.sqrt(ip-2*iq*Math.sin(ir))/iq;return[iu*Math.sin(it*=iq),im-iu*Math.cos(it)]}il.invert=function(ir,iu){var it=im-iu;return[Math.atan2(ir,it)/iq,cl((ip-(ir*ir+it*it)*iq*iq)/(2*iq))]};return il}(hu.geo.conicEqualArea=function(){return cd(R)}).raw=R;hu.geo.albers=function(){return hu.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};hu.geo.albersUsa=function(){var ik=hu.geo.albers();var ip=hu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var il=hu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var ir,e={point:function(iu,iv){ir=[iu,iv]}},io,iq,im;function it(iv){var iu=iv[0],iw=iv[1];ir=null;(io(iu,iw),ir)||(iq(iu,iw),ir)||im(iu,iw);return ir}it.invert=function(ix){var iv=ik.scale(),iw=ik.translate(),iu=(ix[0]-iw[0])/iv,iy=(ix[1]-iw[1])/iv;return(iy>=0.12&&iy<0.234&&iu>=-0.425&&iu<-0.214?ip:iy>=0.166&&iy<0.234&&iu>=-0.214&&iu<-0.115?il:ik).invert(ix)};it.stream=function(iw){var iv=ik.stream(iw),ix=ip.stream(iw),iu=il.stream(iw);return{point:function(iy,iz){iv.point(iy,iz);ix.point(iy,iz);iu.point(iy,iz)},sphere:function(){iv.sphere();ix.sphere();iu.sphere()},lineStart:function(){iv.lineStart();ix.lineStart();iu.lineStart()},lineEnd:function(){iv.lineEnd();ix.lineEnd();iu.lineEnd()},polygonStart:function(){iv.polygonStart();ix.polygonStart();iu.polygonStart()},polygonEnd:function(){iv.polygonEnd();ix.polygonEnd();iu.polygonEnd()}}};it.precision=function(iu){if(!arguments.length){return ik.precision()}ik.precision(iu);ip.precision(iu);il.precision(iu);return it};it.scale=function(iu){if(!arguments.length){return ik.scale()}ik.scale(iu);ip.scale(iu*0.35);il.scale(iu);return it.translate(ik.translate())};it.translate=function(iw){if(!arguments.length){return ik.translate()}var iv=ik.scale(),iu=+iw[0],ix=+iw[1];io=ik.translate(iw).clipExtent([[iu-0.455*iv,ix-0.238*iv],[iu+0.455*iv,ix+0.238*iv]]).stream(e).point;iq=ip.translate([iu-0.307*iv,ix+0.201*iv]).clipExtent([[iu-0.425*iv+gt,ix+0.12*iv+gt],[iu-0.214*iv-gt,ix+0.234*iv-gt]]).stream(e).point;im=il.translate([iu-0.205*iv,ix+0.212*iv]).clipExtent([[iu-0.214*iv+gt,ix+0.166*iv+gt],[iu-0.115*iv-gt,ix+0.234*iv-gt]]).stream(e).point;return it};return it.scale(1070)};var fU,F,dI={point:aN,lineStart:aN,lineEnd:aN,polygonStart:function(){F=0;dI.lineStart=cR},polygonEnd:function(){dI.lineStart=dI.lineEnd=dI.point=aN;fU+=cM(F/2)}};function cR(){var im,e,ik,il;dI.point=function(ip,iq){dI.point=io;im=ik=ip,e=il=iq};function io(ip,iq){F+=il*ip-ik*iq;ik=ip,il=iq}dI.lineEnd=function(){io(im,e)}}var eS,ev,eQ,eu;var aD={point:cZ,lineStart:aN,lineEnd:aN,polygonStart:aN,polygonEnd:aN};function cZ(e,ik){if(e<eS){eS=e}if(e>eQ){eQ=e}if(ik<ev){ev=ik}if(ik>eu){eu=ik}}function cp(){var il=he(4.5),ik=[];var ir={point:e,lineStart:function(){ir.point=iq},lineEnd:ip,polygonStart:function(){ir.lineEnd=im},polygonEnd:function(){ir.lineEnd=ip;ir.point=e},pointRadius:function(it){il=he(it);return ir},result:function(){if(ik.length){var it=ik.join("");ik=[];return it}}};function e(it,iu){ik.push("M",it,",",iu,il)}function iq(it,iu){ik.push("M",it,",",iu);ir.point=io}function io(it,iu){ik.push("L",it,",",iu)}function ip(){ir.point=e}function im(){ik.push("Z")}return ir}function he(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var hd={point:cV,lineStart:fY,lineEnd:cU,polygonStart:function(){hd.lineStart=b6},polygonEnd:function(){hd.point=cV;hd.lineStart=fY;hd.lineEnd=cU}};function cV(e,ik){dR+=e;ds+=ik;++dc}function fY(){var e,ik;hd.point=function(im,io){hd.point=il;cV(e=im,ik=io)};function il(im,ir){var ip=im-e,io=ir-ik,iq=Math.sqrt(ip*ip+io*io);dQ+=iq*(e+im)/2;dr+=iq*(ik+ir)/2;da+=iq;cV(e=im,ik=ir)}}function cU(){hd.point=cV}function b6(){var im,e,ik,il;hd.point=function(ip,iq){hd.point=io;cV(im=ik=ip,e=il=iq)};function io(ip,iu){var ir=ip-ik,iq=iu-il,it=Math.sqrt(ir*ir+iq*iq);dQ+=it*(ik+ip)/2;dr+=it*(il+iu)/2;da+=it;it=il*ip-ik*iu;dP+=it*(ik+ip);dq+=it*(il+iu);c9+=it*3;cV(ik=ip,il=iu)}hd.lineEnd=function(){io(im,e)}}function cK(ik){var io=4.5;var ir={point:e,lineStart:function(){ir.point=iq},lineEnd:ip,polygonStart:function(){ir.lineEnd=il},polygonEnd:function(){ir.lineEnd=ip;ir.point=e},pointRadius:function(it){io=it;return ir},result:aN};function e(it,iu){ik.moveTo(it+io,iu);ik.arc(it,iu,io,0,ge)}function iq(it,iu){ik.moveTo(it,iu);ir.point=im}function im(it,iu){ik.lineTo(it,iu)}function ip(){ir.point=e}function il(){ik.closePath()}return ir}function fV(iq){var io=0.5,ip=Math.cos(30*N),ir=16;function il(it){return(ir?im:e)(it)}function e(it){return eN(it,function(iu,iv){iu=iq(iu,iv);it.point(iu[0],iu[1])})}function im(iz){var iE,iK,iJ,iA,iN,iC,iu,iv,iM,iw,iO,iB,iF;var ix={point:iI,lineStart:iD,lineEnd:iL,polygonStart:function(){iz.polygonStart();ix.lineStart=iy},polygonEnd:function(){iz.polygonEnd();ix.lineStart=iD}};function iI(iP,iQ){iP=iq(iP,iQ);iz.point(iP[0],iP[1])}function iD(){iM=NaN;ix.point=it;iz.lineStart()}function it(iQ,iP){var iS=aB([iQ,iP]),iR=iq(iQ,iP);ik(iM,iw,iv,iO,iB,iF,iM=iR[0],iw=iR[1],iv=iQ,iO=iS[0],iB=iS[1],iF=iS[2],ir,iz);iz.point(iM,iw)}function iL(){ix.point=iI;iz.lineEnd()}function iy(){iD();ix.point=iH;ix.lineEnd=iG}function iH(iQ,iP){it(iE=iQ,iK=iP),iJ=iM,iA=iw,iN=iO,iC=iB,iu=iF;ix.point=it}function iG(){ik(iM,iw,iv,iO,iB,iF,iJ,iA,iE,iN,iC,iu,ir,iz);ix.lineEnd=iL;iL()}return ix}function ik(iO,iz,iv,iV,iC,iK,iN,iy,iu,iT,iB,iI,iS,iA){var iG=iN-iO,iF=iy-iz,iU=iG*iG+iF*iF;if(iU>4*io&&iS--){var iR=iV+iT,iQ=iC+iB,iP=iK+iI,iJ=Math.sqrt(iR*iR+iQ*iQ+iP*iP),iM=Math.asin(iP/=iJ),it=cM(cM(iP)-1)<gt||cM(iv-iu)<gt?(iv+iu)/2:Math.atan2(iQ,iR),iH=iq(it,iM),iL=iH[0],ix=iH[1],iw=iL-iO,iE=ix-iz,iD=iF*iw-iG*iE;if(iD*iD/iU>io||cM((iG*iw+iF*iE)/iU-0.5)>0.3||iV*iT+iC*iB+iK*iI<ip){ik(iO,iz,iv,iV,iC,iK,iL,ix,it,iR/=iJ,iQ/=iJ,iP,iS,iA);iA.point(iL,ix);ik(iL,ix,it,iR,iQ,iP,iN,iy,iu,iT,iB,iI,iS,iA)}}}il.precision=function(it){if(!arguments.length){return Math.sqrt(io)}ir=(io=it*it)>0&&16;return il};return il}hu.geo.path=function(){var iq=4.5,ik,im,io,e,il;function ir(it){if(it){if(typeof iq==="function"){e.pointRadius(+iq.apply(this,arguments))}if(!il||!il.valid){il=io(e)}hu.geo.stream(it,il)}return e.result()}ir.area=function(it){fU=0;hu.geo.stream(it,io(dI));return fU};ir.centroid=function(it){dR=ds=dc=dQ=dr=da=dP=dq=c9=0;hu.geo.stream(it,io(hd));return c9?[dP/c9,dq/c9]:da?[dQ/da,dr/da]:dc?[dR/dc,ds/dc]:[NaN,NaN]};ir.bounds=function(it){eQ=eu=-(eS=ev=Infinity);hu.geo.stream(it,io(aD));return[[eS,ev],[eQ,eu]]};ir.projection=function(it){if(!arguments.length){return ik}io=(ik=it)?it.stream||hn(it):gr;return ip()};ir.context=function(it){if(!arguments.length){return im}e=(im=it)==null?new cp():new cK(it);if(typeof iq!=="function"){e.pointRadius(iq)}return ip()};ir.pointRadius=function(it){if(!arguments.length){return iq}iq=typeof it==="function"?it:(e.pointRadius(+it),+it);return ir};function ip(){il=null;return ir}return ir.projection(hu.geo.albersUsa()).context(null)};function hn(ik){var e=fV(function(il,im){return ik([il*hL,im*hL])});return function(il){return cn(e(il))}}hu.geo.transform=function(e){return{stream:function(im){var il=new eh(im);for(var ik in e){il[ik]=e[ik]}return il}}};function eh(e){this.stream=e}eh.prototype={point:function(e,ik){this.stream.point(e,ik)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function eN(ik,e){return{point:e,sphere:function(){ik.sphere()},lineStart:function(){ik.lineStart()},lineEnd:function(){ik.lineEnd()},polygonStart:function(){ik.polygonStart()},polygonEnd:function(){ik.polygonEnd()}}}hu.geo.projection=fH;hu.geo.projectionMutator=fo;function fH(e){return fo(function(){return e})()}function fo(iz){var im,iE,ir,iB=fV(function(iJ,iK){iJ=im(iJ,iK);return[iJ[0]*iD+ip,il-iJ[1]*iD]}),iD=150,ix=480,iv=250,iC=0,iw=0,it=0,io=0,iA=0,ip,il,iI=m,iF=gr,e=null,ik=null,iq;function iH(iJ){iJ=ir(iJ[0]*N,iJ[1]*N);return[iJ[0]*iD+ip,il-iJ[1]*iD]}function iy(iJ){iJ=ir.invert((iJ[0]-ip)/iD,(il-iJ[1])/iD);return iJ&&[iJ[0]*hL,iJ[1]*hL]}iH.stream=function(iJ){if(iq){iq.valid=false}iq=cn(iI(iE,iB(iF(iJ))));iq.valid=true;return iq};iH.clipAngle=function(iJ){if(!arguments.length){return e}iI=iJ==null?(e=iJ,m):aR((e=+iJ)*N);return iu()};iH.clipExtent=function(iJ){if(!arguments.length){return ik}ik=iJ;iF=iJ?el(iJ[0][0],iJ[0][1],iJ[1][0],iJ[1][1]):gr;return iu()};iH.scale=function(iJ){if(!arguments.length){return iD}iD=+iJ;return iG()};iH.translate=function(iJ){if(!arguments.length){return[ix,iv]}ix=+iJ[0];iv=+iJ[1];return iG()};iH.center=function(iJ){if(!arguments.length){return[iC*hL,iw*hL]}iC=iJ[0]%360*N;iw=iJ[1]%360*N;return iG()};iH.rotate=function(iJ){if(!arguments.length){return[it*hL,io*hL,iA*hL]}it=iJ[0]%360*N;io=iJ[1]%360*N;iA=iJ.length>2?iJ[2]%360*N:0;return iG()};hu.rebind(iH,iB,"precision");function iG(){ir=fc(iE=dN(it,io,iA),im);var iJ=im(iC,iw);ip=ix-iJ[0]*iD;il=iv+iJ[1]*iD;return iu()}function iu(){if(iq){iq.valid=false,iq=null}return iH}return function(){im=iz.apply(this,arguments);iH.invert=im.invert&&iy;return iG()}}function cn(e){return eN(e,function(ik,il){e.point(ik*N,il*N)})}function bG(ik,e){return[ik,e]}(hu.geo.equirectangular=function(){return fH(bG)}).raw=bG.invert=bG;hu.geo.rotation=function(ik){ik=dN(ik[0]%360*N,ik[1]*N,ik.length>2?ik[2]*N:0);function e(il){il=ik(il[0]*N,il[1]*N);return il[0]*=hL,il[1]*=hL,il}e.invert=function(il){il=ik.invert(il[0]*N,il[1]*N);return il[0]*=hL,il[1]*=hL,il};return e};function bP(ik,e){return[ik>gk?ik-ge:ik<-gk?ik+ge:ik,e]}bP.invert=bG;function dN(il,ik,e){return il?ik||e?fc(e7(il),b0(ik,e)):e7(il):ik||e?b0(ik,e):bP}function g5(e){return function(il,ik){return il+=e,[il>gk?il-ge:il<-gk?il+ge:il,ik]}}function e7(ik){var e=g5(ik);e.invert=g5(-ik);return e}function b0(ip,ik){var io=Math.cos(ip),iq=Math.sin(ip),e=Math.cos(ik),il=Math.sin(ik);function im(iu,it){var iw=Math.cos(it),ir=Math.cos(iu)*iw,iy=Math.sin(iu)*iw,ix=Math.sin(it),iv=ix*io+ir*iq;return[Math.atan2(iy*e-iv*il,ir*io-ix*iq),cl(iv*e+iy*il)]}im.invert=function(iu,it){var iw=Math.cos(it),ir=Math.cos(iu)*iw,iy=Math.sin(iu)*iw,ix=Math.sin(it),iv=ix*e-iy*il;return[Math.atan2(iy*e+ix*il,ir*io+iv*iq),cl(iv*io-ir*iq)]};return im}hu.geo.circle=function(){var ik=[0,0],io,e=6,il;function im(){var ip=typeof ik==="function"?ik.apply(this,arguments):ik,ir=dN(-ip[0]*N,-ip[1]*N,0).invert,iq=[];il(null,null,1,{point:function(it,iu){iq.push(it=ir(it,iu));it[0]*=hL,it[1]*=hL}});return{type:"Polygon",coordinates:[iq]}}im.origin=function(ip){if(!arguments.length){return ik}ik=ip;return im};im.angle=function(ip){if(!arguments.length){return io}il=cb((io=+ip)*N,e*N);return im};im.precision=function(ip){if(!arguments.length){return e}il=cb(io*N,(e=+ip)*N);return im};return im.angle(90)};function cb(e,ik){var im=Math.cos(e),il=Math.sin(e);return function(iv,iu,it,ir){var iq=it*ik;if(iv!=null){iv=hY(im,iv);iu=hY(im,iu);if(it>0?iv<iu:iv>iu){iv+=it*ge}}else{iv=e+it*ge;iu=e-0.5*iq}for(var io,ip=iv;it>0?ip>iu:ip<iu;ip-=iq){ir.point((io=ig([im,-il*Math.cos(ip),-il*Math.sin(ip)]))[0],io[1])}}}function hY(il,e){var ik=aB(e);ik[0]-=il;fr(ik);var im=aj(-ik[1]);return((-ik[2]<0?-im:im)+2*Math.PI-gt)%(2*Math.PI)}hu.geo.distance=function(ir,iq){var it=(iq[0]-ir[0])*N,iv=ir[1]*N,iu=iq[1]*N,io=Math.sin(it),ik=Math.cos(it),ip=Math.sin(iv),il=Math.cos(iv),im=Math.sin(iu),e=Math.cos(iu),iw;return Math.atan2(Math.sqrt((iw=e*io)*iw+(iw=il*im-ip*e*ik)*iw),ip*im+il*e*ik)};hu.geo.graticule=function(){var iz,iB,iC,iD,im,io,ip,ir,ix=10,iw=ix,it=90,iq=360,iv,iu,il,ik,iy=2.5;function iA(){return{type:"MultiLineString",coordinates:e()}}function e(){return hu.range(Math.ceil(iD/it)*it,iC,it).map(il).concat(hu.range(Math.ceil(ir/iq)*iq,ip,iq).map(ik)).concat(hu.range(Math.ceil(iB/ix)*ix,iz,ix).filter(function(iE){return cM(iE%it)>gt}).map(iv)).concat(hu.range(Math.ceil(io/iw)*iw,im,iw).filter(function(iE){return cM(iE%iq)>gt}).map(iu))}iA.lines=function(){return e().map(function(iE){return{type:"LineString",coordinates:iE}})};iA.outline=function(){return{type:"Polygon",coordinates:[il(iD).concat(ik(ip).slice(1),il(iC).reverse().slice(1),ik(ir).reverse().slice(1))]}};iA.extent=function(iE){if(!arguments.length){return iA.minorExtent()}return iA.majorExtent(iE).minorExtent(iE)};iA.majorExtent=function(iE){if(!arguments.length){return[[iD,ir],[iC,ip]]}iD=+iE[0][0],iC=+iE[1][0];ir=+iE[0][1],ip=+iE[1][1];if(iD>iC){iE=iD,iD=iC,iC=iE}if(ir>ip){iE=ir,ir=ip,ip=iE}return iA.precision(iy)};iA.minorExtent=function(iE){if(!arguments.length){return[[iB,io],[iz,im]]}iB=+iE[0][0],iz=+iE[1][0];io=+iE[0][1],im=+iE[1][1];if(iB>iz){iE=iB,iB=iz,iz=iE}if(io>im){iE=io,io=im,im=iE}return iA.precision(iy)};iA.step=function(iE){if(!arguments.length){return iA.minorStep()}return iA.majorStep(iE).minorStep(iE)};iA.majorStep=function(iE){if(!arguments.length){return[it,iq]}it=+iE[0],iq=+iE[1];return iA};iA.minorStep=function(iE){if(!arguments.length){return[ix,iw]}ix=+iE[0],iw=+iE[1];return iA};iA.precision=function(iE){if(!arguments.length){return iy}iy=+iE;iv=aQ(io,im,90);iu=aP(iB,iz,iy);il=aQ(ir,ip,90);ik=aP(iD,iC,iy);return iA};return iA.majorExtent([[-180,-90+gt],[180,90-gt]]).minorExtent([[-180,-80-gt],[180,80+gt]])};function aQ(il,ik,e){var im=hu.range(il,ik-gt,e).concat(ik);return function(io){return im.map(function(ip){return[io,ip]})}}function aP(im,il,ik){var e=hu.range(im,il-gt,ik).concat(il);return function(io){return e.map(function(ip){return[ip,io]})}}function hP(e){return e.source}function hW(e){return e.target}hu.geo.greatArc=function(){var il=hP,ik,im=hW,io;function e(){return{type:"LineString",coordinates:[ik||il.apply(this,arguments),io||im.apply(this,arguments)]}}e.distance=function(){return hu.geo.distance(ik||il.apply(this,arguments),io||im.apply(this,arguments))};e.source=function(ip){if(!arguments.length){return il}il=ip,ik=typeof ip==="function"?null:ip;return e};e.target=function(ip){if(!arguments.length){return im}im=ip,io=typeof ip==="function"?null:ip;return e};e.precision=function(){return arguments.length?e:0};return e};hu.geo.interpolate=function(e,ik){return f(e[0]*N,e[1]*N,ik[0]*N,ik[1]*N)};function f(im,iz,il,ix){var iq=Math.cos(iz),iy=Math.sin(iz),io=Math.cos(ix),iw=Math.sin(ix),it=iq*Math.cos(im),ik=iq*Math.sin(im),ir=io*Math.cos(il),e=io*Math.sin(il),iv=2*Math.asin(Math.sqrt(aK(ix-iz)+iq*io*aK(il-im))),ip=1/Math.sin(iv);var iu=iv?function(iC){var iF=Math.sin(iC*=iv)*ip,iB=Math.sin(iv-iC)*ip,iA=iB*it+iF*ir,iE=iB*ik+iF*e,iD=iB*iy+iF*iw;return[Math.atan2(iE,iA)*hL,Math.atan2(iD,Math.sqrt(iA*iA+iE*iE))*hL]}:function(){return[im*hL,iz*hL]};iu.distance=iv;return iu}hu.geo.length=function(e){d0=0;hu.geo.stream(e,f3);return d0};var d0;var f3={sphere:aN,point:aN,lineStart:hS,lineEnd:aN,polygonStart:aN,polygonEnd:aN};function hS(){var ik,il,e;f3.point=function(ip,io){ik=ip*N,il=Math.sin(io*=N),e=Math.cos(io);f3.point=im};f3.lineEnd=function(){f3.point=f3.lineEnd=aN};function im(ip,io){var it=Math.sin(io*=N),iu=Math.cos(io),iq=cM((ip*=N)-ik),ir=Math.cos(iq);d0+=Math.atan2(Math.sqrt((iq=iu*Math.sin(iq))*iq+(iq=e*it-il*iu*ir)*iq),il*it+e*iu*ir);ik=ip,il=it,e=iu}}function eF(il,ik){function e(io,im){var ir=Math.cos(io),iq=Math.cos(im),ip=il(ir*iq);return[ip*iq*Math.sin(io),ip*Math.sin(im)]}e.invert=function(im,it){var iq=Math.sqrt(im*im+it*it),ir=ik(iq),io=Math.sin(ir),ip=Math.cos(ir);return[Math.atan2(im*io,iq*ip),Math.asin(iq&&it*io/iq)]};return e}var bC=eF(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(hu.geo.azimuthalEqualArea=function(){return fH(bC)}).raw=bC;var bO=eF(function(e){var ik=Math.acos(e);return ik&&ik/Math.sin(ik)},gr);(hu.geo.azimuthalEquidistant=function(){return fH(bO)}).raw=bO;function fQ(il,ik){var e=Math.cos(il),io=function(ir){return Math.tan(gk/4+ir/2)},iq=il===ik?Math.sin(il):Math.log(e/Math.cos(ik))/Math.log(io(ik)/io(il)),ip=e*Math.pow(io(il),iq)/iq;if(!iq){return aZ}function im(it,ir){if(ip>0){if(ir<-ew+gt){ir=-ew+gt}}else{if(ir>ew-gt){ir=ew-gt}}var iu=ip/Math.pow(io(ir),iq);return[iu*Math.sin(iq*it),ip-iu*Math.cos(iq*it)]}im.invert=function(ir,iv){var iu=ip-iv,it=cf(iq)*Math.sqrt(ir*ir+iu*iu);return[Math.atan2(ir,iu)/iq,2*Math.atan(Math.pow(ip/it,1/iq))-ew]};return im}(hu.geo.conicConformal=function(){return cd(fQ)}).raw=fQ;function hH(il,ik){var e=Math.cos(il),ip=il===ik?Math.sin(il):(e-Math.cos(ik))/(ik-il),io=e/ip+il;if(cM(ip)<gt){return bG}function im(ir,iq){var it=io-iq;return[it*Math.sin(ip*ir),io-it*Math.cos(ip*ir)]}im.invert=function(iq,it){var ir=io-it;return[Math.atan2(iq,ir)/ip,io-cf(ip)*Math.sqrt(iq*iq+ir*ir)]};return im}(hu.geo.conicEquidistant=function(){return cd(hH)}).raw=hH;var eM=eF(function(e){return 1/e},Math.atan);(hu.geo.gnomonic=function(){return fH(eM)}).raw=eM;function aZ(ik,e){return[ik,Math.log(Math.tan(gk/4+e/2))]}aZ.invert=function(e,ik){return[e,2*Math.atan(Math.exp(ik))-ew]};function db(ip){var e=fH(ip),io=e.scale,im=e.translate,ik=e.clipExtent,il;e.scale=function(){var iq=io.apply(e,arguments);return iq===e?il?e.clipExtent(null):e:iq};e.translate=function(){var iq=im.apply(e,arguments);return iq===e?il?e.clipExtent(null):e:iq};e.clipExtent=function(it){var ir=ik.apply(e,arguments);if(ir===e){if(il=it==null){var iq=gk*io(),iu=im();ik([[iu[0]-iq,iu[1]-iq],[iu[0]+iq,iu[1]+iq]])}}else{if(il){ir=null}}return ir};return e.clipExtent(null)}(hu.geo.mercator=function(){return db(aZ)}).raw=aZ;var f5=eF(function(){return 1},Math.asin);(hu.geo.orthographic=function(){return fH(f5)}).raw=f5;var cj=eF(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(hu.geo.stereographic=function(){return fH(cj)}).raw=cj;function ap(ik,e){return[Math.log(Math.tan(gk/4+e/2)),-ik]}ap.invert=function(e,ik){return[-ik,2*Math.atan(Math.exp(e))-ew]};(hu.geo.transverseMercator=function(){var ik=db(ap),e=ik.center,il=ik.rotate;ik.center=function(im){return im?e([-im[1],im[0]]):(im=e(),[im[1],-im[0]])};ik.rotate=function(im){return im?il([im[0],im[1],im.length>2?im[2]+90:90]):(im=il(),[im[0],im[1],im[2]-90])};return il([0,0,90])}).raw=ap;hu.geom={};function h1(e){return e[0]}function h0(e){return e[1]}hu.geom.hull=function(ik){var e=h1,im=h0;if(arguments.length){return il(ik)}function il(iv){if(iv.length<3){return[]}var iq=V(e),ip=V(im),iw,io=iv.length,iy=[],iz=[];for(iw=0;iw<io;iw++){iy.push([+iq.call(this,iv[iw],iw),+ip.call(this,iv[iw],iw),iw])}iy.sort(h9);for(iw=0;iw<io;iw++){iz.push([iy[iw][0],-iy[iw][1]])}var iA=bw(iy),iu=bw(iz);var ir=iu[0]===iA[0],it=iu[iu.length-1]===iA[iA.length-1],ix=[];for(iw=iA.length-1;iw>=0;--iw){ix.push(iv[iy[iA[iw]][2]])}for(iw=+ir;iw<iu.length-it;++iw){ix.push(iv[iy[iu[iw]][2]])}return ix}il.x=function(io){return arguments.length?(e=io,il):e};il.y=function(io){return arguments.length?(im=io,il):im};return il};function bw(il){var io=il.length,im=[0,1],ik=2;for(var e=2;e<io;e++){while(ik>1&&e6(il[im[ik-2]],il[im[ik-1]],il[e])<=0){--ik}im[ik++]=e}return im.slice(0,ik)}function h9(ik,e){return ik[0]-e[0]||ik[1]-e[1]}hu.geom.polygon=function(e){ic(e,ex);return e};var ex=hu.geom.polygon.prototype=[];ex.area=function(){var il=-1,io=this.length,ik,e=this[io-1],im=0;while(++il<io){ik=e;e=this[il];im+=ik[1]*e[0]-ik[0]*e[1]}return im*0.5};ex.centroid=function(im){var io=-1,ir=this.length,ik=0,iq=0,il,e=this[ir-1],ip;if(!arguments.length){im=-1/(6*this.area())}while(++io<ir){il=e;e=this[io];ip=il[0]*e[1]-e[0]*il[1];ik+=(il[0]+e[0])*ip;iq+=(il[1]+e[1])*ip}return[ik*im,iq*im]};ex.clip=function(ir){var iu,io=gZ(ir),im=-1,e=this.length-gZ(this),il,ik,iv=this[e-1],it,iq,ip;while(++im<e){iu=ir.slice();ir.length=0;it=this[im];iq=iu[(ik=iu.length-io)-1];il=-1;while(++il<ik){ip=iu[il];if(I(ip,iv,it)){if(!I(iq,iv,it)){ir.push(gp(iq,ip,iv,it))}ir.push(ip)}else{if(I(iq,iv,it)){ir.push(gp(iq,ip,iv,it))}}iq=ip}if(io){ir.push(ir[0])}iv=it}return ir};function I(il,ik,e){return(e[0]-ik[0])*(il[1]-ik[1])<(e[1]-ik[1])*(il[0]-ik[0])}function gp(iq,io,iv,ir){var il=iq[0],e=iv[0],im=io[0]-il,iw=ir[0]-e,iu=iq[1],ip=iv[1],it=io[1]-iu,ix=ir[1]-ip,ik=(iw*(iu-ip)-ix*(il-e))/(ix*im-iw*it);return[il+ik*im,iu+ik*it]}function gZ(il){var ik=il[0],e=il[il.length-1];return !(ik[0]-e[0]||ik[1]-e[1])}var gV,eD,cX,dj=[],hk,ea,eA=[];function gJ(){v(this);this.edge=this.site=this.circle=null}function e4(ik){var e=dj.pop()||new gJ();e.site=ik;return e}function gI(e){eT(e);cX.remove(e);dj.push(e);v(e)}function hw(ik){var e=ik.circle,iu=e.x,iq=e.cy,io={x:iu,y:iq},ip=ik.P,im=ik.N,it=[ik];gI(ik);var iw=ip;while(iw.circle&&cM(iu-iw.circle.x)<gt&&cM(iq-iw.circle.cy)<gt){ip=iw.P;it.unshift(iw);gI(iw);iw=ip}it.unshift(iw);eT(iw);var il=im;while(il.circle&&cM(iu-il.circle.x)<gt&&cM(iq-il.circle.cy)<gt){im=il.N;it.push(il);gI(il);il=im}it.push(il);eT(il);var iv=it.length,ir;for(ir=1;ir<iv;++ir){il=it[ir];iw=it[ir-1];cv(il.edge,iw.site,il.site,io)}iw=it[0];il=it[iv-1];il.edge=hq(iw.site,il.site,null,io);ac(iw);ac(il)}function dB(iv){var it=iv.x,ix=iv.y,iz,iw,iF,iA,iy=cX._;while(iy){iF=dd(iy,ix)-it;if(iF>gt){iy=iy.L}else{iA=it-gj(iy,ix);if(iA>gt){if(!iy.R){iz=iy;break}iy=iy.R}else{if(iF>-gt){iz=iy.P;iw=iy}else{if(iA>-gt){iz=iy;iw=iy.N}else{iz=iw=iy}}break}}}var im=e4(iv);cX.insert(iz,im);if(!iz&&!iw){return}if(iz===iw){eT(iz);iw=e4(iz.site);cX.insert(im,iw);im.edge=iw.edge=hq(iz.site,im.site);ac(iz);ac(iw);return}if(!iw){im.edge=hq(iz.site,im.site);return}eT(iz);eT(iw);var iq=iz.site,iu=iq.x,ir=iq.y,iD=iv.x-iu,iB=iv.y-ir,e=iw.site,il=e.x-iu,ik=e.y-ir,iE=2*(iD*ik-iB*il),ip=iD*iD+iB*iB,io=il*il+ik*ik,iC={x:(ik*ip-iB*io)/iE+iu,y:(iD*io-il*ip)/iE+ir};cv(iw.edge,iq,e,iC);im.edge=hq(iq,iv,null,iC);iw.edge=hq(iv,e,null,iC);ac(iz);ac(iw)}function dd(im,io){var e=im.site,iw=e.x,iv=e.y,iu=iv-io;if(!iu){return iw}var ix=im.P;if(!ix){return -Infinity}e=ix.site;var iq=e.x,ip=e.y,il=ip-io;if(!il){return iq}var ik=iq-iw,it=1/iu-1/il,ir=ik/il;if(it){return(-ir+Math.sqrt(ir*ir-2*it*(ik*ik/(-2*il)-ip+il/2+iv-iu/2)))/it+iw}return(iw+iq)/2}function gj(ik,il){var im=ik.N;if(im){return dd(im,il)}var e=ik.site;return e.y===il?e.x:Infinity}function b4(e){this.site=e;this.edges=[]}b4.prototype.prepare=function(){var il=this.edges,e=il.length,ik;while(e--){ik=il[e].edge;if(!ik.b||!ik.a){il.splice(e,1)}}il.sort(w);return il.length};function bF(iB){var iq=iB[0][0],ip=iB[1][0],ix=iB[0][1],iw=iB[1][1],im,iv,e,iu,iA=eD,il=iA.length,iz,iy,it,ik,io,ir;while(il--){iz=iA[il];if(!iz||!iz.prepare()){continue}it=iz.edges;ik=it.length;iy=0;while(iy<ik){ir=it[iy].end(),e=ir.x,iu=ir.y;io=it[++iy%ik].start(),im=io.x,iv=io.y;if(cM(e-im)>gt||cM(iu-iv)>gt){it.splice(iy,0,new h7(hf(iz.site,ir,cM(e-iq)<gt&&iw-iu>gt?{x:iq,y:cM(im-iq)<gt?iv:iw}:cM(iu-iw)<gt&&ip-e>gt?{x:cM(iv-iw)<gt?im:ip,y:iw}:cM(e-ip)<gt&&iu-ix>gt?{x:ip,y:cM(im-ip)<gt?iv:ix}:cM(iu-ix)<gt&&e-iq>gt?{x:cM(iv-ix)<gt?im:iq,y:ix}:null),iz.site,null));++ik}}}}function w(ik,e){return e.angle-ik.angle}function a2(){v(this);this.x=this.y=this.arc=this.site=this.cy=null}function ac(iq){var iA=iq.P,iy=iq.N;if(!iA||!iy){return}var it=iA.site,iD=iq.site,e=iy.site;if(it===e){return}var iC=iD.x,iB=iD.y,iw=it.x-iC,iu=it.y-iB,il=e.x-iC,ik=e.y-iB;var iE=2*(iw*ik-iu*il);if(iE>=-eK){return}var ip=iw*iw+iu*iu,io=il*il+ik*ik,iv=(ik*ip-iu*io)/iE,ir=(iw*io-il*ip)/iE,ik=ir+iB;var im=eA.pop()||new a2();im.arc=iq;im.site=iD;im.x=iv+iC;im.y=ik+Math.sqrt(iv*iv+ir*ir);im.cy=ik;iq.circle=im;var ix=null,iz=ea._;while(iz){if(im.y<iz.y||im.y===iz.y&&im.x<=iz.x){if(iz.L){iz=iz.L}else{ix=iz.P;break}}else{if(iz.R){iz=iz.R}else{ix=iz;break}}}ea.insert(ix,im);if(!ix){hk=im}}function eT(e){var ik=e.circle;if(ik){if(!ik.P){hk=ik.N}ea.remove(ik);eA.push(ik);v(ik);e.circle=null}}function hJ(im){var ik=gV,io=aq(im[0][0],im[0][1],im[1][0],im[1][1]),il=ik.length,ip;while(il--){ip=ik[il];if(!bt(ip,im)||!io(ip)||cM(ip.a.x-ip.b.x)<gt&&cM(ip.a.y-ip.b.y)<gt){ip.a=ip.b=null;ik.splice(il,1)}}}function bt(iw,iz){var e=iw.b;if(e){return true}var ik=iw.a,iC=iz[0][0],iB=iz[1][0],ip=iz[0][1],im=iz[1][1],iy=iw.l,il=iw.r,it=iy.x,ir=iy.y,iv=il.x,iu=il.y,iq=(it+iv)/2,io=(ir+iu)/2,ix,iA;if(iu===ir){if(iq<iC||iq>=iB){return}if(it>iv){if(!ik){ik={x:iq,y:ip}}else{if(ik.y>=im){return}}e={x:iq,y:im}}else{if(!ik){ik={x:iq,y:im}}else{if(ik.y<ip){return}}e={x:iq,y:ip}}}else{ix=(it-iv)/(iu-ir);iA=io-ix*iq;if(ix<-1||ix>1){if(it>iv){if(!ik){ik={x:(ip-iA)/ix,y:ip}}else{if(ik.y>=im){return}}e={x:(im-iA)/ix,y:im}}else{if(!ik){ik={x:(im-iA)/ix,y:im}}else{if(ik.y<ip){return}}e={x:(ip-iA)/ix,y:ip}}}else{if(ir<iu){if(!ik){ik={x:iC,y:ix*iC+iA}}else{if(ik.x>=iB){return}}e={x:iB,y:ix*iB+iA}}else{if(!ik){ik={x:iB,y:ix*iB+iA}}else{if(ik.x<iC){return}}e={x:iC,y:ix*iC+iA}}}}iw.a=ik;iw.b=e;return true}function K(ik,e){this.l=ik;this.r=e;this.a=this.b=null}function hq(io,e,im,ik){var il=new K(io,e);gV.push(il);if(im){cv(il,io,e,im)}if(ik){cv(il,e,io,ik)}eD[io.i].edges.push(new h7(il,io,e));eD[e.i].edges.push(new h7(il,e,io));return il}function hf(im,il,e){var ik=new K(im,null);ik.a=il;ik.b=e;gV.push(ik);return ik}function cv(ik,im,e,il){if(!ik.a&&!ik.b){ik.a=il;ik.l=im;ik.r=e}else{if(ik.l===e){ik.b=il}else{ik.a=il}}}function h7(im,io,e){var il=im.a,ik=im.b;this.edge=im;this.site=io;this.angle=e?Math.atan2(e.y-io.y,e.x-io.x):im.l===io?Math.atan2(ik.x-il.x,il.y-ik.y):Math.atan2(il.x-ik.x,ik.y-il.y)}h7.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function bh(){this._=null}function v(e){e.U=e.C=e.L=e.R=e.P=e.N=null}bh.prototype={insert:function(io,im){var il,ik,e;if(io){im.P=io;im.N=io.N;if(io.N){io.N.P=im}io.N=im;if(io.R){io=io.R;while(io.L){io=io.L}io.L=im}else{io.R=im}il=io}else{if(this._){io=dg(this._);im.P=null;im.N=io;io.P=io.L=im;il=io}else{im.P=im.N=null;this._=im;il=null}}im.L=im.R=null;im.U=il;im.C=true;io=im;while(il&&il.C){ik=il.U;if(il===ik.L){e=ik.R;if(e&&e.C){il.C=e.C=false;ik.C=true;io=ik}else{if(io===il.R){ao(this,il);io=il;il=io.U}il.C=false;ik.C=true;eX(this,ik)}}else{e=ik.L;if(e&&e.C){il.C=e.C=false;ik.C=true;io=ik}else{if(io===il.L){eX(this,il);io=il;il=io.U}il.C=false;ik.C=true;ao(this,ik)}}il=io.U}this._.C=false},remove:function(io){if(io.N){io.N.P=io.P}if(io.P){io.P.N=io.N}io.N=io.P=null;var im=io.U,il,iq=io.L,e=io.R,ik,ip;if(!iq){ik=e}else{if(!e){ik=iq}else{ik=dg(e)}}if(im){if(im.L===io){im.L=ik}else{im.R=ik}}else{this._=ik}if(iq&&e){ip=ik.C;ik.C=io.C;ik.L=iq;iq.U=ik;if(ik!==e){im=ik.U;ik.U=io.U;io=ik.R;im.L=io;ik.R=e;e.U=ik}else{ik.U=im;im=ik;io=ik.R}}else{ip=io.C;io=ik}if(io){io.U=im}if(ip){return}if(io&&io.C){io.C=false;return}do{if(io===this._){break}if(io===im.L){il=im.R;if(il.C){il.C=false;im.C=true;ao(this,im);il=im.R}if(il.L&&il.L.C||il.R&&il.R.C){if(!il.R||!il.R.C){il.L.C=false;il.C=true;eX(this,il);il=im.R}il.C=im.C;im.C=il.R.C=false;ao(this,im);io=this._;break}}else{il=im.L;if(il.C){il.C=false;im.C=true;eX(this,im);il=im.L}if(il.L&&il.L.C||il.R&&il.R.C){if(!il.L||!il.L.C){il.R.C=false;il.C=true;ao(this,il);il=im.L}il.C=im.C;im.C=il.L.C=false;eX(this,im);io=this._;break}}il.C=true;io=im;im=im.U}while(!io.C);if(io){io.C=false}}};function ao(e,il){var io=il,im=il.R,ik=io.U;if(ik){if(ik.L===io){ik.L=im}else{ik.R=im}}else{e._=im}im.U=ik;io.U=im;io.R=im.L;if(io.R){io.R.U=io}im.L=io}function eX(e,il){var io=il,im=il.L,ik=io.U;if(ik){if(ik.L===io){ik.L=im}else{ik.R=im}}else{e._=im}im.U=ik;io.U=im;io.L=im.R;if(io.L){io.L.U=io}im.R=io}function dg(e){while(e.L){e=e.L}return e}function g8(ip,iq){var ik=ip.sort(br).pop(),il,im,io;gV=[];eD=new Array(ip.length);cX=new bh();ea=new bh();while(true){io=hk;if(ik&&(!io||ik.y<io.y||ik.y===io.y&&ik.x<io.x)){if(ik.x!==il||ik.y!==im){eD[ik.i]=new b4(ik);dB(ik);il=ik.x,im=ik.y}ik=ip.pop()}else{if(io){hw(io.arc)}else{break}}}if(iq){hJ(iq),bF(iq)}var e={cells:eD,edges:gV};cX=ea=gV=eD=null;return e}function br(ik,e){return e.y-ik.y||e.x-ik.x}hu.geom.voronoi=function(im){var e=h1,ir=h0,io=e,il=ir,ik=hN;if(im){return iq(im)}function iq(iy){var it=new Array(iy.length),iv=ik[0][0],ix=ik[0][1],iu=ik[1][0],iw=ik[1][1];g8(ip(iy),ik).cells.forEach(function(iz,iD){var iA=iz.edges,iB=iz.site,iC=it[iD]=iA.length?iA.map(function(iF){var iE=iF.start();return[iE.x,iE.y]}):iB.x>=iv&&iB.x<=iu&&iB.y>=ix&&iB.y<=iw?[[iv,iw],[iu,iw],[iu,ix],[iv,ix]]:[];iC.point=iy[iD]});return it}function ip(it){return it.map(function(iv,iu){return{x:Math.round(io(iv,iu)/gt)*gt,y:Math.round(il(iv,iu)/gt)*gt,i:iu}})}iq.links=function(it){return g8(ip(it)).edges.filter(function(iu){return iu.l&&iu.r}).map(function(iu){return{source:it[iu.l.i],target:it[iu.r.i]}})};iq.triangles=function(iu){var it=[];g8(ip(iu)).cells.forEach(function(iD,iz){var iv=iD.site,iy=iD.edges.sort(w),ix=-1,iw=iy.length,iB,iE,iA=iy[iw-1].edge,iC=iA.l===iv?iA.r:iA.l;while(++ix<iw){iB=iA;iE=iC;iA=iy[ix].edge;iC=iA.l===iv?iA.r:iA.l;if(iz<iE.i&&iz<iC.i&&gH(iv,iE,iC)<0){it.push([iu[iz],iu[iE.i],iu[iC.i]])}}});return it};iq.x=function(it){return arguments.length?(io=V(e=it),iq):e};iq.y=function(it){return arguments.length?(il=V(ir=it),iq):ir};iq.clipExtent=function(it){if(!arguments.length){return ik===hN?null:ik}ik=it==null?hN:it;return iq};iq.size=function(it){if(!arguments.length){return ik===hN?null:ik&&ik[1]}return iq.clipExtent(it&&[[0,0],it])};return iq};var hN=[[-1000000,-1000000],[1000000,1000000]];function gH(ik,e,il){return(ik.x-il.x)*(e.y-ik.y)-(ik.x-e.x)*(il.y-ik.y)}hu.geom.delaunay=function(e){return hu.geom.voronoi().triangles(e)};hu.geom.quadtree=function(ir,ik,ip,e,io){var iq=h1,im=h0,it;if(it=arguments.length){iq=ga;im=f8;if(it===3){io=ip;e=ik;ip=ik=0}return il(ir)}function il(iM){var iJ,iy=V(iq),iw=V(im),iA,iG,iH,iE,iu,iD,iz,iL;if(ik!=null){iu=ik,iD=ip,iz=e,iL=io}else{iz=iL=-(iu=iD=Infinity);iA=[],iG=[];iE=iM.length;if(it){for(iH=0;iH<iE;++iH){iJ=iM[iH];if(iJ.x<iu){iu=iJ.x}if(iJ.y<iD){iD=iJ.y}if(iJ.x>iz){iz=iJ.x}if(iJ.y>iL){iL=iJ.y}iA.push(iJ.x);iG.push(iJ.y)}}else{for(iH=0;iH<iE;++iH){var iI=+iy(iJ=iM[iH],iH),ix=+iw(iJ,iH);if(iI<iu){iu=iI}if(ix<iD){iD=ix}if(iI>iz){iz=iI}if(ix>iL){iL=ix}iA.push(iI);iG.push(ix)}}}var iC=iz-iu,iB=iL-iD;if(iC>iB){iL=iD+iC}else{iz=iu+iB}function iv(iP,iT,iX,iU,iO,iW,iN,iV){if(isNaN(iX)||isNaN(iU)){return}if(iP.leaf){var iS=iP.x,iR=iP.y;if(iS!=null){if(cM(iS-iX)+cM(iR-iU)<0.01){iK(iP,iT,iX,iU,iO,iW,iN,iV)}else{var iQ=iP.point;iP.x=iP.y=iP.point=null;iK(iP,iQ,iS,iR,iO,iW,iN,iV);iK(iP,iT,iX,iU,iO,iW,iN,iV)}}else{iP.x=iX,iP.y=iU,iP.point=iT}}else{iK(iP,iT,iX,iU,iO,iW,iN,iV)}}function iK(iQ,iT,iX,iU,iO,iW,iN,iV){var iS=(iO+iN)*0.5,iP=(iW+iV)*0.5,iZ=iX>=iS,iY=iU>=iP,iR=iY<<1|iZ;iQ.leaf=false;iQ=iQ.nodes[iR]||(iQ.nodes[iR]=fO());if(iZ){iO=iS}else{iN=iS}if(iY){iW=iP}else{iV=iP}iv(iQ,iT,iX,iU,iO,iW,iN,iV)}var iF=fO();iF.add=function(iN){iv(iF,iN,+iy(iN,++iH),+iw(iN,iH),iu,iD,iz,iL)};iF.visit=function(iN){cS(iN,iF,iu,iD,iz,iL)};iF.find=function(iN){return er(iF,iN[0],iN[1],iu,iD,iz,iL)};iH=-1;if(ik==null){while(++iH<iE){iv(iF,iM[iH],iA[iH],iG[iH],iu,iD,iz,iL)}--iH}else{iM.forEach(iF.add)}iA=iG=iM=iJ=null;return iF}il.x=function(iu){return arguments.length?(iq=iu,il):iq};il.y=function(iu){return arguments.length?(im=iu,il):im};il.extent=function(iu){if(!arguments.length){return ik==null?null:[[ik,ip],[e,io]]}if(iu==null){ik=ip=e=io=null}else{ik=+iu[0][0],ip=+iu[0][1],e=+iu[1][0],io=+iu[1][1]}return il};il.size=function(iu){if(!arguments.length){return ik==null?null:[e-ik,io-ip]}if(iu==null){ik=ip=e=io=null}else{ik=ip=0,e=+iu[0],io=+iu[1]}return il};return il};function ga(e){return e.x}function f8(e){return e.y}function fO(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function cS(io,im,ik,it,e,iq){if(!io(im,ik,it,e,iq)){var ir=(ik+e)*0.5,ip=(it+iq)*0.5,il=im.nodes;if(il[0]){cS(io,il[0],ik,it,ir,ip)}if(il[1]){cS(io,il[1],ir,it,e,ip)}if(il[2]){cS(io,il[2],ik,ip,ir,iq)}if(il[3]){cS(io,il[3],ir,ip,e,iq)}}}function er(iq,it,ip,il,iu,e,io){var ir=Infinity,ik;(function im(iA,ix,iG,iw,iF){if(ix>e||iG>io||iw<il||iF<iu){return}if(iI=iA.point){var iI,iL=it-iA.x,iK=ip-iA.y,iE=iL*iL+iK*iK;if(iE<ir){var iv=Math.sqrt(ir=iE);il=it-iv,iu=ip-iv;e=it+iv,io=ip+iv;ik=iI}}var iz=iA.nodes,iD=(ix+iw)*0.5,iy=(iG+iF)*0.5,iJ=it>=iD,iH=ip>=iy;for(var iC=iH<<1|iJ,iB=iC+4;iC<iB;++iC){if(iA=iz[iC&3]){switch(iC&3){case 0:im(iA,ix,iG,iD,iy);break;case 1:im(iA,iD,iG,iw,iy);break;case 2:im(iA,ix,iy,iD,iF);break;case 3:im(iA,iD,iy,iw,iF);break}}}})(iq,il,iu,e,io);return ik}hu.interpolateRgb=aT;function aT(ik,e){ik=hu.rgb(ik);e=hu.rgb(e);var im=ik.r,il=ik.g,iq=ik.b,ip=e.r-im,io=e.g-il,ir=e.b-iq;return function(it){return"#"+cB(Math.round(im+ip*it))+cB(Math.round(il+io*it))+cB(Math.round(iq+ir*it))}}hu.interpolateObject=bT;function bT(ik,e){var im={},io={},il;for(il in ik){if(il in e){im[il]=fJ(ik[il],e[il])}else{io[il]=ik[il]}}for(il in e){if(!(il in ik)){io[il]=e[il]}}return function(ip){for(il in im){io[il]=im[il](ip)}return io}}hu.interpolateNumber=bN;function bN(ik,e){ik=+ik,e=+e;return function(il){return ik*(1-il)+e*il}}hu.interpolateString=b7;function b7(iq,ip){var il=hI.lastIndex=hG.lastIndex=0,io,ik,ir,im=-1,it=[],e=[];iq=iq+"",ip=ip+"";while((io=hI.exec(iq))&&(ik=hG.exec(ip))){if((ir=ik.index)>il){ir=ip.slice(il,ir);if(it[im]){it[im]+=ir}else{it[++im]=ir}}if((io=io[0])===(ik=ik[0])){if(it[im]){it[im]+=ik}else{it[++im]=ik}}else{it[++im]=null;e.push({i:im,x:bN(io,ik)})}il=hG.lastIndex}if(il<ip.length){ir=ip.slice(il);if(it[im]){it[im]+=ir}else{it[++im]=ir}}return it.length<2?e[0]?(ip=e[0].x,function(iu){return ip(iu)+""}):function(){return ip}:(ip=e.length,function(iv){for(var iu=0,iw;iu<ip;++iu){it[(iw=e[iu]).i]=iw.x(iv)}return it.join("")})}var hI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hG=new RegExp(hI.source,"g");hu.interpolate=fJ;function fJ(ik,e){var il=hu.interpolators.length,im;while(--il>=0&&!(im=hu.interpolators[il](ik,e))){}return im}hu.interpolators=[function(ik,e){var il=typeof e;return(il==="string"?at.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?aT:b7:e instanceof g1?aT:Array.isArray(e)?eV:il==="object"&&isNaN(e)?bT:bN)(ik,e)}];hu.interpolateArray=eV;function eV(io,il){var ik=[],ir=[],im=io.length,e=il.length,iq=Math.min(io.length,il.length),ip;for(ip=0;ip<iq;++ip){ik.push(fJ(io[ip],il[ip]))}for(;ip<im;++ip){ir[ip]=io[ip]}for(;ip<e;++ip){ir[ip]=il[ip]}return function(it){for(ip=0;ip<iq;++ip){ir[ip]=ik[ip](it)}return ir}}var hp=function(){return gr};var ah=hu.map({linear:hp,poly:aY,quad:function(){return b5},cubic:function(){return M},sin:function(){return gi},exp:function(){return fB},circle:function(){return ec},elastic:ab,back:g6,bounce:function(){return cq}});var h=hu.map({"in":gr,out:H,"in-out":a9,"out-in":function(e){return a9(H(e))}});hu.ease=function(ik){var im=ik.indexOf("-"),il=im>=0?ik.slice(0,im):ik,e=im>=0?ik.slice(im+1):"in";il=ah.get(il)||hp;e=h.get(e)||gr;return fG(e(il.apply(null,bV.call(arguments,1))))};function fG(e){return function(ik){return ik<=0?0:ik>=1?1:e(ik)}}function H(e){return function(ik){return 1-e(1-ik)}}function a9(e){return function(ik){return 0.5*(ik<0.5?e(2*ik):2-e(2-2*ik))}}function b5(e){return e*e}function M(e){return e*e*e}function aC(ik){if(ik<=0){return 0}if(ik>=1){return 1}var il=ik*ik,e=il*ik;return 4*(ik<0.5?e:3*(ik-il)+e-0.75)}function aY(ik){return function(e){return Math.pow(e,ik)}}function gi(e){return 1-Math.cos(e*ew)}function fB(e){return Math.pow(2,10*(e-1))}function ec(e){return 1-Math.sqrt(1-e*e)}function ab(e,il){var ik;if(arguments.length<2){il=0.45}if(arguments.length){ik=il/ge*Math.asin(1/e)}else{e=1,ik=il/4}return function(im){return 1+e*Math.pow(2,-10*im)*Math.sin((im-ik)*ge/il)}}function g6(e){if(!e){e=1.70158}return function(ik){return ik*ik*((e+1)*ik-e)}}function cq(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375}hu.interpolateHcl=gY;function gY(il,e){il=hu.hcl(il);e=hu.hcl(e);var ik=il.h,io=il.c,iq=il.l,im=e.h-ik,ip=e.c-io,ir=e.l-iq;if(isNaN(ip)){ip=0,io=isNaN(io)?e.c:io}if(isNaN(im)){im=0,ik=isNaN(ik)?e.h:ik}else{if(im>180){im-=360}else{if(im<-180){im+=360}}}return function(it){return bK(ik+im*it,io+ip*it,iq+ir*it)+""}}hu.interpolateHsl=ba;function ba(im,e){im=hu.hsl(im);e=hu.hsl(e);var il=im.h,ik=im.s,iq=im.l,ip=e.h-il,io=e.s-ik,ir=e.l-iq;if(isNaN(io)){io=0,ik=isNaN(ik)?e.s:ik}if(isNaN(ip)){ip=0,il=isNaN(il)?e.h:il}else{if(ip>180){ip-=360}else{if(ip<-180){ip+=360}}}return function(it){return bn(il+ip*it,ik+io*it,iq+ir*it)+""}}hu.interpolateLab=hF;function hF(ik,e){ik=hu.lab(ik);e=hu.lab(e);var io=ik.l,im=ik.a,il=ik.b,ir=e.l-io,iq=e.a-im,ip=e.b-il;return function(it){return aI(io+ir*it,im+iq*it,il+ip*it)+""}}hu.interpolateRound=fE;function fE(ik,e){e-=ik;return function(il){return Math.round(ik+e*il)}}hu.transform=function(e){var ik=bU.createElementNS(hu.ns.prefix.svg,"g");return(hu.transform=function(il){if(il!=null){ik.setAttribute("transform",il);var im=ik.transform.baseVal.consolidate()}return new q(im?im.matrix:gf)})(e)};function q(e){var im=[e.a,e.b],ik=[e.c,e.d],ip=fw(im),il=e5(im,ik),io=fw(bZ(ik,im,-il))||0;if(im[0]*ik[1]<ik[0]*im[1]){im[0]*=-1;im[1]*=-1;ip*=-1;il*=-1}this.rotate=(ip?Math.atan2(im[1],im[0]):Math.atan2(-ik[0],ik[1]))*hL;this.translate=[e.e,e.f];this.scale=[ip,io];this.skew=io?Math.atan2(il,io)*hL:0}q.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function e5(ik,e){return ik[0]*e[0]+ik[1]*e[1]}function fw(e){var ik=Math.sqrt(e5(e,e));if(ik){e[0]/=ik;e[1]/=ik}return ik}function bZ(ik,e,il){ik[0]+=il*e[0];ik[1]+=il*e[1];return ik}var gf={a:1,b:0,c:0,d:1,e:0,f:0};hu.interpolateTransform=en;function a0(e){return e.length?e.pop()+",":""}function hZ(ik,e,im,io){if(ik[0]!==e[0]||ik[1]!==e[1]){var il=im.push("translate(",null,",",null,")");io.push({i:il-4,x:bN(ik[0],e[0])},{i:il-2,x:bN(ik[1],e[1])})}else{if(e[0]||e[1]){im.push("translate("+e+")")}}}function ha(im,il,e,ik){if(im!==il){if(im-il>180){il+=360}else{if(il-im>180){im+=360}}ik.push({i:e.push(a0(e)+"rotate(",null,")")-2,x:bN(im,il)})}else{if(il){e.push(a0(e)+"rotate("+il+")")}}}function dt(im,il,e,ik){if(im!==il){ik.push({i:e.push(a0(e)+"skewX(",null,")")-2,x:bN(im,il)})}else{if(il){e.push(a0(e)+"skewX("+il+")")}}}function g4(im,il,ik,io){if(im[0]!==il[0]||im[1]!==il[1]){var e=ik.push(a0(ik)+"scale(",null,",",null,")");io.push({i:e-4,x:bN(im[0],il[0])},{i:e-2,x:bN(im[1],il[1])})}else{if(il[0]!==1||il[1]!==1){ik.push(a0(ik)+"scale("+il+")")}}}function en(ik,e){var il=[],im=[];ik=hu.transform(ik),e=hu.transform(e);hZ(ik.translate,e.translate,il,im);ha(ik.rotate,e.rotate,il,im);dt(ik.skew,e.skew,il,im);g4(ik.scale,e.scale,il,im);ik=e=null;return function(ip){var io=-1,ir=im.length,iq;while(++io<ir){il[(iq=im[io]).i]=iq.x(ip)}return il.join("")}}function hC(ik,e){e=(e-=ik=+ik)||1/e;return function(il){return(il-ik)/e}}function aF(ik,e){e=(e-=ik=+ik)||1/e;return function(il){return Math.max(0,Math.min(1,(il-ik)/e))}}hu.layout={};hu.layout.bundle=function(){return function(e){var il=[],ik=-1,im=e.length;while(++ik<im){il.push(eR(e[ik]))}return il}};function eR(im){var ip=im.source,e=im.target,io=fR(ip,e),il=[ip];while(ip!==io){ip=ip.parent;il.push(ip)}var ik=il.length;while(e!==io){il.splice(ik,0,e);e=e.parent}return il}function fv(il){var ik=[],e=il.parent;while(e!=null){ik.push(il);il=e;e=e.parent}ik.push(il);return ik}function fR(im,ik){if(im===ik){return im}var il=fv(im),e=fv(ik),io=il.pop(),ip=e.pop(),iq=null;while(io===ip){iq=io;io=il.pop();ip=e.pop()}return iq}hu.layout.chord=function(){var ip={},iq,im,iv,il,iu=0,e,ik,io;function it(){var iA={},iD=[],iL=hu.range(il),iH=[],iB,iJ,iz,iE,iC;iq=[];im=[];iB=0,iE=-1;while(++iE<il){iJ=0,iC=-1;while(++iC<il){iJ+=iv[iE][iC]}iD.push(iJ);iH.push(hu.range(il));iB+=iJ}if(e){iL.sort(function(iN,iM){return e(iD[iN],iD[iM])})}if(ik){iH.forEach(function(iN,iM){iN.sort(function(iP,iO){return ik(iv[iM][iP],iv[iM][iO])})})}iB=(ge-iu*il)/iB;iJ=0,iE=-1;while(++iE<il){iz=iJ,iC=-1;while(++iC<il){var iI=iL[iE],iG=iH[iI][iC],iK=iv[iI][iG],iy=iJ,ix=iJ+=iK*iB;iA[iI+"-"+iG]={index:iI,subindex:iG,startAngle:iy,endAngle:ix,value:iK}}im[iI]={index:iI,startAngle:iz,endAngle:iJ,value:iD[iI]};iJ+=iu}iE=-1;while(++iE<il){iC=iE-1;while(++iC<il){var iw=iA[iE+"-"+iC],iF=iA[iC+"-"+iE];if(iw.value||iF.value){iq.push(iw.value<iF.value?{source:iF,target:iw}:{source:iw,target:iF})}}}if(io){ir()}}function ir(){iq.sort(function(ix,iw){return io((ix.source.value+ix.target.value)/2,(iw.source.value+iw.target.value)/2)})}ip.matrix=function(iw){if(!arguments.length){return iv}il=(iv=iw)&&iv.length;iq=im=null;return ip};ip.padding=function(iw){if(!arguments.length){return iu}iu=iw;iq=im=null;return ip};ip.sortGroups=function(iw){if(!arguments.length){return e}e=iw;iq=im=null;return ip};ip.sortSubgroups=function(iw){if(!arguments.length){return ik}ik=iw;iq=null;return ip};ip.sortChords=function(iw){if(!arguments.length){return io}io=iw;if(iq){ir()}return ip};ip.chords=function(){if(!iq){it()}return iq};ip.groups=function(){if(!im){it()}return im};return ip};hu.layout.force=function(){var ik={},iB=hu.dispatch("start","tick","end"),it,iv=[1,1],iD,io,ir=0.9,iE=fX,im=cz,iA=-30,iy=ch,ip=0.1,iw=0.64,iz=[],il=[],iq,e,iu;function iC(iF){return function(iM,iI,iL,iH){if(iM.point!==iF){var iO=iM.cx-iF.x,iN=iM.cy-iF.y,iG=iH-iI,iK=iO*iO+iN*iN;if(iG*iG/iw<iK){if(iK<iy){var iJ=iM.charge/iK;iF.px-=iO*iJ;iF.py-=iN*iJ}return true}if(iM.point&&iK&&iK<iy){var iJ=iM.pointCharge/iK;iF.px-=iO*iJ;iF.py-=iN*iJ}}return !iM.charge}}ik.tick=function(){if((io*=0.99)<0.005){it=null;iB.end({type:"end",alpha:io=0});return true}var iH=iz.length,iI=il.length,iF,iL,iG,iP,iO,iJ,iK,iN,iM;for(iL=0;iL<iI;++iL){iG=il[iL];iP=iG.source;iO=iG.target;iN=iO.x-iP.x;iM=iO.y-iP.y;if(iJ=iN*iN+iM*iM){iJ=io*e[iL]*((iJ=Math.sqrt(iJ))-iq[iL])/iJ;iN*=iJ;iM*=iJ;iO.x-=iN*(iK=iP.weight+iO.weight?iP.weight/(iP.weight+iO.weight):0.5);iO.y-=iM*iK;iP.x+=iN*(iK=1-iK);iP.y+=iM*iK}}if(iK=io*ip){iN=iv[0]/2;iM=iv[1]/2;iL=-1;if(iK){while(++iL<iH){iG=iz[iL];iG.x+=(iN-iG.x)*iK;iG.y+=(iM-iG.y)*iK}}}if(iA){gG(iF=hu.geom.quadtree(iz),io,iu);iL=-1;while(++iL<iH){if(!(iG=iz[iL]).fixed){iF.visit(iC(iG))}}}iL=-1;while(++iL<iH){iG=iz[iL];if(iG.fixed){iG.x=iG.px;iG.y=iG.py}else{iG.x-=(iG.px-(iG.px=iG.x))*ir;iG.y-=(iG.py-(iG.py=iG.y))*ir}}iB.tick({type:"tick",alpha:io})};ik.nodes=function(iF){if(!arguments.length){return iz}iz=iF;return ik};ik.links=function(iF){if(!arguments.length){return il}il=iF;return ik};ik.size=function(iF){if(!arguments.length){return iv}iv=iF;return ik};ik.linkDistance=function(iF){if(!arguments.length){return iE}iE=typeof iF==="function"?iF:+iF;return ik};ik.distance=ik.linkDistance;ik.linkStrength=function(iF){if(!arguments.length){return im}im=typeof iF==="function"?iF:+iF;return ik};ik.friction=function(iF){if(!arguments.length){return ir}ir=+iF;return ik};ik.charge=function(iF){if(!arguments.length){return iA}iA=typeof iF==="function"?iF:+iF;return ik};ik.chargeDistance=function(iF){if(!arguments.length){return Math.sqrt(iy)}iy=iF*iF;return ik};ik.gravity=function(iF){if(!arguments.length){return ip}ip=+iF;return ik};ik.theta=function(iF){if(!arguments.length){return Math.sqrt(iw)}iw=iF*iF;return ik};ik.alpha=function(iF){if(!arguments.length){return io}iF=+iF;if(io){if(iF>0){io=iF}else{it.c=null,it.t=NaN,it=null;iB.end({type:"end",alpha:io=0})}}else{if(iF>0){iB.start({type:"start",alpha:io=iF});it=g9(ik.tick)}}return ik};ik.start=function(){var iJ,iM=iz.length,iG=il.length,iH=iv[0],iK=iv[1],iI,iL;for(iJ=0;iJ<iM;++iJ){(iL=iz[iJ]).index=iJ;iL.weight=0}for(iJ=0;iJ<iG;++iJ){iL=il[iJ];if(typeof iL.source=="number"){iL.source=iz[iL.source]}if(typeof iL.target=="number"){iL.target=iz[iL.target]}++iL.source.weight;++iL.target.weight}for(iJ=0;iJ<iM;++iJ){iL=iz[iJ];if(isNaN(iL.x)){iL.x=iF("x",iH)}if(isNaN(iL.y)){iL.y=iF("y",iK)}if(isNaN(iL.px)){iL.px=iL.x}if(isNaN(iL.py)){iL.py=iL.y}}iq=[];if(typeof iE==="function"){for(iJ=0;iJ<iG;++iJ){iq[iJ]=+iE.call(this,il[iJ],iJ)}}else{for(iJ=0;iJ<iG;++iJ){iq[iJ]=iE}}e=[];if(typeof im==="function"){for(iJ=0;iJ<iG;++iJ){e[iJ]=+im.call(this,il[iJ],iJ)}}else{for(iJ=0;iJ<iG;++iJ){e[iJ]=im}}iu=[];if(typeof iA==="function"){for(iJ=0;iJ<iM;++iJ){iu[iJ]=+iA.call(this,iz[iJ],iJ)}}else{for(iJ=0;iJ<iM;++iJ){iu[iJ]=iA}}function iF(iS,iQ){if(!iI){iI=new Array(iM);for(iP=0;iP<iM;++iP){iI[iP]=[]}for(iP=0;iP<iG;++iP){var iT=il[iP];iI[iT.source.index].push(iT.target);iI[iT.target.index].push(iT.source)}}var iR=iI[iJ],iP=-1,iO=iR.length,iN;while(++iP<iO){if(!isNaN(iN=iR[iP][iS])){return iN}}return Math.random()*iQ}return ik.resume()};ik.resume=function(){return ik.alpha(0.1)};ik.stop=function(){return ik.alpha(0)};ik.drag=function(){if(!iD){iD=hu.behavior.drag().origin(gr).on("dragstart.force",t).on("drag.force",ix).on("dragend.force",ej)}if(!arguments.length){return iD}this.on("mouseover.force",cC).on("mouseout.force",es).call(iD)};function ix(iF){iF.px=hu.event.x,iF.py=hu.event.y;ik.resume()}return hu.rebind(ik,iB,"on")};function t(e){e.fixed|=2}function ej(e){e.fixed&=~6}function cC(e){e.fixed|=4;e.px=e.x,e.py=e.y}function es(e){e.fixed&=~4}function gG(iu,io,it){var ip=0,il=0;iu.charge=0;if(!iu.leaf){var e=iu.nodes,ik=e.length,iq=-1,ir;while(++iq<ik){ir=e[iq];if(ir==null){continue}gG(ir,io,it);iu.charge+=ir.charge;ip+=ir.charge*ir.cx;il+=ir.charge*ir.cy}}if(iu.point){if(!iu.leaf){iu.point.x+=Math.random()-0.5;iu.point.y+=Math.random()-0.5}var im=io*it[iu.point.index];iu.charge+=iu.pointCharge=im;ip+=im*iu.point.x;il+=im*iu.point.y}iu.cx=ip/iu.charge;iu.cy=il/iu.charge}var fX=20,cz=1,ch=Infinity;hu.layout.hierarchy=function(){var il=dX,ik=be,im=hR;function e(ip){var io=[ip],iq=[],ir;ip.depth=0;while((ir=io.pop())!=null){iq.push(ir);if((it=ik.call(e,ir,ir.depth))&&(iv=it.length)){var iv,it,iu;while(--iv>=0){io.push(iu=it[iv]);iu.parent=ir;iu.depth=ir.depth+1}if(im){ir.value=0}ir.children=it}else{if(im){ir.value=+im.call(e,ir,ir.depth)||0}delete ir.children}}gS(ip,function(ix){var iy,iw;if(il&&(iy=ix.children)){iy.sort(il)}if(im&&(iw=ix.parent)){iw.value+=ix.value}});return iq}e.sort=function(io){if(!arguments.length){return il}il=io;return e};e.children=function(io){if(!arguments.length){return ik}ik=io;return e};e.value=function(io){if(!arguments.length){return im}im=io;return e};e.revalue=function(io){if(im){eB(io,function(ip){if(ip.children){ip.value=0}});gS(io,function(iq){var ip;if(!iq.children){iq.value=+im.call(e,iq,iq.depth)||0}if(ip=iq.parent){ip.value+=iq.value}})}return io};return e};function gy(ik,e){hu.rebind(ik,e,"sort","children","value");ik.nodes=ik;ik.links=gC;return ik}function eB(il,io){var e=[il];while((il=e.pop())!=null){io(il);if((ik=il.children)&&(im=ik.length)){var im,ik;while(--im>=0){e.push(ik[im])}}}}function gS(io,iq){var ik=[io],e=[];while((io=ik.pop())!=null){e.push(io);if((il=io.children)&&(ip=il.length)){var im=-1,ip,il;while(++im<ip){ik.push(il[im])}}}while((io=e.pop())!=null){iq(io)}}function be(e){return e.children}function hR(e){return e.value}function dX(ik,e){return e.value-ik.value}function gC(e){return hu.merge(e.map(function(ik){return(ik.children||[]).map(function(il){return{source:ik,target:il}})}))}hu.layout.partition=function(){var il=hu.layout.hierarchy(),im=[1,1];function e(ir,iw,iy,ix){var ip=ir.children;ir.x=iw;ir.y=ir.depth*ix;ir.dx=iy;ir.dy=ix;if(ip&&(iq=ip.length)){var it=-1,iq,iv,iu;iy=ir.value?iy/ir.value:0;while(++it<iq){e(iv=ip[it],iw,iu=iv.value*iy,ix);iw+=iu}}}function io(ir){var iq=ir.children,it=0;if(iq&&(iu=iq.length)){var ip=-1,iu;while(++ip<iu){it=Math.max(it,io(iq[ip]))}}return 1+it}function ik(ir,iq){var ip=il.call(this,ir,iq);e(ip[0],0,im[0],im[1]/io(ip[0]));return ip}ik.size=function(ip){if(!arguments.length){return im}im=ip;return ik};return gy(ik,il)};hu.layout.pie=function(){var ip=Number,im=aa,il=0,ik=ge,io=0;function e(iv){var it=iv.length,iB=iv.map(function(iE,iD){return +ip.call(e,iE,iD)}),iy=+(typeof il==="function"?il.apply(this,arguments):il),iC=(typeof ik==="function"?ik.apply(this,arguments):ik)-iy,ir=Math.min(Math.abs(iC)/it,+(typeof io==="function"?io.apply(this,arguments):io)),iz=ir*(iC<0?-1:1),ix=hu.sum(iB),iu=ix?(iC-it*iz)/ix:0,iw=hu.range(it),iq=[],iA;if(im!=null){iw.sort(im===aa?function(iE,iD){return iB[iD]-iB[iE]}:function(iE,iD){return im(iv[iE],iv[iD])})}iw.forEach(function(iD){iq[iD]={data:iv[iD],value:iA=iB[iD],startAngle:iy,endAngle:iy+=iA*iu+iz,padAngle:ir}});return iq}e.value=function(iq){if(!arguments.length){return ip}ip=iq;return e};e.sort=function(iq){if(!arguments.length){return im}im=iq;return e};e.startAngle=function(iq){if(!arguments.length){return il}il=iq;return e};e.endAngle=function(iq){if(!arguments.length){return ik}ik=iq;return e};e.padAngle=function(iq){if(!arguments.length){return io}io=iq;return e};return e};var aa={};hu.layout.stack=function(){var im=gr,il=bY,ip=fL,io=fM,ik=au,iq=ar;function e(iz,iB){if(!(it=iz.length)){return iz}var iA=iz.map(function(iE,iD){return im.call(e,iE,iD)});var iC=iA.map(function(iD){return iD.map(function(iE,iF){return[ik.call(e,iE,iF),iq.call(e,iE,iF)]})});var iw=il.call(e,iC,iB);iA=hu.permute(iA,iw);iC=hu.permute(iC,iw);var iv=ip.call(e,iC,iB);var iu=iA[0].length,it,iy,ix,ir;for(ix=0;ix<iu;++ix){io.call(e,iA[0][ix],ir=iv[ix],iC[0][ix][1]);for(iy=1;iy<it;++iy){io.call(e,iA[iy][ix],ir+=iC[iy-1][ix][1],iC[iy][ix][1])}}return iz}e.values=function(ir){if(!arguments.length){return im}im=ir;return e};e.order=function(ir){if(!arguments.length){return il}il=typeof ir==="function"?ir:bc.get(ir)||bY;return e};e.offset=function(ir){if(!arguments.length){return ip}ip=typeof ir==="function"?ir:am.get(ir)||fL;return e};e.x=function(ir){if(!arguments.length){return ik}ik=ir;return e};e.y=function(ir){if(!arguments.length){return iq}iq=ir;return e};e.out=function(ir){if(!arguments.length){return io}io=ir;return e};return e};function au(e){return e.x}function ar(e){return e.y}function fM(ik,e,il){ik.y0=e;ik.y=il}var bc=hu.map({"inside-out":function(io){var il=io.length,ip,im,iu=io.map(b3),iq=io.map(dA),ir=hu.range(il).sort(function(ix,iw){return iu[ix]-iu[iw]}),it=0,e=0,iv=[],ik=[];for(ip=0;ip<il;++ip){im=ir[ip];if(it<e){it+=iq[im];iv.push(im)}else{e+=iq[im];ik.push(im)}}return ik.reverse().concat(iv)},reverse:function(e){return hu.range(e.length).reverse()},"default":bY});var am=hu.map({silhouette:function(io){var ik=io.length,il=io[0].length,iq=[],ir=0,ip,im,e,it=[];for(im=0;im<il;++im){for(ip=0,e=0;ip<ik;ip++){e+=io[ip][im][1]}if(e>ir){ir=e}iq.push(e)}for(im=0;im<il;++im){it[im]=(ir-iq[im])/2}return it},wiggle:function(iq){var ik=iq.length,iu=iq[0],il=iu.length,ir,ip,io,ix,iw,it,iy,e,im,iv=[];iv[0]=e=im=0;for(ip=1;ip<il;++ip){for(ir=0,ix=0;ir<ik;++ir){ix+=iq[ir][ip][1]}for(ir=0,iw=0,iy=iu[ip][0]-iu[ip-1][0];ir<ik;++ir){for(io=0,it=(iq[ir][ip][1]-iq[ir][ip-1][1])/(2*iy);io<ir;++io){it+=(iq[io][ip][1]-iq[io][ip-1][1])/iy}iw+=it*iq[ir][ip][1]}iv[ip]=e-=ix?iw/ix*iy:0;if(e<im){im=e}}for(ip=0;ip<il;++ip){iv[ip]-=im}return iv},expand:function(ip){var ir=ip.length,e=ip[0].length,ik=1/ir,im,il,iq,io=[];for(il=0;il<e;++il){for(im=0,iq=0;im<ir;im++){iq+=ip[im][il][1]}if(iq){for(im=0;im<ir;im++){ip[im][il][1]/=iq}}else{for(im=0;im<ir;im++){ip[im][il][1]=ik}}}for(il=0;il<e;++il){io[il]=0}return io},zero:fL});function bY(e){return hu.range(e.length)}function fL(im){var ik=-1,e=im[0].length,il=[];while(++ik<e){il[ik]=0}return il}function b3(ip){var im=1,il=0,ik=ip[0][1],e,io=ip.length;for(;im<io;++im){if((e=ip[im][1])>ik){il=im;ik=e}}return il}function dA(e){return e.reduce(fK,0)}function fK(e,ik){return e+ik[1]}hu.layout.histogram=function(){var io=true,ik=Number,e=bq,il=hD;function im(it,iu){var iz=[],ix=it.map(ik,this),iv=e.call(this,ix,iu),iy=il.call(this,iv,ix,iu),iA,iu=-1,ip=ix.length,iq=iy.length-1,ir=io?1:1/ip,iw;while(++iu<iq){iA=iz[iu]=[];iA.dx=iy[iu+1]-(iA.x=iy[iu]);iA.y=0}if(iq>0){iu=-1;while(++iu<ip){iw=ix[iu];if(iw>=iv[0]&&iw<=iv[1]){iA=iz[hu.bisect(iy,iw,1,iq)-1];iA.y+=ir;iA.push(it[iu])}}}return iz}im.value=function(ip){if(!arguments.length){return ik}ik=ip;return im};im.range=function(ip){if(!arguments.length){return e}e=V(ip);return im};im.bins=function(ip){if(!arguments.length){return il}il=typeof ip==="number"?function(iq){return g(iq,ip)}:V(ip);return im};im.frequency=function(ip){if(!arguments.length){return io}io=!!ip;return im};return im};function hD(ik,e){return g(ik,Math.ceil(Math.log(e.length)/Math.LN2+1))}function g(im,ip){var il=-1,ik=+im[0],e=(im[1]-ik)/ip,io=[];while(++il<=ip){io[il]=e*il+ik}return io}function bq(e){return[hu.min(e),hu.max(e)]}hu.layout.pack=function(){var ik=hu.layout.hierarchy().sort(eH),io=0,im=[1,1],e;function il(ix,it){var ir=ik.call(this,ix,it),iq=ir[0],ip=im[0],iu=im[1],iv=e==null?Math.sqrt:typeof e==="function"?e:function(){return e};iq.x=iq.y=0;gS(iq,function(iy){iy.r=+iv(iy.value)});gS(iq,Z);if(io){var iw=io*(e?1:Math.max(2*iq.r/ip,2*iq.r/iu))/2;gS(iq,function(iy){iy.r+=iw});gS(iq,Z);gS(iq,function(iy){iy.r-=iw})}fu(iq,ip/2,iu/2,e?1:1/Math.max(2*iq.r/ip,2*iq.r/iu));return ir}il.size=function(ip){if(!arguments.length){return im}im=ip;return il};il.radius=function(ip){if(!arguments.length){return e}e=ip==null||typeof ip==="function"?ip:+ip;return il};il.padding=function(ip){if(!arguments.length){return io}io=+ip;return il};return gy(il,ik)};function eH(ik,e){return ik.value-e.value}function bX(ik,e){var il=ik._pack_next;ik._pack_next=e;e._pack_prev=ik;e._pack_next=il;il._pack_prev=e}function bl(ik,e){ik._pack_next=e;e._pack_prev=ik}function et(il,e){var im=e.x-il.x,ik=e.y-il.y,io=il.r+e.r;return 0.999*io*io>im*im+ik*ik}function Z(iw){if(!(iv=iw.children)||!(iu=iv.length)){return}var iv,iA=Infinity,iE=-Infinity,e=Infinity,io=-Infinity,iD,iC,iB,iz,iy,ix,iu;function il(iF){iA=Math.min(iF.x-iF.r,iA);iE=Math.max(iF.x+iF.r,iE);e=Math.min(iF.y-iF.r,e);io=Math.max(iF.y+iF.r,io)}iv.forEach(aX);iD=iv[0];iD.x=-iD.r;iD.y=0;il(iD);if(iu>1){iC=iv[1];iC.x=iC.r;iC.y=0;il(iC);if(iu>2){iB=iv[2];bk(iD,iC,iB);il(iB);bX(iD,iB);iD._pack_prev=iB;bX(iB,iC);iC=iD._pack_next;for(iz=3;iz<iu;iz++){bk(iD,iC,iB=iv[iz]);var ik=0,ip=1,im=1;for(iy=iC._pack_next;iy!==iC;iy=iy._pack_next,ip++){if(et(iy,iB)){ik=1;break}}if(ik==1){for(ix=iD._pack_prev;ix!==iy._pack_prev;ix=ix._pack_prev,im++){if(et(ix,iB)){break}}}if(ik){if(ip<im||ip==im&&iC.r<iD.r){bl(iD,iC=iy)}else{bl(iD=ix,iC)}iz--}else{bX(iD,iB);iC=iB;il(iB)}}}}var ir=(iA+iE)/2,iq=(e+io)/2,it=0;for(iz=0;iz<iu;iz++){iB=iv[iz];iB.x-=ir;iB.y-=iq;it=Math.max(it,iB.r+Math.sqrt(iB.x*iB.x+iB.y*iB.y))}iw.r=it;iv.forEach(eW)}function aX(e){e._pack_next=e._pack_prev=e}function eW(e){delete e._pack_next;delete e._pack_prev}function fu(io,e,iq,ik){var im=io.children;io.x=e+=ik*io.x;io.y=iq+=ik*io.y;io.r*=ik;if(im){var il=-1,ip=im.length;while(++il<ip){fu(im[il],e,iq,ik)}}}function bk(io,il,e){var iq=io.r+e.r,iu=il.x-io.x,ir=il.y-io.y;if(iq&&(iu||ir)){var it=il.r+e.r,ip=iu*iu+ir*ir;it*=it;iq*=iq;var im=0.5+(iq-it)/(2*ip),ik=Math.sqrt(Math.max(0,2*it*(iq+ip)-(iq-=ip)*iq-it*it))/(2*ip);e.x=io.x+im*iu+ik*ir;e.y=io.y+im*ir-ik*iu}else{e.x=io.x+iq;e.y=io.y}}hu.layout.tree=function(){var io=hu.layout.hierarchy().sort(null).value(null),ik=dG,it=[1,1],ip=null;function iu(iC,iz){var iw=io.call(this,iC,iz),iE=iw[0],iD=ir(iE);gS(iD,im),iD.parent.m=-iD.z;eB(iD,iq);if(ip){eB(iE,il)}else{var ix=iE,iF=iE,iv=iE;eB(iE,function(iG){if(iG.x<ix.x){ix=iG}if(iG.x>iF.x){iF=iG}if(iG.depth>iv.depth){iv=iG}});var iy=ik(ix,iF)/2-ix.x,iB=it[0]/(iF.x+ik(iF,ix)/2+iy),iA=it[1]/(iv.depth||1);eB(iE,function(iG){iG.x=(iG.x+iy)*iB;iG.y=iG.depth*iA})}return iw}function ir(iy){var iw={A:null,children:[iy]},iv=[iw],ix;while((ix=iv.pop())!=null){for(var iA=ix.children,iC,iz=0,iB=iA.length;iz<iB;++iz){iv.push((iA[iz]=iC={_:iA[iz],parent:ix,children:(iC=iA[iz].children)&&iC.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:iz}).a=iC)}}return iw.children[0]}function im(iw){var iy=iw.children,iz=iw.parent.children,iv=iw.i?iz[iw.i-1]:null;if(iy.length){dJ(iw);var ix=(iy[0].z+iy[iy.length-1].z)/2;if(iv){iw.z=iv.z+ik(iw._,iv._);iw.m=iw.z-ix}else{iw.z=ix}}else{if(iv){iw.z=iv.z+ik(iw._,iv._)}}iw.parent.A=e(iw,iv,iw.parent.A||iz[0])}function iq(iv){iv._.x=iv.z+iv.parent.m;iv.m+=iv.parent.m}function e(iG,iF,iA){if(iF){var ix=iG,iw=iG,iz=iF,iy=ix.parent.children[0],iC=ix.m,iB=iw.m,iE=iz.m,iD=iy.m,iv;while(iz=aH(iz),ix=h4(ix),iz&&ix){iy=h4(iy);iw=aH(iw);iw.a=iG;iv=iz.z+iE-ix.z-iC+ik(iz._,ix._);if(iv>0){h6(f4(iz,iG,iA),iG,iv);iC+=iv;iB+=iv}iE+=iz.m;iC+=ix.m;iD+=iy.m;iB+=iw.m}if(iz&&!aH(iw)){iw.t=iz;iw.m+=iE-iB}if(ix&&!h4(iy)){iy.t=ix;iy.m+=iC-iD;iA=iG}}return iA}function il(iv){iv.x*=it[0];iv.y=iv.depth*it[1]}iu.separation=function(iv){if(!arguments.length){return ik}ik=iv;return iu};iu.size=function(iv){if(!arguments.length){return ip?null:it}ip=(it=iv)==null?il:null;return iu};iu.nodeSize=function(iv){if(!arguments.length){return ip?it:null}ip=(it=iv)==null?null:il;return iu};return gy(iu,io)};function dG(ik,e){return ik.parent==e.parent?1:2}function h4(e){var ik=e.children;return ik.length?ik[0]:e.t}function aH(e){var ik=e.children,il;return(il=ik.length)?ik[il-1]:e.t}function h6(il,ik,e){var im=e/(ik.i-il.i);ik.c-=im;ik.s+=e;il.c+=im;ik.z+=e;ik.m+=e}function dJ(il){var ik=0,ip=0,io=il.children,im=io.length,e;while(--im>=0){e=io[im];e.z+=ik;e.m+=ik;ik+=e.s+(ip+=e.c)}}function f4(ik,e,il){return ik.a.parent===e.parent?ik.a:il}hu.layout.cluster=function(){var il=hu.layout.hierarchy().sort(null).value(null),io=dG,im=[1,1],ik=false;function e(iv,iu){var ip=il.call(this,iv,iu),iw=ip[0],ix,iy=0;gS(iw,function(iB){var iA=iB.children;if(iA&&iA.length){iB.x=bE(iA);iB.y=bD(iA)}else{iB.x=ix?iy+=io(iB,ix):0;iB.y=0;ix=iB}});var it=eJ(iw),iz=dM(iw),ir=it.x-io(it,iz)/2,iq=iz.x+io(iz,it)/2;gS(iw,ik?function(iA){iA.x=(iA.x-iw.x)*im[0];iA.y=(iw.y-iA.y)*im[1]}:function(iA){iA.x=(iA.x-ir)/(iq-ir)*im[0];iA.y=(1-(iw.y?iA.y/iw.y:1))*im[1]});return ip}e.separation=function(ip){if(!arguments.length){return io}io=ip;return e};e.size=function(ip){if(!arguments.length){return ik?null:im}ik=(im=ip)==null;return e};e.nodeSize=function(ip){if(!arguments.length){return ik?im:null}ik=(im=ip)!=null;return e};return gy(e,il)};function bD(e){return 1+hu.max(e,function(ik){return ik.y})}function bE(e){return e.reduce(function(ik,il){return ik+il.x},0)/e.length}function eJ(ik){var e=ik.children;return e&&e.length?eJ(e[0]):ik}function dM(ik){var e=ik.children,il;return e&&(il=e.length)?dM(e[il-1]):ik}hu.layout.treemap=function(){var it=hu.layout.hierarchy(),ix=Math.round,iz=[1,1],iu=null,e=fd,iv=false,iq,ip="squarify",ir=0.5*(1+Math.sqrt(5));function ik(iC,iA){var iB=-1,iF=iC.length,iE,iD;while(++iB<iF){iD=(iE=iC[iB]).value*(iA<0?0:iA);iE.area=isNaN(iD)||iD<=0?0:iD}}function im(iE){var iB=iE.children;if(iB&&iB.length){var iH=e(iE),iJ=[],iG=iB.slice(),iA,iF=Infinity,iD,iI=ip==="slice"?iH.dx:ip==="dice"?iH.dy:ip==="slice-dice"?iE.depth&1?iH.dy:iH.dx:Math.min(iH.dx,iH.dy),iC;ik(iG,iH.dx*iH.dy/iE.value);iJ.area=0;while((iC=iG.length)>0){iJ.push(iA=iG[iC-1]);iJ.area+=iA.area;if(ip!=="squarify"||(iD=il(iJ,iI))<=iF){iG.pop();iF=iD}else{iJ.area-=iJ.pop().area;io(iJ,iI,iH,false);iI=Math.min(iH.dx,iH.dy);iJ.length=iJ.area=0;iF=Infinity}}if(iJ.length){io(iJ,iI,iH,true);iJ.length=iJ.area=0}iB.forEach(im)}}function iy(iD){var iA=iD.children;if(iA&&iA.length){var iC=e(iD),iB=iA.slice(),iF,iE=[];ik(iB,iC.dx*iC.dy/iD.value);iE.area=0;while(iF=iB.pop()){iE.push(iF);iE.area+=iF.area;if(iF.z!=null){io(iE,iF.z?iC.dx:iC.dy,iC,!iB.length);iE.length=iE.area=0}}iA.forEach(iy)}}function il(iF,iB){var iD=iF.area,iE,iH=0,iA=Infinity,iC=-1,iG=iF.length;while(++iC<iG){if(!(iE=iF[iC].area)){continue}if(iE<iA){iA=iE}if(iE>iH){iH=iE}}iD*=iD;iB*=iB;return iD?Math.max(iB*iH*ir/iD,iD/(iB*iA*ir)):Infinity}function io(iJ,iI,iE,iH){var iC=-1,iB=iJ.length,iF=iE.x,iD=iE.y,iG=iI?ix(iJ.area/iI):0,iA;if(iI==iE.dx){if(iH||iG>iE.dy){iG=iE.dy}while(++iC<iB){iA=iJ[iC];iA.x=iF;iA.y=iD;iA.dy=iG;iF+=iA.dx=Math.min(iE.x+iE.dx-iF,iG?ix(iA.area/iG):0)}iA.z=true;iA.dx+=iE.x+iE.dx-iF;iE.y+=iG;iE.dy-=iG}else{if(iH||iG>iE.dx){iG=iE.dx}while(++iC<iB){iA=iJ[iC];iA.x=iF;iA.y=iD;iA.dx=iG;iD+=iA.dy=Math.min(iE.y+iE.dy-iD,iG?ix(iA.area/iG):0)}iA.z=false;iA.dy+=iE.y+iE.dy-iD;iE.x+=iG;iE.dx-=iG}}function iw(iC){var iB=iq||it(iC),iA=iB[0];iA.x=iA.y=0;if(iA.value){iA.dx=iz[0],iA.dy=iz[1]}else{iA.dx=iA.dy=0}if(iq){it.revalue(iA)}ik([iA],iA.dx*iA.dy/iA.value);(iq?iy:im)(iA);if(iv){iq=iB}return iB}iw.size=function(iA){if(!arguments.length){return iz}iz=iA;return iw};iw.padding=function(iA){if(!arguments.length){return iu}function iD(iE){var iF=iA.call(iw,iE,iE.depth);return iF==null?fd(iE):a6(iE,typeof iF==="number"?[iF,iF,iF,iF]:iF)}function iC(iE){return a6(iE,iA)}var iB;e=(iu=iA)==null?fd:(iB=typeof iA)==="function"?iD:iB==="number"?(iA=[iA,iA,iA,iA],iC):iC;return iw};iw.round=function(iA){if(!arguments.length){return ix!=Number}ix=iA?Math.round:Number;return iw};iw.sticky=function(iA){if(!arguments.length){return iv}iv=iA;iq=null;return iw};iw.ratio=function(iA){if(!arguments.length){return ir}ir=iA;return iw};iw.mode=function(iA){if(!arguments.length){return ip}ip=iA+"";return iw};return gy(iw,it)};function fd(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function a6(im,io){var e=im.x+io[3],ip=im.y+io[0],il=im.dx-io[1]-io[3],ik=im.dy-io[0]-io[2];if(il<0){e+=il/2;il=0}if(ik<0){ip+=ik/2;ik=0}return{x:e,y:ip,dx:il,dy:ik}}hu.random={normal:function(ik,e){var il=arguments.length;if(il<2){e=1}if(il<1){ik=0}return function(){var im,ip,io;do{im=Math.random()*2-1;ip=Math.random()*2-1;io=im*im+ip*ip}while(!io||io>1);return ik+e*im*Math.sqrt(-2*Math.log(io)/io)}},logNormal:function(){var e=hu.random.normal.apply(hu,arguments);return function(){return Math.exp(e())}},bates:function(e){var ik=hu.random.irwinHall(e);return function(){return ik()/e}},irwinHall:function(e){return function(){for(var il=0,ik=0;ik<e;ik++){il+=Math.random()}return il}}};hu.scale={};function ez(ik){var il=ik[0],e=ik[ik.length-1];return il<e?[il,e]:[e,il]}function a5(e){return e.rangeExtent?e.rangeExtent():ez(e.range())}function aM(io,e,ip,il){var ik=ip(io[0],io[1]),im=il(e[0],e[1]);return function(iq){return im(ik(iq))}}function go(iq,io){var ip=0,im=iq.length-1,il=iq[ip],ik=iq[im],e;if(ik<il){e=ip,ip=im,im=e;e=il,il=ik,ik=e}iq[ip]=io.floor(il);iq[im]=io.ceil(ik);return iq}function bd(e){return e?{floor:function(ik){return Math.floor(ik/e)*e},ceil:function(ik){return Math.ceil(ik/e)*e}}:eI}var eI={floor:gr,ceil:gr};function Q(iq,ik,ir,io){var im=[],ip=[],il=0,e=Math.min(iq.length,ik.length)-1;if(iq[e]<iq[0]){iq=iq.slice().reverse();ik=ik.slice().reverse()}while(++il<=e){im.push(ir(iq[il-1],iq[il]));ip.push(io(ik[il-1],ik[il]))}return function(it){var iu=hu.bisect(iq,it,1,e)-1;return ip[iu](im[iu](it))}}hu.scale.linear=function(){return ep([0,1],[0,1],fJ,false)};function ep(ip,im,io,ir){var il,ik;function e(){var it=Math.min(ip.length,im.length)>2?Q:aM,iu=ir?aF:hC;il=it(ip,im,iu,io);ik=it(im,ip,iu,fJ);return iq}function iq(it){return il(it)}iq.invert=function(it){return ik(it)};iq.domain=function(it){if(!arguments.length){return ip}ip=it.map(Number);return e()};iq.range=function(it){if(!arguments.length){return im}im=it;return e()};iq.rangeRound=function(it){return iq.range(it).interpolate(fE)};iq.clamp=function(it){if(!arguments.length){return ir}ir=it;return e()};iq.interpolate=function(it){if(!arguments.length){return io}io=it;return e()};iq.ticks=function(it){return e8(ip,it)};iq.tickFormat=function(it,iu){return fg(ip,it,iu)};iq.nice=function(it){aS(ip,it);return e()};iq.copy=function(){return ep(ip,im,io,ir)};return e()}function gg(ik,e){return hu.rebind(ik,e,"range","rangeRound","interpolate","clamp")}function aS(ik,e){go(ik,bd(s(ik,e)[2]));go(ik,bd(s(ik,e)[2]));return ik}function s(ip,e){if(e==null){e=10}var il=ez(ip),ik=il[1]-il[0],io=Math.pow(10,Math.floor(Math.log(ik/e)/Math.LN10)),im=e/ik*io;if(im<=0.15){io*=10}else{if(im<=0.35){io*=5}else{if(im<=0.75){io*=2}}}il[0]=Math.ceil(il[0]/io)*io;il[1]=Math.floor(il[1]/io)*io+io*0.5;il[2]=io;return il}function e8(ik,e){return hu.range.apply(hu,s(ik,e))}function fg(io,e,ip){var ik=s(io,e);if(ip){var il=cF.exec(ip);il.shift();if(il[8]==="s"){var im=hu.formatPrefix(Math.max(cM(ik[0]),cM(ik[1])));if(!il[7]){il[7]="."+g2(im.scale(ik[2]))}il[8]="f";ip=hu.format(il.join(""));return function(iq){return ip(im.scale(iq))+im.symbol}}if(!il[7]){il[7]="."+C(il[8],ik)}ip=il.join("")}else{ip=",."+g2(ik[2])+"f"}return hu.format(ip)}var h3={s:1,g:1,p:1,r:1,e:1};function g2(e){return -Math.floor(Math.log(e)/Math.LN10+0.01)}function C(ik,e){var il=g2(e[2]);return ik in h3?Math.abs(il-g2(Math.max(cM(e[0]),cM(e[1]))))+ +(ik!=="e"):il-(ik==="%")*2}hu.scale.log=function(){return gM(hu.scale.linear().domain([0,1]),10,true,[1,10])};function gM(ik,ip,e,io){function il(ir){return(e?Math.log(ir<0?0:ir):-Math.log(ir>0?0:-ir))/Math.log(ip)}function im(ir){return e?Math.pow(ip,ir):-Math.pow(ip,-ir)}function iq(ir){return ik(il(ir))}iq.invert=function(ir){return im(ik.invert(ir))};iq.domain=function(ir){if(!arguments.length){return io}e=ir[0]>=0;ik.domain((io=ir.map(Number)).map(il));return iq};iq.base=function(ir){if(!arguments.length){return ip}ip=+ir;ik.domain(io.map(il));return iq};iq.nice=function(){var ir=go(io.map(il),e?Math:gR);ik.domain(ir);io=ir.map(im);return iq};iq.ticks=function(){var ix=ez(io),iy=[],iv=ix[0],it=ix[1],iw=Math.floor(il(iv)),iu=Math.ceil(il(it)),iz=ip%1?2:ip;if(isFinite(iu-iw)){if(e){for(;iw<iu;iw++){for(var ir=1;ir<iz;ir++){iy.push(im(iw)*ir)}}iy.push(im(iw))}else{iy.push(im(iw));for(;iw++<iu;){for(var ir=iz-1;ir>0;ir--){iy.push(im(iw)*ir)}}}for(iw=0;iy[iw]<iv;iw++){}for(iu=iy.length;iy[iu-1]>it;iu--){}iy=iy.slice(iw,iu)}return iy};iq.tickFormat=function(iu,it){if(!arguments.length){return dz}if(arguments.length<2){it=dz}else{if(typeof it!=="function"){it=hu.format(it)}}var ir=Math.max(1,ip*iu/iq.ticks().length);return function(iw){var iv=iw/im(Math.round(il(iw)));if(iv*ip<ip-0.5){iv*=ip}return iv<=ir?it(iw):""}};iq.copy=function(){return gM(ik.copy(),ip,e,io)};return gg(iq,ik)}var dz=hu.format(".0e"),gR={floor:function(e){return -Math.ceil(-e)},ceil:function(e){return -Math.floor(-e)}};hu.scale.pow=function(){return gx(hu.scale.linear(),1,[0,1])};function gx(e,im,il){var ik=fZ(im),io=fZ(1/im);function ip(iq){return e(ik(iq))}ip.invert=function(iq){return io(e.invert(iq))};ip.domain=function(iq){if(!arguments.length){return il}e.domain((il=iq.map(Number)).map(ik));return ip};ip.ticks=function(iq){return e8(il,iq)};ip.tickFormat=function(iq,ir){return fg(il,iq,ir)};ip.nice=function(iq){return ip.domain(aS(il,iq))};ip.exponent=function(iq){if(!arguments.length){return im}ik=fZ(im=iq);io=fZ(1/im);e.domain(il.map(ik));return ip};ip.copy=function(){return gx(e.copy(),im,il)};return gg(ip,e)}function fZ(ik){return function(e){return e<0?-Math.pow(-e,ik):Math.pow(e,ik)}}hu.scale.sqrt=function(){return hu.scale.pow().exponent(0.5)};hu.scale.ordinal=function(){return cy([],{t:"range",a:[[]]})};function cy(ip,il){var io,ik,im;function iq(ir){return ik[((io.get(ir)||(il.t==="range"?io.set(ir,ip.push(ir)):NaN))-1)%ik.length]}function e(it,ir){return hu.range(ip.length).map(function(iu){return it+ir*iu})}iq.domain=function(ir){if(!arguments.length){return ip}ip=[];io=new aO();var iu=-1,iv=ir.length,it;while(++iu<iv){if(!io.has(it=ir[iu])){io.set(it,ip.push(it))}}return iq[il.t].apply(iq,il.a)};iq.range=function(ir){if(!arguments.length){return ik}ik=ir;im=0;il={t:"range",a:arguments};return iq};iq.rangePoints=function(ir,iv){if(arguments.length<2){iv=0}var iw=ir[0],it=ir[1],iu=ip.length<2?(iw=(iw+it)/2,0):(it-iw)/(ip.length-1+iv);ik=e(iw+iu*iv/2,iu);im=0;il={t:"rangePoints",a:arguments};return iq};iq.rangeRoundPoints=function(ir,iv){if(arguments.length<2){iv=0}var iw=ir[0],it=ir[1],iu=ip.length<2?(iw=it=Math.round((iw+it)/2),0):(it-iw)/(ip.length-1+iv)|0;ik=e(iw+Math.round(iu*iv/2+(it-iw-(ip.length-1+iv)*iu)/2),iu);im=0;il={t:"rangeRoundPoints",a:arguments};return iq};iq.rangeBands=function(it,ix,ir){if(arguments.length<2){ix=0}if(arguments.length<3){ir=ix}var iu=it[1]<it[0],iy=it[iu-0],iv=it[1-iu],iw=(iv-iy)/(ip.length-ix+2*ir);ik=e(iy+iw*ir,iw);if(iu){ik.reverse()}im=iw*(1-ix);il={t:"rangeBands",a:arguments};return iq};iq.rangeRoundBands=function(it,ix,ir){if(arguments.length<2){ix=0}if(arguments.length<3){ir=ix}var iu=it[1]<it[0],iy=it[iu-0],iv=it[1-iu],iw=Math.floor((iv-iy)/(ip.length-ix+2*ir));ik=e(iy+Math.round((iv-iy-(ip.length-ix)*iw)/2),iw);if(iu){ik.reverse()}im=Math.round(iw*(1-ix));il={t:"rangeRoundBands",a:arguments};return iq};iq.rangeBand=function(){return im};iq.rangeExtent=function(){return ez(il.a[0])};iq.copy=function(){return cy(ip,il)};return iq.domain(ip)}hu.scale.category10=function(){return hu.scale.ordinal().range(cG)};hu.scale.category20=function(){return hu.scale.ordinal().range(co)};hu.scale.category20b=function(){return hu.scale.ordinal().range(hi)};hu.scale.category20c=function(){return hu.scale.ordinal().range(hg)};var cG=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(dD);var co=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(dD);var hi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(dD);var hg=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(dD);hu.scale.quantile=function(){return G([],[])};function G(il,ik){var im;function e(){var ip=0,iq=ik.length;im=[];while(++ip<iq){im[ip-1]=hu.quantile(il,ip/iq)}return io}function io(ip){if(!isNaN(ip=+ip)){return ik[hu.bisect(im,ip)]}}io.domain=function(ip){if(!arguments.length){return il}il=ip.map(hz).filter(bi).sort(fp);return e()};io.range=function(ip){if(!arguments.length){return ik}ik=ip;return e()};io.quantiles=function(){return im};io.invertExtent=function(ip){ip=ik.indexOf(ip);return ip<0?[NaN,NaN]:[ip>0?im[ip-1]:il[0],ip<im.length?im[ip]:il[il.length-1]]};io.copy=function(){return G(il,ik)};return e()}hu.scale.quantize=function(){return dL(0,1,[0,1])};function dL(io,il,ik){var ip,im;function iq(ir){return ik[Math.max(0,Math.min(im,Math.floor(ip*(ir-io))))]}function e(){ip=ik.length/(il-io);im=ik.length-1;return iq}iq.domain=function(ir){if(!arguments.length){return[io,il]}io=+ir[0];il=+ir[ir.length-1];return e()};iq.range=function(ir){if(!arguments.length){return ik}ik=ir;return e()};iq.invertExtent=function(ir){ir=ik.indexOf(ir);ir=ir<0?NaN:ir/ip+io;return[ir,ir+1/ip]};iq.copy=function(){return dL(io,il,ik)};return e()}hu.scale.threshold=function(){return gb([0.5],[0,1])};function gb(ik,e){function il(im){if(im<=im){return e[hu.bisect(ik,im)]}}il.domain=function(im){if(!arguments.length){return ik}ik=im;return il};il.range=function(im){if(!arguments.length){return e}e=im;return il};il.invertExtent=function(im){im=e.indexOf(im);return[ik[im-1],ik[im]]};il.copy=function(){return gb(ik,e)};return il}hu.scale.identity=function(){return e0([0,1])};function e0(ik){function e(il){return +il}e.invert=e;e.domain=e.range=function(il){if(!arguments.length){return ik}ik=il.map(e);return e};e.ticks=function(il){return e8(ik,il)};e.tickFormat=function(il,im){return fg(ik,il,im)};e.copy=function(){return e0(ik)};return e}hu.svg={};function du(){return 0}hu.svg.arc=function(){var ir=bI,im=cY,io=du,it=f0,iq=gm,ik=av,il=bS;function e(){var iD=Math.max(0,+ir.apply(this,arguments)),iC=Math.max(0,+im.apply(this,arguments)),iY=iq.apply(this,arguments)-ew,iX=ik.apply(this,arguments)-ew,iI=Math.abs(iX-iY),iL=iY>iX?0:1;if(iC<iD){iV=iC,iC=iD,iD=iV}if(iI>=gL){return ip(iC,iL)+(iD?ip(iD,1-iL):"")+"Z"}var iV,iM,iP,iz,i2=0,iZ=0,iH,iu,iG,i7,iF,i6,iE,i4,iW=[];if(iz=(+il.apply(this,arguments)||0)/2){iP=it===f0?Math.sqrt(iD*iD+iC*iC):+it.apply(this,arguments);if(!iL){iZ*=-1}if(iC){iZ=cl(iP/iC*Math.sin(iz))}if(iD){i2=cl(iP/iD*Math.sin(iz))}}if(iC){iH=iC*Math.cos(iY+iZ);iu=iC*Math.sin(iY+iZ);iG=iC*Math.cos(iX-iZ);i7=iC*Math.sin(iX-iZ);var iA=Math.abs(iX-iY-2*iZ)<=gk?0:1;if(iZ&&hK(iH,iu,iG,i7)===iL^iA){var iN=(iY+iX)/2;iH=iC*Math.cos(iN);iu=iC*Math.sin(iN);iG=i7=null}}else{iH=iu=0}if(iD){iF=iD*Math.cos(iX-i2);i6=iD*Math.sin(iX-i2);iE=iD*Math.cos(iY+i2);i4=iD*Math.sin(iY+i2);var iB=Math.abs(iY-iX+2*i2)<=gk?0:1;if(i2&&hK(iF,i6,iE,i4)===1-iL^iB){var iO=(iY+iX)/2;iF=iD*Math.cos(iO);i6=iD*Math.sin(iO);iE=i4=null}}else{iF=i6=0}if(iI>gt&&(iV=Math.min(Math.abs(iC-iD)/2,+io.apply(this,arguments)))>0.001){iM=iD<iC^iL?0:1;var i3=iV,i5=iV;if(iI<gk){var iS=iE==null?[iF,i6]:iG==null?[iH,iu]:gp([iH,iu],[iE,i4],[iG,i7],[iF,i6]),iy=iH-iS[0],ix=iu-iS[1],iU=iG-iS[0],iT=i7-iS[1],iv=1/Math.sin(Math.acos((iy*iU+ix*iT)/(Math.sqrt(iy*iy+ix*ix)*Math.sqrt(iU*iU+iT*iT)))/2),iQ=Math.sqrt(iS[0]*iS[0]+iS[1]*iS[1]);i5=Math.min(iV,(iD-iQ)/(iv-1));i3=Math.min(iV,(iC-iQ)/(iv+1))}if(iG!=null){var iK=fl(iE==null?[iF,i6]:[iE,i4],[iH,iu],iC,i3,iL),iw=fl([iG,i7],[iF,i6],iC,i3,iL);if(iV===i3){iW.push("M",iK[0],"A",i3,",",i3," 0 0,",iM," ",iK[1],"A",iC,",",iC," 0 ",1-iL^hK(iK[1][0],iK[1][1],iw[1][0],iw[1][1]),",",iL," ",iw[1],"A",i3,",",i3," 0 0,",iM," ",iw[0])}else{iW.push("M",iK[0],"A",i3,",",i3," 0 1,",iM," ",iw[0])}}else{iW.push("M",iH,",",iu)}if(iE!=null){var iJ=fl([iH,iu],[iE,i4],iD,-i5,iL),iR=fl([iF,i6],iG==null?[iH,iu]:[iG,i7],iD,-i5,iL);if(iV===i5){iW.push("L",iR[0],"A",i5,",",i5," 0 0,",iM," ",iR[1],"A",iD,",",iD," 0 ",iL^hK(iR[1][0],iR[1][1],iJ[1][0],iJ[1][1]),",",1-iL," ",iJ[1],"A",i5,",",i5," 0 0,",iM," ",iJ[0])}else{iW.push("L",iR[0],"A",i5,",",i5," 0 0,",iM," ",iJ[0])}}else{iW.push("L",iF,",",i6)}}else{iW.push("M",iH,",",iu);if(iG!=null){iW.push("A",iC,",",iC," 0 ",iA,",",iL," ",iG,",",i7)}iW.push("L",iF,",",i6);if(iE!=null){iW.push("A",iD,",",iD," 0 ",iB,",",1-iL," ",iE,",",i4)}}iW.push("Z");return iW.join("")}function ip(iv,iu){return"M0,"+iv+"A"+iv+","+iv+" 0 1,"+iu+" 0,"+-iv+"A"+iv+","+iv+" 0 1,"+iu+" 0,"+iv}e.innerRadius=function(iu){if(!arguments.length){return ir}ir=V(iu);return e};e.outerRadius=function(iu){if(!arguments.length){return im}im=V(iu);return e};e.cornerRadius=function(iu){if(!arguments.length){return io}io=V(iu);return e};e.padRadius=function(iu){if(!arguments.length){return it}it=iu==f0?f0:V(iu);return e};e.startAngle=function(iu){if(!arguments.length){return iq}iq=V(iu);return e};e.endAngle=function(iu){if(!arguments.length){return ik}ik=V(iu);return e};e.padAngle=function(iu){if(!arguments.length){return il}il=V(iu);return e};e.centroid=function(){var iv=(+ir.apply(this,arguments)+ +im.apply(this,arguments))/2,iu=(+iq.apply(this,arguments)+ +ik.apply(this,arguments))/2-ew;return[Math.cos(iu)*iv,Math.sin(iu)*iv]};return e};var f0="auto";function bI(e){return e.innerRadius}function cY(e){return e.outerRadius}function gm(e){return e.startAngle}function av(e){return e.endAngle}function bS(e){return e&&e.padAngle}function hK(ik,im,e,il){return(ik-e)*im-(im-il)*ik>0?0:1}function fl(ik,e,iH,iG,ir){var iF=ik[0]-e[0],iu=ik[1]-e[1],iw=(ir?iG:-iG)/Math.sqrt(iF*iF+iu*iu),iv=iw*iu,it=-iw*iF,iK=ik[0]+iv,iq=ik[1]+it,iJ=e[0]+iv,io=e[1]+it,iI=(iK+iJ)/2,il=(iq+io)/2,iA=iJ-iK,iy=io-iq,iO=iA*iA+iy*iy,iD=iH-iG,iB=iK*io-iJ*iq,iL=(iy<0?-1:1)*Math.sqrt(Math.max(0,iD*iD*iO-iB*iB)),iE=(iB*iy-iA*iL)/iO,iN=(-iB*iA-iy*iL)/iO,iC=(iB*iy+iA*iL)/iO,iM=(-iB*iA+iy*iL)/iO,ip=iE-iI,iz=iN-il,im=iC-iI,ix=iM-il;if(ip*ip+iz*iz>im*im+ix*ix){iE=iC,iN=iM}return[[iE-iv,iN-it],[iE*iH/iD,iN*iH/iD]]}function ff(ik){var e=h1,ir=h0,iq=an,im=hX,ip=im.key,io=0.7;function il(iw){var iy=[],iB=[],ix=-1,it=iw.length,iA,iv=V(e),iu=V(ir);function iz(){iy.push("M",im(ik(iB),io))}while(++ix<it){if(iq.call(this,iA=iw[ix],ix)){iB.push([+iv.call(this,iA,ix),+iu.call(this,iA,ix)])}else{if(iB.length){iz();iB=[]}}}if(iB.length){iz()}return iy.length?iy.join(""):null}il.x=function(it){if(!arguments.length){return e}e=it;return il};il.y=function(it){if(!arguments.length){return ir}ir=it;return il};il.defined=function(it){if(!arguments.length){return iq}iq=it;return il};il.interpolate=function(it){if(!arguments.length){return ip}if(typeof it==="function"){ip=im=it}else{ip=(im=ck.get(it)||hX).key}return il};il.tension=function(it){if(!arguments.length){return io}io=it;return il};return il}hu.svg.line=function(){return ff(gr)};var ck=hu.map({linear:hX,"linear-closed":af,step:df,"step-before":bs,"step-after":hE,basis:fk,"basis-open":bp,"basis-closed":cT,bundle:cW,cardinal:dY,"cardinal-open":ca,"cardinal-closed":u,monotone:dp});ck.forEach(function(e,ik){ik.key=e;ik.closed=/-closed$/.test(e)});function hX(e){return e.length>1?e.join("L"):e+"Z"}function af(e){return e.join("L")+"Z"}function df(ik){var e=0,io=ik.length,im=ik[0],il=[im[0],",",im[1]];while(++e<io){il.push("H",(im[0]+(im=ik[e])[0])/2,"V",im[1])}if(io>1){il.push("H",im[0])}return il.join("")}function bs(ik){var e=0,io=ik.length,im=ik[0],il=[im[0],",",im[1]];while(++e<io){il.push("V",(im=ik[e])[1],"H",im[0])}return il.join("")}function hE(ik){var e=0,io=ik.length,im=ik[0],il=[im[0],",",im[1]];while(++e<io){il.push("H",(im=ik[e])[0],"V",im[1])}return il.join("")}function ca(ik,e){return ik.length<4?hX(ik):ik[1]+c3(ik.slice(1,-1),b2(ik,e))}function u(ik,e){return ik.length<3?af(ik):ik[0]+c3((ik.push(ik[0]),ik),b2([ik[ik.length-2]].concat(ik,[ik[1]]),e))}function dY(ik,e){return ik.length<3?hX(ik):ik[0]+c3(ik,b2(ik,e))}function c3(iq,ip){if(ip.length<1||iq.length!=ip.length&&iq.length!=ip.length+2){return hX(iq)}var ir=iq.length!=ip.length,iv="",it=iq[0],e=iq[1],io=ip[0],iu=io,il=1;if(ir){iv+="Q"+(e[0]-io[0]*2/3)+","+(e[1]-io[1]*2/3)+","+e[0]+","+e[1];it=iq[1];il=2}if(ip.length>1){iu=ip[1];e=iq[il];il++;iv+="C"+(it[0]+io[0])+","+(it[1]+io[1])+","+(e[0]-iu[0])+","+(e[1]-iu[1])+","+e[0]+","+e[1];for(var ik=2;ik<ip.length;ik++,il++){e=iq[il];iu=ip[ik];iv+="S"+(e[0]-iu[0])+","+(e[1]-iu[1])+","+e[0]+","+e[1]}}if(ir){var im=iq[il];iv+="Q"+(e[0]+iu[0]*2/3)+","+(e[1]+iu[1]*2/3)+","+im[0]+","+im[1]}return iv}function b2(iq,io){var il=[],im=(1-io)/2,it,ir=iq[0],ip=iq[1],ik=1,e=iq.length;while(++ik<e){it=ir;ir=ip;ip=iq[ik];il.push([im*(ip[0]-it[0]),im*(ip[1]-it[1])])}return il}function fk(ir){if(ir.length<3){return hX(ir)}var il=1,ik=ir.length,im=ir[0],e=im[0],ip=im[1],iq=[e,e,e,(im=ir[1])[0]],io=[ip,ip,ip,im[1]],it=[e,",",ip,"L",gs(ht,iq),",",gs(ht,io)];ir.push(ir[ik-1]);while(++il<=ik){im=ir[il];iq.shift();iq.push(im[0]);io.shift();io.push(im[1]);bW(it,iq,io)}ir.pop();it.push("L",im);return it.join("")}function bp(im){if(im.length<4){return hX(im)}var ip=[],il=-1,iq=im.length,io,ik=[0],e=[0];while(++il<3){io=im[il];ik.push(io[0]);e.push(io[1])}ip.push(gs(ht,ik)+","+gs(ht,e));--il;while(++il<iq){io=im[il];ik.shift();ik.push(io[0]);e.shift();e.push(io[1]);bW(ip,ik,e)}return ip.join("")}function cT(io){var iq,im=-1,ir=io.length,e=ir+4,ip,il=[],ik=[];while(++im<4){ip=io[im%ir];il.push(ip[0]);ik.push(ip[1])}iq=[gs(ht,il),",",gs(ht,ik)];--im;while(++im<e){ip=io[im%ir];il.shift();il.push(ip[0]);ik.shift();ik.push(ip[1]);bW(iq,il,ik)}return iq.join("")}function cW(iq,ip){var il=iq.length-1;if(il){var ik=iq[0][0],io=iq[0][1],iu=iq[il][0]-ik,it=iq[il][1]-io,im=-1,e,ir;while(++im<=il){e=iq[im];ir=im/il;e[0]=ip*e[0]+(1-ip)*(ik+ir*iu);e[1]=ip*e[1]+(1-ip)*(io+ir*it)}}return fk(iq)}function gs(ik,e){return ik[0]*e[0]+ik[1]*e[1]+ik[2]*e[2]+ik[3]*e[3]}var hx=[0,2/3,1/3,0],hv=[0,1/3,2/3,0],ht=[0,1/6,2/3,1/6];function bW(ik,e,il){ik.push("C",gs(hx,e),",",gs(hx,il),",",gs(hv,e),",",gs(hv,il),",",gs(ht,e),",",gs(ht,il))}function ib(ik,e){return(e[1]-ik[1])/(e[0]-ik[0])}function ef(im){var il=0,ik=im.length-1,e=[],iq=im[0],ip=im[1],io=e[0]=ib(iq,ip);while(++il<ik){e[il]=(io+(io=ib(iq=ip,ip=im[il+1])))/2}e[il]=io;return e}function aA(ir){var io=[],im,iq,ip,it,e=ef(ir),il=-1,ik=ir.length-1;while(++il<ik){im=ib(ir[il],ir[il+1]);if(cM(im)<gt){e[il]=e[il+1]=0}else{iq=e[il]/im;ip=e[il+1]/im;it=iq*iq+ip*ip;if(it>9){it=im*3/Math.sqrt(it);e[il]=it*iq;e[il+1]=it*ip}}}il=-1;while(++il<=ik){it=(ir[Math.min(ik,il+1)][0]-ir[Math.max(0,il-1)][0])/(6*(1+e[il]*e[il]));io.push([it||0,e[il]*it||0])}return io}function dp(e){return e.length<3?hX(e):e[0]+c3(e,aA(e))}hu.svg.line.radial=function(){var e=ff(T);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function T(im){var e,il=-1,ip=im.length,io,ik;while(++il<ip){e=im[il];io=e[0];ik=e[1]-ew;e[0]=io*Math.cos(ik);e[1]=io*Math.sin(ik)}return im}function ie(io){var il=h1,ik=h1,iv=0,it=h0,im=an,ip=hX,iw=ip.key,ir=ip,iq="L",iu=0.7;function e(iB){var iD=[],ix=[],iK=[],iC=-1,iy=iB.length,iF,iA=V(il),iJ=V(iv),iz=il===ik?function(){return iH}:V(ik),iI=iv===it?function(){return iG}:V(it),iH,iG;function iE(){iD.push("M",ip(io(iK),iu),iq,ir(io(ix.reverse()),iu),"Z")}while(++iC<iy){if(im.call(this,iF=iB[iC],iC)){ix.push([iH=+iA.call(this,iF,iC),iG=+iJ.call(this,iF,iC)]);iK.push([+iz.call(this,iF,iC),+iI.call(this,iF,iC)])}else{if(ix.length){iE();ix=[];iK=[]}}}if(ix.length){iE()}return iD.length?iD.join(""):null}e.x=function(ix){if(!arguments.length){return ik}il=ik=ix;return e};e.x0=function(ix){if(!arguments.length){return il}il=ix;return e};e.x1=function(ix){if(!arguments.length){return ik}ik=ix;return e};e.y=function(ix){if(!arguments.length){return it}iv=it=ix;return e};e.y0=function(ix){if(!arguments.length){return iv}iv=ix;return e};e.y1=function(ix){if(!arguments.length){return it}it=ix;return e};e.defined=function(ix){if(!arguments.length){return im}im=ix;return e};e.interpolate=function(ix){if(!arguments.length){return iw}if(typeof ix==="function"){iw=ip=ix}else{iw=(ip=ck.get(ix)||hX).key}ir=ip.reverse||ip;iq=ip.closed?"M":"L";return e};e.tension=function(ix){if(!arguments.length){return iu}iu=ix;return e};return e}bs.reverse=hE;hE.reverse=bs;hu.svg.area=function(){return ie(gr)};hu.svg.area.radial=function(){var e=ie(T);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};hu.svg.chord=function(){var e=hP,ir=hW,iq=L,it=gm,io=av;function ip(iy,iw){var ix=iu(this,e,iy,iw),iv=iu(this,ir,iy,iw);return"M"+ix.p0+ik(ix.r,ix.p1,ix.a1-ix.a0)+(il(ix,iv)?im(ix.r,ix.p1,ix.r,ix.p0):im(ix.r,ix.p1,iv.r,iv.p0)+ik(iv.r,iv.p1,iv.a1-iv.a0)+im(iv.r,iv.p1,ix.r,ix.p0))+"Z"}function iu(iy,iB,iC,iz){var ix=iB.call(iy,iC,iz),iA=iq.call(iy,ix,iz),iw=it.call(iy,ix,iz)-ew,iv=io.call(iy,ix,iz)-ew;return{r:iA,a0:iw,a1:iv,p0:[iA*Math.cos(iw),iA*Math.sin(iw)],p1:[iA*Math.cos(iv),iA*Math.sin(iv)]}}function il(iw,iv){return iw.a0==iv.a0&&iw.a1==iv.a1}function ik(iw,ix,iv){return"A"+iw+","+iw+" 0 "+ +(iv>gk)+",1 "+ix}function im(iw,iy,iv,ix){return"Q 0,0 "+ix}ip.radius=function(iv){if(!arguments.length){return iq}iq=V(iv);return ip};ip.source=function(iv){if(!arguments.length){return e}e=V(iv);return ip};ip.target=function(iv){if(!arguments.length){return ir}ir=V(iv);return ip};ip.startAngle=function(iv){if(!arguments.length){return it}it=V(iv);return ip};ip.endAngle=function(iv){if(!arguments.length){return io}io=V(iv);return ip};return ip};function L(e){return e.radius}hu.svg.diagonal=function(){var il=hP,im=hW,e=o;function ik(it,ip){var iu=il.call(this,it,ip),iq=im.call(this,it,ip),io=(iu.y+iq.y)/2,ir=[iu,{x:iu.x,y:io},{x:iq.x,y:io},iq];ir=ir.map(e);return"M"+ir[0]+"C"+ir[1]+" "+ir[2]+" "+ir[3]}ik.source=function(io){if(!arguments.length){return il}il=V(io);return ik};ik.target=function(io){if(!arguments.length){return im}im=V(io);return ik};ik.projection=function(io){if(!arguments.length){return e}e=io;return ik};return ik};function o(e){return[e.x,e.y]}hu.svg.diagonal.radial=function(){var il=hu.svg.diagonal(),e=o,ik=il.projection;il.projection=function(im){return arguments.length?ik(p(e=im)):e};return il};function p(e){return function(){var im=e.apply(this,arguments),il=im[0],ik=im[1]-ew;return[il*Math.cos(ik),il*Math.sin(ik)]}}hu.svg.symbol=function(){var ik=a1,e=fb;function il(io,im){return(hU.get(ik.call(this,io,im))||cm)(e.call(this,io,im))}il.type=function(im){if(!arguments.length){return ik}ik=V(im);return il};il.size=function(im){if(!arguments.length){return e}e=V(im);return il};return il};function fb(){return 64}function a1(){return"circle"}function cm(e){var ik=Math.sqrt(e/gk);return"M0,"+ik+"A"+ik+","+ik+" 0 1,1 0,"+-ik+"A"+ik+","+ik+" 0 1,1 0,"+ik+"Z"}var hU=hu.map({circle:cm,cross:function(e){var ik=Math.sqrt(e/5)/2;return"M"+-3*ik+","+-ik+"H"+-ik+"V"+-3*ik+"H"+ik+"V"+-ik+"H"+3*ik+"V"+ik+"H"+ik+"V"+3*ik+"H"+-ik+"V"+ik+"H"+-3*ik+"Z"},diamond:function(e){var ik=Math.sqrt(e/(2*cs)),il=ik*cs;return"M0,"+-ik+"L"+il+",0 0,"+ik+" "+-il+",0Z"},square:function(e){var ik=Math.sqrt(e)/2;return"M"+-ik+","+-ik+"L"+ik+","+-ik+" "+ik+","+ik+" "+-ik+","+ik+"Z"},"triangle-down":function(e){var il=Math.sqrt(e/ce),ik=il*ce/2;return"M0,"+ik+"L"+il+","+-ik+" "+-il+","+-ik+"Z"},"triangle-up":function(e){var il=Math.sqrt(e/ce),ik=il*ce/2;return"M0,"+-ik+"L"+il+","+ik+" "+-il+","+ik+"Z"}});hu.svg.symbolTypes=hU.keys();var ce=Math.sqrt(3),cs=Math.tan(30*N);d6.transition=function(e){var ik=ay||++hh,iu=gF(e),im=[],iw,ip,it=eb||{time:Date.getEpochTime(),ease:aC,delay:0,duration:250};for(var iq=-1,io=this.length;++iq<io;){im.push(iw=[]);for(var iv=this[iq],ir=-1,il=iv.length;++ir<il;){if(ip=iv[ir]){fI(ip,ir,iu,ik,it)}iw.push(ip)}}return gX(im,iu,ik)};d6.interrupt=function(e){return this.each(e==null?c0:dC(gF(e)))};var c0=dC(gF());function dC(e){return function(){var il,ik,im;if((il=this[e])&&(im=il[ik=il.active])){im.timer.c=null;im.timer.t=NaN;if(--il.count){delete il[ik]}else{delete this[e]}il.active+=0.5;im.event&&im.event.interrupt.call(this,this.__data__,im.index)}}}function gX(e,ik,il){ic(e,eC);e.namespace=ik;e.id=il;return e}var eC=[],hh=0,ay,eb;eC.call=d6.call;eC.empty=d6.empty;eC.node=d6.node;eC.size=d6.size;hu.transition=function(ik,e){return ik&&ik.transition?ay?ik.transition(e):ik:hu.selection().transition(ik)};hu.transition.prototype=eC;eC.select=function(iq){var e=this.id,iu=this.namespace,im=[],iw,ik,ip;iq=D(iq);for(var ir=-1,io=this.length;++ir<io;){im.push(iw=[]);for(var iv=this[ir],it=-1,il=iv.length;++it<il;){if((ip=iv[it])&&(ik=iq.call(ip,ip.__data__,it,ir))){if("__data__" in ip){ik.__data__=ip.__data__}fI(ik,it,iu,e,ip[iu][e]);iw.push(ik)}else{iw.push(null)}}}return gX(im,iu,e)};eC.selectAll=function(it){var ik=this.id,iy=this.namespace,ip=[],iA,e,ir,il,ix;it=c7(it);for(var iv=-1,iq=this.length;++iv<iq;){for(var iz=this[iv],iw=-1,io=iz.length;++iw<io;){if(ir=iz[iw]){ix=ir[iy][ik];e=it.call(ir,ir.__data__,iw,iv);ip.push(iA=[]);for(var iu=-1,im=e.length;++iu<im;){if(il=e[iu]){fI(il,iu,iy,ik,ix)}iA.push(il)}}}}return gX(ip,iy,ik)};eC.filter=function(e){var il=[],it,ir,im;if(typeof e!=="function"){e=bf(e)}for(var ip=0,io=this.length;ip<io;ip++){il.push(it=[]);for(var ir=this[ip],iq=0,ik=ir.length;iq<ik;iq++){if((im=ir[iq])&&e.call(im,im.__data__,iq,ip)){it.push(im)}}}return gX(il,this.namespace,this.id)};eC.tween=function(e,ik){var im=this.id,il=this.namespace;if(arguments.length<2){return this.node()[il][im].tween.get(e)}return cO(this,ik==null?function(io){io[il][im].tween.remove(e)}:function(io){io[il][im].tween.set(e,ik)})};function hT(e,ik,io,il){var ip=e.id,im=e.namespace;return cO(e,typeof io==="function"?function(it,ir,iq){it[im][ip].tween.set(ik,il(io.call(it,it.__data__,ir,iq)))}:(io=il(io),function(iq){iq[im][ip].tween.set(ik,io)}))}eC.attr=function(e,ip){if(arguments.length<2){for(ip in e){this.attr(ip,e[ip])}return this}var im=e=="transform"?en:fJ,il=hu.ns.qualify(e);function ik(){this.removeAttribute(il)}function ir(){this.removeAttributeNS(il.space,il.local)}function io(it){return it==null?ik:(it+="",function(){var iu=this.getAttribute(il),iv;return iu!==it&&(iv=im(iu,it),function(iw){this.setAttribute(il,iv(iw))})})}function iq(it){return it==null?ir:(it+="",function(){var iu=this.getAttributeNS(il.space,il.local),iv;return iu!==it&&(iv=im(iu,it),function(iw){this.setAttributeNS(il.space,il.local,iv(iw))})})}return hT(this,"attr."+e,ip,il.local?iq:io)};eC.attrTween=function(e,il){var ik=hu.ns.qualify(e);function im(ir,ip){var iq=il.call(this,ir,ip,this.getAttribute(ik));return iq&&function(it){this.setAttribute(ik,iq(it))}}function io(ir,ip){var iq=il.call(this,ir,ip,this.getAttributeNS(ik.space,ik.local));return iq&&function(it){this.setAttributeNS(ik.space,ik.local,iq(it))}}return this.tween("attr."+e,ik.local?io:im)};eC.style=function(il,io,im){var ip=arguments.length;if(ip<3){if(typeof il!=="string"){if(ip<2){io=""}for(im in il){this.style(im,il[im],io)}return this}im=""}function ik(){this.style.removeProperty(il)}function e(iq){return iq==null?ik:(iq+="",function(){var ir=fF(this).getComputedStyle(this,null).getPropertyValue(il),it;return ir!==iq&&(it=fJ(ir,iq),function(iu){this.style.setProperty(il,it(iu),im)})})}return hT(this,"style."+il,io,e)};eC.styleTween=function(e,il,ik){if(arguments.length<3){ik=""}function im(iq,io){var ip=il.call(this,iq,io,fF(this).getComputedStyle(this,null).getPropertyValue(e));return ip&&function(ir){this.style.setProperty(e,ip(ir),ik)}}return this.tween("style."+e,im)};eC.text=function(e){return hT(this,"text",e,ij)};function ij(e){if(e==null){e=""}return function(){this.textContent=e}}eC.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var ik;if(this[e].count<2&&(ik=this.parentNode)){ik.removeChild(this)}})};eC.ease=function(ik){var il=this.id,e=this.namespace;if(arguments.length<1){return this.node()[e][il].ease}if(typeof ik!=="function"){ik=hu.ease.apply(hu,arguments)}return cO(this,function(im){im[e][il].ease=ik})};eC.delay=function(ik){var il=this.id,e=this.namespace;if(arguments.length<1){return this.node()[e][il].delay}return cO(this,typeof ik==="function"?function(ip,io,im){ip[e][il].delay=+ik.call(ip,ip.__data__,io,im)}:(ik=+ik,function(im){im[e][il].delay=ik}))};eC.duration=function(ik){var il=this.id,e=this.namespace;if(arguments.length<1){return this.node()[e][il].duration}return cO(this,typeof ik==="function"?function(ip,io,im){ip[e][il].duration=Math.max(1,ik.call(ip,ip.__data__,io,im))}:(ik=Math.max(1,ik),function(im){im[e][il].duration=ik}))};eC.each=function(il,im){var ip=this.id,ik=this.namespace;if(arguments.length<2){var e=eb,io=ay;try{ay=ip;cO(this,function(it,ir,iq){eb=it[ik][ip];il.call(it,it.__data__,ir,iq)})}finally{eb=e;ay=io}}else{cO(this,function(iq){var ir=iq[ik][ip];(ir.event||(ir.event=hu.dispatch("start","end","interrupt"))).on(il,im)})}return this};eC.transition=function(){var iw=this.id,iv=++hh,ir=this.namespace,ik=[],iu,it,im,iq;for(var io=0,il=this.length;io<il;io++){ik.push(iu=[]);for(var it=this[io],ip=0,e=it.length;ip<e;ip++){if(im=it[ip]){iq=im[ir][iw];fI(im,ip,ir,iv,{time:iq.time,ease:iq.ease,delay:iq.delay+iq.duration,duration:iq.duration})}iu.push(im)}}return gX(ik,ir,iv)};function gF(e){return e==null?"__transition__":"__transition_"+e+"__"}function fI(io,ir,iy,il,it){var iz=io[iy]||(io[iy]={active:0,count:0}),ix=iz[il],im,ik,iq,ip,iw;function iv(iA){var iB=ix.delay;ik.t=iB+im;if(iB<=iA){return e(iA-iB)}ik.c=e}function e(iA){var iB=iz.active,iD=iz[iB];if(iD){iD.timer.c=null;iD.timer.t=NaN;--iz.count;delete iz[iB];iD.event&&iD.event.interrupt.call(io,io.__data__,iD.index)}for(var iE in iz){if(+iE<il){var iC=iz[iE];iC.timer.c=null;iC.timer.t=NaN;--iz.count;delete iz[iE]}}ik.c=iu;g9(function(){if(ik.c&&iu(iA||1)){ik.c=null;ik.t=NaN}return 1},0,im);iz.active=il;ix.event&&ix.event.start.call(io,io.__data__,ir);iw=[];ix.tween.forEach(function(iF,iG){if(iG=iG.call(io,io.__data__,ir)){iw.push(iG)}});ip=ix.ease;iq=ix.duration}function iu(iA){var iB=iA/iq,iC=ip(iB),iD=iw.length;while(iD>0){iw[--iD].call(io,iC)}if(iB>=1){ix.event&&ix.event.end.call(io,io.__data__,ir);if(--iz.count){delete iz[il]}else{delete io[iy]}return 1}}if(!ix){im=it.time;ik=g9(iv,0,im);ix=iz[il]={tween:new aO(),time:im,timer:ik,delay:it.delay,duration:it.duration,ease:it.ease,index:ir};it=null;++iz.count}}hu.svg.axis=function(){var il=hu.scale.linear(),io=h2,e=6,ip=6,it=3,ir=[10],im=null,iq;function ik(iu){iu.each(function(){var iQ=hu.select(this);var iL=this.__chart__||il,iK=this.__chart__=il.copy();var iT=im==null?iK.ticks?iK.ticks.apply(iK,ir):iK.domain():im,iJ=iq==null?iK.tickFormat?iK.tickFormat.apply(iK,ir):gr:iq,iN=iQ.selectAll(".tick").data(iT,iK),iG=iN.enter().insert("g",".domain").attr("class","tick").style("opacity",gt),iI=hu.transition(iN.exit()).style("opacity",gt).remove(),iB=hu.transition(iN.order()).style("opacity",1),iv=Math.max(e,0)+it,iw;var iF=a5(iK),iH=iQ.selectAll(".domain").data([0]),iU=(iH.enter().append("path").attr("class","domain"),hu.transition(iH));iG.append("line");iG.append("text");var iz=iG.select("line"),iS=iB.select("line"),iE=iN.select("text").text(iJ),iA=iG.select("text"),iP=iB.select("text"),iR=io==="top"||io==="left"?-1:1,iO,iM,iy,ix;if(io==="bottom"||io==="top"){iw=ft,iO="x",iy="y",iM="x2",ix="y2";iE.attr("dy",iR<0?"0em":".71em").style("text-anchor","middle");iU.attr("d","M"+iF[0]+","+iR*ip+"V0H"+iF[1]+"V"+iR*ip)}else{iw=fs,iO="y",iy="x",iM="y2",ix="x2";iE.attr("dy",".32em").style("text-anchor",iR<0?"end":"start");iU.attr("d","M"+iR*ip+","+iF[0]+"H0V"+iF[1]+"H"+iR*ip)}iz.attr(ix,iR*e);iA.attr(iy,iR*iv);iS.attr(iM,0).attr(ix,iR*e);iP.attr(iO,0).attr(iy,iR*iv);if(iK.rangeBand){var iC=iK,iD=iC.rangeBand()/2;iL=iK=function(iV){return iC(iV)+iD}}else{if(iL.rangeBand){iL=iK}else{iI.call(iw,iK,iL)}}iG.call(iw,iL,iK);iB.call(iw,iK,iK)})}ik.scale=function(iu){if(!arguments.length){return il}il=iu;return ik};ik.orient=function(iu){if(!arguments.length){return io}io=iu in e9?iu+"":h2;return ik};ik.ticks=function(){if(!arguments.length){return ir}ir=dV(arguments);return ik};ik.tickValues=function(iu){if(!arguments.length){return im}im=iu;return ik};ik.tickFormat=function(iu){if(!arguments.length){return iq}iq=iu;return ik};ik.tickSize=function(iu){var iv=arguments.length;if(!iv){return e}e=+iu;ip=+arguments[iv-1];return ik};ik.innerTickSize=function(iu){if(!arguments.length){return e}e=+iu;return ik};ik.outerTickSize=function(iu){if(!arguments.length){return ip}ip=+iu;return ik};ik.tickPadding=function(iu){if(!arguments.length){return it}it=+iu;return ik};ik.tickSubdivide=function(){return arguments.length&&ik};return ik};var h2="bottom",e9={top:1,right:1,bottom:1,left:1};function ft(il,ik,e){il.attr("transform",function(io){var im=ik(io);return"translate("+(isFinite(im)?im:e(io))+",0)"})}function fs(ik,il,e){ik.attr("transform",function(io){var im=il(io);return"translate(0,"+(isFinite(im)?im:e(io))+")"})}hu.svg.brush=function(){var ik=ho(it,"brushstart","brush","brushend"),iw=null,iu=null,il=[0,0],ir=[0,0],iv,io,e=true,iq=true,ix=az[0];function it(iA){iA.each(function(){var iG=hu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",iy).on("touchstart.brush",iy);var iF=iG.selectAll(".background").data([0]);iF.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");iG.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var iE=iG.selectAll(".resize").data(ix,gr);iE.exit().remove();iE.enter().append("g").attr("class",function(iH){return"resize "+iH}).style("cursor",function(iH){return e2[iH]}).append("rect").attr("x",function(iH){return/[ew]$/.test(iH)?-3:null}).attr("y",function(iH){return/^[ns]/.test(iH)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");iE.style("display",it.empty()?"none":null);var iD=hu.transition(iG),iB=hu.transition(iF),iC;if(iw){iC=a5(iw);iB.attr("x",iC[0]).attr("width",iC[1]-iC[0]);ip(iD)}if(iu){iC=a5(iu);iB.attr("y",iC[0]).attr("height",iC[1]-iC[0]);im(iD)}iz(iD)})}it.event=function(iA){iA.each(function(){var iB=ik.of(this,arguments),iC={x:il,y:ir,i:iv,j:io},iD=this.__chart__||iC;this.__chart__=iC;if(ay){hu.select(this).transition().each("start.brush",function(){iv=iD.i;io=iD.j;il=iD.x;ir=iD.y;iB({type:"brushstart"})}).tween("brush:brush",function(){var iE=eV(il,iC.x),iF=eV(ir,iC.y);iv=io=null;return function(iG){il=iC.x=iE(iG);ir=iC.y=iF(iG);iB({type:"brush",mode:"resize"})}}).each("end.brush",function(){iv=iC.i;io=iC.j;iB({type:"brush",mode:"resize"});iB({type:"brushend"})})}else{iB({type:"brushstart"});iB({type:"brush",mode:"resize"});iB({type:"brushend"})}})};function iz(iA){iA.selectAll(".resize").attr("transform",function(iB){return"translate("+il[+/e$/.test(iB)]+","+ir[+/^s/.test(iB)]+")"})}function ip(iA){iA.select(".extent").attr("x",il[0]);iA.selectAll(".extent,.n>rect,.s>rect").attr("width",il[1]-il[0])}function im(iA){iA.select(".extent").attr("y",ir[0]);iA.selectAll(".extent,.e>rect,.w>rect").attr("height",ir[1]-ir[0])}function iy(){var iT=this,iB=hu.select(hu.event.target),iI=ik.of(iT,arguments),iO=hu.select(iT),iQ=iB.datum(),iM=!/^(n|s)$/.test(iQ)&&iw,iK=!/^(e|w)$/.test(iQ)&&iu,iL=iB.classed("extent"),iD=bR(iT),iR,iS=hu.mouse(iT),iC;var iG=hu.select(fF(iT)).on("keydown.brush",iJ).on("keyup.brush",iF);if(hu.event.changedTouches){iG.on("touchmove.brush",iH).on("touchend.brush",iA)}else{iG.on("mousemove.brush",iH).on("mouseup.brush",iA)}iO.interrupt().selectAll("*").interrupt();if(iL){iS[0]=il[0]-iS[0];iS[1]=ir[0]-iS[1]}else{if(iQ){var iP=+/w$/.test(iQ),iN=+/^n/.test(iQ);iC=[il[1-iP]-iS[0],ir[1-iN]-iS[1]];iS[0]=il[iP];iS[1]=ir[iN]}else{if(hu.event.altKey){iR=iS.slice()}}}iO.style("pointer-events","none").selectAll(".resize").style("display",null);hu.select("body").style("cursor",iB.style("cursor"));iI({type:"brushstart"});iH();function iJ(){if(hu.event.keyCode==32){if(!iL){iR=null;iS[0]-=il[1];iS[1]-=ir[1];iL=2}A()}}function iF(){if(hu.event.keyCode==32&&iL==2){iS[0]+=il[1];iS[1]+=ir[1];iL=0;A()}}function iH(){var iU=hu.mouse(iT),iV=false;if(iC){iU[0]+=iC[0];iU[1]+=iC[1]}if(!iL){if(hu.event.altKey){if(!iR){iR=[(il[0]+il[1])/2,(ir[0]+ir[1])/2]}iS[0]=il[+(iU[0]<iR[0])];iS[1]=ir[+(iU[1]<iR[1])]}else{iR=null}}if(iM&&iE(iU,iw,0)){ip(iO);iV=true}if(iK&&iE(iU,iu,1)){im(iO);iV=true}if(iV){iz(iO);iI({type:"brush",mode:iL?"move":"resize"})}}function iE(i4,iW,iY){var iZ=a5(iW),iV=iZ[0],iU=iZ[1],i2=iS[iY],i5=iY?ir:il,i6=i5[1]-i5[0],iX,i3;if(iL){iV-=i2;iU-=i6+i2}iX=(iY?iq:e)?Math.max(iV,Math.min(iU,i4[iY])):i4[iY];if(iL){i3=(iX+=i2)+i6}else{if(iR){i2=Math.max(iV,Math.min(iU,2*iR[iY]-iX))}if(i2<iX){i3=iX;iX=i2}else{i3=i2}}if(i5[0]!=iX||i5[1]!=i3){if(iY){io=null}else{iv=null}i5[0]=iX;i5[1]=i3;return true}}function iA(){iH();iO.style("pointer-events","all").selectAll(".resize").style("display",it.empty()?"none":null);hu.select("body").style("cursor",null);iG.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);iD();iI({type:"brushend"})}}it.x=function(iA){if(!arguments.length){return iw}iw=iA;ix=az[!iw<<1|!iu];return it};it.y=function(iA){if(!arguments.length){return iu}iu=iA;ix=az[!iw<<1|!iu];return it};it.clamp=function(iA){if(!arguments.length){return iw&&iu?[e,iq]:iw?e:iu?iq:null}if(iw&&iu){e=!!iA[0],iq=!!iA[1]}else{if(iw){e=!!iA}else{if(iu){iq=!!iA}}}return it};it.extent=function(iF){var iC,iA,iE,iD,iB;if(!arguments.length){if(iw){if(iv){iC=iv[0],iA=iv[1]}else{iC=il[0],iA=il[1];if(iw.invert){iC=iw.invert(iC),iA=iw.invert(iA)}if(iA<iC){iB=iC,iC=iA,iA=iB}}}if(iu){if(io){iE=io[0],iD=io[1]}else{iE=ir[0],iD=ir[1];if(iu.invert){iE=iu.invert(iE),iD=iu.invert(iD)}if(iD<iE){iB=iE,iE=iD,iD=iB}}}return iw&&iu?[[iC,iE],[iA,iD]]:iw?[iC,iA]:iu&&[iE,iD]}if(iw){iC=iF[0],iA=iF[1];if(iu){iC=iC[0],iA=iA[0]}iv=[iC,iA];if(iw.invert){iC=iw(iC),iA=iw(iA)}if(iA<iC){iB=iC,iC=iA,iA=iB}if(iC!=il[0]||iA!=il[1]){il=[iC,iA]}}if(iu){iE=iF[0],iD=iF[1];if(iw){iE=iE[1],iD=iD[1]}io=[iE,iD];if(iu.invert){iE=iu(iE),iD=iu(iD)}if(iD<iE){iB=iE,iE=iD,iD=iB}if(iE!=ir[0]||iD!=ir[1]){ir=[iE,iD]}}return it};it.clear=function(){if(!it.empty()){il=[0,0],ir=[0,0];iv=io=null}return it};it.empty=function(){return !!iw&&il[0]==il[1]||!!iu&&ir[0]==ir[1]};return hu.rebind(it,ik,"on")};var e2={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var az=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var ii=fN.format=dn.timeFormat;var dl=ii.utc;var dW=dl("%Y-%m-%dT%H:%M:%S.%LZ");ii.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dE:dW;function dE(e){return e.toISOString()}dE.parse=function(ik){var e=new Date(ik);return isNaN(e)?null:e};dE.toString=dW.toString;fN.second=c6(function(e){return new hy(Math.floor(e/1000)*1000)},function(e,ik){e.setTime(e.getTime()+Math.floor(ik)*1000)},function(e){return e.getSeconds()});fN.seconds=fN.second.range;fN.seconds.utc=fN.second.utc.range;fN.minute=c6(function(e){return new hy(Math.floor(e/60000)*60000)},function(e,ik){e.setTime(e.getTime()+Math.floor(ik)*60000)},function(e){return e.getMinutes()});fN.minutes=fN.minute.range;fN.minutes.utc=fN.minute.utc.range;fN.hour=c6(function(e){var ik=e.getTimezoneOffset()/60;return new hy((Math.floor(e/3600000-ik)+ik)*3600000)},function(e,ik){e.setTime(e.getTime()+Math.floor(ik)*3600000)},function(e){return e.getHours()});fN.hours=fN.hour.range;fN.hours.utc=fN.hour.utc.range;fN.month=c6(function(e){e=fN.day(e);e.setDate(1);return e},function(e,ik){e.setMonth(e.getMonth()+ik)},function(e){return e.getMonth()});fN.months=fN.month.range;fN.months.utc=fN.month.utc.range;function bx(e,ik,il){function im(ip){return e(ip)}im.invert=function(ip){return f6(e.invert(ip))};im.domain=function(ip){if(!arguments.length){return e.domain().map(f6)}e.domain(ip);return im};function io(ir,it){var iq=ir[1]-ir[0],iu=iq/it,ip=hu.bisect(fh,iu);return ip==fh.length?[ik.year,s(ir.map(function(iv){return iv/31536000000}),it)[2]]:!ip?[cE,s(ir,it)[2]]:ik[iu/fh[ip-1]<fh[ip]/iu?ip-1:ip]}im.nice=function(iq,it){var iu=im.domain(),ir=ez(iu),iv=iq==null?io(ir,10):typeof iq==="number"&&io(ir,iq);if(iv){iq=iv[0],it=iv[1]}function ip(iw){return !isNaN(iw)&&!iq.range(iw,f6(+iw+1),it).length}return im.domain(go(iu,it>1?{floor:function(iw){while(ip(iw=iq.floor(iw))){iw=f6(iw-1)}return iw},ceil:function(iw){while(ip(iw=iq.ceil(iw))){iw=f6(+iw+1)}return iw}}:iq))};im.ticks=function(ip,ir){var iq=ez(im.domain()),it=ip==null?io(iq,10):typeof ip==="number"?io(iq,ip):!ip.range&&[{range:ip},ir];if(it){ip=it[0],ir=it[1]}return ip.range(iq[0],f6(+iq[1]+1),ir<1?1:ir)};im.tickFormat=function(){return il};im.copy=function(){return bx(e.copy(),ik,il)};return gg(im,e)}function f6(e){return new Date(e)}var fh=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000];var cI=[[fN.second,1],[fN.second,5],[fN.second,15],[fN.second,30],[fN.minute,1],[fN.minute,5],[fN.minute,15],[fN.minute,30],[fN.hour,1],[fN.hour,3],[fN.hour,6],[fN.hour,12],[fN.day,1],[fN.day,2],[fN.week,1],[fN.month,1],[fN.month,3],[fN.year,1]];var W=ii.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",an]]);var cE={range:function(il,e,ik){return hu.range(Math.ceil(il/ik)*ik,+e,ik).map(f6)},floor:gr,ceil:gr};cI.year=fN.year;fN.scale=function(){return bx(hu.scale.linear(),cI,W)};var f9=cI.map(function(e){return[e[0].utc,e[1]]});var fy=dl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",an]]);f9.year=fN.year.utc;fN.scale.utc=function(){return bx(hu.scale.linear(),f9,fy)};hu.text=ad(function(e){return e.responseText});hu.json=function(e,ik){return h5(e,"application/json",dS,ik)};function dS(e){return JSON.parse(e.responseText)}hu.html=function(e,ik){return h5(e,"text/html",ih,ik)};function ih(ik){var e=bU.createRange();e.selectNode(bU.body);return e.createContextualFragment(ik.responseText)}hu.xml=ad(function(e){return e.responseXML});if(typeof define==="function"&&define.amd){this.d3=hu,define(hu)}else{if(typeof module==="object"&&module.exports){module.exports=hu}else{this.d3=hu}}}()}if((typeof(HTMLCanvasElement)!="undefined")&&(HTMLCanvasElement!=null)&&(!HTMLCanvasElement.prototype.toBlob)){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(h,f,g){var d=atob(this.toDataURL(f,g).split(",")[1]),b=d.length,a=new Uint8Array(b);for(var e=0;e<b;e++){a[e]=d.charCodeAt(e)}h(new Blob([a],{type:f||"image/png"}))}})}var saveAs=saveAs||(navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator))||(function(m){if(rdx.utils.is_ie()&&parseInt(rdx.utils.get_browser_version())<11){return}var z=m.document,q=function(){return m.URL||m.webkitURL||m},f=m.URL||m.webkitURL||m,t=z.createElementNS("http://www.w3.org/1999/xhtml","a"),h="download" in t,o=function(B){var A=z.createEvent("MouseEvents");A.initMouseEvent("click",true,false,m,0,0,0,0,0,false,false,false,false,0,null);B.dispatchEvent(A)},u=m.webkitRequestFileSystem,v=m.requestFileSystem||u||m.mozRequestFileSystem,s=function(A){(m.setImmediate||m.setTimeout)(function(){throw A},0)},d="application/octet-stream",p=0,b=[],n=function(){var B=b.length;while(B--){var A=b[B];if(typeof A==="string"){f.revokeObjectURL(A)}else{A.remove()}}b.length=0},w=function(B,A,E){A=[].concat(A);var D=A.length;while(D--){var F=B["on"+A[D]];if(typeof F==="function"){try{F.call(B,E||B)}catch(C){s(C)}}}},g=function(B,C){var D=this,J=B.type,M=false,F,E,A=function(){var N=q().createObjectURL(B);b.push(N);return N},I=function(){w(D,"writestart progress write writeend".split(" "))},L=function(){if(M||!F){F=A(B)}if(E){E.location.href=F}D.readyState=D.DONE;I()},H=function(N){return function(){if(D.readyState!==D.DONE){return N.apply(this,arguments)}}},G={create:true,exclusive:false},K;D.readyState=D.INIT;if(!C){C="download"}if(h){F=A(B);t.href=F;t.download=C;o(t);D.readyState=D.DONE;I();return}if(m.chrome&&J&&J!==d){K=B.slice||B.webkitSlice;B=K.call(B,0,B.size,d);M=true}if(u&&C!=="download"){C+=".download"}if(J===d||u){E=m}else{E=m.open()}if(!v){L();return}p+=B.size;v(m.TEMPORARY,p,H(function(N){N.root.getDirectory("saved",G,H(function(O){var P=function(){O.getFile(C,G,H(function(Q){Q.createWriter(H(function(R){R.onwriteend=function(S){E.location.href=Q.toURL();b.push(Q);D.readyState=D.DONE;w(D,"writeend",S)};R.onerror=function(){var S=R.error;if(S.code!==S.ABORT_ERR){L()}};"writestart progress write abort".split(" ").forEach(function(S){R["on"+S]=D["on"+S]});R.write(B);D.abort=function(){R.abort();D.readyState=D.DONE};D.readyState=D.WRITING}),L)}),L)};O.getFile(C,{create:false},H(function(Q){Q.remove();P()}),H(function(Q){if(Q.code===Q.NOT_FOUND_ERR){P()}else{L()}}))}),L)}),L)},e=g.prototype,a=function(A,B){return new g(A,B)};e.abort=function(){var A=this;A.readyState=A.DONE;w(A,"abort")};e.readyState=e.INIT=0;e.WRITING=1;e.DONE=2;e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null;m.addEventListener("unload",n,false);return a}(self));(function(){d3.timeline=function(){var E=["circle","rect"];var t=function(){},U=function(){},aa=function(){},J=function(){},P=function(){},q=function(ai){return ai},B=function(){},o=function(){},A="bottom",a=null,h=null,ae=null,d=null,V={format:d3.time.format("%I %p"),tickTime:d3.time.hours,tickInterval:1,tickSize:6,tickValues:null},ag=d3.scale.category20(),w=null,G="rect",b=0,S=0,ac=0,n={left:30,right:30,top:30,bottom:30},R=false,O=false,ad=false,m=false,ab=20,f=5,z=60,W=true,Q=false,H=false,ah=false,K={stroke:"stroke-dasharray",spacing:"4 10"},C={marginTop:25,marginBottom:0,width:1,color:ag},N=false,e={marginTop:25,marginBottom:0,width:1,color:ag},af=false,g=false,u=false,I="white",D={};var Z=function(ak,al,aj){if(af){v(ak,0,0)}if(g){M(ak)}var ai=ak.append("g").attr("class","axis").attr("transform","translate("+0+","+aj+")").call(al)};var T=function(aj){var ai=b.getFullYear();if(b.getFullYear()!=ac.getFullYear()){ai=b.getFullYear()+"-"+ac.getFullYear()}aj.append("text").attr("transform","translate("+20+", 0)").attr("x",0).attr("y",14).attr("class","calendarYear").text(ai)};var M=function(ak){var aj=6;var ai=(n.left-z);var am=(a-n.left)/aj;var al=(a-n.right-am+z);var an=ak.append("g").attr("class","axis").attr("transform","translate(0, 20)");if(u){T(an)}an.append("text").attr("transform","translate("+ai+", 0)").attr("x",0).attr("y",14).attr("class","chevron").text("<").on("click",function(){return B(b,D)});an.append("text").attr("transform","translate("+al+", 0)").attr("x",0).attr("y",14).attr("class","chevron").text(">").on("click",function(){return o(ac,D)})};var v=function(aj,ak,ai){aj.insert("rect").attr("class","row-green-bar").attr("x",ak).attr("width",a).attr("y",ai).attr("height",ab).attr("fill",I)};var s=function(aj,ak,ai){aj.append("g").attr("class","axis").attr("transform","translate("+0+","+(n.top+(ab+f)*ai)+")").attr(K.stroke,K.spacing).call(ak.tickFormat("").tickSize(-(n.top+(ab+f)*(ai-1)+3),0,0))};var F=function(am,ak,al,an,aj){var ai=((ab+f)*am[ak])+n.top;al.selectAll("svg").data(an).enter().insert("rect").attr("class","row-green-bar").attr("x",m?0:n.left).attr("width",m?a:(a-n.right-n.left)).attr("y",ai).attr("height",ab).attr("fill",d instanceof Function?d(aj,ak):d)};var L=function(an,am,ak,ai,aj){var ao=ab+f;var al=n.top+(ao/2)+ao*(am[ak]||1);an.append("text").attr("class","timeline-label").attr("transform","translate("+S+","+al+")").text(ai?q(aj.label):aj.id).on("click",function(aq,ap){J(aq,ak,aj)})};function p(az){var aB=az.append("g");var ai=az[0][0].getBoundingClientRect();var ao=d3.select(az[0][0]);var al={},au=1,aA=0,aD=0;ak();if(ad){aB.each(function(aH,aG){aH.forEach(function(aI,aJ){aI.times.forEach(function(aL,aK){if(aJ===0&&aK===0){originTime=aL.starting_time;aL.starting_time=0;aL.ending_time=aL.ending_time-originTime}else{aL.starting_time=aL.starting_time-originTime;aL.ending_time=aL.ending_time-originTime}})})})}if(R||ac===0||b===0){aB.each(function(aH,aG){aH.forEach(function(aI,aJ){if(R&&Object.keys(al).indexOf(aJ)==-1){al[aJ]=au;au++}aI.times.forEach(function(aL,aK){if(b===0){if(aL.starting_time<aA||(aA===0&&ad===false)){aA=aL.starting_time}}if(ac===0){if(aL.ending_time>aD){aD=aL.ending_time}}})})});if(ac===0){ac=aD}if(b===0){b=aA}}var am=(1/(ac-b))*(a-n.left-n.right);var aF=d3.time.scale().domain([b,ac]).range([n.left,a-n.right]);var ar=d3.svg.axis().scale(aF).orient(A).tickFormat(V.format).tickSize(V.tickSize);if(V.tickValues!=null){ar.tickValues(V.tickValues)}else{ar.ticks(V.numTicks||V.tickTime,V.tickInterval)}aB.each(function(aH,aG){D=aH;aH.forEach(function(aJ,aK){var aM=aJ.times;var aI=(typeof(aJ.label)!="undefined");if(typeof(aJ.id)!="undefined"){console.warn("d3Timeline Warning: Ids per dataset is deprecated in favor of a 'class' key. Ids are now per data element.")}if(d){F(al,aK,aB,aM,aJ)}aB.selectAll("svg").data(aM).enter().append(function(aQ,aP){return document.createElementNS(d3.ns.prefix.svg,"display" in aQ?aQ.display:G)}).attr("x",aE).attr("y",aL).attr("width",function(aQ,aP){return(aQ.ending_time-aQ.starting_time)*am}).attr("cy",function(aQ,aP){return aL(aQ,aP)+ab/2}).attr("cx",aE).attr("r",ab/2).attr("height",ab).style("fill",function(aQ,aP){var aR;if(aQ.color){return aQ.color}if(w){aR=aQ[w];if(aR){return ag(aR)}else{return ag(aJ[w])}}return ag(aK)}).on("mousemove",function(aQ,aP){t(aQ,aK,aJ)}).on("mouseover",function(aQ,aP){U(aQ,aP,aJ)}).on("mouseout",function(aQ,aP){aa(aQ,aP,aJ)}).on("click",function(aQ,aP){J(aQ,aK,aJ)}).attr("class",function(aQ,aP){return aJ["class"]?"timelineSeries_"+aJ["class"]:"timelineSeries_"+aK}).attr("id",function(aQ,aP){if(aJ.id&&!aQ.id){return"timelineItem_"+aJ.id}return aQ.id?aQ.id:"timelineItem_"+aK+"_"+aP});aB.selectAll("svg").data(aM).enter().append("text").attr("x",ay).attr("y",aO).text(function(aP){return aP.label});if(ae){var aN=(ab+f/2+n.top+(ab+f)*al[aK]);az.append("svg:line").attr("class","row-separator").attr("x1",0+n.left).attr("x2",a-n.right).attr("y1",aN).attr("y2",aN).attr("stroke-width",1).attr("stroke",ae)}if(aI){L(az,al,aK,aI,aJ)}if(typeof(aJ.icon)!=="undefined"){az.append("image").attr("class","timeline-label").attr("transform","translate("+0+","+(n.top+(ab+f)*al[aK])+")").attr("xlink:href",aJ.icon).attr("width",n.left).attr("height",ab)}function aL(aQ,aP){if(R){return n.top+(ab+f)*al[aK]}return n.top}function aO(aQ,aP){if(R){return n.top+(ab+f)*al[aK]+ab*0.75}return n.top+ab*0.75}})});var aw=(n.top+(ab+f)*au);var av=n.top;var aq=Q?av:aw;if(W){Z(aB,ar,aq)}if(ah){s(aB,ar,au)}if(a>ai.width){var ax=function(){var aG=Math.min(0,Math.max(ai.width-a,d3.event.translate[0]));aj.translate([aG,0]);aB.attr("transform","translate("+aG+",0)");P(aG*am,aF)};var aj=d3.behavior.zoom().x(aF).on("zoom",ax);az.attr("class","scrollable").call(aj)}if(O){aB.selectAll(".tick text").attr("transform",function(aG){return"rotate("+O+")translate("+(this.getBBox().width/2+10)+","+this.getBBox().height/2+")"})}var ap=aB[0][0].getBoundingClientRect();an();if(N){aB.each(function(aH,aG){aH.forEach(function(aI){var aJ=aI.times;aJ.forEach(function(aK){aC(aF(aK.starting_time),e);aC(aF(aK.ending_time),e)})})})}if(H){var at=aF(new Date());aC(at,C)}function aE(aH,aG){return n.left+(aH.starting_time-b)*am}function ay(aH,aG){return n.left+(aH.starting_time-b)*am+5}function an(){if(!h&&!ao.attr("height")){if(ab){h=ap.height+ap.top-ai.top;d3.select(az[0][0]).attr("height",h)}else{throw"height of the timeline is not set"}}else{if(!h){h=ao.attr("height")}else{ao.attr("height",h)}}}function ak(){if(!a&&!ai.width){try{a=ao.attr("width");if(!a){throw"width of the timeline is not set. As of Firefox 27, timeline().with(x) needs to be explicitly set in order to render"}}catch(aG){console.log(aG)}}else{if(!(a&&ai.width)){try{a=ao.attr("width")}catch(aG){console.log(aG)}}}}function aC(aH,aG){az.append("svg:line").attr("x1",aH).attr("y1",aG.marginTop).attr("x2",aH).attr("y2",h-aG.marginBottom).style("stroke",aG.color).style("stroke-width",aG.width)}}p.margin=function(ai){if(!arguments.length){return n}n=ai;return p};p.orient=function(ai){if(!arguments.length){return A}A=ai;return p};p.itemHeight=function(ai){if(!arguments.length){return ab}ab=ai;return p};p.itemMargin=function(ai){if(!arguments.length){return f}f=ai;return p};p.navMargin=function(ai){if(!arguments.length){return z}z=ai;return p};p.height=function(ai){if(!arguments.length){return h}h=ai;return p};p.width=function(ai){if(!arguments.length){return a}a=ai;return p};p.display=function(ai){if(!arguments.length||(E.indexOf(ai)==-1)){return G}G=ai;return p};p.labelFormat=function(ai){if(!arguments.length){return q}q=ai;return p};p.tickFormat=function(ai){if(!arguments.length){return V}V=ai;return p};p.hover=function(ai){if(!arguments.length){return t}t=ai;return p};p.mouseover=function(ai){if(!arguments.length){return U}U=ai;return p};p.mouseout=function(ai){if(!arguments.length){return aa}aa=ai;return p};p.click=function(ai){if(!arguments.length){return J}J=ai;return p};p.scroll=function(ai){if(!arguments.length){return P}P=ai;return p};p.colors=function(ai){if(!arguments.length){return ag}ag=ai;return p};p.beginning=function(ai){if(!arguments.length){return b}b=ai;return p};p.ending=function(ai){if(!arguments.length){return ac}ac=ai;return p};p.labelMargin=function(ai){if(!arguments.length){return S}S=ai;return p};p.rotateTicks=function(ai){if(!arguments.length){return O}O=ai;return p};p.stack=function(){R=!R;return p};p.relativeTime=function(){ad=!ad;return p};p.showBorderLine=function(){N=!N;return p};p.showBorderFormat=function(ai){if(!arguments.length){return e}e=ai;return p};p.showToday=function(){H=!H;return p};p.showTodayFormat=function(ai){if(!arguments.length){return C}C=ai;return p};p.colorProperty=function(ai){if(!arguments.length){return w}w=ai;return p};p.rowSeparators=function(ai){if(!arguments.length){return ae}ae=ai;return p};p.background=function(ai){if(!arguments.length){return d}d=ai;return p};p.showTimeAxis=function(){W=!W;return p};p.showAxisTop=function(){Q=!Q;return p};p.showAxisCalendarYear=function(){u=!u;return p};p.showTimeAxisTick=function(){ah=!ah;return p};p.fullLengthBackgrounds=function(){m=!m;return p};p.showTimeAxisTickFormat=function(ai){if(!arguments.length){return K}K=ai;return p};p.showAxisHeaderBackground=function(ai){af=!af;if(ai){(I=ai)}return p};p.navigate=function(aj,ai){if(!arguments.length){return[B,o]}B=aj;o=ai;g=!g;return p};return p}})();rdx.events=new function(){this.CLICK="click";this.CONTEXT_MENU="contextmenu";this.DOUBLE_CLICK="dblclick";this.SUBMIT="submit";this.CHANGE="change";this.SORT_STOP="sortstop";this.RESIZE="resize";this.LOAD="load";this.ERROR="error";this.BLUR="blur";this.KEYUP="keyup";this.KEYDOWN="keydown";this.MOUSE_OVER="mouseover";this.MOUSE_OUT="mouseout";this.MOUSE_ENTER="mouseenter";this.MOUSE_LEAVE="mouseleave";this.PASTE="paste";this.MOUSE_MOVE="mousemove";this.MOUSE_DOWN="mousedown";this.MOUSE_UP="mouseup";this.SCROLL="scroll";this.FOCUS_IN="focusin";this.FOCUS_OUT="focusout";this.FOCUS="focus";this.REMOVE="remove";this.KEY_PRESS="keypress";this.PROGRESS="progress";this.LOAD_START="loadstart";this.LOAD_END="loadend";this.WINDOW_LOADED="rdx_window_loaded";this.BEFORE_PAGE_LOADED="rdx_before_page_loaded";this.LANG_FILES_LOADED="rdx_lang_files_loaded";this.APP_LOADED="rdx_app_loaded";this.PAGE_LOADED="rdx_page_loaded";this.PAGE_RESIZED="rdx_page_resized";this.PAGE_BLURRED="rdx_page_blurred";this.PAGE_FOCUSSED="rdx_page_focussed";this.PAGE_BEFORE_UNLOAD="rdx_page_before_unload";this.PAGE_UNLOAD="rdx_page_unload";this.GADGET_COLLAPSED="rdx_gadget_collapsed";this.GADGET_EXPANDED="rdx_gadget_expanded";this.GADGET_RESTORED="rdx_gadget_restored";this.GADGET_MAXIMIZED="rdx_gadget_maximized";this.GADGET_CLOSED="rdx_gadget_closed";this.CACHE_OBJECT_AVAILABLE="rdx_cache_object_available";this.MODEL_CHANGED="rdx_model_changed";this.BROWSER_EVENT="rdx_browser_event";this.WIZARD_PAGE_CHANGED="rdx_wizard_changed";this.OP_WIZARD_PAGE_CHANGED="rdx_op_wizard_changed";this.OP_WIZARD_PAGE_CANCELLED="rdx_op_wizard_cancelled";this.OP_WIZARD_MESSAGE_CONTAINER="rdx_op_wizard_message_container";this.PAGE_COLLAPSE="rdx_collapse_optional_op_wizard_page";this.OP_WIZARD_PAGE_COLLAPSE="rdx_all_page_collapse";this.PAGE_EXPAND="rdx_op_wizard_page_expand";this.ROW_SELECTION_CHANGED="rdx_row_selection_changed";this.SORT_TABLE_VIEW="rdx_sort_table_view";this.ROW_MOVED="rdx_row_moved";this.DO_REORGANISE_ROWS="rdx_do_reorganise_rows";this.COLUMN_CONTEXT_CHANGED="rdx_column_context_changed";this.SLIDER_CLOSE="rdx_slider_close";this.VIEW_COUNT_CHANGED="rdx_view_count_changed";this.MODEL_COUNT_CHANGED="rdx_model_count_changed";this.BREAD_CRUMB_EVENT="rdx_bread_crumb_event";this.PAGINATION_CHANGED="rdx_pagination_changed";this.BEFORE_VIEW_DESTROYED="rdx_before_view_destroyed";this.VIEW_DESTROYED="rdx_view_destroyed";this.UPDATE_COUNT="rdx_search_done_on_tree";this.GRAPHICAL_SUMMARY_EVENT="rdx_graphical_search_event";this.GRAPHICAL_SUMMARY_REFRESH="rdx_graphical_search_refresh";this.VIEW_PREPARATION_COMPLETED="rdx_view_prepared";this.UPDATE_SELECTED_OPTION="rdx_update_selected_option";this.VIEW_SELECTION_CHANGED="rdx_view_selection_changed";this.UPDATE_APP_COUNT="update_filtered_apps_count"};rdx.keycodes=new function(){this.TAB=9;this.DELETE=46;this.BACKSPACE=8;this.NUMPAD_ZERO=96;this.ZERO=48;this.FIVE=53;this.SEVEN=55;this.EIGHT=56;this.NINE=57;this.NUMPAD_NINE=105;this.NUMPAD_FIVE=101;this.SHIFT=16;this.COLON=59;this.SHIFTCOLON=186;this.LEFTARROW=37;this.DOT=190;this.NUMPAD_PERIOD=110;this.A=65;this.B=66;this.C=67;this.D=68;this.E=69;this.F=70;this.X=88;this.V=86;this.FWDSLASH=191;this.ENTER=13;this.PERIOD=190;this.DECIMAL_POINT=110;this.NUMPAD_EIGHT=104;this.NUMPAD_SEVEN=103;this.SHIFT=16;this.SPACE=32;this.PAGEUP=33;this.RIGHT_ARROW=39;this.LEFT_ARROW=37;this.DOWN_ARROW=40;this.UP_ARROW=38;this.ESCAPE=27;this.HOME=36;this.END=35};rdx.notification_bar=function(){this._parent=null;this._main_div=null;this._set_timeout=7000;this._notification_bar_rendered=false};rdx.notification_bar.prototype.show=function(o,h,f,b,p,q){if(rdx.utils.is_string(o)){try{o=decodeURIComponent(o)}catch(e){}o=rdx.utils.html_decode(o)}if(this._notification_bar_rendered==false){this._parent=$(document.body);this._notifications=$("<div>").addClass("notifications").attr({role:"dialog","aria-label":h+" notification"});this._parent.prepend(this._notifications)}if(this._notification_bar_rendered==true&&(p!=true)){this.hide()}this._main_div=$("<div>").addClass("notification_bar");this._notifications.append(this._main_div);this._main_div.addClass("message_fixed_positioning");this._notification_bar_rendered=true;if(rdx.utils.is_defined(h)&&h===rdx.ERROR){try{rdx.mask.unmask_all_components()}catch(e){}rdx.message_container.error(this._main_div,o,null,{pure_text:q});if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx_ut_executor_deferred.error_is_seen(rdx_ut_executor_deferred,o,null,true)}}else{if(rdx.utils.is_defined(h)&&(h===rdx.WARNING)){rdx.message_container.warning(this._main_div,null,o,{pure_text:q})}else{if(rdx.utils.is_defined(h)&&(h===rdx.INFO)){rdx.message_container.info(this._main_div,null,o,{pure_text:q})}else{if(rdx.utils.is_not_defined(h)){return}else{rdx.message_container.success(this._main_div,o,{pure_text:q})}}}}if(rdx.utils.is_defined(f)&&f===true){this._fadeOutNotification()}if(rdx.utils.is_defined(b)){var g=this;var d=rdx.utils.is_defined(b.label)?b.label:"Acknowledge";var a=rdx.utils.is_defined(b.auto_hide)?b.auto_hide:true;var n=$('<div class="ack_btn_holder">');var m=$("<button>"+d+"</button>").appendTo(n);$(".message_container_common",this._main_div).append(n);m.bind("click",{auto_hide:a},function(s){if(a===true){g.hide()}if(rdx.utils.is_defined(b.callback)){b.callback.call_back([s])}})}this._main_div.focus();$(document.body).bind("keyup",{notification_bar:this},this.handle_esc_keypress)};rdx.notification_bar.prototype.handle_esc_keypress=function(a){if(a.keyCode===27){a.data.notification_bar.hide();a.stopPropagation();a.preventDefault()}};rdx.notification_bar.prototype.hide=function(){if(this._notification_bar_rendered==true&&rdx.utils.is_defined(this._main_div)){this._main_div.remove();this._notification_bar_rendered=false}$(document.body).unbind("keyup",this.handle_esc_keypress)};rdx.notification_bar.prototype._fadeOutNotification=function(){var a=this;a._parent.mouseup(function(b){b.stopPropagation();if(!($.contains(a._main_div[0],b.target))){a._main_div.fadeOut(3000);a._parent.unbind(b)}})};rdx.notification_bar.prototype._bind_events=function(){this._main_div.bind(rdx.events.MOUSE_OVER,{timeout:this._set_timeout,notification_bar:this},function(a){a.data.notification_bar._main_div.stop();a.data.notification_bar._main_div.addClass("full_opacity");a.data.timeout=12000});this._main_div.bind(rdx.events.MOUSE_OUT,{timeout:this._set_timeout,notification_bar:this},function(a){a.data.notification_bar._main_div.removeClass("full_opacity");a.data.notification_bar._main_div.css("opacity","1");a.data.notification_bar._main_div.fadeOut(a.data.timeout)})};rdx.notification_bar.prototype._bind_custom_event=function(b,a){if(rdx.utils.is_defined(b)){this._main_div.bind(b,function(d){if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a.call_back)){a.call_back([d])}})}};rdx.page=new function(){this._status_bar=null;this._header=null;this._header_view=null;this._loading_content=null;this._message_div=null;this._content=null;this._footer=null;this._auto_refresh_info=null;this._active_element_for_blur=null;this._slider=null;this._min_window_size=1024;this._max_window_size=1366;this._notification_bar=new rdx.notification_bar();this._default_container_class="ns_content";this._sticky_header=false;this._doppler_feature_container=null;this._doppler_page_mask=null;this._navigation_type="tabs";this.global_elements=[];this._init=function(){this._status_bar=rdx.status_bar.render();this._slider=new rdx.slider();this._help_slider=new rdx.slider({help_slider:true})};this._load=function(){this._create_layout();if(rdx.utils.is_defined(rdx.views)&&rdx.utils.is_defined(rdx.views.header_view)){this._render_header()}this._toggle_content_and_loading_content();this._trigger_event(rdx.events.PAGE_LOADED);if(rdx.JOBS){this._register_blur_focus_handlers()}this._resize();rdx.view_utils.get_parameters_open_view_from_query_string()};this._create_layout=function(){this._header_container=$("<div>").addClass("ns_header_container").appendTo(document.body);var a=$("<div>").addClass("loading_panel").text(rdx.i18n.get_string("rdx.page_loading"));this._loading_content=$("<div>").addClass("center_panel").append(a);$(document.body).append(this._loading_content);this._message_div=$("<div>").addClass("rdx_message_container");this._content=$("<div>").attr("id","ns_content").addClass(this._default_container_class);$(document.body).append(this._message_div).append(this._content);this._auto_refresh_info=$("<div>").addClass("popup popup_info auto-refresh").append(rdx.i18n.get_string("rdx.page_auto_refresh_off"));$(document.body).append(this._auto_refresh_info)};this._render_header=function(){this._header_view=new rdx.base_view(this._header_container,rdx.utils.get_view("header_view"));this._header_view.prepare_view();this._header=$(".ns_header",this._header_container)};this.empty_body_content=function(){$("body").empty()};this.show_info_links=function(){if(this._header_view!==null){this._header_view._view.header_view_show_info_links()}};this.hide_info_links=function(){if(this._header_view!==null){this._header_view._view.header_view_hide_info_links()}};this._register_blur_focus_handlers=function(){if(rdx.utils.is_ie()){this._active_element_for_blur=document.activeElement;document.onfocusout=function(){rdx.page._blur()};document.onfocusin=function(){rdx.page._focus()}}else{if(rdx.utils.is_chrome_safari()){this._active_element_for_blur=document.activeElement}window.onblur=function(){rdx.page._blur()};window.onfocus=function(){rdx.page._focus()}}};this.hide_notification_bar=function(){this._notification_bar.hide()};this.show_notification=function(g,f,e,d,b,a){if(rdx.utils.is_not_empty(g)){this._notification_bar.show(g,f,e,d,b,a)}};this._is_on_blur=function(){if(this._active_element_for_blur!==null&&this._active_element_for_blur!=document.activeElement){this._active_element_for_blur=document.activeElement;return false}return true};this._blur=function(){if(!this._is_on_blur()){return}rdx.scheduler.pause_all_jobs();this._auto_refresh_info.css("left",($(window).width()-this._auto_refresh_info.width())/2+"px").get(0).style.visibility="visible";this._trigger_event(rdx.events.PAGE_BLURRED)};this._focus=function(){this._auto_refresh_info.get(0).style.visibility="hidden";rdx.scheduler.resume_all_jobs();this._trigger_event(rdx.events.PAGE_FOCUSSED)};this._resize=function(){var a=$(window).width();var b=$(window).height();var e=this._content.offset().top;var d=0;if(rdx.utils.is_defined(this._footer)){d=this._footer.height()}this._content.addClass("rdx_page_center_align");this._message_div.addClass("rdx_page_center_align");if(a<=this._max_window_size){var f=50;this._message_div.width((a-f)>=this._min_window_size?a-f:this._min_window_size)}else{this._message_div.width(this._max_window_size-20)}this._content.css("min-height",($(window).height()-e-20));this._trigger_event(rdx.events.PAGE_RESIZED)};this._unload=function(){this._trigger_event(rdx.events.PAGE_UNLOAD);this._toggle_content_and_loading_content()};this._before_unload=function(){this._trigger_event(rdx.events.PAGE_BEFORE_UNLOAD)};this._toggle_content_and_loading_content=function(){this._loading_content.toggle();this._content.toggle()};this.show_page_message=function(a,b){(this._message_div).empty();rdx.message_container.show(this._message_div,a,b)};this.get_content=function(){return this._content};this.get_header_height=function(){if(!this._header){return 0}var a=this._header.height();if(rdx.utils.is_defined(rdx.GET_HEADER_HEIGHT_CALLBACK)){a=rdx.GET_HEADER_HEIGHT_CALLBACK.call_back([this._header])}return a};this.get_header_position=function(){if(this._header_view!==null){return this._header_view.get_view_container().position()}};this.get_minimum_page_width=function(){return this._min_window_size};this.get_sticky_header=function(){return this._sticky_header};this.set_sticky_header=function(a){this._sticky_header=a};this.get_maximum_page_width=function(){return this._max_window_size};this.toggle_view=function(a){var e=rdx.page.get_content().children();if(a===true&&e.length==1){return}if(rdx.utils.is_defined(a)&&a===true){for(var d=0;d<e.length-1;d++){var b=e[d];$(b).hide()}}else{if(rdx.utils.is_defined(e)&&e.length>0){$(e[e.length-1]).show()}}};this.show_slider=function(b,d,a){if(d==rdx.HELP_SLIDER){this._help_slider.show(b);return this._help_slider.get_slider_container()}else{this._slider._properties.current_focus=document.activeElement;this._slider.show(b,a);return this._slider.get_slider_container()}};this.show_help_slider=function(b){var g={message:"",title:"rdx.help",renderer_callback:null,class_names:null};var f=$.extend(true,{},g,b);var a=rdx.i18n.get_string(f.message);if(rdx.utils.is_empty(a)&&rdx.utils.is_not_defined(f.renderer_callback)){return}var e={show_bread_crumb:false,title:rdx.i18n.get_string(f.title),slider_width:"400px"};var d=rdx.page.show_slider(e,rdx.HELP_SLIDER);var h=$("<div>").addClass("help_slider_content rdx_form_style rdx_help_mul_desc_container");if(rdx.utils.is_defined(f.class_names)){h.addClass(f.class_names)}d.append(h);if(rdx.utils.is_defined(f.renderer_callback)){h.append(f.renderer_callback.call_back([b]))}else{h.append(a)}};this.refresh_header_view=function(){if(this._header_view!==null){this._header_view.refresh_view()}};this.get_slider_crumb=function(a){if(a==rdx.HELP_SLIDER){return this._help_slider.get_title_bar()}else{return this._slider.get_title_bar()}};this.update_slider_bread_crumb=function(a){this._slider.update_bread_crumb(a)};this.update_slider_title=function(b,a){if(a==rdx.HELP_SLIDER){this._help_slider.update_title(b)}else{this._slider.update_title(b)}};this.update_slider_help=function(a){this._slider.update_help(a)};this.get_slider_height=function(a){if(a==rdx.HELP_SLIDER){return this._help_slider.get_height()}else{return this._slider.get_height()}};this.add_slider_close_event_handler=function(b,a){if(a==rdx.HELP_SLIDER){this._help_slider.add_close_event_handler(b)}else{this._slider.add_close_event_handler(b)}};this.hide_slider=function(b){if(b==rdx.HELP_SLIDER){this._help_slider.hide()}else{var a=this._slider._properties.current_focus;setTimeout(function(d){d.focus()},500,a);this._slider.hide()}};this.is_slider_visible=function(a){if(a==rdx.HELP_SLIDER){return this._help_slider.is_slider_shown()}else{return this._slider.is_slider_shown()}};this.load_doppler_file=function(d,a){if(rdx&&rdx.utils&&rdx.utils.is_instrumentation_enabled()){var b="/admin_ui/rdx/core/js/doppler.js";var e=new Promise(function(h,g){var f=document.createElement("script");f.type="text/javascript";f.async=true;f.src=b;f.onload=function(){h()};document.body.appendChild(f)});e.then(function(f){_caq=_caq_fn(d,a,"https://cis.citrix.com/doppler",1000,true,false)})}};this.add_event_handler=function(a,b){$(this).bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back()})};this._trigger_event=function(a){$(this).trigger(a)};this.trigger_events_on_load=function(){this._trigger_event(rdx.events.WINDOW_LOADED);this._trigger_event(rdx.events.APP_LOADED);this._trigger_event(rdx.events.BEFORE_PAGE_LOADED);rdx.page.add_event_handler(rdx.events.LANG_FILES_LOADED,new rdx.callback(this,this.trigger_page_load))};this.trigger_page_load=function(){this._init();var a=this;if(rdx.utils.is_defined(rdx.STAND_ALONE)&&rdx.STAND_ALONE===false){if(rdx.utils.is_defined(rdx.ON_LOAD_CALLBACK)){var b=new rdx.callback_params({return_callback:new rdx.callback(a,a._load)});rdx.ON_LOAD_CALLBACK.call_back([b])}else{this._load()}}};this.get_tree_content_pane=function(){return $(".rdx_second_pane_container > div:nth-child(2)",rdx.page.get_content())};this.set_navigation_type=function(a){this._navigation_type=a;$(document.body).addClass("compact_layout")};this.get_navigation_type=function(a){return this._navigation_type};this.apply_nav_type=function(){var d=this.get_content();if(this._header_view&&this._navigation_type==="hamburger"){var q=$("<div>").addClass("menu_opener_block");var o=$('<button class="hamburger-icon opener"><span class="hide">Menu</span></button>').appendTo(q);o.attr("aria-label","Open Menu").on("click",this.toggle_tree_navigation);var b=$('<button class="hamburger-icon close hide"><span class="hide">Menu</span></button>').appendTo(q);b.attr("aria-label","Close Menu").on("click",this.toggle_tree_navigation);this._ns_logo_tr.prepend(q);var f=$(".tree_panel_cell",d);f.addClass("hide");var a=$(".rdx_second_pane_cell",d);a.css({"margin-left":"0"})}else{if(this._navigation_type==="collapsible"){var g=this;var h=$(".tree_pane",d);var p=$(".search-clear",h).remove();var s=$("<button>").addClass("nav-toggle collapsed").attr("aria-label","Hide Menu").bind(rdx.events.CLICK,function(t){rdx.page.hide_menu_nav();$(".nav-collapsed-bar",d).removeClass("hide");setTimeout(function(){rdx.page._resize()},50)});h.append(s);var m=$("<div>").addClass("nav-collapsed-bar hide");var e=$("<button>").addClass("nav-toggle expanded").attr("aria-label","Open Menu");var n=$("<span>").addClass("collapsed-text").append("Navigation Panel");m.append(e).append(n).bind(rdx.events.CLICK,{collapsed_bar:m},function(t){var u=t.data.collapsed_bar.addClass("hide");rdx.page.show_menu_nav();setTimeout(function(){rdx.page._resize()},50)});$(".tree_panel_cell",d).append(m)}}};this.toggle_tree_navigation=function(d){var a=$(".tree_panel_cell",rdx.page.get_content());var b=$(this);b.addClass("hide");b.siblings(".hamburger-icon").removeClass("hide").focus();if(a.hasClass("hide")){rdx.page.show_menu_nav();$(".tree-search-text",a).focus()}else{rdx.page.hide_menu_nav()}setTimeout(function(){rdx.page._resize()},50)};this.enable_navigation=function(a){if(this._navigation_type=="hamburger"){if(a===true){$(".hamburger-icon",rdx.page._header).removeClass("event-disabled").removeAttr("disabled")}else{$(".hamburger-icon",rdx.page._header).addClass("event-disabled").attr("disabled","disabled")}}};this.show_menu_nav=function(){var a=$(".tree_panel_cell",rdx.page.get_content());var e=$(".hamburger-icon",rdx.page._header);var b=$(".rdx_second_pane_cell",rdx.page.get_content());a.removeClass("hide");if(this._navigation_type==="hamburger"){e.addClass("opened").removeClass("closed");b.css({"margin-left":"250px"})}else{if(this._navigation_type==="collapsible"){var d=$(".tree_pane",a);d.removeClass("hide");a.css({width:"250px"});b.css({"margin-left":"250px"})}}};this.hide_menu_nav=function(){var a=$(".tree_panel_cell",rdx.page.get_content());var e=$(".hamburger-icon",rdx.page._header);var b=$(".rdx_second_pane_cell",rdx.page.get_content());if(this._navigation_type==="hamburger"){a.addClass("hide");e.addClass("closed").removeClass("opened");b.css({"margin-left":"0"})}else{if(this._navigation_type==="collapsible"){var d=$(".tree_pane",a);d.addClass("hide");a.css({width:"40px"});b.css({"margin-left":"40px"})}}};this.render_doppler_dom=function(e,f){this._doppler_page_mask=$("<div>").addClass("doppler_mask_body");var m=$("<div>").addClass("doppler_enable").attr("id","enable_doppler_feature");this._doppler_feature_container=m;var n=$("<div>").addClass("doppler_title_container");var a=$("<div>").addClass("doppler_title_div").append(rdx.i18n.get_string("rdx.doppler_enable_title"));var o=$("<button>").addClass("btn-icon doppler_close_dialog").attr("title","Close Doppler Settings");n.append(a);n.append(o);var s=$("<div>").addClass("doppler_enable_icon");var d=$("<div>").addClass("doppler_content_div");var b=$("<div>").addClass("doppler_text");b.append($("<p>").text(rdx.i18n.get_string("rdx.doppler_content")));var p=$("<div>").addClass("doppler_action_container");var q=$("<button>").addClass("rdx_blue_button rdx_button").text(rdx.i18n.get_string("rdx.button_enable"));var g=$(document.createElement("a")).addClass("doppler_skip_link").append(rdx.i18n.get_string("rdx.skip_label")).attr("href","#");p.append(q);p.append(g);var h=$(document.createElement("a")).attr("href",rdx.utils._get_cuxip_learn_more_link()).attr("target","_blank").attr("class","doppler_learn_more").append(" Learn More...");q.bind(rdx.events.CLICK,{doppler_button_callback:e,doppler_settings:f},function(u){var v=u.data.doppler_button_callback;var t=u.data.doppler_settings;v.call_back([t,$(this),false])});g.bind(rdx.events.CLICK,{doppler_button_callback:e,doppler_settings:f},function(u){var v=u.data.doppler_button_callback;var t=u.data.doppler_settings;v.call_back([t,$(this),true])});o.bind(rdx.events.CLICK,{doppler_button_callback:e,doppler_settings:f},function(u){var v=u.data.doppler_button_callback;var t=u.data.doppler_settings;v.call_back([t,$(this),true])});d.append(b);d.append(h);d.append(p);m.append(n);m.append(s);m.append(d);$("body").append(this._doppler_page_mask);$("body").append(m)};this._get_doppler_feature_container=function(){return this._doppler_feature_container};this._get_doppler_page_mask_element=function(){return this._doppler_page_mask};this.hide_header_navigation=function(){if(this._header_view!==null){this._header_view.get_view().hide_navigation()}};this.show_header_navigation=function(){if(this._header_view!==null){this._header_view.get_view().show_navigation()}};this.set_global_context_fields=function(a){this._global_context_fields=a};this.set_global_context_data=function(f){if(rdx.utils.is_defined(this._global_context_fields)){for(var e in f){for(var d=0;d<this._global_context_fields.length;d++){var g=this._global_context_fields[d];var a=g.get_field();var b=a.get_key();if(b==e){g.set_data(f[e])}}}}};this.get_global_context_data=function(){var g={};if(rdx.utils.is_array(this._global_context_fields)){for(var f=0;f<this._global_context_fields.length;f++){var h=this._global_context_fields[f];var a=h.get_field();var e=a.get_key();if(rdx.utils.is_not_empty(e)){var d=h.get_data();var b=a.get_formatter();if(rdx.utils.is_defined(b)){d=b.get_map_value(d)}g[e]=d}}}return g}};$(function(){if(rdx&&rdx.page){rdx.page.trigger_events_on_load()}});$(window).bind(rdx.events.RESIZE,function(a){if(!rdx.STAND_ALONE){if(rdx.utils.is_ie()||rdx.utils.is_chrome_safari()){setTimeout(function(){rdx.page._resize()},50)}else{rdx.page._resize()}}});$(window).bind("beforeunload",function(a){if(!rdx.STAND_ALONE){rdx.page._before_unload()}});window.onunload=function(){if(!rdx.STAND_ALONE){rdx.page._unload()}};rdx.search_bar=function(b,a){this._parent=b;var d={placeholder_text:"rdx.enter_text_to_search",search_submit_handler_callback:null,cancel_search_handler_callback:null,search_suggest_handler_callback:null,search_suggestion:false,resource_name:null,search_key:null,search_value:null};this._properties=$.extend({},d,a);this._search_map=[];this._search_box=null;this._cancel_search_button=null};rdx.search_bar.prototype.render=function(){this._render_search_text_box()};rdx.search_bar.prototype._render_search_text_box=function(){var a=this.get_placeholder_text();this._search_box=$("<input type = 'text'>").addClass("search_bar_text_box").attr("aria-label",a);this._cancel_search_button=$("<a>").addClass("search_bar_cancel_button").attr("href","#").attr("aria-label","Cancel");this._bind_cancel_button_handler();this._parent.append(this._search_box).append(this._cancel_search_button);this._search_box.attr("placeholder",a);if(this._properties.search_suggestion){this._bind_search_suggestion()}this._bind_submit_event()};rdx.search_bar.prototype._bind_search_suggestion=function(){var b=this._properties.resource_name;var a=this;rdx.model.get(rdx.utils.get_resource(b),null,new rdx.callback(null,function(d){var n=d[b];if(n.length>0){var h=[];var m=a._properties.search_key;var f=a._properties.search_value;for(var g=0;g<n.length;g++){if(rdx.utils.is_not_empty(n[g][m])&&rdx.utils.is_not_empty(n[g][f])){var e=n[g][m];h.push(e);a._search_map[e]=n[g][f]}}a._search_box.autocomplete({source:function(p,o){var q=new RegExp($.ui.autocomplete.escapeRegex(p.term),"i");var s=$.grep(h,function(t){return q.test(t)});o(s.splice(0,10))},delay:0,autoFocus:true,select:function(o,p){$(".search_bar_text_box").val(p.item.id)},focus:function(o,p){o.preventDefault()}})}}))};rdx.search_bar.prototype._bind_submit_event=function(){this._search_box.bind(rdx.events.KEYUP,{submit_handler_callback:this.get_search_submit_handler_callback(),search_text_box:this.get_search_box(),cancel_search_button:this.get_cancel_button(),that:this},function(d){var b=(d.keyCode?d.keyCode:d.which);var f=d.data.cancel_search_button;var g=d.data.search_text_box.val();if(b===rdx.keycodes.ENTER){var e=d.data.submit_handler_callback;if(g.length>0){if(rdx.utils.is_defined(e)){if(rdx.utils.is_object_not_empty(d.data.that._search_map)){if(rdx.utils.is_defined(d.data.that._search_map[g])){g=d.data.that._search_map[g];e.call_back([g])}else{var a=rdx.i18n.get_string("appflow.search_suggestion_failed");rdx.page.show_notification(a,rdx.ERROR,true)}}else{e.call_back([g])}}}}else{if(g.length>0&&!f.is("visible")){f.show()}else{f.hide()}}return true})};rdx.search_bar.prototype._bind_cancel_button_handler=function(){this.get_cancel_button().bind(rdx.events.CLICK,{_this:this},function(a){var b=a.data._this;b.get_search_box().val("");b.get_cancel_button().hide();if(rdx.utils.is_defined(b.get_cancel_search_handler_callback())){b.get_cancel_search_handler_callback().call_back([])}})};rdx.search_bar.prototype.get_search_box=function(){return this._search_box};rdx.search_bar.prototype.get_cancel_button=function(){return this._cancel_search_button};rdx.search_bar.prototype.get_search_box_value=function(){return this.get_search_box().val()};rdx.search_bar.prototype.get_placeholder_text=function(){return rdx.i18n.get_string(this._properties.placeholder_text)};rdx.search_bar.prototype.get_search_submit_handler_callback=function(){return this._properties.search_submit_handler_callback};rdx.search_bar.prototype.get_search_suggestion_handler_callback=function(){return this._properties.search_suggest_handler_callback};rdx.search_bar.prototype.get_cancel_search_handler_callback=function(){return this._properties.cancel_search_handler_callback};rdx.websocket=new function(){this._socket=null;this._caller_data=null;this._reconnect=false;this._rapi_token=null;this._rapi_connection_state="CLOSED";this.is_supported=function(){return false};this.enable_reconnect=function(){this._reconnect=true};this.connect=function(a){if(this.is_connected()||this.is_connecting()){return}if(this.is_supported()){this._socket=new WebSocket(a);this.add_event_listener("open",this.open_ssh_connection)}else{this.open_ssh_connection()}this.add_event_listener("close",this.unset_websocket_data_onclose);this.add_event_listener("error",this.unset_websocket_data_onerror)};this.unset_websocket_data_onerror=function(){rdx.websocket.disconnect(false)};this.unset_websocket_data_onclose=function(){rdx.websocket.disconnect(true)};this.disconnect=function(b,d,a){if(this._socket==null&&this._rapi_token==null){if(rdx.utils.is_function(a)){a()}return}if(!this._reconnect){this._caller_data=null}if(b){this._socket=null;this._disconnect_for_rapi(d,a);if(this._reconnect){this.reconnect()}}else{if(this.is_supported()&&this.is_connected()){this._socket.close()}else{this._socket=null}this._disconnect_for_rapi(d,a)}};this.reconnect=function(){this._reconnect=false;this.get_caller_data().websocket_connect()};this.is_connected=function(){return((this._socket!=null)&&(this._socket.readyState==this._socket.OPEN))||this._rapi_token!=null};this.is_connecting=function(){if(this.is_supported()){return((this._socket!=null)&&(this._socket.readyState==this._socket.CONNECTING))}else{return(this._rapi_connection_state=="CONNECTING")}};this.is_closed=function(){return(this._socket!=null)&&(this._socket.readyState==this._socket.CLOSED)};this.open_ssh_connection=function(){var a="";if(rdx.websocket.is_supported()){rdx.websocket._socket.send(JSON.stringify({type:"openssh",data:a}))}else{rdx.websocket._open_ssh_connection_for_rapi(a);this._rapi_connection_state="CONNECTING"}};this.send_cmd=function(a,b){this._socket.send(JSON.stringify({type:"cmd",data:a,check_status:(b)?"true":"false"}))};this.kill_process=function(){if(this.is_supported()){this._socket.send(JSON.stringify({type:"ctrl",data:"\x03",check_status:"false"}))}else{this._websocket_send_for_rapi({type:"ctrl",data:"\x03",check_status:"false"})}};this.send_cmd_from_obj=function(b){var a={type:"cmd",data:b.command};if(rdx.utils.is_defined(b.check_status)){a.check_status=b.check_status}if(rdx.utils.is_defined(b.pscomm)){a.pscomm=b.pscomm}if(this.is_supported()){this._socket.send(JSON.stringify(a))}else{this._websocket_send_for_rapi(a)}};this.send_relay=function(a){var b="";if(rdx.utils.is_not_empty(a)){b=a}if(this.is_supported()){this._socket.send(JSON.stringify({type:"relay",data:b}))}else{this._websocket_send_for_rapi({type:"relay",data:b})}};this.add_event_listener=function(b,a){if(this.is_supported()){this._socket.addEventListener(b,a)}else{$(this).bind(b,a)}};this.set_caller_data=function(a){this._caller_data=a};this.get_caller_data=function(){return this._caller_data};this._open_ssh_connection_for_rapi=function(a){rdx.model.post(rdx.utils.get_resource("open_websocket"),new rdx.callback(this,this._handle_open_websocket_for_rapi),{data:a},new rdx.callback(this,this._handle_open_websocket_for_rapi))};this._handle_open_websocket_for_rapi=function(a){if(rdx.utils.is_not_empty(a.output)){this._rapi_token=a.output["token"];$(this).trigger("message",a.output);this._rapi_connection_state="OPEN"}else{$(this).trigger("message",{status:"error",data:a,type:"ctrl"});$(this).unbind();this._rapi_connection_state="CLOSED"}};this._disconnect_for_rapi=function(e,b){var a=new rdx.callback();var d=new rdx.callback();if(this._rapi_token!=null){if(rdx.utils.is_function(e)){a=new rdx.callback(function(){e()})}if(rdx.utils.is_function(b)){d=new rdx.callback(function(){b()})}rdx.model.post(rdx.utils.get_resource("close_websocket"),a,{data:this._rapi_token},d);this._rapi_token=null;$(this).unbind();this._rapi_connection_state="CLOSED"}};this._websocket_send_for_rapi=function(a){if(this._rapi_token!=null){a.token=this._rapi_token;rdx.model.post(rdx.utils.get_resource("websocket_send"),new rdx.callback(this,this._handle_websocket_data_from_rapi),a,new rdx.callback())}};this._handle_websocket_data_from_rapi=function(a){if(rdx.utils.is_not_empty(a.output)){if(a.output["type"]==="ctrl"&&(a.output["status"]==="closed"||a.output["status"]==="error")){$(this).trigger("close",a.output)}else{$(this).trigger("message",a.output)}}}};rdx.progress_bar=function(b,a){this._parent=b;this._DEFAULT_PROPERTIES={progress_cell_count:7,class_names:["progress_cell"],timeout:100,height:15,width:5,mode:rdx.PROGRESSIVE,get_progress_info_callback:null,title:null,info_message:null,failure_callback:null,close_callback:null,display_rows:5,single_progress:false,expand_error_by_default:false,show_error_info_in_callback:false,waiting_text:"rdx.waiting_progress_message",is_async:false,disable_minimize:false,auto_close_on_success:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._progress_items=[];this._progress_infp={};this._current_index=this._properties.mode=="progressive"?-1:0;this._progress_timeout=null;this._progress_info_details_collapsed=false;this._start_date=null;this._progress_update_timer=-1;this._progress_info_summary_div=null;this._time_remaining_is_shown=false;this._time_elapsed_is_shown=true;this._is_cancel_button_required=false;this._is_close_button_required=true;this._progress_items_added=false;this._failed=false;this._operation_completed=false;this._failure_reasons=[];this._force_stop_progress=false;this._UNIQUE_MASK_ID="progress-bar-mask";this._properties.title=this._properties.title||""};rdx.progress_bar.prototype.render=function(){if(this._properties.single_progress===true){this._display_single_progress(this._properties.title)}else{switch(this._properties.mode){case rdx.PROGRESS_INFO:this._render_progressive_info();this._start_single_progress_bar();break;case rdx.PROGRESS_BAR:this._render_progress_bar();this._start_interval_progress_bar();break;case rdx.MULTI_PROGRESS_BAR:this._add_multi_progress_bar_container();if(this._properties.is_async===true){this._start_interval_progress_bar()}else{this._start_single_progress_bar()}break;default:this._render_others();this._start_interval_progress_bar();break}}};rdx.progress_bar.prototype._render_progress_bar=function(){this._progress_bar=$("<div>").addClass("smooth_all_corner progress_bar_div");this._parent.append(this._progress_bar)};rdx.progress_bar.prototype._add_multi_progress_bar_container=function(){if($(".multi_progress_bar_container",this._parent)[0]){this._progress_bar=$(".multi_progress_bar_container",this._parent)}else{this._progress_bar=$("<div>").addClass("multi_progress_bar_container");this._parent.append(this._progress_bar)}};rdx.progress_bar.prototype._render_progressive_info=function(){if($(".multi_progress_bar_container")[0]){this._progress_info_summary_div=$(".multi_progress_bar_container")}else{this._progress_info_summary_div=$("<div>").addClass("multi_progress_bar_container").attr("role","dialog")}this._container=$("<div>").addClass("progress_info_content multi-progress-bar").css({height:window.innerHeight*0.5+"px",left:window.innerWidth/2,top:window.innerHeight/2}).attr("role","dialog");var e=$("<div>").addClass("wait_text").appendTo(this._container);var b=$("<div>").addClass("text").appendTo(e).text(rdx.i18n.get_string("rdx.waiting_progress_message"));var d="/admin_ui/rdx/core/images/spinner.gif";var a=$("<img>").attr({src:d,alt:"loading"}).appendTo(e);rdx.mask.mask_dom_element($(document.body),this._UNIQUE_MASK_ID,"progress-mask",true);this._container.on("keydown",this.multi_progress_bar_event_handling);this._progress_info_summary_div.append(this._container);this._parent.append(this._progress_info_summary_div)};rdx.progress_bar.prototype._render_others=function(){var a=$("<div>");a.height(this._properties.height);var b=$("<div>");var d=$("<img>").attr({src:rdx.images.IN_PROGRESS_IMG,alt:"In progress"});a.append(d);this._parent.append(a)};rdx.progress_bar.prototype._start_interval_progress_bar=function(){var a=this;if(rdx.utils.is_not_defined(this._properties.timeout)){return}a._change_progress();this._progress_timeout=setInterval(function(){a._change_progress()},this._properties.timeout)};rdx.progress_bar.prototype._start_single_progress_bar=function(){var a=this;this._progress_timeout=setTimeout(function(){a._change_progress()},this._properties.timeout)};rdx.progress_bar.prototype.stop_progress_bar=function(){if(rdx.utils.is_defined(this._progress_timeout)){clearInterval(this._progress_timeout)}};rdx.progress_bar.prototype._change_progress=function(){switch(this._properties.mode){case rdx.LINEAR:this._handle_linear_progress();break;case rdx.PROGRESSIVE:this._handle_progressive_progress();break;case rdx.PROGRESS_INFO:if(this._properties.single_progress===true){this._display_single_progress(this._properties.title)}if(rdx.utils.is_defined(this._properties.get_progress_info_callback)){this._properties.get_progress_info_callback.call_back([new rdx.callback(this,this.handle_progressive_info_progress)])}break;case rdx.MULTI_PROGRESS_BAR:if(rdx.utils.is_defined(this._properties.get_progress_info_callback)){this._properties.get_progress_info_callback.call_back([new rdx.callback(this,this.handle_multi_progress)])}break;case rdx.PROGRESS_BAR:break}};rdx.progress_bar.prototype.handle_multi_progress=function(b,e,d,f,a){if(!this._is_waiting_progress_window_rendered){this.show_waiting_progress_window()}this.render_multi_progress_bars_from_response(b,d,f,a);if(e===true||this._force_stop_progress===true){this.stop_progress_bar();this._progress_done=true;$(".header-icon",this._progress_bar_container).addClass("completed");var g=$(".progress-select.completed input",this._progress_bar_container);g.prop("checked",true).trigger("click");g.focus();this._render_close_button(this._progress_bar_container)}else{if(e===false&&this._force_stop_progress===false){if(this._properties.is_async===false){this._start_single_progress_bar()}}}};rdx.progress_bar.prototype.multi_progress_bar_event_handling=function(a){var b=$(document.activeElement);if(a.keyCode==9&&a.shiftKey==false){if($(".multiprogress-options.progress-window",this)[0]){if(b.hasClass("minimize-button")){$(".cancel-button",this).focus();a.preventDefault()}else{if(b.hasClass("cancel-button")){$(".minimize-button",this).focus();a.preventDefault()}}}else{if(b.hasClass("completed-inprogress")||b.hasClass("completed-selection")||b.hasClass("inprogress-selection")){$(".minimize-button",this).focus();a.preventDefault()}else{if(b.hasClass("errors")){if($(".rdx_button.cancel-button",this).is(":visible")){$(".rdx_button.cancel-button",this).focus()}else{$(".minimize-button",this).focus()}a.preventDefault()}else{if(b.hasClass("cancel-button")){if(!$(".tabs_container").is(":visible")&&!b.hasClass("rdx_button")){$(".rdx_button.cancel-button",this).focus()}else{if($(".tabs_container").is(":visible")&&!b.hasClass("rdx_button")){$(".section_button.steps").focus()}else{$(".minimize-button",this).focus()}}a.preventDefault()}}}}}else{if(a.keyCode==9&&a.shiftKey==true){if($(".multiprogress-options.progress-window",this)[0]){if(b.hasClass("minimize-button")){$(".cancel-button",this).focus();a.preventDefault()}else{if(b.hasClass("cancel-button")){$(".minimize-button",this).focus();a.preventDefault()}}}else{if(b.hasClass("minimize-button")){$(".completed-inprogress",this).focus();a.preventDefault()}else{if(b.hasClass("completed-inprogress")||b.hasClass("completed-selection")||b.hasClass("inprogress-selection")){$(".cancel-button",this).focus();a.preventDefault()}}}}else{if(a.keyCode==27){$(".cancel-button",this).trigger("click")}}}};rdx.progress_bar.prototype.show_waiting_progress_window=function(){this._add_multi_progress_bar_container();rdx.mask.mask_dom_element($(document.body),this._UNIQUE_MASK_ID,"progress-mask",true);this._progress_bar_container=$("<div>").addClass("multi-progress-bar inprogress").css({height:window.innerHeight*0.6+"px",left:window.innerWidth/2,top:window.innerHeight/2}).attr("role","dialog");this._progress_bar_container.on("keydown",this.multi_progress_bar_event_handling);var f=$("<div>").addClass("header-container");var e=$("<span>").addClass("header-icon inprogress");var h=$("<div>").addClass("progress-bar-title");var d=$("<span>").addClass("title").text(this._properties.title);h.append(e).append(d);this.total_progress=$("<span>").addClass("total-progress").append("");h.append(this.total_progress);var g=$("<div>").addClass("button-container");var a=$('<button type="button">').addClass("button minimize-button").attr("aria-label","minimize window");var b=$('<button type="button">').addClass("button cancel-button").attr("aria-label","cancel");g.append(a).append(b);f.append(h).append(g);f.appendTo(this._progress_bar_container);this._multi_progress_bar_container=$("<ul>").addClass("progress-item-list-container progress-window");f.on("click",{that:this,progress_window:this._progress_bar_container,multi_progress:this._multi_progress_bar_container},this.minimize_maximize_operation);this._multi_selector=this.create_radio_button_container(this._multi_progress_bar_container);this._count_container=this.create_count_container();$("<div>").addClass("multiprogress-options progress-window").append(this._multi_selector).append(this._count_container).appendTo(this._progress_bar_container);this._progress_bar_container.append(this._multi_progress_bar_container);this._progress_bar.append(this._progress_bar_container);this._UNIQUE_ID=Date.now().getTime();rdx.mask.mask_component(this._multi_progress_bar_container,this._UNIQUE_ID,null,null,null,rdx.i18n.get_string(this._properties.waiting_text));this._is_waiting_progress_window_rendered=true};rdx.progress_bar.prototype.render_multi_progress_bars_from_response=function(h,e,q,m){if(h.length>0){this._multi_progress_bar_container.removeClass("progress-window");$(".multiprogress-options",this._progress_bar_container).removeClass("progress-window");this.total_progress.text(e);for(var g in h){var o=$("#"+h[g].id,this._multi_progress_bar_container);if(!o[0]){var b=$("<span>").addClass("item-name").text(h[g].item_name);var a=this.create_error_message_container(h[g].message);var n=$("<div>").addClass("progress-indicator-container").attr("id",h[g].id);var f=$("<div>").addClass("progress-indicator").css({width:h[g].progress_level+"%"});var d=$("<span>").addClass("progress-percent").text(h[g].progress_level+"%");n.append(f);n.append(d);var p=$("<li>").addClass("progress-bar").attr("progress",h[g].progress_level).append(b).append(n).append(a).appendTo(this._multi_progress_bar_container);if(h[g].status==="FAILED"){a.removeClass("hide");p.addClass("error");this._failed=true}}else{this.update_multi_progress_bar(h[g],e)}}this.update_progress_counters(m,q);rdx.mask.unmask_component(this._multi_progress_bar_container,this._UNIQUE_ID)}};rdx.progress_bar.prototype.update_multi_progress_bar=function(d,b){this.total_progress.text(b);var a=$("#"+d.id,this._multi_progress_bar_container);a.children(".progress-indicator").css({width:d.progress_level+"%"});a.children(".progress-percent").text(d.progress_level+"%");a.parent(".progress-bar").attr("progress",d.progress_level)};rdx.progress_bar.prototype.minimize_maximize_operation=function(a){if($(a.target).hasClass("cancel-button")){if(a.data.progress_window.hasClass("minimize")){if($(".multi-progress-bar").length===1){rdx.mask.unmask_dom_element($(document.body),a.data.that._UNIQUE_MASK_ID)}}else{rdx.mask.unmask_dom_element($(document.body),a.data.that._UNIQUE_MASK_ID)}a.data.progress_window.remove();a.data.that.rearrange_minimized_multi_progress_bars(true);a.data.that._force_stop_progress=true;if(rdx.utils.is_defined(a.data.that._properties.close_callback)){if(a.data.that._properties.mode===rdx.PROGRESS_INFO){a.data.that.close_callback()}else{a.data.that._properties.close_callback.call_back([a.data.that._progress_done])}}}else{if(a.data.that._properties.disable_minimize===true){return}a.data.progress_window.css({top:"",left:""});if(!a.data.progress_window.hasClass("minimize")){rdx.mask.unmask_dom_element($(document.body),a.data.that._UNIQUE_MASK_ID);a.data.progress_window.addClass("minimize");a.data.that.rearrange_minimized_multi_progress_bars()}else{$(".multi_progress_bar_container .multi-progress-bar:not(.minimize)").addClass("minimize");a.data.progress_window.removeClass("minimize").removeClass("adjust-progress-width");a.data.progress_window.css({left:window.innerWidth/2,top:window.innerHeight/2});a.data.that.rearrange_minimized_multi_progress_bars();if(!$(".progress-mask")[0]){rdx.mask.mask_dom_element($(document.body),a.data.that._UNIQUE_MASK_ID,"progress-mask",true)}}}a.preventDefault();a.stopPropagation()};rdx.progress_bar.prototype.rearrange_minimized_multi_progress_bars=function(a){var e=$(".multi-progress-bar.minimize",this._progress_bar);var d=0;for(var b=0;b<e.length;b++){d=d+e[b].clientWidth;if(d>=window.innerWidth){e.addClass("adjust-progress-width");break}}};rdx.progress_bar.prototype.create_radio_button_container=function(n){var b=$("<ul>").addClass("radio-button-container");var e=Date.now().getTime();var h=$("<li>").addClass("progress-select inprogress");var d=$('<input type="radio" checked>').attr("name","progress_select"+e).attr("id","inprogress_button"+e).addClass("inprogress-selection");h.append(d).append($("<label>").attr("for","inprogress_button"+e).text("In Progress"));h.appendTo(b);var g=$("<li>").addClass("progress-select completed");var f=$('<input type="radio">').attr("name","progress_select"+e).attr("id","completed_button"+e).addClass("completed-selection");g.append(f).append($("<label>").attr("for","completed_button"+e).text("Completed"));g.appendTo(b);var m=$("<li>").addClass("progress-select completed-inprogress");var a=$('<input type="radio">').attr("name","progress_select"+e).attr("id","all_completed_inprogress_button"+e).addClass("completed-inprogress");m.append(a).append($("<label>").attr("for","all_completed_inprogress_button"+e).text("All"));m.appendTo(b);f.on("click",{multi_progress_container:n},this.show_hide_progress);d.on("click",{multi_progress_container:n},this.show_hide_progress);a.on("click",{multi_progress_container:n},this.show_hide_progress);return b};rdx.progress_bar.prototype.show_hide_progress=function(a){if(this.checked==true&&$(this).hasClass("completed-selection")){$(this).parents(".multi-progress-bar").addClass("completed").removeClass("inprogress")}else{if(this.checked==true&&$(this).hasClass("inprogress-selection")){$(this).parents(".multi-progress-bar").removeClass("completed").addClass("inprogress")}else{if(this.checked==true&&$(this).hasClass("completed-inprogress")){$(this).parents(".multi-progress-bar").removeClass("completed").removeClass("inprogress").addClass("completed inprogress")}}}};rdx.progress_bar.prototype.create_count_container=function(){var a=$("<ul>").addClass("count-container");this.total_count=$("<li>").addClass("total-count").append($('<span class="count-title">').text("Total: "));this.total_count.append($('<span class="count">').text("0"));this.total_count.appendTo(a);this.completed_count=$("<li>").addClass("completed-count hide").append($('<span class="count-title">').text("Completed: "));this.completed_count.append($('<span class="count">').text("0"));this.completed_count.appendTo(a);this.inprogress_count=$("<li>").addClass("inprogress-count hide").append($('<span class="count-title">').text("In Progress: "));this.inprogress_count.append($('<span class="count">').text("0"));this.inprogress_count.appendTo(a);return a};rdx.progress_bar.prototype.update_progress_counters=function(a,b){this.total_count.children(".count").text(a);this.completed_count.children(".count").text(b+"/"+a);this.inprogress_count.children(".count").text(a-b+"/"+a)};rdx.progress_bar.prototype.create_error_message_container=function(b){var a=$("<div>").addClass("warning-container hide");$("<div>").addClass("warning-icon").appendTo(a);$("<span>").addClass("warning-message").text(b).appendTo(a);return a};rdx.progress_bar.prototype.force_close_multi_progress_window=function(){this._progress_bar_container.remove();this._force_stop_progress=true};rdx.progress_bar.prototype.multi_progress_window_response_error_handling=function(a){$(".header-icon",this._progress_bar_container).removeClass("inprogress").addClass("warning");rdx.mask.unmask_component(this._multi_progress_bar_container,this._UNIQUE_ID);this._force_stop_progress=true;this._progress_bar_container.append(this.create_error_message_container(a).addClass("error-message-container").removeClass("hide"))};rdx.progress_bar.prototype._display_single_progress=function(e){var a=$("<div>").addClass("single_progress_bar progress_title");var d="/admin_ui/rdx/core/images/spinner.gif";var b=$("<img>").attr({src:d,alt:"loading"});a.append(b).append(e);this._parent.empty();this._parent.append(a)};rdx.progress_bar.prototype.handle_progress_bar=function(e){var m=rdx.i18n.get_string("rdx.progress_bar.elapsed_time");var b="00:00:00";if(rdx.utils.is_not_defined(this._progress_bar_hr)){var n=$("<table>").attr("cellPadding",0).attr("cellSpacing",0).css("width","100%").append($("<tbody>"));this._progress_bar_row=$("<tr>");var g=$("<tr>");this._progress_bar_hr=$("<hr>").addClass("progress_bar_hr");var a=$("<td>").attr("colspan","2").addClass("progressbar_cell");this._progress_bar_text=$("<div>").addClass("progress_bar_internal_text");a.append(this._progress_bar_text);a.append(this._progress_bar_hr);this._progress_bar_row.append(a);this._progress_bar_message_cell=$("<span>").addClass("progress_bar_message_cell").text("");var f=$("<td>").attr("style","word-wrap: break-work;").append(this._progress_bar_message_cell);this._time_elapsed_cell=$("<span>").addClass("progress_bar_elapsed_time_cell");var h=$("<td>").append(this._time_elapsed_cell);g.append(f);g.append(h);n.append(this._progress_bar_row);n.append(g);this._progress_bar.append(n);this._start_date=new Date()}b=rdx.utils.get_elapsed_time(this._start_date);this._time_elapsed_cell.text(m+" : "+b);if(this._progress_update_timer==-1){var d=this;this._progress_update_timer=setInterval(function(){b=rdx.utils.get_elapsed_time(d._start_date);d._time_elapsed_cell.text(m+" : "+b);if(d._time_elapsed_cell.closest("html").length==0){clearInterval(d._progress_update_timer);d._progress_update_timer=-1}},3000)}this._progress_bar_message_cell.text(e.message);this._progress_bar_text.text(e.progress);this._progress_bar_hr.attr("width",e.progress);if(e.message==rdx.DONE){clearInterval(this._progress_update_timer);this._progress_update_timer=-1}};rdx.progress_bar.prototype.handle_percent_progress_bar=function(){this._progress_percent_dialog=$("<div>").addClass("progress_percent_dialog");var a=$("<div>");this._progress_bar_steps=$("<div>").addClass("progress_bar_steps");this._hr_percent_progress=$("<hr>").addClass("progress_status_bar");this._percent_of_upload=$("<span>").addClass("percent_of_upload");this._cross_button_div=$("<div>").addClass("cross_button_div");var e=$("<div>").addClass("progress_bar_time");e.append(this._percent_of_upload).append(this._hr_percent_progress);this._cross_button_div.append(e);this._upload_speed_container=$("<div>").addClass("upload_speed");var h=$("<div>").addClass("progress_bar_message");this._cell_time=$("<p>").addClass("cell_time_elapsed");this._uploaded_data=$("<p>").addClass("uploaded_data");h.append(this._cell_time).append(this._uploaded_data);a.append(this._progress_bar_steps).append(this._cross_button_div).append(h).append(this._upload_speed_container);this._progress_percent_dialog.append(a);var b=this;if(this._is_cancel_button_required==true){this._cancel_img_for_upload=$("<button>").addClass("cancel_file_upload").attr("aria-label","Cancel");this._cross_button_div.append(this._cancel_img_for_upload);this._cancel_img_for_upload.bind(rdx.events.CLICK,function(m){b._confirm_box_for_cancel=$("<div>").addClass("confirm_box_for_cancel");var n=$("<div>").addClass("confirm_message_for_upload").text(rdx.i18n.get_string("rdx.confirm_message_for_cancel")).css("align","center");b._confirm_button_for_cancel=$("<button>").addClass("confirm_button_for_cancel").text(rdx.i18n.get_string("rdx.ok_label"));b._deny_button_for_upload=$("<button>").addClass("deny_button_for_upload").text(rdx.i18n.get_string("rdx.cancel"));b._confirm_box_for_cancel.append(n).append(b._confirm_button_for_cancel).append(b._deny_button_for_upload);b._progress_percent_dialog.append(b._confirm_box_for_cancel);b._deny_button_for_upload.bind(rdx.events.CLICK,function(o){b._confirm_box_for_cancel.remove()});b._confirm_button_for_cancel.bind(rdx.events.CLICK,function(o){b.cancel_upload_callback.call_back()})})}if(this._is_close_button_required==true){this._image_for_hide=$("<img>").attr("src",rdx.images.WHITE_CROSS_IMG).addClass("close_progress_bar");this._progress_percent_dialog.append(this._image_for_hide);this._image_for_hide.bind(rdx.events.CLICK,function(m){rdx.mask.unmask_all_components();b.remove_progress_percent_dialog()})}this._mask_for_progress_window=$("<div>").addClass("mask_for_progress_window");this._parent.append(this._mask_for_progress_window).append(this._progress_percent_dialog);if(this._time_elapsed_is_shown==true&&this._time_remaining_is_shown==false){var g=rdx.i18n.get_string("rdx.progress_bar.elapsed_time");var d=0;var f="00:00:00";b._cell_time.text(g+" : "+f);if(this._progress_update_timer==-1){this._progress_update_timer=setInterval(function(){d++;var m=rdx.utils.convert_seconds_to_minutes(d,true);b._cell_time.text(g+" : "+m)},1000)}}};rdx.progress_bar.prototype.handle_percent_progress_bar_data=function(d){if(d.message.length<60){d.message=d.message}else{this._progress_bar_steps[0].title=d.message.replace("Uploading","");d.message=d.message.substring(0,60);d.message=d.message.concat("...")}this._progress_bar_steps.text(d.message);this._hr_percent_progress.attr("width",d.progress);this._percent_of_upload.text(d.progress);if(this._time_elapsed_is_shown==true&&this._time_remaining_is_shown==false){if(d.message==rdx.DONE){clearInterval(this._progress_update_timer);this._progress_update_timer=-1}}else{if(this._time_remaining_is_shown==true){timeSpent=(d.current_time-d.start_time)/1000;uploadSpeed=d.uploaded_so_far/(timeSpent);uploadSpeed_in_units=rdx.view_formatters.size_in_bytes_formatter(null,null,uploadSpeed);this._upload_speed_container.text(rdx.i18n.get_string("rdx.upload_speed",{UploadSpeed:uploadSpeed_in_units})+"/sec");var b=rdx.utils.convert_seconds_to_minutes((d.total_size-d.uploaded_so_far)/uploadSpeed,true);if(rdx.utils.is_empty(b)){this._cell_time.text(b)}else{this._cell_time.text(rdx.i18n.get_string("rdx.time_remaining_for_upload",{time_to_spare:b}))}var e=rdx.view_formatters.size_in_bytes_formatter(null,null,d.uploaded_so_far);var a=rdx.view_formatters.size_in_bytes_formatter(null,null,d.total_size);this._uploaded_data.text(rdx.i18n.get_string("rdx.status_of_file_upload",{size_uploaded_so_far:e,total_size_for_upload:a}))}else{this._cell_time.remove()}}};rdx.progress_bar.prototype._handle_linear_progress=function(){var d=this._current_index;var e=this._current_index+1>(this._progress_items.length-1)?0:(this._current_index+1);if(rdx.utils.is_chrome_safari()){$(this._progress_items[d]).css("backgroundColor","white")}else{this._progress_items[d].removeClass(this._properties.class_names[0])}this._current_index=e;for(var a=0;a<this._properties.class_names.length;a++){var b=a+1>this._properties.class_names.length-1?this._properties.class_names[0]:this._properties.class_names[a+1];if(rdx.utils.is_chrome_safari()){$(this._progress_items[e]).css("backgroundColor","blue");$(this._progress_items[e]).css("height","10px")}else{this._progress_items[e].removeClass(b);this._progress_items[e].addClass(this._properties.class_names[a])}e=e+1>(this._progress_items.length-1)?0:(e+1)}};rdx.progress_bar.prototype._handle_progressive_progress=function(){var a=this._current_index+1>(this._progress_items.length-1)?0:(this._current_index+1);this._current_index=a;if(a==-1){a=a+1;this._current_index=a}};rdx.progress_bar.prototype.set_progressive_close_callback=function(a){this._properties.close_callback=a};rdx.progress_bar.prototype.progress_bar_navigation_handling=function(a){if(a.keyCode==9){var b=$(document.activeElement);if(b.hasClass("progress_close_button")){$(".progress_err_header",this).focus();a.preventDefault()}else{if(b.hasClass("progress_err_header")){$(".progress_close_button",this).focus();a.preventDefault()}}}};rdx.progress_bar.prototype.handle_progressive_info_progress=function(e){if(rdx.utils.is_not_defined(e)&&this._progress_items_added==false){return}this._container.empty();var n=null,z="",m=false;var h=$("<div>").addClass("progress_title header-container").appendTo(this._container);var b=$("<div>").addClass("progress-bar-title").appendTo(h);var q=$("<div>").addClass("button-container").appendTo(h);this._progress_title_image=$("<span>").addClass("header-icon title_image inprogress").appendTo(b);var s=$("<span>").append(rdx.i18n.get_string(this._properties.title)).appendTo(b).addClass("title");var a=$('<button type="button">').addClass("button minimize-button").attr("aria-label","minimize window").appendTo(q);var o=$('<button type="button">').addClass("button cancel-button").attr("aria-label","cancel").hide().appendTo(q);if(!this._container.hasClass("minimize")){a.focus()}h.on("click",{that:this,progress_window:this._container,multi_progress:this._progress_info_summary_div},this.minimize_maximize_operation);if(this._properties.disable_minimize===true){q.hide()}var d=$("<div>").addClass("tabs_container").appendTo(this._container).hide();var p=$("<button>").addClass("section_button steps selected").appendTo(d).text("All");var w=$("<button>").addClass("section_button errors").appendTo(d).text("Errors");d.bind(rdx.events.CLICK,{that:this},this._tabs_click_handler);this._steps_section=$("<div>").addClass("steps").appendTo(this._container);this._error_section=$("<div>").addClass("errors").appendTo(this._container).hide();this._process_steps(e);if(this._failed==true){var g=this._failure_reasons;if(g.length>0){d.show();var f=$("<span>").addClass("data-count").text(g.length);w.append(f);this._progress_title_image.addClass("warning");this._progress_title_image.removeClass("inprogress");for(var t=0,u=g.length;t<u;t++){var v=$("<li>");v.append(g[t]);this._error_reasons_div_wrapper.append(v)}}if(this._operation_completed){q.show();o.show();this._render_close_button(this._container)}}else{if(this._operation_completed){this._progress_title_image.addClass("completed");q.show();o.show();this._render_close_button(this._container);if(this._properties.auto_close_on_success===true){o.trigger(rdx.events.CLICK)}}}this._progress_items_added=true;if(this._operation_completed==false||m==true){this._start_single_progress_bar()}};rdx.progress_bar.prototype._process_steps=function(b){var e=$("<ul>").appendTo(this._steps_section).css({height:window.innerHeight*0.35+"px"});this._error_reasons_div_wrapper=$("<ul>").appendTo(this._error_section).addClass("progress_errors").css({height:window.innerHeight*0.35+"px"});for(var d=0;d<b.length;d++){var g=b[d];var h=$("<li>");var f="/admin_ui/rdx/core/css/icon-right.png";if(g.status.toLowerCase()==rdx.FAILED){this._failed=true;if(rdx.utils.is_defined(g.reason)){this._failure_reasons.push(g.reason)}f=rdx.images.LOADER_ERROR}else{if(g.status==rdx.IN_PROGRESS){f="/admin_ui/rdx/core/images/spinner.gif"}else{if(g.status==rdx.COMPLETED){this._operation_completed=true;continue}else{if(g.status=="pause"){pause_progress=true;continue}}}}if(g.is_last=="true"){this._operation_completed=true}var a=$("<img>").attr({src:f,alt:g.status});if(rdx.utils.is_defined(this._properties.info_message)){h.append(a).append(rdx.i18n.get_string(this._properties.info_message))}else{h.append(a).append(g.message)}e.append(h)}};rdx.progress_bar.prototype._render_close_button=function(a){if(a&&!$(".close_button_container",a)[0]){var f=$("<div>").addClass("close_button_container");f.appendTo(a);var b=$("<span>").addClass("operation_message").text(rdx.i18n.get_string("rdx.operation_completed_message")).appendTo(f);if(this._failed==true){b.text(rdx.i18n.get_string("rdx.operation_failed_message"));b.addClass("failed")}var d=$("<button>").text(rdx.i18n.get_string("rdx.close")).appendTo(f).addClass("rdx_button section_button cancel-button");var e=this;d.bind(rdx.events.CLICK,{that:this,progress_window:a,multi_progress:this._progress_info_summary_div},function(g){e.minimize_maximize_operation(g);g.stopPropagation()})}};rdx.progress_bar.prototype.close_callback=function(){if(this._properties.show_error_info_in_callback===true){this._properties.close_callback.call_back([{success:!this._failed}])}else{this._properties.close_callback.call_back()}};rdx.progress_bar.prototype._tabs_click_handler=function(d){var b;var a=d.data.that;if($(d.target).hasClass("steps")){b="steps"}else{if($(d.target).hasClass("errors")){b="errors"}else{return}}$(".section_button.selected").removeClass("selected");$(d.target).addClass("selected");if(b=="steps"){a._steps_section.show();a._error_section.hide()}else{a._steps_section.hide();a._error_section.show()}d.stopPropagation()};rdx.progress_bar.prototype.remove_progress_percent_dialog=function(){this._mask_for_progress_window.remove();this._progress_percent_dialog.remove()};rdx.progress_bar.prototype.show_time_remaining=function(a){this._time_remaining_is_shown=a};rdx.progress_bar.prototype.show_time_elapsed=function(a){this._time_elapsed_is_shown=a};rdx.progress_bar.prototype.show_cancel_button=function(a){this._is_cancel_button_required=a};rdx.progress_bar.prototype.show_close_button=function(a){this._is_close_button_required=a};rdx.mask=new function(){this.MASK_ID=1;this.MASK_KEY="__mask_key";this._mask_element=null;this._is_key_pressed=false;this._control_key=17;this._q_key=81;this._mask_elements=new Object();this.SLIDER_MASK="_slider_mask";this.SLIDER_HELP_MASK="_help_slider_mask";this._key_up_function=function(a){if(a.which==rdx.mask._control_key){rdx.mask._is_key_pressed=false}};this._key_down_function=function(a){if(a.which==rdx.mask._control_key){rdx.mask._is_key_pressed=true}if(rdx.mask._is_key_pressed==true){if(rdx.mask._q_key==a.which){if(rdx.utils.is_not_defined(a.data)){for(var b in rdx.mask._mask_elements){rdx.mask.unmask_component(rdx.mask._mask_elements[b]["element"],b)}}else{rdx.mask.unmask(a.data.id)}return}}};this.mask_with_progress=function(e,m,a,d){var g=(rdx.utils.is_defined(a.single_progress)&&a.single_progress==true)?true:false;if(rdx.utils.is_not_defined(e)||rdx.utils.is_not_defined(m)){return null}if(rdx.utils.is_defined(this._mask_elements[m])&&g===true){return null}e=$(document.body);rdx.page.get_content().attr("aria-hidden","true");var b=$("<div>");var h=$("<div>");h.addClass("mask_progress_panel");h.addClass("smooth_all_corner");if(g){h.addClass("single_progress");rdx.mask.mask_dom_element(b,this._UNIQUE_MASK_ID,"progress-mask");this._mask_elements[m]={element:b,component:f}}var f=new rdx.progress_bar(h,a);f.render();b.append(h);e.append(b);$(document).bind(rdx.events.KEYUP,this._key_up_function).bind(rdx.events.KEYDOWN,{id:m},this._key_down_function);return f};this.mask=function(e,h,a){if(rdx.utils.is_not_defined(e)||rdx.utils.is_not_defined(h)){return}if(rdx.utils.is_defined(this._mask_elements[h])){return}var d=$("<div>");var b=$("<div>");b.addClass("mask").attr("aria-label","In progress");d.append(b);var g=$("<div>");g.addClass("mask_panel");g.addClass("smooth_all_corner");var f=new rdx.progress_bar(g);f.render();this._mask_elements[h]={element:d,component:f};d.append(g);e.append(d);$(document).bind(rdx.events.KEYUP,this._key_up_function).bind(rdx.events.KEYDOWN,{id:h},this._key_down_function)};this.mask_dom_element=function(e,g,a,f){if(rdx.utils.is_not_defined(e)){return null}if(rdx.utils.is_defined(this._mask_elements[g])){return null}var d=$("<div>");var b=$("<div>");b.addClass("mask");if(rdx.utils.is_defined(a)){b.addClass(a)}d.append(b);this._mask_elements[g]={element:d,custom_mask:f};e.append(d);$(document).bind(rdx.events.KEYUP,this._key_up_function).bind(rdx.events.KEYDOWN,{id:g},this._key_down_function);return d};this.mask_component=function(g,a,b,f,n,d){if(rdx.utils.is_defined(a,this._mask_elements[a])){return}n=rdx.utils.is_defined(n)?n:false;var h=$("<div>");if(n===true){h.attr("id",a)}h.addClass("mask_panel").addClass("mask_component");this._mask_elements[a]={element:h,mask_element:g,custom_mask:n};g.addClass("mask_position");var o=g.outerWidth(true)-g.width();var m=$("<div>");m.addClass("mask_panel");var e=$("<img>").attr("src",rdx.images.IN_PROGRESS_IMG);if(rdx.utils.is_defined(b)){for(var p in b){e.css(p,b[p])}}if(rdx.utils.is_defined(f)){for(var p in f){h.css(p,f[p])}}$(document).bind(rdx.events.KEYUP,this._key_up_function).bind(rdx.events.KEYDOWN,this._key_down_function);if(rdx.utils.is_not_empty(d)){h.append($("<span>").addClass("mask-message-text").text(d))}h.append(e);g.append(h);return h};this.unmask=function(b){if(rdx.utils.is_not_defined(b,this._mask_elements[b])){return}var a=this._mask_elements[b]["element"];$(a).remove();if(rdx.utils.is_defined(this._mask_elements[b]["component"])){this._mask_elements[b]["component"].stop_progress_bar()}delete this._mask_elements[b];$(document).unbind(rdx.events.KEYUP,this._key_up_function).unbind(rdx.events.KEYDOWN,this._key_down_function)};this.unmask_dom_element=function(b,d){if(rdx.utils.is_not_defined(d,this._mask_elements[d])){return}var a=this._mask_elements[d]["element"];$(a).remove();delete this._mask_elements[d];$(document).unbind(rdx.events.KEYUP,this._key_up_function).unbind(rdx.events.KEYDOWN,this._key_down_function)};this.unmask_component=function(b,d){if(rdx.utils.is_not_defined(this._mask_elements[d])){return}var a=this._mask_elements[d]["element"];if(rdx.utils.is_defined(a)){$(a).remove()}if(rdx.utils.is_defined(b)){b.removeClass("mask_position")}else{if(rdx.utils.is_defined(this._mask_elements[d]["mask_element"])){$(this._mask_elements[d]["mask_element"]).removeClass("mask_position")}}$(document).unbind(rdx.events.KEYUP,this._key_up_function).unbind(rdx.events.KEYDOWN,this._key_down_function);delete this._mask_elements[d]};this.get_id=function(){if(this.MASK_ID==999999){this.MASK_ID=0}this.MASK_ID=this.MASK_ID+1;return this.MASK_ID};this.unmask_all_components=function(){if(rdx.utils.is_object_empty(this._mask_elements)){return}var a={};for(var b in this._mask_elements){if(b==rdx.mask.SLIDER_MASK){a[b]=this._mask_elements[b];continue}if(this._mask_elements[b]["custom_mask"]===true){continue}rdx.mask.unmask_component(this._mask_elements[b]["element"],b)}if(!rdx.utils.is_object_empty(a)){this._mask_elements=a}rdx.page.get_content().attr("aria-hidden","false")}};rdx.context=function(a){this.OBJECT_NAME="rdx.context";this._data=null;this._url_params=new Object();this._DEFAULT_PROPERTIES={is_data_set:false,is_query_param:null,count:false,get_by_name:null,force_get_by_name:null,filter:null,url_name_param:null,custom:null,static_filter:null,static_get_by_name:null,exclude_filter:null,use_args:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._url_params.use_args=this._properties.use_args};rdx.context.prototype.set_use_args=function(a){this._properties.use_args=a;this._url_params.use_args=a};rdx.context.prototype.set_context_data=function(d,a){if(rdx.utils.is_defined(a)){this._properties=$.extend({},this._properties,a)}this.set_use_args(this._properties.use_args);d=(this._properties.is_data_set&&rdx.utils.is_not_defined(d))?{}:d;if(rdx.utils.is_defined(d)){this._data=(this._properties.is_data_set===true)?d:null;if(rdx.utils.is_defined(this._properties.force_get_by_name)){rdx.url_utils.add_to_url_object(this._url_params,this._properties.force_get_by_name,rdx.url_utils.FORCE_GET_BY_NAME_TYPE,d)}else{rdx.url_utils.remove_type_from_url_object(this._url_params,rdx.url_utils.FORCE_GET_BY_NAME_TYPE)}if(rdx.utils.is_defined(this._properties.get_by_name)){rdx.url_utils.add_to_url_object(this._url_params,this._properties.get_by_name,rdx.url_utils.GET_BY_NAME_TYPE,d)}else{rdx.url_utils.remove_type_from_url_object(this._url_params,rdx.url_utils.GET_BY_NAME_TYPE)}if(rdx.utils.is_defined(this._properties.filter)){rdx.url_utils.add_to_url_object(this._url_params,this._properties.filter,rdx.url_utils.GET_FILTER_TYPE,d)}else{rdx.url_utils.remove_type_from_url_object(this._url_params,rdx.url_utils.GET_FILTER_TYPE)}if(this._properties.count===true){rdx.url_utils.add_to_url_object(this._url_params,["count"],rdx.url_utils.GET_COUNT_TYPE,{count:"yes"})}else{rdx.url_utils.remove_type_from_url_object(this._url_params,rdx.url_utils.GET_COUNT_TYPE)}if(rdx.utils.is_defined(this._properties.url_name_param)){rdx.url_utils.add_to_url_object(this._url_params,this._properties.url_name_param,rdx.url_utils.NAME_IN_URL_PARAM,d)}else{rdx.url_utils.remove_type_from_url_object(this._url_params,rdx.url_utils.NAME_IN_URL_PARAM)}}if(rdx.utils.is_defined(this._properties.custom)){var f=this._properties.custom;var b=rdx.utils.object_keys(f);rdx.url_utils.add_to_url_object(this._url_params,b,rdx.url_utils.GET_CUSTOM_TYPE,f)}else{rdx.url_utils.remove_type_from_url_object(this._url_params,rdx.url_utils.GET_CUSTOM_TYPE)}if(rdx.utils.is_defined(this._properties.is_query_param)){this._url_params[rdx.url_utils.IS_QUERY_PARAM]=this._properties.is_query_param}if(rdx.utils.is_defined(this._properties.static_filter)){var f=this._properties.static_filter;var e=rdx.url_utils.GET_FILTER_TYPE;if(rdx.utils.is_defined(this._properties.use_args)&&this._properties.use_args==true){e=rdx.url_utils.GET_ARGS_TYPE}var b=rdx.utils.object_keys(f);rdx.url_utils.add_to_url_object(this._url_params,b,e,f);this._url_params[rdx.url_utils.IS_QUERY_PARAM]=true}if(rdx.utils.is_defined(this._properties.static_get_by_name)){var f=this._properties.static_get_by_name;var b=rdx.utils.object_keys(f);rdx.url_utils.add_to_url_object(this._url_params,b,rdx.url_utils.GET_BY_NAME_TYPE,f)}};rdx.context.prototype.remove_url_type=function(a){if(rdx.utils.is_not_defined(this._url_params[a])){return}rdx.url_utils.remove_type_from_url_object(this._url_params,a);this._properties[a]=null};rdx.context.prototype.set_data=function(a){if(rdx.utils.is_not_defined(a)){return}this._properties.is_data_set=true;this._data=a};rdx.context.prototype.remove_param_from_url_type=function(a,b){if(rdx.utils.is_not_defined(this._url_params[a])||rdx.utils.is_not_defined(b)){return}rdx.url_utils.remove_from_url_object(this._url_params,b,a)};rdx.context.prototype.get_url_params=function(){return this._url_params};rdx.context.prototype.get_data=function(){return this._data};rdx.context.prototype.set_is_query_param=function(a){this._url_params[rdx.url_utils.IS_QUERY_PARAM]=a};rdx.context.prototype.is_data_set=function(){return rdx.utils.is_defined(this._data)?true:false};rdx.context.prototype.is_url_params_set=function(){return rdx.url_utils.is_url_object_not_empty(this._url_params)};rdx.context.prototype.invalidate_data=function(){this._data=null};rdx.context.prototype.get_object_name=function(){return"rdx.context"};rdx.context.prototype.get_properties=function(){return this._properties};rdx.context.prototype._add_to_data_object=function(e,d,b,h){if(!e[b]){e[b]=new Array()}if(rdx.utils.is_array(d)){d=rdx.utils.convert_array_to_map(d)}for(var g in d){var a=d[g];var f=rdx.utils.get_data_value(h,g);if(rdx.utils.is_defined(f)){rdx.url_utils._add_to_url_object(e,a,f,b)}}};rdx.url_utils=new function(){this.GET_TYPE="get";this.GET_COUNT_TYPE="count";this.GET_FILTER_TYPE="filter";this.EXCLUDE_FILTER_TYPE="exclude_filter";this.GET_BY_NAME_TYPE="get_by_name";this.STATIC_GET_BY_NAME_TYPE="static_get_by_name";this.FORCE_GET_BY_NAME_TYPE="force_get_by_name";this.GET_CUSTOM_TYPE="query_params";this.NAME_IN_URL_PARAM="url_by_name";this.IS_QUERY_PARAM="is_query_param";this.GET_ARGS_TYPE="args";this.FILTER_FOR_GET=this.GET_ARGS_TYPE;this.GET_GROUBY_TYPE="group_by";this.GET_ORDERBY_TYPE="order_by";this.GET_ATTRS_TYPE="attrs";this.predefined_rdx_params=[this.GET_COUNT_TYPE,this.GET_FILTER_TYPE,this.GET_ARGS_TYPE];this.get_url=function(n,m){var b=n;if(!rdx.utils.is_defined(m)){return n}if(typeof(m)=="string"){return this.get_simple_url(n,m)}var f=this.FILTER_FOR_GET;if(rdx.utils.is_defined(m.use_args)&&m.use_args===true){f=this.GET_ARGS_TYPE}var d=rdx.utils.is_not_defined(m[this.IS_QUERY_PARAM])?false:m[this.IS_QUERY_PARAM];var a=null;if(b.indexOf("?")!=-1){var e=rdx.utils.parse_url(b,this.predefined_rdx_params,this.GET_CUSTOM_TYPE);a=(rdx.utils.is_defined(e.args))?true:false;m=rdx.url_utils.merge_query_params(m,e);m[this.IS_QUERY_PARAM]=(rdx.utils.is_defined(e[this.GET_FILTER_TYPE]))?true:d;b=b.substring(0,b.indexOf("?"));d=m[this.IS_QUERY_PARAM]}var g;var h;g=this.GET_ARGS_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])&&((rdx.utils.is_defined(a)&&a==true)||(rdx.utils.is_defined(m.use_args)&&m.use_args==true))){h=m[g];b=this.get_type_url(b,h,rdx.url_utils.GET_ARGS_TYPE,true)}g=this.FORCE_GET_BY_NAME_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_type_url(b,h,f,false)}g=this.GET_BY_NAME_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_type_url(b,h,f,d)}g=this.STATIC_GET_BY_NAME_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];if(rdx.utils.is_defined(m.use_args)&&m.use_args===true){f=this.GET_ARGS_TYPE;b=this.get_type_url(b,h,f,d)}}g=this.GET_COUNT_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){b=this.get_count_url(b)}g=this.GET_FILTER_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_type_url(b,h,"filter",d)}g=this.GET_CUSTOM_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_custom_url(b,h)}g=this.NAME_IN_URL_PARAM;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_custom_url(b,h)}g=this.GET_ATTRS_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_type_url(b,h,rdx.url_utils.GET_ATTRS_TYPE,true)}g=this.GET_GROUBY_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_type_url(b,h,rdx.url_utils.GET_GROUBY_TYPE,true)}g=this.GET_ORDERBY_TYPE;if(rdx.utils.is_defined(m[g])&&rdx.utils.is_object_not_empty(m[g])){h=m[g];b=this.get_orderby_url(b,h,rdx.url_utils.GET_ORDERBY_TYPE,m.is_ascending)}return b};this.get_type_url=function(b,a,f,e){var d=rdx.utils.is_array(a);if(d){if(a.length==1&&!e){return this.get_simple_url(b,a,true)}else{return this.get_params_url(b,a,f)}}else{if(rdx.utils.is_not_defined(a)){return b}return this.get_simple_url(b,a)}return base_url};this.get_orderby_url=function(b,a,d,e){if(e==false){e="no"}else{e="yes"}b=b+"&order_by="+a[0]["name"]+"&asc="+e;return b};this.get_count_url=function(a){return this.add_query_param(a,"count","yes")};this.add_query_param=function(b,a,d){return b+this.get_url_separtor(b)+a+"="+rdx.url_utils.encode_uri_component(d)};this.get_url_separtor=function(a){var b="?";if(this.contains_question_mark(a)){b="&"}return b};this.get_params_url=function(b,e,d){var f=d+"=";for(var a=0;a<e.length;a++){if(rdx.utils.is_defined(e[a]["value"])){f+=rdx.url_utils.encode_uri_component(e[a]["name"])+":"+rdx.url_utils.encode_uri_component(e[a]["value"])}else{f+=rdx.url_utils.encode_uri_component(e[a]["name"])}f+=","}f=f.substring(0,f.lastIndexOf(","));return this.get_simple_url(b,f,false,this.get_url_separtor(b))};this.get_custom_url=function(b,e,d){var f="";for(var a=0;a<e.length;a++){if(rdx.utils.is_defined(e[a]["name"])&&rdx.utils.is_defined(e[a]["value"])){f+=rdx.url_utils.encode_uri_component(e[a]["name"])+"="+rdx.url_utils.encode_uri_component(e[a]["value"]);f+="&"}}f=f.substring(0,f.lastIndexOf("&"));return b+this.get_url_separtor(b)+f};this.contains_question_mark=function(a){if(rdx.utils.is_defined(a)){return a.indexOf("?")!=-1}};this.get_simple_url=function(d,g,f,e){var h="/";if(rdx.utils.is_defined(e)){h=e}if(f){for(var b=0;b<g.length;b++){var a=rdx.url_utils.encode_uri_component(g[b]["value"].toString().replace(/\//g,"%2F"));return d+h+a}}return d+h+g};this.remove_from_url_object=function(e,b,d){if(rdx.utils.is_not_defined(e,e[d])||(!rdx.utils.is_array(e[d]))){return}for(var a=(e[d].length-1);a>=0;a--){if(e[d][a]["name"]==b){e[d].splice(a,1);break}}if(e[d].length==0){delete e[d]}};this.remove_type_from_url_object=function(b,a){if(rdx.utils.is_not_defined(b,b[a])){return}delete b[a]};this.add_to_url_object=function(m,n,f,d){if(!m[f]){m[f]=new Array()}if(rdx.utils.is_array(n)){n=rdx.utils.convert_array_to_map(n)}for(var g in n){var a=n[g];var e=rdx.url_utils._get_key(g);var h=rdx.utils.get_data_value(d,e);if(rdx.utils.is_array(h)){h=h[0]}if(rdx.utils.is_defined(h)){var b=rdx.url_utils._get_key(a);this._add_to_url_object(m,b,h,f)}}};this._add_to_url_object=function(e,b,f,d){for(var a=0;a<e[d].length;a++){if(e[d][a]["name"]==b){e[d][a]["value"]=f;return}}e[d].push({name:b,value:f})};this._get_key=function(a){if(rdx.utils.is_defined(a)&&a.indexOf(".")!=-1){var b=a.split(".");return b[b.length-1]}return a};this.construct_url_params=function(f,d,e,g,b){if(rdx.utils.is_not_defined(f)){f=new Object()}if(rdx.utils.is_not_defined(e)&&rdx.utils.is_not_defined(g)&&rdx.utils.is_defined(b)&&rdx.utils.is_not_empty(b)){f[d]=new Array();for(var a=0;a<b.length;a++){if(rdx.utils.is_defined(b[a].value)){f[d].push({name:b[a].key,value:b[a].value})}else{f[d].push({name:b[a].key})}}}else{this.add_to_url_object(f,e,d,g)}return f};this.is_url_object_not_empty=function(d){if(rdx.utils.is_object_empty(d)){return false}var a=false;for(var b in d){if(rdx.utils.is_array(d[b])){if(d[b].length>0){a=true}}}return a};this.merge_query_params=function(a,e){if(rdx.utils.is_not_defined(a)){return e}for(var f in e){if(rdx.utils.is_defined(a[f])&&a[f].length>0){for(var d=0;d<(e[f]).length;d++){for(var b=0;b<(a[f]).length;b++){add_to_url_object=true;if(String(a[f][b]["name"])==String(e[f][d]["name"])){add_to_url_object=false;break}}if(add_to_url_object==true){(a[f]).push(e[f][d])}}}else{a[f]=e[f]}}return a};this.encode_uri_component=function(b,a){if(rdx.utils.is_empty(b)){return b}b=encodeURIComponent(b);if(rdx.USE_DOUBLE_ENCODING==rdx.ALL||(rdx.utils.is_defined(a)&&a==true)){b=encodeURIComponent(b)}return b};this.replace_placeholder_in_url=function(b){var f=b.split("/");for(var d=0;d<f.length;d++){if(f[d][0]=="{"){var a=f[d].substring(1,f[d].length-1);var e=f[d];if(rdx.utils.is_defined(helios[a])){e=helios[a]}b=b.replace(f[d],e)}}return b};this.convert_filter_object_to_regex_form=function(d){for(var f in d){if(d.hasOwnProperty(f)){var m=d[f];if(m instanceof Array&&m.length>1){var a="/";var b="|";var h="";for(var e=0;e<m.length;e++){var g=m[e];if(e>0){h+=b}h+=g}d[f]=a+h+a}}}return d};this.stringify_url_params_json=function(a){var e=a.filter;var b="";for(var d in e){b=b+e[d].name+":"+e[d].value+","}b=b.replace(/(^,)|(,$)/g,"");return{filter:b}};this.get_value_from_url_params_filter=function(a,e){if(rdx.utils.is_not_defined(a)||rdx.utils.is_not_defined(e)){return""}var f=a.filter;if(rdx.utils.is_not_defined(a)){return""}var b="";for(var d in f){if(rdx.utils.is_defined(f[d].name)&&f[d].name===e&&rdx.utils.is_defined(f[d].value)){b=b+f[d].value+","}else{if(rdx.utils.is_defined(f[d][e])){b=b+f[e]+","}else{continue}}}b=b.replace(/(^,)|(,$)/g,"");return b};this.populate_attrs_from_resource_defn=function(e){var a=e.resource_properties;var b="";if(Array.isArray(a)){for(var d in a){b=b+","+a[d].key}}else{for(var d in a){var f=null;if(rdx.utils.is_defined(a[d].key)){f=a[d].key}else{f=d}b=b+","+f}}return b.replace(/(^,)|(,$)/g,"")}};rdx.message_box=new function(){this._MESSAGE_BOX_RENDERED=false;this._INFO_TITLE_KEY="rdx.message_box_information";this._WARNING_TITLE_KEY="rdx.message_box_warning";this._ERROR_TITLE_KEY="rdx.message_box_error";this._CONFIRMATION_TITLE_KEY="rdx.message_box_confirmation";this._OK_BUTTON_KEY="rdx.message_box_ok_button";this._YES_BUTTON_KEY="rdx.message_box_yes_button";this._NO_BUTTON_KEY="rdx.message_box_no_button";this._RETRY_BUTTON_KEY="rdx.message_retry_button";this._button=null;this.show=function(v,g,C,A,s,B,f){if(this._MESSAGE_BOX_RENDERED||rdx.utils.is_empty(g)){return}this.current_focus=document.activeElement;C=rdx.i18n.get_string(C);g=rdx.i18n.get_string(g);this._MESSAGE_BOX_RENDERED=true;var o=$("<div>");var z=this._get_message_box(v,g);var h=this._get_detailed_message(B);var w=this._get_message_box_buttons(v,o,A,s,f);o.append(z);if(rdx.utils.is_defined(h)){o.append(h)}if(rdx.utils.is_defined(f)){var m=$("<div>").addClass("additional_action_div");for(var e=0;e<f.length;e++){var t=rdx.utils.is_defined(f[e]["value"])?f[e]["value"]:"";var n=$("<div>");var d=new rdx.form_field({label:f[e]["label"],label_width:150,display_label:true,value:t});rdx.component_helper.get_component(f[e]["type"],n,d).render();n.append($("<span>").append(f[e]["label"]));m.append(n)}o.append(m)}o.append(w);var u=this;var q={minHeight:10,minWidth:350,maxWidth:385,modal:true,resizable:false,title:C,dialogClass:"rdx_message_box",close:function(){u._MESSAGE_BOX_RENDERED=false;switch(v){case rdx.CONFIRMATION:if(rdx.utils.is_defined(s)){s.call_back()}break;default:if(rdx.utils.is_defined(A)){A.call_back()}break}}};o.dialog(q);var b=$(".ui-widget-overlay");var a=b.length;if(a>0){var p=$(b[a-1]);if(p.css("z-index")>9999998){p.css("z-index",9999998)}}if(rdx.utils.is_defined(this._button)){this._button.focus()}if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx_ut_executor_deferred.error_is_seen(rdx_ut_executor_deferred,g,w)}};this.info=function(b,e,d,a){this.show(rdx.INFO,b,this._get_title(d,rdx.INFO),e,null,a)};this.error=function(d,f,e,a){try{rdx.mask.unmask_all_components()}catch(b){}this.show(rdx.ERROR,d,this._get_title(e,rdx.ERROR),f,null,a)};this.error_retry=function(b,f,e,d,a){this.show(rdx.ERROR_RETRY,b,this._get_title(d,rdx.ERROR),f,e,a)};this.warning=function(d,f,e,a){try{rdx.mask.unmask_all_components()}catch(b){}this.show(rdx.WARNING,d,this._get_title(e,rdx.WARNING),f,null,a)};this.confirm=function(b,d,f,e,a){this.show(rdx.CONFIRMATION,b,this._get_title(e,rdx.CONFIRMATION),d,f,null,a)};this._get_title=function(b,a){if(b){return rdx.i18n.get_string(b)}switch(a){case rdx.INFO:return rdx.i18n.get_string(this._INFO_TITLE_KEY);case rdx.ERROR:case rdx.ERROR_RETRY:return rdx.i18n.get_string(this._ERROR_TITLE_KEY);case rdx.WARNING:return rdx.i18n.get_string(this._WARNING_TITLE_KEY);case rdx.CONFIRMATION:return rdx.i18n.get_string(this._CONFIRMATION_TITLE_KEY)}return rdx.i18n.get_string(this._INFO_TITLE_KEY)};this._get_message_box=function(e,f){var b=$("<div>").addClass("message_box_content_container");var g=$("<div>").addClass("message_box").appendTo(b);e=rdx.utils.is_not_defined(e)?rdx.INFO:e;g.addClass(e);f=rdx.utils.html_decode(f);var a=f.split("\n");if(a.length>1){for(var d=0;d<a.length;d++){$("<p>").text(a[d]).appendTo(g)}}else{g.text(f)}return b};this._get_detailed_message=function(d){if(rdx.utils.is_not_defined(d)){return null}var e=$('<table role="presentation">').addClass("message_box_content_container").append($("<tbody>"));var f=$("<tr>");var b=$("<img>").attr("src",rdx.images.NAVIGATE_OPEN_IMG).attr("alt","Navigate open image");f.append($("<td>").append(b).append($("<a>").append(rdx.i18n.get_string("rdx.message_box_details"))));var a=$("<tr>");a.hide();a.append($("<td>").append(d));f.bind(rdx.events.CLICK,{message_row:a,icon:b},function(m){var g=m.data.message_row;var h=m.data.icon;if(g.css("display")=="none"){h.attr("src",rdx.images.NAVIGATE_CLOSE_IMG)}else{h.attr("src",rdx.images.NAVIGATE_OPEN_IMG)}g.toggle()});e.append(f);e.append(a);return e};this._get_message_box_buttons=function(f,d,a,m,g){var n=true;var b=false;if(rdx.utils.is_defined(a)){b=true}var e=$(document.createElement("div"));e.attr("align","center");var h={};switch(f){case rdx.CONFIRMATION:if(rdx.utils.is_defined(a)){this._add_blue_button_properties(h,this._YES_BUTTON_KEY,new rdx.callback(this,this._handle_action_button_click,[a,d,g]))}this._add_grey_button_properties(h,this._NO_BUTTON_KEY,new rdx.callback(this,this._handle_action_button_click,[m,d]));break;case rdx.ERROR_RETRY:if(rdx.utils.is_defined(a)){this._add_blue_button_properties(h,this._RETRY_BUTTON_KEY,new rdx.callback(this,this._handle_action_button_click,[a,d]))}this._add_grey_button_properties(h,this._NO_BUTTON_KEY,new rdx.callback(this,this._handle_action_button_click,[m,d]));break;default:this._add_blue_button_properties(h,this._OK_BUTTON_KEY,new rdx.callback(this,this._handle_action_button_click,[a,d]));break}if(rdx.utils.is_object_not_empty(h)){new rdx.button_bar(e,new rdx.form_field({properties:h})).render()}return e};this._add_grey_button_properties=function(b,a,d){b.add_grey_button=true;b.grey_button_label=a;b.grey_button_click_handler_callback=d};this._add_blue_button_properties=function(b,a,d){b.add_blue_button=true;b.blue_button_label=a;b.blue_button_click_handler_callback=d};this._handle_action_button_click=function(d,e,b,a){this._MESSAGE_BOX_RENDERED=false;if(rdx.utils.is_defined(e)){if(rdx.utils.is_defined(a)){e.call_back([b])}else{e.call_back()}}b.remove();this.current_focus.focus()}};rdx.overlay_dialog=new function(){this._OVERLAY_BOX_RENDERED=false;this._OK_BUTTON_KEY="rdx.message_box_ok_button";this.show=function(m,o,b){this._OVERLAY_BOX_RENDERED=true;var a=$("<div>");var e=m;var g=this._get_overlay_box_buttons(a,b);if(o.length!==0){var s=this._get_overlay_box_type(o)}a.append(s);a.append(e);a.append("<hr>");a.append(g);var p=this;var d={minWidth:623,maxWidth:700,modal:true,resizable:false,dialogClass:"rdx_overlay_box",close:function(){p._OVERLAY_BOX_RENDERED=false;if(rdx.utils.is_defined(b)){b.call_back()}}};a.dialog(d);var n=$(".ui-widget-overlay");var q=n.length;if(q>0){var f=$(n[q-1]);if(f.css("z-index")>9999998){f.css("z-index",9999998)}}var h=a.closest(".rdx_overlay_box");h.css("top","20%")};this._get_overlay_box_type=function(b){var a=$("<div>").addClass("overlay_dialog_type");switch(b){case rdx.SUCCESS:a.addClass("success_icon");break}return a};this._get_overlay_box_buttons=function(e,b){var a=$(document.createElement("div"));a.attr("align","center");var d={};this._add_ok_button_properties(d,this._OK_BUTTON_KEY,new rdx.callback(this,this._handle_action_button_click,[b,e]));if(rdx.utils.is_object_not_empty(d)){new rdx.button_bar(a,new rdx.form_field({properties:d})).render()}return a};this._add_ok_button_properties=function(b,a,d){b.add_blue_button=true;b.blue_button_label=a;b.blue_button_click_handler_callback=d};this._handle_action_button_click=function(b,d,a){this._OVERLAY_BOX_RENDERED=false;a.remove();if(rdx.utils.is_defined(d)){d.call_back()}}};rdx.message_container=new function(){this.POSITION_TOP="TOP";this.POSITION_BOTTOM="BOTTOM";this._get_properties=function(a){var b={img_url:rdx.images.MESSAGE_WARNING,position:rdx.message_container.POSITION_TOP,add_custom_button:false,custom_button_text:"",button_bar_properties:null,custom_button_callback:null,parent:null,close_callback:null,message:null,title_message:null,add_close_button:true,hide_after_timeout:null,pure_text:false};return $.extend({},b,a)};this.show=function(d,e,a){var b=this._get_properties(a);if(e==rdx.SUCCESS){this.success(d,b.message,a,b.message_title)}else{this.warning(d,b.message_title,b.message,a)}};this.info=function(g,m,n,a){var f=this._get_properties(a);var h=$("<div>").addClass("message_container_info").addClass("message_container_common");if(f.pure_text){h.append($("<strong>").text(rdx.i18n.get_string(m)))}else{h.append($("<strong>").append(rdx.i18n.get_string(m)))}if(f.add_close_button){var b=$("<button>").addClass("btn-icon message_container_close_image").attr("aria-label","Click here to close");var e=$("<span>").addClass("hide").text("Close").appendTo(b);b.bind(rdx.events.CLICK,{info_div:h},function(o){g.remove();if(rdx.utils.is_defined(f.close_callback)){(f.close_callback).call_back()}return});h.append(b)}if(rdx.utils.is_defined(n)){if(rdx.utils.is_string(n)){if(f.pure_text){h.append($("<p>").text(rdx.i18n.get_string(n)))}else{h.append($("<p>").append(rdx.i18n.get_string(n)))}}else{if(f.pure_text){h.append($("<p>").text(n))}else{h.append($("<p>").append(n))}}}var d=this._get_buttons(f);if(rdx.utils.is_defined(d)){h.append(d)}if(rdx.utils.is_defined(g)){h.hide();if(rdx.utils.is_defined(f.id)){h.attr("id",f.id);g.find("#"+f.id).remove()}if(f.position==rdx.message_container.POSITION_TOP){g.prepend(h)}else{g.append(h)}rdx.utils.slide_up_down(h,false)}return h};this.error=function(h,m,n,a){var g=this._get_properties(a);var f=$("<div>").attr({role:"dialog","aria-label":"Error message"}).addClass("message_container_error");if(rdx.utils.is_string(n)){if(g.pure_text){f.text(rdx.utils.html_decode(rdx.i18n.get_string(n)))}else{f.append(rdx.utils.html_decode(rdx.i18n.get_string(n)))}}else{if(g.pure_text){f.text(rdx.utils.html_decode(n))}else{f.append(rdx.utils.html_decode(n))}}if(g.add_close_button){var b=$("<button>").addClass("btn-icon message_container_close_image").attr("aria-label","Click here to close");var e=$("<span>").addClass("hide").text("Close").appendTo(b);b.bind(rdx.events.CLICK,{error_div:f},function(o){o.preventDefault();f.remove();if(rdx.utils.is_defined(g.close_callback)){(g.close_callback).call_back()}return});f.append(b)}if(rdx.utils.is_defined(m)){if(rdx.utils.is_string(m)){if(g.pure_text){f.append($("<p>").text(rdx.utils.html_decode(rdx.i18n.get_string(m))))}else{f.append($("<p>").append(rdx.utils.html_decode(rdx.i18n.get_string(m))))}}else{if(g.pure_text){f.append($("<p>").text(m))}else{f.append($("<p>").append(m))}}}if(g.add_custom_button==true){var d=this._get_buttons(g);if(rdx.utils.is_defined(d)){f.append(d)}}if(rdx.utils.is_defined(h)){f.addClass("hide");if(rdx.utils.is_defined(g.id)){f.attr("id",g.id);h.find("#"+g.id).remove()}if(g.position==rdx.message_container.POSITION_TOP){h.prepend(f)}else{h.append(f)}rdx.utils.slide_up_down(f,false)}return};this.warning=function(h,m,n,a){var g=this._get_properties(a);var d=$("<div>").attr({role:"dialog","aria-label":"Warning message"}).addClass("message_container_warning").addClass("message_container_common");if(g.pure_text){d.append($("<strong>").text(rdx.i18n.get_string(m)))}else{d.append($("<strong>").append(rdx.i18n.get_string(m)))}if(g.add_close_button){var b=$("<button>").addClass("btn-icon message_container_close_image").attr("aria-label","Click here to close");var f=$("<span>").addClass("hide").text("Close").appendTo(b);b.bind(rdx.events.CLICK,{warning_div:d},function(o){h.remove();if(rdx.utils.is_defined(g.close_callback)){(g.close_callback).call_back()}return});d.append(b)}if(rdx.utils.is_defined(n)){if(rdx.utils.is_string(n)){if(g.pure_text){d.append($("<p>").text(rdx.i18n.get_string(n)))}else{d.append($("<p>").append(rdx.i18n.get_string(n)))}}else{if(g.pure_text){d.text(n)}else{d.append(n)}}}var e=this._get_buttons(g);if(rdx.utils.is_defined(e)){d.append(e)}if(rdx.utils.is_defined(h)){d.hide();if(rdx.utils.is_defined(g.id)){d.attr("id",g.id);h.find("#"+g.id).remove()}if(g.position==rdx.message_container.POSITION_TOP){h.prepend(d)}else{h.append(d)}rdx.utils.slide_up_down(d,false)}if(rdx.utils.is_defined(g.hide_after_timeout)&&g.hide_after_timeout==true){setTimeout(function(){rdx.utils.slide_up_down(d,true);d.remove()},15000,d)}return d};this.success=function(e,g,a,f){var d=this._get_properties(a);var b=$("<div>").attr({role:"dialog","aria-label":"Success message"}).addClass("message_container_success");if(rdx.utils.is_string(g)){if(d.pure_text){b.text(rdx.i18n.get_string(g))}else{b.append(rdx.i18n.get_string(g))}}else{if(d.pure_text){b.text(g)}else{b.append(g)}}if(d.add_close_button){var m=($("<button>").addClass("btn-icon message_container_close_image").attr({"aria-label":"Close button"})).bind(rdx.events.CLICK,{success_div:b},function(n){b.remove();if(rdx.utils.is_defined(d.close_callback)){(d.close_callback).call_back()}return});b.append(m)}if(rdx.utils.is_defined(f)){if(rdx.utils.is_string(f)){if(d.pure_text){b.append($("<p>").text(rdx.i18n.get_string(f)))}else{b.append($("<p>").append(rdx.i18n.get_string(f)))}}else{if(d.pure_text){b.append($("<p>").text(f))}else{b.append($("<p>").append(f))}}}if(d.add_custom_button==true){var h=this._get_buttons(d);if(rdx.utils.is_defined(h)){b.append(h)}}if(rdx.utils.is_defined(e)){b.hide();if(rdx.utils.is_defined(d.id)){b.attr("id",d.id);e.find("#"+d.id).remove()}if(d.position==rdx.message_container.POSITION_TOP){e.prepend(b)}else{e.append(b)}rdx.utils.slide_up_down(b,false)}if(rdx.utils.is_defined(d.hide_after_timeout)&&d.hide_after_timeout==true){setTimeout(function(){rdx.utils.slide_up_down(b,true);b.remove()},15000,b)}return};this._get_buttons=function(a){if(rdx.ELEMENTS_READONLY===true){return}if(rdx.utils.is_defined(a.button_bar_properties)){var d=new rdx.button_bar(e,a.button_bar_properties).render()}if(a.add_custom_button){var b=$("<table>").append($("<tbody>"));var e=$("<tr>");var f=$("<button>").addClass("search_button search_grey_button").text(a.custom_button_text);e.append($("<td>").append(f));if(rdx.utils.is_defined(a.custom_button_callback)){f.bind(rdx.events.CLICK,{callback:a.custom_button_callback},function(g){g.data.callback.call_back([function(){return{hide:function(){$(".message_container_warning").hide()}}}])})}b.append(e);return b}}};rdx.callback=function(a,d,b){if(rdx.utils.is_function(a)){b=d;d=a;a=null}this.object=a?a:null;this.method=d?d:function(){};this.params=b?b:[]};rdx.callback.prototype.call_back=function(a){return this.method.apply(this.object,a?rdx.utils.unshift_clone_array(this.params,a):this.params)};rdx.callback.prototype.set_params=function(a){this.params=a};rdx.callback.prototype.get_params=function(a){return this.params};rdx.expression=function(a,b,d){this._lhs_operand=a;this._operator=b;this._rhs_operand=d;this._is_single_expression=true;if(rdx.utils.is_defined(this._operator)&&rdx.utils.is_defined(this._rhs_operand)){this._is_single_expression=false}};rdx.expression.prototype.get_expression=function(a){var b=" ( ";b+=this.get_part_expression(this._lhs_operand,a,true);if(rdx.utils.is_defined(this._operator)&&rdx.utils.is_defined(this._rhs_operand)){b+=this._operator;b+=this.get_part_expression(this._rhs_operand,a,false)}b+=" ) ";return b};rdx.expression.prototype.get_part_expression=function(a,d,b){var e="";if(typeof(a)=="string"){var f=a.match(/\{.*?\}/g);if(rdx.utils.is_defined(f)){for(i=0;i<f.length;i++){variable=f[i].replace(/[{}]/g,"");a=a.replace(f[i],"'"+d[variable]+"'")}e=a}else{if(!this._is_single_expression){b?e+="'"+d[a]+"'":e+="'"+a+"'"}else{e+=a}}}else{e+=a.get_expression(d)}return e};rdx.expression.prototype.evaluate=function(data){if(rdx.utils.is_defined(data)){for(var index=0;index<data.length;index++){if(eval(this.get_expression(data[index]))){return true}}}else{if(eval(this.get_expression())){return true}}return false};rdx.expression.prototype.evaluate_all=function(data){for(var index=0;index<data.length;index++){if(!eval(this.get_expression(data[index]))){return false}}return true};rdx.expression_constant=new function(){this.AND="&&";this.OR="||";this.EQ="==";this.NEQ="!=";this.GT=">";this.GTE=">=";this.LT="<";this.LTE="<="};rdx.action=function(b){var a={label:"",tooltip:"",image_url:null,view:null,class_names:"smooth_all_corner",initial_class_names:"",no_selection:false,single_selection:false,multiple_selection:false,independent_of_selection:false,confirm_message:null,min_row_count:null,max_row_count:null,action_type:rdx.ACTION,expression:null,disabled:false,is_app_context_data_set:false,click_handler_callback:null,prompt_data_callback:null,prompt:null,fetch_resrc_name_from_view:false,expression_mode:"ANY",table_row_click:false,align:rdx.position.LEFT,button_type:rdx.DEFAULT_BUTTON,reset_action_callback:null,state:"",separator:false};this._properties=$.extend({},a,b);this._is_valid=true};rdx.action.prototype.set_click_handler_callback=function(a){this._properties.click_handler_callback=a};rdx.action.prototype.set_reset_action_callback=function(a){this._properties.reset_action_callback=a};rdx.action.prototype.get_click_handler_callback=function(){return this._properties.click_handler_callback};rdx.action.prototype.perform_action=function(a,b){if(this.is_disabled()){return}if(!this._is_valid){return}if(rdx.utils.is_defined(this.get_prompt())){if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.curr_data)){var d={action:rdx.i18n.get_string(this._properties.label.toLowerCase()).toLowerCase(),obj_type:b.title,number_of_selected:1};this._properties.selected_rows_for_action=[];this._properties.selected_rows_for_action.push(b.curr_data);rdx.message_box.confirm(rdx.i18n.get_string(this.get_prompt(),this.get_prompt_data()),new rdx.callback(this,this._invoke_callback,[a,true]))}else{rdx.message_box.confirm(rdx.i18n.get_string(this.get_prompt(),this.get_prompt_data()),new rdx.callback(this,this._invoke_callback))}}else{this._invoke_callback(a)}};rdx.action.prototype._invoke_callback=function(a,b){this._properties.dom_element=a;this.get_click_handler_callback().call_back([this._properties]);if(b){this._properties.selected_rows_for_action=null}};rdx.action.prototype.is_enabled=function(d){this._is_valid=true;var b=d.action_item_data;var e=d.total_item_count;if(this.is_disabled()){return false}if(rdx.utils.is_defined(e)){if(rdx.utils.is_defined(this.get_min_row_count())){if(e<this.get_min_row_count()){this._is_valid=false;return this._is_valid}}}if(rdx.utils.is_defined(this.get_max_row_count())){if(e>=this.get_max_row_count()){this._is_valid=false;return this._is_valid}}if(this.is_independent_of_selection()){this._is_valid=true;return this._is_valid}var a=b.length;if(a<=0){return this.is_no_selection()}else{if((a==1&&this.is_single_selection())||(a>1&&this.is_multiple_selection())){if(this.is_expression_set()){if(this._properties.expression_mode=="ALL"){this._is_valid=this.get_expression().evaluate_all(b);return this._is_valid}else{this._is_valid=this.get_expression().evaluate(b);return this._is_valid}}this._is_valid=true;return this._is_valid}this._is_valid=false;return this._is_valid}};rdx.action.prototype.get_label=function(){return rdx.i18n.get_string(this._properties.label)};rdx.action.prototype.get_tooltip=function(){if(!this._properties.tooltip){this._properties.tooltip=this.get_label()}return rdx.i18n.get_string(this._properties.tooltip)};rdx.action.prototype.get_image_url=function(){if(rdx.ADD_ACTION_IMAGES==false){return rdx.images.SPACER_IMG}return this._properties.image_url};rdx.action.prototype.get_class_names=function(){return this._properties.class_names};rdx.action.prototype.is_disabled=function(){return this._properties.disabled};rdx.action.prototype.set_disabled=function(a){this._properties.disabled=a};rdx.action.prototype.is_no_selection=function(){return this._properties.no_selection};rdx.action.prototype.get_action_type=function(){return this._properties.action_type};rdx.action.prototype.is_single_selection=function(){return this._properties.single_selection};rdx.action.prototype.is_multiple_selection=function(){return this._properties.multiple_selection};rdx.action.prototype.is_independent_of_selection=function(){return this._properties.independent_of_selection};rdx.action.prototype.get_min_row_count=function(){return this._properties.min_row_count};rdx.action.prototype.get_max_row_count=function(){return this._properties.max_row_count};rdx.action.prototype.is_expression_set=function(){return this._properties.expression!=null};rdx.action.prototype.get_expression=function(){return this._properties.expression};rdx.action.prototype.get_prompt=function(){return this._properties.prompt};rdx.action.prototype.get_prompt_data=function(){if(rdx.utils.is_not_defined(this._properties.prompt_data_callback)){return null}return this._properties.prompt_data_callback.call_back([this._properties])};rdx.action.prototype.get_properties=function(){return this._properties};rdx.action.prototype.get_align=function(){return this._properties.align};rdx.action.prototype.get_button_type=function(){return this._properties.button_type};rdx.action.prototype.set_action_state=function(a){this._properties.state=a};rdx.action.prototype.get_action_state=function(){return this._properties.state};rdx.action.prototype.get_initial_class_names=function(){return this._properties.initial_class_names};rdx.constants=new function(){this.DEFAULT_VERTICAL_OFFSET=50;this.DEFAULT_HORIZONTAL_OFFSET=120;this.DEFAULT_ROOT_POSITION="top";this.CIRCLE="circle";this.RECTANGLE="rect";this.TRIANGLE="triangle";this.SQUARE="square";this.DIAMOND="diamond";this.CROSS="cross";this.CUSTOM="custom";this.TOP="top";this.RIGHT="right";this.BOTTOM="bottom";this.LEFT="left";this.CENTER="center";this.IMAGE="image";this.FIRST="first";this.MIDDLE="middle";this.ADJACENT="adjacent";this.CUSTOM_SHAPE="custom_shape";this.PATH="path";this.UP="up";this.DOWN="down";this.DEFAULT_STROKE_COLOR="#bfbfbf";this.DEFAULT_STROKE_WIDTH="1px";this.DEFAULT_CIRCLE_RADIUS=15;this.DEFAULT_RECT_WIDTH="100";this.DEFAULT_RECT_HEIGHT="40";this.DEFAULT_SQUARE_HEIGHT="60";this.DEFAULT_TRIANGLE_SIZE="600";this.DEFAULT_ROTATION="45";this.DEFAULT_DIAMOND_HEIGHT="22";this.DEFAULT_IMAGE_HEIGHT=45;this.DEFAULT_IMAGE_WIDTH=45;this.FILL_COLOR="#fff";this.DEFAULT_CONNECTOR_STROKE_COLOR="#b7b7b7";this.DEFAULT_CONNECTOR_STROKE_WIDTH="1px";this.STEP="step";this.DIAGONAL="diagonal";this.LINE="line";this.ARROW_LINE="arrow_line";this.U_TYPE_CONNECTOR="u_connector";this.STEP_CONNECTOR="step";this.LINE_CONNECTOR="line";this.DIAGONAL_CONNECTOR="diagonal";this.INDIVIDUAL_CONNECTION="individual";this.ONE_ONE_CONNECTION="one_one";this.CASCADE_CONNECTION="cascade";this.GROUP_CONNECTION="group";this.CUSTOM_SHAPE_MIN_WIDTH=338;this.CUSTOM_SHAPE_MIN_HEIGHT=400;this.POPUP_MIN_HEIGHT=600;this.POPUP_MIN_WIDTH=338;this.LABEL_OFFSET=15;this.LABEL_MIN_WIDTH=40;this.LABEL_MIN_HEIGHT=20;this.LABEL_FONT_FAMILY="citrixsans-semibold";this.LABEL_FONT_SIZE="12px";this.LABEL_FONT_WEIGHT=500;this.LABEL_COLOR="#666";this.TEXT_WIDTH=100;this.NAV_TYPE_TABS="tabs";this.NAV_TYPE_COLLAPSIBLE="collapsible";this.NAV_TYPE_HAMBURGER="hamburger";this.CROSS_FILTER_THRESHOLD_LIMIT=25000};rdx.link=function(a){this._DEFAULT_PROPERTIES={url:null,width:screen.width,height:screen.height,target_window:"_blank",type:"window"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.link.prototype.fire=function(){if(this._properties.type=="window"){return rdx.utils.openwindow(this._properties.url,this._properties.target_window,this._properties.width,this._properties.height)}};rdx.hyper_link=function(b,d,a){this._parent=b;this._field=d;this._form=a.get_form();this._form_holder=a;this._DEFAULT_PROPERTIES={click_handler_callback:null,custom_class:null,mask_element:false,set_focus_on_field:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,d.get_properties());this._element=rdx.dom_utils.get_element(rdx.form_constants.HYPER_LINK);this.inner_div=$("<div>");this._mask_id=rdx.mask.get_id()};rdx.hyper_link.prototype.render=function(){this._element.bind(rdx.events.CLICK,{element:this._element,inner_div:this.inner_div,form_holder:this._form_holder,form:this._form,click_handler_callback:this._properties.click_handler_callback,properties:this._properties},function(b){if(b.data.properties.mask_element){rdx.mask.mask_component(b.data.element,"__button_elem")}else{b.data.form.mask("__hyper_link"+this._mask_id)}var g=b.data.form.get_form_data();var a=b.data.form.get_app_context_data();var e=null;if(rdx.utils.is_defined(b.data.click_handler_callback)){var d=new rdx.callback_params({return_callback:new rdx.callback(function(p,q){b.data.form.initialize(p);if(rdx.utils.is_defined(b.data.properties.set_focus_on_field)){b.data.form._set_focus(b.data.properties.set_focus_on_field,e)}if(b.data.properties.mask_element){rdx.mask.unmask_component(b.data.element,"__button_elem")}else{b.data.form.unmask("__hyper_link"+this._mask_id)}}),response:g,unformatted_response:g,app_context_data:a});b.data.inner_div.empty();b.data.element.after(b.data.inner_div);var m=b.data.form_holder.get_form_fields();for(var f=0,n=m.length;f<n;f++){var h=m[f];if(h.get_force_validate()){var o=b.data.form._validate_form_field(h,f);if(!o){b.data.form._error_found=true;return false}if(rdx.utils.is_defined(b.data.properties.set_focus_on_field)&&h.get_key()==b.data.properties.set_focus_on_field){e=h}}}b.data.click_handler_callback.call_back([d,b.data.inner_div])}});this._element.append(this._field.get_label());if(rdx.utils.is_defined(this._properties.custom_class)){this._element.addClass(this._properties.custom_class)}this._parent.append(this._element);return this};rdx.hyper_link.prototype.set_data=function(){};rdx.hyper_link.prototype.get_data=function(){};rdx.hyper_link.prototype.get_component=function(){return this._element};rdx.i18n=new function(){this._grouping_separator=",";this._decimal_separator=".";this._locale="en";this._rdx_lang=null;this._ext_lang=new Object();this._app_lang=null;this._initialize=function(){var d=["be","bg","cs","et","fi","fr","hu","lv","no","pl","ru","sk","sr","sv"];var b=["ca","da","de","el","es","hr","is","it","lt","mk","nl","pt","ro","sh","sl","sq","tr","uk"];if($.inArray(this._locale,d)>=0){this._grouping_separator=" ";this._decimal_separator=","}else{if($.inArray(this._locale,b)>=0){this._grouping_separator=".";this._decimal_separator=","}}var a=[];this._init_rdx_lang(a);this._init_ext_lang(a);this._init_app_lang(a);Promise.all(a).then(this._lang_files_loaded,this._lang_files_loaded)};this._lang_files_loaded=function(){rdx.page._trigger_event(rdx.events.LANG_FILES_LOADED)};this._init_rdx_lang=function(b){var f=rdx.FRAMEWORK_BASE+"/rdx/core/lang/";var e=this._load_lang_file("rdx",this._locale,f);var d=this;var a=new Promise(function(h,g){e.then(function(m){d._rdx_lang=window["rdx_lang_"+m];h()},function(){console.log("Failed to load rdx lang file "+rdx+"_en.json");g()})});b.push(a)};this._init_ext_lang=function(g){var e=rdx.FRAMEWORK_BASE+"/rdx/extensions/";for(var b=0,h=rdx.EXTENSIONS.length;b<h;b++){var d=rdx.EXTENSIONS[b];var a=e+d+"/lang/";var n=this._load_lang_file(d,this._locale,a);var f=this;var m=new Promise(function(p,o){n.then(function(q){f._ext_lang[d]=window[d+"_lang_"+q];p()},function(){console.log("Failed to load ext lang file "+d+"_en.json");o()})});g.push(m)}};this._init_app_lang=function(d){if(rdx.APP_I18N_FILE_NAME==""){return}var f=this;if(rdx.utils.is_array(rdx.APP_I18N_FILE_NAME)){this._app_lang={};try{for(var b=0;b<rdx.APP_I18N_FILE_NAME.length;b++){var g=this._load_lang_file(rdx.APP_I18N_FILE_NAME[b],this._locale,rdx.APP_I18N_BASE);(function(){var m=rdx.APP_I18N_FILE_NAME[b];var h=new Promise(function(o,n){g.then(function(p){$.extend(f._app_lang,window[m+"_lang_"+p]);o()},function(){console.log("Failed to load app lang file "+m+"_en.json");n()})});d.push(h)})()}}catch(e){}}else{var g=this._load_lang_file(rdx.APP_I18N_FILE_NAME,this._locale,rdx.APP_I18N_BASE);var a=new Promise(function(m,h){g.then(function(n){f._app_lang=window[rdx.APP_I18N_FILE_NAME+"_lang_"+n];m()},function(){console.log("Failed to load app lang file "+rdx.APP_I18N_FILE_NAME+"_en.json");h()})});d.push(g)}};this._load_lang_file=function(f,b,d){try{window[f+"_lang_"+b];resolve(b)}catch(e){var a=rdx.model.add_base_url_to_url(d+f+"_"+b+".json");var g=rdx.utils.load_json(a);return new Promise(function(m,h){g.then(function(n){window[f+"_lang_"+b]=n;m(b)},function(){var n=rdx.model.add_base_url_to_url(d+f+"_en.json");rdx.utils.load_json(n).then(function(o){window[f+"_lang_en"]=o;m("en")},h)})})}};this._lookup=function(b){if(rdx.utils.is_defined(b)){if(b.indexOf("rdx.")==0){if(b.indexOf("rdx.ext.")==0){var d=b.match(/^rdx\.ext\.(.*)\..*/);if(d.length>=2){var a=d[1];if(rdx.utils.is_defined(this._ext_lang[a])){return this._ext_lang[a][b]}}}else{if(rdx.utils.is_defined(this._rdx_lang)){return this._rdx_lang[b]}}}else{if(rdx.utils.is_defined(this._app_lang)){return this._app_lang[b]}}}return null};this.get_string=function(b,d){if(!b){return b}if(rdx.utils.is_defined(b)){b=b+""}var a=this._lookup(b);if(rdx.utils.is_defined(a)){if(a.indexOf("{rdx.product_title}")>-1){a=a.replace(/{rdx.product_title}/g,rdx.product_title)}if(a.indexOf("{rdx.product_sub_title}")>-1){a=a.replace(/{rdx.product_sub_title}/g,rdx.product_sub_title)}if(rdx.utils.is_defined(d)){$.each(d,function(e,f){a=rdx.utils.get_formatted_string(a,e,f)})}return a}return b};this.get_decimal_separator=function(){return this._decimal_separator};this.get_grouping_separator=function(){return this._grouping_separator}};rdx.page.add_event_handler(rdx.events.BEFORE_PAGE_LOADED,new rdx.callback(rdx.i18n,rdx.i18n._initialize));rdx.help=new function(){this.HELP_TXT="rdx.help";this.HELP_TOOLTIP="rdx.help_tooltip";this.HELP_URL_START_PARAM="#";this._help_url_map=new Object();this._initialize=function(){try{this._help_url_map=eval(rdx.APP_HELP_OBJECT_NAME)}catch(err){}};this.add_help=function(parent,id){if(!this.show_help()){return}var container=$("<div>");var help_div=$("<div>");parent.width("10px");container.addClass("help");container.attr("title",rdx.i18n.get_string(this.HELP_TOOLTIP));help_div.addClass("smooth_all_corner");var help_img=$("<img>");help_img.attr("src",rdx.images.HELP_IMG).attr("alt",rdx.images.HELP_IMG);help_div.append(help_img).attr("title",rdx.i18n.get_string(this.HELP_TXT));this._add_click_handler(help_div,id);container.append(help_div);parent.append(container)};this.show_help=function(){if(rdx.utils.is_not_defined(rdx.HELP_SUPPORTED)){return true}return rdx.HELP_SUPPORTED};this._add_click_handler=function(help_div,id){help_div.bind(rdx.events.CLICK,{help_id:id,help:this},function(event){event.data.help.handle_help_click_event(event.data.help_id)})};this.handle_help_click_event=function(id){var link=new rdx.link({url:this._get_help_url(id),target_window:"RDXHELP",width:800,height:500});link.fire()};this.get_help_url=function(id){return rdx.help._get_help_url(id)};this._get_help_url=function(id){var help_url_param=this._help_url_map[id];var help_base_url=rdx.model.add_base_url_to_url(rdx.APP_HELP_BASE);if(rdx.utils.is_not_defined(help_url_param)){return help_base_url}return help_base_url+this.HELP_URL_START_PARAM+help_url_param}};rdx.page.add_event_handler(rdx.events.APP_LOADED,new rdx.callback(rdx.help,rdx.help._initialize));rdx.client_information=new function(){this._initialise_client_info=function(){if(rdx.utils.is_ie()){rdx.BROWSER=rdx.IE}else{if(rdx.utils.is_safari()){rdx.BROWSER=rdx.SAFARI}else{if(rdx.utils.is_chrome()){rdx.BROWSER=rdx.CHROME}else{if(rdx.utils.is_firefox()){rdx.BROWSER=rdx.FIREFOX}}}}rdx.BROWSER_VERSION=rdx.utils.get_browser_version();if(rdx.utils.is_mac()){rdx.OS=rdx.MAC}else{if(rdx.utils.is_unix()){rdx.OS=rdx.UNIX}else{if(rdx.utils.is_linux()){rdx.OS=rdx.LINUX}else{if(rdx.utils.is_windows()){rdx.OS=rdx.WINDOWS}}}}if(rdx.utils.is_android()){rdx.DEVICE=rdx.ANDROID}else{if(rdx.utils.is_iOS()){rdx.DEVICE=rdx.IOS}else{if(rdx.utils.is_blackberry()){rdx.DEVICE=rdx.BLACKBERRY}else{if(rdx.utils.is_windows_mobile()){rdx.DEVICE=rdx.WINDOWS_MOBILE}else{rdx.DEVICE="Not a handheld"}}}}}};rdx.page.add_event_handler(rdx.events.APP_LOADED,new rdx.callback(rdx.client_information,rdx.client_information._initialise_client_info));rdx.tooltip=function(b,a){this._parent=b;this._tooltip=null;this._is_tooltip_active=false;this._help_dialog_cell_content=null;this._tooltip_dialog_cell=null;this._DEFAULT_PROPERTIES={message:"",append_element:null,remove_handler_callback:null,remove_tooltip_mouse_leave:true,tooltip_more_img_url:null,hide_more:false,class_names:null};this._properties=$.extend(true,{},this._DEFAULT_PROPERTIES,a)};rdx.tooltip.prototype.render=function(d){if(this._is_tooltip_active){return this._tooltip}var q=null;var e=null;var g=null;var b=null;var a=null;var h=null;var o=null;var n=null;var f=$.extend(true,this._properties,d);this._properties=f;this._help_dialog_cell_content=this._properties.message;this._element=this._properties.append_element;this._is_tooltip_active=true;e=$("<div>").addClass("rdx_tooltip_dialog_cell");this._tooltip_dialog_cell=e;this._tooltip=q;g=$("<div>").addClass("tooltip_dialog_content").addClass("rdx_form_style");if(rdx.utils.is_defined(this._properties.class_names)){g.addClass(this._properties.class_names)}b=$("<p>").addClass("tooltip_dialog_learn_more_cell");var m=$("<a>").addClass("dialog_learn_more_content").attr("href","#").append(rdx.i18n.get_string("rdx.more"));b.append(m);a=null;if(rdx.utils.is_defined(this._help_dialog_cell_content)&&this._help_dialog_cell_content.length>0){if((this._help_dialog_cell_content.length>rdx.MAX_TOOLTIP_CONSTANT_LENGTH||rdx.utils.is_defined(this._properties.tooltip_more_img_url))&&(this._properties.hide_more==false)){if(this._help_dialog_cell_content[rdx.MAX_TOOLTIP_CONSTANT_LENGTH]!=" "){o=this._help_dialog_cell_content.substring(rdx.MAX_TOOLTIP_CONSTANT_LENGTH,this._help_dialog_cell_content.length);h=o.indexOf(" ");g.append(this._help_dialog_cell_content.substring(0,(h+rdx.MAX_TOOLTIP_CONSTANT_LENGTH)))}else{g.append(this._help_dialog_cell_content.substring(0,rdx.MAX_TOOLTIP_CONSTANT_LENGTH))}g.append("...");e.append(g,b);this._register_events_for_slider(b)}else{g.append(this._help_dialog_cell_content);e.append(g)}if(this._help_dialog_cell_content.length>300){g.css("width","300px")}else{if(this._help_dialog_cell_content.length>200){g.css("width","200px")}}}else{if(rdx.utils.is_defined(this._element)){e.append(this._element)}}var p=new rdx.bubble_component(this._parent,{content_dom:e,custom_class:"rdx_tooltip_z_index"});this._tooltip=p.render();this._parent.addClass("rdx_tooltip_active");this._register_parent_events();if(this._properties.remove_tooltip_mouse_leave){this._register_events()}return this._tooltip};rdx.tooltip.prototype.remove_tooltip=function(b){if(!this._is_tooltip_active){return}this._tooltip.remove();this._parent.removeClass("rdx_tooltip_active");this._is_tooltip_active=false;if(rdx.utils.is_defined(this._properties.remove_handler_callback)){var a=this._properties.remove_handler_callback;a(this._parent)}};rdx.tooltip.prototype._register_events=function(){this._tooltip.bind(rdx.events.MOUSE_LEAVE,{that:this},function(a){if(!(rdx.utils.is_hover(a.data.that._parent,a))){a.data.that.remove_tooltip(a);a.stopPropagation()}})};rdx.tooltip.prototype._register_parent_events=function(){this._parent.bind(rdx.events.REMOVE,{that:this},function(a){a.data.that.remove_tooltip(a);a.stopPropagation()})};rdx.tooltip.prototype._show_slider=function(d){var b={show_bread_crumb:false,title:"Help"};if(rdx.utils.is_defined(this._properties.tooltip_more_img_url)){b.slider_width="780px"}else{b.slider_width="400px"}var a=rdx.page.show_slider(b,rdx.HELP_SLIDER);d.data.that._add_slider_content(a)};rdx.tooltip.prototype._add_slider_content=function(a){var d=$("<div>").addClass("help_slider_content").addClass("rdx_form_style");a.append(d);d.append(this._help_dialog_cell_content);if(rdx.utils.is_defined(this._properties.tooltip_more_img_url)){var b=$("<div>").addClass("rdx_tooltip_more_img_container").append($("<img>").attr("src",this._properties.tooltip_more_img_url).attr("alt","Help image"));d.append(b)}};rdx.tooltip.prototype._register_events_for_slider=function(a){var d=this;var b=null;a.bind(rdx.events.CLICK,{that:d},function(e){d.remove_tooltip();d._show_slider(e);e.stopPropagation()})};rdx.dependency_object=function(a){this._DEFAULT_PROPERTIES={property:null,event:null,field:null,view:null,trigger_values:null,trigger_expression:null,action:null,component:null,action_fn:null,resource_context:null,dependency_determinant:null,value:null,reverse_action:false,data_context:null,default_data_context:null,field_array:new Array(),component_array:new Array(),single_call_data_refresh:false,view_context:null,row:null,cell:null,separator_row:null,extra_form_field:null,is_parent_dependent:null,pass_context:null,view_to_open:null,event_param:null,go_to:new Array()};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.dependency_object.prototype.get_property=function(){return this._properties.property};rdx.dependency_object.prototype.set_property=function(a){this._properties.property=a};rdx.dependency_object.prototype.get_field=function(){return this._properties.field};rdx.dependency_object.prototype.set_field=function(a){this._properties.field=a};rdx.dependency_object.prototype.get_event_param=function(){return this._properties.event_param};rdx.dependency_object.prototype.set_event_param=function(a){this._properties.event_param=a};rdx.dependency_object.prototype.get_extra_form_field=function(){return this._properties.extra_form_field};rdx.dependency_object.prototype.set_extra_form_field=function(a){this._properties.extra_form_field=a};rdx.dependency_object.prototype.get_view=function(){return this._properties.view};rdx.dependency_object.prototype.set_view=function(a){this._properties.view=a};rdx.dependency_object.prototype.get_trigger_values=function(){return this._properties.trigger_values};rdx.dependency_object.prototype.set_trigger_values=function(a){this._properties.trigger_values=a};rdx.dependency_object.prototype.get_trigger_expression=function(){return this._properties.trigger_expression};rdx.dependency_object.prototype.set_trigger_expression=function(a){this._properties.trigger_expression=a};rdx.dependency_object.prototype.get_action=function(){return this._properties.action};rdx.dependency_object.prototype.set_action=function(a){this._properties.action=a};rdx.dependency_object.prototype.get_component=function(){return this._properties.component};rdx.dependency_object.prototype.set_component=function(a){this._properties.component=a};rdx.dependency_object.prototype.get_action_fn=function(){return this._properties.action_fn};rdx.dependency_object.prototype.set_action_fn=function(a){this._properties.action_fn=a};rdx.dependency_object.prototype.get_resource=function(){return this._properties.resource};rdx.dependency_object.prototype.set_resource=function(a){this._properties.resource=a};rdx.dependency_object.prototype.get_dependency_determinant=function(){return this._properties.dependency_determinant};rdx.dependency_object.prototype.set_dependency_determinant=function(a){this._properties.dependency_determinant=a};rdx.dependency_object.prototype.get_value=function(){return this._properties.value};rdx.dependency_object.prototype.set_value=function(a){this._properties.value=a};rdx.dependency_object.prototype.get_reverse_action=function(){return this._properties.reverse_action};rdx.dependency_object.prototype.set_reverse_action=function(a){this._properties.reverse_action=a};rdx.dependency_object.prototype.get_data_context=function(){return this._properties.data_context};rdx.dependency_object.prototype.set_data_context=function(a){this._properties.data_context=a};rdx.dependency_object.prototype.get_default_data_context=function(){return this._properties.default_data_context};rdx.dependency_object.prototype.set_default_data_context=function(a){this._properties.default_data_context=a};rdx.dependency_object.prototype.get_resource_context=function(){return this._properties.resource_context};rdx.dependency_object.prototype.set_resource_context=function(a){this._properties.resource_context=a};rdx.dependency_object.prototype.get_view_context=function(){return this._properties.view_context};rdx.dependency_object.prototype.set_view_context=function(a){this._properties.view_context=a};rdx.dependency_object.prototype.is_parent_dependent=function(){return this._properties.is_parent_dependent};rdx.dependency_object.prototype.set_is_parent_dependent=function(a){this._properties.is_parent_dependent=a};rdx.dependency_object.prototype.get_pass_context=function(){return this._properties.pass_context};rdx.dependency_object.prototype.set_pass_context=function(a){this._properties.pass_context=a};rdx.dependency_object.prototype.get_view_to_open=function(){return this._properties.view_to_open};rdx.dependency_object.prototype.set_view_to_open=function(a){this._properties.view_to_open=a};rdx.dependency_object.prototype.get_row=function(){return this._properties.row};rdx.dependency_object.prototype.set_row=function(a){this._properties.row=a};rdx.dependency_object.prototype.get_separator_row=function(){return this._properties.separator_row};rdx.dependency_object.prototype.set_separator_row=function(a){this._properties.separator_row=a};rdx.dependency_object.prototype.get_cell=function(){return this._properties.cell};rdx.dependency_object.prototype.set_cell=function(a){this._properties.cell=a};rdx.dependency_object.prototype.get_event=function(){return this._properties.event};rdx.dependency_object.prototype.set_event=function(a){this._properties.event=a};rdx.dependency_object.prototype.get_go_to=function(){return this._properties.go_to};rdx.dependency_object.prototype.set_go_to=function(a){this._properties.go_to=a};rdx.dependency_object.prototype.get_single_call_data_refresh=function(){return this._properties.single_call_data_refresh};rdx.dependency_object.prototype.get_field_array=function(){return this._properties.field_array};rdx.dependency_object.prototype.set_field_array=function(b,a){this._properties.field_array[a]=b};rdx.dependency_object.prototype.get_component_array=function(){return this._properties.component_array};rdx.dependency_object.prototype.set_component_array=function(a){return this._properties.component_array=a};rdx.callback_params=function(a){this._DEFAULT_PROPERTIES={return_callback:null,response:null,resource_name:null,app_context_data:null,resource_data:null,data:null,configured_data:null};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a)};rdx.callback_params.prototype.get_response=function(){return this._properties.response};rdx.callback_params.prototype.set_response=function(a){this._properties.response=a};rdx.callback_params.prototype.get_resource_name=function(){return this._properties.resource_name};rdx.callback_params.prototype.set_resource_name=function(a){this._properties.resource_name=a};rdx.callback_params.prototype.get_app_context_data=function(){return this._properties.app_context_data};rdx.callback_params.prototype.set_app_context_data=function(a){this._properties.app_context_data=a};rdx.callback_params.prototype.get_return_callback=function(){this._properties.return_callback};rdx.callback_params.prototype.set_return_callback=function(a){this._properties.return_callback=a};rdx.callback_params.prototype.get_resource_data=function(){return this._properties.resource_data};rdx.callback_params.prototype.set_resource_data=function(a){this._properties.resource_data=a};rdx.callback_params.prototype.get_data=function(){return this._properties.data};rdx.callback_params.prototype.get_configured_data=function(){return this._properties.configured_data};rdx.callback_params.prototype.resume=function(b,d){var e=(rdx.utils.is_defined(b))?b:this.get_response();var a=e;if(rdx.utils.is_defined(this._properties.resource_name)&&rdx.utils.is_not_defined(b[this._properties.resource_name])){a[this._properties.resource_name]=e;if(rdx.utils.is_defined(d)){a.value=d}}this._properties.return_callback.call_back([a])};rdx.status_bar=new function(){this._activity=null;this._status=null;this._activity_bar_div;this._timer=null;this.STATUS_TIMER=6000;this.render=function(){if(this._status!=null&&this._activity!=null){return null}var a=$("<div>").addClass("activity_status_bar");a.append(this);this._activity_bar_div=$("<div>").addClass("activity_bar").addClass("activity_status_bar_position");this._activity=$("<span>");this._activity_bar_div.append(this._activity);a.append(this._activity_bar_div);this._status_bar_div=$("<div>").addClass("status_bar").addClass("activity_status_bar_position");this._status=$("<span>");this._status_bar_div.append(this._status);a.append(this._status_bar_div);$(document.body).append(a);this._activity_bar_div.css("display","none");this._status_bar_div.css("display","none");return this._activity_bar_div};this.update_status=function(o,f){if(rdx.STAND_ALONE||rdx.utils.is_empty(o)){return}if(rdx.utils.is_defined(this._timer)){clearTimeout(this._timer)}o=rdx.i18n.get_string(o);var g=150;var a=100;f=f||rdx.INFO;if(f==rdx.ERROR&&rdx.utils.is_defined(this._status)){$("<span>").text(rdx.utils.html_decode(o)).appendTo(this._status)}else{msg=rdx.i18n.get_string(o);if(msg.length>g){if(rdx.utils.is_not_empty(rdx.STATUS_BAR_ENTITY_NAME_IDENTIFIER)&&rdx.STATUS_BAR_ENTITY_NAME_IDENTIFIER.length==2){var d=rdx.STATUS_BAR_ENTITY_NAME_IDENTIFIER.substr(0,1);var e=rdx.STATUS_BAR_ENTITY_NAME_IDENTIFIER.substr(1,1);if(msg.indexOf(d)!=-1&&msg.indexOf(e)!=-1){var m=msg.substring(0,msg.indexOf(d));var n=msg.substring(msg.lastIndexOf(e)+1);var h=msg.substring(msg.indexOf(d)+1,msg.lastIndexOf(e));if(h.length>a){h=h.substring(0,a)+"..."}msg=m+"["+h+"]"+n}}else{msg=msg.substring(0,g)+"..."}}if(this._status){this._status.text(msg)}}if(this._status_bar_div){this._status_bar_div.css("display","inline-block")}var b=this;this._timer=setTimeout(function(){b._status.empty();b._status_bar_div.css("display","none")},this.STATUS_TIMER)};this.clear_status=function(){if(rdx.STAND_ALONE){return}this._status.empty();this._status_bar_div.css("display","none")};this.display_activity=function(a){if(rdx.STAND_ALONE||rdx.utils.is_empty(a)){return}a=rdx.i18n.get_string(a);if(rdx.utils.is_defined(this._activity)){this._activity.text(rdx.utils.html_decode(a))}if(rdx.utils.is_defined(this._activity_bar_div)){this._activity_bar_div.css("display","inline-block")}};this.clear_activity=function(){if(rdx.STAND_ALONE){return}if(rdx.utils.is_defined(this._activity)){this._activity.empty()}if(rdx.utils.is_defined(this._activity_bar_div)){this._activity_bar_div.css("display","none")}}};jquery_currentMenu=new function(){this.cmenu=null};(function($){$.contextMenu={shadow:true,shadowOffset:0,shadowOffsetX:5,shadowOffsetY:5,shadowWidthAdjust:-3,shadowHeightAdjust:-3,shadowOpacity:0.2,shadowClass:"context-menu-shadow",shadowColor:"black",offsetX:0,offsetY:0,appendTo:"body",direction:"down",constrainToScreen:true,isMainNode:false,showTransition:"show",hideTransition:"hide",showSpeed:100,hideSpeed:null,showCallback:null,hideCallback:null,className:"context-menu",itemClassName:"context-menu-item",itemHoverClassName:"context-menu-item-hover",disabledItemClassName:"context-menu-item-disabled",disabledItemHoverClassName:"context-menu-item-disabled-hover",separatorClassName:"context-menu-separator",innerDivClassName:"context-menu-item-inner",menuItemHoverArrowClassName:"context-menu-item-hover-child-menu",themePrefix:"context-menu-theme-",theme:"vista",separator:"context-menu-separator",target:null,menu:null,parentMenu:null,childMenu:null,shadowObj:null,bgiframe:null,shown:false,isExpanded:false,useIframe:
/*@cc_on @*/
/*@if (@_win32) true, @else @*/
false,
/*@end @*/
setEnableDisable:null,activeDiv:null,activeDivImg:null,subMenuImageUrl:"navigate_open.png",create:function(menu,opts){var cmenu=$.extend({},this,opts);if(typeof menu=="string"){cmenu.menu=$(menu)}else{if(typeof menu=="function"){cmenu.menuFunction=menu}else{cmenu.menu=cmenu.createMenu(menu,cmenu)}}if(cmenu.menu){cmenu.menu.css({display:"none"});$(cmenu.appendTo).append(cmenu.menu)}if(cmenu.shadow){cmenu.createShadow(cmenu);if(cmenu.shadowOffset){cmenu.shadowOffsetX=cmenu.shadowOffsetY=cmenu.shadowOffset}}return cmenu},createIframe:function(){return $('<iframe frameborder="0" tabindex="-1" src="javascript:false" style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=0);"/>')},createMenu:function(menu,cmenu,isRootNode){if(typeof(isRootNode)=="undefined"){isRootNode=true}if(!isRootNode&&cmenu.setEnableDisable){cmenu.setEnableDisable.apply(cmenu,[menu])}if(typeof(isRootNode)=="undefined"){isRootNode=true}var className=cmenu.className;cmenu.isMainNode=true;$.each(cmenu.theme.split(","),function(i,n){className+=" "+cmenu.themePrefix+n});var $t=$("<div> </div>").click(function(){cmenu.hideAll(cmenu,true);cmenu.hide();return false});var $div=$('<div class="'+className+'"></div>');for(var i=0;i<menu.length;i++){var m=menu[i];if(m==$.contextMenu.separator){$div.append(cmenu.createSeparator())}else{if((typeof(menu[i].hide)=="undefined"||menu[i].hide==false)&&!(menu[i].action.get_properties().separator==true)){$div.append(cmenu.createMenuItem(m.label,menu[i],isRootNode,i))}}}$t.bind("contextmenu",function(e){rdx.utils.prevent_default(e)});$t.bind("click",function(e){rdx.utils.prevent_default(e)});$t.append($div);if(!isRootNode){$t.hover(function(e){},function(){cmenu.hoverOutMenu.call(this,$t,cmenu)})}return $t},createMenuItem:function(label,m,isFirstNode,index){var cmenu=this;var o=$.extend({click_handler_callback:function(){},className:"",hoverClassName:cmenu.itemHoverClassName,image_url:"",hide:false,disabled:false,title:"",hoverItem:cmenu.hoverItem,hoverItemOut:cmenu.hoverItemOut,isFirstNode:false},m);o.isFirstNode=isFirstNode;var $img=$(document.createElement("img"));$img.attr("src",cmenu.subMenuImageUrl);$img.attr("align","right");$img.hide();var iconStyle=(o.image_url)?"background-image:url("+o.image_url+");":"";var $div=$('<div class="'+cmenu.itemClassName+" "+o.className+((o.disabled)?" "+cmenu.disabledItemClassName:"")+'" title="'+o.title+'"></div>').click(function(e){if(cmenu.isItemDisabled(this)||m.menu){return false}else{o.click_handler_callback.call_back([cmenu.target,this,cmenu,e]);cmenu.hide();cmenu.hideAll(cmenu,true)}}).hover(function(e){o.hoverItem.call(this,o,m,e,cmenu,$img,$div)},function(){});var $idiv=$(document.createElement("div"));var menu_action=$("<a>").attr("href","#").append(label);$idiv.append(menu_action);$img.css("padding-left","15px");$idiv.append($img);$idiv.addClass(cmenu.innerDivClassName);$idiv.attr("style",iconStyle);$div.bind("contextmenu",function(e){rdx.utils.prevent_default(e);e.stopPropagation()});$div.bind("click",function(e){rdx.utils.prevent_default(e);e.stopPropagation()});$div.append($idiv);if(index===0){setTimeout(function(){menu_action.focus()},1)}return $div},createSeparator:function(){return $('<div class="'+this.separatorClassName+'"></div>')},isItemDisabled:function(item){return $(item).is("."+this.disabledItemClassName)},hoverOutMenu:function(table,cmenu){if(cmenu.childMenu){return}else{if(cmenu.parentMenu.childMenu){cmenu.parentMenu.childMenu=null;table.remove();if(cmenu.shadow){cmenu.shadowObj.remove()}}else{table.remove();if(cmenu.shadow){cmenu.shadowObj.remove()}}}},hoverItem:function(o,obj,e,cmenu,img,div){if(cmenu.activeDiv){cmenu.activeDiv.removeClass(o.hoverClassName);cmenu.activeDivImg.hide()}if(cmenu.activeDiv&&cmenu.activeDiv.hasClass(o.hoverClassName)){cmenu.activeDiv.removeClass(o.hoverClassName)}if(cmenu.childMenu){var menus=new Array();var tempCMenu=cmenu;cmenu.hideAll(tempCMenu,false)}if(!cmenu.isItemDisabled(this)){$(this).addClass(o.hoverClassName,obj)}cmenu.activeDiv=$(this);cmenu.activeDivImg=img;if(obj.menu&&!cmenu.isItemDisabled(this)){img.show();var subMenu=$.extend({},cmenu);subMenu.childMenu=null;subMenu.activeDiv=null;cmenu.childMenu=subMenu;subMenu.parentMenu=cmenu;var subMenuTable=subMenu.createMenu(obj.menu,subMenu,false);subMenu.isMainNode=false;subMenu.menu=subMenuTable;if(subMenu){subMenuTable.css({display:"none"});$(subMenu.appendTo).append(subMenuTable)}subMenu.show(this,e,div)}},hideAll:function(cmenu,hideParent){var menus=new Array();if(hideParent){cmenu.getAllParent(cmenu,menus)}cmenu.getAllChildren(cmenu,menus);for(var index=0;index<menus.length;index++){menus[index].menu.remove();if(menus[index].menu.shadow){menus[index].shadowObj.remove()}menus[index].childMenu=null}},getAllParent:function(cmenu,menus){while(true){if(cmenu.parentMenu){if(!cmenu.isMainNode){menus.push(cmenu.parentMenu);cmenu=cmenu.parentMenu}}else{if(!cmenu.isMainNode){menus.push(cmenu)}break}}return menus},getAllChildren:function(cmenu,menus){while(true){if(cmenu.childMenu){menus.push(cmenu.childMenu);cmenu=cmenu.childMenu}else{menus.push(cmenu);break}}return menus},createShadow:function(cmenu){cmenu.shadowObj=$('<div class="'+cmenu.shadowClass+'"></div>').css({display:"none",position:"absolute",zIndex:9998,opacity:cmenu.shadowOpacity,backgroundColor:cmenu.shadowColor});$(cmenu.appendTo).append(cmenu.shadowObj)},showShadow:function(x,y,e){var cmenu=this;if(cmenu.shadow){cmenu.shadowObj.css({width:(cmenu.menu.width()+cmenu.shadowWidthAdjust)+"px",height:(cmenu.menu.height()+cmenu.shadowHeightAdjust)+"px",top:(y+cmenu.shadowOffsetY)+"px",left:(x+cmenu.shadowOffsetX)+"px"}).addClass(cmenu.shadowClass)[cmenu.showTransition](cmenu.showSpeed)}},beforeShow:function(){return true},show:function(t,e,div){var cmenu=this;this.current_focus=document.activeElement;x=e.target.getBoundingClientRect().left+window.scrollX+10;y=e.target.getBoundingClientRect().top+window.scrollY+10;cmenu.target=t;if(cmenu.beforeShow()!==false){if(cmenu.menuFunction){if(cmenu.menu){$(cmenu.menu).remove()}cmenu.menu=cmenu.createMenu(cmenu.menuFunction(cmenu,t),cmenu);cmenu.menu.css({display:"none"});$(cmenu.appendTo).append(cmenu.menu)}var $c=cmenu.menu;x+=cmenu.offsetX;y+=cmenu.offsetY;var pos=cmenu.getPosition(x,y,cmenu,e);if(cmenu.parentMenu){pos.y=div.offset().top}cmenu.showShadow(pos.x,pos.y,e);if(cmenu.useIframe){$c.find("iframe").css({width:$c.width()+cmenu.shadowOffsetX+cmenu.shadowWidthAdjust,height:$c.height()+cmenu.shadowOffsetY+cmenu.shadowHeightAdjust})}$c.css({top:pos.y+"px",left:pos.x+"px",position:"absolute",zIndex:9999})[cmenu.showTransition](cmenu.showSpeed,((cmenu.showCallback)?function(){cmenu.showCallback.call(cmenu)}:null));cmenu.shown=true;$(document).bind("click keyup",null,function(){if(rdx.utils.is_defined(event.keyCode)){if(event.keyCode!==27){return}else{cmenu.current_focus.focus()}}cmenu.hide();cmenu.hideAll(cmenu,true);$(this).off("click keyup")})}},getPosition:function(clickX,clickY,cmenu,e){var x=clickX+cmenu.offsetX;var y=clickY+cmenu.offsetY;e.pageX;cmenu.offsetRight;cmenu.offsetTop;var h=$(cmenu.menu).height();var w=$(cmenu.menu).width();var dir=cmenu.direction;if(cmenu.constrainToScreen){var $w=$(window);var wh=$w.height();var ww=$w.width();if(dir=="down"&&(y+h-$w.scrollTop()>wh)){dir="up"}var maxRight=x+w-$w.scrollLeft();if(maxRight>ww){x-=(maxRight-ww)}}if(dir=="up"&&(y-h)>=0){y-=h}if(cmenu.parentMenu){x=$(cmenu.parentMenu.menu).offset().left+$(cmenu.parentMenu.menu).width()-10;y=$(cmenu.parentMenu.menu).offset().top+$(cmenu.parentMenu.menu).height()}return{x:x,y:y}},hide:function(){var cmenu=this;if(cmenu.shown){if(cmenu.iframe){$(cmenu.iframe).hide()}if(cmenu.menu){cmenu.menu[cmenu.hideTransition](cmenu.hideSpeed,((cmenu.hideCallback)?function(){cmenu.hideCallback.call(cmenu)}:null))}if(cmenu.shadow){cmenu.shadowObj[cmenu.hideTransition](cmenu.hideSpeed)}if(rdx.utils.is_defined(cmenu.show_on_click)&&cmenu.show_on_click==true&&cmenu.inline_actions==true){cmenu.row_clicked.attr("inline_actions_clicked",false);cmenu.table_clicked.attr("inline_actions",false);cmenu.inline_actions=false}}cmenu.shown=false}};$.fn.contextMenu=function(menu,options){options.shadow=false;var show=rdx.utils.is_defined(options.menu_show)?options.menu_show:false;var show_on_click=rdx.utils.is_defined(options.show_on_click)?options.show_on_click:false;if(show_on_click==true){$(this).delegate(".inline_actions","click",function(e){rdx.utils.prevent_default(e);e.stopPropagation();if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}options.row_clicked=($($(this).parent().parent()));options.row_index=$(this).parent().parent().index();options.table_clicked=$($(this).parent().parent().parent().parent());options.curr_data=options.parent_ref._get_data(options.parent_ref._table.children("tbody").children("tr.table_row"))[options.row_index];if(options.setEnableDisable){options.setEnableDisable.apply(options,[menu])}var cmenu=$.contextMenu.create(menu,options);jquery_currentMenu.cmenu=cmenu;cmenu.show(this,e);cmenu.context_options={curr_data:options.curr_data,title:options.parent_title};cmenu.row_clicked.attr("inline_actions_clicked",true);cmenu.table_clicked.attr("inline_actions",true);cmenu.inline_actions=true;return false})}if(show==false){if(rdx.utils.is_defined(options.parent_ref)){$(this).delegate("tr","contextmenu",function(e){rdx.utils.prevent_default(e);e.stopPropagation();if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}options.row_clicked=$(this);options.row_index=$(this).index();options.table_clicked=$($(this).parent().parent());options.curr_data=options.parent_ref._get_data(options.parent_ref._table.children("tbody").children("tr.table_row"))[options.row_index];if(options.setEnableDisable){options.setEnableDisable.apply(options,[menu])}var cmenu=$.contextMenu.create(menu,options);jquery_currentMenu.cmenu=cmenu;cmenu.context_options={curr_data:options.curr_data,title:options.parent_title};cmenu.row_clicked.attr("inline_actions_clicked",true);cmenu.table_clicked.attr("inline_actions",true);cmenu.inline_actions=true;cmenu.show(this,e);return false})}else{$(this).bind("contextmenu",function(e){rdx.utils.prevent_default(e);e.stopPropagation();if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}if(options.setEnableDisable){options.setEnableDisable.apply(options,[menu])}var cmenu=$.contextMenu.create(menu,options);jquery_currentMenu.cmenu=cmenu;cmenu.show(this,e);return false})}}else{if(rdx.utils.is_defined(options.menu_event)){if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}if(options.setEnableDisable){options.setEnableDisable.apply(options,[menu])}var cmenu=$.contextMenu.create(menu,options);jquery_currentMenu.cmenu=cmenu;cmenu.show(this,options.menu_event)}}};$.fn.clearMenu=function(){if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}}})(jQuery);rdx.nitro_handler=function(g,b,e,f,a,d){this._success_callback=g;this._error_callback=b;this._req=e;this._method=f;this._url=a;this._properties=d};rdx.nitro_handler.prototype.handle_response=function(g,d){switch(g){case rdx.ajax_handler_constants.HTTP_RESPONSE_SUCCESS_STATUS:case rdx.ajax_handler_constants.HTTP_REQUEST_CREATED_STATUS:case rdx.ajax_handler_constants.HTTP_REQUEST_ACCEPTED_STATUS:case 209:try{this._success_callback.call_back([this._parse_response()])}catch(f){if($.inArray(parseInt(f[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]),rdx.ajax_handler_constants.RESPONSE_SESSION_EXPIRY_ERROR_CODES)!=-1){var e=new rdx.callback(rdx.utils,rdx.utils.do_logout,[true]);var b=f.message;if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b,e);rdx.status_bar.update_status(f.message,rdx.ERROR);return}if($.inArray(f[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.IGNORE_ERROR_CODES)!=-1){return}if(this._error_callback){rdx.status_bar.update_status(f.message,rdx.ERROR);if($.inArray(f[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.SESSION_TIMEOUT_ERROR_CODE)!=-1){this._error_callback.call_back([f])}else{this._error_callback.call_back([f.message])}}else{var b=f.message;if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b,null,null,null);rdx.status_bar.update_status(f.message,rdx.ERROR)}}break;case 0:this.handle_zero_req_status();break;case 400:case 401:if(d==true){var b=this._req.statusText;try{var a=this._parse_response();if(rdx.utils.is_defined(a.message)){b=a.message}}catch(f){if(rdx.utils.is_defined(f)&&rdx.utils.is_defined(f.message)){b=f.message}}b=rdx.utils.html_encode(b);if(this._error_callback){this._error_callback.call_back([b])}else{rdx.message_box.error(b)}}else{this._handle_default_response(g)}break;case 12002:case 12007:case 12029:case 12030:case 12031:case 12152:case 12159:var b=rdx.i18n.get_string("rdx.ajax_request_error",{url:this._url,error:rdx.i18n.get_string("rdx.ajax_http_connection_failed")});if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b);rdx.status_bar.update_status(b,rdx.ERROR);break;default:this._handle_default_response(g)}};rdx.nitro_handler.prototype._handle_default_response=function(b){var a=rdx.i18n.get_string("rdx.ajax_response_error_status",{url:this._url,status_text:this._req.statusText,status:this._req.status});if(rdx.utils.is_not_empty(a)){a=rdx.utils.html_encode(a)}rdx.message_box.error(a);rdx.status_bar.update_status(a,rdx.ERROR)};rdx.nitro_handler.prototype._parse_response=function(g){var b=this._req.responseText;if(b==null||b.length==0){throw rdx.i18n.get_string("rdx.ajax_invalid_empty_response")}var a={};try{a=JSON.parse(b)}catch(d){if(rdx.utils.is_string(b)&&rdx.utils.is_not_empty(b)){throw {message:rdx.utils.html_encode(b)}}}if(a[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]==0){return a}if(a[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_SEVERITY_FIELD]==="WARNING"){var e=a.message;if(rdx.utils.is_defined(rdx.ajax_handler_constants.RESPONSE_CUSTOM_WARNING_ERROR_CODES)&&$.inArray(a[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.RESPONSE_CUSTOM_WARNING_ERROR_CODES)!==-1){if(rdx.utils.is_defined(rdx.ajax_handler_constants.RESPONSE_CUSTOM_WARNING_ERROR_CODES_CALLBACK)){rdx.ajax_handler_constants.RESPONSE_CUSTOM_WARNING_ERROR_CODES_CALLBACK.call_back([{result:a}])}return a}if(rdx.utils.is_not_empty(e)){if(rdx.utils.is_defined(this._properties)&&this._properties.show_warning_as_notification){var f=new rdx.notification_bar().show(e,rdx.WARNING)}else{rdx.message_box.warning(rdx.utils.html_encode(e),null,null,null)}rdx.status_bar.update_status(e,rdx.WARNING)}return a}throw a};rdx.nitro_handler.prototype.handle_zero_req_status=function(){};rdx.nitro_handler.prototype.is_nitro_response=function(b){var a={};try{if(b!=null&&b.length>0){a=JSON.parse(b)}}catch(d){return false}if(a[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]!=null){return true}};rdx.nitro_handler.prototype.is_nitro_url=function(a){if(a&&a.indexOf("/nitro/")>-1){return true}return false};rdx.nitro_handler.prototype.setRequestHeader_for_post=function(){if(rdx.utils.is_defined(rdx.CUSTOM_HTTP_HEADER_CONTENT_TYPE_FOR_POST)){this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,rdx.CUSTOM_HTTP_HEADER_CONTENT_TYPE_FOR_POST)}else{this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,"application/x-www-form-urlencoded")}};rdx.nitro_handler.prototype.to_json=function(e,f,d,b,a){d=d+JSON.stringify(f);if(rdx.utils.is_defined(rdx.CUSTOM_HTTP_HEADER_CONTENT_TYPE_FOR_POST)){b=false}if(b===true){d=encodeURIComponent(d);if(rdx.utils.is_not_defined(a)||a===true){d="object="+d}}return d};rdx.nitro_handler.prototype.is_nitro_resource=function(a){if(this.is_nitro_url(a.get_url)||this.is_nitro_url(a.add_url)){return true}};rdx.nitro_handler.prototype.get_set_url=function(d,b,a){return b};rdx.pure_rest_api_handler=function(f,b,d,e,a){this._success_callback=f;this._error_callback=b;this._req=d;this._method=e;this._url=a;this.nitro_handler=this._get_nitro_handler()};rdx.pure_rest_api_handler.prototype._get_nitro_handler=function(){var a=new rdx.nitro_handler(this._success_callback,this._error_callback,this._req,this._method,this._url);return a};rdx.pure_rest_api_handler.prototype.handle_response=function(f){if(this.nitro_handler.is_nitro_response(this._req.responseText)){this.nitro_handler.handle_response(f,true);return}try{if(f>=200&&f<400){switch(this._method){case rdx.ajax_handler_constants.DELETE:var a="";if(this._req.responseText!=""){a=this._parse_rest_response()}this._success_callback.call_back([a]);break;default:this._success_callback.call_back([this._parse_rest_response()])}}else{var b=this._parse_rest_error_response();if(f==403){var e=new rdx.callback(rdx.utils,rdx.utils.do_logout,[true]);rdx.message_box.error(b,e);rdx.status_bar.update_status(b,rdx.ERROR);return}else{if(rdx.utils.is_defined(this._error_callback)){this._error_callback.call_back([b])}else{if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b);rdx.status_bar.update_status(b,rdx.ERROR)}}}}catch(d){var b=d.message;if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b,null,null,null);rdx.status_bar.update_status(d.message,rdx.ERROR)}};rdx.pure_rest_api_handler.prototype._parse_rest_response=function(d){var b=this._req.responseText;if(b==null||b.length==0){throw rdx.i18n.get_string("rdx.ajax_invalid_empty_response")}var a=JSON.parse(b);return a};rdx.pure_rest_api_handler.prototype._parse_rest_error_response=function(){var b=this._req.responseText;if(b==null||b.length==0){throw rdx.i18n.get_string("rdx.ajax_invalid_empty_response")}var h="";try{var a=JSON.parse(b);for(var d in a){var g=a[d];if(rdx.utils.is_defined(g.message)&&g.message.length!=0){h=g.message;break}}if(rdx.utils.is_empty(h)&&rdx.utils.is_defined(a.message)){h=a.message}}catch(f){var e=this._req.responseText.match(/<body[^>]*>((.|[\n\r])*)<\/body>/im);if(e&&e.length>1){h=e[1]}else{h=b}}return h};rdx.pure_rest_api_handler.prototype.setRequestHeader_for_post=function(){if(this.nitro_handler.is_nitro_url(this._url)){this.nitro_handler.setRequestHeader_for_post();return}this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,"application/json")};rdx.pure_rest_api_handler.prototype.to_json=function(e,f,d,b,a){if(this.nitro_handler.is_nitro_resource(e)){return this.nitro_handler.to_json(e,f,d,b,a)}d=d+JSON.stringify(f[e.name]);d=('{"'+e.name+'":'+(d)+"}");return d};rdx.pure_rest_api_handler.prototype.get_set_url=function(d,b,a){if(this.nitro_handler.is_nitro_resource(d)){return this.nitro_handler.get_set_url(d,b,a)}if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a[d.primary_keys[0]])){b=b+"/"+a[d.primary_keys[0]]}b=rdx.url_utils.replace_placeholder_in_url(b);return b};rdx.ajax_handler_constants=new function(){this.GET="GET";this.POST="POST";this.PUT="PUT";this.DELETE="DELETE";this.HTTP_HEADER_ACCEPT="Accept";this.HTTP_HEADER_CONTENT_TYPE="Content-Type";this.HTTP_HEADER_IF_MODIFIED_SINCE="If-Modified-Since";this.HTTP_RESPONSE_READY_STATE=4;this.HTTP_RESPONSE_SUCCESS_STATUS=200;this.MAX_NUMBER_OF_ACTIVE_REQUESTS=5;this.DEFAULT_AUTO_REFRESH_DELAY=14000;this.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD="errorcode";this.SESSION_TIMEOUT_ERROR_CODE=[10019];this.RESPONSE_TYPE_JSON_SEVERITY_FIELD="severity";this.RESPONSE_SESSION_EXPIRY_ERROR_CODES=[444];this.RESPONSE_CUSTOM_WARNING_ERROR_CODES=[];this.RESPONSE_CUSTOM_WARNING_ERROR_CODES_CALLBACK=null;this.IGNORE_ERROR_CODES=[];this.MAX_TIME_FOR_SESSION_TIMEOUT=2*60*1000;this.REFRESH_IMAGE="refresh_image";this.CUSTOM_HEADERS=null;this.HTTP_REQUEST_CREATED_STATUS=201;this.HTTP_REQUEST_ACCEPTED_STATUS=202;this.NITRO_PARAMS=null;this.API=rdx.API_TYPE.NITRO};rdx.ajax_handler_queue=new function(){this._number_of_active_requests=0;this._queue=new Array();this._can_execute=function(){return this._number_of_active_requests<rdx.ajax_handler_constants.MAX_NUMBER_OF_ACTIVE_REQUESTS};this._execute=function(a){this._number_of_active_requests++;a.call_back()};this._has_more=function(){return this._queue.length>0};this.add=function(a){if(this._can_execute()){this._execute(a)}else{this._queue.push(a)}};this.remove=function(){this._number_of_active_requests--;if(this._has_more()){this._execute(this._queue.shift())}}};rdx.ajax_handler=function(a,f,e,d,b){this._url=a;this._success_callback=f;this._method=e?e:rdx.ajax_handler_constants.GET;this._params=d;this._mask_id=null;this._timer=null;this._properties=b;this._error_callback=null;this._related_dom_object=$(document.body);this._activity=rdx.i18n.get_string("rdx.ajax_status_default");this._status=null;this._req=window.XMLHttpRequest?new window.XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP")};rdx.ajax_handler.prototype.set_content_type_header=function(a){this._add_content_type_header=a};rdx.ajax_handler.prototype.set_error_callback=function(a){this._error_callback=a};rdx.ajax_handler.prototype.set_mask_id=function(a){this._mask_id=a};rdx.ajax_handler.prototype.set_related_dom_object=function(a){if(rdx.utils.is_defined(a)){this._related_dom_object=a}};rdx.ajax_handler.prototype.set_activity=function(a){if(rdx.utils.is_defined(a)){this._activity=a}};rdx.ajax_handler.prototype.set_status=function(a){this._status=a};rdx.ajax_handler.prototype.dispatch=function(b){var a=this;if(rdx.utils.is_defined(b)){this._timer=setTimeout(function(){rdx.ajax_handler_queue.add(new rdx.callback(a,a._send));a.clear_timer()},b)}else{rdx.ajax_handler_queue.add(new rdx.callback(this,this._send))}if(rdx.utils.is_defined(rdx.get_debugger)&&rdx.utils.is_defined(rdx.get_debugger().ajax_handler_dispatch)){rdx.get_debugger().ajax_handler_dispatch({method:this._method,url:this._url})}};rdx.ajax_handler.prototype.clear_timer=function(){if(rdx.utils.is_not_defined(this._timer)){return}clearTimeout(this._timer);this._timer=null};rdx.ajax_handler.prototype._send=function(){this._before_send();try{var a=this;this._req.onreadystatechange=function(){if(a._req.readyState!=rdx.ajax_handler_constants.HTTP_RESPONSE_READY_STATE){return}a._after_send();a._response_arrived()};this._req.open(this._method,this._url,true);if(this._method==rdx.ajax_handler_constants.GET){this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,"application/json")}else{if(this._method==rdx.ajax_handler_constants.POST&&rdx.utils.is_not_defined(this._add_content_type_header)){this.get_rest_handler().setRequestHeader_for_post()}else{if(this._method==rdx.ajax_handler_constants.PUT){this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,"application/json");this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_ACCEPT,"application/json")}else{if(this._method==rdx.ajax_handler_constants.DELETE){this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_CONTENT_TYPE,"application/json")}}}}this._req.setRequestHeader(rdx.ajax_handler_constants.HTTP_HEADER_IF_MODIFIED_SINCE,"Thu, 01 Jan 1970 05:30:00 GMT");if(rdx.utils.is_defined(rdx.ajax_handler_constants.CUSTOM_HEADERS)){this._add_custom_headers()}if(this._method==rdx.ajax_handler_constants.POST||this._method==rdx.ajax_handler_constants.PUT){this._req.send(this._params)}else{this._req.send()}}catch(d){this._after_send();var b=rdx.i18n.get_string("rdx.ajax_request_error",{url:this._url,error:rdx.utils.get_detailed_error_message(d)});if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b);rdx.status_bar.update_status(b,rdx.ERROR)}};rdx.ajax_handler.prototype.get_rest_handler=function(){return rdx.utils.get_rest_handler(this._success_callback,this._error_callback,this._req,this._method,this._url,this._properties)};rdx.ajax_handler.prototype._response_arrived=function(){try{rdx.mask.unmask_component($(document.body),"__upload_file");this._req.status}catch(d){var b=rdx.i18n.get_string("rdx.ajax_request_error",{url:this._url,error:rdx.utils.get_detailed_error_message(d)});if(rdx.utils.is_not_empty(b)){b=rdx.utils.html_encode(b)}rdx.message_box.error(b);rdx.status_bar.update_status(b,rdx.ERROR);return}var e=this._req.status;if($.inArray(e,rdx.APP_ERR_CODES)>-1){e=rdx.ajax_handler_constants.HTTP_RESPONSE_SUCCESS_STATUS}if(rdx.utils.is_not_empty(this._req.response)){try{var a=JSON.parse(this._req.response);this._update_status_bar(a);if($.inArray(parseInt(a[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]),rdx.ajax_handler_constants.RESPONSE_SESSION_EXPIRY_ERROR_CODES)!=-1){this._redirect_on_session_expire()}}catch(d){}}this.get_rest_handler().handle_response(e)};rdx.ajax_handler.prototype._update_status_bar=function(a){rdx.status_bar.clear_activity();if(rdx.status_bar){if(a.errorcode===0){if(this._status!==null){rdx.status_bar.update_status(this._status)}}}};rdx.ajax_handler.prototype._redirect_on_session_expire=function(){setTimeout(function(){rdx.utils.do_logout(true)},rdx.ajax_handler_constants.MAX_TIME_FOR_SESSION_TIMEOUT)};rdx.ajax_handler.prototype.abort=function(){this._req.abort()};rdx.ajax_handler.prototype._before_send=function(){this._set_related_dom_object_state(true);if(rdx.status_bar&&rdx.utils.is_not_empty(this._activity)){rdx.status_bar.display_activity(this._activity+"...")}};rdx.ajax_handler.prototype._after_send=function(){rdx.ajax_handler_queue.remove();this._set_related_dom_object_state(false)};rdx.ajax_handler.prototype._set_related_dom_object_state=function(a){if(this._related_dom_object.get(0)!=document.body){this._related_dom_object.find("img[name='"+rdx.ajax_handler_constants.REFRESH_IMAGE+"']").attr("src",a?rdx.images.IN_PROGRESS_IMG:rdx.images.SPACER_IMG)}if(a){if($(this._related_dom_object).hasClass("rdx_auto_cursor")){$(this._related_dom_object).removeClass("rdx_auto_cursor")}$(this._related_dom_object).addClass("rdx_wait_cursor")}else{if($(this._related_dom_object).hasClass("rdx_wait_cursor")){$(this._related_dom_object).removeClass("rdx_wait_cursor")}$(this._related_dom_object).addClass("rdx_auto_cursor")}};rdx.ajax_handler.prototype._add_custom_headers=function(){for(var a in rdx.ajax_handler_constants.CUSTOM_HEADERS){this._req.setRequestHeader(a,rdx.ajax_handler_constants.CUSTOM_HEADERS[a])}if(rdx.utils.is_defined(this._resource_context)){this.add_resource_context()}};rdx.ajax_handler.prototype.add_resource_context=function(){for(var a in this._resource_context){this._req.setRequestHeader(a,this._resource_context[a])}};rdx.ajax_handler.prototype.set_resource_context=function(a){this._resource_context=a};rdx.ajax_handler.prototype.attach_events_for_upload=function(){var a=this;this._req.upload.addEventListener(rdx.events.LOAD_START,function(b){try{a._file_upload_params.get_component().dialog("close");rdx.mask.unmask_all_components()}catch(d){}});this._req.upload.addEventListener(rdx.events.LOAD_END,function(b){a._progress_bar.remove_progress_percent_dialog();rdx.mask.mask_component($(document.body),"__upload_file");if(a._file_upload_params._properties.dialog_mode==false&&a._file_upload_params._properties.inline_upload==false&&rdx.utils.is_defined(a._parent_component)){rdx.mask.mask_component(a._parent_component,a._parent_mask_id)}});this._req.upload.addEventListener(rdx.events.PROGRESS,function(e){if(e.lengthComputable){var d=e.loaded/e.total;var b=new Date();var f=b.getTime();a._progress_bar.handle_percent_progress_bar_data({progress:(Math.floor(d*100))+"%",message:rdx.i18n.get_string("rdx.uploading_file",{file_name:a._file_upload_params._current_file_name}),uploaded_so_far:e.loaded,total_size:e.total,start_time:a.start_time,current_time:f})}});this._send()};rdx.pagination=function(b,a){this.DEFAULT_PAGE_NUMBER=1;this._parent=typeof(b)=="string"?$("#"+b):b;this._page_number=this.DEFAULT_PAGE_NUMBER;this._total_count=0;this._pagination_table=null;this._data_range_span=null;this._prev_img=null;this._next_img=null;this._page_select=null;this._parent.hide();this._start_count=0;this._end_count=0;this._pagination_page_size_from_cookie="rdx_pagination_size";this._custom_row_count=0;this._is_page_triggered=false;this._DEFAULT_PROPERTIES={type:"native"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._page_size=this._properties.page_size?this._properties.page_size:rdx.PAGINATION_DEFAULT_PAGE_SIZE};rdx.pagination.prototype.render=function(){if(this._properties.type=="compact"){this._render_compact_pagination()}else{this._render_native_pagination()}return this};rdx.pagination.prototype._render_native_pagination=function(){this._total_count_div=$("<div>").addClass("pagination_count_div");this._pagination_table=$("<table>").attr("cellPadding",0).attr("cellSpacing",0).addClass("pagination_tbl").append($("<tbody>"));var e=$("<tr>");this._pagination_seperator=$("<td>").addClass("pagination_spacer_width");e.append(this._pagination_seperator);this._page_size_td=$("<td>").attr("align","center").addClass("ribbon");this._render_page_size(this._page_size_td);e.append(this._page_size_td);this._separator_td=$("<td>").appendTo(e);this._separator_td.append($("<span>").addClass("pagination_separator"));this._page_number_td=$("<td>").attr("align","center").appendTo(e);this._data_range_span=$("<span>").addClass("pagination_img_num_border").appendTo(this._page_number_td);var a=$("<span>").addClass("pagination_img_border").appendTo(this._page_number_td);this._prev_img=$("<button>").addClass("img_opacity nav_back btn-icon").attr({disabled:"disabled",title:"Previous page","aria-label":"Previous page"}).appendTo(a);this._next_img=$("<button>").addClass("img_opacity nav_next btn-icon").attr({disabled:"disabled",title:"Next page","aria-label":"Next page"}).appendTo(a);this.goto_td=$("<td>").attr("align","center").addClass("pagination_separator_goto");var d={mandatory:true,properties:{size:1,class_names:"pagination_goto_list",change_handler_callback:new rdx.callback(this,this._goto_page)}};var b=new rdx.form_field(d);this._page_select=new rdx.list(this.goto_td,b).render();this._pagination_table.append(e);this._parent.append(this._total_count_div);this._parent.append(this._pagination_table)};rdx.pagination.prototype._render_compact_pagination=function(){this._total_count_div=$("<div>").addClass("pagination_count_div");this._pagination_table=$("<div>").addClass("pagination_main_div pagination_tbl");var f=$("<div>");var d=$("<span>").addClass("rows_per_size_text").append("Rows: ");this._dropdown_parent=$("<div>").addClass("page_size_dropdown");f.append(d).append(this._dropdown_parent);this._pagination_table.append(f);this._data_range_span=$("<span>").addClass("pagination_img_num_border").appendTo(this._pagination_table);var e=$("<div>");var b=$("<img>").attr("src",rdx.images.BACK_ACTIVE_IMAGE).addClass("prev_pagination_img_spacing");this._prev_img=$("<span>").addClass("pagination_img_border").addClass("img_opacity").append(b).append($("<span>").append("Prev"));e.append(this._prev_img);var a=$("<img>").attr("src",rdx.images.NEXT_ACTIVE_IMAGE).addClass("next_pagination_img_spacing");this._next_img=$("<span>").addClass("pagination_img_border").addClass("img_opacity").append($("<span>").append("Next")).append(a);e.append(this._next_img);this._pagination_table.append(e);this._parent.append(this._pagination_table)};rdx.pagination.prototype._render_page_size=function(g,e,d){g=rdx.utils.is_defined(g)?g:this._page_size_td;g.html("");if(rdx.utils.is_not_defined(e)){e={};e[rdx.i18n.get_string("rdx.pagination.25_per_page")]=25;e[rdx.i18n.get_string("rdx.pagination.50_per_page")]=50;e[rdx.i18n.get_string("rdx.pagination.100_per_page")]=100;e[rdx.i18n.get_string("rdx.pagination.250_per_page")]=250}var b={mandatory:true,formatter:{map:e},properties:{size:1,class_names:"list pagination_list",change_handler_callback:new rdx.callback(this,this._change_page_size)}};var a=$("<label>").appendTo(g);a.append($('<span class="hide">').text("No of Rows"));this._per_page_td_form_field=new rdx.form_field(b);this._per_page=new rdx.list(a,this._per_page_td_form_field).render();if(this._properties.type=="native"){a.addClass("ribbon_label_div ribbon_list_wrapper");if(rdx.utils.is_defined(this._properties.disable_page_size_list)&&this._properties.disable_page_size_list){a.addClass("disabled")}}var f=rdx.utils.get_cookie(this._pagination_page_size_from_cookie);if(rdx.utils.is_not_empty(f)){this._per_page.set_data(f)}else{this._per_page.set_data(rdx.i18n.get_string("rdx.pagination.25_per_page"))}if(rdx.utils.is_defined(d)){this._per_page.select_value(d)}};rdx.pagination.prototype.get_page_number=function(){return this._page_number};rdx.pagination.prototype.reset_page_number=function(){this._page_number=this.DEFAULT_PAGE_NUMBER};rdx.pagination.prototype.get_page_size=function(){return this._per_page_td_form_field.get_formatter().get_storage_value(this._per_page.get_data())};rdx.pagination.prototype._trigger_pagination_change=function(){this._is_page_triggered=true;this._pagination_table.trigger(rdx.events.PAGINATION_CHANGED,[this._page_number,this._page_size])};rdx.pagination.prototype._change_page_size=function(){var a=this._per_page.get_data();this._page_number=1;var b=a.replace(/[^\d.]/g,"");rdx.utils.set_cookie(this._pagination_page_size_from_cookie,a);if(this._page_size!=b){this._page_size=b;this._trigger_pagination_change()}};rdx.pagination.prototype._goto_page=function(){var a=this._page_select.get_selected_index()+1;this._page_number=parseInt(a);this._trigger_pagination_change()};rdx.pagination.prototype._navigate_first=function(){this._page_number=1;this._trigger_pagination_change()};rdx.pagination.prototype._navigate_previous=function(){this._page_number=this._page_number-1;if(this._page_number<=0){this._page_number=1}this._trigger_pagination_change()};rdx.pagination.prototype._navigate_next=function(){this._page_number=this._page_number+1;var a=Math.ceil(this._total_count/this._page_size);if(this._page_number>a){this._page_number=a}this._trigger_pagination_change()};rdx.pagination.prototype._navigate_last=function(){var a=Math.ceil(this._total_count/this._page_size);this._page_number=a;this._trigger_pagination_change()};rdx.pagination.prototype.update_total_count=function(d,e){if(!e){d=0}else{if(this._custom_row_count>0){d=this._custom_row_count}}this._total_count=d;if(this._properties.type=="compact"){this._toggle_parent(this._page_size)}else{this._toggle_parent(rdx.PAGINATION_DEFAULT_PAGE_SIZE)}this._set_total_count(d,this._total_count_div);var a="--";if(this._total_count==0){this._page_number=1;a=rdx.i18n.get_string("rdx.table_pagination_data_range",{start_count:0,total_count:0});this._unbind_img_action(this._prev_img);this._unbind_img_action(this._next_img)}else{a=rdx.i18n.get_string("rdx.table_pagination_data_range",{start_count:this._page_number,total_count:(Math.ceil(this._total_count/this._page_size))});if(this._page_number==1){this._unbind_img_action(this._prev_img)}else{this._bind_img_action(this._prev_img,new rdx.callback(this,this._navigate_previous))}var b=Math.ceil(this._total_count/this._page_size);if(this._page_number==b){this._unbind_img_action(this._next_img)}else{this._bind_img_action(this._next_img,new rdx.callback(this,this._navigate_next))}}this._data_range_span.html(a);if(this._properties.type=="native"){this._update_page_select()}if(this._custom_row_count>0){this.set_custom_row_count(0)}};rdx.pagination.prototype._set_total_count=function(b,a){a.empty().text(rdx.i18n.get_string("rdx.total"));$('<span class="total">').text(b).appendTo(a)};rdx.pagination.prototype._unbind_img_action=function(a){if(!a.hasClass("img_opacity")){a.removeClass("pointer_cursor").addClass("img_opacity").unbind(rdx.events.CLICK);a.attr("disabled","disbaled")}};rdx.pagination.prototype._bind_img_action=function(b,a){if(b.hasClass("img_opacity")){b.removeClass("img_opacity").addClass("pointer_cursor");b.removeAttr("disabled");b.bind(rdx.events.CLICK,{ns_cancel_handler_callback:a},function(d){d.data.ns_cancel_handler_callback.call_back();d.stopPropagation()})}};rdx.pagination.prototype._update_page_select=function(){this._page_select.remove_items(false,false);var b=new Array();var a=Math.ceil(this._total_count/this._page_size);for(i=1;i<=a;i++){b[i-1]=i}this._page_select.add_items(b,false);this._page_select.select_item(this._page_number-1,false)};rdx.pagination.prototype.add_event_handler=function(a){this._pagination_table.bind(rdx.events.PAGINATION_CHANGED,{ns_callback:a},function(f,d,e){f.data.ns_callback.call_back([d,e]);var b=$(f.target).position().top;window.scrollTo(0,b)})};rdx.pagination.prototype.decrease_data_range=function(){this._end_count=this._end_count-1;this._total_count=this._total_count-1;this._set_total_count(this._total_count,this._total_count_div);if(this._total_count==0&&this._start_count>0){this._start_count=0}if(this._end_count>=this._start_count){data_range=rdx.i18n.get_string("rdx.table_pagination_data_range",{start_count:this._page_number,total_count:(Math.ceil(this._total_count/this._page_size))});this._data_range_span.html(data_range);this._update_page_select()}else{this._navigate_previous()}};rdx.pagination.prototype.increase_data_range=function(){this._end_count=this._end_count+1;this._total_count=this._total_count+1;if(this._total_count>0&&this._start_count==0){this._start_count=this._start_count+1}this._set_total_count(this._total_count,this._total_count_div);data_range=rdx.i18n.get_string("rdx.table_pagination_data_range",{start_count:this._page_number,total_count:(Math.ceil(this._total_count/this._page_size))});this._data_range_span.html(data_range);this._update_page_select()};rdx.pagination.prototype.get_page_size=function(){return this._page_size};rdx.pagination.prototype.get_total_count=function(){return this._total_count};rdx.pagination.prototype.set_custom_row_count=function(a){this._custom_row_count=a};rdx.pagination.prototype.reset_if_page_triggered=function(){var a=this._is_page_triggered;this._is_page_triggered=false;return a};rdx.pagination.prototype.set_page_size=function(a){var b={};b[a+" Per Page"]=a;b[rdx.i18n.get_string("rdx.pagination.25_per_page")]=25;b[rdx.i18n.get_string("rdx.pagination.50_per_page")]=50;b[rdx.i18n.get_string("rdx.pagination.100_per_page")]=100;b[rdx.i18n.get_string("rdx.pagination.250_per_page")]=250;this._render_page_size(this._dropdown_parent,b,a+" Per Page");this._page_size=a};rdx.pagination.prototype._toggle_parent=function(a){if(this._total_count<=a){this._parent.hide()}else{this._parent.show()}};rdx.table_column=function(a){this._DEFAULT_PROPERTIES={key:"",label:"",tooltip:"",type:"VALSTR",width:"auto",hidden:false,sortable:true,store_data:false,renderer_callback:null,text_align:null,default_sort:null,editor:"",value:null,editor_properties:null,element_properties:null,sync_data_from_table:false,is_draggable:false,min_max:{},resume_renderer_callback:null,label_renderer_callback:null,filter:null,filter_values:null,chart_renderer_callback:null,class_name:null,table_td:null,update_change_and_refresh:false,update_change_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.table_column.prototype.get_key=function(){return this._properties.key};rdx.table_column.prototype.get_label=function(){if(rdx.utils.is_empty(this._properties.label_renderer_callback)){return rdx.i18n.get_string(this._properties.label)}else{return this._properties.label_renderer_callback.call_back()}};rdx.table_column.prototype.get_value=function(){return this._properties.value};rdx.table_column.prototype.get_tooltip=function(){if(!this._properties.tooltip){this._properties.tooltip=this.get_label()}return rdx.i18n.get_string(this._properties.tooltip)};rdx.table_column.prototype.get_type=function(){return this._properties.type};rdx.table_column.prototype.get_width=function(){return this._properties.width};rdx.table_column.prototype.set_width=function(a){this._properties.width=a};rdx.table_column.prototype.is_hidden=function(){return this._properties.hidden};rdx.table_column.prototype.set_sortable=function(a){this._properties.sortable=a};rdx.table_column.prototype.is_sortable=function(){return this._properties.sortable};rdx.table_column.prototype.to_store_data=function(){return this._properties.store_data};rdx.table_column.prototype.set_store_data=function(a){return this._properties.store_data=a};rdx.table_column.prototype.get_renderer_callback=function(){return this._properties.renderer_callback};rdx.table_column.prototype.get_resume_renderer_callback=function(){return this._properties.resume_renderer_callback};rdx.table_column.prototype.get_is_editable=function(){return(this._properties.editor==""||this._properties.editor==rdx.form_constants.CHECK_BOX||this._properties.editor==rdx.form_constants.SPINNER)?false:true};rdx.table_column.prototype.get_editor=function(){return this._properties.editor};rdx.table_column.prototype.set_editor=function(a){return this._properties.editor=a};rdx.table_column.prototype.get_editor_properties=function(){return this._properties.editor_properties};rdx.table_column.prototype.get_element_properties=function(){return this._properties.element_properties};rdx.table_column.prototype.is_sync_data_from_table=function(){return this._properties.sync_data_from_table};rdx.table_column.prototype.is_update_change_and_refresh=function(){return this._properties.update_change_and_refresh};rdx.table_column.prototype.get_text_align=function(){if(!this._properties.text_align){this._properties.text_align=(this.get_type()=="VALNUM")?"right":"left"}return this._properties.text_align};rdx.table_column.prototype.get_default_sort_type=function(){return this._properties.default_sort};rdx.table_column.prototype.get_is_draggable=function(){return this._properties.is_draggable};rdx.table_column.prototype.get_min=function(){return this._properties.min_max.min};rdx.table_column.prototype.get_max=function(){return this._properties.min_max.max};rdx.table_column.prototype.get_start_value=function(){return this._properties.min_max.start_value};rdx.table_column.prototype.get_filter=function(){return this._properties.filter};rdx.table_column.prototype.set_filter=function(a){this._properties.filter=a};rdx.table_column.prototype.set_filter_values=function(a){this._properties.filter_values=a};rdx.table_column.prototype.get_filter_values=function(){return this._properties.filter_values};rdx.table_column.prototype.get_class_name=function(){return this._properties.class_name};rdx.table_column.prototype.get_chart_renderer_callback=function(){return this._properties.chart_renderer_callback};rdx.table_column.prototype.get_update_change_callback=function(){return this._properties.update_change_callback};rdx.table_column.prototype.get_table_column_dom=function(){return this._properties.table_td};rdx.table_column.prototype.set_table_column_dom=function(a){this._properties.table_td=a};rdx.table=function(g,f,a,b){this._parent=typeof(g)=="string"?$("#"+g):g;for(var e=0,d=f.length;e<d;e++){if(f[0].is_hidden()){var h=f.shift();f.push(h)}else{break}}this._component=b;this._columns=f;this._DEFAULT_PROPERTIES={class_names:"table",width:"100%",height:"100%",sort_az_img_url:rdx.images.SORT_ASCENDING_IMG,sort_za_img_url:rdx.images.SORT_DESCENDING_IMG,sort_no_img_url:rdx.images.SORT_NO_IMG,show_serial_no:false,details:false,details_renderer_callback:null,header:true,pagination:false,show_select_component:null,add_show_component_column:false,scrollable_header:rdx.TABLE_HAS_SCROLLABLE_HEADER,no_rows_message:"rdx.table_no_records",no_rows_show_table:true,row_editable:true,rows_selection:true,drag_drop_rows:false,spinner_exclusion:null,color_columns:null,add_grid:true,text_wrap:false,show_context_menu_on_click:true,details_table_class:"info_view_icon",sort_last_row:true};this._SHOW_SELECT_COMPONENT_COLUMN_KEY="__add_show_component_column__";this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);if(this._properties.class_names.indexOf("compact_table")!=-1){this._properties.compact_table=true}this._properties.details=rdx.utils.is_defined(this._properties.details)&&rdx.utils.is_object(this._properties.details)?true:this._properties.details;if(this._properties.show_serial_no){this._columns.splice(0,0,new rdx.table_column({type:"VALNUM",width:10}))}if(this._properties.add_show_component_column==true){this._columns.splice(0,0,new rdx.table_column({key:this._SHOW_SELECT_COMPONENT_COLUMN_KEY,width:20}));if(rdx.utils.is_defined(this._properties.details)&&(this._properties.details==true||this._properties.details=="true")){this._columns[0].set_width(65)}else{this._columns[0].set_width(50)}}this._table=null;this._header_table=null;this._table_div=null;this._header_table_div=null;this._div=null;this._table_header_checkbox=null;this._cancel_single_click_operation=false;this._sort_column_info={sort_column_index:-1,sort_order:null};this._menu_properties=null;this.row_count=0;this._column_position_curr=-1;this._current_column_index=-1;this._adjusted_width=0;this._resize_in_progress=false;this._ie_x_position_offset=250;this._select_checkbox_array=new Array();this._row_selected_index_for_multiple_select=-1;this._source_row_index_for_drag=-1;this._col_min_width_info_arr=new Array();this._no_rows_meesage_row=null;this._row_click_handler_callback=null;this._row_remove_click_handler_callback=null;this._anchor_index=-1};rdx.table.prototype.render=function(){this._table=$("<table>").addClass(this._properties.class_names).attr("cellPadding",0).attr("cellSpacing",0).width(this._properties.width).append($("<tbody>"));if(this._properties.add_grid==false){this._table.addClass("rdx_no_grid_table")}if(this._properties.text_wrap===true){this._table.addClass("table_text_wrap")}this._div=$("<div>").attr("id","_div").addClass("disallow_selection table_table_div").attr("unselectable","on").css("overflow","auto");this._parent.height(this._properties.height);this._navigation_div=$("<div>").addClass("table_resize_marker");this._navigation_div.css("left","-199999px");if(rdx.utils.is_defined(this._drilldown_renderer_callback)){var m=this;var q=0;var s=false;var n=function(A){var C=[];var B=A.target;if(($(B).has(":checkbox")).length>0){A.stopPropagation();return false}if($(B).attr("type")=="checkbox"){A.stopPropagation();return false}if($(B).attr("tagName")=="TD"){C=$(B).parent();m._drilldown_renderer_callback.call_back([[m._get_row_data_per_index(C)]])}if($(B).attr("tagName")=="TR"){C=$(B);m._drilldown_renderer_callback.call_back([[m._get_row_data_per_index(C)]])}};this._table.bind("click",function(A){s=false;q=setTimeout(function(){if(!s){n(A)}},200)}).bind("dblclick",function(A){clearTimeout(q);s=true})}this._parent.bind("mouseup",{ns_table:this},function(B){var G=B.data.ns_table;G.set_source_row_index_for_drag(-1);G._table.removeClass("drag_row_cursor");if(!G._resize_in_progress){return}G._parent.removeClass("resize_row");G._navigation_div.css("left",-199999);if(G._current_column_index>-1){var D=G._header_table.children("thead").children("tr").children("th:eq("+G._current_column_index+")").first();var F=D.width()+G._adjusted_width;var C=(G._col_min_width_info_arr.length>0&&rdx.utils.is_defined(G._col_min_width_info_arr[G._current_column_index]))?G._col_min_width_info_arr[G._current_column_index].header_width:0;header_th_width_adjustment=(F>C)?G._adjusted_width:G._adjusted_width+(C-F);F=D.width()+header_th_width_adjustment;D.animate({width:F},300);var E=G._table.children("tbody").children("tr");var A=E.children("td:eq("+G._current_column_index+")").first();var I=A.width()+G._adjusted_width;var H=(G._col_min_width_info_arr.length>0&&rdx.utils.is_defined(G._col_min_width_info_arr[G._current_column_index]))?G._col_min_width_info_arr[G._current_column_index].body_width:0;body_td_width_adjustment=(I>H)?G._adjusted_width:G._adjusted_width+(H-I);I=A.width()+body_td_width_adjustment;A.animate({width:I},300);E.each(function(K){var J=$(this).children("td:eq("+G._current_column_index+")");J.width(I)});G._thead_row.removeClass("resize_row_cursor");G._thead_row.addClass("pointer_cursor header_row")}G._current_column_index=-1;G._adjusted_width=0;G._resize_in_progress=false;if(rdx.utils.is_defined(G._resize_callback)){G._resize_callback.call_back([])}});if(this._properties.header){this._table_thead_row=$(this._table[0].createTHead().insertRow(-1));this._table_thead_row.addClass("pointer_cursor header_row");for(var v=0,w=this._columns.length;v<w;v++){var e=this._columns[v];var g=$("<th>").width(e.get_width()).attr("scope","col").css("textAlign",e.get_text_align());var d=$("<div>");g.attr("unselectable","on");d.addClass("head_node");if(this._properties.details==true||this._properties.details=="true"){d.addClass("details_info_icon_padding")}if(rdx.utils.is_instrumentation_enabled()){var b=rdx.utils.get_view_title();if(e&&rdx.utils.is_function(e.get_label)){inner_text=$.trim(e.get_label())||""}if(inner_text){g.attr("id",b+"-col-"+inner_text.replace(/\ /g,"_"))}}var a=$("<div>");if(v==0&&this._properties.show_select_component==rdx.form_constants.CHECK_BOX){this._table_header_checkbox=rdx.component_helper.get_table_column_editor(rdx.form_constants.CHECK_BOX);var o=this;this._table_header_checkbox.bind(rdx.events.CLICK,{column:e,ns_table:this},function(C){for(var E=0;E<o._select_checkbox_array.length;E++){var B=o._select_checkbox_array[E];var D=B.prop("checked");var A=B.closest(".table_row");if(B.prop("disabled")===true){continue}if((C.target.checked&&D)||(!C.target.checked&&!D)){continue}if(C.target.checked){B.prop("checked",true)}else{B.prop("checked",false)}o.update_row_style(A,B)}o.update_list_action_items(A);o.handle_spinner_component()});e.set_editor(rdx.form_constants.CHECK_BOX);e.set_sortable(false);if(this._properties.drag_drop_rows===true){this._table_header_checkbox.css("margin-left",22)}this._table_header_checkbox.attr("aria-label","Select All Rows");a.append(this._table_header_checkbox);a.append($('<span class="hide">').text("Select row"));if(rdx.utils.is_defined(this._properties.color_columns)){a.css("border-left","10px solid transparent")}}else{g.addClass("dummy_header");g.append($("<span class=hide>").text("select a row"))}if(rdx.utils.is_defined(e._properties)&&e._properties.is_movable==false){g.removeClass("dummy_header")}a.append(e.get_label()).addClass("table_th_label_div");d.append(a);var p=$("<div>");p.addClass("resize_row");if(e.is_hidden()){g.addClass("hidden")}if(e._properties.show_table_column_on_slider){g.hide()}var f={ns_column_index:v,ns_table:this};this.add_sort_icon(a);if(rdx.utils.is_defined(e.get_filter())){this._add_filter_options(a,e)}if(e.is_sortable()){a.bind(rdx.events.CLICK,f,function(B){var A=B.data.ns_column_index;var C=B.data.ns_table;C.sort_column(A);if(!C._properties.show_serial_no||A!=0){C._revalidate()}})}if(e.get_default_sort_type()!=null&&this._sort_column_info.sort_column_index==-1){this.set_sort_info(v,e.get_default_sort_type())}this.bind_resize_events(g,p,f);g.append(d);g.append(p);if(!this._properties.detailss&&this._properties.is_draggabl){d.hover(function(){$(this).addClass("table_head_node_hover")},function(){$(this).removeClass("table_head_node_hover")})}this._table_thead_row.append(g);if(rdx.utils.is_not_defined(this._headers)){this._headers=new Array()}var h=new Object();h.key=e._properties.key;h.value=g;this._headers.push(h)}if(this._properties.scrollable_header==true){this._header_table=this._table;this._table.css("table-layout","auto");this._header_table_div=null}else{this._header_table=this._table.clone(true,true);this._header_table.css("table-layout","auto");this._header_table.find("tbody").remove();this._header_table_div=$("<div>").addClass("table_body_table_div").attr("id","_header_table_div");this._header_table_div.append(this._header_table);this._div.append(this._header_table_div)}this._thead_row=this._header_table.children("thead").children("tr").first()}if(!this._table.html().match(/<tbody>/i)){this._table.append(document.createElement("tbody"))}if(!this._table.html().match(/<caption>/i)){var t="";var u="";if(rdx.utils.is_not_empty(this._properties.title)){t=this._properties.title}u=$("<caption>").addClass("hide").text(t);this._table.append(u)}if(this._properties.drag_drop_rows===true){var z={items:"tr",handle:".drag-drop-move-icon-show",containment:this._table.children("tbody"),opacity:0.7,placeholder:"ui_sortable_placeholder",forcePlaceholderSize:true};new rdx.sortable_rows(this,z)}this._table_div=$("<div>").append(this._table).addClass("table_body_table_div").attr("id","_table_div");this._table_div.bind("scroll",{ns_table:this},function(B){if(B.data.ns_table._properties.header==false||B.data.ns_table._properties.scrollable_header==true){return}var A=B.data.ns_table;A._header_table_div.scrollLeft(A._table_div.scrollLeft())});this._div.append(this._table_div).append(this._navigation_div);this._parent.append(this._div);this.set_no_data_message();if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().table_stack.push(this)}return this};rdx.table.prototype.get_html_table=function(){return this._table[0]};rdx.table.prototype.get_header_checkbox=function(){return this._table_header_checkbox};rdx.table.prototype.bind_resize_events=function(d,b,a){d.bind("mousemove",a,function(g){var f=g.data.ns_table;if(f._current_column_index==-1){return}if(!f._resize_in_progress){return}f._thead_row.removeClass("pointer_cursor");f._thead_row.addClass("resize_row_cursor");f._navigation_div.css("top",f._table.position().top);f._navigation_div.css("height",f._parent.height());var e=rdx.utils.is_not_defined(g.layerX)&&rdx.utils.is_ie()?g.clientX-f._ie_x_position_offset:g.clientX;f._adjusted_width=(e-f._column_position_curr);f._navigation_div.css("left",g.clientX-f._ie_x_position_offset)});b.bind("mousemove",a,function(e){if(e.data.ns_table._current_column_index==-1){return}e.data.ns_table._resize_in_progress=true;e.stopPropagation()});b.bind("mousedown",a,function(g){var f=g.data.ns_table;g.data.ns_table._resize_in_progress=true;var e=rdx.utils.is_not_defined(g.layerX)&&rdx.utils.is_ie()?g.clientX-f._ie_x_position_offset:g.clientX;f._column_position_curr=e;f._current_column_index=g.data.ns_column_index;g.stopPropagation()})};rdx.table.prototype.set_no_data_message=function(){if(rdx.utils.is_defined(this._no_rows_meesage_row)){this._no_rows_meesage_row.remove();this._no_rows_meesage_row=null;if(rdx.utils.is_defined(this._table_header_checkbox)){this._table_header_checkbox.hide()}}if(rdx.utils.is_defined(this._properties.no_rows_message)&&this._properties.no_rows_message.length>0){this._no_rows_meesage_row=$("<tr>").append($("<td>").attr("colspan",this._columns.length).addClass("table_no_row_message").append(rdx.i18n.get_string(this._properties.no_rows_message)));this._table.append(this._no_rows_meesage_row)}};rdx.table.prototype.set_no_rows_show_table=function(a){if(this._properties.no_rows_show_table==false){if(a==0){this._parent.hide()}else{this._parent.show()}}};rdx.table.prototype.add_items=function(h,g,a,b){if(a){this.delete_all_items()}this._add_remove_dummy_row(true);for(var e=0,d=h.length;e<d;e++){if(rdx.utils.is_object_empty(h[e])){continue}if(rdx.utils.is_defined(b)&&b){this.add_item(h[e],null,true,null,null,true)}else{if(rdx.utils.is_defined(h[e]["rdx_select_this_row"])&&h[e]["rdx_select_this_row"]){this.add_item(h[e],(g&&g[e]?g[e]:null),false,false,null,null,null,true)}else{this.add_item(h[e],(g&&g[e]?g[e]:null),false,false)}}}this._add_remove_dummy_row();if(rdx.utils.is_defined(this._properties._number_of_rows)&&this._properties._number_of_rows>h.length){this._table.append($("<tr>").append($("<td>").addClass("dummy_row")))}this._resize_header_div();this._sort_on_refresh();if(this._properties.show_context_menu_on_click===true&&rdx.utils.is_defined(this._menu_properties)&&(this._menu_properties.length>0)&&(this._properties.rows_selection===true)){if(this._header_table!=null){var f=$(this._header_table.children("thead").children("tr")).children()[0];if(rdx.utils.is_defined(this._properties.details)&&(this._properties.details==true||this._properties.details=="true")){this._columns[0].set_width(83);$(f.children[0]).addClass("details_menu_icon_padding")}else{this._columns[0].set_width(68);$(f.children[0]).addClass("menu_icon_padding")}}new rdx.context_menu(this._table.children("tbody"),this._menu_properties,new rdx.callback(this,this.get_item_info,[]),{table_ref:this,show_on_click:this._properties.show_context_menu_on_click,data:h,parent_title:this._properties.title}).build_menu()}};rdx.table.prototype.get_item_info=function(){return{action_item_data:this.get_selected_items_data(),total_item_count:this.get_item_count()}};rdx.table.prototype.add_item=function(H,U,t,f,Z,D,q,R){if(rdx.utils.is_object_empty(H)){return}var o=this.get_item_count()+1;if(rdx.utils.is_defined(this._no_rows_meesage_row)){this._no_rows_meesage_row.remove();this._no_rows_meesage_row=null}var s=$("<tr>").addClass("table_row");s.attr("index",o);s.css("height","27px");if(this._properties.rows_selection===false){s.addClass("no_hover_selected")}var ae=true;if(rdx.utils.is_defined(t)){ae=t}var m=true;if(rdx.utils.is_defined(this._table_header_checkbox)){this._table_header_checkbox.show()}if(rdx.utils.is_defined(f)){m=f}if(o%2==0){s.addClass("even")}if(rdx.utils.is_defined(this._menu_properties)&&(this._menu_properties.length>0)){s.bind(rdx.events.MOUSE_OVER,{ns_table:this,row_data:H},function(aj){var ai=aj.data.ns_table._menu_properties.filter(function(ak){if(ak._properties.label=="rdx.button_modify"||ak._properties.table_row_click){return true}else{return false}});if(ai.length>0){if(ai[0].is_expression_set()){var ah;if(ai[0]._properties.expression_mode=="ALL"){ah=ai[0].get_expression().evaluate_all([aj.data.row_data])}else{ah=ai[0].get_expression().evaluate([aj.data.row_data])}if(rdx.utils.is_defined(ah)&&ah){$(s[0]).addClass("pointer_curosr")}}else{$(s[0]).addClass("pointer_curosr")}}})}if(this._properties.rows_selection===true){s.bind(rdx.events.CLICK,{ns_table:this,row_data:H},function(aG){var av=aG.data.ns_table;var ao=this;if(av._properties.show_select_component!=rdx.form_constants.CHECK_BOX&&aG.ctrlKey==false&&aG.shiftKey==false){$(ao).siblings(".selected").removeClass("selected")}var aM=$(ao).index()+1;if(av._row_selected_index_for_multiple_select==-1&&aG.shiftKey==false&&!$(ao).hasClass("selected")){av._row_selected_index_for_multiple_select=aM}if(aG.target.type==rdx.form_constants.CHECK_BOX){if(aG.shiftKey===false){av._anchor_index=aM-1}else{if(av._anchor_index!==-1){var al=av._anchor_index;var ap=av._select_checkbox_array[al];var am=ap.prop("checked");var ak=aM-1;if(al>ak){var aL=al;al=ak;ak=aL}for(;al<=ak;al++){var aB=av._select_checkbox_array[al];var az=aB.closest(".table_row");if(aB.prop("disabled")===true){continue}if(am){aB.prop("checked",true)}else{aB.prop("checked",false)}av.update_row_style(az,aB)}av._anchor_index=aM-1}}}if($(aG.target).hasClass("rdx_table_select_component")){if(av._table_header_checkbox!=undefined&&av._select_checkbox_array!=undefined&&av._select_checkbox_array.length>0){var aI=true;$.each(av._select_checkbox_array,function(aN,aO){if(aO.prop("checked")===false){aI=false;return false}});if(!aI){av._table_header_checkbox.removeAttr("checked")}else{av._table_header_checkbox.prop("checked",true)}}if($(aG.target).prop("checked")==true){$(ao).addClass("selected")}else{$(ao).removeClass("selected")}if(aG.target.type==rdx.form_constants.CHECK_BOX){av.handle_spinner_component()}}else{if(aG.shiftKey){if(av._row_selected_index_for_multiple_select!=-1){var aq=av._row_selected_index_for_multiple_select>=aM?aM:av._row_selected_index_for_multiple_select;var aC=av._row_selected_index_for_multiple_select>=aM?av._row_selected_index_for_multiple_select:aM;aq=aq-1;aC=aC;var at=0;for(var aF=aq;aF<aC;aF++){if(aG.data.ns_table._properties.details==false){$(aG.data.ns_table._table).children("tbody").children("tr:eq("+aF+")").addClass("selected")}else{if(aG.data.ns_table._properties.details==true&&at%2==0){$(aG.data.ns_table._table).children("tbody").children("tr:eq("+aF+")").addClass("selected")}}at=at+1}av._row_selected_index_for_multiple_select=-1}}if(av._cancel_single_click_operation){av._cancel_single_click_operation=false;return}if(!aG.shiftKey){if(!(av._properties.show_select_component==rdx.form_constants.CHECK_BOX||av._properties.show_select_component==rdx.form_constants.RADIO_BUTTON)){$(ao).toggleClass("selected")}var ax=av.get_selected_row_index();if(!(aG.target==$(".inline_actions:visible")[$(ao).index()]||aG.target==$("."+av._properties.details_table_class)[$(ao).index()])){if(rdx.utils.is_array(av._menu_properties)){var aw=av._menu_properties.filter(function(aN){if(rdx.utils.is_defined(aN._properties.table_row_click)&&aN._properties.table_row_click===true){return true}else{return false}});if(aw.length>0){if(aw[0].is_expression_set()){var aK;if(aw[0]._properties.expression_mode=="ALL"){aK=aw[0].get_expression().evaluate_all([aG.data.row_data])}else{aK=aw[0].get_expression().evaluate([aG.data.row_data])}}if(rdx.utils.is_defined(aK)&&aK==true||rdx.utils.is_not_defined(aK)&&!$(aG.target).is(":first-child")){aw[0]._properties.dom_element=ao;aw[0]._properties.selected_rows_for_action=[aG.data.row_data];aw[0].get_click_handler_callback().call_back([aw[0]._properties]);aw[0]._properties.selected_rows_for_action=null}}}}if(av._properties.show_select_component==rdx.form_constants.RADIO_BUTTON){var an=av.get_item_count();av._select_checkbox_array=new Array();for(var aH=0;aH<an;aH++){var aA=$("<img>").attr("src",rdx.images.IN_PROGRESS_IMG).attr("alt",rdx.i18n.get_string("rdx.page_loading"));aA.addClass("row_update_inprogress");aA.css("float","right");aA.hide();var aj=av._columns[0];var aE=av._table.children("tbody").children("tr:eq("+aH+")");var ai=$(aE).children("td:eq("+0+")");var au=rdx.component_helper.get_table_column_editor(rdx.form_constants.RADIO_BUTTON);au.addClass("rdx_table_select_component");au.attr("name","grp1");if(aH==ax){au.prop("checked",true)}else{au.prop("checked",false)}ai.append(aA);av._select_checkbox_array.push(au)}}if(av._properties.show_select_component==rdx.form_constants.CHECK_BOX&&aG.target.className!=="inline_actions"){var aJ=$(ao).index();var ar=av._table.children("tbody").children("tr:eq("+aJ+")");var aA=$("<img>").attr("src",rdx.images.IN_PROGRESS_IMG).attr("alt",rdx.i18n.get_string("rdx.page_loading"));aA.addClass("row_update_inprogress");aA.css("float","right");aA.hide();var ai=$(ar).children("td:eq("+0+")");var au=rdx.component_helper.get_table_column_editor(rdx.form_constants.CHECK_BOX);au.addClass("rdx_table_select_component");var ay=av._select_checkbox_array[aJ].prop("checked");if(rdx.utils.is_defined(ay)&&ay===true){au.prop("checked",true);av._select_checkbox_array[aJ]=au}else{au.prop("checked",false)}ai.append(aA)}}}var ah=aG.target.className;var aD=ah.split(" ");if($.inArray(av._properties.details_table_class,aD)!=-1&&(av._properties.details==true||av._properties.details=="true")&&rdx.utils.is_defined(av._properties.details_renderer_callback)){av._properties.details_renderer_callback.call_back([aG.data.row_data,ao])}if(aG.target.className!=="inline_actions"){av._table.trigger(rdx.events.ROW_SELECTION_CHANGED)}if(rdx.utils.is_defined(av._row_click_handler_callback)&&!$(aG.target).is(":first-child")){av._row_click_handler_callback.call_back([[av._get_row_data_per_index($(ao))]])}})}if(this._properties.rows_selection===true){s.bind(rdx.events.CONTEXT_MENU,{ns_table:this},function(ah){var aj=ah.data.ns_table;var ai=this;if(!ah.ctrlKey){$(ai).siblings(".selected").removeClass("selected")}if(aj._cancel_single_click_operation){aj._cancel_single_click_operation=false;return}$(ai).addClass("selected");aj._table.trigger(rdx.events.ROW_SELECTION_CHANGED)})}var z=[];for(var ac=0,F=this._columns.length;ac<F;ac++){var T=this._columns[ac];var G=$("<td>").css("textAlign",T.get_text_align());z.push(G);if(T._properties.show_table_column_on_slider==true){G.css({display:"none"})}if(rdx.utils.is_defined(this._properties.color_columns)&&ac==0){var w=rdx.utils.object_keys(this._properties.color_columns);var a=H[w[0]];if(rdx.utils.is_defined(a)){var d=this._properties.color_columns[w[0]];for(var ag in d){var u=ag;var S=ag[0];var v=ag[ag.length-1];if(S!="^"){ag="^"+ag}if(v!="$"){ag=ag+"$"}var n=new RegExp(ag,"g");var P=a.toString().match(n);if(rdx.utils.is_defined(P)){G.css("border-left","10px solid "+d[u])}}}}if(T.get_is_draggable()){G.data("ns_table_row_data",H);G.bind("mouseup",{ns_table:this},function(aj){aj.preventDefault();var ai=aj.data.ns_table;var ak=$(this).parent();var ah=$(ak).index();if(ai.get_source_row_index_for_drag()==ah||ai.get_source_row_index_for_drag()==-1){ai.set_source_row_index_for_drag(-1);ai._table.removeClass("drag_row_cursor")}else{ai._table.removeClass("drag_row_cursor");ai._table.trigger(rdx.events.ROW_MOVED,[{from:ai.get_source_row_index_for_drag(),to:ah}])}});G.bind("mousemove",{ns_table:this},function(ai){var ah=ai.data.ns_table;if(ah.get_source_row_index_for_drag()!=-1&&ah.get_source_row_index_for_drag()!=$(this).parent().index()){ah._table.addClass("drag_row_cursor")}});G.bind("mousedown",{ns_table:this},function(aj){var ai=aj.data.ns_table;var ak=$(this).parent();var ah=$(ak).index();ai.set_source_row_index_for_drag(ah)})}s.append(G);if(T.is_hidden()){G.addClass("hidden")}if(U&&U[ac]){G.attr("title",U[ac])}if(T.to_store_data()){}G.data("ns_table_row_data",H);if(ac==0){var g=$("<img>").attr("src",rdx.images.IN_PROGRESS_IMG).attr("alt",rdx.i18n.get_string("rdx.page_loading"));g.addClass("row_update_inprogress");g.css("float","right");g.hide();G.append(g)}if(this._properties.drag_drop_rows===true&&ac==0){this._create_drag_drop_option(G,s)}if(ac==0&&(this._properties.details==true||this._properties.details=="true")&&rdx.utils.is_defined(this._properties.details_renderer_callback)){var ad=$("<button>").addClass(this._properties.details_table_class).attr("aria-label","Click to see more details");G.addClass("info_icon_padding");G.append(ad)}if(ac==0&&this._properties.show_context_menu_on_click===true&&rdx.utils.is_defined(this._menu_properties)&&(this._menu_properties.length>0)&&(this._properties.rows_selection===true)){var p=$("<button>").addClass("inline_actions").attr("aria-label","click to get actions");G.append(p)}var e="";G.data("unformatted_data",rdx.utils.html_decode(H[T.get_key()]));e=this._get_formatted_cell_data(H,T,G,ac,ae,D,o);var b=T.get_key()+"_disabled";if(rdx.utils.is_defined(H[b])&&H[b]==true){e.prop("disabled",true)}var N=T.get_key()+"_selected";if(rdx.utils.is_defined(H[N])&&H[N]==true){e.prop("checked",true);s.addClass("row_disabled")}if(T.get_is_editable()){e=$("<a>").addClass("anchor").attr("href","#").append(e)}var I=true;if(rdx.utils.is_defined(this._properties.spinner_exclusion)){if($.inArray(H[this._properties.spinner_exclusion.column],this._properties.spinner_exclusion.values)>=0){I=false}}if(T.get_editor()=="spinner"&&I){var W={};W.min=T.get_min();W.max=T.get_max();W.start_value=T.get_start_value();if(isNaN(W.max)){if(rdx.utils.is_defined(W.max.match(/^\{.*\}$/))){var C=W.max;C=C.replace("{","").replace("}","");W.max=H[C]}}if(isNaN(W.min)){if(rdx.utils.is_defined(W.min.match(/^\{.*\}$/))){var af=W.min;af=af.replace("{","").replace("}","");W.min=H[af]}}if(isNaN(W.start_value)){if(rdx.utils.is_defined(W.start_value.match(/^\{.*\}$/))){var J=W.start_value;J=J.replace("{","").replace("}","");W.start_value=H[J]}}if(rdx.utils.is_defined(this._properties.spinner_settings)){var A=$.extend({spinner_settings:this._properties.spinner_settings},H);var K=$.extend(true,{},W,A);var E=new rdx.spinner_component(G,new rdx.form_field(K))}else{var E=new rdx.spinner_component(G,new rdx.form_field(W))}E.render();var M=this;var h=E.get_data();G.data("ns_table_row_data")[T.get_key()]=h;E._spinner_input.bind(rdx.events.CHANGE,function(){var ah=E.get_data();G.data("ns_table_row_data")[T.get_key()]=ah});E._spinner_up_arrow.bind(rdx.events.CLICK,function(){E._spinner_input.trigger(rdx.events.CHANGE)});E._spinner_down_arrow.bind(rdx.events.CLICK,function(){E._spinner_input.trigger(rdx.events.CHANGE)});e=E}if(ac==this._columns.length-1&&(rdx.utils.is_defined(this._row_click_handler_callback)||rdx.utils.is_defined(this._row_remove_click_handler_callback))&&this._properties.row_editable==true){var O=$("<table>").addClass("table_view_row_editor").append($("<tbody>"));if(rdx.utils.is_not_defined(this._row_click_handler_callback)){O.addClass("table_view_only_remove_row_editor")}var V=$("<tr>");O.append(V);var L=$("<td>").append(rdx.utils.html_decode(e));V.append(L);if(rdx.utils.is_defined(this._row_remove_click_handler_callback)){var ab=$("<td>").addClass("table_row_remove_link");var B=$("<a>").addClass("anchor").attr("href","#").bind(rdx.events.CLICK,{row_index:o,row:V,table:this,callback:this._row_remove_click_handler_callback},function(aj){var ai=aj.data.table;rdx.utils.prevent_default(aj);aj.stopPropagation();var ah=ai._table.children("tbody").children("tr.table_row")[aj.data.row_index-1];if(!$(ah).hasClass("selected")){$(ah).addClass("selected")}if(rdx.utils.is_defined(ah)){aj.data.callback.call_back([[ai._get_row_data_per_index(ah)]])}});ab.append(B);V.append(ab)}G.append(O)}else{G.append(e)}}if(ae){this._table.prepend(s)}else{if(rdx.utils.is_defined(Z)){this._table.children("tbody").children("tr:eq("+(Z-1)+")").after(s[0])}else{this._table.append(s)}}for(var aa=0;aa<this._columns.length;aa++){var Q=this._columns[aa];if(Q.get_chart_renderer_callback()){Q.get_chart_renderer_callback().call_back([H,z[aa],this.row_count])}}this.row_count++;if(m==true){this._resize_header_div()}this.set_no_rows_show_table(this.row_count);if(q&this._properties.rows_selection==true){this.set_all_rows_unselected();if($($(this._get_checked_rows()[0]).children()[0]).children("input").prop("checked")){$($(this._get_checked_rows()[0]).children()[0]).children("input").click()}this.set_rows_selected(0)}if(rdx.utils.is_defined(R)&&R){s.addClass("selected");$(s.children()[0]).children("input").prop("checked",true)}return s};rdx.table.prototype.update_row_style=function(a,b){if(b.prop("checked")==true){a.addClass("selected")}else{a.removeClass("selected")}};rdx.table.prototype.update_list_action_items=function(a){if(a.className!=="inline_actions"){this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)}};rdx.table.prototype.handle_spinner_component=function(){var f=this._columns.length;if(this._columns[this._columns.length-1]._properties.show_table_column_on_slider==true&&this._columns[this._columns.length-1].get_editor()=="spinner"){this._table.css({width:"100%"});var b=0;for(var e=0;e<this._select_checkbox_array.length;e++){var a=this._select_checkbox_array[e];var d=$(a).closest("tr.table_row")[0];if(a[0].checked){b++;$(".wrapper_for_spinner",d).show()}else{$(".wrapper_for_spinner",d).hide()}}var g=$("tr th:nth-child("+f+")",this._table);if(b>=1){$("tr td:nth-child("+f+")",this._table).show(400);g.show(400)}else{if(b===0){$("tr td:nth-child("+f+")",this._table).hide(400);g.hide(400)}}}};rdx.table.prototype.set_menu_properties=function(a){this._menu_properties=a};rdx.table.prototype._create_drag_drop_option=function(a,d){var b=$("<div/>");b.addClass("drag-drop-move-icon-hide");a.append(b);d.bind("mouseover",{cell_div:a,image:b},function(e){e.data.image.addClass("drag-drop-move-icon-show")});d.bind("mouseout",{cell_div:a,image:b},function(e){e.data.image.removeClass("drag-drop-move-icon-show")})};rdx.table.prototype._get_formatted_cell_data=function(f,b,o,g,n,d,h){var e=null;var m=this;if(g==0&&this._properties.show_serial_no){e=h}else{if((g==0&&this._properties.show_select_component==rdx.form_constants.CHECK_BOX)||b.get_editor()==rdx.form_constants.CHECK_BOX){e=rdx.component_helper.get_table_column_editor(rdx.form_constants.CHECK_BOX);if(g==0&&this._properties.show_select_component==rdx.form_constants.CHECK_BOX){$(e).addClass("rdx_table_select_component").attr("aria-label","Select Row")}if(rdx.utils.is_defined(d)){f[b.get_key()]=d;e.prop("checked",d)}e.bind(rdx.events.CLICK,{col_name:b.get_key(),cell_to_store_data:o},function(q,p){if(rdx.utils.is_defined(p)){q.data.cell_to_store_data.data("ns_table_row_data")[q.data.col_name]=p}else{q.data.cell_to_store_data.data("ns_table_row_data")[q.data.col_name]=q.target.checked}});if(g==0&&this._properties.show_select_component==rdx.form_constants.CHECK_BOX){if(rdx.utils.is_defined(h)&&rdx.utils.is_defined(this._select_checkbox_array[h])){this._select_checkbox_array[h]=e}else{if(n==true){this._select_checkbox_array.unshift(e)}else{this._select_checkbox_array.push(e)}}}if(b.get_editor()==rdx.form_constants.CHECK_BOX){e.prop("checked",(f[b.get_key()]=="true"||f[b.get_key()]==true))}}else{if(g==0&&this._properties.show_select_component==rdx.form_constants.RADIO_BUTTON){e=rdx.component_helper.get_table_column_editor(rdx.form_constants.RADIO_BUTTON);if(g==0&&this._properties.show_select_component==rdx.form_constants.RADIO_BUTTON){$(e).addClass("rdx_table_select_component").attr("aria-label","Select Row")}e.attr("name","grp1");this._select_checkbox_array.push(e);e.prop("checked",false);if(rdx.utils.is_defined(d)){e.prop("checked",d)}}else{if(rdx.utils.is_defined(b.get_value())&&rdx.utils.is_empty(o.data("ns_table_row_data")[b.get_key()])){e=b.get_value();o.data("ns_table_row_data")[b.get_key()]=e}if(b.get_renderer_callback()){e=b.get_renderer_callback().call_back([f])}else{if(b.get_resume_renderer_callback()){var a=$("<img>").attr("src",rdx.images.IN_PROGRESS_IMG);a.css({height:"32px",width:"32px"});o.html(a);b.get_resume_renderer_callback().call_back([f,{resume:function(p){o.html(p)}}])}else{if(b.get_chart_renderer_callback()){e=""}else{if(rdx.utils.is_defined(f[b.get_key()])){e=rdx.utils.html_decode(f[b.get_key()]);if(rdx.utils.is_not_empty(e)&&typeof(e)=="string"){e=rdx.utils.html_encode(e)}}}}}if(rdx.utils.is_not_defined(e)){e="&nbsp;"}}}}if(b.get_is_editable()){if(rdx.utils.is_defined(b.get_editor())){o.unbind(rdx.events.CLICK,this._process_cell_click);o.bind(rdx.events.CLICK,{column:b,cell_to_store_data:o,table:this,row_data:f},this._process_cell_click)}}if(rdx.utils.is_array(e)){e=e.join(", ")}return e};rdx.table.prototype._process_cell_click=function(u){var a=u.data.cell_to_store_data;var d=u.data.column;d.set_store_data(true);if(u.data.column.get_editor()==rdx.form_constants.VIEW){var h=$.extend(true,{},rdx.utils.get_view(u.data.column.get_editor_properties().view));var w=u.data.column.get_editor_properties().resource_name;var g=u.data.column.get_editor_properties().inherit_data;var b=null;if(g==true&&rdx.utils.is_defined(d.get_editor_properties().get_form_data)){b=d.get_editor_properties().get_form_data.call_back()}if(rdx.utils.is_defined(d.get_editor_properties().set_cell_data)){rdx.view_utils.show_view_in_slider(h,new rdx.callback(d.get_editor_properties().set_cell_data,[a,d]),b,null)}else{rdx.view_utils.show_view_in_slider(h,null,b,null)}}else{var o={};if(rdx.utils.is_defined(d.get_element_properties())){o={properties:d.get_element_properties()}}var n=$.extend(o,d.get_editor_properties());var v=$(a).width();n.width=v-2;var m=new rdx.form_field(n);var e=m.get_formatter();var q=$(this).text();$(this).empty();var f=rdx.component_helper.get_component(u.data.column.get_editor(),a,m).render();if(d.is_sync_data_from_table()){var z=u.data.table.get_rows_data();if(rdx.utils.is_defined(e)){e._properties.data_validator_callback.params=[u.data.row_data];m.set_formatter(e);var p=m.get_formatter().map_data_items(z);f.add_data_items.apply(f,[p])}}if(rdx.utils.is_defined(e)&&rdx.utils.is_function(e.get_data_populate_callback)){var t=e.get_data_populate_callback();var s=new rdx.callback_params({return_callback:new rdx.callback(function(A){f.add_data_items.apply(f,[A])})});t.call_back([s])}if(rdx.utils.is_defined(u.data.row_data[d.get_key()+"_data"])){var p=u.data.row_data[d.get_key()+"_data"];f.add_data_items.apply(f,[p])}f.get_component().focus();f.set_data(q);f.add_event_handler(rdx.events.BLUR,new rdx.callback(function(B,L,J,I,C,A,K,F){var D=J.get_data();L.empty();L.data("ns_table_row_data")[C.get_key()]=D;if(rdx.utils.is_defined(C.get_renderer_callback())){var H=C.get_renderer_callback().call_back([L.data("ns_table_row_data")]);L.append(H)}else{if(rdx.utils.is_defined(D)&&typeof D=="string"){D=rdx.utils.html_encode(D)}L.html(D)}L.width(K);I._table.trigger(rdx.events.DO_REORGANISE_ROWS,[L,C,D,A]);if(C.is_update_change_and_refresh()){var E=F.data.row_data;var G=F.data.table.get_rows_data();if(C.get_update_change_callback()){C.get_update_change_callback().call_back([L,C,D,A,E,G])}}},[$(this),f,u.data.table,d,q,v,u]));f.add_event_handler(rdx.events.CLICK,new rdx.callback(function(A){A.stopPropagation()}))}u.preventDefault()};rdx.table.prototype._is_valid_row_index=function(a){return(a>=0&&a<this.get_item_count())};rdx.table.prototype._get_col_count=function(){return this._header_table.children("thead").children("tr").children("th").length};rdx.table.prototype.get_selected_row_count=function(){if(rdx.utils.is_not_defined(this._properties.show_select_component)){return this._get_selected_rows().length}else{return this.get_checked_items_data().length}};rdx.table.prototype._get_selected_rows=function(){var b=[];if(this._table.children("tbody").children("tr.selected").length==0&&this._table.children("tbody").children("tr").length==1){var a=this._table.children("tbody").children("tr");if($(a[0]).hasClass("selected")){b.push($(a[0]))}}else{b=this._table.children("tbody").children("tr.selected")}return b};rdx.table.prototype.get_selected_row_index=function(){var b=this._table.children("tbody").children("tr.selected");var a=b.index();return a};rdx.table.prototype.get_selected_items_data=function(){if(rdx.utils.is_not_defined(this._properties.show_select_component)){return this._get_selected_items_data()}else{return this.get_checked_items_data()}};rdx.table.prototype._get_selected_items_data=function(){if(this.get_selected_row_count()==0){return[]}return this._get_data(this._get_selected_rows())};rdx.table.prototype._get_checked_rows=function(){var g=[];if(rdx.utils.is_defined(this._no_rows_meesage_row)){return g}var d=this._table.children("tbody").children("tr");var h=$(this._table).attr("inline_actions");if(rdx.utils.is_defined(h)&&h=="true"){for(var e=0;e<d.length;e++){var b=$(d[e]);var m=$(b).attr("inline_actions_clicked");if(rdx.utils.is_defined(m)&&m==="true"){g.push(b);break}}}else{for(var e=0;e<d.length;e++){var b=$(d[e]);var f=$("input.rdx_table_select_component",b);if(f.length==1){var a=$(f[0]).prop("checked");if(rdx.utils.is_defined(a)&&a===true){g.push(b)}}}}return g};rdx.table.prototype.get_checked_items_data=function(){return this._get_data(this._get_checked_rows())};rdx.table.prototype.get_rows_data=function(){if(rdx.utils.is_defined(this._no_rows_meesage_row)){return[]}return this._get_data(this._table.children("tbody").children("tr.table_row"))};rdx.table.prototype.get_data=function(){if(this._properties.show_select_component!=null){return this.get_checked_items_data()}else{return this.get_rows_data()}};rdx.table.prototype.get_all_rows_data=function(){var d=[];var a=this._table.children("tbody").children("tr");for(var b=0;b<a.length;b++){if(!($(a[b]).hasClass("hidden"))){d.push($(a[b]))}}if(d.length==0){return[]}return this._get_data(d)};rdx.table.prototype._get_data=function(d){var e=[];var a=this._columns;for(var b=0;b<d.length;b++){e.push(this._get_row_data_per_index(d[b]))}return e};rdx.table.prototype._get_row_data_per_index=function(g){for(var d=0,b=this._columns.length;d<b;d++){var e=this._columns[d];if(!e.to_store_data()){continue}var f=$(g).children("td:eq("+d+")").data("ns_table_row_data");var a=null;if(typeof(f)=="string"){a=f}else{a=$.extend(true,{},$(g).children("td:eq("+d+")").data("ns_table_row_data"))}if(rdx.utils.is_defined(a[this._SHOW_SELECT_COMPONENT_COLUMN_KEY])){delete a[this._SHOW_SELECT_COMPONENT_COLUMN_KEY]}return a}return null};rdx.table.prototype._update_item_data=function(t,q,g,m){var b=this._columns;var h=this._table.children("tbody").children("tr:eq("+t+")");for(var w=0,A=b.length;w<A;w++){var e=b[w];var a=$(h).children("td:eq("+w+")");var B=a.children("img");a.data("ns_table_row_data",q);var f=a.children();if(w==0&&this._properties.show_select_component==rdx.form_constants.CHECK_BOX&&this._properties.add_show_component_column==true&&rdx.utils.is_defined(f)&&rdx.utils.is_defined(f[1])){if(rdx.utils.is_not_defined(q[this._SHOW_SELECT_COMPONENT_COLUMN_KEY],$(f[1]).prop("checked"))){q[this._SHOW_SELECT_COMPONENT_COLUMN_KEY]=$(f[1]).prop("checked")}}var o=this._get_formatted_cell_data(q,e,a,w,null,m,t);if(e.get_is_editable()){o=$("<a>").addClass("anchor").attr("href","#").html(o)}a.html("");if(rdx.utils.is_defined(g)&&rdx.utils.is_defined(B)&&B.hasClass("row_update_inprogress")){a.prepend(B);if(g){$(B).show()}else{$(B).hide()}}if(w==0&&this._properties.add_show_component_column==true&&(this._properties.details==true||this._properties.details=="true")){var v=$("<span>").addClass(this._properties.details_table_class);a.append(v);a.addClass("info_icon_padding")}if(w==0&&this._properties.show_context_menu_on_click===true&&rdx.utils.is_defined(this._menu_properties)&&(this._menu_properties.length>0)&&(this._properties.rows_selection===true)){var s=$("<button>").addClass("inline_actions").attr("aria-label","click to get actions");a.append(s)}if(w==this._columns.length-1&&(rdx.utils.is_defined(this._row_click_handler_callback)||rdx.utils.is_defined(this._row_remove_click_handler_callback))&&this._properties.row_editable==true){var d=$("<table>").addClass("table_view_row_editor").append($("<tbody>"));if(rdx.utils.is_not_defined(this._row_click_handler_callback)){d.addClass("table_view_only_remove_row_editor")}var z=$("<tr>");d.append(z);var n=$("<td>").append(o);z.append(n);if(rdx.utils.is_defined(this._row_remove_click_handler_callback)){var p=$("<td>").addClass("table_row_remove_link");var u=$("<a>").addClass("anchor").attr("href","#").bind(rdx.events.CLICK,{row_index:t,row:z,table:this,callback:this._row_remove_click_handler_callback},function(E){var D=E.data.table;rdx.utils.prevent_default(E);E.stopPropagation();var C=D._table.children("tbody").children("tr.table_row")[E.data.row_index];if(!$(C).hasClass("selected")){$(C).addClass("selected")}if(rdx.utils.is_defined(C)){E.data.callback.call_back([[D._get_row_data_per_index(C)]])}});p.append(u);z.append(p)}a.append(d)}else{a.append(o)}}this._resize_header_div()};rdx.table.prototype.check_if_data_exist=function(g,f,b,d){var a=false;var e=this;this._table.children("tbody").children("tr").each(function(h){var n=$(this).children("td:eq(0)").data("ns_table_row_data");if(rdx.utils.is_same_object(g,n,f,d)){var m=d==true?g:e._get_update_data(g,n);a=true}});return a};rdx.table.prototype.update_item_data=function(g,f,b,d){var a=false;var e=this;this._table.children("tbody").children("tr").each(function(h){var n=$(this).children("td:eq(0)").data("ns_table_row_data");if(rdx.utils.is_same_object(g,n,f,d)){var m=d==true?g:e._get_update_data(g,n);e._update_item_data(h,m,b,true);a=true}});return a};rdx.table.prototype._get_update_data=function(b,d){var e={};for(var a in d){e[a]=rdx.utils.is_not_empty(b[a])?b[a]:""}return e};rdx.table.prototype._delete_row=function(d,b,a){if(rdx.utils.is_not_defined(b)&&this.row_count<=0){return}if(this._properties.show_select_component!=null){this._select_checkbox_array.splice(d,1)}a=a?a:this._table.children("tbody").children("tr:eq("+d+")");a.remove();this.row_count--;if(this.row_count===0){this.set_no_data_message();if(rdx.utils.is_defined(this._table_header_checkbox)){this._table_header_checkbox.hide()}this.set_no_rows_show_table(this.row_count)}this._revalidate()};rdx.table.prototype.delete_item_at_index=function(b,a){this._delete_row(b,a);this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)};rdx.table.prototype.delete_items=function(d,b){for(var a=0;a<d.length;a++){this.delete_item(d[a],b,false)}this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)};rdx.table.prototype.delete_item=function(e,d,a){a=rdx.utils.is_defined(a)?a:true;var b=this;this._table.children("tbody").children("tr").each(function(f){var h=$(this);var g=h.children("td:eq(0)").data("ns_table_row_data");if(typeof e=="string"||e instanceof String){if(e==g){b._delete_row(f,null,h);return false}}else{if(rdx.utils.is_same_object(e,g,d)){b._delete_row(f,null,h);return false}}return true});if(a===true){this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)}};rdx.table.prototype.delete_all_items=function(){this._table.children("tbody").children("tr").remove();this._select_checkbox_array=new Array();this.row_count=0;this.set_no_data_message();this.set_no_rows_show_table(this.row_count);this._table.trigger(rdx.events.ROW_SELECTION_CHANGED);this._resize_header_div()};rdx.table.prototype.add_event_handler=function(b,d,a){if(b==rdx.events.ROW_MOVED){this._table.bind(b,{ns_callback:d},function(f,e){f.data.ns_callback.call_back([e])})}else{if(b==rdx.events.DO_REORGANISE_ROWS){this._table.bind(b,{ns_callback:d},function(g,e,f,h,m){g.data.ns_callback.call_back([e,f,h,m])})}else{if(b==rdx.events.COLUMN_CONTEXT_CHANGED){this._table.bind(b,{ns_callback:d},function(g,h,f,e){g.data.ns_callback.call_back([h,f,e])})}else{this._table.bind(b,{ns_callback:d},function(e){if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}e.data.ns_callback.call_back([a])})}}}if(b==rdx.events.DOUBLE_CLICK&&this._properties.header){this._thead_row.bind(rdx.events.DOUBLE_CLICK,{},(function(e){e.stopPropagation()}))}};rdx.table.prototype.table_sort_handler=function(a){this._table.bind(rdx.events.SORT_TABLE_VIEW,{ns_callback:a},function(b,e,d){b.data.ns_callback.call_back([e,d])})};rdx.table.prototype._revalidate=function(){if(this._properties.show_serial_no){var a=this._properties.details?this._table.children("tbody").children("tr:not(.hidden)"):this._table.children("tbody").children("tr");a.children("td:first-child").each(function(b){$(this).html(b+1).wrapInner(document.createElement("div"))})}};rdx.table.prototype._sort_on_refresh=function(){if(!this._is_server_sort()&&!this._is_crossfilter_sort()){if(this._sort_column_info.sort_column_index!=-1){this.sort_column(this._sort_column_info.sort_column_index,true);this._revalidate()}}};rdx.table.prototype._is_crossfilter_sort=function(){return this._component?this._component.crossfilter_enabled():false};rdx.table.prototype._is_server_sort=function(){return this._properties.pagination&&(rdx.utils.is_defined(this._properties.server_sorting)?this._properties.server_sorting:rdx.SERVER_SORTING)};rdx.table.prototype._get_sort_class=function(a){if(this._sort_column_info.sort_column_index==-1){return"asc"}if(a){return(this._get_sort_order()==rdx.SORT_ASCENDING)?"desc":"asc"}else{return(this._get_sort_order()==rdx.SORT_ASCENDING)?"asc":"desc"}};rdx.table.prototype.set_sort_info=function(b,a){this._sort_column_info.sort_column_index=b;this._sort_column_info.sort_order=a};rdx.table.prototype._get_sort_order=function(a){if(rdx.utils.is_not_defined(this._sort_column_info.sort_order)){return rdx.SORT_ASCENDING}if(a){return(this._sort_column_info.sort_order==rdx.SORT_ASCENDING)?rdx.SORT_DESCENDING:rdx.SORT_ASCENDING}else{return this._sort_column_info.sort_order}};rdx.table.prototype.sort_column=function(d,o){if(this._properties.header==false){return}var h=this._columns[d]._properties;var n=this._columns[d].get_key();var m=this._columns[d].get_type();if(h.sortable===false){return}var g=this._header_table.children("thead").children("tr").children("th");var a=g.find(".sort").addClass("hide").eq(d);a.removeClass("desc").removeClass("asc");a.addClass(this._get_sort_class(o));a.removeClass("hide");var b=this._get_sort_order(o);var e=(b==rdx.SORT_ASCENDING);if(this._is_crossfilter_sort()){this._cossfilter_sort(n,e)}else{if(this._is_server_sort()){this._server_sort(n,e)}else{this._client_sort(d,n,m,e)}}if(this._sort_column_info.sort_column_index!=d){var f=this._table.children("tbody").children("tr");if(this._sort_column_info.sort_column_index!=-1){$(g.get(this._sort_column_info.sort_column_index)).removeClass("selected").removeClass("ascending").removeClass("descending");f.find("td:eq("+this._sort_column_info.sort_column_index+")").removeClass("selected")}$(g.get(d)).addClass(" selected "+b);f.find("td:eq("+d+")").addClass("selected")}this.set_sort_info(d,(b==rdx.SORT_ASCENDING?rdx.SORT_DESCENDING:rdx.SORT_ASCENDING))};rdx.table.prototype._server_sort=function(a,b){this._table.trigger(rdx.events.SORT_TABLE_VIEW,[a,!b])};rdx.table.prototype._cossfilter_sort=function(a,b){this._table.trigger(rdx.events.SORT_TABLE_VIEW,[a,!b])};rdx.table.prototype._client_sort=function(b,n,h,d){var f,e=false;if(h){if(h.match(/VALSTR|ENUM|VALNAME|NO_TEXT/)){f=rdx.utils.sort_string_case_insensitive}if(h.match(/VALPORT|VALNUM|VALREAL/)){f=rdx.utils.sort_number;e=true}else{if(h.match(/VALIP_PORT_PROTOCOL/)){f=rdx.utils.sort_ip_port_protocol}else{if(h.match(/VALIP|VALIPSTR/)){f=rdx.utils.sort_ip}else{if(h.match(/VALDATE/)){f=rdx.utils.sort_date}}}}}else{f=rdx.utils.sort_default;e=true}var o=this._properties.details?this._table.children("tbody").children("tr:not(.hidden)"):this._table.children("tbody").children("tr");var m=this;var a=o.get();a.sort(function(u,t){var w=$(u).children("td:eq("+b+")");var v=$(t).children("td:eq("+b+")");if(m._properties.sort_last_row===false&&($(t).index()==(a.length-1)||$(t).index()==(a.length-1))){return}var q,p;if(e){q=w.data("unformatted_data");p=v.data("unformatted_data")}else{if(h=="NO_TEXT"){q=$.trim(w.html());p=$.trim(v.html())}else{q=$.trim(w.text());p=$.trim(v.text())}}if(h&&h.match(/VALDATE/)){q=w.data("ns_table_row_data")[n];p=v.data("ns_table_row_data")[n]}if(d){var s=q;q=p;p=s}return f.call(rdx.utils,q,p)});$.each(a,function(q,p){m._table.children("tbody").append(p)});if(this._properties.show_select_component==rdx.form_constants.CHECK_BOX){m._select_checkbox_array=[];for(i=0;i<a.length;i++){var g=$(a[i]).find("td:eq(0)").find("input:checkbox");m._select_checkbox_array.push(g)}}};rdx.table.prototype.get_item_count=function(){return this.row_count};rdx.table.prototype.add_sort_icon=function(a){$(a).append($("<span>").addClass("sort"),a.firstChild)};rdx.table.prototype.resize=function(a){this._synchronize_header_table_column_width();var d=a;if(this._properties.header==true&&this._properties.scrollable_header==false){var b=this._header_table_div.outerHeight(true);d=a-b}if(d>0){this._table_div.height(d)}this._resize_header_div()};rdx.table.prototype._resize_header_div=function(){if(this._properties.header==false||this._properties.scrollable_header==true){return}var a=this._table_div.width();this._header_table_div.width(a);a=this._table_div.width();if(this._table_div.attr("scrollHeight")>this._table_div.attr("clientHeight")){a=(this._table_div.width()-17)}this._header_table_div.width(a)};rdx.table.prototype._synchronize_header_table_column_width=function(){if(this._properties.header==false){return}this._table.css("table-layout","auto");this._table.find("thead").show();this.reset_width_for_columns();this.initialize_min_width_for_columns();if(this._properties.scrollable_header==true){return}for(var d=0,b=this._columns.length;d<b;d++){var g=this._table.children("thead").children("tr").children("th:eq("+d+")");var a=g.width();var e=this._header_table.children("thead").children("tr").children("th:eq("+d+")");e.width(a);g.width(a);var h=this._table.children("tbody").children("tr");var f=h.children("td:eq("+d+")").width();h.each(function(m){$(this).children("td:eq("+d+")").width(f)})}this._table.css("table-layout","fixed");this._table.find("thead").hide()};rdx.table.prototype.initialize_min_width_for_columns=function(){this._col_min_width_info_arr=new Array();this._table_div.css("width","50px");for(var e=0,b=this._columns.length;e<b;e++){var g=this._table.children("thead").children("tr").children("th:eq("+e+")");var a=g.width();var d=new Object();d.header_width=a;var h=this._table.children("tbody").children("tr");var f=h.children("td:eq("+e+")").width();d.body_width=f;this._col_min_width_info_arr.push(d)}this._table_div.css("width","auto")};rdx.table.prototype.reset_width_for_columns=function(){for(var d=0,b=this._columns.length;d<b;d++){var a=this._columns[d].get_width();var e=this._table.children("thead").children("tr").children("th:eq("+d+")");e.css("width",a);var f=this._table.children("tbody").children("tr");f.each(function(g){$(this).children("td:eq("+d+")").css("width",a);var h=$(this).children("td:eq("+d+")").get(0);if(rdx.utils.is_defined(h)&&(h.offsetWidth)<(h.scrollWidth)){h.title=h.textContent}})}};rdx.table.prototype.get_table_parent=function(){return this._parent};rdx.table.prototype.set_rows_selected=function(a){if(rdx.utils.is_defined(a)&&(a>=0)){if(!this._table.children("tbody").children("tr:eq("+a+")").hasClass("selected")){$(this._table.children("tbody").children("tr:eq("+a+")")).addClass("selected")}if(this._properties.show_select_component==rdx.form_constants.CHECK_BOX){$(this._table.children("tbody").children("tr:eq("+a+")").children("td:eq(0)").children("input")).click()}}this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)};rdx.table.prototype.set_all_rows_selected=function(){var b=this.get_item_count();for(var a=0;a<b;a++){$(this._table.children("tbody").children("tr:eq("+a+")")).addClass("selected");if(this._properties.show_select_component==rdx.form_constants.CHECK_BOX){$(this._table.children("tbody").children("tr:eq("+a+")").children("td:eq(0)").children("input")).click()}}this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)};rdx.table.prototype.set_all_rows_unselected=function(){var d=$("tbody tr",this._table);for(var a=0;a<d.length;a++){var e=$(d[a]);e.removeClass("selected");if(this._properties.show_select_component==rdx.form_constants.CHECK_BOX){var b=$(e.children("td:eq(0)").children("input"));if(b.prop("checked")){b.click()}}}this._table.trigger(rdx.events.ROW_SELECTION_CHANGED)};rdx.table.prototype.delete_selected_item=function(){var b=this._get_selected_rows();for(var a=0;a<b.length;a++){$(b[a]).remove();if(this.row_count>=0){this.row_count--}}this._revalidate();this._table.trigger(rdx.events.ROW_SELECTION_CHANGED);if(this.row_count==0){this.set_no_data_message()}this.set_no_rows_show_table(this.row_count)};rdx.table.prototype.get_source_row_index_for_drag=function(){return this._source_row_index_for_drag};rdx.table.prototype.set_source_row_index_for_drag=function(a){this._source_row_index_for_drag=a};rdx.table.prototype.is_no_rows_message_displayed=function(){return rdx.utils.is_defined(this._no_rows_meesage_row)};rdx.table.prototype.get_table=function(){return this._table};rdx.table.prototype.sort_column_of_index=function(a){var b=this;b.sort_column(a);if(!b._properties.show_serial_no||a!=0){b._revalidate()}};rdx.table.prototype.set_resize_event_callback=function(a){this._resize_callback=a};rdx.table.prototype.get_columns=function(){return this._columns};rdx.table.prototype.get_headers=function(){return this._headers};rdx.table.prototype.set_row_click_handler_callback=function(a){this._row_click_handler_callback=a};rdx.table.prototype.set_row_remove_click_handler_callback=function(a){this._row_remove_click_handler_callback=a};rdx.table.prototype.set_drilldown_renderer_callback=function(a){this._drilldown_renderer_callback=a};rdx.table.prototype.move_column_from_start_to_end_index=function(b,f){if(rdx.utils.is_defined(this._columns)&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(f)){var d=this._columns[b];if(f<b){for(var e=b-1,a=f;e>=a;e--){this._columns[e+1]=this._columns[e]}this._columns[f]=d}if(f>b){for(var e=b+1,a=f;e<=a;e++){this._columns[e-1]=this._columns[e]}this._columns[f]=d}}};rdx.table.prototype.set_table_height=function(a){this._table_div.css("height",a)};rdx.table.prototype._add_filter_options=function(d,b){var a=$("<span>").addClass("column_filter").attr("title","Filter");d.append(a);$(a).bind(rdx.events.CLICK,{column:b,ns_table:this,parent:a},function(f){var g=new rdx.callback(f.data.ns_table._handle_column_context_change,[f.data.column.get_key(),f.data.ns_table,f.data.column,a]);var e=new rdx.filter_component_view(f.data.parent,f.data.column,g);e.render();if(rdx.utils.is_defined(f.data.column.get_filter_values())){e.set_data(f.data.column.get_filter_values())}f.stopPropagation();f.preventDefault()})};rdx.table.prototype._handle_column_context_change=function(f,d,b,h,e,a){var g={};if(rdx.utils.is_not_empty(f)){g[b]=f;a.addClass("filtered")}else{g[b]=null;a.removeClass("filtered")}h._table.trigger(rdx.events.COLUMN_CONTEXT_CHANGED,[g,d,b])};rdx.table.prototype.set_total_number_rows=function(a){this._properties._number_of_rows=a};rdx.table.prototype._add_remove_dummy_row=function(a){if(rdx.utils.is_defined(this._properties._number_of_rows)){if(rdx.utils.is_defined(a)){this._dummy_row=$("<tr>").append($("<td>"));this._table.append(this._dummy_row)}else{this._dummy_row.remove()}}};rdx.map=function(d,b,a){this._parent=typeof(d)=="string"?$("#"+d):d;this._columns=b;this._DEFAULT_PROPERTIES={class_names:"table",width:"100%",height:"100%"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._map=null;this._cancel_single_click_operation=false;this._menu_properties=null;this._icon_count=0;this._current_icon_row=null};rdx.map.prototype.render=function(){this._parent.height(this._properties.height);this._map=$("<table>").addClass(this._properties.class_names).attr("align","center").append($("<tbody>"));this._parent.append(this._map);return this};rdx.map.prototype._get_icon_index=function(){var a=parseInt(this._properties.index);if(isNaN(a)){a=6}return a};rdx.map.prototype.add_items=function(f,e,a){if(a){this.delete_all_items()}for(var d=0,b=f.length;d<b;d++){this.add_item(f[d],e&&e[d]?e[d]:null)}if(rdx.utils.is_defined(this._menu_properties)){new rdx.context_menu(this._map.children("div"),this._menu_properties,new rdx.callback(this,this.get_item_info)).build_menu()}};rdx.map.prototype.add_item=function(e,d){var a=$("<div>").attr("style","float:left; padding:10px");var b=this._get_icon(e);a.append(b);a.data("icon_data",e);a.bind(rdx.events.DOUBLE_CLICK,{icon_table:this},(function(g){var f=g.data.icon_table;if(!g.ctrlKey){f._map.children("div:.selected").each(function(h){$(this).removeClass("selected")})}$(this).addClass("selected");g.data.icon_table._cancel_single_click_operation=true}));a.bind(rdx.events.CLICK,{icon_table:this},function(h){var g=h.data.icon_table;var f=this;var m=false;if($(f).attr("class").indexOf("selected")!=-1){m=true}setTimeout(function(){if(!h.ctrlKey){g._map.children("div:.selected").each(function(n){$(this).removeClass("selected")})}if(g._cancel_single_click_operation){g._cancel_single_click_operation=false;return}if(!m){$(f).toggleClass("selected")}g._map.trigger(rdx.events.ROW_SELECTION_CHANGED)},50)});a.bind(rdx.events.CONTEXT_MENU,{icon_table:this},function(h){var g=h.data.icon_table;var f=this;if(!h.ctrlKey){g._map.children("div:.selected").each(function(m){$(this).removeClass("selected")})}if(g._cancel_single_click_operation){g._cancel_single_click_operation=false;return}$(f).addClass("selected");g._map.trigger(rdx.events.ROW_SELECTION_CHANGED)});this._map.append(a);this._icon_count++};rdx.map.prototype._get_icon=function(h){var g=$("<table>").attr("cellPadding",0).attr("cellSpacing",1).append($("<tbody>"));var f=$("<tr>").height("60px").attr("valign","top");var e=$("<td>").attr("align","right").attr("valign","top");var m=this._get_formatted_cell_data(h,this._properties.status);e.append(m);f.append(e);g.append(f);var b=$("<td>");m=this._get_formatted_cell_data(h,this._properties.icon);b.append(m);f.append(b);var d=$("<tr>");d.append($("<td>").html(""));m=this._get_formatted_cell_data(h,this._properties.label);var a=$("<td>").html(m).attr("align","center");d.append(a);g.append(d);return g};rdx.map.prototype._get_formatted_cell_data=function(e,f){var d=null;for(var b=0,a=this._columns.length;b<a;b++){if(this._columns[b].get_key()==f){d=this._columns[b]}}var g=null;if(d.get_renderer_callback()){g=d.get_renderer_callback().call_back([e])}else{if(rdx.utils.is_defined(e[d.get_key()])){g=e[d.get_key()]}}if(rdx.utils.is_not_defined(g)){g="&nbsp;"}return g};rdx.map.prototype._get_selected_icon_count=function(){return this._map.children("div:.selected").length};rdx.map.prototype.get_selected_items_data=function(){var a=[];if(this._get_selected_icon_count()==0){return a}this._map.children("div:.selected").each(function(b){a.push($(this).data("icon_data"))});return a};rdx.map.prototype.get_item_info=function(){return{action_item_data:this.get_selected_items_data(),total_item_count:this.get_item_count()}};rdx.map.prototype.set_menu_properties=function(a){this._menu_properties=a};rdx.map.prototype.delete_all_items=function(){this._map.children("div").remove();this._icon_count=0;this._map.trigger(rdx.events.ROW_SELECTION_CHANGED)};rdx.map.prototype.add_event_handler=function(b,d,a){this._map.bind(b,{ns_callback:d},function(e){e.data.ns_callback.call_back([a])})};rdx.map.prototype.get_item_count=function(){return this._icon_count};rdx.map.prototype.delete_item=function(d,b){var a=this;var e=[];this._map.children("div").each(function(f){var g=$(this).data("icon_data");if(!rdx.utils.is_same_object(d,g,b)){e.push(g)}});this.add_items(e,false,true)};rdx.map.prototype._update_item_data=function(b,d){var a=this._map.children("div:eq("+b+")");var e=this._get_icon(d);a.html("");a.html(e)};rdx.map.prototype.update_item_data=function(d,b){var e=[];var a=this;this._map.children("div").each(function(f){var g=$(this).data("icon_data");if(rdx.utils.is_same_object(d,g,b)){a._update_item_data(f,d);return false}return true});return e};rdx.map.prototype.get_data=function(){var a=[];this._map.children().each(function(b){a.push($(this).data("icon_data"))});return a};rdx.map.prototype.get_rows_data=function(){return this.get_data()};rdx.map.prototype.is_no_rows_message_displayed=function(){return false};rdx.sortable_rows=function(b,a){this._table=b,this._DEFAULT_PROPERTIES={items:"tr",opacity:0,containment:this._table.get_table(),placeholder:"ui_sortable_placeholder",forcePlaceholderSize:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._table.get_table().sortable(this._properties);$(this._table.get_table()).bind("sortstart",{table:this._table,that:this},function(d,e){e.item.addClass("selected");d.data.that._data_before_drag=d.data.table.get_all_rows_data()});$(this._table.get_table()).bind("sortstop",{table:this._table,that:this},function(d,e){e.item.removeClass("selected");if(rdx.utils.is_defined(d.data.table._properties.rearrange_callback)){d.data.table._properties.rearrange_callback.call_back([d.data.that._data_before_drag,d.data.table.get_all_rows_data()])}})};rdx.geo_vector_map_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._DEFAULT_PROPERTIES={color:"#f7f5ef",background_color:"#cbd8e0",hover_color:false,hover_opacity:"0.7",map:"world_mill_en",fill_color:"#f75872",label_click_handler_callback:null,on_label_show_callback:null,label_hover_handler_callback:null,location_balloon_label:"Instances and Agents",location_balloon_and_events_label:"Instances and Agents with Events",location_balloon_with_alarm_and_events_label:"Agent is in Down state",dont_show_map_if_no_data:false,show_region_string_as_marker:false,use_mapael:false,label_renderer_callback:null,label_offset_callback:null,series_values_callback:null,display_title:false,title:""};this._container=null;this._entities_resource_properties_object={city_latitude_property:null,city_longitude_property:null,city_name_property:null,total_entities_property:null,total_entities_up_property:null,total_entities_down_property:null,total_secondary_entities_property:null,total_alarms_property:null,total_critical_alarms_property:null,total_major_alarms_property:null,total_minor_alarms_property:null,location_property:null,id:null};this._view_properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._resource_properties=this._view_definition.resource_properties;this._hover_data=null;this._location_balloon="location_balloon";this._location_balloon_and_events="location_balloon";this._location_balloon_with_alarm_and_events="location_balloon_with_alarm_and_events";this._default_location="location_balloon"};rdx.geo_vector_map_view.prototype.make_view=function(){this._set_entities_resource_properties_object()};rdx.geo_vector_map_view.prototype._set_entities_resource_properties_object=function(){for(var a in this._view_definition.resource_properties){var b=this._view_definition.resource_properties[a];if(rdx.utils.is_defined(b,b.is_latitude)&&b.is_latitude){this._entities_resource_properties_object.city_latitude_property=a}else{if(rdx.utils.is_defined(b,b.is_longitude)&&b.is_longitude){this._entities_resource_properties_object.city_longitude_property=a}else{if(rdx.utils.is_defined(b,b.is_city_name)&&b.is_city_name){this._entities_resource_properties_object.city_name_property=a}else{if(rdx.utils.is_defined(b,b.is_total_entities)&&b.is_total_entities){this._entities_resource_properties_object.total_entities_property=a}else{if(rdx.utils.is_defined(b,b.is_entities_up)&&b.is_entities_up){this._entities_resource_properties_object.total_entities_up_property=a}else{if(rdx.utils.is_defined(b,b.is_entities_down)&&b.is_entities_down){this._entities_resource_properties_object.total_entities_down_property=a}else{if(rdx.utils.is_defined(b,b.is_total_secondary_entities)&&b.is_total_secondary_entities){this._entities_resource_properties_object.total_secondary_entities_property=a}else{if(rdx.utils.is_defined(b,b.is_alarm)&&b.is_alarm){this._entities_resource_properties_object.total_alarms_property=a}else{if(rdx.utils.is_defined(b,b.is_location)&&b.is_location){this._entities_resource_properties_object.location_property=a}else{if(rdx.utils.is_defined(b,b.is_critical_alarm)&&b.is_critical_alarm){this._entities_resource_properties_object.total_critical_alarms_property=a}else{if(rdx.utils.is_defined(b,b.is_medium_alarm)&&b.is_medium_alarm){this._entities_resource_properties_object.total_medium_alarms_property=a}else{if(rdx.utils.is_defined(b,b.is_low_alarm)&&b.is_low_alarm){this._entities_resource_properties_object.total_low_alarms_property=a}else{if(rdx.utils.is_defined(b,b.is_major_alarm)&&b.is_major_alarm){this._entities_resource_properties_object.total_major_alarms_property=a}else{if(rdx.utils.is_defined(b,b.is_minor_alarm)&&b.is_minor_alarm){this._entities_resource_properties_object.total_minor_alarms_property=a}else{if(rdx.utils.is_defined(b,b.is_id)&&b.is_id){this._entities_resource_properties_object.id=a}else{continue}}}}}}}}}}}}}}}}};rdx.geo_vector_map_view.prototype.get_resource_response_arrived=function(b){if(rdx.utils.is_defined(b)&&$.isArray(b)&&!b.length&&this._view_properties.dont_show_map_if_no_data){return}this._response=b;this._container=$("<div>").addClass("geo_vector_map_view");this._parent.empty();if(rdx.utils.is_defined(this._view_properties.display_title)&&this._view_properties.display_title&&this._view_properties.title!==""){this._parent.addClass("view_parent smooth_all_corner rdx_auto_cursor");var e=$("<div>").addClass("header");var g=$("<table>").append($("<tbody>"));var d=$("<tr>");var h=$("<td>").append(this._view_properties.title);d.append(h);g.append(d);e.append(g);this._parent.append(e)}this._parent.append(this._container);var f=this._container.offset().top;var a=300;if(rdx.utils.is_defined(this._view_properties.overwrite_height)&&this._view_properties.overwrite_height==true){a=this._parent.height()>0?this._parent.height():27}else{if(rdx.utils.is_defined(this._view_properties.height)&&this._view_properties.height>300){a=this._view_properties.height}else{var n=$(window).height();var m=n-f-150;if(m>300){a=m}}}this._container.css("height",a);this._hover_data=this._create_data_object_for_hover();$(".jvectormap-tip").remove();$(".geo_map_slider_container_wrapper").remove();this._container.empty();this._container.unbind("markerClick.jvectormap");this._container.unbind("markerTipShow.jvectormap");this._container.unbind("markerOver.jvectormap");jvm.$(window).unbind("resize");this._register_events(this._container,this._hover_data);var o=this._get_map_properties();this._render_map(o)};rdx.geo_vector_map_view.prototype._create_data_object_for_hover=function(){var a=new Array();if(rdx.utils.is_defined(this._response)&&this._response.length){for(var b=0;b<this._response.length;b++){var d=new Object();d[this._entities_resource_properties_object.city_name_property]=this._response[b][this._entities_resource_properties_object.city_name_property];d[this._entities_resource_properties_object.city_latitude_property]=this._response[b][this._entities_resource_properties_object.city_latitude_property];d[this._entities_resource_properties_object.city_longitude_property]=this._response[b][this._entities_resource_properties_object.city_longitude_property];d[this._entities_resource_properties_object.total_entities_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_entities_property]);d[this._entities_resource_properties_object.total_entities_up_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_entities_up_property]);d[this._entities_resource_properties_object.total_entities_down_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_entities_down_property]);d[this._entities_resource_properties_object.total_secondary_entities_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_secondary_entities_property]);d[this._entities_resource_properties_object.id]=this._response[b][this._entities_resource_properties_object.id];var e=this._view_properties.show_region_string_as_marker;if(e==true){d[this._entities_resource_properties_object.location_property]=this._response[b][this._entities_resource_properties_object.location_property]}else{d[this._entities_resource_properties_object.total_alarms_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_alarms_property])}d[this._entities_resource_properties_object.total_critical_alarms_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_critical_alarms_property]);d[this._entities_resource_properties_object.total_medium_alarms_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_medium_alarms_property]);d[this._entities_resource_properties_object.total_low_alarms_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_low_alarms_property]);d[this._entities_resource_properties_object.total_major_alarms_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_major_alarms_property]);d[this._entities_resource_properties_object.total_minor_alarms_property]=parseInt(this._response[b][this._entities_resource_properties_object.total_minor_alarms_property]);a[b]=d}}return a};rdx.geo_vector_map_view.prototype._render_map=function(a){this._jvm_map=new jvm.Map(a);if(rdx.utils.is_defined(this._view_properties.make_legend_clickables)&&this._view_properties.make_legend_clickables){this._make_legend_clickables()}};rdx.geo_vector_map_view.prototype._make_legend_clickables=function(){var a=$(".jvectormap-legend-tick");var e={};var f=this._view_properties.balloons;if(rdx.utils.is_defined(f)){for(var d in f){if(f.hasOwnProperty(d)){e[d.replace(/ +/g,"")]=f[d]}}}if(a.length>0){for(var b=0;b<a.length;b++){$(a[b]).addClass("geo_vector_legend_class");$(a[b]).bind(rdx.events.CLICK,{jvm:this._jvm_map,legend:a[b],geo_map:this,map:e},function(h){var g=$(h.data.legend).find(".jvectormap-legend-tick-text").text();g=g.replace(/ +/g,"");var m=h.data.map[g];h.data.geo_map.clear_markers(m,$(h.data.legend));if($(h.data.legend).hasClass("disable_legend")){$(h.data.legend).removeClass("disable_legend");$(h.data.legend).addClass("enable_legend")}else{$(h.data.legend).addClass("disable_legend");$(h.data.legend).removeClass("enable_legend")}h.stopPropagation();h.preventDefault()})}}};rdx.geo_vector_map_view.prototype.clear_markers=function(a,b){$("image.jvectormap-marker").each(function(d){if($(this).attr("href").indexOf(a)>-1){if($(this).attr("id")!="hidden"){$(this).css("display","none");$(this).attr("id","hidden");$("text.jvectormap-marker").eq(d).show()}else{$(this).css("display","block");$(this).attr("id","");$("text.jvectormap-marker").eq(d).hide()}}})};rdx.geo_vector_map_view.prototype._get_map_properties=function(){var g=this._get_map_markers();var q=new Object();var p=new Object();p["font-weight"]="bold";p["font-size"]="12";p.fill=this._view_properties.fill_color;q.initial=p;var o=new Object();var t=this;var a=null;if(rdx.utils.is_defined(this._view_properties.label_renderer_callback)){a=function(v){return t._view_properties.label_renderer_callback.call_back([v,t._response,t._entities_resource_properties_object])}}var b=null;if(rdx.utils.is_defined(this._view_properties.label_offset_callback)){b=function(v){return t._view_properties.label_offset_callback.call_back([v,t._response[v]])}}o.render=a;o.offsets=b;var m=new Object();if(!(rdx.utils.is_defined(o.render)||rdx.utils.is_defined(o.offsets))){m=null}else{m.markers=o}var h=new Object();var d=new Object();d.attribute=this._view_properties.attribute;d.scale=this._view_properties.scale;if(rdx.utils.is_defined(this._view_properties.series_values_function)){var f=this._view_properties.series_values_function;d.values=f(t._response)}else{d.values=this._get_location_marker()}var s=new Object();s.horizontal=true;var n=this;var e=null;if(rdx.utils.is_defined(this._view_properties.legend_renderer_callback)){e=function(v){return n._view_properties.legend_renderer_callback.call_back([v])};s.labelRender=e}else{s.labelRender=function(v){var w={};if(rdx.utils.is_not_empty(n._view_properties.location_balloon_label)){w.location_balloon=n._view_properties.location_balloon_label}if(rdx.utils.is_not_empty(n._view_properties.location_balloon_and_events_label)){w.location_balloon_and_events=n._view_properties.location_balloon_and_events_label}if(rdx.utils.is_not_empty(n._view_properties.location_balloon_with_alarm_and_events_label)){w.location_balloon_with_alarm_and_events=n._view_properties.location_balloon_with_alarm_and_events_label}return w[v]}}d.legend=s;h.markers=[d];var u={color:this._view_properties.color,backgroundColor:this._view_properties.background_color,hoverColor:this._view_properties.hover_color,hoverOpacity:this._view_properties.hover_opacity,map:this._view_properties.map,container:this._container,markers:g,markerLabelStyle:q,labels:m,series:h,zoomOnScroll:false};return u};rdx.geo_vector_map_view.prototype._get_map_markers=function(){var d=new Array();if(rdx.utils.is_defined(this._response)&&this._response.length){for(var a=0;a<this._response.length;a++){var b=new Object();b.name=this._response[a][this._entities_resource_properties_object.city_name_property];b.latLng=[parseFloat(this._response[a][this._entities_resource_properties_object.city_latitude_property]),parseFloat(this._response[a][this._entities_resource_properties_object.city_longitude_property])];d[a]=b}}return d};rdx.geo_vector_map_view.prototype._get_location_marker=function(){var d={};if(rdx.utils.is_defined(this._response)&&this._response.length){for(var b=0;b<this._response.length;b++){var f=parseInt(this._response[b][this._entities_resource_properties_object.total_alarms_property]);var e=parseInt(this._response[b][this._entities_resource_properties_object.total_entities_down_property]);var h=parseInt(this._response[b][this._entities_resource_properties_object.total_critical_alarms_property]);var a=parseInt(this._response[b][this._entities_resource_properties_object.total_medium_alarms_property]);var g=parseInt(this._response[b][this._entities_resource_properties_object.total_low_alarms_property]);if(!isNaN(h)||!isNaN(a)||!isNaN(g)){if(!isNaN(h)&&h>0){d[b]=this._location_balloon}else{if(!isNaN(a)&&a>0){d[b]=this._location_balloon_and_events}else{if(!isNaN(g)&&g>0){d[b]=this._location_balloon_with_alarm_and_events}else{d[b]=this._default_location}}}}else{if(f===0&&e===0){d[b]=this._location_balloon}else{if((e===0&&f>0)||(isNaN(f))){d[b]=this._location_balloon_and_events}else{d[b]=this._location_balloon_with_alarm_and_events}}}}}return d};rdx.geo_vector_map_view.prototype.resize_view=function(){if(rdx.utils.is_defined(this._jvm_map)){this._jvm_map.onResize()}};rdx.geo_vector_map_view.prototype.destroy_view=function(){if(rdx.utils.is_defined(this._container)){this._container.unbind("markerClick.jvectormap");this._container.unbind("markerTipShow.jvectormap");this._container.unbind("markerOver.jvectormap")}jvm.$(window).unbind("resize");rdx.model.remove_model_change_listener(this._resource)};rdx.geo_vector_map_view.prototype._register_events=function(b,a){if(rdx.utils.is_defined(this._view_properties.label_click_handler_callback)){$(b).bind("markerClick.jvectormap",{callback:this._view_properties.label_click_handler_callback,hover_data:a},function(f,e,d){return f.data.callback.call_back([f,e,d,f.data.hover_data])})}if(rdx.utils.is_defined(this._view_properties.on_label_show_callback)){$(b).bind("markerTipShow.jvectormap",{callback:this._view_properties.on_label_show_callback,hover_data:a},function(f,e,d){return f.data.callback.call_back([f,e,d,f.data.hover_data])})}if(rdx.utils.is_defined(this._view_properties.label_hover_handler_callback)){$(b).bind("markerOver.jvectormap",{callback:this._view_properties.label_hover_handler_callback,hover_data:a},function(f,e,d){return f.data.callback.call_back([f,e,d,f.data.hover_data])})}};rdx.geo_vector_map_view.prototype.add_mask=function(){return true};rdx.geo_vector_map_view.prototype._add_tool_bar=function(){var a=[new rdx.action({image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this._refresh_view)})];this._toolbar_items=a};rdx.geo_vector_map_view.prototype.get_toolbar_items=function(){if(rdx.utils.is_defined(this._toolbar_items)){return this._toolbar_items}this._add_tool_bar();return this._toolbar_items};rdx.geo_vector_map_view.prototype.refresh_view=function(){this._base_view.get_view_context().invalidate_data();this._parent.empty();this._base_view.prepare_view()};rdx.geo_vector_map_view.prototype.register_event_handlers=function(){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this,this.refresh_view))};rdx.geo_map_constants=new function(){this.API_URL="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false";this.CLUSTER_URL="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js";this.ATTRIBUTION='&copy; <a href="https://www.google.com/maps"> Google</a>';this.MARKERS_LAYER="markers_layer";this.HEATMAP_LAYER="heatmap_layer";this.HEATMAP_TEST_DATA=[{latitude:24.6408,longitude:46.7728,count:"3000A"},{latitude:25.6408,longitude:45.7728,count:300000},{latitude:50.75,longitude:-1.55,count:1},{latitude:52.6333,longitude:1.75,count:1},{latitude:48.15,longitude:9.4667,count:1},{latitude:52.35,longitude:4.9167,count:2},{latitude:60.8,longitude:11.1,count:1},{latitude:43.561,longitude:-116.214,count:1},{latitude:47.5036,longitude:-94.685,count:1},{latitude:42.1818,longitude:-71.1962,count:1},{latitude:42.0477,longitude:-74.1227,count:1},{latitude:40.0326,longitude:-75.719,count:1},{latitude:40.7128,longitude:-73.2962,count:2},{latitude:27.9003,longitude:-82.3024,count:1},{latitude:38.2085,longitude:-85.6918,count:1},{latitude:46.8159,longitude:-100.706,count:1},{latitude:30.5449,longitude:-90.8083,count:1},{latitude:44.735,longitude:-89.61,count:1},{latitude:41.4201,longitude:-75.6485,count:2},{latitude:39.4209,longitude:-74.4977,count:1},{latitude:39.7437,longitude:-104.979,count:1},{latitude:39.5593,longitude:-105.006,count:1},{latitude:45.2673,longitude:-93.0196,count:1},{latitude:41.1215,longitude:-89.4635,count:1},{latitude:43.4314,longitude:-83.9784,count:1},{latitude:43.7279,longitude:-86.284,count:1},{latitude:40.7168,longitude:-73.9861,count:1},{latitude:47.7294,longitude:-116.757,count:1},{latitude:47.7294,longitude:-116.757,count:2},{latitude:35.5498,longitude:-118.917,count:1},{latitude:34.1568,longitude:-118.523,count:1},{latitude:39.501,longitude:-87.3919,count:3},{latitude:33.5586,longitude:-112.095,count:1},{latitude:38.757,longitude:-77.1487,count:1},{latitude:33.223,longitude:-117.107,count:1},{latitude:30.2316,longitude:-85.502,count:1},{latitude:39.1703,longitude:-75.5456,count:8},{latitude:30.0041,longitude:-95.2984,count:2},{latitude:29.7755,longitude:-95.4152,count:1},{latitude:41.8014,longitude:-87.6005,count:1},{latitude:37.8754,longitude:-121.687,count:7}]};rdx.geo_map_utils=new function(){this.get_url=function(){return rdx.geo_map_constants.URL+rdx.geo_map_constants.ACCESS_TOKEN};this.get_access_token=function(){return rdx.geo_map_constants.ACCESS_TOKEN};this.get_attribution=function(){return rdx.geo_map_constants.ATTRIBUTION};this.get_location_from_address_str=function(a,d,b){if(rdx.utils.is_empty(a)){return}rdx.geo_map_utils.load_google_map(new rdx.callback(rdx.geo_map_utils._retrive_location,[a,d]),b)};this._retrive_location=function(a,d){var b=new google.maps.Geocoder();b.geocode({address:a},function(f,e){if(e=="OK"){d.call_back([f,e])}else{rdx.geo_map_utils._show_error_message(a)}})};this._show_error_message=function(a){rdx.message_box.error("Unable to retrieve the location details for "+a+".")};this.load_google_map=function(e,b){if(rdx.utils.is_defined(window.google)&&rdx.utils.is_defined(window.google["maps"])){e.call_back();return}var d=rdx.geo_map_constants.CLUSTER_URL;rdx.utils.load_script(d);if(rdx.utils.is_defined(b)){var a=rdx.geo_map_constants.API_URL+"&key="+b+"&v=3.exp";rdx.utils.load_script(a,e)}else{rdx.message_box.warning("Please provide API key")}};this.load_jsapi=function(a,d){if(rdx.utils.is_empty(a)){return}if(rdx.utils.is_defined(window.google)&&rdx.utils.is_defined(window.google["maps"])){d.call_back();return}else{var b=document.createElement("script");b.src=rdx.geo_map_constants.API_URL;b.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(b);b.onload=function(){d.call_back()}}}};rdx.geo_map_new=function(d,a){this._parent=d;var b={maxZoom:18,minZoom:2,zoom:2,height:500,heatmap_show_tooltip:"Show heat map",heatmap_hide_tooltip:"Hide heat map",get_custom_search_filters_callback:null,search_handler_callback:null,click_handler_callback:null,hover_handler_callback:null,link_renderer_callback:null,connection_click_handler_callback:null,marker_highlight_renderer_callback:null,marker_bubble_click_handler_callback:null,legend_map:null,curved_line_style:{strokeColor:"#703da1",geodesic:true,strokeOpacity:1,strokeWeight:2}};this._access_token=rdx.geo_map_utils.get_access_token();this._properties=$.extend({},b,a);this._map_container_id=rdx.utils.generate_unique_id();this._map_container=$("<div>").prop("id",this._map_container_id);this._map_container.height(this._properties.height);this._search_container=$("<div>").addClass("geo_map_search_placeholder");this._search_input=$("<input>").addClass("geo_map_search_input");this._clear_search=$("<span>").addClass("geo_map_clear_search");this._search_options_container=$("<div>").addClass("geo_map_search_options");this._search_container.append(this._search_input).append(this._clear_search);this._search_input.bind(rdx.events.KEYUP,{that:this},function(f){f.data.that._add_search_filters();if($(this).val()&&$(this).val()!=""){f.data.that._clear_search.show()}if(f.keyCode==13){f.data.that._handle_search()}});this._clear_search.bind(rdx.events.CLICK,{that:this},function(f){f.data.that._search_input.val("");f.data.that._handle_search();f.data.that._clear_search.hide();f.data.that._search_options_container.remove()});var e=$("<div>").addClass("geo_map_container");e.append(this._search_container).append(this._map_container);this._parent.append(e);this.map_styles={_default:null,hide_labels:[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]}]}};rdx.geo_map_new.prototype._add_search_filters=function(){if(rdx.utils.is_defined(this._properties.get_custom_search_filters_callback)){var f=this._properties.get_custom_search_filters_callback.call_back();var b=this._search_input.val().toLowerCase();if(rdx.utils.is_array(f)){this._search_options_container.remove();this._search_options_container=$("<div>").addClass("geo_map_search_options");var a=$("<ul>");for(var d=0;d<f.length;d++){if(!rdx.utils.starts_with(f[d]["display_str"].toLowerCase(),b)){continue}var e=$("<li>").append(f[d]["display_str"]);e.bind(rdx.events.CLICK,{that:this,selected_value:f[d]},function(g){g.data.that._search_input.val(g.data.selected_value.display_str);g.data.that._clear_search.show();if(g.data.selected_value.do_search){g.data.that._handle_search()}else{g.data.that._search_input.focus()}g.data.that._search_options_container.remove()});a.append(e)}this._search_options_container.append(a);this._search_container.append(this._search_options_container)}}};rdx.geo_map_new.prototype.render=function(a){this._init();this._plot(a);this.register_map_events()};rdx.geo_map_new.prototype._init=function(){this.destroy();this._map=new google.maps.Map(this._map_container[0],{zoom:this._properties.zoom,center:new google.maps.LatLng(30,-10),mapTypeId:"roadmap",minZoom:this._properties.minZoom,maxZoom:this._properties.maxZoom,zoomControl:false})};rdx.geo_map_new.prototype._create_legend=function(){var g=$("<div>").addClass("geo_map_legends").appendTo(this._parent);var f=$("<div>").prop("id","legend").addClass("geo_map_legend_container");for(var d=0;d<this._properties.legend_map.length;d++){var b=this._properties.legend_map[d]["class_name"];var e=this._properties.legend_map[d]["description"];var a=$("<div>").addClass("geo_map_legend");a.append($("<span>").addClass("geo_map_legend_image").addClass(b));a.append($("<span>").addClass("geo_map_legend_desc").append(e));f.append(a)}$(g).addClass("geo_map_legend_button");$(g).append(f);this._map.controls[google.maps.ControlPosition.LEFT_TOP].push(g[0])};rdx.geo_map_new.prototype.destroy=function(){if(rdx.utils.is_defined(this._map)){this._map=null}};rdx.geo_map_new.prototype._plot=function(a){if(rdx.utils.is_defined(a.markers)&&a.markers.length>0){this._plot_markers(a.markers)}if(rdx.utils.is_defined(a.heatmap)&&a.heatmap.length>0){this._plot_heatmap(a.heatmap)}if(rdx.utils.is_defined(a.circles)&&a.circles.length>0){this._plot_circles(a.circles)}if(rdx.utils.is_defined(this._properties.legend_map)){this._create_legend()}this._create_reset_zoom()};rdx.geo_map_new.prototype._create_reset_zoom=function(){var b=$("<div>").addClass("geo_map_buttons");var g=$("<div>").addClass("zoom_button geo_map_reset_button").appendTo(b);var d=$("<span>").appendTo(g);var a=$("<div>").addClass("zoom_button geo_map_zoomin_button").appendTo(b);var m=$("<span>").appendTo(a);var f=$("<div>").addClass("zoom_button geo_map_zoomout_button").appendTo(b);var h=$("<span>").appendTo(f);var e=this;this._zoom=this._properties.zoom;g.bind(rdx.events.CLICK,{},function(n){e._zoom=e._properties.zoom;e._map.setZoom(e._properties.zoom);n.stopPropagation()});a.bind(rdx.events.CLICK,{},function(n){e._map.setZoom(e._map.getZoom()+1);n.stopPropagation()});f.bind(rdx.events.CLICK,{},function(n){e._map.setZoom(e._map.getZoom()-1);n.stopPropagation()});this._map.controls[google.maps.ControlPosition.LEFT_TOP].push(b[0])};rdx.geo_map_new.prototype._plot_markers=function(d){var a={};for(var b=0;b<d.length;b++){var f=d[b];var e=new rdx.geo_map_marker(f,this._properties,this._map);if(rdx.utils.is_defined(f.connections)){this.draw_connections(f)}}};rdx.geo_map_new.prototype.draw_connections=function(a){var f=a.connections;for(var e=0;e<f.length;e++){var b=[new google.maps.LatLng(parseFloat(a.latitude),parseFloat(a.longitude)),new google.maps.LatLng(parseFloat(f[e].latitude),parseFloat(f[e].longitude))];if(rdx.utils.is_defined(this._properties.link_renderer_callback)){var d=this._properties.link_renderer_callback.call_back(a,f[e]);this._properties.curved_line_style=$.extend(true,this._properties.curved_line_style,d)}var g=new google.maps.Polyline({path:b,strokeColor:this._properties.curved_line_style.strokeColor,geodesic:this._properties.curved_line_style.strokeColor,strokeOpacity:this._properties.curved_line_style.strokeColor,strokeWeight:this._properties.curved_line_style.strokeColor});g.setMap(this._map)}};rdx.geo_map_new.prototype._handle_search=function(){this._search_options_container.remove();var a=this._search_input.val();if(rdx.utils.is_defined(this._properties.search_handler_callback)){var b=this._properties.search_handler_callback.call_back([a]);if(b==true){return}}var d=new rdx.callback(function(g,e,h){var f=rdx.geo_map_new.prototype.retrieve_lat_long(g[0]);var m=new google.maps.LatLng(f.lat,f.lng);h._map.setCenter(m);h._map.setZoom(5)},[this]);rdx.geo_map_utils.get_location_from_address_str(a,d)};rdx.geo_map_new.prototype.retrieve_lat_long=function(a){return{lat:a.geometry.location.lat(),lng:a.geometry.location.lng()}};rdx.geo_map_new.prototype._plot_circles=function(b){for(var a=0;a<b.length;a++){var d=new google.maps.Circle({map:this._map,center:new google.maps.LatLng(b[a].latitude,b[a].longitude),radius:900000,fillColor:b[a].fillColor,fillOpacity:0.35,strokeColor:b[a].fillColor,strokeOpacity:0.8,strokeWeight:2})}};rdx.geo_map_new.prototype._plot_heatmap=function(e){var b=this;var g=$("<div>").addClass("geo_map_enabled_heat_map").attr("title",b._properties.heatmap_show_tooltip);g.bind(rdx.events.CLICK,{},function(h){if($(h.target).hasClass("geo_map_enabled_heat_map")){$(h.target).removeClass("geo_map_enabled_heat_map");$(h.target).addClass("geo_map_disabled_heat_map");$(h.target).attr("title",b._properties.heatmap_hide_tooltip)}else{$(h.target).addClass("geo_map_enabled_heat_map");$(h.target).removeClass("geo_map_disabled_heat_map");$(h.target).attr("title",b._properties.heatmap_show_tooltip)}b._heatmap.setMap(b._heatmap.getMap()?null:b._map);h.stopPropagation()});var a=[];for(var d=0;d<e.length;i++){var f=new google.maps.LatLng(e[d]["latitude"],e[d]["longitude"]);a.push(f)}this._heatmap=new google.maps.visualization.HeatmapLayer({data:a,map:this._map});this._map.controls[google.maps.ControlPosition.LEFT_TOP].push(g[0])};rdx.geo_map_new.prototype.register_map_events=function(){var a=this;a._map.setOptions({styles:a.map_styles.hide_labels});this._map.addListener("zoom_changed",function(){if(a._map.getZoom()==a._properties.zoom){a._map.setOptions({styles:a.map_styles.hide_labels})}else{a._map.setOptions({styles:a.map_styles._default})}})};rdx.geo_map_marker_wrapper=function(){rdx.geo_map_marker=function(b,a,e){var d={marker_highlight_renderer_callback:null,click_handler_callback:null,hover_handler_callback:null,marker_bubble_click_handler_callback:null,get_class_name:null};this._data=b;this._properties=$.extend(true,{},d,a);this._map=e;this.latlng=new google.maps.LatLng(parseFloat(this._data.latitude),parseFloat(this._data.longitude));if(rdx.utils.is_defined(this.setMap)&&rdx.utils.is_function(this.setMap)){this.setMap(this._map)}};rdx.geo_map_marker.prototype=new google.maps.OverlayView();rdx.geo_map_marker.prototype.draw=function(){var e=this;var g=this._marker_div;if(!g){g=this._marker_div=document.createElement("div");g.classList.add("geo_marker_container");var f=document.createElement("div");f.classList.add("geo_image_container");g.appendChild(f);if(rdx.utils.is_defined(this._properties.get_class_name)){var b=this._properties.get_class_name.call_back([this._data]);f.classList.add(b)}var d=this.getPanes();if(rdx.utils.is_defined(d)){d.overlayImage.appendChild(g)}this._register_marker_events(g);if(rdx.utils.is_defined(this._properties.marker_highlight_renderer_callback)){this._get_marker_bubble(g,f)}}var a=this.getProjection().fromLatLngToDivPixel(this.latlng);if(rdx.utils.is_defined(a)){g.style.left=(a.x)+"px";g.style.top=(a.y)+"px";g.style.transform="translate(-50%,-100%)"}};rdx.geo_map_marker.prototype.remove=function(){if(this._marker_div){this._marker_div.parentNode.removeChild(this._marker_div);this._marker_div=null}};rdx.geo_map_marker.prototype.getPosition=function(){return this.latlng};rdx.geo_map_marker.prototype._get_marker_bubble=function(e,a){var b=null;var d=this._properties.marker_highlight_renderer_callback.call_back([this._data]);if(d!=null){b=document.createElement("span");b.classList.add("geo_number_container");b.style.left=$(a).width()+"px";if(rdx.utils.is_defined(d.color)){$(b).css("background-color",d.color)}$(b).append(d.value);e.appendChild(b)}};rdx.geo_map_marker.prototype._register_marker_events=function(a){var b=this;if(rdx.utils.is_defined(this._properties.click_handler_callback)&&rdx.utils.is_not_defined(this._properties.marker_bubble_click_handler_callback)){a.addEventListener("click",function(d){var f=b._properties.click_handler_callback.call_back([b._data]);var e=new google.maps.InfoWindow({content:f[0],position:b.latlng});if(f!==null){e.open(b._map)}})}}};var advCharts={};advCharts.colorbrewer={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};advCharts.dataBins=function(){var e=true,d=[],h=[],o=[],p=0,a=f;function g(w){if(w.length==0){return}var z=a.call(this,d,p),v,u=-1,A=p,s=z.length-1,t=e?1:1/A,q;while(++u<s){v=o[u]={};v.dx=z[u+1]-(v.x1=z[u]);v.x2=v.x1+v.dx;v.y=0}if(s>0){u=-1;while(++u<w.length){q=w[u].key;y=w[u].value==undefined?w[u].values:w[u].value;if(q>=d[0]&&q<=d[1]){v=o[d3.bisect(z,q,1,s)-1];v.y+=t*y}}}return o}function b(q){return typeof q==="function"?q:function(){return q}}function f(q,s){return m(q,Math.ceil(Math.log(s)/Math.LN2+1))}function m(u,w){var t=-1,s=+u[0],q=Math.round((u[1]-s)/w),v=[];while(++t<=w){v[t]=q*t+s}return v}function n(q){return[d3.min(q),d3.max(q)]}g.range=function(q){if(!arguments.length){return d}d=q;return g};g.values=function(q){if(!arguments.length){return h}h=q;return g};g.bins=function(q){if(!arguments.length){return a}a=typeof q==="number"?function(s){return m(s,q)}:b(q);return g};g.frequency=function(q){if(!arguments.length){return e}e=!!q;return g};g.size=function(q){if(!arguments.length){return p}p=q;return g};return g};(function(){advCharts.dataNest=function(){var h={},g={},a=[],d,p=[];var f,n,m,e,o;function b(){var u=function(v){if(n.hasOwnProperty(v)){return n[v].type=="Measure"?true:false}else{return false}};var q=function(w,v){return Number(Math.round(w+"e"+v)+"e-"+v)};h=d3.nest();for(var s in n){if(u(s)){a.push(s)}else{if(m.indexOf(s)==-1){p.push(s)}}}m.forEach(function(v){h.key(function(w){return String(w[v]).trim()})});h=h.rollup(function(w){g={};for(var v in vizVariables){var z=vizVariables[v];switch(z.aggregation){case"Sum":g[z.column+"_"+v]=q(d3.sum(w,function(A){return parseFloat(A[z.column])}),2);break;case"Avg":g[z.column+"_"+v]=q(d3.mean(w,function(A){return parseFloat(A[z.column])}),2);break;case"Max":g[z.column+"_"+v]=q(d3.max(w,function(A){return parseFloat(A[z.column])}),2);break;case"Min":g[z.column+"_"+v]=q(d3.min(w,function(A){return parseFloat(A[z.column])}),2);break;case"Count":g[z.column+"_"+v]=q(d3.sum(w,function(A){return 1}),2);break}}p.forEach(function(A){g[A]=w[0][A]});return g}).entries(f);var t=function(v){v.forEach(function(w){w.name=w.key;w.children=w.values;delete w.values;delete w.key});v.forEach(function(w){if(w.children.length!=undefined){t(w.children)}else{w.properties=w.children;delete w.children}})};t(h);d={name:"",children:h};return b}b.nestedData=function(q){if(!arguments.length){return d}d=q;return b};b.data=function(q){if(!arguments.length){return f}f=q;return b};b.fieldTypes=function(q){if(!arguments.length){return n}n=q;return b};b.hierarchy=function(q){if(!arguments.length){return m}m=q;return b};b.vizVariables=function(q){if(!arguments.length){return vizVariables}vizVariables=q;return b};return b}})();advCharts.legend=function(){var m={top:25,right:10,bottom:20,left:20},O=d3.scale.linear(),N=d3.scale.linear(),R=d3.scale.quantize(),q=d3.scale.ordinal(),z,ab,B="rect",ac=15,P=15,e=5,E=8,T=4,ad=2,C=[5],o=[],H="",M="",p=d3.format(".0f"),F=5,J="middle",I="bottom",A="vertical",S=0,Z=["GnBu",5],V=["#3F51B5","#FF9800","#4CAF50","#9C27B0","#F44336","#9E9E9E","#E91E63","#FFC107","#2196F3","#00BCD4","#FF5722","#009688","#607D8B","#795548","#673AB7","#8BC34A","#CDDC39"],Q=d3.dispatch("advChartsHeatmapEventClick","advChartsHeatmapEventDblClick"),G=false,w="sequential",n=false,L=0,g=0,D="left",U="number",b="color",a,d,W=false,ae=true,t=undefined;function f(ag){ag.each(function(ak){var aj=ag.node().getBoundingClientRect();a=(aj.width==0?L:aj.width)-m.left-m.right,d=(aj.height==0?g:aj.height)-m.bottom-m.top;ag.selectAll("svg").remove();var ah=ag.append("svg").attr("width",a+m.left+m.right).attr("height",d+m.bottom+m.top);var ai=ah.append("g").attr("transform","translate("+m.left+","+m.top+")");if(W){renderStaticLegend(ak,ai)}else{aa(ak,ai)}})}function aa(ai,aj){O.domain(d3.extent(ai,function(at){return at.x2})).range([0,ac*ai.length+ad*(ai.length-1)]);N.domain(d3.extent(ai,function(at){return at.x2}));legendTitle=aj.append("text").attr("class",H+" legendTitle").attr("text-align","center").text(M);var ap=s(D,M,legendTitle);legendTitle.attr("transform",function(av,au){var at=D==="left"?0:ap.X;return"translate("+at+","+ap.Y+")"});var an=D==="left"?ap.X:0;if(B=="circle"){var al=Math.min(d/2,a/(2*ai.length));O.range([E,a-E]);N.range([T,E]);legendGroup=aj.selectAll(".advCharts.legend.shape").data(ai).enter().append("g").attr("class","advCharts legend shape").attr("transform",function(au,at){return"translate("+(an+at*2*(E)+at*ad)+","+0+")"});legendShape=legendGroup.append("circle").attr("class","advCharts legend shape circle").attr("cy",d/2).attr("r",function(at){return G?N(at.x2):E}).attr("cx",0)}else{if(B=="rect"){var ah=Math.min(d,a/ai.length);O.range([P,a-P]);N.range([P,e]);legendGroup=aj.selectAll(".advCharts.legend.shape").data(ai).enter().append("g").attr("class","advCharts legend shape").attr("transform",function(au,at){return"translate("+(an+at*ac+at*ad)+","+0+")"});legendShape=legendGroup.append("rect").attr("class","advCharts legend shape rect").attr("x",0).attr("y",function(at){return G?N(at.x2):0}).attr("width",ac).attr("height",function(at){return G?P-N(at.x2):P})}}if(b=="color"){var ar=[];if(ae){ai.forEach(function(at){ar.push(at.x2)})}else{ar=t}if(z===undefined){if(w=="sequential"){z=advCharts.colorbrewer[Z[0]][Z[1]+2];z=z.slice(2,Z[1]+2)}else{if(w=="diverging"){z=advCharts.colorbrewer[Z[0]][11].slice(5-Math.floor(Z[1]/2),5+Math.ceil(Z[1]/2))}}}z=n?z.reverse():z;if(ab==="ordinal"){q.domain(ar).range(z)}R.domain(ar).range(z);var ak=ab==="ordinal"?q:R;if(w!=="qualitative"){legendShape.style("fill",function(at){return ak(at.x2)})}else{legendShape.style("fill",function(au,at){return ak(au.x2)})}}if(b=="color"&&ae){legendText=legendGroup.append("text").attr("class",H+" legendText").attr("text-align","start").attr("x",function(at){return B=="rect"?0:-6}).attr("y",function(at){return B=="rect"?-5:-5}).text(function(av,at){var au=u(U);return au(av.x2-1,0)})}if(b=="color"&&!ae){legendText=legendGroup.append("text").attr("class",H+" legendText").attr("text-align","start").attr("x",function(at){return B=="rect"?1:-4}).attr("y",function(at){return B=="rect"?-5:-5}).text(function(aw,at){var av=u(U);var au=Math.round((t[1]+t[0])/2);return at==0&&ai.length>1?av(t[0],0):(at==ai.length-1?av(t[1],0):av(au,0))});var ao=[];legendText.each(function(at){ao.push(this.getBoundingClientRect().width)});var ag=Math.max(ac,Math.ceil(d3.max(ao)));legendGroup.attr("transform",function(au,at){return"translate("+(an+at*(ag)+at*ad)+","+0+")"});legendShape.attr("width",ag)}if(b=="size"){var am=[d3.min(ai,function(at){return at.x1}),d3.max(ai,function(at){return at.x2})];legendText=aj.selectAll("."+H+".legendText").data(am).enter().append("text").attr("class",H+" legendText").attr("text-align","center").text(function(av,at){var au=u(U);return au(av,0)});legendShape.style("fill","white").style("stroke","#000").style("stroke-width","0.4");var aq=b=="color"?1:ai.length-2;if(B=="circle"){legendText.attr("transform",function(au,at){return"translate("+(at*(E+ad)*1.8-5)+","+-11+")"})}else{if(B=="rect"){legendText.attr("transform",function(au,at){return"translate("+(at*ac*aq*1.5+(at+1)*ad)+","+-3+")"})}}}}function s(ah,ai,ag){pos={};if(ah=="left"){var aj=ag.node().getBBox().width;pos.X=aj+10;pos.Y=d*0.5;return pos}else{if(ah=="bottom"&&ae){pos.X=30;pos.Y=30;return pos}else{if(ah=="bottom"&&!ae){pos.X=0;pos.Y=30;return pos}}}}function h(ah,ag){pos={};if(ah=="left"){pos.X=-100;pos.Y=0;return pos}else{if(ah=="bottom"){pos.X=0;pos.Y=30;return pos}}}function u(ag){var ah;switch(ag){case"number":ah=af;break;case"bytes":ah=K;break;default:ah=function(ai,aj){return ai};break}return ah}function v(){d3.select("#advChartsHeatmapTooltipBox").remove();d3.select(".advCharts.adv-tooltip.av-arrow-box.option-btn").remove()}var K=function(ah,ai){var ag=d3.format("."+ai+"f");if(ah<1024){return ag(ah)+" B"}else{if(ah<1024*1024){return ag(ah/1024)+" KB"}else{if(ah<1024*1024*1024){return ag(ah/1024/1024)+" MB"}else{if(ah<1024*1024*1024*1024){return ag(ah/1024/1024/1024)+" GB"}else{return ag(ah/1024/1024/1024/1024)+" TB"}}}}};var af=function(ag,ah){if(Math.abs(ag)<1000){return parseFloat(ag)}if(Math.abs(ag)<10000000){return parseFloat(ag/1000).toFixed(ah)+"K"}if(Math.abs(ag)<1000000000){return parseFloat(ag/1000000).toFixed(ah)+"M"}if(Math.abs(ag)<1000000000000){return parseFloat(ag/1000000000).toFixed(ah)+"B"}};f.cells=function(ag){if(!arguments.length){return C}if(ag.length>1||ag>=2){C=ag}return f};f.shape=function(ag,ah){if(!arguments.length){return B}if(ag=="rect"||ag=="circle"||ag=="line"||(ag=="path"&&(typeof ah==="string"))){B=ag;S=ah}return f};f.shapeWidth=function(ag){if(!arguments.length){return ac}ac=+ag;return f};f.shapeHeight=function(ag){if(!arguments.length){return P}P=+ag;return f};f.shapeRadius=function(ag){if(!arguments.length){return E}E=+ag;return f};f.shapePadding=function(ag){if(!arguments.length){return ad}ad=+ag;return f};f.labels=function(ag){if(!arguments.length){return o}o=ag;return f};f.labelAlignX=function(ag){if(!arguments.length){return J}if(ag=="start"||ag=="end"||ag=="middle"){J=ag}return f};f.labelFormat=function(ag){if(!arguments.length){return p}p=ag;return f};f.labelOffset=function(ag){if(!arguments.length){return F}F=+ag;return f};f.orient=function(ag){if(!arguments.length){return A}ag=ag.toLowerCase();if(ag=="horizontal"||ag=="vertical"){A=ag}return f};f.classPrefix=function(ag){if(!arguments.length){return H}H=ag;return f};f.title=function(ag){if(!arguments.length){return M}M=ag;return f};f.color=function(ag){if(!arguments.length){return Z}Z=ag;return f};f.colorRange=function(ag){if(!arguments.length){return z}z=ag;return f};f.colorDomainType=function(ag){if(!arguments.length){return ab}ab=ag;return f};f.sizeEncoding=function(ag){if(!arguments.length){return G}G=ag;return f};f.colorScheme=function(ag){if(!arguments.length){return w}w=ag;return f};f.legendWidth=function(ag){if(!arguments.length){return L}L=ag;return f};f.legendHeight=function(ag){if(!arguments.length){return g}g=ag;return f};f.titlePos=function(ag){if(!arguments.length){return D}D=ag;return f};f.formatType=function(ag){if(!arguments.length){return U}U=ag;return f};f.legendType=function(ag){if(!arguments.length){return b}b=ag;return f};f.bins=function(ag){if(!arguments.length){return ae}ae=ag;return f};f.domain=function(ag){if(!arguments.length){return t}t=ag;return f};f.margin=function(ag){if(!arguments.length){return m}m=ag;return f};f.colorReverse=function(ag){if(!arguments.length){return n}n=ag;return f};return f};advCharts.throttle=function(d,b,f){f=f||window;var a=false;var e=function(){if(a){return}a=true;requestAnimationFrame(function(){f.dispatchEvent(new CustomEvent(b));a=false})};f.addEventListener(d,e)};(function(){advCharts.tooltip=function(){var s=null,z=null,d=0,t=null,n=null,w={left:null,top:null},f=false,b=null,p=null,h=null,e=true,u=null,q=null,v=null,o=null;var g=function(H,M,B){if(!f){return}var E=B;var G=M;var I=B.select("#"+b).node(),L=d3.select("#"+t);var D,C;var O=B.attr("class");var F=document.getElementById(t).getBoundingClientRect();if(v!=="fixed"){F={top:0,left:0}}var K=H.top,N=H.left+d;var A=h.select(".advCharts.adv-tooltip.av-arrow-box").classed({first:false,last:false,left:false,right:false});B.select("#"+b).selectAll("#infoTable").remove();var J=B.select("#"+b).append("table").attr("id","infoTable").append("tbody").selectAll("tr").data(Object.keys(G).filter(function(P){return P!="fullContent"}));J.exit().remove();J.enter().append("tr").selectAll("td").data(function(P){return[{label:P},{value:G[P]}]}).enter().append("td").attr("class",function(P){if(Object.keys(P)[0]=="label"){return"advCharts adv-tooltip text-capitalize"}else{return" advCharts adv-tooltip value_"}}).text(function(Q){var P=Object.keys(Q)[0];return Q[P]});setTimeout(function(){D=parseInt(document.getElementById(b).offsetHeight);C=parseInt(document.getElementById(b).offsetWidth);if(D!==0&&C!==0){if(K+(D)>parseInt(L.style("height"))){K=K-D-(d);A.classed({last:true})}else{A.classed({first:true})}if((N+C)>(parseInt(L.style("width"))+F.left)){N=N-C-(d);A.classed({right:true})}else{A.classed({left:true})}B.style("top",K+"px").style("left",N+"px")}},20);B.style("display","inline-block").style("background",u?u:"#ffffff").style("opacity",0.9).style("pointer-events","none")};function a(){d3.select("#viewmoreContent").selectAll("ul").remove();d3.select("#viewmoreContent").append("ul").attr("class","dcg-ipaddress").selectAll("li").data(d3.merge(z.fullContent)).enter().append("li").text(function(A){return A});$("#myModal3").modal("show")}function m(){if(!t){return}h=d3.select("#"+t);p=h.select("#"+b?b:"tooltip_");if(p.node()===null){p=h.append("div").attr("class","advCharts adv-tooltip av-arrow-box left first option-btn").attr("id",b?b+"parent":"tooltip_").style("z-index",1).style("position",v).style("display","none");p.append("div").attr("class","advCharts adv-tooltip av-arrow-box-inner").attr("id",b?b:"tooltip_");p.selectAll("av-obtn-pane").data(o?[1]:[]).enter().append("div").attr("class","advCharts adv-tooltip av-obtn-pane").append("a").text("View More").on("click",function(){a()})}return m}m.content=function(A){if(!arguments.length){return s}s=A;return m};m.color=function(A){if(!arguments.length){return u}u=A;return m};m.element=function(A){if(!arguments.length){return s}b=A;return m};m.fullView=function(A){if(!arguments.length){return o}o=A;return m};m.tooltipElem=function(){return n};m.contentGenerator=function(A){if(!arguments.length){return contentGenerator}if(typeof A==="function"){contentGenerator=A}return m};m.positionFX=function(A){if(!arguments.length){return v}v=A;return m};m.data=function(A){if(!arguments.length){return z}z=A;return m};m.distance=function(A){if(!arguments.length){return d}d=A;return m};m.offset=function(A){if(!arguments.length){return e}e=A;return m};m.chartContainer=function(A){if(!arguments.length){return t}t=A;return m};m.position=function(A){if(!arguments.length){return w}w.left=(typeof A.left!=="undefined")?A.left:w.left;w.top=(typeof A.top!=="undefined")?A.top:w.top;return m};m.enabled=function(A){if(!arguments.length){return f}f=A;return m};m.show=function(){g(w,z,p);return m};m.hide=function(){if(p==null){return}p.style("display","none");p.selectAll("table").remove();return true};m.id=function(){return id};return m}})();advCharts.activityHeatmap=function(){var at={top:10,right:10,bottom:10,left:10},ao=null,p=null,o={eventType:"",time:"",eventCnt:""},ab=undefined,w="hour",aq=false,u=-1,a=[],aF="#4eb3d3",ae="#4eb3d3",R=1,T=d3.time.scale(),am=d3.scale.linear(),e=d3.scale.linear(),aa=d3.scale.linear(),I=d3.scale.linear(),aC=d3.scale.linear(),ai=d3.svg.axis().scale(T),f=["#3F51B5","#FF9800","#4CAF50","#9C27B0","#F44336","#9E9E9E","#E91E63","#FFC107","#2196F3","#00BCD4","#FF5722","#009688","#607D8B","#795548","#673AB7","#8BC34A","#CDDC39"],s=["GnBu",6],E="#F0F0F0",H=false,A=d3.scale.quantize(),B=window.innerWidth,aA=window.innerHeight,D=function(aJ){return aJ=="hour"?24:aJ=="min"?1:aJ=="day"?7*24:0},h=function(aJ){return aJ=="hour"?1000*60*60:aJ=="min"?1000*60:aJ=="day"?1000*60*60*24:1},aB=+new Date(),v=aB-D(w)*1000*60*60,aH=d3.dispatch("advChartsHeatmapEventClick","advChartsHeatmapEventDblClick"),z="rect",av=false,an=false,L="sequential",Z=false,aD=false,ap=undefined,af="",G=[],b,C,ay,V,al=[],q,ac,ad=false,m,ar=true,au=-1,aI=-1,J="1.5vmin",ag=true,Q=at.top*1.6,ax={13:"enter",32:"space",37:"left",38:"up",39:"right",40:"down"},ak;function az(aJ){aJ.each(function(aN){if((aN.length==0||o==undefined)&&m==undefined){return}try{if(aJ.attr("id")==undefined){aJ.attr("id","advChartsHeatmap")}C="#"+aJ.attr("id");d3.select(C).selectAll("div").remove();ac=(advCharts.tooltip().chartContainer(aJ.attr("id")).element("advChartsHeatmapTooltipBox").enabled(true).positionFX("fixed").offset(false))();aN=aN.filter(function(aT){return(aT[o.time]>=v&&aT[o.time]<=aB)||aT[o.time]==0});if(m!==undefined){aN=F(aN)}ay=aN;ak=d3.nest().key(function(aT){return aT[o.time]}).sortKeys(d3.ascending).rollup(function(aT){return d3.sum(aT,function(aU){return aU[o.eventCnt]})}).entries(aN);q=(aB-v)/h(w);for(var aO=0;aO<q;aO++){var aQ=true;for(var aM=0;aM<ak.length;aM++){var aK=(v+(aO+1)*h(w))-parseInt(ak[aM].key);if(aK>=0&&aK<h(w)){al[aO]={key:parseInt(ak[aM].key),values:ak[aM].values};aQ=false;break}}if(aQ){al[aO]={key:(v+(aO+1)*h(w)),values:0}}}var aR=function(aY,aV){var aX=aY.length,aT,aU=-1,aW=[];while(++aU<aX){if(aT=aV.call(aY,aY[aU],aU)){aW.push(aT)}}return aW.join(", ")};V=d3.nest().key(function(aT){return aT[o.eventType]}).key(function(aT){return +aT[o.time]}).sortKeys(d3.ascending).rollup(function(aW){if(ab){var aV={},aT=Object.values(ab),aX=Object.values(o);var aU=aT.filter(function(aY){return aX.indexOf(aY)<0});aV.eventCnt=d3.max(aW,function(aY){return aY[o.eventCnt]});aU.forEach(function(aZ){var aY=aR(aW,function(a0){return a0[aZ]});if(aY.length!==0){aV[aZ]=aY}});return aV}else{var aV={eventCnt:d3.max(aW,function(aY){return aY[o.eventCnt]})};return aV}}).entries(aN);var aL=1;V.forEach(function(aT){aT.values.forEach(function(aU){aU.values.id=+aU.key>0?aL:0;if(+aU.key>0){aL+=1}})});var aS=[];aS.push(d3.min(aN,function(aT){return +aT[o.eventCnt]}));aS.push(d3.max(aN,function(aT){return +aT[o.eventCnt]}));if(aS[0]==0){aS[0]=1}if(aS[1]==1){aS[1]=2}if(aS[1]<ap){s[1]=aS[1]<=3?3:aS[1]}if(L=="qualitative"){V.forEach(function(aU,aT){aU.eventColor=f[aT]})}if(L=="sequential"){colorRange=advCharts.colorbrewer[s[0]][s[1]+2];colorRange=colorRange.slice(2,s[1]+2)}else{if(L=="diverging"){colorRange=advCharts.colorbrewer[s[0]][11].slice(5-Math.floor(s[1]/2),5+Math.ceil(s[1]/2))}}colorRange=Z?colorRange.reverse():colorRange;A.domain(aS).range(colorRange);am.domain(d3.extent(aN,function(aT){return aT[o.eventCnt]})).range([0,1]);d3.select(C).selectAll("svg").remove();d3.select(b).selectAll("svg").remove();N(C);ah(b)}catch(aP){return}});if(ad){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",az.resize)}}function N(a0){try{var aX=d3.select(a0).node().getBoundingClientRect()}catch(bl){return}var a1=K(aX.width,aX.height),aT={top:a1.topMargin,right:aX.width*0.03,bottom:aX.height*0.03,left:aX.width*0.02},aJ=aX.width,aL=aX.height-aT.bottom;if((aL<=0||aL==undefined)||(aJ<=0||aJ==undefined)){return}var aS=aL*0.055;var a4=2;var aO=Math.min(((aL-(V.length-1)*a4-aT.top-9-aL*0.08)/V.length),60);var aZ=Math.min(aJ*0.2,210);var ba=10;var aV=ay.length/V.length;var bg=aJ-aT.left-aT.right-aZ-ba;var bi=(aO+a4)*V.length+9+a1.timeChartPosY;var aN=aO-a4;var aM=Math.min((bg*0.96/q)-1,aN/4);var a2=d3.extent(ay,function(bp){return +bp[o.eventCnt]});a2[0]=a2[0]==0?1:a2[0];T.domain([v,aB]).range([0,bg*0.96]);var bc=Math.min(aN/2,bg/(2*q));var bm=aI!==-1?Math.min(aI,bc):4;var aK=au!==-1?Math.min(au,bc):bc;aa.domain(a2).range([bm,aK]);var a3=aI!==-1?Math.min(aI,aN):2;var bk=au!==-1?Math.min(au,aN):aN;var bd=[aN,2];I.domain(a2).range(bd);var aR=ag?-bi+7:-1;ai.orient("top").tickSize(aR).tickPadding(10).tickFormat(W());if(w=="day"&&q<12){ai.ticks(q)}var bf=d3.select(a0).append("svg").attr("width",aJ).attr("height",aL);var aW=bf.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",aJ).attr("height",aL).style("fill","white");var aP=bf.append("g").attr("transform","translate("+aT.left+","+aT.top+")");var bh=0;var a7=aP.append("g").attr("class","advCharts adv-xAxis").attr("transform","translate("+(aT.left+aZ+ba+bh)+", "+(ar?-a1.axisPosY:Q)+")").call(ai);d3.selectAll(".advCharts.adv-xAxis text ").style("font-size",J).style("display",function(bq,bp){return w=="day"&&q>12?(bp%2===0?"initial":"none"):"initial"});var aU=aP.selectAll(".advCharts.adv-heatmapBlocks").data(V).enter().append("g").attr("class","advCharts adv-heatmapBlocks").attr("transform",function(bq,bp){return"translate("+0+","+bp*(aO+a4)+")"});var aQ=aU.append("rect").attr("class","advCharts adv-event-band").attr("x",10).attr("y",10).attr("width",aJ-aT.left-aT.right).attr("height",function(bq,bp){return bp===V.length?aO:aO+a4}).style("fill","rgba(255,255,255,0.5)");if(an){aQ.style("fill",function(bq,bp){return(bp+1)%2?E:"rgba(255,255,255,0.5)"});if(H){aQ.style("stroke","#dedede").style("stroke-width",function(bq,bp){return(bp+1)%2?"0.8px":"0px"}).style("stroke-dasharray","3 3")}aP.append("line").attr("x1",10).attr("y1",0).attr("x2",10).attr("y2",(aO+a4)*(V.length+1)).style("stroke","rgba(151,151,151,0.5)").style("stroke-width","0.8px");aP.append("line").attr("x1",10+aZ).attr("y1",0).attr("x2",10+aZ).attr("y2",(aO+a4)*(V.length+1)).style("stroke","rgba(151,151,151,0.2)").style("stroke-width","0.8px")}else{aU.append("rect").attr("class","advCharts adv-event-block").attr("x",10).attr("y",10).attr("width",aZ).attr("height",aO)}aU.append("text").attr("class","advCharts adv-event-type").attr("x",aZ*0.12).attr("y",function(bp){return 10+aO*(V.length>15?0.8:0.6)}).text(function(bp){return bp.key}).style("fill",function(bp){return an?"#4a4a4a":"#FFFFFF"}).style("font-family",function(bp){return an?"citrixsans-semibold":"citrixsans-regular"}).style("font-weight",function(bp){return an?900:200});var bj=aU.append("g").attr("transform","translate("+(aT.left+aZ+ba)+","+12+")");var a6;if(z=="circle"){a6=bj.selectAll("circle").data(function(bq){var bp=[];bq.values.forEach(function(br){bp.push(Object.assign({eventType:bq.key,time:br.key},br.values))});return bp}).enter().append("circle").attr("class","advCharts adv-event").attr("id",function(bp){return"heatmapel"+bp.id}).attr("tabindex",function(bp){return(bp.id==1?0:-1).toString()}).attr("aria-label",function(bp){return g(bp)}).attr("role","img").attr("cx",function(bq,bp){return T(bq.time)}).attr("cy",aN/2).attr("r",function(bp){if(bp.eventCnt==0){return 0}else{return av?aa(bp.eventCnt):aK}})}else{a6=bj.selectAll("rect").data(function(bq){var bp=[];bq.values.forEach(function(br){bp.push(Object.assign({eventType:bq.key,time:br.key},br.values))});return bp}).enter().append("rect").attr("class","advCharts adv-event").attr("id",function(bp){return"heatmapel"+bp.id}).attr("tabindex",function(bp){return(bp.id==1?0:-1).toString()}).attr("aria-label",function(bp){return g(bp)}).attr("role","img").attr("x",function(bq,bp){return T(bq.time)}).attr("y",function(bp){return av?I(bp.eventCnt):0}).attr("width",aM).attr("height",function(bp){if(bp.eventCnt==0){return 0}else{return av?aN-I(bp.eventCnt):bk}})}if(L!=="qualitative"){a6.style("fill",function(bp){return A(bp.eventCnt)})}else{a6.style("fill",function(bq,bp){return d3.select(this.parentNode).datum().eventColor}).style("opacity",function(bp){return am(bp.eventCnt)})}var be=0;dataKeys=[];V.forEach(function(bp){bp.values.forEach(function(bq){if(+bq.key!==0){dataKeys[be]=+bq.key;be+=1}})});a6.style("cursor","pointer").on("mousemove",function(bq){var br=d3.event.pageX-window.scrollX,bp=d3.event.pageY-window.scrollY;ac.position({left:br,top:bp}).data(M(bq)).show()}).on("click",function(br,bq){var bp={type:br.eventType,time:br.time,count:br.eventCnt};aH.advChartsHeatmapEventClick(bp)}).on("keydown",function(br,bq){switch(ax[d3.event.keyCode]){case"left":aE(br.id,dataKeys.length);d3.event.stopPropagation();return false;case"right":aG(br.id,dataKeys.length);d3.event.stopPropagation();return false;case"space":var bp={type:br.eventType,time:br.time,count:br.eventCnt};aH.advChartsHeatmapEventClick(bp);d3.event.stopPropagation();return false;case"enter":var bp={type:br.eventType,time:br.time,count:br.eventCnt};aH.advChartsHeatmapEventClick(bp);d3.event.stopPropagation();return false;default:return}}).on("focus",function(bs,bp){var br=d3.select(this).node().getBoundingClientRect();var bt=br.left+br.width,bq=br.top+br.height*0.5;ac.position({left:bt,top:bq}).data(M(bs)).show()}).on("blur",function(bp){ac.hide()});window.addEventListener("scroll",ac.hide);bf.on("mouseenter",ac.hide);d3.select(C).on("mouseleave",ac.hide);d3.selectAll(".advCharts.adv-event-block").on("mouseenter",ac.hide);if(aq){if(!an){d3.selectAll(".advCharts.adv-event-block").style("fill",function(bq,bp){if(u<1){return"#2b373f"}else{if(bp<u){return"#2b373f"}else{return"rgba(63,75,80,0.8)"}}})}if(u>0){var a8=(aO+a4)*u+9;var bb=aP.append("line").attr("x1",0).attr("y1",a8).attr("x2",aJ-aT.left-aT.right/2).attr("y2",a8).style("stroke","rgba(151,151,151,0.5)").style("stroke-width","0.8px")}if(a.length>0){if(u==-1&&a.length==1){var a9=aO*V.length/2+aT.top+10;n(bf,a[0],aT.left,a9,-90,"advCharts adv-heatmapLabel")}else{var a9=aO*u/2+aT.top+10;var aY=(aO+a4)*(V.length)+aT.top+10-aO*(V.length-u)/2;n(bf,a[0],aT.left,a9,-90,"advCharts adv-heatmapLabel");n(bf,a[1],aT.left,aY,-90,"advCharts adv-heatmapLabel")}}}if(ar){var a5="Total Events / Time";var bn=aT.top+bi+aS/2+a1.timeChartLabelPosY;var bo=aT.left+aZ*0.2-a5.length;n(bf,a5,bo,bn,0,"advCharts adv-heatmapLabel");S(aP,al,aS,aM+bg*0.96,(aT.left+aZ+ba+bh),bi)}}function ah(){if(aD&b!==undefined){var aM=d3.nest().key(function(aP){return aP[o.eventCnt]}).rollup(function(aP){return aP.length}).entries(ay);var aL=[];aL.push(d3.min(ay,function(aP){return +aP[o.eventCnt]}));aL.push(d3.max(ay,function(aP){return +aP[o.eventCnt]}));if(aL[0]==0){aL[0]=1}if(aL[1]==1){aL[1]=2}if(ap!==undefined&&typeof(ap)!=="number"){var aK=advCharts.dataBins().bins(ap).range(aL).size(ay.length)(aM)}else{var aK=[],aN=3,aO=Math.round(((aL[1]-aL[0])%2==0?aL[1]:(aL[1]-aL[0]))/2);if(aO<1||(aL[1]==2)){aO=1;aN=aL[1];aK.push({x2:aL[0]});aK.push({x2:aL[1]})}else{aK.push({x2:aL[0]});aK.push({x2:aO});aK.push({x2:aL[1]})}}var aJ=advCharts.legend().shape(z).shapePadding(2).sizeEncoding(av).color(s).title(af).classPrefix("advCharts heatmaplegendLinear").shapeRadius(8).shapePadding(5).colorScheme(L).margin({top:25,right:10,bottom:20,left:10}).colorReverse(Z).bins(false).domain(aL);d3.select(b).datum(aK).call(aJ)}}function F(aL){var aK=[];var aJ=false;m.forEach(function(aM){aJ=false;aL.forEach(function(aQ,aP){if(aQ[o.eventType]==aM){var aO=aQ;aK.push(aO);aJ=true}});if(!aJ){var aN={};aN[o.eventType]=aM;aN[o.time]=0;aN[o.eventCnt]=0;aK.push(aN)}});return aK}function M(aK){var aL={};if(ab){var aJ=Object.keys(ab);aJ.forEach(function(aM){if(ab[aM]===o.eventType){aL[aM]=aK.eventType}else{if(ab[aM]===o.time){aL[aM]=W(new Date(+aK.time))}else{if(ab[aM]===o.eventCnt){aL[aM]=d(aK.eventCnt,0)}else{if(aK[ab[aM]]!==undefined){var aN=aK[ab[aM]];aL[aM]=aN.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}}}}})}else{aL={Type:aK.eventType,Time:W(new Date(+aK.time)),Events:d(aK.eventCnt,0)}}return aL}function aj(aN,aK){var aM=Math.floor((aK-aN)/h("day")),aJ=Math.floor((aK-aN)/h("hour")-24*aM),aL=Math.floor((aK-aN)/h("min")-aJ*60-aM*24*60);return{days:aM,hours:aJ,min:aL}}function S(aR,aQ,aS,aN,aL,aK){var aO=aR.append("g").attr("class","advCharts adv-timeLine").attr("transform","translate("+aL+", "+aK+")");var aT=d3.svg.line().x(P).y(O);var aM=d3.svg.area().x(P).y1(O);e.range([0,aN]);if(w=="day"&&q<=9){e.domain([v,aB])}else{e.domain([v+h(w),aB])}aC.domain([0,d3.max(aQ,function(aU){return aU.values})]).range([aS,0]);var aJ=aO.append("path").datum(aQ).attr("class","advCharts adv-timeLine line").attr("d",aT).style("stroke",aF).style("stroke-width",R).style("fill","none");var aP=aO.append("path").datum(aQ).attr("class","advCharts adv-timeLine area").attr("d",aM.y0(aC.range()[0])).style("fill",ae)}function K(aM,aJ){var aK=aJ*0.05,aL=0,aN=7,aO=5;if(aA<=600&B<=1024){aK=aJ*0.05;aL=0;aN=7;aO=5}else{if(aA<=665&B<=1280){aK=aJ*0.05;aL=0;aN=7;aO=5}else{if(aA<=800&B<=1280){aK=aJ*0.05;aL=0;aN=7;aO=5}else{if(aA<=768&B<=1366){aK=aJ*0.05;aL=0;aN=7;aO=5}else{if(aA<=768&B<=1440){aK=aJ*0.05;aL=0;aN=7;aO=5}else{if(aA<=1000&B<=1920){aK=aJ*0.05;aL=0;aN=7;aO=5}else{if(aA<=1080&B<=1920){aK=aJ*0.15;aL=40;aN=15;aO=8}else{if(aA<=1200&B<=1920){aK=aJ*0.15;aL=40;aN=15;aO=8}}}}}}}}return{topMargin:aK,axisPosY:aL,timeChartPosY:aN,timeChartLabelPosY:aO}}function n(aL,aN,aO,aM,aK,aJ){if(aK===-90){aM=aM+aN.length*2.5}aL.append("text").attr("class",aJ).attr("text-align","center").attr("transform","translate("+aO+","+aM+")  rotate("+aK+")").text(aN)}function W(aJ){var aK,aJ=aJ||-1;if(w==="hour"){aK=d3.time.format("%-I %-p")}else{if(w==="min"){aK=d3.time.format("%-H:%-M")}else{if(w==="day"){aK=d3.time.format("%-d/%-m")}}}if(aJ===-1){return aK}else{return aK(aJ)}}var d=function(aL,aM){var aK=d3.format("."+aM+"f");if(aL<1000){return(U(aL)?aL:aK(aL))}else{if(aL<10000000){var aN=aL/1000;return(U(aN)?aN:aK(aN))+"K"}else{if(aL<1000000000){var aN=aL/1000000;var aJ=(U(aN)?aN:aK(aN));return(U(aN)?aN:aK(aN))+"M"}else{if(aL<1000000000000){var aN=aL/1000000000;return(U(aN)?aN:aK(aN))+"B"}}}}};var U=function(aK){var aJ=typeof aK==="number"&&isFinite(aK)&&Math.floor(aK)===aK;return aJ};function aG(aK,aJ){if(aK===aJ){aw(1)}else{aw(aK+1)}}function aE(aK,aJ){if(aK===1){aw(aJ)}else{aw(aK-1)}}function aw(aK){var aJ="#heatmapel"+aK;if(d3.select(aJ).node()){d3.select(aJ).node().focus()}}function g(aJ){return"Type: "+aJ.eventType+", Time: "+W(new Date(+aJ.time))+", Events: "+d(aJ.eventCnt,0)}function P(aJ){return e(aJ.key)}function O(aJ){return aC(aJ.values)}function t(aJ){if(aJ!==undefined&&V!==undefined&&ay!==undefined&&al!==undefined){d3.select(C).selectAll("svg").remove();d3.select(b).selectAll("svg").remove();N(aJ);ah()}}az.margin=function(aJ){if(!arguments.length){return at}at=aJ;return az};az.width=function(aJ){if(!arguments.length){return ao}ao=aJ;return az};az.height=function(aJ){if(!arguments.length){return p}p=aJ;return az};az.columnNames=function(aJ){if(!arguments.length){return o}o=aJ;return az};az.tooltipColumns=function(aJ){if(!arguments.length){return ab}ab=aJ;return az};az.timeLevel=function(aJ){if(!arguments.length){return w}w=aJ;return az};az.partition=function(aJ){if(!arguments.length){return aq}aq=aJ;return az};az.partitionLevel=function(aJ){if(!arguments.length){return u}u=aJ;return az};az.partitionNames=function(aJ){if(!arguments.length){return a}a=aJ;return az};az.startTime=function(aJ){if(!arguments.length){return v}v=aJ;return az};az.endTime=function(aJ){if(!arguments.length){return aB}aB=aJ;return az};az.shape=function(aJ){if(!arguments.length){return z}z=aJ;return az};az.sizeEncoding=function(aJ){if(!arguments.length){return av}av=aJ;return az};az.bands=function(aJ){if(!arguments.length){return an}an=aJ;return az};az.colorScheme=function(aJ){if(!arguments.length){return L}L=aJ;return az};az.colorbrewerRange=function(aJ){if(!arguments.length){return s}s=aJ;return az};az.lineColor=function(aJ){if(!arguments.length){return aF}aF=aJ;return az};az.fillColor=function(aJ){if(!arguments.length){return ae}ae=aJ;return az};az.legend=function(aJ){if(!arguments.length){return aD}aD=aJ;return az};az.legendParentDiv=function(aJ){if(!arguments.length){return b}b=aJ;return az};az.legendTitle=function(aJ){if(!arguments.length){return af}af=aJ;return az};az.bins=function(aJ){if(!arguments.length){return ap}ap=aJ;return az};az.colorReverse=function(aJ){if(!arguments.length){return Z}Z=aJ;return az};az.autoResize=function(aJ){if(!arguments.length){return ad}ad=aJ;return az};az.eventTypes=function(aJ){if(!arguments.length){return m}m=aJ;return az};az.showTimeChart=function(aJ){if(!arguments.length){return ar}ar=aJ;return az};az.shapeMinSize=function(aJ){if(!arguments.length){return aI}aI=aJ;return az};az.shapeMaxSize=function(aJ){if(!arguments.length){return au}au=aJ;return az};az.bandColor=function(aJ){if(!arguments.length){return E}E=aJ;return az};az.bandStroke=function(aJ){if(!arguments.length){return H}H=aJ;return az};az.axisLines=function(aJ){if(!arguments.length){return ag}ag=aJ;return az};az.axisFont=function(aJ){if(!arguments.length){return J}J=aJ;return az};az.axisTransY=function(aJ){if(!arguments.length){return Q}Q=aJ;return az};az.resize=function(){t(C)};az.dispatch=aH;return az};advCharts.activityHeatmapRadial=function(){var D={top:10,right:10,bottom:10,left:10},F=null,E=null,o={},K="hour",d="#C9E3F3",s="#C9E3F3",a=1,P=d3.scale.linear(),m=d3.scale.linear(),J=d3.scale.linear(),G=d3.scale.linear(),L=d3.time.scale(),w=d3.svg.axis().scale(L),n=["#3F51B5","#FF9800","#F44336","#9C27B0","#00BCD4","#2196F3","#FFC107","#E91E63","#2196F3","#00BCD4","#FF5722","#009688","#607D8B","#795548","#673AB7","#8BC34A","#CDDC39","#4CAF50","#9E9E9E"],B=d3.svg.area.radial(),O=d3.dispatch("advChartsRadialHeatmapEventClick","advChartsRadialHeatmapEventDblClick"),I=window.innerWidth,M=window.innerHeight;function C(Q){Q.each(function(aB){if(aB.length==0){return}try{var ab=Q.node().getBoundingClientRect()}catch(az){return}try{D={top:ab.height*0.05,right:ab.width*0.03,bottom:ab.height*0.03,left:ab.width*0.02};E=ab.height-D.top-D.bottom;F=ab.width-D.left-D.right;if((E<=0||E==undefined)||(F<=0||F==undefined)){return}var ay=0;var aF=d3.nest().key(function(aG){return aG[o.time]}).sortKeys(d3.ascending).rollup(function(aG){return{"1":d3.sum(aG,function(aH){return aH[o.trend1]}),"2":d3.sum(aG,function(aH){return aH[o.trend2]})}}).entries(aB);aB.sort(N({key:o.eventType,string:true},true));var ax=d3.nest().key(function(aG){return aG[o.eventType]}).sortKeys(d3.ascending).entries(aB);var R=E*(0.25-0.018*(ax.length-5)),an=1.1*R,aa=0.15*R,au=0.05*R,at=0.2*R;ax.forEach(function(aH,aG){aH.eventColor=n[aG];aH.innerRadius=R+aG*aa;aH.outerRadius=an+aG*aa;aH.scale=d3.scale.linear().domain(d3.extent(aH.values,function(aI){return aI[o.eventCnt]})).range([0,1])});var ak=-108*Math.PI/180,ah=108*Math.PI/180,ar=1*(Math.PI/180),ap=(ah-ak-ar*(aF.length-1)),S=ap/(aF.length),ac=R+aa*ax.length+au,aA=ac+2*at;P.domain(d3.extent(aB,function(aG){return aG[o.time]})).range([ak,ah-S]);m.domain(d3.extent(aB,function(aG){return aG[o.eventCnt]})).range([0,1]);J.domain(d3.extent(aB,function(aG){return aG[o.time]})).range([ak,ah]);G.domain([0,Math.max(d3.max(aF,function(aG){return aG.values["1"]}),d3.max(aF,function(aG){return aG.values["2"]}))]).range([ac,aA]);L.domain(d3.extent(aB,function(aG){return aG[o.time]})).range([0,2*aA]);d3.select(this).selectAll("svg").remove();var aj=d3.select(this).attr("id","advChartsRadialHeatmap").append("svg").attr("width",F+D.left+D.right).attr("height",E+D.top+D.bottom);var W=aj.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",F+D.left+D.right).attr("height",E+D.top+D.bottom).style("fill","white");var aq=(advCharts.tooltip().chartContainer("advChartsRadialHeatmap").element("advChartsRadialHeatmapTooltipBox").enabled(true).positionFX("fixed").offset(false))();var T=aj.append("g").attr("transform","translate("+F/2+","+E*0.73+")");var aE=T.selectAll(".advCharts.adv-heatmapRadial.adv-ringGroup").data(ax).enter().append("g").attr("class","advCharts adv-heatmapRadial adv-ringGroup");var ae=aE.append("path").attr("class","advCharts adv-heatmapRadial adv-rings").attr("d",d3.svg.arc().innerRadius(function(aG){return aG.innerRadius}).outerRadius(function(aG){return aG.outerRadius}).startAngle(ak).endAngle(ah));var af=T.selectAll(".advCharts.adv-heatmapRadial.adv-timeRingGroup").data([1,2,3]).enter().append("g").attr("class","advCharts adv-heatmapRadial adv-timeRingGroup");var U=af.append("path").attr("class","advCharts adv-heatmapRadial adv-timeRings").attr("d",d3.svg.arc().innerRadius(function(aH,aG){return ac+aG*at}).outerRadius(function(aH,aG){return ac+1+aG*at}).startAngle(ak).endAngle(ah));var V=d3.select(af[0][0]).append("path").attr("class","advCharts adv-heatmapRadial adv-time2").datum(aF).attr("d",d3.svg.area.radial().interpolate("linear").innerRadius(ac).outerRadius(function(aH,aG){return G(aH.values["2"])}).angle(function(aH,aG){return J(aH.key)}));var Z=d3.select(af[0][0]).append("path").attr("class","advCharts adv-heatmapRadial adv-time1").datum(aF).attr("d",d3.svg.area.radial().interpolate("linear").innerRadius(ac).outerRadius(function(aH,aG){return G(aH.values["1"])}).angle(function(aH,aG){return J(aH.key)}));var ad=d3.select(af[0][2]).append("g").attr("class","advCharts adv-heatmapRadial adv-timeAxis").selectAll("g").data(aF).enter().append("g").attr("text-anchor","middle").attr("transform",function(aG){return"rotate("+((J(aG.key)+S/2)*180/Math.PI-90-4)+")translate("+(aA)+",0)"});var ag=t();ad.append("line").attr("x2",function(aG){return ag.axisLineLength}).attr("stroke","#C1C1C1");ad.append("text").attr("class","advCharts adv-heatmapRadial adv-timeAxisLabels").attr("transform",function(aG){return(J(aG.key)+S/2+Math.PI)%(2*Math.PI)<Math.PI?"rotate(180)translate(-"+ag.axisValuePosX+",3)":"rotate(0)translate("+ag.axisValuePosX+",3)"}).text(function(aG){return b(new Date(+aG.key))}).on("click",function(aH){var aG=[d3.event.pageX,d3.event.pageY];p(this,this.parentNode,aB,R-aA,aH,S,aG,ag,aq)});window.addEventListener("scroll",function(){aq.hide()});var ai=aE.selectAll(".advCharts.adv-heatmapRadial.adv-event").data(function(aG){return aG.values}).enter().append("path").attr("class","advCharts adv-heatmapRadial adv-event").attr("d",d3.svg.arc().innerRadius(function(aH,aG){return d3.select(this.parentNode).datum().innerRadius}).outerRadius(function(aH,aG){return d3.select(this.parentNode).datum().outerRadius}).startAngle(function(aH,aG){return P(aH[o.time])}).endAngle(function(aG){return P(aG[o.time])+S})).style("fill",function(aH,aG){return d3.select(this.parentNode).datum().eventColor}).style("opacity",function(aG){return d3.select(this.parentNode).datum().scale(aG[o.eventCnt])}).on("click",function(aI,aH){var aG={type:aI[o.eventType],time:aI[o.time],count:aI[o.eventCnt]};O.advChartsRadialHeatmapEventClick(aG)});var aw=q(F,E);w.orient("bottom").tickSize(-E*0.04).tickPadding(7).tickFormat(b());var av=aj.append("g").attr("transform","translate("+(F/2-aA)+","+E*0.98+")");var ao=av.append("rect").attr("width",aA*2).attr("height",E*0.04).style("fill","#F0F0F0").style("stroke","#979797").style("stroke-width",0.3);av.append("g").attr("class","advCharts adv-heatmapRadial adv-xAxis").attr("transform","translate("+aA*2*0.02+","+E*0.04+")").call(w);var aD=aj.append("g").attr("transform","translate("+(F*0.5-aw.datePosX)+","+E*0.92+")");var am=d3.time.format("%d %b %y");u(aD,am(new Date()),0,0,0,"advCharts adv-heatmapRadial adv-dateLabel");var aC=aj.append("g").attr("transform","translate("+(F*0.5-aw.timePosX)+","+E*0.7+")");var al=d3.time.format("%I:%M %p");u(aC,al(new Date()),0,0,0,"advCharts adv-heatmapRadial adv-timeLabel")}catch(az){return}})}function A(Q){return Q.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(Q){return Q.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function z(S,R){var Q=[];S.forEach(function(U,T){if(new Date(U[o.time]).getTime()===R){Q.push({time:R,eventType:h(U[o.eventType]),eventCount:+U[o.eventCnt]})}});return Q}function t(){var R=4,Q=20,S=0.5,U=22,T=3;if(M<=600&&I<=1024){R=4;Q=20;S=0.5;U=22;T=3}else{if(M<=665&&I<=1280){R=4;Q=20;S=0.5;U=22;T=3}else{if(M<=800&&I<=1280){R=4;Q=30;S=0.55;U=25;T=4}else{if(M<=768&&I<=1366){R=4;Q=30;S=0.6;U=25;T=4}else{if(M<=900&&I<=1440){R=4;Q=30;S=0.65;U=30;T=4}else{if(M<=1080&&I<=1920){R=6;Q=35;S=0.9;U=40;T=4}else{if(M<=1200&&I<=1920){R=8;Q=45;S=1;U=45;T=4}}}}}}}return{axisLineLength:R,axisValuePosX:Q,badgeScale:S,posX:U,posY:T}}function q(S,Q){var V=S*0.178,T=Q*0.98,R=8*3,U=9*3.5;if(M<=600&&I<=1024){V=S*0.174;T=Q*0.98;R=8*3.5;U=9*3.7}else{if(M<=665&&I<=1280){V=S*0.14;T=Q*0.98;R=8*5;U=9*3.9}else{if(M<=800&&I<=1280){V=S*0.14;T=Q*0.98;R=8*5;U=9*3.6}else{if(M<=768&&I<=1366){V=S*0.178;T=Q*0.98;R=8*6;U=9*4}else{if(M<=900&&I<=1440){V=S*0.178;T=Q*0.98;R=8*3;U=9*3.5}else{if(M<=1000&&I<=1920){V=S*0.16;T=Q*0.98;R=8*7.5;U=9*5}else{if(M<=1080&&I<=1920){V=S*0.17;T=Q*0.98;R=8*8;U=9*6}else{if(M<=1200&&I<=1920){V=S*0.13;T=Q;R=8*10;U=9*7}}}}}}}}return{gPosX:V,gPosY:T,timePosX:R,datePosX:U}}function u(S,U,V,T,R,Q){if(R===-90){T=T+U.length*2.5}S.append("text").attr("class",Q).attr("text-align","center").attr("transform","translate("+V+","+T+")  rotate("+R+")").text(U)}function b(Q){var R;Q=Q||-1;if(K==="hour"){R=d3.time.format("%I %p")}else{if(K==="min"){R=d3.time.format("%M:%S")}else{if(K==="day"){R=d3.time.format("%d/%m")}}}if(Q===-1){return R}else{return R(Q)}}function v(Q){d3.select("#advChartsRadialHeatmapTooltip").remove();Q.hide()}function p(af,ao,al,ag,aa,ad,ah,T,S){var am=T.badgeScale,V=T.posX,U=T.posY,ak=b(new Date(+aa.key)),ac=aa.values["1"],ab=aa.values["2"];var Z=z(al,+aa.key);var aj="M38.4626119,60.6795106 C38.4626119,62.8567921 37.6666739,65.5596242 36.7185266,66.6107256 L26.1366975,78.5492352 C25.1885503,79.6013377 23.5966742,79.6013377 22.6485269,78.5492352 L12.0666978,66.6107256 C11.1185506,65.5596242 10.3226125,62.8567921 10.3226125,60.6795106 L10.3226125,6.97423606 C10.3226125,4.79595357 11.2333396,2.99406548 12.3331904,2.99406548 L36.4161309,2.99406548 C37.5144647,2.99806967 38.4626119,4.79595357 38.4626119,6.97423606 L38.4626119,60.6795106 Z";S.hide();d3.select("#advChartsRadialHeatmapTooltip").remove();var an=d3.select(ao).append("g").attr("id","advChartsRadialHeatmapTooltip");var Q=an.append("line").attr("x2",ag).style("stroke","#FFBE3C").style("stroke-width","0.8px");var R=an.append("path").attr("class","advCharts adv-heatmapRadial adv-tooltipBadge").attr("d",aj).style("fill","#4990E2").style("stroke","#1864BC").style("stroke-width","2").attr("transform",function(ap){return"scale("+am+") translate("+84+","+-24+") rotate("+90+")"}).on("click",function(){v(S)});var ae=an.append("text").attr("class","advCharts adv-heatmapRadial adv-toolTipLabels").attr("transform",function(ap){return(J(aa.key)+ad/2+Math.PI)%(2*Math.PI)<Math.PI?"rotate(180) translate("+-V+","+U+")":"rotate(0) translate("+V+","+U+")"}).text(ak).on("click",function(){v(S)});var W={"Bytes Out":H(ac),"Bytes In":H(ab)};Z.forEach(function(ap){W[ap.eventType]=g(ap.eventCount)});var ai=d3.select(af).node().getBoundingClientRect();V=ai.left+ai.width;U=ai.top+ai.height*0.5;S.position({left:V,top:U}).data(W).show()}var H=function(R){var Q=d3.format(".0f");if(R<1024){return Q(R)+" B"}else{if(R<1024*1024){return Q(R/1024)+" KB"}else{if(R<1024*1024*1024){return Q(R/1024/1024)+" MB"}else{if(R<1024*1024*1024*1024){return Q(R/1024/1024/1024)+" GB"}else{return Q(R/1024/1024/1024/1024)+" TB"}}}}};var g=function(Q){if(Math.abs(Q)<1000){return parseFloat(Q)}if(Math.abs(Q)<10000000){return parseFloat(Q/1000).toFixed(1)+"K"}if(Math.abs(Q)<1000000000){return parseFloat(Q/1000000).toFixed(1)+"M"}if(Math.abs(Q)<1000000000000){return parseFloat(Q/1000000000).toFixed(1)+"B"}};function N(Q,R){Q=Q&&Q.constructor===Object?Q:{};return function(T,S){if(Q.string||Q.key){T=Q.key?T[Q.key]:T;T=Q.string?String(T).toLowerCase():T;S=Q.key?S[Q.key]:S;S=Q.string?String(S).toLowerCase():S;if(Q.key&&(!S||!T)){return !T&&!S?1:!T?1:-1}}return R?~~(Q.string?S.localeCompare(T):T<S):~~(Q.string?T.localeCompare(S):T>S)}}function f(Q){return J(Q.key)}function e(Q){return G(Q.values)}C.margin=function(Q){if(!arguments.length){return D}D=Q;return C};C.width=function(Q){if(!arguments.length){return F}F=Q;return C};C.height=function(Q){if(!arguments.length){return E}E=Q;return C};C.columnNames=function(Q){if(!arguments.length){return o}o=Q;return C};C.timeLevel=function(Q){if(!arguments.length){return K}K=Q;return C};C.dispatch=O;return C};advCharts.colBarChart=function(){var m={top:25,right:0,bottom:0,left:5},o=null,n=null,e=null,f="rgba(51,192,205,1)",g="#EF5350",D=true,C="rgba(155,155,155,0.1)",t=8,A=true,s="right",q="top",v="percent",z=100,F=d3.scale.linear(),d=d3.scale.linear(),p=function(G){return G[e.count]},w=function(G){return G[e.category]},b=false,u;function h(G){u=G;u.each(function(H){try{E(this,H)}catch(I){return}});if(b){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",h.resize)}}function E(Q,L){if(L.length==0){return}try{var R=d3.select(Q).node().getBoundingClientRect()}catch(N){return}var I=R.width;var T=R.height;if((T<=0||T==undefined)||(I<=0||I==undefined)){return}var H=I*0.3,K=I*0.05,J=Math.max(L.length,5);t=T/J-T*0.11;m={top:(1/J)*T*0.65,right:10,bottom:0,left:5};L.sort(B({key:e.count,string:false},true));F.domain([0,z]).range([0,I-m.left-m.right-K-H]);d.domain([0,L.length]).range([0,T-m.top-m.bottom]);d3.select(Q).selectAll("svg").remove();var P=d3.select(Q).append("svg").attr("width",I).attr("height",T);var G=P.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",I).attr("height",T).style("fill","white");var M=P.append("g").attr("transform","translate("+m.left+","+m.top+")");var O=M.append("g").attr("transform","translate("+H+","+0+")");var S=O.selectAll(".advCharts.adv-colbar").data(L).enter().append("rect").attr("class","advCharts adv-colbar").attr("x",0).attr("y",function(V,U){return d(U)}).attr("width",function(U){return U[e.count]<0?F(-U[e.count]):F(U[e.count])}).attr("height",t).style("fill",function(U){return U[e.count]<0?g:f});if(D){O.selectAll(".advCharts.adv-colBackBar").data(L).enter().append("rect").attr("class","advCharts adv-colBackBar").attr("x",0).attr("y",function(V,U){return d(U)}).attr("width",F(z)).attr("height",t).style("fill",C)}O.selectAll(".advCharts.colBar.dataLabel").data(L).enter().append("text").attr("x",F(z)-18).attr("y",function(V,U){return d(U)+t*0.85}).attr("class","advCharts colBar dataLabel").attr("text-align","end").text(a(v));M.selectAll(".advCharts.colBar.yAxisLabel").data(L).enter().append("text").attr("x",5).attr("y",function(V,U){return d(U)+t*0.85}).attr("class","advCharts colBar yAxisLabel").attr("text-align","end").text(function(U){return U[e.category]});M.append("line").attr("x1",I*0.35).attr("y1",-m.top).attr("x2",I*0.55).attr("y2",-m.top).style("stroke","#000")}function B(G,H){G=G&&G.constructor===Object?G:{};return function(J,I){if(G.string||G.key){J=G.key?J[G.key]:J;J=G.string?String(J).toLowerCase():J;I=G.key?I[G.key]:I;I=G.string?String(I).toLowerCase():I;if(G.key&&(!I||!J)){return !J&&!I?1:!J?1:-1}}return H?~~(G.string?I.localeCompare(J):J<I):~~(G.string?J.localeCompare(I):J>I)}}function a(G){var I,H;if(G==="percent"){I=d3.format("%");H=function(J){return I(J[e.count]/z)};return H}else{if(G==="byMax"){H=function(J){return J[e.count].toString()+"/"+z.toString()};return H}else{if(G==="value"){H=function(J){return J[e.count]};return H}else{I=d3.format(G);H=function(J){return I(J[e.count])};return H}}}}h.margin=function(G){if(!arguments.length){return m}m=G;return h};h.width=function(G){if(!arguments.length){return o}o=G;return h};h.height=function(G){if(!arguments.length){return n}n=G;return h};h.fillColor=function(G){if(!arguments.length){return f}f=G;return h};h.fillBack=function(G){if(!arguments.length){return D}D=G;return h};h.fillBackColor=function(G){if(!arguments.length){return C}C=G;return h};h.barHeight=function(G){if(!arguments.length){return t}t=G;return h};h.numberFormat=function(G){if(!arguments.length){return v}v=G;return h};h.maxValue=function(G){if(!arguments.length){return z}z=G;return h};h.labels=function(G){if(!arguments.length){return A}A=G;return h};h.lablePosX=function(G){if(!arguments.length){return s}s=G;return h};h.lablePosY=function(G){if(!arguments.length){return q}q=G;return h};h.columnNames=function(G){if(!arguments.length){return e}e=G;return h};h.autoResize=function(G){if(!arguments.length){return b}b=G;return h};h.resize=function(){if(u!==undefined){u.each(function(G){d3.select(this).selectAll("svg").remove();if(G.length==0){return}E(this,G)})}};return h};advCharts.heatmapGrid=function(){var aA={top:10,right:10,bottom:10,left:20},ad=d3.scale.ordinal(),ao=d3.scale.linear(),M=d3.scale.quantize(),ay=d3.scale.threshold(),n,I="rect",Q=15,J=15,N=10,P=1,S=[5],az=[],af="",t="",aU=d3.format(".0f"),aO=5,av="middle",au="bottom",ai=2,f=2,aL="vertical",Z=0,F=["GnBu",5],aM=function(aV){return aV<0?"#75909A":-1},aT=d3.dispatch("advChartsHeatmapGridBlockClick"),aC=false,T="sequential",ah=false,ag="left",g,o=undefined,an=undefined,aw=5,d=undefined,L,aN=false,s,am,ak=false,u,aT=d3.dispatch("advChartsHeatmapGridCellSelect","advChartsHeatmapGridCellDeSelect","advChartsHeatmapGridCellDblClick"),aj=false,ax,C,at,R,aB,O,aE,aQ,a,E,aD,ap,B,aH=true,w=0.1,ab,aG={13:"enter",32:"space",37:"left",38:"up",39:"right",40:"down"},aq="M776.31563,522.415897 L764.345613,522.054653 L760.867971,530.375759 C760.61179,531.052194 759.924801,531.434068 759.243089,531.339559 C758.456314,531.282949 757.83361,530.627623 757.83361,529.825017 L757.83361,516.611512 L749.489476,538.340418 C749.40744,538.551024 749.284626,538.731887 749.133028,538.883965 C749.125352,538.889242 749.120555,538.894039 749.112879,538.899316 C749.09273,538.922824 749.069223,538.942973 749.043796,538.963122 C748.779459,539.191958 748.431167,539.333002 748.052172,539.333002 C747.214064,539.333002 746.532353,538.650811 746.532353,537.812223 L746.532353,524.027347 L745.599736,526.257183 C745.343075,526.936017 744.654167,527.320769 743.961901,527.220983 L730.712415,526.270136 C730.319987,526.270136 730,525.952068 730,525.557241C730,525.165773 730.319987,524.847704 730.712415,524.847704 L743.162172,524.219723 L746.624463,515.926442 C746.924301,515.142065 747.800788,514.747239 748.585164,515.047077 C749.089851,515.238973 749.430947,515.672179 749.533132,516.164393 C749.55616,516.277132 749.571511,516.39275 749.571511,516.510286 L749.571511,529.641276 L757.892618,507.974736 C758.161753,507.269996 758.901993,506.882845 759.620645,507.031565 C760.332101,507.154379 760.876127,507.777082 760.876127,508.525478 L760.876127,522.478744 L761.890779,520.044538 C762.136406,519.403604 762.772543,519.02221 763.42547,519.070664 L776.31563,519.050035 C777.246327,519.050035 778,519.803708 778,520.731047 C777.974094,521.662224 777.246327,522.415897 776.31563,522.415897 Z",aR="M807.1,534.25 C807.1,533.861109 807.294442,533.666667 807.683333,533.666667 L825.766667,533.666667 L825.766667,529 L835.1,536 L825.766667,543 L825.766667,538.333333 L807.683333,538.333333 C807.294442,538.333333 807.1,538.138891 807.1,537.75 L807.1,534.25 Z M835.1,523.75 C835.1,524.138891 834.905557,524.333333 834.516667,524.333333 L816.433333,524.333333 L816.433333,529 L807.1,522 L816.433333,515 L816.433333,519.666667 L834.516667,519.666667 C834.905557,519.666667 835.1,519.861109 835.1,520.25 L835.1,523.75 Z";function aI(aV){s=aV;s.each(function(aW){try{if(s.attr("id")==undefined){s.attr("id","advChartsHeatmap")}heatmapGridTooltip=(advCharts.tooltip().chartContainer(s.attr("id")).element("advChartsHeatmapTooltipBox").enabled(true).positionFX("fixed").offset(false))();aW.sort(function(aZ,aY){return aY[an.color]-aZ[an.color]});am=aW;V(this,am);if(aj){G(am)}else{al()}}catch(aX){return}});if(ak){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",aI.resize)}}function V(bk,bj){try{var a5=d3.select(bk).node().getBoundingClientRect()}catch(bg){return}A(a5);if((C<=0||C==undefined)||(ax<=0||ax==undefined)){return}var aW=[],a3=bj.length,bd=1,aX;while(a3>0){var bf=0,a9=[];while(bf<aD&&a3>0){aX=bj[bj.length-a3];aX.id=bd;bd+=1;a9.push(aX);bf+=1;a3-=1}aW.push(a9)}d3.select(bk).selectAll("svg").remove();var a8=d3.select(bk).append("svg").attr("width",ax+aA.left+aA.right).attr("height",C+aA.bottom+aA.top);var a1=a8.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",ax+aA.left+aA.right).attr("height",C+aA.bottom+aA.top).style("fill","white");var bc=a8.append("g").attr("transform","translate("+aA.left+","+aA.top+")");var a2=bc.selectAll(".advCharts.adv-heatmapGridRows").data(aW).enter().append("g").attr("class","advCharts adv-heatmapGridRows").attr("transform",function(bm,bl){return"translate("+0+","+bl*E+")"});if(I=="circle"){var a0=a2.selectAll("circle").data(function(bl){return bl}).enter().append("circle").attr("class","advCharts adv-heatmapGrid cellShape").attr("id",function(bm,bl){return"heatmapgridel"+bm.id}).attr("cy",aQ/2).attr("r",aQ/2).attr("cx",function(bm,bl){return bl*aQ+bl*R+aQ/2})}else{if(I=="rect"){if(!aj){var aV=a2.selectAll(".advCharts.adv-heatmapGrid.cellShape").data(function(bl){return bl}).enter().append("g").attr("id",function(bm,bl){return"heatmapgridel"+bm.id}).attr("transform",function(bm,bl){return"translate("+(bl*aQ+bl*R)+","+0+")"});var a0=aV.append("rect").attr("class","advCharts adv-heatmapGrid cellShape").attr("x",0).attr("y",0).attr("width",aQ).attr("height",a).attr("rx",B).attr("ry",B)}else{var aV=a2.selectAll(".advCharts.adv-heatmapGrid.cellShape").data(function(bl){return bl}).enter().append("g").attr("id",function(bm,bl){return"heatmapgridel"+bm.id}).attr("tabindex",function(bm,bl){return(bm.id==1?0:-1).toString()}).attr("aria-label",function(bl){return m(bl)}).attr("role","img").attr("transform",function(bm,bl){return"translate("+(bl*aQ+bl*R)+","+0+")"});var a0=aV.append("path").attr("class","advCharts adv-heatmapGrid cellShape").attr("d",function(bm,bl){return b(0,0,aQ*w,a,B,aH,false,aH,false)}).style("stroke","#000").style("stroke-width","0.13");var a4=aV.append("path").attr("class","advCharts adv-heatmapGrid cellInfo").attr("d",function(bm,bl){return b((aQ*w),0,aQ*(1-w),a,B,false,aH,false,aH)}).style("fill","white").style("stroke","#000").style("stroke-width","0.13");var a7=aV.append("text").attr("class","advCharts adv-heatmapGrid cellLabel").attr("x",function(bm,bl){return aQ*w*1.5}).attr("y",function(bl){return a*0.3}).attr("text-anchor","start").text(function(bl){return bl[an.node]}).classed("LongLabels",function(bl){return this.getComputedTextLength()>aQ*0.8});var bb=d3.selectAll(".advCharts.adv-heatmapGrid.cellLabel.LongLabels");z(bb,aQ*w*1.5,aQ*(1-w),a*0.5,false);aV.append("path").attr("class","advCharts adv-heatmapGrid cellDataIcon1").attr("transform",function(bm,bl){return"translate("+(-aQ*1.66)+","+(-aQ*w*11.3)+") scale("+0.5+")"}).attr("d",aq).style("fill","#868387");aV.append("path").attr("class","advCharts adv-heatmapGrid cellDataIcon2").attr("transform",function(bm,bl){return"translate("+(-aQ*1.5)+","+(-aQ*w*11.4)+") scale("+0.5+")"}).attr("d",aR).style("fill","#868387");aV.append("text").attr("class","advCharts adv-heatmapGrid cellData1").attr("x",function(bm,bl){return aQ*w*3.1}).attr("y",function(bl){return a*0.8}).attr("text-anchor","start").text(function(bn){var bl=bn[an.color];if(bl>=0){var bm=p(g[an.color]);if(bm!==undefined){return bm(bl,1)}else{return bl}}else{return"NA"}});aV.append("text").attr("class","advCharts adv-heatmapGrid cellData2").attr("x",function(bm,bl){return aQ*w*6.5}).attr("y",function(bl){return a*0.8}).attr("text-anchor","start").text(function(bm){var bl=p(g[an.size]);if(bl!==undefined){return bl(bm[an.size],1)}else{return bm[an.size]}})}}}a0.on("mouseenter",function(bo,bl){var bn=d3.select(this).node().getBoundingClientRect();var bp=bn.left+bn.width,bm=bn.top+bn.height*0.5;heatmapGridTooltip.position({left:bp,top:bm}).data(U(bo)).show()}).on("mouseleave",function(bl){heatmapGridTooltip.hide()});aV.style("cursor","pointer").on("click",function(bm,bl){q(this,bm,"click")}).on("dblclick",function(bm,bl){q(this,bm,"dblclick")}).on("keydown",function(bm,bl){switch(aG[d3.event.keyCode]){case"left":aP(bm.id,bj.length);d3.event.stopPropagation();return false;case"right":aS(bm.id,bj.length);d3.event.stopPropagation();return false;case"up":K(bm.id,bj.length);d3.event.stopPropagation();return false;case"down":D(bm.id,bj.length);d3.event.stopPropagation();return false;case"space":q(this,bm,"click");d3.event.stopPropagation();return false;case"enter":q(this,bm,"dblclick");d3.event.stopPropagation();return false;default:return}}).on("focus",function(bo,bl){var bn=d3.select(this).node().getBoundingClientRect();var bp=bn.left+bn.width,bm=bn.top+bn.height*0.5;heatmapGridTooltip.position({left:bp,top:bm}).data(U(bo)).show()}).on("blur",function(bl){heatmapGridTooltip.hide()});if(aj){}if(an!==undefined){var be=d3.nest().key(function(bl){return bl[an.color]}).rollup(function(bl){return bl.length}).entries(bj);var a6=d3.extent(bj,function(bl){return bl[an.color]});if(a6[0]==0){a6[0]=1}u=advCharts.dataBins().bins(aw[an.color]).range(a6).size(bj.length)(be);if(n===undefined){if(T=="sequential"){n=advCharts.colorbrewer[F[0]][9].slice(9-F[1],9)}else{if(T=="diverging"){n=advCharts.colorbrewer[F[0]][11].slice(5-Math.floor(F[1]/2),5+Math.ceil(F[1]/2))}}}n=ah?n.reverse():n;var aY=d3.extent(bj,function(bl){return bl[an.color]});var ba=aY[0];var aZ=aY[1];var bi,bh;if(ba==aZ){ba=aZ-1}if(aw!==undefined){if(aw[an.color]!==undefined){if(aw[an.color]!=="minmax"){bi=aw[an.color];ay.domain(bi.slice(1,bi.length-1)).range(n);bh=ay}}else{bi=[ba,aZ];M.domain(bi).range(n);bh=M}}else{bi=[ba,aZ];M.domain(bi).range(n);bh=M}d3.selectAll(".advCharts.adv-heatmapGrid.cellShape").style("fill",function(bn){var bl=bn[an.color];var bm=aM(bl);if(typeof(bm)==="string"){return bm}else{return bh(bl)}})}}function aS(aW,aV){if(aW===aV){aF(1)}else{aF(aW+1)}}function aP(aW,aV){if(aW===1){aF(aV)}else{aF(aW-1)}}function K(aW,aV){if(aW-aD<0){return}else{aF(aW-aD)}}function D(aW,aV){if(aW+aD>aV){return}else{aF(aW+aD)}}function aF(aW){var aV="#heatmapgridel"+aW;if(d3.select(aV).node()){d3.select(aV).node().focus()}}function al(){var aW="rect",aV="App Score";if(aN){var aX=advCharts.legend().shape(aW).shapePadding(3).shapeWidth(13).shapeHeight(13).color(F).colorRange(n).title(aV).classPrefix("advCharts heatmapGridlegend").colorScheme(T).margin({top:25,right:10,bottom:20,left:180});d3.select(d).datum(u).call(aX)}}function G(a0){if(aN){legendParentDivSel=d;d3.select(d).selectAll("div").remove();d3.select(d).selectAll("svg").remove();var a3=d3.select(legendParentDivSel);var a7=a3.node().getBoundingClientRect();var ba=a7.width/L.length;var a8=a7.height;a3.selectAll("div").data(L).enter().append("div").attr("id",function(bd,bc){return"advChartsHeatmapGridLegend"+(bc+1).toString()}).attr("width",ba).attr("height",a8).style("float","left");for(var a1=0;a1<L.length;a1++){var aY=L[a1];var a4=ab[L[a1]];var a6=g[L[a1]];var aX=L[a1]==an.size?true:false;var aZ=aX?"size":"color";var a9="#advChartsHeatmapGridLegend"+(a1+1).toString();var aV=d3.nest().key(function(bc){return bc[aY]}).sortKeys(d3.ascending).rollup(function(bc){return bc.length}).entries(a0);var bb=d3.extent(a0,function(bc){return +bc[aY]});var a5=aw[aY]!==undefined?aw[aY]:5;var aW=advCharts.dataBins().bins(a5).range(bb).size(a0.length)(aV);var a2=advCharts.legend().shape("rect").shapePadding(2).sizeEncoding(aX).color(F).colorRange(n).colorDomainType("ordinal").title(a4).titlePos("bottom").classPrefix("advCharts treemaplegendLinear").shapeRadius(8).colorScheme(T).legendWidth(ba).legendHeight(a8).formatType(a6).legendType(aZ).margin({top:20,right:10,bottom:20,left:10}).colorReverse(ah);d3.select(a9).datum(aW).call(a2)}}}function A(aV){if(!aj){ax=(aV.width)-2*aA.left-aA.right,C=(aV.height)-aA.bottom-2*aA.top,at=3,R=3,aB=40,O=7,aE=Math.sqrt((ax*C)/am.length)-R,aQ=a=aE>aB?aB:aE<O?O:aE,E=a+at,aD=ax/(aQ+R),ap=d3.scale.linear().domain([O,aB]).range([2,6]),B=ap(a)}else{ax=(aV.width)-2*aA.left-aA.right,at=15,R=15,aB=40,O=7,aQ=200,a=50,E=a+at,aD=Math.floor(ax/(aQ+R)),R=ax/aD-aQ,calcHeight=Math.ceil(E*(am.length/aD))+aA.bottom+15,origHeight=(aV.height)-aA.bottom-2*aA.top,C=origHeight<calcHeight?calcHeight:origHeight,ap=d3.scale.linear().domain([O,aB]).range([2,5]),B=ap(a)}}function q(aW,aX,aV){if(d3.select(".advCharts.adv-heatmapGrid.cellHighLight").node()!==null){if(d3.select(".advCharts.adv-heatmapGrid.cellHighLight").datum()[an.node]!==aX[an.node]){d3.select(".advCharts.adv-heatmapGrid.cellHighLight").remove()}}if(d3.select(aW).selectAll(".advCharts.adv-heatmapGrid.cellHighLight").node()==null){d3.select(aW).append("path").attr("class","advCharts adv-heatmapGrid cellHighLight").attr("d",b(0,0,aQ,a,B,aH,aH,aH,aH)).style("fill","none").style("stroke","#2196F3").style("stroke-width","1");if(aV=="click"){aT.advChartsHeatmapGridCellSelect(aa(aX))}else{if(aV=="dblclick"){aT.advChartsHeatmapGridCellDblClick(aa(aX))}}}else{d3.select(aW).selectAll(".advCharts.adv-heatmapGrid.cellHighLight").remove();aT.advChartsHeatmapGridCellDeSelect(aa(aX))}}function U(aY){var aZ={};var aX=p(g[an.node]);var aW=p(g[an.color]);aZ[ab[an.node]]=aX!==undefined?aX(aY[an.node],1):aY[an.node];aZ[ab[an.color]]=aY[an.color]==-1?"N/A":(aW!==undefined?aW(aY[an.color],1):aY[an.color]);if(aj){var aV=p(g[an.size]);aZ[ab[an.size]]=aV!==undefined?aV(aY[an.size],1):aY[an.size]}return aZ}function m(aZ){var aW=U(aZ),aX="",aY=0,aV;d3.keys(aW).forEach(function(a0){aV=(aY===0)?"":", ";aX+=aV+a0+": "+aW[a0];aY+=1});return aX}function aa(aW){var aV={};o.forEach(function(aX){if(aX==an.color&&aW[aX]==-1){aV[aX]="N/A"}else{aV[aX]=aW[aX]}});return aV}function z(aZ,aW,aY,aX,aV){aZ.each(function(){var a9=d3.select(this),a2=aY-aW-ai,bb=aX-f,a4=a9.text().split(/\s+/).reverse(),a1=15,ba=15;if(a4.length>0){var a0,bd=[],a3=0,a8=1.3,a7=a9.attr("x"),a6=a9.attr("y"),bc=parseFloat(a9.attr("dy")==undefined?0:a9.attr("dy")),a5=a9.text(null).append("tspan").attr("x",a7).attr("y",a6).attr("dy",bc+"em");while(a0=a4.pop()){bd.push(a0);a5.text(bd.join(" "));if(a5.node().getComputedTextLength()>a2&&(a3>0||bd.length>1)&&!aV&&bb>ba){bd.pop();bd.push("..");a5.text(bd.join(" "));break}else{if(a5.node().getComputedTextLength()>a2&&a2>a1&&bb>ba){aK(a5,a2,ai)}}}}else{a9.style("display","none")}})}function aK(a0,aX,aY){var aV=a0,aW=aV.node().getComputedTextLength(),aZ=aV.text();while(aW>(aX-2*aY)&&aZ.length>0){aZ=aZ.slice(0,-1);aV.text(aZ+"..");aW=aV.node().getComputedTextLength()}}function H(aV,aW){aV=aV&&aV.constructor===Object?aV:{};return function(aY,aX){if(aV.string||aV.key){aY=aV.key?aY[aV.key]:aY;aY=aV.string?String(aY).toLowerCase():aY;aX=aV.key?aX[aV.key]:aX;aX=aV.string?String(aX).toLowerCase():aX;if(aV.key&&(!aX||!aY)){return !aY&&!aX?1:!aY?1:-1}}return aW?~~(aV.string?aX.localeCompare(aY):aY<aX):~~(aV.string?aY.localeCompare(aX):aY>aX)}}function b(a1,a0,a2,aY,aV,a4,aZ,aX,a3){var aW;aW="M"+(a1+aV)+","+a0;aW+="h"+(a2-2*aV);if(aZ){aW+="a"+aV+","+aV+" 0 0 1 "+aV+","+aV}else{aW+="h"+aV;aW+="v"+aV}aW+="v"+(aY-2*aV);if(a3){aW+="a"+aV+","+aV+" 0 0 1 "+-aV+","+aV}else{aW+="v"+aV;aW+="h"+-aV}aW+="h"+(2*aV-a2);if(aX){aW+="a"+aV+","+aV+" 0 0 1 "+-aV+","+-aV}else{aW+="h"+-aV;aW+="v"+-aV}aW+="v"+(2*aV-aY);if(a4){aW+="a"+aV+","+aV+" 0 0 1 "+aV+","+-aV}else{aW+="v"+-aV;aW+="h"+aV}aW+="z";return aW}function h(aW,aV){pos={};if(aW=="left"){pos.X=-100;pos.Y=0;return pos}else{if(aW=="bottom"){pos.X=10;pos.Y=30;return pos}}}function W(aW,aV){pos={};if(aW=="left"){pos.X=-100;pos.Y=0;return pos}else{if(aW=="bottom"){pos.X=0;pos.Y=30;return pos}}}function p(aV){var aW;switch(aV){case"number":aW=e;break;case"bytes":aW=aJ;break;default:aW=function(aX,aY){return aX};break}return aW}function v(){d3.select("#advChartsHeatmapTooltipBox").remove();d3.select(".advCharts.adv-tooltip.av-arrow-box.option-btn").remove()}var aJ=function(aX,aY){var aW=d3.round;if(aX<1024){return(ae(aX)?aX:aW(aX,aY))+" B"}else{if(aX<1024*1024){var aZ=aX/1024;return(ae(aZ)?aZ:aW(aZ,aY))+" KB"}else{if(aX<1024*1024*1024){var aZ=aX/1024/1024;var aV=(ae(aZ)?aZ:aW(aZ,aY));return(ae(aZ)?aZ:aW(aZ,aY))+" MB"}else{if(aX<1024*1024*1024*1024){var aZ=aX/1024/1024/1024;return(ae(aZ)?aZ:aW(aZ,aY))+" GB"}else{var aZ=aX/1024/1024/1024/1024;return(ae(aZ)?aZ:aW(aZ,aY))+" TB"}}}}};var e=function(aV,aW){if(Math.abs(aV)<1000){return parseFloat(aV)}if(Math.abs(aV)<10000000){return parseFloat(aV/1000).toFixed(aW)+"K"}if(Math.abs(aV)<1000000000){return parseFloat(aV/1000000).toFixed(aW)+"M"}if(Math.abs(aV)<1000000000000){return parseFloat(aV/1000000000).toFixed(aW)+"B"}};var ae=function(aW){var aV=typeof aW==="number"&&isFinite(aW)&&Math.floor(aW)===aW;return aV};function ar(aY){var aV=70;var aX=ac(aY);var aW=(aX.R*0.299)+(aX.G*0.587)+(aX.B*0.114);return((255-aW)<aV)?"#000":"#FFFFFF"}function ac(aW){var aY=aW.substring(1,3);var aX=aW.substring(3,5);var aV=aW.substring(5,7);return{R:parseInt(aY,16),G:parseInt(aX,16),B:parseInt(aV,16)}}aI.cells=function(aV){if(!arguments.length){return S}if(aV.length>1||aV>=2){S=aV}return aI};aI.shape=function(aV,aW){if(!arguments.length){return I}if(aV=="rect"||aV=="circle"||aV=="line"||(aV=="path"&&(typeof aW==="string"))){I=aV;Z=aW}return aI};aI.shapeWidth=function(aV){if(!arguments.length){return Q}Q=+aV;return aI};aI.shapeHeight=function(aV){if(!arguments.length){return J}J=+aV;return aI};aI.shapeRadius=function(aV){if(!arguments.length){return N}N=+aV;return aI};aI.shapePadding=function(aV){if(!arguments.length){return P}P=+aV;return aI};aI.labels=function(aV){if(!arguments.length){return az}az=aV;return aI};aI.labelAlignX=function(aV){if(!arguments.length){return av}if(aV=="start"||aV=="end"||aV=="middle"){av=aV}return aI};aI.labelFormat=function(aV){if(!arguments.length){return aU}aU=aV;return aI};aI.labelOffset=function(aV){if(!arguments.length){return aO}aO=+aV;return aI};aI.orient=function(aV){if(!arguments.length){return aL}aV=aV.toLowerCase();if(aV=="horizontal"||aV=="vertical"){aL=aV}return aI};aI.classPrefix=function(aV){if(!arguments.length){return af}af=aV;return aI};aI.title=function(aV){if(!arguments.length){return t}t=aV;return aI};aI.color=function(aV){if(!arguments.length){return F}F=aV;return aI};aI.colorRange=function(aV){if(!arguments.length){return n}n=aV;return aI};aI.sizeEncoding=function(aV){if(!arguments.length){return aC}aC=aV;return aI};aI.colorScheme=function(aV){if(!arguments.length){return T}T=aV;return aI};aI.legendWidth=function(aV){if(!arguments.length){return legendWidth}legendWidth=aV;return aI};aI.legendHeight=function(aV){if(!arguments.length){return legendHeight}legendHeight=aV;return aI};aI.titlePos=function(aV){if(!arguments.length){return ag}ag=aV;return aI};aI.columnFormats=function(aV){if(!arguments.length){return g}g=aV;return aI};aI.legendType=function(aV){if(!arguments.length){return legendType}legendType=aV;return aI};aI.margin=function(aV){if(!arguments.length){return aA}aA=aV;return aI};aI.columnNames=function(aV){if(!arguments.length){return o}o=aV;return aI};aI.legendParentDiv=function(aV){if(!arguments.length){return d}d=aV;return aI};aI.legend=function(aV){if(!arguments.length){return aN}aN=aV;return aI};aI.colorbrewerRange=function(aV){if(!arguments.length){return F}F=aV;return aI};aI.colorReverse=function(aV){if(!arguments.length){return ah}ah=aV;return aI};aI.colorBins=function(aV){if(!arguments.length){return aw}aw=aV;return aI};aI.legendColumns=function(aV){if(!arguments.length){return L}L=aV;return aI};aI.expand=function(aV){if(!arguments.length){return aj}aj=aV;return aI};aI.autoResize=function(aV){if(!arguments.length){return ak}ak=aV;return aI};aI.columnLabels=function(aV){if(!arguments.length){return ab}ab=aV;return aI};aI.vizColumns=function(aV){if(!arguments.length){return an}an=aV;return aI};aI.resize=function(){if(s!==undefined){s.each(function(aV){d3.select(this).selectAll("svg").remove();d3.select(this).selectAll("div").remove();if(aV.length==0){return}V(this,aV)})}if(d!==undefined){d3.select(d).selectAll("div").remove();d3.select(d).selectAll("svg").remove();if(aj){G(am)}else{al()}}};aI.dispatch=aT;return aI};advCharts.metricSum=function(){var p={top:0,right:10,bottom:10,left:0},u=null,q=null,h=["#4A4A4A","#7ED321","#FA7961"],f=null,s=null,g=false,A=null,v=window.screen.width,B=window.screen.height,n,b=false,C=d3.dispatch("advChartsMetricSumClick"),t=false,d="10.5 2.625 9.375 1.5 3 7.875 3 3 1.5 3 1.5 10.5 9 10.5 9 9 4.125 9";function o(E){n=E;n.each(function(F){try{D(this,F)}catch(G){return}});if(b){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",o.resize)}}function D(R,J){if(J.length==0){return}try{var S=d3.select(R).node().getBoundingClientRect()}catch(N){return}var G=S.width;var T=S.height;if((T<=0||T==undefined)||(G<=0||G==undefined)){return}p={top:0*T,right:0.03*G,bottom:0.03*T,left:0*G};var U=G;d3.select(R).selectAll("svg").remove();var L=d3.select(R).append("svg").attr("width",G).attr("height",T);var F=L.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",G).attr("height",T).style("fill","white");var H=L.data(J).append("g").attr("transform",function(W,V){return"translate("+U*0.1+","+p.top+")"});var E=H.append("text").attr("class","advCharts adv-metricSum adv-name").attr("text-align","center").attr("y",function(W,V){return W.metric_name===""?0:T*0.2}).text(function(V){return V.metric_name});var O=H.append("text").attr("class","advCharts adv-metricSum adv-count").attr("text-align","center").attr("y",function(W,V){return W.metric_name===""?T*0.2:T*0.45}).text(function(V){return V.agg_name}).style("font-size",function(W,V){return W.metric_name===""?"2.1vmin":"1.7vmin"});var Q=H.append("text").attr("class","advCharts adv-metricSum adv-value").attr("text-align","center").attr("y",function(W,V){return W.metric_name===""?(W.agg_name===""?T*0.5:T*0.8):(W.agg_name===""?T*0.8:T*0.98)}).text(function(V){return a(V.unit)(V.value,1)}).style("fill",function(V){return e(V)}).on("click",function(W){var V={name:W.metric_name,value:W.value,unit:W.unit,trend:W.trend,trendFormat:W.trendFormat};C.advChartsMetricSumClick(V)});if(t){Q.style("cursor","pointer")}var K=[];Q[0].forEach(function(V){K.push(V.getBoundingClientRect().width)});var M=Q.append("tspan").attr("class","advCharts adv-metricSum adv-trend").attr("text-align","center").attr("x",function(W,V){return(K[V]+U*0.1)}).text(function(V){return(V.trend>0?"+":"")+a(V.trendformat)(V.trend,0)});K=[];var I=[];Q[0].forEach(function(W){var V=W.getBoundingClientRect();K.push(V.width)});var P=H.append("polygon").attr("class","advCharts adv-metricBar adv-trendArrow").attr("points",function(V){return d}).style("fill",function(W,V){return e(W,V)}).attr("transform",function(aa,Z){var W=aa.trend>0?0:(aa.trend===0?45:90);var ab=aa.trend>0?20:(aa.trend===0?15:10);var V=aa.trend>0?0.81*T:(aa.trend===0?0.81*T:0.8*T);return"translate("+(K[Z]+ab)+","+(V)+") scale(-1, -1) rotate("+W+" )"})}function e(E){if(A===null){if(f===null||s===null){return h[0]}else{if(typeof(s)==="number"&&typeof(f)==="boolean"){if(g){return f?(+E.value>s?h[2]:h[1]):h[0]}else{return f?(+E.value<=s?h[2]:h[1]):h[0]}}else{return h[0]}}}else{if(typeof(A)==="string"){return A}else{return h[0]}}}var m=function(G,I){var H=false;if(G<0){G=-1*G;H=true}var F=d3.format("."+I+"f");if(G<1024){return(H?"-":"")+(w(G)?G:F(G))+" B"}else{if(G<1024*1024){var J=G/1024;return(H?"-":"")+(w(J)?J:F(J))+" KB"}else{if(G<1024*1024*1024){var J=G/1024/1024;var E=(w(J)?J:F(J));return(H?"-":"")+(w(J)?J:F(J))+" MB"}else{if(G<1024*1024*1024*1024){var J=G/1024/1024/1024;return(H?"-":"")+(w(J)?J:F(J))+" GB"}else{var J=G/1024/1024/1024/1024;return(H?"-":"")+(w(J)?J:F(J))+" TB"}}}}};var z=function(H,I){var G=false;if(H<0){H=-1*H;G=true}var F=d3.format("."+I+"f");if(H<1000){return(G?"-":"")+(w(H)?H:F(H))}else{if(H<1000000){var J=H/1000;return(G?"-":"")+(w(J)?J:F(J))+"K"}else{if(H<1000000000){var J=H/1000000;var E=(w(J)?J:F(J));return(G?"-":"")+(w(J)?J:F(J))+"M"}else{if(H<1000000000000){var J=H/1000000000;return(G?"-":"")+(w(J)?J:F(J))+"B"}}}}};function a(E){var F;switch(E){case"number":F=z;break;case"bytes":F=m;break;default:F=function(G,H){return G};break}return F}var w=function(F){var E=typeof F==="number"&&isFinite(F)&&Math.floor(F)===F;return E};o.margin=function(E){if(!arguments.length){return p}p=E;return o};o.width=function(E){if(!arguments.length){return u}u=E;return o};o.height=function(E){if(!arguments.length){return q}q=E;return o};o.colorThreshold=function(E){if(!arguments.length){return f}f=E;return o};o.colorThresholdVal=function(E){if(!arguments.length){return s}s=E;return o};o.colorVal=function(E){if(!arguments.length){return A}A=E;return o};o.thresholdReverse=function(E){if(!arguments.length){return g}g=E;return o};o.showPointer=function(E){if(!arguments.length){return t}t=E;return o};o.autoResize=function(E){if(!arguments.length){return b}b=E;return o};o.resize=function(){if(n!==undefined){n.each(function(E){d3.select(this).selectAll("svg").remove();if(E.length==0){return}D(this,E)})}};o.dispatch=C;return o};advCharts.metricsBar=function(){var s={top:0.25,right:0.2,bottom:0.1,left:0.1};var n=["#4A4A4A","#7ED321","#FA7961"],g=null,t=null,h=false,B=null,v=window.innerWidth,C=window.innerHeight,a,d=false,o,w,m,E=d3.dispatch("advChartsMetricBarClick"),u=false,e="10.5 2.625 9.375 1.5 3 7.875 3 3 1.5 3 1.5 10.5 9 10.5 9 9 4.125 9";function q(F){a=F;a.each(function(G){try{D(this,G)}catch(H){return}});if(d){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",q.resize)}}function D(ad,ab){if(ab.length==0){return}try{var K=d3.select(ad).node().getBoundingClientRect()}catch(aa){return}var T=K.width;var Q=K.height;if((Q<=0||Q==undefined)||(T<=0||T==undefined)){return}var P={top:s.top*Q,right:s.right*T,bottom:s.bottom*Q,left:s.left*T},J=[600,665,768,800,900,1050,1200],L=[1024,1280,1366,1440,1600,1680,1920];o=ab.length;var V=T/o;d3.select(ad).selectAll("div").remove();d3.select(ad).selectAll("svg").remove();var R=d3.select(ad).selectAll(".advCharts.adv-metricBar.adv-metric").data(ab).enter().append("div").attr("class","advCharts adv-metricBar adv-metric").attr("width",V).append("svg").attr("width","100%").attr("height","100%");var H=R.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").style("fill","white");var S=R.append("g").attr("transform",function(ag,af){return"translate("+V*s.right+","+P.top+")"});var ae=S.append("text").attr("class","advCharts adv-metricBar adv-name").attr("text-align","center").text(function(af){return af.metric_name});var I=d3.max(ae[0],function(af){return af.getBoundingClientRect().height});I=I==0?20:I;var N=S.append("text").attr("class","advCharts adv-metricBar adv-count").attr("text-align","center").attr("y",I).text(function(af){return af.agg_name});var O=d3.max(N[0],function(af){return af.getBoundingClientRect().height});O=O==0?20:O;var ac=d3.min([I+O+Q*0.3,Q*0.6]);var U=S.append("text").attr("class","advCharts adv-metricBar adv-value").attr("text-align","center").attr("y",ac).text(function(af){return b(af.unit)(af.value,1)}).style("fill",function(ag,af){return f(ag,af)}).on("click",function(ag){var af={name:ag.metric_name,value:ag.value,unit:ag.unit,trend:ag.trend,trendFormat:ag.trendFormat};E.advChartsMetricBarClick(af)});if(u){U.style("cursor","pointer")}var Z=[];U[0].forEach(function(af){Z.push(af.getBoundingClientRect().width)});var W=U.append("tspan").attr("class","advCharts adv-metricBar adv-trend").attr("text-align","center").attr("x",function(ag,af){return(Z[af]+V*0.05)}).text(function(af){return(af.trend>0?"+":"")+b(af.trendformat)(af.trend,0)});Z=[];U[0].forEach(function(af){Z.push(af.getBoundingClientRect().width)});var G=S.append("polygon").attr("class","advCharts adv-metricBar adv-trendArrow").attr("points",function(af){return e}).style("fill",function(ag,af){return f(ag,af)}).attr("transform",function(ai,ah){var ag=ai.trend>0?0:(ai.trend===0?45:90);var aj=ai.trend>0?20:(ai.trend===0?12:10);var af=ai.trend>0?0.01*Q:(ai.trend===0?0.02*Q:0.01*Q);return"translate("+(Z[ah]+aj)+","+(ac+af)+") scale(-1, -1) rotate("+ag+" )"});var F={top:10,right:10,bottom:10,left:10};var M=R.append("line").attr("x1",V-3).attr("y1",F.top).attr("x2",V-3).attr("y2",Q-F.bottom).attr("stroke","grey").attr("strok-width","1").attr("opacity",function(ag,af){return af==ab.length-1?0:0.2})}function f(G,F){if(B===null){if(g===null||t===null){return n[0]}else{if(typeof(t)==="number"&&typeof(g)==="boolean"){if(h){return g?(+G.value>t?n[2]:n[1]):n[0]}else{return g?(+G.value<=t?n[2]:n[1]):n[0]}}else{if(g.length===o&&t.length===o){if(h){return g[F]?(+G.value>t[F]?n[2]:n[1]):n[0]}else{return g[F]?(+G.value<=t[F]?n[2]:n[1]):n[0]}}else{return n[0]}}}}else{if(typeof(B)==="string"){return B}else{return B[F]}}}var p=function(H,J){var I=false;if(H<0){H=-1*H;I=true}var G=d3.format("."+J+"f");if(H<1024){return(I?"-":"")+(z(H)?H:G(H))+" B"}else{if(H<1024*1024){var K=H/1024;return(I?"-":"")+(z(K)?K:G(K))+" KB"}else{if(H<1024*1024*1024){var K=H/1024/1024;var F=(z(K)?K:G(K));return(I?"-":"")+(z(K)?K:G(K))+" MB"}else{if(H<1024*1024*1024*1024){var K=H/1024/1024/1024;return(I?"-":"")+(z(K)?K:G(K))+" GB"}else{var K=H/1024/1024/1024/1024;return(I?"-":"")+(z(K)?K:G(K))+" TB"}}}}};var A=function(I,J){var H=false;if(I<0){I=-1*I;H=true}var G=d3.format("."+J+"f");if(I<1000){return(H?"-":"")+(z(I)?I:G(I))}else{if(I<1000000){var K=I/1000;return(H?"-":"")+(z(K)?K:G(K))+"K"}else{if(I<1000000000){var K=I/1000000;var F=(z(K)?K:G(K));return(H?"-":"")+(z(K)?K:G(K))+"M"}else{if(I<1000000000000){var K=I/1000000000;return(H?"-":"")+(z(K)?K:G(K))+"B"}}}}};function b(F){var G;switch(F){case"number":G=A;break;case"bytes":G=p;break;default:G=function(H,I){return H};break}return G}var z=function(G){var F=typeof G==="number"&&isFinite(G)&&Math.floor(G)===G;return F};q.margin=function(F){if(!arguments.length){return margin}margin=F;return q};q.width=function(F){if(!arguments.length){return width}width=F;return q};q.height=function(F){if(!arguments.length){return height}height=F;return q};q.colorThreshold=function(F){if(!arguments.length){return g}g=F;return q};q.colorThresholdVal=function(F){if(!arguments.length){return t}t=F;return q};q.colorVal=function(F){if(!arguments.length){return B}B=F;return q};q.thresholdReverse=function(F){if(!arguments.length){return h}h=F;return q};q.marginPercent=function(F){if(!arguments.length){return s}s=F;return q};q.autoResize=function(F){if(!arguments.length){return d}d=F;return q};q.trendFormats=function(F){if(!arguments.length){return columnFormats}columnFormats=F;return q};q.valueFormats=function(F){if(!arguments.length){return columnFormats}columnFormats=F;return q};q.showPointer=function(F){if(!arguments.length){return u}u=F;return q};q.resize=function(){if(a!==undefined){a.each(function(F){d3.select(this).selectAll("svg").remove();d3.select(this).selectAll("div").remove();if(F.length==0){return}D(this,F)})}};q.dispatch=E;return q};advCharts.miniColBar=function(){var o={top:20,right:0,bottom:0,left:5},s=null,p=null,f=null,g="#33C0CD",F=true,E="rgba(155,155,155,0.1)",w=8,C=true,v="right",u="top",z="percent",B=100,H=d3.scale.linear(),e=d3.scale.linear(),t=function(I){return I[f.count]},A=function(I){return I[f.category]},q,a=false;function n(I){q=I;q.each(function(J){try{G(this,J)}catch(K){return}});if(a){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",n.resize)}}function G(M,N){if(N.length==0){return}try{var L=d3.select(M).node().getBoundingClientRect()}catch(P){return}var K=L.width;var I=L.height;if((I<=0||I==undefined)||(K<=0||K==undefined)){return}d3.select(M).selectAll("svg").remove();var J=d3.select(M).selectAll("svg").data([N]).enter().append("svg").attr("width",K).attr("height",I);H.domain([0,B]).range([0,K-o.left-o.right]);var O=J.append("g").attr("transform","translate("+o.left+","+o.top+")");O.append("rect").attr("class","advCharts adv-bar").attr("x",0).attr("y",3).attr("width",function(Q){return H(Q[f.count])}).attr("height",w).style("fill",g);if(F){O.append("rect").attr("class","advCharts adv-backBar").attr("x",0).attr("y",3).attr("width",H(B)).attr("height",w).style("fill",E)}h(O,"advCharts adv-dataLabel")}function D(K,I){var L,J;if(I==="percent"){L=d3.format("%");J=L(K/B);return J}else{if(I==="byMax"){J=K.toString()+"/"+B.toString;return J}else{if(I==="value"){J=K;return J}else{L=d3.format(I);J=L(K);return J}}}}function m(J){var K,I;switch(v){case"left":K=0;break;case"right":K=H(B)-(s-o.left-o.right)*0.2;break;case"before":K=-o.left;break;default:K=0}switch(u){case"top":I=0;break;case"center":I=w*1.2;break;default:I=0}return[K,I]}function h(J,I){pos=[];J.append("text").attr("class",I).attr("text-align","end").text(function(K){pos=m(K[f.count]);return D(K[f.count],z)}).attr("transform","translate("+pos[0]+","+pos[1]+")")}function d(I){return H(I[f.count])}function b(I){return e(I[f.category])}n.x=function(I){if(!arguments.length){return t}t=I;return n};n.y=function(I){if(!arguments.length){return A}A=I;return n};n.margin=function(I){if(!arguments.length){return o}o=I;return n};n.width=function(I){if(!arguments.length){return s}s=I;return n};n.height=function(I){if(!arguments.length){return p}p=I;return n};n.fillColor=function(I){if(!arguments.length){return g}g=I;return n};n.fillBack=function(I){if(!arguments.length){return F}F=I;return n};n.fillBackColor=function(I){if(!arguments.length){return E}E=I;return n};n.barHeight=function(I){if(!arguments.length){return w}w=I;return n};n.numberFormat=function(I){if(!arguments.length){return z}z=I;return n};n.maxValue=function(I){if(!arguments.length){return B}B=I;return n};n.labels=function(I){if(!arguments.length){return C}C=I;return n};n.lablePosX=function(I){if(!arguments.length){return v}v=I;return n};n.lablePosY=function(I){if(!arguments.length){return u}u=I;return n};n.columnNames=function(I){if(!arguments.length){return f}f=I;return n};n.autoResize=function(I){if(!arguments.length){return a}a=I;return n};n.resize=function(){if(q!==undefined){q.each(function(I){d3.select(this).selectAll("svg").remove();if(I.length==0){return}G(this,I)})}};return n};advCharts.multiBarChart=function(){var m={top:25,right:0,bottom:20,left:30},p=null,n=null,e=null,a=["#009fe6","#666b75","#0dbcaf","#6b486b","#a05d56","#d0743c","#ff8c00"],u=8,z=true,t="right",q="top",v="percent",o=d3.scale.ordinal(),s=d3.scale.ordinal(),d=d3.scale.linear(),b=false,g,w=true;function h(B){g=B;g.each(function(C){try{A(this,C)}catch(D){return}});if(b){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",h.resize)}}function A(P,H){if(H==undefined){return}try{var Q=d3.select(P).node().getBoundingClientRect()}catch(J){return}var E=Q.width-m.left-m.right;var R=Q.height-m.bottom-m.top*2;if((R<=0||R==undefined)||(E<=0||E==undefined)){return}var L=d3.keys(H);var K=d3.keys(H[d3.keys(H)[0]]);var B=d3.max(d3.keys(H),function(S){return d3.max(d3.values(H[S]))});o.domain(L).rangeRoundBands([0,E],0.5);s.domain(K).rangeRoundBands([0,o.rangeBand()]);d.domain([0,B*1.1]).range([R,0]);var F=d3.svg.axis().scale(o).orient("bottom");var D=d3.svg.axis().scale(d).orient("left").ticks(5).tickFormat(f);var G=d3.scale.ordinal().range(a);d3.select(P).selectAll("svg").remove();var M=d3.select(P).append("svg").attr("width",E+m.left+m.right).attr("height",R+m.bottom+m.top*2);var C=M.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",E+m.left+m.right).attr("height",R+m.bottom+m.top*2).style("fill","white");var I=M.append("g").attr("transform","translate("+m.left+","+(m.top*2)+")");I.append("g").attr("class","advCharts multiBarChart x axis").attr("transform","translate("+0+","+R+")").call(F);I.append("g").attr("class","advCharts multiBarChart y axis").attr("transform","translate("+m.left+","+0+")").call(D);var N=I.selectAll(".advCharts.multiBarChart.groupLvl1").data(L).enter().append("g").attr("class","advCharts multiBarChart groupLvl1").attr("transform",function(S){return"translate("+o(S)+",0)"});N.selectAll("rect").data(K).enter().append("rect").attr("x",function(S){return s(S)}).attr("y",function(T){var S=d3.select(this.parentNode).datum();return d(H[S][T])}).attr("width",s.rangeBand()).attr("height",function(T){var S=d3.select(this.parentNode).datum();return R-d(H[S][T])}).style("fill",function(S){return G(S)});if(w){var O=I.selectAll(".advCharts.multiBarChart.legend").data(K).enter().append("g").attr("class","advCharts multiBarChart legend").attr("transform",function(T,S){return"translate("+((S-K.length+1)*(20+70))+","+(-m.top*2)+")"});O.append("rect").attr("x",function(S){return E-S.length*2.5}).attr("width",R*0.15).attr("height",R*0.15).style("fill",G);O.append("text").attr("x",function(S){return E-S.length*3}).attr("y",R*0.15*0.5).attr("dy","0.35em").attr("text-anchor","end").text(function(S){return S})}}var f=function(C){var B=d3.format(".0f");if(C<1024){return B(C)+" B"}else{if(C<1024*1024){return B(C/1024)+" KB"}else{if(C<1024*1024*1024){return B(C/1024/1024)+" MB"}else{if(C<1024*1024*1024*1024){return B(C/1024/1024/1024)+" GB"}else{return B(C/1024/1024/1024/1024)+" TB"}}}}};h.margin=function(B){if(!arguments.length){return m}m=B;return h};h.width=function(B){if(!arguments.length){return p}p=B;return h};h.height=function(B){if(!arguments.length){return n}n=B;return h};h.fillColors=function(B){if(!arguments.length){return a}a=B;return h};h.numberFormat=function(B){if(!arguments.length){return v}v=B;return h};h.labels=function(B){if(!arguments.length){return z}z=B;return h};h.lablePosX=function(B){if(!arguments.length){return t}t=B;return h};h.lablePosY=function(B){if(!arguments.length){return q}q=B;return h};h.columnNames=function(B){if(!arguments.length){return e}e=B;return h};h.showLegend=function(B){if(!arguments.length){return w}w=B;return h};h.autoResize=function(B){if(!arguments.length){return b}b=B;return h};h.resize=function(){if(g!==undefined){g.each(function(B){d3.select(this).selectAll("svg").remove();if(B.length==0){return}A(this,B)})}};return h};advCharts.radialProgress=function(){var s={top:10,right:10,bottom:10,left:10},u=null,t=null,e="#33C0CD",w=false,B="#EEEEEE",A=true,a=1,b=1000,z="number",p=0,m=d3.svg.arc().startAngle(0*(Math.PI/180)).endAngle(360*(Math.PI/180)),h=d3.svg.arc().startAngle(0*(Math.PI/180)).endAngle(0),D=d3.scale.linear(),o,f=false;function q(E){o=E;o.each(function(F){if(F.length==0){return}try{C(this,F)}catch(G){return}});if(f){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",q.resize)}}function C(N,J){try{var O=d3.select(N).node().getBoundingClientRect()}catch(L){return}var F=O.width-s.left-s.right;var T=O.height-s.top-s.bottom;if((T<=0||T==undefined)||(F<=0||F==undefined)){return}value=J.value;maxValue=J.maxValue;D.domain([0,maxValue]).range([0,360*(Math.PI/180)]);var R=Math.min(F/2,T/2),S=R*0.85,M=Math.min(F/2,T/2),Q=M*0.85;m.outerRadius(R).innerRadius(S);h.outerRadius(M).innerRadius(Q);h.endAngle(D(value));d3.select(N).selectAll("svg").remove();var K=d3.select(N).selectAll("svg").data([J]).enter().append("svg").attr("width",F).attr("height",T);var E=K.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",F).attr("height",T).style("fill","white");var P=K.append("g").attr("transform","translate("+F/2+","+T/2+")");P.append("path").attr("class","advCharts adv-backRadialProgress").attr("d",m).style("fill",B);P.append("path").attr("class","advCharts adv-radialProgress").attr("d",h).style("fill",e);if(A){var G=d(z,value,maxValue),U=(R*0.5).toString()+"px",I=-Math.ceil(R*(G.length<4?(G.length<3?0.15:0.3):0.4)),H=Math.ceil(R*0.15);n(P,G,I,H,U,"advCharts adv-radialProgressLabel")}}var v=function(F){var E=d3.format(".0f");if(F<1024){return E(F)+" B"}else{if(F<1024*1024){return E(F/1024)+" KB"}else{if(F<1024*1024*1024){return E(F/1024/1024)+" MB"}else{if(F<1024*1024*1024*1024){return E(F/1024/1024/1024)+" GB"}else{return E(F/1024/1024/1024/1024)+" TB"}}}}};var g=function(E){if(Math.abs(E)<1000){return parseFloat(E).toFixed(1)}if(Math.abs(E)<10000000){return parseFloat(E/1000).toFixed(1)+"K"}if(Math.abs(E)<1000000000){return parseFloat(E/1000000).toFixed(1)+"M"}if(Math.abs(E)<1000000000000){return parseFloat(E/1000000000).toFixed(1)+"B"}};function d(E,G,I){var H,F;if(E==="percent"){H=d3.format("%");F=H(G/I);return F}else{if(E==="byMax"){F=G.toString()+"/"+I.toString();return F}else{if(E==="value"){F=G;return F}else{H=d3.format(E);F=H(G);return F}}}}function n(F,I,J,H,G,E){J=J-I.length;F.append("text").attr("class",E).attr("text-align","end").attr("transform","translate("+J+","+H+")").text(I).style("font-size",G)}q.margin=function(E){if(!arguments.length){return s}s=E;return q};q.width=function(E){if(!arguments.length){return u}u=E;return q};q.height=function(E){if(!arguments.length){return t}t=E;return q};q.fillBackColor=function(E){if(!arguments.length){return B}B=E;return q};q.numberFormat=function(E){if(!arguments.length){return z}z=E;return q};q.minValue=function(E){if(!arguments.length){return p}p=E;return q};q.showLabel=function(E){if(!arguments.length){return A}A=E;return q};q.duration=function(E){if(!arguments.length){return b}b=E;return q};q.autoResize=function(E){if(!arguments.length){return f}f=E;return q};q.resize=function(){if(o!==undefined){o.each(function(E){d3.select(this).selectAll("svg").remove();if(E.length==0){return}C(this,E)})}};return q};advCharts.sparkline=function(){var q={top:10,right:10,bottom:10,left:10},b=null,e=null,ae="#33C0CD",F=false,ah="#c0d0f0",H=1,v=true,E="circle",O=false,N="#f02020",T="#f02020",A=false,P="#f08000",C="#f08000",d="#f02020",ab=1.5,W=false,K="#c0c0c0",o=false,a="f02020",ag="number",U=false,D=d3.scale.linear(),aa=d3.scale.linear(),J=function(ai){return ai[0]},af=function(ai){return ai[1]},t=function(ai){return ai[2]},n,m,ac,G,u=d3.svg.line().x(g).y(f),S=d3.svg.area().x(g).y1(f),p,s=false,M={13:"enter",32:"space",37:"left",38:"up",39:"right",40:"down"};function z(an,al){var ai=[an[al.lastIndexOf(d3.min(al))],d3.min(al)],aj=[an[al.lastIndexOf(d3.max(al))],d3.max(al)],am=[an[0],al[0]],ak=[an[an.length-1],al[al.length-1]];return[ai,aj,am,ak]}function ad(ai){p=ai;p.each(function(aj){if(aj.length==0){return}try{Q(this,aj)}catch(ak){return}});if(s){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",ad.resize)}}function Q(ap,al){try{var aq=d3.select(ap).node().getBoundingClientRect()}catch(ao){return}var ai=aq.width;var aw=aq.height;if((aw<=0||aw==undefined)||(ai<=0||ai==undefined)){return}al=al.map(function(az,ay){return[J.call(al,az,ay),af.call(al,az,ay),t.call(al,az,ay)]});D.domain(d3.extent(al,function(ay){return ay[0]})).range([0,ai-q.left-q.right]);aa.domain([0,d3.max(al,function(ay){return ay[1]})]).range([aw-q.top-q.bottom,0]);d3.select(ap).selectAll("svg").remove();var am=d3.select(ap).selectAll("svg").data([al]).enter().append("svg").attr("width",ai).attr("height",aw);var au=am.append("g").attr("transform","translate("+q.left+","+q.top+")");au.append("path").attr("class","advCharts sparkline").attr("d",u).style("stroke",ae).style("stroke-width",H).style("fill","none");if(F){au.append("path").attr("class","advCharts sparklineArea").attr("d",S.y0(aa.range()[0])).style("fill",ah)}if(O||A){xData=al.map(function(ay){return ay[0]});yData=al.map(function(ay){return ay[1]});var at=z(xData,yData);if(O){au.append("circle").attr("class","advCharts sparklineMin").attr("cx",D(at[0][0])).attr("cy",aa(at[0][1])).attr("r",ab).style("fill",N);au.append("circle").attr("class","advCharts sparklineMax").attr("cx",D(at[1][0])).attr("cy",aa(at[1][1])).attr("r",ab).style("fill",T)}if(A){au.append("circle").attr("class","advCharts sparklineStart").attr("cx",D(at[2][0])).attr("cy",aa(at[2][1])).attr("r",ab).style("fill",P);au.append("circle").attr("class","advCharts sparklineEnd").attr("cx",D(at[3][0])).attr("cy",aa(at[3][1])).attr("r",ab).style("fill",C)}}if(U){var ak=d3.bisector(function(ay){return ay[0]}).left;var ax=au.append("g").attr("class","focus").style("display","none");ax.append("circle").attr("class","tipmarker").attr("r",3).style("fill","none").style("stroke","red").style("stroke-width","0.5px");ax.append("text").attr("class","yValue").attr("x",-3).attr("y",3).attr("text-anchor","end").attr("dy",".9em").attr("font-size","10px").text("text");am.append("rect").attr("transform","translate("+q.left+","+q.top+")").attr("class","overlay").attr("width",ai).attr("height",aw).style("fill","none").style("pointer-events","all").on("mouseover",function(){ax.style("display",null)}).on("mouseout",function(){ax.style("display","none")}).on("mousemove",an);function an(){var az=D.invert(d3.mouse(this)[0]),aA=aa.invert(d3.mouse(this)[1]),ay=ak(al,az,1),aC=al[ay-1],aB=al[ay],aD=null;if(aC&&aB){aD=az-aC[0]>aB[0]-az?aB:aC;av(aD)}}}function av(ay){ax.attr("transform","translate("+D(ay[0])+","+aa(ay[1])+")");ax.select("text").text(function(){return ag==="bytes"?h(ay[1]):Z(ay[1])})}V(al,au);var aj;var ar=R(1,10000);if(v){if(E==="circle"){aj=au.selectAll(".advCharts.sparklineMarks").data(al).enter().append("circle").attr("class","advCharts sparklineMarks").attr("id",function(az,ay){return"id"+(ar+ay+1)}).attr("tabindex",function(az,ay){return(ay==0?0:-1).toString()}).attr("aria-label",function(ay){return"time: "+ay[0]+", yValue:"+ay[1]}).attr("role","img").attr("cx",function(ay){return D(ay[0])}).attr("cy",function(ay){return aa(ay[1])}).attr("r",2).style("fill",ae).style("fill-opacity",0.25)}}aj.on("keydown",function(aA,az){switch(M[d3.event.keyCode]){case"left":var ay=this.id;w(parseInt(ay.substring(2,ay.length)),ar+al.length);d3.event.stopPropagation();return false;case"right":var ay=this.id;B(parseInt(ay.substring(2,ay.length)),ar+al.length);d3.event.stopPropagation();return false;default:return}});if(U){aj.on("focus",function(ay){ax.style("display",null);av(ay)}).on("blur",function(ay){ax.style("display","none")})}}var V=function(aj,ai){highlightData=aj.filter(function(ak){return ak[2]==true});ai.selectAll(".advCharts.sparklineHighLights").data(highlightData).enter().append("circle").attr("class","advCharts sparklineHighLights").attr("cx",function(ak){return D(ak[0])}).attr("cy",function(ak){return aa(ak[1])}).attr("r",ab).style("fill",d)};function R(aj,ai){aj=Math.ceil(aj);ai=Math.floor(ai);return Math.floor(Math.random()*(ai-aj+1))+aj}var h=function(aj){var ai=d3.format(".0f");if(aj<1024){return ai(aj)+" B"}else{if(aj<1024*1024){return ai(aj/1024)+" KB"}else{if(aj<1024*1024*1024){return ai(aj/1024/1024)+" MB"}else{if(aj<1024*1024*1024*1024){return ai(aj/1024/1024/1024)+" GB"}else{return ai(aj/1024/1024/1024/1024)+" TB"}}}}};var Z=function(ai){if(Math.abs(ai)<1000){return parseFloat(ai).toFixed(1)}if(Math.abs(ai)<10000000){return parseFloat(ai/1000).toFixed(1)+"K"}if(Math.abs(ai)<1000000000){return parseFloat(ai/1000000).toFixed(1)+"M"}if(Math.abs(ai)<1000000000000){return parseFloat(ai/1000000000).toFixed(1)+"B"}};var L=function(ai){if(Math.abs(ai)<1000){return parseFloat(ai).toFixed(1)}if(Math.abs(ai)<59000){return parseFloat(ai/1000).toFixed(1)+"S"}if(Math.abs(ai)<3540000){return parseFloat(ai/60000).toFixed(1)+"M"}if(Math.abs(ai)<82800000){return parseFloat(ai/360000).toFixed(1)+"H"}};function g(ai){return D(ai[0])}function f(ai){return aa(ai[1])}function B(aj,ai){if(aj===ai){I(1)}else{I(aj+1)}}function w(aj,ai){if(aj===1){I(ai)}else{I(aj-1)}}function I(aj){var ai="#id"+aj;if(d3.select(ai).node()){d3.select(ai).node().focus()}}ad.x=function(ai){if(!arguments.length){return J}J=ai;return ad};ad.y=function(ai){if(!arguments.length){return af}af=ai;return ad};ad.h=function(ai){if(!arguments.length){return t}t=ai;return ad};ad.margin=function(ai){if(!arguments.length){return q}q=ai;return ad};ad.width=function(ai){if(!arguments.length){return b}b=ai;return ad};ad.height=function(ai){if(!arguments.length){return e}e=ai;return ad};ad.lineColor=function(ai){if(!arguments.length){return ae}ae=ai;return ad};ad.fill=function(ai){if(!arguments.length){return F}F=ai;return ad};ad.fillColor=function(ai){if(!arguments.length){return ah}ah=ai;return ad};ad.lineWidth=function(ai){if(!arguments.length){return H}H=ai;return ad};ad.showMinMaxPoints=function(ai){if(!arguments.length){return O}O=ai;return ad};ad.minPointColor=function(ai){if(!arguments.length){return N}N=ai;return ad};ad.showStartEndPoints=function(ai){if(!arguments.length){return A}A=ai;return ad};ad.startPointColor=function(ai){if(!arguments.length){return P}P=ai;return ad};ad.endPointColor=function(ai){if(!arguments.length){return C}C=ai;return ad};ad.pointRadius=function(ai){if(!arguments.length){return ab}ab=ai;return ad};ad.normalBand=function(ai){if(!arguments.length){return W}W=ai;return ad};ad.normalColor=function(ai){if(!arguments.length){return K}K=ai;return ad};ad.referenceLine=function(ai){if(!arguments.length){return o}o=ai;return ad};ad.referenceColor=function(ai){if(!arguments.length){return a}a=ai;return ad};ad.numberFormat=function(ai){if(!arguments.length){return ag}ag=ai;return ad};ad.tooltip=function(ai){if(!arguments.length){return U}U=ai;return ad};ad.autoResize=function(ai){if(!arguments.length){return s}s=ai;return ad};ad.resize=function(){if(p!==undefined){p.each(function(ai){d3.select(this).selectAll("svg").remove();if(ai.length==0){return}Q(this,ai)})}};return ad};advCharts.treemap=function(){var q={top:10,right:10,bottom:10,left:10},a=null,d=null,A=false,aj=d3.scale.linear(),W=["#607D8B","#FEBD43","#FF6060","#009688","#9C27B0","#2196F3","#3F51B5","#FF9800","#4CAF50","#F44336","#9E9E9E","#E91E63","#00BCD4","#FF5722","#795548","#673AB7","#8BC34A","#FFC107","#CDDC39"],ao="#F7F2F2",ah=d3.dispatch("advChartsTreemapLeafClick","advChartsTreemapParentClick","advChartsTreemapLeafDblClick"),aa="",f=7,I=2,M=4,G="sequential",am=["GnBu",7],ac=function(av){return av<0?"#75909A":-1},H,s=false,J=d3.scale.quantize(),b=d3.scale.threshold(),ab=d3.scale.ordinal().range(W),al=d3.scale.linear(),g=d3.scale.linear(),at=5,ad=true,aq,O=200,o,w,ae,p,E,t=false,U,K,an=500,Q,v,af,m=0,h,B,T;function ap(av){av.each(function(ax){if(ax.length==0||aa.vizVariables.color.column==undefined||aa.vizVariables.size.column==undefined||aa.columns==undefined||aa.hierarchy==undefined||aa.vizVariables==undefined){return}try{if(av.attr("id")==undefined){av.attr("id","advChartsTreemap")}w="#"+av.attr("id");ae=ax;h=aa.rootName!==undefined?aa.rootName:"All";colorField=aa.vizVariables.color.column;sizeField=aa.vizVariables.size.column;if(aa.color!==undefined){G=aa.color.colorScheme!==undefined?aa.color.colorScheme:G;am=aa.color.colorbrewerRange!==undefined?aa.color.colorbrewerRange:am;H=aa.color.colorRange!==undefined?aa.color.colorRange:H;s=aa.color.colorReverse!==undefined?aa.color.colorReverse:s}if(H===undefined){if(G=="sequential"){H=advCharts.colorbrewer[am[0]][9].slice(9-am[1],9)}else{if(G=="diverging"){H=advCharts.colorbrewer[am[0]][11].slice(5-Math.floor(am[1]/2),5+Math.ceil(am[1]/2))}}}H=s?H.reverse():H;E=(advCharts.tooltip().chartContainer(av.attr("id")).element("advChartsTreemapTooltipBox").enabled(true).positionFX("fixed").distance(5).offset(false))();var aw=d3.map(ax,function(aA){return aA[sizeField]}).keys();aq=Math.floor(d3.quantile(aw,0.05));aq=aq==undefined||aq==0?O:aq;aw.push(aq);if(ad){var az=d3.scale.linear().domain([0,d3.max(aw,function(aA){return +aA})]).range([1,100]);ax.forEach(function(aA){aA.zeroSize=0;aA.sizeFieldWithPad=aA[sizeField];if(aA[sizeField]==0){aA.sizeFieldWithPad=aq;aA.zeroSize=1}aA.skewSize=az(aA.sizeFieldWithPad)});aa.vizVariables.padding={column:"zeroSize",aggregation:"Max"};aa.vizVariables.linear={column:"skewSize",aggregation:"Sum"}}o=(advCharts.dataNest().data(ax).fieldTypes(aa.columns).hierarchy(aa.hierarchy).vizVariables(aa.vizVariables))();S(w,o);ar(ax)}catch(ay){return}});if(t){advCharts.throttle("resize","optimizedResize");window.addEventListener("optimizedResize",ap.resize)}}var S=function(ax,ay){try{var aw=d3.select(ax).node().getBoundingClientRect()}catch(az){return}a=aw.width-q.left-q.right;d=aw.height-q.top-q.bottom;if((d<=0||d==undefined)||(a<=0||a==undefined)){return}Q=d*0.04;d3.select(ax).selectAll("svg").remove();T=d3.select(ax).append("svg").attr("width",a+q.left+q.right).attr("height",d+q.top+q.bottom);var av=T.append("rect").attr("class","advCharts background").attr("x",0).attr("y",0).attr("width",a+q.left+q.right).attr("height",d+q.top+q.bottom).style("fill","white");af=T.append("g").attr("transform","translate("+q.left+","+Q+")");B=af.append("g").attr("class","advCharts treemap navigation");B.append("rect").attr("y",-Q).attr("x",2).attr("width",a-4).attr("height",Q).style("fill",ao);B.append("text").attr("class","advCharts treemap navigation label").attr("text-anchor","start").transition().duration(an).attr("x",function(aA){return f+2}).attr("y",function(aA){return -Q+Q*0.7});U=K=ay.nestedData();m=0;ak(U)};var ar=function(aM){if(aa.legend!==undefined&&aa.legend.type!==undefined){var aC=aa.legend.type.filter(function(aO){return aO!=="hierarchy"});p=aa.legend.parentDivSel;d3.select(p).selectAll("div").remove();d3.select(p).selectAll("svg").remove();var aA=d3.select(p);var av=aA.node().getBoundingClientRect();var aF=av.width/aC.length;var ax=av.height;aA.selectAll("div").data(aC).enter().append("div").attr("id",function(aP,aO){return"advChartsTreemapLegend"+(aO+1).toString()}).attr("width",aF).attr("height",ax).style("float","left");for(var aI=0;aI<aC.length;aI++){var aJ=aa.vizVariables[aC[aI]].column;var aL=aa.columns[aJ].label;var aB=aa.columns[aJ].format;var aG=aC[aI]=="size"?true:false;var aw="#advChartsTreemapLegend"+(aI+1).toString();var aH=d3.nest().key(function(aO){if(aC[aI]=="size"&&aO.zeroSize==1){return 0}else{return aO[aJ]}}).sortKeys(d3.ascending).rollup(function(aO){return aO.length}).entries(aM);var aD=d3.extent(aM,function(aO){if(aC[aI]=="size"&&aO.zeroSize==1){return 0}else{return +aO[aJ]}});if(aD[0]<0){aD[0]=1}var aK;if(aa.color.bins!==undefined){aK=aa.color.bins[aJ]!==undefined?aa.color.bins[aJ]:at}else{aK=undefined}if(aK!==undefined&&aK!=="minmax"){var ay=advCharts.dataBins().bins(aK).range(aD).size(aM.length)(aH)}else{var ay=[],aN=3,az=Math.round((aD[0]+aD[1])/2);if(aD[0]==aD[1]){aD[0]=aD[1]-1;ay.push({x2:aD[1]})}else{if(az==aD[0]||az==aD[1]){ay.push({x2:aD[0]});ay.push({x2:aD[1]})}else{ay.push({x2:aD[0]});ay.push({x2:az});ay.push({x2:aD[1]})}}}var aE=advCharts.legend().shape("rect").shapePadding(2).sizeEncoding(aG).color(am).colorRange(H).colorDomainType("ordinal").title(aL).titlePos("bottom").classPrefix("advCharts treemaplegendLinear").shapeRadius(8).colorScheme(G).legendWidth(aF).legendHeight(ax).formatType(aB).legendType(aC[aI]).margin({top:20,right:10,bottom:20,left:10}).colorReverse(s);if(aK=="minmax"){aE.bins(false).domain(aD)}d3.select(aw).datum(ay).call(aE)}}};function ak(aA){v=d3.layout.treemap().round(false).size([a,d]).sticky(true).value(function(aH){return aH.properties.skewSize_linear}).sort(function(aI,aH){return aI.value-aH.value}).padding([0,2,2,2]);nodes=v.nodes(aA);var ax=nodes.filter(function(aH){return !aH.children});var aC=nodes.filter(function(aH){return aH.children&&aH.name!==""});minColorVal=d3.min(ax,function(aH){return aH.properties!=undefined?aH.properties[colorField+"_color"]:0});maxColorVal=d3.max(ax,function(aH){return aH.properties!=undefined?aH.properties[colorField+"_color"]:1});minSizeVal=d3.min(ax,function(aH){return aH.properties!=undefined?aH.properties[sizeField+"_size"]:0});maxSizeVal=d3.max(ax,function(aH){return aH.properties!=undefined?aH.properties[sizeField+"_size"]:1});aj.domain([minColorVal,maxColorVal]).range([0.5,1]);ab.domain(aC.filter(function(aH){return aH.depth!==0}).map(function(aH){return aH.name}));var aG,az;if(minColorVal==maxColorVal){minColorVal=maxColorVal-1}if(aa.color.bins!==undefined){if(aa.color.bins[colorField]!==undefined){if(aa.color.bins[colorField]!=="minmax"){aG=aa.color.bins[colorField];b.domain(aG.slice(1,aG.length-1)).range(H);az=b}}else{aG=[minColorVal,maxColorVal];J.domain(aG).range(H);az=J}}else{aG=[minColorVal,maxColorVal];J.domain(aG).range(H);az=J}B.datum(aA.parent).style("cursor","pointer").on("click",function(aH){if(aA.parent!==undefined){ah.advChartsTreemapParentClick({name:aA.parent.name,depth:aA.parent.depth,children:aA.parent.children.length});L(aA,"UP")}else{ah.advChartsTreemapParentClick({name:aA.name,depth:aA.depth,children:aA.children.length})}}).select("text").style("cursor","pointer").text(V(aA)).on("click",function(aH){if(aA.parent!==undefined){ah.advChartsTreemapParentClick({name:aA.name,depth:aA.depth,children:aA.children.length});L(aA,"UP")}else{ah.advChartsTreemapParentClick({name:aA.name,depth:aA.depth,children:aA.children.length})}});var aE=af.selectAll(".advCharts.treemap.cell.child").data(ax);var av=aE.enter().append("g").attr("class","advCharts treemap cell child");var aF=av.append("rect").on("click",function(aI,aH){ah.advChartsTreemapLeafClick({name:aI.name,properties:aI.properties})}).on("dblclick",function(aI,aH){ah.advChartsTreemapLeafDblClick({name:aI.name,properties:aI.properties})}).attr("class","advCharts treemap childs").style("stroke","white").style("stroke-width",0.5).style("fill",function(aI){var aH=ac(aI.properties[colorField+"_color"]);if(typeof(aH)==="string"){return aH}else{if(G!=="qualitative"){return az(aI.properties[colorField+"_color"])}else{return ab(aI.parent.name)}}}).style("opacity",function(aH){return G!=="qualitative"?1:aj(aH.properties[colorField+"_color"])}).transition().duration(an).attr("x",function(aH){return aH.x}).attr("y",function(aH){return aH.y}).attr("width",function(aH){return aH.dx}).attr("height",function(aH){return aH.dy});if(aa.tooltip!==undefined){av.on("mousemove",function(aI){var aJ=d3.event.pageX-window.scrollX,aH=d3.event.pageY-window.scrollY;E.position({left:aJ,top:aH}).data(N(aI)).show()})}var aD=av.append("text").attr("class","advCharts treemap child label").attr("text-anchor","start").attr("x",function(aH){return aH.x+f}).attr("y",function(aH){return aH.y+Q*0.7+(aH.y==aH.parent.y?Q:0)}).style("fill",function(aH){return e(az(aH.properties[colorField+"_color"]))}).text(function(aH){return aH.name}).classed("LongLabel",function(aH){return this.getComputedTextLength()>aH.dx-5&&aH.dx>35}).style("display",function(aI){var aH=aI.y==aI.parent.y?Q+20:20;return aI.dy<aH||aI.dx<35?"none":"initial"}).transition().duration(an).attr("x",function(aH){return aH.x+f}).attr("y",function(aH){return aH.y+Q*0.7+(aH.y==aH.parent.y?Q:0)});d3.selectAll(".advCharts.treemap.child.label.LongLabel").call(ai,f,Q,false);var aB=af.selectAll(".advCharts.treemap.cell .parent").data(aC);var ay=aB.enter().append("g").attr("class","advCharts treemap cell parent");ay.append("rect").on("click",function(aI,aH){if(aI.depth!==0){ah.advChartsTreemapParentClick({name:aI.name,depth:aI.depth,children:aI.children.length});L(aI,"DOWN")}else{ah.advChartsTreemapParentClick({name:aI.name,depth:aI.depth,children:aI.children.length})}}).on("mouseenter",function(aH){E.hide()}).attr("class","advCharts treemap parents").style("fill",ao).style("stroke","white").style("stroke-width",3).transition().duration(an).attr("x",function(aH){return aH.x}).attr("y",function(aH){return aH.y}).attr("width",function(aH){return aH.dx}).attr("height",Q);d3.select(w).on("mouseleave",E.hide);window.addEventListener("scroll",E.hide);var aw=ay.append("text").attr("class","advCharts treemap parent label").attr("text-anchor","start").text(function(aH){return aH.name===""&&aH.depth==0?h:aH.name}).classed("LongLabel",function(aH){return this.getComputedTextLength()>aH.dx-5}).on("click",function(aI,aH){if(aI.depth!==0){ah.advChartsTreemapParentClick({name:aI.name,depth:aI.depth,children:aI.children.length});L(aI,"DOWN")}else{ah.advChartsTreemapParentClick({name:aI.name,depth:aI.depth,children:aI.children.length})}}).transition().duration(an).attr("x",function(aH){return aH.x+5}).attr("y",function(aH){return aH.y+Q*0.65});d3.selectAll(".advCharts.treemap.parent.label.LongLabel").call(ai,f,0,true)}function L(aw,av){af.selectAll(".cell").remove();if((m!==aw.depth&&m!==(aw.depth-1)&&m!==0)&&av=="UP"){ak(aw.parent)}else{if(av=="DOWN"){m=aw.depth;ak(aw)}}}function V(av){return av.parent?V(av.parent)+" / "+av.name:(av.name==""?h:av.name)}function n(av){if(av!==undefined&&o!==undefined&&ae!==undefined){d3.select(w).selectAll("svg").remove();d3.select(w).selectAll("div").remove();d3.select(p).selectAll("div").remove();d3.select(p).selectAll("svg").remove();S(w,o);ar(ae)}}function ai(ay,ax,av,aw){ay.each(function(){var aK=d3.select(this),aD=aK.datum(),aB=aD.dx-ax-I,aJ=aD.y==aD.parent.y,aM=aJ?(aD.dy-M-av):(aD.dy-M),aE=aK.text().split(/\s+/).reverse(),aA=15,aL=18;if(aE.length>0&&aB>aA&&aM>aL){var az,aO=[],aC=0,aI=1.3,aH=aK.attr("x"),aG=aK.attr("y"),aN=parseFloat(aK.attr("dy")==undefined?0:aK.attr("dy")),aF=aK.text(null).append("tspan").attr("x",aH).attr("y",aG).attr("dy",aN+"em");while(az=aE.pop()){aO.push(az);aF.text(aO.join(" "));if(aF.node().getComputedTextLength()>aB&&(aC>0||aO.length>1)&&!aw&&aM>aL){aO.pop();aF.text(aO.join(" "));aF.text(aF.text()+"..");if(aF.node().getComputedTextLength()>aB){aO.pop();aF.text(aO.join(" "));aF.text(aF.text()+"..")}break}else{if(aF.node().getComputedTextLength()>aB&&aB>aA&&aM>aL){R(aF,aB,I)}}}}else{aK.style("display","none")}})}function R(aA,ax,ay){var av=aA,aw=av.node().getComputedTextLength(),az=av.text();while(aw>(ax-2*ay)&&az.length>0){az=az.slice(0,-1);av.text(az+"..");aw=av.node().getComputedTextLength()}}function N(aB){var ay={};for(var aw=0;aw<aa.tooltip.length;aw++){var aA=aa.columns[aa.tooltip[aw]].format,ax=aa.tooltip[aw],av=aa.columns[aa.tooltip[aw]].label,az=D(aA);if(ax!==colorField&&ax!==sizeField){ay[av]=az(aB.name)}else{if(ax===colorField){if(aB.properties[colorField+"_color"]<0){ay[av]="N/A"}else{ay[av]=az(aB.properties[colorField+"_color"])}}else{if(ax===sizeField){if(aB.properties.zeroSize_padding==1){ay[av]=az(0)}else{ay[av]=az(aB.properties[sizeField+"_size"],1)}}}}}return ay}function D(av){var aw;switch(av){case"number":aw=au;break;case"bytes":aw=P;break;case"time":aw=Z;break;default:aw=function(ax){return ax};break}return aw}function C(ax){var aw={};var ay=Object.keys(vizOptions.columns);var av=vizOptions.hierarchy;ay.forEach(function(az){if(az==colorField){aw[az]=ax.properties[az+"_color"]}else{if(az==sizeField){aw[az]=ax.properties[az+"_size"]}else{if(az=="zeroSize_padding"){}else{aw[az]=ax.properties[az]}}}});aw[av[0]]=ax.parent.name;aw[av[1]]=ax.name;return aw}function u(ax){var aw={};var av=vizOptions.hierarchy;aw[av[0]]=ax.name;aw.depth=ax.depth;aw.children=ax.children.length;return aw}function F(){d3.select("#advChartsHeatmapTooltipBox").remove();d3.select(".advCharts.adv-tooltip.av-arrow-box.option-btn").remove()}var P=function(ax,ay){var aw=d3.round;if(ax<1024){return(z(ax)?ax:aw(ax,ay))+" B"}else{if(ax<1024*1024){var az=ax/1024;return(z(az)?az:aw(az,ay))+" KB"}else{if(ax<1024*1024*1024){var az=ax/1024/1024;var av=(z(az)?az:aw(az,ay));return(z(az)?az:aw(az,ay))+" MB"}else{if(ax<1024*1024*1024*1024){var az=ax/1024/1024/1024;return(z(az)?az:aw(az,ay))+" GB"}else{var az=ax/1024/1024/1024/1024;return(z(az)?az:aw(az,ay))+" TB"}}}}};var au=function(ax,ay){var aw=d3.format("."+ay+"f");if(ax<1000){return(z(ax)?ax:aw(ax))}else{if(ax<10000000){var az=ax/1000;return(z(az)?az:aw(az))+"K"}else{if(ax<1000000000){var az=ax/1000000;var av=(z(az)?az:aw(az));return(z(az)?az:aw(az))+"M"}else{if(ax<1000000000000){var az=ax/1000000000;return(z(az)?az:aw(az))+"B"}}}}};var z=function(aw){var av=typeof aw==="number"&&isFinite(aw)&&Math.floor(aw)===aw;return av};function Z(av,ax){var aw,av=av||-1;if(ax==="hour"){aw=d3.time.format("%I %p")}else{if(ax==="min"){aw=d3.time.format("%M:%S")}else{if(ax==="day"){aw=d3.time.format("%d/%m")}}}if(av===-1){return aw}else{return aw(av)}}function e(az){var av=71;var aw=0.5;var ay=ag(az);var ax=(ay.R*0.299)+(ay.G*0.587)+(ay.B*0.114);var aA=ax/255;return(aA>=aw)?"#000000":"#FFFFFF"}function ag(aw){var ay=aw.substring(1,3);var ax=aw.substring(3,5);var av=aw.substring(5,7);return{R:parseInt(ay,16),G:parseInt(ax,16),B:parseInt(av,16)}}ap.margin=function(av){if(!arguments.length){return q}q=av;return ap};ap.width=function(av){if(!arguments.length){return a}a=av;return ap};ap.height=function(av){if(!arguments.length){return d}d=av;return ap};ap.config=function(av){if(!arguments.length){return aa}aa=av;return ap};ap.seqColor=function(av){if(!arguments.length){return seqColor}seqColor=av;return ap};ap.colorbrewerRange=function(av){if(!arguments.length){return am}am=av;return ap};ap.anomalyColors=function(av){if(!arguments.length){return ac}ac=av;return ap};ap.zeroSizePadding=function(av){if(!arguments.length){return ad}ad=av;return ap};ap.sizePaddingVal=function(av){if(!arguments.length){return aq}aq=av;return ap};ap.autoResize=function(av){if(!arguments.length){return t}t=av;return ap};ap.resize=function(){n(w)};ap.dispatch=ah;return ap};rdx.bar_chart=function(b,a){this._parent=b;this._DEFAULT_PROPERTIES={value:0,class_names:"bar_chart"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._properties.value=Math.min(100,Math.max(0,this._properties.value));this._bar_chart=null};rdx.bar_chart.prototype.render=function(){var d=$("<div>").addClass("background").width("100%");var a=$("<div>").addClass("foreground").width(this._properties.value+"%");var b=$("<div>").addClass("label").append(this._properties.value);this._bar_chart=$("<div>").addClass(this._properties.class_names).append(d).append(a).append(b);if(this._parent){this._parent.append(this._bar_chart)}return this._bar_chart};rdx.chart_constants=new function(){this.LINE="line";this.SPLINE="spline";this.STEP_LINE="stepline";this.SCATTER="scatter";this.BAR="bar";this.STACKED_BAR="sbar";this.COLUMN="column";this.STACKED_COLUMN="scolumn";this.FLAGS="flags";this.PIE="pie";this.FLAGS="flags";this.AREA="area";this.STACKED_AREA="sarea";this.AREA_SPLINE="areaspline";this.STACKED_AREA_SPLINE="stackedareaspline";this.CIRCLE_SYMBOL="circle";this.DIAMOND_SYMBOL="diamond";this.SQUARE_SYMBOL="square";this.TRIANGLE_SYMBOL="triangle";this.TRANGLE_DOWN_SYMBOL="triangle-down";this.SOLID="Solid";this.SHORT_DASH="ShortDash";this.SHORT_DOT="ShortDot";this.SHORT_DASH_DOT="ShortDashDot";this.SHORT_DASH_DOT_DOT="ShortDashDotDot";this.DOT="Dot";this.DASH="Dash";this.LONG_DASH="LongDash";this.DASH_DOT="DashDot";this.LONG_DASH_DOT="LongDashDot";this.LONG_DASH_DOT_DOT="LongDashDotDot";this.FONT_FAMILY='citrixsans, "Segoe UI", "Trebuchet MS", MS,Tahoma, Arial, sans-serif; color:#4d4f53';this.STACKING="normal";this.BACKGROUND_COLOR="#FFF";this.MAX_LABEL_LENGTH=15;this.CURRENT="Current";this.AVERAGE="Average";this.PEAK="Peak";this.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"]};rdx.chart_utils=new function(){this._initialized=false;this.initialize_globals=function(b){this.set_global_options(b);if(this._initialized){return}Highcharts.setOptions({lang:{decimalPoint:rdx.chart_utils.get_decimal_separator(),thousandsSep:rdx.chart_utils.get_grouping_separator(),resetZoomTitle:rdx.i18n.get_string("rdx.chart_reset_zoom_title")}});this._initialized=true};this.set_global_options=function a(b){Highcharts.setOptions({global:b})};this.calculate_min=function(b,e,f,g){var d=g?g:Number.MAX_VALUE;for(i=0,end_index=b.length;i<end_index;i++){var h=e?b[i][e]:b[i];if(f){h=(Math.ceil(h)+"").length}if(h<d){d=h}}if(d==Number.MAX_VALUE){d=Number.NaN}return d};this.calculate_max=function(d,e,f,h){var b=h?h:Number.MIN_VALUE;for(i=0,end_index=d.length;i<end_index;i++){var g=e?d[i][e]:d[i];if(f){g=(Math.ceil(g)+"").length}if(g>b){b=g}}if(b==Number.MIN_VALUE){b=Number.NaN}return b};this.calculate_min_object=function(b,d,f,g){var e=new Object();e[d]=Number.MAX_VALUE;if(rdx.utils.is_defined(b)&&b!=null){for(i=0,end_index=b.length;i<end_index;i++){var h=d?b[i][d]:b[i];if(f){h=(Math.ceil(h)+"").length}if(h<e[d]){e=b[i]}}}if(e[d]==Number.MAX_VALUE){e[d]=Number.NaN}return e};this.calculate_max_object=function(b,d,f,e){var h=new Object();h[d]=-1;if(rdx.utils.is_defined(b)&&b!=null){for(i=0,end_index=b.length;i<end_index;i++){var g=d?b[i][d]:b[i];if(f){g=(Math.ceil(g)+"").length}if(g>h[d]){h=b[i]}}}if(h[d]==Number.MIN_VALUE){h[d]=Number.NaN}return h};this.calculate_percentile=function(d,e,b){if(rdx.utils.is_defined(d,b)){if(d.length==0){return 0}d=rdx.utils.clone_array(d).sort(function g(m,h){return e?m[e]-h[e]:m-h});var f=Math.round(Number(((b*d.length)/100)));return d[f-1][e]}};this.format_number=function(b){if(rdx.utils.is_defined(b)){var d=(b+"").indexOf(".")==-1?0:2;return Highcharts.numberFormat(b,d,rdx.chart_utils.get_decimal_separator(),rdx.chart_utils.get_grouping_separator())}};this.is_array=function(b){return rdx.utils.is_array(b)};this.get_decimal_separator=function(){return rdx.i18n.get_decimal_separator()};this.get_grouping_separator=function(){return rdx.i18n.get_grouping_separator()};this.trim_label=function(b){if(b.length>rdx.chart_constants.MAX_LABEL_LENGTH){b=b.substring(0,rdx.chart_constants.MAX_LABEL_LENGTH)+"..."}return b}};rdx.chart=function(d,a,b){this._parent=typeof(d)=="string"?$("#"+d):d;this._chart_div=$("<div>");this._view_definition=b;this._no_data_div=$("<div>").addClass("chart_view_chart_no_data").css("display","none");this._DEFAULT_PROPERTIES={title:null,enable_legend:null,enable_legend_show_hide:false,secondary_y_axis:-1,tertiary_y_axis:-1,zoom:"",link_text:"",link_title:"",link_url:"",max_number_of_symbols:25,max_number_of_points:-1,plot_border_width:1,percentile:95,progress_image:false,type:rdx.chart_constants.LINE,use_UTC:false,point_select_callback:null,chart_click_callback:null,is_date_time_xaxis:true,categories:[],is_opposite_xaxis:false,legend_reversed:false,class_names:"chart",verticalAlign:null,floating:null,range_selector_enabled:false,navigator_enabled:false,navigator_height:40,scrollbar_enabled:false,subtitle:rdx.i18n.get_string("rdx.chart_zoom_title"),turbo_threshold:1000,tick_color:"#CCCCCC",x_axis_grid_line_style:rdx.chart_constants.SOLID,y_axis_grid_line_style:rdx.chart_constants.SOLID,x_axis_label_spacing:100,x_axis_label_enabled:true,y_axis_label_spacing:72,y_axis_line_width:1,y_axis_plot_lines:null,y_axis_grid_line_color:"#e4e7ea",y_axis_offset:0,y_axis_tick_width:1,x_axis_line_color:"#ACADAE",yaxis_data_label:false,xaxis_in_data_label:false,pie_size:"100%",show_grid:true,height:400,width:350,spacing_bottom:15,spacing_left:10,spacing_right:20,margin_left:null,margin_top:null,x_axis_label_renderer_callback:null,y_axis_label_renderer_callback:null,secondary_y_axis_label_renderer_callback:null,tertiary_y_axis_label_renderer_callback:null,on_hover_details_callback:null,on_mouse_out_callback:null,legend_width:null,legend_y_spacing:0,legend_x_spacing:0,always_show_min_max:false,dont_show_data_on_mouse_over:false,zIndex:null,show_time_on_mouseOver:false,is_percent:false,show_percent_in_pie_tooltip:false,y_axis_series_color:false,yaxis_label_font_size:"11px",xaxis_label_font_size:"11px",innerSize:0,borderWidth:3,use_html:null,legend_symbol_radius:null,legend_symbol_height:12,legend_symbol_width:10,slicedOffset:20,show_key_in_label:false,fix_size:false,title_margin:20,show_data_labels:null,yaxis_max_value:null,yaxis_min_value:0,yaxis_title:null,secondary_yaxis_title:null,plot_line_width:3,fill_opacity:0.1,yaxis_grid_line_width:null,colors:["#248E9A","#47c2f5","#ebb352","#8cc586","#b8b5db","#e0e0e0","#4BABFE","#AC6BE1","#16C0E7","#FFCB00","#ff7f2a","#ffd332","#1bae44","#c5881c","#09c0e3","#CC5480","#ef3124","#ff6666","#9933ff","#008fc7","#6a93c7","#cc3333","#ffbe00","#993333","#006600","#990099","#ff9966","#99ff99","#9999ff","#cc6600","#33cc33","#cc99ff","#669999","#99cc66","#009999","#386398","#db4c3c","#0000ff","#00ff00","#ffcc99","#999999","#ff3333","#6666ff","#ffff00","#000000"],legend_alignment:null,legend_position:null,legend_font_size:"12px",legend_layout:null,threshold:null,threshold_label:"",threshold_color:"ff0000",tooltip_enabled:true,tooltipshared:false,crosshair:false,on_complete_callback:null,pointWidth:"25",label_color:"#2A2723",fill_color:"#FFFFFF",attach_high_low_percentile_in_legend:false,fixed_legend_width:null,custom_legend_symbols:null,legend_title:null,hide_stacked_labels:false,histogram:false,reset_zoom_button:{theme:{fill:"#fff",stroke:"#C0C0C0",r:2,states:{hover:{fill:"#41739D",style:{color:"#fff"}}}}},selection_rectangle:false,set_series_data_callback:null,column_border_radius:4,column_border:0,highchart:true,minrange:0,dash_style_options:["Solid","Dot","ShortDot","Dash","LongDash","ShortDash","DotDash","ShortDashDot","ShortDashDotDot","LongDashDotDot"],y_axis_labels:true,legend_custom_click:null,modify_series_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);if(this._properties.type==rdx.chart_constants.PIE){this._properties.is_date_time_xaxis=false;this._properties.plot_border_width=0}if(rdx.utils.is_defined(this._properties.no_chart_data)){this._no_data_div.text(rdx.i18n.get_string(this._properties.no_chart_data))}else{this._no_data_div.text(rdx.i18n.get_string("rdx.chart_view_no_data_to_display"))}if(rdx.utils.is_not_defined(this._properties.enable_legend)){this._properties.enable_legend=this._properties.type!=rdx.chart_constants.PIE}this._symbols_disabled=false;this._chart=null;this._percentage_y_axes=new Object();var e=this;this._legendPointClickEvent={legendItemClick:function(f){if(e._properties.legend_custom_click){e._properties.legend_custom_click.call_back([e._chart,this])}else{if(e._properties.enable_legend_show_hide==true){f.browserEvent.stopImmediatePropagation();return true}}return false}}};rdx.chart.prototype.set_property=function(a,b){this._properties[a]=b};rdx.chart.prototype.render=function(m){if(this._properties.type==rdx.chart_constants.PIE&&m.length>1){throw rdx.i18n.get_string("rdx.chart_pie_error")}this._chart_div.addClass(this._properties.class_names);this._render_series=m;this._parent.append(this._chart_div);this._parent.append(this._no_data_div);var B=rdx.utils.is_defined(rdx.display_time_in_GMT)?rdx.display_time_in_GMT:this._properties.use_UTC;var H={useUTC:B,timezoneOffset:undefined};if(rdx.utils.is_function(rdx.export_chart_in_browser_timezone)){H=rdx.export_chart_in_browser_timezone(H)}rdx.chart_utils.initialize_globals(H);var L=$(document.createElement("span")).data("ns_percentile",this._properties.percentile);if(this._properties.type!=rdx.chart_constants.PIE){if(rdx.utils.is_defined(this._properties.always_show_min_max)&&this._properties.always_show_min_max){var S=L.data("ns_percentile");var q=rdx.i18n.get_string("rdx.chart_percentile");var ac="";var p=this._properties.show_time_on_mouseOver;if(rdx.utils.is_defined(m)&&m.length){var am="";if(rdx.utils.is_defined(m[0].data)&&m[0].data.length){var K=rdx.chart_utils.calculate_max_object(m[0].data,"y");var u=rdx.chart_utils.calculate_min_object(m[0].data,"y");var O=this.format_y_axis_data(K.y);var g=this.format_y_axis_data(u.y);ac=this.format_y_axis_data(rdx.chart_utils.calculate_percentile(m[0].data,"y",S));var aa,v;aa=v="";if(p&&rdx.utils.is_defined(this._properties.is_date_time_xaxis)&&this._properties.is_date_time_xaxis){aa=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",K.x)+") ";v=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",u.x)+") ";am="<b>"+m[0].name+"</b> - "+rdx.i18n.get_string("rdx.chart_high")+": <b>"+O+"</b>"+aa+" "+rdx.i18n.get_string("rdx.chart_low")+": <b>"+g+"</b> "+v}else{am="<b>"+m[0].name+"</b> - "+rdx.i18n.get_string("rdx.chart_high")+": <b>"+O+"</b> "+rdx.i18n.get_string("rdx.chart_low")+": <b>"+g+"</b> "}am=am+S+"<sup>th</sup> "+q+" <b>"+ac+"</b>"}if(rdx.utils.is_defined(m[1])&&rdx.utils.is_defined(m[1].data)&&m[1].data.length){var Z=rdx.chart_utils.calculate_max_object(m[1].data,"y");var ak=rdx.chart_utils.calculate_min_object(m[1].data,"y");var U=this.format_secondary_y_axis_data(Z.y);var t=this.format_secondary_y_axis_data(ak.y);ac=this.format_secondary_y_axis_data(rdx.chart_utils.calculate_percentile(m[1].data,"y",S));var ab,A;ab=A="";if(p&&rdx.utils.is_defined(this._properties.is_date_time_xaxis)&&this._properties.is_date_time_xaxis){ab=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",Z.x)+") ";A=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ak.x)+") ";am=am+"<br> <b>"+m[1].name+"</b> - High: <b>"+U+"</b>"+ab+" Low: <b>"+t+"</b> "+A}else{am=am+" <br> <b> "+m[1].name+"</b> - High: <b>"+U+"</b> Low: <b>"+t+"</b> "}am=am+S+"<sup>th</sup> "+q+" <b>"+ac+"</b>"}if(rdx.utils.is_defined(m[2])&&rdx.utils.is_defined(m[2].data)&&m[2].data.length){var Z=rdx.chart_utils.calculate_max_object(m[2].data,"y");var ak=rdx.chart_utils.calculate_min_object(m[2].data,"y");var U=this.format_secondary_y_axis_data(Z.y);var t=this.format_secondary_y_axis_data(ak.y);ac=this.format_secondary_y_axis_data(rdx.chart_utils.calculate_percentile(m[2].data,"y",S));var ab,A;ab=A="";if(p&&rdx.utils.is_defined(this._properties.is_date_time_xaxis)&&this._properties.is_date_time_xaxis){ab=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",Z.x)+") ";A=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ak.x)+") ";am=am+"<br> <b>"+m[2].name+"</b> - High: <b>"+U+"</b>"+ab+" Low: <b>"+t+"</b> "+A}else{am=am+" <br> <b> "+m[2].name+"</b> - High: <b>"+U+"</b> Low: <b>"+t+"</b> "}am=am+S+"<sup>th</sup> "+q+" <b>"+ac+"</b>"}L.addClass("min_max_percentile_show_always").css("top",rdx.utils.is_defined(this._properties.title)?15:-30);L.html(am)}}else{L.addClass("min_max_percentile").css("top",rdx.utils.is_defined(this._properties.title)?15:0)}}var ae=this;var F=(rdx.utils.is_defined(this._properties.categories)&&this._properties.categories.length>0)?this._properties.categories:this._get_categories(m);var G={chart:{alignTicks:false,renderTo:this._chart_div.get(0),backgroundColor:"transparent",borderWidth:0,defaultSeriesType:this._properties.type,plotBorderWidth:this._properties.plot_border_width,plotBorderColor:"#E9E9E9",reflow:true,spacingBottom:this._properties.spacing_bottom,spacingLeft:this._properties.spacing_left,spacingRight:this._properties.spacing_right,marginLeft:this._properties.margin_left,marginTop:this._properties.margin_top,spacingTop:rdx.utils.is_defined(this._properties.title)?2:20,zoomType:this._properties.zoom,resetZoomButton:this._properties.reset_zoom_button,events:{click:this._properties.chart_click_callback==null?null:function(an){if(rdx.utils.is_defined(ae._selection_rectangle)){ae._selection_rectangle.remove();if(rdx.utils.is_defined(ae._view_definition)){$(ae._view_definition).trigger(rdx.events.VIEW_SELECTION_CHANGED,[null,false])}}ae._properties.chart_click_callback.call_back([this,ae])},selection:rdx.utils.is_defined(this._properties.selection_click_handler)?function(aq){var at=rdx.utils.is_defined(aq.xAxis)?true:false;var av=null;if(at){var au=aq.xAxis[0].min;var ao=aq.xAxis[0].max;if(ae._properties.type==rdx.chart_constants.COLUMN||ae._properties.type==rdx.chart_constants.STACKED_COLUMN){var an=aq.xAxis[0].axis.categories;var ap=Math.floor(Math.abs(au));var ar=Math.floor(Math.abs(ao));av=an.slice(ap,ar+1)}else{av=[];av.push(au);av.push(ao)}}if(ae._properties.selection_rectangle){ae._draw_rectangle_on_selection(aq,ae._chart)}if(rdx.utils.is_defined(ae._view_definition)){$(ae._view_definition).trigger(rdx.events.VIEW_SELECTION_CHANGED,[av,at])}return ae._properties.selection_click_handler.call_back([aq,ae])}:null},height:this._get_height(),width:rdx.utils.is_defined(this._properties.chart_width)?this._properties.chart_width:null,margin:this._properties.margin,skipClone:rdx.utils.is_defined(this._properties.sparkline_charts)&&this._properties.sparkline_charts?false:null},credits:{enabled:false},legend:{title:{text:this._properties.legend_title,style:{fontStyle:"regular"}},align:rdx.utils.is_defined(this._properties.legend_alignment)?this._properties.legend_alignment:(this._properties.type==rdx.chart_constants.PIE?"right":"center"),verticalAlign:rdx.utils.is_defined(this._properties.legend_position)?this._properties.legend_position:(this._properties.type==rdx.chart_constants.PIE?"top":"bottom"),y:this._properties.legend_y_spacing,x:this._properties.legend_x_spacing,borderWidth:0,enabled:this._properties.enable_legend,itemStyle:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:this._properties.legend_font_size,fontWeight:(this._properties.type==rdx.chart_constants.STACKED_BAR||this._properties.type==rdx.chart_constants.STACKED_COLUMN)?"normal":"bold",color:this._properties.label_color,cursor:"default"},itemHoverStyle:{color:"#2A2723",cursor:"default"},reversed:this._properties.legend_reversed,lineHeight:20,symbolWidth:(this._properties.type==rdx.chart_constants.SPLINE)?60:this._properties.legend_symbol_width,symbolHeight:this._properties.legend_symbol_height,symbolRadius:this._properties.legend_symbol_radius,useHTML:false,layout:rdx.utils.is_defined(this._properties.legend_layout)?this._properties.legend_layout:(this._properties.type==rdx.chart_constants.PIE?"vertical":"horizontal"),width:null,itemMarginTop:this._properties.type==rdx.chart_constants.PIE?(rdx.utils.is_defined(this._properties.legend_margin_top)?this._properties.legend_margin_top:5):0,itemMarginBottom:this._properties.type==rdx.chart_constants.PIE?(rdx.utils.is_defined(this._properties.legend_margin_bottom)?this._properties.legend_margin_bottom:5):0,labelFormatter:function(){if(ae._properties.attach_high_low_percentile_in_legend==true){var aE=L.data("ns_percentile");var ap=rdx.i18n.get_string("rdx.chart_percentile");var aD=this.name;var aB=ae._properties.show_time_on_mouseOver;var ar=null;if(!(rdx.utils.is_defined(ae._properties.always_show_min_max)&&ae._properties.always_show_min_max)){if(rdx.utils.is_defined(m)&&m.length){for(var au=0,aA=m.length;au<aA;au++){var az=m[au]["name"];if(rdx.utils.is_defined(az)&&az==aD){ar=m[au]["data"];break}}}var at="";if(ar.length!=0){var ax=rdx.chart_utils.calculate_max_object(ar,"y");var ay=rdx.chart_utils.calculate_min_object(ar,"y");var ao=ae.format_y_axis_data(ax.y);var an=ae.format_y_axis_data(ay.y);var aw=new Array();if(rdx.utils.is_not_empty(this.xData)&&rdx.utils.is_not_empty(this.yData)){for(var aq=0;aq<this.yData.length;aq++){aw.push({x:this.xData[aq],y:this.yData[aq]})}ac=ae.format_y_axis_data(rdx.chart_utils.calculate_percentile(aw,"y",aE))}var aC,av;aC=av="";if(aB&&rdx.utils.is_defined(ae._properties.is_date_time_xaxis)&&ae._properties.is_date_time_xaxis){aC=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ax.x)+") ";av=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ay.x)+") ";at="<b>"+aD+"</b> - "+rdx.i18n.get_string("rdx.chart_high")+": <b>"+ao+"</b>"+aC+" "+rdx.i18n.get_string("rdx.chart_low")+": <b>"+an+"</b> "+av}else{at="<b>"+aD+"</b> - "+rdx.i18n.get_string("rdx.chart_high")+": <b>"+ao+"</b> "+rdx.i18n.get_string("rdx.chart_low")+": <b>"+an+"</b> "}at=at+aE+"<sup>th</sup> "+ap+" <b>"+ac+"</b>"}return at}}else{if(ae._properties.type==rdx.chart_constants.PIE){if(ae._properties.is_percent){return this.name+" ( "+this.y+"% ) "}else{return this.name+" ( "+ae.format_y_axis_data(this.y)+" ) "}}else{return this.name}}}},loading:{hideDuration:500,showDuration:500,labelStyle:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:"11px",fontWeight:"bold",color:"#2A2723",top:"50%"},style:{backgroundColor:rdx.chart_constants.BACKGROUND_COLOR,opacity:0.8}},plotOptions:{area:{fillOpacity:0.2,zIndex:this._properties.zIndex,lineWidth:rdx.utils.is_defined(this._properties.line_width)?this._properties.line_width:2,marker:{enabled:true,lineWidth:rdx.utils.is_defined(this._properties.marker_line_width)?this._properties.marker_line_width:2,radius:rdx.utils.is_defined(this._properties.marker_radius)?this._properties.marker_radius:3,symbol:rdx.chart_constants.CIRCLE_SYMBOL},events:this._legendPointClickEvent},areaspline:{lineWidth:this._properties.plot_line_width,zIndex:this._properties.zIndex,turboThreshold:this._properties.type.turbo_threshold,fillOpacity:this._properties.fill_opacity,shadow:false,marker:{symbol:rdx.chart_constants.CIRCLE_SYMBOL,enabled:true,radius:4,lineWidth:2,lineColor:"#fff"},events:this._legendPointClickEvent},bar:{minPointLength:2,zIndex:this._properties.zIndex,pointWidth:this._properties.pointWidth,shadow:false,cursor:"pointer",events:this._legendPointClickEvent},column:{minPointLength:2,zIndex:this._properties.zIndex,pointWidth:this._properties.pointWidth,shadow:false,borderWidth:this._properties.type==rdx.chart_constants.STACKED_BAR||this._properties.type==rdx.chart_constants.STACKED_COLUMN?1:this._properties.column_border,borderRadius:this._properties.type==rdx.chart_constants.COLUMN||this._properties.type==rdx.chart_constants.STACKED_BAR||this._properties.type==rdx.chart_constants.STACKED_COLUMN?0:this._properties.column_border_radius,events:this._legendPointClickEvent,cursor:"pointer",dataLabels:{enabled:this._properties.yaxis_data_label,align:"center",style:{fontWeight:"bold",color:(Highcharts.theme&&Highcharts.theme.textColor)||"#666"},formatter:function(){return this.y}}},line:{lineWidth:2,zIndex:this._properties.zIndex,shadow:false,marker:{symbol:rdx.chart_constants.CIRCLE_SYMBOL},events:this._legendPointClickEvent,softThreshold:false},pie:{point:{events:this._legendPointClickEvent},dataLabels:rdx.utils.is_defined(this._properties.show_data_labels)?this._properties.show_data_labels:{connectorPadding:4,distance:10,formatter:function(){if(rdx.utils.is_defined(this.key)){var an=this.key;if(rdx.utils.is_defined(ae._properties.data_label_renderer)){an=ae._properties.data_label_renderer.call_back([{data_label:an},"data_label"])}return an}else{return this}},enabled:rdx.utils.is_defined(this._properties.title_resource_key)?false:!this._properties.enable_legend},slicedOffset:this._properties.slicedOffset,showInLegend:this._properties.enable_legend,cursor:"pointer",size:this._properties.pie_size,shadow:false,borderWidth:this._properties.borderWidth,innerSize:this._properties.innerSize?"70%":null},scatter:{marker:{symbol:rdx.chart_constants.CIRCLE_SYMBOL,radius:4},events:this._legendPointClickEvent},spline:{lineWidth:3,zIndex:this._properties.zIndex,turboThreshold:this._properties.type.turbo_threshold,fillOpacity:0.1,shadow:false,marker:{symbol:rdx.chart_constants.CIRCLE_SYMBOL,enabled:true,radius:4,lineWidth:2,lineColor:"#fff"},events:this._legendPointClickEvent,softThreshold:false},series:{allowPointSelect:this._properties.point_select_callback!=null?true:false,enableMouseTracking:rdx.utils.is_defined(rdx.view_selection_from_query_string)?false:true,events:{mouseOver:(this._properties.type==rdx.chart_constants.PIE||(rdx.utils.is_defined(this._properties.dont_show_data_on_mouse_over)&&this._properties.dont_show_data_on_mouse_over))?function(){}:function(){var aD=L.data("ns_percentile");var an=rdx.i18n.get_string("rdx.chart_percentile");var ap="";var aM=this.name;var aC=ae._chart.series;var aF=ae._properties.show_time_on_mouseOver;var aK=null;if(!(rdx.utils.is_defined(ae._properties.always_show_min_max)&&ae._properties.always_show_min_max)){if(rdx.utils.is_defined(aC)&&aC.length){for(var aJ=0,aQ=aC.length;aJ<aQ;aJ++){var au=aC[aJ]["name"];if(rdx.utils.is_defined(au)&&au==aM){aK=aC[aJ]["data"];break}}}var ar="";if(aJ==0||(ae._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE)||(ae._properties.type==rdx.chart_constants.STACKED_AREA)){var aE=rdx.chart_utils.calculate_max_object(aK,"y");var ao=rdx.chart_utils.calculate_min_object(aK,"y");var aL=ae.format_y_axis_data(aE.y);var at=ae.format_y_axis_data(ao.y);ap=ae.format_y_axis_data(rdx.chart_utils.calculate_percentile(this.data,"y",aD));var aB,aP;aB=aP="";if(aF&&rdx.utils.is_defined(ae._properties.is_date_time_xaxis)&&ae._properties.is_date_time_xaxis){aB=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",aE.x)+") ";aP=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ao.x)+") ";ar="<b>"+aM+"</b> - "+rdx.i18n.get_string("rdx.chart_high")+": <b>"+aL+"</b>"+aB+" "+rdx.i18n.get_string("rdx.chart_low")+": <b>"+at+"</b> "+aP}else{ar="<b>"+aM+"</b> - "+rdx.i18n.get_string("rdx.chart_high")+": <b>"+aL+"</b> "+rdx.i18n.get_string("rdx.chart_low")+": <b>"+at+"</b> "}ar=ar+aD+"<sup>th</sup> "+an+" <b>"+ap+"</b>"}else{if(aJ==1||(ae._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE)||(ae._properties.type==rdx.chart_constants.STACKED_AREA)){var ay=rdx.chart_utils.calculate_max_object(aK,"y");var aO=rdx.chart_utils.calculate_min_object(aK,"y");var aI=ae.format_secondary_y_axis_data(ay.y);var aH=ae.format_secondary_y_axis_data(aO.y);ap=ae.format_secondary_y_axis_data(rdx.chart_utils.calculate_percentile(this.data,"y",aD));var aA,aN;aA=aN="";if(aF&&rdx.utils.is_defined(ae._properties.is_date_time_xaxis)&&ae._properties.is_date_time_xaxis){aA=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ay.x)+") ";aN=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",aO.x)+") ";ar="<b>"+aM+"</b> - High: <b>"+aI+"</b>"+aA+" Low: <b>"+aH+"</b> "+aN}else{ar="<b>"+aM+"</b> - High: <b>"+aI+"</b> Low: <b>"+aH+"</b> "}ar=ar+aD+"<sup>th</sup> "+an+" <b>"+ap+"</b>"}else{if(aJ==2||(ae._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE)||(ae._properties.type==rdx.chart_constants.STACKED_AREA)){var ax=rdx.chart_utils.calculate_max_object(aK,"y");var aw=rdx.chart_utils.calculate_min_object(aK,"y");var az=ae.format_tertiary_y_axis_data(ax.y);var av=ae.format_tertiary_y_axis_data(aw.y);ap=ae.format_tertiary_y_axis_data(rdx.chart_utils.calculate_percentile(this.data,"y",aD));var aG,aq;aG=aq="";if(aF&&rdx.utils.is_defined(ae._properties.is_date_time_xaxis)&&ae._properties.is_date_time_xaxis){aG=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",ax.x)+") ";aq=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",aw.x)+") ";ar="<b>"+aM+"</b> - High: <b>"+az+"</b>"+aG+" Low: <b>"+av+"</b> "+aq}else{ar="<b>"+aM+"</b> - High: <b>"+az+"</b> Low: <b>"+av+"</b> "}ar=ar+aD+"<sup>th</sup> "+an+" <b>"+ap+"</b>"}}}L.html(ar)}},mouseOut:function(){if(!(rdx.utils.is_defined(ae._properties.always_show_min_max)&&ae._properties.always_show_min_max)){L.html("")}if(rdx.utils.is_defined(ae._properties.on_mouse_out_callback)){ae._properties.on_mouse_out_callback.call_back()}}},zIndex:this._properties.z_index,marker:{enabled:this._properties.enable_marker?this._properties.enable_marker:this._enable_symbols(m),fillColor:this._properties.fill_color,lineWidth:rdx.utils.is_defined(this._properties.marker_line_width)?this._properties.marker_line_width:(this._properties.type==rdx.chart_constants.AREA_SPLINE||this._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE?2:1),lineColor:this._properties.type==rdx.chart_constants.AREA_SPLINE||this._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE?"#fff":null,radius:rdx.utils.is_defined(this._properties.marker_radius)?this._properties.marker_radius:3,states:{hover:{enabled:true}}},point:{events:{click:this._properties.point_select_callback==null?null:function(){ae._properties.point_select_callback.call_back([this]);if(rdx.utils.is_defined(ae._selection_rectangle)){ae._selection_rectangle.remove();if(rdx.utils.is_defined(ae._view_definition)){$(ae._view_definition).trigger(rdx.events.VIEW_SELECTION_CHANGED,[null,false])}}if(rdx.utils.is_defined(ae._view_definition)){var ap=null;if(this.name==="N/A"){this.name=-1}var ao=rdx.utils.is_defined(this.name)?this.name:(rdx.utils.is_defined(this.options)&&rdx.utils.is_defined(this.options.x1)?this.options.x1:null);var an=rdx.utils.is_defined(this.custom_data)?this.name+this.custom_data.dx+1:(rdx.utils.is_defined(this.options)&&rdx.utils.is_defined(this.options.x2)?this.options.x2:null);if(ao===an){an=an+1}if(ae._properties.histogram){ap=[ao,an]}else{ap=this.name}$(ae._view_definition).trigger(rdx.events.VIEW_SELECTION_CHANGED,[ap,!this.selected])}event.stopImmediatePropagation()}}},stickyTracking:false,states:{hover:{enabled:this._properties.tooltip_enabled}}}},symbols:[rdx.chart_constants.TRIANGLE_SYMBOL,rdx.chart_constants.SQUARE_SYMBOL,rdx.chart_constants.DIAMOND_SYMBOL,rdx.chart_constants.CIRCLE_SYMBOL,rdx.chart_constants.TRANGLE_DOWN_SYMBOL],title:{margin:rdx.utils.is_defined(this._properties.title_margin)?this._properties.title_margin:20,style:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:rdx.utils.is_defined(this._properties.title_font_size)?this._properties.title_font_size:"14px",color:this._properties.label_color},text:this._properties.center_title,verticalAlign:this._properties.verticalAlign,floating:this._properties.floating},tooltip:{useHTML:true,borderWidth:0,backgroundColor:"rgba(255,255,255,0)",shadow:false,enabled:this._properties.tooltip_enabled,formatter:function(){if(rdx.utils.is_defined(this.points)){at="";if(ae._properties.is_date_time_xaxis){at="<span class='chart_tooltip_time'>"+Highcharts.dateFormat("%d %b, %l:%M %P",this.x)+"</span> <br>"}for(var aq=0;aq<this.points.length;aq++){at+="</span><span class='point_value' style='color: "+an+"'> "+this.points[aq].series.name+"   "+ae.format_secondary_y_axis_data(this.points[aq].y,true)+"</span> <br>"}var ap="<div class='chart_tooltip'><span class='holder'></span>"+at+"</div>";return ap}else{var an=this.series.type==rdx.chart_constants.PIE||this.series.type==rdx.chart_constants.STACKED_COLUMN||this.series.type==rdx.chart_constants.STACKED_BAR?this.point.color:this.series.color,at="";if(ae._properties.is_date_time_xaxis){at="<span class='chart_tooltip_time'>"+Highcharts.dateFormat("%d %b, %l:%M %P",this.x)+"</span> <br>"}if((ae._properties.type==rdx.chart_constants.STACKED_BAR)||(ae._properties.type==rdx.chart_constants.STACKED_COLUMN)){at+="<b>"+this.x+"<br/>";if(this.series.name!=this.y&&this.series.name!=this.x){at+="<span class='point_name' style='color: "+an+"'>"+this.series.name+"</b> : "}}if(ae._properties.xaxis_in_data_label&&ae._properties.type==rdx.chart_constants.COLUMN){at+=this.x+"<span class='point_name'> : "}var ar=this.series.name;var ao=ae._chart.series;var aq=0;if(rdx.utils.is_defined(ao)&&ao.length){for(aq=0,I=ao.length;aq<I;aq++){var au=ao[aq]["name"];if(rdx.utils.is_defined(au)&&au==ar){break}}}if(aq==0||(ae._properties.secondary_y_axis<0&&ae._properties.tertiary_y_axis<0)||ae._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE||ae._properties.type==rdx.chart_constants.STACKED_AREA||ae._properties.type==rdx.chart_constants.STACKED_BAR||ae._properties.type==rdx.chart_constants.STACKED_COLUMN||(ae._properties.xaxis_in_data_label&&ae._properties.type==rdx.chart_constants.COLUMN)){if(ae._properties.is_percent){at+="</span><span class='point_value' style='color: "+an+"'> "+this.y+"%</span>"}else{if(ae._properties.show_percent_in_pie_tooltip&&ae._properties.type==rdx.chart_constants.PIE){at+="</span><span class='point_value' style='color: "+an+"'> "+ae.format_y_axis_data(this.y)+" ("+rdx.chart_utils.format_number(this.percentage)+"%)</span>"}else{if(rdx.utils.is_defined(ae._properties.y_axis_label_renderer_callback)&&ae._properties.type==rdx.chart_constants.PIE){at+="</span><span class='point_value' style='color: "+an+"'> "+ae.get_y_axis_label_with_key(this)+"</span>"}else{at+="</span><span class='point_value' style='color: "+an+"'> "+ae.format_y_axis_data(this.y)+"</span>"}}}}else{if(aq==1||ae._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE||ae._properties.type==rdx.chart_constants.STACKED_AREA||ae._properties.type==rdx.chart_constants.STACKED_BAR||ae._properties.type==rdx.chart_constants.STACKED_COLUMN||(ae._properties.xaxis_in_data_label&&ae._properties.type==rdx.chart_constants.COLUMN)){if(ae._properties.is_percent){at+="</span><span class='point_value' style='color: "+an+"'> "+this.y+"%</span>"}else{at+="</span><span class='point_value' style='color: "+an+"'> "+ae.format_secondary_y_axis_data(this.y)+"</span>"}}else{if(aq==2||ae._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE||ae._properties.type==rdx.chart_constants.STACKED_AREA||ae._properties.type==rdx.chart_constants.STACKED_BAR||ae._properties.type==rdx.chart_constants.STACKED_COLUMN||(ae._properties.xaxis_in_data_label&&ae._properties.type==rdx.chart_constants.COLUMN)){if(ae._properties.is_percent){at+="</span><span class='point_value' style='color: "+an+"'> "+this.y+"%</span>"}else{at+="</span><span class='point_value' style='color: "+an+"'> "+ae.format_tertiary_y_axis_data(this.y)+"</span>"}}}}if(rdx.utils.is_defined(ae._render_series[aq])&&rdx.utils.is_defined(ae._render_series[aq].tooltip_renderer_callback)){at=ae._render_series[aq].tooltip_renderer_callback.call_back([this.x,ao[aq].data])}if(rdx.utils.is_defined(ae._render_series[aq])&&rdx.utils.is_defined(ae._properties.tooltip_renderer_callback)){at=ae._properties.tooltip_renderer_callback.call_back([this.x,this.y])}var ap="<div class='chart_tooltip'><span class='holder'></span>"+at+"</div>";if(rdx.utils.is_defined(ae._properties.on_hover_details_callback)){ae._properties.on_hover_details_callback.call_back([this.x,this.series.index])}return ap}},shared:this._properties.tooltipshared,positioner:rdx.utils.is_defined(this._properties.tooltip_positioner)?function(ao,ap,an){return ae._properties.tooltip_positioner.call_back([ao,ap,an,ae._chart])}:null},xAxis:{crosshair:this._properties.crosshair,title:{text:this._properties.xaxis_title?this._properties.xaxis_title:null},allowDecimals:false,categories:F,gridLineColor:"#E9E9E9",gridLineWidth:this._properties.show_grid?1:0,gridLineDashStyle:(rdx.utils.is_defined(this._properties.x_axis_grid_line_style))?this._properties.x_axis_grid_line_style:rdx.chart_constants.LONG_DASH,plotLines:(rdx.utils.is_defined(this._properties.xaxis_plot_line))?this._properties.xaxis_plot_line:null,labels:{enabled:this._properties.x_axis_label_enabled,useHTML:true,rotation:this._properties.x_axis_label_rotation,style:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:this._properties.xaxis_label_font_size,color:this._properties.label_color},formatter:ae._properties.is_date_time_xaxis==true?null:function(){var ao=this.value;var an=this.value;if(rdx.utils.is_defined(ae._properties.x_axis_label_renderer_callback)){ao=ae._properties.x_axis_label_renderer_callback.call_back([{x_axis_label:ao},"x_axis_label"])}ao=rdx.chart_utils.trim_label(ao);ao="<span id='xtooltip' title='"+ao+"'>"+ao+"</span>";return ao}},lineColor:this._properties.x_axis_line_color,lineWidth:1,opposite:(this._properties.type==rdx.chart_constants.BAR||this._properties.type==rdx.chart_constants.STACKED_BAR)?false:this._properties.is_opposite_xaxis,tickColor:this._properties.tick_color,tickPixelInterval:this._properties.x_axis_label_spacing,type:this._properties.is_date_time_xaxis?"datetime":"linear",minRange:this._properties.minrange},yAxis:[{offset:this._properties.y_axis_offset,allowDecimals:false,gridLineColor:this._properties.y_axis_grid_line_color,gridLineWidth:rdx.utils.is_defined(this._properties.yaxis_grid_line_width)?this._properties.yaxis_grid_line_width:(this._properties.show_grid?1:0),gridLineDashStyle:this._properties.y_axis_grid_line_style,labels:{enabled:this._properties.y_axis_labels,style:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:this._properties.yaxis_label_font_size,color:this._properties.y_axis_series_color?this._properties.colors[0]:this._properties.label_color},formatter:function(){return ae.format_y_axis_data(this.value,true)}},lineColor:this._properties.y_axis_series_color?this._properties.colors[0]:"#ACADAE",lineWidth:this._properties.y_axis_line_width,opposite:(this._properties.type==rdx.chart_constants.BAR||this._properties.type==rdx.chart_constants.STACKED_BAR)?this._properties.is_opposite_xaxis:false,tickColor:"#CCCCCC",tickPixelInterval:this._properties.y_axis_label_spacing,tickWidth:this._properties.y_axis_tick_width,title:{text:this._properties.yaxis_title?this._properties.yaxis_title:null,x:this._properties.yaxis_title_x?this._properties.yaxis_title_x:null},stackLabels:{enabled:this._properties.type==rdx.chart_constants.STACKED_BAR||this._properties.type==rdx.chart_constants.STACKED_COLUMN?(this._properties.hide_stacked_labels==true?false:true):false,style:{fontWeight:"bold",color:(Highcharts.theme&&Highcharts.theme.textColor)||"#666"},formatter:function(){return this.total}},min:this._properties.yaxis_min_value,max:this._properties.yaxis_max_value,minRange:0.1}],scrollbar:{enabled:this._properties.scrollbar_enabled},navigator:{enabled:this._properties.navigator_enabled,height:this._properties.navigator_height},subtitle:{text:this._properties.scrollbar_enabled?this._properties.subtitle:null},rangeSelector:{enabled:this._properties.range_selector_enabled?true:false}};G.colors=rdx.utils.is_defined(this._properties.overridden_colors)?this._properties.overridden_colors:this._properties.colors;if(rdx.utils.is_defined(this._properties.plot_two_axis)&&this._properties.plot_two_axis==true){G.yAxis.push({allowDecimals:true,gridLineColor:"#e4e7ea",gridLineWidth:this._properties.show_grid?1:0,labels:{enabled:true,style:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:"11px",color:this._properties.y_axis_series_color?this._properties.colors[0]:this._properties.label_color},formatter:function(){return ae.format_secondary_y_axis_data(this.value,true)}},lineColor:this._properties.y_axis_series_color?this._properties.colors[0]:"#000000",lineWidth:this._properties.y_axis_line_width,opposite:(this._properties.type==rdx.chart_constants.BAR||this._properties.type==rdx.chart_constants.STACKED_BAR)?this._properties.is_opposite_xaxis:false,tickColor:"#CCCCCC",tickPixelInterval:this._properties.y_axis_label_spacing,tickWidth:1,title:{text:this._properties.yaxis_title?this._properties.yaxis_title:null},stackLabels:{enabled:this._properties.type==rdx.chart_constants.STACKED_BAR||this._properties.type==rdx.chart_constants.STACKED_COLUMN?true:false,style:{fontWeight:"bold",color:(Highcharts.theme&&Highcharts.theme.textColor)||"#666"},formatter:function(){return this.total}},min:this._properties.yaxis_min_value,max:this._properties.yaxis_max_value,minRange:0.1,opposite:true})}if(rdx.utils.is_defined(this._properties.threshold)){this._add_threshold_line(G,m)}G.series=this._prune_series(m);this._process_series_types(m);if(this._properties.secondary_y_axis>=0&&this._properties.secondary_y_axis<m.length){var w=this._properties.secondary_y_axis;var s=G.colors[w%G.colors.length];G.yAxis.push({allowDecimals:false,gridLineColor:"#CCCCCC",gridLineWidth:0,labels:{style:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:"11px",color:s},formatter:function(){return ae.format_secondary_y_axis_data(this.value,true)}},lineColor:s,lineWidth:this._properties.y_axis_line_width,opposite:(this._properties.type==rdx.chart_constants.BAR)?!(G.yAxis[0].opposite):true,tickColor:"#CCCCCC",tickPixelInterval:this._properties.y_axis_label_spacing,tickWidth:1,title:{text:this._properties.secondary_yaxis_title?this._properties.secondary_yaxis_title:null}});G.series[w].yAxis=1;this._check_and_set_percentage_axis(G.series[w],G.yAxis[1],1)}if(this._properties.tertiary_y_axis>=0&&this._properties.tertiary_y_axis<m.length){var w=this._properties.tertiary_y_axis;var s=G.colors[w%G.colors.length];G.yAxis.push({allowDecimals:false,gridLineColor:"#CCCCCC",gridLineWidth:0,labels:{style:{fontFamily:rdx.chart_constants.FONT_FAMILY,fontSize:"11px",color:s},formatter:function(){return ae.format_tertiary_y_axis_data(this.value,true)}},lineColor:s,lineWidth:this._properties.y_axis_line_width,opposite:(this._properties.type==rdx.chart_constants.BAR)?!(G.yAxis[0].opposite):true,tickColor:"#CCCCCC",tickPixelInterval:this._properties.y_axis_label_spacing,tickWidth:1,title:{text:null}});G.series[w].yAxis=2;this._check_and_set_percentage_axis(G.series[w],G.yAxis[2],2)}this._check_and_set_percentage_axis(m,G.yAxis[0],0);if(rdx.utils.is_defined(this._properties.sparkline_charts)&&this._properties.sparkline_charts){this._parent.addClass("sparkline_charts")}if(this._properties.type==rdx.chart_constants.COLUMN&&this._properties.histogram){G.plotOptions["column"]["pointPadding"]=0;G.plotOptions["column"]["groupPadding"]=0;G.plotOptions["column"]["pointPlacement"]=0}if(this._properties.highchart){this._chart=rdx.utils.is_defined(this._properties.on_complete_callback)?new Highcharts.Chart(G,this._properties.on_complete_callback):new Highcharts.Chart(G)}else{this._chart=rdx.utils.is_defined(this._properties.on_complete_callback)?new Highcharts.stockChart(G,this._properties.on_complete_callback):new Highcharts.Chart(G)}if(rdx.utils.is_defined(this._properties.render_zoom_button_callback)){this.reset_button_dom=this._properties.render_zoom_button_callback.call_back([this._chart_div]);if(rdx.utils.is_not_empty(this.reset_button_dom)){$(this.reset_button_dom).bind(rdx.events.CLICK,{chart:this},function(an){an.data.chart._properties.reset_button_clicked=true;an.data.chart._chart.zoomOut()})}}if(rdx.utils.is_defined(this._properties.get_buttons_properties)){this.button_dom=this._properties.get_buttons_properties.call_back([this._chart_div]);if(rdx.utils.is_not_empty(this.button_dom)&&this.button_dom.dom){$(this.button_dom.dom).bind(rdx.events.CLICK,{chart:this,button_properties:this.button_dom.click_callback},function(an){an.data.button_properties.call_back([an.data.chart])})}}if(rdx.utils.is_array(this._properties.y_axis_plot_lines)){for(var ag=0,I=this._properties.y_axis_plot_lines.length;ag<I;ag++){this.add_plot_line(this._properties.y_axis_plot_lines[ag])}}this._redraw_and_avoid_negatives(false);if(this._properties.link_text&&this._properties.link_url){this._chart_div.append($(document.createElement("a")).attr("href",this._properties.link_url).attr("target","_blank").attr("title",this._properties.link_title).addClass("link").append(this._properties.link_text))}if(this._properties.progress_image){this._chart_div.append($("<img id='progress_image'>").attr("src",rdx.images.SPACER_IMG).addClass("progress_image"))}this._chart_div.append(L);if(rdx.utils.is_defined(this._properties.custom_legend_symbols)){var V=this._properties.custom_legend_symbols.class_name;if(rdx.utils.is_defined(V)){this._chart_div.addClass(V);var R=G.legend.layout;var J=$("."+V+" .highcharts-legend");if(rdx.utils.is_defined(J)&&J.length>0&&rdx.utils.is_defined(this._properties.custom_legend_symbols.symbols)){var f=0;var b=0;for(var ag=0;ag<this._properties.custom_legend_symbols.symbols.length;ag++){var af=this._properties.custom_legend_symbols.symbols[ag].series_name;var e=this._properties.custom_legend_symbols.symbols[ag].url;var W=this._properties.custom_legend_symbols.symbols[ag].disable_url;var d=null;var D=null;var a=J.find(".highcharts-legend-item");if(rdx.utils.is_defined(a)&&a.length>0){d=a[a.length-1];D=a[0]}else{d=a[a.length-1]}var al=$(D).clone();var N=d.getAttribute("transform");var ah=/translate\(\s*([^\s,)]+)[ ,]([^\s,)]+)/.exec(N);var P=parseInt(ah[1]),M=parseInt(ah[2]);var ai=d.getBoundingClientRect().height;var T=d.getBoundingClientRect().width;var z=d.getBoundingClientRect().left;var E=d.getBoundingClientRect().top;if(ai==0&&T==0){continue}var aj=$(al).find("text");if(rdx.utils.is_defined(aj)){aj.text("");aj.text(af);aj[0].setAttribute("x","17")}var n=0,h=0;if(R=="horizontal"){n=P+T+10;h=M}else{if(R=="vertical"){n=P;h=M+ai+10}}al[0].setAttribute("transform","translate("+n+","+h+")");$(al).find("image").remove();var o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttribute("width","16");o.setAttribute("height","16");o.setAttribute("x","-1");o.setAttribute("y","0");o.setAttributeNS("http://www.w3.org/1999/xlink","href",e);al.append(o);$(al).find("rect").remove();$(d).parent().append(al);var Q=-1;for(var ad=0;ad<this._chart.series.length;ad++){if(this._chart.series[ad].name==af){Q=ad;break}}var C=this._chart.series[Q];if(rdx.utils.is_defined(C)){if(C.visible){aj[0].setAttribute("fill","#2A2723")}else{aj[0].setAttribute("fill","#CCC");o.setAttributeNS("http://www.w3.org/1999/xlink","href",W)}}al.bind(rdx.events.CLICK,{svg_img_tag:o,chart:this,series:C,text:aj[0],disable_image_url:W,image_url:e},function(an){an.data.series.setVisible();if(an.data.series.visible){an.data.text.setAttribute("fill","#2A2723");an.data.svg_img_tag.setAttributeNS("http://www.w3.org/1999/xlink","href",an.data.image_url)}else{an.data.text.setAttribute("fill","#CCC");an.data.svg_img_tag.setAttributeNS("http://www.w3.org/1999/xlink","href",an.data.disable_image_url)}});J.push(al[0])}}}}return this};rdx.chart.prototype._get_height=function(){return rdx.utils.is_defined(this._properties.height)?((this._properties.height<this._parent.height()||this._parent.height()<100)?this._properties.height:this._parent.height()):this._parent.height()};rdx.chart.prototype.add_multiple_points=function(s,b,n){if(!this._chart.series||rdx.utils.is_not_defined(s)||s.length==0){return}var m=this._chart.series;if(rdx.utils.is_not_defined(b)){b=this._properties.max_number_of_points!=-1&&this._properties.max_number_of_points<=this._calculate_number_of_points(m)}var o=0;var d=[];var a=null,t=null;for(var h=0;h<m.length;h++){for(var f=0;f<s.length;f++){if(s[f]["name"]==m[h]["name"]){d.push(s[f]);break}}}for(var h=0,p=m.length;h<p;h++){if(rdx.utils.is_not_defined(s[h])||rdx.utils.is_empty(s[h]).data){continue}var g=s[h].data;var q=m[h].data;var e=q.length>0&&rdx.utils.is_defined(q[q.length-1])?q[q.length-1].x:null;for(var f=0;f<g.length;f++){if(q.length==0){m[h].addPoint(g[f],false,false)}else{if(rdx.utils.is_defined(e)&&g[f].x>e){m[h].addPoint(g[f],false,b)}}}if(m[h].type==rdx.chart_constants.FLAGS||(h!=n)){this._shift_flag_series(m[h],m[n].points[0].x)}}this.set_size();this._redraw_and_avoid_negatives(true)};rdx.chart.prototype._shift_flag_series=function(a,b){if(rdx.utils.is_not_defined(a.points)||a.points.length==0){return}var f=a.points[0].x;if(f>=b){return}var e=a.points;var d=0;while(true){if((rdx.utils.is_not_defined(e[d]))||(rdx.utils.is_not_defined(e[d].x))||e[d].x>=b){break}a.data[d].remove(false,false)}};rdx.chart.prototype.add_points=function(f,a){if(!this._chart.series){return}var e=this._chart.series;if(rdx.utils.is_not_defined(a)){a=this._properties.max_number_of_points!=-1&&this._properties.max_number_of_points<=this._calculate_number_of_points(e)}for(var d=0,b=e.length;d<b;d++){if(rdx.utils.is_defined(f[d])){if(rdx.utils.is_defined(e[d].type)&&e[d].type==rdx.chart_constants.FLAGS){this.add_flag_points(e,e[d],f[d])}else{e[d].addPoint(f[d],false,a)}}}if(!this._symbols_disabled&&!this._enable_symbols(e)){for(var d=0,b=e.length;d<b;d++){if(rdx.utils.is_defined(e[d].options.marker)){e[d].options.marker.enabled=false}}this._symbols_disabled=true}this.set_size();this._redraw_and_avoid_negatives(true)};rdx.chart.prototype.add_flag_points=function(f,d,h){var a=null;for(var e=0;e<f.length;e++){if(f[e].type!=rdx.chart_constants.FLAGS){a=f[e];break}}if(!isNaN(h.y)){d.addPoint(h,false,true);return}if(rdx.utils.is_defined(h.y)){var b=false;if(rdx.utils.is_defined(a)){var g=rdx.utils.is_defined(a.points)&&rdx.utils.is_defined(a.points[0])?a.points[0].x:null;if(rdx.utils.is_defined(g)){var m=rdx.utils.is_defined(d)&&rdx.utils.is_defined(d.points[0])?d.points[0].x:null;if(rdx.utils.is_defined(m)){if(m<g){b=true}}}}if(b==true){h.style={display:"none"};d.addPoint(h,false,b)}}};rdx.chart.prototype.set_series_data=function(e){if(rdx.utils.is_not_defined(e)){return}var g=[];var b=this._chart.series[0].data;if(rdx.utils.is_defined(this._properties.set_series_data_callback)){g=this._properties.set_series_data_callback.call_back([e])}else{for(var d=0;d<b.length;d++){for(var a=0;a<e.length;a++){if(b[d].name==e[a]["key"]){var f={};f.name=e[a]["key"];f.y=e[a]["value"];f.selected=b[d].selected;g.push(f);break}}}}this._chart.series[0].setData(g,false,true,false);this._chart.redraw()};rdx.chart.prototype.set_data=function(f,e,a){if(!this._chart.series){return}if(rdx.utils.is_defined(a)){this._chart.xAxis[0].setCategories(a,false)}if(rdx.utils.is_defined(this._properties.threshold)){this._add_threshold_line(this._chart.options,f)}for(var d=0,b=this._chart.series.length;d<b;d++){this._chart.series[d].setData(rdx.utils.is_defined(f[d])?f[d].data:null,false);if(rdx.utils.is_defined(f[d])&&rdx.utils.is_defined(f[d].name)&&!this._properties.is_date_time_xaxis){this._chart.series[d].name=f[d].name}}this._redraw_and_avoid_negatives(true);if(rdx.utils.is_defined(e)&&e==true){this.set_size()}if(rdx.utils.is_defined(this._title_response_str)){this._chart.setTitle({text:this._title_response_str+"%"})}};rdx.chart.prototype.set_title_response_str=function(a){this._title_response_str=a};rdx.chart.prototype._redraw_and_avoid_negatives=function(a){if(a){this.redraw()}var e=this._chart.yAxis;var g=false;for(var d=0,b=e.length;d<b;d++){if(this._percentage_y_axes[d]){continue}var f=e[d].getExtremes();if(rdx.utils.is_not_defined(f.min,f.dataMin)){continue}if(f.min<0&&f.dataMin>=0){e[d].setExtremes(0,null,false);g=true}if(f.min==0){if(f.dataMin-10>0||f.dataMin<0){e[d].setExtremes(null,null,false);g=true}}}if(g){this.redraw()}};rdx.chart.prototype.redraw=function(){var a=window.scrollY;this._chart.redraw();window.scrollTo(0,a)};rdx.chart.prototype.reflow=function(){this._chart.reflow()};rdx.chart.prototype.show_hide_loading=function(a){if(a){this._chart.showLoading()}else{this._chart.hideLoading()}};rdx.chart.prototype.get_chart=function(){return this._chart};rdx.chart.prototype.set_size=function(d,b){if(rdx.utils.is_not_defined(d)){d=this._chart_div.width()}if(rdx.utils.is_not_defined(b)){b=this._chart_div.height();if(rdx.utils.is_firefox()){var e=this._chart_div.css("height");if(e.indexOf("%")>-1){b=0}}}if(b<30||((this._properties.fix_size)&&b<this._properties.height)){b=this._properties.height}if(d<30||((this._properties.fix_size)&&d<this._properties.width)){d=this._properties.width}var a=window.scrollY;if(this._chart){this._chart.setSize(d,b)}this._chart_div.css("min-height",b);window.scrollTo(0,a)};rdx.chart.prototype.set_extremes=function(e,a,b){var d=(rdx.utils.is_defined(b)&&(b==true))?1:0;this._chart.yAxis[d].setExtremes(e,a)};rdx.chart.prototype.add_plot_line=function(d,a){if(rdx.utils.is_not_defined(d)){return}if(rdx.utils.is_not_defined(d.width)){d.width=1}if(rdx.utils.is_not_defined(d.zIndex)){d.zIndex=3}var b=null;if(rdx.utils.is_defined(a)&&a){b=this._chart.yAxis[1]}else{b=this._chart.yAxis[0]}var e=b.getExtremes();if(e.max<=d.value){this.set_extremes(null,d.value,a)}b.addPlotLine(d)};rdx.chart.prototype.destroy=function(){this._chart.destroy()};rdx.chart.prototype._calculate_number_of_points=function(a){return a.length>0?a[0].data.length:0};rdx.chart.prototype._enable_symbols=function(a){return(this._calculate_number_of_points(a)<=this._properties.max_number_of_symbols)};rdx.chart.prototype._prune_series=function(d){for(var b=0,a=d.length;b<a;b++){var e=d[b].data;d[b]["dashStyle"]=this._properties.dash_style_options[b%(this._properties.dash_style_options.length)];d[b]["showInLegend"]=true;d[b]["marker"]={enabled:true,symbol:d[b]["dashStyle"],radius:3,fillColor:null};if(e&&this._properties.max_number_of_points!=-1&&e.length>this._properties.max_number_of_points){e.splice(0,e.length-this._properties.max_number_of_points)}}if(rdx.utils.is_defined(this._properties.modify_series_callback)){d=this._properties.modify_series_callback.call_back([d,this._view_definition])}return d};rdx.chart.prototype._process_series_types=function(d){for(var b=0,a=d.length;b<a;b++){var e=this._properties.type;if(d[b].type){e=d[b].type}switch(e){case rdx.chart_constants.STACKED_BAR:d[b].type=rdx.chart_constants.BAR;d[b].stacking=rdx.chart_constants.STACKING;break;case rdx.chart_constants.STACKED_COLUMN:d[b].type=rdx.chart_constants.COLUMN;d[b].stacking=rdx.chart_constants.STACKING;break;case rdx.chart_constants.STACKED_AREA:d[b].type=rdx.chart_constants.AREA;d[b].stacking=rdx.chart_constants.STACKING;break;case rdx.chart_constants.STACKED_AREA_SPLINE:d[b].type=rdx.chart_constants.AREA_SPLINE;d[b].stacking=rdx.chart_constants.STACKING;break;case rdx.chart_constants.STEP_LINE:d[b].type=rdx.chart_constants.LINE;d[b].step=true;break}}};rdx.chart.prototype.get_high_low_percentile_for_chart=function(){var h=null;var e=this._chart.series;for(var f=0,o=e.length;f<o;f++){var a=rdx.chart_utils.calculate_max_object(e[f].data,"y");var d=rdx.chart_utils.calculate_min_object(e[f].data,"y");var m=null;var q=null;var n=null;var p=null;var b=null;if(f==0){h=new Array();m=this.format_y_axis_data(a.y);q=this.format_y_axis_data(d.y);n=this.format_y_axis_data(rdx.chart_utils.calculate_percentile(e[f].data,"y",this._properties.percentile))}else{if(f==1){m=this.format_secondary_y_axis_data(a.y);q=this.format_secondary_y_axis_data(d.y);n=this.format_secondary_y_axis_data(rdx.chart_utils.calculate_percentile(e[f].data,"y",this._properties.percentile))}else{if(f==2){m=this.format_tertiary_y_axis_data(a.y);q=this.format_tertiary_y_axis_data(d.y);n=this.format_tertiary_y_axis_data(rdx.chart_utils.calculate_percentile(e[f].data,"y",this._properties.percentile))}}}if(rdx.utils.is_defined(this._properties.is_date_time_xaxis)&&this._properties.is_date_time_xaxis){p=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",a.x)+") ";b=" ("+Highcharts.dateFormat("%d %b, %l:%M %P",d.x)+") "}var g={};g.max_value=m;g.max_time=p;g.min_value=q;g.min_time=b;g.percentile_value=n;g.series_name=e[f].name;h.push(g)}return h};rdx.chart.prototype._check_and_set_percentage_axis=function(d,f,e){this._percentage_y_axes[e]=false;if(rdx.chart_utils.is_array(d)){for(var b=0,a=d.length;b<a;b++){if(d[b].yAxis!=1&&!this._is_percentage_series(d[b])){return}}}else{if(!this._is_percentage_series(d)){return}}f.min=0;f.max=100;this._percentage_y_axes[e]=true};rdx.chart.prototype._is_percentage_series=function(a){if(a.stacking==rdx.chart_constants.STACKING){return false}if(rdx.utils.is_not_defined(a.percentage_axis)&&rdx.utils.is_defined(a.name)){return a.name.match(/ \(%\)$/i)||a.name.match(/_usage_pcnt$/i)}return a.percentage_axis};rdx.chart.prototype._get_categories=function(f){var a=null;if(!this._properties.is_date_time_xaxis&&this._properties.type!=rdx.chart_constants.PIE){a=new Array();for(var e=0,g=f.length;e<g;e++){for(var b=0,d=f[e].data.length;b<d;b++){if(rdx.utils.is_defined(f[e].data[b].name)){a[b]=f[e].data[b].name}}}}if(rdx.utils.is_not_defined(a)||a.length==0){return null}return a};rdx.chart.prototype.get_y_axis_label_with_key=function(a){if(rdx.utils.is_defined(this._properties.y_axis_label_renderer_callback)){var b=this._properties.y_axis_label_renderer_callback;return b.call_back([a])}};rdx.chart.prototype.format_y_axis_data=function(b,a){if(rdx.utils.is_defined(this._properties.y_axis_label_renderer_callback)){var d=this._properties.y_axis_label_renderer_callback;if(rdx.utils.is_defined(a)&&a==true){return d.call_back([{y_axis_label:b,is_y_axis_label:true},"y_axis_label"])}else{return d.call_back([{y_axis_label:b},"y_axis_label"])}}else{if(this._properties.type==rdx.chart_constants.STACKED_COLUMN||this._properties.type==rdx.chart_constants.STACKED_BAR){return b}else{return rdx.chart_utils.format_number(b)}}};rdx.chart.prototype.format_secondary_y_axis_data=function(b,a){if(rdx.utils.is_defined(this._properties.secondary_y_axis_label_renderer_callback)){var d=this._properties.secondary_y_axis_label_renderer_callback;if(rdx.utils.is_defined(a)&&a==true){return d.call_back([{y_axis_label:b,is_y_axis_label:true},"y_axis_label"])}else{return d.call_back([{y_axis_label:b},"y_axis_label"])}}else{return rdx.chart_utils.format_number(b)}};rdx.chart.prototype.format_tertiary_y_axis_data=function(b,a){if(rdx.utils.is_defined(this._properties.tertiary_y_axis_label_renderer_callback)){var d=this._properties.tertiary_y_axis_label_renderer_callback;if(rdx.utils.is_defined(a)&&a==true){return d.call_back([{y_axis_label:b,is_y_axis_label:true},"y_axis_label"])}else{return d.call_back([{y_axis_label:b},"y_axis_label"])}}else{return rdx.chart_utils.format_number(b)}};rdx.chart.prototype._add_threshold_line=function(b,d){var a=[{label:{text:rdx.i18n.get_string(this._properties.threshold_label),x:5},color:this._properties.threshold_color,width:2,value:this._properties.threshold,dashStyle:"solid"}];b.yAxis[0]["plotLines"]=a;var f=rdx.chart_view.prototype.get_peak_value(d);var e=((this._properties.threshold>f)?this._properties.threshold:f)*1.25;if(this._properties.type==rdx.chart_constants.STACKED_AREA_SPLINE||this._properties.type==rdx.chart_constants.AREA_SPLINE){b.yAxis[0]["max"]=e}else{if(rdx.utils.is_defined(this._chart)){this._chart.yAxis[0].setExtremes(null,e,false)}else{b.yAxis[0]["max"]=e}}};rdx.chart.prototype.set_max_number_of_points=function(a){this._properties.max_number_of_points=a};rdx.chart.prototype.set_yaxis=function(a){this._properties.yaxis=a};rdx.chart.prototype.set_xaxis_label_rotation=function(a){this._properties.x_axis_label_rotation=a};rdx.chart.prototype.set_secondary_y_axis=function(a,b){this._properties.secondary_y_axis=a;this._properties.secondary_y_axis_label_renderer_callback=b};rdx.chart.prototype.set_yaxis_label_renderer_callback=function(a){this._properties.y_axis_label_renderer_callback=a};rdx.chart.prototype._draw_rectangle_on_selection=function(f,e){var b=e.xAxis[0].translate((f.xAxis[0]||e.xAxis[0]).min),h=e.xAxis[0].translate((f.xAxis[0]||e.xAxis[0]).max),a=e.yAxis[0].translate((f.yAxis[0]||e.yAxis[0]).min),g=e.yAxis[0].translate((f.yAxis[0]||e.yAxis[0]).max);if(rdx.utils.is_defined(this._selection_rectangle)){this._selection_rectangle.remove()}var d=e.renderer.rect(0,0,0,0,0).css({stroke:"black",strokeWidth:".5",fill:"black",fillOpacity:".1"}).add();d.attr({x:b+e.plotLeft,y:e.plotHeight+e.plotTop-g,width:h-b,height:g-a,"class":"selection_rectangle"});this._selection_rectangle=$(".selection_rectangle")};rdx.chart.prototype.set_xaxis_label_enabled=function(a){this._properties.x_axis_label_enabled=a};rdx.ribbon=function(b,d,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._actions=d;this._buttons_div=$("<div>");var e={class_names:"ribbon",add_scroller:false,add_separator:false,allow_selection:false,image_placement:"left",align:"left",add_buttons:false,action_label:"rdx.action"};this._properties=$.extend({},e,a);this._current_scroll=0;this._enable_border=0;this._ribbon_table=null;this._ribbon_div=null;this._ribbon_items_row=null;this._navigate_left_cell=null;this._navigate_right_cell=null;this._children=null;this._dropdown_list=null;this._standalone_actions=[];this._action_label=rdx.i18n.get_string(this._properties.action_label);this._select_action_label=rdx.i18n.get_string("rdx.select_action");this._border_spacing_from_css=4;this._animate_time=1200};rdx.ribbon.prototype.render=function(){this._ribbon_div=$("<div>").addClass("ribbon_div");this._create_ribbon_items();this._parent.append(this._ribbon_div);this._children=this._ribbon_div.children("div");return this};rdx.ribbon.prototype.get_height=function(){return this._ribbon_div.outerHeight(true)};rdx.ribbon.prototype._scroll=function(d){var f=d?this._current_left:this._current_right;var a=0;if(!d){for(var b=this._current_scroll;b<this._children.length;b++){if(this._ribbon_div.width()<=(a+$(this._children[b]).outerWidth(true))){this._current_scroll=b;break}a=a+$(this._children[b]).outerWidth(true)+this.get_scroll_width()}}else{for(var b=this._current_scroll;b>=0;b--){if(this._ribbon_div.width()<=(a+$(this._children[b]).outerWidth(true))){this._current_scroll=b;break}a=a+$(this._children[b]).outerWidth(true)+this.get_scroll_width()}}if(d){this._ribbon_div.animate({scrollLeft:this._ribbon_div.scrollLeft()-a},this._animate_time)}else{this._ribbon_div.animate({scrollLeft:this._ribbon_div.scrollLeft()+a},this._animate_time)}var e=this;setTimeout(function(){e._show_hide_scroll()},(this._animate_time+10))};rdx.ribbon.prototype._create_ribbon_items=function(){this._ribbon_items_row=$("<tr>");this._dropdown_actions=[];var d=[];for(var b=0,a=this._actions.length;b<a;b++){var e=this._actions[b];if(this._properties.add_buttons==true&&e.get_action_type()==rdx.EXTRA_ACTION){this._dropdown_actions.push(e)}else{d.push(e)}}this._render_actions(d,this._dropdown_actions);this._ribbon_table=$("<table>").addClass("ribbon_items_table").attr("border",this._enable_border).attr("cellPadding",0).attr("cellSpacing",0).addClass(this._properties.class_names).append($("<tbody>")).append(this._ribbon_items_row);if(this._properties.allow_selection){this._ribbon_table.addClass("ribbon_items_selectable_table")}return this._ribbon_table};rdx.ribbon.prototype._render_actions=function(t,g){for(var f=0;f<t.length;f++){var s=$("<div>").addClass("rdx_display_inline");var h=$("<div>").addClass("ribbon_label_div");var d=t[f];var e="";if(rdx.utils.is_defined(d._properties.is_access_allowed)&&d._properties.is_access_allowed.call_back()===false){break}if(this._properties.add_buttons==true){var n=new rdx.form_field({properties:{add_grey_button:true,grey_button_click_handler_callback:new rdx.callback(this,this._handle_click,[s,d]),grey_button_label:d.get_label(),grey_button_tooltip:d.get_tooltip()}});if(d.get_label()==rdx.i18n.get_string("rdx.button_bind")){n=new rdx.form_field({properties:{add_bind_button:true,bind_button_click_handler_callback:new rdx.callback(this,this._handle_click,[s,d]),bind_button_label:d.get_label(),bind_button_tooltip:d.get_tooltip()}})}if(d.get_button_type()==rdx.TAB_BUTTON){n=new rdx.form_field({properties:{add_tab_button:true,tab_button_click_handler_callback:new rdx.callback(this,this._handle_click,[s,d]),tab_button_label:d.get_label(),tab_button_tooltip:d.get_tooltip(),tab_button_state:d.get_action_state(),tab_button_class:d.get_class_names()}})}if(d.get_button_type()==rdx.BLUE_BUTTON){n=new rdx.form_field({properties:{add_blue_button:true,blue_button_click_handler_callback:new rdx.callback(this,this._handle_click,[s,d]),blue_button_label:d.get_label(),blue_button_tooltip:d.get_tooltip(),blue_button_state:d.get_action_state()}})}if(d.get_button_type()==rdx.LINK){n=new rdx.form_field({properties:{add_link:true,link_click_handler_callback:new rdx.callback(this,this._handle_click,[s,d]),link_label:d.get_label(),link_tooltip:d.get_tooltip(),link_state:d.get_action_state()}})}var p=new rdx.button_bar(s,n).render();this._standalone_actions.push({container:p,action:d});h.addClass("ribbon_button_wrapper");d.set_reset_action_callback(new rdx.callback(function(v){if(rdx.utils.is_defined(v)){v.reset_button()}},[p]))}else{s.addClass("rdx_ribbon_toolbar_padding");if(rdx.utils.is_defined(d.get_image_url())){var a=$('<a href="#">').appendTo(s);a.append($("<img>").addClass("ribbon_toolbar_buttons").attr("src",d.get_image_url()).attr("alt",d.get_tooltip()));e=d.get_tooltip()}else{if(rdx.utils.is_not_empty(d.get_label())){s.append(d.get_label());e=d.get_label()}else{if(rdx.utils.is_not_empty(d.get_initial_class_names())){s.addClass(d.get_initial_class_names())}}}if(rdx.utils.is_defined(d.get_tooltip())){s.attr("title",d.get_tooltip());if(rdx.utils.is_not_defined(d.get_image_url())){s.attr({title:d.get_tooltip(),"aria-label":d.get_tooltip(),tabindex:0})}}if(rdx.utils.is_defined(d._properties.conditional_action)){if(rdx.utils.is_defined(d._properties.conditional_action.callback)){var m=function(v){if(v){var w=$("img[alt='"+d.get_tooltip()+"']"),z=rdx.i18n.get_string(d._properties.conditional_action.tooltip);if(rdx.utils.is_defined(w)){w.attr("src",d._properties.conditional_action.image_url);w.attr("alt",z);s.attr("title",z);e=z}}};d._properties.conditional_action.callback.call_back([new rdx.callback(m)])}}s.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{ribbon:this,action:d},function(v){if(rdx.utils.is_defined(v.keyCode)&&v.keyCode!==13){return}else{v.data.action._properties.cell=s;v.data.ribbon._handle_click(v,$(this),v.data.action)}})}var o=t.length;if(this._properties.add_buttons==false&&f!=o-1){s.addClass("separator")}else{if(f==o-1&&t.length>0&&g.length>0){s.addClass("separator")}}if(t[f].get_properties().button_type==rdx.BLUE_BUTTON&&g.length>0){s.addClass("separator")}s.wrapInner(h);this._ribbon_items_row.append(s);this._ribbon_div.append(s);if(rdx.utils.is_instrumentation_enabled()){var b=rdx.utils.get_view_title();if(e){s.attr("id",b+"-ribbon-"+e.replace(/\ /g,"_"))}}}if(g.length>0){var s=$("<div>").addClass("rdx_display_inline rdx_action_btn_padding");var h=$("<label>").addClass("ribbon_label_div ribbon_list_wrapper").appendTo(s);var q=[];for(var u=0;u<g.length;u++){q.push(g[u].get_label())}this._dropdown_list=new rdx.list(h,new rdx.form_field({formatter:{map:q},mandatory:true,properties:{size:1}})).render();this._dropdown_list.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._handle_click,[s,g,this._dropdown_list]));if(rdx.i18n.get_string("rdx.action")===this._action_label){h.addClass("action").prepend($('<span class="hide"/>').text(this._action_label))}this._ribbon_items_row.append(s);this._ribbon_div.append(s)}};rdx.ribbon.prototype._handle_click=function(d,a,f,e){if(jquery_currentMenu.cmenu){jquery_currentMenu.cmenu.hide();jquery_currentMenu.cmenu.hideAll(jquery_currentMenu.cmenu,true)}if(rdx.utils.is_function(d.is_disabled)&&d.is_disabled()){return}if(rdx.utils.is_array(f)){for(var b=0;b<f.length;b++){if(f[b].get_label()==e.get_data()&&e.get_data()!=this._select_action_label){f[b].perform_action();e.set_data(this._select_action_label)}if(rdx.utils.is_function(d.get_button_state)&&d.get_button_state()){f.set_action_state(d.get_button_state())}}}else{if(rdx.utils.is_function(d.get_button_state)&&d.get_button_state()){f.set_action_state(d.get_button_state())}f.perform_action(a)}};rdx.ribbon.prototype._show_hide_scroll=function(){var a=this._ribbon_div.scrollLeft()==0;var b=(this._ribbon_div.scrollLeft()+this._ribbon_div.outerWidth(true))>=this._ribbon_items_row.outerWidth(true);if(a){this._navigate_left_cell.addClass("disabled");this._current_scroll=0}else{this._navigate_left_cell.removeClass("disabled")}if(b){this._navigate_right_cell.addClass("disabled");this._current_scroll=this._children.length-1}else{this._navigate_right_cell.removeClass("disabled")}if(a&&b){this._navigate_left_cell.hide();this._navigate_right_cell.hide()}else{this._navigate_left_cell.show();this._navigate_right_cell.show()}};rdx.ribbon.prototype.refresh_state=function(b){var e=this._standalone_actions;for(var a=0;a<e.length;a++){if(e[a].action._properties.show_disabled===false){if(e[a]["action"].is_enabled(b)){e[a]["container"].show()}else{e[a]["container"].hide()}}else{if(e[a]["action"].is_enabled(b)){e[a]["container"].enable()}else{e[a]["container"].disable()}}}if(rdx.utils.is_defined(this._dropdown_actions)&&this._dropdown_actions.length>0&&this._properties.add_buttons==true){var d=[this._select_action_label];for(var a=0;a<this._dropdown_actions.length;a++){if(this._dropdown_actions[a].is_enabled(b)){d.push(this._dropdown_actions[a].get_label())}}if(d.length==1){d=[];d.push(rdx.i18n.get_string("rdx.no_action"))}this._dropdown_list.add_data_items(d,true)}};rdx.ribbon.prototype.get_scroll_width=function(){return 0};rdx.ribbon.prototype.get_page_change_img_width=function(){return 26};rdx.context_menu=function(d,b,e,a){this._parent=typeof(d)=="string"?$("#"+d):d;this._action_properties=b;this._data=rdx.utils.is_defined(a)&&rdx.utils.is_defined(a.data)?a.data:null;this._data_fetch_callback=e;this._menu_items=new Array();this._DEFAULT_PROPERTIES={menu_event:null,show:false};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a)};rdx.context_menu.prototype.build_menu=function(){if(!rdx.CONTEXT_MENU){return}for(var b=0,d=this._action_properties.length;b<d;b++){var a=this._action_properties[b];this._menu_items.push(this.get_menu_item_object(a))}var e=this;this._parent.contextMenu(this._menu_items,{setEnableDisable:function(h){var m;if(rdx.utils.is_defined(e._properties.show_on_click)){var m={};m.action_item_data=[];m.action_item_data.push(this.curr_data);m.total_item_count=this.parent_ref.row_count}else{if(rdx.utils.is_defined(e.get_data_fetch_callback())){m=e.get_data_fetch_callback().call_back()}}for(var g=0;g<h.length;g++){var f=h[g];if(f==$.contextMenu.separator){continue}if(f.action.is_enabled(m)){f.hide=false}else{f.hide=true}}},subMenuImageUrl:rdx.images.NAVIGATE_OPEN_IMG,menu_event:this._properties.menu_event,menu_show:this._properties.show,show_on_click:this._properties.show_on_click,data:this._data,parent_title:this._properties.parent_title,parent_ref:this._properties.table_ref})};rdx.context_menu.prototype.get_data_fetch_callback=function(){return this._data_fetch_callback};rdx.context_menu.prototype.get_menu_item_object=function(a){return{action:a,label:a.get_label(),click_handler_callback:new rdx.callback(this,this._on_click_menu_item,[a])}};rdx.context_menu.prototype._on_click_menu_item=function(f,d,e,b,a){a.perform_action(d,e.context_options)};rdx.images=new function(){this._initialize=function(){var b=rdx.model.add_base_url_to_url(rdx.FRAMEWORK_BASE+"/rdx/core/images/");var a=rdx.model.add_base_url_to_url(rdx.FRAMEWORK_BASE+"/rdx/core/css/");this.FILTER_CROSS_IMG=a+"filter_cross.png";this.CHECKMARK_IMG=a+"checkmark.png";this.CHECKBOX_IMG=a+"check_box.png";this.OVERLAY_SUCCESS=b+"icon-right.png";this.COMPANY_LOGO_IMG=b+"company_logo.png";this.IN_PROGRESS_IMG=b+"spinner.gif";this.SPACER_IMG=b+"spacer.gif";this.WHITE_CROSS_IMG=b+"cross_white.png";this.PING_SMALL_IMG=b+"ping-icon-small.png";this.PING_IMG=b+"ping-icon.png";this.DELETE_FILE_IMG=b+"icon-delete-dark.png";this.SORT_ASCENDING_IMG=b+"sort_az_ascending.png";this.SORT_DESCENDING_IMG=b+"sort_az_descending.png";this.SORT_NO_IMG=b+"sort_no_img.png";this.NAVIGATE_OPEN_IMG=b+"navigate_open.png";this.NAVIGATE_CLOSE_IMG=b+"navigate_close.png";this.FILE_UPLOAD_IMG=b+"icon-upload.png";this.FILE_DOWNLOAD_IMG=b+"icon-download.png";this.NAVIGATE_OPEN_BLACK_IMG=b+"navigate_open_black.png";this.NAVIGATE_CLOSE_BLACK_IMG=b+"navigate_close_black.png";this.NAVIGATE_UP_BLACK_IMG=b+"navigate_up_black.png";this.LEFT_DOUBLE_ARROW_IMG=b+"go-lt-on.gif";this.RIGHT_DOUBLE_ARROW_IMG=b+"go-rt-on.gif";this.DOCUMENT_ADD_IMG=b+"document_add.png";this.DOCUMENT_INSERT_IMG=b+"document_insert.png";this.DOCUMENT_EDIT_IMG=b+"document_edit.png";this.DOCUMENT_REMOVE_IMG=b+"document_delete.png";this.DOCUMENT_DELET_IMG=b+"document_delete.png";this.DOCUMENT_ENABLE_IMG=b+"document_up.png";this.DOCUMENT_DISABLE_IMG=b+"document_down.png";this.DOCUMENT_REBOOT_IMG=b+"shield2.png";this.ADD_ACTION_IMG=b+"add_action.png";this.EDIT_ACTION_IMG=b+"edit_action.png";this.VIEW_ACTION_IMG=b+"view_action.png";this.THIN_ARROW=b+"arrow_thin.png";this.RIGHT_ARROW=b+"arrow_right.png";this.LEFT_ARROW=b+"arrow_left.png";this.DRAG_ACTION_IMG=b+"drag_icon.png";this.NEXT_ACTION_IMG=b+"next_icon.png";this.MOVE_ICON=b+"move-icon.png";this.REFRESH_IMG=b+"refresh.png";this.REFRESH_IMG_WHITE=b+"refresh_white.png";this.ZOOM_IN_IMG=b+"zoom_in.png";this.ZOOM_OUT_IMG=b+"zoom_out.png";this.SHOW_ASIDE=b+"show-aside.png";this.BULLET_BALL_RED_IMG=b+"bullet_ball_red.png";this.BULLET_BALL_GREY_IMG=b+"bullet_ball_grey.png";this.BULLET_SQUARE_BLUE_IMG=b+"bullet_square_glass_blue.png";this.SAVE_IMG=b+"save.png";this.SAVE_CONFIG_IMG=b+"save_black.png";this.SAVE_CONFIG_ALERT_IMG=b+"save_alert.png";this.LINE_CHART_ICON=b+"line_chart_icon.png";this.COLUMN_CHART_ICON=b+"column_chart_icon.png";this.HOP_DIAGRAM_ICON=b+"hop_diagram_icon.png";this.PREFERENCES_ICON=b+"preferences.png";this.ADOBE_IMG=b+"adobe.png";this.BLOCK_DOC_IMG=b+"block_document.png";this.CHART_DOC_IMG=b+"chart_document.png";this.DOC_ICON_IMG=b+"doc_icon.png";this.DOC_IMG=b+"document.png";this.GRAPH_DOC_IMG=b+"graph_document.png";this.SPIRAL_DOC_IMG=b+"spiral_document.png";this.PDF_IMG=b+"pdf_icon.png";this.GREEN_IMG=b+"nav_up_green.png";this.RED_IMG=b+"nav_down_red.png";this.YELLOW_IMG=b+"nav_down_yellow.png";this.MAJOR_IMG=b+"nav_down_right_red.png";this.INFORMATION_IMG=b+"nav_up_blue.png";this.ALERT_IMG=b+"icon-info.png";this.MESSAGE_WARNING=b+"warning.png";this.MESSAGE_INFO=b+"information.png";this.MESSAGE_ERROR=b+"forbidden.png";this.MESSAGE_CONFIRM=b+"help.png";this.MESSAGE_CLOSE=b+"close.png";this.STATUS_UNKNOWN=b+"sunknown.png";this.PAGINATION_FIRST_IMG=b+"firstpage.png";this.PAGINATION_PREVIOUS_IMG=b+"prevpage.png";this.PAGINATION_NEXT_IMG=b+"nextpage.png";this.PAGINATION_LAST_IMG=b+"lastpage.png";this.HELP_IMG=b+"help.png";this.ADD_IMG=b+"add_60.png";this.ERROR_IMG=b+"error.png";this.RIBBON_LEFT_IMG=b+"prevpage.gif";this.RIBBON_RIGHT_IMG=b+"nextpage.gif";this.ELEMENT=b+"element.png";this.ELEMENT_SELECTED=b+"element_selected.png";this.BREAD_CRUMB_SEP=b+"breadcrumb_sep.png";this.BREAD_CRUMB_IMG=b+"bread_crumb.png";this.LOADER_ERROR=b+"loader_error.png";this.LOADER_GIF=b+"loader.gif";this.LOADER_TICK=b+"loader_tick.png";this.NEXT_ACTIVE_IMAGE=b+"next_active.png";this.BACK_ACTIVE_IMAGE=b+"prev_active.png";this.NEXT_INACTIVE_IMAGE=b+"next_inactive.png";this.BACK_INACTIVE_IMAGE=b+"prev_inactive.png";this.YES_IMAGE=b+"yes.png";this.CLIENT_IMAGE=b+"client.png";this.CLOUD_IMAGE=b+"cloud.png";this.NETSCALER_IMAGE=b+"netscaler.png";this.REPEATER_IMAGE=b+"repeater.png";this.CB_IMAGE=b+"cb_device.png";this.DATACENTER_MARKER_IMAGE=b+"datacenter_32.png";this.BRANCH_MARKER_IMAGE=b+"branchrepeater_32.png";this.SERVER_IMAGE=b+"server.png";this.CROSS_IMAGE=b+"cross.png";this.PLUS_WHITE=b+"plus_white.png";this.EDIT_IMAGE=b+"edit.png";this.VIEW_DETAIL_IMAGE=b+"details.png";this.EXPORT_IMAGE=b+"export.png";this.HEADER_BRAND_IMAGE=b+"header_brand.png";this.DB_CLUSTER_ADD_IMG=b+"db_plus.png";this.PRINTER_IMAGE=b+"printer.png";this.REM_FILTER_IMAGE=b+"removeFilter20x20.png";this.BALLOON_RED=b+"balloon_red.png";this.BALLOON_BLUE=b+"balloon.png"};this.get_app_url=function(a){if(rdx.utils.is_not_defined(a)||a===""){return""}if(a[0]!=="/"){a=rdx.APP_IMAGE_BASE+a}a=rdx.model.add_base_url_to_url(a);return a}};rdx.page.add_event_handler(rdx.events.APP_LOADED,new rdx.callback(rdx.images,rdx.images._initialize));rdx.documentation_page=function(b,a){this._parent=b;this._DEFAULT_PROPERTIES={header_title:"rdx.documentation",header_title_class_name:"ns_wp_header",columns:2,node_properties:[],info_properties:null};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a);this._no_of_columns=this._properties.columns;this._SECTION_COLS_SPAN=2};rdx.documentation_page.prototype.render=function(){var f=$("<table>").addClass("smooth_all_corner").addClass("dd_layout_border").append($("<tbody>"));f.attr("cellSpacing",0).attr("cellPadding",0).attr("align","center").attr("width","98%").attr("height","95%");var e=this._properties.columns;var m=100;if(rdx.utils.is_defined(this._properties.info_properties)){m=80}var b=m/this._no_of_columns;for(var d=0;d<this._no_of_columns;d++){var a=$("<colgroup>").attr("width",b+"%");f.append(a)}if(rdx.utils.is_defined(this._properties.info_properties)){var g=$("<colgroup>").attr("width","20%");f.append(g)}this._create_header(f);this._add_spacer_row(f,5);var h=$("<tr>");for(var d=0;d<this._no_of_columns;d++){this._create_docs_per_column(h,d)}this._create_help_info_panel(h);f.append(h);this._parent.append(f)};rdx.documentation_page.prototype._create_header=function(b){var d=$("<tr>").addClass("ns_wp_header");var a=$("<td>").addClass("doc_ns_header_title").attr("colspan",this._no_of_columns+1).append(rdx.i18n.get_string(this._properties.header_title));d.append(a);b.append(d)};rdx.documentation_page.prototype._add_spacer_row=function(e,a){var f=$("<tr>");var d=rdx.utils.is_defined(this._properties.info_properties)?this._no_of_columns+1:this._no_of_columns;var b=$("<td>").attr("height",a).attr("colspan",d);f.append(b);e.append(f)};rdx.documentation_page.prototype._create_docs_per_column=function(m,h){var d=$("<td>").addClass("docs_top_vertical_align");m.append(d);var g=$("<table>").attr("width","100%").append($("<tbody>"));d.append(g);var n=this._properties.node_properties[h];for(var b=0;b<n.column_nodes.length;b++){var a=n.column_nodes[b];var e=$("<tr>");var f=$("<td>").addClass("ns_small_header").attr("colspan",this._SECTION_COLS_SPAN).append(rdx.i18n.get_string(a.header_title));e.append(f);g.append(e);for(var o=0;o<a.nodes.length;o++){this._create_doc_node(g,a.nodes[o])}}};rdx.documentation_page.prototype._create_doc_node=function(n,d){var m=$("<tr>");if(rdx.utils.is_defined(d.header_title)){m.attr("title",rdx.i18n.get_string(d.header_title))}var o=$("<img>").attr("src",rdx.images.get_app_url(d.image_url));var g=$("<a>").attr("href",d.link_url).attr("target",d.link_target).append(o);var e=$("<td>").attr("valign","top").addClass("ns_doc_img");e.append(g);var f=$("<td>");if(rdx.utils.is_not_defined(d.lang_nodes)){var b=$("<a>").attr("href",d.link_url).attr("target",d.link_target).append(rdx.i18n.get_string(d.link_description));f.append(b)}else{f.append(rdx.i18n.get_string(d.link_description)).append($("<br>"));for(var a=0;a<d.lang_nodes.length;a++){var h=d.lang_nodes[a];var b=$("<a>").attr("href",h.link_url).attr("target",h.link_target).append(rdx.i18n.get_string(h.link_description));f.append(b).append(" ")}}m.append(e);m.append(f);n.append(m)};rdx.documentation_page.prototype._create_help_info_panel=function(e){if(rdx.utils.is_not_defined(this._properties.info_properties)){return}var d=$("<div>").addClass("ns_doc_info_section");d.append(($("<div>")).html(this._properties.info_properties.info_html));var a=$("<div>").addClass("ns_doc_info_acrobat_reader_section");a.append(($("<div>")).html(this._properties.info_properties.reader_html));var b=$("<td>").addClass("docs_top_vertical_align");b.append(d);b.append(a);e.append(b)};rdx.download_page=function(d,b,a){this._parent=d;this._DEFAULT_PROPERTIES={header_title:"rdx.downloads",header_title_class_name:"ns_wp_header",header_description:"Use this page to download resources for building custom management tools for the device or integration with the third party tools"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._view_definition=b};rdx.download_page.prototype.render=function(){var e=$(document.createElement("table")).attr("width","100%").attr("align","center").attr("role","presentation").attr("cellpadding",0).attr("cellspacing",0);e.addClass("smooth_all_corner").addClass("dd_layout_border").addClass("downloads_table");if(!e.html().match(/<tbody>/i)){e.append(document.createElement("tbody"))}var g=$(e[0].tBodies[0].insertRow(-1));g.addClass(this._properties.header_title_class_name);var f=$("<h2>").text(rdx.i18n.get_string(this._properties.header_title));$(g[0].insertCell(-1)).attr("colspan",3).addClass("doc_ns_header_title").append(f);$(e[0].tBodies[0].insertRow(-1)).attr("colspan",3).attr("height",30);for(var d in this._view_definition){var b=this._view_definition[d];this._add_node_header(b,d,e);for(var a=0;a<b.length;a++){this._add_child_nodes(b[a],e);this._add_spacer_row(e,11)}}this._parent.append(e)};rdx.download_page.prototype._add_spacer_row=function(d,a){var b=$(d[0].tBodies[0].insertRow(-1));$(b[0].insertCell(-1)).attr("colspan",3).attr("height",a)};rdx.download_page.prototype._add_node_header=function(a,f,e){var g=a.header_class_name?a.header_class_name:"ns_small_header";var d=$(e[0].tBodies[0].insertRow(-1));var b=$("<h3>").text(f);$(d[0].insertCell(-1)).attr("colspan",3).addClass("ns_small_header").append(b);var h=$(e[0].tBodies[0].insertRow(-1));$(h[0].insertCell(-1)).attr("colspan",3).attr("height",5)};rdx.download_page.prototype._add_child_nodes=function(d,p){var g=rdx.utils.is_defined(d.img_url)?d.img_url:rdx.images.DOC_IMG;var e=rdx.i18n.get_string(d.img_title);var b=$(document.createElement("img")).attr("src",rdx.images.get_app_url(g)).attr("alt",e).attr("title",e);var h=$(document.createElement("a")).attr("href",d.href).attr("target",this._get_href_target(s,d.href_target)).append(b);var q=$(p[0].tBodies[0].insertRow(-1));$(q[0].insertCell(-1)).attr("valign","top").append(h).width(20);if(rdx.utils.is_not_defined(d.lang_nodes)){var s=rdx.i18n.get_string(d.href_short_description);var n=$(document.createElement("a")).attr("href",d.href).attr("target",this._get_href_target(s,d.href_target)).append(s);var o=$(document.createElement("br"));$(q[0].insertCell(-1)).addClass("ns_download_node").attr("valign","top").append(n).append(o).append(rdx.i18n.get_string(d.href_description))}else{var m=$(q[0].insertCell(-1)).addClass("ns_download_node");$(m).append(rdx.i18n.get_string(d.href_description));$(m).append("<br>");for(var a=0;a<d.lang_nodes.length;a++){var f=d.lang_nodes[a];var s=rdx.i18n.get_string(f.href_short_description);var n=$(document.createElement("a")).attr("href",f.href).attr("target",this._get_href_target(s,f.href_target)).append(s);m.append(n).append(" ")}}};rdx.download_page.prototype._get_href_target=function(f,e){if(e){return rdx.i18n.get_string(e)}var d=f.toUpperCase();var g="";var a=d.split(" ");for(var b=0;b<a.length;b++){g+=a[b]+"_"}g=g.substring(0,e.length-1);return g};rdx.form_constants=new function(){this.LABEL="label";this.SPAN="span";this.TEXT_BOX="text";this.TEXT_AREA="textarea";this.IP_TEXTFIELD="ip_textfield";this.PASSWORD="password";this.NOTE="note";this.CHECK_BOX="checkbox";this.RADIO_GROUP="radiogroup";this.TILE_GROUP="tilegroup";this.LIST="list";this.DROP_DOWN_MENU="dropdown_menu";this.IP_RANGE="iprange";this.CARD="card";this.VIEW="view";this.TABLE="table";this.EDITTABLE_LIST="edittablelist";this.BIND_UNBIND_LIST="bindunbindlist";this.IPV4="ipv4";this.PROXY="proxy";this.LINK="link";this.IPV6="ipv6";this.IPV4V6="ipv4v6";this.EDITABLE_COMBOBOX="editablecombobox";this.FILE_UPLOAD="fileupload";this.FILE_BROWSER="file_browser";this.NEXT_ROW="next_row";this.COMMAND_SHELL_EXECUTER="command_shell_executer";this.RADIO_BUTTON="radio";this.EXPRESSION_EDITOR="expression_editor";this.CLASSIC_EXPRESSION_EDITOR="classic_expression_editor";this.MULTIPLE_FIELD="multiple_field";this.TREE="tree";this.TREE_INPUT="tree_input";this.CALENDAR="calendar";this.TIME="time";this.SPINNER="spinner";this.ENTITY_CHOOSER="entity_chooser";this.REGULAR_EXPRESSION_FIELD="regex_field";this.COMMAND_SPEC_EDITOR="command_spec_editor";this.HYPER_LINK="hyper_link";this.PREVIEW="preview";this.SPINNER="spinner";this.DRAG_DROP_EDITOR="drag_drop_editor";this.TIME_OR_DAY_CHOOSER="time_day_chooser";this.TIME_SLIDER="time_slider";this.COLOR_PICKER="colorpicker";this.TOGGLE_COMPONENT="toggle_component";this.SETTINGS_COMPONENT="settings_component";this.ICON_BUTTON="iconbutton";this.ALL="all";this.OR="or";this.field_actions={SHOW:"show",SHOW_IF_COUNT_GT_ZERO:"show_if_count_gt_0",HIDE_IF_COUNT_GT_ZERO:"hide_if_count_gt_0",HIDE:"hide",READ_ONLY:"read_only",EDITABLE:"editable",DATA_REFRESH:"data_refresh",NONE:"none",SET_DATA_FROM_FIELD:"__set_data_from_field__"};this.DATA_ACTIONS={VIEW_CONTEXT:"view_context",SET_VIEW_CONTEXT:"set_view_context",RESOURCE_NAME:"resource_name",DATA:"data"};this.NO_CONTAINER="none";this.TAB="tab";this.GROUP="group";this.COLUMN="column";this.CONTAINER_VALIDATION_ERROR="container_validation_error";this.FORM_INITIALIZED="form_initialized";this.PARENT_RESOURCE="___PARENT_RESOURCE";this.dependency_determinant={TYPE:"type",VALUE:"value"};this.view_component_adapter_return_type={RETURN_NULL:"return_null",PARENT_PROP:"parent_property",PARENT_CONF_VIEW_OP:"parent_conf_view_op",CHILD_PROP:"child_property",CONF_VIEW_OP:"conf_view_op"};this.calendar_component_options={TODAY:"rdx.Today",LAST_5_MINUTES:"rdx.LAST_5_MINUTES",LAST_HOUR:"rdx.LAST_HOUR",LAST_12_HOURS:"rdx.LAST_12_HOURS",LAST_DAY:"rdx.LAST_DAY",LAST_WEEK:"rdx.LAST_WEEK",LAST_MONTH:"rdx.LAST_MONTH",LAST_1_QUARTER:"rdx.LAST_1_QUARTER",LAST_6_MONTH:"rdx.LAST_6_MONTH",LAST_1_YEAR:"rdx.LAST_1_YEAR",LAST_2_YEARS:"rdx.LAST_2_YEARS",CUSTOM:"rdx.Custom"};this.view_component_adapter_process_diff={NULL:"null",ADD_REMOVE_MODIFY:"add_remove_modify",REMOVE_ALL_ADD_ALL:"remove_all_add_all",ADD_REMOVE_NO_MODIFY:"add_remove_no_modify"};this.IF_ENABLED="IF_ENABLED";this.IF_SHOWN="IF_SHOWN";this.IF_MODIFIED="IF_MODIFIED";this.IF_NOT_EMPTY="IF_NOT_EMPTY";this.IF_ENABLED_AND_NOT_EMPTY="IF_ENABLED_AND_NOT_EMPTY";this.IF_ENABLED_AND_MODIFIED="IF_ENABLED_AND_MODIFIED";this.range_type={IPV4:"IPV4",IPV6:"IPV6",IPV4V6RANGE:"IPV4V6RANGE",TEXT:"TEXT"};TAB:"tab";CARD:"card"};rdx.dom_utils=new function(){this.get_element=function(a){switch(a){case rdx.form_constants.LABEL:return $("<label>");break;case rdx.form_constants.SPAN:return $("<span>");break;case rdx.form_constants.IP_TEXTFIELD:return $("<div>").attr("class","ip_textfield").attr("contenteditable","true").attr("autocomplete","off").attr("autocapitalize","off").attr("autocorrect","off");break;case rdx.form_constants.TEXT_BOX:return $("<input>").attr("type","text").attr("autocomplete","off").attr("autocapitalize","off").attr("autocorrect","off");break;case rdx.form_constants.TEXT_AREA:return $("<textarea>").attr("autocomplete","off").attr("autocapitalize","off").attr("autocorrect","off");break;case rdx.form_constants.LINK:case rdx.form_constants.HYPER_LINK:return $("<a>").attr("href","#");break;case rdx.form_constants.PASSWORD:return $("<input>").attr("type","password").attr("autocomplete","off");break;case rdx.form_constants.CHECK_BOX:return $("<input>").attr("type","checkbox");break;case rdx.form_constants.LIST:return $("<select>");break;case rdx.form_constants.RADIO_BUTTON:return $(document.createElement("input")).attr("type","radio");break;case rdx.form_constants.ICON_BUTTON:return $('<button type="button">');break;case rdx.form_constants.TABLE:return $("<table>").attr("cellpadding",0).attr("cellspacing",0).append($("<tbody>"));break}throw rdx.i18n.get_string("form_field_invalid_error",{form_type:field.get_key()})};this.move_cursor_to_end=function(f){var d=f.value?f.value.length:f.innerText.length;var b,e;if(document.selection){f.focus();var a=document.selection.createRange();a.moveStart("character",-d);a.moveStart("character",d);a.moveEnd("character",0);a.select()}else{if(f.selectionStart||f.selectionStart=="0"){f.selectionStart=d;f.selectionEnd=d;f.focus()}else{if(document.createRange){b=document.createRange();b.selectNodeContents(f);b.collapse(false);e=window.getSelection();e.removeAllRanges();e.addRange(b)}}}};this.bind_auto_complete_event=function(g,e,a){if(rdx.utils.is_not_defined(a)||!rdx.utils.is_array(a)||a.length===0){return}var f=g[0];e.addClass("autocompelte-parent");function d(q){var o,p,s=this.value;b();currentFocus=-1;o=document.createElement("DIV");o.setAttribute("id",this.id+"autocomplete-list");o.setAttribute("class","autocomplete-items");this.parentNode.appendChild(o);for(p=0;p<a.length;p++){if(a[p].substr(0,s.length).toUpperCase()==s.toUpperCase()){var n=document.createElement("DIV");n.innerHTML="<strong>"+a[p].substr(0,s.length)+"</strong>";n.innerHTML+=a[p].substr(s.length);n.innerHTML+="<input type='hidden' value='"+a[p]+"'>";n.addEventListener("click",function(t){f.value=this.getElementsByTagName("input")[0].value;b();t.stopPropagation()});o.appendChild(n)}}}f.addEventListener("input",d);f.addEventListener("keydown",function(o){var n=document.getElementById(this.id+"autocomplete-list");if(n){n=n.getElementsByTagName("div")}if(o.keyCode==40){currentFocus++;h(n)}else{if(o.keyCode==38){currentFocus--;h(n)}else{if(o.keyCode==13){o.preventDefault();if(currentFocus>-1){if(n){n[currentFocus].click()}}}}}});function h(n){if(!n){return false}m(n);if(currentFocus>=n.length){currentFocus=0}if(currentFocus<0){currentFocus=(n.length-1)}n[currentFocus].classList.add("autocomplete-active")}function m(n){for(var o=0;o<n.length;o++){n[o].classList.remove("autocomplete-active")}}function b(p){var n=document.getElementsByClassName("autocomplete-items");for(var o=0;o<n.length;o++){if(p!=n[o]&&p!=f){n[o].parentNode.removeChild(n[o])}}}f.addEventListener("focusout",function(n){b(n.target)});document.addEventListener("click",function(n){if(f.innerHTML!=n.target.innerHTML){b(n.target)}})}};rdx.dependency=function(b,g,m){this._dependency_defn=g;this._dependency_trigger_info=new Array();this._go_to_hash=new Object();this._dependency_component=this._get_dependency_component(m,b,g);for(var h in this._dependency_defn){if(rdx.utils.is_defined(this._dependency_defn[h]["render"])){var d=this._dependency_defn[h]["render"];if(rdx.utils.is_defined(d.evaluate)&&rdx.utils.is_function(d.evaluate)){if(d.evaluate()===false){continue}}}var e=this._dependency_component.get_component(h);var n=(rdx.utils.is_defined(this._dependency_defn[h].on_event))?this._dependency_defn[h].on_event:rdx.events.CHANGE;var o={component:e,property_key:h,event:n};var f=this.get_dependent_components_info(this._dependency_defn[h],n,h);if(rdx.utils.is_not_defined(this._dependency_defn.go_to_only)||this._dependency_defn.go_to_only==false){if(rdx.utils.is_defined(e,f,n)){try{this.register_dependency(o,f,n)}catch(a){alert(a)}}}}};rdx.dependency.prototype._get_dependency_component=function(b,d,a){if(rdx.utils.is_not_defined(b)){b=true}if(b==true){return new rdx.field_dependency_component(d,a)}else{return new rdx.view_dependency_component(d,a)}};rdx.dependency.prototype.get_dependent_components_info=function(h,d,e){var b=[];if(rdx.utils.is_defined(h.form_fields)){b=this._get_dependent_info_for_all_property_type(h,d,e)}else{var a=(rdx.utils.is_defined(h.is_parent_dependent))?h.is_parent_dependent:false;var f=(rdx.utils.is_defined(h.pass_context))?h.pass_context:false;var g=(rdx.utils.is_defined(h.view_to_open))?h.view_to_open:null;b=this._get_dependent_info_per_property_type(h.components,d,a,f,g,e)}return b};rdx.dependency.prototype._get_dependent_info_for_all_property_type=function(e,z,o){var q=e.form_fields;var p=new Array();var s=e.action;var g=e.view_context;var F=e.trigger_values;var t=null;var E=e.trigger_expression;var w=rdx.utils.is_defined(e.dependency_determinant)?e.dependency_determinant:rdx.form_constants.dependency_determinant.VALUE;for(var C=0,G=q.length;C<G;C++){var u=q[C];var A=(rdx.utils.is_array(s))?s[C]:s;var n=(rdx.utils.is_array(w))?w[C]:w;var b=null;if(rdx.utils.is_defined(g)){b=(rdx.utils.is_array(g))?g[C]:g}var d=null;if(rdx.utils.is_defined(e.resources)){d=(rdx.utils.is_array(e.resources))?resources[C]:resources}var B=[];if(rdx.utils.is_defined(e.go_to)){B=e.go_to}var h=null;if(rdx.utils.is_defined(e.go_to_id)){h=e.go_to_id;this._go_to_hash[h]={dependent_field:u,name:o}}var v=null;var a=null;if(rdx.utils.is_defined(E)){a=E}else{if(rdx.utils.is_defined(F[u])){v=F[u]}else{if(rdx.utils.is_array(F)||F==rdx.form_constants.ALL){v=F}else{throw"Dependency configuration is in-correct for trigger_values or trigger_expression"}}}if(rdx.utils.is_defined(e.single_call_data_refresh)&&e.single_call_data_refresh==true){var f={component:t,action:s[0],trigger_values:v,trigger_expression:a,dependency_determinant:n,view_context:e.view_context,property:e.form_fields,data_context:e.data_context,default_data_context:e.default_data_context,resource:e.resource,single_call_data_refresh:e.single_call_data_refresh,event:z,go_to:B};var m=new rdx.dependency_object(f);var D=this._dependency_component.set_dependent_info(m);p.push(m);break}else{var f={action:A,trigger_values:v,trigger_expression:a,dependency_determinant:n,view_context:b,property:u,resource:d,event:z,go_to:B};var m=new rdx.dependency_object(f);var D=this._dependency_component.set_dependent_info(m);p.push(m)}}return p};rdx.dependency.prototype._get_dependent_info_per_property_type=function(b,A,f,s,h,p){var t=b.form_fields;var q=new Array();var v=b.action;var F=b.trigger_values;for(var D=0,G=b.length;D<G;D++){var u=b[D];if(rdx.utils.is_defined(u.render)&&rdx.utils.is_defined(u.render.evaluate)&&rdx.utils.is_function(u.render.evaluate)){if(u.render.evaluate()===false){continue}}var w=null;var d=null;var E=null;var B=u.action;var n=rdx.utils.is_defined(u.dependency_determinant)?u.dependency_determinant:rdx.form_constants.dependency_determinant.VALUE;var C=[];if(rdx.utils.is_defined(u.go_to)){C=u.go_to}var g=null;if(rdx.utils.is_defined(u.go_to_id)){g=u.go_to_id;this._go_to_hash[g]={dependent_field:u,name:p}}var z=null;var a=null;if(rdx.utils.is_defined(u.trigger_expression)){a=u.trigger_expression}else{if(rdx.utils.is_defined(u.trigger_values)){if(rdx.utils.is_defined(u.trigger_values[u.field])&&!rdx.utils.is_function(u.trigger_values[u.field])){z=u.trigger_values[u.trigger_values[u.field]]}else{if(rdx.utils.is_array(u.trigger_values)||u.trigger_values==rdx.form_constants.ALL){z=u.trigger_values}else{throw"Dependency configuration is in-correct for trigger_values or trigger_expression"}}}}if(rdx.utils.is_array(B)){for(var o=0;o<B.length;o++){var e={component:w,action:B[o],trigger_values:z,trigger_expression:a,dependency_determinant:n,view_context:u.view_context,property:u.field,data_context:u.data_context,default_data_context:u.default_data_context,resource:u.resource,event:A,is_parent_dependent:f,pass_context:s,view_to_open:h,go_to:C};var m=new rdx.dependency_object(e);this.set_dependent_info(q,m)}}else{var e={component:w,action:B,trigger_values:z,trigger_expression:a,dependency_determinant:n,view_context:u.view_context,property:u.field,data_context:u.data_context,default_data_context:u.default_data_context,resource:u.resource,event:A,is_parent_dependent:f,pass_context:s,view_to_open:h,go_to:C};var m=new rdx.dependency_object(e);this.set_dependent_info(q,m)}}return q};rdx.dependency.prototype.set_dependent_info=function(a,b){this._dependency_component.set_dependent_info(b);a.push(b)};rdx.dependency.prototype.register_dependency=function(e,b,d){var a=e.component;if(rdx.utils.is_function(a.add_event_handler)&&(d!=rdx.events.MODEL_CHANGED||d!=rdx.events.BROWSER_EVENT)){var f=new rdx.callback(this._dependency_component,this._dependency_component.event_handling_callback,[e,b,this._go_to_hash]);a.add_event_handler(d,f);this._dependency_trigger_info.push({event:d,callback:f})}else{if(d==rdx.events.MODEL_CHANGED){var f=new rdx.callback(this._dependency_component,this._dependency_component.event_handling_callback,[e,b,this._go_to_hash]);this._add_model_change_listener(a,f);this._dependency_trigger_info.push({event:d,callback:f})}else{if(d==rdx.events.BROWSER_EVENT){var f=new rdx.callback(this._dependency_component,this._dependency_component.event_handling_callback,[e,b,this._go_to_hash]);this._add_browser_event_listener(a,f);this._dependency_trigger_info.push({event:d,callback:f})}else{}}}};rdx.dependency.prototype._add_model_change_listener=function(a,b){$(a).bind(rdx.events.MODEL_CHANGED,{ns_callback:b},this._model_change_callback)};rdx.dependency.prototype._add_browser_event_listener=function(a,b){$(a).bind(rdx.events.BROWSER_EVENT,{ns_callback:b},this._browser_event_callback)};rdx.dependency.prototype._model_change_callback=function(e,b,d,a){e.data.ns_callback.call_back([b,d,a])};rdx.dependency.prototype._browser_event_callback=function(e,b,d,a){e.data.ns_callback.call_back([b,d,a])};rdx.dependency.prototype.trigger_dependencies=function(){this._dependency_component.trigger_dependencies(this._dependency_trigger_info)};rdx.field_dependency_component=function(a,b){this._form=a;this._dependency_defn=b};rdx.field_dependency_component.prototype.get_component=function(d){var b=this._form.get_field(d);if(rdx.utils.is_not_defined(b)){var a=this._form.get_container_info(d);if(rdx.utils.is_not_defined(a)){throw"Dependency configuration is in-correct: No form field exist for "+d}else{b=a.field}}return b};rdx.field_dependency_component.prototype.set_dependent_info=function(b){var d=this._form.get_field_info(b.get_property());if(rdx.utils.is_not_defined(d)){d=this._form.get_container_info(b.get_property());if(rdx.utils.is_not_defined(d)){throw {message:"Dependency configuration is in-correct for "+b.get_property()}}}if(b.get_single_call_data_refresh()==true){for(var a=0;a<d.length;a++){b.set_field_array(d[a].field,a)}d=d[0]}else{b.set_field(d.field)}b.set_row(d.row);b.set_separator_row(d.separator_row);b.set_cell(d.cell);b.set_extra_form_field(d.extra_form_field);b.set_go_to(b.get_go_to());this._set_action_and_container(b)};rdx.field_dependency_component.prototype._set_action_and_container=function(a){var d=null;var f=null;var e=[];switch(a.get_action()){case rdx.form_constants.field_actions.SHOW:case rdx.form_constants.field_actions.HIDE:d=(rdx.utils.is_defined(a.get_extra_form_field()))?a.get_cell():a.get_row();f=this.toggle_show_hide;break;case rdx.form_constants.field_actions.SHOW_IF_COUNT_GT_ZERO:case rdx.form_constants.field_actions.HIDE_IF_COUNT_GT_ZERO:d=(rdx.utils.is_defined(a.get_extra_form_field()))?a.get_cell():a.get_row();f=this.toggle_show_hide_with_count;break;case rdx.form_constants.field_actions.EDITABLE:case rdx.form_constants.field_actions.READ_ONLY:d=a.get_field().get_component();f=this.toggle_read_only;break;case rdx.form_constants.field_actions.DATA_REFRESH:if(a.get_single_call_data_refresh()==true){var g=a.get_field_array();for(var b=0;b<g.length;b++){e[b]=g[b].get_component()}}else{d=a.get_field().get_component()}f=this.do_data_refresh;break;default:throw"Dependency configuration is in-correct for "+dependent_fields[i]+" does not have an action set"}if(a.get_single_call_data_refresh()==true){a.set_component_array(e)}else{a.set_component(d)}a.set_action_fn(f)};rdx.field_dependency_component.prototype.event_handling_callback=function(p,f,e,u){var h=f.property_key;var w=this._form.get_field_value(h)+"";for(var s=0,A=e.length;s<A;s++){var d=e[s];if(d.get_single_call_data_refresh()==true){var m=d.get_field_array();var g=d.get_component_array()}else{var a=d.get_field();var g=d.get_component()}var o=d.get_action_fn();var n=d.get_action();var z=d.get_trigger_values();var v=d.get_trigger_expression();var b=d.get_dependency_determinant();var q=d.get_go_to();if(rdx.utils.is_function(f.component.get_dependency_determinant_value)){if(b!=rdx.form_constants.dependency_determinant.VALUE){w=f.component.get_dependency_determinant_value(b)}}d.set_value(w);if(rdx.utils.is_defined(g,o)){var t=false;t=this._is_reverse_action(w,v,z);if(t==false&&rdx.utils.is_defined(q)){t=this.evaluate_go_to_fields(q,d,u)}d.set_reverse_action(t);d.set_event_param(p);o.apply(this,[d])}}};rdx.field_dependency_component.prototype._is_reverse_action=function(e,a,b){var d=false;if(rdx.utils.is_defined(e,a)){if(!a.test(e)){d=true}}else{if(rdx.utils.is_defined(b)){if(b!=rdx.form_constants.ALL){if(!rdx.utils.is_array(b)){if($.inArray(e,b.values)==-1){d=true}}else{if($.inArray(e,b)==-1){d=true}}}}}return d};rdx.field_dependency_component.prototype.evaluate_go_to_fields=function(e,h,d){var b=false;for(var g=0,o=e.length;g<o;g++){if(rdx.utils.is_defined(d[e[g]]["dependent_field"])){var p=d[e[g]]["dependent_field"];var m=this._form.get_field_value(d[e[g]]["name"])+"";var n=this._form.get_field(d[e[g]]["name"]);var q=p.dependency_determinant;if(rdx.utils.is_defined(q)&&rdx.utils.is_function(n.get_dependency_determinant_value)){if(q!=rdx.form_constants.dependency_determinant.VALUE){m=n.get_dependency_determinant_value(q)}}var f=p.trigger_values;var a=p.trigger_expression;var b=this._is_reverse_action(m,a,f);if(b==true){return b}}else{throw"Dependency for Go to fields are not defined"}}return b};rdx.field_dependency_component.prototype.toggle_show_hide_with_count=function(e){var f=e.get_data_context();if(rdx.utils.is_not_defined(f)){return}if(rdx.utils.is_defined(f.resource_name)){var g=rdx.utils.get_resource(this._properties.entity_type);var h=new rdx.callback(this,this._get_entity_count_response_arrived,[g]);var a=null;if(rdx.utils.is_defined(f.view_context)){var d=new rdx.context(f.view_context);var b=rdx.form_utils.get_resource_for_operation(this._form,this._form.get_resource(),null);d.set_context_data(b);a=d.get_url_params()}rdx.model.get_count(g,a,new rdx.callback(this,this._handle_count_show_hide,[e]),this._parent,null)}};rdx.field_dependency_component.prototype._handle_count_show_hide=function(b,a){if(b==0){if(a.get_action()==rdx.form_constants.field_actions.HIDE_IF_COUNT_GT_ZERO){dependency_object.set_reverse_action(false)}else{if(a.get_action()==rdx.form_constants.field_actions.SHOW_IF_COUNT_GT_ZERO){dependency_object.set_reverse_action(true)}}}else{if(a.get_action()==rdx.form_constants.field_actions.HIDE_IF_COUNT_GT_ZERO){dependency_object.set_reverse_action(true)}else{if(a.get_action()==rdx.form_constants.field_actions.SHOW_IF_COUNT_GT_ZERO){dependency_object.set_reverse_action(false)}}}this.toggle_show_hide(a)};rdx.field_dependency_component.prototype.toggle_show_hide=function(d){var a=false;var g=d.get_field();var f=d.get_action();var e=d.get_reverse_action();var b=d.get_component();if(rdx.utils.is_function(g.get_field)){g.get_field().set_hidden(true)}if(((f==rdx.form_constants.field_actions.HIDE||f==rdx.form_constants.field_actions.HIDE_IF_COUNT_GT_ZERO)&&e)||((f==rdx.form_constants.field_actions.SHOW||f==rdx.form_constants.field_actions.SHOW_IF_COUNT_GT_ZERO)&&!e)){a=true;if(rdx.utils.is_function(g.get_field)){g.get_field().set_hidden(false)}}if(rdx.utils.is_function(g.toggle_show_hide)){g.toggle_show_hide(a,b);if(a){if(rdx.utils.is_defined(d.get_separator_row())){d.get_separator_row().show()}}else{if(rdx.utils.is_defined(d.get_separator_row())){d.get_separator_row().hide()}$(b).find(".rdx_error_container").addClass("hide");rdx.form_utils.handle_component_show_error(g)}return null}if(a){b.show();if(rdx.utils.is_defined(d.get_separator_row())){d.get_separator_row().show()}}else{b.hide();$(b).find(".rdx_error_container").addClass("hide");rdx.form_utils.handle_component_show_error(g);if(rdx.utils.is_defined(d.get_separator_row())){d.get_separator_row().hide()}}return null};rdx.field_dependency_component.prototype.toggle_read_only=function(d){var h=false;var g=d.get_field();var f=d.get_action();var e=d.get_reverse_action();var b=d.get_component();var a=g.get_field();a.set_read_only(true);if((f==rdx.form_constants.field_actions.READ_ONLY&&e)||(f==rdx.form_constants.field_actions.EDITABLE&&!e)){h=true;a.set_read_only(false)}if(rdx.utils.is_function(g.toggle_read_only)){return g.toggle_read_only(h,d.get_dependency_determinant())}if(h){b.removeAttr("readonly");b.removeClass("form_field_disabled")}else{b.attr("readonly","true");b.addClass("form_field_disabled")}return null};rdx.field_dependency_component.prototype.do_data_refresh=function(d){var m=this;var f=d.get_reverse_action();if(d.get_single_call_data_refresh()==true){var a=d.get_field_array()}else{var a=d.get_field()}var b=d.get_trigger_values();var h=d.get_value();var e=d.get_data_context();if(rdx.utils.is_not_defined(e)){return}if(rdx.utils.is_defined(e.resource_name)){m._handle_resource_refresh(e,a,d)}else{if(rdx.utils.is_defined(e.formatter)){m._handle_refresh(e,a,d)}else{if(e.type===rdx.form_constants.DATA_ACTIONS.SET_VIEW_CONTEXT){if(rdx.utils.is_defined(a._view_context_data,e.context_field)){a._view_context_data[e.context_field]=h}}else{var g=e[h];if(rdx.utils.is_not_defined(g)&&rdx.utils.is_defined(d.get_default_data_context())){g=d.get_default_data_context()}m._handle_refresh(g,a,d)}}}};rdx.field_dependency_component.prototype._handle_data_refresh=function(n,h,g){if(rdx.utils.is_not_defined(n)||rdx.utils.is_not_defined(n.formatter)){return}if(rdx.utils.is_defined(h.get_field().get_formatter())){var a=(rdx.utils.is_defined(g.get_trigger_expression())&&g.get_reverse_action()==true)?h.get_field().get_orig_formatter_dfn():n.formatter;h.get_field().init_formatter(a);if(rdx.utils.is_function(h.add_data_items)){h.add_data_items()}}var d=g.get_event_param();if(rdx.utils.is_defined(d)&&rdx.utils.is_defined(d.set_data)){var p=h.get_field().get_resource_value();if(rdx.utils.is_defined(h.get_field().get_formatter())){p=h.get_field().get_formatter().get_display_value(p,null)}h.set_data(p)}else{if(rdx.utils.is_defined(n.resource_name,n.view_context)){var o=null;var e=rdx.form_utils.get_resource_for_operation(this._form,this._form.get_resource(),null);if(rdx.utils.is_defined(e)){var f=new rdx.context(n.view_context);f.set_context_data(e);if(f.is_url_params_set()){o=f.get_url_params()}}rdx.model.get(rdx.utils.get_resource(n.resource_name),o,new rdx.callback(this,this._data_refresh_set_data,[h,n.resource_name,n.formatter]))}else{if(rdx.utils.is_defined(n.formatter.set_data)){if(n.formatter.set_data==rdx.form_constants.field_actions.SET_DATA_FROM_FIELD&&rdx.utils.is_defined(g.get_value())){if(rdx.utils.is_defined(n.formatter.data_populate_callback)){var m=n.formatter.data_populate_callback;var b=new rdx.callback_params({return_callback:new rdx.callback(function(s,q){q.set_data(s)},[h]),resource_data:g.get_value()});m.call_back([b])}else{h.set_data(g.get_value())}}else{h.set_data(n.formatter.set_data)}}}}};rdx.field_dependency_component.prototype._data_refresh_set_data=function(b,e,g,d){if(rdx.utils.is_not_defined(b[g])){return}var f=e.get_field().get_formatter();if(rdx.utils.is_not_defined(f)){e.get_field().init_formatter(d)}var a=e.get_field().get_formatter().get_formatted_message(b[g]);if(rdx.utils.is_not_empty(a)){e.set_data(a)}};rdx.field_dependency_component.prototype._handle_resource_refresh=function(q,o,m){if(rdx.utils.is_not_defined(q)){return}if(rdx.utils.is_not_defined(q.formatter)&&o.get_field().get_input_type()!=rdx.form_constants.VIEW){return}if(rdx.utils.is_not_defined(q.resource_name)){return}var d=rdx.utils.get_resource(q.resource_name);var a=null;var n=null;if(rdx.utils.is_defined(q.view_context)&&rdx.utils.is_defined(this._form.get_resource())){a=q.view_context;n=rdx.form_utils.get_resource_for_operation(this._form,this._form.get_resource(),null)}if(m.get_single_call_data_refresh()==true){var b=[];var p=[];for(var g=0;g<o.length;g++){var h=$.extend({},q.formatter);h.resource_keys=[];h.resource_keys[0]=q.formatter.resource_keys[g];o[g].get_field().init_formatter(h);b[g]=rdx.utils.is_function(o[g].get_component)?o[g].get_component():$(document.body);p[g]=o[g].get_field()}rdx.form_utils.prefill_dependency_data_refresh_components_data($(b),this._form,p,q.resource_name,this._form,this._form.set_response_for_field,a,n,m.get_event_param(),true)}else{if(o.get_field().get_input_type()==rdx.form_constants.VIEW&&rdx.utils.is_defined(o.get_component())&&rdx.utils.is_function(o.get_component().get_view_definition)&&o.get_component().get_view_definition().type==rdx.view_constants.DETAIL_VIEW&&rdx.utils.is_defined(a)&&rdx.utils.is_defined(n)){var f=o.get_component().get_view_context();f.set_url_params(a,n);o.get_component().prepare_view()}else{o.get_field().init_formatter(q.formatter);var e=rdx.utils.is_function(o.get_component)?o.get_component():$(document.body);rdx.form_utils.prefill_component_data($(e),this._form,o.get_field(),q.resource_name,this._form,this._form.set_response_for_field,a,n,m.get_event_param(),true)}}};rdx.field_dependency_component.prototype._handle_refresh=function(a,b,d){if(rdx.utils.is_not_defined(a)){return}if(rdx.utils.is_not_defined(a.type)||a.type==rdx.form_constants.DATA_ACTIONS.DATA){this._handle_data_refresh(a,b,d)}else{this._handle_resource_refresh(a,b,d)}if(rdx.utils.is_defined(a.view_link_map)&&rdx.utils.is_defined(b.create_list_table)&&rdx.utils.is_function(b.create_list_table)){if(rdx.utils.is_defined(a.view_link_map.add_view_name)){b.get_field().set_add_view_name(a.view_link_map.add_view_name)}if(rdx.utils.is_defined(a.view_link_map.set_view_name)){b.get_field().set_set_view_name(a.view_link_map.set_view_name)}if(rdx.utils.is_defined(a.view_link_map.view_view_name)){b.get_field().set_view_view_name(a.view_link_map.view_view_name)}b._list_table.remove();b.create_list_table()}if(rdx.utils.is_defined(a.view_link_map)&&rdx.utils.is_defined(a.view_link_map.view_name)&&rdx.utils.is_defined(b.set_view_name)&&rdx.utils.is_function(b.set_view_name)){b.set_view_name(a.view_link_map.view_name)}};rdx.field_dependency_component.prototype.trigger_dependencies=function(e){for(var b=0,d=e.length;b<d;b++){var g=e[b].callback;var f=e[b].event;var a={event:f,set_data:true};if(rdx.utils.is_defined(g,f)){g.call_back([a])}}};rdx.form_field=function(d,a,b){this._form_holder=a;this._DEFAULT_PROPERTIES={key:"",label:"",col_span:null,note:"",value:null,tooltip:"",force_tooltip:false,show_tooltip_on_field:false,tooltip_more_img_url:null,watermark:"",hidden:false,type:"VALSTR",input_type:null,group:null,tab:null,view:null,extra_field_dfn:null,add_confirm:true,expand_group:false,properties:{},resource_name:null,enumid:null,formatter:null,view_context:null,prefill:true,mandatory:false,read_only:false,label_width:-1,width:-1,height:-1,min_max:null,default_if_null:false,send_to_server:null,add_separator:false,display_label:true,prompt:null,custom_input_field:false,add_view_name:null,add_view_refresh:false,set_view_name:null,view_view_name:null,custom_button_properties:null,add_link:null,target_resource:rdx.form_constants.PARENT_RESOURCE,is_title:false,is_disable:false,is_error:false,validate_callback:null,style:[],download_content_url:"",download_content_file_name:"",render:null,force_validate:false,field_info:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,d);this._extra_form_field=null;this._parent_form_field=null;this._orig_formatter_dfn=null;this._orig_resource_value=rdx.utils.is_not_defined(this._properties.value)?"":this._properties.value;this._recent_value=null;this._parent_container=b;this.init_formatter(this._get_formatter_dfn());if(rdx.utils.is_not_defined(this.get_input_type())){if(rdx.utils.is_defined(this.get_view())){this._properties.input_type=rdx.form_constants.VIEW}else{if(this.get_type()=="VALENUM"){this._properties.input_type=rdx.form_constants.LIST}else{if(this.get_type()=="VALBOOL"){this._properties.input_type=rdx.form_constants.CHECK_BOX}else{if(this.get_type()=="VALIPRANGE"){this._properties.input_type=rdx.form_constants.IP_RANGE}else{this._properties.input_type=rdx.form_constants.TEXT_BOX}}}}}this._is_part_of_resource=true;this._crumb_handler=null;this._form_data_fetch_callback=null};rdx.form_field.prototype.init_formatter=function(d){if(rdx.utils.is_defined(d)){this._formatter=new rdx.formatter(d)}else{var a=this.get_enumid();if(this.get_type()=="VALENUM"&&rdx.utils.is_defined(a)){var b=rdx.utils.get_enum(a);if(rdx.utils.is_defined(b)){if(rdx.utils.is_array(b)){b=rdx.utils.convert_array_to_map(b)}this._formatter=new rdx.formatter({map:b})}}}if(rdx.utils.is_not_defined(this._orig_formatter_dfn)){this._orig_formatter_dfn=d}};rdx.form_field.prototype.set_form_data_fetch_callback=function(a){this._form_data_fetch_callback=a};rdx.form_field.prototype.get_form_data_fetch_callback=function(){return this._form_data_fetch_callback};rdx.form_field.prototype.get_key=function(){return this._properties.key};rdx.form_field.prototype.get_force_validate=function(){return this._properties.force_validate};rdx.form_field.prototype.get_label=function(){return rdx.i18n.get_string(this._properties.label)};rdx.form_field.prototype.get_formatter=function(){return this._formatter};rdx.form_field.prototype.get_orig_formatter_dfn=function(){return this._orig_formatter_dfn};rdx.form_field.prototype.get_label_width=function(){return this._properties.label_width};rdx.form_field.prototype.get_note=function(){return rdx.i18n.get_string(this._properties.note)};rdx.form_field.prototype.get_value=function(){return this._properties.value};rdx.form_field.prototype.get_tooltip=function(){if(rdx.utils.is_not_defined(this._properties.tooltip)){return""}return rdx.i18n.get_string(this._properties.tooltip)};rdx.form_field.prototype.get_tooltip_more_img_url=function(){return this._properties.tooltip_more_img_url};rdx.form_field.prototype.get_watermark=function(){if(rdx.utils.is_empty(this._properties.watermark)){return""}return rdx.i18n.get_string(this._properties.watermark)};rdx.form_field.prototype.is_hidden=function(){return this._properties.hidden};rdx.form_field.prototype.get_col_span=function(){return this._properties.col_span};rdx.form_field.prototype.set_col_span=function(a){this._properties.col_span=a};rdx.form_field.prototype.get_type=function(){return this._properties.type};rdx.form_field.prototype.get_send_to_server=function(){return this._properties.send_to_server};rdx.form_field.prototype.is_default_if_null=function(){return this._properties.default_if_null};rdx.form_field.prototype.get_prompt=function(){return this._properties.prompt};rdx.form_field.prototype.set_resource_value=function(a){this._orig_resource_value=a;this._recent_value=a};rdx.form_field.prototype.get_resource_value=function(){return this._orig_resource_value};rdx.form_field.prototype.set_recent_value=function(a){this._recent_value=a};rdx.form_field.prototype.get_recent_value=function(){return this._recent_value};rdx.form_field.prototype.get_input_type=function(){return this._properties.input_type};rdx.form_field.prototype.set_group=function(a){this._properties.group=a};rdx.form_field.prototype.get_group=function(){return rdx.i18n.get_string(this._properties.group)};rdx.form_field.prototype.set_tab=function(a){this._properties.tab=a};rdx.form_field.prototype.get_tab=function(){return rdx.i18n.get_string(this._properties.tab)};rdx.form_field.prototype.get_view=function(){return this._properties.view};rdx.form_field.prototype.is_expand_group=function(){return this._properties.expand_group};rdx.form_field.prototype.get_properties=function(){return this._properties.properties};rdx.form_field.prototype.get_resource_name=function(){return this._properties.resource_name};rdx.form_field.prototype.get_enumid=function(){return this._properties.enumid};rdx.form_field.prototype.get_view_context=function(){return this._properties.view_context};rdx.form_field.prototype.get_resource_name_callback=function(){return this._properties.resource_name_callback};rdx.form_field.prototype.is_read_only=function(){return this._properties.read_only};rdx.form_field.prototype.is_title=function(){return this._properties.is_title};rdx.form_field.prototype.add_extra_padding_column=function(){return((this.is_title()==true||this.is_title()=="true")||(this.is_embedded_component()==true))};rdx.form_field.prototype.is_disable=function(){return this._properties.is_disable};rdx.form_field.prototype.is_error=function(){return this._properties.is_error};rdx.form_field.prototype.is_heading=function(){return($.inArray(rdx.HEADING,this._properties.style)>=0)};rdx.form_field.prototype.get_style=function(){return this._properties.style};rdx.form_field.prototype.get_width=function(){if((this.is_title())||(this.get_input_type()==rdx.form_constants.NOTE)){return -1}return this._properties.width};rdx.form_field.prototype.get_height=function(){return this._properties.height};rdx.form_field.prototype.is_prefill=function(){return this._properties.prefill};rdx.form_field.prototype.is_mandatory=function(){if(this.is_not_input_field()||this.is_hidden()||this.is_read_only()){return false}return this._properties.mandatory};rdx.form_field.prototype.is_not_input_field=function(){var a=this.get_input_type();return(a==rdx.form_constants.LABEL||a==rdx.form_constants.NOTE||a==rdx.form_constants.LINK)};rdx.form_field.prototype.is_confirm=function(){return this._properties.add_confirm};rdx.form_field.prototype.is_embedded_component=function(){return(this.get_input_type()==rdx.form_constants.CARD||this.get_input_type()==rdx.form_constants.VIEW||this.get_input_type()==rdx.form_constants.TABLE||this.get_input_type()==rdx.form_constants.LINK||this.get_input_type()==rdx.form_constants.DRAG_DROP_EDITOR)};rdx.form_field.prototype.is_file_upload_component=function(){return this.get_input_type()==rdx.form_constants.FILE_UPLOAD};rdx.form_field.prototype.get_extra_field=function(){return this._properties.extra_field_dfn};rdx.form_field.prototype._get_formatter_dfn=function(){return this._properties.formatter};rdx.form_field.prototype.get_min_max_values=function(){return this._properties.min_max};rdx.form_field.prototype._set_extra_form_field=function(a){this._extra_form_field=a};rdx.form_field.prototype._get_extra_form_field=function(){return this._extra_form_field};rdx.form_field.prototype._get_parent_form_field=function(){return this._parent_form_field};rdx.form_field.prototype._set_parent_form_field=function(a){return this._parent_form_field=a};rdx.form_field.prototype.set_formatter=function(a){this._formatter=a};rdx.form_field.prototype.is_label_needed=function(){if(this._properties.display_label==false){return false}var a=this.get_input_type();return !(rdx.utils.is_defined(this.get_view())||a==rdx.form_constants.TABLE||a==rdx.form_constants.CARD||a==rdx.form_constants.LINK)};rdx.form_field.prototype.is_separator=function(){return this._properties.add_separator};rdx.form_field.prototype.set_hidden=function(a){this._properties.hidden=a};rdx.form_field.prototype.get_custom_input_field=function(){return this._properties.custom_input_field};rdx.form_field.prototype.get_add_view_name=function(){return this._properties.add_view_name};rdx.form_field.prototype.set_add_view_name=function(a){this._properties.add_view_name=a};rdx.form_field.prototype.get_custom_button_properties=function(){return this._properties.custom_button_properties};rdx.form_field.prototype.get_add_link=function(){return this._properties.add_link};rdx.form_field.prototype.get_set_view_name=function(){return this._properties.set_view_name};rdx.form_field.prototype.set_set_view_name=function(a){this._properties.set_view_name=a};rdx.form_field.prototype.get_view_view_name=function(){return this._properties.view_view_name};rdx.form_field.prototype.set_view_view_name=function(a){this._properties.view_view_name=a};rdx.form_field.prototype.get_target_resource=function(){return this._properties.target_resource};rdx.form_field.prototype.set_target_resource=function(a){return this._properties.target_resource=a};rdx.form_field.prototype.set_read_only=function(a){this._properties.read_only=a};rdx.form_field.prototype.to_validate=function(){return !(this.is_not_input_field()||this.is_hidden())};rdx.form_field.prototype.set_label_width=function(a){this._properties.label_width=a};rdx.form_field.prototype.set_width=function(a){this._properties.width=a};rdx.form_field.prototype.set_crumb_handler=function(a){this._crumb_handler=a};rdx.form_field.prototype.get_crumb_handler=function(){return this._crumb_handler};rdx.form_field.prototype.get_validate_callback=function(){if(this.is_not_input_field()||this.is_hidden()||this.is_read_only()){return null}return this._properties.validate_callback};rdx.form_field.prototype.is_part_of_resource=function(){return this._is_part_of_resource};rdx.form_field.prototype.is_valid=function(){if(rdx.utils.is_defined(this._parent_container)&&rdx.utils.is_function(this._parent_container.skip_group)){var a=this._parent_container.skip_group();if(a==true){return false}}return this._is_part_of_resource};rdx.form_field.prototype.set_is_part_of_resource=function(a){this._is_part_of_resource=a};rdx.form_field.prototype.get_download_content_url=function(){return this._properties.download_content_url};rdx.form_field.prototype.get_form_holder=function(){return this._form_holder};rdx.form_field.prototype.get_download_content_file_name=function(){return this._properties.download_content_file_name};rdx.form_field.prototype.get_add_view_refresh=function(){return this._properties.add_view_refresh};rdx.form_field.prototype.is_force_tooltip=function(){return this._properties.force_tooltip};rdx.form_field.prototype.is_add_edit_enabled=function(){var a=true;if(rdx.utils.is_defined(this._properties.add_edit_view_textbox_enabled)){a=this._properties.add_edit_view_textbox_enabled}return a};rdx.form_field.prototype.get_field_info=function(){return this._properties.field_info};rdx.style=new function(){this.apply_style=function(a,d){var b=a.get_style();if($.inArray(rdx.HEADING,b)>=0){d.addClass("rdx_label_heading")}else{if(b.length>0){d.addClass(b[0])}}};this.apply_separatot_style=function(a,d){var b=a.get_style();if($.inArray(rdx.THIN_SEPARATOR,b)>=0){d.addClass("rdx_thin_separator")}}};rdx.form_component=function(b,a){this._parent=b;this._form_field=a;this._cell=null;this._component=null;this._tooltip=null};rdx.form_component.prototype.render=function(n,d,m,f,s,q,t){var p=(s.is_read_only()||this._form_field.get_input_type()==rdx.form_constants.LABEL)?rdx.form_constants.LABEL:this._form_field.get_input_type();if(s.is_read_only()&&this._form_field.get_input_type()==rdx.form_constants.VIEW){p=rdx.form_constants.VIEW}this._component=rdx.component_helper.get_component(p,d,this._form_field,s);if(rdx.utils.is_defined(this._form_field.get_prompt())){s.add_prompt_field(this._form_field)}if(rdx.utils.is_defined(this._form_field.get_resource_name())){s.add_maskable_component(this._component)}this._cell=this._render_label_field(this._parent,n,d,this._component,this._form_field,s.is_read_only(),s.is_two_row_layout_for_fields(),m,s.is_dialog(),f,s);this._render_component(this._component);var h=this._form_field._get_extra_form_field();if(rdx.utils.is_defined(h)){var g=rdx.component_helper.get_component(h.get_input_type(),d,h,s);this._render_component(g);var e=g.get_component().addClass("extra_field_component_alignment");var o=h.get_label();if(rdx.utils.is_empty(o)){o=h._properties.key}else{var a=rdx.dom_utils.get_element(rdx.form_constants.LABEL);a.addClass("extra_field_label").text(o).appendTo(d)}e.attr("aria-label",o);if(rdx.utils.is_defined(h.get_prompt())){s.add_prompt_field(h)}if(rdx.utils.is_defined(h.get_resource_name())){s.add_maskable_component(g)}if(rdx.utils.is_not_defined(h.get_view())){s.add_field_to_map(h.get_key(),{field:g,form_field_index:q,extra_form_field:true,row:row,cell:d,field_validation_trigger:t,form_field:h})}if(h.is_embedded_component()){d.addClass("form_embedded_view");d.attr("colspan",s.get_properties().number_of_columns);s.add_embedded_view(g)}var b=h.get_value();if(b!=null){s.get_form().set_field_value(h.get_key(),b,null)}}if(p==="label"&&this._form_field.is_force_tooltip()){if(rdx.utils.is_defined(this._form_field._properties.show_tooltip_on_field)&&this._form_field._properties.show_tooltip_on_field){this._render_tooltip(s,d)}else{this._render_tooltip(s,n)}}else{this._render_tooltip(s,d)}this._render_error_div(s,d)};rdx.form_component.prototype._render_error_div=function(b,e){var g=new rdx.error_tooltip();b.add_error_tooltip_to_map(this._form_field.get_key(),g);var a=this._form_field._get_extra_form_field();if(rdx.utils.is_defined(a)){var h=new rdx.error_tooltip();b.add_error_tooltip_to_map(this._form_field._get_extra_form_field().get_key(),h);var d=h.render();d.addClass("hide");e.append(d)}var f=g.render();f.addClass("hide");e.append(f)};rdx.form_component.prototype._render_label_field=function(o,m,b,v,s,C,B,d,q,p,g){B=s.get_input_type()==rdx.form_constants.LINK?false:B;var t=null;var a=true;var u=null;if(!C){if(rdx.utils.is_not_defined(d)){d=1}if(q==true){var f=(1/d)*(30);var w=f+"%";m.css("width",w)}}m.addClass("label");if(rdx.form_utils.is_label_first(v)){if(rdx.utils.is_defined(B)&&B==true){var A=$("<table>").addClass("form_two_column_layout").attr("cellpadding",0).attr("cellSpacing",0).attr("role","presentation").append($("<tbody>"));if(rdx.utils.is_function(v.get_label_container)){t=v.get_label_container()}else{t=$("<tr>").appendTo(A)}if(s.is_title()){a=false}else{u=$("<tr>").appendTo(A);if(s.get_input_type()==rdx.form_constants.LABEL){u.addClass("form_field_label")}}if(s.is_embedded_component()){A.addClass("form_two_column_view_layout")}var h=$("<td>").append(A).addClass("form_multi_layout_container");if(g.is_fixed_column_width()&&rdx.utils.is_defined(d)&&d>1){h.css("width",((100/d)+"%"))}var n=s.get_col_span();if(rdx.utils.is_defined(n)&&n>0){h.attr("colspan",s.get_col_span())}if(s.get_width()!=-1){A.css("width",s.get_width());h.css("width",s.get_width())}o.append(h);if(!C&&(p>=(d))){if(s.add_extra_padding_column()){var D=rdx.utils.is_defined(s.get_col_span())?s.get_col_span():1;h.attr("colspan",D+1)}else{o.append($("<td>").addClass("rdx_form_padding_column"))}}}else{t=o;u=o}b.addClass("field");if(s.is_label_needed()){if(s.get_label_width()!=-1){m.width(s.get_label_width())}if(s.is_title()){m.addClass("label_title")}rdx.style.apply_style(s,m);if(s.is_disable()){m.addClass("label_disable")}if(s.is_error()){m.addClass("label_error")}if(rdx.utils.is_function(v.get_label_container)){var e=s.get_label();if(s.is_mandatory()){e+="*"}t.append(e)}else{t.append(m)}}else{if(rdx.utils.is_defined(t)){m.addClass("hide").appendTo(t);t.addClass("no_label_field");if(s.is_title()){t.addClass("label_title")}}rdx.style.apply_style(s,m)}if(s.is_disable()){m.addClass("label_disable")}if(s.is_error()){m.addClass("label_error")}if(rdx.utils.is_defined(u)){if(a===true){u.append(b)}else{u.remove()}}return b}else{o.append(b);if(s.is_label_needed()){if(s.get_label_width()!=-1){b.width(s.get_label_width())}var z=$("<span>");if(rdx.utils.is_function(v.get_label_container)&&rdx.utils.is_defined(v.get_label_container())){z=v.get_label_container()}z.addClass("input_label");if(s.is_title()){z.addClass("label_title")}z.append(m.text());b.append(z)}if(!C&&(p>=(d))){if(s.add_extra_padding_column()){var D=rdx.utils.is_defined(s.get_col_span())?s.get_col_span():1;b.attr("colspan",D+1)}else{o.append($("<td>").addClass("rdx_form_padding_column"))}}return m}};rdx.form_component.prototype._render_component=function(a){if(rdx.utils.is_defined(a)){a.render();var b;if(rdx.utils.is_function(a.get_input_type_element)){b=a.get_input_type_element()}else{if(rdx.utils.is_function(a.get_component)){b=a.get_component()}}if(b&&rdx.utils.is_function(a.get_component_type)&&rdx.utils.is_function(b.attr)&&rdx.utils.is_function(a.get_field)){if(a.get_component_type()!=rdx.form_constants.LABEL&&a.get_field().is_mandatory()){b.attr("aria-required",true)}}}};rdx.form_component.prototype._render_tooltip=function(a,d){var e=null;var g=null;var f=null;var b=null;if(this._form_field.is_force_tooltip()||!(a.is_read_only()||this._form_field.get_input_type()==rdx.form_constants.LABEL||this._form_field.get_input_type()==rdx.form_constants.NOTE||this._form_field.get_input_type()==rdx.form_constants.LINK||this._form_field.is_embedded_component())){if(rdx.utils.is_not_empty(this._form_field.get_tooltip())){b=this._component.get_component();e=$("<div>").addClass("rdx_help_cell_container").attr("tabindex",0).addClass("help_cell_container_inactive");g=$("<span>").addClass("help_cell");e.append(g);d.append(e);d.addClass("tooltip_holder");f=new rdx.tooltip(e,{tooltip_more_img_url:this._form_field.get_tooltip_more_img_url()});b.addClass("component_alignment");b.bind(rdx.events.FOCUS_IN,{tooltip_cell:e,field_cell:d},function(h){h.data.tooltip_cell.removeClass("help_cell_container_inactive");h.data.tooltip_cell.addClass("component_focussed");h.stopPropagation()});b.bind(rdx.events.FOCUS_OUT,{tooltip_cell:e,field_cell:d,that:this},function(h){h.stopPropagation()});d.bind(rdx.events.FOCUS_OUT,{tooltip:f,tooltip_cell:e,field_cell:d,that:this},function(h){h.data.tooltip_cell.removeClass("component_focussed");if(!(rdx.utils.is_hover(h.data.field_cell,h))&&!(h.data.tooltip_cell.hasClass("rdx_tooltip_active"))){h.data.tooltip_cell.addClass("help_cell_container_inactive")}if(rdx.utils.is_defined(h.data.that._tooltip)&&!(rdx.utils.is_hover(h.data.that._tooltip,h))&&!(rdx.utils.is_hover($(this),h))){h.data.that._remove_tooltip(h)}$(h.target).removeAttr("aria-label");h.stopPropagation()});g.bind(rdx.events.MOUSE_LEAVE,{tooltip:f,tooltip_cell:e,field_cell:d,that:this},function(h){if(rdx.utils.is_defined(h.data.that._tooltip)&&!(rdx.utils.is_hover(h.data.that._tooltip,h))&&!(rdx.utils.is_hover($(this),h))){h.data.that._remove_tooltip(h)}$(h.target).removeAttr("aria-label");h.stopPropagation()});d.bind(rdx.events.MOUSE_OVER,{tooltip_cell:e,component:b},function(h){h.data.tooltip_cell.removeClass("help_cell_container_inactive");h.stopPropagation()});d.bind(rdx.events.MOUSE_LEAVE,{tooltip_cell:e,component:b,field_cell:d,that:this},function(h){h.data.that._handle_component_mouse_leave_event(h)});this._register_help_cell_events(e,f)}}};rdx.form_component.prototype._handle_component_mouse_leave_event=function(a){if(!(a.data.tooltip_cell.hasClass("component_focussed"))){if(!(rdx.utils.is_hover(a.data.tooltip_cell,a))){a.data.tooltip_cell.addClass("help_cell_container_inactive")}}a.stopPropagation()};rdx.form_component.prototype._remove_tooltip=function(a){a.data.tooltip.remove_tooltip(a);a.data.that._tooltip=null;a.stopPropagation()};rdx.form_component.prototype._register_help_cell_events=function(b,d){var a={};b.bind(rdx.events.MOUSE_OVER+" "+rdx.events.FOCUS_IN,{tooltip:d,that:this},function(e){a.message=e.data.that._form_field.get_tooltip();a.remove_handler_callback=e.data.that._tooltip_callback_handler;if($(e.target).hasClass("rdx_help_cell_container")){$(e.target).attr("aria-label",a.message)}else{$(e.target).parent(".rdx_help_cell_container").attr("aria-label",a.message)}e.data.that._tooltip=e.data.tooltip.render(a);e.stopPropagation()})};rdx.form_component.prototype._tooltip_callback_handler=function(a){if(!(a.hasClass("component_focussed"))){a.addClass("help_cell_container_inactive")}};rdx.form_component.prototype.get_component=function(){return this._component};rdx.form_component.prototype.get_cell=function(){return this._cell};rdx.form=function(b,e,f,d){this._parent=typeof(b)=="string"?$("#"+b):b;if(!rdx.utils.is_array(e)){var a=[];a.push({form_fields:e});e=a}this._form_holder=new rdx.form_holder(this,d,e,f);this._field_resource_properties=f;this._form_fields_dfn=e;this._form_properties=d;this._error_found=false;this._expected_response_arrivals=1;this._resource=null;this._button_bar=null;this._mask_id=rdx.mask.get_id();this._form_data_fetch_callback=new rdx.callback(this,this.get_form_data);this._add_help_id=true;this._form_button_update_callback=null;this.app_context_data=null};rdx.form.prototype.render=function(){var a=null;if(rdx.utils.is_array(this._form_fields_dfn)){a=new rdx.layout_manager(this._form_holder).render()}this._form_div=$("<div>").addClass("form_base_container");this._form_div.append(a);if(rdx.ELEMENTS_READONLY==false){this._render_bottom_bar(a,this._form_div)}else{this._render_bottom_close_bar(a,this._form_div)}this._parent.append(this._form_div);if(rdx.utils.is_defined(this._form_holder.get_more_info_view())){a.bind(rdx.events.CLICK,{form:this},function(f){var e=f.data.form;var d=rdx.utils.get_view(e._form_holder.get_more_info_view());var b=null;if(rdx.utils.is_defined(d.view_context)){b=d.view_context}rdx.view_utils.show_view_in_slider(d,null,e.get_form_data(),b);f.stopPropagation()})}return this};rdx.form.prototype.get_parent=function(){return this._parent};rdx.form.prototype._render_bottom_bar=function(g,e){var h=null;var b=$("<tr>");if(!(this._form_holder.is_add_close_button()||this._form_holder.is_add_create_button())){return null}if(!this._form_holder.is_read_only()){h=$('<table role="presentation">').addClass("form_buttons").append($("<tbody>"));h.append(b);var f={add_blue_button:false,add_grey_button:false,add_create_and_add_button:false,blue_button_label:"rdx.button_add",blue_button_tooltip:null,grey_button_label:"rdx.button_remove",grey_button_tooltip:null,blue_button_click_handler_callback:null,grey_button_click_handler_callback:null,create_and_add_click_handler_callback:null,custom_class_names:"form_buttons",disable_blue_button:true};if(this._form_holder.is_custom_button_options_enabled()){f.custom_button_options=this._form_holder.get_custom_button_options()}if(this._form_holder.is_add_create_button()){f.add_blue_button=true;if(!rdx.utils.is_empty(this._form_holder.get_button_label())){f.blue_button_label=this._form_holder.get_button_label()}else{var m=rdx.i18n.get_string("rdx.form_add_button_label");var d=rdx.i18n.get_string("rdx.form_modify_button_label");f.blue_button_label=this._form_holder.is_add_mode()||this._form_holder.is_create_mode()?m:d}}if(this._form_holder.is_add_close_button()){f.grey_button_label=rdx.utils.is_defined(this._form_properties.add_cancel_button_label)?this._form_properties.add_cancel_button_label:rdx.i18n.get_string("rdx.form_close_button_label");f.add_grey_button=true;f.grey_button_click_handler_callback=this._form_holder.get_cancel_handler_callback()}if(this._form_holder.is_add_create_and_add_button()){f.add_create_and_add_button=true}}if(!this._form_holder.is_read_only()&&this._form_holder.is_add_create_button()){f.blue_button_click_handler_callback=new rdx.callback(this,this.handle_submit)}if(!this._form_holder.is_read_only()&&this._form_holder.is_add_create_and_add_button()){f.create_and_add_click_handler_callback=new rdx.callback(this,this.handle_submit,[false])}var a=$("<td>");b.append(a);this._button_bar=new rdx.button_bar(a,new rdx.form_field({properties:f}));this._button_bar.render();if(this._form_holder.is_add_create_button()&&!this._form_holder.is_add_mode()&&rdx.utils.is_defined(this._button_bar)){this._button_bar.disable()}if(this.get_add_help_id()==true){this._add_help(b)}if(rdx.utils.is_defined(h)){e.addClass("form_base_container_border");e.append(h)}return h};rdx.form.prototype._render_bottom_close_bar=function(f,d){var g=null;var b=$("<tr>");if(!this._form_holder.is_add_close_button()){return null}g=$("<table>").addClass("form_buttons").append($("<tbody>"));g.append(b);var e={add_blue_button:false,add_grey_button:false,add_create_and_add_button:false,blue_button_label:"rdx.button_add",blue_button_tooltip:null,grey_button_label:"rdx.button_remove",grey_button_tooltip:null,blue_button_click_handler_callback:null,grey_button_click_handler_callback:null,create_and_add_click_handler_callback:null,custom_class_names:"form_buttons",disable_blue_button:true};e.grey_button_label=rdx.i18n.get_string("rdx.form_close_button_label");e.add_grey_button=true;e.grey_button_click_handler_callback=this._form_holder.get_cancel_handler_callback();var a=$("<td>");b.append(a);this._button_bar=new rdx.button_bar(a,new rdx.form_field({properties:e}));this._button_bar.render();if(this.get_add_help_id()==true){this._add_help(b)}if(rdx.utils.is_defined(g)){d.addClass("form_base_container_border");d.append(g)}return g};rdx.form.prototype.handle_submit=function(b,a){if((!this._form_holder.is_add_mode()&&rdx.utils.is_defined(this._button_bar)&&this._button_bar.is_disabled())||(rdx.ELEMENTS_READONLY)){return false}if(rdx.utils.is_defined(this._form_holder.get_prompt())){rdx.message_box.confirm(rdx.i18n.get_string(this._form_holder.get_prompt()),new rdx.callback(this,this._submit_form));return false}else{return this._submit_form(a)}};rdx.form.prototype._submit_form=function(a){if(!this._validate()){return false}if(rdx.utils.is_defined(a)&&a==false){this._set_focus_on_first_field()}if(this._form_holder.get_submit_handler_callback()){this._form_holder.get_submit_handler_callback().call_back([a])}return false};rdx.form.prototype.set_keyboard_handler_callback=function(a){this._form_holder.set_keyboard_handler_callback(a)};rdx.form.prototype._add_help=function(a){if(rdx.utils.is_not_defined(this._form_holder.get_help_id())){return}var b=$("<td>").css("textAlign","right");rdx.help.add_help(b,this._form_holder.get_help_id());a.append(b)};rdx.form.prototype.set_form_button_update_callback=function(a){this._form_button_update_callback=a};rdx.form.prototype.update_submit_button_label=function(a){if(rdx.utils.is_defined(this._form_button_update_callback)){this._form_button_update_callback.call_back(["submit_button",{is_update_label:true},a])}};rdx.form.prototype.reset_submit_button_label=function(){if(rdx.utils.is_defined(this._form_button_update_callback)){this._form_button_update_callback.call_back(["submit_button",{is_update_label:false}])}};rdx.form.prototype.hide_button=function(){if(rdx.utils.is_defined(this._form_button_update_callback)){this._form_button_update_callback.call_back(["skip_button",{is_update_label:false,hide_button:true}])}};rdx.form.prototype.initialize=function(a){this._bind_error_message();if(rdx.utils.is_not_defined(a)){if(!this._form_holder.is_add_mode()&&rdx.utils.is_defined(this._button_bar)){this._button_bar.enable()}return}this._resource=a;this._decrement_expected_responses();if(this._all_responses_arrived()){this._initialize()}};rdx.form.prototype._do_validate_ipv4_octet=function(m,h,v,t){if(m.is_hidden()){return true}var g=m.get_key();var u=m.get_label();var b=this._form_holder.get_field(g);if(rdx.utils.is_not_defined(v)){v=""}var s=[];if(rdx.utils.is_array(v)){s=v}else{s.push(v)}for(var d=0;d<s.length;d++){var q=s[d].split(".");var p=/^(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[1-9]|0)$/;var n=this._form_holder.get_field(g);var o=q.length;if(o>4){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:u}),g);this._error_found=true;return false}for(var f=0;f<o;f++){var e=q[f];if(!(e.match(p))){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:u}),g);this._error_found=true;return false}}}if(rdx.utils.is_not_empty(n)&&!(n instanceof rdx.base_view)){rdx.form_utils.handle_component_show_error(b.field);var a=this._form_holder.get_error_tooltip(g);if(rdx.utils.is_function(b.field.hide_error_message)){b.field.hide_error_message()}else{a.set_data("")}}return true};rdx.form.prototype._bind_error_message=function(){var f=this._form_holder.get_form_fields();for(var b=0,h=f.length;b<h;b++){var e=f[b];var m=e.get_type();var o=e.get_input_type();var d=e.get_key();var g=this._form_holder.get_field(d);var a=this._form_holder.get_field(d);var n=rdx.utils.is_function(g.field.get_component)?g.field.get_component():null;if(rdx.utils.is_not_empty(n)){if(rdx.form_utils.check_is_focus_out_component(g)){n.bind(rdx.events.FOCUS_OUT,{form:this,field_data:g},function(p){setTimeout(function(){if(p.data.form.dont_render_error==true){return}var z=p.data.field_data;var v=p.data.form;var q=z.form_field;var s=z.form_field_index;var w=z.form_field.get_type();var t=z.form_field.get_key();var u=z.field.get_data();v.get_form_holder().set_focus(t);v._do_validate_form_field(q,s,u,w)},200)});if(m=="VALIPSTR"||o==rdx.form_constants.IPV4||o==rdx.form_constants.IPV4V6){n.bind(rdx.events.KEYDOWN,{form:this,field_data:g},function(p){var u=p.keyCode;var q=p.data.form;var w=p.data.field_data;var t=w.form_field;var A=w.field.get_data();var z=w.form_field.get_type();var s=w.form_field_index;var v=p.ctrlKey;if(!v){if(u==rdx.keycodes.DOT){q._do_validate_ipv4_octet(t,s,A,z)}}})}n.bind(rdx.events.FOCUS_IN,{form:this,field_data:g,form_field_info:a},function(t){var z=t.data.field_data;var u=t.data.form;var s=t.data.form_field_info;var w=z.form_field;var v=z.form_field.get_key();if(s.field instanceof rdx.ip_range||s.field instanceof rdx.file_browser||s.field instanceof rdx.file_upload_component){z.field.get_component().find(".error_text").removeClass("error_text");z.field.get_component().find(".rdx_error_container").addClass("hide");var A=u.get_form_holder();var q=A.get_error_tooltip(v);q.set_data("")}else{if(rdx.utils.is_defined(w.get_field_info())){var B=w.get_field_info();if(rdx.utils.is_not_empty(B)){var p=rdx.i18n.get_string(B);u._show_field_error(p,v,rdx.INFO)}}}})}if(a.field instanceof rdx.entity_chooser){n.bind(rdx.events.CHANGE,{form:this,field_data:g},function(v){if(v.data.form.dont_render_error==true){return}var z=v.data.field_data;var u=v.data.form;var p=z.form_field;var q=z.form_field_index;var w=z.form_field.get_type();var s=z.form_field.get_key();var t=z.field.get_data();u.get_form_holder().set_focus(s);u._do_validate_form_field(p,q,t,w)})}if(a.field instanceof rdx.file_upload_component&&rdx.utils.is_defined(g.form_field.get_properties().multiple_upload_allowed)&&g.form_field.get_properties().multiple_upload_allowed){n.bind(rdx.events.CHANGE,{form:this,field_data:g},function(v){if(v.data.form.dont_render_error==true){return}var z=v.data.field_data;var u=v.data.form;var p=z.form_field;var q=z.form_field_index;var w=z.form_field.get_type();var s=z.form_field.get_key();var t=z.field.get_data();u.get_form_holder().set_focus(s);u._do_validate_form_field(p,q,t,w)})}}}};rdx.form.prototype._initialize=function(){var d=this._resource;if(rdx.utils.is_not_defined(d)){return}var f=this._form_holder.get_form_fields();for(var v=0,z=f.length;v<z;v++){var s=f[v];var b=s.get_key();var w=this.set_field_value(b,d[b],d);if(rdx.utils.is_defined(s._parent_container)&&(rdx.utils.is_not_empty(w)&&w!="new"&&w!=s.get_value())){s._parent_container.expand_optional_group()}if(b=="password"&&s.is_confirm()){var u=this.get_form_field(b+"_confirm");var p=u.get_key();if(w!=""){this.set_field_value(p,w)}}if(rdx.utils.is_defined(w)){s.set_resource_value(w)}if(rdx.utils.is_defined(s._get_extra_form_field())){var t=s._get_extra_form_field();var g=t.get_key();if(rdx.utils.is_not_defined(d[g])){continue}var m=this.set_field_value(g,d[g],d);if(rdx.utils.is_defined(m)){t.set_resource_value(m)}}}var o=this._form_holder.get_all_containers();if(rdx.utils.is_defined(o)){for(var a in o){var n=o[a];if(rdx.utils.is_not_defined(n.field)){continue}if(!rdx.form_utils.is_container_valid_for_resource(n.field)){continue}n.field.set_data(d)}}if(!this._form_holder.is_add_mode()&&rdx.utils.is_defined(this._button_bar)){this._button_bar.enable()}var q=this._form_holder.get_prompt_fields();for(var e=0;e<q.length;e++){var s=q[e];var h=this._form_holder.get_field(s.get_key()).field;rdx.form_utils.initialize_prompt_event_handler(s.get_prompt(),h)}$(this).trigger(rdx.form_constants.FORM_INITIALIZED)};rdx.form.prototype._validate=function(){this._error_found=false;if(this._form_holder.is_read_only()){return true}var h=this._form_holder.get_form_fields();for(var e=0,n=h.length;e<n;e++){var g=h[e];if(!g.is_valid()){continue}var o=this._validate_form_field(g,e);if(!o){this._error_found=true;return false}if(rdx.utils.is_defined(g._get_extra_form_field())){if(!this._validate_form_field(g._get_extra_form_field())){this._error_found=true;return this._error_found}}}var a=this._form_holder.get_embedded_views();for(var f=0;f<a.length;f++){var d=a[f];var p=d.get_component();var m=d.get_field();if(rdx.utils.is_not_defined(p)||!rdx.utils.is_function(p.get_form)){continue}if(rdx.utils.is_defined(m)&&m.is_hidden()){continue}var b=p.get_form();if(rdx.utils.is_defined(b)){var o=b._validate();if(!o){this._error_found=true;return false}}}return !this._error_found};rdx.form.prototype._validate_form_field=function(a,b){var d=a.get_key();return this._do_validate_form_field(a,b,this.get_field_value(d),a.get_type())};rdx.form.prototype._do_validate_form_field=function(C,p,I,h){if(C.is_hidden()){return true}var a=C.get_key();var B=C.get_label();var s=this._form_holder.get_field(a);var w="";if(rdx.utils.is_function(this._form_holder.get_field(a).field.get_component)){w=this._form_holder.get_field(a).field.get_component()}var A=C.get_input_type();var b=this._get_field(a);if(b.validate){var K=b.validate();if(K){this._show_field_error(rdx.i18n.get_string(K,{field_label:B}),a);this._error_found=true;return false}}if(!C.to_validate()){return !this._error_found}if(h=="VALBOOL"){return !this._error_found}if((C.is_mandatory()||C.get_force_validate())&&(rdx.utils.is_not_defined(I)||I.length==0)){if(rdx.utils.is_defined(C.get_input_type())&&((C.get_input_type()==rdx.form_constants.LIST)||(C.get_input_type()==rdx.form_constants.ENTITY_CHOOSER)||(C.get_input_type()==rdx.form_constants.BIND_UNBIND_LIST))){this._show_field_error(rdx.i18n.get_string("rdx.form_mandatory_list_error",{field_label:B}),a)}else{this._show_field_error(rdx.i18n.get_string("rdx.form_mandatory_error",{field_label:B}),a)}this._error_found=true;return false}if(rdx.utils.is_defined(I)&&rdx.utils.is_not_empty(I)&&rdx.utils.is_defined(C._properties)&&C._properties.custom_regexp_validation&&!(I.match(C._properties.custom_regexp_validation.regexp))){this._show_field_error(rdx.i18n.get_string(C._properties.custom_regexp_validation.error,{field_label:B}),a);return false}if(h=="VALNAME"){var J=rdx.utils.is_array(I);if(J===false){if(!I.match(/^[ 0-9a-zA-Z#_.\@:=-]*$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_string_error",{field_label:B}),a);this._error_found=true;return false}}else{for(var m=0;m<I.length;m++){if(!I[m].match(/^[ 0-9a-zA-Z#_.\@:=-]*$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_string_error",{field_label:B}),a);this._error_found=true;return false}}}}if(h=="VALPORT"||h=="VALNUM"){var J=rdx.utils.is_array(I);if(J===false){if(!I.match(/^\d*$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_number_error",{field_label:B}),a);this._error_found=true;return false}}else{for(var m=0;m<I.length;m++){if(!I[m].match(/^\d*$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_number_error",{field_label:B}),a);this._error_found=true;return false}}}}if(h=="VALPORTSTR"){var J=rdx.utils.is_array(I);if(J===false){if(rdx.utils.is_function(I.match)&&!I.match(/^\d*$/)&&(I!=="*")){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_number_error",{field_label:B}),a);this._error_found=true;return false}}else{for(var m=0;m<I.length;m++){if(rdx.utils.is_function(I[m].match)&&!I[m].match(/^\d*$/)&&(I!=="*")){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_number_error",{field_label:B}),a);this._error_found=true;return false}}}}if(h=="VALREAL"){var J=rdx.utils.is_array(I);if(J===false){if(!I.match(/^([0-9]+\.[0-9]+)$|^([0-9]*\.[0-9]+)$|^([0-9]*)$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_number_error",{field_label:B}),a);this._error_found=true;return false}}else{for(var m=0;m<I.length;m++){if(!I[m].match(/^([0-9]+\.[0-9]+)$|^([0-9]*\.[0-9]+)$|^([0-9]*)$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_number_error",{field_label:B}),a);this._error_found=true;return false}}}}if(h=="VALNETMASK"&&!(rdx.utils.is_netmask(I))&&!I.match(/^\d*$/)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:B}),a);this._error_found=true;return false}var o=C.get_input_type();if(h=="VALIPSTR"){var E=I;if(!(rdx.utils.is_array(I))){E=[I]}for(var G=0;G<E.length;G++){I=E[G];if(I.length>0&&!(rdx.utils.is_ipv4(I)||rdx.utils.is_ipv6(I))){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:B}),a);this._error_found=true;return false}}}if(h=="VALIP4STR"||o=="ipv4"){var E=I;if(!(rdx.utils.is_array(I))){E=[I]}for(var G=0;G<E.length;G++){I=E[G];if(I.length>0&&!rdx.utils.is_ipv4(I)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:B}),a);this._error_found=true;return false}}}if(h=="VALEMAIL"){if(rdx.utils.is_not_empty(I)){var E=I.split(";");for(var G=0;G<E.length;G++){if(!rdx.utils.is_email(E[G])){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_email",{field_label:B}),a);this._error_found=true;return false}}}}if(h=="VALIP6STR"||o=="ipv6"){var E=I;if(!(rdx.utils.is_array(I))){E=[I]}for(var G=0;G<E.length;G++){I=E[G];if(I.length>0&&!rdx.utils.is_ipv6(I)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:B}),a);this._error_found=true;return false}}}if(h=="VALIPRANGE"&&rdx.utils.is_defined(I)){var e=I.get_ip_string();if(!rdx.utils.is_ipv4(e)){this._show_field_error(rdx.i18n.get_string("rdx.form_invalid_ip_error",{field_label:B}),a);this._error_found=true;return false}var q=I.get_range();if(rdx.utils.is_num(q)){this._show_field_error(rdx.i18n.get_string("rdx.iprange_format_error"),a);this._error_found=true;return false}var F=parseInt(q);if(F>=254){this._show_field_error(rdx.i18n.get_string("rdx.iprange_maxval_error"),a);this._error_found=true;return false}var H=I.get_range_start();if(F<H){this._show_field_error(rdx.i18n.get_string("rdx.iprange_error"),a);this._error_found=true;return false}}if(h=="VALPROXY"){if(rdx.utils.is_not_empty(I)){var D=I.split(":");if(D.length>2){this._show_field_error(rdx.i18n.get_string("rdx.proxy_error"),a);this._error_found=true;return false}var t=D[0].trim();if(rdx.utils.is_defined(D[1])){var u=D[1].trim()}if(!rdx.utils.is_ipv4(t)&&t.toUpperCase()!="NOPROXY"){this._show_field_error(rdx.i18n.get_string("rdx.proxy_error"),a);this._error_found=true;return false}if(rdx.utils.is_empty(u)&&t.toUpperCase()!="NOPROXY"){this._show_field_error(rdx.i18n.get_string("rdx.proxy_error"),a);this._error_found=true;return false}if(t.toUpperCase()=="NOPROXY"&&I.match(/:/)){this._show_field_error(rdx.i18n.get_string("rdx.proxy_error"),a);this._error_found=true;return false}if(rdx.utils.is_defined(u)){if(!rdx.utils.is_number(u)){this._show_field_error(rdx.i18n.get_string("rdx.port_error"),a);this._error_found=true;return false}if(Number(u)<1||Number(u)>65535){this._show_field_error(rdx.i18n.get_string("rdx.port_error"),a);this._error_found=true;return false}}}}if((h=="VALNUM"||h=="VALPORT"||(h=="VALPORTSTR"&&I!=="*"))&&rdx.utils.is_defined(C.get_min_max_values())){var J=rdx.utils.is_array(I);if(J===false){if(rdx.utils.is_defined(I)&&I.length>0){if(this._validate_min_max(C,I,B,a)===false){this._error_found=true;return false}}}else{for(var m=0;m<I.length;m++){if(this._validate_min_max(C,I[m],B,a)===false){this._error_found=true;return false}}}}if(A=="password"&&C.is_confirm()){if(rdx.utils.ends_with(a,"_confirm")){var z=this.get_field_value(a.slice(0,a.length-8));var a=C.get_key();var B=C.get_label();if(z!=I){var g=B.replace(/confirm/i,"").trim();this._show_field_error(rdx.i18n.get_string("rdx.form_password_mismatch",{password:g,confirm_password:B}),a);this._error_found=true;return false}}}if(rdx.utils.is_not_empty(w)&&!(w instanceof rdx.base_view)){rdx.form_utils.handle_component_show_error(s.field);var d=this._form_holder.get_error_tooltip(a);if(rdx.utils.is_function(s.field.hide_error_message)){s.field.hide_error_message()}else{d.set_data("")}}if(rdx.utils.is_defined(C.get_validate_callback())){var v=C.get_validate_callback().call_back([I]);if(rdx.utils.is_defined(v)){if(rdx.utils.is_object(v)){var f=rdx.utils.is_not_empty(v.type)?v.type:rdx.ERROR;var n=rdx.i18n.get_string(v.message);this._show_field_error(n,a,f)}else{if(A=="drag_drop_editor"){this._show_editor_field_error(rdx.i18n.get_string(v),a);return false}else{this._show_field_error(rdx.i18n.get_string(v),a);this._error_found=true;return false}}}}return true};rdx.form.prototype._validate_min_max=function(a,h,b,f){var e=this._form_holder.get_field(f).field.get_component();var m=rdx.utils.is_defined(a.get_min_max_values().min)&&a.get_min_max_values().min>h;var g=rdx.utils.is_defined(a.get_min_max_values().max)&&a.get_min_max_values().max<h;if(m||g){if(rdx.utils.is_defined(a.get_min_max_values().min,a.get_min_max_values().max)){this._show_field_error(rdx.i18n.get_string("rdx.min_max_error_msg",{field_label:b,min_val:a.get_min_max_values().min,max_val:a.get_min_max_values().max}),f);this._error_found=true;return false}}if(m){this._show_field_error(rdx.i18n.get_string("rdx.min_error_msg",{field_label:b,min_val:a.get_min_max_values().min}),f);this._error_found=true;return false}if(g){this._show_field_error(rdx.i18n.get_string("rdx.max_error_msg",{field_label:b,max_val:a.get_min_max_values().max}),f);this._error_found=true;return false}if(rdx.utils.is_not_empty(e)){e.removeClass("error_text");var d=this._form_holder.get_error_tooltip(f);d.set_data("")}return true};rdx.form.prototype._get_field=function(a){return this._form_holder.get_field(a).field};rdx.form.prototype.get_field=function(a){return this._get_field(a)};rdx.form.prototype._get_form_field=function(d){var e=this._form_holder.get_field(d);var a=[];if(rdx.utils.is_defined(e)){if(rdx.utils.is_array(e)){for(var b=0;b<e.length;b++){a[b]=e[b].form_field}return a}else{return e.form_field}}else{return null}};rdx.form.prototype.get_field_info=function(a){return this._form_holder.get_field(a)};rdx.form.prototype.get_container_info=function(a){return this._form_holder.get_container(a)};rdx.form.prototype.get_form_field=function(a){return this._get_form_field(a)};rdx.form.prototype.validate=function(){return this._validate()};rdx.form.prototype.get_field_value=function(d){var a=null;var e=this._get_field(d);if(rdx.utils.is_function(e.get_data)){a=e.get_data()}var b=this._get_form_field(d);if(rdx.utils.is_defined(b.get_formatter())){a=b.get_formatter().get_storage_value(a)}if(rdx.utils.is_defined(a)){return a}else{if(rdx.utils.is_function(e.text)){return $.trim(e.text())}}return""};rdx.form.prototype.set_form_field_data_items=function(g,m,b,d,f,a){var n=this._get_field(g);if(rdx.utils.is_not_defined(m)){rdx.form_utils.unmask_component(n);return}var h=this._get_form_field(g);rdx.form_utils.unmask_component(n);if(!rdx.utils.is_array(m)){m=[m]}if(rdx.utils.is_function(n.add_data_items)){if(rdx.utils.is_defined(f)&&f===true){n.add_data_items.apply(n,[m,d])}else{var e=h.get_formatter()?h.get_formatter().map_data_items(m):m;n.add_data_items.apply(n,[e,d])}var o=null;if(rdx.utils.is_defined(h.get_formatter())){o=h.get_formatter().get_set_data()}if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.set_data)){n.set_data(n.get_field().get_resource_value())}else{if(rdx.utils.is_defined(o)){if(o==true){n.set_data(e[0])}else{n.set_data(o)}}}if(rdx.utils.is_defined(a)){n.set_data(a)}}else{if(rdx.utils.is_defined(h.get_formatter())){var e=h.get_formatter().map_data_items(m);if(rdx.utils.is_defined(e)&&e.length>0){if(e[0]=="undefined"){n.set_data("")}else{n.set_data(e[0])}}}else{if(n.get_field().get_input_type()==rdx.form_constants.VIEW){n.set_data(m,this._resource,this.get_resource())}}}};rdx.form.prototype.set_field_value=function(f,g,h){var m=this._get_field(f);var d=this._get_form_field(f);var b=d.get_input_type();var a=rdx.form_utils.get_form_field_data_items(f,h);if(rdx.utils.is_defined(a)){this.set_form_field_data_items(f,a,null,true,true);d.set_formatter(null)}if(rdx.utils.is_defined(d.get_formatter())){g=d.get_formatter().get_display_value(g,h)}var e=(rdx.utils.is_defined(g)&&rdx.utils.is_function(m.get_data))?true:false;if(e&&typeof(m.get_data())=="string"){e=(m.get_data()!=String(g))}if(e||d.is_embedded_component()){if(this._is_read_only()&&rdx.utils.is_not_empty(g)&&typeof(g)=="string"){g=rdx.utils.html_encode(g)}m.set_data(g,h,this._form_holder.get_resource())}return g};rdx.form.prototype._show_editor_field_error=function(e,d){var b=this._form_holder.get_field(d);var a=this._get_form_field(d);if(rdx.utils.is_defined(b.field_validation_trigger)){$(b.field_validation_trigger).trigger(rdx.form_constants.CONTAINER_VALIDATION_ERROR,[a])}rdx.page.show_notification(e,rdx.ERROR,true)};rdx.form.prototype._show_field_error=function(m,f,h){var b=this._form_holder.get_field(f);var g=this._get_form_field(f);if(rdx.utils.is_defined(b.field_validation_trigger)){$(b.field_validation_trigger).trigger(rdx.form_constants.CONTAINER_VALIDATION_ERROR,[g])}rdx.form_utils.handle_component_show_error(b.field,true);if(b.field instanceof rdx.view_component_adapter||b.field instanceof rdx.card_component){return}b.field.get_component().addClass("component_alignment");var n=b.form_field.get_label();if(g.is_mandatory()){n=n+"*"}var p=b.field.get_component().outerWidth();var e=$("[fieldfor='"+n+"']:visible");var a;if(e&&e.length){var d=$(e).width();var o=d-p;a=this._form_holder.get_error_tooltip(f)}if(rdx.utils.is_function(b.field.set_error_message)&&rdx.utils.is_not_defined(h)){b.field.set_error_message(m)}else{if(a){a.set_data(m,o,h,b.field)}}};rdx.form.prototype.show_field_errors=function(b){if(rdx.utils.is_not_defined(b)||rdx.utils.is_object_empty(b)){return}for(var a in b){this._show_field_error(b[a],a)}};rdx.form.prototype._set_focus_on_first_field=function(){var b=this._form_holder.get_form_fields();for(var a=0;a<b.length;a++){if(!b[a].is_hidden()){this._set_focus(b[a].get_key(),b[a]);break}}};rdx.form.prototype._set_focus=function(b,a){if(rdx.utils.is_function(this._get_field(b).focus)){this._get_field(b).focus()}else{if(this._is_text_field(a.get_input_type())){this._get_field(b).get_component().focus()}}};rdx.form.prototype._is_add_mode=function(){var a=this._form_holder.get_submit_operation().method;if(rdx.utils.is_defined(a)&&a==rdx.model_constants.ADD){return true}return false};rdx.form.prototype._is_read_only=function(){return this._form_holder.is_read_only()};rdx.form.prototype._is_text_field=function(a){if(this._form_holder.is_read_only()){return false}return(a==rdx.form_constants.TEXT_BOX||a==rdx.form_constants.TEXT_AREA||a==rdx.form_constants.PASSWORD)};rdx.form.prototype._get_form_fields=function(){return this._form_holder.get_form_fields()};rdx.form.prototype.finalize=function(){this._resize_form_components()};rdx.form.prototype._resize_form_components=function(){var b=this._form_holder.get_embedded_views();for(var a=0;a<b.length;a++){if(rdx.utils.is_function(b[a].resize)){b[a].resize()}}};rdx.form.prototype.refresh=function(){var f=this._form_holder.get_form_fields();for(var e=0,d=f.length;e<d;e++){var a=f[e];var b=this._get_field(a.get_key());if(rdx.utils.is_function(b.refresh)){b.refresh()}}};rdx.form.prototype.get_embedded_views=function(){return this._form_holder.get_embedded_views()};rdx.form.prototype._get_field_resource_response_arrived=function(a,b,d){this.set_response_for_field(a,b,d,null,false);this.check_and_initialize_form()};rdx.form.prototype.set_response_for_field=function(b,h,m,f,e){var a=this._get_form_field(h);var g;if(rdx.utils.is_defined(b.value)){g=b.value.configured_value}if(rdx.utils.is_array(a)){for(var d=0;d<a.length;d++){this.set_form_field_data_items(h[d],b[m],f,e)}}else{this.set_form_field_data_items(h,rdx.utils.is_defined(b[m])?b[m]:[],f,e,null,g)}};rdx.form.prototype.destroy_form=function(e){var b=this._form_holder.get_embedded_views().length;if(b>0){for(var a=0;a<b;a++){var d=this._form_holder.get_embedded_views()[a];if(rdx.utils.is_defined(d)&&rdx.utils.is_function(d.destroy_view)){d.destroy_view(e)}}}};rdx.form.prototype.increment_expected_responses=function(){this._expected_response_arrivals++};rdx.form.prototype._decrement_expected_responses=function(){if(this._expected_response_arrivals==0){return}this._expected_response_arrivals--};rdx.form.prototype._all_responses_arrived=function(){return(this._expected_response_arrivals==0)};rdx.form.prototype.add_form_initialized_event=function(b){var a=this;$(this).bind(rdx.form_constants.FORM_INITIALIZED,{callback:b,form:a},function(d){d.data.callback.call_back([d.data.form])})};rdx.form.prototype.get_form_holder=function(){return this._form_holder};rdx.form.prototype.get_form_data=function(){return rdx.form_utils.get_resource_for_operation(this,this._form_holder.get_resource())};rdx.form.prototype.get_form_data_callback=function(){return this._form_data_fetch_callback};rdx.form.prototype.set_resource=function(a){this._form_holder.set_resource(a)};rdx.form.prototype.get_resource=function(){return this._form_holder.get_resource()};rdx.form.prototype.set_form_data=function(a){this._form_holder.set_form_data(a)};rdx.form.prototype.set_crumb_handler=function(a){this._form_holder.set_crumb_handler(a)};rdx.form.prototype.validate_form_field=function(a,b,e,d){return this._do_validate_form_field(a,b,e,d)};rdx.form.prototype.set_add_help_id=function(a){this._add_help_id=a};rdx.form.prototype.get_add_help_id=function(){return this._add_help_id};rdx.form.prototype.get_formatted_response=function(){return this._resource};rdx.form.prototype.check_and_initialize_form=function(){this._decrement_expected_responses();if(this._all_responses_arrived()){this._initialize()}};rdx.form.prototype.mask=function(a){rdx.mask.mask_component(this._form_div,a)};rdx.form.prototype.set_app_context_data=function(a){this.app_context_data=a};rdx.form.prototype.get_app_context_data=function(){return this.app_context_data};rdx.form.prototype.unmask=function(a){rdx.mask.unmask_component(this._form_div,a)};rdx.error_tooltip=function(b,a){this._error_container=null;this._DEFAULT_PROPERTY={error_message:""};this._error_message=this._DEFAULT_PROPERTY.error_message};rdx.error_tooltip.prototype.render=function(a){this._error_container=$("<div>").addClass("rdx_error_container");this._image_container=$("<div>").addClass("inline_image_container");this._text_container=$("<div>").addClass("inline_text_container");this._error_container.append(this._image_container).append(this._text_container);return this._error_container};rdx.error_tooltip.prototype.set_data=function(d,a,b,f){this._text_container.empty();switch(b){case rdx.WARNING:rdx.form_utils.handle_component_show_error(f);this.add_class(rdx.WARNING);break;case rdx.INFO:rdx.form_utils.handle_component_show_error(f);this.add_class(rdx.INFO);break;default:this.add_class("Error")}if(rdx.utils.is_not_empty(d)){this._text_container.text(d);if(a<this._error_container.width()){this._text_container.addClass("rdx_wrap");this._error_container.removeClass("hide").css("display","block");this._text_container.css("display","inline-block")}else{this._error_container.removeClass("hide")}if(b==(rdx.WARNING)){this.remove_fadeout();this.set_fadeout()}else{this.remove_fadeout()}try{rdx.mask.unmask_all_components()}catch(e){}}else{this._error_container.addClass("hide").hide()}};rdx.error_tooltip.prototype._remove_class=function(a){if(this._image_container.hasClass(a)){this._image_container.removeClass(a)}};rdx.error_tooltip.prototype.add_class=function(a){if(a==rdx.WARNING){this._remove_class("rdx_error_image");this._remove_class("rdx_info_container");this._image_container.addClass("rdx_warning_container")}else{if(a==rdx.INFO){this._remove_class("rdx_error_image");this._remove_class("rdx_warning_container");this._image_container.addClass("rdx_info_container")}else{this._remove_class("rdx_warning_container");this._remove_class("rdx_info_container");this._image_container.addClass("rdx_error_image")}}};rdx.error_tooltip.prototype.set_fadeout=function(){var a=this;setTimeout(function(){a._error_container.removeClass("remove_fade");a._error_container.addClass("fade_error_tooltip")},3000)};rdx.error_tooltip.prototype.remove_fadeout=function(){this._error_container.removeClass("fade_error_tooltip");this._error_container.addClass("remove_fade")};rdx.form_holder=function(d,b,a,e){this._DEFAULT_PROPERTIES={read_only:false,number_of_columns:1,submit_operation:{method:rdx.model_constants.ADD,action:null},submit_handler_callback:null,cancel_handler_callback:null,group_expand_img_url:rdx.images.NAVIGATE_OPEN_IMG,group_collapse_img_url:rdx.images.NAVIGATE_CLOSE_IMG,class_names:"form",button_label:"",button_tooltip:"",add_create_button:true,add_close_button:true,add_create_and_add_button:false,custom_button_options:null,fixed_column_width:false,add_border:true,prompt:null,help_id:null,two_row_layout_for_fields:true,strict_resource_mapping:true,standalone_mode:false,more_info_view:null,ignore_key_press_events:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b);this._fields_dfn=a;this._resource_properties=e;this._form=d;this._fields_map=new Object();this._error_tooltips_map=new Object();this._containers_map=new Object();this._form_fields=new Array();this._maskable_components=new Array();this._prompt_fields=new Array();this._embedded_views=new Array();this._field_upload_components=new Array();this._container_fields_map={};this._multiple_container_keys_found=false;this._resource=null;this._form_data=null;this._app_context_data=null;this._focus_on_field=null;this._crumb_handler=null;this._is_dialog=true;this._show_slider=rdx.utils.is_not_defined(this._properties.show_slider)?true:this._properties.show_slider;this._custom_keyboard_handler_callback=null};rdx.form_holder.prototype.get_form=function(){return this._form};rdx.form_holder.prototype.set_fields_dfn=function(a){this._fields_dfn=a};rdx.form_holder.prototype.get_fields_dfn=function(){return this._fields_dfn};rdx.form_holder.prototype.set_focus=function(a){this._focus_on_field=a};rdx.form_holder.prototype.get_focus=function(a){return this._focus_on_field};rdx.form_holder.prototype.set_resource_properties=function(a){this._resource_properties=a};rdx.form_holder.prototype.set_resource=function(a){this._resource=a};rdx.form_holder.prototype.get_resource=function(){return this._resource};rdx.form_holder.prototype.get_resource_properties=function(){return this._resource_properties};rdx.form_holder.prototype.add_field_to_map=function(a,b){this._fields_map[a]=b};rdx.form_holder.prototype.add_error_tooltip_to_map=function(a,b){this._error_tooltips_map[a]=b};rdx.form_holder.prototype.add_container_to_map=function(a,b){this._containers_map[rdx.utils.trim(a)]=b};rdx.form_holder.prototype.get_fields_map=function(){return this._fields_map};rdx.form_holder.prototype.get_field=function(b){var d=[];if(rdx.utils.is_array(b)){for(var a=0;a<b.length;a++){d[a]=this._fields_map[b[a]]}return d}else{return this._fields_map[b]}};rdx.form_holder.prototype.get_error_tooltip=function(a){return this._error_tooltips_map[a]};rdx.form_holder.prototype.get_container=function(a){return this._containers_map[rdx.utils.trim(a)]};rdx.form_holder.prototype.get_all_containers=function(){return this._containers_map};rdx.form_holder.prototype.add_maskable_component=function(a){this._maskable_components.push(a)};rdx.form_holder.prototype.get_maskable_components=function(){return this._maskable_components};rdx.form_holder.prototype.add_to_form_fields=function(a,b){if(rdx.utils.is_defined(b)&&b!=rdx.form_constants.PARENT_RESOURCE){this._multiple_container_keys_found=true}b=b||rdx.form_constants.PARENT_RESOURCE;if(rdx.utils.is_defined(this._container_fields_map[b])){var d=this._container_fields_map[b].concat(a);this._container_fields_map[b]=d}else{this._container_fields_map[b]=a}this._form_fields=this._form_fields.concat(a)};rdx.form_holder.prototype.add_form_field_to_fields=function(b){var a=b.get_target_resource();if(a!=rdx.form_constants.PARENT_RESOURCE){this._multiple_container_keys_found=true}if(rdx.utils.is_defined(this._container_fields_map[a])){this._container_fields_map[a].push(b)}else{var d=[];d.push(b);this._container_fields_map[a]=d}this._form_fields.push(b)};rdx.form_holder.prototype.get_form_fields=function(){return this._form_fields};rdx.form_holder.prototype.get_form_field_to_submit=function(){if(this._multiple_container_keys_found==false){return this._form_fields}return this._container_fields_map};rdx.form_holder.prototype.add_embedded_view=function(a){this._embedded_views.push(a)};rdx.form_holder.prototype.get_embedded_views=function(){return this._embedded_views};rdx.form_holder.prototype.add_file_upload_component=function(a){this._field_upload_components.push(a)};rdx.form_holder.prototype.get_file_upload_components=function(){return this._field_upload_components};rdx.form_holder.prototype.add_prompt_field=function(a){this._prompt_fields.push(a)};rdx.form_holder.prototype.get_prompt_fields=function(){return this._prompt_fields};rdx.form_holder.prototype.get_resource_properties=function(){return this._resource_properties};rdx.form_holder.prototype.is_standalone_mode=function(){return this._properties.standalone_mode};rdx.form_holder.prototype.is_strict_resource_mapping=function(){return this._properties.strict_resource_mapping};rdx.form_holder.prototype.is_read_only=function(){return this._properties.read_only};rdx.form_holder.prototype.is_two_row_layout_for_fields=function(){return this._properties.two_row_layout_for_fields};rdx.form_holder.prototype.set_two_row_layout_for_fields=function(a){this._properties.two_row_layout_for_fields=a};rdx.form_holder.prototype.get_help_id=function(){return this._properties.help_id};rdx.form_holder.prototype.is_add_mode=function(){var a=this._properties.submit_operation.method;if(rdx.utils.is_defined(a)&&a==rdx.model_constants.ADD){return true}return false};rdx.form_holder.prototype.is_create_mode=function(){var a=this._properties.submit_operation.action;if(rdx.utils.is_defined(a)&&a=="create"){return true}return false};rdx.form_holder.prototype.get_prompt=function(){return this._properties.prompt};rdx.form_holder.prototype.get_class_names=function(){return this._properties.class_names};rdx.form_holder.prototype.is_add_close_button=function(){return this._properties.add_close_button};rdx.form_holder.prototype.is_add_create_button=function(){return this._properties.add_create_button};rdx.form_holder.prototype.is_custom_button_options_enabled=function(){if(rdx.utils.is_defined(this._properties.custom_button_options)){return true}else{return false}};rdx.form_holder.prototype.get_custom_button_options=function(){return this._properties.custom_button_options};rdx.form_holder.prototype.is_add_create_and_add_button=function(){return(this._properties.add_create_and_add_button)};rdx.form_holder.prototype.is_fixed_column_width=function(){return this._properties.fixed_column_width};rdx.form_holder.prototype.is_expand_group=function(){return this._properties.expand_group};rdx.form_holder.prototype.add_border=function(){return this._properties.add_border};rdx.form_holder.prototype.get_button_label=function(){return rdx.i18n.get_string(this._properties.button_label)};rdx.form_holder.prototype.get_cancel_handler_callback=function(){return this._properties.cancel_handler_callback};rdx.form_holder.prototype.get_submit_handler_callback=function(){return this._properties.submit_handler_callback};rdx.form_holder.prototype.get_submit_operation=function(){return this._properties.submit_operation};rdx.form_holder.prototype.get_button_tooltip=function(){return rdx.i18n.get_string(this._properties.button_tooltip)};rdx.form_holder.prototype.set_keyboard_handler_callback=function(a){this._custom_keyboard_handler_callback=a};rdx.form_holder.prototype.get_keyboard_handler_callback=function(){return this._custom_keyboard_handler_callback};rdx.form_holder.prototype.get_properties=function(){return this._properties};rdx.form_holder.prototype.set_form_data=function(a){this._form_data=a};rdx.form_holder.prototype.get_form_data=function(){return this._form_data};rdx.form_holder.prototype.set_app_context_data=function(a){this._app_context_data=a};rdx.form_holder.prototype.get_app_context_data=function(){return this._app_context_data};rdx.form_holder.prototype.set_crumb_handler=function(a){this._crumb_handler=a};rdx.form_holder.prototype.get_crumb_handler=function(){return this._crumb_handler};rdx.form_holder.prototype.set_is_dialog=function(a){this._is_dialog=a};rdx.form_holder.prototype.is_dialog=function(){return this._is_dialog};rdx.form_holder.prototype.set_show_slider=function(a){this._show_slider=a};rdx.form_holder.prototype.is_show_slider=function(){return this._show_slider};rdx.form_holder.prototype.get_more_info_view=function(){return this._properties.more_info_view};rdx.layout_manager=function(a){this._form_holder=a;this._submit_button=null};rdx.layout_manager.prototype.render=function(){var h=$("<div>");h.addClass(this._form_holder.get_properties().class_names);var f=$("<div>");if(this._form_holder.add_border()){f.addClass("smooth_all_corner").addClass("layout_border")}f.addClass("config_layout");var e=this._form_holder.get_fields_dfn();for(var d=0;d<e.length;d++){var g=e[d];var b=this._get_container(g,f);var a=b.render();if(rdx.utils.is_empty(g.type)){a.addClass("form_container")}f.append(a)}h.append(f);return h};rdx.layout_manager.prototype._get_container=function(b,a){switch(b.type){case rdx.form_constants.TAB:return new rdx.tab_container(a,b,this._form_holder);case rdx.form_constants.GROUP:return new rdx.group_container(a,b,this._form_holder);case rdx.form_constants.COLUMN:return new rdx.column_container(a,b,this._form_holder);default:return new rdx.form_container(a,b,this._form_holder)}};rdx.layout_manager.prototype.get_resource_properties=function(){return this._form_resource_properties};rdx.search=function(d,a){this._parent=d;this._DEFAULT_PROPERTIES={search_dropdown_map:null,search_regex:true,pre_searched_object:null,standalone_search:false,advance_search:false,do_toggle:true,tag_support:false,tag_properties:null,search_value_formatter_callback:null};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a);this._search_dropdown_map=this._properties.search_dropdown_map;this._search_label_combo_array=new Array();this._search_callback=null;this._search_filter_action=this._properties.search_filter_action;this._search_div=null;this._searched_div=null;this._all_search_keys=new Array();this._available_search_keys={};this._used_search_keys={};this._searched_key_value_map=this._properties.pre_searched_object;this._filter_container=null;this._search_row=null;this._remove_all_shown=false;this._current_item_added_to_filter=false;this._search_label_combo=null;this._search_field=null;this._standalone_search=this._properties.standalone_search;this._search_tooltip=null;this.suggestions_item_length=15;for(var b=0;b<this._properties.search_dropdown_map.length;b++){this._properties.search_dropdown_map[b]["label"]=rdx.i18n.get_string(this._properties.search_dropdown_map[b]["label"])}rdx.utils.sort_array(this._properties.search_dropdown_map,"label")};rdx.search.prototype.remove=function(){this._search_div.empty();this._search_table_container.remove();$(document.body).unbind("click")};rdx.search.prototype.render=function(){var b=this;this._available_search_keys={};this._all_search_keys={};this._used_search_keys={};this._create_search_form();var a=$("<div>").addClass("entire_search_div").append(this._search_div);this._parent.prepend(a);this._search_table=this._create_search_table();this._search_table.hide();this._search_table_container=$("<div>").addClass("search_table_container").appendTo($(document.body));this._remove_all_link=$("<a>").attr("href","#").addClass("remove_all").hide().attr("title",rdx.i18n.get_string("rdx.search.remove_all")).bind(rdx.events.CLICK,{search:this},function(d){var e=d.data.search;e._do_clear();$(this).remove()});this._searched_div.append(this._remove_all_link);if(this._properties.tag_properties){this.update_tag_properties()}$(document.body).bind("click",{},function(d){if($(d.target).parents(".search_table").length>0||$(d.target).parents(".text_feild_wrapper").length>0){}else{b._hide_search_dropdown()}})};rdx.search.prototype._create_search_form=function(){this._search_div=$("<div>").addClass("search_div");var a=$("<div>").addClass("search_image").appendTo(this._search_div);this._search_area=$("<div>").addClass("search_area").appendTo(this._search_div);var b=this;this._create_searched_div()};rdx.search.prototype._create_searched_div=function(){this._searched_div=$("<div>").addClass("filters clearfix").appendTo(this._search_area);this._filter_container=$("<div>").addClass("filter_container");this._searched_div.append(this._filter_container);if(rdx.utils.is_defined(this._searched_key_value_map)&&this._searched_key_value_map.length>0){for(var d=0;d<this._searched_key_value_map.length;d++){var e=this._searched_key_value_map[d]["value"];var f=e.indexOf("/")==0?e.substring(1,e.length-1):e;this._searched_key_value_map[d]["value"]=f;this._add_searched_item(this._searched_key_value_map[d],true)}}this._add_text_feild();var b=$("<div>").addClass("rdx_help_cell_container search_bubble").appendTo(this._searched_div);var a=$("<button>").addClass("btn help_cell btn-icon").attr("aria-label","Help on regular expression for search");b.append(a);b.bind("click",{that:this,parent_added:b},function(g){g.data.that.add_help_slider();g.preventDefault()}.bind(this))};rdx.search.prototype._add_text_feild=function(){this._search_text_feild=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX);this._search_text_feild.attr("placeholder",rdx.i18n.get_string("rdx.search_click_here_text"));this._search_text_feild.attr("aria-label",rdx.i18n.get_string("rdx.search_click_here_text"));var b=$("<div>").addClass("text_feild_wrapper").appendTo(this._searched_div).append(this._search_text_feild);var a=this;this._search_text_feild.bind(rdx.events.FOCUS+" "+rdx.events.CLICK,{},function(e){a._hide_search_dropdown();if(rdx.utils.is_defined($(e.target).attr("data-key"))&&rdx.utils.is_not_empty($(e.target).val())){var d=$(e.target).attr("data-key");if($(e.target).attr("data-tag")){a._render_tags_values(d)}else{var f=$(e.target).val().split(": ")[1];a._show_secondary_list(null,d,null,f)}}else{a._show_search_table()}if(rdx.utils.is_not_empty($(e.target).val())&&rdx.utils.is_not_defined($(e.target).attr("data-key"))){a._filtersearch_table($(e.target).val())}a._search_table_container.css("left",$(this).offset().left);a._search_table_container.css("top",$(this).offset().top+$(this).outerHeight()+5);e.preventDefault();e.stopPropagation()});this._search_text_feild.bind(rdx.events.FOCUS_OUT,{},function(d){setTimeout(function(){a._search_table.hide()},300);d.preventDefault()});this._search_text_feild.bind(rdx.events.KEYUP,{},function(e){var f=$(this).val();if(e.keyCode==rdx.keycodes.ESCAPE){a._hide_search_dropdown()}else{if(e.keyCode==rdx.keycodes.ENTER||rdx.utils.is_not_defined(e.keyCode)){a._handle_enter_key(f,e)}else{if(e.keyCode==rdx.keycodes.DOWN_ARROW||e.keyCode==rdx.keycodes.UP_ARROW){rdx.dom_utils.move_cursor_to_end(a._search_text_feild[0]);a._handle_arrow_keys(e.keyCode);e.preventDefault()}else{var d=f.split(":")[1]||f.split(":")[0];if(rdx.utils.is_empty(d)){a._remove_all_data_attrs();a._hide_search_dropdown();a._show_search_table()}else{a._filtersearch_table(f)}}}}e.stopPropagation()})};rdx.search.prototype._handle_enter_key=function(h,e){var g=$(e.target);if(rdx.utils.is_not_empty(h)&&(h.split(":").length==2||h.split(":").length>2)&&rdx.utils.is_not_empty(h.split(":")[1].trim())){}else{if($(".highlited",this._search_table_container).length>0&&this._search_table_visible===true){$(".highlited",this._search_table_container).trigger("click");return}else{if(rdx.utils.is_empty(h)||h.indexOf(":")==-1||!(h.split(":").length==2&&rdx.utils.is_not_empty(h.split(":")[1].trim()))){return}}}var b=g.attr("data-key");var a=g.attr("data-label");var d={};d.key=b;d.value=this._get_modified_value(h);d.label=a;if(rdx.utils.is_not_defined(b)||rdx.utils.is_not_defined(a)){this._get_key_val(d,h)}this._hide_search_dropdown();if(rdx.utils.is_defined(d.key)&&rdx.utils.is_defined(h)){this._add_search_filter(d,null);g.val("");this._remove_all_data_attrs();e.preventDefault()}else{var f=rdx.i18n.get_string("rdx.search_property_error");rdx.page.show_notification(f,rdx.ERROR);this._show_search_table()}};rdx.search.prototype._get_modified_value=function(a){return a.split(":").slice(1).join(":").trim()};rdx.search.prototype._get_search_properties=function(b){for(var a=0;a<this._search_dropdown_map.length;a++){if(b===this._search_dropdown_map[a]["key"]){return this._search_dropdown_map[a]["search_properties"]||{}}}};rdx.search.prototype._get_key_val=function(d,f){var e=f.split(":")[0].trim();var a=f.split(":")[1].trim();for(var b=0;b<this._search_dropdown_map.length;b++){if(e.toLowerCase()===this._search_dropdown_map[b]["label"].toLowerCase()){if(rdx.utils.is_defined(d)){d.key=this._search_dropdown_map[b]["key"];d.label=this._search_dropdown_map[b]["label"];d.value=a}else{this._search_text_feild.attr("data-key",this._search_dropdown_map[b]["key"]);this._search_text_feild.attr("data-label",this._search_dropdown_map[b]["label"])}break}}if(rdx.utils.is_defined(d)&&(rdx.utils.is_not_defined(d.key)||rdx.utils.is_not_defined(d.label))){$.each(this.tag_list,function(h,g){if(g.toLowerCase()===e.toLowerCase()){d.key=e;d.label=e;d.value=a}})}};rdx.search.prototype._handle_arrow_keys=function(a){if(this._search_table_visible===false){this._search_text_feild.focus();return}try{if($(".list_items .item.highlited").length>0){var d=$(".list_items .item.highlited")[0];$(".list_items .item.highlited").removeClass("highlited");if(a==rdx.keycodes.DOWN_ARROW){if($($(d).nextAll(".item").not(".hidden")[0]).length==0){$(d).closest(".list_items").nextAll(".list_items").find(".item").not(".hidden").first().addClass("highlited")}else{$($(d).nextAll(".item").not(".hidden")[0]).addClass("highlited")}}else{if($($(d).prevAll(".item").not(".hidden")[0]).length==0){$(d).closest(".list_items").prevAll(".list_items").find(".item").not(".hidden").first().last().addClass("highlited")}else{$($(d).prevAll(".item").not(".hidden")[0]).addClass("highlited")}}}else{var d=$(".list_items .item",this._search_table_container)[0];$(d).addClass("highlited")}}catch(f){var d=$(".list_items .item",this._search_table_container)[0];$(d).addClass("highlited")}var b=$(".list_items .item.highlited");if(b.length>0){$(".search_table").animate({scrollTop:b.position().top-30},{duration:"medium",easing:"swing"})}};rdx.search.prototype._filtersearch_table=function(e){var b=$(".list_items");var d,f;if(e.indexOf(":")>-1){d=e.split(":")[0].trim();f=e.split(":")[1].trim();if(rdx.utils.is_not_defined($(event.target).attr("data-key"))){this._get_key_val(null,e)}}else{d=e.trim()}if(rdx.utils.is_not_empty(e)){b.addClass("single_dropdown")}else{b.removeClass("single_dropdown")}var a=f||d;if(this.tag_list&&this.tag_list.length>0&&this._is_tag(d)&&rdx.utils.is_empty(f)){this._render_tags_values(d)}else{if(rdx.utils.is_defined($(event.target).attr("data-tag"))||rdx.utils.is_not_defined($(event.target).attr("data-key"))){b.find(".item").each(function(g,h){if(($(h).text()).toLocaleLowerCase().indexOf(a.toLocaleLowerCase())>-1){$(h).removeClass("hidden")}else{$(h).addClass("hidden")}});b.each(function(g,h){if($(h).find(".item").length===$(h).find(".hidden.item").length){$(h).hide()}else{$(h).show()}})}else{if($(event.target).attr("data-key")){this._show_secondary_list(null,$(event.target).attr("data-key"),null,a)}}}};rdx.search.prototype._is_tag=function(b){var a=false;$.each(this.tag_list,function(e,d){if(d.toLowerCase()===b.toLowerCase()){a=true}});return a};rdx.search.prototype._add_searched_item=function(q,p){if(rdx.utils.is_defined(q)){this._searched_div.css("display","block");var o=q.key;var n=q.value;var d=this._get_filter_column_label(o);if(rdx.utils.is_not_defined(d)||rdx.utils.is_empty(d)){d=o}var m=n;if(rdx.utils.is_defined(m)){var s=m.split(",");for(var g=0;g<s.length;g++){m=s[g];if(rdx.utils.is_defined(m)&&m.trim()==""){continue}var b=m;var a=$("<span>").addClass("display_key").text(d+" : ");var f=$("<span>").addClass("display_val").text(rdx.utils.html_decode(m)).attr("title",rdx.utils.html_decode(m));var h=$("<div>").addClass("filter_value").append(a).append(f);if(!(p==true)){var e=$("<button>").attr("aria-label","Remove filter").addClass("cross_ele btn-icon").appendTo(h).text("X");e.bind(rdx.events.CLICK,{key:o,value:b,filter_item:h,search:this},this._remove_filter);h.bind(rdx.events.CLICK,{filter_val:f,search:this,item:q},this._edit_filter)}this._filter_container.append(h)}}}};rdx.search.prototype._edit_filter=function(e){var a=e.data.filter_val;var d=e.data.search;var b=e.data.item;a.attr("contenteditable","true");a.focus();a.bind(rdx.events.KEYDOWN,{},function(h){if(h.keyCode==rdx.keycodes.ENTER){a.removeAttr("contenteditable");var g=a.text();for(var f=0;f<d._searched_key_value_map.length;f++){if(d._searched_key_value_map[f]["key"]===b.key){d._searched_key_value_map[f]["value"]=g;break}}d._do_search();h.preventDefault()}else{if(h.keyCode==rdx.keycodes.ESCAPE){a.removeAttr("contenteditable");h.preventDefault()}}})};rdx.search.prototype._remove_filter=function(b){var s=b.data.key;var q=b.data.value;var p=b.data.filter_item;var h=b.data.search;var g=0;if(rdx.utils.is_defined(p)){b.data.filter_item.remove()}var o=null;if($.inArray(s,h.tag_list)>-1){o=s}else{if(rdx.utils.is_defined(h._all_search_keys)&&rdx.utils.is_defined(h._all_search_keys[s])){o=h._all_search_keys[s]}}if(rdx.utils.is_defined(o)){if(rdx.utils.is_defined(h._available_search_keys)&&rdx.utils.is_not_defined(h._available_search_keys[o])){h._available_search_keys[o]={key:s}}var d=false;if(rdx.utils.is_defined(h._searched_key_value_map)&&(h._searched_key_value_map.length)){var u=false;for(var f=0,n=h._searched_key_value_map.length;f<n;f++){var a=h._searched_key_value_map[f]["key"];var t=h._searched_key_value_map[f]["value"];if(rdx.utils.is_defined(a)&&a==s){if(t.indexOf(",")!=-1){d=true;var e=q+",";var m=","+q;if(t.indexOf(e)!=-1){t=t.replace(e,"")}else{if(t.indexOf(m)!=-1){t=t.replace(m,"")}}h._searched_key_value_map[f]["value"]=t;break}d=false;u=true;break}}if(u){h._searched_key_value_map.splice(f,1)}}if(rdx.utils.is_defined(h._used_search_keys)&&!d){delete h._used_search_keys[o]}}for(var f in h._used_search_keys){g++}if(g===0){h._remove_all_shown=false}else{h._remove_all_shown=true}h._do_search()};rdx.search.prototype._get_filter_column_label=function(e){var g="";if($.inArray(e,this.tag_list)>-1){return e}for(var d=0;d<this._search_dropdown_map.length;d++){var f=this._search_dropdown_map[d];var a=f.label;var b=f.key;if(b===e){g=rdx.i18n.get_string(a);break}}return g};rdx.search.prototype._create_search_table=function(){this._search_label_combo_array=[];for(var g=0;g<this._search_dropdown_map.length;g++){var f=this._search_dropdown_map[g];var m=f.label;var o=f.key;var h=false;if(rdx.utils.is_defined(this._searched_key_value_map)&&this._searched_key_value_map.length){for(var e=0;e<this._searched_key_value_map.length;e++){var b=this._searched_key_value_map[e];var a=b.key;if(rdx.utils.is_defined(a)&&a==o){h=true;break}}}if(h&&rdx.utils.is_not_defined(this._used_search_keys[m])){this._used_search_keys[m]={key:o}}else{this._available_search_keys[m]={key:o}}this._all_search_keys[o]=m}var d=$("<div>").addClass("search_table");var n=this._get_search_row(this._available_search_keys,this._used_search_keys);d.append(n);return d};rdx.search.prototype._hide_search_dropdown=function(){this._search_table_container.empty();$(".secondary_list").remove();this._search_table_visible=false};rdx.search.prototype._do_clear=function(){this._used_search_keys={};this._searched_key_value_map=[];this._filter_container.empty();this._remove_all_shown=false;this._search_callback.call_back([false,{}])};rdx.search.prototype._do_search=function(){var a=this._get_search_values();if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(this._search_callback)){this._search_callback.call_back([a.filter_present,a.map])}if(rdx.utils.is_defined(a.map)&&Object.keys(a.map).length>0){this._remove_all_shown=false;this._remove_all_link.show()}else{this._remove_all_shown=true;this._remove_all_link.hide()}};rdx.search.prototype._get_search_values=function(){var a={};var g=false;if(rdx.utils.is_defined(this._searched_key_value_map)&&(this._searched_key_value_map.length)){for(var f=0,h=this._searched_key_value_map.length;f<h;f++){if(rdx.utils.is_defined(this._searched_key_value_map[f]["key"])&&rdx.utils.is_defined(this._searched_key_value_map[f]["value"])){var n=this._searched_key_value_map[f]["key"];var m=this._searched_key_value_map[f]["value"];for(var d=0,b=this._search_dropdown_map.length;d<b;d++){var e=this._search_dropdown_map[d];if(n==e.key&&rdx.utils.is_defined(e.filter_name)){n=e.filter_name;if(rdx.utils.is_defined(e.formatter)&&rdx.utils.is_defined(e.formatter["map"])){m=e.formatter["map"][this._searched_key_value_map[f]["value"]]}}}if(rdx.utils.is_not_empty(n)&&rdx.utils.is_not_empty(m)){if(rdx.utils.is_defined(this._properties.search_value_formatter_callback)){m=this._properties.search_value_formatter_callback.call_back([m,n]);a[n]=m}else{m=m.replace(/\//g,"\\/");if(this._properties.advance_search===true){if(rdx.utils.is_not_defined(a[n])){a[n]=[]}a[n].push("/"+m+"/")}else{a[n]="/"+m+"/"}}g=true}}}}return{filter_present:g,map:a}};rdx.search.prototype.get_search_filter_map=function(){return this._get_search_values().map};rdx.search.prototype.add_search_listner=function(a){this._search_callback=a};rdx.search.prototype._get_search_row=function(a,b){this._search_label_combo=this.get_search_properties();return this._search_label_combo};rdx.search.prototype._show_search_table=function(){this._search_table_container.empty();this._search_table=this._create_search_table();this._search_table_container.append(this._search_table);this._search_table_visible=true};rdx.search.prototype.get_search_properties=function(){var f=this;var a=true;var d=$("<ul>").addClass("properties_container");if(this._properties.tag_support===true&&(rdx.utils.is_defined(this.tag_list)&&this.tag_list.length>0)){this._add_tags_properties(d)}else{a=false}var m=$("<li>").addClass("list_items single_dropdown primary").appendTo(d).attr("tabindex","1").attr("role","menu");var n=$("<a href='#'>").addClass("list_header").appendTo(m).text(rdx.i18n.get_string("rdx.properties"));var b=$("<ul>").appendTo(m);if(a===true){b.addClass("hidden");m.removeClass("single_dropdown")}var h=this._search_dropdown_map;for(var e=0;e<h.length;e++){if(this._properties.visible_columns&&rdx.utils.is_not_defined(this._properties.visible_columns[h[e].key])){continue}else{if(h[e].key&&h[e].label){if(this._used_search_keys[h[e]["label"]]&&this._properties.advance_search==false){continue}else{var g=$("<li>").addClass("item").text(rdx.i18n.get_string(h[e]["label"])).attr("data-key",h[e]["key"]).attr("data-label",h[e]["label"]).attr("tabindex","1").attr("role","menuitem");b.append(g)}}}}b.bind(rdx.events.CLICK+" "+rdx.events.KEYDOWN,{},function(v){if(rdx.utils.is_defined(v.keyCode)&&v.keyCode!=rdx.keycodes.ENTER){return}var q=$(v.target).text();var u=$(v.target).attr("data-key");var o=$(v.target).attr("data-label");f._update_search_text(q,u,o);var p=f._search_dropdown_map;for(var t=0;t<p.length;t++){if(p[t]["key"]===u){if(p[t]["type"]==="VALDATE"){f._show_date_component(q,u)}else{if(f._properties.is_crossfilter===true&&rdx.utils.is_defined(f._properties.resource_name)){f._show_secondary_list(null,u,p[t]["search_properties"])}else{if((rdx.utils.is_defined(p[t]["search_properties"])&&p[t]["search_properties"]["type"]=="list")||(p[t]["type"]==="list"&&p[t]["formatter"])){var s=p[t]["formatter"]||p[t]["search_properties"]["formatter"];f._show_secondary_list(s,u,p[t]["search_properties"])}}}break}}v.preventDefault()});this._handle_mouse_hover_event(m);return d};rdx.search.prototype._handle_mouse_hover_event=function(a){a.bind(rdx.events.MOUSE_OVER,{},function(b){$(".list_items .highlited").removeClass("highlited");if($(b.target).hasClass("item")){$(b.target).addClass("highlited")}})};rdx.search.prototype._add_tags_properties=function(h){var m=this;var g=$("<li>").addClass("list_items tags").appendTo(h).attr("tabindex","1").attr("role","menu");var e=$("<a href='#'>").addClass("list_header").appendTo(g).text(rdx.i18n.get_string("rdx.tags"));var d=$("<ul>").appendTo(g).addClass("hidden");this.tag_list.sort();var b=this.tag_list;for(var f=0;f<b.length;f++){if($.inArray(b[f],Object.keys(this._used_search_keys))>-1){continue}var a=$("<li>").addClass("item").text(rdx.i18n.get_string(b[f])).attr("data-key",b[f]).attr("data-label",b[f]).attr("tabindex","1").attr("role","menuitem");d.append(a)}d.bind(rdx.events.CLICK+" "+rdx.events.KEYDOWN,{},function(q){if(rdx.utils.is_defined(q.keyCode)&&q.keyCode!=rdx.keycodes.ENTER){return}var o=$(q.target).text();var p=$(q.target).attr("data-key");var n=$(q.target).attr("data-label");m._update_search_text(o,p,n,null,true);q.preventDefault()});this._handle_mouse_hover_event(g)};rdx.search.prototype._render_tags_values=function(d){var b={filter:[{name:"tag_key",value:d}],is_query_param:true};var a=this._properties.tag_properties;rdx.model.get(rdx.utils.get_resource(a.resource_name),b,new rdx.callback(this,this.show_tag_list,[a]))};rdx.search.prototype.show_tag_list=function(f,b){b=b?b:this._properties.tag_properties;var e=f[b.resource_name][0];var a=e[b.value];var d=[];if(!rdx.utils.is_array(a)&&rdx.utils.is_not_empty(a)){a=a.split(",")}$.each(a,function(g,h){if($.inArray(h.trim(),d)===-1){d.push(h.trim())}});this._render_value_list(d,{default_values:this._default_tag_values})};rdx.search.prototype._render_value_list=function(a,d){d=d?d:{};this._search_table_container.empty();var n=$("<div>").addClass("secondary_list search_table").appendTo(this._search_table_container);var b=false;var f=this;var m=$("<ul>").addClass("list_items secondary").appendTo(n);var g=0;if(rdx.utils.is_array(a)){for(var e=0;e<a.length;e++){if(rdx.utils.is_not_empty(a[e])){if(rdx.utils.is_defined(d.formatter)&&rdx.utils.is_defined(d.formatter.renderer_callback)){a[e]=d.formatter.renderer_callback.call_back([a[e]])}var o=$("<li>").addClass("item").text(rdx.i18n.get_string(a[e])).attr("data-key",a[e]).attr("tabindex","1").attr("title",a[e]);m.append(o);g++}if(g==this.suggestions_item_length){b=true;break}}}else{if(rdx.utils.is_object(a)){for(var e in a){var o=$("<li>").addClass("item").text(rdx.i18n.get_string(e)).attr("data-key",a[e]).attr("tabindex","1");m.append(o)}}}if(m.children().length>0){m.bind(rdx.events.CLICK+" "+rdx.events.KEYDOWN,{},function(s){var p;if(rdx.utils.is_defined(s.keyCode)&&s.keyCode===rdx.keycodes.ENTER&&$(".highlited").length>0){p=$(".highlited").text()}else{p=$(s.target).text()}var q=$(s.target).attr("data-key");f._update_search_text(p,q,null,true);f._search_text_feild.keyup();n.remove();s.preventDefault()})}if(b===true){var h=$("<div>").addClass("show_more").text(rdx.i18n.get_string("rdx.more_values_indication")).appendTo(n)}this._handle_mouse_hover_event(m)};rdx.search.prototype._update_search_text=function(b,d,a,f,e){if(f===true){var g=this._search_text_feild.val().split(" : ")[0];g=g+" : "+b;this._search_text_feild.val(g)}else{this._remove_all_data_attrs();this._search_text_feild.val(b+" : ");this._search_text_feild.attr("data-key",d);this._search_text_feild.attr("data-label",a);if(e===true){this._search_text_feild.attr("data-tag","true")}rdx.dom_utils.move_cursor_to_end(this._search_text_feild[0])}this._hide_search_dropdown()};rdx.search.prototype._remove_all_data_attrs=function(){this._search_text_feild.removeAttr("data-key");this._search_text_feild.removeAttr("data-label");this._search_text_feild.removeAttr("data-tag")};rdx.search.prototype._show_date_component=function(d,e){var f=this;var a=$("<div>").addClass("secondary_list search_table").appendTo(this._search_table_container);var g=$("<div>").appendTo(a);var h=new rdx.form_field();h.get_properties().show_time=true;h.get_properties().date_format="dd M yy";h.get_properties().drop_down_options={"rdx.Today":"today","rdx.LAST_1_HOUR":"last_1_hour","rdx.LAST_12_HOURS":"last_12_hours","rdx.LAST_DAY":"last_day","rdx.LAST_WEEK":"last_week","rdx.LAST_MONTH":"last_month","rdx.LAST_6_MONTH":"last_6_month","rdx.Custom":"custom"};h.get_properties().change_handler_callback=new rdx.callback(function(m){if(rdx.utils.is_not_defined(m.duration_value)){_duration_value=m.start_date+":"+m.start_time+" - "+m.end_date+":"+m.end_time}else{_duration_value=rdx.i18n.get_string(b.get_selected_date_option())}f._update_search_text(_duration_value,e,m.duration_value||_duration_value,true);f._search_text_feild.keyup();a.remove();event.preventDefault()});var b=rdx.component_helper.get_component(rdx.form_constants.CALENDAR,g,h).render()};rdx.search.prototype._show_secondary_list=function(b,g,f,e){if(rdx.utils.is_not_defined(f)){f=this._get_search_properties(g)}$(".secondary_list",this._searched_div).remove();this._search_table_visible=true;var a=$("<div>").addClass("secondary_list search_table").appendTo(this._search_table_container);var h=b?b.map:null;if(this._properties.is_crossfilter===true&&rdx.utils.is_defined(this._properties.resource_name)&&rdx.crossfilter_controller.is_resource_crossfilter_present(this._properties.resource_name)){var d=rdx.crossfilter_controller.get_unique_values(this._properties.resource_name,g,e)||[];h=d.map(function(m){if(m.value>0){return m.key}else{return null}})}else{if(rdx.utils.is_callback(h)){h=h.call_back()}}this._render_value_list(h,f)};rdx.search.prototype.update_tag_properties=function(a){this.tag_list=[];if(this._properties.tag_properties.resource_name){rdx.model.get(rdx.utils.get_resource(this._properties.tag_properties.resource_name),null,new rdx.callback(this,this._manage_tag_properties))}else{if(this._properties.tag_properties.map){this.tag_list=this._properties.tag_properties.map}}};rdx.search.prototype._manage_tag_properties=function(a){var e=this._properties.tag_properties;var b=[],f=this;var g=a[this._properties.tag_properties.resource_name];for(var d=0;d<g.length;d++){if(g[d]["entity_type"]===e.entity_type){if(rdx.utils.is_array(g[d][e.key])){b=g[d][e.key]}else{if(rdx.utils.is_not_empty(g[d][e.key])){b=g[d][e.key].split(",")}}break}}$.each(b,function(h,m){if($.inArray(m,f.tag_list)===-1){f.tag_list.push(m)}})};rdx.search.prototype._add_search_filter=function(g,d){var h=null;var s=false;var q=g.value;s=rdx.utils.is_defined(q)?true:false;if(s){var n=g.label;if(rdx.utils.is_not_defined(this._used_search_keys[n])){this._used_search_keys[n]=this._available_search_keys[n]}if((!rdx.NON_REGEX_SEARCH||h==rdx.form_constants.CALENDAR)){this._available_search_keys[n]=null}if(rdx.utils.is_not_defined(this._searched_key_value_map)){this._searched_key_value_map=new Array()}var e=g.key;if(rdx.NON_REGEX_SEARCH&&h!=rdx.form_constants.CALENDAR&&rdx.utils.is_value_in_json_array(this._searched_key_value_map,"key",e)){for(var m in this._searched_key_value_map){var o=this._searched_key_value_map[m]["key"];if(rdx.utils.is_not_defined(o)){continue}if(o===e){var f=this._searched_key_value_map[m]["value"];f=f+","+rdx.utils.html_encode(d.get_data());this._searched_key_value_map[m]["value"]=f;break}}}else{if(h==rdx.form_constants.CALENDAR){var u=d.get_data();if(rdx.utils.is_defined(u)){var a=u.duration_value;if(rdx.utils.is_not_defined(a)){a=u.start_epoch+"-"+u.end_epoch}this._searched_key_value_map.push({key:this._used_search_keys[n]["key"],value:rdx.utils.html_encode(a)})}}else{if(rdx.utils.is_defined(this._used_search_keys[n])){this._searched_key_value_map.push({key:this._used_search_keys[n]["key"],value:rdx.utils.html_encode(g.value)})}else{this._searched_key_value_map.push({key:n,value:rdx.utils.html_encode(g.value)})}}}if(rdx.NON_REGEX_SEARCH||!this._current_item_added_to_filter){if(h==rdx.form_constants.CALENDAR){var b=d.get_data();if(rdx.utils.is_defined(b)){var p=b.duration_value;var t=d.get_selected_date_option();if(rdx.utils.is_defined(p)){t=rdx.i18n.get_string(t)}else{t=b.start_date+":"+b.start_time+" - "+b.end_date+":"+b.end_time}this._add_searched_item({key:this._used_search_keys[n]["key"],value:rdx.utils.html_encode(t)})}}else{this._current_item_added_to_filter=true}}if(rdx.utils.is_defined(this._used_search_keys[n])){this._add_searched_item({key:this._used_search_keys[n]["key"],value:rdx.utils.html_encode(g.value)})}else{this._add_searched_item({key:n,value:rdx.utils.html_encode(g.value)})}this._do_search()}};rdx.search.prototype.remove_search_tooltip=function(b){var a=b?b.data.that:this;if(a._search_tooltip){a._search_tooltip.remove_tooltip();a._search_tooltip=undefined}};rdx.search.prototype.add_help_slider=function(e){this.current_focus_element=$(document.activeElement);var a=rdx.page.show_slider({title:"Regular Expressions Basic Syntax Reference",slider_width:"620px",message:"Hello World"},rdx.HELP_SLIDER);var f=$("<div>").addClass("help_slider_content").addClass("rdx_form_style");var d=search_tooltip_learn_more_content;if(this._properties.is_crossfilter===true){var b=rdx.i18n.get_string("rdx.search_suggestions_text");d=b+search_tooltip_learn_more_content}f.append(d);a.append(f);a.parent(".rdx_slider").on("keydown",{that:this},this.handle_navigation_on_slider)};rdx.search.prototype.handle_navigation_on_slider=function(b){var a=$(document.activeElement);var d;if(b.keyCode==9){if(a.hasClass("rdx_slider_cross_container btn-icon")){a.focus();b.preventDefault()}}else{if(b.keyCode==27){b.data.that.current_focus_element.focus()}}};rdx.search.prototype._create_tooltip=function(d){if(rdx.utils.is_defined(this._search_tooltip)){return this._search_tooltip}this._search_tooltip=new rdx.tooltip(d,{remove_tooltip_mouse_leave:false});var g=rdx.i18n.get_string("rdx.search.we_support_regex");var f=rdx.i18n.get_string("rdx.search.search_extra_msg");var h=$("<div>").addClass("search_tip_container");var m=$("<div>").addClass("search_tip_content");if(this._properties.search_regex==true){var a=$("<span>").addClass("search_help_text").append(g).append("</br>").append(f);var o=$("<button>").addClass("btn search_tip_close_button").attr("aria-label","Close Help");var n=$("<button>").addClass("search_grey_button search_help_button").text(rdx.i18n.get_string("rdx.search.search_learn_more"));n.bind(rdx.events.CLICK,{},function(p){this.add_help_slider();this.remove_search_tooltip()}.bind(this));setTimeout(function(){n.focus()},100)}else{var a=$("<span>").addClass("search_help_text").append(f);var o=$("<button>").addClass("btn search_tip_close_button").attr("aria-label","Close Help")}o.bind(rdx.events.CLICK,{that:this},this.remove_search_tooltip);m.append(o,a);h.append(m,n);var e=this._search_tooltip.render({append_element:h});var b=h.closest(".rdx_bubble");b.css({left:(b.offset().left-6)+"px"});h.closest(".rdx_tooltip_dialog_cell").bind(rdx.events.MOUSE_LEAVE,{},function(p){this.remove_search_tooltip()}.bind(this));return this._search_tooltip};rdx.search.prototype.get_component=function(){return this._search_div};var search_tooltip_learn_more_content='<p>Enter the search keyword in the text box. You can perform a simple CONTAINS search by entering the search keyword in the text box or search by using Regular expressions.</p><table cellpadding="4" cellspacing="2" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" colspan="2" valign="top"> Regular Expression</th><th class="entry" colspan="2" valign="top"> Examples</th></tr></thead><tbody class="tbody"><tr class="row"><td class="entry" valign="top"> <strong class="ph b"> Character</strong> </td><td class="entry" valign="top"> <strong class="ph b"> Definition</strong> </td><td class="entry" valign="top"> <strong class="ph b"> Pattern</strong> </td><td class="entry" valign="top"> <strong class="ph b"> Sample Matches</strong> </td></tr><tr class="row"><td class="entry" valign="top"> ^ </td><td class="entry" valign="top"> Start of a string. </td><td class="entry" valign="top"> ^abc </td><td class="entry" valign="top"> abc, abcdefg, abc123, ... </td></tr><tr class="row"><td class="entry" valign="top"> $ </td><td class="entry" valign="top"> End of a string. </td><td class="entry" valign="top"> abc$ </td><td class="entry" valign="top"> abc, endsinabc, 123abc, ... </td></tr><tr class="row"><td class="entry" valign="top"> . </td><td class="entry" valign="top"> Any character (except \n newline) </td><td class="entry" valign="top"> a.c </td><td class="entry" valign="top"> abc, aac, acc, adc, aec, ... </td></tr><tr class="row"><td class="entry" valign="top"> | </td><td class="entry" valign="top"> Alternation. </td><td class="entry" valign="top"> bill|ted </td><td class="entry" valign="top"> ted, bill </td></tr><tr class="row"><td class="entry" valign="top"> {...} </td><td class="entry" valign="top"> Explicit quantifier notation. </td><td class="entry" valign="top"> ab{2}c </td><td class="entry" valign="top"> Abbc </td></tr><tr class="row"><td class="entry" valign="top"> [...] </td><td class="entry" valign="top"> Explicit set of characters to match. </td><td class="entry" valign="top"> a[bB]c </td><td class="entry" valign="top"> abc, aBc </td></tr><tr class="row"><td class="entry" valign="top"> (...) </td><td class="entry" valign="top"> Logical grouping of part of an expression. </td><td class="entry" valign="top"> (abc){2} </td><td class="entry" valign="top"> Abcabc </td></tr><tr class="row"><td class="entry" valign="top"> * </td><td class="entry" valign="top"> 0 or more of previous character. </td><td class="entry" valign="top"> ab*c </td><td class="entry" valign="top"> ac, abc, abbc, abbbc, ... </td></tr><tr class="row"><td class="entry" valign="top"> + </td><td class="entry" valign="top"> 1 or more of previous character. </td><td class="entry" valign="top"> ab+c </td><td class="entry" valign="top"> abc, abbc, abbbc, ... </td></tr><tr class="row"><td class="entry" valign="top"> &#92; </td><td class="entry" valign="top"> &#92;s matches a white space;<p class="p">&#92; before one of the above special characters treats that character as a literal.</p></td><td class="entry" valign="top"> a&#92;sc<p class="p">&#92; $</p></td><td class="entry" valign="top"> a c<p class="p">$</p></td></tr></tbody></table>';rdx.form_utils=new function(){this.get_form_fields=function(m,u,q,d,o,a){var g=u.get_resource_properties();var e=u.get_properties();var p=new Array();for(var t in m){var b=rdx.form_utils.get_form_field_properties(m[t],g[t],e,t,o);if(!rdx.form_utils._can_render(b,t,u.get_form_data())){continue}var n=new rdx.form_field(b,u,a);n.set_form_data_fetch_callback(u.get_form().get_form_data_callback());n.set_crumb_handler(u.get_crumb_handler());if(rdx.utils.is_defined(q)&&n.get_label_width()==-1){n.set_label_width(q)}if(rdx.utils.is_defined(d)&&n.get_width()==-1){n.set_width(d)}p.push(n);u.add_form_field_to_fields(n);if(n.get_input_type()=="password"&&n.is_confirm()){b.label=rdx.i18n.get_string("rdx.label_confirm")+" "+n.get_label();b.key=b.key+"_confirm";var s=new rdx.form_field(b,u);u.add_form_field_to_fields(s);p.push(s)}if(rdx.utils.is_defined(n.get_extra_field())){var h=rdx.form_utils.get_form_field_properties(n.get_extra_field(),g[n.get_extra_field().property],e,n.get_extra_field().property,o);var f=new rdx.form_field(h,u);f._set_parent_form_field(n);n._set_extra_form_field(f)}}return p};this._can_render=function(b,a,d){if(rdx.utils.is_defined(d)){if(rdx.utils.is_not_defined(d[a])){return false}if(rdx.utils.is_defined(b.render)&&rdx.utils.is_defined(b.render.evaluate)&&rdx.utils.is_function(b.render.evaluate)){return b.render.evaluate([d])}}else{if(rdx.utils.is_defined(b.render)&&rdx.utils.is_defined(b.render.evaluate)&&rdx.utils.is_function(b.render.evaluate)){return b.render.evaluate()}}return true};this.initialize_prompt_event_handler=function(a,b){var d=rdx.utils.is_not_defined(a.event)?rdx.events.CHANGE:a.event;var e=rdx.utils.is_defined(b.get_field().get_resource_value())?b.get_field().get_resource_value():null;b.add_event_handler(d,new rdx.callback(function(h,f,g,m){setTimeout(function(){rdx.form_utils._handle_prompt_event(h,f,g,m)},10)},[a,b,e]))};this._handle_prompt_event=function(d,a,b,e){if(e!=b.get_data()){if(b.get_data()==b.get_field().get_recent_value()){return}if(rdx.utils.is_defined(a.values)){if($.inArray(b.get_data(),a.values)==-1){b.get_field().set_recent_value(b.get_data());return}}if(rdx.utils.is_defined(a.expression)){if(!a.expression.evaluate()){b.get_field().set_recent_value(b.get_data());return}}if(!rdx.utils.is_ie()){d.preventDefault()}else{d.returnValue=false}if(rdx.utils.is_defined(a.message)){rdx.message_box.confirm(rdx.i18n.get_string(a.message),new rdx.callback(function(f,g){f.get_field().set_recent_value(f.get_data())},[b,e]),new rdx.callback(function(f,g){f.set_data(f.get_field().get_recent_value())},[b,e]))}if(rdx.utils.is_defined(a.submit_button_label)){b.get_field().get_form_holder().get_form().update_submit_button_label(a.submit_button_label)}}else{if(rdx.utils.is_defined(a.submit_button_label)){b.get_field().get_form_holder().get_form().reset_submit_button_label()}b.get_field().set_recent_value(b.get_data())}};this.get_form_field_properties=function(d,b,e,g,a){var f=$.extend({},d);if(rdx.utils.is_defined(a)&&rdx.utils.is_not_defined(f.target_resource)){f.target_resource=a}if(!this._has_resource(b)){f.key=g;return f}f.key=b.key;if(rdx.utils.is_not_defined(f.label)){f.label=b.label}if(e&&e.submit_operation&&e.submit_operation.method&&e.submit_operation.method==rdx.model_constants.ADD&&b.value){f.value=b.value}if(rdx.utils.is_not_defined(f.tooltip)&&rdx.utils.is_defined(b.tooltip)){f.tooltip=b.tooltip}if(b.type){f.type=b.type}if(b.note){f.note=b.note}if(rdx.utils.is_defined(b.mandatory)){f.mandatory=b.mandatory}if(rdx.utils.is_defined(b.value)){f.value=b.value}if(rdx.utils.is_defined(b.min_max)){f.min_max=b.min_max}if(rdx.utils.is_defined(b.enumid)){f.enumid=b.enumid}return f};this._has_resource=function(a){if(rdx.utils.is_not_defined(a)){return false}return true};this._check_send_to_server=function(d,f){var b=d.get_form_field(f);var e={};e[f]=d.get_field_value(f);var a=b.get_send_to_server();if((rdx.utils.is_defined(b)&&rdx.utils.is_defined(a))){if(rdx.utils.is_defined(a.evaluate)&&rdx.utils.is_function(a.evaluate)){if(!a.evaluate([e])){return false}}else{if(typeof(a)=="string"){switch(a){case rdx.form_constants.IF_ENABLED:if(b.is_read_only()==true){return false}break;case rdx.form_constants.IF_SHOWN:if(b.is_hidden()==true){return false}break;case rdx.form_constants.IF_NOT_EMPTY:if(rdx.utils.is_empty(e[f])){return false}break;case rdx.form_constants.IF_MODIFIED:if(!d.get_form_holder().is_add_mode()){if(e[f]==b.get_resource_value()){return false}}break;case rdx.form_constants.IF_ENABLED_AND_NOT_EMPTY:if(b.is_hidden()==true||b.is_read_only()==true||rdx.utils.is_empty(e[f])){return false}break;case rdx.form_constants.IF_ENABLED_AND_MODIFIED:if(b.is_hidden()==true||b.is_read_only()==true){return false}else{(!d.get_form_holder().is_add_mode())}if(rdx.utils.is_defined(b.get_formatter())&&rdx.utils.is_defined(b.get_formatter().get_map_value(b.get_resource_value()))){if(e[f]==b.get_formatter().get_map_value(b.get_resource_value())){return false}}else{if(e[f]==b.get_resource_value()){return false}}break}}}}return true};this._check_default_if_null=function(d,e){var b=d.get_form_field(e);var a=b.get_value();var f=d.get_field_value(e);return(rdx.utils.is_defined(b,a)&&(b.is_default_if_null()==true)&&rdx.utils.is_empty(f))};this.validate_file_upload_send_to_server=function(b,f){var e=[];for(var d=0;d<b.length;d++){var a=b[d].get_field();var g=a.get_key();if(this._check_send_to_server(f,g)){e.push(b[d])}}return e};this.prefill_form_data=function(p,e,g,b){var m=e._get_form_fields();var o=e.get_form_holder().get_all_containers();for(var q in o){var d=o[q]["field"];if(rdx.utils.is_function(d.is_container_refresh_required)){if(d.is_container_refresh_required()==true&&rdx.utils.is_function(d.refresh_container)){e.increment_expected_responses();var f=new rdx.callback_params({return_callback:new rdx.callback(e,e.check_and_initialize_form)});d.refresh_container(f)}}}for(var h=0,n=m.length;h<n;h++){var a=m[h].get_resource_name();if(rdx.utils.is_defined(a)){this.prefill_component_data(p,e,m[h],a,g,b,m[h].get_view_context())}else{if(m[h].get_type()=="VALENUM"){e.set_field_value(m[h].get_key(),m[h].get_value())}}}};this.prefill_dependency_data_refresh_components_data=function(o,b,v,z,A,e,p,w,d,f){var u=true;if(rdx.utils.is_defined(f)&&f===true){u=false}var a=[];var g=[];for(var h=0;h<v.length;h++){a[h]=v[h].get_key();g[h]=b.get_field(a[h])}if(rdx.utils.is_defined(v[0].get_formatter())&&rdx.utils.is_defined(v[0].get_formatter().get_data_populate_callback())){var t=v[0].get_formatter().get_data_populate_callback();var s=new rdx.callback_params({resource_name:z,return_callback:new rdx.callback(A,e,[a,z,d]),app_context_data:A.get_form_holder().get_app_context_data(),resource_data:w});t.call_back([s])}else{w=rdx.utils.is_not_defined(w)?{}:w;var q=null;var n=A.get_form_holder().get_app_context_data();if(rdx.utils.is_defined(p)){var m=new rdx.context(p);m.set_context_data(w);if(m.is_url_params_set()){q=m.get_url_params()}}rdx.model.get(rdx.utils.get_resource(z),q,new rdx.callback(A,e,[a,z,d]),o,new rdx.callback(null,rdx.form_utils._handle_resource_form_field_error,[g]))}if(u){b.increment_expected_responses()}};this.prefill_component_data=function(u,e,p,a,h,b,v,n,m,d){var f=true;if(rdx.utils.is_defined(d)&&d===true){f=false}if(rdx.utils.is_defined(p.get_formatter()&&p.get_formatter().get_data_populate_callback())){var s=p.get_formatter().get_data_populate_callback();var g=new rdx.callback_params({resource_name:a,return_callback:new rdx.callback(h,b,[p.get_key(),a,m]),app_context_data:h.get_form_holder().get_app_context_data(),resource_data:n,configured_data:e.get_formatted_response()});s.call_back([g])}else{var q=e.get_field(p.get_key());n=rdx.utils.is_not_defined(n)?{}:n;var t=null;if(rdx.utils.is_defined(v)){var o=new rdx.context(v);o.set_context_data(n);if(o.is_url_params_set()){t=o.get_url_params()}}rdx.model.get(rdx.utils.get_resource(a),t,new rdx.callback(h,b,[p.get_key(),a,m]),u,new rdx.callback(null,rdx.form_utils._handle_resource_form_field_error,[q]))}if(f){e.increment_expected_responses()}};this.add_save_as_link=function(g,o,d,f){var a={method:rdx.model_constants.POST,encoding_type:"application/x-www-form-urlencoded",name:"form",id:"saveas_data_holder_"+Math.round(Math.random()*100),url:"",filename:""};var h=$.extend({},a,d);var e=$("<div>").addClass("component_alignment").css("width","100%");var b=$("<div>");b.append(g);var n=$("<div>");var m=$("<a>").attr("href","#").text(rdx.i18n.get_string("rdx.save_text_as_file")).bind(rdx.events.CLICK,{element:g,properties:h,parent:o},function(w){var s=w.data.properties;var q=w.data.element;var u=w.data.parent;var v=$("<form>");v.attr("method",s.method);v.attr("action",s.url);v.attr("target",s.id);if(rdx.utils.is_defined(f)&&f){v.append(rdx.dom_utils.get_element(rdx.form_constants.TEXT_AREA).hide().attr("name","content").val(q.text()))}else{v.append(rdx.dom_utils.get_element(rdx.form_constants.TEXT_AREA).hide().attr("name","content").val(q.val()))}v.append(rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).hide().attr("name","filename").val(s.filename));if(rdx.utils.is_defined(rdx.ajax_handler_constants.CUSTOM_HEADERS)){for(var p in rdx.ajax_handler_constants.CUSTOM_HEADERS){v.append($("<input>").attr("type","text").attr("value",rdx.ajax_handler_constants.CUSTOM_HEADERS[p]).attr("name",p).attr("style","display:none").css("height","0px"))}}var t=$("<iframe>",{width:1,height:1,frameborder:0,css:{display:"none"}});t.attr("name",s.id);t.attr("id",s.id);u.append(t);setTimeout(function(){var z=window[s.id].document.body;z=$(z);z.append(v);v.submit()},50)});n.append(m);e.append(b).append(n);o.append(e);return o};this.add_form_field_link=function(h,e,m,d,a,b){if(m.get_input_type()==rdx.form_constants.TEXT_AREA||m.get_input_type()==rdx.form_constants.LABEL){return this._add_hyperlink_form_field(h,e,m,d,a)}var p={add_model_change_listener:true,success_callback:null,add_model_method:rdx.model_constants.ADD};var g=$.extend(true,p,a);if(rdx.utils.is_not_defined(b)){b=$("<table>").attr("cellpadding",0).attr("cellSpacing",0).addClass("list_table").append($("<tbody>"))}var o=$("<tr>");var f=$("<td>");f.append(e);o.append(f);if(rdx.utils.is_defined(m.get_add_view_name())){var n=$("<button>").addClass("rdx_button secondary_button").text(rdx.i18n.get_string("rdx.button_add"));o.append(this._add_link_image(m.get_add_view_name(),g.add_model_method,m,n,"rdx.button_add",h,d,g,"add_action"))}if(rdx.utils.is_defined(m.get_set_view_name())){var n=$("<button>").addClass("rdx_button secondary_button").text(rdx.i18n.get_string("rdx.button_modify"));o.append(this._add_link_image(m.get_set_view_name(),rdx.model_constants.SET,m,n,"rdx.button_modify",h,d,g,"edit_action"))}else{if(rdx.utils.is_defined(m.get_view_view_name())){var n=$("<button>").addClass("rdx_button secondary_button").text(rdx.i18n.get_string("rdx.button_open"));o.append(this._add_link_image(m.get_view_view_name(),rdx.model_constants.SET,m,n,"rdx.button_open",h,d,g,"details_action"))}}if(rdx.utils.is_defined(m.get_custom_button_properties())){o.append(this._add_custom_button_for_list(m.get_custom_button_properties(),m,h,d))}e.bind(rdx.events.CHANGE,{list:h,link_map:d},function(v){var z=v.data.list;var w=v.data.link_map;var s=z.get_data();var q;if(z._properties.set_view_validate_expression){var u={};u[z._properties.add_attribute]=$(this[this.selectedIndex]).attr(z._properties.add_attribute);if(JSON.stringify(u)===z._properties.set_view_validate_expression){q=true}else{q=false}}var t=(rdx.utils.is_empty(s))?false:true;for(view_name in w){if(s===rdx.i18n.get_string("rdx.editablecombobox_default")){w[view_name].addClass("disabled")}else{if(z.get_field().get_add_view_name()==view_name&&!z.get_field().is_read_only()){w[view_name].removeClass("disabled")}else{if(!z.get_field().is_read_only()&&z.get_field().get_set_view_name()==view_name){if(rdx.utils.is_defined(q)){if(q===true){w[view_name].removeClass("disabled")}else{w[view_name].addClass("disabled")}}else{if(t){w[view_name].removeClass("disabled")}else{w[view_name].addClass("disabled")}}}else{if(view_name==="custom_button"&&rdx.utils.is_not_empty(s)){w[view_name].removeClass("disabled")}else{w[view_name].addClass("disabled")}}}}}});b.append(o);return b};this._add_link_image_for_expr_builder=function(p,h,g,f,o,d,b,e){var a=$("<td>").addClass("link_cell");var m=$("<a>").attr("href","#").addClass("rdx_right pointer_cursor").bind(rdx.events.CLICK,{click_handler_callback:p,form_field:g},function(u){var q=u.data.form_field;var t=u.data.click_handler_callback;var s={__data:d.get_data(),__set_data_callback:new rdx.callback(function(v){v=decodeURIComponent(v);d.set_data(v)})};t.call_back([s])});var n=rdx.i18n.get_string(o);if(f!=null){a.append(m.append(f).attr("title",n).attr("alt",n))}return a};this._add_custom_button_for_textbox=function(e,d,a,f,g){var b=$("<button>").addClass("rdx_button secondary_button").text(rdx.i18n.get_string(g.label));if(rdx.utils.is_defined(g.class_names)){b.addClass(g.class_names)}b.bind(rdx.events.CLICK,{element:d,form_holder:a,form:f,click_handler_callback:g.click_handler_callback,properties:g},function(m){if(m.data.properties.mask_element){rdx.mask.mask_component(m.data.element,"__button_elem")}else{m.data.form.mask("__textbox"+this._mask_id)}var p=m.data.form.get_form_data();var o=m.data.form.get_app_context_data();var h=null;if(rdx.utils.is_defined(m.data.click_handler_callback)){var n=new rdx.callback_params({return_callback:new rdx.callback(function(q,s){m.data.form.initialize(q);if(rdx.utils.is_defined(m.data.properties.set_focus_on_field)){m.data.form._set_focus(m.data.properties.set_focus_on_field,h)}if(m.data.properties.mask_element){rdx.mask.unmask_component(m.data.element,"__button_elem")}else{m.data.form.unmask("__textbox"+this._mask_id)}}),response:p,unformatted_response:p,app_context_data:o});m.data.click_handler_callback.call_back([n])}});e.append(b)};this._add_custom_button_for_list=function(g,b,f,h){var e=$("<td>").addClass("link_cell");var a=$("<div class = 'image_link'>");var m=$("<button>").addClass("rdx_button secondary_button").attr("aria-label",rdx.i18n.get_string(g.label)).append($("<span>").text(rdx.i18n.get_string(g.label))).bind(rdx.events.CLICK,{properties:g,element:f,form_field:b},function(q){if($(this).hasClass("disabled")){return}if(q.data.element.get_field().is_read_only()){return}var p=rdx.utils.get_resource(b.get_resource_name());var n=function(z,v,w,u){z.data.ns_callback.call_back([v,w,u])};if(g.add_model_change_listener){rdx.model.add_model_change_custom_listener(p,new rdx.callback(null,function(w,B,v,A,z,C){var u=rdx.utils.get_formatted_response(w);if(v.refresh_action=="ADD_NEW"||B==rdx.model_constants.ADD){rdx.form_utils.add_item_to_form_field(A,z,u)}else{rdx.form_utils.update_item_in_form_field(A,z,u)}rdx.model.remove_model_change_custom_listener(z,C)},[f,p,n]),n);g.handler.call_back()}else{var o=q.data.element.get_field();var s=rdx.utils.get_resource(o.get_resource_name());var t=rdx.form_utils._get_data_object(q.data.element,s);g.handler.call_back([t])}});if(rdx.utils.is_defined(g.render)){var d=g.render;if(rdx.utils.is_defined(d.evaluate)&&rdx.utils.is_function(d.evaluate)){if(d.evaluate()===false){m.hide()}}}if(g.add_model_change_listener===false){h.custom_button=m}e.append(a.append(m));return e};this._add_link_image=function(e,n,m,h,s,f,b,g,d){var q={add_model_change_listener:true,success_callback:null,add_model_method:rdx.model_constants.ADD};g=$.extend(true,q,g);var a=$("<td>").addClass("link_cell");if(rdx.utils.is_defined(d)){a.addClass(d)}a.bind(rdx.events.FOCUS_OUT,{},function(t){t.stopPropagation()});var o=$("<div>").addClass("image_link").bind(rdx.events.CLICK,{view_name:e,element:f,link_properties:g,form_field:m},function(w){var B=w.data.view_name;var C=w.data.element;if($(this).hasClass("disabled")){return}if(C.get_field().is_read_only()&&C.get_field().get_set_view_name()!=B){return}var B=w.data.view_name;var E=w.data.form_field;var z=$.extend(true,{},rdx.utils.get_view(B));if(rdx.utils.is_defined(z.view_properties)&&rdx.utils.is_not_defined(z.view_properties.destroy_on_success)){z.view_properties.destroy_on_success=true}else{z.view_properties={};z.view_properties.destroy_on_success=true}var v=rdx.utils.get_resource(z.resource_name);var u=C._parent;var H=null;if(rdx.utils.is_defined(E.get_crumb_handler())){u=E.get_crumb_handler();H=new rdx.base_view(u,z);H.set_crumb_handler(E.get_crumb_handler())}else{if(rdx.utils.is_defined(E.get_form_holder())&&E.get_form_holder().is_show_slider()==true){H=rdx.view_utils.show_view_in_slider(z,null,null,null,false)}else{z.view_properties.dialog_mode=true;H=new rdx.base_view(u,z)}}var t=H.get_view_context();var D=new Object();var A={};if(rdx.utils.is_defined(w.data.form_field._properties.add_link)&&rdx.utils.is_defined(w.data.form_field._properties.add_link.properties)&&w.data.form_field._properties.add_link.properties.inherit_data==true){H.set_inherited_data_callback(w.data.form_field.get_form_data_fetch_callback())}if(n==rdx.model_constants.SET){D.get_by_name=v.primary_keys;var G=C._field.get_formatter();A=rdx.form_utils._get_data_object(C,v);t.set_url_params(D,A)}else{if(rdx.utils.is_defined(H.get_inherited_data_callback())){A=H.get_inherited_data_callback().call_back()}D.is_data_set=true;t.set_url_params(D,A)}H.prepare_view();var F=function(L,J,K,I){L.data.ns_callback.call_back([J,K,I])};if(g.add_model_change_listener){rdx.model.add_model_change_custom_listener(v,new rdx.callback(null,function(K,P,I,L,Q,J,M,N){var O=rdx.utils.get_formatted_response(K);if(N.get_add_view_refresh()==true){N.set_recent_value(O)}else{if((rdx.utils.is_defined(I)&&I.refresh_action=="ADD_NEW")||P==rdx.model_constants.ADD){rdx.form_utils.add_item_to_form_field(L,J,K)}else{rdx.form_utils.update_item_in_form_field(L,J,O)}}rdx.model.remove_model_change_custom_listener(J,M)},[C,H,v,F,E]),F)}if(rdx.utils.is_defined(g.success_callback)){rdx.model.add_model_change_custom_listener(v,new rdx.callback(null,function(J,L,I,K,N,M){K.get_link_properties().success_callback.call_back([J,I.operation_object]);rdx.model.remove_model_change_custom_listener(N,F)},[C,v,F]),F)}$(H).bind(rdx.events.VIEW_DESTROYED,{element:C,view_resource:v,form_field:E},function(I,N){var M=N;var L=I.data.form_field.get_recent_value();var O=I.data.form_field.get_resource_value();var R=I.data.form_field.get_form_holder();var P=I.data.element.get_data();var Q=rdx.utils.is_defined(L)&&rdx.utils.is_object(L)&&rdx.utils.is_defined(L[I.data.form_field.get_key()])?L[I.data.form_field.get_key()]:L;var K=(rdx.utils.is_defined(Q)&&Q!=P&&Q!=O)?true:false;if(I.data.form_field.get_add_view_refresh()===true&&rdx.utils.is_defined(R)&&rdx.utils.is_defined(R.get_form())&&K){var J=R.get_form();var S=I.data.element.get_field().get_formatter().refresh_maps(L);I.data.form_field.get_formatter().update_set_data(S);rdx.form_utils.prefill_component_data($(I.data.element),J,I.data.form_field,I.data.form_field.get_resource_name(),J,J.set_response_for_field,I.data.form_field.get_view_context(),null,null,true)}setTimeout(function(){rdx.model.remove_model_change_custom_listener(v,F)},500)});w.preventDefault()});b[e]=o;var p=rdx.i18n.get_string(s);if(h!=null){a.append(o.append(h).attr("title",p));if(rdx.utils.is_function(h.attr)){h.attr("alt",p)}}return a};this._get_data_object=function(e,b){var a=e.get_field().get_input_type();var d={};switch(a){case"textarea":case"text":var h=$.trim(e.get_data());var g=h.split(",");for(var f=0;f<g.length;f++){var n=g[f];d[n]=n}break;case rdx.form_constants.ENTITY_CHOOSER:d={};d[b.primary_keys[0]]=e.get_data();break;default:var m=e._field.get_formatter();if(rdx.utils.is_function(e.get_available_data)){d=rdx.utils.get_formatted_response(m.get_resource_data(e.get_available_data()))}else{d=rdx.utils.get_formatted_response(m.get_resource_data(e.get_data()))}}return d};this.add_item_to_form_field=function(f,d,e){var a=f.get_field().get_input_type();var m=rdx.utils.get_formatted_response(e);var b=m;switch(a){case"text":case"textarea":var g="";for(var n in b){g=g+$.trim(b[n])+","}b=g.substring(0,g.length-1);break;case"label":break;case rdx.form_constants.ENTITY_CHOOSER:b=m[d.primary_keys[0]];break;default:for(var h=0;h<e.length;h++){b=f.get_field().get_formatter().refresh_maps(e[h]);if(rdx.utils.is_function(f.add_item)){f.add_item(b)}}}f.set_data(b)};this.update_item_in_form_field=function(d,f,a){var b=d.get_field().get_input_type();var e=null;if(b==rdx.form_constants.ENTITY_CHOOSER){if(rdx.utils.is_defined(a)){d.set_data(a[f.primary_keys[0]])}}else{e=d.get_field().get_formatter().refresh_maps(a,d.get_data());if(rdx.utils.is_function(d.update_item)){d.update_item(e)}}};this._does_response_contain_primary_key_info=function(a,d){for(var b=0;b<d.primary_keys;b++){if(rdx.utils.is_not_defined(a[d.primary_keys[b]])){return false}}return true};this._handle_resource_form_field_error=function(b,a){rdx.form_utils.unmask_component(a);rdx.message_box.error(b,null,null);rdx.status_bar.update_status(b,rdx.ERROR)};this.get_resource_for_operation=function(f,e,w,z){z=(rdx.utils.is_defined(z))?z:false;var b={};if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.properties)){b=e.properties}var n=f.get_form_holder();var d=n.get_form_field_to_submit();if(rdx.utils.is_array(d)){var q=this._get_resource_for_operation(f,d,b,w,null,z);if(z){var v={};v.result=this._get_container_data(f,q.result,e,false);v.complete_form_data=q.complete_form_data;return v}return this._get_container_data(f,q,e,false)}else{var q={};var m=false;var p=0;var u={};for(var t in d){var A=rdx.utils.is_defined(w)&&rdx.utils.is_defined(w[t])?w[t]:null;var h={};var a=t==rdx.form_constants.PARENT_RESOURCE?e:rdx.utils.get_resource(t);if(p>=1&&a.name!=e.name){m=true}if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a.properties)){h=a.properties}var o=this._get_resource_for_operation(f,d[t],h,A,null,z);if(z){q[a.name]=o.result;u[a.name]=o.complete_form_data}else{q[a.name]=o}p=p+1}var s=null;if(m==true){s={result:q,multiple_resource:true}}else{s=q[e.name]}var g=this._get_container_data(f,s,e,m);if(z){var v={};v.result=g;v.complete_form_data=u;return v}return g}};this._get_resource_for_operation=function(b,u,d,m,t,a){var w=(rdx.utils.is_defined(m))?m:{};var h={};var s={};a=(rdx.utils.is_defined(a))?a:false;for(var p=0;p<u.length;p++){var q=u[p];var v=q.get_key();if(!q.is_valid()){continue}s[v]=b.get_field_value(v);if(q.is_not_input_field()){var f=q.get_send_to_server();if(rdx.utils.is_not_defined(f)){continue}}if(b.get_form_holder().is_strict_resource_mapping()&&!this._has_resource(d[v])&&!b.get_form_holder().is_standalone_mode()){continue}if(!this._check_send_to_server(b,v)){continue}var o=null;if(!this._check_default_if_null(b,v)){o=b.get_field_value(v)}else{o=b.get_form_field(v).get_value()}w[v]=o;if(rdx.utils.is_defined(q.get_extra_field())){var e=q.get_extra_field().property;var g=q._get_extra_form_field();if(!g.is_part_of_resource()){continue}if(g.is_not_input_field()){var f=g.get_send_to_server();if(rdx.utils.is_not_defined(f)){continue}}if(b.get_form_holder().is_strict_resource_mapping()&&!this._has_resource(d[v])&&!b.get_form_holder().is_standalone_mode()){continue}if(!this._check_send_to_server(b,e)){continue}if(!this._check_default_if_null(b,e)){w[e]=b.get_field_value(e)}else{w[e]=b.get_form_field(e).get_value()}}}if(a){var n={};n.result=w;n.complete_form_data=s;return n}return w};this._get_container_data=function(d,p,f,o){var e=d.get_form_holder().get_all_containers();if(rdx.utils.is_not_defined(e)){return p}var g={};for(var n in e){var a=e[n];if(rdx.utils.is_not_defined(a.field)){continue}if(!rdx.form_utils.is_container_valid_for_resource(a.field)){continue}var h=a.field.get_target_resource();var m=false;if(rdx.utils.is_defined(h)){m=h==f.name?false:true}var b=null;if(m==true&&o&&rdx.utils.is_defined(p.result[h])){b=p.result[h]}else{b=p}if(rdx.utils.is_defined(b)){a.field.set_data(b)}}return p};this.is_container_valid_for_resource=function(a){if(rdx.utils.is_not_defined(a)){return false}if(!rdx.utils.is_function(a.is_valid_resource)&&!rdx.utils.is_function(a.set_data)&&!rdx.utils.is_function(a.get_target_resource)){return false}if(!a.is_valid_resource()){return false}return true};this.set_basic_field_attributes=function(b,a){if(a.get_height()!=-1&&a.get_input_type()!=rdx.form_constants.CARD){b.height(a.get_height())}if(a.get_width()!=-1){b.width(a.get_width())}if(a.is_read_only()){b.attr("readonly","true")}};this.render_label_field=function(m,g,b,t,p,A,z,d,o,n){z=p.get_input_type()==rdx.form_constants.LINK?false:z;var q=null;var a=true;var s=null;if(!A){if(rdx.utils.is_not_defined(d)){d=1}if(o==true){var e=(1/d)*(30);var v=e+"%";g.css("width",v)}}g.addClass("label");if(rdx.form_utils.is_label_first(t)){if(rdx.utils.is_defined(z)&&z==true){var q=$("<tr>");var s=$("<tr>");var w=$("<table>").addClass("form_two_column_layout").attr("cellpadding",0).attr("cellSpacing",0).append($("<tbody>")).append(q).append(s);if(p.is_embedded_component()){w.addClass("form_two_column_view_layout")}if(p.get_input_type()==rdx.form_constants.LABEL){s.addClass("form_field_label")}var f=$("<td>").append(w).addClass("form_multi_layout_container");var h=p.get_col_span();if(rdx.utils.is_defined(h)&&h>0){f.attr("colspan",p.get_col_span())}if(p.get_width()!=-1){w.css("width",p.get_width());f.css("width",p.get_width())}m.append(f);if(!A&&(n>=(d))){if(p.add_extra_padding_column()){var B=rdx.utils.is_defined(p.get_col_span())?p.get_col_span():1;f.attr("colspan",B+1)}else{m.append($("<td>"))}}}else{q=m;s=m}b.addClass("field");if(p.is_label_needed()){if(p.get_label_width()!=-1){g.width(p.get_label_width())}if(p.is_title()){g.addClass("label_title")}rdx.style.apply_style(p,g);if(p.is_disable()){g.addClass("label_disable")}if(p.is_error()){g.addClass("label_error")}q.append(g)}else{q.addClass("no_label_field");if(p.is_title()){q.addClass("label_title")}rdx.style.apply_style(p,g)}if(p.is_disable()){g.addClass("label_disable")}if(p.is_error()){g.addClass("label_error")}if(a==true){s.append(b)}else{s.remove()}return b}else{m.append(b);if(p.is_label_needed()){if(p.get_label_width()!=-1){b.width(p.get_label_width())}var u=$("<span>");u.addClass("input_label");if(p.is_title()){u.addClass("label_title")}u.append(g.text());b.append(u)}if(!A&&(n>=(d))){if(p.add_extra_padding_column()){var B=rdx.utils.is_defined(p.get_col_span())?p.get_col_span():1;b.attr("colspan",B+1)}else{m.append($("<td>"))}}return g}};this.is_label_first=function(a){if(rdx.utils.is_function(a.get_component_type)&&(a.get_component_type()==rdx.form_constants.CHECK_BOX)){return false}return true};this.mask_component=function(a){if(!rdx.utils.is_function(a.mask)){return}a.mask()};this.unmask_component=function(a){if(!rdx.utils.is_function(a.unmask)){return}a.unmask()};this.add_bind_unbind_link_image=function(e,d,a,h,g,b,f){return this._add_link_image(e,d,a,h,g,b,f)};this._add_hyperlink_form_field=function(m,f,n,e,a){var s={add_model_change_listener:true,success_callback:null,add_model_method:rdx.model_constants.ADD,click_handler_callback:null,view_name:null,tooltip:"Load Expression Builder"};var h=$.extend(true,s,a);var d=$("<table>").attr("cellpadding",0).attr("cellSpacing",0).addClass("list_table").append($("<tbody>"));var b=$("<tr>");var p=n.get_add_link()["label"];var o=$("<a>").attr("href","#").text(rdx.i18n.get_string(p));if(rdx.utils.is_defined(h.click_handler_callback)){b.append(this._add_link_image_for_expr_builder(n.get_add_link()["click_handler_callback"],h.add_model_method,n,o,h.tooltip,m,e,h))}else{b.append(this._add_link_image(n.get_add_link()["view_name"],h.add_model_method,n,o,h.tooltip,m,e,h))}var q=$("<tr>");var g=$("<td>");g.append(f);q.append(g);f.bind(rdx.events.CHANGE,{list:m,link_map:e},function(u){var w=u.data.list;var v=u.data.link_map;var t=rdx.utils.is_empty(w.get_data())?false:true;for(view_name in v){if(t||w.get_field().get_add_view_name()==view_name){v[view_name].removeClass("disabled")}else{v[view_name].addClass("disabled")}}});if(rdx.utils.is_defined(h.click_handler_callback)){d.append(q);d.append(b)}else{d.append(b);d.append(q)}return d};this.iframe_loader=function(a){this.DEFAULT_PROPERTIES={file_url:null,error_message:null,failure_callback:null,success_callback:null,ready_callback:null};var b=$.extend({},this.DEFAULT_PROPERTIES,a);if(rdx.utils.is_not_defined(b.file_url)){return}if(rdx.utils.is_defined(this._download_iframe_holder)){this._download_iframe_holder.remove()}var d=$("<iframe>").attr("frameborder",0).attr("width","0px").attr("height","0px");if(rdx.utils.is_defined(b.ready_callback)){d.ready(b.ready_callback)}d.attr("src",b.file_url);$(document.body).append(d);this._download_iframe_holder=d;d.bind(rdx.events.LOAD,{iframe:d,properties:b},function(h){var m=null;try{m=h.data.iframe.contents().text()}catch(g){rdx.message_box.error("File not found");return}if(rdx.utils.is_not_defined(m)){return}var n=h.data.iframe;try{var f=JSON.parse(m);var e=h.data.properties.failure_callback;if(f[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]!=0){if(rdx.utils.is_defined(e)){e.call_back()}else{rdx.message_box.error(f.message)}return}var o=h.data.properties.success_callback;if(rdx.utils.is_defined(o)){o.call_back()}}catch(g){}})};this.convertEscapeCharsToDisplayChars=function(b){if(b==null){return null}var a=/[\n\t\b\r\f]/;if(a.test(b)!==false){b=b.replace(/\n/g,"\\n");b=b.replace(/\t/g,"\\t");b=b.replace(/\r/g,"\\r");b=b.replace(/\f/g,"\\f")}return b};this.convertDisplayCharsToEscapeChars=function(d,b){if(d==null){return null}d=d.replace(/\n/g,"\r\n");if(b){return d}var a=/[\\n\\t\\b\\r\\f]/;if(a.test(d)!==false){d=d.replace(/\\n/g,"\n");d=d.replace(/\\t/g,"\t");d=d.replace(/\\b/g,"\b");d=d.replace(/\\r/g,"\r");d=d.replace(/\\f/g,"\f")}return d};this.set_form_field_data_items=function(b,a,d){a[b+"__form_field_data_items"]=d};this.get_form_field_data_items=function(b,a){if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a[b+"__form_field_data_items"])){return a[b+"__form_field_data_items"]}return null};this.handle_component_show_error=function(b,a){if(b instanceof rdx.view_component_adapter||b instanceof rdx.card_component){return}if(rdx.utils.is_defined(a)&&a==true){if(b instanceof rdx.file_upload_component){b.get_element().get_text_element().addClass("error_text")}else{if(b instanceof rdx.ip_v4_v6){b.get_element().addClass("error_text")}else{if(b instanceof rdx.expression_editor||b instanceof rdx.classic_expression_editor){b.get_textarea().addClass("error_text")}else{if(b instanceof rdx.command_spec_editor){b.get_textarea_component().addClass("error_text")}else{if(rdx.utils.is_function(b.get_component)&&rdx.utils.is_defined(b.get_component())){b.get_component().addClass("error_text")}}}}}}else{if(b instanceof rdx.file_upload_component){b.get_element().get_text_element().removeClass("error_text")}else{if(b instanceof rdx.ip_v4_v6){b.get_element().removeClass("error_text")}else{if(b instanceof rdx.expression_editor||b instanceof rdx.classic_expression_editor){b.get_textarea().removeClass("error_text")}else{if(b instanceof rdx.command_spec_editor){b.get_textarea_component().removeClass("error_text")}else{if(rdx.utils.is_function(b.get_component)&&rdx.utils.is_defined(b.get_component())){b.get_component().removeClass("error_text")}}}}}}};this.check_is_focus_out_component=function(b){var a=true;if((b.field instanceof rdx.view_component_adapter)||(b.field instanceof rdx.card_component)||(b.field instanceof rdx.drag_drop_editor)||(b.field instanceof rdx.file_browser_component)||(b.field instanceof rdx.entity_chooser)||(b.field instanceof rdx.link_component)){a=false}if(b.field instanceof rdx.file_upload_component&&b.form_field.get_properties().multiple_selection_allowed){a=false}return a}};rdx.formatter=function(a){this._DEFAULT_PROPERTIES={map:null,format:null,storage_format:null,callback:null,resource_keys:null,storage_key:null,data_validator_callback:null,regex:null,strict_mapping:false,sort_function:null,set_data:null,data_populate_callback:null};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a);this._input_map=rdx.utils.is_defined(this._properties.map)?this._properties.map:{};this._regex_obj=rdx.utils.is_defined(this._properties.regex)?new RegExp(this._properties.regex):null;if(rdx.utils.is_array(this._input_map)){this._input_map=rdx.utils.convert_array_to_map(this._input_map)}this._reverse_map={};if(rdx.utils.is_defined(this._properties.map)){this._populate_reverse_map()}this._data_map={}};rdx.formatter.prototype.get_display_value=function(f,e){if(rdx.utils.is_defined(this._properties.callback)&&rdx.utils.is_defined(e)){return this._properties.callback.call_back([e])}if(rdx.utils.is_defined(this._reverse_map)){if(rdx.utils.is_array(f)){var a=new Array();for(var b=0;b<f.length;b++){var d=this._reverse_map[f[b]];if(rdx.utils.is_defined(d)){a.push(d)}else{if(this._properties.strict_mapping==false){a.push(f[b])}}}return a}else{var d=this._reverse_map[f];if(rdx.utils.is_not_defined(d)&&(this._properties.strict_mapping==false)){d=f}if(rdx.utils.is_defined(d)&&rdx.utils.is_defined(f)&&d=="--<< New >>--"){d=f}return d}}return f};rdx.formatter.prototype.get_storage_value=function(a){var b=rdx.utils.is_array(a);var d;if(b){return this._get_mapped_array_data(a)}else{if(rdx.utils.is_defined(this._input_map)){d=(rdx.utils.is_not_defined(this._input_map[a])&&(this._properties.strict_mapping==false))?a:this._input_map[a]}}return d};rdx.formatter.prototype._get_mapped_array_data=function(d){var a=new Array();for(var b=0;b<d.length;b++){var e=this._input_map[d[b]];if(rdx.utils.is_defined(e)){a.push(e)}else{if(this._properties.strict_mapping==false){a.push(d[b])}}}return a};rdx.formatter.prototype.map_data_items=function(d){if(rdx.utils.is_not_defined(this._properties.resource_keys)){return[]}var b=[];if(rdx.utils.is_defined(this._properties.map)){this._input_map=this._properties.map;if(rdx.utils.is_array(this._properties.map)){b=this._properties.map;this._input_map=rdx.utils.convert_array_to_map(this._input_map)}else{for(key in this._properties.map){b.push(key)}}}if(rdx.utils.is_not_defined(d)){return b}var a=this._populate_input_map(d);this._populate_reverse_map();b=b.concat(a);if(rdx.utils.is_defined(this._properties.sort_function)){b.sort(this._properties.sort_function)}return b};rdx.formatter.prototype.update_input_map_data_items=function(b,a){if(rdx.utils.is_not_defined(a)){a=b}if((!this._regex_defined())||(this._regex_defined()&&this._validate_regex(a))){this._input_map[b]=a;this._reverse_map[a]=b;return true}else{return false}};rdx.formatter.prototype.refresh_maps=function(a,e){if(rdx.utils.is_defined(e)){var d=this._input_map[e];delete this._reverse_map[d];delete this._input_map[e];delete this._data_map[e]}var b=this._add_to_maps(a,e);this._reverse_map[this._input_map[b]]=b;return b};rdx.formatter.prototype._populate_input_map=function(f){var a=new Array();for(var d=0;d<f.length;d++){var b=f[d];var e=this._add_to_maps(b);if(rdx.utils.is_not_defined(e)){continue}if($.inArray(e,a)==-1){a.push(e)}}return a};rdx.formatter.prototype._add_to_maps=function(a){if(rdx.utils.is_defined(this._properties.data_validator_callback)&&!this._properties.data_validator_callback.call_back([a])){return null}if(this._regex_defined()&&!this._validate_regex(this._get_data_string(a,this._properties.resource_keys))){return null}var b=this._get_data_string(a,this._properties.resource_keys,this._properties.format);if(typeof(b)=="string"){b=rdx.utils.trim(b)}var d=rdx.utils.is_not_defined(this._properties.storage_key)?this._properties.resource_keys:[this._properties.storage_key];var e=this._get_data_string(a,d,this._properties.storage_format);this._input_map[b]=e;this._data_map[b]=a;return b};rdx.formatter.prototype._validate_regex=function(a){return this._regex_obj.test(a)};rdx.formatter.prototype._regex_defined=function(){return rdx.utils.is_defined(this._regex_obj)};rdx.formatter.prototype._populate_reverse_map=function(){this._reverse_map={};for(var a in this._input_map){this._reverse_map[this._input_map[a]]=a}};rdx.formatter.prototype._get_data_string=function(b,n,g){var f="";var a=false;var d=false;var h;var m;if(rdx.utils.is_defined(g)){if(g instanceof rdx.callback){d=true;a=false;m=g}else{d=false;a=true;h=g}}if(d){return m.call_back([b,n])}if(a){f=h}for(var e=0;e<n.length;e++){if(a){f=rdx.utils.get_formatted_string(f,n[e],b[n[e]])}else{if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b[n[e]])){f=f+b[n[e]]+"-"}else{f=f}}}if(!a){f=f.substring(0,f.lastIndexOf("-"))}return f};rdx.formatter.prototype.get_map_keys=function(){var a=new Array();for(key in this._input_map){a.push(key)}return a};rdx.formatter.prototype.get_map_values=function(){var a=new Array();for(key in this._reverse_map){a.push(key)}return a};rdx.formatter.prototype.get_map_value=function(a){return this._input_map[a]};rdx.formatter.prototype.get_resource_data=function(a){if(rdx.utils.is_not_defined(this._data_map[a])){return null}return this._data_map[a]};rdx.formatter.prototype.get_set_data=function(){return this._properties.set_data};rdx.formatter.prototype.update_set_data=function(a){this._properties.set_data=a};rdx.formatter.prototype.get_data_populate_callback=function(){return this._properties.data_populate_callback};rdx.formatter.prototype.get_formatted_message=function(a){if(!rdx.utils.is_array(a)){a=[a]}var d=this._properties.format;for(var b=0;b<a.length;b++){d=this._get_data_string(a[b],this._properties.resource_keys,this._properties.format)}return d};rdx.form_validator=new function(){this.url=function(g,b,h,d){var a=function(n){var o=/:[\d\*]*/;if(o.test(n)){var m=n.match(o);if(rdx.utils.is_defined(m)&&m.length){m=m[0].replace(/:/,"");if(rdx.utils.is_defined(m)){if(m==="*"){return true}m=Number(m)}if(typeof m==="number"){if(m>=0&&m<=65535){return true}else{return false}}}}return true};var f=function(q,p){if(/^(http(s)?:\/\/)/.test(q)){q=q.replace(/^(http(s)?:\/\/)/,"");var o=new RegExp("[:/?]");var s=false;if(o.test(q)){var n=q.match(o);if(rdx.utils.is_defined(n)&&n.length){n=n[0];var m=q.split(n)[0];if(!(/[-a-z_]/).test(m)){s=true}}}else{if(!(/[-a-z_]/).test(q)){s=true}}var t="";if(!s){t=/^([-a-z0-9_]+\.)*([-a-z0-9_]+?)(\:(([0-9]{1,5})|(\*)))?(\/(\/)?[-=&?.#a-z0-9_\+]+)*(\?([\w-"']+(=[\w-"']*)?(&[\w-"']+(=[\w-"']*)?)*)?)?(\/){0,1}$/g;return(q.length>0&&t.test(q)&&a(q))}else{if(rdx.utils.is_defined(p)&&p){return false}else{if(q.length>0){t=/^(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))(\:(([0-9]{1,5})|(\*)))?(\/(\/)?[-=&?.#a-z0-9_\+]+)*(\?([\w-"']+(=[\w-"']*)?(&[\w-"']+(=[\w-"']*)?)*)?)?(\/){0,1}$/g;if(!t.test(q)){return false}return a(q)}}}}else{return false}};g=g.toLowerCase();if(rdx.utils.is_empty(g)){return null}if(rdx.utils.is_defined(h)){if(g.length>h){return rdx.i18n.get_string("rdx.max_length",{name:rdx.i18n.get_string(d),len:h})}}if(f(g,b)){return null}else{if(rdx.utils.is_defined(b)&&b){var e=g.substring(g.indexOf("://")+3);return rdx.i18n.get_string("rdx.invalid_fqdn",{fqdn:e})}}g=rdx.utils.html_decode(g);return rdx.i18n.get_string("rdx.invalid_url",{url:g})};this.email=function(b){var a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/;if(rdx.utils.is_empty(b)){return null}if(rdx.utils.is_not_defined(b)||b===""||a.test(b.toUpperCase())){return null}b=rdx.utils.html_encode(b);return rdx.i18n.get_string("rdx.form_invalid_email",{field_label:b})};this.password_validate=function(a){if(rdx.utils.is_not_empty(a)&&(a=="nsroot")||(a=="NSROOT")){return"rdx.invalid_password"}else{return null}};this.path=function(a){if(rdx.utils.is_empty(a)){return null}if(rdx.utils.starts_with(a,"/")||rdx.utils.starts_with(a,"\\")){return null}return rdx.i18n.get_string("rdx.invalid_path",{url:a})};this.fqdn=function(b,a){if(rdx.utils.is_empty(b)){return null}b=rdx.utils.trim(b);if(rdx.utils.starts_with(b,"http://")||rdx.utils.starts_with(b,"https://")||rdx.utils.is_number(b)){return rdx.i18n.get_string("rdx.invalid_fqdn",{fqdn:b})}if(/\s/g.test(b)){return rdx.i18n.get_string("rdx.invalid_fqdn",{fqdn:b})}var d=/(?=^.{3,253}$)(^((?!-)[a-zA-Z0-9-]{0,62}[a-zA-Z0-9]\.)+[a-zA-Z]{1,63}$)/;if(rdx.utils.is_defined(a)&&a===true){if(b.indexOf(":")!=-1){return rdx.i18n.get_string("rdx.invalid_fqdn_with_port",{fqdn:b})}}if(!d.test(b)){return rdx.i18n.get_string("rdx.invalid_fqdn",{fqdn:b})}return null};this.fqdn_with_port=function(f){if(f.indexOf(":")!=-1){var a=f.split(":");var e=a[0];var d=a[1];var b=rdx.form_validator.fqdn(e);if(rdx.utils.is_defined(b)){return b}else{if(!d.match(/^\d*$/)){return rdx.i18n.get_string("rdx.fqdn_invalid_port",{port:d})}else{return null}}}else{return rdx.form_validator.fqdn(f)}};this.url_with_file=function(a){a=a.toLowerCase();if(rdx.utils.is_empty(a)){return null}if(rdx.utils.starts_with(a,"http://")||rdx.utils.starts_with(a,"https://")){return null}a=rdx.utils.html_encode(a);return rdx.i18n.get_string("rdx.invalid_url",{url:a})};this.max_length=function(d,a,b){if(rdx.utils.is_empty(d)){return null}if(d.length>a){return rdx.i18n.get_string("rdx.max_length",{name:rdx.i18n.get_string(b),len:a})}return null};this.validate_positive_integer_values=function(b){if(rdx.utils.is_empty(b)){return null}var a=/^\+?([0-9]\d*)$/;if(!a.test(b)){return rdx.i18n.get_string("rdx.invalid_negative_integer_value",{value:b})}}};rdx.bubble_component=function(b,a){this._parent=b;this._DEFAULT_PROPERTIES={bubble_arrow:true,content_dom:null,custom_class:null,x_y_position:null};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a);this._bubble=null};rdx.bubble_component.prototype.render=function(){if(rdx.utils.is_defined(this._bubble)){return this._bubble}this._bubble=$("<div>").addClass("rdx_bubble");this._bubble.css({top:-10000,left:-10000});if(rdx.utils.is_defined(this._properties.custom_class)){this._bubble.addClass(this._properties.custom_class)}$(document.body).append(this._bubble);if(rdx.utils.is_defined(this._properties.x_y_position)){this._bubble.append(this._properties.content_dom);this._position_bubble_x_y_coordinates(this._properties.x_y_position);return this._bubble}else{var b=false;if(this._properties.bubble_arrow){var a=$("<span>").addClass("bubble_arrow");this._bubble.append(this._properties.content_dom,a);b=true}else{this._bubble.append(this._properties.content_dom)}this._position_bubble(a,b);return this._bubble}};rdx.bubble_component.prototype._position_bubble=function(e,f){var p=$(window).width();var d=$(window).height();var t=$(window).scrollTop();var b=$(window).scrollLeft();var g=t;var m=t+d;var a=b;var s=b+p;var w=this._parent.offset();var h=this._parent.outerHeight();if(rdx.utils.is_empty(h)&&rdx.utils.is_defined(this._parent["0"])){h=this._parent["0"].offsetHeight}var q=this._parent.outerWidth();if(rdx.utils.is_empty(q)&&rdx.utils.is_defined(this._parent["0"])){q=this._parent["0"].offsetWidth}var o=this._bubble.height();var n=this._bubble.width();var v=(w.top-(o/2)+(h/2));var u=w.left+q;if((v>g&&(v+o)<m)&&(u+n<s)){if(f){this._properties.content_dom.addClass("rdx_position_bubble_arrow_right");e.addClass("bubble_left_arrow")}this._bubble.css({top:w.top-(this._bubble.height()/2)+(h/2),left:this._parent.offset().left+q-0.1});if(f){e.css({top:(this._bubble.height()/2)-e.outerHeight()/2})}return}v=w.top-(o/2)+(h/2);u=w.left-n;if(v>g&&(v+o)<m&&u>a){if(f){this._properties.content_dom.addClass("rdx_position_bubble_arrow_left");e.addClass("bubble_right_arrow")}this._bubble.css({top:w.top-(this._bubble.height()/2)+(h/2),left:w.left-this._bubble.width()+0.1});if(f){e.css({top:(this._bubble.height()/2)-e.outerHeight()/2})}return}v=w.top+h;u=w.left-(n/2)+(q/2);if((v+o<m)&&u>a&&(u+n)<s){if(f){this._properties.content_dom.addClass("rdx_position_bubble_arrow_bottom");e.addClass("bubble_top_arrow")}this._bubble.css({top:w.top+h-0.1,left:w.left-(this._bubble.width()/2)+(q/2)});if(f){e.css({left:this._bubble.width()/2-(e.outerWidth()/2)})}return}v=w.top-o;u=w.left-(n/2)+(q/2);if(v>g&&u>a&&(u+n<s)){if(f){this._properties.content_dom.addClass("rdx_position_bubble_arrow_top");e.addClass("bubble_bottom_arrow")}this._bubble.css({top:w.top-(this._bubble.height())+0.1,left:w.left-(this._bubble.width()/2)+(q/2)});if(f){e.css({left:this._bubble.width()/2-e.outerWidth()/2})}return}var v=(w.top-(o/2)+(h/2));var u=w.left+q;if((v>g&&(v+o)<m)&&(u+n<s)){if(f){this._properties.content_dom.addClass("rdx_position_bubble_arrow_right");e.addClass("bubble_left_arrow")}this._bubble.css({top:w.top-(this._bubble.height()/2)+(h/2),left:this._parent.offset().left+q-0.1});if(f){e.css({top:(this._bubble.height()/2)-e.outerHeight()/2})}return}};rdx.bubble_component.prototype._position_bubble_x_y_coordinates=function(p){var h=$(window).width();var d=$(window).height();var n=$(window).scrollTop();var b=$(window).scrollLeft();var e=n;var f=n+d;var a=b;var m=b+h;var o=p.x_position;var g=p.y_position;if(rdx.utils.is_not_defined(o)||rdx.utils.is_not_defined(g)){return}if((o+this._bubble.width())<m){this._bubble.css({left:o})}else{this._bubble.css({right:h-o});this._bubble.css({left:"auto"})}if((this._bubble.height()+g)<f){this._bubble.css({top:g})}else{this._bubble.css({bottom:d-g});this._bubble.css({top:"auto"})}return};rdx.form_container=function(g,f,a,d,b){this._DEFAULT_PROPERTIES={container:rdx.form_constants.NONE,form_fields:{},columns:1,label_width:-1,width:-1,target_resource:null,add_section_background:false,show_in_single_row:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,f);this._form_holder=a;var e=rdx.utils.is_defined(this._properties.target_resource)?this._properties.target_resource:d;this._parent_container=b;this._form_fields=rdx.form_utils.get_form_fields(this._properties.form_fields,this._form_holder,this._properties.label_width,this._properties.width,e,this._parent_container);this._parent=g;this._form_name=this._form_holder._properties.form_name?this._form_holder._properties.form_name:""};rdx.form_container.prototype.render=function(v){var t=$("<table>").attr("cellspacing",0).attr("role","presentation").append($("<tbody>"));if(this._properties.add_section_background===true){t.addClass("rdx_form_section_separator").addClass("rdx_form_section_single_separator")}t.css("width","100%");var f=this._properties.columns;var e=0;row=this._create_row(t);for(var n=0;n<this._form_fields.length;n=n+1){if((n)>=this._form_fields.length){break}if((e)>=(f)){e=0;row=this._create_row(t);if(this._properties.show_in_single_row==true){row.css("display","inline-block")}}var o=this._form_fields[n];var d=o.get_label();var m=rdx.dom_utils.get_element(rdx.form_constants.LABEL);var g=$("<td>").append(m);if(rdx.utils.is_not_empty(d)){if(!this._form_holder.is_read_only()&&o.is_mandatory()){d+="*"}}else{d=o._properties.key;m.addClass("hide")}m.append(d);var a=$("<td>").attr("fieldfor",d);var q=rdx.utils.is_defined(o.get_col_span())?o.get_col_span():1;e=e+q;if(o.get_input_type()==rdx.form_constants.NOTE){this._add_note(row,n,o)}if(rdx.utils.is_defined(o.get_col_span())){a.attr("colspan",o.get_col_span())}if(o.is_hidden()){row.addClass("hidden")}var b=null;if(o.is_separator()){b=this._add_separator(t,o)}if(o.get_input_type()==rdx.form_constants.NOTE){continue}var h=new rdx.form_component(row,o,this._parent_container);h.render(g,a,f,e,this._form_holder,n,v);var p=h.get_component();var s=h.get_cell();this._form_holder.add_field_to_map(o.get_key(),{field:p,form_field_index:n,row:row,cell:s,separator_row:b,field_validation_trigger:v,form_field:o});if(rdx.utils.is_defined(v)&&rdx.utils.is_function(v.set_form_field_params)){v.set_form_field_params(o,this._properties)}if(o.is_embedded_component()){a.addClass("form_embedded_view");a.attr("colspan",this._properties.columns);this._form_holder.add_embedded_view(p)}else{if(o.is_file_upload_component()){this._form_holder.add_file_upload_component(p)}}var u=o.get_value();if(u!=null){this._form_holder.get_form().set_field_value(o.get_key(),u,null)}this._associate_field_id(p,m,o)}while(e<(f)){var g=$("<td>").addClass("label");var a=$("<td>").addClass("field");row.append(g).append(a);e=e+2}return t};rdx.form_container.prototype._create_row=function(a){var b=$("<tr>");a.append(b);return b};rdx.form_container.prototype._add_note=function(e,b,a){var d=$("<div>");d.addClass("form_note");var f=$("<td>");e.append(f);f.addClass("form_note_row");d.addClass("form_note_border");d.html(a.get_note());f.attr("title",a.get_tooltip()).attr("colspan",this._properties.columns*2).append(d);this._form_holder.add_field_to_map(a.get_key(),{field:d,form_field_index:b,row:e,cell:f,field_validation_trigger:null,form_field:a})};rdx.form_container.prototype._add_separator=function(f,b){var e=$("<tr>").addClass("form_field_separator");var a=$("<td>").attr("colspan",this._properties.columns+1);var d=$(document.createElement("hr"));d.addClass("separator");rdx.style.apply_separatot_style(b,d);a.append(d);e.append(a);f.append(e);return e};rdx.form_container.prototype.get_fields=function(){return this._form_fields};rdx.form_container.prototype._associate_field_id=function(b,g,a){if(b&&rdx.utils.is_function(b.get_component_type)){var e=b.get_component_type();var f=null;switch(e){case rdx.form_constants.RADIO_GROUP:case rdx.form_constants.LABEL:return;case rdx.form_constants.EDITABLE_COMBOBOX:f=b.get_input_type_element();break;default:f=b.get_component()}if(rdx.utils.is_function(b.get_label_container)){g=b.get_label_container()}if(f&&rdx.utils.is_function(f.attr)&&a&&rdx.utils.is_function(a.get_key)){var d=null;if(rdx.utils.is_not_empty(this._form_name)){d=this._form_name+"_"+a.get_key()}else{d=a.get_key()}f.attr("id",d);if(g){g.attr("for",d)}if(e==rdx.form_constants.LIST&&rdx.utils.is_not_empty(g.text())){f.attr("aria-label",g.text())}}}};rdx.group_container=function(e,d,a,b){this._parent=e;this._DEFAULT_PROPERTIES={group_name_as_link:true,render_mode:rdx.SECTION,expand_group:false,form_fields:{},class_names:null,form_sections:null,target_resource:null,add_title:true,resource_key:null,name:null,change_title_to_name:false,add_section_background:false,categorize_sections:false,mandatory:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,d);this._form_holder=a;if(!this._properties.group_name_as_link){this._properties.expand_group=true}this._container_map=new Object();this._is_read_only=false;this._group_table=null;this._group_table_div=null;this._group_name_div=null;this._form_fields={};this._parent_container=b};rdx.group_container.prototype.render=function(a){if(this._properties.render_mode===rdx.SECTION){return this._render_section(a)}else{if(this._properties.render_mode===rdx.INLINE){return this._render_inline(a)}}};rdx.group_container.prototype._show_hide_form=function(b){if(b.data.ns_form._is_read_only===true){return}var a=b.data.ns_form;if(b.data.show===true){b.data.group_name_div.hide();rdx.utils.slide_up_down(b.data.ns_group_table,false,null,"500");b.data.group_div_hide_link.show()}else{b.data.group_div_hide_link.hide();rdx.utils.slide_up_down(b.data.ns_group_table,true,null,"700");b.data.group_name_div.show()}};rdx.group_container.prototype._render_inline=function(t){t=rdx.utils.is_defined(t)?t:this;var n=$("<fieldset>").addClass("group_div");if(rdx.utils.is_defined(this._properties.class_names)){n.addClass(this._properties.class_names)}if(!n.hasClass("group_div")){n.addClass("group_div")}var f=$("<div>").addClass("group_name_div");var e=$("<div>").addClass("group_name_div").hide();var p=$("<div>");if(rdx.utils.is_defined(this._properties.name)){this._form_holder.add_container_to_map(rdx.utils.trim(this._properties.name),{field:this,row:n})}var h=$("<div>").addClass(this._form_holder.get_class_names()).addClass("group").css("width","100%");if(this._properties.expand_group){f.hide();p.show();e.show()}else{f.show();p.hide();e.hide()}var d=$("<a>").attr({href:"#",title:"Click to view more"}).addClass("link_text");if(rdx.utils.is_defined(this._properties.change_title_to_name)){d.text(this._properties.name)}else{d.text(rdx.i18n.get_string("rdx.more"))}f.bind(rdx.events.CLICK,{ns_form:this,ns_group_table:p,group_name_div:f,group_div_hide_link:e,show:true},this._show_hide_form);var o=$("<a>").attr({href:"#",title:"Click to view less"}).addClass("link_text");if(rdx.utils.is_defined(this._properties.change_title_to_name)){o.text(this._properties.name)}else{o.text(rdx.i18n.get_string("rdx.less"))}e.bind(rdx.events.CLICK,{ns_form:this,ns_group_table:p,group_name_div:f,group_div_hide_link:e,show:false},this._show_hide_form);if(this._properties.group_name_as_link){f.append(d);e.append(o);f.addClass("group_container_show");e.addClass("group_container_show show_less")}else{if(this._properties.add_title===true){var b=rdx.i18n.get_string(this._properties.name);f.text(b).addClass("group_header_div");e.text(b).addClass("group_header_div");if(rdx.utils.is_defined(b)&&b.length>0){f.addClass("group_container_show");e.addClass("group_container_show")}}}if(rdx.utils.is_not_defined(this._properties.form_sections)){form_container=new rdx.form_container(h,this._properties,this._form_holder,this._properties.target_resource);var s=form_container.render(t);h.append(s);this._container_map.group_fields={fields:form_container.get_fields()}}else{for(var g=0;g<this._properties.form_sections.length;g++){var q=this._properties.form_sections[g];var a=this._get_container(q,h);var m=a.render(t);if(rdx.utils.is_defined(m)){h.append(m)}}}p.append(h);n.append(f).append(p);n.append(e);this._register_container_validation_event(h,f);this._group_table=h;this._group_table_div=p;this._group_name_div=f;return n};rdx.group_container.prototype.skip_group=function(){if(this._properties.mandatory===true){if(rdx.utils.is_defined(this._parent_container)){if(this._parent_container.skip_group()===true){return true}}return false}var a=true,b=false;if(rdx.utils.is_defined(this._optional_group_checkbox)){if(this._optional_group_checkbox.hasClass("checked")===false){return true}}if(rdx.utils.is_defined(this._parent_container)){if(this._parent_container.skip_group()===true){return true}}return false};rdx.group_container.prototype.expand_optional_group=function(){if(this._properties.mandatory===true){return}if(rdx.utils.is_defined(this._optional_group_checkbox)&&!this._optional_group_checkbox.hasClass("checked")){this._optional_group_checkbox.addClass("expand_group");this._optional_group_checkbox.trigger(rdx.events.CLICK)}if(rdx.utils.is_defined(this._parent_container)){this._parent_container.expand_optional_group()}};rdx.group_container.prototype._get_container=function(b,a){switch(b.type){case rdx.form_constants.TAB:return new rdx.tab_container(a,b,this._form_holder,this);case rdx.form_constants.GROUP:return new rdx.group_container(a,b,this._form_holder,this);case rdx.form_constants.COLUMN:return new rdx.column_container(a,b,this._form_holder,this);default:return new rdx.form_container(a,b,this._form_holder,null,this)}};rdx.group_container.prototype._render_section=function(p){p=rdx.utils.is_defined(p)?p:this;var m=$("<fieldset>").addClass("group_div");if(rdx.utils.is_defined(this._properties.class_names)){m.addClass(this._properties.class_names)}if(!m.hasClass("group_div")){m.addClass("group_div")}if(this._properties.add_section_background==true){m.addClass("rdx_form_section_background rdx_background rdx_border")}if(rdx.utils.is_defined(this._properties.name)){this._form_holder.add_container_to_map(rdx.utils.trim(this._properties.name),{field:this,row:m})}var g=$("<div>").addClass(this._form_holder.get_class_names()).addClass("group");g.css("width","100%");var d=$("<div>").addClass("group_name_div");if(this._properties.expand_group&&this._properties.mandatory==true){g.show();d.removeClass("group_div_section_close").addClass("group_div_section_open")}else{g.hide();d.removeClass("group_div_section_open").addClass("group_div_section_close")}if(this._properties.group_name_as_link){var h=$("<label>");var f=$("<span>").text(rdx.i18n.get_string(this._properties.name));if(this._properties.mandatory==false){this._optional_group_checkbox=$("<input>").attr("type","checkbox").addClass("optional_group_checkbox").appendTo(h);this._optional_group_checkbox.bind(rdx.events.CLICK,{ns_form:this},function(s){var q=s.data.ns_form;if($(s.target).hasClass("checked")){$(s.target).removeClass("checked");d.removeClass("group_div_section_open").addClass("group_div_section_close").addClass("disabled");g.hide()}else{$(s.target).addClass("checked");d.removeClass("disabled");if($(s.target).hasClass("expand_group")&&(q._properties.expand_group===false)){s.stopPropagation();return}else{d.trigger(rdx.events.CLICK)}}s.stopPropagation()});d.addClass("disabled")}h.append(f);d.append(h).addClass("group_div_section")}else{if(this._properties.add_title===true&&rdx.utils.is_defined(this._properties.name)){d.text(rdx.i18n.get_string(this._properties.name)).addClass("group_header_div")}}d.bind(rdx.events.CLICK,{ns_form:this,ns_group_table:g},function(s){s.preventDefault();if(s.data.ns_form._is_read_only===true||(rdx.utils.is_defined(s.data.ns_form._optional_group_checkbox)&&!s.data.ns_form._optional_group_checkbox.hasClass("checked"))){return}var q=s.data.ns_form;var t=s.data.ns_group_table;t.toggle();if(d.hasClass("group_div_section_close")){d.removeClass("group_div_section_close").addClass("group_div_section_open")}else{d.removeClass("group_div_section_open").addClass("group_div_section_close")}});if(rdx.utils.is_not_defined(this._properties.form_sections)){var b=new rdx.form_container(this._parent,this._properties,this._form_holder,this._properties.target_resource,this);var o=b.render(this);g.append(o);this._container_map.group_fields={fields:b.get_fields()}}else{for(var e=0;e<this._properties.form_sections.length;e++){var n=this._properties.form_sections[e];var a=this._get_container(n,this._parent);var o=a.render(this);g.append(o)}}m.append(d).append(g);this._register_container_validation_event(g,d);this._group_table=g;this._group_name_div=d;if(this._properties.categorize_sections===true){m.addClass("categorize")}if(this._properties.hidden){m.addClass("hide")}return m};rdx.group_container.prototype.set_form_field_params=function(b,a){b.set_group(a.name)};rdx.group_container.prototype._register_container_validation_event=function(d,b){var a=this;$(this).bind(rdx.form_constants.CONTAINER_VALIDATION_ERROR,{group_table:d,link:b},function(f,e){if(f.data.group_table.is(":hidden")){f.data.link.click()}})};rdx.group_container.prototype.is_valid_resource=function(){if(rdx.utils.is_defined(this._properties.resource_property)){return true}return false};rdx.group_container.prototype.set_data=function(a){if(rdx.utils.is_defined(this._properties.resource_property)){this._radio_component.set_data(rdx.i18n.get_string(a[this._properties.resource_property]))}};rdx.group_container.prototype.get_data=function(a){if(rdx.utils.is_not_defined(a)){return}if(rdx.utils.is_defined(this._properties.resource_property)){a[this._properties.resource_property]=this._radio_component.get_data()}};rdx.group_container.prototype.get_target_resource=function(){return this._properties.target_resource};rdx.group_container.prototype._set_read_only=function(a){if(a==true){this._group_table_div.hide();this._group_name_div.addClass("group_name_div_disabled");this._is_read_only=true}else{this._is_read_only=false;this._group_table_div.hide();this._group_name_div.removeClass("group_name_div_disabled")}};rdx.group_container.prototype.toggle_read_only=function(a){this._set_read_only(!a)};rdx.group_container.prototype.get_component=function(){return this._group_table};rdx.group_container.prototype._update_form_fields=function(d,a){if(rdx.utils.is_not_defined(d)){return}for(var b=0;b<d.length;b++){d[b].set_is_part_of_resource(a)}};rdx.group_container.prototype.toggle_show_hide=function(a,b){if(a){b.show();for(var d in this._container_map){this._update_form_fields(this._container_map[d]["fields"],true)}}else{b.hide();for(var d in this._container_map){this._update_form_fields(this._container_map[d]["fields"],false)}}};rdx.column_container=function(b,d,a){this._parent=b;this._DEFAULT_PROPERTIES={columns:[],name:null,target_resource:null,add_section_background:false,add_border:true,class_names:null,column_widths:[]};this._properties=$.extend({},this._DEFAULT_PROPERTIES,d);this._form_holder=a;this._columns_container=null};rdx.column_container.prototype.render=function(){this._columns_container=rdx.dom_utils.get_element(rdx.form_constants.TABLE);this._columns_container.addClass("form_columns_container").attr("role","presentation");if(rdx.utils.is_defined(this._properties.name)){this._form_holder.add_container_to_map(rdx.utils.trim(this._properties.name),{field:this,row:this._columns_container})}var b=$("<tr>");this._columns_container.append(b);var e=parseInt(100/this._properties.columns.length)+"%";for(var g=0;g<this._properties.columns.length;g++){var f=$("<td>").addClass("form_column").css("width",e);if(this._properties.column_widths&&rdx.utils.is_defined(this._properties.column_widths[g])){f.css("width",this._properties.column_widths[g])}if(this._properties.add_section_background===true){f.addClass("rdx_form_section_separator")}if(this._properties.add_border==false){f.css("border",0)}if(rdx.utils.is_defined(this._properties.class_names)){f.addClass(this._properties.class_names)}var a=this._properties.columns[g];var d=new rdx.form_container(f,a,this._form_holder);f.append(d.render());b.append(f)}return this._columns_container};rdx.column_container.prototype.is_valid_resource=function(){return false};rdx.column_container.prototype.set_data=function(a){};rdx.column_container.prototype.get_data=function(a){};rdx.column_container.prototype.toggle_show_hide=function(a){if(a){this._columns_container.show()}else{this._columns_container.hide()}};rdx.column_container.prototype.get_component=function(){return this._columns_container};rdx.legacy_form_container=function(a){this._form_holder=a;var b=rdx.form_utils.get_form_fields(this._form_holder.get_fields_dfn(),this._form_holder);this._groups={};this._tabs={}};rdx.legacy_form_container.prototype.render=function(){var m=$("<table>").addClass(this._form_holder.get_class_names()).append($("<tbody>"));m.attr("cellspacing",0);if(this._form_holder.add_border()){m.addClass("smooth_all_corner").addClass("layout_border")}m.addClass("config_layout");this._tabs.no_of_columns=0;var h=this._form_holder.get_form_fields();for(var w=0,C=h.length;w<C;w+=this._form_holder.get_properties().number_of_columns){var o=m.children("tbody").children("tr:not(.hidden)").length+1;var g=$("<tr>");m.append(g);if(o%2==0){g.addClass("even")}for(var v=0,B=this._form_holder.get_properties().number_of_columns;v<B;v++){var t=h[w+v];if(!t){var u=$("<td>").addClass("label");var e=$("<td>").addClass("field");g.append(u).append(e);continue}if(t.get_input_type()==rdx.form_constants.NOTE){this._add_note(g,w,v,t);break}var f=t.get_group();if(rdx.utils.is_defined(f)){if(rdx.utils.is_not_defined(this._groups[f])){var g=$("<tr>");m.append(g)}if(rdx.utils.is_not_defined(this._groups[f])){this._groups.no_of_columns=0}g=this._add_group(m,t,f,g,this._groups.no_of_columns==0);this._groups.no_of_columns=this._groups.no_of_columns+1;if(this._groups.no_of_columns==this._form_holder.get_properties().number_of_columns){this._groups.no_of_columns=0}}if(rdx.utils.is_defined(t.get_tab())){if(rdx.utils.is_not_defined(this._tabs.tabs_div)){var g=$("<tr>");m.append(g)}if(rdx.utils.is_not_defined(this._tabs[t.get_tab()])){this._tabs.no_of_columns=0}g=this._add_tab(m,t,g,this._tabs.no_of_columns==0);this._tabs.no_of_columns=this._tabs.no_of_columns+1;if(this._tabs.no_of_columns==this._form_holder.get_properties().number_of_columns){this._tabs.no_of_columns=0}}if(t.is_hidden()){g.addClass("hidden")}var q=t.get_label();if(!this._form_holder.is_read_only()&&t.is_mandatory()){q+="*"}var u=$("<td>").attr("title",t.get_tooltip()).append(q);var e=$("<td>").attr("title",t.get_tooltip()).attr("fieldfor",q);if(t.is_separator()){this._add_separator(m,g,w,v,t)}var z=(this._form_holder.is_read_only()||t.get_input_type()==rdx.form_constants.LABEL)?rdx.form_constants.LABEL:t.get_input_type();var n=rdx.component_helper.get_component(z,e,t,this._form_holder).render();if(rdx.utils.is_defined(t.get_prompt())){this._form_holder.add_prompt_field(t)}if(rdx.utils.is_defined(t.get_resource_name())){this._form_holder.add_maskable_component(n)}var b=rdx.form_utils.render_label_field(g,u,e,n,t,this._form_holder.is_read_only(),this._form_holder.is_two_row_layout_for_fields(),this._form_holder.is_dialog());this._form_holder.add_field_to_map(t.get_key(),{field:n,form_field_index:w+v,row:g,cell:b,field_validation_trigger:this._get_field_validation_trigger(t),form_field:t});if(t.is_embedded_component()){e.addClass("form_embedded_view");e.attr("colspan",this._form_holder.get_properties().number_of_columns*2);this._form_holder.add_embedded_view(n)}var d=t._get_extra_form_field();if(rdx.utils.is_defined(d)){var s=$("<td>");s.attr("title",d.get_tooltip());s.addClass("field");b.append(s);if(rdx.utils.is_defined(d.get_prompt())){this._form_holder.add_prompt_field(d)}var A=rdx.component_helper.get_component(d.get_input_type(),s,d,this._form_holder).render();if(rdx.utils.is_defined(d.get_resource_name())){this._form_holder.add_maskable_component(A)}if(rdx.utils.is_not_defined(d.get_view())){this._form_holder.add_field_to_map(d.get_key(),{field:A,form_field_index:w+v,extra_form_field:true,row:g,cell:s,field_validation_trigger:this._get_field_validation_trigger(d),form_field:d})}if(d.is_embedded_component()){s.addClass("form_embedded_view");s.attr("colspan",this._form_holder.get_properties().number_of_columns*2);this._form_holder.add_embedded_view(A)}g.append(s)}var p=t.get_value();if(p!=null){this._form_holder.get_form().set_field_value(t.get_key(),p,null)}}}var a=$("<div>").append(m);return a};rdx.legacy_form_container.prototype._get_field_validation_trigger=function(a){var b=a._get_parent_form_field();var d=rdx.utils.is_defined(b)?b:a;if(rdx.utils.is_defined(d.get_tab())||rdx.utils.is_defined(d.get_group())){this._register_container_validation_event(d);return d}return null};rdx.legacy_form_container.prototype._register_container_validation_event=function(a){var b=this;$(a).bind(rdx.form_constants.CONTAINER_VALIDATION_ERROR,{legacy_form:b},function(e,d){var f=rdx.utils.is_defined(d._get_parent_form_field())?d._get_parent_form_field():d;e.data.legacy_form._set_group_tab(f)})};rdx.legacy_form_container.prototype._add_note=function(f,d,b,a){var e=$("<div>");e.addClass("form_note");var g=$("<td>");f.append(g);if(d!=0){e.addClass("form_note_border");g.addClass("form_note_row")}e.html(a.get_note());g.attr("title",a.get_tooltip()).attr("colspan",this._form_holder.get_properties().number_of_columns*2).append(e);this._form_holder.add_field_to_map(a.get_key(),{field:e,form_field_index:d+b,row:f,cell:g,field_validation_trigger:null,form_field:a})};rdx.legacy_form_container.prototype._add_group=function(m,e,a,o,n){var g;if(!this._groups[a]){g=$("<table>").addClass(this._form_holder.get_class_names()).addClass("group").append($("<tbody>"));var d;if(e.is_expand_group()){g.show();d=$(document.createElement("img")).attr("src",this._form_holder.get_properties().group_collapse_img_url)}else{g.hide();d=$(document.createElement("img")).attr("src",this._form_holder.get_properties().group_expand_img_url)}var h=$(document.createElement("a")).attr("href","#").attr("title",a).append(d).bind(rdx.events.CLICK,{ns_form:this,ns_group_table:g,ns_img:d},function(s){var q=s.data.ns_form;var t=s.data.ns_group_table;var p=s.data.ns_img;t.toggle();p.attr("src",(p.attr("src")==q._form_holder.get_properties().group_expand_img_url)?q._form_holder.get_properties().group_collapse_img_url:q._form_holder.get_properties().group_expand_img_url)});var b=$("<td>").attr("colspan",this._form_holder.get_properties().number_of_columns*2).append(h).append(h.clone(true).text(a));o.append(b);var f=$("<tr>");var b=$("<td>").attr("colspan",this._form_holder.get_properties().number_of_columns*2);f.append(b);b.append(g);m.append(f);this._groups[a]={group_table:g,group_link:h}}else{g=this._groups[a].group_table}if(n){o=$("<tr>");this._groups[a].group_table.group_row=o;g.append(o)}else{o=this._groups[a].group_table.group_row}return o};rdx.legacy_form_container.prototype._add_tab=function(n,g,s,o){var m=g.get_tab();if(rdx.utils.is_not_defined(this._tabs[m])){var b=null;var h=false;this._tabs.no_of_columns=0;if(rdx.utils.is_defined(this._tabs.tabs_div)){b=this._tabs.tabs_div}else{b=$("<div>");b.addClass("tabs");this._tabs.tabs_div=b;var f=$("<td>").attr("colspan",this._form_holder.get_properties().number_of_columns*2);s.append(f);f.addClass("tab_spacing");f.append(b);h=true}var p=$(document.createElement("li"));b.append(p);var d=$(document.createElement("a")).attr("href","#").attr("title",m);p.append(d);var e=null;if(rdx.utils.is_defined(this._tabs.tab_cell)){e=this._tabs.tab_cell}else{var q=$("<tr>");e=$("<td>").attr("colspan",this._form_holder.get_properties().number_of_columns*2).addClass("tab_spacing");q.append(e);n.append(q);e.addClass("tab_layout_border").addClass("smooth_all_corner");this._tabs.tab_cell=e}var a=$("<table>").addClass("group").addClass("form").append($("<tbody>"));a.attr("cellspacing",0);s=$("<tr>");a.append(s);this._tabs[g.get_tab()]={li_item:p,tab_table:a};this._tabs[g.get_tab()]["tab_table"]["tab_row"]=s;if(!h){a.hide()}e.append(a);if(h){p.addClass("current_tabs")}d.append($(document.createElement("span")).text(m));p.bind(rdx.events.CLICK,{tabbed_view:this,title:m,table_dfn:this._tabs,tab_li:p,tabs_div:b,tabs_content_cell:e},function(u){var t=u.data.tabs_div.children(".current_tabs");u.data.tabbed_view._tab_clicked(u.data.title,u.data.table_dfn,u.data.tab_li,t)})}else{if(o){s=$("<tr>");this._tabs[g.get_tab()]["tab_table"].append(s);this._tabs[g.get_tab()]["tab_table"]["tab_row"]=s}else{s=this._tabs[g.get_tab()]["tab_table"]["tab_row"]}}return s};rdx.legacy_form_container.prototype._add_separator=function(m,h,e,d,b){var g=$("<tr>");var a=$("<td>").attr("colspan",this._form_holder.get_properties().number_of_columns*2);var f=$(document.createElement("hr"));f.addClass("separator");a.append(f);g.append(a);m.append(g)};rdx.legacy_form_container.prototype._tab_clicked=function(f,b,a,d){for(var e in b){if(e!=f&&rdx.utils.is_defined(b[e]["tab_table"])){b[e]["tab_table"].hide()}}d.removeClass("current_tabs");a.addClass("current_tabs");b[f]["tab_table"].show()};rdx.legacy_form_container.prototype._set_group_tab=function(a){this._expand_group(a.get_group());if(rdx.utils.is_defined(a.get_tab())){var b=this._tabs.tabs_div.children(".current_tabs");this._tab_clicked(a.get_tab(),this._tabs,this._tabs[a.get_tab()]["li_item"],b)}};rdx.legacy_form_container.prototype._expand_group=function(a){if(a!=null&&this._groups[a].group_table.is(":hidden")){this._groups[a].group_link.click()}};rdx.tab_container=function(b,d,a){this._parent=b;this._DEFAULT_PROPERTIES={tabs:null,name:null,target_resource:null,mode:rdx.form_constants.TAB,check_default_entity:{model_method:"get_count",view_context:null,resource_name:null,entity_response_callback:null,resource_indexed_tab:null},add_section_background:false,is_read_only:false,resource_property:null,single_tab_data:false};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,d);this._form_holder=a;this._tabs=new Object();this._container_map=new Object();this._fields_map=new Object();this._index_key=null;this._radio_buttons_rendered=true};rdx.tab_container.prototype._can_render=function(a){if(rdx.utils.is_defined(a.render)&&rdx.utils.is_defined(a.render.evaluate)&&rdx.utils.is_function(a.render.evaluate)){return a.render.evaluate()}return true};rdx.tab_container.prototype._render_legacy_tabs=function(){var b=$("<div>").addClass("tab_container");if(rdx.utils.is_defined(this._properties.name)){this._form_holder.add_container_to_map(rdx.utils.trim(this._properties.name),{field:this,row:b})}var d=$("<div>");var m=$("<div>");m.addClass("tab_layout_border").addClass("smooth_all_corner");d.addClass("tabs");this._tabs.tabs_div=d;for(var h=0;h<this._properties.tabs.length;h++){var g=this._properties.tabs[h];if(this._can_render(g)===false){continue}var o=$("<div>").addClass("each_tab");d.append(o);var n=rdx.i18n.get_string(g.name);var e=$(document.createElement("a")).attr("href","#").attr("title",n);o.append(e);e.append($(document.createElement("span")).text(n));var a=$("<div>").addClass("group").addClass("form");this._tabs[n]={li_item:o,tab_table:a};if(h==0){o.addClass("current_tabs")}else{a.hide()}o.bind(rdx.events.CLICK,{tab_container:this,title:n,table_dfn:this._tabs,tab_li:o,tabs_div:d,tab_name:g.name},function(s){var q=s.data.tabs_div.children(".current_tabs");s.data.tab_container._legacy_tab_clicked(s.data.title,s.data.table_dfn,s.data.tab_li,q,s.data.tab_container.__container_map,s.data.tab_name);s.preventDefault()});var f=new rdx.form_container(this._parent,g,this._form_holder,this._properties.target_resource);var p=f.render(this);a.append(p);this._container_map[rdx.utils.trim(g.name)]={fields:f.get_fields()};m.append(a);if(this._properties.single_tab_data==true&&h!=0){this._update_form_fields(f.get_fields(),false)}}b.append(d);b.append(m);this._register_container_validation_event();return b};rdx.tab_container.prototype._render_radio_tabs=function(){this._radio_container=$("<div>").addClass("tab_component");if(rdx.utils.is_defined(this._properties.name)){this._form_holder.add_container_to_map(rdx.utils.trim(this._properties.name),{field:this,row:this._radio_container})}this._toggle_container=$("<div>");this._toggle_data_map={};var n=new Array();for(var g=0;g<this._properties.tabs.length;g++){var m=rdx.i18n.get_string(this._properties.tabs[g].name);n.push(m)}this._radio_btn_div=$("<div>").addClass("radio_buttons_div");var q=new rdx.form_field({formatter:{map:n},key:"tab_component_"+Math.random(),input_type:rdx.form_constants.RADIO_GROUP});this._radio_component=rdx.component_helper.get_component(rdx.form_constants.RADIO_GROUP,this._radio_btn_div,q).render();this._radio_component.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._radio_tab_clicked,[this._radio_component]));var o="";for(var g=0;g<this._properties.tabs.length;g++){var f=this._properties.tabs[g];var m=rdx.i18n.get_string(f.name);var b={tab_component:{form_fields:f.form_fields}};var d=$("<div>").addClass("tab_container");var a=$("<table>").addClass("group").addClass("form").append($("<tbody>"));this._tabs[m]={tab_table:a};var e=new rdx.form_container(this._parent,f,this._form_holder,this._properties.target_resource);var p=e.render(this);a.append(p);this._container_map[rdx.utils.trim(m)]={container:d,fields:e.get_fields()};d.append(a);if(rdx.utils.is_not_defined(this._properties.check_default_entity.resource_name)){this._toggle_container.append(d)}else{var h=this._properties.tabs.length-1;if(rdx.utils.is_defined(this._properties.check_default_entity.resource_indexed_tab)&&this._properties.check_default_entity.resource_indexed_tab!=0){h=0}if(g==h){this._toggle_container.append(d)}}if(g!=0&&rdx.utils.is_not_defined(this._properties.check_default_entity.resource_indexed_tab)){d.hide();this._update_form_fields(e.get_fields(),false)}else{this._index_key=rdx.utils.trim(m)}}if(this._properties.is_read_only==true&&rdx.utils.is_function(this._radio_component.toggle_read_only)){this._radio_component.toggle_read_only(false)}if(rdx.utils.is_not_defined(this._properties.check_default_entity.resource_name)){this._append_radio_buttons_to_container();this._radio_container.append(this._toggle_container)}return this._radio_container};rdx.tab_container.prototype._get_radio_item_title=function(a){var b=this._properties.tabs[a];var d=rdx.i18n.get_string(b.name);return d};rdx.tab_container.prototype._append_radio_buttons_to_container=function(){if(rdx.utils.is_defined(this._properties.check_default_entity.resource_name)){if(rdx.utils.is_not_defined(this._properties.check_default_entity.resource_indexed_tab)){for(var b=this._properties.tabs.length-2;b>=0;b--){var d=this._get_radio_item_title(b);var a=this._container_map[d]["container"];this._toggle_container.prepend(this._container_map[d]["container"])}}else{var d=this._get_radio_item_title(this._properties.check_default_entity.resource_indexed_tab);this._toggle_container.append(this._container_map[d]["container"])}}this._radio_container.append(this._radio_btn_div);this._toggle_container.addClass("toggle_container");this._radio_container.addClass("radio_component")};rdx.tab_container.prototype.render=function(){if(this._properties.mode==rdx.form_constants.TAB){return this._render_legacy_tabs()}else{return this._render_radio_tabs()}};rdx.tab_container.prototype.refresh_container=function(d){var e=new rdx.model_executor_service(new rdx.callback(this,this._handle_refresh_container,[d]),null,false);var b=null;if(rdx.utils.is_defined(this._properties.check_default_entity.view_context)){var a=this._properties.check_default_entity.view_context;var f=new rdx.context(a);f.set_context_data(a);b=f.get_url_params()}e.add(this._properties.check_default_entity.model_method,rdx.utils.get_resource(this._properties.check_default_entity.resource_name),null,null,b);e.execute()};rdx.tab_container.prototype._handle_refresh_container=function(m,b){var n=m.get_collated_response();var e=m.get_collated_result();var o=(e[0]==true&&rdx.utils.is_defined(n[0])&&n[0]>0)?true:false;if(e[0]==true&&rdx.utils.is_defined(n[0])&&rdx.utils.is_defined(this._properties.check_default_entity.entity_response_callback)){o=this._properties.check_default_entity.entity_response_callback.call_back([n[0]])}if(o==true||o=="true"){this._append_radio_buttons_to_container()}else{var g=this._properties.tabs.length-1;if(rdx.utils.is_defined(this._properties.check_default_entity.resource_indexed_tab)){g=0}var h=this._get_radio_item_title(g);this._index_key=rdx.utils.trim(h);this._radio_buttons_rendered=false;var a=this._container_map[rdx.utils.trim(h)]["container"];a.show();if(this._properties.add_section_background===true){a.addClass("rdx_form_section_separator")}if(rdx.utils.is_defined(this._properties.check_default_entity.resource_indexed_tab)){var d=this._get_radio_item_title(this._properties.tabs.length-1);this._update_form_fields(this._container_map[rdx.utils.trim(d)]["fields"],false)}else{for(var f=0;f<this._properties.tabs.length-1;f++){var d=this._get_radio_item_title(f);this._update_form_fields(this._container_map[rdx.utils.trim(d)]["fields"],false)}}this._update_form_fields(this._container_map[rdx.utils.trim(h)]["fields"],true)}this._radio_container.append(this._toggle_container);b.resume()};rdx.tab_container.prototype.set_form_field_params=function(a,b){a.set_tab(b.name)};rdx.tab_container.prototype._legacy_tab_clicked=function(h,d,b,e,g,a){for(var f in d){if(f!=h&&rdx.utils.is_defined(d[f]["tab_table"])){d[f]["tab_table"].hide();if(this._properties.single_tab_data==true){this._update_form_fields(this._container_map[rdx.utils.trim(f)].field,false)}}}e.removeClass("current_tabs");b.addClass("current_tabs");d[h]["tab_table"].show();if(this._properties.single_tab_data==true){this._update_form_fields(this._container_map[rdx.utils.trim(h)].field,true)}};rdx.tab_container.prototype._radio_tab_clicked=function(b,d){for(var a in this._container_map){if(a==rdx.utils.trim(d.get_data())){this._container_map[a]["container"].show(500);this._update_form_fields(this._container_map[a]["fields"],true)}else{this._container_map[a]["container"].find(".rdx_error_container:visible").addClass("hide");this._container_map[a]["container"].find(".error_text:visible").removeClass("error_text");this._container_map[a]["container"].hide();this._update_form_fields(this._container_map[a]["fields"],false)}}};rdx.tab_container.prototype._update_form_fields=function(d,a){if(rdx.utils.is_not_defined(d)){return}for(var b=0;b<d.length;b++){d[b].set_is_part_of_resource(a);if(a===false){d[b].set_hidden(true)}else{if(a===true){d[b].set_hidden(false)}}}};rdx.tab_container.prototype._register_container_validation_event=function(){var a=this;$(this).bind(rdx.form_constants.CONTAINER_VALIDATION_ERROR,{tab_container:a},function(e,b){var d=e.data.tab_container;var f=d._tabs.tabs_div.children(".current_tabs");d._legacy_tab_clicked(b.get_tab(),d._tabs,d._tabs[b.get_tab()]["li_item"],f)})};rdx.tab_container.prototype.is_valid_resource=function(){if(this._properties.mode==rdx.form_constants.CARD&&rdx.utils.is_defined(this._properties.resource_property)){return true}return false};rdx.tab_container.prototype.set_data=function(a){if(this._properties.mode==rdx.form_constants.CARD&&rdx.utils.is_defined(this._properties.resource_property)){this._radio_component.set_data(rdx.i18n.get_string(a[this._properties.resource_property]))}};rdx.tab_container.prototype.get_data=function(a){if(rdx.utils.is_not_defined(a)){return}if(this._properties.mode==rdx.form_constants.CARD&&rdx.utils.is_defined(this._properties.resource_property)){a[this._properties.resource_property]=this._radio_component.get_data()}};rdx.tab_container.prototype.get_target_resource=function(){return this._properties.target_resource};rdx.tab_container.prototype.toggle_show_hide=function(a,b){if(a){b.show();if(this._properties.mode==rdx.form_constants.CARD){if(rdx.utils.is_defined(this._container_map[this._index_key])){this._update_form_fields(this._container_map[this._index_key]["fields"],true);if(this._radio_buttons_rendered==true){this._radio_component.set_data(this._radio_component.get_data())}}}}else{b.hide();if(this._properties.mode==rdx.form_constants.CARD){for(var d in this._container_map){this._update_form_fields(this._container_map[d]["fields"],false)}}}};rdx.tab_container.prototype.is_container_refresh_required=function(){if(rdx.utils.is_defined(this._properties.check_default_entity.resource_name)){return true}return false};rdx.label=function(a,d,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=d;this._element=$('<span class="label_input">');this._read_only=rdx.utils.is_defined(b)?b:false;this._set_properties();this._view_link_map={}};rdx.label.prototype.render=function(){if(rdx.utils.is_defined(this._field.get_add_link())){var a=rdx.form_utils.add_form_field_link(this,this._element,this._field,this._view_link_map,this._field.get_add_link());this._parent.append(a)}else{if(this._field._properties.input_type!=="next_row"){this._parent.append(this._element)}}return this};rdx.label.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._element,this._field)};rdx.label.prototype.add_event_handler=function(a,b){};rdx.label.prototype.set_data=function(a){this._element.html("");if(rdx.utils.is_array(a)){this._element.append(a.join(","))}else{if(rdx.utils.is_string(a)){this._element.append(rdx.i18n.get_string(a))}else{if(rdx.utils.is_boolean(a)){this._element.append(a+"")}else{this._element.append(a)}}}};rdx.label.prototype.get_data=function(){var a=this._element.text();a=a.replace(/\u00A0/g," ");return a};rdx.label.prototype.get_component_type=function(){return rdx.form_constants.LABEL};rdx.label.prototype.get_field=function(){return this._field};rdx.label.prototype.get_component=function(){return this._element};rdx.label.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._element}if(a){b.show()}else{b.hide()}};rdx.list=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={size:5,width:-1,multi_select:true,double_click_handler_callback:null,change_handler_callback:null,class_names:"list",send_as_array:"false",mandatory:false,case_insensitive_lookup:false,options_in_bold:[],height:null,sort:null,preserve_whitespace:false,default_item_label:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());if(this._properties.mandatory==false){this._properties.mandatory=rdx.utils.is_defined(a.is_mandatory())?a.is_mandatory():false}this._properties.width=rdx.utils.is_defined(a.get_width())?a.get_width():-1;this._properties.options_in_bold=rdx.utils.is_not_defined(a._properties.options_in_bold)?[]:a._properties.options_in_bold;this._properties.default_item_label=rdx.utils.is_not_defined(a._properties.default_item_label)?"":a._properties.default_item_label;this._list=null;this._html_list=null;this._list_table=null;this._added_blank_item=false;this._field=a;this._view_link_map={};this._properties.change_event_handler=rdx.utils.is_defined(this._properties.change_event_handler_callback)?this._properties.change_event_handler_callback:null;this._list=rdx.dom_utils.get_element(rdx.form_constants.LIST).attr("size",this._properties.size).addClass(this._properties.class_names);this._initial_value=null;if(rdx.utils.is_defined(this._properties.height)){this._list.height(this._properties.height)}if(this._field._properties&&rdx.utils.is_empty(this._field._properties.label)){if(rdx.utils.is_empty(this._field._properties.key)){this._list.attr("aria-label","Select value")}else{this._list.attr("aria-label","Select value for "+this._field._properties.key)}}};rdx.list.prototype.render=function(){this._html_list=this._list[0];if(rdx.utils.is_defined(this._field.get_resource_name())&&(rdx.utils.is_defined(this._field.get_add_view_name())||rdx.utils.is_defined(this._field.get_set_view_name())||rdx.utils.is_defined(this._field.get_view_view_name())||rdx.utils.is_defined(this._field.get_custom_button_properties()))){this.create_list_table()}else{this._parent.append(this._list)}this._add_empty_item();this.add_data_items();if(!this.is_combo_box()){if(this._properties.multi_select){this._list.attr("multiple","multiple");this._list.addClass("list_multiselect")}if(this._properties.double_click_handler_callback){this._list.bind(rdx.events.DOUBLE_CLICK,{ns_double_click_handler_callback:this._properties.double_click_handler_callback},function(b){b.data.ns_double_click_handler_callback.call_back()})}}if(rdx.utils.is_defined(this._properties.change_event_handler)){this.add_event_handler(rdx.events.CHANGE,this._properties.change_event_handler)}if(this._properties.width!=-1){this.get_component().width(this._properties.width)}if(rdx.BROWSER=="ie"&&rdx.BROWSER_VERSION=="8.0"){var a=this;this._list.bind("focus",function(){var b=$(a._list).attr("class");if(b.indexOf("ie_select")==-1){$(a._list).attr("class",$(a._list).attr("class")+" ie_select")}});this._list.bind("mouseover",function(){var b=$(a._list).attr("class");if(b.indexOf("ie_select")==-1){$(a._list).attr("class",$(a._list).attr("class")+" ie_select")}});this._list.bind("focusout",function(){var d=$(a._list).attr("class");if(d.indexOf("ie_select")!=-1){var b=d;var e=b.replace("ie_select"," ");$.trim(e);$(a._list).attr("class",e)}});$(this._list).mouseout(function(){var f=false;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){f=true}if(!f||window.event.toElement!=null){var d=$(a._list).attr("class");if(d.indexOf("ie_select")!=-1){var b=d;var e=b.replace("ie_select"," ");$.trim(e);$(a._list).attr("class",e)}}})}if(this._properties.change_handler_callback){this._list.bind(rdx.events.CHANGE,{ns_change_handler_callback:this._properties.change_handler_callback,list:this},function(b){b.data.ns_change_handler_callback.call_back([b.data.list])})}if(this._field.is_read_only()){this.toggle_read_only(false)}return this};rdx.list.prototype.add_event_handler=function(a,b){this._list.bind(a,{rdx_change_handler_callback:b,parent:this._parent,list_get_data_callback:new rdx.callback(this,this.get_data),list_set_data_callback:new rdx.callback(this,this.set_data),list_add_data_items_callback:new rdx.callback(this,this.add_data_items)},function(d){d.data.rdx_change_handler_callback.call_back([d])})};rdx.list.prototype.add_data_items=function(m,g){this.remove_items(false,false);if(rdx.utils.is_not_defined(m)){var f=this._field.get_formatter();if(rdx.utils.is_defined(f)){if(rdx.utils.is_defined(f._properties.key_value)&&f._properties.key_value===true){this.add_options_by_key_value(f._input_map,false)}else{var b=f.get_map_keys();if(this._properties.sort!=null&&rdx.utils.is_array(b)){b.sort();if(this._properties.sort==rdx.SORT_DESCENDING){b.reverse()}}for(var e=0,d=b.length;e<d;e++){this.add_item(b[e],false)}}}}else{for(var e=0,d=m.length;e<d;e++){this.add_item(m[e],false)}}var a=this.get_data();var h=false;if(rdx.utils.is_not_empty(a)&&(g===false||g===undefined)){if(rdx.utils.is_empty(this._initial_value)){h=true}}if(h){this._list.change()}};rdx.list.prototype.add_items=function(a,b){for(var e=0,d=a.length;e<d;e++){this.add_item(a[e],false)}if(b){this._list.change()}};rdx.list.prototype.add_item=function(e,b){if(e==rdx.SEPARATOR){var a=$(document.createElement("option")).text(rdx.SEPARATOR_LABEL).prop("disabled",true);this._list.append(a)}else{var d=rdx.utils.html_decode(rdx.i18n.get_string(e));if(this._properties.preserve_whitespace){d=d.replace(/ /g,"\u00A0")}var a=$(document.createElement("option")).text(d).attr("title",d);if($.inArray(d,this._properties.options_in_bold)!=-1){a.addClass("rdx_bold")}this._list.append(a);if(b){this._list.change()}}};rdx.list.prototype.add_options_by_key_value=function(e,a){if(rdx.utils.is_defined(e)){for(key in e){if(e.hasOwnProperty(key)){var d=e[key];var b=$(document.createElement("option")).text(d).val(key);this._list.append(b);if(a){this._list.change()}}}}};rdx.list.prototype.update_item=function(b){var a=this.get_selected_index();if(a<0||(a>this.get_items_count()-1)){return}if(rdx.utils.is_not_empty(b)){this._html_list.options[a].text=b}};rdx.list.prototype.select_item=function(b,a){var d=this.get_items_count();if(d==0){return}if(b<0||b>=d){b=0}this._html_list.options[b].selected=true;if(a){this._list.change()}};rdx.list.prototype.select_value=function(e,b){if(e==null){return}var g=this.get_items_count();if(g==0){return}var f=e+"";if(this._properties.case_insensitive_lookup==true){f=f.toLowerCase()}for(var a=0;a<g;a++){var d=this._html_list.options[a].text;d=d+"";if(this._properties.case_insensitive_lookup==true){d=d.toLowerCase()}if(d==f){this._html_list.options[a].selected=true;if(rdx.utils.is_not_defined(b)||b==false){this._list.change();this._initial_value=""}break}}};rdx.list.prototype.unselect_all_items=function(){this._html_list.selectedIndex=-1;this._list.change()};rdx.list.prototype.remove_items=function(b,a){if(!b){this._html_list.selectedIndex=-1;if(this._added_blank_item){this._html_list.options.length=1}else{this._html_list.options.length=0}}else{if(this.is_combo_box()){if(this._added_blank_item&&this.get_selected_index()>1){this._html_list.remove(this.get_selected_index())}else{this._html_list.remove(this.get_selected_index())}}else{for(var d=this.get_items_count()-1;d>=0;d--){if(this._html_list.options[d].selected){this._html_list.remove(d)}}}}if(a){this._list.change()}};rdx.list.prototype.get_items=function(d){var b=[];if(d&&this.is_combo_box()){var a=this.get_selected_index();if(a>=0){return this._html_list.options[a].text}return""}else{for(var f=0,e=this.get_items_count();f<e;f++){var g=this._html_list.options[f];if(!d||g.selected){b.push(g.text)}}}return b};rdx.list.prototype.get_selected_index=function(){return this._html_list.selectedIndex};rdx.list.prototype.get_items_count=function(){return this._html_list.length};rdx.list.prototype.is_combo_box=function(){return this._properties.size==1};rdx.list.prototype.is_send_as_array=function(){return this._properties.send_as_array=="true"};rdx.list.prototype._add_empty_item=function(){if(!this.is_combo_box()){return}if(this._properties.mandatory==true||this._properties.mandatory=="true"){return}if(!this._added_blank_item){this.add_item(this._properties.default_item_label,false);this._added_blank_item=true}};rdx.list.prototype.get_field=function(){return this._field};rdx.list.prototype.get_component=function(){return this._list};rdx.list.prototype.get_parent=function(){return this._parent};rdx.list.prototype.get_component_type=function(){return rdx.form_constants.LIST};rdx.list.prototype.set_data=function(b){if(!this.is_combo_box()&&rdx.utils.is_array(b)){for(var a=0;a<b.length;a++){this.select_value(b[a],true)}if(b.length>0){this._list.change()}}else{this.select_value(b)}if(this._initial_value===null){this._initial_value=b}};rdx.list.prototype.get_data=function(a){return this.get_items(true)};rdx.list.prototype.mask=function(){rdx.mask.mask_component(this._parent,this.get_field().get_key())};rdx.list.prototype.unmask=function(){return rdx.mask.unmask_component(this._parent,this.get_field().get_key())};rdx.list.prototype.get_dependency_determinant_value=function(a){if(a==rdx.form_constants.dependency_determinant.TYPE){return this.get_data()}else{return null}};rdx.list.prototype.toggle_read_only=function(b,a){if(rdx.utils.is_defined(a)&&a!=rdx.form_constants.dependency_determinant.VALUE){this._field.set_read_only(false);this._toggle_read_only_for_view_link_map(b,null,this._field.get_set_view_name(),this._field.get_view_view_name())}else{if(b){$(this._list).removeAttr("disabled");this._list.removeClass("form_field_disabled");this._toggle_read_only_for_view_link_map(b,this._field.get_add_view_name(),this._field.get_set_view_name(),this._field.get_view_view_name())}else{$(this._list).prop("disabled",true);this._list.addClass("form_field_disabled");this._toggle_read_only_for_view_link_map(b,this._field.get_add_view_name(),this._field.get_set_view_name(),this._field.get_view_view_name())}}};rdx.list.prototype._toggle_read_only_for_view_link_map=function(e,b,d,a){if(e){if(rdx.utils.is_defined(b)){this._view_link_map[b].removeClass("disabled")}if(rdx.utils.is_defined(d)&&rdx.utils.is_not_empty(this.get_items(true))){this._view_link_map[d].removeClass("disabled")}if(rdx.utils.is_defined(a)){this._view_link_map[a].removeClass("disabled")}}else{if(rdx.utils.is_defined(b)){this._view_link_map[b].addClass("disabled")}if(rdx.utils.is_defined(d)){this._view_link_map[d].addClass("disabled")}if(rdx.utils.is_defined(a)){this._view_link_map[a].addClass("disabled")}}};rdx.list.prototype.create_list_table=function(){this._list_table=$("<table>").attr("cellpadding",0).attr("cellSpacing",0).addClass("list_table").append($("<tbody>"));this._list_table.attr("role","presentation");rdx.form_utils.add_form_field_link(this,this._list,this._field,this._view_link_map,null,this._list_table);this._parent.prepend(this._list_table)};rdx.tree_input=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={class_names:"tree_input",display_field:"display_name",id_field:"id",root_node_class:"root-node"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this._source_data_items=null;this._source_data_items_copy=null;this._field=a;this._tree_holder=null};rdx.tree_input.prototype.render=function(){this._tree_holder=$("<ul>").appendTo(this._parent).addClass("tree_input_component");this._tree_holder.append(this.add_select_all_view_button.bind(this));return this};rdx.tree_input.prototype.add_data_items=function(a,b){this._source_data_items=a;if(rdx.utils.is_array(a)&&a.length>1){this._source_data_items={child_node:"children",children:a,name:"ROOT",id:"ROOT",display:false,display_name:"All"}}this._root_node=this.create_tree_node(this._tree_holder,$.extend(true,{},this._source_data_items),this._properties.root_node_class);this._root_node.addClass("expanded").removeClass("collapsed");$("#ROOT",this._root_node).siblings("button").attr("aria-label","Collapse node")};rdx.tree_input.prototype.add_select_all_view_button=function(){var b={"class":"all_view_select_button"};var a={"class":"all_view_select_button_container"};var d=$("<button>",b).text('Toggle all "View" selection');d.on("focus",function(e){$(e.target).parent(".all_view_select_button_container").css({opacity:"1"})});d.on("blur",function(e){$(e.target).parent(".all_view_select_button_container").removeAttr("style")});d.on(rdx.events.CLICK,function(e){var f=$("#ROOT",this._tree_holder)[0];if(f.checked===true&&f.indeterminate===false){this.select_unselect_view_node(false)}else{if(f.checked===false&&f.indeterminate===false){this.select_unselect_view_node(true)}else{if(!this.toggle){this.select_unselect_view_node(false)}else{if(this.toggle){this.select_unselect_view_node(this.toggle)}}}}}.bind(this));return $("<div>",a).append(d)};rdx.tree_input.prototype.select_unselect_view_node=function(a){this.toggle=!a;if(a){$(".tree-node[default_field=true] .node-el input:checkbox:not(:checked)",this._tree_holder).trigger(rdx.events.CLICK)}else{$(".tree-node[default_field=true] .node-el input:checked",this._tree_holder).trigger(rdx.events.CLICK)}};rdx.tree_input.prototype.add_show_more_button=function(a){$(".custom-box",a).before($('<div class="arrow">').on("click",function(b){var d=$(b.target).siblings(".custom-box");if(d.css("display")=="none"){d.css({display:"block"})}else{d.css({display:"none"})}}))};rdx.tree_input.prototype.create_tree_node=function(t,d,m){if(!t||!d){return}var q=$("<li>").appendTo(t).addClass("tree-node");if(rdx.utils.is_not_empty(m)){q.addClass(m)}if(rdx.utils.is_not_defined(d.display)||d.display===true){}var e=$("<span>").appendTo(q).addClass("node-el");var o=$('<input type="checkbox"/>').appendTo(e);if(d.id){o.attr("id",d.id)}if(d.name){o.attr("node_identitifier",d.name)}o.change(this.handle_node_selection.bind(this));var s=$('<label class="node-name">').attr("for",d.id).appendTo(e).text(d[this._properties.display_field]);if(d.child_node){q.addClass("collapsed");var b=d[d.child_node];b.sort(function(v,u){return Number(v.serial_id)>Number(u.serial_id)});var a=$("<button>").addClass("ui-icon").attr("aria-label","Expand node");if(b.length===0){a.css({visibility:"hidden"})}a.on(rdx.events.CLICK,this.collapse_uncollapse_tree_node);e.prepend(a);var n=$("<ul>").appendTo(q).addClass("children");var p=[];for(var h=0;h<b.length;h++){if(b[h].type!==undefined&&b[h].type=="custom"){var g=$.extend({},b[h]);delete g.type;p.push(g)}else{this.create_tree_node(n,b[h])}}if(p.length>0){this._create_sub_tree(q,p)}}else{t.closest(".tree-node").addClass("leaf-parent");var f=d[this._properties.node_keys[0]]+"_"+d[this._properties.node_keys[1]];q.attr("node_key",f);if(d[this._properties.default_select.key]==this._properties.default_select.value){q.attr("default_field",true)}}return q};rdx.tree_input.prototype._create_sub_tree=function(b,a){var d={child_node:"children",children:a,name:"More Options",display_name:"More Options"};return this.create_tree_node(b,d,"sub-tree")};rdx.tree_input.prototype.collapse_uncollapse_tree_node=function(a){var b=$(a.target).closest(".tree-node");if(b.hasClass("collapsed")){a.target.setAttribute("aria-label","Collapse node");b.removeClass("collapsed").addClass("expanded")}else{a.target.setAttribute("aria-label","Expand node");b.removeClass("expanded").addClass("collapsed")}a.stopPropagation();a.preventDefault()};rdx.tree_input.prototype.handle_node_selection=function(d){var m=$(d.target);var h=m.attr("id");var f=m.prop("checked");var g=m.closest(".tree-node");var b=g.attr("node_key");var e;if(this._properties.default_node_selection_condition){e=new RegExp(this._properties.default_node_selection_condition,"gi")}if(f&&b&&e&&b.match(e)){this.select_default_field(g,f)}var a=$(".children input",g);a.prop("indeterminate",false);a.prop("checked",f);$(".leaf-parent input",g).prop("checked",f);$(".leaf-parent input",g).prop("indeterminate",false);this.select_parent_bottom_to_top(m)};rdx.tree_input.prototype.select_parent_bottom_to_top=function(g){if(!g.siblings("label")[0]){return}var f=g.closest(".children");var m=$(".tree-node input",f);var h=f.closest(".tree-node");var e=h.children(".node-el");var a=true;var d=false;for(var b=0;b<m.length;b++){a=a&&m[b].checked;d=d||m[b].checked}if(!a&&d){$("input",e).prop("indeterminate",true);$("input",e).prop("checked",false)}else{if(a){$("input",e).prop("indeterminate",false);$("input",e).prop("checked",true)}else{$("input",e).prop("indeterminate",false);$("input",e).prop("checked",false)}}this.select_parent_bottom_to_top($("input",e))};rdx.tree_input.prototype.tree_select_unselect_node=function(b,a){this.traverse_to_node(this._source_data_items_copy,this._source_data_items_copy,b,a)};rdx.tree_input.prototype.select_default_field=function(e,d){var b=e.siblings(".tree-node[default_field=true]");for(var a=0;a<b.length;a++){$(".node-el input",$(b[a])).prop("checked",d)}};rdx.tree_input.prototype.traverse_to_node=function(a,d,g,f){if(!g){return}if(a.id==g){a.checked=f;if(!f&&d!==null){}else{if(f&&d!==null){d.partial=true}}this.check_if_child_selected(d)}else{if(a.child_node){var h=a[a.child_node];var e=h.length;for(var b=0;b<e;b++){this.traverse_to_node(h[b],a,g,f)}}}};rdx.tree_input.prototype.check_if_child_selected=function(g){if(g!==undefined&&g.child_node===undefined||g===null){return}var e;var a;var m=g[g.child_node];var d=m.length;for(var b=0;b<d;b++){if(m[b].checked!==undefined&&m[b].checked===true){e=true;break}}for(var f=0;f<d;f++){if(m[f].partial!==undefined&&m[f].partial===true){a=true;break}}if(g.partial!==undefined&&e!==true&&a!==true){g.partial=false}else{g.partial=true}if(g.parent_id){this.get_tree_node(this._source_data_items_copy,g.parent_id);this.check_if_child_selected(this.parent_node)}};rdx.tree_input.prototype.get_tree_node=function(f,g,e){if(e){return}if(e===undefined&&f.name!="ROOT"&&f.id==g){e=f;this.parent_node=f}else{if(f.child_node!==undefined){var b=f[f.child_node];var a=b.length;for(var d=0;d<a;d++){this.get_tree_node(b[d],g,e)}}}};rdx.tree_input.prototype.add_event_handler=function(a,b){};rdx.tree_input.prototype.get_field=function(){return this._field};rdx.tree_input.prototype.get_component=function(){return this._tree_holder};rdx.tree_input.prototype.get_parent=function(){return this._parent};rdx.tree_input.prototype.get_component_type=function(){return rdx.form_constants.tree_input};rdx.tree_input.prototype.set_data=function(e){if(!e){return}if(e[0]!==undefined&&e[0][this._properties.condition_select_all.key]==this._properties.condition_select_all.value){$("#ROOT",this._tree_holder).trigger("click")}else{if(e[0]!==undefined&&e[0][this._properties.default_select.condition.key]==this._properties.default_select.condition.value){$(".tree-node[default_field=true] .node-el input",this._tree_holder).trigger("click")}else{if(e[0]!==undefined&&this.get_custom_tree_selection(e[0].operation_name)){var d=this.get_custom_tree_selection(e[0].operation_name);$("#ROOT",this._tree_holder).trigger("click");$("input[node_identitifier="+d+"]",this._tree_holder).trigger("click")}else{for(var a in e){if(e[a].dependent_resources!=="true"&&e[a].dependent_resources!==true){var b=e[a][this._properties.node_keys[0]]+"_"+e[a][this._properties.node_keys[1]];var f=$(".tree-node[node_key="+b+"] .node-el input",this._tree_holder);if(f.prop("checked")!==true){f.trigger("click")}}}}}}};rdx.tree_input.prototype.get_custom_tree_selection=function(a){var b=this._properties.custom_selection_conditions[a];if(b){return b}else{return false}};rdx.tree_input.prototype.get_data=function(d){var b=$("input:checkbox:checked",this._tree_holder);this._source_data_items_copy=null;this._source_data_items_copy=$.extend(true,{},this._source_data_items);this._source_data_items_copy.partial=true;for(var a=0;a<b.length;a++){if(b[a].id){this.tree_select_unselect_node(b[a].id,true)}}return this._source_data_items_copy};rdx.bind_unbind_list=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={height:"200px",width:"600px",class_names:"bind_unbind_list",available_component:"table",mandatory:false,show_add_button:true,expanded:false,add_order_buttons:false,explode_root_node:true,enable_search:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this._properties.mandatory=a.is_mandatory();this._configure_table=null;this._available_table=null;this._available_table_header=null;this._configured_table_header=null;this._field=a;this._custom_input_field=a.get_custom_input_field();this._view_link_map={};this._new_button_div=null;this.AVAILABLE_FADE_IN_TIME=1500;this._COLUMN_VALUE_KEY="value";this._move_up_div=null;this._move_down_div=null};rdx.bind_unbind_list.prototype._get_plus_icon=function(b,d){var a=$("<button>").addClass("ui-icon ui-icon-plus").attr("aria-label","Add");a.bind("click",{icon:a,list:d},function(f){if(!f.data.list.get_field().is_read_only()){f.data.list._available_table.set_rows_selected(f.data.icon.parent().parent()[0].rowIndex);var e=$(f.data.icon.parent()[0]).data("ns_table_row_data");var g=[e.value];f.data.list._available_table.delete_item(e,[f.data.list._COLUMN_VALUE_KEY]);f.data.list._configure_table.add_item(e,g,false);f.data.list._update_configure_count();f.data.list._update_available_count()}});return a};rdx.bind_unbind_list.prototype._get_minus_icon=function(b,d){var a=$("<button>").addClass("ui-icon ui-icon-minus").attr("aria-label","Remove");a.bind("click keypress",{icon:a,list:d},function(f){if(rdx.utils.is_defined(f.keyCode)&&f.keyCode!=13){return}if(!f.data.list.get_field().is_read_only()){f.data.list._configure_table.set_rows_selected(f.data.icon.parent().parent()[0].rowIndex);var e=$(f.data.icon.parent()[0]).data("ns_table_row_data");var g=[e.value];f.data.list._configure_table.delete_item(e,[f.data.list._COLUMN_VALUE_KEY]);f.data.list._available_table.add_item(e,g);f.data.list._update_configure_count();f.data.list._update_available_count()}});return a};rdx.bind_unbind_list.prototype._get_row_data=function(d,a){var b=$("<span>").addClass("prose").append(d.value);return b};rdx.bind_unbind_list.prototype._add_remove_data=function(h,m,g){var f=h.get_selected_items_data();var b=h.delete_selected_item();if(this._properties.available_component!="table"&&g=="add"&&f.length!=b.length){b=[];var a=new Array();if(this._properties.explode_root_node==false){for(var e=0;e<f.length;e++){if(rdx.utils.is_defined(f[e]["parent"]["data"]["key"])=="_1"||$.inArray(f[e]["parent"]["data"]["key"],a)==-1){b.push({value:f[e]["data"]["title"]});a.push(f[e]["data"]["title"])}}}else{for(var e=0;e<f.length;e++){if(f[e]["parent"]["data"]["key"]!="_1"){b.push({value:f[e]["data"]["title"]})}}}}if(this._properties.available_component!="table"&&rdx.utils.is_defined(b)){f=b}if(rdx.utils.is_defined(f)){for(var e=0;e<f.length;e++){var d=[f[e]["value"]];if(g=="remove"){m._available_table.add_item(f[e],d)}else{if(g=="add"){m._configure_table.add_item(f[e],d,false)}}}m._update_configure_count();m._update_available_count()}};rdx.bind_unbind_list.prototype._move_up_down=function(o,m){var h=o._get_selected_rows();var n=o.get_selected_row_count();var f=o.get_selected_items_data();var b=new Array();for(var e=0;e<n;e++){b[e]=h[e].rowIndex}if(rdx.utils.is_not_empty(f)){if((m=="up"&&b[0]!=0)||(m=="down"&&(b[b.length-1]!=o.get_item_count()-1))){o.delete_selected_item()}else{this._toggle_up_down_events();return}for(var e=0;e<n;e++){var d=f[e];var g;var a=[d.value];if(m=="up"&&g!=0){g=b[0];if(g+e==1){o.add_item(d,a);o.set_rows_selected(g-1)}else{o.add_item(d,a,false,null,g+e-1);o.set_rows_selected(g+e-1)}}else{if(m=="down"&&(g!=o.get_item_count()-1)){g=b[b.length-1];o.add_item(d,a,false,null,g+e+1);o.set_rows_selected(g+e+1)}}this._toggle_up_down_events()}}};rdx.bind_unbind_list.prototype._edit_btn_selected=function(){var a=this._available_table.get_selected_row_count();if(a==1){this._new_button_div.find("table").find("tbody").find("tr").find("td:eq(1)").find("a").removeClass("disable_link")}else{this._new_button_div.find("table").find("tbody").find("tr").find("td:eq(1)").find("a").addClass("disable_link")}};rdx.bind_unbind_list.prototype._available_table_selected=function(){var a=this._available_table.get_selected_row_count();var b=this._available_table.get_item_count();if(a!=this._available_table.get_item_count()){if(this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").text()==rdx.i18n.get_string("rdx.form_bind_unbind_list_deselect_label")){this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").text(rdx.i18n.get_string("rdx.form_bind_unbind_list_select_all_label"))}}};rdx.bind_unbind_list.prototype._set_height_property=function(){var a=parseInt(this._properties.height);a=a>parseInt(this._DEFAULT_PROPERTIES.height)?a-60:140;if(rdx.utils.is_defined(this._field.get_resource_name())&&rdx.utils.is_defined(this._field.get_add_view_name())){a=a-10}else{if(rdx.utils.is_defined(this._custom_input_field)&&this._custom_input_field){a=a-30}}return a};rdx.bind_unbind_list.prototype.render=function(){var F=$('<table role="presentation">').addClass("fixed").append($("<tbody>"));var b=$("<tr>");var P=$("<div>").addClass("configured_bkg").addClass("smooth_all_corner");var w=$("<div>").addClass("configured").addClass("table_parent");this._table_columns=[new rdx.table_column({key:"value",renderer_callback:new rdx.callback(this._get_row_data,[this._properties.width]),store_data:true}),new rdx.table_column({key:"_minus_icon",renderer_callback:new rdx.callback(this._get_minus_icon,[this]),text_align:"right",width:"15px",store_data:true})];this._configure_table=new rdx.table(w,this._table_columns,{row_editable:false,header:false,height:this._set_height_property()}).render();this._configure_table._div.css("overflow","visible");if(this._properties.add_order_buttons===true){this._configure_table.set_row_click_handler_callback(new rdx.callback(this,this._toggle_up_down_events))}var f=$("<div>");this._configured_table_header=$('<table role="presentation">').append("<tbody>");f.append(this._configured_table_header);var v=$("<tr>");var e=$("<td>").addClass("configured_count").addClass("configured_label");var J=rdx.i18n.get_string("rdx.search");var B=$("<input/>").attr({type:"text",placeholder:J}).addClass("search_list");var t=$("<label>").append('<span class="hide">Search</span>').append(B);var g=$("<td>").append(t);B.bind("keyup",{parent:w},this._filter_list_items);var M=$("<td>").addClass("remove_link");var K;if(rdx.utils.is_defined(this._field.get_properties())&&rdx.utils.is_defined(this._field.get_properties().remove_all_label)){K=$(document.createElement("a")).attr("href","#").append(rdx.i18n.get_string(this._field.get_properties().remove_all_label))}else{K=$(document.createElement("a")).attr("href","#").append(rdx.i18n.get_string("rdx.form_bind_unbind_list_remove_all_label"))}K.bind(rdx.events.CLICK,{table:this._configure_table,bind_unbind_list:this,link:K},function(Q){if(!Q.data.bind_unbind_list.get_field().is_read_only()){Q.data.bind_unbind_list._configure_table.set_all_rows_selected();Q.data.bind_unbind_list._add_remove_data(Q.data.table,Q.data.bind_unbind_list,"remove")}});M.append(K);if(this._properties.enable_search===true){v.append(e).append(g).append(M)}else{v.append(e).append(M)}this._configured_table_header.append(v);this._configured_table_header.addClass("header");P.append(f);P.append(w);if(this._properties.add_order_buttons===true){this._move_up_div=$("<button>").addClass("move_up move-btn").addClass("disable").attr("aria-label","Move up");this._move_up_div.bind(rdx.events.CLICK,{table:this._configure_table,bind_unbind_list:this},function(Q){if(!Q.data.bind_unbind_list.get_field().is_read_only()){Q.data.bind_unbind_list._move_up_down(Q.data.table,"up")}});this._move_down_div=$("<button>").addClass("move_down move-btn").addClass("disable").attr("aria-label","Move down");this._move_down_div.bind(rdx.events.CLICK,{table:this._configure_table,bind_unbind_list:this},function(Q){if(!Q.data.bind_unbind_list.get_field().is_read_only()){Q.data.bind_unbind_list._move_up_down(Q.data.table,"down")}});var C=$("<div>").addClass("up_down_buttons").append(this._move_up_div).append(this._move_down_div);P.append(C);P.addClass("orderable_rows")}this._update_configure_count();var s=$("<button>").addClass("move-btn move-r").attr({"aria-label":"Add the selected values",title:"Add the selected values"});var h=$("<button>").addClass("move-btn move-l").attr({"aria-label":"Remove the selected values",title:"Remove the selected values"});var o=$("<div>").addClass("button_table_parent").addClass("smooth_all_corner");o.append(s);o.append(h);var I=rdx.i18n.get_string("rdx.form_bind_unbind_list_add");if(rdx.utils.is_defined(this._field.get_properties())&&rdx.utils.is_defined(this._field.get_properties().available_button_label)){I=rdx.i18n.get_string(this._field.get_properties().available_button_label)}if(rdx.utils.is_defined(this._custom_input_field)&&this._custom_input_field){I=rdx.i18n.get_string("rdx.form_bind_unbind_list_custom_available")}this._add_button_div=$("<div>").addClass("add_button_div");this._add_button=rdx.dom_utils.get_element(rdx.form_constants.ICON_BUTTON).text(I).addClass("rdx_button initial_add");this._add_button_div.append(this._add_button);if(this._properties.show_add_button==false){this._add_button.hide()}var d=$("<div>").addClass("available_bkg").addClass("smooth_all_corner");if(this._properties.available_component!="table"){this._available_table_parent=$("<div>").addClass("tree_div smooth_all_corner bind_unbind_tree_div");d.addClass("tree_list");var E={checkbox:true,classNames:{checkbox:"dynatree-checkbox"},selectMode:3};if(rdx.utils.is_defined(this._properties.search_placeholder)){E.placeholder=this._properties.search_placeholder}this._available_table=new rdx.tree_component(this._available_table_parent,E)}else{this._available_table_parent=$("<div>").addClass("available").addClass("table_parent");this._available_table_columns=[new rdx.table_column({key:"value",renderer_callback:new rdx.callback(this._get_row_data,[this._properties.width]),store_data:true}),new rdx.table_column({key:"_plus_icon",renderer_callback:new rdx.callback(this._get_plus_icon,[this]),text_align:"right",width:"15px",store_data:true})];this._available_table=new rdx.table(this._available_table_parent,this._available_table_columns,{header:false,height:this._set_height_property()}).render();this._available_table.add_event_handler(rdx.events.ROW_SELECTION_CHANGED,new rdx.callback(this,this._available_table_selected))}var a=$("<td>").addClass("select_link");if(rdx.utils.is_defined(this._field.get_resource_name())&&(rdx.utils.is_defined(this._field.get_add_view_name())||(rdx.utils.is_defined(this._field.get_set_view_name())))){d.addClass("new_available_bkg");P.addClass("new_available_bkg");w.addClass("new_available");this._new_button_div=$("<div>");var A=$('<table role="presentation">').append("<tbody>");var L=$("<tr>");if(rdx.utils.is_defined(this._field.get_add_view_name())){var u=rdx.i18n.get_string("rdx.form_bind_unbind_list_new_btn");var z=rdx.form_utils.add_bind_unbind_link_image(this._field.get_add_view_name(),rdx.model_constants.ADD,this._field,u,"rdx.form_bind_unbind_list_new_btn_tooltip",this,this._view_link_map);L.append(z)}if(rdx.utils.is_defined(this._field.get_resource_name())&&rdx.utils.is_defined(this._field.get_set_view_name())){L.append("|");var u=rdx.i18n.get_string("rdx.form_bind_unbind_list_edit_btn");var m=rdx.form_utils.add_bind_unbind_link_image(this._field.get_set_view_name(),rdx.model_constants.SET,this._field,u,"rdx.form_bind_unbind_list_edit_btn_tooltip",this,this._view_link_map);L.append(m);m.find("a").addClass("disable_link");if(!this.get_field().is_read_only()){this._available_table.add_event_handler(rdx.events.ROW_SELECTION_CHANGED,new rdx.callback(this,this._edit_btn_selected))}}A.append(L);this._new_button_div.append(A);this._new_button_div.hide()}this._add_button.bind(rdx.events.CLICK,{list:this,available_table:d,middle_btn_table:o,configure_table:P},function(Q){if(!Q.data.list.get_field().is_read_only()){Q.data.list._add_button_div.parent().remove();Q.data.list._update_available_count();Q.data.available_table.parent().fadeIn(this.AVAILABLE_FADE_IN_TIME);Q.data.middle_btn_table.parent().fadeIn(this.AVAILABLE_FADE_IN_TIME);if(rdx.utils.is_defined(Q.data.list._field.get_resource_name())&&rdx.utils.is_defined(Q.data.list._field.get_add_view_name())){Q.data.list._new_button_div.fadeIn(this.AVAILABLE_FADE_IN_TIME)}if(rdx.utils.is_defined(Q.data.list._custom_input_field)&&Q.data.list._custom_input_field){Q.data.list._custom_input_text.addClass("shown")}}});var N=this._available_table;var H=$("<div>");this._available_table_header=$('<table role="presentation">').append("<tbody>");H.append(this._available_table_header);this._available_table_header.addClass("header");var D=$("<tr>");var G=rdx.i18n.get_string("rdx.form_bind_unbind_list_available");var B=$("<input/>").attr({type:"text",placeholder:J}).addClass("search_list");var t=$("<label>").append('<span class="hide">Search</span>').append(B);var g=$("<td>").append(t);B.bind("keyup",{parent:this._available_table_parent},this._filter_list_items);if(rdx.utils.is_defined(this._field.get_properties())&&rdx.utils.is_defined(this._field.get_properties().available_label)){G=rdx.i18n.get_string(this._field.get_properties().available_label)}var p=$("<td>").append(G).addClass("available_label");var q=$(document.createElement("a")).attr("href","#").append(rdx.i18n.get_string("rdx.form_bind_unbind_list_select_all_label"));q.bind(rdx.events.CLICK,{select:this._available_table,link:q,bind_unbind_list:this},function(Q){if(!Q.data.bind_unbind_list.get_field().is_read_only()){var R=Q.data.link.text();if(R==rdx.i18n.get_string("rdx.form_bind_unbind_list_select_all_label")){Q.data.select.set_all_rows_selected();if(rdx.utils.is_defined(Q.data.bind_unbind_list._new_button_div)){if(rdx.utils.is_defined(Q.data.bind_unbind_list._new_button_div.find("table").find("tbody").find("tr").find("td:eq(1)"))){Q.data.bind_unbind_list._edit_btn_selected()}}Q.data.link.text(rdx.i18n.get_string("rdx.form_bind_unbind_list_deselect_label"))}else{Q.data.select.set_all_rows_unselected();Q.data.link.text(rdx.i18n.get_string("rdx.form_bind_unbind_list_select_all_label"));if(rdx.utils.is_defined(Q.data.bind_unbind_list._new_button_div)){if(rdx.utils.is_defined(Q.data.bind_unbind_list._new_button_div.find("table").find("tbody").find("tr").find("td:eq(1)"))){Q.data.bind_unbind_list._edit_btn_selected()}}}Q.stopPropagation()}});a.append(q);this._available_table_header.append(D);if(this._properties.enable_search===true){this._available_table_header.find("tbody").find("tr").append(p).append(g).append(a)}else{this._available_table_header.find("tbody").find("tr").append(p).append(a)}d.append(H);d.append(this._available_table_parent);s.bind(rdx.events.CLICK,{table:N,bind_unbind_list:this},function(Q){if(!Q.data.bind_unbind_list.get_field().is_read_only()){Q.data.bind_unbind_list._add_remove_data(Q.data.table,Q.data.bind_unbind_list,"add")}});h.bind(rdx.events.CLICK,{table:this._configure_table,bind_unbind_list:this},function(Q){if(!Q.data.bind_unbind_list.get_field().is_read_only()){Q.data.bind_unbind_list._add_remove_data(Q.data.table,Q.data.bind_unbind_list,"remove")}});b.append($("<td>").append(d).addClass("td_style"));b.append($("<td>").append(o).addClass("max_width"));b.append($("<td>").append(P).addClass("td_style"));b.append($("<td>").append(this._add_button_div));F.append(b);var n=$("<div>").addClass(this._properties.class_names).height(this._properties.height).width(this._properties.width);this._wrapper=n;if(rdx.utils.is_defined(this._custom_input_field)&&this._custom_input_field){this._create_custom_input_field(n)}if(rdx.utils.is_defined(this._new_button_div)&&this._new_button_div){d.append(this._new_button_div);this._available_table_parent.addClass("new_available");var O=$("<div>");O.addClass("configured_table_increment");P.append(O)}n.append(F);d.parent().hide();o.parent().hide();this._configure_table.set_sort_info(0,rdx.SORT_ASCENDING);this._available_table.set_sort_info(0,rdx.SORT_ASCENDING);this._parent.append(n);if(this._field.is_read_only()){this.set_read_only()}if(this._properties.available_component!="table"){this._available_table.render();this._available_table_parent.bind(rdx.events.UPDATE_COUNT,{tree:this},function(Q){Q.data.tree._update_available_count()})}if(this._properties.expanded){this._add_button.trigger(rdx.events.CLICK)}return this};rdx.bind_unbind_list.prototype._filter_list_items=function(a){var g=a.data.parent;var e=$(this);var f=$.trim(e.val());var m=$(".table_body_table_div tr.table_row",g);for(var b=0;b<m.length;b++){var d=m[b];var h=$(".prose",d).html();var n=new RegExp(f,"i");var o=h.match(n);if(o){$(d).removeClass("hide")}else{$(d).addClass("hide")}}};rdx.bind_unbind_list.prototype._create_custom_input_field=function(a){this._custom_input_text=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("custom_field_textbox").attr("title",rdx.i18n.get_string("rdx.form_bind_unbind_list_custom_input_text"));this._custom_input_button=rdx.dom_utils.get_element(rdx.form_constants.ICON_BUTTON).html('<img src = "'+rdx.images.ADD_IMG+'"/>'+rdx.i18n.get_string("rdx.form_bind_unbind_list_add"));this._custom_input_button.addClass("custom_field_button");this._custom_input_button.bind(rdx.events.CLICK,{list:this},function(d){var o=d.data.list._custom_input_text.val().trim();var h=o.length==0?new Array():o.split(",");if(h.length>0){var t=new Array();var b=d.data.list.get_data();var u=rdx.utils.get_elements_not_in_second_array(h,b);var p=rdx.utils.get_elements_not_in_second_array(h,u);if(u.length>0&&rdx.utils.is_defined(d.data.list._field.get_formatter())){for(var n=0;n<u.length;n++){if(!d.data.list._field.get_formatter().update_input_map_data_items(u[n])){t.push(u[n])}}u=rdx.utils.get_elements_not_in_second_array(u,t)}if(u.length>0){var s=new Array();for(var g=0;g<u.length;g++){var e={};var f=u[g];e.value=f;u[g]=e;s.push([f])}d.data.list._configure_table.add_items(u,s);d.data.list._update_configure_count()}var q="";if(p.length>0){q+="Item(s) "+p.join(", ")+" are already configured \n"}if(t.length>0){q+="Item(s) "+t.join(", ")+" are invalid"}if(q.length>0){rdx.message_box.error(q)}}});a.append(this._custom_input_text);a.append(this._custom_input_button)};rdx.bind_unbind_list.prototype._get_columns_data_object=function(b){var f=[];for(var d=0;d<b.length;d++){var a={};var e=b[d];if(rdx.utils.is_array(b[d])&&b[d].length!=0){e=b[d][0]}a[this._COLUMN_VALUE_KEY]=e;f.push(a)}return f};rdx.bind_unbind_list.prototype.add_data_items=function(a){if(rdx.utils.is_not_defined(a)){return}this._configure_table.delete_all_items();this._available_table.delete_all_items();this._update_configure_count();var d=new Array(a.length);for(var b in a){d[b]=[a[b]]}if(this._properties.available_component!="table"){this._available_table.add_items(a)}else{this._available_table.add_items(this._get_columns_data_object(a),d)}this._update_available_count()};rdx.bind_unbind_list.prototype._add_items=function(b){var g=[b];this._configure_table.delete_all_items();this._configure_table.add_items(this._get_columns_data_object(b),g);this._update_configure_count();if(this._properties.available_component=="table"){var f=this._available_table.get_data();for(var e=0;e<b.length;e++){for(var d=0;d<f.length;d++){if(b[e]==f[d][this._COLUMN_VALUE_KEY]){this._available_table.set_rows_selected(d)}}}var h=this._available_table.get_selected_items_data();for(var a=0;a<h.length;a++){this._available_table.delete_item(h[a],[this._COLUMN_VALUE_KEY])}}else{this._available_table.delete_selected_item(b)}this._update_available_count()};rdx.bind_unbind_list.prototype.add_item=function(b){var a={};if(rdx.utils.is_array(b)&&b.length!=0){b=b[0]}a[this._COLUMN_VALUE_KEY]=b;this._configure_table.add_item(a);this._update_configure_count();this._update_available_count()};rdx.bind_unbind_list.prototype._update_configure_count=function(){var a=this._configure_table.get_rows_data().length;var b=rdx.i18n.get_string("rdx.form_bind_unbind_list_configured",{count:a});if(rdx.utils.is_defined(this._field.get_properties())&&rdx.utils.is_defined(this._field.get_properties().configured_label)){b=rdx.i18n.get_string(this._field.get_properties().configured_label,{count:a})}this._configured_table_header.find("tbody").find("tr").find("td:eq(0)").text(b);if(a==0||this._field.is_read_only()){this._configured_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").addClass("disable_link")}else{this._configured_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").removeClass("disable_link");rdx.form_utils.handle_component_show_error(this,false);this._parent.find(".rdx_error_container").addClass("hide")}if(this._properties.add_order_buttons==true){this._toggle_up_down_events()}};rdx.bind_unbind_list.prototype._update_available_count=function(){var a=this._available_table.get_rows_data().length;var b=rdx.i18n.get_string("rdx.form_bind_unbind_list_available",{count:a});if(rdx.utils.is_defined(this._field.get_properties())&&rdx.utils.is_defined(this._field.get_properties().available_label)){b=rdx.i18n.get_string(this._field.get_properties().available_label,{count:a})}this._available_table_header.find("tbody").find("tr").find("td:eq(0)").text(b);if(a==0||this._field.is_read_only()){this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").addClass("disable_link");this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").text(rdx.i18n.get_string("rdx.form_bind_unbind_list_select_all_label"))}else{this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").removeClass("disable_link")}};rdx.bind_unbind_list.prototype._get_available_items=function(){var b=[];var a=this._available_table.get_selected_items_data();for(var d=0;d<a.length;d++){b.push(a[d][this._COLUMN_VALUE_KEY])}return b};rdx.bind_unbind_list.prototype.set_data=function(a){if(rdx.utils.is_not_defined(a)){return}if(!rdx.utils.is_array(a)){return}this._add_items(a)};rdx.bind_unbind_list.prototype.get_data=function(a){if(rdx.utils.is_defined(a)){return this._get_available_items()}var e=[];var d=this._configure_table.get_data();for(var b=0;b<d.length;b++){e.push(d[b][this._COLUMN_VALUE_KEY])}return e};rdx.bind_unbind_list.prototype.get_available_data=function(){return this._get_available_items()};rdx.bind_unbind_list.prototype.get_component_type=function(){return rdx.form_constants.BIND_UNBIND_LIST};rdx.bind_unbind_list.prototype.get_field=function(){return this._field};rdx.bind_unbind_list.prototype.get_component=function(){return this._wrapper};rdx.bind_unbind_list.prototype.mask=function(){var a={position:"absolute",top:"25px"};rdx.mask.mask_component(this._parent,this.get_field().get_key(),a)};rdx.bind_unbind_list.prototype.unmask=function(){return rdx.mask.unmask_component(this._parent,this.get_field().get_key())};rdx.bind_unbind_list.prototype._multiple_selection=function(a){var b=this._configure_table.get_selected_row_index();if(a==1){this._move_up_div.removeClass("disable");this._move_up_div.bind(rdx.events.CLICK,{table:this._configure_table,bind_unbind_list:this},function(d){if(!d.data.bind_unbind_list.get_field().is_read_only()){d.data.bind_unbind_list._move_up_down(d.data.table,d.data.bind_unbind_list,"up",d);d.stopImmediatePropagation()}});this._move_down_div.removeClass("disable");this._move_down_div.bind(rdx.events.CLICK,{table:this._configure_table,bind_unbind_list:this},function(d){if(!d.data.bind_unbind_list.get_field().is_read_only()){d.data.bind_unbind_list._move_up_down(d.data.table,d.data.bind_unbind_list,"down",d);d.stopImmediatePropagation()}})}else{this._move_up_div.addClass("disable");this._move_down_div.addClass("disable")}if(b==0){this._move_up_div.addClass("disable")}if(b==this._configure_table.get_item_count()-1){this._move_down_div.addClass("disable")}};rdx.bind_unbind_list.prototype._toggle_up_down_events=function(){var b=this._configure_table.get_selected_row_count();var e=this._configure_table._get_selected_rows();var a=new Array();for(var d=0;d<b;d++){a[d]=e[d].rowIndex}if(b>0){if(a[0]==0){this._move_up_div.addClass("disable")}else{this._move_up_div.removeClass("disable")}if(a[a.length-1]==this._configure_table.get_item_count()-1){this._move_down_div.addClass("disable")}else{this._move_down_div.removeClass("disable")}}else{this._move_up_div.addClass("disable");this._move_down_div.addClass("disable")}};rdx.bind_unbind_list.prototype.toggle_read_only=function(a){if(a){this.set_edittable()}else{this.set_read_only()}};rdx.bind_unbind_list.prototype.set_read_only=function(){$(this._add_button).prop("disabled",true);this._add_button.addClass("form_field_disabled");this._configure_table.get_table_parent().prop("disabled",true);this._configure_table.get_table_parent().addClass("form_field_disabled");this._available_table_parent.prop("disabled",true);this._available_table_parent.addClass("form_field_disabled");if(rdx.utils.is_defined(this._field.get_resource_name())&&rdx.utils.is_defined(this._field.get_add_view_name())){this._new_button_div.find("table").find("tbody").find("tr").find("td:eq(0)").find("a").addClass("disable_link")}if(rdx.utils.is_defined(this._field.get_resource_name())&&rdx.utils.is_defined(this._field.get_set_view_name())){this._new_button_div.find("table").find("tbody").find("tr").find("td:eq(1)").find("a").addClass("disable_link")}this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").addClass("disable_link");this._configured_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").addClass("disable_link")};rdx.bind_unbind_list.prototype.set_edittable=function(){$(this._add_button).removeAttr("disabled");this._add_button.removeClass("form_field_disabled");this._configure_table.get_table_parent().prop("disabled",true);this._configure_table.get_table_parent().removeClass("form_field_disabled");this._available_table_parent.removeAttr("disabled");this._available_table_parent.removeClass("form_field_disabled");if(rdx.utils.is_defined(this._field.get_resource_name())&&rdx.utils.is_defined(this._field.get_add_view_name())){this._new_button_div.find("table").find("tbody").find("tr").find("td:eq(0)").find("a").addClass("disable_link")}if(rdx.utils.is_defined(this._field.get_resource_name())&&rdx.utils.is_defined(this._field.get_set_view_name())){this._new_button_div.find("table").find("tbody").find("tr").find("td:eq(1)").find("a").removeClass("disable_link")}this._available_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").removeClass("disable_link");this._configured_table_header.find("tbody").find("tr").find("td:eq(1)").find("a").removeClass("disable_link")};rdx.edittable_list=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={height:"100",class_names:"edittable_list",check_for_duplicate:true,data_validate_callback:null,mandatory:false,component_type:rdx.form_constants.TEXT_BOX,type:"VALSTR",view:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this._properties.mandatory=a.is_mandatory();this._table=null;this._html_table=null;this._field=a;this._input_textfield=null;this._input_type_component=null};rdx.edittable_list.prototype._get_close_icon=function(b,d){var a=$("<button>").addClass("close").attr({"aria-label":"Remove",title:"Remove"});a.bind(rdx.events.CLICK,{icon:a,table:d._table,edittable_list:d},function(e){if(!e.data.edittable_list.get_field().is_read_only()){e.data.table._delete_row(e.data.icon.parent().parent()[0].rowIndex,true)}});return a};rdx.edittable_list.prototype.get_row_data=function(a){if(rdx.utils.is_string(a)){return rdx.utils.html_encode(a)}return rdx.utils.html_encode(a.value)};rdx.edittable_list.prototype.render=function(){this._table_parent=$("<div>").addClass("table_parent");this._table_columns=[new rdx.table_column({key:"value",store_data:true,renderer_callback:new rdx.callback(this.get_row_data)}),new rdx.table_column({key:"_close_icon",store_data:true,renderer_callback:new rdx.callback(this._get_close_icon,[this]),text_align:"right",width:"15px"})];if(rdx.utils.is_defined(this._properties.view)){this._table_columns.push(new rdx.table_column({key:"selected_entity_data_item",hidden:true,store_data:true}))}this._table=new rdx.table(this._table_parent,this._table_columns,{header:false}).render();$(".table",this._table._parent).attr("role","presentation");var e=$("<table role='presentation'>").append($("<tbody>"));var b=$("<div>").addClass("input_widget");e=b;this._add_button=rdx.dom_utils.get_element(rdx.form_constants.ICON_BUTTON);this._add_button.attr({"aria-label":"Add",title:"Add"});var a=$("<span>").addClass("editable_list_text");this._input_type_component=rdx.component_helper.get_component(this._properties.component_type,a,new rdx.form_field({input_type:this._properties.component_type})).render();this._input_textfield=this._input_type_component.get_component();b.append(a);b.append($("<span>").addClass("editable_list_button").append(this._add_button));this._add_button.bind(rdx.events.CLICK,{edittable_list:this},function(o){if(o.data.edittable_list._input_type_component.get_data().length<=0){rdx.message_box.error(rdx.i18n.get_string("rdx.edittable_list_enter_value"),new rdx.callback(function(q){q._input_textfield.focus()},[o.data.edittable_list]));return}else{var f=o.data.edittable_list.get_field();var p=o.data.edittable_list._properties.type;var n=o.data.edittable_list._input_type_component.get_data();var m=o.data.edittable_list._validate_item(n,p);if(rdx.utils.is_defined(o.data.edittable_list._properties.data_validate_callback)){var g=o.data.edittable_list._get_items();if(!o.data.edittable_list._properties.data_validate_callback.call_back([o.data.edittable_list._input_type_component.get_data(),g])){rdx.message_box.error(rdx.i18n.get_string("rdx.edittable_list_invalid_entry_input",{duplicate_entry:o.data.edittable_list._input_type_component.get_data()}),new rdx.callback(function(q){q._input_textfield.focus()},[o.data.edittable_list]));return}}if(o.data.edittable_list._properties.check_for_duplicate){var g=o.data.edittable_list._get_items();for(var h=0;h<g.length;h++){if(g[h]==o.data.edittable_list._input_type_component.get_data()){rdx.message_box.error(rdx.i18n.get_string("rdx.edittable_list_duplicate_entry_input",{duplicate_entry:o.data.edittable_list._input_type_component.get_data()}),new rdx.callback(function(q){q._input_textfield.focus()},[o.data.edittable_list]));return}}}}if(m){o.data.edittable_list._add_item({value:o.data.edittable_list._input_type_component.get_data()})}});if(rdx.utils.is_defined(this._properties.view)){this._arrow_container=$("<span>").addClass("arrow").append("&nbsp;");b.append(this._arrow_container);this._arrow_container.bind(rdx.events.CLICK,{that:this},function(g){var h=g.data.that;var f=rdx.view_utils.get_modified_view_defn_for_entity_choose(h._properties.view,h._properties);h._base_view=rdx.view_utils.show_view_in_slider(f,new rdx.callback(),null,null,false,null,new rdx.callback(h,h.store_data));h._base_view.set_add_entity_select_btn(true);h._base_view.prepare_view()})}var d=$("<div>").addClass(this._properties.class_names);d.append(e);d.append(this._table_parent);this._table_parent.height(this._properties.height-40);d.height(this._properties.height);this._parent.append(d);if(this._field.is_read_only()){this.set_read_only()}return this};rdx.edittable_list.prototype.store_data=function(d){var b=null;if(rdx.utils.is_defined(this._base_view)){b=this._base_view.get_view_context().get_data(rdx.view_constants.data_selection_param.SELECTED)}var a=[];if(rdx.utils.is_defined(b)){for(var f=0;f<b.length;f++){var e=$.extend(true,{},b[f]);e.value=b[f]["name"];e.selected_entity_data_item={data_selected:true,name:b[f]["name"]};a.push(e)}this._add_items(a)}};rdx.edittable_list.prototype._add_items=function(a){this._table.add_items(a)};rdx.edittable_list.prototype._add_item=function(a){this._table.add_item(a);this._input_type_component.set_data("");this._input_textfield.focus()};rdx.edittable_list.prototype._get_items=function(){var b=[];var a=this._table.get_data();var f=true;for(var e=0,d=a.length;e<d;e++){var g=a[e];if(!rdx.utils.is_string(g)){if(rdx.utils.is_defined(this._properties.view)&&rdx.utils.is_defined(g.selected_entity_data_item)){b.push(g.selected_entity_data_item)}else{if(rdx.utils.is_defined(g.value)){b.push(g.value)}}}}return b};rdx.edittable_list.prototype.set_data=function(e){var f=null;if(typeof(e)=="string"){f=[e]}else{f=e}var a=[];for(var d=0,b=f.length;d<b;d++){var g=f[d];if(rdx.utils.is_string(g)){g={value:g}}a.push(g)}return this._add_items(a)};rdx.edittable_list.prototype.get_data=function(){return this._get_items()};rdx.edittable_list.prototype.get_component_type=function(){return rdx.form_constants.EDITTABLE_LIST};rdx.edittable_list.prototype.get_field=function(){return this._field};rdx.edittable_list.prototype.get_component=function(){return this._input_textfield};rdx.edittable_list.prototype.toggle_read_only=function(a){if(a){this.set_edittable()}else{this.set_read_only()}};rdx.edittable_list.prototype.set_read_only=function(){$(this._add_button).prop("disabled",true);this._input_textfield.prop("disabled",true);this._add_button.addClass("form_field_disabled");this._input_textfield.addClass("form_field_disabled");this._table_parent.prop("disabled",true);this._table_parent.addClass("form_field_disabled")};rdx.edittable_list.prototype.set_edittable=function(){$(this._add_button).removeAttr("disabled");this._input_textfield.removeAttr("disabled");this._add_button.removeClass("form_field_disabled");this._input_textfield.removeClass("form_field_disabled");this._table_parent.removeAttr("disabled");this._table_parent.removeClass("form_field_disabled")};rdx.edittable_list.prototype._validate_item=function(a,b){return this._field.get_form_holder().get_form().validate_form_field(this._field,null,a,b)};rdx.drag_drop_editor=function(a,b){this._parent=a;this._field=b;this._DEFAULT_EDITOR_PROPERTY={top_panel_info:null,left_panel_info:null,right_panel_info:null,editor_title:null,help_description:null,resource_name:null,save_editor_data_submit_handler:null,readonly_help_description:null,save_as_template:true,allow_variables:true,allow_protocols:true,enable_operaitons:true,VARIABLE_MATCH_REGEX:/\$[^"',\s><$]+\$/g};this._properties=$.extend(true,this._DEFAULT_EDITOR_PROPERTY,b.get_properties());this._save_editor_fields=[];this._top_panel_fields=[];this._dialog_pop_up_fields={};this._variables_obj={};this._advanced_section_containers={};this._configurationSource=this._properties.left_panel_info.default_configuration_source};rdx.drag_drop_editor.prototype.render=function(){if(rdx.utils.is_defined(this._properties.top_panel_info)){this.render_editor_top_panel(this._parent,this._properties.top_panel_info)}this._drag_drop_editor_parent=$("<div>").addClass("drag_drop_editor_parent drag_drop_container");var d=$("<div>").addClass("editor_title_div");var b=rdx.i18n.get_string(this._properties.editor_title);d.append($("<span>").addClass("title").append(b));var a=$("<div>").addClass("drag_drop_editor_container");if(this._properties.allow_variables){this._variable_preview_link=$("<button>").attr("aria-label","Preview Variables").addClass("rdx_button").text("Preview Variables").appendTo(d);this._variable_preview_link.bind(rdx.events.CLICK,{drag_drop_editor:this,button:this._variable_preview_link},this._render_variables_preview_dialog)}this._editor_clear_link=$("<button>").attr("aria-label","Clear Content").addClass("rdx_button").text("Clear Content").appendTo(d);this._source_info_container=$("<div>").addClass("source_info_container").css("height",480);this.render_source_information(this._source_info_container);this._render_drop_editor_area();this._drag_drop_editor_parent.append(d);a.append(this._source_info_container);a.append(this._editor_area_container);this._drag_drop_editor_parent.append(a);if(this._properties.save_as_template===true){this._render_save_editor_content(this._drag_drop_editor_parent)}this._parent.append(this._drag_drop_editor_parent);this._attach_clear_editor_event_handler(this._editor_clear_link);this.clearEditor()};rdx.drag_drop_editor.prototype.render_editor_top_panel=function(o,f){var b=f.resource_name;var g=rdx.utils.get_resource(b);if(this._properties.is_left_panel_dependent===true){var t=f.selection_field;for(var q in t){var e=rdx.form_utils.get_form_field_properties(t[q],g[q],null,q,null);if(rdx.utils.is_defined(e.properties.change_handler_callback)){var s=e.properties.change_handler_callback;var h={left_panel:this._properties.left_panel_info,callback:new rdx.callback(this,this.reload_editor_left_panel)};s.params=[h]}f.form_fields=$.extend({},f.form_fields,t)}}var m=f.form_fields;var a=$("<div>").addClass("drag_drop_editor_top_panel drag_drop_container");for(var n in m){var p=$("<div>").addClass("editor_top_panel_field");var d=g.properties;this.render_form_components(m[n],d[n],n,p,null,this._top_panel_fields);a.append(p)}this._parent.append(a)};rdx.drag_drop_editor.prototype.render_source_information=function(b){var d=this._properties.left_panel_info;var a=new rdx.drag_source_info(this,b,d);a.render()};rdx.drag_drop_editor.prototype._render_drop_editor_area=function(){this._editor_area_container=$("<div>").addClass("editor_area_container").css("height",480);this.setEditorAttribute({"data-empty":true});this.protocol_separator=$("<div>").addClass("editor_protocol_separator").hide();this._editor_area_container.append(this,this.protocol_separator);this._editor_commands_container=$("<div>").addClass("editor_commands_container");this._editor_area_container.droppable({greedy:true});var a=this;this._editor_area_container.bind("drop",{parent:this._editor_commands_container,protocol_separator:this.protocol_separator,drop_editor:a},this._fetch_configuration_commands);this._editor_area_container.bind(rdx.events.CLICK,{drag_drop_editor:this},this._editor_click_handler);this._editor_area_container.append(this._editor_commands_container)};rdx.drag_drop_editor.prototype._render_save_editor_content=function(t){var D={};var z=$("<div>").addClass("save_info_checkbox").appendTo(t);var C=$("<div>").addClass("save_info_template_div").appendTo(t);C.addClass("hidden");C.attr("aria-hidden","true");var q={resource_name:"configuration_template",form_fields:{save_as_template:{input_type:rdx.form_constants.CHECK_BOX,label:"Save as Configuration Template",formatter:{map:{"true":"true","false":"false"}}},name:{label:"Configuration Template Name"},override_if_exists:{input_type:rdx.form_constants.CHECK_BOX,label:"Overwrite if exists",formatter:{map:{"true":"true","false":"false"}}}},field_css_properties:{save_as_template:{component_wrapper:z,fieldcell_classname:"rdx_check_box_label_container input_label"},name:{component_wrapper:C},override_if_exists:{component_wrapper:C,fieldcell_classname:"rdx_check_box_label_container input_label"}},button_panel:{blue_button_label:"Save",grey_button_label:"Cancel"}};var d=rdx.utils.get_resource(q.resource_name);var o=q.form_fields;var e=q.field_css_properties;var g=q.button_panel;var u=g.blue_button_label;var f=g.grey_button_label;var v=g.blue_button_class_name;var B=g.grey_button_class_name;for(var n in o){var a=e[n].component_wrapper;var w;if(rdx.utils.is_defined(e[n].fieldcell_classname)){w=e[n].fieldcell_classname}else{w=""}this.render_form_components(o[n],d[n],n,a,w,this._save_editor_fields)}var h=$("<div>").addClass("drag_editor_submit_button_panel").appendTo(C);var m=rdx.utils._get_button(rdx.i18n.get_string(u),null,"drag_editor_submit_button blue_button");var A=rdx.utils._get_button(rdx.i18n.get_string(f),null,"drag_editor_submit_button grey_button");h.append(m);h.append(A);var s=this._save_editor_fields[0];var b=s._element;var p=this;A.bind(rdx.events.CLICK,{check_box_component_info:s},function(){s.set_data("false");C.addClass("hidden");C.attr("aria-hidden","true")});m.bind(rdx.events.CLICK,{check_box_component_info:s},function(E){p._save_configuration_commands_as_template(C,s,q.resource_name)});b.bind(rdx.events.CHANGE,{check_box_component_info:s},function(E){if(E.data.check_box_component_info.get_data()===true||E.data.check_box_component_info.get_data()=="true"){C.removeClass("hidden");C.removeAttr("aria-hidden")}else{C.addClass("hidden");C.attr("aria-hidden","true")}})};rdx.drag_drop_editor.prototype.get_component_type=function(){return rdx.form_constants.DRAG_DROP_EDITOR};rdx.drag_drop_editor.prototype._save_configuration_commands_as_template=function(b,n,m){var p=this.fetch_configuration_editor_commands($(".editor_commands_block",this._editor_commands_container),true);var g=this._get_form_fields_data(this._top_panel_fields);var a=this._save_editor_fields[1].get_data();var e=this._save_editor_fields[2].get_data();var o=g.device_family;if(o==null||o==""){o="ns"}var u={templateName:a,overwrite:e};var h={name:a,description:a,device_family:o};if(rdx.utils.is_not_empty(p.undefined_variables)){var t="rdx.undefined_variable_error";if(this._properties.allow_variables===false){t="rdx.undefined_template_variable_error"}var s=rdx.i18n.get_string(t,{field_label:rdx.i18n.get_string(p.undefined_variables)});var d=$("<span>").text(s);rdx.page.show_notification(d,rdx.ERROR,true);return}delete p.undefined_variables;var q=$.extend(true,{},h,p);if(rdx.utils.is_defined(this._properties.save_editor_data_submit_handler)){q=this._properties.save_editor_data_submit_handler.call_back([q])}if(rdx.utils.is_empty(p)||rdx.utils.is_object_empty(p)){rdx.page.show_notification(rdx.i18n.get_string("rdx.drag_drop_editor.empty_editor_value"),rdx.ERROR,true);return}var f=null;if(e||e=="true"){f="save"}rdx.model.post(rdx.utils.get_resource(m),new rdx.callback(null,function(v,A,w,z){z.fill_drag_source_list(v,z.getDefaultConfigurationSource(),u);A.set_data(false);w.addClass("hidden");w.attr("aria-hidden","true");z._save_editor_fields[1].set_data("");z._save_editor_fields[2].set_data("")},[n,b,this]),q,new rdx.callback(null,function(v){rdx.page.show_notification(rdx.utils.html_encode(v),rdx.ERROR,true)}),f)};rdx.drag_drop_editor.prototype._attach_clear_editor_event_handler=function(a){var b=this;a.bind(rdx.events.CLICK,{},function(d){b.remove_configuration_commands();b.setEditorAttribute({"data-empty":true});b._editor_area_container.trigger("click",[true]);b.update_index_to_command_lines()})};rdx.drag_drop_editor.prototype.render_form_components=function(d,b,p,q,f,g,n){var h=rdx.form_utils.get_form_field_properties(d,b,null,p,null);var m=new rdx.form_field(h);var s=m.get_label();if(m.is_mandatory()){s+="*"}if(m.is_hidden()){q.hide()}var a=$("<div>").attr("fieldfor",s);var o=rdx.component_helper.get_component(m.get_input_type(),a,m);o.render();if(n&&o.set_data){o.set_data(n)}g.push(o);if(m.get_input_type()=="checkbox"){if(rdx.utils.is_defined(s)&&rdx.utils.is_not_empty(s)){o.get_label_container().text(s);o.get_component().attr("id",h.key);o.get_label_container().attr("for",h.key)}q.append(a)}else{var e=$("<label>").append(s);if(rdx.utils.is_defined(f)){e.addClass(f)}if(rdx.utils.is_defined(s)&&rdx.utils.is_not_empty(s)){q.append(e);e.append(a)}else{q.append(a)}}return o};rdx.drag_drop_editor.prototype._fetch_configuration_commands_add_button=function(a){var b={draggable:$(a.target.parentElement)};a.data.drop_editor._fetch_configuration_commands(a,b);a.preventDefault()};rdx.drag_drop_editor.prototype._fetch_configuration_commands=function(b,e){if(e.draggable.hasClass("draggable-templ")){if(e.draggable.attr("data-dropped")){}else{var g=b.data.drop_editor;var d=(e.draggable).data("data_fetch_info");if(g.isConfigurationSourceTemplate(g.getConfigurationSource())&&g.isEditorModeReadOnly()){rdx.message_box.error(rdx.i18n.get_string("rdx.drag_drop_editor_readonly_mode_modify_error"));b.preventDefault();b.stopPropagation();return}if(d.read_only_mode){g.clearEditor()}var f=d.resource_name;if(rdx.utils.is_defined(d.resource_data)){g._render_fetched_editor_commands(d.resource_data,f,b,e)}else{var a=d.url_params;rdx.model.get(rdx.utils.get_resource(f),a,new rdx.callback(g,g._render_fetched_editor_commands,[f,b,e]))}}}};rdx.drag_drop_editor.prototype._fetch_commands_from_nitro_response=function(e){var a=e.commands;var d=[];if(rdx.utils.is_defined(a)&&a.length===0){d=e.commands_str?$.trim(e.commands_str).split("\n"):[]}else{if(rdx.utils.is_defined(e.response)&&e.response.length>0){var g=$.trim(e.response);d=g.split("\n");if(d[0].indexOf("#NS")===0&&d[1].indexOf("# Last modified")===0){d.splice(0,2);if($.trim(d[d.length-1])=="Done"){d.pop()}}}}if(d.length>0){a=[];for(var f=0;f<d.length;f++){var b={protocol:"SSH",command:d[f]};a.push(b)}}return a};rdx.drag_drop_editor.prototype._fetch_variables_from_nitro_response=function(a){var d=a.variables;var b={};$.each(d,function(e,f){f.name=rdx.utils.html_decode(f.name);f.display_name=rdx.utils.html_decode(f.display_name);b["$"+f.name+"$"]=f});return b};rdx.drag_drop_editor.prototype._replace_converted_variable_with_html=function(b){var a=this;b=b.replace(this._properties.VARIABLE_MATCH_REGEX,function(e,f,d){if(e.indexOf(">")==-1&&e.indexOf("&gt;")<0&&e.indexOf("&lt;")<0){if(a._variables_obj[e]===undefined){a._variables_obj[e]={name:e.slice(1,-1),display_name:e.slice(1,-1),type:"text_field"}}return'<span class="green_tag variable_container" tabindex=0 contenteditable="false">'+e+"</span><span/>"}else{return e}});return b};rdx.drag_drop_editor.prototype._render_copy_paste_commands=function(e,a){this.setEditorAttribute({"data-empty":false});a=a.replace(/&nbsp;/gi," ").replace(/</gi,"&lt;");a=a.replace(/>/gi,"&gt;");commands_list_array=[];commands_list_array=a.split("\n");if(commands_list_array.length>1){this.render_command_lines_onpaste(commands_list_array,e)}else{var d=window.getSelection().getRangeAt(0);var f=this._replace_converted_variable_with_html(commands_list_array[0]);var b=$("<span>"+f+"&nbsp</span>");d.insertNode(b[0]);$(".green_tag, .blue_tag",b).bind("click keydown",{drag_drop_editor:this},this._render_variables_dialog);$(".green_tag, .blue_tag",b).bind("keyup",function(g){g.stopPropagation();g.preventDefault()});this.add_tooltip_for_variables(b);this.setEndOfContenteditable(b[0])}};rdx.drag_drop_editor.prototype.add_tooltip_for_variables=function(a){var d=$(".green_tag, .blue_tag",a);for(var b=0;b<d.length;b++){this.add_tooltip($(d[b]),"Click to edit")}};rdx.drag_drop_editor.prototype.render_command_lines_onpaste=function(b,e){var a=this._replace_converted_variable_with_html(b[0]);e[0].innerHTML=e[0].innerHTML+$.trim(a);this.add_tooltip_for_variables(e);for(k=1;k<b.length;k++){var d=e.closest(".editor_commands_lines").clone();e=this.break_command_content_to_next_line(e[0],d,b[k]);this._attach_key_listeners(e);this.add_tooltip_for_variables(e)}this.update_index_to_command_lines()};rdx.drag_drop_editor.prototype._render_fetched_editor_commands=function(d,a,b,h,f){var g=rdx.utils.get_formatted_response(rdx.utils.get_formatted_response(d)[a]);var p=this._fetch_commands_from_nitro_response(g);var m=f?this._fetch_variables_from_nitro_response(f):this._fetch_variables_from_nitro_response(g);this._variables_obj=$.extend(true,m,this._variables_obj);var e=this.is_readonly_template(h,f);var o=f?f.parent:b.data.parent;if(this._properties.allow_protocols){this.protocol_separator.show()}if(rdx.utils.is_defined(h)){h.draggable.attr("data-dropped",true)}if(this.isEditorEmpty()){this.removeEditorAttribute("data-empty");var q=$(".editor_help_info_placeholder",o);if(q.length>0){q.closest(".editor_commands_block").remove()}}var n=this._render_command_lines(p,e,o,h,f);if(rdx.utils.is_defined(g.category)){n.attr("commands_category",g.category)}this.update_index_to_command_lines()};rdx.drag_drop_editor.prototype._render_command_lines=function(o,f,q,m,g,p){if(rdx.utils.is_not_defined(p)){p=$("<div>").addClass("editor_commands_block ").appendTo(q);this._attach_drag_drop_to_command_lines()}if(f){this._editor_area_container[0].setAttribute("data-readonly",true);this._editor_area_container.addClass("read_only_mode background_readonly")}for(var b=0;b<o.length;b++){var n=$("<div>").addClass("editor_commands_lines ").appendTo(p);if(this._properties.allow_protocols){var a=this.render_protocol_list();a.find("#editor_protocols_list").val(o[b].protocol);var d=$('<button class="delete-line">').attr({"aria-label":"Delete Command",title:"Delete Command"});d.on("click keydown",{that:this},this.remove_command_line);n.append(a).append(d)}var h=$("<div>").addClass("editor_statements").attr("contenteditable",true).appendTo(n);var e=rdx.utils.html_decode(o[b].command);e=e.replace(/</gi,"&lt;");if(this._properties.allow_variables===true){e=this._replace_converted_variable_with_html(e)}h.append(e);if(f){h.attr({contenteditable:false});a.addClass("disable_pointer_events")}this._attach_key_listeners(h);this.add_tooltip_for_variables(h)}if(rdx.utils.is_defined(g)){this._render_commands_block_controller(p,this.protocol_separator)}else{if(rdx.utils.is_defined(m)){this._render_commands_block_controller(p,this.protocol_separator,true,m.draggable)}}p.find(".blue_tag, .green_tag").bind("click keydown",{drag_drop_editor:this},this._render_variables_dialog);p.find(".blue_tag, .green_tag").bind("keyup",function(s){s.stopPropagation();s.preventDefault()});return p};rdx.drag_drop_editor.prototype._render_editor_protocols=function(){var g=document.createElement("select");var d=["SSH","SFTP","SCP"];for(var b=0;b<d.length;b++){var a=document.createElement("OPTION");var e=d[b];a.setAttribute("value",e);var f=document.createTextNode(e);a.appendChild(f);g.append(a)}return g};rdx.drag_drop_editor.prototype.reload_editor_left_panel=function(){if(this._source_info_container.length>0){this._source_info_container.empty()}this.activateAndClearEditorArea();this.render_source_information(this._source_info_container)};rdx.drag_drop_editor.prototype.renderHelpDescription=function(b){if($(".help_description_div",this._source_info_container).length===0&&$(".drag_source_list_container",this._source_info_container).length===0){var d=$(".editor_templates_list_container",this._source_info_container);var a=rdx.i18n.get_string(this._properties.help_description);if(b&&this._properties.readonly_help_description){a=rdx.i18n.get_string(this._properties.readonly_help_description)}$("<div>").addClass("help_description_div").append(a).appendTo(d);$("<div>").addClass("drag_source_list_container").appendTo(d)}};rdx.drag_drop_editor.prototype._render_draggable_templates_list=function(e,h,d,g){e=rdx.utils.get_formatted_response(e);var f=this.getConfigurationSourceResourceName(h);if(this.isConfigurationSourceTemplate(h)||this.isConfigurationSourceInbuiltTemplate(h)){this.renderConfigurationTemplates(e[f],f,h,d,g)}else{e=this.isConfigurationSourceInstances(h)?e[f][0]:e;var b={};if(e.data_fetch_info){b=e.data_fetch_info}else{b=this._getTemplateDraggableData(e,h,f,d,g)}var m=$("<div>").addClass("ui-draggable draggable-templ").appendTo($(".drag_source_list_container",this._source_info_container));var a=this._getDraggableTemplateName(e,h);$("<span>").addClass("draggable_template_name").attr("title",a).append(a).appendTo(m);this.attachDraggableEventtoTemplates(m,b)}};rdx.drag_drop_editor.prototype.renderConfigurationTemplates=function(b,e,d,n,s){var g=this;if(rdx.utils.is_defined(n)&&n.overwrite===true){this._removeDuplicateDraggableTemplate(n.templateName)}for(var h=0;h<b.length;h++){if(this.isConfigurationSourceTemplate(d)&&(b[h].is_inbuilt===true||b[h].is_inbuilt=="true")){continue}var m=$("<div>").addClass("ui-draggable draggable-templ").appendTo($(".drag_source_list_container",this._source_info_container));var o=$("<span>").addClass("draggable_template_name").attr("title",b[h].description).append(b[h].name).appendTo(m);var f=this._getTemplateDraggableData(b[h],d,e,n,s);var t=0;var q=this;if(this._properties.enable_operaitons==true){var p=$("<button>").addClass("add_template").appendTo(m);p.attr({"aria-label":"Add Template",title:"Add Template"});p.bind(rdx.events.CLICK,{parent:this._editor_commands_container,protocol_separator:this.protocol_separator,drop_editor:q},this._fetch_configuration_commands_add_button);p.focus(function(v){$(v.target).closest(".draggable-templ").addClass("focus")});p.blur(function(v){$(v.target).closest(".draggable-templ").removeClass("focus")});if(this.isConfigurationSourceTemplate(d)){var u=$("<button>").addClass("delete_template").appendTo(m);u.attr({"aria-label":"Delete Template",title:"Delete Template"});u.bind(rdx.events.CLICK,{id:b[h].id,resource_name:e,draggable_template_container:m,template_name:b[h].name,click:t,that:this},this._deleteCustomTemplates);u.bind(rdx.events.DOUBLE_CLICK,{},function(v){v.preventDefault();v.stopPropagation()});u.focus(function(v){$(v.target).closest(".draggable-templ").addClass("focus")});u.bind(rdx.events.BLUR,{draggable_template_container:m,that:this},this._deleteCustomTemplatesRemoveFocus)}if(this._properties.enable_download_template===true){var a=$("<button>").addClass("download_template").appendTo(m);a.attr({"aria-label":"Download Template",title:"Download Template"});a.bind(rdx.events.CLICK,{template:b[h]},function(v){g._properties.export_template_callback.call_back([v.data.template]);v.preventDefault();v.stopPropagation()});a.focus(function(v){$(v.target).closest(".draggable-templ").addClass("focus")});a.blur(function(v){$(v.target).closest(".draggable-templ").removeClass("focus")})}}this.attachDraggableEventtoTemplates(m,f)}};rdx.drag_drop_editor.prototype._deleteCustomTemplatesRemoveFocus=function(b){$(b.target).closest(".draggable-templ").removeClass("focus");if($(b.target).closest(".draggable-templ").hasClass("confirm_delete")){var a=b.data.that;var d=$(this);var e=b.data.draggable_template_container;d.text("");e.removeClass("confirm_delete");d.removeClass("confirm_delete");d.siblings(".draggable_template_name").css({"padding-right":"25px"});if($.contains(a._parent,e)){e.draggable("option","disabled",false)}d.css("height","15px")}};rdx.drag_drop_editor.prototype._deleteCustomTemplates=function(b){var a=b.data.that;b.stopPropagation();b.data.click++;var e=b.data.draggable_template_container;var d=$(this);if(b.data.click===1){timer=setTimeout(function(){b.data.click=0;var m=function(){d.text("");e.removeClass("confirm_delete");d.removeClass("confirm_delete");d.siblings(".draggable_template_name").css({"padding-right":"25px"});if($.contains(a._parent,e)){e.draggable("option","disabled",false)}};if(d.hasClass("confirm_delete")){var n=function(o,p){e.remove();rdx.page.show_notification('Template "'+p+'" deleted successfully.',rdx.SUCCESS)};var h=function(o){rdx.page.show_notification(rdx.utils.html_encode(o),rdx.ERROR,true);m()};e.draggable("option","disabled",true);rdx.model.remove(rdx.utils.get_resource(b.data.resource_name),new rdx.callback(n,[b.data.template_name]),{id:b.data.id},new rdx.callback(h,[b.data.template_name]),null,null)}else{d.addClass("confirm_delete").append(rdx.i18n.get_string("rdx.confirm_delete"));e.addClass("confirm_delete");var g=d.outerWidth()+"px";var f=e.height()+"px";d.css("height",f);d.siblings(".draggable_template_name").css({"padding-right":g});$(document.body).bind("click",function(o){o.stopPropagation();if(!$.contains(e[0],o.target)||($(o.target).hasClass("draggable_template_name"))){m();d.css("height","15px");$(document.body).unbind(o)}})}},700)}else{clearTimeout(timer);b.data.click=0}b.preventDefault()};rdx.drag_drop_editor.prototype._removeDuplicateDraggableTemplate=function(b,f){var d=$(".ui-draggable",this._source_info_container);var e=this;var a=f?f:this.getConfigurationSource();$.each(d,function(h,g){var m=$(".draggable_template_name",g).text();if(e.isConfigurationSourceTemplate(a)){if(b===m){$(g).remove()}}})};rdx.drag_drop_editor.prototype._getTemplateDraggableData=function(e,f,g,m,o){var d={resource_name:g};var b=new rdx.context();if(this.isConfigurationSourceTemplate(f)){b=new rdx.context();var h={get_by_name:{id:"id"}};b.set_context_data(e,h);d.url_params=b.get_url_params()}else{if(this.isConfigurationSourceInbuiltTemplate(f)){b=new rdx.context();var h={get_by_name:{id:"id"},static_filter:{operation:"commandvariables"}};b.set_context_data(e,h);d.url_params=b.get_url_params()}else{if(this.isConfigurationSourceRecord(f)){d.resource_data=e}else{if(this.isConfigurationSourceInstances(f)){if(!m.duration.duration_value&&m.duration.start_epoch&&m.duration.end_epoch){m.start_time=parseInt(m.duration.start_epoch/1000);m.end_time=parseInt(m.duration.end_epoch/1000)}m.duration=m.duration.duration_value;var a=this._properties.left_panel_info.fetch_data_info[f].view_context;var n=new rdx.context();n.set_context_data(m,a);d.url_params=n.get_url_params()}else{if(this.isConfigurationSourceFile(f)){d.resource_data=e}}}}}d.read_only_mode=o;return d};rdx.drag_drop_editor.prototype._getDraggableTemplateName=function(e,g){var d;if(this.isConfigurationSourceFile(g)){d=e.commands.length>1?e.commands.length+" commands from "+e.template_file:e.commands.length+" command from "+e.template_file}else{if(this.isConfigurationSourceRecord(g)){d=e.commands.length>1?e.commands.length+" commands from "+e.ip_address:e.commands.length+" command from "+e.ip_address}else{if(this.isConfigurationSourceInstances(g)){var f=$.trim(e.commands_str);var b=f.split("\n");if(b[0].indexOf("#NS")===0&&b[1].indexOf("# Last modified")===0){b.splice(0,2);if($.trim(b[b.length-1])=="Done"){b.pop()}}var a=b.length;d=a>1?a+" commands from "+e.ip_address:a+" command from "+e.ip_address}else{if(this.isConfigurationSourceTemplate(g)){d=templates[index].name}else{d=""}}}}return d};rdx.drag_drop_editor.prototype.attachDraggableEventtoTemplates=function(b,a){b.draggable({cursor:"move",helper:function(){return $("<div></div>").append($(".draggable_template_name",b).clone())},revert:"invalid",delay:300}).data("data_fetch_info",a)};rdx.drag_drop_editor.prototype.fill_drag_source_list=function(b,e,a,d){this.renderHelpDescription(d);this._render_draggable_templates_list(b,e,a,d)};rdx.drag_drop_editor.prototype.get_data=function(){var d,a,b={};d=this._get_form_fields_data(this._top_panel_fields);a={};if($(".editor_commands_block",this._editor_commands_container).length>0){a=this.fetch_configuration_editor_commands($(".editor_commands_block",this._editor_commands_container))}b={top_panel_data:d,editor_data:a};return b};rdx.drag_drop_editor.prototype._extract_configuration_commands=function(m){var h=[];var n=this;if(this._properties.allow_variables){$.each(m,function(p,s){var q=$(".editor_commands_lines",s);var o=$(".editor_commands_name",s);$.each(q,function(t,u){var z=$(":selected",$(".editor_protocols",u)).val();z=z?z:"SSH";var v=$(".editor_statements",u).text().trim();v=v.replace(/\s+/g," ");var w=decodeURIComponent(encodeURIComponent(v));if(n.isEditorEmpty()||w===""){}else{h.push({protocol:z,command:w})}})})}else{var g=$(".editor_statements",this._editor_commands_container);for(var e=0;e<g.length;e++){var f=$(g[e]);if(!f.hasClass("editor_help_info_placeholder")){var b=f.html();b=b.replace(/<div>|<\/div>|<br>|<p>|<\/p>/gi,"#&&#");var a=b.split("#&&#").filter(Boolean);for(var d=0;d<a.length;d++){h.push({protocol:"SSH",command:rdx.utils.html_decode(a[d])})}}}}return h};rdx.drag_drop_editor.prototype._fetch_configuration_editor_total_variables=function(a){var b=[];$.each(a,function(e,d){var f=(d.command).match(/\$[^"',\s$><]+\$/g);if(f!==null){$.merge(b,f)}});return b};rdx.drag_drop_editor.prototype._update_variables_object=function(b){var e=this._extract_configuration_commands($(".editor_commands_block",this._editor_commands_container));var h=this._fetch_configuration_editor_total_variables(e);var d=this;if(h.length>0){var a=d._extract_configuration_commands(b);var g=d._fetch_configuration_editor_total_variables(a);var f=[];$.each(g,function(n,m){if(d._variables_obj.hasOwnProperty(m)){var o=h.indexOf(m);if(o===-1){delete d._variables_obj.variable}}})}else{this._variables_obj={}}};rdx.drag_drop_editor.prototype._fetch_defined_commands_variables_data=function(e){var a={};var d=this;$.each(e,function(g,f){if(d._variables_obj.hasOwnProperty(f)){a[f]=d._variables_obj[f]}});var b=[];$.each(a,function(f,g){b.push(g)});return b};rdx.drag_drop_editor.prototype._fetch_undefined_configuration_variables=function(d){var a=[];var b=this;$.each(d,function(f,e){if(b._variables_obj.hasOwnProperty(e)){}else{a.push(e)}});return a};rdx.drag_drop_editor.prototype.fetch_configuration_editor_commands=function(o,d){var h={};var f=false;if(o.length>0){var n=this._extract_configuration_commands(o);var g=this._fetch_configuration_editor_total_variables(n);var a=this._fetch_undefined_configuration_variables(g);var m=this._fetch_defined_commands_variables_data(g);if(a.length>0){a=a.toString()}if(n.length===0&&m.length===0&&a.length===0){}else{var b="";for(var e=0;e<o.length;e++){var p=o[e].getAttribute("commands_category");if(p=="MasterConfig"){b=p;break}}h={commands:n,variables:m,undefined_variables:a,is_inbuilt:f,category:b}}}return h};rdx.drag_drop_editor.prototype._get_form_fields_data=function(e){var b={};var d=null;for(var a=0;a<e.length;a++){if(rdx.utils.is_function(e[a].get_data)){d=e[a].get_data()}if(rdx.utils.is_defined(e[a].get_field().get_formatter())){d=e[a].get_field().get_formatter().get_storage_value(d)}b[e[a].get_field().get_key()]=d==undefined?"":d}return b};rdx.drag_drop_editor.prototype._render_variables_dialog=function(a){if(a&&a.keyCode&&a.keyCode!=13){return}var q=a.data.drag_drop_editor;var f=(a.target.innerText).trim();if(q._is_contains_special_chars(f)){error_message=rdx.i18n.get_string("rdx.variable_validation_error",{field_label:f});var b=$("<span>").text(error_message);rdx.page.show_notification(b,rdx.ERROR,true);return}var d=$(this).parent().position().top;var o=q._editor_commands_container;var p=q._properties.right_panel_info.dialog_properties;var s=$(this);var g=$(this).parent().parent().prev().find(".editor_statements");q._dialog_pop_up_fields={};s.parent().addClass("selected");g.addClass("sibling_selected");if(s.hasClass("blue_tag")){current_variable_class="blue_tag";s.removeClass("blue_tag")}else{if(s.hasClass("green_tag")){current_variable_class="green_tag";s.removeClass("green_tag")}}s.addClass("yellow_tag");var e=$("<div>").addClass("variable_popup_dialog").appendTo(o);e.css({top:d});var n=$("<div>").addClass("pop_up_title").append(rdx.i18n.get_string("rdx.define_variable")).appendTo(e);var m=$("<button>").addClass("close_pop_up").attr({"aria-label":"Close pop up",title:"Close pop up"});n.append(m);var h=[];if(q._variables_obj&&rdx.utils.is_object_not_empty(q._variables_obj)){$.each(q._variables_obj,function(u,v){if(u==f){var t=$.extend({converted_variable:f},v);if(p.data_massage_callback){t=p.data_massage_callback.call_back([t])}h.push(t);return false}})}e.append(q._render_variable_dialog_fields(p,h,false));e.append(q._render_variables_action_container(p,e,g,f,s));rdx.utils.set_focus_on_first_editable_component(e[0]);m.bind("click keydown",{variable_container:$(this)},function(t){if(t&&t.keyCode&&t.keyCode!=13&&(!(t.shiftKey&&t.keyCode==9))){return}e.remove();if(s.hasClass("yellow_tag")){s.removeClass("yellow_tag");s.addClass(current_variable_class);s.parent().removeClass("selected");g.removeClass("sibling_selected")}s.focus()});a.preventDefault();a.stopPropagation()};rdx.drag_drop_editor.prototype._render_variables_preview_dialog=function(b){var q=b.data.drag_drop_editor;var o=q._drag_drop_editor_parent;var p=q._properties.right_panel_info.dialog_properties;var s=$(this);var f=$(this).parent().parent().prev().find(".editor_statements");q._dialog_pop_up_fields={};b.data.button.addClass("active");var d=$("<div>").addClass("variable_popup_dialog preview").appendTo(o);var n=$("<div>").addClass("pop_up_title").append("Preview Variables").appendTo(d);var m=$("<button>").addClass("close_pop_up").attr({"aria-label":"Close pop up",title:"Close pop up"}).appendTo(n);m.bind("click keydown",{variable_container:$(this),button:b.data.button},function(t){if(t&&t.keyCode&&t.keyCode!=13&&(!(t.shiftKey&&t.keyCode==9))){return}t.data.button.removeClass("active");d.remove();t.data.variable_container.focus()});if($.isEmptyObject(q._variables_obj)){$("<p>").text("No variables present in the commands").addClass("padding_10_20").appendTo(d);m.focus();return}var g=[];var e=$(".variable_container",q._editor_commands_container);$.each(q._variables_obj,function(u,v){if(q._is_variable_active(u,e)){var t=$.extend({converted_variable:u},v);if(p.data_massage_callback){t=p.data_massage_callback.call_back([t])}g.push(t)}});d.append(q._render_variable_dialog_fields(p,g,true));rdx.utils.set_focus_on_first_editable_component(d[0]);var a=$("<div>").addClass("dialog_action_button").appendTo(d);var h=rdx.utils._get_button("rdx.done_button.label",null,"rdx_button rdx_blue_button").appendTo(a);h.bind("click keydown",{pop_up_dialog:d,variable_elements:e,drag_drop_editor:q,variable_container:$(this),button:b.data.button},q._save_variables_data)};rdx.drag_drop_editor.prototype._is_variable_active=function(e,f){if(!e||!f){return false}for(var d=0;d<f.length;d++){var b=$(f[d]);var a=b.text();if(e==a){return true}}return false};rdx.drag_drop_editor.prototype._render_variable_dialog_fields=function(s,o,v){var n=s.fields;var d=rdx.utils.get_resource(s.resource_name);var w=$("<div>").addClass("dialog_content");for(var t=0;t<o.length;t++){var e=o[t];var m=e.converted_variable;this._dialog_pop_up_fields[m]=[];var g=$("<div>").addClass("dialog_fields_container").appendTo(w);for(var h in n.form_fields){var q=$.extend(true,{},n.form_fields[h]);var a=$("<div>").addClass("field_set");var b=d.properties;if(h=="type"&&q.input_type&&q.input_type=="list"){var p={advanced_fields:s.advanced_fields.form_fields,dialog_properties:s,current_variable_data:{converted_variable:m}};q.properties.change_handler_callback=new rdx.callback(this,this._handle_variable_type_selection,[p])}var z=null;if(rdx.utils.is_object_not_empty(e.name)){z=e[h]}else{if(h=="name"||h=="display_name"){var f=/\$([^$]+)\$/;if(rdx.utils.is_not_empty(e.converted_variable)&&f.test(e.converted_variable)){z=e.converted_variable.match(f)[1]}}}var u=this.render_form_components(q,b[h],h,a,null,this._dialog_pop_up_fields[m],z);g.append(a)}g.append(this._render_variable_advanced_section(s,e,v))}return w};rdx.drag_drop_editor.prototype._handle_variable_type_selection=function(f,e){var b=f.get_selected_index();var h=f.get_data();var g=e?$.extend({},e.advanced_fields):{};var d={form_fields:{}};var a;switch(h){case"IP Address Field":a=rdx.form_constants.IPV4;break;case"Password Field":a=rdx.form_constants.PASSWORD;break;default:a=rdx.form_constants.TEXT_BOX}if(g.hasOwnProperty("default_value")){d.form_fields.default_value={input_type:a};if(h=="File"){d.form_fields.default_value.read_only=true}}if(h=="Choice"){d.form_fields.values_enum_db={input_type:a}}else{if(g.hasOwnProperty("values_enum_db")){delete g.values_enum_db}}this._modify_advanced_variable_fields(d,e.dialog_properties,e.current_variable_data)};rdx.drag_drop_editor.prototype._save_variables_data=function(e){var f=e.data.pop_up_dialog;var g=e.data.variable_elements;e.data.button.removeClass("active");if(e&&e.keyCode&&e.keyCode!=13&&(e.keyCode!=9||(e.shiftKey&&e.keyCode==9))){return}else{if((e&&e.keyCode&&e.keyCode==9)){f.remove();e.data.variable_container.focus()}else{for(var d=0;d<g.length;d++){var b=$(g[d]);var a=b.text();e.data.drag_drop_editor._save_variable_data(f,a,null,b)}e.data.variable_container.focus()}}};rdx.drag_drop_editor.prototype._save_variable_data=function(g,a,e,n){var f=this._dialog_pop_up_fields[a];var h=this._properties.right_panel_info.dialog_properties;var m=h.action_properties;var d=this._get_form_fields_data(f);if(!this.validate_variables(d.name)){return}if(rdx.utils.is_defined(m.submit_handler_callback)){d=m.submit_handler_callback.call_back([d,n])}if(d===false){return}d.display_name=rdx.utils.is_empty(d.display_name)?d.name:d.display_name;var b;if(d.name.charAt(0)!=="$"&&d.name.charAt(d.name.length-1)!=="$"){b="$"+d.name+"$"}else{b=d.name}if(b!=a){n.text(b);if(rdx.utils.is_defined(this._variables_obj[a])){delete this._variables_obj[a]}}else{n.text(b)}this._variables_obj[b]=d;if(n.hasClass("yellow_tag")||n.addClass("green_tag")){n.removeClass("yellow_tag").addClass("green_tag");n.parent().removeClass("selected");if(e){e.removeClass("sibling_selected")}}this._convert_configuration_editor_similar_variables(a,b);g.remove()};rdx.drag_drop_editor.prototype._convert_configuration_editor_similar_variables=function(b,a){this._editor_area_container.find(".editor_statements").each(function(d,e){var f=$($(".blue_tag, .green_tag"),$(e));if(f.length>0){$.each(f,function(h,g){if($(g).text()==b){$(g).text(a);$(g).removeClass("blue_tag").addClass("green_tag")}})}})};rdx.drag_drop_editor.prototype._render_variable_advanced_section=function(f,e,d){var m=rdx.utils.get_resource(f.resource_name);var b=e.converted_variable;this._advanced_section_containers[b]=$("<div>").addClass("dialog_advanced_section_container");var a=f.advanced_fields;var h=this._render_variable_advanced_section_fields(a,m,e,b);if(d===false){var g=$("<div>").addClass("advanced_section title").text("Advanced").appendTo(this._advanced_section_containers[b]);this._variable_advanced_section_click_handler(g,h)}this._advanced_section_containers[b].append(h);return this._advanced_section_containers[b]};rdx.drag_drop_editor.prototype._variable_advanced_section_click_handler=function(b,a){b.bind(rdx.events.CLICK,{section_content:a},function(e){e.stopPropagation();var d=e.data.section_content;if(d[0].getAttribute("data-expanded")===false||d[0].getAttribute("data-expanded")==="false"){d[0].setAttribute("data-expanded",true);d.removeClass("hide")}else{d[0].setAttribute("data-expanded",false);d.addClass("hide")}})};rdx.drag_drop_editor.prototype._render_variables_action_container=function(h,g,d,b,n){var m=h.action_properties;var a=$("<div>").addClass("dialog_action_button");var f=rdx.utils._get_button("rdx.done_button.label",null,"rdx_button rdx_blue_button");a.append(f);var e=this;f.bind("click keydown",{},function(o){if(o&&o.keyCode&&o.keyCode!=13&&(o.keyCode!=9||(o.shiftKey&&o.keyCode==9))){return}else{if((o&&o.keyCode&&o.keyCode==9)){g.remove();if(n.hasClass("yellow_tag")){n.removeClass("yellow_tag");n.addClass(current_variable_class);n.parent().removeClass("selected");d.removeClass("sibling_selected")}n.focus()}else{e._save_variable_data(g,b,d,n);n.focus()}}});return a};rdx.drag_drop_editor.prototype._render_variable_advanced_section_fields=function(d,b,h){var e=h.converted_variable;var g=$(".section_content",this._advanced_section_containers[e]);if(g.length>0){$(".section_content",this._advanced_section_containers[e]).empty()}else{g=$("<div>").addClass("section_content").attr("data-expanded",false)}for(var m in d.form_fields){var n=$("<div>").addClass("field_set");var a=b.properties;var f=null;if(rdx.utils.is_defined(h[m])){f=h[m]}this.render_form_components(d.form_fields[m],a[m],m,n,null,this._dialog_pop_up_fields[e],f);g.append(n)}return g};rdx.drag_drop_editor.prototype._modify_advanced_variable_fields=function(n,g,h){var a=rdx.utils.get_resource(g.resource_name);var b=h.converted_variable;var d=g.advanced_fields;if(n){if(rdx.utils.is_object_not_empty(g.advanced_fields)){for(var m in g.advanced_fields){delete g.advanced_fields[m]}}d=$.extend(true,g.advanced_fields,n)}var f=this._render_variable_advanced_section_fields(d,a,h);if(!this._advanced_section_containers[b]){this._advanced_section_containers[b]=$("<div>").addClass("dialog_advanced_section_container");var e=$("<div>").addClass("advanced_section").append("Advanced");this._advanced_section_containers[b].append(e);this._advanced_section_containers[b].append(f)}else{this._advanced_section_containers[b].append(f)}};rdx.drag_drop_editor.prototype._editor_click_handler=function(a){var b=a.data.drag_drop_editor;if(b.isEditorEmpty()){b.renderEditorHelpText()}else{a.preventDefault()}};rdx.drag_drop_editor.prototype.renderEditorHelpText=function(){if($(".editor_commands_block",this._editor_commands_container).length===0){var d=$("<div>").addClass("editor_commands_block ").appendTo(this._editor_commands_container);var f=$("<div>").addClass("editor_commands_lines ").appendTo(d);if(this._properties.allow_protocols){this.protocol_separator.show();var a=this.render_protocol_list();var e=$('<button class="delete-line">').attr({"aria-label":"Delete Command",title:"Delete Command"});e.on("click keydown",{that:this},this.remove_command_line);f.append(a).append(e);this._attach_drag_drop_to_command_lines()}var b=$("<div>").addClass("editor_statements").attr("contenteditable",true).appendTo(f);b.addClass("editor_help_info_placeholder");var g=rdx.i18n.get_string("rdx.drag_drop_editor_help_placeholder");if(this.isEditorModeReadOnly()){g=rdx.i18n.get_string("rdx.readonly_editor_help_placeholder");this.resetEditorBackground()}b.text(g);this._render_commands_block_controller(d,this.protocol_separator);this._attach_key_listeners(b)}};rdx.drag_drop_editor.prototype.remove_command_line=function(a){if(rdx.utils.is_defined(a.keyCode)&&(a.keyCode!==13)){return}if($(".editor_commands_block",a.data.that._editor_commands_container).children(".editor_commands_lines").length==1){$(".editor_statements",this.parentElement).text(rdx.i18n.get_string("rdx.drag_drop_editor_help_placeholder")).addClass("editor_help_info_placeholder")}else{$(this.parentElement).remove();a.data.that.update_index_to_command_lines()}};rdx.drag_drop_editor.prototype.render_protocol_list=function(){var f=$('<input class="line-index" aria-label="command line number">');f.on("click keyup blur",{that:this},this.move_commands_to_entered_line_number);var e=$('<div class = "drag_icon_el drag-drop-move-icon-hide drag-drop-move-icon-show">').css({"margin-top":"8px",visibility:"hidden",cursor:"move"});var a=$("<div>").addClass("editor_protocols");var h=document.createElement("select");h.setAttribute("id","editor_protocols_list");h.setAttribute("aria-label","Protocols list");var b=["SSH","SCP","SFTP"];for(var d=0;d<b.length;d++){var n=document.createElement("OPTION");var g=b[d];n.setAttribute("value",g);var m=document.createTextNode(g);n.appendChild(m);h.appendChild(n)}a.append(e).append(f).append(h);return a};rdx.drag_drop_editor.prototype._render_commands_block_controller=function(p,a,o,m){var f={};var d="New";if(rdx.utils.is_defined(o)&&o){f={dragged_item:m};d=$(".draggable_template_name",m).text();if(d.indexOf("commands from")!=-1){var b=d.indexOf("commands from ")+("commands from ").length;d=d.substring(b)}}var h=$("<div>").addClass("editor_commands_control").appendTo(p);if(this._properties.allow_protocols===true){var n=$("<div>").addClass("protocol_list_separator").appendTo(h)}var e=$("<div>").addClass("editor_commands_name").append(d).appendTo(h);var q=$("<button>").addClass("commands_block_remove").appendTo(p);q.attr({"aria-label":"Delete all commands",title:"Delete all commands"});var g=this;q.bind(rdx.events.CLICK,f,function(s){s.stopPropagation();g.remove_configuration_commands(s.data.dragged_item,p,true);g._editor_area_container.trigger("click",[true])})};rdx.drag_drop_editor.prototype.remove_configuration_commands=function(f,e,d){if(d){if(rdx.utils.is_defined(f)){f=f[0];if(f.getAttribute("data-dropped")===true||f.getAttribute("data-dropped")==="true"){f.removeAttribute("data-dropped")}}e.remove();if($(".editor_commands_block",this._editor_commands_container).length===0){this.protocol_separator.hide()}this._update_variables_object(e)}else{var b=$(".ui-draggable",$(".drag_source_list_container",this._source_info_container));for(var a=0;a<b.length;a++){var g=b[a];if(g.getAttribute("data-dropped")===true||g.getAttribute("data-dropped")=="true"){g.removeAttribute("data-dropped")}}if($(".editor_commands_block",this._editor_commands_container).length>0){this._editor_commands_container.empty();this.protocol_separator.hide()}if(rdx.utils.is_object_not_empty(this._variables_obj)){this._variables_obj={}}}};rdx.drag_drop_editor.prototype.break_command_content_to_next_line=function(d,f,e,g){$(d).closest(".editor_commands_lines").after(f);var b=f.find(".editor_statements");e=e.replace(/</g,"&lt;");var a=$.trim(this._replace_converted_variable_with_html(e));b[0].innerHTML=a;$(".green_tag, .blue_tag",b).bind("click keydown",{drag_drop_editor:this},this._render_variables_dialog);this.setEndOfContenteditable(b[0]);return b};rdx.drag_drop_editor.prototype.add_message_tooltip=function(h,e,a){var d=$("<div>").addClass("variable_conversion_pop_up").attr("contenteditable",false);var b=$("<div>").addClass("variable_content_container").appendTo(d);b.append(h);var g=$("<div>").addClass("pop_up_bottom_container").appendTo(d);top_coordinate="-42px";var f="-"+((e+130)/2)+"px";d.css({top:top_coordinate,left:f});return d};rdx.drag_drop_editor.prototype.add_tooltip=function(b,d){var a={that:this,message:d};b.hover(function(g){var f=this.that.add_message_tooltip(this.message,"","");var e=document.createElement("span");this.markerEl=e;e.style.position="relative";$(g.target).after(e);f.appendTo(e);window.getSelection().removeAllRanges()}.bind(a),function(e){if(this.markerEl){this.markerEl.parentNode.removeChild(this.markerEl)}}.bind(a))};rdx.drag_drop_editor.prototype._attach_key_listeners=function(a){var b=this;if(a.parent().hasClass("editor_commands_lines")){$(".line-index",a.parent(".editor_commands_lines")).off();$(".delete-line",a.parent(".editor_commands_lines")).off();$(".line-index",a.parent(".editor_commands_lines")).on("click keyup",{that:this},this.move_commands_to_entered_line_number);$(".delete-line",a.parent(".editor_commands_lines")).on("click keydown",{that:this},this.remove_command_line)}a.bind(rdx.events.PASTE,{commands_container:a},function(e){e.preventDefault();var d=this;var f;if((e.originalEvent||e).clipboardData){f=(e.originalEvent||e).clipboardData.getData("text/plain")}if(!f){f=window.clipboardData.getData("text")}setTimeout(function(){b._render_copy_paste_commands($(d),f)},100,b,d,f)});a.bind(rdx.events.KEYUP,{commands_container:a},function(h){h.stopPropagation();var m=rdx.utils.cursor_position(this);if(b.isEditorEmpty()&&$(this).text().trim()!==""){b.removeEditorAttribute("data-empty")}if(!b._properties.allow_variables){return}if(h.keyCode==52){b._convert_to_variable_using_dollar($(this))}else{if(h.keyCode===8){if(m!==null&&m.text_before_cursor.textContent===""){if($(".editor_commands_lines").length>1){prevEle=$(this).closest(".editor_commands_lines").prev(".editor_commands_lines");var d=prevEle.find(".editor_statements");$(this).closest(".editor_commands_lines").remove();var f=m.text_after_cursor.textContent.replace(/</g,"&lt;");d[0].innerHTML=d[0].innerHTML+b._replace_converted_variable_with_html(f);$(".green_tag, .blue_tag",d).bind("click keydown",{drag_drop_editor:b},b._render_variables_dialog);$(".green_tag, .blue_tag",d).bind("keyup",function(n){n.stopPropagation();n.preventDefault()});b.add_tooltip_for_variables(d);b.setEndOfContenteditable($(".editor_statements",prevEle)[0]);b.update_index_to_command_lines()}}}else{if(h.keyCode===13){var g=$(this).closest(".editor_commands_lines").clone();g.find(".editor_statements").empty();g.removeClass("selected");if(m!==null&&m.cursor_start===false&&m.cursor_end===false){m.post_range.deleteContents();var e=b.break_command_content_to_next_line(this,g,m.text_after_cursor.textContent);b.add_tooltip_for_variables(e)}else{if(m!==null&&m.cursor_end){$(this).closest(".editor_commands_lines").after(g)}else{$(this).closest(".editor_commands_lines").before(g)}}b._attach_key_listeners(g.find(".editor_statements"));g.find(".editor_statements").focus();h.preventDefault();b.update_index_to_command_lines()}}}});a.bind("keydown",function(h){h.stopPropagation();if($(this).hasClass("editor_help_info_placeholder")){$(this).removeClass("editor_help_info_placeholder");$(this).empty()}if(!b._properties.allow_variables){return}if(h.keyCode===13||h.keyCode==40){h.preventDefault()}if(rdx.utils.is_firefox()&&h.keyCode===8){var g=window.getSelection();if(!g.isCollapsed||!g.rangeCount){return}var f=g.getRangeAt(g.rangeCount-1);if(f.commonAncestorContainer.nodeType==3&&f.startOffset>0){return}var e=document.createRange();var d;if(g.anchorNode!=this){if(f.startContainer.previousElementSibling.contentEditable=="false"){e.selectNode(f.startContainer.previousElementSibling)}d=e.cloneContents().lastChild;if(d&&d.contentEditable=="false"){e.deleteContents();h.preventDefault()}}else{if(f.startContainer.lastElementChild.contentEditable=="false"){e.selectNode(f.startContainer.lastElementChild)}else{if(f.startContainer.lastElementChild.nodeType==1&&f.startContainer.lastElementChild.tagName=="BR"){if(f.startContainer.lastElementChild.previousElementSibling.contentEditable=="false"){e.selectNode(f.startContainer.lastElementChild.previousElementSibling)}}}d=e.cloneContents().lastChild;if(d&&d.contentEditable=="false"){h.preventDefault()}}}});if(!b._properties.allow_variables){return}a.bind("mouseup",{},function(e){e.stopPropagation();var d;if(document.selection){d=document.selection}else{if(window.getSelection){d=window.getSelection()}}if(d.toString&&d.toString().trim().match(/^ *$|\s/g)===null){b.convert_to_variable_on_selection($(this))}})};rdx.drag_drop_editor.prototype.set_data=function(d){if(rdx.utils.is_defined(d)){var a={};a[d.resource_name]=d.editor_data;this._set_top_panel_fields_data(d.top_panel_data);var b=$.extend({},d.editor_data);b.parent=this._editor_commands_container;new rdx.callback(this,this._render_fetched_editor_commands,[a,d.resource_name,null,null,b]).call_back()}};rdx.drag_drop_editor.prototype._set_top_panel_fields_data=function(a){$.each(this._top_panel_fields,function(d,b){var e=b.get_field().get_key();if(a.hasOwnProperty(e)){b.set_data(a[e])}})};rdx.drag_drop_editor.prototype.setEndOfContenteditable=function(b,a,d){b.focus();if(typeof window.getSelection!="undefined"&&typeof document.createRange!="undefined"){a=document.createRange();if(rdx.utils.is_function(a.selectNodeContents)){a.selectNodeContents(b)}a.collapse(false);d=window.getSelection();d.removeAllRanges();d.addRange(a)}else{if(typeof document.body.createTextRange!="undefined"){a=document.body.createTextRange();a.moveToElementText(b);a.collapse(false);a.select()}}};rdx.drag_drop_editor.prototype.render_editor_help=function(f){var e=$("<div>").addClass("drag_drop_editor_help").appendTo(f);var d=$("<div>").addClass("drag_editor_help_content").appendTo(e);var h=rdx.i18n.get_string("rdx.drag_drop_editor_help_info");d.append($("<p>").append(h));var b=$("<span>").addClass("drag_drop_editor_help_close").appendTo(e);var a=$("<span>").addClass("drag_drop_editor_help_bottom_arrow").appendTo(e);var g=this;b.bind(rdx.events.CLICK,{},function(m){e.remove();g._editor_area_container.trigger("click",[true])});e.animate({top:20},1000)};rdx.drag_drop_editor.prototype.get_selection_range=function(){if(document.selection&&document.selection.createRange){selectionE1=document.selection;range=document.selection.createRange().duplicate()}else{selectionE1=window.getSelection();if(selectionE1.getRangeAt){range=selectionE1.getRangeAt(0).cloneRange()}else{range.setStart(selectionE1.anchorNode,selectionE1.anchorOffset);range.setEnd(selectionE1.focusNode,selectionE1.focusOffset);if(range.collapsed!==selectionE1.isCollapsed){range.setStart(selectionE1.focusNode,selectionE1.focusOffset);range.setEnd(selectionE1.anchorNode,selectionE1.anchorOffset)}}range.collapse(false)}return{range:range,selection:selectionE1}};rdx.drag_drop_editor.prototype._convert_to_variable_using_dollar=function(g){var b=g.text();b=b.replace(/</gi,"&lt;");b=b.replace(/>/gi,"&gt;");var d=this.get_selection_range();var h=b.match(/>?\$[^"',\s><$]+\$<?/g);var f=true;var a=b.match(/>?\$[^$<]+\$<?/g);if(a!==null){if(h!==null){$.each(h,function(n,m){var o=a.indexOf(m);f=f&&(null===h[n].match(/('|"|,|>|<)/g)?true:false);if(o!==-1){a.splice(o,1)}})}}var e=0;if(h!==null){$.each(h,function(m,n){if(n[n.length-1]==="$"){e++}});if(e>0){b=this._replace_converted_variable_with_html(b);g[0].innerHTML=b;this.add_tooltip_for_variables(g);this.setEndOfContenteditable(g[0],d.range,d.selection);$(".green_tag, .blue_tag",g).bind("click keydown",{drag_drop_editor:this},this._render_variables_dialog);$(".green_tag, .blue_tag",g).bind("keyup",function(m){m.stopPropagation();m.preventDefault()})}}};rdx.drag_drop_editor.prototype.convert_to_variable_on_selection=function(d,q){if(this._editor_area_container.find("#"+this._convert_variable_id).length>0){this._editor_area_container.find("#"+this._convert_variable_id).remove()}var a="\ufeff";var p="&#xfeff;";var m,b,n,e,f;this._convert_variable_id="sel_"+new Date().getTime()+"_"+Math.random().toString().substr(2);if(document.selection&&document.selection.createRange){b=document.selection;f=document.selection.createRange().duplicate();n=f.text;if(n==" "){return}if(b.type!="Control"){width=parseInt(f.boundingWidth)+"px";height=parseInt(f.boundingHeight)+"px"}f.collapse(false);f.pasteHTML('<span id="'+this._convert_variable_id+'" style="position: relative;">'+p+"</span>");m=document.getElementById(this._convert_variable_id)}else{b=window.getSelection();n=b.toString();if(n==" "){return}if(b.getRangeAt){f=b.getRangeAt(0).cloneRange()}else{f.setStart(b.anchorNode,b.anchorOffset);f.setEnd(b.focusNode,b.focusOffset);if(f.collapsed!==b.isCollapsed){f.setStart(b.focusNode,b.focusOffset);f.setEnd(b.anchorNode,b.anchorOffset)}}if(b.rangeCount){if(f.getBoundingClientRect){var o=f.getBoundingClientRect();width=(o.right-o.left);height=(o.bottom-o.top)}}f.collapse(false);m=document.createElement("span");m.id=this._convert_variable_id;m.style.position="relative";m.appendChild(document.createTextNode(a));f.insertNode(m)}if(m){var h=this.add_message_tooltip(rdx.i18n.get_string("rdx.convert_to_variable"),width,height);h.appendTo(m);var g=this;h.bind(rdx.events.MOUSE_DOWN,{range:b.getRangeAt(0),markerEl:m},function(v){v.stopPropagation();var w=g;var t=v.data.range;var z=n.trim();if(!g.validate_variables(z)){return}if(z.charAt(0)!=="$"&&z.charAt(z.length-1)!=="$"){z="$"+z+"$"}if(!w._variables_obj[z]){w._variables_obj[z]={name:n.trim(),display_name:n.trim(),type:"text_field"}}var s="green_tag variable_container";var u=$("<span>").addClass(s).attr("contenteditable","false").append(t.extractContents());g.add_tooltip(u,"Click to edit");t.insertNode(u[0]);u.text(z);$(v.data.markerEl).remove();u.bind("click keydown",{drag_drop_editor:w},w._render_variables_dialog);u.bind("keyup",function(A){A.stopPropagation();A.preventDefault()})});$("body").bind(rdx.events.MOUSE_DOWN,{selectionE1:b,markerEl:m,dd_editor:this},this.close_variable_popup)}};rdx.drag_drop_editor.prototype.close_variable_popup=function(b){b.stopPropagation();if(!($.contains(b.data.markerEl,b.target))){$(b.data.markerEl).remove();$(this).unbind(b,b.data.dd_editor.close_variable_popup);var a=b.data.selectionE1;if(a){if(a.empty){a.empty()}else{if(a.removeAllRanges){a.removeAllRanges()}}}}};rdx.drag_drop_editor.prototype.validate_variables=function(b,a){var e=true;var d;b=$.trim(b);var h=b.match(/[^"',\s><$]/g);var g;if(h){g=h.length==b.length}if((h===null)||(g===false)||this.hasWhiteSpace(b)||a){b=b.replace(/\$/g,"");d=rdx.i18n.get_string("rdx.variable_validation_error",{field_label:b});var f=$("<span>").text(d);rdx.page.show_notification(f,rdx.ERROR,true);return false}return true};rdx.drag_drop_editor.prototype._is_contains_special_chars=function(b){var a=b.match(/('|"|,|<|>)/g);if(a&&a.length>0){return true}else{return false}};rdx.drag_drop_editor.prototype.hasWhiteSpace=function(a){return/\s/g.test(a)};rdx.drag_drop_editor.prototype.get_top_panel_fields=function(){return this._top_panel_fields};rdx.drag_drop_editor.prototype.isConfigurationSourceFile=function(a){if(a=="File"){return true}return false};rdx.drag_drop_editor.prototype.isConfigurationSourceRecord=function(a){if(a=="Record and Play"){return true}return false};rdx.drag_drop_editor.prototype.isConfigurationSourceTemplate=function(a){if(a=="Configuration Template"){return true}return false};rdx.drag_drop_editor.prototype.isConfigurationSourceInbuiltTemplate=function(a){if(a=="Inbuilt Template"||a=="Master Configuration"){return true}return false};rdx.drag_drop_editor.prototype.isConfigurationSourceInstances=function(a){if(a=="Instance"){return true}return false};rdx.drag_drop_editor.prototype.is_readonly_template=function(d,b){var a=d&&(d.draggable).data("data_fetch_info").read_only_mode?true:false;return a};rdx.drag_drop_editor.prototype.isEditorModeReadOnly=function(){if(this._editor_area_container[0].getAttribute("data-readonly")==="true"||this._editor_area_container[0].getAttribute("data-readonly")===true){return true}return false};rdx.drag_drop_editor.prototype.activateAndClearEditorArea=function(){this._editor_area_container[0].removeAttribute("data-readonly");this._editor_area_container.removeClass("read_only_mode background_readonly");this.clearEditor()};rdx.drag_drop_editor.prototype.resetEditorBackground=function(){this._editor_area_container.removeClass("background_readonly")};rdx.drag_drop_editor.prototype.clearEditor=function(){this._editor_clear_link.trigger("click")};rdx.drag_drop_editor.prototype.setEditorAreaReadonly=function(a){this._editor_area_container[0].setAttribute("data-readonly",true);this._editor_area_container.addClass("read_only_mode");if(a){this._editor_area_container.addClass(a)}this.clearEditor()};rdx.drag_drop_editor.prototype.isEditorEmpty=function(){if(this._editor_area_container[0].getAttribute("data-empty")=="true"){return true}return false};rdx.drag_drop_editor.prototype.setEditorAttribute=function(a){for(var b in a){this._editor_area_container[0].setAttribute(b,a[b])}};rdx.drag_drop_editor.prototype.getEditorAttribute=function(a){return this._editor_area_container[0].getAttribute(a)?this._editor_area_container[0].getAttribute(a):null};rdx.drag_drop_editor.prototype.removeEditorAttribute=function(a){if(rdx.utils.is_array(a)){for(var b=0;b<a.length;b++){this._editor_area_container[0].removeAttribute(a.index)}}else{this._editor_area_container[0].removeAttribute(a)}};rdx.drag_drop_editor.prototype.getConfigurationSourceResourceName=function(a){return this._properties.left_panel_info.fetch_data_info[a].resource_name};rdx.drag_drop_editor.prototype.getDefaultConfigurationSource=function(){return this._properties.left_panel_info.default_configuration_source};rdx.drag_drop_editor.prototype.get_editor_commands_container=function(){return this._editor_commands_container};rdx.drag_drop_editor.prototype.getConfigurationSource=function(){return this._configurationSource};rdx.drag_drop_editor.prototype.setConfigurationSource=function(a){this._configurationSource=a};rdx.drag_drop_editor.prototype.get_component=function(){return this._parent};rdx.drag_drop_editor.prototype.get_field=function(){return this._field};rdx.drag_drop_editor.prototype.update_index_to_command_lines=function(){var b=$(".editor_commands_block .editor_commands_lines .editor_protocols input",this._editor_commands_container);var d=$(".editor_commands_block .editor_commands_lines",this._editor_commands_container);for(var a=0;a<b.length;a++){b[a].value=a+1;$(d[a]).attr("line-index",a+1)}};rdx.drag_drop_editor.prototype._attach_drag_drop_to_command_lines=function(){$(".editor_commands_block",this._editor_commands_container).sortable({axis:"y",placeholder:"sortable-placeholder-dragdrop-editor",cursor:"move",delay:300,revert:300,handle:".drag_icon_el",cancel:"",connectWith:".editor_commands_block",start:function(b,d){$(".editor_protocols",d.helper).css({"background-color":"#cec8c8"});$("#editor_protocols_list",d.helper).css({"background-color":"#cec8c8"});d.helper.css({"background-color":"#cec8c8"})},stop:function(b,d){$(".editor_protocols",d.item).css({"background-color":""});$("#editor_protocols_list",d.item).css({"background-color":""});d.item.css({"background-color":""})},update:function(e,d){this.update_index_to_command_lines()}.bind(this)})};rdx.drag_drop_editor.prototype.validate_index_input=function(a,d){var b=a.match(/[^0-9]/g);a=parseInt(a);if(b&&b.length>=0){new rdx.notification_bar().show("Enter valid index value",rdx.ERROR,true)}else{if(a==0||a>d){new rdx.notification_bar().show("Index value out of range",rdx.ERROR,true)}}};rdx.drag_drop_editor.prototype.move_commands_to_entered_line_number=function(a){var d=$(".editor_commands_block .editor_commands_lines",a.data.that._editor_commands_container);a.data.that.validate_index_input(this.value,d.length);if(a.type=="keyup"&&a.keyCode===13){var b=Math.abs(this.value);var e=$(this).closest(".editor_commands_lines").attr("line-index");if(Math.abs(b)>Math.abs(e)){$(this).closest(".editor_commands_lines").insertAfter("div[line-index="+b+"]")}else{$(this).closest(".editor_commands_lines").insertBefore("div[line-index="+b+"]")}a.data.that.update_index_to_command_lines()}else{if(a.type=="blur"){a.data.that.update_index_to_command_lines()}}};rdx.drag_source_info=function(d,a,b){this._parent=a;this._resource=b.resource_name;this._drag_drop_editor=d;this._form_fields={};this._selection_field=b.selection_field;this._selection_dependent_fields=b.selection_dependent_fields;this._fetch_data_info=b.fetch_data_info;this._default_configuration_source=b.default_configuration_source;this._inbuilt_configuration_source=b.inbuilt_configuration_source;this._selection_field_div=null;this._selection_dependent_fields_div_array=[];this._selection_content_div=null;this._currentConfigurationSource=b.default_configuration_source};rdx.drag_source_info.prototype.render=function(m){var s=this._resource.properties;this._selection_field_div=$("<div>").addClass("source_selection_div");var v=this._selection_field;for(var u in v){var d=rdx.form_utils.get_form_field_properties(this._selection_field[u],this._resource[u],null,u,null);d.properties.change_handler_callback=new rdx.callback(this,this.config_source_change_handler_callback);var t=new rdx.form_field(d);var f=t.get_label();var h=$("<label>").addClass("label").append(f);var g=$("<div>").attr("fieldfor",f);var p=rdx.component_helper.get_component(t.get_input_type(),g,t);p.render();h.append(g);this._selection_field_div.append(h)}this._parent.append(this._selection_field_div);this._selection_content_div=$("<div>").addClass("source_selection_data_div").appendTo(this._parent);this._editor_templates_list_container=$("<div>").addClass("editor_templates_list_container").appendTo(this._parent);var o=this.get_default_configuration_source();this._editor_templates_list_container.attr("job_type",o);this._drag_drop_editor.setConfigurationSource(o);var n=this.get_fetch_data_info();var e=n[o];var a=e.resource_name;var q=null;if(rdx.utils.is_defined(e.view_context)){var b=new rdx.context();b.set_context_data(this.get_top_panel_fields_data(),e.view_context);q=b.get_url_params()}rdx.model.get(rdx.utils.get_resource(this._resource),q,new rdx.callback(this._drag_drop_editor,this._drag_drop_editor.fill_drag_source_list,[this.get_default_configuration_source(),null,false]))};rdx.drag_source_info.prototype.config_source_change_handler_callback=function(b){var d=b.get_data(b.get_selected_index());var e="";var a=this._editor_templates_list_container.attr("job_type");if(d!=a){if(this._drag_drop_editor.isEditorEmpty()){this._drag_drop_editor.activateAndClearEditorArea()}this.setCurrentConfigurationSource(d);this.render_dependent_selection_field(b,d);b.set_data(this.getCurrentConfigurationSource())}};rdx.drag_source_info.prototype.render_dependent_selection_field=function(G,t){var u=G.get_data(G.get_selected_index());var K=this.get_fetch_data_info();this._editor_templates_list_container.attr("job_type",t);if(this._selection_content_div.length>0){this._selection_content_div.empty();this._editor_templates_list_container.empty()}this._drag_drop_editor.setConfigurationSource(u);if(u==this.get_default_configuration_source()||u==this.get_inbuilt_configuration_source()||u=="Master Configuration"){var q=null;var I=false;var A=u;var p=K[A]?K[A]:{};var E=this.get_top_panel_fields_data();if(p.data_formatter_callback){var w={resource_for_operation:E};w=p.data_formatter_callback.call_back([w]);E=w.resource_for_operation}if(rdx.utils.is_defined(p.view_context)){var e=new rdx.context();e.set_context_data(E,p.view_context);q=e.get_url_params()}rdx.model.get(rdx.utils.get_resource(p.resource_name),q,new rdx.callback(this._drag_drop_editor,this._drag_drop_editor.fill_drag_source_list,[A,null,I]))}else{var b=this._selection_dependent_fields;for(var L in b){if(L==u){var v=b[L];var n=v.form_fields;var F=v.resource_name;var g=v.action_properties;var m=v.renderer_callback?v.renderer_callback:null;if(rdx.utils.is_defined(m)){var w={top_panel_data:this.get_top_panel_fields_data(),selected_dependent_component:v};w=m.call_back([w])}var H=[];for(var h in n){var a=rdx.form_utils.get_form_field_properties(n[h],this._resource[h],null,h,null);var C=new rdx.form_field(a);var z=C.get_label();var B=$("<div>").addClass("selection_dependent_fields");if(rdx.utils.is_defined(n[h].class_name)){B.addClass(n[h].class_name)}var D=$("<div>").addClass("label").append(z);var d=$("<div>").attr("fieldfor",z);this._selection_dependent_fields_div_array[h]=B;var s=rdx.component_helper.get_component(C.get_input_type(),d,C);s.render();B.append(D);B.append(d);this._selection_content_div.append(B);if(C.get_formatter()&&rdx.utils.is_defined(C.get_resource_name())){this.prefill_form_field(s,C,this._parent,this._get_field_resource_response_arrived)}H.push({form_field:C,field:s});if(rdx.utils.is_defined(n[h].custom_click_handler)){B.bind(rdx.events.CLICK,{callback:n[h].custom_click_handler,field:s},function(M){var N=M.data.field.get_data();M.data.callback.call_back([N])})}}$(".selection_dependent_fields",this._selection_content_div).trigger(rdx.events.CLICK);this._form_fields[L]=H;var J=g.button_label;var o=$("<div>").addClass("drag_source_action_button");var f=rdx.utils._get_button(rdx.i18n.get_string(J),null,"rdx_button rdx_blue_button");o.append(f);f.bind(rdx.events.CLICK,{callback:new rdx.callback(this,this._handle_source_info_data_submit),drag_info:this,configurationSource:u,action_properties:g},function(M){M.data.callback.call_back([M.data.drag_info,M.data.configurationSource,M.data.action_properties,$(this)])});this._selection_content_div.append(o);break}}}};rdx.drag_source_info.prototype.prefill_form_field=function(d,a,f,m){var g=null;var h=a.get_resource_name();if(rdx.utils.is_defined(a.get_formatter().get_data_populate_callback())){var e=a.get_formatter().get_data_populate_callback();var b=new rdx.callback_params({resource_name:h,return_callback:new rdx.callback(this,m,[a.get_key(),h,a,d])});e.call_back([b])}else{rdx.model.get(rdx.utils.get_resource(h),g,new rdx.callback(this,m,[a.get_key(),h,a,d]),f,new rdx.callback(null,rdx.form_utils._handle_resource_form_field_error,[d]))}};rdx.drag_source_info.prototype._get_field_resource_response_arrived=function(d,g,h,b,e){var f=d[h]?d[h]:[];if(!rdx.utils.is_array(f)){f=[f]}var a=b.get_formatter().map_data_items(f);e.add_data_items.apply(e,[a,false])};rdx.drag_source_info.prototype._handle_source_info_data_submit=function(s,d,t,g){var h=this._get_form_fields(d);var n={};var o;for(var e=0;e<h.length;e++){var p=null;var f=h[e].form_field;o=h[e].field;var q=f.get_key();if(rdx.utils.is_function(o.get_data)){p=o.get_data()}if(rdx.utils.is_defined(f.get_formatter())){p=f.get_formatter().get_storage_value(p)}n[q]=p}var m=t.submit_operation;var a={resource_for_operation:n,top_panel_data:this.get_top_panel_fields_data(),action_button:g,field:o};var b=new rdx.callback_params({return_callback:new rdx.callback(this._drag_drop_editor,this._drag_drop_editor.fill_drag_source_list,[d,n]),resource_name:m.resource_name,resource_data:a});t.submit_handler_callback.call_back([b])};rdx.drag_source_info.prototype._get_form_fields=function(a){return this._form_fields[a]};rdx.drag_source_info.prototype.get_fetch_data_info=function(){return this._fetch_data_info};rdx.drag_source_info.prototype.get_default_configuration_source=function(){return this._default_configuration_source};rdx.drag_source_info.prototype.get_inbuilt_configuration_source=function(){return this._inbuilt_configuration_source};rdx.drag_source_info.prototype.get_drag_drop_editor=function(){return this._drag_drop_editor};rdx.drag_source_info.prototype.getCurrentConfigurationSource=function(){return this._currentConfigurationSource};rdx.drag_source_info.prototype.setCurrentConfigurationSource=function(a){this._currentConfigurationSource=a};rdx.drag_source_info.prototype.get_top_panel_fields_data=function(){var d=this.get_drag_drop_editor().get_top_panel_fields();var b={};for(var a=0;a<d.length;a++){var e=d[a].get_data();if(rdx.utils.is_defined(d[a].get_field().get_formatter())){e=d[a].get_field().get_formatter().get_storage_value(e)}b[d[a].get_field().get_key()]=e==undefined?"":e}return b};rdx.time_day_chooser=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={display_days_chooser:null,display_time_chooser:null,class_names:null,read_only:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._day_select_container=null;this._time_select_container=null};rdx.time_day_chooser.prototype.render=function(){if(this._properties.display_days_chooser===true){this._render_week_days()}else{if(this._properties.display_time_chooser===true){this._render_time_chooser()}}};rdx.time_day_chooser.prototype._render_week_days=function(){this._day_select_container=$("<div>").addClass("days_component");var b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var a=$("<div>").addClass("days_wrapper");$.each(b,function(e,d){span=$("<span/>").text(d).appendTo(a).attr({tabindex:"0"});span.bind(rdx.events.CLICK+" "+rdx.events.KEYUP,{},function(f){if(rdx.utils.is_defined(f.keyCode)&&f.keyCode!==13){return}if($(this).hasClass("selected")){$(this).removeClass("selected")}else{$(this).addClass("selected")}})});this._day_select_container.append(a);this._parent.append(this._day_select_container)};rdx.time_day_chooser.prototype._render_time_chooser=function(){this._time_select_container=$("<div/>",{"class":"time_chooser"});hour_field=$("<select/>",{"class":"hour mini"}).attr({tabindex:"0","aria-label":"Select hours"});for(var e=1;e<=12;e++){ele=e>9?e:"0"+e;opt=$("<option/>").text(ele).appendTo(hour_field)}this._time_select_container.append(hour_field);hour_field.prop("selectedIndex",0);min_field=$("<select/>",{"class":"minute mini"}).attr({tabindex:"0","aria-label":"Select minutes"});for(var d=0;d<=59;d++){ele=d>9?d:"0"+d;opt=$("<option/>").text(ele).appendTo(min_field)}this._time_select_container.append(min_field);min_field.prop("selectedIndex",0);toggle_am_pm=$("<div/>",{"class":"toggle_am_pm"});var a=$("<input/>",{type:"radio","class":"time_chooser_format"+this._properties.class_names,name:"time_chooser_format"+this._properties.class_names,id:"time_chooser_format_am"+this._properties.class_names,value:"AM",checked:true});toggle_am_pm.append(a);var b=$("<label/>",{"class":"time_chooser_format_label"+this._properties.class_names,text:"AM","for":"time_chooser_format_am"+this._properties.class_names});toggle_am_pm.append(b);var f=$("<input/>",{type:"radio","class":"time_chooser_format"+this._properties.class_names,name:"time_chooser_format"+this._properties.class_names,id:"time_chooser_format_pm"+this._properties.class_names,value:"PM"});toggle_am_pm.append(f);var g=$("<label/>",{"class":"time_chooser_format_label"+this._properties.class_names,text:"PM","for":"time_chooser_format_pm"+this._properties.class_names});toggle_am_pm.append(g);this._time_select_container.append(toggle_am_pm);this._parent.append(this._time_select_container);if(this._properties.read_only===true||this._properties.read_only=="true"){hour_field.attr("disabled","disabled");min_field.attr("disabled","disabled");a.attr("disabled","disabled");f.attr("disabled","disabled");hour_field.addClass("form_field_disabled");min_field.addClass("form_field_disabled")}};rdx.time_day_chooser.prototype.set_data=function(e){if(this._properties.display_days_chooser===true){if(rdx.utils.is_not_empty(e)){var b=(e.toLowerCase()).split(",");this._day_select_container.find(".days_wrapper span").each(function(){if(b.indexOf($(this).text().toLowerCase())!==-1){$(this).addClass("selected")}})}}else{if(this._properties.display_time_chooser===true){if(rdx.utils.is_not_empty(e)&&!isNaN(e)){if(this._properties.time_format=="24_hr_format"){if(isNaN(e.substr(0,2))){return}var d=this._convert_24_hrs_to_12_hrs(e)}else{var d=this._get_time_from_epoc_seconds(e)}$(".hour",this._time_select_container).val(d.hours);$(".minute",this._time_select_container).val(d.minutes);var a="time_chooser_format"+this._properties.class_names;$(".toggle_am_pm input[name = "+a+"]",this._time_select_container).each(function(f,g){if(g.value==d.am_pm){$(g).prop("checked",true);return false}})}}}};rdx.time_day_chooser.prototype.get_component=function(){return this._parent};rdx.time_day_chooser.prototype.get_field=function(){return this._field};rdx.time_day_chooser.prototype._get_selected_days=function(){var b=[];var a=this._day_select_container.find(".days_wrapper span");if(rdx.utils.is_defined(a)){a.each(function(){if($(this).hasClass("selected")){b.push($(this).text())}});if(rdx.utils.is_defined(b)){return b.toString()}}else{return}};rdx.time_day_chooser.prototype._get_selected_time=function(){var d=$(".hour",this._time_select_container).val();if(rdx.utils.is_defined(d)){var e=$(".minute",this._time_select_container).val();var b="time_chooser_format"+this._properties.class_names;var a=$(".toggle_am_pm input[name ="+b+"]:checked",this._time_select_container).val();if(a=="PM"){if(Number(d)!=12){d=Number(d)+12}}else{if(Number(d)==12){d="00"}}d=d.toString();e=e?e.toString():"00";return(d+":"+e)}else{return}};rdx.time_day_chooser.prototype.get_data=function(){var a;if(this._properties.display_days_chooser===true){a=this._get_selected_days()}else{if(this._properties.display_time_chooser===true){a=this._get_selected_time()}}return a};rdx.time_day_chooser.prototype._convert_24_hrs_to_12_hrs=function(e){var b=parseInt(e.substr(0,2));var d=parseInt(e.substr(3,5));var a="AM";return this._convert_time_to_12_hr_format(b,d,a)};rdx.time_day_chooser.prototype._convert_time_to_12_hr_format=function(b,d,a){if(b===0){b=12}else{if(b>=12){b=b>12?b-12:b;a="PM"}}if(b<10){b="0"+b}if(d<10){d="0"+d}var e={hours:b,minutes:d,am_pm:a};return e};rdx.time_day_chooser.prototype._get_time_from_epoc_seconds=function(f){var d=new Date(Number(f)*1000);var b=d.getHours();var e=d.getMinutes();var a="AM";return this._convert_time_to_12_hr_format(b,e,a)};rdx.filter_component_view=function(b,a,d){this._parent=b;this._column_properties=a;this._filter=a.get_filter();this._input_type=rdx.form_constants.CHECK_BOX;this._map_values=this._filter.map;this._reverse_map=rdx.utils.interchange_key_value_in_object(this._map_values);this._view_context_type=rdx.utils.is_defined(this._filter.type)?this._filter.type:rdx.url_utils.GET_ARGS_TYPE;this._change_handler_callback=d;this._data_formatter=this._filter.data_formatter};rdx.filter_component_view.prototype.render=function(){var f=$("<div>").addClass("column-filter-wrapper");this._filter_view=f;this._filter_view.css({top:0,left:0});$(document.body).append(this._filter_view);var a=$("<div>").addClass("column-filter-heading");var h=this._column_properties.get_label();a.append(h);var e=$("<span>").addClass("close-filter-dialog").attr("title","Close");e.bind(rdx.events.CLICK,{filter_view:this._filter_view},function(p){p.data.filter_view.remove();p.stopPropagation();p.preventDefault()});a.append(e);f.append(a);var m=$("<div>").addClass("column-filter-list");f.append(m);var b=[];var g={};for(var o in this._map_values){if(this._map_values.hasOwnProperty(o)){var n={map:{"true":this._map_values[o],"false":""}};g[o]={input_type:this._input_type,formatter:n,label:this._map_values[o]}}}b.push({form_fields:g});var d={standalone_mode:true,submit_handler_callback:new rdx.callback(this._get_filter_values,[this]),add_close_button:false,button_label:"OK"};this._form=new rdx.form(m,b,{},d).render();rdx.utils.position_element_absolute_to_dom(this._filter_view,this._parent)};rdx.filter_component_view.prototype._get_filter_values=function(d,f){var g=f._form.get_form_data();var e="";var b=[];if(rdx.utils.is_defined(f._data_formatter)){e=f._data_formatter.call_back([g])}else{for(var a in g){if(g.hasOwnProperty(a)){if(rdx.utils.is_not_empty(g[a])){e+=g[a]+"|";b.push(g[a])}}}}e=rdx.utils.ends_with(e,"|")?e.substring(0,e.length-1):e;f._filter_view.remove();if(e!=""){f._column_properties.set_filter_values(b)}else{f._column_properties.set_filter_values(null)}f._change_handler_callback.call_back([e,f._view_context_type])};rdx.filter_component_view.prototype.set_data=function(b){for(var a=0;a<b.length;a++){this._form.set_field_value(b[a],b[a])}};rdx.check_box=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._element=rdx.dom_utils.get_element(rdx.form_constants.CHECK_BOX);this._parent.append(this._element.addClass("rdx_check_box"));this._label_element=$("<label>").addClass("rdx_check_box_label").appendTo(this._parent);this._set_properties();this._click_event_listners=[];this._element.bind(rdx.events.CLICK,{check_box:this},function(d){d.data.check_box._handle_click(d)});if(this._field._properties&&rdx.utils.is_empty(this._field._properties.label)){this._label_element.text(b._properties.key)}if(this._field._properties&&this._field._properties.click_handler_callback){this._element.bind(rdx.events.CHANGE,{change_handler_callback:this._field._properties.click_handler_callback,checkbox:this},function(d){d.data.change_handler_callback.call_back([d.data.checkbox])})}};rdx.check_box.prototype._handle_click=function(d){if(this._element.hasClass("rdx_check_box_disabled")){return}for(var b=0,a=this._click_event_listners.length;b<a;b++){this._click_event_listners[b].call_back([d])}this._element.trigger(rdx.events.CHANGE)};rdx.check_box.prototype.render=function(){return this};rdx.check_box.prototype.get_label_container=function(){return this._label_element};rdx.check_box.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);if(this._field.is_read_only()){this._label_element.addClass("rdx_check_box_disabled");this._element.addClass("rdx_check_box_disabled").attr("disabled","disabled")}};rdx.check_box.prototype.add_event_handler=function(a,b){if(a===rdx.events.CLICK){this._click_event_listners.push(b);return}this._element.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.check_box.prototype.set_data=function(a){if(a=="false"){a=false}else{if(a=="true"){a=true}}this._element.prop("checked",a);this._element.trigger(rdx.events.CHANGE)};rdx.check_box.prototype.get_data=function(){return this._element.prop("checked")};rdx.check_box.prototype.get_component_type=function(){return rdx.form_constants.CHECK_BOX};rdx.check_box.prototype.get_field=function(){return this._field};rdx.check_box.prototype.get_component=function(){return this._element};rdx.check_box.prototype.toggle_read_only=function(a){if(a){this._label_element.removeClass("rdx_check_box_disabled");this._element.removeClass("rdx_check_box_disabled").removeAttr("disabled")}else{this._label_element.addClass("rdx_check_box_disabled");this._element.addClass("rdx_check_box_disabled").attr("disabled","disabled")}};rdx.ip_range=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._ip_range_text=b.get_label();this._DEFAULT_PROPERTIES={type:rdx.form_constants.range_type.IPV4};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties())};rdx.ip_range.prototype.render=function(){this._element=$("<table>").attr("cellspacing","0").addClass("ip-range-tbl").append($("<tbody>"));var a=$("<tr>");if(this._properties.type==rdx.form_constants.range_type.IPV6){this._ip_ele=new rdx.ip_v6(this._parent,this._field).render()}else{if(this._properties.type==rdx.form_constants.range_type.IPV4V6RANGE){this._ip_ele=new rdx.ip_v4_v6(this._parent,this._field).render()}else{if(this._properties.type==rdx.form_constants.range_type.TEXT){this._ip_ele=new rdx.text_box(this._parent,this._field).render()}else{this._ip_ele=new rdx.ip_v4(this._parent,this._field).render()}}}this._ip_range_element1=this._ip_ele.get_component();this._ip_range_element2=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("ip-range-range");a.append($("<td>").append(this._ip_range_element1));a.append($("<td>").attr("width","20px").append("-"));a.append($("<td>").append(this._ip_range_element2));this._element.append(a);this._set_properties();this._parent.append(this._element);return this};rdx.ip_range.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._element,this._field)};rdx.ip_range.prototype.add_event_handler=function(a,b){this._element.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.ip_range.prototype.set_data=function(a){this._ip_ele.set_data(a)};rdx.ip_range.prototype.get_data=function(){return new rdx.ip_range_resc(this._ip_ele.get_data(),this._ip_range_element2.val(),this._properties.type)};rdx.ip_range.prototype.get_component_type=function(){return rdx.form_constants.IP_RANGE};rdx.ip_range.prototype.get_field=function(){return this._field};rdx.ip_range.prototype.get_component=function(){return this._element};rdx.ip_range.prototype.validate=function(){if(this._properties.type==rdx.form_constants.range_type.IPV4){if(!rdx.utils.is_ipv4(this._ip_ele.get_data())){return"rdx.ipv4_error"}var a=this._ip_range_element2.val();if(rdx.utils.is_num(a)){return("rdx.iprange_format_error")}if(a>255||a<0){return("rdx.iprange_maxval_error")}return null}if(this._properties.type==rdx.form_constants.range_type.IPV6){if(!rdx.utils.is_ipv6(this._ip_ele.get_data())){return"rdx.ipv6_error"}var a=this._ip_range_element2.val();if(!a.match(/^[A-Fa-f0-9]{1,4}$/)){return("rdx.ip_text_range_error")}return null}if(this._properties.type==rdx.form_constants.range_type.TEXT){if(!(this._ip_ele.get_data().match(/^[0-9]+$/)&&this._ip_range_element2.val().match(/^[0-9]+$/))&&!(this._ip_ele.get_data().match(/^[a-zA-Z]+$/)&&this._ip_range_element2.val().match(/^[a-zA-Z]+$/))){return("rdx.ip_text_range_error")}}if(this._properties.type==rdx.form_constants.range_type.IPV4V6RANGE){if(!rdx.utils.is_ipv4(this._ip_ele.get_data())&&!rdx.utils.is_ipv6(this._ip_ele.get_data())){return"rdx.ip_error"}if(rdx.utils.is_ipv4(this._ip_ele.get_data())){var a=this._ip_range_element2.val();if(rdx.utils.is_num(a)){return("rdx.iprange_format_error")}if(a>255||a<0){return("rdx.iprange_maxval_error")}}else{if(rdx.utils.is_ipv6(this._ip_ele.get_data())){if(!rdx.utils.is_ipv6(this._ip_ele.get_data())){return"rdx.ipv6_error"}var a=this._ip_range_element2.val();if(a.length>0&&!a.match(/^[A-Fa-f0-9]{1,4}$/)){return("rdx.ip_text_range_error")}}}return null}};rdx.ip_range_resc=function(b,a,d){this._ipString=b;this._range=a;this._type=d};rdx.ip_range_resc.prototype.get_ip_string=function(){return rdx.utils.trim(this._ipString)};rdx.ip_range_resc.prototype.get_range=function(){return rdx.utils.trim(this._range)};rdx.ip_range_resc.prototype.get_range_start=function(){if(this._type==rdx.form_constants.range_type.IPV4||rdx.utils.is_ipv4(this._ipString)){var a=this.get_ip_string().lastIndexOf(".");return parseInt((this.get_ip_string().substring(a+1)))}else{if(this._type==rdx.form_constants.range_type.IPV6||rdx.utils.is_ipv6(this._ipString)){var b=this.get_ip_string();var d=rdx.utils.get_last_octet_ipv6(b);return d}else{if(this._type==rdx.form_constants.range_type.TEXT){return rdx.utils.trim(this._ipString)}}}};rdx.ip_range_resc.prototype.get_range_as_array=function(){var h=this.get_range();var a=this.get_range_start();var f=this.get_ip_string();var n=[];if(h==""){h=a}if(this._type==rdx.form_constants.range_type.IPV6||(this._type==rdx.form_constants.range_type.IPV4V6RANGE&&rdx.utils.is_ipv6(this._ipString))){var d="";if(rdx.utils.hex_to_decimal(h)-rdx.utils.hex_to_decimal(a)<0){var p=h;h=a;a=p}for(var g=rdx.utils.hex_to_decimal(a),e=0;g<=rdx.utils.hex_to_decimal(h);g++,e++){if(d==""){d=f}else{d=rdx.utils.increment_ipv6_address_by_one(d)}n[e]=d}}else{if(this._type==rdx.form_constants.range_type.IPV4||(this._type==rdx.form_constants.range_type.IPV4V6RANGE&&rdx.utils.is_ipv4(this._ipString))){var o=f.split(".");a=Number(a);h=Number(h);if(h-a<0){var p=h;h=a;a=p}for(var g=a,e=0;g<=h;g++,e++){var m=(o[0]+"."+o[1]+"."+o[2]+"."+String(g));n[e]=m}}else{if(this._type==rdx.form_constants.range_type.TEXT){if(a.match(/[a-zA-Z]+/)&&h.match(/[a-zA-Z]+/)){var q=false;if(a.length!=h.length){rdx.message_box.error("Invalid Range")}var b=a.length-1;while(b>=0){var s=rdx.utils.check_valid_range(a[b],h[b],q);if(s==2){q=true}else{q=false;if(s!=1){rdx.message_box.error("Invalid Range")}}b--}if(q==true){rdx.message_box.error("Invalid Range")}while(a!=h){n.push(a);a=rdx.utils.charater_range_increment(a.split(""),a.length-1)}n.push(a)}else{if(a.match(/[0-9]+/)&&h.match(/[0-9]+/)){a=Number(a);h=Number(h);if(h-a<0){var p=h;h=a;a=p}for(var g=a;g<=h;g++){n.push(g)}}}}}}return n};rdx.ip_v4=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._element=$("<table>").addClass("ip-v4-v6-parent").attr("cellspacing","0").append($("<tbody>"));var d=$("<tr>");this._ip_element1=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("ip-v4-v6-octet ");this._ip_element2=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("ip-v4-v6-octet ").attr("maxlength","3");this._ip_element3=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("ip-v4-v6-octet ").attr("maxlength","3");this._ip_element4=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("ip-v4-v6-octet ").attr("maxlength","3");this._cell1=d.append($("<td>").attr("width","17%").addClass("ip-v4-v6-octet-wrap").append(this._ip_element1));this._cell1.append($("<td>").attr("width","10%").addClass("ip-v4-v6-octet-wrap").append("."));this._cell2=d.append($("<td>").attr("width","17%").addClass("ip-v4-v6-octet-wrap").append(this._ip_element2));this._cell2.append($("<td>").attr("width","10%").addClass("ip-v4-v6-octet-wrap").append("."));this._cell3=d.append($("<td>").attr("width","17%").addClass("ip-v4-v6-octet-wrap").append(this._ip_element3));this._cell3.append($("<td>").attr("width","10%").addClass("ip-v4-v6-octet-wrap").append("."));this._cell4=d.append($("<td>").attr("width","17%").addClass("ip-v4-v6-octet-wrap").append(this._ip_element4));this._element.append(d);this._skip_validation=false;if(rdx.utils.is_defined(this._field.get_properties())&&rdx.utils.is_defined(this._field.get_properties().skip_validation)){this._skip_validation=this._field.get_properties().skip_validation}this._set_properties();this._valid_key_codes=[rdx.keycodes.DELETE,rdx.keycodes.BACKSPACE,rdx.keycodes.LEFT_ARROW,rdx.keycodes.RIGHT_ARROW,rdx.keycodes.TAB];this._is_change_event_added=false};rdx.ip_v4.prototype.render=function(){this._register_key_listners(this._ip_element1,this._ip_element2,null);this._register_key_listners(this._ip_element2,this._ip_element3,this._ip_element1);this._register_key_listners(this._ip_element3,this._ip_element4,this._ip_element2);this._register_key_listners(this._ip_element4,null,this._ip_element3);this._parent.append(this._element);return this};rdx.ip_v4.prototype._register_key_listners=function(b,d,a){b.bind(rdx.events.PASTE,{ip_component:this,prev_field:a},function(h){var f=this;var e=h.data.prev_field;if(rdx.utils.is_not_defined(e)){$(f).val("");var g=h.data.ip_component;setTimeout(function(){var m=$(f).val();g.validate_data(m,true)},100)}else{h.stopPropagation();h.preventDefault()}});b.bind(rdx.events.KEYDOWN,{ip_component:this,next_field:d,prev_field:a},function(e){var q=e.keyCode;var h=false;var f=e.shiftKey;if($.inArray(q,e.data.ip_component._valid_key_codes)!=-1||(q==rdx.keycodes.TAB&&f)){}else{if(d!=null&&(q==rdx.keycodes.PERIOD||q==rdx.keycodes.DECIMAL_POINT)&&rdx.utils.is_not_empty(this.value)){}else{if((q>=rdx.keycodes.ZERO&&q<=rdx.keycodes.NINE)||(q>=rdx.keycodes.NUMPAD_ZERO&&q<=rdx.keycodes.NUMPAD_NINE)){if(e.target.value=="0"){e.target.value=""}}if(rdx.utils.is_not_defined(a)){if(((e.ctrlKey||e.metaKey)&&q==rdx.keycodes.V)){h=true}}if(rdx.utils.is_not_defined(a)){if(!((h)||((q>=rdx.keycodes.ZERO&&q<=rdx.keycodes.NINE)||(q>=rdx.keycodes.NUMPAD_ZERO&&q<=rdx.keycodes.NUMPAD_NINE)))||q==rdx.keycodes.SPACE){e.preventDefault()}}if((e.target.value.length==2&&e.target.value==25&&((q<96&&q>rdx.keycodes.FIVE)||q>rdx.keycodes.NUMPAD_FIVE))||(e.target.value.length>0)){var p=[];var o="";for(var n=0;n<e.target.value.length;n++){p[n]=e.target.value.charAt(n)}var s=String.fromCharCode((rdx.keycodes.NUMPAD_ZERO<=q&&q<=rdx.keycodes.NUMPAD_NINE)?q-48:q);if(rdx.utils.is_ie()&&(rdx.utils.get_browser_version().indexOf("8")==0)){e.target.focus();var g=document.selection.createRange();var v=g.htmlText;g.moveStart("character",-e.target.value.length);var t=g.text.length;if(rdx.utils.is_defined(document.selection.type)&&(document.selection.type).toLowerCase()=="none"){p.splice(t,0,s)}else{var m=t-v.length;p.splice(m,v.length,s)}}else{var u=e.target.selectionEnd-e.target.selectionStart;if(u>0){p.splice(e.target.selectionStart,u,s)}else{p.splice(e.target.selectionStart,0,s)}}for(var n=0;n<p.length;n++){o=o.concat(p[n])}if(o>255){e.preventDefault()}}}}$(e.data.ip_component._element).trigger(rdx.events.CHANGE)});if(rdx.utils.is_defined(d)||rdx.utils.is_defined(a)){b.bind(rdx.events.KEYUP,{ip_component:this,next_field:d,prev_field:a},function(e){setTimeout(function(){var o=e.target.value.charAt(e.target.value.length-1);var g=e.target.value;var f=e.data.ip_component.validate_octet_value(g);if(e.keyCode==rdx.keycodes.TAB){}else{if(e.keyCode==rdx.keycodes.BACKSPACE&&rdx.utils.is_defined(a)&&rdx.utils.is_empty(e.target.value)){a.focus().val(a.val());e.preventDefault()}else{if(f==false){var m=e.target.value.split("");for(var h=m.length-1;h>=0;h--){var n=m[h];if(/^\d{1}$/.test(n)==false&&!(n=="*"&&e.target.value.length==1&&rdx.utils.is_not_defined(e.data.prev_field))){e.target.value=e.target.value.replace(n,"")}}if(rdx.utils.is_not_empty(e.target.value)&&o=="."&&rdx.utils.is_defined(d)){d.focus().val(d.val());d.select();e.preventDefault()}}else{if((e.keyCode==rdx.keycodes.ZERO||e.keyCode==rdx.keycodes.NUMPAD_ZERO||e.keyCode==rdx.keycodes.DELETE||e.keyCode==rdx.keycodes.BACKSPACE)){while(e.target.value.length>1&&e.target.value.indexOf("0")==0){e.target.value=e.target.value.substr(1)}}else{if((e.target.value.length==3&&((e.keyCode>=rdx.keycodes.ZERO&&e.keyCode<=rdx.keycodes.NINE)||(e.keyCode>=rdx.keycodes.NUMPAD_ZERO&&e.keyCode<=rdx.keycodes.NUMPAD_NINE))&&rdx.utils.is_defined(d))||((e.keyCode==rdx.keycodes.PERIOD||e.keyCode==rdx.keycodes.DECIMAL_POINT)&&rdx.utils.is_not_empty(e.target.value))){d.focus().val(d.val());d.select()}}}}}$(e.data.ip_component._element).trigger(rdx.events.CHANGE)},200)})}};rdx.ip_v4.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._element,this._field);rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._element,this._field);if(this._field.is_read_only()){this._element.attr("readonly","true");this._ip_element1.attr("readonly","true");this._ip_element2.attr("readonly","true");this._ip_element3.attr("readonly","true");this._ip_element4.attr("readonly","true");this._element.addClass("form_field_disabled");this._ip_element1.addClass("form_field_disabled");this._ip_element2.addClass("form_field_disabled");this._ip_element3.addClass("form_field_disabled");this._ip_element4.addClass("form_field_disabled")}};rdx.ip_v4.prototype.add_event_handler=function(a,b){this._element.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.ip_v4.prototype.set_data=function(b){var a=b.split(".");if(a.length==4){this._ip_element1.val(a[0]);this._ip_element2.val(a[1]);this._ip_element3.val(a[2]);this._ip_element4.val(a[3])}else{if(b=="*"){this._ip_element1.val(b)}else{this._ip_element1.val("");this._ip_element2.val("");this._ip_element3.val("");this._ip_element4.val("")}}};rdx.ip_v4.prototype.validate_data=function(b,e){var d=$.trim(b);d=d.replace(/\s/g,"");var a=this.validate_octet_value(d,e);if(a){this.set_data(d)}else{rdx.message_box.error(rdx.i18n.get_string("rdx.ip_paste_field_error",{field_label:b}));this._ip_element1.val("");this._ip_element2.val("");this._ip_element3.val("");this._ip_element4.val("")}};rdx.ip_v4.prototype.validate_octet_value=function(a,d){var n=true;var m=/^([01]?[0-9]?[0-9]|2[0-4][0-9]|25[0-5])$/;var b=(rdx.utils.is_defined(d)&&d==true)?true:false;if(a.indexOf(".")!==-1&&b){a=$.trim(a);a=a.replace(/\s/g,"");var h=a.split(".");var g=h.length;for(var e=0;e<g;e++){var f=(m.test(h[e]))?true:false;if(f==false){n=false;break}}}else{n=(m.test(a))?true:false}return n};rdx.ip_v4.prototype.get_data=function(){var a=this._ip_element1.val();if(rdx.utils.is_not_empty(this._ip_element2.val())){a+=("."+this._ip_element2.val())}if(rdx.utils.is_not_empty(this._ip_element3.val())){a+=("."+this._ip_element3.val())}if(rdx.utils.is_not_empty(this._ip_element4.val())){a+=("."+this._ip_element4.val())}return a};rdx.ip_v4.prototype.get_component_type=function(){return rdx.form_constants.IPV4};rdx.ip_v4.prototype.get_field=function(){return this._field};rdx.ip_v4.prototype.get_component=function(){return this._element};rdx.ip_v4.prototype.toggle_read_only=function(a){if(a){this._element.removeAttr("readonly");this._ip_element1.removeAttr("readonly");this._ip_element2.removeAttr("readonly");this._ip_element3.removeAttr("readonly");this._ip_element4.removeAttr("readonly");this._element.removeClass("form_field_disabled");this._ip_element1.removeClass("form_field_disabled");this._ip_element2.removeClass("form_field_disabled");this._ip_element3.removeClass("form_field_disabled");this._ip_element4.removeClass("form_field_disabled")}else{this._element.attr("readonly","true");this._ip_element1.attr("readonly","true");this._ip_element2.attr("readonly","true");this._ip_element3.attr("readonly","true");this._ip_element4.attr("readonly","true");this._element.addClass("form_field_disabled");this._ip_element1.addClass("form_field_disabled");this._ip_element2.addClass("form_field_disabled");this._ip_element3.addClass("form_field_disabled");this._ip_element4.addClass("form_field_disabled")}};rdx.ip_v4.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._element}if(a){b.show()}else{b.hide()}};rdx.ip_v6=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._DEFAULT_PROPERTIES={prefix_length_required:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._field.get_properties());this.ip_v6_field=new rdx.text_box(a,b)};rdx.ip_v6.prototype.render=function(){this._register_key_listners();this._parent.append(this.ip_v6_field.get_component());return this};rdx.ip_v6.prototype._register_key_listners=function(){this.ip_v6_field.add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,function(d){var e=d.keyCode;var b=d.ctrlKey;var a=d.shiftKey;if(e==rdx.keycodes.DELETE||e==rdx.keycodes.BACKSPACE||(e>=rdx.keycodes.NUMPAD_ZERO&&e<=rdx.keycodes.NUMPAD_NINE)||((e==rdx.keycodes.SHIFTCOLON||e==rdx.keycodes.COLON||e==rdx.keycodes.A||e==rdx.keycodes.B||e==rdx.keycodes.C||e==rdx.keycodes.D||e==rdx.keycodes.E||e==rdx.keycodes.F)&&d.shiftKey)||(e==rdx.keycodes.RIGHT_ARROW&&d.shiftKey)||(e==rdx.keycodes.LEFT_ARROW&&d.shiftKey)||(b&&(e==rdx.keycodes.A||e==rdx.keycodes.C||e==rdx.keycodes.V||e==rdx.keycodes.X))||e==rdx.keycodes.TAB||(this._properties.prefix_length_required==true&&e==rdx.keycodes.FWDSLASH)||(a&&(e==rdx.keycodes.FIVE))){}else{if(e<rdx.keycodes.LEFTARROW||e>rdx.keycodes.F||d.shiftKey){d.preventDefault()}}}))};rdx.ip_v6.prototype.add_event_handler=function(a,b){this.ip_v6_field.add_event_handler(a,b)};rdx.ip_v6.prototype.set_data=function(a){this.ip_v6_field.set_data(a)};rdx.ip_v6.prototype.get_data=function(){return this.ip_v6_field.get_data()};rdx.ip_v6.prototype.get_component_type=function(){return rdx.form_constants.IPV6};rdx.ip_v6.prototype.get_field=function(){return this._field};rdx.ip_v6.prototype.get_component=function(){return this.ip_v6_field.get_component()};rdx.ip_v6.prototype.toggle_show_hide=function(a,b){this.ip_v6_field.toggle_show_hide(a,b)};rdx.ip_v6.prototype.toggle_read_only=function(a){this.ip_v6_field.toggle_read_only(a)};rdx.ipv4v6=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._DEFAULT_PROPERTIES={prefix_length_required:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._field.get_properties());this.ip_field=new rdx.ip_textfield(a,b);this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._field.get_properties())};rdx.ipv4v6.prototype.render=function(){this._register_key_listners();this.ip_field.render();this._parent.append(this.ip_field.get_component());if(rdx.utils.is_defined(this.get_data())&&(rdx.utils.is_not_empty(this.get_data()))){this.trigger(rdx.events.FOCUS_OUT)}return this};rdx.ipv4v6.prototype._register_key_listners=function(){this.ip_field.add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,function(d){var e=d.keyCode;var b=d.ctrlKey;var a=d.shiftKey;if(e==rdx.keycodes.DELETE||e==rdx.keycodes.BACKSPACE||e==rdx.keycodes.SPACE||e==rdx.keycodes.DOT||e==rdx.keycodes.NUMPAD_PERIOD||(e>=rdx.keycodes.NUMPAD_ZERO&&e<=rdx.keycodes.NUMPAD_NINE)||((e==rdx.keycodes.SHIFTCOLON||e==rdx.keycodes.COLON||e==rdx.keycodes.A||e==rdx.keycodes.B||e==rdx.keycodes.C||e==rdx.keycodes.D||e==rdx.keycodes.E||e==rdx.keycodes.F)&&d.shiftKey)||(e==rdx.keycodes.RIGHT_ARROW&&d.shiftKey)||(e==rdx.keycodes.LEFT_ARROW&&d.shiftKey)||(b&&(e==rdx.keycodes.A||e==rdx.keycodes.C||e==rdx.keycodes.V||e==rdx.keycodes.X))||e==rdx.keycodes.TAB||(this._properties.prefix_length_required==true&&e==rdx.keycodes.FWDSLASH)||(a&&(e==rdx.keycodes.FIVE))){}else{if(e==rdx.keycodes.A||e==rdx.keycodes.C||e==rdx.keycodes.V||e==rdx.keycodes.X){}else{if(e==rdx.keycodes.EIGHT&&d.shiftKey){}else{if(e==rdx.keycodes.HOME||e==rdx.keycodes.END){}else{if(e<rdx.keycodes.LEFTARROW||e>rdx.keycodes.F||d.shiftKey){d.preventDefault()}}}}}}))};rdx.ipv4v6.prototype.get_element=function(){return this.ip_field.get_component()};rdx.ipv4v6.prototype.add_event_handler=function(a,b){this.ip_field.add_event_handler(a,b)};rdx.ipv4v6.prototype.set_data=function(d){this.ip_field.set_data(d);var b=this.ip_field.get_data();if(rdx.utils.is_defined(b)&&(rdx.utils.is_not_empty(b))&&(rdx.utils.is_ipv4(b))){this.get_component().trigger(rdx.events.FOCUS_OUT)}var a=this.get_component();if(rdx.utils.is_defined(a)&&a.length>0){if(rdx.utils.is_defined(a[0].scrollWidth)){var e=a.get(0).scrollWidth;if(a.get(0).clientWidth<e){a.width(e+5)}}else{a.attr({title:b})}}};rdx.ipv4v6.prototype.get_data=function(){return this.ip_field.get_data()};rdx.ipv4v6.prototype.is_ipv6=function(){var a=this.ip_field.get_data();return(rdx.utils.is_empty(a)||a.indexOf(".")>=0)?0:1};rdx.ipv4v6.prototype.get_dependency_determinant_value=function(a){if(a==rdx.form_constants.dependency_determinant.TYPE){if(this.is_ipv6()){return"IPv6"}else{return"IPv4"}}return null};rdx.ipv4v6.prototype.get_component_type=function(){return rdx.form_constants.IPV4V6};rdx.ipv4v6.prototype.get_field=function(){return this._field};rdx.ipv4v6.prototype.get_component=function(){return this.ip_field.get_component()};rdx.ipv4v6.prototype.toggle_read_only=function(a){this.ip_field.toggle_read_only(a)};rdx.dropdown_menu=function(b,a){this._parent=b;this._DEFAULT_PROPERTIES={change_handler_callback:null,mandatory:false,set_current:true,auto_complete:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this._properties.mandatory=a.is_mandatory();this._list=null;this._html_list=null;this._added_blank_item=false;this._field=a;this._scroll_parent=null;this._width=a.get_width();this._drop_down_properties=new Object();this._list=rdx.dom_utils.get_element(rdx.form_constants.LIST).attr("size",2);this._event_to_callback_map=new Object()};rdx.dropdown_menu.prototype.render=function(){this._html_list=this._list[0];var a=$("<div>").addClass("options_container");a.append(this._list);if(this._width>0){a.css("width",this._width)}this._parent.append(a);$(this._list.attr("id",new Date().getTime()+"_"+this.get_field().get_key()));this._scroll_parent=rdx.utils.is_defined(this._scroll_parent)?this._scroll_parent:rdx.page.get_content();this._dropdown_options={scrollBody:this._scroll_parent,set_current:this._properties.set_current,width:this._width};if(this._properties.auto_complete){this._dropdown_options.auto_complete=true}$(this._list).selectbox(this._dropdown_options);this._add_empty_item();this.add_data_items();if(this._properties.change_handler_callback){this._list.bind(rdx.events.CHANGE,{rdx_change_handler_callback:this._properties.change_handler_callback},function(e,f,d){e.data.rdx_change_handler_callback.call_back([e,f,d])});var b=this;if(rdx.utils.is_not_defined(this._dropdown_options.change_listener)){this._dropdown_options.change_listener=function(e,d){b._list.trigger(rdx.events.CHANGE,[e,d])}}}if(this._field.is_read_only()){this._list.prop("disabled",true);this._list.addClass("form_field_disabled")}return this};rdx.dropdown_menu.prototype.set_Scroll_parent=function(a){this._scroll_parent=a};rdx.dropdown_menu.prototype.add_event_handler=function(b,e){if(rdx.utils.is_not_defined(this._event_to_callback_map[b])){this._event_to_callback_map[b]=[];this._list.bind(b,{rdx_change_handler_callback:this._event_to_callback_map[b]},function(m,n,f){if(rdx.utils.is_defined(m.data.rdx_change_handler_callback)){var h=m.data.rdx_change_handler_callback;for(var g=0;g<h.length;g++){h[g].call_back([m,n,f])}}})}this._event_to_callback_map[b].push(e);var d=this;var a=b;if(rdx.utils.is_not_defined(this._dropdown_options.change_listener)&&b==rdx.events.CHANGE){this._dropdown_options.change_listener=function(g,f){d._list.trigger(rdx.events.CHANGE,[g,f])}}};rdx.dropdown_menu.prototype.remove_event_handler=function(b,d){if(rdx.utils.is_defined(this._event_to_callback_map[b])){var a=this._event_to_callback_map[b].indexOf(d);if(a>-1){this._event_to_callback_map[b].splice(a,1)}}};rdx.dropdown_menu.prototype.add_data_items=function(g,f){if(rdx.utils.is_not_defined(g)){this.remove_items(false,false);var e=this._field.get_formatter();if(rdx.utils.is_defined(e)){var a=e.get_map_keys();for(var d=0,b=a.length;d<b;d++){this.add_item(a[d],false)}}}else{for(var d=0,b=g.length;d<b;d++){this.add_item(g[d],false)}}if(rdx.utils.is_defined(this._dropdown_options.data_get_callback)){this._dropdown_options.data_get_callback.call(this._dropdown_options._this,this._dropdown_options._input.attr("id"),this._dropdown_options._table,this._dropdown_options._options,this._dropdown_options._data_container)}if(rdx.utils.is_not_defined(f)||f==false){this._list.change()}};rdx.dropdown_menu.prototype.add_items=function(a,b){for(var e=0,d=a.length;e<d;e++){this.add_item(a[e],false)}if(b){this._list.change()}};rdx.dropdown_menu.prototype.add_item=function(b,a){this._list.append($(document.createElement("option")).text(rdx.i18n.get_string(b)).attr("title",rdx.i18n.get_string(b)));if(a){this._list.change()}};rdx.dropdown_menu.prototype.select_item=function(b,a){var d=this.get_items_count();if(d==0){return}if(b<0||b>=d){b=0}this._html_list.options[b].selected=true;if(a){this._list.change()}};rdx.dropdown_menu.prototype.select_value=function(d,b){if(d==null){return}var e=this.get_items_count();if(e==0){return}for(var a=0;a<e;a++){if(this._html_list.options[a].text==d){this._html_list.options[a].selected=true;this._html_list.selectedIndex=a;if(rdx.utils.is_not_defined(b)||b==false){this._list.change()}break}}};rdx.dropdown_menu.prototype.unselect_all_items=function(){this._html_list.selectedIndex=-1;this._list.change()};rdx.dropdown_menu.prototype.remove_items=function(b,a){if(!b){this._html_list.selectedIndex=-1;if(this._added_blank_item){this._html_list.options.length=1}else{this._html_list.options.length=0}}else{if(this._added_blank_item&&this.get_selected_index()>1){this._html_list.remove(this.get_selected_index())}else{this._html_list.remove(this.get_selected_index())}}if(a){this._list.change()}};rdx.dropdown_menu.prototype.get_selected_index=function(){return this._html_list.selectedIndex};rdx.dropdown_menu.prototype.get_items_count=function(){return this._html_list.length};rdx.dropdown_menu.prototype.is_send_as_array=function(){return this._properties.send_as_array=="true"};rdx.dropdown_menu.prototype._add_empty_item=function(){if(this._properties.mandatory){return}if(!this._added_blank_item){this.add_item("",false);this._added_blank_item=true}};rdx.dropdown_menu.prototype.get_field=function(){return this._field};rdx.dropdown_menu.prototype.get_component=function(){return this._list};rdx.dropdown_menu.prototype.get_component_type=function(){return rdx.form_constants.LIST};rdx.dropdown_menu.prototype.set_data=function(a){this._dropdown_options._input.val(rdx.i18n.get_string(a))};rdx.dropdown_menu.prototype.get_data=function(a){return this._dropdown_options._input.val()};rdx.dropdown_menu.prototype.mask=function(){rdx.mask.mask_component(this._parent,this.get_field().get_key())};rdx.dropdown_menu.prototype.unmask=function(){return rdx.mask.unmask_component(this._parent,this.get_field().get_key())};rdx.dropdown_menu.prototype.toggle_read_only=function(a){if(a){$(this._list).removeAttr("disabled");this._list.removeClass("form_field_disabled")}else{$(this._list).prop("disabled",true);this._list.addClass("form_field_disabled")}this._dropdown_options.set_readonly(!a)};rdx.ip_v4_v6=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._DEFAULT_PROPERTIES={disable_iptype_toggle:false};this._ipv4_col=$("<td>").css("padding","0px");this._ipv6_col=$("<td>").css("padding","0px");this._cb_col=$("<td>");this._label=$("<td>").append(rdx.i18n.get_string("rdx.ipv4v6_select"));var d=$("<tr>").append(this._ipv4_col).append(this._ipv6_col).append(this._cb_col).append(this._label);this._element=$("<table>").attr("border","0").attr("cellpadding","0").attr("cellspacing","0").addClass("ip_v4_v6_component").append($("<tbody>"));this._element.append(d);this._ipv4_component=new rdx.ip_v4(this._ipv4_col,b);this._ipv6_component=new rdx.ip_v6(this._ipv6_col,b);this._ip_selection_cb=new rdx.check_box(this._cb_col,b);this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._field.get_properties());this._set_properties()};rdx.ip_v4_v6.prototype.render=function(){this._ipv4_component.render();this._ipv6_component.render();this._ip_selection_cb.render();this._parent.append(this._element);this._ipv6_component.toggle_show_hide(false,this._ipv6_col);this._ip_selection_cb.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(b,a){if(a._ip_selection_cb.get_data()){a._ipv4_component.get_component().removeClass("error_text");a._ipv6_component.toggle_show_hide(true,a._ipv6_col);a._ipv4_component.toggle_show_hide(false,a._ipv4_col)}else{a._ipv4_component.get_component().removeClass("error_text");a._ipv6_component.toggle_show_hide(false,a._ipv6_col);a._ipv4_component.toggle_show_hide(true,a._ipv4_col)}$(a._parent).find(".rdx_error_container").addClass("hide")},[this]));return this};rdx.ip_v4_v6.prototype._set_properties=function(){if(this._field.is_read_only()){this._cb_col.hide();this._label.hide()}};rdx.ip_v4_v6.prototype.get_element=function(){if(this._ip_selection_cb.get_data()){return this._ipv6_component.get_component()}else{return this._ipv4_component.get_component()}};rdx.ip_v4_v6.prototype.add_event_handler=function(a,b){this._ipv4_component.add_event_handler(a,b);this._ipv6_component.add_event_handler(a,b);this._ip_selection_cb.add_event_handler(a,b)};rdx.ip_v4_v6.prototype.set_data=function(b){var a=rdx.utils.is_ipv6(b);if(a){this._ipv6_component.set_data(b);if(!(this._ip_selection_cb.get_data())){this._ip_selection_cb.set_data("true")}}else{this._ipv4_component.set_data(b);if(this._ip_selection_cb.get_data()){this._ip_selection_cb.set_data("false")}}if(this._properties.disable_iptype_toggle==true){this._ip_selection_cb.toggle_read_only(false)}};rdx.ip_v4_v6.prototype.get_data=function(){if(this._ip_selection_cb.get_data()){return this._ipv6_component.get_data()}else{return this._ipv4_component.get_data()}};rdx.ip_v4_v6.prototype.is_ipv6=function(){return this._ip_selection_cb.get_data()};rdx.ip_v4_v6.prototype.get_dependency_determinant_value=function(a){if(a==rdx.form_constants.dependency_determinant.TYPE){if(this.is_ipv6()){return"IPv6"}else{return"IPv4"}}return null};rdx.ip_v4_v6.prototype.get_component_type=function(){return rdx.form_constants.IPV4V6};rdx.ip_v4_v6.prototype.get_field=function(){return this._field};rdx.ip_v4_v6.prototype.get_component=function(){return this._element};rdx.ip_v4_v6.prototype.toggle_read_only=function(a){if(a){this._cb_col.show();this._label.show()}else{this._cb_col.hide();this._label.hide()}this._ipv4_component.toggle_read_only(a);this._ipv6_component.toggle_read_only(a);this._ip_selection_cb.toggle_read_only(a)};rdx.table_component=function(n,h){this._parent=typeof(n)=="string"?$("#"+n):n;this._field=h;this._properties=this._field._properties;this._element=$(document.createElement("div")).addClass("table_form_parent_div").addClass("smooth_all_corner");var m=[];var g=false;for(var o in this._properties.columns){var e=$.extend({},this._properties.columns[o]);m.push(new rdx.table_column(e))}this._DEFAULT_PROPERTIES={class_names:"table table_component",scrollable_header:true,params:null,add_row_click_handler_callback:null,edit_row_click_handler_callback:null,row_primary_keys:[],enable_remove_row:false};var b=$.extend(true,{},this._DEFAULT_PROPERTIES,this._properties.properties);if(b.details){b.details_renderer_callback=new rdx.callback(this,this._details_renderer)}this._table=new rdx.table(this._element,m,b);if(rdx.utils.is_defined(this._properties.add_row_click_handler_callback)){var d=$("<div>");d.addClass("rdx_top_panel");var f=$("<div>").addClass("rdx_title_panel");f.append(rdx.i18n.get_string(this._properties.title));var a=$("<a href='#' aria-label = 'Add/Edit data entries'>").addClass("op_wizard_link_panel op_wizard_view_link");a.bind(rdx.events.CLICK,{wizard:this},function(s){var q=s.data.wizard;var t=new rdx.callback_params({return_callback:new rdx.callback(q,q._handle_row_update)});q._properties.add_row_click_handler_callback.call_back([t]);s.preventDefault()});d.append(a);d.append(f)}if(rdx.utils.is_defined(this._properties.edit_row_click_handler_callback)){var p=new rdx.callback(function(s,q,t){var u=new rdx.callback_params({return_callback:new rdx.callback(q,q._handle_row_update)});t.call_back([s,u])},[this,this._properties.edit_row_click_handler_callback]);this._table.set_row_click_handler_callback(p)}if(this._properties.enable_remove_row===true){this._table.set_row_remove_click_handler_callback(new rdx.callback(function(s,q){q._table.delete_item(rdx.utils.get_formatted_response(s),q._properties.row_primary_keys)},[this]))}this._element.append(d);this._table.render();this._set_properties()};rdx.table_component.prototype._handle_row_update=function(b){if(rdx.utils.is_not_defined(b)){return}var a=b.operation;if(a=="add"){this._table.add_items([b.data])}else{if(a=="set"){var d=this._table.check_if_data_exist(b.data,this._properties.row_primary_keys,false,true);if(d==true){this._table.update_item_data(b.data,this._properties.row_primary_keys,false,true)}}}};rdx.table_component.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field)};rdx.table_component.prototype.render=function(){this._parent.append(this._element);return this};rdx.table_component.prototype.add_event_handler=function(a,b){};rdx.table_component.prototype.set_data=function(a){if(rdx.utils.is_not_defined(a)){return false}this._table.add_items(a,null,true);return true};rdx.table_component.prototype.get_data=function(){return this._table.get_rows_data()};rdx.table_component.prototype.get_component_type=function(){return rdx.form_constants.TABLE};rdx.table_component.prototype.get_field=function(){return this._field};rdx.table_component.prototype.get_component=function(){return this._table_element};rdx.password=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._element=rdx.dom_utils.get_element(rdx.form_constants.PASSWORD);this.add_eye();this._set_properties()};rdx.password.prototype.add_eye=function(){this._eye=$("<div>").addClass("password-eye hide")};rdx.password.prototype.render=function(){this._element.css({"padding-right":"25px"});$("<div>").css({position:"relative",display:"inline-block"}).append(this._element).append(this._eye).appendTo(this._parent);return this};rdx.password.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._element,this._field);if(this._field.is_read_only()){this._element.addClass("form_field_disabled")}};rdx.password.prototype.add_event_handler=function(a,b){this._element.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])});this.register_eye_handlers()};rdx.password.prototype.register_eye_handlers=function(){this._element.on("mouseenter",this.password_eye_handlers.password_mouse_in.bind(this));this._element.on("input",this.password_eye_handlers.password_oninput.bind(this));this._parent.on("mouseleave",this.password_eye_handlers.password_parent_mouse_leave.bind(this));this._eye.on("mouseleave",this.password_eye_handlers.eye_mouse_leave.bind(this));this._eye.on("mousedown",this.password_eye_handlers.eye_mouse_down.bind(this));this._eye.on("mouseup",this.password_eye_handlers.eye_mouse_up.bind(this))};rdx.password.prototype.password_eye_handlers={eye_mouse_up:function(){this._element.attr("type","password");this._eye.removeClass("password-eye-closed")},eye_mouse_down:function(){this._element.attr("type","text");this._eye.addClass("password-eye-closed")},eye_mouse_leave:function(a){this._element.attr("type","password");this._eye.removeClass("password-eye-closed")},password_parent_mouse_leave:function(a){this._eye.addClass("hide")},password_oninput:function(a){this._eye.removeClass("hide")},password_mouse_in:function(a){if(this._element.is(":focus")){this._eye.removeClass("hide")}}};rdx.password.prototype.set_data=function(a){return this._element.val(a)};rdx.password.prototype.get_data=function(){return this._element.val()};rdx.password.prototype.get_component_type=function(){return rdx.form_constants.PASSWORD};rdx.password.prototype.get_field=function(){return this._field};rdx.password.prototype.get_component=function(){return this._element};rdx.radio_group=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={add_border:false,class_names:"radio_group",render_mode:"column",sub_text:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this._field=a;this._radio_group_container=null;this._radio_button_elements=new Array();this._prev_button_cell=null;this._prev_text_cell=null;this._create_radio_group()};rdx.radio_group.prototype._create_radio_group=function(){var e=this._field.get_key();var t=[];var o=[];var b=[];var u=this._field.get_formatter();if(rdx.utils.is_defined(u)){o=u.get_map_keys();t=u.get_map_keys();b=u.get_map_values()}this._radio_group_container=$("<table>").addClass(this._properties.class_names).attr("cellPadding",0).attr("cellSpacing",0).append($("<tbody>"));var w=$("<tr>");this._radio_group_container.append(w);for(var p=0;p<t.length;p++){var f=t[p];var n=$("<td>");var v=$("<input>").attr("type","radio").attr("name",e).attr("value",f).attr("tabindex",0);var m=$('<label class="radio_label">').append(v).appendTo(n);m.append($("<span>").append(o[p]));if(rdx.utils.is_defined(this._properties.sub_text,b)&&this._properties.render_mode==="row"&&rdx.utils.is_defined(this._properties.sub_text[b[p]])){var q=this._properties.sub_text[b[p]];n.attr("valign","top").addClass("rdx_radio_single_button");var d=$("<table>").attr("cellPadding",0).attr("cellSpacing",0).addClass("rdx_radio_label_container").append($("<tbody>"));d.append($("<tr>").append(n));var a=$("<div>").addClass("rdx_radio_subtext");if(this._properties.add_border==true){d.addClass("rdx_border rdx_radio_grouping_with_border");n.addClass("rdx_background");a.addClass("rdx_background")}if(rdx.utils.is_object(q)&&!rdx.utils.is_string(q)){var g=this._properties.add_border==true?"rdx_radio_group_title":"";a.append($("<div>").addClass(g).append($("<div>").addClass("radio_desc").append(rdx.i18n.get_string(q.text)))).append(q.renderer_callback.call_back([q]))}else{a.append(rdx.i18n.get_string(q))}var h=$("<tr>").append($("<td>").attr("colspan",2).append(a));d.append(h);var s=$("<td>").addClass("rdx_radio_container").append(d);w.append(s);if(p==t.length-1){s.addClass("rdx_radio_last_container")}}else{w.append(n)}this._radio_button_elements.push(v);v.bind(rdx.events.CHANGE,{radio_group:this,button_cell:n},function(z){z.data.radio_group._set_current(z.data.button_cell,z.data.text_cell)});if(p==0){v.prop("checked",true);n.addClass("current_button");this._prev_button_cell=n}if(this._properties.render_mode=="row"){w=$("<tr>");this._radio_group_container.append(w)}}this._set_properties()};rdx.radio_group.prototype._set_current=function(a){if(rdx.utils.is_defined(this._prev_button_cell)){this._prev_button_cell.removeClass("current_button")}a.addClass("current_button");this._prev_button_cell=a};rdx.radio_group.prototype.render=function(){this._parent.append(this._radio_group_container);return this};rdx.radio_group.prototype.get_data=function(){for(var b=0;b<this._radio_button_elements.length;b++){var a=this._radio_button_elements[b];if(a.prop("checked")){return a.val()}}return null};rdx.radio_group.prototype.set_data=function(d){for(var b=0;b<this._radio_button_elements.length;b++){var a=this._radio_button_elements[b];if(d==a.val()){a.prop("checked",true);a.trigger(rdx.events.CHANGE)}}};rdx.radio_group.prototype._set_properties=function(){for(var b=0;b<this._radio_button_elements.length;b++){var a=this._radio_button_elements[b];if(this._field.is_read_only()){a.prop("disabled",true)}}};rdx.radio_group.prototype.add_event_handler=function(d,e){for(var b=0;b<this._radio_button_elements.length;b++){var a=this._radio_button_elements[b];a.bind(d,{ns_callback:e},function(f){f.data.ns_callback.call_back([f])})}};rdx.radio_group.prototype.get_component_type=function(){return rdx.form_constants.RADIO_GROUP};rdx.radio_group.prototype.get_field=function(){return this._field};rdx.radio_group.prototype.get_component=function(){for(var b=0;b<this._radio_button_elements.length;b++){var a=this._radio_button_elements[b];if(a.prop("checked")){return a}}return null};rdx.radio_group.prototype.toggle_read_only=function(d){for(var b=0;b<this._radio_button_elements.length;b++){var a=this._radio_button_elements[b];if(d){a.removeAttr("disabled");a.removeClass("form_field_disabled")}else{a.prop("disabled",true);a.addClass("form_field_disabled")}}};rdx.text_area=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._DEFAULT_PROPERTIES={download_content_link:null,spellcheck:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._field=b;this._element=null;this._text_area=rdx.dom_utils.get_element(rdx.form_constants.TEXT_AREA);this._text_area.attr("spellcheck",this._properties.spellcheck);this._text_area.attr("id",this._properties.id);this._set_properties();this._view_link_map={}};rdx.text_area.prototype.render=function(){var a=this._field.get_watermark();if(rdx.utils.is_not_empty(a)){this._text_area.addClass("rdx_watermark");this._text_area.attr("placeholder",a)}if(this._field.get_download_content_url().length>0){var d={url:this._field.get_download_content_url(),filename:this._field.get_download_content_file_name()};var b=rdx.form_utils.add_save_as_link(this._text_area,this._parent,d);this._element=b}else{this._element=this._text_area;if(rdx.utils.is_defined(this._field.get_add_link())){var e=rdx.form_utils.add_form_field_link(this,this._element,this._field,this._view_link_map,this._field.get_add_link());this._parent.append(e)}else{this._parent.append(this._element)}}return this};rdx.text_area.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._text_area,this._field);if(this._field.is_read_only()){this._text_area.attr("readonly","true");this._text_area.addClass("form_field_disabled")}};rdx.text_area.prototype.add_event_handler=function(a,b){this._text_area.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.text_area.prototype.set_data=function(a){if(rdx.utils.is_defined(rdx.HTML_ENCODING_ENABLED)&&rdx.HTML_ENCODING_ENABLED===true){a=rdx.utils.html_decode(a)}return this._text_area.val(a)};rdx.text_area.prototype.get_data=function(){return $.trim(this._text_area.val())};rdx.text_area.prototype.get_component_type=function(){return rdx.form_constants.TEXT_AREA};rdx.text_area.prototype.get_field=function(){return this._field};rdx.text_area.prototype.get_component=function(){return this._element};rdx.text_area.prototype.toggle_read_only=function(a){if(a){this._text_area.removeAttr("readonly");this._text_area.removeClass("form_field_disabled")}else{this._text_area.attr("readonly","true");this._text_area.addClass("form_field_disabled")}};rdx.text_area.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._element}if(a){b.show()}else{b.hide()}};rdx.text_area.prototype.get_selected_text=function(){var b=this._text_area[0];var g={};if(document.selection!=undefined){b.focus();var f=document.selection.createRange();var a=f.duplicate();a.moveToElementText(b);a.setEndPoint("EndToEnd",f);var d=a.text.length-f.text.length;var e=d+f.text.length;g.start_position=d;g.end_position=e;g.selected_text=f.text}else{if(rdx.utils.is_defined(b.selectionStart)){var d=b.selectionStart;var e=b.selectionEnd;g.start_position=d;g.end_position=e;g.selected_text=b.value.substring(d,e)}}return g};rdx.text_area.prototype.set_watermark=function(a){if(rdx.utils.is_not_defined(a)){return}this._text_area.attr("placeholder",a)};rdx.spinner_component=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={max:10,min:1,start_value:null,drop_down_added:false,increment:1,decrement:1,spin_only:false,populate_spinner_properties_callback:null,spinner_input_width:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b._properties)};rdx.spinner_component.prototype.render=function(){this._create_spinner_component();this._attach_event_listners();return this};rdx.spinner_component.prototype._create_spinner_component=function(){this._wrapper_for_spinner=$("<div>").addClass("wrapper_for_spinner");this._spinner_input=$("<input>").val(parseFloat(this._properties.start_value)||parseFloat(this._properties.min)).addClass("spinner_input");if(this._properties.spin_only==true){this._spinner_input.attr("readonly","readonly")}if(rdx.utils.is_defined(this._properties.spinner_input_width)){this._spinner_input.width(this._properties.spinner_input_width)}this._wrapper_for_spinner.append(this._spinner_input);var h=$("<div>").addClass("button_wrapper");this._spinner_down_arrow=$("<button>").addClass("down_button").attr("aria-label","Decrease");this._spinner_up_arrow=$("<button>").addClass("up_button").attr("aria-label","Increase");h.append(this._spinner_up_arrow).append(this._spinner_down_arrow);this._wrapper_for_spinner.append(h);if(rdx.utils.is_defined(this._properties.spinner_settings)){var d=this._properties.spinner_settings[this._properties.title];if(rdx.utils.is_defined(d)){if(rdx.utils.is_defined(d.increment)&&d.increment!=1){this._properties.increment=d.increment;this._properties.decrement=d.increment}if(rdx.utils.is_defined(d.units)&&d.units.length>1){var b={properties:{multi_select:false,size:1,mandatory:true}};var e=new rdx.form_field(b);var m=new rdx.list(this._wrapper_for_spinner,e);m.render();m.add_data_items(d.units);var g=$(m._list[0]);var f=this;g.bind(rdx.events.CHANGE,function(o){if(rdx.utils.is_defined(d.units)){for(var n=0;n<d.units.length;n++){if(d.units[n]==g.val()){f._properties.max=parseFloat(f._properties.max)*parseFloat(d.conversion[n])}if(g.val()==d.units[0]){f._properties.max=f._dummy_buffer;f._spinner_input.val(parseFloat(f._properties.start_value))}}}})}else{var a=$("<label>").addClass("unit_label").text(d.units[0]);this._wrapper_for_spinner.append(a)}}}if(rdx.utils.is_defined(this._properties.populate_spinner_properties_callback)){this._properties.populate_spinner_properties_callback.call_back([this._properties])}this._dummy_buffer=parseFloat(this._properties.max);this._parent.append(this._wrapper_for_spinner)};rdx.spinner_component.prototype._attach_event_listners=function(){if(rdx.utils.is_defined(this._properties.max)&&typeof(this._properties.max)=="string"&&this._properties.max.indexOf(",")>-1){this._properties.max=this._properties.max.replace(",","")}if(rdx.utils.is_defined(this._properties.spinner_settings)){if(rdx.utils.is_defined(this._properties.spinner_settings[this._properties.title])&&rdx.utils.is_defined(this._properties.spinner_settings[this._properties.title].default_unit)){if(rdx.utils.is_defined(this._properties.max)){var a=this._properties.max.split(" ");if(a.length>1&&a[1]!=this._properties.spinner_settings[this._properties.title].default_unit){var d=a[1];this._properties.max=parseFloat(a[0])*parseFloat(this._properties.spinner_settings[this._properties.title].unit_conversions[d])}}}}var b=this;this._spinner_down_arrow.bind(rdx.events.CLICK,function(e){e.stopPropagation();if($(b._spinner_input).hasClass("form_field_disabled")){return}if(b._spinner_input.val()==""){b._spinner_input.val(parseFloat(b._properties.start_value)||parseFloat(b._properties.min))}else{var g=parseFloat(b._spinner_input.val());if(g==parseFloat(b._properties.min)){g=g}else{if(g%b._properties.decrement){var f=(g%b._properties.decrement);g=g-f}else{g=g-b._properties.decrement}}if(g<0){g=0}b._spinner_input.val(g);b._wrapper_for_spinner.change()}});this._spinner_up_arrow.bind(rdx.events.CLICK,function(f){f.stopPropagation();if($(b._spinner_input).hasClass("form_field_disabled")){return}if(b._spinner_input.val()==""){b._spinner_input.val(parseFloat(b._properties.start_value)||parseFloat(b._properties.min))}else{var g=parseFloat(b._spinner_input.val());if(g==parseFloat(b._properties.max)){g=g}else{if(g%b._properties.increment){var e=(b._properties.increment-g%b._properties.increment);g=g+e}else{g=g+b._properties.increment}}if(g<0){g=0}b._spinner_input.val(g);b._wrapper_for_spinner.change()}});if(b._properties.spin_only=="false"){this._spinner_input.bind(rdx.events.KEY_PRESS,function(g){var h=g||window.event;var e=h.keyCode||h.which;e=String.fromCharCode(e);var f=/^[0-9]*\.?[0-9]*$/;if(!f.test(e)){h.returnValue=false;if(h.preventDefault){h.preventDefault()}}});this._spinner_input.bind(rdx.events.KEYUP,function(f){var h=b._spinner_input.val();var e=parseFloat(b._properties.max);if(!(isNaN(e))){if(parseFloat(h)>e){var g=h.substring(0,h.length-1);if(h.length==1){g=parseFloat(b._properties.start_value)||parseFloat(this._properties.min)}b._spinner_input.val(parseFloat(g))}}})}};rdx.spinner_component.prototype.get_component=function(){return this._spinner_input};rdx.spinner_component.prototype.get_component_type=function(){return rdx.form_constants.SPINNER};rdx.spinner_component.prototype.get_field=function(){return this._field};rdx.spinner_component.prototype.set_data=function(a){this._spinner_input.val(a)};rdx.spinner_component.prototype.get_data=function(){return parseFloat(this._spinner_input.val())};rdx.spinner_component.prototype.add_event_handler=function(a,b){this._wrapper_for_spinner.bind(a,{rdx_change_handler_callback:b,parent:this._parent,spinner_get_data_callback:new rdx.callback(this,this.get_data),spinner_set_data_callback:new rdx.callback(this,this.set_data)},function(d){d.data.rdx_change_handler_callback.call_back([d])})};rdx.text_box=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._DEFAULT_PROPERTIES={trim_data:true,remove_escape_chracters:false,mask_element:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._field=b;this._properties.custom_button_properties=rdx.utils.is_defined(b._properties.custom_button_properties)?b._properties.custom_button_properties:null;this._element=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX);this._set_properties();this._data=null;this._view_link_map={}};rdx.text_box.prototype.render=function(){var a=this._field.get_watermark();if(rdx.utils.is_not_empty(a)){this._element.addClass("rdx_watermark");this._element.attr("placeholder",a)}if(((rdx.utils.is_defined(this._field.get_add_view_name())||rdx.utils.is_defined(this._field.get_set_view_name())||rdx.utils.is_defined(this._field.get_view_view_name())))&&this._field.is_add_edit_enabled()){var b=rdx.form_utils.add_form_field_link(this,this._element,this._field,this._view_link_map);this._parent.append(b)}else{this._parent.append(this._element)}if(rdx.utils.is_defined(this._properties.custom_button_properties)){rdx.form_utils._add_custom_button_for_textbox(this._parent,this._element,this._field.get_form_holder(),this._field.get_form_holder().get_form(),this._properties.custom_button_properties)}return this};rdx.text_box.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._element,this._field);if(this._field.is_read_only()){this._element.attr("readonly","true");this._element.addClass("form_field_disabled");this._element.bind(rdx.events.KEYDOWN,null,this._prevent_default)}};rdx.text_box.prototype._prevent_default=function(a){if(a.keyCode==rdx.keycodes.BACKSPACE){a.preventDefault()}};rdx.text_box.prototype.add_event_handler=function(a,b){this._element.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.text_box.prototype.set_data=function(a){if(rdx.utils.is_defined(rdx.HTML_ENCODING_ENABLED)&&rdx.HTML_ENCODING_ENABLED===true){a=rdx.utils.html_decode(a)}return this._element.val(a)};rdx.text_box.prototype.get_data=function(){var a="";if(this._properties.trim_data==true||this._properties.trim_data=="true"){a=$.trim(this._element.val())}else{a=this._element.val()}if(this._field._properties.replace_no_break_space==true||this._field._properties.replace_no_break_space=="true"){a=a.replace(/\u00A0/g," ")}return a};rdx.text_box.prototype.get_component_type=function(){return rdx.form_constants.TEXT_BOX};rdx.text_box.prototype.get_field=function(){return this._field};rdx.text_box.prototype.get_component=function(){return this._element};rdx.text_box.prototype.toggle_read_only=function(a){if(a){this._element.removeAttr("readonly");this._element.removeClass("form_field_disabled");this._element.unbind(rdx.events.KEYDOWN,this._prevent_default)}else{this._element.attr("readonly","true");this._element.addClass("form_field_disabled");this._element.bind(rdx.events.KEYDOWN,null,this._prevent_default)}};rdx.text_box.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._element}if(a){b.show()}else{b.hide()}};rdx.text_box.prototype.set_watermark=function(a){if(rdx.utils.is_not_defined(a)){return}this._element.attr("placeholder",a)};rdx.text_box.prototype.get_parent=function(){return this._parent};rdx.ip_textfield=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._DEFAULT_PROPERTIES={trim_data:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._field=b;this._element=rdx.dom_utils.get_element(rdx.form_constants.IP_TEXTFIELD);this._set_properties();this._data=null;this._view_link_map={}};rdx.ip_textfield.prototype.render=function(){this._register_key_listners();var a=this._field.get_watermark();if(rdx.utils.is_not_empty(a)){this._element.addClass("rdx_watermark");this._element.attr("placeholder",a)}if((rdx.utils.is_defined(this._field.get_add_view_name())||rdx.utils.is_defined(this._field.get_set_view_name())||rdx.utils.is_defined(this._field.get_view_view_name()))){var b=rdx.form_utils.add_form_field_link(this,this._element,this._field,this._view_link_map);this._parent.append(b)}else{this._parent.append(this._element)}return this};rdx.ip_textfield.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._element,this._field);if(this._field.is_read_only()){this._element.attr("readonly","true");this._element.addClass("form_field_disabled");this._element.removeAttr("contenteditable");this._element.bind(rdx.events.KEYDOWN,null,this._prevent_default)}};rdx.ip_textfield.prototype._prevent_default=function(a){if(a.keyCode==rdx.keycodes.BACKSPACE){a.preventDefault()}};rdx.ip_textfield.prototype.add_event_handler=function(a,b){this._element.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.ip_textfield.prototype._add_padding_for_ipv4_address=function(){var e=this._element.text();var a=e.split(".");var d="";if(a.length>=1){for(var b=0;b<a.length;b++){a[b]=rdx.utils.trim(a[b]);var f=a[b]+((b<(a.length-1))?($("<span>").attr("class","ip_padding").html(".")).get(0).outerHTML:"");d=d+f}}return d};rdx.ip_textfield.prototype._remove_padding_for_ipv4_address=function(){var a=this._element.text().split(".");var d="";if(a.length>=1){for(var b=0;b<a.length;b++){a[b]=rdx.utils.trim(a[b])}d=a.join(".")}return d};rdx.ip_textfield.prototype.is_ipv6=function(){return(rdx.utils.is_empty(this.get_data())||this.get_data().indexOf(".")>=0)?0:1};rdx.ip_textfield.prototype._register_key_listners=function(){this.add_event_handler(rdx.events.FOCUS_OUT,new rdx.callback(this,function(a){if(rdx.utils.is_not_empty(this.get_data())&&!(this.is_ipv6())){var b=this._add_padding_for_ipv4_address();if(rdx.utils.is_not_empty(b)){this.set_data(b)}}}));this.add_event_handler(rdx.events.FOCUS_IN,new rdx.callback(this,function(e){if(!(this._field.is_read_only())&&rdx.utils.is_not_empty(this.get_data())&&!(this.is_ipv6())){var b=this._remove_padding_for_ipv4_address();if(rdx.utils.is_not_empty(b)){this.set_data(b)}}var a;var d;if(rdx.utils.is_defined(document.createRange)){a=document.createRange();a.selectNodeContents(this._element.get(0));a.collapse(false);d=window.getSelection();d.removeAllRanges();d.addRange(a)}else{if(rdx.utils.is_defined(document.selection)){a=document.body.createTextRange();a.moveToElementText(this._element.get(0));a.collapse(false);a.select()}}}))};rdx.ip_textfield.prototype.set_data=function(a){var b=this._element.html(a);if(this._element.attr("readonly")==true||this._element.attr("readonly")=="true"){this._element.removeAttr("contenteditable")}return b};rdx.ip_textfield.prototype.get_data=function(){if(this._properties.trim_data==true||this._properties.trim_data=="true"){return this.is_ipv6?$.trim(this._element.text()):$.trim(this._remove_padding_for_ipv4_address(this._element.text()))}else{return this.is_ipv6?this._element.text():this._remove_padding_for_ipv4_address(this._element.text())}};rdx.ip_textfield.prototype.get_component_type=function(){return rdx.form_constants.IP_TEXTFIELD};rdx.ip_textfield.prototype.get_field=function(){return this._field};rdx.ip_textfield.prototype.get_component=function(){return this._element};rdx.ip_textfield.prototype.toggle_read_only=function(a){if(a){this._element.removeAttr("readonly");this._element.removeClass("form_field_disabled");this._element.attr("contenteditable","true");this._element.unbind(rdx.events.KEYDOWN,this._prevent_default)}else{this._element.attr("readonly","true");this._element.removeAttr("contenteditable");this._element.addClass("form_field_disabled");this._element.bind(rdx.events.KEYDOWN,null,this._prevent_default)}};rdx.ip_textfield.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._element}if(a){b.show()}else{b.hide()}};rdx.ip_textfield.prototype.set_watermark=function(a){if(rdx.utils.is_not_defined(a)){return}this._element.attr("placeholder",a)};rdx.ip_textfield.prototype.get_parent=function(){return this._parent};rdx.link_component=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTY={view:null,no_data_view:null,model_method:null,view_context:null,refresh_form:false,entity_type:null,title_renderer_callback:null};this._DEFAULT_PROPERTIES={mandatory:false,mandatory_error_message:null,use_slider:true,disable_if_no_data:false,title:null,show_none:true,none_view:null,links:[],type:rdx.OR};this._none_container=null;this._links_list=[];this._properties=$.extend(true,this._DEFAULT_PROPERTIES,b.get_properties());this._resource_data=null;this._total_count=0;this._total_requests=this._properties.links.length;this._mask_id=rdx.mask.get_id();this._section_info_list=[];this._last_link_index=null};rdx.link_component.prototype.render=function(){this._link_container=$("<div>");this._none_container=$("<div>").addClass("rdx_form_link rdx_form_none_link rdx_form_no_border");var d=rdx.dom_utils.get_element(rdx.form_constants.LINK).append(rdx.i18n.get_string("rdx.link_select_msg"));this._link_container.append(this._none_container.append(d));this._none_container.hide();if(this._properties.show_none===true){this._none_container.show();this._none_container.bind(rdx.events.CLICK,{link_component:this},function(m){var h=m.data.link_component;if(rdx.utils.is_not_defined(h._properties.none_view)){return}rdx.view_utils.show_view_in_slider(rdx.utils.get_view(h._properties.none_view),new rdx.callback(h,h.refresh),h._resource_data)})}for(var f=0;f<this._properties.sections.length;f++){var g=this._properties.sections[f];var e=null;if(rdx.utils.is_defined(g.title)){e=$("<div>").addClass("rdx_form_title");e.append(rdx.i18n.get_string(g.title));e.hide();this._link_container.append(e)}this._section_info_list[f]={title_container:e,links:g.links,total_requests:g.links.length,total_count:0};for(var a=0;a<g.links.length;a++){var b=$("<div>").addClass("rdx_form_link");var d=rdx.dom_utils.get_element(rdx.form_constants.LINK);this._link_container.append(b.append(d));if(this._properties.show_none==true){b.hide()}else{b.addClass("show_none_link")}this._links_list.push({container:b,element:d,link_property:g.links[a],section_ind:f})}}this._parent.addClass("no_padding_field");this._parent.append(this._link_container);return this};rdx.link_component.prototype.add_event_handler=function(a,b){};rdx.link_component.prototype.validate=function(){if(this._field.is_hidden()==true||this._field.is_read_only()){return null}if(this._properties.mandatory==true&&this._total_count==0&&rdx.utils.is_defined(this._properties.mandatory_error_message)){return rdx.i18n.get_string(this._properties.mandatory_error_message)}return null};rdx.link_component.prototype.set_data=function(b,a){this._resource_data=a;this._set_properties();this.refresh()};rdx.link_component.prototype._set_properties=function(){for(var a=0;a<this._links_list.length;a++){this._links_list[a]["container"].bind(rdx.events.CLICK,{link_component:this,link_property:this._links_list[a]["link_property"]},function(b){var g=b.data.link_component;var n=g._properties;var p=b.data.link_property;if(rdx.utils.is_defined(p.view)){var e=new rdx.context();var m=p.view_context;e.set_context_data(g._resource_data,m);var o=e.get_url_params();if(rdx.utils.is_defined(p.entity_type)&&rdx.utils.is_array(p.entity_type)){var d=new rdx.model_executor_service(new rdx.callback(g.get_view_for_multiple_entity,[g,p]),null,true);for(var h=0;h<p.entity_type.length;h++){d.add(rdx.model_constants.GET_COUNT,rdx.utils.get_resource(p.entity_type[h]),null,null,o,this._parent)}d.execute()}else{var f=p.resource_defn||rdx.utils.get_resource(p.entity_type);rdx.model.get_count(f,e.get_url_params(),new rdx.callback(g._get_slider_view,[g,p]))}}})}};rdx.link_component.prototype.get_view_for_multiple_entity=function(a,d,b){var e=d.get_max_count_and_corresponding_resource(a);if(rdx.utils.is_object_not_empty(e)){d._get_slider_view(e.count,d,b)}};rdx.link_component.prototype._get_slider_view=function(f,d,b){var e=b.view;if(f==0&&rdx.utils.is_defined(b.no_data_view)){e=b.no_data_view}if(!(f==0&&d._properties.disable_if_no_data)){var a=rdx.utils.get_view(e);rdx.view_utils.show_view_in_slider(a,new rdx.callback(d,d.refresh),d._resource_data,d._field.get_view_context())}};rdx.link_component.prototype.refresh=function(){rdx.mask.mask_component(this._link_container,"__link_container"+this._mask_id);this._total_requests=this._links_list.length;this._total_count=0;for(var a=0;a<this._section_info_list.length;a++){this._section_info_list[a]["total_requests"]=this._section_info_list[a]["links"].length;this._section_info_list[a]["total_count"]=0;if(this._properties.show_none==true&&rdx.utils.is_defined(this._section_info_list[a]["title_container"])){this._section_info_list[a]["title_container"].hide()}}this._last_link_index=null;for(var b=0;b<this._links_list.length;b++){this._refresh(b)}};rdx.link_component.prototype._refresh=function(d){var o=this._links_list[d]["link_property"];if(rdx.utils.is_not_defined(o.entity_type)){return}var f=this._links_list[d]["element"];var m=new rdx.callback(this,this._get_binded_resource_count,[e,d,this._links_list[d]["section_ind"]]);var h=new rdx.callback(function(q,s,u,t,p){s._get_entity_count_response_arrived(0,u,t,p)},[this,e,d,this._links_list[d]["section_ind"]]);if(rdx.utils.is_defined(o.entity_type)&&rdx.utils.is_array(o.entity_type)){var a=new rdx.model_executor_service(m,h,true);for(var g=0;g<o.entity_type.length;g++){var e=rdx.utils.get_resource(o.entity_type[g]);var n=null;if(rdx.utils.is_defined(o.view_context)){var b=new rdx.context(o.view_context);b.set_context_data(this._resource_data);n=b.get_url_params()}a.add(rdx.model_constants.GET_COUNT,rdx.utils.get_resource(o.entity_type[g]),null,null,n,this._parent)}a.execute()}else{var e=o.resource_defn||rdx.utils.get_resource(o.entity_type);var m=new rdx.callback(this,this._get_entity_count_response_arrived,[e,d,this._links_list[d]["section_ind"]]);var h=new rdx.callback(function(q,s,u,t,p){s._get_entity_count_response_arrived(0,u,t,p)},[this,e,d,this._links_list[d]["section_ind"]]);var n=null;if(rdx.utils.is_defined(o.view_context)){var b=new rdx.context(o.view_context);b.set_context_data(this._resource_data);n=b.get_url_params()}rdx.model.get_count(e,n,m,this._parent,h)}};rdx.link_component.prototype.get_max_count_and_corresponding_resource=function(e){var d=e.get_collated_response();var m=e.get_collated_resource();var a=e.get_collated_result();var h={};if(rdx.utils.is_defined(d)&&this._properties.type==rdx.OR){var g=0,f=null;for(var b=0;b<d.length;b++){if(rdx.utils.is_defined(d[b])&&d[b]>0){g=d[b];f=m[b];break}}h={count:g,resource:f}}return h};rdx.link_component.prototype._get_binded_resource_count=function(e,d,a,b){var f=this.get_max_count_and_corresponding_resource(e);if(rdx.utils.is_object_not_empty(f)){this._get_entity_count_response_arrived(f.count,f.resource,a,b)}};rdx.link_component.prototype._get_entity_count_response_arrived=function(A,z,v,a){this._total_requests=this._total_requests-1;this._total_count=this._total_count+A;this._section_info_list[a];this._section_info_list[a]["total_requests"]=this._section_info_list[a]["total_requests"]-1;this._section_info_list[a]["total_count"]=this._section_info_list[a]["total_count"]+A;var e=this._links_list[v]["element"];var s=this._links_list[v]["container"];var t=A;var b=this._links_list[v]["link_property"];var D=rdx.utils.is_defined(b.title)?rdx.i18n.get_string(b.title):rdx.i18n.get_string(z.obj_type);var p=e.html().match(/(?:<b>)?(.+?)(?:\<)/i);var g=t;if(g==0){g="No"}if(isNaN(t)){g=""}try{var d=parseInt(g);if(d>1){var C=D;var f=C.charAt(C.length-1);var u=C.charAt(C.length-2);var o=["a","e","i","o","u"];if(f=="y"&&$.inArray(u,o)==-1){C=C.substring(0,C.length-1);C+="ies"}else{if(f=="x"){C+="es"}else{C+="s"}}D=C}}catch(h){}if(rdx.utils.is_defined(b.title_renderer_callback)){var B="";if(rdx.utils.is_defined(b.entity_type)&&rdx.utils.is_array(b.entity_type)){var q={count:t,title:rdx.utils.is_defined(z)?rdx.i18n.get_string(z.obj_type):""};B=b.title_renderer_callback.call_back([q])}else{B=b.title_renderer_callback.call_back([t])}e.html(B);if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().op_view_links.push({clickable:e,title:B})}}else{e.html("<b>"+g+"</b> "+D);var m=rdx.utils.is_defined(b.title)?rdx.i18n.get_string(b.title):rdx.i18n.get_string(z.obj_type);if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().op_view_links.push({clickable:e,title:m})}}if(A>0){if(this._properties.show_none==true&&rdx.utils.is_defined(this._section_info_list[a]["title_container"])){this._section_info_list[a]["title_container"].show()}s.show();if(rdx.utils.is_defined(this._none_container)){this._none_container.hide()}rdx.mask.unmask_component(this._link_container,"__link_container"+this._mask_id);if(this._properties.show_none==true){this._check_for_last_index_page(v)}}else{if(this._properties.show_none==true){s.hide()}}if(this._total_requests<=0&&rdx.utils.is_defined(this._none_container)){if(this._total_count==0){if(this._properties.show_none==true){this._none_container.show();for(var n=0;n<this._section_info_list.length;n++){if(rdx.utils.is_defined(this._section_info_list[n]["title_container"])){this._section_info_list[n]["title_container"].hide()}}}}else{if(rdx.utils.is_defined(this._last_link_index)){var w=this._links_list[this._last_link_index]["container"];w.addClass("rdx_remove_link_border")}}rdx.mask.unmask_component(this._link_container,"__link_container"+this._mask_id)}};rdx.link_component.prototype._check_for_last_index_page=function(a){if(rdx.utils.is_defined(this._last_link_index)){if(a>this._last_link_index){this._links_list[this._last_link_index]["container"].removeClass("rdx_remove_link_border");this._last_link_index=a}}else{this._last_link_index=a}};rdx.link_component.prototype.get_data=function(b,a){};rdx.link_component.prototype.get_component_type=function(){return rdx.form_constants.LINK};rdx.link_component.prototype.get_field=function(){return this._field};rdx.link_component.prototype.get_component=function(){return this._link_container};rdx.expression_editor=function(b,a){this._parent=b;this._field=a;this._DEFAULT_PROPERTIES={class_names:"expression_editor",prefix_combo_map:[],standalone_evaluator:false,render_textarea_in_evaluator:true,evaluate_action:false,details:null,evaluate_window_title:"rdx.expression_evaluate.title",is_epa:false,is_evaluate_required:true,is_variable_support_required:true,switch_link_required:false,close_builder_dialog_callback:null,get_epa_pi_data:false,show_epa_editor_pi_editor:false,epa_common_scans:["Process","Service","File","File Time","Operating System","Mount Point"]};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this._properties.extension_support_required=rdx.EXTENSION_SUPPORT_IN_EXPRESSION_EDITOR;this.prefix_combo_map=rdx.utils.is_defined(a._properties.prefix_combo_map)?a._properties.prefix_combo_map:[];this._operations_to_exclude=rdx.utils.is_defined(a._properties.operations_to_exclude)?a._properties.operations_to_exclude:null;this._input_value=null;this._multi_exp_mode=false;this._dropdown_created=[];this._components_created=[];this._start_new_exp=true;this._multi_exp_mode_start_point=false;this._classic_expression_mode=false;this._classic_expression_editor_component=null;this._flowtype_selected=null;this._selected_class_order=[];this._expression_textarea_parent=$("<div>").addClass("expression_textbox").attr("tabindex","0");this.expression_editor_saved_expression={name:[],value:[]};this._nsvariables={ulong:[],text:[],map:[]};this._map_values={name:[],value:[]};this._PAT_SET_METHODS=["CONTAINS_ANY","ENDSWITH_ANY","EQUALS_ANY","CONTAINS_INDEX","STARTSWITH_INDEX","ENDSWITH_INDEX","EQUALS_INDEX","SUBSTR_ANY","AFTER_STR_ANY","BEFORE_STR_ANY"];this._DATA_SET_METHODS=["CONTAINS_ANY","STARTSWITH_ANY","ENDSWITH_ANY","EQUALS_ANY","CONTAINS_INDEX","STARTSWITH_INDEX","ENDSWITH_INDEX","EQUALS_INDEX","SUBSTR_ANY"];this._STRING_MAP_METHODS=["IS_STRINGMAP_KEY","MAP_STRING"];this._component=null;this._label_span=$("<span>").addClass("rdx_left");this._sub_dialog_opened=false;this._error_text_div=$("<div>").addClass("rdx_error_tooltip_dialogbox");this._error_label_parent=$("<div>").addClass("rdx_error_container").append($("<div>").addClass("rdx_icon_div")).append(this._error_text_div).addClass("hide");this._extended_functions={};this._extensionfunctionreturntype_map={NSTEXT:"text_t",NSBOOL:"bool_at",NSNUM:"num_at",NSDOUBLE:"double_at"}};rdx.expression_editor.prototype.render=function(){this._dropdown_created=[];var b=$("<div>").addClass("expression_builder_exp dangling_component");var a=$("<div>").addClass("expression_evaluate dangling_component");this.create_expression_textarea(this._expression_textarea_parent);this._pe_expression_builder_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link").append(rdx.i18n.get_string("rdx.expression_builder.title"));this._pe_expression_builder_link_div.bind(rdx.events.CLICK,{expression:this,expression_textarea:this._expression_textarea_parent},function(e){link_callback=function(g){var f=e.data.expression._expression_textarea.get_data();e.data.expression._expression_textarea.set_data(f+g);link_callback=null};rdx.applet_loader.launch_method(null,"ns.im.view.PEPolicyEditor","openExprDialog"," ,appContext,link_callback")});this._expression_builder_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link");if(this._properties.is_epa===true){b.append(this._pe_expression_builder_link_div);this._expression_builder_link_div.addClass("pe_expression_editor").append(rdx.i18n.get_string("rdx.epa_editor"))}else{if(this._properties.show_epa_editor_pi_editor===true){this._pe_expression_builder_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link pe_expression_editor").append(rdx.i18n.get_string("rdx.unified_epa_editor"));this._pe_expression_builder_link_div.bind(rdx.events.MOUSE_DOWN+" "+rdx.events.KEYDOWN,{expression:this,expression_textarea:this.expression_textarea},function(g){if(g.keyCode&&g.keyCode!=13){return}if(g.data.expression._pe_expression_builder_link_div.hasClass("form_field_disabled")){return}if(g.which!=1&&g.which!=13){return}var h=function(m,n){if($.trim(m.get_data())!=""){if($.trim(n._expression_textarea.get_data())==""){n._expression_textarea.set_data(m.get_data())}else{if(n._check_operator_index_is_last()){n._expression_textarea.set_data(n._expression_textarea.get_data()+m.get_data())}else{n._expression_textarea.set_data(n._expression_textarea.get_data()+" && "+m.get_data())}}m.set_data("")}};var f=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:g.data.expression._properties.epa_prefix_combo_map,hidden:true,properties:{is_epa:true,is_evaluate_required:false,is_variable_support_required:false,close_builder_dialog_callback:new rdx.callback(h,[g.data.expression]),get_epa_pi_data:g.data.expression._properties.get_epa_pi_data}}));f.render();var e=f.get_builder_link();e.trigger(rdx.events.CLICK)});this._expression_builder_link_div.append(rdx.i18n.get_string("rdx.expression_builder.title"))}else{this._expression_builder_link_div.append(rdx.i18n.get_string("rdx.expression_builder.title"))}}b.append(this._label_span);b.append(this._expression_builder_link_div);if(this._properties.show_epa_editor_pi_editor){b.append(this._pe_expression_builder_link_div)}this._expression_builder_link_div.bind("click keydown",{expression:this,expression_textarea:this._expression_textarea_parent},function(f){if(f.keyCode&&f.keyCode!=13){return}if(f.data.expression._expression_builder_link_div.hasClass("form_field_disabled")){return}if(rdx.utils.is_defined(f.which)&&f.which!=1&&f.which!=13){return}var e=$("<div>");f.data.expression.create_expression_builder(e,f.data.expression_textarea);if(!rdx.page.is_slider_visible()){slider_container=rdx.page.show_slider({});slider_container.show();slider_container.removeAttr("aria-hidden")}f.data.expression._expression_builder_link_div_container=rdx.page.get_slider_crumb().crumb.add_container(rdx.i18n.get_string("rdx.expression_builder.title"),e);e.parent().addClass("expression_builder_parent");f.data.expression.preview_expression_textarea_in_builder.set_data("")});this._evaluate_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link").append(rdx.i18n.get_string("rdx.expression_evaluator.title"));a.append(this._error_label_parent);a.append(this._evaluate_link_div);this._evaluate_link_div.bind("click keydown",{expression:this},function(f){if(f.keyCode&&f.keyCode!=13){return}if(f.data.expression._evaluate_link_div.hasClass("form_field_disabled")){return}if(rdx.utils.is_defined(f.which)&&f.which!=1&&f.which!=13){return}var e=$("<div>");f.data.expression.create_expression_evaluator(e);e.addClass("expression_evaluate_dialog");if(!rdx.page.is_slider_visible()){slider_container=rdx.page.show_slider({});slider_container.show();slider_container.removeAttr("aria-hidden")}f.data.expression._expression_evaluator_link_div_container=rdx.page.get_slider_crumb().crumb.add_container(rdx.i18n.get_string(f.data.expression._properties.evaluate_window_title),e);e.parent().addClass("expression_evaluate_parent");if(!f.data.expression._properties.standalone_evaluator){f.data.expression.preview_expression_textarea_in_evaluator.set_data(f.data.expression._expression_textarea_component.text())}});var d=$("<div>").addClass("expression_editor").append(b).append(this._expression_textarea_parent);if(this._properties.switch_link_required instanceof rdx.expression){this._properties.switch_link_required=this._properties.switch_link_required.evaluate()}if(this._properties.switch_link_required){this._switch_to_class_link_div=$("<a>").attr("tabindex","0").addClass("rdx_left pointer_cursor expression_eval_builder_link").text(rdx.i18n.get_string("Switch to Classic Syntax"));d.append(this._switch_to_class_link_div);this._switch_to_class_link_div.bind(rdx.events.CLICK,{expression:this},function(e){setTimeout(function(){if(e.data.expression._switch_to_class_link_div.hasClass("form_field_disabled")){return}if(rdx.utils.is_defined(e.data.expression._properties.classic_expression_editor)){if(rdx.utils.is_defined(e.data.expression._classic_expression_editor_component)){e.data.expression._classic_expression_editor_component.find(".rdx_error_container").addClass("hide");e.data.expression._classic_expression_editor_component.find(".error_text").removeClass("error_text")}e.data.expression._properties.classic_expression_editor.show();e.data.expression._properties.classic_expression_editor.removeAttr("aria-hidden");e.data.expression._properties.set_advanced_expression_mode.call_back([false])}else{e.data.expression._parent.find(".rdx_error_container").addClass("hide");e.data.expression._parent.find(".error_text").removeClass("error_text");e.data.expression._classic_expression_editor_component.get_component().show();e.data.expression._classic_expression_editor_component.get_component().removeAttr("aria-hidden");e.data.expression._classic_expression_mode=true;e.data.expression._classic_expression_editor_component.get_component().addClass("component_alignment")}if(rdx.utils.is_defined(e.data.expression._classic_expression_editor_component)){e.data.expression._classic_expression_editor_component.refresh_help_tip()}e.data.expression.get_component().css("cssText","display: none !important");if(rdx.utils.is_defined(e.data.expression._properties.classic_expression_editor)){e.data.expression._properties.classic_expression_editor.change();e.data.expression._properties.classic_expression_editor.trigger(rdx.events.CHANGE)}else{e.data.expression._component.change();e.data.expression._component.trigger(rdx.events.CHANGE)}},210)})}if(this._properties.is_evaluate_required){d.append(a)}d.height(this._properties.height);if(rdx.utils.is_defined(this._parent)){this._parent.append(d)}else{this._parent=d}this._parent.append(this._error_label_parent);this._component=d;if(this._properties.switch_link_required&&this._parent.children().length<=2){if(rdx.utils.is_defined(this._properties.show_epa_editor)&&this._properties.show_epa_editor==true){this._classic_expression_editor_component=new rdx.classic_expression_editor(this._parent,new rdx.form_field({prefix_combo_map:["General","Client Security","Network Based","Date/Time","File System"],properties:{show_epa_editor:true,epa_prefix_combo_map:this._properties.epa_prefix_combo_map,switch_link_required:true,advance_expression_editor:this._component,set_classic_expression_mode:new rdx.callback(this,this.set_classic_expression_mode)}})).render()}else{this._classic_expression_editor_component=new rdx.classic_expression_editor(this._parent,new rdx.form_field({prefix_combo_map:["General","Client Security","Network Based","Date/Time","File System"],properties:{switch_link_required:true,advance_expression_editor:this._component,set_classic_expression_mode:new rdx.callback(this,this.set_classic_expression_mode)}})).render()}this._classic_expression_editor_component.toggle_show_hide(false)}if(this._field.is_read_only()){this.set_read_only()}return this};rdx.expression_editor.prototype._check_operator_index_is_last=function(){var d=this._expression_textarea.get_data();var b=d.lastIndexOf("&&");var a=d.lastIndexOf("||");if(b==d.length-3||b==d.length-2||a==d.length-3||a==d.length-2){return true}else{return false}};rdx.expression_editor.prototype.get_data=function(){if(this._classic_expression_mode===true){return this._classic_expression_editor_component.get_data()}else{return this._expression_textarea_component.text()}};rdx.expression_editor.prototype.set_data=function(a){if(typeof(a)=="object"){if(rdx.utils.is_defined(a.prefix_combo_map)){this._prefix_combo_map_overridden=a.prefix_combo_map}else{if(rdx.utils.is_defined(a.label)){this._label_span.text(rdx.i18n.get_string(a.label))}}}else{this._expression_textarea_component.text(a)}};rdx.expression_editor.prototype.get_component_type=function(){return rdx.form_constants.EXPRESSION_EDITOR};rdx.expression_editor.prototype.get_field=function(){return this._field};rdx.expression_editor.prototype.get_component=function(){return this._component};rdx.expression_editor.prototype.get_evaluate_link=function(){return this._evaluate_link_div};rdx.expression_editor.prototype.get_textarea=function(){return this._expression_textarea_parent};rdx.expression_editor.prototype.set_error_message=function(a){this._error_label_parent.removeClass("hide");this._error_text_div.text(a)};rdx.expression_editor.prototype.hide_error_message=function(){this._error_label_parent.addClass("hide");this._error_text_div.text("")};rdx.expression_editor.prototype.get_builder_link=function(){return this._expression_builder_link_div};rdx.expression_editor.prototype.add_event_handler=function(a,b){this._component.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.expression_editor.prototype.create_expression_builder=function(f,d){var g=$("<div>").addClass("expression_editor_title").append(rdx.i18n.get_string("rdx.preview_expression")).append($("<span>").addClass("rdx_readonly_message").append(rdx.i18n.get_string("rdx.readonly_message")));var a=$("<div>").addClass("expression_builder_box_div");this.preview_expression_textarea_in_builder=new rdx.text_area(a,new rdx.form_field({label:"Expression Editor",display_label:false})).render();this.preview_expression_textarea_in_builder.get_component().attr("spellcheck",false).prop("disabled",true).attr("aria-label","Editor");var b=$("<div>").addClass("expression_editor_title").append(rdx.i18n.get_string("rdx.expression_builder.title"));this._box_expression_builder=$("<div>").addClass("expression_builder_box_div dangling_component");this._components_created=[];this._create_first_dropdown();if(this._properties.is_epa===true){this._current_help_icon_cell=$("<div>").addClass("expression_editor_help rdx_left").append($("<span>")).hide();this._current_help_icon_cell.attr("aria-hidden","true")}else{this._current_help_icon_cell=$("<div>").addClass("expression_editor_help rdx_left").append($("<span>"))}this._current_help_icon=new rdx.tooltip(this._current_help_icon_cell);var e=$("<div>").addClass("form_buttons");this._done_button=new rdx.button_bar(e,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.done_button.label"),blue_button_click_handler_callback:new rdx.callback(this,this._handle_done_button_click,[f]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.cancel_button.label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_cancel_button_click,[f])}})).render();this._exp_builder_box=$("<div>").addClass("expression_builder_div expression_builder_dialog").append(b).append(this._box_expression_builder).append(e);f.append(this._exp_builder_box);f.append($("<div>").addClass("expression_builder_div preview_expression").append(g).append(a))};rdx.expression_editor.prototype.create_expression_textarea=function(e){var f=$("<div>").addClass("title dangling_component");var a=$("<span>").addClass("rdx_left");var d=$("<span>").addClass("rdx_left saved_policy_exp");var g=$("<span>").addClass("rdx_left frequently_used_exp");f.append(a).append(d).append(g);this._cleartext_link=$("<button>").addClass("rdx_right").addClass("cleartext").attr({title:rdx.i18n.get_string("rdx.clear"),"aria-label":rdx.i18n.get_string("rdx.clear")});this._cleartext_link.bind(rdx.events.CLICK,{expression:this},function(h){if(h.data.expression._cleartext_link.hasClass("form_field_disabled")){return}h.data.expression._expression_textarea.set_data("");h.data.expression._multi_exp_mode=false;h.data.expression._start_new_exp=true});f.append(this._cleartext_link);this._operators=new rdx.expression_editor.custom_dropdown(a,new rdx.form_field({formatter:{map:[rdx.i18n.get_string("rdx.select"),"&&","||","!","+","-","*","/","%","^","<<",">>","&","|","~","+","ALT","==","!=","<","<=",">",">="]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.expression_editor.operators.label")}})).render();this._operators.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_operator_to_create_multi_expressions,[this._operators]));this._import_expressions=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({properties:{size:1,label:rdx.i18n.get_string("rdx.expression_editor.saved_policy_expression.label")},mandatory:true})).render();this._import_expressions.get_component().addClass("saved_policy_exp");this._import_expressions.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this.add_imported_expression_to_current_expression,[]));var b=new rdx.model_executor_service(new rdx.callback(this,this.get_all_saved_expressions));b.add("get",rdx.utils.get_resource("policyexpression"),null,null,null);b.add("get",rdx.utils.get_resource("nsvariable"),null,null,null);if(this._properties.is_epa==false&&this._properties.extension_support_required==true){b.add("get",rdx.utils.get_resource("nsextension"),null,null,{args:[{name:"detail",value:"all"}],is_query_param:true,use_args:true})}b.execute();this._frequently_used_expressions=new rdx.expression_editor.custom_dropdown(g,new rdx.form_field({formatter:{map:{Select:"",'HTTP.REQ.URL-Is a Pattern present in HTTP Request URL? [HTTP.REQ.URL.PATH_AND_QUERY.CONTAINS("")]':'HTTP.REQ.URL.PATH_AND_QUERY.CONTAINS("")','HTTP.REQ.URL-Compare HTTP URL suffix with a URL. [HTTP.REQ.URL.SUFFIX.EQ("")]':'HTTP.REQ.URL.SUFFIX.EQ("")','HTTP.REQ.HEADER-Does an HTTP Request Header exists? [HTTP.REQ.HEADER("").EXISTS]':'HTTP.REQ.HEADER("").EXISTS','HTTP.REQ.HEADER-Is a Pattern present in HTTP Request Header? [HTTP.REQ.HEADER("").CONTAINS("")]':'HTTP.REQ.HEADER("").CONTAINS("")',"HTTP.REQ.HOSTNAME-Obtain the HTTP Host Name object from this request. [HTTP.REQ.HOSTNAME]":"HTTP.REQ.HOSTNAME","HTTP.REQ.COOKIE-(Name/Value List) Returns the contents of the HTTP Cookie header as a name/value list. [HTTP.REQ.COOKIE]":"HTTP.REQ.COOKIE","CLIENT.IP.SRC-Returns the source IP of the current packet. [CLIENT.IP.SRC]":"CLIENT.IP.SRC",'HTTP.RES.HEADER-Is a Pattern present in HTTP Response Header? [HTTP.RES.HEADER("").CONTAINS("")]':'HTTP.RES.HEADER("").CONTAINS("")',"HTTP.RES.CACHE_CONTROL-Returns the HTTP Cache-Control object [HTTP.RES.CACHE_CONTROL]":"HTTP.RES.CACHE_CONTROL","HTTP.RES.STATUS-Returns the HTTP response status code. [HTTP.RES.STATUS]":"HTTP.RES.STATUS","HTTP.REQ.IS_VALID-Returns TRUE if the HTTP request is properly formed. [HTTP.REQ.IS_VALID]":"HTTP.REQ.IS_VALID","HTTP.REQ.METHOD-Compare HTTP Request Method. [HTTP.REQ.METHOD.EQ(GET)]":"HTTP.REQ.METHOD.EQ(GET)"}},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.expression_editor.frequently_used_expressions.label")}})).render();this._frequently_used_expressions.get_component().addClass("frequently_used_exp");g.bind(rdx.events.CHANGE,{frequently_used_expressions:this._frequently_used_expressions,expression:this},function(h){var m=h.data.frequently_used_expressions.get_data().split("[")[1].split("]")[0];if($.trim(h.data.expression._expression_textarea.get_data())==""){h.data.expression._append_expression(m);h.data.expression._start_new_exp=false}else{h.data.expression._append_expression(m)}});e.append(f);this._expression_textarea=new rdx.expression_editor.custom_textarea(e,new rdx.form_field({})).render();this._expression_textarea_component=this._expression_textarea.get_component().addClass("expression_textarea");this._expression_textarea_component.attr("resizable","false").attr("spellcheck",false);if(!(rdx.utils.is_ie()&&parseInt(rdx.utils.browser().version)<9)&&this._properties.is_epa===false){this._events_intellisense()}};rdx.expression_editor.prototype.create_expression_evaluator=function(d){var o=$("<div>").addClass("expression_editor_title").append("Details");var t=$("<div>").addClass("expression_builder_box_div");var D=$("<table>").append($("<tbody>"));if(rdx.utils.is_defined(this._properties.details)){for(var E in this._properties.details){if(rdx.utils.is_empty(this._properties.details[E]["value"])){continue}var C=$("<tr>").append($("<td>").append($("<b>").text(rdx.i18n.get_string(this._properties.details[E]["label"])+": ")));var e=$("<td>");var z=new rdx.label(e,new rdx.form_field({key:E})).render();z.set_data(this._properties.details[E]["value"]);C.append(e);D.append(C)}d.append($("<div>").addClass("expression_builder_div expression_result").append(o).append(t.append(D)))}if(this._properties.standalone_evaluator&&this._properties.render_textarea_in_evaluator){var p=$("<div>").addClass("expression_textbox");this.create_expression_textarea(p);var w=$("<div>").addClass("expression_builder_exp dangling_component");w.append(this._expression_builder_link_div);d.append(w).append(p)}else{var m=$("<div>").addClass("expression_editor_title").append(rdx.i18n.get_string("rdx.expression"));var b=$("<div>").addClass("expression_builder_box_div");this.preview_expression_textarea_in_evaluator=new rdx.text_area(b,new rdx.form_field({label:"Editor",display_label:false})).render();this.preview_expression_textarea_in_evaluator.get_component().attr("spellcheck",false).attr("aria-label","Editor");if(rdx.utils.is_not_defined(this._properties.render_textarea_in_evaluator)||this._properties.render_textarea_in_evaluator){d.append($("<div>").addClass("expression_builder_div preview_expression").append(m).append(b))}}var f=$("<div>");var B=$("<div>").append($("<div>").append(rdx.i18n.get_string("rdx.expression_editor.flow_type.label")).addClass("expression_editor_flow_type")).append(f);var A=$("<div>").addClass("expression_textbox");d.append(A.append($("<div>").addClass("title").addClass("dangling_component").append(B).append($("<button>").addClass("rdx_right cleartext").attr({title:rdx.i18n.get_string("rdx.clear"),"aria-label":rdx.i18n.get_string("rdx.clear")}).bind(rdx.events.CLICK,{expression:this},function(F){F.data.expression._evaluate_editable_div.text("")}))));var g=["Select","HTTP Request","HTTP Response","Text"];if(this._properties.evaluate_action){g=["Select","HTTP Request","HTTP Response"]}this._flowtype_dropdown=new rdx.expression_editor.custom_dropdown(f,new rdx.form_field({formatter:{map:g},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select")}})).render();f.addClass("rdx_left");this._evaluate_editable_div=$("<div>").attr("contenteditable","true").addClass("custom_expression_div").attr("placeholder",rdx.i18n.get_string("rdx.expression_evaluator.sample_data.placeholder")).attr("spellcheck",false);A.append(this._evaluate_editable_div);var q=$("<div>");var a=$("<div>").addClass("dangling_component").append(q);var h=new rdx.expression_editor.custom_dropdown(q,new rdx.form_field({formatter:{map:["Sample","Post Request","Get Request"]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.expression_evaluator.sample_data.label")}})).render();q.addClass("evaluate_dropdown");h.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this.populate_data_for_evaluate_textarea,[h]));this._flowtype_dropdown.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this.change_sample_data_according_to_flow_type,[h]));var s=new rdx.button_bar(a,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.expression_evaluator.title"),blue_button_click_handler_callback:new rdx.callback(this,this._handle_evaluate_button_click,[])}})).render();d.append(a);var v=$("<div>").addClass("expression_editor_title").append(rdx.i18n.get_string("rdx.expression_evaluator.result.label"));v.append($("<button>").addClass("rdx_right").addClass("cleartext").attr({title:rdx.i18n.get_string("rdx.clear"),"aria-label":rdx.i18n.get_string("rdx.clear")}).bind(rdx.events.CLICK,{expression:this},function(F){F.data.expression._result_textarea.text("")}));var u=$("<div>").addClass("expression_builder_box_div");this._result_textarea=$("<div>").addClass("custom_result_textarea").attr("spellcheck",false);u.append(this._result_textarea);var n=$("<div>").addClass("rdx_left topmargin");var s=new rdx.button_bar(n,new rdx.form_field({properties:{add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.form_close_button_label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_close_button_click,[h,d])}})).render();d.append($("<div>").addClass("expression_builder_div expression_result").append(v).append(u).append(n))};rdx.expression_editor.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._component}if(a){b.show();b.removeAttr("aria-hidden")}else{b.hide();b.attr("aria-hidden","true")}};rdx.expression_editor.prototype.toggle_read_only=function(a){if(a){this.set_edittable()}else{this.set_read_only()}};rdx.expression_editor.prototype.set_read_only=function(){this._component.addClass("form_field_disabled");this._cleartext_link.addClass("form_field_disabled");this._expression_builder_link_div.addClass("form_field_disabled");this._evaluate_link_div.addClass("form_field_disabled");if(rdx.utils.is_defined(this._switch_to_class_link_div)){this._switch_to_class_link_div.addClass("form_field_disabled")}this._operators.get_list().toggle_read_only(false);this._import_expressions.get_list().toggle_read_only(false);this._frequently_used_expressions.get_list().toggle_read_only(false);this._expression_textarea.toggle_read_only(false)};rdx.expression_editor.prototype.set_edittable=function(){this._component.removeClass("form_field_disabled");this._cleartext_link.removeClass("form_field_disabled");this._expression_builder_link_div.removeClass("form_field_disabled");this._evaluate_link_div.removeClass("form_field_disabled");if(rdx.utils.is_defined(this._switch_to_class_link_div)){this._switch_to_class_link_div.removeClass("form_field_disabled")}this._operators.get_list().toggle_read_only(true);this._import_expressions.get_list().toggle_read_only(true);this._frequently_used_expressions.get_list().toggle_read_only(true);this._expression_textarea.toggle_read_only(true)};rdx.expression_editor.prototype.set_classic_expression_mode=function(a){if(rdx.utils.is_not_defined(a)){return}else{this._classic_expression_mode=a}};rdx.expression_editor.prototype.get_classic_expression_mode=function(){return this._classic_expression_mode};rdx.expression_editor.prototype.get_dependency_determinant_value=function(a){if(a==rdx.form_constants.dependency_determinant.TYPE){if(this._component.is(":visible")){if(this._classic_expression_mode==true||this._classic_expression_mode=="true"){return"Classic"}else{return"Advanced"}}else{if(this._properties.switch_link_required==true&&rdx.utils.is_defined(this._properties.classic_expression_editor)){var b=this._properties.classic_expression_editor.get_advanced_expression_mode();if(b==true||b=="true"){return"Advanced"}else{return"Classic"}}else{if(this._properties.switch_link_required==false){return"Advanced"}else{return"Classic"}}}}return null};rdx.expression_editor.prototype._create_first_dropdown=function(){var b=$("<div>");this._box_expression_builder.append(b);var a=rdx.utils.is_defined(this._prefix_combo_map_overridden)?this._prefix_combo_map_overridden.slice(0):this.prefix_combo_map.slice(0);if(this._properties.is_variable_support_required===true){a.unshift("Start With Variable")}a.unshift("Select");this._dropdown_start=new rdx.expression_editor.custom_dropdown(b,new rdx.form_field({formatter:{map:a},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select"),parameter:"none"}})).render();b.addClass("rdx_left");this._dropdown_created.push(this._dropdown_start);this._components_created.push(this._dropdown_start);this._dropdown_start.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_more_dropdowns,[this._dropdown_start]));this._selected_class_order=[]};rdx.expression_editor.prototype._add_more_dropdowns=function(a,q){var n=null;var m=null;if(this._properties.is_epa===false){var o=q.get_data().split("(");n=o[0];if(o.length>1){m=o[1].split(")")[0]}}else{n=q.get_data()}this._input_value=n;q.set_data();var e=false;for(var b=0;b<this._dropdown_created.length;b++){if(this._dropdown_created[b].get_component()[0]==a.target){var g=b;if(b==this._dropdown_created.length-1){e=true}break}}if(e&&n!="Select"){var p="";e=false;this._add_next_dropdown(a,n,m,q)}else{this._dropdown_created.splice(g+1,this._dropdown_created.length-g-1);for(var b=this._box_expression_builder.children().length-1;;){if(a.target.parentNode.parentNode==this._box_expression_builder.children("div:eq("+b+")")[0]){break}else{var h=this._box_expression_builder.children("div:eq("+b+")");if(!h.hasClass("expression_editor_help")){this._components_created.pop()}h.remove();b--}}var d=this._get_dropdown_index(a,q,true);if(d.dropdowns_created==this._selected_class_order.length){this._selected_class_order.pop()}else{this._selected_class_order.splice(d.dropdowns_created,this._selected_class_order.length-d.dropdowns_created)}if(this._properties.is_epa===false&&this._selected_class_order.length>0){var f=neo.pi_syntax_utils.get_data_items(this._selected_class_order[this._selected_class_order.length-1],this._operations_to_exclude);this._prev_option_index_accept_expr=$.extend(true,[],f.option_index_accept_expr)}if(n!="Select"){this._add_next_dropdown(a,n,m,q)}}this._add_arguements_to_textarea()};rdx.expression_editor.prototype._add_next_dropdown=function(A,z,d,C){var f=false;if(rdx.utils.is_defined(this._prev_option_index_accept_expr)&&$.inArray(A.target.selectedIndex,this._prev_option_index_accept_expr)!=-1){f=true}if(z=="Start With Variable"){var n=$("<div>").addClass("rdx_left");this._box_expression_builder.append(n);var q=new rdx.expression_editor.custom_dropdown(n,new rdx.form_field({formatter:{map:["Select","ulong","text","map"]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select")}})).render();q.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression_starting_with_variable,[q]));this._dropdown_created.push(q);this._components_created.push(q)}else{var H="";if(this._properties.is_epa===false){H=neo.pi_syntax_utils.get_result_type(this._selected_class_order,z,d,true);if(rdx.utils.is_not_defined(H)){H=this._get_result_type_of_extension_functions(z,d)}}else{H=null}var w=this._get_dropdown_index(A,C);if(d=="String"&&$.inArray(z,this._PAT_SET_METHODS)!=-1&&$.inArray(z,this._DATA_SET_METHODS)!=-1){var u=$("<div>").addClass("rdx_left");this._box_expression_builder.append(u);var I=new rdx.expression_editor.custom_dropdown(u,new rdx.form_field({formatter:{map:["Select","Pattern Set","Data Set"]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select"),parameter:"data_patset"}})).render();I.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._handle_pat_set_and_data_set,[I]));this._dropdown_created.push(I);this._components_created.push(I)}else{if(d=="String"&&$.inArray(z,this._PAT_SET_METHODS)!=-1){var b=$("<div>").addClass("rdx_left");this._box_expression_builder.append(b);this._add_dropdown_for_value_from_other_resource(b,[{resrc_name:"policypatset",resrc_key:"name"}],null,null,w)}else{if(d=="String"&&$.inArray(z,this._DATA_SET_METHODS)!=-1){var v=$("<div>").addClass("rdx_left");this._box_expression_builder.append(v);this._add_dropdown_for_value_from_other_resource(v,[{resrc_name:"policypatset",resrc_key:"name"}],null,null,w)}else{if(d=="String"&&$.inArray(z,this._STRING_MAP_METHODS)!=-1){var p=$("<div>").addClass("rdx_left");this._box_expression_builder.append(p);this._add_dropdown_for_value_from_other_resource(p,[{resrc_name:"policystringmap",resrc_key:"name"}],null,null,w)}else{if(d=="http_callout_bool"){var E=$("<div>").addClass("rdx_left");this._box_expression_builder.append(E);this._add_dropdown_for_value_from_other_resource(E,[{resrc_name:"policyhttpcallout",resrc_key:"name"}],{filter:[{name:"returntype",value:"bool"}],is_query_param:true},"int",w)}else{if(d=="http_callout_num"){var F=$("<div>").addClass("rdx_left");this._box_expression_builder.append(F);this._add_dropdown_for_value_from_other_resource(F,[{resrc_name:"policyhttpcallout",resrc_key:"name"}],{filter:[{name:"returntype",value:"num"}],is_query_param:true},"int",w)}else{if(d=="http_callout_text"){var a=$("<div>").addClass("rdx_left");this._box_expression_builder.append(a);this._add_dropdown_for_value_from_other_resource(a,[{resrc_name:"policyhttpcallout",resrc_key:"name"}],{filter:[{name:"returntype",value:"text"}],is_query_param:true},"int",w)}else{if(z=="VSERVER"){var h=$("<div>").addClass("rdx_left");this._box_expression_builder.append(h);this._add_dropdown_for_value_from_other_resource(h,[{resrc_name:"lbvserver",resrc_key:"name"},{resrc_name:"csvserver",resrc_key:"name"},{resrc_name:"crvserver",resrc_key:"name"},{resrc_name:"vpnvserver",resrc_key:"name"}],null,null,w)}else{if(z=="STREAM"){var D=$("<div>").addClass("rdx_left");this._box_expression_builder.append(D);this._add_dropdown_for_value_from_other_resource(D,[{resrc_name:"streamidentifier",resrc_key:"name"}],null,null,w)}else{if(z=="CHECK_LIMIT"){var s=$("<div>").addClass("rdx_left");this._box_expression_builder.append(s);this._add_dropdown_for_value_from_other_resource(s,[{resrc_name:"nslimitidentifier",resrc_key:"limitidentifier"}],null,null,w)}else{if(H=="classic_expr"){var o=$("<div>").addClass("rdx_left");this._box_expression_builder.append(o);this._add_dropdown_for_value_from_other_resource(o,[{resrc_name:"policyexpression_type_classic",resrc_key:"name"}],null,null,w)}else{if(z=="EXTEND"){this.get_parameter_for_method_class("uint, uint",null,false)}else{if(this._map_values.name.length>0&&neo.epa_utils.check_for_form_render(z,this._components_created)===true&&this._properties.is_epa===true){this.get_parameter_for_method_class("epa",z)}else{this.get_parameter_for_method_class(d,null,f)}}}}}}}}}}}}}if(this._properties.is_epa===false){var m=neo.pi_syntax_utils.get_data_items(H,this._operations_to_exclude);this._prev_option_index_accept_expr=$.extend(true,[],m.option_index_accept_expr);var B=this._get_extended_functions_list(H);var e=m.data_items.concat(B.data_items)}else{var m=neo.epa_utils.get_data_items(C.get_data(),this._components_created);if(this._components_created.length==1){this._map_values={name:[],value:[]}}if(rdx.utils.is_defined(m.map_value)&&m.map_value===true){this._map_values.name=this._map_values.name.concat(m.data_items);this._map_values.value=this._map_values.value.concat(m.exp_string)}var e=m.data_items}this._box_expression_builder.append($("<div>"));var G=new rdx.expression_editor.custom_dropdown(this._box_expression_builder.children().last(),new rdx.form_field({formatter:{map:e},options_in_bold:m.bold_data_items,mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select"),add_textoverflow_class:true,parameter:"none"}})).render();if(e.length==1&&e[0]=="Select"&&this._properties.is_epa===true){G.get_wrapper().hide();G.get_wrapper().attr("aria-hidden","true")}this._dropdown_created.push(G);this._components_created.push(G);this._current_help_icon.remove_tooltip();if(this._dropdown_created.length>2){if(this._properties.is_epa===false){var t=neo.pi_syntax_utils.get_data_items(this._selected_class_order[this._selected_class_order.length-2],this._operations_to_exclude);var g={};g.message="<b>"+this._input_value+"</b><br/>"+t.help[A.target.selectedIndex-1];this.add_help_text(g)}this._box_expression_builder.children().last().before(this._current_help_icon_cell)}this._box_expression_builder.children().last().addClass("rdx_left");G.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_more_dropdowns,[G]))}};rdx.expression_editor.prototype._get_extended_functions_list=function(f){var e={data_items:[],help:[]};if(rdx.utils.is_not_defined(f)){return e}for(var d in this._extended_functions){if($.inArray(f,this._extended_functions[d]["classtype"])!=-1){var g=this._extended_functions[d];if(g.arg_count=="0"){e.data_items.push(g.func_name.toUpperCase());e.help.push(this._get_scriptfunction_help(g.func_name.toUpperCase()))}else{var a=neo.pi_syntax_utils.get_mapped_paramter_type(g.arg_pisyntax_type[0]);for(var b=1;b<g.arg_pisyntax_type.length;b++){a=a+", "+neo.pi_syntax_utils.get_mapped_paramter_type(g.arg_pisyntax_type[b])}e.data_items.push(g.func_name.toUpperCase()+"("+a+")");e.help.push(this._get_scriptfunction_help(g.func_name.toUpperCase()))}}}return e};rdx.expression_editor.prototype._get_result_type_of_extension_functions=function(d,e,b){if(rdx.utils.is_object_not_empty(this._extended_functions)){if(rdx.utils.is_defined(this._extended_functions[d])){var a=this._extensionfunctionreturntype_map[this._extended_functions[d]["return_type"]];if(rdx.utils.is_defined(b)&&b=="intellisense"){this._selected_class_order_intellisense.push(a)}else{this._selected_class_order.push(a)}return a}else{return null}}return null};rdx.expression_editor.prototype._get_scriptfunction_help=function(a){var b="";if(rdx.utils.is_empty(a)){return b}if(rdx.utils.is_object_not_empty(this._extended_functions)){if(rdx.utils.is_defined(this._extended_functions[a])){b="<b>"+a+"</b><br/>";b=b+this._extended_functions[a]["help"];b=b+"<br/><br/><b>Returns "+this._extensionfunctionreturntype_map[this._extended_functions[a]["return_type"]]+"</b><br/>";b=b+neo.pi_syntax_utils.get_help_result_type(this._extensionfunctionreturntype_map[this._extended_functions[a]["return_type"]]);return b}else{return b}}return b};rdx.expression_editor.prototype._add_operator_to_create_multi_expressions=function(b,a){if(a.get_data()=="Select"){return}this._append_expression(a.get_data());this._multi_exp_mode=true;this._multi_exp_mode_start_point=true;this._start_new_exp=false;a.get_list().set_data("Select")};rdx.expression_editor.prototype.get_parameter_for_method_class=function(e,s,w){if(!rdx.utils.is_defined(e)){return}var v=$("<div>").addClass("rdx_left").css("padding-left","4px");var q=e.split(", ");var a=true;for(var t=0;t<q.length;t++){var h=$("<div>").addClass("parameter_height rdx_left");switch(q[t]){case"epa":a=neo.epa_utils.check_for_supported_scans(s);if(a===true){this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({}));this["parameter_value_frequency"]=new rdx.text_box(v,new rdx.form_field({properties:{key:"parameter_value_frequency"},watermark:"Enter value for Frequency"}));this._box_expression_builder.append(h);this["parameter_value_frequency"].render();this["parameter_value_frequency"].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));var u=$("<div>").addClass("add_new_exp rdx_left");u.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(A){A.data.expression_editor._create_form_for_epa_supported_scans(A.data.parameter_value,s)});h.append(u.append($("<div>")));h.append(v);var z=$("<div>").addClass("search_tip_container");var n=$("<div>").addClass("search_tip_content");var g=$("<span>").addClass("search_help_text").append(rdx.i18n.get_string("rdx.apea_frequency_tooltip"));var f=$("<span>").addClass("search_tip_close_button");f.bind(rdx.events.CLICK,{tooltip:this._search_tooltip},function(A){A.data.tooltip.remove_tooltip()});n.append(f,g);z.append(n);var b=new rdx.tooltip(this.parameter_value_frequency.get_component(),{append_element:z,remove_tooltip_mouse_leave:false});this.parameter_value_frequency.get_component().bind(rdx.events.FOCUS_IN,{tooltip_obj:b},function(A){A.data.tooltip_obj.render();A.stopPropagation()});this.parameter_value_frequency.get_component().bind(rdx.events.FOCUS_OUT,{tooltip_obj:b},function(A){A.data.tooltip_obj.remove_tooltip();A.stopPropagation()})}break;case"uint":case"int":case"double":case"ulong":case"mac":case"ulong_var":case"time":if(q[t]=="ulong_var"){this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{trim_data:false}}))}else{this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}))}this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));if(q[t]=="time"){this["parameter_value"+t].get_component().addClass("expression_editor_parameter time");this["parameter_value"+t].set_watermark("GMT YYYY MMM DD HHh MMm SSs")}else{this["parameter_value"+t].get_component().addClass("expression_editor_parameter");if(rdx.utils.is_defined(w)&&w==true){var p=$("<div>").addClass("expr_new_exp rdx_left");p.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(B){var D=function(E,F){if($.trim(E.get_data())!=""){F.set_data(E.get_data())}F.get_component().trigger(rdx.events.KEYUP);E.set_data("")};var A=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:rdx.enums.EXPRESSION_EDITOR_PREFIX_ALL,hidden:true,properties:{close_builder_dialog_callback:new rdx.callback(D,[B.data.parameter_value])}}));A.render();var C=A.get_builder_link();C.trigger(rdx.events.CLICK)});h.append(p.append($("<div>")));var u=$("<div>").addClass("add_new_exp rdx_left");u.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(A){A.data.expression_editor._create_form_for_creating_new_variable(A.data.parameter_value,"ulong")});var m=$("<div>").addClass("sel_new_exp rdx_left");m.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(A){A.data.expression_editor._create_form_for_selecting_variable(A.data.parameter_value,"ulong")});h.append(u.append($("<div>"))).append(m.append($("<div>")))}}break;case"String":case"char":case"map":case"text":case"both":if(q[t]=="map"||q[t]=="text"||q[t]=="both"){this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{trim_data:false}}))}else{this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}))}this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));if(rdx.utils.is_defined(w)&&w==true){var p=$("<div>").addClass("expr_new_exp rdx_left");p.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(B){var D=function(E,F){if($.trim(E.get_data())!=""){F.set_data(E.get_data())}F.get_component().trigger(rdx.events.KEYUP);E.set_data("")};var A=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:rdx.enums.EXPRESSION_EDITOR_PREFIX_ALL,hidden:true,properties:{close_builder_dialog_callback:new rdx.callback(D,[B.data.parameter_value])}}));A.render();var C=A.get_builder_link();C.trigger(rdx.events.CLICK)});h.append(p.append($("<div>")));var u=$("<div>").addClass("add_new_exp rdx_left");u.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(A){A.data.expression_editor._create_form_for_creating_new_variable(A.data.parameter_value,"text")});var m=$("<div>").addClass("sel_new_exp rdx_left");m.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this,parameter_type:q[t]},function(A){A.data.expression_editor._create_form_for_selecting_variable(A.data.parameter_value,A.data.parameter_type)});h.append(u.append($("<div>"))).append(m.append($("<div>")))}break;case"ip":this["parameter_value"+t]=new rdx.ip_v4(h,new rdx.form_field({properties:{parameter:q[t]}}));this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));if(rdx.utils.is_defined(w)&&w==true){var p=$("<div>").addClass("expr_new_exp rdx_left");p.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(B){var D=function(E,F){if($.trim(E.get_data())!=""){F.set_data(E.get_data())}F.get_component().trigger(rdx.events.KEYUP);E.set_data("")};var A=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:rdx.enums.EXPRESSION_EDITOR_PREFIX_ALL,hidden:true,properties:{close_builder_dialog_callback:new rdx.callback(D,[B.data.parameter_value])}}));A.render();var C=A.get_builder_link();C.trigger(rdx.events.CLICK)});h.append(p.append($("<div>")))}break;case"ip_subnet":this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}));this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));if(rdx.utils.is_defined(w)&&w==true){var p=$("<div>").addClass("expr_new_exp rdx_left");p.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(B){var D=function(E,F){if($.trim(E.get_data())!=""){F.set_data(E.get_data())}F.get_component().trigger(rdx.events.KEYUP);E.set_data("")};var A=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:rdx.enums.EXPRESSION_EDITOR_PREFIX_ALL,hidden:true,properties:{close_builder_dialog_callback:new rdx.callback(D,[B.data.parameter_value])}}));A.render();var C=A.get_builder_link();C.trigger(rdx.events.CLICK)});h.append(p.append($("<div>")))}break;case"ipv6":case"ipv6_subnet_at":case"ipv6_subnet":this["parameter_value"+t]=new rdx.ip_v6(h,new rdx.form_field({properties:{parameter:q[t]}}));this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].ip_v6_field.get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));if(rdx.utils.is_defined(w)&&w==true){var p=$("<div>").addClass("expr_new_exp rdx_left");p.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(B){var D=function(E,F){if($.trim(E.get_data())!=""){F.set_data(E.get_data())}F.get_component().trigger(rdx.events.KEYUP);E.set_data("")};var A=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:rdx.enums.EXPRESSION_EDITOR_PREFIX_ALL,hidden:true,properties:{close_builder_dialog_callback:new rdx.callback(D,[B.data.parameter_value])}}));A.render();var C=A.get_builder_link();C.trigger(rdx.events.CLICK)});h.append(p.append($("<div>")))}break;case"re":this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}));this["parameter_value"+t].set_data("re//");this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));if(rdx.utils.is_defined(w)&&w==true){var p=$("<div>").addClass("expr_new_exp rdx_left");p.bind(rdx.events.CLICK,{parameter_value:this["parameter_value"+t],expression_editor:this},function(B){var D=function(E,F){if($.trim(E.get_data())!=""){F.set_data(E.get_data())}F.get_component().trigger(rdx.events.KEYUP);E.set_data("")};var A=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:rdx.enums.EXPRESSION_EDITOR_PREFIX_ALL,hidden:true,properties:{close_builder_dialog_callback:new rdx.callback(D,[B.data.parameter_value])}}));A.render();var C=A.get_builder_link();C.trigger(rdx.events.CLICK)});h.append(p.append($("<div>")))}break;case"xpath_str":this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}));this["parameter_value"+t].set_data("xp%%");this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));break;case"xpath_bool":this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}));this["parameter_value"+t].set_data("xp%boolean()%");this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));break;case"xpath_double":this["parameter_value"+t]=new rdx.text_box(h,new rdx.form_field({properties:{parameter:q[t],trim_data:false}}));this["parameter_value"+t].set_data("xp%number()%");this._box_expression_builder.append(h);this["parameter_value"+t].render();this["parameter_value"+t].get_component().addClass("expression_editor_parameter");this["parameter_value"+t].add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._add_arguements_to_textarea,[q[t]]));this["parameter_value"+t].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(this,this._check_validation_for_parameter_value,[q[t]]));break;default:var o=q[t];var d=$("<div>").addClass("rdx_left");h.append(d);switch(o){case"endian_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","LITTLE_ENDIAN","BIG_ENDIAN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"double_format_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","DECIMAL","DECIMAL_PREFIX"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"http_method_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","GET","POST","HEAD","PUT","DELETE","OPTIONS","TRACE","CONNECT","UNKNOWN_METHOD"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"ip_protocol_type_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","TCP","UDP","ICMP","AH","ESP","GRE","VRRP","OSPFIGP","IPIP","ICMPV6","OSPFPREF","FRAGMENT","PROTOCOL_UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"ip_protocol_iprep_category_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","SPAM_SOURCES","WINDOWS_EXPLOITS","WEB_ATTACKS","BOTNETS","SCANNERS","DOS","REPUTATION","PHISHING","PROXY","NETWORK","CLOUD_PROVIDERS","MOBILE_THREATS"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"num_format_e":case"unsigned_long_format_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","DECIMAL","HEX","DECIMAL_PREFIX","HEX_PREFIX"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"encrypt_method_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","RC4","DES3","AES128","AES192","AES256"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"boolean":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","true","false"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"stream_action_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","DROP","RESET"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"charset_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","ASCII","UTF_8"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"textmode_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","IGNORECASE","NOIGNORECASE","URLENCODED","NOURLENCODED","PLUS_AS_SPACE","NO_PLUS_AS_SPACE","BACKSLASH_ENCODED","NO_BACKSLASH_ENCODED","BAD_ENCODE_RAISE_UNDEF","NO_BAD_ENCODE_RAISE_UNDEF"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"vserver_state_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","UP","DOWN","OUT_OF_SERVICE"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"tcp_options_type_name_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","REPEATER","TIMESTAMP","SACK_PERMITTED","WINDOW","MAXSEG"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"digest_method_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","MD2","MD4","MD5","SHA1","SHA224","SHA256","SHA384","SHA512"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"diameter_flag_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","REQUEST","PROXIABLE","ERROR","RETRANSMIT","RESERVED_4","RESERVED_5","RESERVED_6","RESERVED_7"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"dns_rcode_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","NOERROR","FORMERR","SERVFAIL","NXDOMAIN","NOTIMP","REFUSED"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"dns_transport_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","TCP","UDP"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"dns_type_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","A","AAAA","ANY","CNAME","PTR","MX","NS","SRV","SOA","TXT","NAPTR"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"error_category_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","ERR_AAA_GENERIC","ERR_AAA_ALLOC","ERR_AAA_C2C","ERR_AAA_POLICY","ERR_AAA_CONFIG","ERR_AAA_IIP","ERR_AAA_AUTHN","ERR_AAA_REASSEMBLY","ERR_AAA_NOSERVICE","ERR_AAA_UNAUTHORIZED","ERR_AAA_BAD_REQUEST","ERR_AAA_PAGE_NOT_FOUND","ERR_UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"ether_type_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","PUP","IPV4","ARP","REVARP","IPV6","VLAN","ETHERTYPE_UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"http_tracking_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","LENGTH","FIN","CHUNK","UNKNOWN_TRACKING"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mssql_req_command_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","QUERY","PRETDS7","RPC","RESPONSE","ATTENTION","BULKDATA","TRANSMGR","LOGIN","SSPI","PRELOGIN","COM_UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"binary_encoding_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","BASE64","BASE64URL","HEX_UPPER","HEX_LOWER","HEX_COLONS","HEX","NONE"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mssql_res_field_datatype_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","INTNTYPE","VARCHRTYPE","DATENTYPE","TIMENTYPE","CHRTYPE","BIGVARCHRTYPE","BIGCHRTYPE","NVARCHRTYPE","NCHRTYPE","UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mssql_res_type_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","OK","ERROR","RESULT_SET"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mysql_charset_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","LATIN2_CZECH_CS","DEC8_SWEDISH_CI","CP850_GENERAL_CI","GREEK_GENERAL_CI","LATIN1_GERMAN1_CI","HP8_ENGLISH_CI","KOI8R_GENERAL_CI","LATIN1_SWEDISH_CI","LATIN2_GENERAL_CI","SWE7_SWEDISH_CI","ASCII_GENERAL_CI","CP1251_BULGARIAN_CI","LATIN1_DANISH_CI","HEBREW_GENERAL_CI","LATIN7_ESTONIAN_CS","LATIN2_HUNGARIAN_CI","KOI8U_GENERAL_CI","CP1251_UKRAINIAN_CI","CP1250_GENERAL_CI","LATIN2_CROATIAN_CI","CP1257_LITHUANIAN_CI","LATIN5_TURKISH_CI","LATIN1_GERMAN2_CI","ARMSCII8_GENERAL_CI","UTF8_GENERAL_CI","CP1250_CZECH_CS","CP866_GENERAL_CI","KEYBCS2_GENERAL_CI","MACCE_GENERAL_CI","MACROMAN_GENERAL_CI","CP852_GENERAL_CI","LATIN7_GENERAL_CI","LATIN7_GENERAL_CS","MACCE_BIN","CP1250_CROATIAN_CI","LATIN1_BIN","LATIN1_GENERAL_CI","LATIN1_GENERAL_CS","CP1251_BIN","CP1251_GENERAL_CI","CP1251_GENERAL_CS","MACROMAN_BIN","CP1256_GENERAL_CI","CP1257_BIN","CP1257_GENERAL_CI","ARMSCII8_BIN","ASCII_BIN","CP1250_BIN","CP1256_BIN","CP866_BIN","DEC8_BIN","GREEK_BIN","HEBREW_BIN","HP8_BIN","KEYBCS2_BIN","KOI8R_BIN","KOI8U_BIN","LATIN2_BIN","LATIN5_BIN","LATIN7_BIN","CP850_BIN","CP852_BIN","SWE7_BIN","UTF8_BIN","GEOSTD8_GENERAL_CI","GEOSTD8_BIN","LATIN1_SPANISH_CI","UTF8_UNICODE_CI","UTF8_ICELANDIC_CI","UTF8_LATVIAN_CI","UTF8_ROMANIAN_CI","UTF8_SLOVENIAN_CI","UTF8_POLISH_CI","UTF8_ESTONIAN_CI","UTF8_SPANISH_CI","UTF8_SWEDISH_CI","UTF8_TURKISH_CI","UTF8_CZECH_CI","UTF8_DANISH_CI","UTF8_LITHUANIAN_CI","UTF8_SLOVAK_CI","UTF8_SPANISH2_CI","UTF8_ROMAN_CI","UTF8_PERSIAN_CI","UTF8_ESPERANTO_CI","UTF8_HUNGARIAN_CI","INVAL_CHARSET"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mysql_req_command_e":case"oracle_req_command_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","SLEEP","QUIT","INIT_DB","QUERY","FIELD_LIST","CREATE_DB","DROP_DB","REFRESH","SHUTDOWN","STATISTICS","PROCESS_INFO","CONNECT","PROCESS_KILL","DEBUG","PING","TIME","DELAYED_INSERT","CHANGE_USER","BINLOG_DUMP","TABLE_DUMP","CONNECT_OUT","REGISTER_SLAVE","STMT_PREPARE","STMT_EXECUTE","STMT_SEND_LONG_DATA","STMT_CLOSE","STMT_RESET","SET_OPTION","STMT_FETCH"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mysql_res_field_datatype_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","DECIMAL","TINY","SHORT","LONG","FLOAT","DOUBLE","NULL","TIMESTAMP","LONGLONG","INT24","DATE","TIME","DATETIME","YEAR","NEWDATE","VARCHAR","BIT","NEWDECIMAL","ENUM","SET","TINY_BLOB","MEDIUM_BLOB","LONG_BLOB","BLOB","VAR_STRING","STRING","GEOMETRY","UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"mysql_res_type_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","OK","ERROR","RESULT_SET"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"service_type_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","ADNS","ANY","DHCPRA","SVC_DNS","FTP","MONITOR","MONITOR_PING","MONITOR_UDP","NNTP","NAT","RPCCLNT","RPCSVRS","RPCSVR","RTSP","SIP_UDP","SNMP","SSL","SSL_BRIDGE","SSL_TCP","TCP","UDP","SVC_HTTP","SVC_MYSQL","SVC_MSSQL","SIP_TCP","SIP_TLS","SERVICE_UNKNOWN"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"sip_method_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","INVITE","REGISTER","CANCEL","BYE","ACK","OPTIONS","UNKNOWN_METHOD"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"sslvpn_mode_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","SECURE_CLIENT_MODE","CLIENTLESS_TRANSPARENT_MODE","CLIENTLESS_OPAQUE_MODE","CLIENTLESS_ENC_MODE","ICA_PROXY_MODE","UNDEFINED_MODE"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"tcp_state_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","CLOSED","CLOSING","CLOSE_WAIT","ESTABLISHED","FIN_WAIT_1","FIN_WAIT_2","LAST_ACK","LISTEN","SYN_RECEIVED","SYN_SENT","TIME_WAIT","NOT_APPLICABLE"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"key_usage_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","DIGITAL_SIGNATURE","NONREPUDIATION","KEYENCIPHERMENT","DATAENCIPHERMENT","KEYAGREEMENT","KEYCERTSIGN","CRLSIGN","ENCIPHERONLY","DECIPHERONLY"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"smpp_bind_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","TRANSMITTER","RECEIVER","TRANSCEIVER"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;case"authentication_error_e":this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select","INVALID_CREDS","NOT_PERMITTED","SYS_TIMEOUT","SYS_ERROR","SOCKET_ERROR","BAD_USER","BAD_PASSWORD","MISMATCH_PASSWORD","INVALID_USER","RESTRICTED_HOURS","ACCOUNT_DISABLED","PASSWORD_EXPIRED","NO_DIALIN_PERM","CHANGE_PASSWORD","ACCOUNT_LOCKED"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render();break;default:this["parameter_value"+t]=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({formatter:{map:["Select"]},mandatory:true,properties:{parameter:"enum",size:1,label:rdx.i18n.get_string("rdx.select")}})).render()}this._box_expression_builder.append(h);this["parameter_value"+t].add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._set_dropdown_text,["enum",this["parameter_value"+t]]))}if(a===true){this._components_created.push(this["parameter_value"+t])}}return};rdx.expression_editor.prototype._set_dropdown_text=function(a,d,b){b.set_data();this._add_arguements_to_textarea()};rdx.expression_editor.prototype._add_arguements_to_textarea=function(b){var f=["IS_MEMBER_OF(String)","VSERVER(String)","Pattern Set","Data Set"];var m="";if(this._components_created.length>=1&&(this._components_created[0].get_data()!="Start With Variable"&&this._components_created[0].get_data()!="Windows"&&this._components_created[0].get_data()!="Mac"&&this._components_created[0].get_data()!="Select"&&this._components_created[0].get_data()!="Common")){m=this._components_created[0].get_data()}var o=function(p){if(p.lastIndexOf(")")==p.length-1){p=p.substring(0,p.length-1);p=p+","}else{p=p+"("}return p};for(var d=1;d<this._components_created.length;d++){if(this._components_created[0].get_data()=="Start With Variable"&&d==1){continue}if(this._components_created[0].get_data()=="Start With Variable"&&this._components_created[1].get_data()=="map"&&this._components_created[3].get_data()=="valueExists"&&d==4){m=m+"("+this._components_created[d].get_data()+")";continue}var h=this._components_created[d].get_data();var e=this._components_created[d-1].get_data();var n=".";if(this._properties.is_epa===true){n="_";var g;if(d==3&&h==e){g=this._map_values.name.lastIndexOf(h)}else{if(d==3){g=this._map_values.name.lastIndexOf(h)}else{g=$.inArray(h,this._map_values.name)}}if(g!=-1){h=this._map_values.value[g]}}var a=this._components_created[d].get_field().get_properties()["parameter"];if(a=="data_patset"){if(rdx.utils.is_defined(this._components_created[d+1])&&this._components_created[d+1].get_data()=="Select"){m=m+"()"}continue}if(h=="Select"&&a!="enum"){continue}if(rdx.utils.is_not_defined(a)||a=="none"){if(h.indexOf("(")!=-1&&this._properties.is_epa===false){m=m+n+h.substring(0,h.indexOf("("))}else{if(rdx.utils.is_not_empty(h)){if(h.match(/^\[COMMENT:/)&&this._properties.is_epa===true){m+=h}else{m=m+n+h}}}}if((a=="String")&&((rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.which))||($.inArray(e,f)!=-1)||(e.indexOf("(String")!=-1))){m=o(m);m=m+'"'+this._components_created[d].get_data()+'"';m=m+")"}else{if(a=="char"&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.which)){m=o(m);m=m+"'"+this._components_created[d].get_data()+"'";m=m+")"}else{if(rdx.utils.is_defined(a)&&a!="none"){m=o(m);if(a=="enum"&&this._components_created[d].get_data()=="Select"){}else{m=m+this._components_created[d].get_data()}m=m+")"}}}}m=$.trim(m);if(m.indexOf(n)==0){m=m.substring(1)}if(m.lastIndexOf(n)==m.length-1){m=m.substring(0,m.length-1)}this.preview_expression_textarea_in_builder.set_data(m)};rdx.expression_editor.prototype._check_validation_for_parameter_value=function(a,b){if(b=="uint"||b=="int"){if(!(a.keyCode>=rdx.keycodes.ZERO&&a.keyCode<=rdx.keycodes.NINE)&&!(a.keyCode>=rdx.keycodes.NUMPAD_ZERO&&a.keyCode<=rdx.keycodes.NUMPAD_NINE)&&a.keyCode!=rdx.keycodes.BACKSPACE&&a.keyCode!=rdx.keycodes.DELETE){a.preventDefault()}}else{if(b=="double"){if(!(a.keyCode>=rdx.keycodes.ZERO&&a.keyCode<=rdx.keycodes.NINE)&&!(a.keyCode>=rdx.keycodes.NUMPAD_ZERO&&a.keyCode<=rdx.keycodes.NUMPAD_NINE)&&a.keyCode!=rdx.keycodes.BACKSPACE&&a.keyCode!=rdx.keycodes.DELETE&&a.keyCode!=rdx.keycodes.DECIMAL_POINT&&parseInt(a.keyCode)!=190){a.preventDefault()}}}};rdx.expression_editor.prototype.populate_data_for_evaluate_textarea=function(b,a){if(!rdx.utils.is_defined(a.get_data())){return}switch(a.get_data()){case"Post Request":this._evaluate_editable_div.text(rdx.i18n.get_string("rdx.expression_editor.sample.post_request"));break;case"Get Request":this._evaluate_editable_div.text(rdx.i18n.get_string("rdx.expression_editor.sample.get_request"));break;case"404 Not Found Response":this._evaluate_editable_div.text(rdx.i18n.get_string("rdx.expression_editor.sample.404_not_found_response"));break;case"200 OK Response":this._evaluate_editable_div.text(rdx.i18n.get_string("rdx.expression_editor.sample.200_ok_response"));break;case"Text URL":this._evaluate_editable_div.text(rdx.i18n.get_string("rdx.expression_editor.sample.text_url"));break;default:this._evaluate_editable_div.text("")}a.set_data()};rdx.expression_editor.prototype.evaluate_expression=function(d,b){var a="<pre>";var e="";if(rdx.utils.is_defined(d.policyevaluation)){if(rdx.utils.is_defined(d.policyevaluation[0]["expression"])){if(rdx.utils.is_defined(d.policyevaluation[0]["pitnumresult"])){e=d.policyevaluation[0]["pitnumresult"];a="Result as number: "+e+"\n";a=a+"Evaluation time in nanoseconds: "+d.policyevaluation[0]["pitnumevaltime"]+"\n"}if(rdx.utils.is_defined(d.policyevaluation[0]["pitulongresult"])){if(rdx.utils.is_empty(a)){e=d.policyevaluation[0]["pitrefresult"];a="Result as unsigned long: "+e+"\n"}else{e=d.policyevaluation[0]["pitulongresult"];a=a+"\nResult as unsigned long: "+e+"\n"}a=a+"Evaluation time in nanoseconds: "+d.policyevaluation[0]["pitulongevaltime"]+"\n"}if(rdx.utils.is_defined(d.policyevaluation[0]["pitdoubleresult"])){if(rdx.utils.is_empty(a)){e=d.policyevaluation[0]["pitrefresult"];a="Result as double: "+d.policyevaluation[0]["pitrefresult"]+"\n"}else{e=d.policyevaluation[0]["pitdoubleresult"];a=a+"\nResult as double: "+d.policyevaluation[0]["pitdoubleresult"]+"\n"}a=a+"Evaluation time in nanoseconds: "+d.policyevaluation[0]["pitdoubleevaltime"]+"\n"}if(rdx.utils.is_defined(d.policyevaluation[0]["pitboolresult"])){e=d.policyevaluation[0]["pitboolresult"];a="Result as bool: "+e+"\n";a=a+"Evaluation time in nanoseconds: "+d.policyevaluation[0]["pitboolevaltime"]+"\n"}if(rdx.utils.is_defined(d.policyevaluation[0]["pitrefresult"])||rdx.utils.is_defined(d.policyevaluation[0]["pitreferrorresult"])){if(rdx.utils.is_empty(d.policyevaluation[0]["pitrefresult"])){d.policyevaluation[0]["pitrefresult"]="UNDEF"}if(rdx.utils.is_defined(d.policyevaluation[0]["pitreferrorresult"])){d.policyevaluation[0]["pitrefresult"]=rdx.utils.html_encode(d.policyevaluation[0]["pitreferrorresult"])}e=d.policyevaluation[0]["pitrefresult"];if(rdx.utils.is_empty(a)){a="Result as string: "+rdx.utils.html_encode(d.policyevaluation[0]["pitrefresult"])+"\n"}else{a=a+"\nResult as string: "+rdx.utils.html_encode(d.policyevaluation[0]["pitrefresult"])+"\n"}a=a+"Evaluation time in nanoseconds: "+d.policyevaluation[0]["pitrefevaltime"]+"\n"}this._highlight_result_string(b,e)}else{if(rdx.utils.is_defined(d.policyevaluation[0]["action"])&&rdx.utils.is_defined(d.policyevaluation[0]["pitmodifiedinputdata"])){a=this._get_difference_and_highlight(b.value,d.policyevaluation[0]["pitmodifiedinputdata"])}}}if((rdx.utils.is_empty(a))||((rdx.utils.is_defined(d.policyevaluation[0]["pitoffsetresultlen"])&&(d.policyevaluation[0]["pitoffsetresultlen"]==0)))){a="Result as string: NULL\n";if(rdx.utils.is_defined(d.policyevaluation[0]["pitrefevaltime"])){a=a+"Evaluation time in nanoseconds: "+d.policyevaluation[0]["pitrefevaltime"]+"\n"}}a+="</pre>";this._result_textarea.html(a)};rdx.expression_editor.prototype._get_difference_and_highlight=function(d,a){var b=new diff_match_patch();var f=b.diff_main(d,a);var g=b.diff_prettyHtml(f);var e="<pre class = 'highlight_data'>"+g+"</pre>";return e};rdx.expression_editor.prototype._highlight_result_string=function(g,e){var d=g.value.toUpperCase().indexOf(e.toString().toUpperCase());var h="highlight_data";if(d!=-1){var f=g.value.substring(0,d);var n=g.value.substring(d+e.length,g.value.length);f=f.replace(/^[\s\r\n]+/,"");f=f.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;");n=n.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;");n=n.replace(/[\s\r\n]+$/,"");e=e.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;");var m=e.split("\n");var a="<span style='background-color: yellow;'><pre class = 'highlight_data'>";var o="<pre class = 'highlight_data'>"+f+"</pre>";for(var b=0;b<m.length;b++){o=o+a+m[b]+"</pre></span>"}if(rdx.utils.starts_with(n,"\n\n")||rdx.utils.starts_with(n,"\r")){h="zero_margin_pre"}o=o+"<pre class = "+h+">"+n+"</pre>";this._evaluate_editable_div.html(o)}else{this._evaluate_editable_div.html(g.value)}};rdx.expression_editor.prototype.get_all_saved_expressions=function(f,m,d){var e=f.get_collated_response();var a=f.get_collated_result();this.expression_editor_saved_expression={name:[],value:[]};this.expression_editor_saved_expression.name[0]=rdx.i18n.get_string("rdx.select");this.expression_editor_saved_expression.value[0]="";if(a[0]==true&&rdx.utils.is_defined(e[0]["policyexpression"])){for(var b=0;b<e[0]["policyexpression"].length;b++){if(e[0]["policyexpression"][b]["type1"]=="ADVANCED"){this.expression_editor_saved_expression.name.push(e[0]["policyexpression"][b]["name"]);this.expression_editor_saved_expression.value.push(e[0]["policyexpression"][b]["value"])}}}if(a[1]==true&&rdx.utils.is_defined(e[1]["nsvariable"])){for(var b=0;b<e[1]["nsvariable"].length;b++){if(e[1]["nsvariable"][b]["type"]=="ulong"){this._nsvariables.ulong.push("$"+e[1]["nsvariable"][b]["name"].toUpperCase())}else{if(rdx.utils.is_defined((e[1]["nsvariable"][b]["type"]).match(/^text\(.*/))){this._nsvariables.text.push("$"+e[1]["nsvariable"][b]["name"].toUpperCase())}else{this._nsvariables.map.push("$"+e[1]["nsvariable"][b]["name"].toUpperCase())}}}}if(this._properties.is_epa==false&&this._properties.extension_support_required==true&&a[2]==true&&rdx.utils.is_defined(e[2]["nsextension"])&&e[2]["nsextension"].length>0){var h=e[2]["nsextension"][0]["name"];for(var b=1;b<e[2]["nsextension"].length;b++){var g={};g.scriptname=e[2]["nsextension"][b]["name"];if(h==g.scriptname){g.func_name=e[2]["nsextension"][b]["extensionfunctionname"];g.classtype=e[2]["nsextension"][b]["extensionfunctionclasses"];g.return_type=e[2]["nsextension"][b]["extensionfunctionreturntype"];g.arg_type=e[2]["nsextension"][b]["extensionfunctionargtype"];g.arg_pisyntax_type=e[2]["nsextension"][b]["extensionfunctionallparams"];g.arg_count=e[2]["nsextension"][b]["extensionfunctionallparamscount"];g.help=e[2]["nsextension"][b]["extensionfuncdescription"];if(rdx.utils.is_defined(g.func_name)){this._extended_functions[g.func_name.toUpperCase()]=g}}else{h=g.scriptname;continue}}}if(rdx.utils.is_defined(m)){this.expression_editor_saved_expression.name.push(m.name);this.expression_editor_saved_expression.value.push(m.value)}this._import_expressions.remove_items(false,false);this._import_expressions.add_data_items(this.expression_editor_saved_expression.name)};rdx.expression_editor.prototype.add_imported_expression_to_current_expression=function(b){if(this._import_expressions.get_data()=="Select"){return}for(var a=0;a<this.expression_editor_saved_expression.name.length;a++){if(this._import_expressions.get_data()==this.expression_editor_saved_expression.name[a]){this._append_expression(this.expression_editor_saved_expression.name[a]);break}}};rdx.expression_editor.prototype.change_sample_data_according_to_flow_type=function(b,a){switch(this._flowtype_dropdown.get_data()){case"HTTP Request":this._flowtype_selected="http_req";a.remove_items(false,false);a.add_data_items(["Sample","Post Request","Get Request"]);break;case"HTTP Response":this._flowtype_selected="http_res";a.remove_items(false,false);a.add_data_items(["Sample","404 Not Found Response","200 OK Response"]);break;case"Text":this._flowtype_selected="text";a.remove_items(false,false);a.add_data_items(["Sample","Text URL"]);break;default:this._flowtype_selected=null;a.remove_items(false,false);a.add_data_items(["Sample","Post Request","Get Request"]);break}a.set_data(rdx.i18n.get_string("rdx.expression_evaluator.sample_data.label"));this._flowtype_dropdown.set_data()};rdx.expression_editor.prototype.add_help_text=function(a){a=rdx.utils.is_defined(a)?a:{};this._current_help_icon_cell.unbind(rdx.events.MOUSE_OVER);this._current_help_icon_cell.unbind(rdx.events.CLICK);this._current_help_icon_cell.bind(rdx.events.MOUSE_OVER,{expression:this,properties:a},function(b){if(rdx.utils.is_object_empty(b.data.expression._extended_functions)||rdx.utils.is_not_defined(b.data.expression._extended_functions[b.data.expression._input_value])){b.data.properties.message=b.data.properties.message}else{b.data.properties.message=b.data.expression._get_scriptfunction_help(b.data.expression._input_value)}b.data.expression._current_help_icon.render(b.data.properties)});this._current_help_icon_cell.bind(rdx.events.CLICK,{expression:this,properties:a},function(b){if(rdx.utils.is_object_empty(b.data.expression._extended_functions)||rdx.utils.is_not_defined(b.data.expression._extended_functions[b.data.expression._input_value])){b.data.properties.message=b.data.properties.message}else{b.data.properties.message=b.data.expression._get_scriptfunction_help(b.data.expression._input_value)}b.data.expression._current_help_icon.render(b.data.properties)})};rdx.expression_editor.prototype.close_expression_buider_dialog=function(a){this._box_expression_builder.children().remove();this._dropdown_created=[];this._input_value=undefined;this.preview_expression_textarea_in_builder.set_data("");a.remove();if(rdx.page.get_slider_crumb().get_current_crumb().index<=0){rdx.page.hide_slider()}else{rdx.page.get_slider_crumb().remove_current_crumb()}$(this._expression_builder_link_div_container).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});this._expression_builder_link_div_container.remove();if(rdx.utils.is_defined(this._properties.close_builder_dialog_callback)){this._properties.close_builder_dialog_callback.call_back([this._expression_textarea])}};rdx.expression_editor.prototype._get_frequency_data=function(){if(rdx.utils.is_defined(this["parameter_value_frequency"])){return this["parameter_value_frequency"].get_data()}return""};rdx.expression_editor.prototype._handle_done_button_click=function(b,h){if($.trim(this._expression_textarea.get_data())==""){this._start_new_exp=true}else{this._start_new_exp=false}if(this._start_new_exp){if(this._properties.is_epa===true){var g=this._get_frequency_data();var d="CLIENT.APPLICATION";var f=this.preview_expression_textarea_in_builder.get_data();if(this._components_created.length>1&&neo.epa_utils._check_for_direct_scans(this._components_created[1].get_data())){d="CLIENT.SYSTEM"}if(this._components_created[1].get_data()=="Process"){d="COMMON.PROCESS"}else{if(this._components_created[1].get_data()=="Service"){d="COMMON.Service"}else{if(this._components_created[1].get_data()=="File"){d="COMMON.FILE"}else{if(this._components_created[1].get_data()=="File Time"){d="COMMON.FILETIME"}else{if(this._components_created[1].get_data()=="Operating System"){d="COMMON.OS"}else{if(this._components_created[1].get_data()=="Mount Point"){d="COMMON.MOUNTPOINT"}}}}}}if(this._properties.get_epa_pi_data){var e="";if(rdx.utils.is_not_empty(f)){e+='sys.client_expr("'}if(d==="CLIENT.APPLICATION"){e+="app_"}else{if(d==="CLIENT.SYSTEM"){e+="sys_"}}if(rdx.utils.is_not_empty(g)){if(d==="CLIENT.APPLICATION"||d==="CLIENT.SYSTEM"){e+=g+"_"}else{var n=f.split("_");n.splice(1,0,g);f=n.join("_")}}else{if(d!=="CLIENT.APPLICATION"&&d!=="CLIENT.SYSTEM"){var n=f.split("_");n.splice(1,0,"0");f=n.join("_")}else{e+="0_"}}if(rdx.utils.is_not_empty(f)){e+=f+'")'}this._append_expression(e)}else{if(rdx.utils.is_not_empty(f)&&rdx.utils.is_not_empty(g)){this._append_expression(d+"("+f+") EXISTS -frequency "+g)}else{if(rdx.utils.is_not_empty(f)){this._append_expression(d+"("+f+") EXISTS")}}}}else{this._append_expression(this.preview_expression_textarea_in_builder.get_data())}this._start_new_exp=false}else{if(this._properties.is_epa===true){var g=this._get_frequency_data();var d="CLIENT.APPLICATION";var f=this.preview_expression_textarea_in_builder.get_data();if(neo.epa_utils._check_for_direct_scans(this._components_created[1].get_data())){d="CLIENT.SYSTEM"}if(this._components_created[1].get_data()=="Process"){d="COMMON.PROCESS"}else{if(this._components_created[1].get_data()=="Service"){d="COMMON.Service"}else{if(this._components_created[1].get_data()=="File"){d="COMMON.FILE"}else{if(this._components_created[1].get_data()=="File Time"){d="COMMON.FILETIME"}else{if(this._components_created[1].get_data()=="Operating System"){d="COMMON.OS"}else{if(this._components_created[1].get_data()=="Mount Point"){d="COMMON.MOUNTPOINT"}}}}}}if(this._properties.get_epa_pi_data){var e="";if(rdx.utils.is_not_empty(f)){e+='sys.client_expr("'}if(d==="CLIENT.APPLICATION"){e+="app_"}else{if(d==="CLIENT.SYSTEM"){e+="sys_"}}if(rdx.utils.is_not_empty(g)){if(d==="CLIENT.APPLICATION"||d==="CLIENT.SYSTEM"){e+=g+"_"}else{var n=f.split("_");n.splice(1,0,g);f=n.join("_")}}else{if(d!=="CLIENT.APPLICATION"&&d!=="CLIENT.SYSTEM"){var n=f.split("_");n.splice(1,0,"0");f=n.join("_")}else{e+="0_"}}if(rdx.utils.is_not_empty(f)){e+=f+'")'}this._append_expression(e)}else{if(rdx.utils.is_not_empty(g)){this._append_expression(d+"("+f+") EXISTS -frequency "+g)}else{this._append_expression(d+"("+f+") EXISTS")}}}else{this._append_expression(this.preview_expression_textarea_in_builder.get_data())}}if(this._properties.is_epa===true){var a=$(".expression_textarea");var m=a.val().length;a.focus();a[0].setSelectionRange&&a[0].setSelectionRange(m,m)}this.close_expression_buider_dialog(h)};rdx.expression_editor.prototype._handle_cancel_button_click=function(b,a){this.close_expression_buider_dialog(a);if(this._expression_textarea.get_data()==""){this._start_new_exp=true}};rdx.expression_editor.prototype._handle_evaluate_button_click=function(d){if(rdx.utils.is_defined(this._flowtype_selected)){var b=this._evaluate_editable_div[0].innerText;b=rdx.utils.trim(b);b=b.replace(new RegExp("\r?\n","g"),"\r\n").concat("\n\n");var a={name:"input",value:b};var f="";if(this._properties.standalone_evaluator&&this._properties.render_textarea_in_evaluator){f=this._expression_textarea.get_data()}else{f=this.preview_expression_textarea_in_evaluator.get_data()}var e={force_get_by_name:[{name:"expression",value:f},{name:"type",value:this._flowtype_selected},a],use_args:true,is_query_param:true};if(this._properties.evaluate_action){e={force_get_by_name:[{name:"action",value:f},{name:"type",value:this._flowtype_selected},a],use_args:true,is_query_param:true}}rdx.model.get(rdx.utils.get_resource("policyevaluation"),e,new rdx.callback(this,this.evaluate_expression,[a]),null,new rdx.callback(function(h,g){g._result_textarea.text("");rdx.message_box.error(h,null,rdx.i18n.get_string("rdx.message_box_error"),null)},[this]))}else{rdx.page.show_notification("Please select a valid flow type.",rdx.ERROR)}};rdx.expression_editor.prototype._handle_close_button_click=function(d,a,b){this._flowtype_dropdown.set_data("Select");this._evaluate_editable_div.text("");a.set_data("Sample");this._result_textarea.text("");if(rdx.page.get_slider_crumb().get_current_crumb().index<=0){rdx.page.hide_slider()}else{rdx.page.get_slider_crumb().remove_current_crumb()}$(this._expression_evaluator_link_div_container).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});this._expression_evaluator_link_div_container.remove()};rdx.expression_editor.prototype._handle_pat_set_and_data_set=function(d,h){h.set_data();var g=this._get_dropdown_index(d,h);dropdowns_created_index=g.dropdowns_created;components_created_index=g.components_created;switch(h.get_data()){case"Select":var a;for(var b=0;b<this._dropdown_created.length;b++){if(this._dropdown_created[b].get_component()[0]==d.target){a=b;break}}this._dropdown_created.splice(a+1,this._dropdown_created.length-a-1);for(var b=this._box_expression_builder.children().length-1;;){if(d.target.parentNode.parentNode==this._box_expression_builder.children("div:eq("+b+")")[0]){break}else{var f=this._box_expression_builder.children("div:eq("+b+")");if(!f.hasClass("expression_editor_help")){this._components_created.pop()}f.remove();b--}}break;case"Pattern Set":var e=$("<div>").addClass("rdx_left");if(!h.get_wrapper().next().hasClass("expression_editor_help")){h.get_wrapper().next().remove();this._dropdown_created.splice(dropdowns_created_index+1,1);this._components_created.splice(components_created_index+1,1)}h.get_wrapper().after(e);this._add_dropdown_for_value_from_other_resource(e,[{resrc_name:"policypatset",resrc_key:"name"}],null,null,g);break;case"Data Set":var e=$("<div>").addClass("rdx_left");if(!h.get_wrapper().next().hasClass("expression_editor_help")){h.get_wrapper().next().remove();this._dropdown_created.splice(dropdowns_created_index+1,1);this._components_created.splice(components_created_index+1,1)}h.get_wrapper().after(e);this._add_dropdown_for_value_from_other_resource(e,[{resrc_name:"policydataset",resrc_key:"name"}],null,null,g);break;default:return}this._add_arguements_to_textarea()};rdx.expression_editor.prototype._get_dropdown_index=function(g,h,a){var b={dropdowns_created:0,components_created:0};var f=0;for(var d=0;d<this._dropdown_created.length;d++){var e=this._dropdown_created[d].get_field().get_properties()["parameter"];if(e=="none"){f++}if(this._dropdown_created[d].get_component()[0]==g.target){if(rdx.utils.is_defined(a)&&a==true){b.dropdowns_created=f-1}else{b.dropdowns_created=d}}}f=0;for(var d=0;d<this._components_created.length;d++){var e=this._components_created[d].get_field().get_properties()["parameter"];if(e=="none"){f++}if(this._components_created[d] instanceof rdx.expression_editor.custom_dropdown&&this._components_created[d].get_component()[0]==g.target){if(rdx.utils.is_defined(a)&&a==true){b.dropdowns_created=f-1}else{b.components_created=d}}}return b};rdx.expression_editor.prototype._add_dropdown_for_value_from_other_resource=function(f,g,b,e,h){if(rdx.utils.is_defined(g)){var a=new rdx.model_executor_service(new rdx.callback(null,function(m,s,u,p,n,o,w){var v=["Select"];var q=m.get_collated_response();for(var t=0;t<q.length;t++){if(rdx.utils.is_defined(q[t][u[t].resrc_name])){for(var z=0;z<q[t][u[t].resrc_name].length;z++){v.push(q[t][u[t].resrc_name][z][u[t].resrc_key])}}}var A=null;if(rdx.utils.is_defined(n)&&n=="int"){A=new rdx.expression_editor.custom_dropdown(p,new rdx.form_field({formatter:{map:v},mandatory:true,properties:{parameter:"int",size:1,label:rdx.i18n.get_string("rdx.select")}})).render()}else{A=new rdx.expression_editor.custom_dropdown(p,new rdx.form_field({formatter:{map:v},mandatory:true,properties:{parameter:"String",size:1,label:rdx.i18n.get_string("rdx.select")}})).render()}w._dropdown_created.splice(o.dropdowns_created+1,0,A);w._components_created.splice(o.components_created+1,0,A);A.get_component().bind(rdx.events.CHANGE,{dropdown:A,expression_editor:w},function(B){B.data.dropdown.set_data();B.data.expression_editor._add_arguements_to_textarea("String")})},[new rdx.callback(),g,f,e,h,this]));for(var d=0;d<g.length;d++){a.add("get",rdx.utils.get_resource(g[d]["resrc_name"]),null,null,b)}a.execute()}};rdx.expression_editor.custom_dropdown=function(b,a){this._list=null;this._DEFAULT_PROPERTIES={};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this.render=function(){this._list=new rdx.list(b,a).render();b.wrapInner($("<div>").addClass("ribbon_label_div").addClass("ribbon_list_wrapper"));return this};this.get_data=function(){return this._list.get_data()};this.set_data=function(d){};this.get_component=function(){return this._list.get_component()};this.get_list=function(){return this._list};this.get_field=function(){return this._list.get_field()};this.get_wrapper=function(){return this._list.get_component().parent().parent()};this.add_event_handler=function(d,e){this._list.add_event_handler(d,e)};this.remove_items=function(e,d){this._list.remove_items(e,d)};this.add_data_items=function(e,d){this._list.add_data_items(e,d)}};rdx.expression_editor.custom_textarea=function(b,a){this._element=null;this._DEFAULT_PROPERTIES={};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this.render=function(){this._element=$("<div>").attr("contenteditable","true");b.append(this._element);return this};this.get_data=function(){var h=this._element.html();var e=[];var f=h.indexOf("<span>");if(f!=-1){h=h.substr(0,f)+h.substr(parseInt(f)+parseInt("<span>".length));f=h.indexOf("</span>");h=h.substr(0,f)+h.substr(parseInt(f)+parseInt("</span>".length))}e=h.split("<br>");for(var g=0;g<e.length;g++){var m=e[g].indexOf("\n");if(m!=-1){e[g]=e[g].substr(0,m)}}var d=e[0];for(var g=1;g<e.length;g++){d=d+"\r\n"+e[g]}if(f!=-1){this.set_data(d)}d=rdx.utils.html_decode(d);return d};this.set_data=function(h){var g=h;var e=g.split("\n");var d=e[0];for(var f=1;f<e.length;f++){d=d+"<br>"+e[f]}this._element.html(d)};this.highlight_data=function(h,f){var g=this.get_data();var e=g.substr(0,h)+"<span>"+g.substr(h);var d=parseInt(h)+parseInt("<span>".length)+parseInt(f);e=e.substr(0,d)+"</span>"+e.substr(d);this.set_data(e)};this.get_component=function(){return this._element};this.toggle_read_only=function(d){if(d){this._element.attr("contenteditable","true")}else{this._element.attr("contenteditable","false")}}};rdx.expression_editor.prototype._create_form_for_creating_new_variable=function(t,A){if(this._sub_dialog_opened==true){return}var d=$("<div>").addClass("variable_sup sub_exp");d.append($("<div>").addClass("expression_editor_title").text(rdx.i18n.get_string("rdx.create_new_variable")));var q=$("<table>").append($("<tbody>"));var b=$("<tr>").append($("<td>").text(rdx.i18n.get_string("rdx.name")));var o=$("<td>");var s=new rdx.text_box(o,new rdx.form_field({key:"name"})).render();b.append(o);var h=$("<tr>").append($("<td>").text(rdx.i18n.get_string("rdx.value_length")));var v=$("<td>");var g=new rdx.text_box(v,new rdx.form_field({key:"val_length"})).render();h.append(v);var p=$("<tr>").append($("<td>").text(rdx.i18n.get_string("rdx.map_value"))).addClass("hidden").attr("aria-hidden","true");var B=$("<td>");var f=new rdx.text_box(B,new rdx.form_field({key:"map_val",watermark:"rdx.map_variable_initialization_type"})).render();p.append(B);var w=$("<tr>").append($("<td>").text(rdx.i18n.get_string("rdx.type")));var E=$("<td>");var n=null;if(rdx.utils.is_defined(A)&&A=="ulong"){n=new rdx.text_box(E,new rdx.form_field({key:"type",read_only:true})).render();n.set_data("ulong");h.hide();h.attr("aria-hidden","true");p.hide();p.attr("aria-hidden","true")}else{n=new rdx.list(E,new rdx.form_field({key:"type",mandatory:true,properties:{size:1},formatter:{map:["text","map"]}})).render();n.set_data("text");n.get_component().bind(rdx.events.CHANGE,{variable_text_value_tr:h,variable_map_value_tr:p},function(F){if(F.target.value=="text"){h.show();h.removeAttr("aria-hidden");p.hide();p.attr("aria-hidden","true")}else{p.show();p.removeAttr("aria-hidden");h.hide();h.attr("aria-hidden","true")}})}w.append(E);var D=$("<tr>").append($("<td>").text(rdx.i18n.get_string("rdx.init")));var e=$("<td>");var z=new rdx.text_box(e,new rdx.form_field({key:"init"})).render();D.append(e);q.append(b).append(w).append(h).append(p).append(D);var u=$(this._exp_builder_box).children("div.expression_builder_box_div").height();d.append($("<div>").addClass("expression_builder_box_div").append(q));var a=[s,n,z,g,f];var C=$("<div>").addClass("form_buttons");var m=new rdx.button_bar(C,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.form_add_button_label"),blue_button_click_handler_callback:new rdx.callback(this,this._handle_create_variable_button_click,[a,t,d]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.cancel_button.label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_cancel_variable_button_click,[d])}})).render();d.append(C);this._sub_dialog_opened=true;$(this._exp_builder_box).addClass("rdx_relative").append(d);d.animate({left:-1,width:"101%"},300)};rdx.expression_editor.prototype._epa_handle_create_variable_button_click=function(b,e,d,m,o){var t="";var p="";for(var n=0;n<e.length;n++){if(rdx.utils.is_not_empty(e[n]["possible_value"].get_data())&&e[n]["type"]=="LIST"&&e[n]["allowmultiple"]==false){if(this._properties.get_epa_pi_data&&rdx.utils.is_defined(this._components_created)&&this._components_created.length>=2&&$.inArray(this._components_created[1].get_data(),this._properties.epa_common_scans)>-1){var a=e[n]["possible_value"].get_field().get_formatter()._input_map[e[n]["possible_value"].get_data()];if(!(this._components_created[1].get_data()=="Service"&&a=="version")&&!(this._components_created[1].get_data()=="File Time"&&a=="timestamp")){if(t!=""){t+="_"+a}else{t+=a}}}else{t+=e[n]["name"]+"_"+e[n]["comparator"].get_data()+"_"+e[n]["possible_value"].get_field().get_formatter()._input_map[e[n]["possible_value"].get_data()]+"_"}}else{if(rdx.utils.is_not_empty(e[n]["possible_value"].get_data())&&e[n]["type"]=="LIST"&&e[n]["allowmultiple"]==true){t+=e[n]["name"]+"_"+e[n]["comparator"].get_data();var q=e[n]["possible_value"].get_data();var s="";for(var g=0;g<q.length;g++){if(rdx.utils.is_not_empty(q[g])){s+=e[n]["possible_value"].get_field().get_formatter().get_storage_value(q[g])+","}}t+="_"+s.replace(/,$/,"")}else{if(rdx.utils.is_not_empty(e[n]["possible_value"].get_data())&&e[n]["name"]==="COMMENT"){p=e[n]["possible_value"].get_data()}else{if(rdx.utils.is_not_empty(e[n]["possible_value"].get_data())){var h=e[n]["possible_value"].get_data();if(this._properties.get_epa_pi_data&&rdx.utils.is_defined(this._components_created)&&this._components_created.length>=2&&$.inArray(this._components_created[1].get_data(),this._properties.epa_common_scans)>-1){if(!(this._components_created[1].get_data()=="File Time"&&e[n]["name"]=="Qualifier_value")){if(t!=""){t+="_"+h}else{t+=h}}else{var f=h.split("-");if(f.length>=3){h=f[0]+f[1]+f[2]+"dt"}if(t!=""){t+="_"+h}else{t+=h}}}else{var f=h.split("\\");h=f.join("\\\\\\\\");h=h.replace(/_/g,"\\\\_").replace(/ /g,"\\ ").replace(/,$/,"");t+=e[n]["name"]+"_"+e[n]["comparator"].get_data()+"_"+h+"_"}}}}}}if(t.match(/ENC-TYPE/)&&!t.match(/ENC-PATH/)){rdx.message_box.error(rdx.i18n.get_string("rdx.epa_enc_path_missing_error"));return}if(t.match(/ENC-PATH/)&&!t.match(/ENC-TYPE/)){rdx.message_box.error(rdx.i18n.get_string("rdx.epa_enc_type_missing_error"));return}t=t.replace(/_$/,"");if(rdx.utils.is_not_empty(p)){t+="[COMMENT: "+p+"]"}d.set_data(t);d.get_component().trigger(rdx.events.KEYUP);this._handle_cancel_variable_button_click(b,m)};rdx.expression_editor.prototype._handle_create_variable_button_click=function(b,e,d,g,m){var a={};for(var h=0;h<e.length;h++){a[e[h].get_field().get_key()]=e[h].get_data()}if(a.type=="text"){a.type=a.type+"("+a.val_length+")"}else{if(a.type=="map"){a.type=a.type+"("+a.map_val+")"}}delete a.map_val;delete a.val_length;var n=function(p,t,u,s,q,o){if(p.errorcode==0){s.set_data("$"+a.name);s.get_component().removeAttr("parameter");s.get_component().trigger(rdx.events.KEYUP);o._handle_cancel_variable_button_click(t,q)}};var f=function(o){rdx.message_box.error(o,null,rdx.i18n.get_string("neo.error_message_title"),null)};rdx.model.add(rdx.utils.get_resource("nsvariable"),new rdx.callback(n,[b,e,d,g,this]),a,new rdx.callback(f),null,null)};rdx.expression_editor.prototype._create_form_for_selecting_variable=function(b,a){rdx.model.get_all(rdx.utils.get_resource("nsvariable"),null,new rdx.callback(null,function(e,p,m){if(m._sub_dialog_opened==true){return}var g=$("<div>").addClass("variable_sup sub_exp");g.append($("<div>").addClass("expression_editor_title").text(rdx.i18n.get_string("rdx.select_any_variable")));var t=$(this._exp_builder_box).children("div.expression_builder_box_div").height();var q=$("<div>").addClass("expression_builder_box_div");var o=[];var u=[];var h=null;if(rdx.utils.is_defined(e.nsvariable)){for(var f=0;f<e.nsvariable.length;f++){if(e.nsvariable[f].type=="ulong"){u.push(e.nsvariable[f])}else{o.push(e.nsvariable[f])}}if(rdx.utils.is_not_empty(o)&&rdx.utils.is_defined(p)&&$.inArray(p,["uint","int","double","ulong","mac","ulong_var"])==-1){var v=[];for(var f=0;f<o.length;f++){if((p=="map"&&o[f].type.match(/.*map.*/))||(p=="text"&&o[f].type.match(/^text.*/))||p=="String"||p=="both"){v.push(o[f]["name"])}}h=new rdx.radio_group(q,new rdx.form_field({key:"text_type_var",formatter:{map:v},properties:{render_mode:"row"}})).render()}else{if(rdx.utils.is_not_empty(u)&&rdx.utils.is_defined(p)&&p=="ulong"){var n=[];for(var f=0;f<u.length;f++){n.push(u[f]["name"])}h=new rdx.radio_group(q,new rdx.form_field({key:"ulong_type_var",formatter:{map:n},properties:{render_mode:"row"}})).render()}}}g.append(q);var s=$("<div>").addClass("form_buttons");var d=new rdx.button_bar(s,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.form_modify_button_label"),blue_button_click_handler_callback:new rdx.callback(m,m._handle_ok_button_click,[h,b,g]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.cancel_button.label"),grey_button_click_handler_callback:new rdx.callback(m,m._handle_cancel_variable_button_click,[g])}})).render();g.append(s);$(m._exp_builder_box).addClass("rdx_relative").append(g);m._sub_dialog_opened=true;g.animate({left:-1,width:"101%"},300)},[a,this]))};rdx.expression_editor.prototype._handle_cancel_variable_button_click=function(b,a){this._sub_dialog_opened=false;a.animate({left:"700px"},300,function(){a.remove();$(this._exp_builder_box).removeClass("rdx_relative")})};rdx.expression_editor.prototype._handle_ok_button_click=function(d,f,b,a){var e=f.get_data();b.set_data("$"+e);b.get_component().removeAttr("parameter");b.get_component().trigger(rdx.events.KEYUP);this._handle_cancel_variable_button_click(d,a)};rdx.expression_editor.prototype._create_expression_starting_with_variable=function(e,g){g.set_data();switch(g.get_data()){case"Select":return;case"ulong":while(g.get_wrapper().next().length!=0){g.get_wrapper().next().remove()}this._dropdown_created.splice(2,this._dropdown_created.length);this._components_created.splice(2,this._components_created.length);this.get_parameter_for_method_class("ulong_var");this._selected_class_order.push("num_at");var b=neo.pi_syntax_utils.get_data_items("num_at");this._box_expression_builder.append($("<div>"));var f=new rdx.expression_editor.custom_dropdown(this._box_expression_builder.children().last(),new rdx.form_field({formatter:{map:b.data_items},options_in_bold:b.bold_data_items,mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select"),add_textoverflow_class:true}})).render();this._dropdown_created.push(f);this._components_created.push(f);this._box_expression_builder.children().last().addClass("rdx_left");f.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_more_dropdowns,[f]));break;case"text":while(g.get_wrapper().next().length!=0){g.get_wrapper().next().remove()}this._dropdown_created.splice(2,this._dropdown_created.length);this._components_created.splice(2,this._components_created.length);this.get_parameter_for_method_class("text");this._selected_class_order.push("text_t");var b=neo.pi_syntax_utils.get_data_items("text_t");this._box_expression_builder.append($("<div>"));var f=new rdx.expression_editor.custom_dropdown(this._box_expression_builder.children().last(),new rdx.form_field({formatter:{map:b.data_items},options_in_bold:b.bold_data_items,mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select"),add_textoverflow_class:true}})).render();this._dropdown_created.push(f);this._components_created.push(f);this._box_expression_builder.children().last().addClass("rdx_left");f.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_more_dropdowns,[f]));break;case"map":while(g.get_wrapper().next().length!=0){g.get_wrapper().next().remove()}this._dropdown_created.splice(2,this._dropdown_created.length);this._components_created.splice(2,this._components_created.length);this.get_parameter_for_method_class("map",null,true);var a=$("<div>").addClass("rdx_left");this._box_expression_builder.append(a);var d=new rdx.expression_editor.custom_dropdown(a,new rdx.form_field({formatter:{map:["Select","valueExists","valueCount"]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select")}})).render();d.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression_starting_with_map_variable,[d]));this._dropdown_created.push(d);this._components_created.push(d);break;case"epa":this.get_parameter_for_method_class("epa",g.getdata());break;default:return}this._add_arguements_to_textarea()};rdx.expression_editor.prototype._create_expression_starting_with_map_variable=function(b,e){e.set_data();switch(e.get_data()){case"Select":while(e.get_wrapper().next().length!=0){e.get_wrapper().next().remove()}this._dropdown_created.splice(3,this._dropdown_created.length);this._components_created.splice(4,this._components_created.length);break;case"valueExists":while(e.get_wrapper().next().length!=0){e.get_wrapper().next().remove()}this._dropdown_created.splice(3,this._dropdown_created.length);this._components_created.splice(4,this._components_created.length);this.get_parameter_for_method_class("both",null,true);break;case"valueCount":while(e.get_wrapper().next().length!=0){e.get_wrapper().next().remove()}this._dropdown_created.splice(3,this._dropdown_created.length);this._components_created.splice(4,this._components_created.length);this._selected_class_order.push("num_at");var a=neo.pi_syntax_utils.get_data_items("num_at");this._box_expression_builder.append($("<div>"));var d=new rdx.expression_editor.custom_dropdown(this._box_expression_builder.children().last(),new rdx.form_field({formatter:{map:a.data_items},options_in_bold:a.bold_data_items,mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.select"),add_textoverflow_class:true}})).render();this._dropdown_created.push(d);this._components_created.push(d);this._box_expression_builder.children().last().addClass("rdx_left");d.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_more_dropdowns,[d]));break;default:return}this._add_arguements_to_textarea()};rdx.expression_editor.prototype.get_label_container=function(){return this._label_span};rdx.expression_editor.prototype._create_form_for_epa_supported_scans=function(s,z){if(this._sub_dialog_opened==true){return}var D=neo.epa_utils.render_drop_down_for_inner_data(z);var f=$("<div>").addClass("variable_sup sub_exp");f.append($("<div>").addClass("expression_editor_title").text("Create Product Scans"));var p=$("<table>").append($("<tbody>"));var a=[];var v=[];for(var A=0;A<D.data_items.length;A++){var e=$("<tr>").append($("<td>").text(D.ui_names[A]));var d=$("<td>");var w=new rdx.list(d,new rdx.form_field({key:D.data_items[A],mandatory:true,properties:{size:1},formatter:{map:D.comparator[A]}})).render();var o=$("<td>");var t;var g=D.tooltip[A];var C=$("<div>").addClass("search_tip_container");var q=$("<div>").addClass("search_tip_content");var m=$("<span>").addClass("search_help_text").append(g);var h=$("<span>").addClass("search_tip_close_button");if(D.type[A]==="LIST"&&rdx.utils.is_not_empty(D.possible_values[A])&&D.allowmultiple[A]===false){t=new rdx.list(o,new rdx.form_field({key:D.data_items[A],mandatory:true,properties:{size:1},formatter:{map:D.possible_values[A]}})).render()}else{if(D.type[A]==="LIST"&&rdx.utils.is_not_empty(D.possible_values[A])&&D.allowmultiple[A]===true){t=new rdx.list(o,new rdx.form_field({key:D.data_items[A],properties:{size:2,multi_select:true},formatter:{map:D.possible_values[A]}})).render()}else{if(D.type[A]==="LIST"&&rdx.utils.is_empty(D.possible_values[A])){D.type[A]="TEXT";t=new rdx.text_box(o,new rdx.form_field({key:D.data_items[A],watermark:"Use comma separated values.Ex: var1,var2,var3"})).render()}else{if(D.type[A]==="BOOLEAN"){t=new rdx.text_box(o,new rdx.form_field({key:D.data_items[A]})).render();t.set_data("TRUE")}else{if(D.type[A]==="SPECIAL"){continue}else{if(D.type[A]==="TEXT"&&D.data_items[A]==="COMMENT"){t=new rdx.text_box(o,new rdx.form_field({key:D.data_items[A]})).render();t.set_data(z)}else{t=new rdx.text_box(o,new rdx.form_field({key:D.data_items[A]})).render()}}}}}}h.bind(rdx.events.CLICK,{tooltip:this._search_tooltip},function(E){E.data.tooltip.remove_tooltip()});q.append(h,m);C.append(q);e.append(d).append(o);p.append(e);var b=new rdx.tooltip(t.get_component(),{append_element:C,remove_tooltip_mouse_leave:false});v.push(b);t.get_component().bind(rdx.events.FOCUS_IN,{tool_tip_obj_arr:v,i:A},function(E){E.data.tool_tip_obj_arr[E.data.i].render();E.stopPropagation()});t.get_component().bind(rdx.events.FOCUS_OUT,{tool_tip_obj_arr:v,i:A},function(E){E.data.tool_tip_obj_arr[E.data.i].remove_tooltip();E.stopPropagation()});a.push({name:D.data_items[A],comparator:w,possible_value:t,type:D.type[A],allowmultiple:D.allowmultiple[A]})}var u=$(this._exp_builder_box).children("div.expression_builder_box_div").height();f.append($("<div>").addClass("expression_builder_box_div").append(p));var B=$("<div>").addClass("form_buttons");var n=new rdx.button_bar(B,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.form_modify_button_label"),blue_button_click_handler_callback:new rdx.callback(this,this._epa_handle_create_variable_button_click,[a,s,f]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.cancel_button.label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_cancel_variable_button_click,[f])}})).render();f.append(B);this._sub_dialog_opened=true;$(this._exp_builder_box).addClass("rdx_relative").append(f);f.animate({left:-1,width:"101%"},300)};rdx.page.add_event_handler(rdx.events.APP_LOADED,new rdx.callback(rdx.utils,rdx.utils._initialize_expression_editor));rdx.expression_editor.prototype._show_intellisense_box=function(h,b,n,g){var a=[];this._intellisense_selected_option=null;this._intellisense_box=$("<div>").addClass("rdx_intellisense_cell");var f=$("<div>").addClass("intellisense_text");this._intellisense_box.append(f);this._intellisense_text_box=new rdx.text_box(f,new rdx.form_field({})).render();this._intellisense_text_box_component=this._intellisense_text_box.get_component();this._intellisense_option_holder=$("<div>").addClass("intellisense_option_holder");for(var e=0;e<h.length;e++){a[e]=$("<div>").addClass("intellisense_cell_options").text(h[e]);if(e==0){a[e].addClass("intellisense_option_focussed_cell");this._intellisense_selected_option=a[e]}this._intellisense_option_holder.append(a[e])}this._no_match_container=$("<div>").addClass("intellisense_cell_options").text("No Match").css({display:"none"});this._intellisense_option_holder.append(this._no_match_container);this._intellisense_box.append(this._intellisense_option_holder);var o=$("<div>").addClass("toggle_tooltip_holder");this._toggle_help_text_container=$("<div>").addClass("toggle_help_text_container");if(!this._tooltip_visibility){this._toggle_help_text_container.append(rdx.i18n.get_string("rdx.show_help"))}else{this._toggle_help_text_container.append(rdx.i18n.get_string("rdx.hide_help"))}o.append(this._toggle_help_text_container);this._intellisense_box.append(o);this._toggle_help_text_container.bind(rdx.events.CLICK,{that:this},function(p){p.data.that._toggle_tooltip_visibility();p.preventDefault()});var d=this._scrollbar_width();var m=new rdx.bubble_component(null,{x_y_position:{x_position:b,y_position:n},content_dom:this._intellisense_box,custom_class:"rdx_expression_editor_intellisense_z_index"});this._intellisense_bubble_box=m.render();this._intellisense_box.css("min-width",this._intellisense_bubble_box.width()+d);this._intellisense_text_box_component.css({"min-width":this._intellisense_box.width()});if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(g)){this._add_help_intellisense(a[0],g[0])}if(!this._tooltip_visibility&&rdx.utils.is_defined(this._help_option_bubble)){this._help_option_bubble.hide();this._help_option_bubble.attr("aria-hidden","true")}for(var e=0;e<a.length;e++){a[e].bind(rdx.events.UPDATE_SELECTED_OPTION,{that:this,intellisense_box:this._intellisense_option_holder,count:e},function(p){if(!$(this).is(":visible")){return}if(($(this).position().top+$(this).height())>=p.data.intellisense_box.height()){p.data.intellisense_box.scrollTop($(this).position().top+$(this).outerHeight()-p.data.intellisense_box.height()+p.data.intellisense_box.scrollTop())}else{if($(this).position().top<0){p.data.intellisense_box.scrollTop(p.data.intellisense_box.scrollTop()+$(this).position().top)}}if(rdx.utils.is_defined(p.data.that._help_option_bubble)){p.data.that._help_option_bubble.remove()}$(this).addClass("intellisense_option_focussed_cell");p.data.that._intellisense_selected_option=$(this);$(this).siblings().removeClass("intellisense_option_focussed_cell");if(rdx.utils.is_defined($(this))&&rdx.utils.is_defined(g)){p.data.that._add_help_intellisense($(this),g[p.data.count])}if(!p.data.that._tooltip_visibility&&rdx.utils.is_defined(p.data.that._help_option_bubble)){p.data.that._help_option_bubble.hide();p.data.that._help_option_bubble.attr("aria-hidden","true")}p.stopPropagation();p.preventDefault();return false});a[e].bind(rdx.events.MOUSE_MOVE,{that:this},function(p){if(p.data.that._mousemove_previousx!==p.clientX&&p.data.that._mousemove_previousy!==p.clientY){$(this).trigger(rdx.events.UPDATE_SELECTED_OPTION)}p.data.that._mousemove_previousx=p.clientX;p.data.that._mousemove_previousy=p.clientY});a[e].bind(rdx.events.CLICK,{that:this},function(p){p.preventDefault();$(this).trigger(rdx.events.UPDATE_SELECTED_OPTION);p.data.that._process_selection();return false})}this._intellisense_box.bind(rdx.events.REMOVE,{that:this},function(p){p.data.that._intellisense_box=null});this._intellisense_box.bind(rdx.events.MOUSE_DOWN,function(p){p.stopPropagation();p.preventDefault()})};rdx.expression_editor.prototype._add_help_intellisense=function(p,m){if(rdx.utils.is_defined(this._help_option_bubble)){this._help_option_bubble.remove()}this._content_holder=$("<div>").append(m).addClass("rdx_intellisense_help_content_holder");var a=$("<span>").addClass("rdx_intellisense_help_image");var f=$("<span>").addClass("rdx_intellisense_help_header_content_holder").append(p.text());var g=$("<div>").append(a,f).addClass("rdx_intellisense_help_header_holder");this._help_container=$("<div>").addClass("rdx_intellisense_help_bubble");this._help_container.append(g,this._content_holder);var q=new rdx.tooltip(p,{append_element:this._help_container,custom_class:"rdx_tooltip_z_index",remove_tooltip_mouse_leave:false});this._help_option_bubble=q.render();var o=false;var d=this._help_option_bubble.children();for(var e=0;e<d.length;e++){if($(d[e]).hasClass("rdx_position_bubble_arrow_right")){o=true;break}}if(o==true&&(this._intellisense_option_holder[0].scrollHeight>this._intellisense_option_holder[0].clientHeight)){var h=$(window).width();var b=$(window).scrollLeft();var n=b+h;if((this._help_option_bubble.offset().left+this._help_option_bubble.width()+this._scrollbar_width())<n){this._help_option_bubble.css({left:this._help_option_bubble.offset().left+this._scrollbar_width()})}}this._help_option_bubble.bind(rdx.events.MOUSE_DOWN,{that:this},function(s){s.preventDefault();s.stopPropagation()})};rdx.expression_editor.prototype._toggle_tooltip_visibility=function(){if(rdx.utils.is_defined(this._help_option_bubble)){if(this._help_option_bubble.is(":visible")){this._tooltip_visibility=false;this._toggle_help_text_container.text(rdx.i18n.get_string("rdx.show_help"))}else{this._tooltip_visibility=true;this._toggle_help_text_container.text(rdx.i18n.get_string("rdx.hide_help"))}this._help_option_bubble.toggle()}};rdx.expression_editor.prototype._focus_editor=function(){this._expression_textarea_component.focus()};rdx.expression_editor.prototype._clear_timer=function(){if(rdx.utils.is_defined(this._timer)){clearTimeout(this._timer)}this._timer=null};rdx.expression_editor.prototype._intellisense_option_click_handler=function(b){var d=b.data.that._expression_textarea_component.text();var a=b.data.that._intellisense_selected_option.text();b.data.that._expression_textarea_component.trigger("focus");b.data.that._insert_text_at_cursor(a)};rdx.expression_editor.prototype._events_intellisense=function(){this._search_string="";this._tooltip_visibility=true;this._expression_textarea_component.addClass("expression_textarea_watermark").attr("placeholder",rdx.i18n.get_string("rdx.expression_editor_watermark"));this._expression_textarea_component.bind(rdx.events.KEYUP,function(){if($(this).text().length==0){$(this).empty()}});if(rdx.utils.is_firefox()){this._expression_textarea_component.bind(rdx.events.MOUSE_DOWN,function(a){if($(this).text().length==0&&$(this).is(":focus")){a.preventDefault();a.stopPropagation();return false}});this._expression_textarea_component.bind(rdx.events.FOCUS_IN,{that:this},function(b){var a=$(this).html();var d=b.data.that._save_selection($(this));$(this).html(a);b.data.that._restore_selection($(this),d)})}this._expression_textarea_component.bind(rdx.events.KEYDOWN,{that:this},function(g){if(g.which==rdx.keycodes.DOWN_ARROW){if(rdx.utils.is_defined(g.data.that._intellisense_box)){var f=g.data.that._intellisense_selected_option.nextAll(":visible:first");if(rdx.utils.is_defined(f[0])){f.trigger(rdx.events.UPDATE_SELECTED_OPTION)}g.preventDefault()}else{g.data.that._search_string=""}}else{if(g.which==rdx.keycodes.UP_ARROW){if(rdx.utils.is_defined(g.data.that._intellisense_box)){var a=g.data.that._intellisense_selected_option.prevAll(":visible:first");if(rdx.utils.is_defined(a[0])){a.trigger(rdx.events.UPDATE_SELECTED_OPTION)}g.preventDefault()}else{g.data.that._search_string=""}}else{if(g.which==rdx.keycodes.ENTER){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.preventDefault();g.data.that._process_selection();return false}}else{if(g.which==rdx.keycodes.LEFT_ARROW||g.which==rdx.keycodes.RIGHT_ARROW){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.preventDefault();return false}}else{if(g.which==rdx.keycodes.BACKSPACE||g.which==rdx.keycodes.DELETE){if(rdx.utils.is_defined(g.data.that._intellisense_box)){if(g.data.that._search_string.length<1){g.data.that._intellisense_bubble_box.remove()}g.data.that._search_string=g.data.that._search_string.substring(0,g.data.that._search_string.length-1);g.data.that._search_item_window(g.data.that._search_string);g.data.that._intellisense_text_box.set_data(g.data.that._search_string);g.preventDefault();return false}}else{if(g.ctrlKey&&(g.which==rdx.keycodes.SPACE)){if(rdx.utils.is_not_defined(g.data.that._intellisense_box)){var d=[];var b=rdx.utils.is_defined(g.data.that._field._properties.prefix_combo_map)?g.data.that._field._properties.prefix_combo_map:[];var h=g.data.that._get_cursor_coordinates(true);if(rdx.utils.is_defined(b)){for(var e=0;e<b.length;e++){d[e]=neo.pi_syntax_utils.get_help_prefix_options(b[e])}}g.data.that._show_intellisense_box(b,h.x,h.y+12,d);g.preventDefault()}g.preventDefault()}else{if(g.which==rdx.keycodes.SPACE){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.preventDefault();g.data.that._process_selection();return false}}else{if(g.which==rdx.keycodes.ESCAPE){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.data.that._intellisense_bubble_box.remove();g.data.that._search_string=""}}else{if(g.which==rdx.keycodes.SEVEN){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.preventDefault();g.shiftKey?(g.data.that._search_string+="&"):(g.data.that._search_string+=String.fromCharCode(g.which));g.data.that._search_item_window(g.data.that._search_string);g.data.that._intellisense_text_box.set_data(g.data.that._search_string)}}else{if(g.which==rdx.keycodes.NUMPAD_SEVEN||g.which==rdx.keycodes.NUMPAD_NINE){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.preventDefault();(g.which==rdx.keycodes.NUMPAD_SEVEN)?(g.data.that._search_string+="7"):(g.data.that._search_string+="9");g.data.that._search_item_window(g.data.that._search_string);g.data.that._intellisense_text_box.set_data(g.data.that._search_string)}}else{if(g.which==rdx.keycodes.NINE){if(rdx.utils.is_defined(g.data.that._intellisense_box)){g.preventDefault();g.shiftKey?(g.data.that._search_string+="("):(g.data.that._search_string+=String.fromCharCode(g.which));g.data.that._search_item_window(g.data.that._search_string);g.data.that._intellisense_text_box.set_data(g.data.that._search_string)}}}}}}}}}}}}});this._expression_textarea_component.bind(rdx.events.KEY_PRESS,{that:this},function(d){var a=46;var b=0;if(rdx.utils.is_firefox()){if(d.which==rdx.keycodes.SPACE||d.which==rdx.keycodes.BACKSPACE){return}}if(d.which==rdx.keycodes.DOWN_ARROW||d.which==rdx.keycodes.UP_ARROW||d.which==0){return}if(d.which==rdx.keycodes.SEVEN||d.which==rdx.keycodes.NINE){return}if(d.which==a){if(rdx.utils.is_defined(d.data.that._intellisense_box)){d.data.that._process_selection();d.data.that._show_window()}else{d.data.that._show_window()}d.data.that._search_string="";d.data.that.saved_selection=null}else{if(rdx.utils.is_defined(d.data.that._intellisense_box)){d.preventDefault();d.data.that._search_string+=String.fromCharCode(d.which);d.data.that._search_item_window(d.data.that._search_string);d.data.that._intellisense_text_box.set_data(d.data.that._search_string);return}}d.stopPropagation()});this._expression_textarea_component.bind(rdx.events.FOCUS_OUT,{that:this},function(b){if(rdx.utils.is_defined(b.data.that._intellisense_box)){var a=b.data.that;if(rdx.utils.is_ie()&&((rdx.utils.is_defined(b.data.that._intellisense_option_holder)&&(b.data.that._intellisense_option_holder[0]==document.activeElement))||(rdx.utils.is_defined(b.data.that._content_holder)&&b.data.that._content_holder[0]==document.activeElement))){b.stopPropagation();b.preventDefault();a._timer=setTimeout(function(){a._focus_editor();a._clear_timer()},1);return false}b.data.that._intellisense_bubble_box.remove();b.data.that._search_string=""}})};rdx.expression_editor.prototype._process_selection=function(){if(rdx.utils.is_defined(this._intellisense_box)){var a=null;if(this._no_match_container.is(":visible")){a=this._intellisense_text_box.get_data()}else{a=this._intellisense_selected_option.text()}if(a.indexOf("(")!=-1){var b=a.split("(");a=b[0]+"()"}if(rdx.utils.is_empty(this._expression_textarea.get_data())&&a=="EXTEND"){a="EXTEND(,)"}this._insert_text_at_cursor(a);this._intellisense_bubble_box.remove();this.saved_selection=null;this._search_string="";return false}};rdx.expression_editor.prototype._search_item_window=function(h){var f=this._intellisense_option_holder.children().length;var b=this._intellisense_option_holder.children();var a=[];var e=null;var d=false;for(var g=0;g<f;g++){a[g]=$(b[g]).text();a[g]=a[g].toUpperCase();h=h.toUpperCase();if(a[g].indexOf(h)==0){$(b[g]).show();$(b[g]).removeAttr("aria-hidden");if(!d){e=g;d=true}this._no_match_container.hide();this._no_match_container.attr("aria-hidden","true")}else{$(b[g]).hide();$(b[g]).attr("aria-hidden","true")}}if(!d){this._no_match_container.show();this._no_match_container.removeAttr("aria-hidden");if(rdx.utils.is_defined(this._help_option_bubble)){this._help_option_bubble.remove()}}else{$(b[e]).trigger(rdx.events.UPDATE_SELECTED_OPTION)}};rdx.expression_editor.prototype._show_window=function(){var m=this._get_cursor_coordinates(true);var d=this._get_text_preceding_selection(this._expression_textarea_component).length;var b=this._expression_textarea_component.text();var h=this._get_key_text(b,d);var n=[];while(h.length>0){for(var f=0;f<h.length;f++){var a=this._is_cursor_between_brackets(h,f);if(h[f]=="."&&!a.is_present){break}}n.push(h.substring(0,f));if(f>h.length){h=h.substring(h.length)}else{h=h.substring(f+1)}}for(var e=0;e<n.length;e++){n[e]=n[e].toUpperCase()}var g=this._update_order(n);if(rdx.utils.is_defined(g)&&rdx.utils.is_defined(g.data_items)){this._show_intellisense_box(g.data_items,m.x,m.y+12,g.help)}};rdx.expression_editor.prototype._update_order=function(v){var n="";this._selected_class_order_intellisense=[];var p=[];for(var e=0;e<v.length;e++){n="";var q=this._split_options_arguments(v[e]);var a=q.option;var o=q.argument;if(e!=0){var m=false;if(rdx.utils.is_not_empty(p[p.length-1])){var t=p[p.length-1].data_items;for(var d=0;d<t.length;d++){var b=this._split_options_arguments(t[d]);var s=b.option;if(a==s){m=true;break}if($.inArray(a,this._nsvariables.ulong)!=-1){m=true;n="ulong";break}else{if($.inArray(a,this._nsvariables.text)!=-1){m=true;n="text";break}else{if($.inArray(a,this._nsvariables.map)!=-1){m=true;n="map";break}else{if(a=="valueCount".toUpperCase()){m=true;n="ulong";break}}}}}}if(!m){return null}}if(e==0&&a.charAt(0)=="$"){if($.inArray(a,this._nsvariables.ulong)!=-1){n="ulong"}else{if($.inArray(a,this._nsvariables.text)!=-1){n="text"}else{if($.inArray(a,this._nsvariables.map)!=-1){n="map"}}}}if(rdx.utils.is_empty(n)){var u=neo.pi_syntax_utils.get_result_type(this._selected_class_order_intellisense,a,(o?o.toLowerCase():o));if(rdx.utils.is_not_defined(u)){u=this._get_result_type_of_extension_functions(a,(o?o.toLowerCase():o),"intellisense")}if(rdx.utils.is_not_empty(u)){var g=neo.pi_syntax_utils.get_data_items(u,this._operations_to_exclude);var h=this._get_extended_functions_list(u);var f={};f.data_items=g.data_items.concat(h.data_items);f.data_items.shift();f.help=g.help.concat(h.help);p.push(f)}else{p.push("")}}else{if(n=="ulong"){this._selected_class_order_intellisense.push("num_at");var g=neo.pi_syntax_utils.get_data_items("num_at");g.data_items.shift();p.push(g)}else{if(n=="text"){this._selected_class_order_intellisense.push("text_t");var g=neo.pi_syntax_utils.get_data_items("text_t");g.data_items.shift();p.push(g)}else{var g={data_items:["Select","valueExists()","valueCount()"]};g.data_items.shift();p.push(g)}}}}return p[p.length-1]};rdx.expression_editor.prototype._split_options_arguments=function(b){var a=b.split("(");var d=a[0];var e=null;if(a.length>1){e=a[1].split(")")[0]}return{option:d,argument:e}};rdx.expression_editor.prototype._get_key_text=function(b,g){var a=false;var d="";b=$("<div/>").html(b).text();var h=b.substring(0,g);var e=this._is_cursor_between_brackets(b,g);if(e.is_present){a=true;d=b.substring(e.index[0],e.index[1]+1);h=b.substring(0,e.index[0])}var f=this._get_breaker_index(h);var o=(f>0)?h.substring(f):h;o=o.trim();if(a){if(o.length<=0){var n=d.substring(1,d.length-1);var m=(f>0)?(g-f-1):(g-1);return this._get_key_text(n,m)}else{return""}}else{return o}};rdx.expression_editor.prototype._get_breaker_index=function(m){var h=-1;var b=[" ","&&","||","!","+","-","*","/","%","^","<<",">>","&","|","~","ALT","==","!=","<","<=",">",">="];if(m.length>0){for(var g=0;g<b.length;g++){var f=m.length;var a=m.length;do{var e=null;f=m.toUpperCase().lastIndexOf(b[g].toUpperCase(),f-1);a=(f<0)?-1:f+b[g].length;e=this._is_cursor_between_brackets(m,f)}while(a>h&&e.is_present);if(a>h){h=a}}var d=this._findopeningbracket(m,m.length-1);if((d+1)>h){h=d+1}}return h};rdx.expression_editor.prototype._is_cursor_between_brackets=function(d,e){var a=this._findopeningbracket(d,e-1);if(a<0){return{is_present:false,index:[null,null]}}var b=this._findclosingbracket(d,e);if(b<0){return{is_present:false,index:[null,null]}}else{return{is_present:true,index:[a,b]}}};rdx.expression_editor.prototype._findopeningbracket=function(d,e){var a=0;for(var b=e;b>=0;b--){if(d[b]==")"){a++}else{if(d[b]=="("){if(a>0){a--}else{return b}}}}return -1};rdx.expression_editor.prototype._findclosingbracket=function(d,e){var a=0;for(var b=e;b<d.length;b++){if(d[b]=="("){a++}else{if(d[b]==")"){if(a>0){a--}else{return b}}}}return -1};rdx.expression_editor.prototype._insert_text_at_cursor=function(f){var e,a,b;if(window.getSelection){e=window.getSelection();if(e.getRangeAt&&e.rangeCount){a=e.getRangeAt(0);var d=document.createTextNode(f);a.insertNode(d);a.collapse(false);a=a.cloneRange();a.selectNodeContents(d);a.collapse(false);e.removeAllRanges();e.addRange(a)}}else{if(document.selection&&document.selection.createRange){document.selection.createRange().text=f}}};rdx.expression_editor.prototype._get_cursor_coordinates=function(){var a=0,g=0,b;if(window.getSelection){var e=window.getSelection();if(e.rangeCount){b=e.getRangeAt(e.rangeCount-1);b.collapse(true);var f=$("<span>");b.insertNode(f[0]);var d=f[0].getBoundingClientRect();a=d.left+$(window).scrollLeft();g=d.top+$(window).scrollTop();f.remove()}}else{if(document.selection&&document.selection.type!="Control"){b=document.selection.createRange();b.collapse(start);a=b.boundingLeft;g=b.boundingTop}}return{x:a,y:g}};rdx.expression_editor.prototype._get_text_preceding_selection=function(b){var g="";if(window.getSelection&&document.createRange){var f=window.getSelection();if(f.rangeCount>0){var a=f.getRangeAt(0);var d=document.createRange();d.selectNodeContents(b[0]);d.setEnd(a.startContainer,a.startOffset);var h=d.cloneContents();var e=$("<span>").append(h);g=e.text();e.remove()}}return g};rdx.expression_editor.prototype._scrollbar_width=function(){var d=$("<div>").css({width:"100%",height:"200"}).html("Scrollbar Width");var e=$("<div>").css({width:"200",height:"150",position:"absolute",top:-999999,left:0,overflow:"hidden"}).append(d);var b=d[0];var a=e[0];$(document.body).append(e);var g=b.offsetWidth;e.css("overflow","scroll");var f=a.clientWidth;e.remove();return(g-f)};rdx.expression_editor.prototype._save_selection=function(d){var a=d[0];if(window.getSelection&&document.createRange){var e=window.getSelection().getRangeAt(0);var b=e.cloneRange();b.selectNodeContents(a);b.setEnd(e.startContainer,e.startOffset);var f=b.toString().length;return{start:f,end:f+e.toString().length}}};rdx.expression_editor.prototype._restore_selection=function(b,e){var q=b[0];var a=0,n=document.createRange();n.setStart(q,0);n.collapse(true);var m=[q],f,g=false,p=false;while(!p&&(f=m.pop())){if(f.nodeType==3){var o=a+f.length;if(!g&&e.start>=a&&e.start<=o){n.setStart(f,e.start-a);g=true}if(g&&e.end>=a&&e.end<=o){n.setEnd(f,e.end-a);p=true}a=o}else{var h=f.childNodes.length;while(h--){m.push(f.childNodes[h])}}}var d=window.getSelection();d.removeAllRanges();d.addRange(n)};rdx.expression_editor.prototype._append_expression=function(d){var a=this._expression_textarea.get_component();if(rdx.utils.is_firefox()){var b=a.contents();for(j=b.length-1;j>0;j--){if($(b[j-1]).is("br")&&$(b[j]).is("br")){$(b[j]).remove()}else{break}}a.append(d);this._component.trigger(rdx.events.FOCUS_OUT);return}else{if(a.children().length>0){a.children().last().text(a.children().last().text()+d)}else{a.append(d)}this._component.trigger(rdx.events.FOCUS_OUT);return}};rdx.classic_expression_editor=function(b,a){this._parent=b;this._field=a;this._DEFAULT_PROPERTIES={class_names:"expression_editor",prefix_combo_map:[],switch_link_required:false,show_epa_editor:false,epa_prefix_combo_map:[],is_pre_auth_policy:false,get_epa_pi_data:false,hide_expression_editor:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a.get_properties());this.prefix_combo_map=rdx.utils.is_defined(a._properties.prefix_combo_map)?a._properties.prefix_combo_map:[];this._expression_textarea_parent=$("<div>").addClass("expression_textbox");this._label_span=$("<span>").addClass("rdx_left");this._component=null;this._new_expression=true;this._advanced_expression_mode=false;this._advanced_expression_editor_component=null;this._component_name_map={Service:"CLIENT.SVC","Operating System":"CLIENT.OS",Registry:"CLIENT.REG","Personal Firewall":"CLIENT.APPLICATION.PF","Anti-Virus":"CLIENT.APPLICATION.AV",File:"CLIENT.FILE",Process:"CLIENT.APPLICATION.PROCESS","Anti-Spam":"CLIENT.APPLICATION.AS","Internet Security":"CLIENT.APPLICATION.IS",Mountpoint:"CLIENT.MOUNTPOINT"};this._qualifier_map={"Time Stamp":".TIMESTAMP",Hotfix:".HOTFIX",Value:".VALUE",MD5:".MD5",Version:".VERSION","Service Pack":".SP",Path:".PATH",Search:".SEARCH"};this._operating_system_map={"Windows XP":"winxp","Windows vista":"vista","Windows 7":"win7","Windows 8":"win8","Windows 8.1":"win8.1","Windows 10":"win10","Windows Server 2003":"win2003","Windows Server 2008":"win2008","Windows Server 2012":"win2012",MacOS:"MacOS"};this._file_system_qualifiers=["FS.COMMAND","FS.USER","FS.SERVER","FS.SERVERIP","FS.SERVICE","FS.DOMAIN","FS.PATH","FS.FILE","FS.DIR","FS.FILE.ACCESSTIME","FS.FILE.CREATETIME","FS.FILE.CREATETIME","FS.FILE.MODIFYTIME","FS.FILE.WRITETIME","FS.DIR.ACCESSTIME","FS.DIR.CREATETIME","FS.DIR.MODIFYTIME","FS.DIR.WRITETIME"];this._date_time_qualifiers=["TIME","DATE","DAYOFWEEK"]};rdx.classic_expression_editor.prototype._add_help_tip=function(){var e=rdx.utils.get_cookie("classic_expression_hide_search_tip");if(rdx.utils.is_defined(e)&&e=="true"){return}var g=rdx.i18n.get_string("rdx.classic_expression_editor_help_tip");this._expression_tooltip=new rdx.tooltip(this._expression_builder_link_div,{remove_tooltip_mouse_leave:false});var h=$("<div>").addClass("search_tip_container");var b=$("<div>").addClass("search_tip_content");var f=$("<span>").addClass("expression_help_text").append(g);var d=$("<button>").addClass("search_grey_button search_help_button").text(rdx.i18n.get_string("rdx.form_modify_button_label"));d.bind(rdx.events.CLICK,{tooltip:this._expression_tooltip},function(m){rdx.utils.set_cookie("classic_expression_hide_search_tip","true");m.data.tooltip.remove_tooltip()});$(document.body).bind(rdx.events.CLICK,{tooltip:this._expression_tooltip},function(o){var n=$(o.target);var m=$(n.parent());if(n.hasClass("search_tip_container")||n.hasClass("search_tip_content")||n.hasClass("expression_help_text")||n.hasClass("search_grey_button")||m.hasClass("search_tip_container")||m.hasClass("search_tip_content")||m.hasClass("expression_help_text")||m.hasClass("search_grey_button")){return}o.data.tooltip.remove_tooltip()});b.append(f);h.append(b,d);var a=this._expression_tooltip.render({append_element:h})};rdx.classic_expression_editor.prototype.render=function(){var d=$("<div>").addClass("expression_builder_exp dangling_component");var a=$("<div>").addClass("expression_evaluate dangling_component");this.create_expression_textarea(this._expression_textarea_parent);if(this._properties.get_epa_pi_data){this._pe_expression_builder_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link pe_expression_editor").append(rdx.i18n.get_string("rdx.unified_epa_editor"))}else{this._pe_expression_builder_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link pe_expression_editor").append(rdx.i18n.get_string("rdx.epa_editor"))}this._pe_expression_builder_link_div.bind("mousedown keydown",{expression:this,expression_textarea:this.expression_textarea},function(h){if(h.data.expression._pe_expression_builder_link_div.hasClass("form_field_disabled")){return}if(h.which!=1&&h.which!=13){return}var m=function(n,o){if($.trim(n.get_data())!=""){if($.trim(o._expression_textarea.get_data())==""){o._expression_textarea.set_data(n.get_data())}else{if(o._check_operator_index_is_last()){o._expression_textarea.set_data(o._expression_textarea.get_data()+n.get_data())}else{o._expression_textarea.set_data(o._expression_textarea.get_data()+" && "+n.get_data())}}n.set_data("")}};var g=rdx.component_helper.get_component(rdx.form_constants.EXPRESSION_EDITOR,null,new rdx.form_field({prefix_combo_map:h.data.expression._properties.epa_prefix_combo_map,hidden:true,properties:{is_epa:true,is_evaluate_required:false,is_variable_support_required:false,close_builder_dialog_callback:new rdx.callback(m,[h.data.expression]),get_epa_pi_data:h.data.expression._properties.get_epa_pi_data}}));g.render();var f=g.get_builder_link();f.trigger(rdx.events.CLICK)});this._expression_builder_link_div=$("<a>").attr("tabindex","0").addClass("rdx_right pointer_cursor expression_eval_builder_link");d.append(this._label_span);d.append(this._expression_builder_link_div);if(this._properties.show_epa_editor===true){d.append(this._pe_expression_builder_link_div);this._expression_builder_link_div.append(rdx.i18n.get_string("rdx.expression_builder.title"));if(this._properties.hide_expression_editor===true){this._expression_builder_link_div.css("display","none")}}else{this._expression_builder_link_div.append(rdx.i18n.get_string("rdx.expression_builder.title"))}this._expression_builder_link_div.bind("mousedown keydown",{expression:this,expression_textarea:this._expression_textarea_parent},function(n){if(n.data.expression._expression_builder_link_div.hasClass("form_field_disabled")){return}if(n.which!=1&&n.which!=13){return}var g=n.data.expression._expression_textarea_component[0];var o=n.data.expression._expression_textarea;var p="";var f={start_position:"",end_position:""};if(document.activeElement==g){var h=o.get_selected_text();p=h.selected_text;f.start_position=h.start_position;f.end_position=h.end_position}if($.trim(p)==""){n.data.expression._new_expression=true}else{n.data.expression._new_expression=false}var m=$("<div>");n.data.expression.create_expression_builder(m,n.data.expression_textarea,p,f);if(m.hasClass("wrong_expression")){n.data.expression._clear_selection();g.selectionStart=null;g.selectionEnd=null}else{if(!rdx.page.is_slider_visible()){slider_container=rdx.page.show_slider({});slider_container.show()}n.data.expression._expression_builder_link_div_container=rdx.page.get_slider_crumb().crumb.add_container("Add Expression",m);m.parent().addClass("expression_builder_parent classic_expression_parent")}});var e=$("<div>").addClass("expression_editor");e.append(d).append(this._expression_textarea_parent);if(this._properties.switch_link_required){this._switch_to_class_link_div=$("<a>").attr("tabindex","0").addClass("rdx_left pointer_cursor expression_eval_builder_link").text(rdx.i18n.get_string("Switch to Default Syntax"));e.append(this._switch_to_class_link_div);this._switch_to_class_link_div.bind(rdx.events.CLICK,{expression:this},function(f){if(f.data.expression._switch_to_class_link_div.hasClass("form_field_disabled")){return}if(rdx.utils.is_defined(f.data.expression._properties.advance_expression_editor)){f.data.expression._properties.advance_expression_editor.show();f.data.expression._properties.set_classic_expression_mode.call_back([false])}else{f.data.expression._advanced_expression_editor_component.get_component().show();f.data.expression._advanced_expression_mode=true;f.data.expression._advanced_expression_editor_component.get_component().addClass("component_alignment")}if(rdx.utils.is_defined(f.data.expression._expression_tooltip)){f.data.expression._expression_tooltip.remove_tooltip()}f.data.expression.get_component().css("cssText","display: none !important");if(rdx.utils.is_defined(f.data.expression._properties.advance_expression_editor)){f.data.expression._properties.advance_expression_editor.change();f.data.expression._properties.advance_expression_editor.trigger(rdx.events.CHANGE)}else{f.data.expression._component.change();f.data.expression._component.trigger(rdx.events.CHANGE)}})}e.height(this._properties.height);if(rdx.utils.is_defined(this._parent)){this._parent.append(e)}else{this._parent=e}this._component=e;if(this._properties.switch_link_required&&this._parent.children().length<=2){this._advanced_expression_editor_component=new rdx.expression_editor(this._parent,new rdx.form_field({prefix_combo_map:["HTTP","SYS","CLIENT","SERVER","URL","MYSQL","MSSQL","TEXT","TARGET","EXTEND","ANALYTICS","SIP","DNS","ORACLE","CONNECTION","DIAMETER"],properties:{switch_link_required:true,classic_expression_editor:this._component,set_advanced_expression_mode:new rdx.callback(this,this.set_advanced_expression_mode)}})).render();this._advanced_expression_editor_component.toggle_show_hide(false)}if(this._field.is_read_only()){this.set_read_only()}var b=this;setTimeout(function(){if(!b._component.attr("style")==="display: none;"){b._add_help_tip()}},1000);return this};rdx.classic_expression_editor.prototype.refresh_help_tip=function(){if(rdx.utils.is_defined(this._expression_tooltip)){this._expression_tooltip.remove_tooltip()}var a=this;setTimeout(function(){a._add_help_tip()},1000)};rdx.classic_expression_editor.prototype.get_data=function(){if(this._advanced_expression_mode===true){return this._advanced_expression_editor_component.get_data()}else{return this._expression_textarea.get_data()}};rdx.classic_expression_editor.prototype.set_data=function(a){this._expression_textarea.set_data(a);if(rdx.utils.is_defined(this._advanced_expression_editor_component)){this._advanced_expression_editor_component.set_data(a)}};rdx.classic_expression_editor.prototype.get_component_type=function(){return rdx.form_constants.CLASSIC_EXPRESSION_EDITOR};rdx.classic_expression_editor.prototype.get_field=function(){return this._field};rdx.classic_expression_editor.prototype.get_textarea=function(){return this._expression_textarea_parent};rdx.classic_expression_editor.prototype.get_component=function(){return this._component};rdx.classic_expression_editor.prototype.add_event_handler=function(a,b){this._component.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.classic_expression_editor.prototype.create_expression_textarea=function(e){var f=$("<div>").addClass("title dangling_component");var a=$("<span>").addClass("rdx_left");var d=$("<span>").addClass("rdx_left saved_policy_exp");var g=$("<span>").addClass("rdx_left frequently_used_exp");f.append(a).append(d).append(g);this._cleartext_link=$("<button>").addClass("rdx_right").addClass("cleartext").attr({title:rdx.i18n.get_string("rdx.clear"),"aria-label":rdx.i18n.get_string("rdx.clear")});this._cleartext_link.bind(rdx.events.CLICK,{expression:this},function(h){if(h.data.expression._cleartext_link.hasClass("form_field_disabled")){return}h.data.expression._expression_textarea.set_data("");h.data.expression._multi_exp_mode=false;h.data.expression._start_new_exp=true});f.append(this._cleartext_link);this._operators=new rdx.expression_editor.custom_dropdown(a,new rdx.form_field({formatter:{map:[rdx.i18n.get_string("rdx.select"),"&&","||"]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.expression_editor.operators.label")}})).render();this._operators.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._add_operator_to_create_multi_expressions,[this._operators]));this._import_expressions=new rdx.expression_editor.custom_dropdown(d,new rdx.form_field({properties:{size:1,label:rdx.i18n.get_string("rdx.expression_editor.saved_policy_expression.label")},mandatory:true})).render();this._import_expressions.get_component().addClass("saved_policy_exp");this._import_expressions.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this.add_imported_expression_to_current_expression,[]));var b=new rdx.model_executor_service(new rdx.callback(this,this.get_all_saved_expressions));b.add("get",rdx.utils.get_resource("policyexpression"),null,null,null);b.execute();this._frequently_used_expressions=new rdx.expression_editor.custom_dropdown(g,new rdx.form_field({formatter:{map:["Select","REQ.HTTP.URL","REQ.HTTP.HEADER","REQ.TCP.DESTPORT","REQ.IP.DESTIP","REQ.IP.SOURCEIP","REQ.SSL.CLIENT.CERT.SUBJECT"]},mandatory:true,properties:{size:1,label:rdx.i18n.get_string("rdx.expression_editor.frequently_used_expressions.label")}})).render();this._frequently_used_expressions.get_component().addClass("frequently_used_exp");g.bind(rdx.events.CHANGE,{frequently_used_expressions:this._frequently_used_expressions,expression:this},function(h){var m=h.data.frequently_used_expressions.get_data();h.data.expression.insert_at_caret("textarea",m)});if(rdx.BROWSER=="ie"&&rdx.BROWSER_VERSION=="8.0"){this._import_expressions.get_component().removeClass("saved_policy_exp");this._frequently_used_expressions.get_component().removeClass("frequently_used_exp")}e.append(f);this._expression_textarea=new rdx.text_area(e,new rdx.form_field({})).render();this._expression_textarea_component=this._expression_textarea.get_component().addClass("expression_textarea classic_expression_textarea");this._expression_textarea_component.attr("resizable","false").attr("spellcheck",false).attr("aria-label","Editor")};rdx.classic_expression_editor.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._component}if(a){b.show()}else{b.hide()}};rdx.classic_expression_editor.prototype.toggle_read_only=function(a){if(a){this.set_edittable()}else{this.set_read_only()}};rdx.classic_expression_editor.prototype.set_read_only=function(){this._component.addClass("form_field_disabled");this._cleartext_link.addClass("form_field_disabled");this._expression_builder_link_div.addClass("form_field_disabled");this._pe_expression_builder_link_div.addClass("form_field_disabled");if(rdx.utils.is_defined(this._switch_to_class_link_div)){this._switch_to_class_link_div.addClass("form_field_disabled")}this._operators.get_list().toggle_read_only(false);this._import_expressions.get_list().toggle_read_only(false);this._frequently_used_expressions.get_list().toggle_read_only(false);this._expression_textarea.toggle_read_only(false)};rdx.classic_expression_editor.prototype.set_edittable=function(){this._component.removeClass("form_field_disabled");this._cleartext_link.removeClass("form_field_disabled");this._expression_builder_link_div.removeClass("form_field_disabled");this._pe_expression_builder_link_div.removeClass("form_field_disabled");if(rdx.utils.is_defined(this._switch_to_class_link_div)){this._switch_to_class_link_div.removeClass("form_field_disabled")}this._operators.get_list().toggle_read_only(true);this._import_expressions.get_list().toggle_read_only(true);this._frequently_used_expressions.get_list().toggle_read_only(true);this._expression_textarea.toggle_read_only(true)};rdx.classic_expression_editor.prototype.get_label_container=function(){return this._label_span};rdx.classic_expression_editor.prototype.set_advanced_expression_mode=function(a){if(rdx.utils.is_not_defined(a)){return}else{this._advanced_expression_mode=a}};rdx.classic_expression_editor.prototype.get_advanced_expression_mode=function(){return this._advanced_expression_mode};rdx.classic_expression_editor.prototype.get_dependency_determinant_value=function(a){if(a==rdx.form_constants.dependency_determinant.TYPE){if(this._component.is(":visible")){if(this._advanced_expression_mode==true||this._advanced_expression_mode=="true"){return"Advanced"}else{return"Classic"}}else{if(this._properties.switch_link_required==true&&rdx.utils.is_defined(this._properties.advance_expression_editor)){var b=this._properties.advance_expression_editor.get_advanced_expression_mode();if(b==true||b=="true"){return"Classic"}else{return"Advanced"}}else{if(this._properties.switch_link_required==false){return"Classic"}else{return"Advanced"}}}}return null};rdx.classic_expression_editor.prototype._add_operator_to_create_multi_expressions=function(b,a){if(a.get_data()=="Select"){return}this.insert_at_caret("textarea",a.get_data());a.get_list().set_data("Select")};rdx.classic_expression_editor.prototype.add_imported_expression_to_current_expression=function(b){if(this._import_expressions.get_data()=="Select"){return}for(var a=0;a<this.expression_editor_saved_expression.name.length;a++){if(this._import_expressions.get_data()==this.expression_editor_saved_expression.name[a]){this.insert_at_caret("textarea",this.expression_editor_saved_expression.name[a]);break}}this._import_expressions.get_list().set_data("Select")};rdx.classic_expression_editor.prototype.insert_at_caret=function(g,m){var h=this._expression_textarea_component[0];var a=h.scrollTop;var d=0;var n=((h.selectionStart||h.selectionStart=="0")?"ff":(document.selection?"ie":false));if(n=="ie"){h.focus();var f=document.selection.createRange();f.moveStart("character",-h.value.length);d=f.text.length}else{if(n=="ff"){d=h.selectionStart}}var b=(h.value).substring(0,d);var e=(h.value).substring(d,h.value.length);if(d==0&&h.value.length>0){b=h.value;e="";d=h.value.length}h.value=b+m+e;d=d+m.length;if(n=="ie"){h.focus();var f=document.selection.createRange();f.moveStart("character",-h.value.length);f.moveStart("character",d);f.moveEnd("character",0);f.select()}else{if(n=="ff"){h.selectionStart=d;h.selectionEnd=d;h.focus()}}h.scrollTop=a};rdx.classic_expression_editor.prototype.get_all_saved_expressions=function(d){var b=d.get_collated_response();this.expression_editor_saved_expression={name:[],value:[]};this.expression_editor_saved_expression.name[0]=rdx.i18n.get_string("rdx.select");this.expression_editor_saved_expression.value[0]="";if(rdx.utils.is_defined(b[0]["policyexpression"])){for(var a=0;a<b[0]["policyexpression"].length;a++){if(b[0]["policyexpression"][a]["type1"]=="CLASSIC"){this.expression_editor_saved_expression.name.push(b[0]["policyexpression"][a]["name"]);this.expression_editor_saved_expression.value.push(b[0]["policyexpression"][a]["value"])}}}this._import_expressions.remove_items(false,false);this._import_expressions.add_data_items(this.expression_editor_saved_expression.name)};rdx.classic_expression_editor.prototype.create_expression_builder=function(p,q,t,n){var g=$("<div>");var d=$("<div>").append($("<div>").append("Select Expression Type:").addClass("expression_editor_flow_type")).append(g);var v=$("<div>").addClass("expression_textbox");this._expressiontype_dropdown=new rdx.expression_editor.custom_dropdown(g,new rdx.form_field({formatter:{map:this.prefix_combo_map},mandatory:true,properties:{size:1,label:this.prefix_combo_map[0]}})).render();var w=null;var m=false;if(rdx.utils.is_empty(t)){this._expressiontype_dropdown.get_list().set_data(this.prefix_combo_map[0]);this._expressiontype_dropdown.set_data(this.prefix_combo_map[0])}else{w=this._check_type_of_expression(t);if(w=="Named Expression"){p.addClass("wrong_expression");rdx.message_box.error("Named Expressions cannot be modified",null,rdx.i18n.get_string("neo.error_message_title"),null);return}if(t.indexOf("&&")!=-1||t.indexOf("||")!=-1){this._throw_error(p);return}var a=$.trim(t);if(a[a.length-1]==")"){this._throw_error(p);return}var f=this._expression_textarea.get_data();if(n.end_position<f.length){var b=$.trim(f.substring(n.end_position,f.length));if(b.indexOf(")")==0){var h=0;for(var u=0;u<b.length;u++){if(b[u]==")"){h++}else{break}}var o=$.trim(b.substring(h,b.length));if(rdx.utils.is_empty(o)||o.indexOf("&&")==0||o.indexOf("||")==0){var s=true}else{this._throw_error(p);return}}else{if(rdx.utils.is_empty(b)||b.indexOf("&&")==0||b.indexOf("||")==0){var s=true}else{this._throw_error(p);return}}}this._expressiontype_dropdown.get_list().set_data(w);m=true;this._expressiontype_dropdown.set_data(w)}g.addClass("rdx_left");var e=$("<div>").addClass("expression_builder_box_div dangling_component");this.create_form_for_selected_expressiontype(rdx.events.CHANGE,this._expressiontype_dropdown,e,p,t);this._expressiontype_dropdown.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this.create_form_for_selected_expressiontype,[this._expressiontype_dropdown,e,t]));var z=$("<div>").addClass("form_buttons");this._done_button=new rdx.button_bar(z,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.done_button.label"),blue_button_click_handler_callback:new rdx.callback(this,this._create_simple_expression,[p,m,n]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.cancel_button.label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_cancel_button_click,[p])}})).render();p.append($("<div>").addClass("expression_builder_div expression_builder_dialog").append(v.append($("<div>").addClass("title").addClass("dangling_component").append(d))).append(e).append(z))};rdx.classic_expression_editor.prototype.close_expression_buider_dialog=function(a){a.remove();if(rdx.page.get_slider_crumb().get_current_crumb().index<=0){rdx.page.hide_slider()}else{rdx.page.get_slider_crumb().remove_current_crumb()}$(this._expression_builder_link_div_container).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});this._expression_builder_link_div_container.remove();this._clear_selection()};rdx.classic_expression_editor.prototype._handle_cancel_button_click=function(b,a){this.close_expression_buider_dialog(a);this._clear_selection()};rdx.classic_expression_editor.prototype._clear_selection=function(){var b=this._expression_textarea_component;var a=b.val().length;b.focus();if(rdx.utils.is_defined(b[0].setSelectionRange)){b[0].setSelectionRange(a,a)}else{var d=window.getSelection?window.getSelection():document.selection;if(d){if(d.removeAllRanges){d.removeAllRanges()}else{if(d.empty){d.empty()}}}this._expression_textarea_component[0].selectionStart=null;this._expression_textarea_component[0].selectionEnd=null}};rdx.classic_expression_editor.prototype.create_form_for_selected_expressiontype=function(f,a,d,e,g){a.set_data();var b=a.get_data();d.children().remove();switch(b){case"General":this._create_form_for_general_expression(d,e,g);break;case"Client Security":this._create_form_for_client_security_expression(d,e,g);break;case"Network Based":this._create_form_for_network_based_expression(d,e,g);break;case"Date/Time":this._create_form_for_date_time_expression(d,e,g);break;case"File System":this._create_form_for_file_system_expression(d,e,g);break;default:}};rdx.classic_expression_editor.prototype._remove_empty_elements=function(d){var b=0;var e=[];for(var a=0;a<d.length;a++){if(rdx.utils.is_not_empty(d[a])){e[b]=d[a];b++}}return e};rdx.classic_expression_editor.prototype._create_form_for_general_expression=function(d,n,v){var D=this._create_form_for_expression(neo_classic_syntax.General,n);d.append($("<div>").addClass("expression_builder_box_div").append(D));var f=function(K,J,G,P,L,O,H){var I=J.get_data();if(rdx.utils.is_not_defined(I)){I=""}if(I=="EXISTS"||I=="NOTEXISTS"||I=="CONTENTS"){G.get_parent().parent().hide();G.get_parent().parent().prev().hide();G.set_data("")}else{G.get_parent().parent().prev().show();G.get_parent().parent().show();if(K=="SOURCEPORT"||K=="DESTPORT"){if(I=="=="||I=="!="){G.get_parent().parent().prev().text("Port*")}else{G.get_parent().parent().prev().text("Port Range*")}}else{if(K=="URLLEN"||K=="URLQUERYLEN"){G.get_parent().parent().prev().text("Num Value*")}else{if(K=="SOURCEIP"||K=="DESTIP"){G.get_parent().parent().prev().text("IP Value*")}else{G.get_parent().parent().prev().text("Value*")}}}}var N=true;var M;M=N&&(K=="HEADER");if(M===true){P.get_parent().parent().show();P.get_parent().parent().prev().show();P.set_data("")}else{P.get_parent().parent().hide();P.get_parent().parent().prev().hide()}M=N&&((I=="CONTAINS")||(I=="NOTCONTAINS")||(I=="CONTENTS")&&!(K=="FS.SERVER"||K=="FS.SERVICE"||K=="FS.DOMAIN"||K=="FS.PATH"||K=="FS.FILE"||K=="FS.DIR"||K=="FS.USER"));if(M===true){L.get_parent().parent().show();L.get_parent().parent().prev().show();L.set_data("")}else{L.get_parent().parent().hide();L.get_parent().parent().prev().hide()}M=N&&((I=="CONTAINS")||(I=="NOTCONTAINS")||(I=="CONTENTS")&&!(K=="FS.SERVER"||K=="FS.SERVICE"||K=="FS.DOMAIN"||K=="FS.PATH"||K=="FS.FILE"||K=="FS.DIR"||K=="FS.USER"));if(M===true){O.get_parent().parent().show();O.get_parent().parent().prev().show();O.set_data("")}else{O.get_parent().parent().hide();O.get_parent().parent().prev().hide()}M=N&&(K=="SOURCEIP"||K=="DESTIP"||K=="FS.SERVERIP");if(M===true){H.get_parent().parent().show();H.get_parent().parent().prev().show();H.set_data("")}else{H.get_parent().parent().hide();H.get_parent().parent().prev().hide()}if(I=="BETWEEN"){G.get_parent().parent().prev().text("Value Range*")}};this._classic_expr_flowtype.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(J,G,H){var I=G.get_data();H.remove_items(false,false);if(I==""){H.add_item("");H.set_data("")}else{if(I=="RES"){H.add_data_items(["HTTP","TCP","IP"])}else{H.add_data_items(["HTTP","SSL","TCP","IP"])}H.set_data("HTTP")}},[this._classic_expr_flowtype,this._classic_expr_protocol]));this._classic_expr_protocol.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(K,G,H,I){var L=H.get_data();var J=G.get_data();I.remove_items(false,false);if(rdx.utils.is_not_defined(L)){L=""}if(L=="HTTP"){if(J=="RES"){I.add_data_items(["VERSION","HEADER","STATUSCODE"])}else{I.add_data_items(["METHOD","URL","URLTOKENS","VERSION","HEADER","URLLEN","URLQUERY","URLQUERYLEN"])}I.set_data("HTTP")}else{if(L=="IP"){I.add_data_items(["SOURCEIP","DESTIP"])}else{if(L=="TCP"){I.add_data_items(["SOURCEPORT","DESTPORT","MSS"])}else{if(L=="SSL"){I.add_data_items(["CLIENT.CERT","CLIENT.CERT.SUBJECT","CLIENT.CERT.ISSUER","CLIENT.CERT.SIGALGO","CLIENT.CERT.VERSION","CLIENT.CERT.VALIDFROM","CLIENT.CERT.VALIDTO","CLIENT.CERT.SERIALNUMBER","CLIENT.CIPHER.TYPE","CLIENT.CIPHER.BITS","CLIENT.SSL.VERSION"])}else{I.add_data_items(["METHOD","URL","URLTOKENS","VERSION","HEADER","URLLEN","URLQUERY","URLQUERYLEN","SOURCEIP","DESTIP","SOURCEPORT","DESTPORT","MSS","CLIENT.CERT","CLIENT.CERT.SUBJECT","CLIENT.CERT.ISSUER","CLIENT.CERT.SIGALGO","CLIENT.CERT.VERSION","CLIENT.CERT.VALIDFROM","CLIENT.CERT.VALIDTO","CLIENT.CERT.SERIALNUMBER","CLIENT.CIPHER.TYPE","CLIENT.CIPHER.BITS","CLIENT.SSL.VERSION","CLIENT.APPLICATION","CLIENT.APPLICATION.SIGNATURE"])}}}}},[this._classic_expr_flowtype,this._classic_expr_protocol,this._classic_expr_qualifier]));this._classic_expr_qualifier.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(H,J,K,L,G,P,N,O,I){var M=K.get_data();L.remove_items(false,false);if(rdx.utils.is_not_defined(M)){M=""}if(M=="METHOD"){L.add_data_items(["==","!="])}else{if(M=="STATUSCODE"){L.add_data_items(["==","!=",">",">=","<","<="])}else{if(M=="URL"){L.add_data_items(["==","!=","CONTAINS","NOTCONTAINS","CONTENTS"])}else{if(M=="URLTOKENS"){L.add_data_items(["==","!="])}else{if(M=="VERSION"){L.add_data_items(["==","!="])}else{if(M=="HEADER"){L.add_data_items(["==","!=","CONTAINS","NOTCONTAINS","CONTENTS","EXISTS","NOTEXISTS"])}else{if(M=="URLQUERY"){L.add_data_items(["CONTAINS","NOTCONTAINS","CONTENTS","EXISTS","NOTEXISTS"])}else{if(M=="URLLEN"){L.add_data_items([">"])}else{if(M=="URLQUERYLEN"){L.add_data_items([">"])}else{if(M=="SOURCEIP"||M=="DESTIP"){L.add_data_items(["==","!="])}else{if(M=="SOURCEPORT"||M=="DESTPORT"){L.add_data_items(["==","!=","BETWEEN"])}else{if(M=="CLIENT.CERT.SIGALGO"||M=="CLIENT.CERT.SERIALNUMBER"||M=="CLIENT.SSL.VERSION"||M=="CLIENT.CIPHER.TYPE"){L.add_data_items(["==","!="])}else{if(M=="MSS"){L.add_data_items(["==","!=","<=","<",">=",">","BETWEEN"])}else{if(M=="CLIENT.CERT"){L.add_data_items(["EXISTS","NOTEXISTS"])}else{if(M=="CLIENT.CERT.SUBJECT"||M=="CLIENT.CERT.ISSUER"){L.add_data_items(["CONTAINS","NOTCONTAINS"])}else{if(M=="CLIENT.CERT.VERSION"||M=="CLIENT.CIPHER.BITS"){L.add_data_items(["==","!=",">=",">","<=","<"])}else{if(M=="CLIENT.CERT.VALIDFROM"||M=="CLIENT.CERT.VALIDTO"){L.add_data_items(["==","!=",">=",">","<=","<"])}else{if(M=="CLIENT.CERT.SERIALNUMBER"){L.add_data_items(["==","!=",">=",">","<=","<"])}else{if(M=="CLIENT.APPLICATION"||M=="CLIENT.APPLICATION.SIGNATURE"){L.add_data_items(["==","!="]);if(M=="CLIENT.APPLICATION.SIGNATURE"){}}}}}}}}}}}}}}}}}}}}J(M,L,G,P,N,O,I)},[f,this._classic_expr_qualifier,this._classic_expr_operator,this._classic_expr_value,this._classic_expr_header,this._classic_expr_length,this._classic_expr_offset,this._classic_expr_netmask]));this._classic_expr_operator.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(H,K,M,L,G,Q,O,P,I){var J=M.get_data();var N=L.get_data();if(N=="SOURCEPORT"||N=="DESTPORT"){if(J=="=="||J=="!="){G.get_parent().parent().prev().text("Port*")}else{G.get_parent().parent().prev().text("Port Range*")}}K(N,M,G,Q,O,P,I)},[f,this._classic_expr_operator,this._classic_expr_qualifier,this._classic_expr_value,this._classic_expr_header,this._classic_expr_length,this._classic_expr_offset,this._classic_expr_netmask]));this._classic_expr_flowtype.set_data("REQ");this._classic_expr_protocol.set_data("HTTP");this._classic_expr_qualifier.set_data("METHOD");this._classic_expr_operator.set_data("==");if(rdx.utils.is_empty(v)){return}try{if(!($.trim(v).toUpperCase().indexOf("RES")==0||$.trim(v).toUpperCase().indexOf("REQ")==0)){this._throw_error(n);return}else{var t=$.trim(v).toUpperCase().indexOf("RES")==0?"RES":"REQ";this._classic_expr_flowtype.set_data(t.toUpperCase());var p=v.split(".")[1];this._classic_expr_protocol.set_data(p.toUpperCase());var o=v.split(".");if(o.length>3){var F="";for(var A=2;A<o.length;A++){if(A==2){F=F+o[A]}else{F=F+"."+o[A]}}o[2]=F}var E=o[2].split(" ");var h=this._remove_empty_elements(E);var w=h[0];this._classic_expr_qualifier.set_data(w.toUpperCase());var m=w.toUpperCase()=="HEADER"?h[2].toUpperCase():h[1].toUpperCase();this._classic_expr_operator.set_data(m);var q=w.toUpperCase()=="HEADER"?h[3]:h[2];var a=["EXISTS","NOTEXISTS","CONTENTS"];if(($.inArray(m,a)==-1)){q.toUpperCase();this._classic_expr_value.set_data(q)}if(w.toUpperCase()=="HEADER"){var z=h[1];this._classic_expr_header.set_data(z)}if(v.indexOf("-length")!=-1){var u=v.substring(v.indexOf("-length ")+8);var e=u.indexOf(" ")!=-1?u.substring(0,u.indexOf(" ")):u;this._classic_expr_length.set_data(e)}if(v.indexOf("-offset")!=-1){var B=v.substring(v.indexOf("-offset ")+8);var g=B.indexOf(" ")!=-1?B.substring(0,B.indexOf(" ")):B;this._classic_expr_offset.set_data(g)}if(v.indexOf("-netmask")!=-1){var C=v.substring(v.indexOf("-netmask ")+9);var b=C.indexOf(" ")!=-1?C.substring(0,C.indexOf(" ")):C;this._classic_expr_netmask.set_data(b)}}}catch(s){this._throw_error(n)}};rdx.classic_expression_editor.prototype._create_form_for_client_security_expression=function(b,f,u){var z=this._create_form_for_expression(neo_classic_syntax["Client Security"],f);b.append($("<div>").addClass("expression_builder_box_div").append(z));this._classic_expr_component.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(K,G,I,H,J){var F=G.get_data();I.remove_items(false,false);H.set_data("");if(rdx.utils.is_not_defined(F)){F=""}if(F=="Process"){I.add_data_items(["","MD5","Path"])}else{if(F=="File"){I.add_data_items(["","Time Stamp","MD5","Search"])}else{if(F=="Registry"){I.add_data_items(["","Value"])}else{if(F=="Operating System"){I.add_data_items(["","Service Pack","Hotfix","Version"])}else{if(F=="Service"){I.add_data_items(["","Version"])}else{I.add_data_items(["Version"])}}}}}if(F=="Operating System"){J.get_parent().parent().show();J.get_parent().parent().prev().show();H.get_parent().parent().hide();H.get_parent().parent().prev().hide()}else{J.get_parent().parent().hide();J.get_parent().parent().prev().hide();H.get_parent().parent().show();H.get_parent().parent().prev().show()}if(F=="Mountpoint"){I.add_data_items([""]);I.get_parent().parent().hide();I.get_parent().parent().prev().hide()}else{I.get_parent().parent().show();I.get_parent().parent().prev().show()}},[this._classic_expr_component,this._classic_expr_qualifier,this._classic_expr_name,this._classic_expr_os_name]));this._classic_expr_qualifier.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(L,G,I,K,H,M){var F=G.get_data();var J=I.get_data();if(rdx.utils.is_not_defined(F)){F=""}if(rdx.utils.is_not_defined(J)){J=""}K.remove_items(false,false);if(J=="Version"||J=="Service Pack"||J=="Hotfix"||J=="Time Stamp"||J=="Value"||J=="MD5"||J=="Path"||J=="Search"){K.add_data_items(["==","!="])}else{if(J==""){K.add_data_items(["EXISTS","NOTEXISTS"])}}if(J=="Time Stamp"){M.set_watermark("YYYY-MM-DD-HH:MM:SSGMT")}else{M.set_watermark("")}},[this._classic_expr_component,this._classic_expr_qualifier,this._classic_expr_operator,this._classic_expr_name,this._classic_expr_value]));this._classic_expr_operator.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(G,F,H){var I=F.get_data();if(I==""){I=""}if(I=="EXISTS"||I=="NOTEXISTS"){H.get_parent().parent().hide();H.get_parent().parent().prev().hide()}else{H.get_parent().parent().show();H.get_parent().parent().prev().show();H.set_data("")}},[this._classic_expr_operator,this._classic_expr_value]));if(rdx.utils.is_defined(this._classic_expr_os_name)){this._classic_expr_os_name.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(I,H,G){var F=H.get_data();G.remove_items(false,false);if(F==""){F=""}if(F=="MacOS"){G.add_data_items(["","Version"])}else{G.add_data_items(["","Service Pack","Hotfix","Version"])}},[this._classic_expr_os_name,this._classic_expr_qualifier]))}this._classic_expr_component.set_data("Anti-Virus");this._classic_expr_qualifier.set_data("Version");this._classic_expr_operator.set_data("==");if(this._properties.is_pre_auth_policy==true){this["_classic_expr_frequency"].toggle_read_only(false);this["_classic_expr_freshness"].toggle_read_only(false);this["_classic_expr_weight"].toggle_read_only(false)}if(rdx.utils.is_defined(u)&&rdx.utils.is_not_empty(u)){var m=false;for(var D in this._component_name_map){if($.trim(u).toUpperCase().indexOf(this._component_name_map[D])==0){m=true}}if(!m){this._throw_error(f);return}try{var n="";var h="";for(var D in this._component_name_map){if($.trim(u).toUpperCase().indexOf(this._component_name_map[D])!=-1){n=this._component_name_map[D];h=D;this._classic_expr_component.set_data(D);break}}var E=u.substring(n.length+1,u.indexOf(")",n.length));if(h=="Operating System"){for(var D in this._operating_system_map){if(E.toUpperCase().indexOf(this._operating_system_map[D].toUpperCase())!=-1){this._classic_expr_os_name.set_data(D);break}}}else{this._classic_expr_name.set_data(E)}var d=u.substring((n.length)+(E.length)+2,u.length);var w="";var o=false;if(d.indexOf(".")==0){for(var D in this._qualifier_map){if($.trim(u).toUpperCase().indexOf(this._qualifier_map[D])!=-1){w=D;this._classic_expr_qualifier.set_data(D);o=true}}if(!o){this._throw_error(f);return}}var q="";if(rdx.utils.is_defined(this._qualifier_map[w])){q=$.trim(d.substring(this._qualifier_map[w].length+1,d.length))}else{q=$.trim(d.substring(w.length+1,d.length))}var B=q.split(" ");var e=B[0];var C=["==","!=","EXISTS","NOTEXISTS"];var a=false;for(var v=0;v<C.length;v++){if(e.toUpperCase()==C[v].toUpperCase()){a=true;break}}if(rdx.utils.is_empty(e)||!a){this._throw_error(f);return}this._classic_expr_operator.set_data(e.toUpperCase());if(B.length>1){var A=false;if((B[1].indexOf("-frequency")==-1&&B[1].indexOf("-errorweight")==-1&&B[1].indexOf("-freshness")==-1)){var p=B[1];this._classic_expr_value.set_data(p);A=true}var g=(A)?2:1;for(var t=g;t<B.length;t++){if(B[t]=="-frequency"){this._classic_expr_frequency.set_data(B[t+1]);t++}else{if(B[t]=="-errorweight"){this._classic_expr_weight.set_data(B[t+1]);t++}else{if(B[t]=="-freshness"){this._classic_expr_freshness.set_data(B[t+1]);t++}}}}}if(rdx.utils.is_not_empty(w)&&!A){this._throw_error(f)}}catch(s){this._throw_error(f)}}};rdx.classic_expression_editor.prototype._create_form_for_network_based_expression=function(f,s,n){var u=this._create_form_for_expression(neo_classic_syntax["Network Based"],s);f.append($("<div>").addClass("expression_builder_box_div").append(u));this._classic_expr_qualifier.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(A,v,z){var w=v.get_data();z.remove_items(false,false);if(rdx.utils.is_not_defined(w)){w=""}if(w=="INTERFACE.ID"||w=="ETHER.SOURCEMAC"||w=="ETHER.DESTMAC"){z.add_data_items(["==","!="])}else{z.add_data_items(["==","!=","<=","<",">=",">","BETWEEN"])}},[this._classic_expr_qualifier,this._classic_expr_operator]));this._classic_expr_operator.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(z,w,A){var v=w.get_data();if(v=="BETWEEN"){A.get_parent().parent().prev().text("Value(Low)-Value(High)*")}else{A.get_parent().parent().prev().text("Value*")}},[this._classic_expr_operator,this._classic_expr_value]));this._classic_expr_flowtype.set_data("REQ");this._classic_expr_qualifier.set_data("VLANID");this._classic_expr_operator.set_data("==");if(rdx.utils.is_defined(n)&&rdx.utils.is_not_empty(n)){if(!($.trim(n).toUpperCase().indexOf("RES")==0||$.trim(n).toUpperCase().indexOf("REQ")==0)){this._throw_error(s);return}try{var h=$.trim(n).toUpperCase().indexOf("RES")==0?"RES":"REQ";this._classic_expr_flowtype.set_data(h.toUpperCase());var a=true;var b=n.split(".");if(b.length>2){var g="";for(var e=1;e<b.length;e++){if(e==1){g=g+b[e]}else{g=g+"."+b[e]}}b[1]=g}var m=b[1].split(" ");var q=this._remove_empty_elements(m);if(rdx.utils.is_defined(q[0])){var o=q[0];this._classic_expr_qualifier.set_data(o.toUpperCase())}else{a=false}if(rdx.utils.is_defined(q[1])){var d=q[1];this._classic_expr_operator.set_data(d.toUpperCase())}else{a=false}if(rdx.utils.is_defined(q[2])){var t=q[2];this._classic_expr_value.set_data(t)}else{a=false}}catch(p){this._throw_error(s)}if(!a){this._throw_error(s)}}};rdx.classic_expression_editor.prototype._create_form_for_date_time_expression=function(b,h,e){var n=this._create_form_for_expression(neo_classic_syntax["Date/Time"],h);b.append($("<div>").addClass("expression_builder_box_div").append(n));this._classic_expr_qualifier.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(s,o,q,t){var p=o.get_data();q.remove_items(false,false);if(rdx.utils.is_not_defined(p)){p=""}q.add_data_items(["==","!=","<=","<",">=",">"]);if(p!="DAYOFWEEK"){q.add_item("BETWEEN")}if(p=="DATE"){t.set_watermark("YYYY-MM-DDGMT")}else{if(p=="DAYOFWEEK"){t.set_watermark("DayGMT")}else{t.set_watermark("YYYY-MM-DD-HH:MM:SSGMT")}}},[this._classic_expr_qualifier,this._classic_expr_operator,this._classic_expr_value]));this._classic_expr_qualifier.set_data("TIME");this._classic_expr_operator.set_data("==");this._classic_expr_value.set_watermark("YYYY-MM-DD-HH:MM:SSGMT");if(rdx.utils.is_defined(e)&&rdx.utils.is_not_empty(e)){var a=false;for(var d=0;d<this._date_time_qualifiers.length;d++){if($.trim(e).toUpperCase().indexOf(this._date_time_qualifiers[d].toUpperCase())==0){a=true}}if(!a){this._throw_error(h);return}try{var m=e.split(" ");var g=this._remove_empty_elements(m);if(rdx.utils.is_defined(g[0])){this._classic_expr_qualifier.set_data(g[0].toUpperCase())}else{a=false}if(rdx.utils.is_defined(g[1])){this._classic_expr_operator.set_data(g[1].toUpperCase())}else{a=false}if(rdx.utils.is_defined(g[2])){this._classic_expr_value.set_data(g[2])}else{a=false}}catch(f){this._throw_error(h)}if(!a){this._throw_error(h)}}};rdx.classic_expression_editor.prototype._create_form_for_file_system_expression=function(b,h,e){var n=this._create_form_for_expression(neo_classic_syntax["File System"],h);b.append($("<div>").addClass("expression_builder_box_div").append(n));this._classic_expr_qualifier.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(s,o,q,t){var p=o.get_data();q.remove_items(false,false);if(rdx.utils.is_not_defined(p)){p=""}if(p=="FS.COMMAND"||p=="FS.SERVERIP"){q.add_data_items(["==","!="])}else{if(p=="FS.SERVER"||p=="FS.SERVICE"||p=="FS.DOMAIN"||p=="FS.PATH"||p=="FS.FILE"||p=="FS.DIR"||p=="FS.USER"){q.add_data_items(["==","!=","CONTAINS","NOTCONTAINS"])}else{if(p=="FS.FILE.ACCESSTIME"||p=="FS.FILE.CREATETIME"||p=="FS.FILE.MODIFYTIME"||p=="FS.FILE.WRITETIME"||p=="FS.DIR.ACCESSTIME"||p=="FS.DIR.CREATETIME"||p=="FS.DIR.MODIFYTIME"||p=="FS.DIR.WRITETIME"){q.add_data_items(["==","!=",">=",">","<=","<"])}else{if(p=="FS.FILE.SIZE"){q.add_data_items(["==","!=",">=",">","<=","<"])}}}}if(p.match(/TIME$/)){t.set_watermark("YYYY-MM-DD-HH:MM:SSGMT")}else{t.set_watermark("")}},[this._classic_expr_qualifier,this._classic_expr_operator,this._classic_expr_value]));this._classic_expr_qualifier.set_data("FS.COMMAND");this._classic_expr_operator.set_data("==");if(rdx.utils.is_defined(e)&&rdx.utils.is_not_empty(e)){var a=false;for(var d=0;d<this._file_system_qualifiers.length;d++){if($.trim(e).toUpperCase().indexOf(this._file_system_qualifiers[d].toUpperCase())==0){a=true}}if(!a){this._throw_error(h);return}try{var m=e.split(" ");var g=this._remove_empty_elements(m);if(rdx.utils.is_defined(g[0])){this._classic_expr_qualifier.set_data(g[0].toUpperCase())}else{a=false}if(rdx.utils.is_defined(g[1])){this._classic_expr_operator.set_data(g[1].toUpperCase())}else{a=false}if(rdx.utils.is_defined(g[2])){this._classic_expr_value.set_data(g[2])}else{a=false}}catch(f){this._throw_error(h)}if(!a){this._throw_error(h)}}};rdx.classic_expression_editor.prototype._throw_error=function(a){a.addClass("wrong_expression");rdx.message_box.error("Invalid Selection",null,rdx.i18n.get_string("neo.error_message_title"),null)};rdx.classic_expression_editor.prototype._create_form_for_expression=function(d,h){var m=$("<table>").addClass("expression_editor_form").append($("<tbody>"));for(var o in d){var n=$("<tr>").append($("<td>").addClass("label").text(d[o]["label"]));var f=$("<tr>");var a=$("<td>");f.append(a);if(d[o]["type"]=="text"){if(d[o]["mandatory"]===true){this["_classic_expr_"+o]=new rdx.text_box(a,new rdx.form_field({key:o,mandatory:true})).render()}else{this["_classic_expr_"+o]=new rdx.text_box(a,new rdx.form_field({key:o})).render()}this["_classic_expr_"+o].add_event_handler(rdx.events.KEYDOWN,new rdx.callback(function(s,q,p){var t=s.keyCode;if(rdx.keycodes.ENTER==t&&rdx.utils.is_defined(q)&&rdx.utils.is_defined(p)){p.call_back([s,q])}},[h,new rdx.callback(this,this._create_simple_expression)]))}else{if(d[o]["type"]=="list"){this["_classic_expr_"+o]=new rdx.list(a,new rdx.form_field({key:o,mandatory:true,properties:{size:1},formatter:{map:d[o]["possible_values"]}})).render()}}this["_classic_expr_"+o].set_data(d[o]["default_value"]);m.append(n).append(f);if(rdx.utils.is_defined(d[o]["comparator"])){var e=$("<tr>").append($("<td>").addClass("label").text(d[o]["comparator"]["label"]));var g=$("<tr>");var b=$("<td>");g.append(b);this["_classic_expr_"+d[o]["comparator"]["label"].toLowerCase()]=new rdx.list(b,new rdx.form_field({key:d[o]["comparator"]["label"].toLowerCase(),mandatory:true,properties:{size:1},formatter:{map:d[o]["comparator"]["possible_values"]}})).render();this["_classic_expr_"+d[o]["comparator"]["label"].toLowerCase()].set_data(d[o]["comparator"]["default_value"]);m.append(e).append(g)}}return m};rdx.classic_expression_editor.prototype._create_simple_expression=function(a,m,d,f){var o=this._expressiontype_dropdown.get_data();var g="";var p={};if(o=="General"){p=this._get_general_expression()}else{if(o=="Client Security"){p=this._get_client_security_expression()}else{if(o=="Network Based"){p=this._get_network_based_expression()}else{if(o=="Date/Time"){p=this._get_date_time_expression()}else{p=this._get_file_system_expression()}}}}if(p.destroy_dialog===true){if(d!=true){if($.trim(this._expression_textarea.get_data())==""){this._expression_textarea.set_data(p.expression)}else{if(this._check_operator_index_is_last()){this._expression_textarea.set_data(this._expression_textarea.get_data()+p.expression)}else{this._expression_textarea.set_data(this._expression_textarea.get_data()+" && "+p.expression)}}}else{var h=this._expression_textarea.get_data();if(rdx.utils.is_defined(f.start_position)&&rdx.utils.is_defined(f.end_position)){var n=h.substring(0,f.start_position);var b=h.substring(f.end_position,h.length);var e=p.expression;this._expression_textarea.set_data(n+e+b)}}this.close_expression_buider_dialog(m)}};rdx.classic_expression_editor.prototype._check_operator_index_is_last=function(){var d=this._expression_textarea.get_data();var b=d.lastIndexOf("&&");var a=d.lastIndexOf("||");if(b==d.length-3||b==d.length-2||a==d.length-3||a==d.length-2){return true}else{return false}};rdx.classic_expression_editor.prototype._check_type_of_expression=function(f){if(rdx.utils.is_not_defined(f)){return null}var n=false;if(rdx.utils.is_defined(this.expression_editor_saved_expression.name)){for(var a=0;a<this.expression_editor_saved_expression.name.length;a++){if($.trim(f).toUpperCase().indexOf(this.expression_editor_saved_expression.name[a].toUpperCase())==0){n=true;break}}}if(n){return"Named Expression"}var h=false;for(var o in this._component_name_map){if(f.toUpperCase().indexOf(this._component_name_map[o])!=-1){h=true;break}}if(h===true){return"Client Security"}var m=false;var g=["VLANID","INTERFACE.ID","INTERFACE.RXTHROUGHPUT","INTERFACE.TXTHROUGHPUT","INTERFACE.RXTXTHROUGHPUT","ETHER.SOURCEMAC","ETHER.DESTMAC"];for(var e=0;e<g.length;e++){if(f.toUpperCase().indexOf(g[e])!=-1){m=true;break}}if(m===true){return"Network Based"}var d=false;var b=["FS.COMMAND","FS.USER","FS.SERVER","FS.SERVERIP","FS.SERVICE","FS.DOMAIN","FS.PATH","FS.FILE","FS.DIR","FS.FILE.ACCESSTIME","FS.FILE.CREATETIME","FS.FILE.CREATETIME","FS.FILE.MODIFYTIME","FS.FILE.WRITETIME","FS.DIR.ACCESSTIME","FS.DIR.CREATETIME","FS.DIR.MODIFYTIME","FS.DIR.WRITETIME"];for(var e=0;e<b.length;e++){if(f.toUpperCase().indexOf(b[e])!=-1){d=true;break}}if(d===true){return"File System"}var q=false;var p=["TIME","DATE","DAYOFWEEK"];for(var e=0;e<p.length;e++){if(f.toUpperCase().indexOf(p[e])!=-1){q=true;break}}if(q===true){return"Date/Time"}return"General"};rdx.classic_expression_editor.prototype._get_general_expression=function(){var h=null;var o={expression:h,destroy_dialog:false};var g=this._classic_expr_flowtype.get_data();if(rdx.utils.is_not_defined(g)){rdx.message_box.error("Please select flow type",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}var p=this._classic_expr_protocol.get_data();if(rdx.utils.is_not_defined(p)){rdx.message_box.error("Please select protocol",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}var m=this._classic_expr_qualifier.get_data();if(rdx.utils.is_not_defined(m)){rdx.message_box.error("Please select qualifier",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}var b=this._classic_expr_operator.get_data();if(rdx.utils.is_not_defined(b)){rdx.message_box.error("Please select operator",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}var f=null;if(this._classic_expr_header._parent.parent().is(":visible")){if(this._classic_expr_header.get_data().length<=0){rdx.message_box.error("Please specify header name",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}f=this._classic_expr_header.get_data()}var n=$.trim(this._classic_expr_value.get_data());if(this._classic_expr_value._parent.parent().is(":visible")&&n.length<=0){rdx.message_box.error("Please specify value",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}if(m=="SOURCEIP"||m=="DESTIP"){if(!rdx.utils.is_ipv4(n)&&!rdx.utils.is_ipv6(n)){rdx.message_box.error("IP Address Invalid",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}}if((m=="SOURCEPORT"||m=="DESTPORT")&&(b!="BETWEEN")){if(!n.match(/^\d*$/)){rdx.message_box.error("Port Number Invalid",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}}if(m=="URLLEN"||m=="URLQUERYLEN"||m=="STATUSCODE"){n=parseInt(n)}var a=0;if(this._classic_expr_length._parent.parent().is(":visible")&&this._classic_expr_length.get_data().length>0){a=parseInt(this._classic_expr_length.get_data())}var d=0;if(this._classic_expr_offset._parent.parent().is(":visible")&&this._classic_expr_offset.get_data().length>0){d=parseInt(this._classic_expr_offset.get_data())}var e=null;if(this._classic_expr_netmask._parent.parent().is(":visible")&&$.trim(this._classic_expr_netmask.get_data().length)>0){if(!rdx.utils.is_ipv4(n)){rdx.message_box.error("Netmask can be specified only with IPv4 address",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}e=this._classic_expr_netmask.get_data();if(!rdx.utils.is_ipv4(e)){rdx.message_box.error("Please specify valid netmask value",null,rdx.i18n.get_string("neo.error_message_title"),null);return o}}o.expression=this._get_simple_expression(g,p,m,b,n,f,a,d,e);o.destroy_dialog=true;return o};rdx.classic_expression_editor.prototype._get_client_security_expression=function(){var g=null;var q={expression:g,destroy_dialog:false};var n=this._classic_expr_component.get_data();if(rdx.utils.is_not_defined(n)){rdx.message_box.error("Please select component",null,rdx.i18n.get_string("neo.error_message_title"),null);return q}var a="";var m="";if(this._classic_expr_name._parent.parent().is(":visible")){a=$.trim(this._classic_expr_name.get_data());m="Please specify name"}else{a=$.trim(this._classic_expr_os_name.get_data());m="Please select Operating System name"}if(a.length<=0){rdx.message_box.error(m,null,rdx.i18n.get_string("neo.error_message_title"),null);return q}var h=this._classic_expr_qualifier.get_data();if(rdx.utils.is_not_defined(h)){rdx.message_box.error("Please select qualifier",null,rdx.i18n.get_string("neo.error_message_title"),null);return q}var d=this._classic_expr_operator.get_data();if(rdx.utils.is_not_defined(d)){rdx.message_box.error("Please select operator",null,rdx.i18n.get_string("neo.error_message_title"),null);return q}var p=$.trim(this._classic_expr_value.get_data());if(this._classic_expr_value._parent.parent().is(":visible")&&p.length<=0){rdx.message_box.error("Please select value",null,rdx.i18n.get_string("neo.error_message_title"),null);return q}var b=$.trim(this._classic_expr_frequency.get_data());var e=$.trim(this._classic_expr_weight.get_data());var o=$.trim(this._classic_expr_freshness.get_data());var f="";f=f+this._component_name_map[n];if(n=="Operating System"){f=f+"("+this._operating_system_map[a]+")"}else{f=f+"("+a+")"}if(rdx.utils.is_not_empty(h)){f=f+this._qualifier_map[h]}f=f+" "+d;if(this._classic_expr_value._parent.parent().is(":visible")){f=f+" "+p}if(this._classic_expr_frequency._parent.parent().is(":visible")&&b.length>0){f=f+" -frequency "+b}if(this._classic_expr_weight._parent.parent().is(":visible")&&e.length>0){f=f+" -errorweight "+e}if(this._classic_expr_freshness._parent.parent().is(":visible")&&o.length>0){f=f+" -freshness "+o}q.expression=this._get_simple_expression(f);q.destroy_dialog=true;return q};rdx.classic_expression_editor.prototype._get_network_based_expression=function(){var g=null;var b={expression:g,destroy_dialog:false};var f=this._classic_expr_flowtype.get_data();if(rdx.utils.is_not_defined(f)){rdx.message_box.error("Please select flow type",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var d=this._classic_expr_qualifier.get_data();if(rdx.utils.is_not_defined(d)){rdx.message_box.error("Please select qualifier",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var a=this._classic_expr_operator.get_data();if(rdx.utils.is_not_defined(a)){rdx.message_box.error("Please select operator",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var e=$.trim(this._classic_expr_value.get_data());if(e.length<=0){rdx.message_box.error("Please specify value",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var h=f+"."+d+" "+a+" "+e;b.expression=this._get_simple_expression(h);b.destroy_dialog=true;return b};rdx.classic_expression_editor.prototype._get_date_time_expression=function(){var f=null;var b={expression:f,destroy_dialog:false};var d=this._classic_expr_qualifier.get_data();if(rdx.utils.is_not_defined(d)){rdx.message_box.error("Please select qualifier",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var a=this._classic_expr_operator.get_data();if(rdx.utils.is_not_defined(a)){rdx.message_box.error("Please select operator",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var e=$.trim(this._classic_expr_value.get_data());if(e.length<=0){rdx.message_box.error("Please specify value",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}b.expression=this._get_simple_expression(null,null,d,a,e,null,0,0,null);b.destroy_dialog=true;return b};rdx.classic_expression_editor.prototype._get_file_system_expression=function(){var f=null;var b={expression:f,destroy_dialog:false};var d=this._classic_expr_qualifier.get_data();if(rdx.utils.is_not_defined(d)){rdx.message_box.error("Please select qualifier",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var a=this._classic_expr_operator.get_data();if(rdx.utils.is_not_defined(a)){rdx.message_box.error("Please select operator",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}var e=$.trim(this._classic_expr_value.get_data());if(e.length<=0){rdx.message_box.error("Please specify value",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}if(d=="FS.SERVERIP"){if(!rdx.utils.is_ipv4(e)&&!rdx.utils.is_ipv6(e)){rdx.message_box.error("IP Address Invalid",null,rdx.i18n.get_string("neo.error_message_title"),null);return b}}b.expression=this._get_simple_expression(null,null,d,a,e,null,0,0,null);b.destroy_dialog=true;return b};rdx.classic_expression_editor.prototype._get_simple_expression=function(h,q,m,d,o,g,b,e,f){var n="";var a=" ";var p=false;var s=false;if(rdx.utils.is_defined(h)&&$.trim(h).length>0){n=$.trim(h);p=true}if(rdx.utils.is_defined(q)&&$.trim(q).length>0){if(p){n=n+"."}n=n+$.trim(q);s=true}if(rdx.utils.is_defined(m)&&$.trim(m).length>0){if(s){n=n+"."}n=n+$.trim(m)}if(m=="HEADER"){n=n+a+$.trim(g)}if(rdx.utils.is_defined(d)&&$.trim(d).length>0){n=n+a+$.trim(d)}if(rdx.utils.is_defined(o)&&$.trim(o).length>0){n=n+a+$.trim(o)}if(b!=0){if(rdx.utils.is_defined(b)&&$.trim(b).length>0){n=n+a+"-length"+a+$.trim(b)}}if(e!=0){if(rdx.utils.is_defined(e)&&$.trim(e).length>0){n=n+a+"-offset"+a+parseInt(e)}}if(rdx.utils.is_defined(f)&&$.trim(f).length>0){n=n+a+"-netmask"+a+$.trim(f)}return n};rdx.entity_chooser=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={select_msg:"rdx.click_to_select",multi_selection:false,send_full_entity_data:false,show_all_multi_select_data:false,display_column_formatter:null,width:null};this._component=null;this._multi_select_display_component=null;this._properties=$.extend(true,this._DEFAULT_PROPERTIES,b.get_properties());this._storage_key=rdx.utils.is_defined(b._properties.storage_key)?b._properties.storage_key:"";this._display_column=rdx.utils.is_defined(b._properties.display_column)?b._properties.display_column:"";this._view_name=rdx.utils.is_defined(b._properties.view_name)?b._properties.view_name:null;this._resource_data=null;this._view_context=rdx.utils.is_defined(this._field._properties.view_context)?this._field._properties.view_context:{};this._view_context_data={};this._update_form_field=true;this._view_link_map={};this._list_table=null;this._clear_icon_present=false};rdx.entity_chooser.prototype.render=function(){this._component=$("<div>").addClass("entity_chooser").attr("tabindex",0);this._multi_select_display_component=$("<div>").addClass("multi_selection_entity_chooser");this._arrow_container=$("<span>").addClass("arrow").append("&nbsp;");this._text_input_div=$("<div>").addClass("text_input").append(rdx.i18n.get_string(this._properties.select_msg));if(this._properties.disable_input===true){this._component.addClass("disable_form_field");this._arrow_container.addClass("form_field_disabled");this._text_input_div.addClass("form_field_disabled")}if(this._properties.width){this._text_input_div.css({width:this._properties.width-30})}this._component.append(this._text_input_div).append(this._arrow_container);this._component.append(this._multi_select_display_component);this._parent.append(this._component);this.create_list_table();if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().click_to_select.push({title:this._field.get_label(),clickable:this._component})}this._clear_icon_present=false;this._component.bind(rdx.events.MOUSE_OVER,{entity_chooser:this,text_input_span:this._text_input_div},function(d){var b=d.data.entity_chooser;var a=$("<span>").addClass("cross_on_hover");if(b._properties.show_all_multi_select_data==false){if(b._field.is_mandatory()){return}}else{if((b._multi_select_display_component).children().length==0){if(b._field.is_mandatory()){if(rdx.utils.is_defined(b._text_input_div.children()[0])&&b._clear_icon_present){b._text_input_div.children().remove();b._clear_icon_present=false}return}}}if(!(!b._field.is_read_only()&&rdx.utils.is_not_empty(b.get_data())&&b._clear_icon_present==false)){return}if(b.get_data()==rdx.i18n.get_string(b._properties.select_msg)){return}b._text_input_div.append(a);b._clear_icon_present=true;a.bind(rdx.events.CLICK,{entity_chooser:b},function(e){if(e.data.entity_chooser._properties.show_all_multi_select_data&&e.data.entity_chooser._multi_select_display_component.children().length>0){e.data.entity_chooser._validate_change(e)}else{e.data.entity_chooser.set_data(rdx.i18n.get_string(e.data.entity_chooser._properties.select_msg));e.data.entity_chooser._resource_data=null}e.data.entity_chooser._component.trigger(rdx.events.CHANGE);a.remove();e.data.entity_chooser._clear_icon_present=false;e.stopPropagation()})});if(rdx.utils.is_defined(this._field.get_set_view_name())){this._component.trigger(rdx.events.CHANGE)}if(this._field.is_read_only()){this.toggle_read_only(false)}return this};rdx.entity_chooser.prototype.add_event_handler=function(a,b){this._component.bind(rdx.events.CHANGE,{rdx_change_handler_callback:b},function(d){d.data.rdx_change_handler_callback.call_back([d])})};rdx.entity_chooser.prototype._bind_events=function(){this._component.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{entity_chooser:this},function(h){if(rdx.utils.is_defined(h.keyCode)&&h.keyCode!==13){return}else{var g=h.data.entity_chooser;if(g._component.hasClass("form_field_disabled")){return}if(rdx.utils.is_defined(g._view_name)){var f=rdx.view_utils.get_modified_view_defn_for_entity_choose(g._view_name,g._properties);var e=rdx.utils.get_cookie("hide_builtin_policies");if(rdx.utils.is_empty(e)){e="true"}var a={};if(rdx.utils.is_defined(f.view_properties.show_hide_link_filter)){a=f.view_properties.show_hide_link_filter}else{a={static_filter:{isdefault:"false"}}}if(rdx.utils.is_defined(f.view_properties.show_hide_link)){if(e==true||e=="true"){g._view_context.static_filter=a.static_filter}else{var m=g._view_context;if(rdx.utils.is_defined(m)&&rdx.utils.is_defined(m.static_filter)&&rdx.utils.is_object_not_empty(m.static_filter)){for(var d in m.static_filter){delete m.static_filter[d]}}}}var b=$.isEmptyObject(g._view_context_data)?g._resource_data:g._view_context_data;g._base_view=rdx.view_utils.show_view_in_slider(f,new rdx.callback(g,g.refresh),b,g._view_context,false,null,new rdx.callback(g,g.store_data));g._base_view.set_add_entity_select_btn(true);g._base_view.prepare_view()}}})};rdx.entity_chooser.prototype.set_data=function(b){var a=this._text_input_div.text();if(typeof(b)=="object"&&rdx.utils.is_defined(b.view_name)){this._view_name=b.view_name}else{if(this._properties.disable_input_if_data_exists){this._component.addClass("disable_form_field");this._arrow_container.addClass("form_field_disabled");this._text_input_div.addClass("form_field_disabled")}if(this._properties.send_full_entity_data===true){this._resource_data=b;this.refresh(false,true)}else{if(b==""){b=rdx.i18n.get_string(this._properties.select_msg)}this._text_input_div.text(b);this._component.trigger(rdx.events.CHANGE);this._component.change()}}};rdx.entity_chooser.prototype.get_data=function(){if(this._properties.send_full_entity_data===true){return this._resource_data}else{var a=this._text_input_div.text();if(rdx.utils.is_not_empty(this._storage_data)){a=this._storage_data}if(this._properties.multi_selection==true){var b;if(this._properties.show_all_multi_select_data==false){if(a==rdx.i18n.get_string(this._properties.select_msg)){return""}else{if(a.indexOf(",")==-1){return a}else{b=a.split(", ");return b}}}else{if(a==rdx.i18n.get_string(this._properties.select_msg)){return""}if($(this._multi_select_display_component).children().length==0){return a}else{b=[];b.push(a);for(ind=0;ind<($(this._multi_select_display_component).children().length);ind++){b.push($(this._multi_select_display_component.children()[ind]).text())}return b}}}else{return(a==rdx.i18n.get_string(this._properties.select_msg))?"":a}}};rdx.entity_chooser.prototype.get_component_type=function(){return rdx.form_constants.ENTITY_CHOOSER};rdx.entity_chooser.prototype.get_field=function(){return this._field};rdx.entity_chooser.prototype.get_component=function(){return this._component};rdx.entity_chooser.prototype._validate_change=function(b){var d=b.data.entity_chooser._multi_select_display_component.children();this._resource_data.splice(0,1);b.data.entity_chooser._handle_multi_select_display();d[d.length-1].remove();if(d.length>1){var a=$("<span>").addClass("cross_on_hover");if(!this._clear_icon_present){this._text_input_div.append(a)}this._clear_icon_present=true;a.bind(rdx.events.CLICK,{entity_chooser:this},function(e){e.data.entity_chooser._validate_change(e);e.data.entity_chooser._component.trigger(rdx.events.CHANGE);a.remove();e.data.entity_chooser._clear_icon_present=false;e.stopPropagation()})}};rdx.entity_chooser.prototype.store_data=function(b){if(rdx.utils.is_defined(b.slider_clicked)&&b.slider_clicked==true){this._update_form_field=false}else{if(rdx.utils.is_function(b.get_button_state)){this._update_form_field=false}else{this._update_form_field=true}}if(rdx.utils.is_defined(this._base_view)){var a=this._base_view.get_view_context().get_data(rdx.view_constants.data_selection_param.SELECTED);if(rdx.utils.is_object_not_empty(a)){this._clear_icon_present=false;this._resource_data=a}}else{this._resource_data=""}};rdx.entity_chooser.prototype.refresh=function(m,n){m=m||true;n=n||false;var a=rdx.utils.get_view(this._view_name).resource_name;var p=rdx.utils.get_resource(a).primary_keys;var g=p&&p.length>0?p[0]:null;var f=rdx.utils.is_not_empty(this._display_column)?this._display_column:g;var h="";if(rdx.utils.is_defined(this._resource_data)){if(rdx.utils.is_array(this._resource_data)&&this._resource_data.length>0){if(rdx.utils.is_not_empty(this._storage_key)){this._storage_data=this._resource_data[0][this._storage_key]}if(rdx.utils.is_not_empty(f)){h=this._get_display_column_val(this._resource_data[0],f)}}else{if(rdx.utils.is_defined(this._resource_data)){if(rdx.utils.is_not_empty(this._storage_key)){this._storage_data=this._resource_data[this._storage_key]}if(rdx.utils.is_not_empty(f)){h=this._get_display_column_val(this._resource_data,f)}}}if(rdx.utils.is_array(this._resource_data)&&this._resource_data.length>1){for(var d=1;d<this._resource_data.length;d++){if(rdx.utils.is_not_empty(this._display_column)){h=h+", "+this._get_display_column_val(this._resource_data[d],f)}else{h=h+", "+this._resource_data[d][p[0]]}if(rdx.utils.is_not_empty(this._storage_key)){this._storage_data=this._resource_data[d][this._storage_key]}}}else{if(rdx.utils.is_defined(this._resource_data)&&rdx.utils.is_object(this._resource_data)){if(rdx.utils.is_not_empty(this._display_column)){h=h+", "+this._get_display_column_val(this._resource_data,f)}else{h=h+", "+this._resource_data[p[0]]}if(rdx.utils.is_not_empty(this._storage_key)){this._storage_data=this._resource_data[this._storage_key]}}}if(rdx.utils.is_defined(this._field.get_formatter())){var o=this._field.get_formatter();var b=this._resource_data;if(rdx.utils.is_array(this._resource_data)&&this._resource_data.length>0){b=this._resource_data[0]}h=o.get_display_value(h,b)}}var e=this._text_input_div.text();if(this._update_form_field===true||n==true){if(rdx.utils.is_array(this._resource_data)&&this._resource_data.length>1&&this._properties.show_all_multi_select_data){this._handle_multi_select_display(p,true)}else{$(this._multi_select_display_component).children().remove();if(rdx.utils.is_defined(h)){this._text_input_div.text(h)}if(this._resource_data==rdx.i18n.get_string(this._properties.select_msg)){this._text_input_div.text(this._resource_data);this._resource_data=null}}}if(m===true){this._component.trigger(rdx.events.CHANGE);this._component.change()}};rdx.entity_chooser.prototype._get_display_column_val=function(b,a){if(rdx.utils.is_defined(b,a)){if(rdx.utils.is_defined(this._properties.display_column_formatter)){return this._properties.display_column_formatter.call_back([b])}else{return b[a]}}return b};rdx.entity_chooser.prototype._handle_multi_select_display=function(a,e){e=rdx.utils.is_defined(e)?e:false;var f=rdx.utils.is_not_empty(this._display_column)?this._display_column:a[0];if(e){if($(this._multi_select_display_component).children().length>0){$(this._multi_select_display_component).children().remove()}}if(this._properties.show_all_multi_select_data==true){this._text_input_div.text(this._resource_data[0][f]);for(var g=1;g<this._resource_data.length;g++){if(rdx.utils.is_defined($(this._multi_select_display_component).children()[g-1])){$($(this._multi_select_display_component).children()[g-1])[0].childNodes[0].nodeValue=(this._resource_data[g][f])}else{var d=$("<div>").addClass("text_input").append(this._resource_data[g][f]);this._multi_select_display_component.append(d);d.bind(rdx.events.MOUSE_OVER,{that:this._resource_data,next_input_div:d},function(m){if(m.data.next_input_div.children().length==0){var h=$("<span>").addClass("cross_on_hover");m.data.next_input_div.append(h);h.bind(rdx.events.CLICK,{that:m.data.that},function(o){var n=Array.prototype.indexOf.call(o.target.parentElement.parentElement.childNodes,o.target.parentElement);o.target.parentElement.remove();o.data.that.splice(n+1,1);o.stopPropagation()})}})}}if(($(this._multi_select_display_component).children().length)>this._resource_data.length-1){var b=$(this._multi_select_display_component).children().length-(this._resource_data.length-1);for(var g=0;g<b;g++){$(this._multi_select_display_component).children()[this._resource_data.length-1+g].remove()}}}};rdx.entity_chooser.prototype.toggle_read_only=function(d){var a=this._field.get_add_view_name();var b=this._field.get_set_view_name();if(d){this._component.removeClass("form_field_disabled");if(rdx.utils.is_defined(a)){this._view_link_map[a].removeClass("disabled")}if(rdx.utils.is_defined(b)){if(rdx.utils.is_empty(this.get_data())){this._view_link_map[b].addClass("disabled")}else{this._view_link_map[b].removeClass("disabled")}}}else{if(rdx.utils.is_defined(a)){this._view_link_map[a].addClass("disabled")}if(rdx.utils.is_defined(b)){this._view_link_map[b].addClass("disabled")}}};rdx.entity_chooser.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._component}if(a){b.show();this.toggle_read_only(a)}else{b.hide();this.toggle_read_only(a)}};rdx.entity_chooser.prototype.set_view_name=function(a){this._view_name=a};rdx.entity_chooser.prototype.create_list_table=function(){if(rdx.utils.is_defined(this._field.get_add_view_name())||rdx.utils.is_defined(this._field.get_set_view_name())){this._list_table=$("<table>").attr("cellpadding",0).attr("cellSpacing",0).addClass("list_table").append($("<tbody>"));rdx.form_utils.add_form_field_link(this,this._component,this._field,this._view_link_map,null,this._list_table)}this._bind_events();this._parent.prepend(this._list_table)};rdx.preview=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={value:null,file_path:null,table_header:null,preview_render_callback:null,edit_preview_callback:null,upload_file_callback:null,remove_file_callback:null,render_tabbed_view_callback:null};this._component=null;this._properties=$.extend(true,this._DEFAULT_PROPERTIES,b.get_properties());this._current_selected_item=null;this._directory_level=0;this._file_name=null};rdx.preview.prototype.render=function(){this._component=$("<div>").addClass("selected-preview-content");this._pen_span=$("<span>").addClass("edit-preview-content").append("&nbsp;").attr("title","Edit");this._delete_span=$("<span>").addClass("clear-preview").append("&nbsp;").attr("title","Reset");this._upload_span=$("<span>").addClass("upload_file").append("&nbsp;").attr("title","Upload");if(rdx.utils.is_defined(this._properties.value)){this.set_data(this._properties.value)}this._component.append(this._upload_span).append(this._delete_span).append(this._pen_span);this._icons_event_handlers();this._parent.append(this._component);return this};rdx.preview.prototype._render_table=function(f,h,m){h._preview_div=$("<div>").addClass("preview-parent-block clearfix");h._header_div=$("<div>").addClass("table-header-block");h._search_icon=$("<span>").addClass("search-icon");h._search_input=$("<input>").attr({type:"text",placeholder:rdx.i18n.get_string("rdx.search")});h._search_cross=$("<span>").addClass("search-close");h._parent.append(h._preview_div);h.table_div=$("<div>").addClass("table-block-left");h._header_div.text(h._properties.table_header);h._header_div.append(h._search_icon);h._search_icon.show();h._search_icon.bind(rdx.events.CLICK,{preview:h},h._search);var e=$("<div>").addClass("item-list");var d=$("<div>").addClass("preview_block");var b=$("<div>").addClass("preview-header");var g=$("<span>").addClass("preview-close");h.locale_div=$("<div>").addClass("preview-header-locale");h.select_div=$("<div>").addClass("select-block");var a=$("<div>").addClass("select-block-left");var o=$("<div>").addClass("select-block-right");h.select_div.append(a).append(o);var n={add_blue_button:true,add_grey_button:true,grey_button_label:"Edit",blue_button_label:"Select",blue_button_tooltip:null,grey_button_tooltip:null,grey_button_click_handler_callback:new rdx.callback(h.edit_preview_view,[h]),blue_button_click_handler_callback:new rdx.callback(h.select_and_close_preview,[h])};h._button_bar=new rdx.button_bar(o,new rdx.form_field({properties:n})).render();h.form_div=$("<div>").addClass("field-block");d.append(b).append(h.locale_div).append(h.select_div).append(h.form_div);h.create_inner_divs(f,h,e,a,b,g,h.form_div,null,m);h._preview_div.append(h.table_div).append(d);h._preview_div.show()};rdx.preview.prototype.create_inner_divs=function(v,g,h,n,s,u,e,f,B){h.empty();g._show_hide_preview_area(true);rdx.mask.unmask_component($(g._preview_div),"__preview");g._button_bar.disable();u.bind(rdx.events.CLICK,{preview:g},function(C){C.data.preview.close_preview()});s.append(u);var A=v.systemfile;if(rdx.utils.is_defined(f)||g._directory_level>0){var z=$("<div>").addClass("child_div");var m=$("<span>").addClass("directory");var p=$("<span>").text("...");z.append(p).append(m);h.append(z);z.bind(rdx.events.CLICK,{preview:g,title_div:n,child_div:w,form_div:e,preview_header_div:s,cross_span:u,items_div:h},function(D){D.data.form_div.empty();D.data.title_div.text("");rdx.mask.mask_component($(D.data.preview._preview_div),"__preview");var C=D.data.preview.get_file_path();C=C.substr(0,C.lastIndexOf("/"));D.data.preview.set_file_path(C);D.data.preview._directory_level--;rdx.model.get(rdx.utils.get_resource("systemfile"),{args:[{name:"filelocation",value:C}],is_query_param:true,use_args:true},new rdx.callback(D.data.preview.create_inner_divs,[D.data.preview,D.data.items_div,D.data.title_div,D.data.preview_header_div,D.data.cross_span,D.data.form_div]))})}var d=false;if(rdx.utils.is_defined(A)){for(var t=0;t<A.length;t++){var w=$("<div>").addClass("child_div");var p=$("<span>").text(A[t]["filename"]);w.append(p);if(rdx.utils.is_defined(A[t]["filemode"])){var m=$("<span>").addClass("directory");w.prepend(m)}else{var b=$("<span>").attr("title","Delete");var o=$("<img>").addClass("delete_file").attr("src",rdx.images.DELETE_FILE_IMG);b.append(o);o.bind(rdx.events.CLICK,{preview:g,filename:A[t]["filename"],filelocation:g.get_file_path(),child_div:w},function(C){rdx.message_box.confirm("Do you want to remove the selected entity?",new rdx.callback(function(F,D,E,G){if(rdx.utils.is_defined(g.get_remove_file_callback())){g.get_remove_file_callback().call_back([E,new rdx.callback(function(){rdx.model.remove(rdx.utils.get_resource("systemfile"),new rdx.callback(function(K,J,H,I){new rdx.notification_bar().show('Schema file "'+I+'" is successfully Deleted.',rdx.SUCCESS);if(J.get_current_selected_item().text()===H.text()){J._show_hide_preview_area(false)}$(H).remove()},[F,D,E]),{filename:E},null,"remove",{refresh_action:rdx.view_constants.REMOVE_SELECTED},null,{filelocation:G})}),new rdx.callback(function(H){new rdx.notification_bar().show("Remove language file of "+H+"failed",rdx.ERROR)},[E])])}},[C.data.preview,C.data.child_div,C.data.filename,C.data.filelocation]),new rdx.callback());C.stopPropagation()});var q=$("<span>").attr("title","Download");var a=$("<img>").addClass("download_file").attr("src",rdx.images.FILE_DOWNLOAD_IMG);q.append(a);a.bind(rdx.events.CLICK,{preview:g,filename:A[t]["filename"],filelocation:g.get_file_path()},function(D){var C="/rapi/filedownload?filter=path:"+rdx.url_utils.encode_uri_component(D.data.filelocation+"/"+D.data.filename)+"&rand_key="+rand;rdx.form_utils.iframe_loader({file_url:C});D.stopPropagation()});w.append(q).append(b)}h.append(w);w.bind(rdx.events.CLICK,{preview:g,title_div:n,preview_header_div:s,filename:A[t]["filename"],filemode:A[t]["filemode"],child_div:w,form_div:e,cross_span:u,items_div:h},function(D){D.data.form_div.empty();rdx.mask.mask_component($(D.data.preview._preview_div),"__preview");D.data.title_div.text(D.data.filename);D.data.preview.set_file_name(D.data.filename);var E=D.data.preview.get_current_selected_item();if(rdx.utils.is_defined(E)){E.removeClass("selected")}D.data.preview.set_current_selected_item(D.data.child_div);D.data.child_div.addClass("selected");var C=D.data.preview.get_file_path();if(rdx.utils.is_defined(D.data.filemode)&&D.data.filemode[0]=="DIRECTORY"){D.data.title_div.text("");D.data.preview._directory_level++;C=C+"/"+D.data.filename;D.data.preview.set_file_path(C);rdx.model.get(rdx.utils.get_resource("systemfile"),{args:[{name:"filelocation",value:C}],is_query_param:true,use_args:true},new rdx.callback(D.data.preview.create_inner_divs,[D.data.preview,D.data.items_div,D.data.title_div,D.data.preview_header_div,D.data.cross_span,D.data.form_div,D.data.filemode[0]]))}else{rdx.model.get(rdx.utils.get_resource("systemfile"),{args:[{name:"filename",value:D.data.filename},{name:"filelocation",value:C}],is_query_param:true,use_args:true},new rdx.callback(D.data.preview._render_preview_tabbed_view_callback,[D.data.preview,D.data.form_div]))}});if(rdx.utils.is_defined(B)&&(w.find("span").text()==B)){w.addClass("selected");g.set_current_selected_item(w);w.trigger(rdx.events.CLICK);d=true}else{if(!d&&rdx.utils.is_not_defined(A[t]["filemode"])&&rdx.utils.is_not_defined(B)){w.addClass("selected");g.set_current_selected_item(w);w.trigger(rdx.events.CLICK);d=true}}}}g.table_div.append(g._header_div).append(h)};rdx.preview.prototype._search=function(a){a.data.preview._search_icon.hide();a.data.preview._header_div.text("");a.data.preview._header_div.append(a.data.preview._search_input);a.data.preview._header_div.append(a.data.preview._search_cross);a.data.preview._toggle_hide_show_search_box(true);a.data.preview._search_cross.bind(rdx.events.CLICK,{preview:a.data.preview},function(b){b.data.preview._toggle_hide_show_search_box(false);b.data.preview._clear_search_input();b.data.preview._header_div.text(b.data.preview._properties.table_header);b.data.preview._header_div.append(b.data.preview._search_icon);b.data.preview._search_icon.show();b.data.preview._search_icon.bind(rdx.events.CLICK,{preview:b.data.preview},b.data.preview._search)});a.data.preview._search_input.bind(rdx.events.KEYUP,{preview:a.data.preview,search_input:a.data.preview._search_input},function(d){$(".child_div").hide();var b=d.data.search_input.val();$(".child_div").each(function(){if($(this).text().toUpperCase().indexOf(b.toUpperCase())!=-1){$(this).show()}})})};rdx.preview.prototype._clear_search_input=function(){this._search_input.val("");this._search_input.trigger(rdx.events.KEYUP)};rdx.preview.prototype.select_and_close_preview=function(a,b){b.set_data(b.get_file_path()+"/"+b.get_current_selected_item().text());b.close_preview()};rdx.preview.prototype.close_preview=function(){this._clear_search_input();this.toggle_show_hide(true);this._preview_div.hide()};rdx.preview.prototype._toggle_hide_show_search_box=function(a){if(a){this._search_input.show();this._search_cross.show()}else{this._search_input.hide();this._search_cross.hide()}};rdx.preview.prototype._render_preview_tabbed_view_callback=function(d,b,a){if(rdx.utils.is_defined(b.get_render_tabbed_view_callback())){b.get_render_tabbed_view_callback().call_back([d,b,a,b._invoke_preview_render_callback])}};rdx.preview.prototype._invoke_preview_render_callback=function(e,d,b,a){rdx.mask.unmask_component($(d._preview_div),"__preview");d._show_hide_preview_area(true);if(rdx.utils.is_defined(d.get_preview_render_callback())){rdx.mask.unmask_component($(d._preview_div),"__preview");d._preview_data=d.get_preview_render_callback().call_back([e,b,d._button_bar,a])}};rdx.preview.prototype.edit_preview_view=function(a,b){if(rdx.utils.is_defined(b.get_edit_preview_callback())){b.get_edit_preview_callback().call_back([b._preview_data,b.get_file_name(),{resume:function(e,d){b._refresh_preview(e,d)}}])}};rdx.preview.prototype._icons_event_handlers=function(){this._pen_span.unbind(rdx.events.CLICK);this._delete_span.unbind(rdx.events.CLICK);this._upload_span.unbind(rdx.events.CLICK);this._pen_span.bind(rdx.events.CLICK,{preview:this},function(b){b.data.preview.toggle_show_hide(false);var a=b.data.preview.get_file_path();rdx.model.get(rdx.utils.get_resource("systemfile"),{args:[{name:"filelocation",value:a}],is_query_param:true,use_args:true},new rdx.callback(b.data.preview._render_table,[b.data.preview]));b.preventDefault();b.stopPropagation()});this._delete_span.bind(rdx.events.CLICK,{preview:this},function(a){a.data.preview.set_data(a.data.preview.get_default_value());a.preventDefault();a.stopPropagation()});if(rdx.utils.is_defined(this._properties.upload_file_callback)){this._upload_span.show();this._upload_span.bind(rdx.events.CLICK,{preview:this},function(a){a.data.preview._properties.upload_file_callback.call_back([a])})}else{this._upload_span.hide()}};rdx.preview.prototype._refresh_preview=function(b,a){this._preview_div.remove();this._directory_level=0;this.set_file_path(a);rdx.model.get(rdx.utils.get_resource("systemfile"),{args:[{name:"filelocation",value:a}],is_query_param:true,use_args:true},new rdx.callback(this._render_table,[this,b]))};rdx.preview.prototype._show_hide_preview_area=function(a){if(a){this.select_div.show();this.form_div.show();this.locale_div.show()}else{this.select_div.hide();this.form_div.hide();this.locale_div.hide()}};rdx.preview.prototype.set_current_selected_item=function(a){this._current_selected_item=a};rdx.preview.prototype.get_current_selected_item=function(){return this._current_selected_item};rdx.preview.prototype.set_data=function(a){this._component.html($.trim(a));this._component.append(this._upload_span).append(this._delete_span).append(this._pen_span);this._icons_event_handlers()};rdx.preview.prototype.get_data=function(){var a=this._component.text();return $.trim(a)};rdx.preview.prototype.get_default_value=function(){return this._properties.value};rdx.preview.prototype.get_component_type=function(){return rdx.form_constants.PREVIEW};rdx.preview.prototype.get_field=function(){return this._field};rdx.preview.prototype.get_component=function(){return this._component};rdx.preview.prototype.get_file_path=function(){return this._properties.file_path};rdx.preview.prototype.set_file_path=function(a){this._properties.file_path=a};rdx.preview.prototype.get_preview_render_callback=function(){return this._properties.preview_render_callback};rdx.preview.prototype.get_edit_preview_callback=function(){return this._properties.edit_preview_callback};rdx.preview.prototype.get_remove_file_callback=function(){return this._properties.remove_file_callback};rdx.preview.prototype.get_render_tabbed_view_callback=function(){return this._properties.render_tabbed_view_callback};rdx.preview.prototype.get_file_name=function(){return this._file_name};rdx.preview.prototype.set_file_name=function(a){this._file_name=a};rdx.preview.prototype.toggle_show_hide=function(a){if(a){this._component.attr("style","display: inline-block !important")}else{this._component.attr("style","display: none !important")}};rdx.timeline_slider=function(d,b,a){this._parent=d;this._view_definition=b;this._base_view=a;this._timeline_bar_rendered=false};rdx.timeline_slider.prototype.render=function(){this._time_picker_container=$("<div>");this._time_picker_container.addClass("topn_main_view_time_slider_container");this._parent.append(this._time_picker_container);var d=this._view_definition.calendar_properties.time_slider_properties;this._view_definition.calendar_properties.time_picker_dropdown_properties.drop_down_options=this._view_definition.calendar_properties.time_picker_dropdown_properties.time_picker_options_get_callback.call_back();var a=this._view_definition.calendar_properties.time_picker_dropdown_properties;var f=this;a.change_handler_callback=new rdx.callback(function(h,o){if(rdx.utils.is_defined(f._time_selection_bar)){if(rdx.utils.is_not_defined(o)||o){var m=rdx.ext.analytics.view_utils.to_analytics_duration_object(h);rdx.SELECTED_DURATION_OBJECT=$.extend({},rdx.SELECTED_DURATION_OBJECT,m,{time_range:false});if(rdx.utils.is_defined(f._time_selection_bar.picker)){rdx.SELECTED_DURATION_OBJECT.duration_value=f._time_selection_bar.picker.get_data().duration_value}if(rdx.utils.is_defined(f._time_selection_bar.slider)){f._time_selection_bar.slider.reset_bounds(new Date(m.start_epoch),new Date(m.end_epoch));f._time_selection_bar.slider.reset_default_bounds(new Date(m.start_epoch),new Date(m.end_epoch))}}if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)&&rdx.utils.is_defined(f._time_selection_bar)&&rdx.utils.is_defined(f._time_selection_bar.slider)){var n=rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(f._time_selection_bar.slider.get_data().start_epoch))+" - "+rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(f._time_selection_bar.slider.get_data().end_epoch));f._time_selection_bar.time_display_div.empty();f._time_selection_bar.time_display_div.append(n);if(rdx.utils.is_defined(f._view_definition.view_properties.time_panel_update_handler_callback)){f._view_definition.view_properties.time_panel_update_handler_callback.call_back([f._time_selection_bar.slider.get_data().start_epoch,f._time_selection_bar.slider.get_data().end_epoch])}}f._base_view.refresh_view(null,true)}});var g={button_text:"rdx.go",click_handler_callback:new rdx.callback(function(h,o){if(rdx.utils.is_defined(f._time_selection_bar)){if(rdx.utils.is_not_defined(o)||o){var m=rdx.ext.analytics.view_utils.to_analytics_duration_object(h);rdx.SELECTED_DURATION_OBJECT=$.extend({},rdx.SELECTED_DURATION_OBJECT,m,{time_range:true});if(rdx.utils.is_defined(f._time_selection_bar.picker)){rdx.SELECTED_DURATION_OBJECT.duration_value=f._time_selection_bar.picker.get_data().duration_value}}if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)&&rdx.utils.is_defined(f._time_selection_bar.slider)){var n=rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(f._time_selection_bar.slider.get_data().start_epoch))+" - "+rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(f._time_selection_bar.slider.get_data().end_epoch));f._time_selection_bar.time_display_div.empty();f._time_selection_bar.time_display_div.append(n);if(rdx.utils.is_defined(f._view_definition.view_properties.time_panel_update_handler_callback)){f._view_definition.view_properties.time_panel_update_handler_callback.call_back([f._time_selection_bar.slider.get_data().start_epoch,f._time_selection_bar.slider.get_data().end_epoch])}}f._base_view.refresh_view()}})};this._time_selection_bar=rdx.view_utils.add_time_selection_bar(this._time_picker_container,d,a,g);if(rdx.utils.is_defined(this._view_definition.calendar_properties.time_panel_update_handler_callback)){this._view_definition.calendar_properties.time_panel_update_handler_callback.call_back([this._time_selection_bar.slider.get_data().start_epoch,this._time_selection_bar.slider.get_data().end_epoch])}if(rdx.utils.is_defined(this._time_selection_bar.slider)){var b=rdx.ext.analytics.view_utils.to_analytics_duration_object(this._time_selection_bar.picker.get_data());this._time_selection_bar.slider.reset_bounds(new Date(b.start_epoch),new Date(b.end_epoch));if(rdx.utils.is_not_defined(rdx.SELECTED_DURATION_OBJECT)){this._time_selection_bar.slider.reset_default_bounds(new Date(b.start_epoch),new Date(b.end_epoch))}}var e=rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(this._time_selection_bar.slider.get_data().start_epoch))+" - "+rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(this._time_selection_bar.slider.get_data().end_epoch));this._time_selection_bar.time_display_div.empty();this._time_selection_bar.time_display_div.append(e);this._timeline_bar_rendered=true;setTimeout(function(){$(window).trigger("resize")},1500)};rdx.timeline_slider.prototype.destroy_timeline_slider=function(){if(rdx.utils.is_not_empty(this._time_picker_container)){this._time_picker_container.empty();this._time_picker_container.remove();this._timeline_bar_rendered=false}};rdx.timeline_slider.prototype.is_timeline_slider_rendered=function(){return this._timeline_bar_rendered};rdx.timeline_slider.prototype.get_duration=function(){var a=rdx.ext.analytics.view_utils.get_duration();if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)&&rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT.duration_value)){if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_1_hour"){a="last_1_hour"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_day"){a="last_1_day"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_week"){a="last_1_week"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_month"){a="last_1_month"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_1_quarter"){a="last_3_months"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_half_year"){a="last_6_months"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_1_year"){a="last_1_year"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_2_years"){a="last_2_years"}}}}}}}}}return a};rdx.view_component_adapter=function(b,d){this._parent=b;this._field=d;var a=this._get_view(d.get_view());if(rdx.utils.is_defined(a.view_properties)&&rdx.utils.is_not_defined(a.view_properties._dont_show_title)){a.view_properties=$.extend(true,a.view_properties,{_dont_show_title:true})}this._element=new rdx.base_view(b,a);this._element.set_crumb_handler(d.get_crumb_handler());this._element.show_action_in_slider(this._field.get_form_holder().is_show_slider());if(rdx.utils.is_function(this._element.get_view().set_is_back_button_required)){this._element.get_view().set_is_back_button_required(false)}this._set_properties(a);this._adapter_data=new rdx.view_component_adapter_data(this._element,d.get_properties())};rdx.view_component_adapter.prototype._set_properties=function(a){this._element.disable_bread_crumb();if(a.type==rdx.view_constants.CONFIGURE_VIEW){a[rdx.mask.MASK_KEY]=null}rdx.form_utils.set_basic_field_attributes(this._parent,this._field)};rdx.view_component_adapter.prototype._get_view=function(d){var a=null;if(rdx.utils.is_string(d)){a=rdx.utils.get_view(d)}else{a=d}if(a.type!=rdx.view_constants.CONFIGURE_VIEW){return a}else{var e=$.extend({},a);var b=$.extend({},e.view_properties);b=$.extend({},b,{toggle_view:false,add_create_button:false,add_close_button:false,dialog_mode:false,add_border:false,add_title:false});e.view_properties=b;return e}};rdx.view_component_adapter.prototype.render=function(){var b=new Object();b.is_data_set=true;var a=this._element.get_view_context();var d=this._element.get_view_definition().resource_name;a.set_url_params(b,{});this._element.prepare_view(null,false);b.is_data_set=false;a.set_url_params(b,{});this._element.set_view_state(rdx.view_constants.view_state.CREATED);return this};rdx.view_component_adapter.prototype.add_event_handler=function(a,b){};rdx.view_component_adapter.prototype.validate=function(){if(rdx.utils.is_defined(this._element)&&rdx.utils.is_function(this._element.get_view)){if(rdx.utils.is_function(this._element.get_view().validate)){return this._element.get_view().validate()}}return null};rdx.view_component_adapter.prototype.set_data=function(e,a,d){var b=this._field.get_properties();var f=rdx.utils.is_not_defined(b)?false:rdx.utils.is_not_defined(b.view_data_fetch)?false:b.view_data_fetch;if(f==false){this._set_data_with_context(e,a,d)}else{this._element.prepare_view()}};rdx.view_component_adapter.prototype._set_data_with_context=function(n,m,s){var g=this._element.get_view_definition().view_properties;var d=null;var b=rdx.utils.is_defined(this._element.get_resource())?this._element.get_resource().name:null;var q=[m];if(rdx.utils.is_defined(b)){var h=rdx.utils.get_resource(this._element.get_view_definition().resource_name);if(rdx.utils.is_defined(h)){d=h.parent_resource_name}}if(rdx.utils.is_defined(g)&&g.standalone_mode&&rdx.utils.is_not_defined(p)){return}if(rdx.utils.is_defined(d)){var f=rdx.utils.is_defined(n)?n:m[b];q=f}else{d=s.name}var p=this.get_field().get_view_context();if(rdx.utils.is_not_defined(p)){p=new Object();p.is_data_set=true}else{p=$.extend(true,{},p);var o={};if(rdx.utils.is_defined(q)){if(rdx.utils.is_array(q)){o=q[0]}}if(rdx.utils.is_defined(o)&&rdx.utils.is_object_empty(o)&&(rdx.utils.is_defined(p[rdx.url_utils.GET_BY_NAME_TYPE])||rdx.utils.is_defined(p[rdx.url_utils.GET_ARGS_TYPE]))){p.is_data_set=true;p[rdx.url_utils.GET_BY_NAME_TYPE]=null;p[rdx.url_utils.GET_ARGS_TYPE]=null}}var a=this._element.get_view_context();var e=this._is_data_set_only(p)==true?(rdx.utils.is_defined(n)?n:{}):q;a.set_url_params(p,e);if(this._field.get_properties().inherit_data==true){this._element.set_inherited_data_callback(this._field.get_form_data_fetch_callback());this._element.set_inherited_init_data(m)}this._element.prepare_view()};rdx.view_component_adapter.prototype._is_data_set_only=function(a){if(rdx.utils.is_not_defined(a)){return false}if(this._element.get_view_definition().type!=rdx.view_constants.DETAIL_VIEW){return false}var b=0;var e=false;for(var d in a){if(d=="is_data_set"&&b==0){e=true}b=b+1}return(e==true&&b==1)};rdx.view_component_adapter.prototype.get_data=function(){return this._adapter_data};rdx.view_component_adapter.prototype.get_component_type=function(){return rdx.form_constants.VIEW};rdx.view_component_adapter.prototype.get_field=function(){return this._field};rdx.view_component_adapter.prototype.destroy_view=function(a){this._element.destroy_view({},a)};rdx.view_component_adapter.prototype.get_component=function(){return this._element};rdx.view_component_adapter.prototype.resize=function(){return this._element.resize_view()};rdx.view_component_adapter.prototype.refresh=function(){var a=this._field.get_properties();var b=rdx.utils.is_not_defined(a)?false:rdx.utils.is_not_defined(a.do_refresh)?false:a.do_refresh;if(b==true){this._element.prepare_view()}};rdx.view_component_adapter.prototype.toggle_show_hide=function(a){this._parent.find(".rdx_error_container:visible").addClass("hide");this._parent.find(".error_text:visible").removeClass("error_text");if(a){this._parent.show()}else{this._parent.hide()}};rdx.view_component_adapter_data=function(b,a){this._view=b;this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._is_card=rdx.utils.is_defined(this._properties.__IS_CARD)?true:false;this._is_view_capable_of_data_submit=rdx.utils.is_not_defined(this._properties.view_data_fetch)?false:this._properties.view_data_fetch;this._submit_data=rdx.utils.is_not_defined(this._properties.submit_data)?false:this._properties.submit_data;this._force_merge_to_same_resource=false;this._override_binding=rdx.utils.is_not_defined(this._properties.override_binding)?false:this._properties.override_binding};rdx.view_component_adapter_data.prototype.get_resource=function(){return this._view.get_resource()};rdx.view_component_adapter_data.prototype.get_view=function(){return this._view};rdx.view_component_adapter_data.prototype.process_inner_view_data=function(p,s,b){if(this._is_view_capable_of_data_submit==true&&this._submit_data==false){return}var A=this._is_binding_resource(this.get_resource());var v;if(A==true||this._override_binding==true){v=rdx.view_constants.data_selection_param.ALL}else{v=null}var D=this.get_view().get_view_context().get_data(v);if(this._properties.model_method==rdx.model_constants.NOOP){var h=p.get_resource_for_operation();var z={};if(rdx.utils.is_defined(b)){z[b]=D}h=$.extend({},h,z);p.set_resource_for_operation(h);return}var a=this.get_view().get_view_context().get_initial_data();var o=rdx.view_utils.get_model_method(this.get_view().get_view_definition(),false);o=(rdx.utils.is_defined(o))?o:p.get_model_method();if(o==rdx.model_constants.ADD&&rdx.utils.is_not_defined(a)){a=[]}var u=p.get_resource_for_operation();var B=p.get_resource_defn().name;var e=p.get_resource_defn();var w=p.get_action();var g=p.get_callback_on_success();var n=p.get_callback_on_failure();var q=this.get_resource().name;if(B==q&&this._is_card===false){if(rdx.utils.is_array(D)&&rdx.utils.is_defined(u[q])){var C={};C[q]=D;D=C}var A=this._is_binding_resource(this.get_resource());if(A===true&&rdx.utils.is_defined(D)&&rdx.utils.is_array(D)){var d=this._get_add_remove_lists(a,D,e,u);var f=d.add_list;var m=d.remove_list;var t=this._is_binding_resource(this.get_resource())==true?q:B;this._add_to_params_list(m,t,g,n,"remove",null,s);this._add_to_params_list(f,t,g,n,o,w,s)}else{u=$.extend({},u,D)}p.set_resource_for_operation(u)}else{if(!(rdx.utils.is_array(D))){data_array=[];data_array.push(D);D=data_array}if(this._force_merge_to_same_resource==true){this._add_to_params_list(D,q,g,n,o,w,s);return}var d=this._get_add_remove_lists(a,D,e,u);var f=d.add_list;var m=d.remove_list;var t=this._is_binding_resource(this.get_resource())==true?q:B;this._add_to_params_list(m,t,g,n,"remove",null,s);this._add_to_params_list(f,t,g,n,o,w,s)}};rdx.view_component_adapter_data.prototype._add_to_params_list=function(f,a,n,g,d,e,b){var p=rdx.utils.get_resource(a);var q=rdx.view_constants.REFRESH_NONE;if(d===rdx.model_constants.NOOP){q=rdx.view_constants.REFRESH_RELEVANT_OR_ADD_NEW}for(var m=0;m<f.length;m++){var h={resource_defn:p,resource_for_operation:rdx.utils.clone_resrc_on_resrc_props(this.get_resource(),f[m]),callback_on_success:n,callback_on_failure:g,model_method:d,action:e,resource_context:{view_definition:this.get_view().get_view_definition(),trigger_get:false,refresh_action:q}};var o=new rdx.configure_view_operation_params(h);b.push(o)}};rdx.view_component_adapter_data.prototype.set_force_merge_to_same_resource=function(){this._force_merge_to_same_resource=true};rdx.view_component_adapter_data.prototype._get_add_remove_lists=function(m,n,o,d){var g=this._is_binding_resource(this.get_resource());var f=this._get_data_map(m,o,d,g);var b=this._get_data_map(n,o,d,g);var a=[];var s=[];var e=o;if(g==true){for(var q in f){if(rdx.utils.is_not_defined(b[q])){a.push(f[q])}else{var t=rdx.utils.object_keys(b[q]);var p=f[q];var h=b[q];if(!rdx.utils.is_same_object(p,h,t)){a.push(p);s.push(h)}delete b[q]}}}for(var q in b){s.push(b[q])}return{add_list:s,remove_list:a}};rdx.view_component_adapter_data.prototype._get_data_map=function(g,b,e,h){var a={};var p=b.primary_keys;if(rdx.utils.is_not_defined(g)){return a}for(var d=0;d<g.length;d++){var f=g[d];if(h==true){for(var n=0;n<p.length;n++){var m=p[n];if(rdx.utils.is_defined(e[m])){f[m]=e[m]}}}var o=this._get_primary_keys_data(g[d]);if(rdx.utils.is_defined(o)){a[o]=f}}return a};rdx.view_component_adapter_data.prototype._get_primary_keys_data=function(f){var a=this.get_resource().primary_keys;var b=this.get_resource().bind_unbind_keys;if(rdx.utils.is_not_defined(a)){return null}if(rdx.utils.is_not_empty(b)){a=b}var e="";for(var d=0;d<a.length;d++){e=e+f[a[d]];if(d!=a.length-1){e+="~"}}return e};rdx.view_component_adapter_data.prototype._is_binding_resource=function(a){return rdx.utils.is_not_defined(a.binding_resource)?false:a.binding_resource};rdx.card_component=function(a,b){this._DEFAULT_PROPERTIES={component:rdx.form_constants.LIST,value:null,component_height:35,component_border:false,form_fields:[]};this._parent=a;this._field=b;this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._card_map=new Object();this._component=null;this._field_set=null;this._current_card=null};rdx.card_component.prototype._add_card=function(){var d=$("<div>");d.addClass("card");this._field_set=$("<fieldset>");this._field_set.addClass("smooth_all_corner");d.append(this._field_set);var m=$("<legend>");if(this._properties.component_border){m.addClass("card_component");m.addClass("smooth_all_corner")}this._field_set.append(m);this._component=rdx.component_helper.get_component(this._properties.component,m,this.get_field());this._component.render();this._add_event();var a=null;for(var g=0;g<this._properties.form_fields.length;g++){var b=new rdx.form_field(this._properties.form_fields[g],this._field.get_form_holder());var e=$("<div>");e.addClass("card_container");e.hide();this._field_set.append(e);b.get_properties()["__IS_CARD"]=true;var h=rdx.component_helper.get_component(b.get_input_type(),e,b);h.render();var f={component:h,container:e};this._card_map[this._properties.form_fields[g].mapping_field]={component:h,container:e};if(g==0){a=f}}if(rdx.utils.is_defined(this._properties.value)&&rdx.utils.is_defined(this._card_map[this._properties.value])){a=this._card_map[this._properties.default_card]}a.container.show();this._current_card=a;return d};rdx.card_component.prototype._get_event_name=function(){if(this._properties.component==rdx.form_constants.LIST){return rdx.events.CHANGE}return rdx.events.CLICK};rdx.card_component.prototype._add_event=function(){this._component.add_event_handler(this._get_event_name(),new rdx.callback(this,this._handle_event))};rdx.card_component.prototype._handle_event=function(){var b=this._component.get_data();var a=this._card_map[b];if(rdx.utils.is_not_defined(a)){return}if(rdx.utils.is_defined(this._current_card)){this._current_card.container.hide();this._current_card.container.find(".rdx_error_container").addClass("hide");this._current_card.container.find(".error_text").removeClass("error_text")}a.container.show();if(rdx.utils.is_function(a.component.resize)){a.component.resize()}this._current_card=a};rdx.card_component.prototype.render=function(){this._container=this._add_card();this._set_properties();this._parent.append(this._container);return this};rdx.card_component.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._container,this._field);for(key in this._card_map){if(this._field.get_width()!=-1){this._card_map[key].container.width(this._field.get_width())}}};rdx.card_component.prototype.add_event_handler=function(a,b){this._component.add_event_handler(a,b)};rdx.card_component.prototype.get_current_card_component=function(){return this._current_card.component};rdx.card_component.prototype.set_data=function(e,a,d){if(rdx.utils.is_not_defined(a)){return}if(rdx.utils.is_defined(e)){this._component.set_data(e)}for(var b in this._card_map){this._card_map[b].component.set_data(null,a,d);if(b==e){this._current_card.container.hide();this._card_map[b].container.show();this._current_card=this._card_map[b]}}};rdx.card_component.prototype.get_data=function(){return this._component.get_data()};rdx.card_component.prototype.get_component_type=function(){return rdx.form_constants.CARD};rdx.card_component.prototype.get_field=function(){return this._field};rdx.card_component.prototype.get_component=function(){return this._current_card.component.get_component()};rdx.card_component.prototype.resize=function(){for(var a in this._card_map){if(rdx.utils.is_function(this._card_map[a].component.resize)){this._card_map[a].component.resize()}}};rdx.card_component.prototype.toggle_show_hide=function(a){if(a){this._field_set.show()}else{this._field_set.hide()}};rdx.component_helper=new function(){this.SPAN_CHECK_FOR_TWO_COLUMNS=true;this.get_component=function(e,d,f,a){var b=null;switch(e){case rdx.form_constants.LABEL:b=new rdx.label(d,f,rdx.utils.is_defined(a)?a.is_read_only():null);break;case rdx.form_constants.TEXT_BOX:case rdx.form_constants.PROXY:b=new rdx.text_box(d,f);this._register_key_press_event_for_form_submit(b,a);break;case rdx.form_constants.TEXT_AREA:b=new rdx.text_area(d,f);break;case rdx.form_constants.PASSWORD:b=new rdx.password(d,f);this._register_key_press_event_for_form_submit(b,a);break;case rdx.form_constants.LINK:b=new rdx.link_component(d,f);break;case rdx.form_constants.HYPER_LINK:b=new rdx.hyper_link(d,f,a);break;case rdx.form_constants.PREVIEW:b=new rdx.preview(d,f);break;case rdx.form_constants.CHECK_BOX:if($(d).is("td")){d.addClass("rdx_checkbox_component")}b=new rdx.check_box(d,f);break;case rdx.form_constants.LIST:b=new rdx.list(d,f);break;case rdx.form_constants.DROP_DOWN_MENU:b=new rdx.dropdown_menu(d,f);break;case rdx.form_constants.EDITTABLE_LIST:b=new rdx.edittable_list(d,f);break;case rdx.form_constants.BIND_UNBIND_LIST:b=new rdx.bind_unbind_list(d,f);break;case rdx.form_constants.RADIO_GROUP:b=new rdx.radio_group(d,f);break;case rdx.form_constants.TILE_GROUP:b=new rdx.tile_group(d,f);break;case rdx.form_constants.VIEW:b=new rdx.view_component_adapter(d,f);break;case rdx.form_constants.IP_RANGE:b=new rdx.ip_range(d,f);break;case rdx.form_constants.TABLE:b=new rdx.table_component(d,f);break;case rdx.form_constants.CARD:b=new rdx.card_component(d,f);break;case rdx.form_constants.IPV4:case rdx.form_constants.IPV6:case rdx.form_constants.IPV4V6:b=new rdx.ipv4v6(d,f);break;case rdx.form_constants.EDITABLE_COMBOBOX:b=new rdx.editable_combobox(d,f);break;case rdx.form_constants.FILE_UPLOAD:b=new rdx.file_upload_component(d,f);break;case rdx.form_constants.FILE_BROWSER:b=new rdx.file_browser_component(d,f);break;case rdx.form_constants.NEXT_ROW:b=new rdx.label(d,f);break;case rdx.form_constants.COMMAND_SHELL_EXECUTER:b=new rdx.command_shell_executer(d,f);break;case rdx.form_constants.EXPRESSION_EDITOR:b=new rdx.expression_editor(d,f);break;case rdx.form_constants.CLASSIC_EXPRESSION_EDITOR:b=new rdx.classic_expression_editor(d,f);break;case rdx.form_constants.MULTIPLE_FIELD:b=new rdx.multiple_field(d,f);break;case rdx.form_constants.TREE:b=new rdx.tree_component(d,f);break;case rdx.form_constants.TREE_INPUT:b=new rdx.tree_input(d,f);break;case rdx.form_constants.CALENDAR:b=new rdx.calendar_component(d,f);break;case rdx.form_constants.TIME:b=new rdx.time_component(d,f);break;case rdx.form_constants.TIME_SLIDER:b=new rdx.time_slider(d,f);break;case rdx.form_constants.ENTITY_CHOOSER:b=new rdx.entity_chooser(d,f);break;case rdx.form_constants.REGULAR_EXPRESSION_FIELD:b=new rdx.regex_field(d,f);break;case rdx.form_constants.COMMAND_SPEC_EDITOR:b=new rdx.command_spec_editor(d,f);break;case rdx.form_constants.COLOR_PICKER:b=new rdx.color_picker_component(d,f);break;case rdx.form_constants.SPINNER:b=new rdx.spinner_component(d,f);break;case rdx.form_constants.DRAG_DROP_EDITOR:b=new rdx.drag_drop_editor(d,f);break;case rdx.form_constants.TIME_OR_DAY_CHOOSER:b=new rdx.time_day_chooser(d,f);break;case rdx.form_constants.TOGGLE_COMPONENT:b=new rdx.toggle_component(d,f);break}if(rdx.utils.is_not_defined(b)){throw rdx.i18n.get_string("form_field_invalid_error",{form_type:f.get_key()})}return b};this.get_table_column_editor=function(a,e){switch(a){case rdx.form_constants.TEXT_BOX:return(rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).attr("Input value"));case rdx.form_constants.LIST:var d=rdx.dom_utils.get_element(rdx.form_constants.LIST);if(rdx.utils.is_defined(e)){for(var b=0;b<e.length;b++){d.append($(document.createElement("option")).text(e[b]).attr("title",e[b]))}}return(d.attr("aria-label","Select value"));case rdx.form_constants.CHECK_BOX:return(rdx.dom_utils.get_element(rdx.form_constants.CHECK_BOX).attr("aria-label","Select option"));case rdx.form_constants.RADIO_BUTTON:return(rdx.dom_utils.get_element(rdx.form_constants.RADIO_BUTTON).attr("aria-label","Choose value"));default:return(rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).attr("aria-label","Input value"))}};this._register_key_press_event_for_form_submit=function(b,a){b.add_event_handler(rdx.events.KEYDOWN,new rdx.callback(function(e,d){var f=e.keyCode;if(rdx.keycodes.ENTER==f&&rdx.utils.is_defined(d)){if(!(d.get_properties().ignore_key_press_events)){e.stopPropagation();rdx.utils.prevent_default(e);if(rdx.utils.is_defined(d.get_keyboard_handler_callback())){d.get_keyboard_handler_callback().call_back();return}d.get_form().handle_submit()}}},[a]))}};rdx.editable_combobox=function(d,b){this._parent=typeof(d)=="string"?$("#"+d):d;this._DEFAULT_PROPERTIES={default_option_value:null,class_names:"editable_combobox",mandatory:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._field=b;var e=$("<label>").append($('<span class="hide">New<span>'));this._textfield_row=$("<div>").append(e);this._combobox_row=$("<div>");this._element=$("<div>").addClass(this._properties.class_names);this._element.append(this._combobox_row).append(this._textfield_row);this._textfield_row.hide();this._textfield=rdx.component_helper.get_component(rdx.form_constants.TEXT_BOX,e,b);var a=$.extend({},b);a.get_properties().size=1;this._combobox=rdx.component_helper.get_component(rdx.form_constants.LIST,this._combobox_row,a);this._default_option_value=(rdx.utils.is_not_defined(this._properties.default_option_value))?rdx.i18n.get_string("rdx.editablecombobox_default"):rdx.i18n.get_string(this._properties.default_option_value)};rdx.editable_combobox.prototype.render=function(){this._textfield.render();this._combobox.render();this._combobox.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(a,d){var b=d._combobox.get_data();var e=d._combobox.get_items_count();if(b==d._default_option_value){if(e>1){d._combobox_row.show()}else{d._combobox_row.hide()}d._textfield_row.show()}else{d._combobox_row.show();d._textfield_row.hide()}},[this]));this._parent.append(this._element);this.add_data_items();return this};rdx.editable_combobox.prototype.add_data_items=function(g,f){if(rdx.utils.is_not_defined(g)){g=new Array();var e=this._field.get_formatter();if(rdx.utils.is_defined(e)){var a=e.get_map_keys();for(var d=0,b=a.length;d<b;d++){g.push(a[d])}}}if(g.length>0){this._combobox_row.show();this._textfield_row.hide()}else{this._combobox_row.hide();this._textfield_row.show()}g.splice(0,0,this._default_option_value);if(rdx.utils.is_defined(f)&&f==true){this._combobox.add_data_items(g,false)}this._combobox.add_data_items(g,f)};rdx.editable_combobox.prototype.add_event_handler=function(a,b){this._combobox.add_event_handler(a,b);this._textfield.add_event_handler(a,b)};rdx.editable_combobox.prototype.set_data=function(b){this._combobox.set_data(b);var a=this._combobox.get_data();if(a==this._default_option_value||rdx.utils.is_empty(a)){this._textfield.set_data(b);this._combobox.set_data(this._default_option_value)}};rdx.editable_combobox.prototype.get_data=function(){var a=this._textfield.get_data();if(rdx.utils.is_defined(this._field.get_formatter())){this._field.get_formatter().update_input_map_data_items(this._default_option_value,a)}if(this._combobox.get_data()!==this._default_option_value){return this._combobox.get_data()}return a};rdx.editable_combobox.prototype.get_component_type=function(){return rdx.form_constants.EDITABLE_COMBOBOX};rdx.editable_combobox.prototype.get_field=function(){return this._field};rdx.editable_combobox.prototype.get_component=function(){return this._element};rdx.editable_combobox.prototype.get_input_type_element=function(){return this._combobox.get_component()};rdx.editable_combobox.prototype.mask=function(){rdx.mask.mask_component(this._parent,this.get_field().get_key())};rdx.editable_combobox.prototype.unmask=function(){return rdx.mask.unmask_component(this._parent,this.get_field().get_key())};rdx.editable_combobox.prototype.toggle_read_only=function(a){this._combobox.toggle_read_only(a);this._textfield.toggle_read_only(a)};rdx.file_upload_component=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;var d={url:"",method:rdx.ajax_handler_constants.POST,encoding_type:"multipart/form-data",file_component_name:"",resource_name:null,close_upload_window_on_success:true,dialog_mode:false,upload_success_callback:null,upload_error_callback:null,check_for_duplicate:true,custom_validator:null,is_image_validator:false,class_names:"",add_submit_button:false,validate_on_submit:false,mask_on_success:false,file_path:null,remote_dir_path:null,remote_resource:null,filter_filetype:null,read_resource:null,upload_url:null,mkdir_resource:"",download_resource:"",delete_resource:null,pagination:false,search:false,show_dirs:true,local:true,remote:false,default_type:"local",resource_response_callback:null,add_view_name:null,process_filedata_as_base64:false,resource_operations:{upload:false,download:false,view:false,remove:false,create_dir:false,zip:false},direct_upload:false};this._properties=$.extend({},d,b.get_properties());this._component=new rdx.file_upload(this._properties);this._element=this._component;this._view_link_map={};this._set_properties();this._link_properties=null};rdx.file_upload_component.prototype.render=function(){this._component.render();if(rdx.utils.is_defined(this._field.get_add_view_name())){this._link_properties={add_model_change_listener:false,success_callback:new rdx.callback(this,function(d,b){this._component.set_data(b.filename)}),add_model_method:rdx.model_constants.POST};var a=rdx.form_utils.add_form_field_link(this,this._component.get_component(),this._field,this._view_link_map,this._link_properties);this._parent.append(a)}else{this._parent.append(this._component.get_component())}return this};rdx.file_upload_component.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._element,this._field);if(this._field.is_read_only()){this._element.attr("readonly","true");this._element.addClass("form_field_disabled")}};rdx.file_upload_component.prototype.add_event_handler=function(b,d){var a=this._component.get_text_element();a.bind(b,{ns_callback:d},function(e){e.data.ns_callback.call_back([e])})};rdx.file_upload_component.prototype.set_data=function(a){this._component.set_data(a)};rdx.file_upload_component.prototype.validate=function(){if(this._component.is_file_reader()){var g=this._component.get_file_content();if(rdx.utils.is_empty(g)&&this._properties.process_filedata_as_base64==false){if(this._field.is_mandatory()){return rdx.i18n.get_string("rdx.file_upload_mandatory_error",{field_label:this._field.get_label()})}}return null}var f=this._component.get_file_name();if(rdx.utils.is_empty(f)){if(this._field.is_mandatory()){return rdx.i18n.get_string("rdx.file_upload_mandatory_error",{field_label:this._field.get_label()})}else{return null}}else{var b=this._properties.filter_filetype;if(rdx.utils.is_defined(b)){var e=false;if(rdx.utils.is_array(b)){for(var a=0;a<b.length;a++){if((new RegExp(b[a]+"$")).test(f)){e=true;break}}}else{if((new RegExp(b+"$")).test(f)){e=true}}if(!e){return rdx.i18n.get_string("rdx.file_upoload_invalid_filetype",{file_name:f})}}}var d=null;if(rdx.utils.is_defined(this._component.get_custom_validator())){if(this._component._is_image_validator()){d=this._component.get_custom_validator().call_back([this._component.get_data(),this._component.get_img_element()])}else{d=this._component.get_custom_validator().call_back([this._component.get_data()])}}return d};rdx.file_upload_component.prototype.submit=function(b,a){this._component.submit(b,a)};rdx.file_upload_component.prototype.get_data=function(){return this._component.get_data()};rdx.file_upload_component.prototype.is_local_selected=function(){return this._component.is_local_selected()};rdx.file_upload_component.prototype.is_file_reader=function(){return this._component.is_file_reader()};rdx.file_upload_component.prototype.get_component_type=function(){return rdx.form_constants.FILE_UPLOAD};rdx.file_upload_component.prototype.get_field=function(){return this._field};rdx.file_upload_component.prototype.get_component=function(){return this._element.get_component()};rdx.file_upload_component.prototype.get_element=function(){return this._element};rdx.file_upload_component.prototype.toggle_read_only=function(a){};rdx.file_upload_component.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._component}if(a){b.show()}else{b.hide()}};rdx.file_upload_component.prototype.set_tooltip=function(){this._component.set_tooltip(this._field.get_tooltip())};rdx.file_upload_component.prototype.get_link_properties=function(){return this._link_properties};rdx.file_upload_component.prototype.focus=function(){this._component.get_text_element().focus()};rdx.file_upload_component.prototype.is_direct_upload=function(){return this._properties.direct_upload};rdx.file_browser_component=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._element=null;this._component=new rdx.file_browser(a,b.get_properties(),null)};rdx.file_browser_component.prototype.render=function(){this._component.render(true);this._element=this._component.get_container();this._parent.append(this._element);this._set_properties();return this};rdx.file_browser_component.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._parent,this._field);rdx.form_utils.set_basic_field_attributes(this._element,this._field)};rdx.file_browser_component.prototype.set_data=function(a){};rdx.file_browser_component.prototype.get_data=function(){};rdx.file_browser_component.prototype.get_component_type=function(){return rdx.form_constants.FILE_BROWSER};rdx.file_browser_component.prototype.get_field=function(){return this._field};rdx.file_browser_component.prototype.get_component=function(){return this._component};rdx.command_shell_executer=function(a,b){var d={prompt:">",class_names:"",prepend_command:"",show_command_box:true,download_content_url:null,download_content_file_name:null,target:"shell",word_wrap:false,use_websocket:false,command_list:[],finish_handler_callback:null};this._parent=typeof(a)=="string"?$("#"+a):a;this._properties=$.extend({},d,b.get_properties());this._command_shell=$("<div>").addClass("terminal");this._input_area=$("<div>").addClass("terminal-input-area");this._command_shell_component=$("<div>").addClass("terminal-component").addClass("terminal_remove_word_wrap");this._command_shell.addClass(this._properties.class_names);this._command=null;this._original_command=null;this._display_command=null;this._relay_data=null;this._output=null;this._wrap_output=null;this._prompt=null;this._element=null;this._button=null;this._ws_check_matches=false;this._ws_matches=[];this._app_data=null;this._process_killed=false};rdx.command_shell_executer.prototype.render=function(){var b={key:"command-box",width:"250px",mandatory:true,properties:{auto_complete:true}};var e=new rdx.form_field(b);this._output=$("<div>").addClass("terminal-output");this._command=$("<div>").addClass("terminal-command");if(!this._properties.use_websocket){this._prompt=$("<div>").addClass("terminal-prompt");this._prompt.text(this.get_prompt());this._command.append(this._prompt)}this._command_shell.append(this._output,this._command);if(this._properties.word_wrap){this._wrap_container=$("<div>").addClass("terminal_checkbox_margin");this._wrap_output=rdx.dom_utils.get_element(rdx.form_constants.CHECK_BOX);this._wrap=$("<span>");this._wrap.text(rdx.i18n.get_string("rdx.word_wrap"));this._wrap_container.append(this._wrap_output);this._wrap_container.append(this._wrap);this._command_shell_component.append(this._wrap_container);this._wrap_output.bind(rdx.events.CHANGE,{_this:this},function(f){if(f.target.checked){f.data._this._command_shell_component.addClass("terminal-word-wrap").removeClass("terminal_remove_word_wrap")}else{f.data._this._command_shell_component.removeClass("terminal-word-wrap").addClass("terminal_remove_word_wrap")}})}this._button=$("<button>").text(rdx.i18n.get_string("rdx.dashboard_finder_button"));this._input_area.append($("<label>").text(rdx.i18n.get_string("rdx.command_shell_executer_command")));this._element=new rdx.dropdown_menu(this._input_area,e);this._element.render();if(this._element.get_items_count()<1){$(this._element._dropdown_options._table).find("td.column_three").hide();this._element._dropdown_options._options.readOnly=true}this._input_area.append(this._button);if(rdx.utils.is_defined(this._properties.download_content_url)&&this._properties.download_content_url.length>0){var d={url:this._properties.download_content_url,filename:this._properties.download_content_file_name};var a=rdx.form_utils.add_save_as_link(this._command_shell,this._command_shell_component,d,true)}else{this._command_shell_component.append(this._command_shell)}if(this._properties.show_command_box){this._command_shell_component.append(this._input_area)}this._button.click({parent:this},function(g){var f=g.data.parent;var h=f.get_command();if(rdx.utils.is_empty(h)){rdx.message_box.error(rdx.i18n.get_string("rdx.cmd_empty_error"),null,"Error",null)}else{if(h=="clear"){f._output.html("")}else{f.process_command();f._element.add_item(h,true);f.update_options(h);if(f._element.get_items_count()==1){$(f._element._dropdown_options._table).find("td.column_three").show();f._element._dropdown_options._options.readOnly=false}}}f._element._dropdown_options._input.val("").focus()});this._element._dropdown_options._input.bind(rdx.events.KEYDOWN,{parent:this},function(h){var g=(h.keyCode?h.keyCode:h.which);if(g==rdx.keycodes.ENTER){var f=h.data.parent;var m=f.get_command();if(rdx.utils.is_empty(m)){rdx.message_box.error(rdx.i18n.get_string("rdx.cmd_empty_error"),null,"Error",null)}else{if(m=="clear"){f._output.html("")}else{f.process_command();f._element.add_item(m,true);f.update_options(m);if(f._element.get_items_count()==1){$(f._element._dropdown_options._table).find("td.column_three").show();f._element._dropdown_options._options.readOnly=false}}}f._element._dropdown_options._input.val("").focus()}});if(this._properties.use_websocket){rdx.websocket.set_caller_data(this);if(rdx.websocket.is_connected()){rdx.websocket.enable_reconnect();rdx.websocket.disconnect(true)}else{this.websocket_connect()}}this._parent.append(this._command_shell_component);return this};rdx.command_shell_executer.prototype.websocket_connect=function(){rdx.websocket.connect("wss://"+window.location.host+"/ws/");rdx.websocket.add_event_listener("message",this.websocket_onmessage)};rdx.command_shell_executer.prototype.websocket_onmessage=function(event,data){if(event.type==="message"){shell_executer=rdx.websocket.get_caller_data();var jsonstr=null;if(data){jsonstr=data}else{jsonstr=eval("("+event.data+")")}if(jsonstr.type==="cmd"){if(rdx.utils.is_not_empty(shell_executer._original_command)&&rdx.utils.is_not_empty(shell_executer._display_command)&&jsonstr.data.indexOf(shell_executer._original_command)>-1){jsonstr.data=jsonstr.data.replace(shell_executer._original_command,shell_executer._display_command)}if(rdx.utils.is_not_empty(shell_executer._relay_data)&&rdx.utils.trim(jsonstr.data)==shell_executer._relay_data){jsonstr.data="<font title='Progress Indicator' color='#45e80c'>"+shell_executer._relay_data+"</font>"}shell_executer._output.append('<span class="terminal-command-output">'+rdx.utils.trim_left(jsonstr.data)+"</span>");shell_executer._command_shell.scrollTop(shell_executer._output.height());if(shell_executer._ws_check_matches){var matches=shell_executer._ws_matches;for(var index in matches){var match_obj=matches[index];if(rdx.utils.is_defined(match_obj.pattern)&&match_obj.pattern.test(jsonstr.data)||rdx.utils.is_defined(match_obj.string)&&(jsonstr.data.indexOf(match_obj.string)>-1)){match_obj.callback.call_back([{output:jsonstr.data,app_data:this._app_data}])}}}}else{if(jsonstr.type==="ctrl"){if(jsonstr.status==="error"){var error_callback=new rdx.callback();if(jsonstr.data==="Session expired or cancelled. Please login again"){error_callback=new rdx.callback(rdx.utils,function(){rdx.utils.do_logout(true)})}rdx.message_box.error(jsonstr.data,error_callback)}else{if(jsonstr.status==="killed"){return}}}}if(jsonstr.status==="running"){rdx.websocket.send_relay(shell_executer._relay_data)}else{shell_executer._ws_check_matches=false;shell_executer._ws_matches=[];var cmd_list=shell_executer._properties.command_list;if(cmd_list.length>0){cmd_obj=cmd_list.shift();if(rdx.utils.is_defined(cmd_obj.matches)){shell_executer._ws_check_matches=true;shell_executer._ws_matches=cmd_obj.matches}if(rdx.utils.is_not_empty(cmd_obj.display_command)){shell_executer._display_command=cmd_obj.display_command;shell_executer._original_command=cmd_obj.command}if(rdx.utils.is_not_empty(cmd_obj.relay_data)){shell_executer._relay_data=cmd_obj.relay_data}rdx.websocket.send_cmd_from_obj(cmd_obj)}else{if(rdx.utils.is_defined(shell_executer._properties.finish_handler_callback)&&!shell_executer._process_killed){shell_executer._properties.finish_handler_callback.call_back([shell_executer._app_data])}if(rdx.utils.is_defined(shell_executer._executer_utility)){shell_executer._executer_utility.toggle_button()}}}}};rdx.command_shell_executer.prototype.get_component=function(){return this._command_shell};rdx.command_shell_executer.prototype.get_prompt=function(){return this._properties.prompt};rdx.command_shell_executer.prototype.set_prompt=function(a){this._properties.prompt=a};rdx.command_shell_executer.prototype.get_command=function(){return this._element.get_data()};rdx.command_shell_executer.prototype.process_command=function(a){if(this._properties.use_websocket){this.process_command_for_websocket(a)}else{this.process_one_off_command(a)}};rdx.command_shell_executer.prototype.process_command_for_websocket=function(b){var a=Array();if(rdx.utils.is_defined(b)){a=b}else{var e=this._properties.prepend_command+" "+this.get_command();e=e.trim();a=[{command:e,check_status:"true"}]}if(rdx.websocket.is_connected()){for(var d=0;d<a.length;d++){rdx.websocket.send_cmd_from_obj(a[d])}}else{if(!rdx.websocket.is_connecting()){rdx.websocket.set_caller_data(this);this.websocket_connect()}this._ws_check_matches=false;this._ws_matches=[];this._properties.command_list=a}};rdx.command_shell_executer.prototype.process_one_off_command=function(b){var d=this._properties.prepend_command+" "+(rdx.utils.is_defined(b)?b:this.get_command());d=d.trim();var f=(rdx.utils.is_defined(b))?">"+b:this.get_prompt()+this.get_command();var a=new rdx.model_executor_service(new rdx.callback(function(g,h){data=g.get_collated_response();if(rdx.utils.is_array(data)){data=data[0]}switch(data.remote_shell["output"]){case"[CLEAR]":h._output.html("");break;case"[CLOSED]":h._output.html("");break;default:h._output.append('<pre class="terminal-command-prompt">'+data.remote_shell["prompt"]+'</pre><pre class="terminal-command-output">'+data.remote_shell["output"]+"</pre>");h._command_shell.scrollTop(h._output.height())}},[this]));var e={command:d,prompt:f,target:this.get_target()};a.add("post",rdx.utils.get_resource("remote_shell"),e,null,null,null);a.execute()};rdx.command_shell_executer.prototype.update_options=function(a){if($(this._element._list).children("[title = '"+a+"']").length>1){$($(this._element._list).children("[title = '"+a+"']")[0]).remove()}$(this._element._dropdown_options._data_container).prepend($("<li>").text(a).attr("id",$(this._element._dropdown_options._input).attr("id")+"_"+a));this._element._dropdown_options.data_get_callback.call(this._element._dropdown_options._this,this._element._dropdown_options._input.attr("id"),this._element._dropdown_options._table,this._element._dropdown_options._options,this._element._dropdown_options._data_container);ul=$(this._element._dropdown_options._data_container);ul.children().each(function(d,b){ul.prepend(b)})};rdx.command_shell_executer.prototype.set_data=function(a){return this._element.set_data(a)};rdx.command_shell_executer.prototype.get_data=function(){return $.trim(this._element.get_data())};rdx.command_shell_executer.prototype.get_component_type=function(){return rdx.form_constants.COMMAND_SHELL_EXECUTER};rdx.command_shell_executer.prototype.get_component=function(){return this._command_shell};rdx.command_shell_executer.prototype.get_target=function(){return this._properties.target};rdx.command_shell_executer.prototype.attach_utility=function(a){this._executer_utility=a};rdx.command_spec_editor=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={show_regex_editor:false};this._component=null;this._properties=$.extend(true,this._DEFAULT_PROPERTIES,b.get_properties());this.EXCLUSION="(?!(?=create|import|sign|unsign).*|\\S+\\s+(?=system|audit|network).*|\\S+\\s+\\S+\\s+(?=acl6?|global|certkey|crl|fipsKey|wrapkey).*)";this.TWO_WORD_CMDs={Server:{name:"Server",value:true},Service:{name:"Service",value:true},Servicegroup:{name:"ServiceGroup",value:true}}};rdx.command_spec_editor.prototype.render=function(){this._component=$("<div>").addClass("command_spec_editor");this._render_textarea_and_link();if(this._field.is_read_only()){this.toggle_read_only(false)}this._parent.append(this._component);return this};rdx.command_spec_editor.prototype._render_textarea_and_link=function(){var d=$.extend({},{},this._field._properties);d.input_type=rdx.form_constants.TEXT_AREA;var b=new rdx.form_field(d);this._text_area=new rdx.text_area(this._component,b).render();this._text_area.get_component().attr("spellcheck",false);this._text_area.get_component().addClass("border_box");if(rdx.utils.is_defined(d.height)){this._component.height(d.height+25)}var a=$("<div>");this._component.append(a);var e=new rdx.regex_field(a,new rdx.form_field({properties:{standalone:false}}));this._commandspec_editor_link_div=$("<a>").addClass("rdx_right pointer_cursor").append(rdx.i18n.get_string("rdx.cmd_spec_editor"));a.append(this._commandspec_editor_link_div);if(this._properties.show_regex_editor===true){this._regex_editor_link_div=$("<a>").addClass("rdx_right pointer_cursor links_separator").append(rdx.i18n.get_string("rdx.regex_editor_label"));a.append(this._regex_editor_link_div)}this._commandspec_editor_link_div.bind(rdx.events.CLICK,{commandspec:this},function(f){f.data.commandspec._show_command_spec_editor()});this._regex_editor_link_div.bind(rdx.events.CLICK,{regex:e,commandspec_textarea:this._text_area},function(f){f.data.regex.show_regex_editor(rdx.events.CLICK,f.data.commandspec_textarea)})};rdx.command_spec_editor.prototype._show_command_spec_editor=function(){var b=$("<div>").addClass("command_spec_editor-container");this._create_command_spec_editor(b);var a=this;if(!rdx.page.is_slider_visible()){slider_container=rdx.page.show_slider({});slider_container.show()}this._command_spec_editor_container_div=rdx.page.get_slider_crumb().crumb.add_container(rdx.i18n.get_string("rdx.cmd_spec_editor"),b);b.parent().addClass("command_spec_editor_container_parent")};rdx.command_spec_editor.prototype._create_command_spec_editor=function(q){q.empty();this._radio_btn_div=$("<div>").addClass("radio_buttons_div");var s=new rdx.form_field({formatter:{map:["Simple","Advanced"]},key:"command_spec_editor_container"+Math.random(),input_type:rdx.form_constants.RADIO_GROUP});this._radio_component=rdx.component_helper.get_component(rdx.form_constants.RADIO_GROUP,this._radio_btn_div,s).render();q.append(this._radio_btn_div);var F=$("<div>").addClass("simple-tab-container");var B=$("<table>").addClass("operations").append($("<tbody>"));var a=$("<tr>");var m=$("<td>").addClass("operations_padding_heading").text("Operations*");var g=$("<td>").addClass("operations_padding");this._simple_add_modify=new rdx.check_box(g,new rdx.form_field({label:rdx.i18n.get_string("rdx.add_modify")})).render();this._simple_add_modify.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression,[]));g.append("Add/Modify");var f=$("<td>").addClass("operations_padding");this._simple_remove=new rdx.check_box(f,new rdx.form_field({label:rdx.i18n.get_string("rdx.button_remove")})).render();this._simple_remove.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression,[]));f.append("Remove");var e=$("<td>").addClass("operations_padding");this._simple_show=new rdx.check_box(e,new rdx.form_field({label:rdx.i18n.get_string("rdx.show"),value:true,read_only:true})).render();this._simple_show.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression,[]));e.append("Show");a.append(m).append(g).append(f).append(e);B.append(a);var D=this._get_simple_entity_groups();var o=$("<div>").addClass("simple_entity_group_container").append($("<div>").text(rdx.i18n.get_string("rdx.entity_groups")));this._simple_entitygroup_list=new rdx.list(o,new rdx.form_field({mandatory:true,properties:{size:7},formatter:{map:D}})).render();this._simple_entitygroup_list.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression,[]));var b=$("<div>").addClass("exclude_system_cmd");this._exclude_system_commands_chkbox=new rdx.check_box(b,new rdx.form_field({})).render();b.append(rdx.i18n.get_string("rdx.exclude_system_command"));this._exclude_system_commands_chkbox.set_data(false);this._exclude_system_commands_chkbox.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression,[]));F.append(B).append(o).append(b);q.append(F);var d=this._get_advanced_entity_groups();var h=$("<div>").addClass("advanced-tab-container");var u=$("<div>").addClass("advanced_entity_group_container").append($("<div>").text(rdx.i18n.get_string("rdx.entity_groups")));this._advanced_entitygroup_list=new rdx.list(u,new rdx.form_field({mandatory:true,properties:{size:1},formatter:{map:d}})).render();this._advanced_entitygroup_list.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(H,G){var I=G._get_advanced_entities(G._advanced_entitygroup_list.get_data());G._advanced_entity_list.remove_items(false,false);G._advanced_entity_list.add_items(I);G._operations_list.remove_items(false,false);G._cmd_preview_textarea.set_data()},[this]));var w=$("<div>").addClass("advanced_entity_container");var E=$("<table>").addClass("operations").append($("<tbody>"));var A=$("<tr>");A.append($("<td>").text("Entity*")).append($("<td>").text(rdx.i18n.get_string("rdx.operations")));var v=$("<td>").addClass("entity-operations-padding");this._advanced_entity_list=new rdx.list(v,new rdx.form_field({mandatory:true,properties:{size:7},formatter:{map:[]}})).render();this._advanced_entity_list.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(J,G){var I=G._advanced_entitygroup_list.get_data();var K=G._advanced_entity_list.get_data();var H=G._get_advanced_entities_operations(I,K);G._operations_list.remove_items(false,false);G._operations_list.add_items(H);G._create_expression()},[this]));var t=$("<td>");this._operations_list=new rdx.list(t,new rdx.form_field({mandatory:true,properties:{size:7},formatter:{map:[]}})).render();this._operations_list.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._create_expression,[]));w.append(E.append(A).append($("<tr>").append(v).append(t)));h.append(u).append(w);q.append(h);var n=$("<div>").addClass("parameter_div").append($("<div>").append(rdx.i18n.get_string("rdx.parameter_regex")));this._parameter=new rdx.text_box(n,new rdx.form_field({})).render();this._parameter.add_event_handler(rdx.events.KEYUP,new rdx.callback(this,this._create_expression,[]));var C=$("<div>").addClass("cmd_preview").text(rdx.i18n.get_string("rdx.command_preview"));this._cmd_preview_textarea=new rdx.text_area(C,new rdx.form_field({read_only:true})).render();this._advanced_entitygroup_list.set_data(d[0]);var z=$("<div>").addClass("form_buttons command_spec_buttons");var p=new rdx.button_bar(z,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.form_add_button_label"),blue_button_click_handler_callback:new rdx.callback(this,this._create_expression,[true,q]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.cancel_button.label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_close_button,[q])}})).render();this._simple_show.set_data(true);q.append(n).append(C).append(z);this._radio_component.add_event_handler(rdx.events.CHANGE,new rdx.callback(function(I,G,J,H){if("Simple"==rdx.utils.trim(G._radio_component.get_data())){H.hide();J.show()}else{H.show();J.hide()}G._cmd_preview_textarea.set_data("")},[this,F,h]));this._radio_component.set_data("Simple")};rdx.command_spec_editor.prototype._get_simple_entity_groups=function(){var a=new Array();for(var b=0;b<neo_rba_commandset.length;b++){if($.inArray(neo_rba_commandset[b]["entitygroup"],a)==-1&&neo_rba_commandset[b]["entitygroup"].charAt(0)!="<"){a.push(neo_rba_commandset[b]["entitygroup"])}}for(var b=0;b<a.length;b++){if(rdx.utils.is_defined(neo_rba_entitygroup_mapping[a[b]])){a[b]=neo_rba_entitygroup_mapping[a[b]]}}a.push("Server");a.push("Service");a.push("ServiceGroup");a=this._sort_array(a);return a};rdx.command_spec_editor.prototype._get_advanced_entity_groups=function(){var a=new Array();for(var b=0;b<neo_rba_commandset.length;b++){if($.inArray(neo_rba_commandset[b]["entitygroup"],a)==-1){a.push(neo_rba_commandset[b]["entitygroup"])}}for(var b=0;b<a.length;b++){if(rdx.utils.is_defined(neo_rba_entitygroup_mapping[a[b]])){a[b]=neo_rba_entitygroup_mapping[a[b]]}}a.push("<miscellaneous>");a=this._sort_array(a);return a};rdx.command_spec_editor.prototype._get_advanced_entities=function(d){var f=new Array();for(var b in neo_rba_entitygroup_mapping){if(neo_rba_entitygroup_mapping[b]==d){d=b}}for(var e=0;e<neo_rba_commandset.length;e++){if(neo_rba_commandset[e]["entitygroup"]==d&&$.inArray(neo_rba_commandset[e]["entity"],f)==-1){var a="";if(neo_rba_commandset[e]["entity"].indexOf("<deprecated>")!=-1&&neo_rba_commandset[e]["entity"].indexOf("<deprecated>")==neo_rba_commandset[e]["entity"].length-"<deprecated>".length){a=neo_rba_commandset[e]["entity"].substring(0,neo_rba_commandset[e]["entity"].indexOf("<deprecated>"))}else{a=neo_rba_commandset[e]["entity"]}if($.trim(a)==""){a="<no entity>"}if(d=="router"&&a=="<no entity>"){continue}f.push(a)}}if(d=="<miscellaneous>"){f.push("<no entity>")}f=this._sort_array(f);return f};rdx.command_spec_editor.prototype._get_advanced_entities_operations=function(g,m){var f=new Array();for(var e in neo_rba_entitygroup_mapping){if(neo_rba_entitygroup_mapping[e]==g){g=e}}for(var d=0;d<m.length;d++){for(var h=0;h<neo_rba_commandset.length;h++){if(neo_rba_commandset[h]["entitygroup"]==g){if(m[d]=="<no entity>"){m[d]=""}if((m[d]==neo_rba_commandset[h]["entity"]&&neo_rba_commandset[h]["entity"].indexOf("<deprecated>")==-1)||(neo_rba_commandset[h]["entity"].indexOf("<deprecated>")!=-1&&neo_rba_commandset[h]["entity"].substring(0,neo_rba_commandset[h]["entity"].indexOf("<deprecated>"))==m[d])){var b=$.extend(true,[],neo_rba_commandset[h]["operations"]);if(neo_rba_commandset[h]["entity"].indexOf("<deprecated>")!=-1&&neo_rba_commandset[h]["entity"].indexOf("<deprecated>")==neo_rba_commandset[h]["entity"].length-"<deprecated>".length){for(var a=0;a<b.length;a++){b[a]=b[a]+"<deprecated>"}}for(var a=0;a<b.length;a++){if($.inArray(b[a],f)==-1){if(b[a]=="reboot"||b[a]=="shutdown"){continue}f.push(b[a])}}}}}if(g=="<utility>"&&m[d]==""){f.push("sftp")}if(g=="router"&&m[d]=="<no entity>"){continue}if(g=="<miscellaneous>"&&m[d]=="<no entity>"){f.push("batch");f.push("reboot");f.push("shutdown");f.push("vtysh");f.push("source")}}f=this._sort_array(f);return f};rdx.command_spec_editor.prototype._create_expression=function(b,a,d){if(rdx.utils.trim(this._radio_component.get_data())=="Simple"){this._create_simple_expression(b,a,d)}else{this._create_advanced_expression(b,a,d)}};rdx.command_spec_editor.prototype._create_simple_expression=function(a,e,s){if(this._simple_entitygroup_list.get_data().length<=0){if(rdx.utils.is_defined(e)&&e==true){rdx.message_box.error(rdx.i18n.get_string("rdx.cmd_spec_editor_entitygroup_error"),null,rdx.i18n.get_string("neo.error_message_title"),null)}return}if(!this._simple_add_modify.get_data()&&!this._simple_remove.get_data()&&!this._simple_show.get_data()){if(rdx.utils.is_defined(e)&&e==true){rdx.message_box.error(rdx.i18n.get_string("rdx.cmd_spec_editor_operation_error"),null,rdx.i18n.get_string("neo.error_message_title"),null)}return}var p="(^";if(this._exclude_system_commands_chkbox.get_data()==true){p+=this.EXCLUSION}var d="";if(this._simple_add_modify.get_data()==true&&this._simple_remove.get_data()==true){d="\\S+"}else{if(this._simple_add_modify.get_data()==true){d="(?!rm)\\S+"}else{if(this._simple_remove.get_data()==true){d="(show|rm)"}else{d="show"}}}p+=d;var t="";var n="";if(this._simple_entitygroup_list.get_data().length==this._get_simple_entity_groups().length){t="\\S+";var o="";for(var q in this.TWO_WORD_CMDs){o=this.TWO_WORD_CMDs[q]["name"]+"|"}o=o.substring(1);n=this._trim_regex(o)}else{var m="";var b="";var f=this._simple_entitygroup_list.get_data();for(var h=0;h<f.length;h++){var g=null;for(var q in neo_rba_entitygroup_mapping){if(neo_rba_entitygroup_mapping[q]==f[h]){g=q}}if(rdx.utils.is_not_defined(g)){g=f[h]}if(g=="Server"||g=="Service"){b+=g+"|";continue}else{if(g=="ServiceGroup"){b+="Servicegroup|";continue}}m+=g+"|"}t=this._trim_regex(m);n=this._trim_regex(b)}if(t.length>0){t+="\\s+\\S+"}if(t.length>0&&n.length>0){p+="\\s+("+t+"|"+n+")"}else{p+="\\s+"+t+n}p=this._get_final_regex_with_params(p);this._cmd_preview_textarea.set_data(p);if(rdx.utils.is_defined(e)&&e==true){this._append_data_in_text_area(p);this._handle_close_button(a,s)}};rdx.command_spec_editor.prototype._create_advanced_expression=function(t,q,h){if(this._advanced_entity_list.get_data().length<=0){if(rdx.utils.is_defined(q)&&q==true){rdx.message_box.error(rdx.i18n.get_string("rdx.cmd_spec_editor_entity_error"),null,rdx.i18n.get_string("neo.error_message_title"),null)}return}if(this._operations_list.get_data().length<=0){if(rdx.utils.is_defined(q)&&q==true){rdx.message_box.error(rdx.i18n.get_string("rdx.cmd_spec_editor_operation_error"),null,rdx.i18n.get_string("neo.error_message_title"),null)}return}var w="";var a="";if(this._advanced_entity_list.get_selected_index()==0&&this._advanced_entity_list.get_items(false)[0]=="<no entity>"){var v=this._get_advanced_entities_operations(this._advanced_entitygroup_list.get_data(),["<no entity>"]);var f=this._operations_list.get_data();var o="";for(var u=0;u<f.length;u++){var p=f[u];for(var s=0;s<v.length;s++){var g=v[s];if(g==p){if(g=="sftp"){g="sftp-server"}w+=o+g;o="|";break}}}if(w.length>0){if(w.indexOf("|")>0){w="("+w+")"}if(this._get_selected_advanced_entity_group().length<=0){w="(^"+w}else{w="(^"+w+"\\s+"+this._get_selected_advanced_entity_group()}w=this._get_final_regex_with_params(w);if(this._advanced_entity_list.get_data().length==1){a=w;this._cmd_preview_textarea.set_data(a);if(rdx.utils.is_defined(q)&&q==true){this._append_data_in_text_area(a);h.remove()}return}else{w+="|"}}}var e="(^";var d="";if(this._operations_list.get_data().length==this._operations_list.get_items(false).length&&this._operations_list.get_items(false).length>1){d="\\S+";e+=d}else{if(this._operations_list.get_items(false).length>0){var f=this._operations_list.get_data();for(var u=0;u<f.length;u++){var p=f[u];if(p.indexOf("<deprecated>")!=-1){p=p.substring(0,p.length-"<deprecated>".length)}d+=p+"|"}e+=this._trim_regex(d)}}var b=this._advanced_entitygroup_list.get_data();for(var z in neo_rba_entitygroup_mapping){if(neo_rba_entitygroup_mapping[z]==b){b=z}}if(this._get_selected_advanced_entity_group().length>0){e+="\\s+"+b}if(this._advanced_entity_list.get_data().length==this._advanced_entity_list.get_items(false).length&&this._get_selected_advanced_entity_group().length>0){e+="\\s+\\S+"}else{var m="";var n=this._advanced_entity_list.get_data();for(var u=0;u<n.length;u++){var p=n[u];p=p.replace(".","\\.");if(n[u]=="<no entity>"){p="";if(u+1!=n.length){continue}}m+=p+"|"}e+=((d.length>0)?"\\s+":"")+this._trim_regex(m)}a=w+this._get_final_regex_with_params(e);this._cmd_preview_textarea.set_data(a);if(rdx.utils.is_defined(q)&&q==true){this._append_data_in_text_area(a);this._handle_close_button(t,h)}};rdx.command_spec_editor.prototype.get_value=function(){var a=this._parameter.get_data().trim();if(a.length<=0){return".*)"}else{return"\\s+"+a+".*)"}};rdx.command_spec_editor.prototype._trim_regex=function(a){if(a.length<=0){return a}if(a.charAt(a.length-1)=="|"){a=a.substring(0,a.length-1)}if(a.indexOf("|")>0){return"("+a+")"}else{return a}};rdx.command_spec_editor.prototype._get_final_regex_with_params=function(a){var b=this._parameter.get_data().trim();if(b.length<=0){a=a+")|"+a+"\\s+.*)"}else{a+="\\s+"+b+".*)"}return a};rdx.command_spec_editor.prototype._get_selected_advanced_entity_group=function(){var b=this._advanced_entitygroup_list.get_data();for(var a in neo_rba_entitygroup_mapping){if(neo_rba_entitygroup_mapping[a]==b){b=a}}if(b.charAt(0)=="<"&&b.charAt(b.length-1)==">"){return""}else{return b}};rdx.command_spec_editor.prototype._append_data_in_text_area=function(a){var b=$.trim(this._text_area.get_data());if(b.length>0&&!(b.charAt(0)=="("&&b.charAt(b.length-1)==")")){b="("+b+")";b+="|"+a;this._text_area.set_data(b)}else{if(b.length>0){this._text_area.set_data(this._text_area.get_data()+"|")}this._text_area.set_data(this._text_area.get_data()+a)}};rdx.command_spec_editor.prototype._sort_array=function(b){if(rdx.utils.is_empty(b)){return[]}var a=b.sort(function(g,f){var e=g.toLowerCase(),d=f.toLowerCase();return e===d?0:e>d?1:-1});return a};rdx.command_spec_editor.prototype._handle_close_button=function(a,b){b.remove();if(rdx.page.get_slider_crumb().get_current_crumb().index<=0){rdx.page.hide_slider()}else{rdx.page.get_slider_crumb().remove_current_crumb()}$(this._command_spec_editor_container_div).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});this._command_spec_editor_container_div.remove()};rdx.command_spec_editor.prototype.add_event_handler=function(a,b){this._component.bind(rdx.events.CHANGE,{rdx_change_handler_callback:b},function(d){d.data.rdx_change_handler_callback.call_back([d])})};rdx.command_spec_editor.prototype.set_data=function(a){this._text_area.set_data(a)};rdx.command_spec_editor.prototype.get_data=function(){return this._text_area.get_data()};rdx.command_spec_editor.prototype.get_component_type=function(){return rdx.form_constants.COMMAND_SPEC_EDITOR};rdx.command_spec_editor.prototype.get_field=function(){return this._field};rdx.command_spec_editor.prototype.get_component=function(){return this._component};rdx.command_spec_editor.prototype.toggle_read_only=function(a){if(a){this._component.removeClass("form_field_disabled")}else{this._component.addClass("form_field_disabled")}};rdx.command_spec_editor.prototype.get_textarea_component=function(){return this._text_area.get_component()};rdx.command_spec_editor.prototype.toggle_show_hide=function(a,b){if(rdx.utils.is_not_defined(b)){b=this._component}if(a){b.show()}else{b.hide()}};rdx.page.add_event_handler(rdx.events.APP_LOADED,new rdx.callback(rdx.utils,rdx.utils._initialize_command_spec_editor));rdx.multiple_field=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;this._DEFAULT_PROPERTIES={type:rdx.form_constants.TEXT_BOX,max_fields:9999,mandatory:false,check_for_duplicates:true,auto_complete:false,auto_complete_data:null,extra_field_dfn:null};this._field_array=new Array();this._extra_field_array=new Array();this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._extra_field_present=rdx.utils.is_defined(this._properties.extra_field_dfn)?true:false;this._properties.mandatory=rdx.utils.is_defined(this._field.is_mandatory())?this._field.is_mandatory():false;this._field_label=this._field.get_label();this._auto_complete_data=rdx.utils.is_array(this._properties.auto_complete_data)?this._properties.auto_complete_data:[]};rdx.multiple_field.prototype.render=function(){this._element=$("<ul>").addClass("multi_field_table");this._add_field_row();this._parent.append(this._element);return this};rdx.multiple_field.prototype._add_field_row=function(){var n=this._element;var e=this;var o=$("<li>").addClass("field-row").appendTo(n);var d=$('<label class="field-cell">').appendTo(o);d.append($('<span class="hide">').text(this._field.get_label()));var g=rdx.component_helper.get_component(this._properties.type,d,this._field).render();this._field_array.push(g);if(this._extra_field_present==true){var h=$('<label class="field-cell">');this._extra_field=new rdx.form_field(this._properties.extra_field_dfn);this._extra_field_label=this._extra_field.get_label();var a=rdx.component_helper.get_component(this._extra_field.get_input_type(),h,this._field).render();this._extra_field_array.push(a);if(rdx.utils.is_defined(this._properties.extra_field_dfn.watermark)){a.set_watermark(rdx.i18n.get_string(this._properties.extra_field_dfn.watermark))}o.append(h);if(this._properties.extra_field_dfn.auto_complete===true){a.get_component().bind(rdx.events.FOCUS,{},function(p){if(rdx.utils.is_not_empty(g.get_data())){var q=new rdx.callback(function(s){rdx.dom_utils.bind_auto_complete_event(a.get_component(),a.get_parent(),s)});e._properties.extra_field_dfn.auto_complete_data.call_back([q,g.get_data()])}})}}var m=$("<button>").addClass("multiple_field_remove").attr("aria-label","Remove").appendTo(o);var b=$("<button>").addClass("multiple_field_add").attr("aria-label","Add new item").appendTo(o);b.bind("click",{multiple_field:this},function(p){if($(this).css("display")!="none"){p.data.multiple_field._add_field_row();p.data.multiple_field._set_button_state()}p.preventDefault()});m.bind("click",{multiple_field:this,row:o,field:g},function(q){if($(this).css("display")!="none"){var p=q.data.multiple_field._field_array.indexOf(q.data.field);q.data.multiple_field._field_array.splice(p,1);q.data.multiple_field._remove_field_row(q.data.row);q.data.multiple_field._set_button_state()}q.preventDefault()});this._set_button_state();if(this._properties.auto_complete===true){if(this._auto_complete_data.length>0){rdx.dom_utils.bind_auto_complete_event(g.get_component(),g.get_parent(),this._auto_complete_data)}else{if(rdx.utils.is_callback(this._properties.auto_complete_data)){var f=new rdx.callback(function(p){e._auto_complete_data=p;rdx.dom_utils.bind_auto_complete_event(g.get_component(),g.get_parent(),p)});this._properties.auto_complete_data.call_back([f])}}}};rdx.multiple_field.prototype._remove_field_row=function(a){a.remove()};rdx.multiple_field.prototype._set_button_state=function(){var d=$(this._element).find(".multiple_field_remove");if(d.length==1){$(d[0]).addClass("hide")}else{for(var a=0;a<d.length;a++){var e=d[a];$(e).removeClass("hide")}}var f=$(this._element).find(".multiple_field_add");for(var a=0;a<f.length;a++){var b=f[a];$(b).addClass("hide");if(a==(f.length-1)){$(b).removeClass("hide")}if(a==(this._properties.max_fields-1)){$(b).addClass("hide")}}};rdx.multiple_field.prototype.set_data=function(e){if(rdx.utils.is_not_defined(e)||!rdx.utils.is_array(e)){return}this._element.empty();if(e.length===0){this._add_field_row();return}this._field_array=new Array();if(this._extra_field_present===false){for(var d=0;d<e.length;d++){this._add_field_row();this._field_array[d].set_data(e[d])}}else{this._extra_field_array=[];for(var d=0;d<e.length;d++){this._add_field_row();var b=0;for(var a in e[d]){if(b===0){this._field_array[d].set_data(e[d][a])}else{this._extra_field_array[d].set_data(e[d][a])}b++}}}};rdx.multiple_field.prototype.get_data=function(){var g=new Array();if(this._extra_field_present==false&&rdx.utils.is_defined(this._field_array)&&this._field_array.length>0){for(var e=0;e<this._field_array.length;e++){var f=this._field_array[e].get_data();if(rdx.utils.is_defined(f)){if(rdx.utils.is_array(f)){g.push(f[0])}if(rdx.utils.is_defined(f)&&rdx.utils.is_array(f)&&rdx.utils.is_object(f[0])){continue}if(rdx.utils.is_string(f)){f=rdx.utils.trim(f)}if(rdx.utils.is_not_empty(f)&&!rdx.utils.is_object(f)){if($.inArray(f,g)==-1||this._properties.check_for_duplicates==false){g.push(f)}else{if(this._properties.check_for_duplicates==true){rdx.message_box.error(rdx.i18n.get_string("rdx.multiple_field_dulplicate_error"),null,rdx.i18n.get_string("rdx.message_box_error"),null);return null}}}else{if(rdx.utils.is_not_empty(f)){g.push(f)}}}}}if(this._extra_field_present==true&&rdx.utils.is_defined(this._field_array)&&this._field_array.length>0&&rdx.utils.is_defined(this._extra_field_array)&&this._extra_field_array.length>0&&this._field_array.length==this._extra_field_array.length){for(var e=0;e<this._field_array.length;e++){var d=this._field_array[e].get_data();var b=this._extra_field_array[e].get_data();if(rdx.utils.is_defined(d)){d=rdx.utils.trim(d);b=rdx.utils.trim(b);if((this._properties.mandatory==true||this._properties.mandatory=="true")&&rdx.utils.is_empty(b)&&this._extra_field_array.length>1){rdx.message_box.error(rdx.i18n.get_string("rdx.multiple_field_mandatory_error",{field_label:this._extra_field_label}),null,rdx.i18n.get_string("neo.error_message_title"),null);return null}else{if(rdx.utils.is_not_empty(d)&&rdx.utils.is_not_empty(b)){var a={};a[(rdx.utils.is_defined(this._field.get_key())&&rdx.utils.trim(this._field.get_key())!="")?this._field.get_key():"property1"]=d;a[(rdx.utils.is_defined(this._extra_field.get_key())&&rdx.utils.trim(this._extra_field.get_key())!="")?this._extra_field.get_key():"property2"]=b;g.push(a)}}}}}return g};rdx.multiple_field.prototype.get_component_type=function(){return rdx.form_constants.MULTIPLE_FIELD};rdx.multiple_field.prototype.get_field=function(){return this._field};rdx.multiple_field.prototype.get_component=function(){return this._element};rdx.button_bar=function(b,d){var a={add_blue_button:false,add_create_and_add_button:false,add_grey_button:false,add_bind_button:false,add_tab_button:false,add_link:false,blue_button_label:"rdx.button_add",blue_button_tooltip:null,grey_button_label:"rdx.button_remove",grey_button_tooltip:null,bind_button_label:"rdx.button_bind",bind_button_tooltip:null,new_create_button_tooltip:null,new_create_button_label:"rdx.button_create_and_new",tab_button_label:"",tab_button_class:"rdx_tab_button",tab_button_tooltip:null,link_label:"",link_tooltip:null,blue_button_click_handler_callback:null,grey_button_click_handler_callback:null,bind_button_click_handler_callback:null,tab_button_click_handler_callback:null,create_and_add_click_handler_callback:null,link_click_handler_callback:null,tab_button_state:null,custom_class_names:null,single_selection:false,multi_selection:false,custom_button_options:null};this._properties=$.extend(true,a,d.get_properties());this._parent=b;this._blue_button=null;this._blue_button_label_container=null;this._grey_button=null;this._tab_button=null;this._bind_button=null};rdx.button_bar.prototype.render=function(){if(this._properties.add_blue_button==false&&this._properties.add_grey_button==false&&this._properties.add_tab_button==false&&this._properties.add_link==false&&this._properties.add_bind_button==false){return this}var d=$("<table>").addClass("rdx_button_bar").attr("cellspacing","1").attr("role","presentation").append($("<tbody>"));if(rdx.utils.is_defined(this._properties.custom_class_names)){d.addClass(this._properties.custom_class_names)}var g=$("<tr>");if(this._properties.add_blue_button==true){this._blue_button=$("<button>").addClass("rdx_button rdx_blue_button").attr("aria-label",rdx.i18n.get_string(this._properties.blue_button_label));this._blue_button_label_container=$("<span>").append(rdx.i18n.get_string(this._properties.blue_button_label));this._blue_button.append(this._blue_button_label_container);if(rdx.utils.is_defined(this._properties.blue_button_tooltip)){this._blue_button.attr("title",rdx.i18n.get_string(this._properties.blue_button_tooltip))}g.append($("<td>").append(this._blue_button));if(rdx.utils.is_defined(this._properties.blue_button_click_handler_callback)){this._blue_button.bind(rdx.events.CLICK,{click_handler_callback:this._properties.blue_button_click_handler_callback,buttons:this},function(m){if($(this).hasClass("rdx_button_disabled")){return}m.data.click_handler_callback.call_back([m.data.buttons]);m.preventDefault()})}d.append(g);this._parent.append(d)}if(this._properties.add_create_and_add_button==true){this._new_create_button=$("<button>").addClass("rdx_button rdx_blue_button");var f=$("<span>").append(rdx.i18n.get_string(this._properties.new_create_button_label));this._new_create_button.attr("aria-label",rdx.i18n.get_string(this._properties.new_create_button_label));this._new_create_button.append(f);if(rdx.utils.is_defined(this._properties.new_create_button_tooltip)){this._new_create_button.attr("title",rdx.i18n.get_string(this._properties.new_create_button_tooltip))}g.append($("<td>").append(this._new_create_button));if(rdx.utils.is_defined(this._properties.create_and_add_click_handler_callback)){this._new_create_button.bind(rdx.events.CLICK,{click_handler_callback:this._properties.create_and_add_click_handler_callback,buttons:this},function(m){if($(this).hasClass("rdx_button_disabled")){return}m.data.click_handler_callback.call_back([m.data.buttons]);m.preventDefault()})}d.append(g);this._parent.append(d)}if(this._properties.add_grey_button==true){this._grey_button=$("<button>").addClass("rdx_button rdx_grey_button").append($("<span>").text(rdx.i18n.get_string(this._properties.grey_button_label)));this._grey_button.attr("aria-label",rdx.i18n.get_string(this._properties.grey_button_label));g.append($("<td>").append(this._grey_button));if(rdx.utils.is_defined(this._properties.grey_button_tooltip)){this._grey_button.attr("title",rdx.i18n.get_string(this._properties.grey_button_tooltip))}if(rdx.utils.is_defined(this._properties.grey_button_click_handler_callback)){this._grey_button.bind(rdx.events.CLICK,{click_handler_callback:this._properties.grey_button_click_handler_callback,buttons:this},function(n){if($(this).hasClass("rdx_button_disabled")){return}n.data.click_handler_callback.call_back([n.data.buttons]);n.stopPropagation();n.preventDefault();var m=rdx.utils.is_defined($(".rdx_tooltip_dialog_cell.rdx_position_bubble_arrow_right")[0]);if(m){$(document.body).trigger(rdx.events.CLICK)}})}d.append(g);this._parent.append(d);this._grey_button.blur()}if(this._properties.add_bind_button==true){this._bind_button=$("<a>").addClass("image-button rdx_button").append($("<span>").addClass("icon").append(rdx.i18n.get_string(this._properties.bind_button_label)));g.append($("<td>").append(this._bind_button));if(rdx.utils.is_defined(this._properties.bind_button_tooltip)){this._bind_button.attr("title",rdx.i18n.get_string(this._properties.bind_button_tooltip))}if(rdx.utils.is_defined(this._properties.bind_button_click_handler_callback)){this._bind_button.bind(rdx.events.CLICK,{click_handler_callback:this._properties.bind_button_click_handler_callback,buttons:this},function(m){if($(this).hasClass("rdx_button_disabled")){return}m.data.click_handler_callback.call_back([m.data.buttons]);m.preventDefault()})}d.append(g);this._parent.append(d);this._bind_button.blur()}if(this._properties.add_tab_button==true){this._tab_button_tab_label=$("<span>").append(rdx.i18n.get_string(this._properties.tab_button_label));this._tab_button_close_button=$("<span>").addClass("rdx_tab_button_close");this._tab_button_dropdown_button=$("<span>").addClass("rdx_tab_button_dropdown");this._tab_button_tab_label.append(this._tab_button_dropdown_button);this._tab_button=$("<span>").addClass(this._properties.tab_button_class).append(this._tab_button_tab_label);if(rdx.utils.is_defined(this._properties.tab_button_tooltip)){this._tab_button.attr("title",rdx.i18n.get_string(this._properties.tab_button_tooltip))}if(rdx.utils.is_defined(this._properties.tab_button_click_handler_callback)){this._tab_button.bind(rdx.events.CLICK,{buttons:this},function(m){var o=$(this).hasClass("rdx_tab_button_active");if(!o){$(this).addClass("rdx_tab_button_active");var n=m.data.buttons;n._tab_button_dropdown_button.remove();n._tab_button_close_view=false;n._tab_button_tab_label.append(n._tab_button_close_button);n._properties.tab_button_click_handler_callback.call_back([n]);n._tab_button_close_button.bind(rdx.events.CLICK,{buttons:n},function(q){var p=q.data.buttons;p.reset_button();p._properties.tab_button_click_handler_callback.call_back([p]);q.stopPropagation()})}m.preventDefault()})}this._parent.append(this._tab_button);if(this._properties.tab_button_state!=null&&this._properties.tab_button_state==rdx.OPEN){var b=this;setTimeout(function(){b._tab_button.trigger(rdx.events.CLICK)},2000)}}if(this._properties.add_link==true){this._link=$("<a>").addClass("button_bar_link").append($("<span>").append(rdx.i18n.get_string(this._properties.link_label)));g.append($("<td>").append(this._link));if(rdx.utils.is_defined(this._properties._link_tooltip)){this._link.attr("title",rdx.i18n.get_string(this._properties._link_tooltip))}if(rdx.utils.is_defined(this._properties.link_click_handler_callback)){this._link.bind(rdx.events.CLICK,{click_handler_callback:this._properties.link_click_handler_callback,buttons:this},function(m){m.data.click_handler_callback.call_back([m.data.buttons]);m.preventDefault()})}d.append(g);this._parent.append(d)}if(this._properties.custom_button_options!=null){for(var e=0;e<this._properties.custom_button_options.length;e++){var h=this._properties.custom_button_options[e];var a=$("<button>").addClass("rdx_button");if(rdx.utils.is_defined(h.class_name)){a.addClass(h.class_name)}a.append($("<span>").append(rdx.i18n.get_string(h.label)));a.attr("aria-label",rdx.i18n.get_string(h.label));if(rdx.utils.is_defined(h.tooltip)){a.attr("title",rdx.i18n.get_string(h.tooltip))}if(e==0&&rdx.utils.is_defined(this._parent.children()[0])){if($(this._parent.children()[0]).children("tbody").children("tr").children("td").length>=1){g.append($("<td>").addClass("lineseparator").append(a))}}else{g.append($("<td>").append(a))}if(rdx.utils.is_defined(h.click_handler_callback)){a.bind(rdx.events.CLICK,{click_handler_callback:h.click_handler_callback,buttons:this},function(m){if($(this).hasClass("rdx_button_disabled")){return}m.data.click_handler_callback.call_back([m.data.buttons]);m.preventDefault()})}}d.append(g);this._parent.append(d)}if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().button_bar_stack.push(this)}return this};rdx.button_bar.prototype.reset_button=function(){if(rdx.utils.is_defined(this._tab_button)&&this._tab_button.hasClass("rdx_tab_button_active")){this._tab_button.removeClass("rdx_tab_button_active");this._tab_button_close_button.remove();this._tab_button_tab_label.append(this._tab_button_dropdown_button);this._tab_button_close_view=true}};rdx.button_bar.prototype.get_button_state=function(){if(rdx.utils.is_defined(this._tab_button_close_view)){return this._tab_button_close_view?rdx.CLOSE:rdx.OPEN}};rdx.button_bar.prototype.hide_grey_button=function(){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.hide()}};rdx.button_bar.prototype.show_grey_button=function(){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.show()}};rdx.button_bar.prototype.change_grey_button_label=function(a){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.text(a)}};rdx.button_bar.prototype.hide_blue_button=function(){if(rdx.utils.is_defined(this._blue_button)){this._blue_button.hide()}};rdx.button_bar.prototype.show_blue_button=function(){if(rdx.utils.is_defined(this._blue_button)){this._blue_button.show()}};rdx.button_bar.prototype.change_blue_button_label=function(a){if(rdx.utils.is_defined(this._blue_button)){this._blue_button.text(a)}};rdx.button_bar.prototype.disable=function(){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.addClass("rdx_button_disabled");this._grey_button.attr("disabled","disabled")}if(rdx.utils.is_defined(this._blue_button)){this._blue_button.addClass("rdx_button_disabled");this._blue_button.attr("disabled","disabled")}if(rdx.utils.is_defined(this._new_create_button)){this._new_create_button.addClass("rdx_button_disabled");this._new_create_button.attr("disabled","disabled")}if(rdx.utils.is_defined(this._tab_button)){this._tab_button.addClass("rdx_button_disabled");this._tab_button.removeClass("rdx_tab_button_active");this._tab_button.attr("disabled","disabled")}};rdx.button_bar.prototype.enable=function(){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.removeClass("rdx_button_disabled");this._grey_button.removeAttr("disabled")}if(rdx.utils.is_defined(this._blue_button)){this._blue_button.removeClass("rdx_button_disabled");this._blue_button.removeAttr("disabled")}if(rdx.utils.is_defined(this._new_create_button)){this._new_create_button.removeClass("rdx_button_disabled");this._new_create_button.removeAttr("disabled")}if(rdx.utils.is_defined(this._tab_button)){this._tab_button.removeClass("rdx_button_disabled");this._tab_button.removeAttr("disabled")}};rdx.button_bar.prototype.hide=function(){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.hide()}if(rdx.utils.is_defined(this._blue_button)){this._blue_button.hide()}if(rdx.utils.is_defined(this._new_create_button)){this._new_create_button.hide()}if(rdx.utils.is_defined(this._tab_button)){this._tab_button.hide()}};rdx.button_bar.prototype.show=function(){if(rdx.utils.is_defined(this._grey_button)){this._grey_button.show()}if(rdx.utils.is_defined(this._blue_button)){this._blue_button.show()}if(rdx.utils.is_defined(this._new_create_button)){this._new_create_button.show()}if(rdx.utils.is_defined(this._tab_button)){this._tab_button.show()}};rdx.button_bar.prototype.is_disabled=function(){if(rdx.utils.is_defined(this._grey_button)&&this._grey_button.hasClass("rdx_button_disabled")){return true}if(rdx.utils.is_defined(this._blue_button)&&this._blue_button.hasClass("rdx_button_disabled")){return true}if(rdx.utils.is_defined(this._tab_button)&&this._tab_button.hasClass("rdx_button_disabled")){return true}return false};rdx.button_bar.prototype.get_data=function(){};rdx.button_bar.prototype.set_data=function(){};rdx.button_bar.prototype.refresh_state=function(b){var a=b.action_item_data;var d=b.total_item_count;if(this._properties.single_selection==true){if(a.length==1){this._blue_button.removeClass("rdx_button_disabled");this._blue_button.removeAttr("disabled")}else{this._blue_button.addClass("rdx_button_disabled");this._blue_button.attr("disabled","disabled")}}if(this._properties.multi_selection==true){if(a.length>=1){this._blue_button.removeClass("rdx_button_disabled");this._blue_button.removeAttr("disabled")}else{this._blue_button.addClass("rdx_button_disabled");this._blue_button.attr("disabled","disabled")}}};rdx.calendar_component=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={change_handler_callback:null,drop_down_options:{"rdx.Today":"today","rdx.LAST_5_MINUTES":"last_5_minutes","rdx.LAST_1_HOUR":"last_1_hour","rdx.LAST_12_HOURS":"last_12_hours","rdx.LAST_DAY":"last_day","rdx.LAST_WEEK":"last_week","rdx.LAST_MONTH":"last_month","rdx.LAST_6_MONTH":"last_6_month","rdx.LAST_1_YEAR":"last_1_year","rdx.Custom":"custom"},drop_down_options_reverse_map:{today:"rdx.Today",last_5_minutes:"rdx.LAST_5_MINUTES",last_1_hour:"rdx.LAST_1_HOUR",last_12_hours:"rdx.LAST_12_HOURS",last_day:"rdx.LAST_DAY",last_week:"rdx.LAST_WEEK",last_month:"rdx.LAST_MONTH",last_6_month:"rdx.LAST_6_MONTH",last_1_year:"rdx.LAST_1_YEAR",custom:"rdx.Custom"},single_selection:false,date_format:"mm/dd/yy",show_time:false,read_only:false,time_properties:{hour_format_24:false},oldest_date:null,newest_date:null,add_options_configure_view_name:null,show_custom_date:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._datepicker_container=null;this._starttime_component=null;this._endtime_component=null;this._drop_down_container=null;this._date_container=null;this._custom_datepicker_element=null;this._calendar_containers=[];this.class_names="datepicker_component";this._selected_date={start_date:null,end_date:null,start_time:null,end_time:null,start_epoch:null,end_epoch:null,duration_value:null};this._current_selected_date=null;this._mask_id=rdx.mask.get_id();this._calendar_component_mask=null;this._calendar_container=null;this._calendar_hidden=true};rdx.calendar_component.prototype.render=function(){if(this.get_add_options_configure_view()){this._properties.drop_down_options["rdx.configure"]=this.get_add_options_configure_view()}this._create_datepicker();if(!(this._properties.read_only==true||this._properties.read_only=="true")){this._initialize_events(this._drop_down_container)}return this};rdx.calendar_component.prototype.get_component_type=function(){return rdx.form_constants.CALENDAR};rdx.calendar_component.prototype.get_data=function(){return this._selected_date};rdx.calendar_component.prototype.get_add_options_configure_view_name=function(){return this._properties.add_options_configure_view_name};rdx.calendar_component.prototype.get_add_options_configure_view=function(){var a=null;if(rdx.utils.is_defined(this.get_add_options_configure_view_name())){if(rdx.utils.is_defined(rdx.utils.get_view(this.get_add_options_configure_view_name()))){}a=rdx.utils.get_view(this.get_add_options_configure_view_name())}return a};rdx.calendar_component.prototype.add_options_configure_view=function(){return this._properties.add_options_configure_view};rdx.calendar_component.prototype.get_selected_date_option=function(){return this._current_selected_date};rdx.calendar_component.prototype.set_data=function(b,a,d){if(rdx.utils.is_defined(b)){if(rdx.utils.is_defined(a)){this._set_date_object(b,a,d)}else{this._set_date_object(b,null,d)}}};rdx.calendar_component.prototype.get_component=function(){return this._datepicker_container};rdx.calendar_component.prototype.get_field=function(){return this._field};rdx.calendar_component.prototype._create_datepicker=function(){this._datepicker_container=$("<div>").addClass("datepicker_component");if(this._properties.show_time&&this.is_show_custom_date()){this._datepicker_container.addClass("calendar_time")}else{if(this._properties.date_format=="dd M yy"){this._datepicker_container.addClass("calendar_format_dd_mm_yyyy")}}this._parent.append(this._datepicker_container);this._drop_down_container=$("<div>").addClass("calendar_drop_down_container");if(this._properties.read_only==true||this._properties.read_only=="true"){this._drop_down_container.addClass("form_field_disabled")}if(this._properties.show_time){this._drop_down_container.addClass("calendar_time")}else{if(this._properties.date_format=="dd M yy"){this._drop_down_container.addClass("calendar_format_dd_mm_yyyy")}}this._datepicker_container.append(this._drop_down_container);this._calendar_image=$("<span>").addClass("calendar_image");this._date_container=$("<a>").attr("href","#").attr("style","text-decoration:none; color:#000").addClass("date_range").attr("aria-label","Select Duration");this._drop_down_container.append(this._calendar_image,this._date_container);if(this._properties.single_selection!=true){for(var a in this._properties.drop_down_options){this._date_container.text(rdx.i18n.get_string(a));this._update_selected_date(this._properties.drop_down_options[a],a,null,null,null,null);break}}else{var b=new Date();this._selected_date.start_date=b.getDate()+" "+b.getMonthName().substr(0,3)+" "+b.getFullYear();if(this._properties.show_time){this._selected_date.start_time=("0"+b.getHours()).slice(-2)+":"+("0"+b.getMinutes()).slice(-2);this._date_container.text(this._selected_date.start_date+":"+this._selected_date.start_time)}else{this._date_container.text(this._selected_date.start_date)}this._selected_date.start_epoch=this._calculate_epoch_GMT(this._selected_date.start_date,0,0,0,0);selected_date=this._selected_date;this._current_selected_date=rdx.form_constants.calendar_component_options.CUSTOM}};rdx.calendar_component.prototype._create_dropdown_options=function(){this._dropdown_holder=$("<a>").attr("href","#").addClass("datepicker_component_dropdown_holder").hide();this._dropdown_list=$("<ul>").addClass("dropdown");if(this._properties.show_time){if(this.is_show_custom_date()==true){this._dropdown_list.addClass("calendar_time")}}else{if(this._properties.date_format=="dd M yy"){this._dropdown_list.addClass("calendar_format_dd_mm_yyyy")}}this._dropdown_holder.append(this._dropdown_list);this._outer_container=$("<div>").addClass("calendar_outer_container").hide();$(document.body).append(this._outer_container);$(document.body).append(this._dropdown_holder);for(var a in this._properties.drop_down_options){var b=$("<li>").append($("<a>").attr("href","#"));$("a",b).text(rdx.i18n.get_string(a));if(this._current_selected_date===a){$("a",b).addClass("selected")}if(a===rdx.form_constants.calendar_component_options.CUSTOM){this._custom_datepicker_element=$("a",b).addClass("Custom-datepicker")}else{b.bind(rdx.events.CLICK,{_this:this,key:a},function(d){d.data._this.fire_change_handler_callback(d.data._this._properties.drop_down_options[d.data.key],d.data.key,null,null,null,null,null,null,true);d.data._this._date_container.focus()})}this._dropdown_list.append(b)}};rdx.calendar_component.prototype._create_calendar_container=function(){this._calendar_container=$("<div>").addClass("Datepickerholder").hide();$(document.body).append(this._calendar_container);if(this._properties.single_selection!=true){this._create_calendar_container_range_selection();this._calendar_container.on("keydown",{that:this},this.forward_navigation_double_calendar)}else{this._create_calendar_container_single_selection();this._calendar_container.on("keydown",{that:this},this.forward_navigation_single_calendar)}};rdx.calendar_component.prototype.forward_navigation_single_calendar=function(d){if(d.keyCode==9){var e=$(document.activeElement);var b=$(".time_component",this);if(d.shiftKey==false){if((b[0]&&e.hasClass("spinner-down-button"))||(!b[0]&&e.hasClass("ui-state-default")&&e.parent().next().hasClass("ui-state-disabled"))){$(".ui-datepicker-month",this).focus();d.preventDefault()}}else{if(d.shiftKey&&e.hasClass("ui-datepicker-month")){if(b[0]){$(".time_component_spinner",b).children(".spinner-down-button").focus()}else{var a=$('td[data-month="0"]',this);$(a[a.length-1]).children(".ui-state-default").focus()}d.preventDefault()}}}else{if(d.keyCode==27){d.data.that._hide_calendar();d.data.that._date_container.focus()}}};rdx.calendar_component.prototype.forward_navigation_double_calendar=function(b){if(b.keyCode==9){var d=$(document.activeElement);if(b.shiftKey==false&&d.hasClass("rdx_grey_button")){$(".ui-datepicker-month",this)[0].focus();b.preventDefault()}else{if(b.shiftKey&&d.hasClass("ui-datepicker-month")&&d.parents(".start_date_parent")[0]!==undefined){var a=$(".rdx_grey_button",this);a.focus();b.preventDefault()}}}else{if(b.keyCode==27){b.data.that._hide_calendar();b.data.that._date_container.focus()}}};rdx.calendar_component.prototype._create_calendar_container_single_selection=function(){var a=$("<div>").addClass("datepicker-single-calendar");this._calendar_container.css({height:"auto"});this._calendar_container.append(a);this._calendar_container.addClass("single_calendar");if(this._properties.show_time){var b=new rdx.form_field({input_type:rdx.form_constants.TIME,display_label:false,properties:this._properties.time_properties});this._starttime_component=new rdx.time_component(this._calendar_container,b);this._starttime_component.render()}var d=this;this._attach_calendar(a,{onSelect:function(e){e=$.datepicker.formatDate("d M yy",$(this).datepicker("getDate"));var f=null;if(d._properties.show_time){f=d._starttime_component.get_data();d._date_container.text(e+":"+f)}else{d._date_container.text(e)}d.fire_change_handler_callback(e+":"+f,rdx.form_constants.calendar_component_options.CUSTOM,e,null,f,null,null,null);d._hide_calendar();d._date_container.focus()}})};rdx.calendar_component.prototype._create_calendar_container_range_selection=function(){var d=$("<div>").addClass("datepicker start_date_parent");var h=$("<div>").text("Start Date").addClass("calendar_date_text_class");d.append(h);var a=$("<div>").text("End Date").addClass("calendar_date_text_class");var b=$("<div>").addClass("datepicker");b.append(a);var g=$("<div>").addClass("datepicker-buttons");this._calendar_container.append(d,b,g);this._attach_calendar(d,{minDate:this._properties.oldest_date,defaultDate:rdx.utils.is_defined(this.get_data()["start_date"])?new Date(this.get_data()["start_date"]):null,onSelect:function(o){b.datepicker("option","minDate",o)}});this._attach_calendar(b,{defaultDate:rdx.utils.is_defined(this.get_data()["end_date"])?new Date(this.get_data()["end_date"]):null,maxDate:this._properties.newest_date});if(this._properties.show_time){var f=new rdx.form_field({input_type:rdx.form_constants.TIME,display_label:false});this._starttime_component=new rdx.time_component(d,f);this._starttime_component.render();if(rdx.utils.is_defined(this.get_data()["start_time"])){this._starttime_component.set_data(this.get_data()["start_time"])}this._endtime_component=new rdx.time_component(b,f);this._endtime_component.render();if(rdx.utils.is_defined(this.get_data()["end_time"])){this._endtime_component.set_data(this.get_data()["end_time"])}}var e=this;var m=$("<button/>").addClass("rdx_button rdx_blue_button");m.text(rdx.i18n.get_string("rdx.op_wizard_done_button"));m.bind(rdx.events.CLICK,function(o){var v=d.datepicker("getDate");var q=b.datepicker("getDate");v=$.datepicker.formatDate("d M yy",v);q=$.datepicker.formatDate("d M yy",q);var w=true;var z=new Date(v);var s=new Date(q);var u=null;var t=null;if(z.getTime()>s.getTime()){w=false}if(e._properties.show_time){u=e._starttime_component.get_data();t=e._endtime_component.get_data();var A=v+" "+u;var C=new Date(A);var p=q+" "+t;var B=new Date(p);if(C.getTime()>B.getTime()){w=false}if(w){e._date_container.text(v+" "+u+" - "+q+" "+t)}}else{if(w){e._date_container.text(v+" - "+q)}}if(!w){rdx.message_box.error(rdx.i18n.get_string("rdx.check_time_range"));return}if(w){e._hide_calendar();e.fire_change_handler_callback((v+" "+u+" - "+q+" "+t),rdx.form_constants.calendar_component_options.CUSTOM,v,q,u,t,null,null,true);e._date_container.focus()}if(e.is_show_custom_date()==false){e._date_container.text(rdx.i18n.get_string("rdx.Custom"))}});var n=$("<button/>").addClass("rdx_button rdx_grey_button");n.text(rdx.i18n.get_string("rdx.op_wizard_cancel_button"));n.bind(rdx.events.CLICK,function(){e._hide_calendar();e._date_container.focus()});g.append(m,n)};rdx.calendar_component.prototype._offset_calendar_component=function(a){return[parseInt(a.offset().top),parseInt(a.offset().left)]};rdx.calendar_component.prototype._hide_calendar=function(){this._drop_down_container.removeClass("active");this._calendar_hidden=true;if(rdx.utils.is_defined(this._dropdown_holder)&&this._dropdown_holder!==null){this._dropdown_holder.remove()}if(rdx.utils.is_defined(this._calendar_container)&&this._calendar_container!==null){this._calendar_container.remove()}if(rdx.utils.is_defined(this._outer_container)&&this._outer_container!=null){this._outer_container.remove()}this._dropdown_holder=null;this._dropdown_list=null;this._calendar_container=null;this._outer_container=null;var a=this;rdx.mask.unmask_dom_element($(document.body),a._mask_id);$(document).unbind(rdx.events.KEYUP,a._keydown_event_handler)};rdx.calendar_component.prototype._position_calendar_component=function(){var b=this._offset_calendar_component(this._datepicker_container);var d=b[1]+this._datepicker_container.width();var a=null;this._calendar_container.css({position:"absolute"});if(d+this._calendar_container.width()>$(window).width()){this._calendar_container.css({left:b[1]-this._calendar_container.width()-(4*parseInt(this._outer_container.css("borderLeftWidth"),10))});a="left"}else{this._calendar_container.css({left:d+(4*parseInt(this._outer_container.css("borderLeftWidth"),10))});a="right"}this._calendar_container.css({top:b[0]+this._datepicker_container.height()+(4*parseInt(this._outer_container.css("borderLeftWidth"),10))});return a};rdx.calendar_component.prototype._position_for_right_side_calendar=function(a){var b=this._offset_calendar_component(this._datepicker_container);a.css({position:"absolute"});a.css({left:b[1]+parseInt(this._outer_container.css("borderLeftWidth"),10)});a.css({top:b[0]+this._datepicker_container.height()+(parseInt(this._outer_container.css("borderLeftWidth"),10))})};rdx.calendar_component.prototype._position_for_single_calendar=function(a){var b=this._offset_calendar_component(this._datepicker_container);a.css({position:"absolute"});a.css({left:b[1]});a.css({top:b[0]+this._datepicker_container.height()})};rdx.calendar_component.prototype._create_mask=function(){this._mask_id=rdx.mask.get_id();this._calendar_component_mask=rdx.mask.mask_dom_element($(document.body),this._mask_id,"calendar_component_mask");var a=this;$(this._calendar_component_mask[0]).bind(rdx.events.CLICK,function(b){rdx.mask.unmask_dom_element($(document),a._mask_id);$(document.elementFromPoint(b.clientX,b.clientY)).click();a._hide_calendar()});$(document).bind(rdx.events.KEYUP,$.proxy(a._keydown_event_handler,a))};rdx.calendar_component.prototype._keydown_event_handler=function(d){var b=27;var a=d.which||d.keyCode;if(a==b){this._hide_calendar()}d.stopPropagation()};rdx.calendar_component.prototype._position_outer_container_for_dropdown=function(){var a=this._offset_calendar_component(this._datepicker_container);this._outer_container.css({position:"absolute"});this._outer_container.css({left:a[1]});this._outer_container.css({top:a[0]+this._datepicker_container.height()-1});this._outer_container.width(this._datepicker_container.width()-2);this._outer_container.height(this._dropdown_list.height()+(2*parseInt(this._outer_container.css("borderLeftWidth"),10)));this._outer_container.show()};rdx.calendar_component.prototype._position_outer_container_for_calendar=function(b){var a=null;if(b==="right"){this._outer_container.width(this._outer_container.width()+this._calendar_container.width()+(8*parseInt(this._outer_container.css("borderLeftWidth"),10)));if(this._outer_container.height()<=this._calendar_container.height()){this._outer_container.height(this._calendar_container.height()+(8*parseInt(this._outer_container.css("borderLeftWidth"),10)))}}else{a=this._outer_container.offset();this._outer_container.css({left:a.left-this._calendar_container.width()-(8*parseInt(this._outer_container.css("borderLeftWidth"),10))});this._outer_container.width(this._outer_container.width()+this._calendar_container.width()+(8*parseInt(this._outer_container.css("borderLeftWidth"),10)));if(this._outer_container.height()<=this._calendar_container.height()){this._outer_container.height(this._calendar_container.height()+(8*parseInt(this._outer_container.css("borderLeftWidth"),10)))}}};rdx.calendar_component.prototype._initialize_events=function(b){var a=this;if(rdx.utils.is_defined(b)&&b!=null){if(this._properties.single_selection!=true){b.bind(rdx.events.CLICK,function(d){if(rdx.utils.is_defined(a._calendar_hidden)&&a._calendar_hidden===true){a._calendar_hidden=false;a._create_dropdown_options();a._create_calendar_container();a._initialize_dropdown_calendar_events();b.toggleClass("active");a._position_for_right_side_calendar(a._dropdown_holder);a._dropdown_holder.show();$(".selected",a._dropdown_list).focus();a._position_outer_container_for_dropdown();a._create_mask()}else{a._hide_calendar()}d.stopPropagation()})}else{if(this._properties.single_selection==true){b.bind(rdx.events.CLICK,function(d){if(rdx.utils.is_defined(a._calendar_hidden)&&a._calendar_hidden===true){a._calendar_hidden=false;a._create_calendar_container();b.toggleClass("active");a._position_for_single_calendar(a._calendar_container);a._calendar_container.show();$(".ui-datepicker-month",a._calendar_container).focus();a._create_mask()}else{a._hide_calendar()}d.stopPropagation()})}}}};rdx.calendar_component.prototype._initialize_dropdown_calendar_events=function(){var a=this._dropdown_holder;var d=this;var b=null;if(rdx.utils.is_defined(this._dropdown_holder)&&a!=null){a.bind(rdx.events.CLICK,function(e){if($(e.target).is("a")){var f=$(e.target);if(f[0]===$(d._custom_datepicker_element)[0]){b=d._position_calendar_component();d._calendar_container.toggle();if(d._calendar_container.is(":visible")){d._position_outer_container_for_calendar(b);f.parent().addClass("custom_active")}else{d._position_outer_container_for_dropdown();f.parent().removeClass("custom_active")}}else{if(f.text()!="Configure"){d._date_container.text(f.text())}d._hide_calendar()}}e.stopPropagation()})}};rdx.calendar_component.prototype.fire_change_handler_callback=function(d,g,o,f,p,e,b,a,m){if(g=="rdx.configure"){var h=new rdx.base_view($(rdx.page).empty(),this.get_add_options_configure_view());h.prepare_view()}else{var n=null;n=this._update_selected_date(d,g,o,f,p,e,b,a);if(rdx.utils.is_defined(this._properties.change_handler_callback)){this._properties.change_handler_callback.call_back([n,m])}}};rdx.calendar_component.prototype._update_selected_date=function(w,z,s,A,d,m,b,g){var e=null;var a=null;var o=null;for(var D in this._selected_date){this._selected_date[D]=null}this._current_selected_date=null;if(z==rdx.form_constants.calendar_component_options.CUSTOM){if((this._properties.single_selection!==true)&&rdx.utils.is_defined(g)&&rdx.utils.is_defined(b)){this._selected_date.start_date=s;this._selected_date.end_date=A;this._selected_date.start_time=d;this._selected_date.end_time=m;this._selected_date.start_epoch=b;this._selected_date.end_epoch=g;this._selected_date.duration_value=null;e=this._selected_date;this._current_selected_date=rdx.form_constants.calendar_component_options.CUSTOM}else{if((this._properties.single_selection!==true)&&rdx.utils.is_defined(A)&&rdx.utils.is_defined(s)){this._selected_date.start_date=s;this._selected_date.end_date=A;this._selected_date.start_time=d;this._selected_date.end_time=m;if(this._properties.show_time){var v=s+" "+d;var B=new Date(v);var C=B.getHours();var f=B.getMinutes();var h=B.getSeconds();var q=A+" "+m;var t=new Date(q);var u=t.getHours();var n=t.getMinutes();var p=t.getSeconds();a=this._calculate_epoch_GMT(s,C,f,h,0);o=this._calculate_epoch_GMT(A,u,n,p,999)}else{a=this._calculate_epoch_GMT(s,0,0,0,0);o=this._calculate_epoch_GMT(A,23,59,59,999)}this._selected_date.start_epoch=a;this._selected_date.end_epoch=o;this._selected_date.duration_value=null;e=this._selected_date;this._current_selected_date=rdx.form_constants.calendar_component_options.CUSTOM}else{if((this._properties.single_selection==true)&&rdx.utils.is_defined(b)){this._selected_date.start_date=s;this._selected_date.start_time=d;this._selected_date.start_epoch=b;e=this._selected_date;this._current_selected_date=rdx.form_constants.calendar_component_options.CUSTOM}else{if((this._properties.single_selection===true)&&rdx.utils.is_defined(s)){this._selected_date.start_date=s;this._selected_date.start_time=d;a=this._calculate_epoch_GMT(s,0,0,0,0);this._selected_date.start_epoch=a;e=this._selected_date;this._current_selected_date=rdx.form_constants.calendar_component_options.CUSTOM}}}}}else{e=this._date_picker(z)}return e};rdx.calendar_component.prototype._calculate_epoch_GMT=function(d,a,e,h,b){var g=d.split(" ");if(g.length==3){var f=new Date(parseInt(g[2]),rdx.utils.get_month_index(g[1])-1,parseInt(g[0]),a,e,h,b);return f.getTime()}};rdx.calendar_component.prototype._date_picker=function(d){var b=null;var a=null;var e=new Date();if(d===rdx.form_constants.calendar_component_options.TODAY){b=this._date_formatter(Date.today(),Date.today());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.TODAY];this._current_selected_date=rdx.form_constants.calendar_component_options.TODAY}else{if(d===rdx.form_constants.calendar_component_options.LAST_HOUR){a=new Date().add(-1).hours();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_HOUR];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_HOUR}else{if(d===rdx.form_constants.calendar_component_options.LAST_DAY){a=new Date().add(-1).days();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_DAY];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_DAY}else{if(d===rdx.form_constants.calendar_component_options.LAST_WEEK){a=new Date().add(-7).days();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_WEEK];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_WEEK}else{if(d===rdx.form_constants.calendar_component_options.LAST_MONTH){a=new Date().add(-1).months();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_MONTH];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_MONTH}else{if(d===rdx.form_constants.calendar_component_options.LAST_1_QUARTER){a=new Date().add(-3).months();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_1_QUARTER];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_1_QUARTER}else{if(d===rdx.form_constants.calendar_component_options.LAST_6_MONTH){a=new Date().add(-6).months();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_6_MONTH];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_6_MONTH}else{if(d===rdx.form_constants.calendar_component_options.LAST_1_YEAR){a=new Date().add(-1).years();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_1_YEAR];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_1_YEAR}else{if(d===rdx.form_constants.calendar_component_options.LAST_2_YEARS){a=new Date().add(-2).years();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_2_YEARS];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_2_YEARS}else{if(d===rdx.form_constants.calendar_component_options.LAST_5_YEARS){a=new Date().add(-5).years();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_5_YEARS];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_5_YEARS}else{if(d===rdx.form_constants.calendar_component_options.LAST_10_YEARS){a=new Date().add(-10).years();b=this._date_formatter(a,new Date());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_10_YEARS];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_10_YEARS}else{if(d===rdx.form_constants.calendar_component_options.LAST_5_MINUTES){this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_5_MINUTES];b=this._selected_date;this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_5_MINUTES}else{if(d===rdx.form_constants.calendar_component_options.LAST_1_HOUR){b=this._date_formatter(Date.today().add(-1).hours(),Date.today());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_1_HOUR];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_1_HOUR}else{if(d===rdx.form_constants.calendar_component_options.LAST_12_HOURS){b=this._date_formatter(Date.today().add(-12).hours(),Date.today());this._selected_date.duration_value=this._properties.drop_down_options[rdx.form_constants.calendar_component_options.LAST_12_HOURS];this._current_selected_date=rdx.form_constants.calendar_component_options.LAST_12_HOURS}}}}}}}}}}}}}}if(rdx.utils.is_defined(a)){this._selected_date.start_epoch=a.getTime()}if(rdx.utils.is_defined(e)){this._selected_date.end_epoch=e.getTime()}return b};rdx.calendar_component.prototype._date_formatter=function(a,b){this._selected_date.start_date=a.toString(this._properties.date_format);this._selected_date.end_date=b.toString(this._properties.date_format);this._selected_date.start_epoch=null;this._selected_date.end_epoch=null;return this._selected_date};rdx.calendar_component.prototype._offset_calculation_for_timezones=function(a){return a};rdx.calendar_component.prototype.is_show_custom_date=function(){return this._properties.show_custom_date};rdx.calendar_component.prototype._attach_calendar=function(a,b){var g=this;var e=null;var d={changeMonth:true,changeYear:true,dateFormat:this._properties.date_format};e=$.extend(true,{},d,b);var f=a.datepicker(e);$(".ui-datepicker-year",f).attr("aria-label","Select year");$(".ui-datepicker-month",f).attr("aria-label","Select month")};rdx.calendar_component.prototype._set_date_object=function(g,a,h){var b=null;var m=null;var f=null;var e=null;if(rdx.utils.is_defined(g.duration_value)){for(var d in this._properties.drop_down_options){if(this._properties.drop_down_options[d]===g.duration_value){this._date_container.text(rdx.i18n.get_string(d));if(rdx.utils.is_defined(a)&&a==true){this.fire_change_handler_callback(this._properties.drop_down_options[d],d,null,null,null,null,null,null,h)}else{this._update_selected_date(this._properties.drop_down_options[d],d,null,null,null,null,null,null)}}}}else{if(this._properties.single_selection===false&&(rdx.utils.is_defined(g.start_epoch))&&rdx.utils.is_defined(g.end_epoch)){b=new Date(this._offset_calculation_for_timezones(g.start_epoch)).toString("MM DD YYYY");m=new Date(this._offset_calculation_for_timezones(g.end_epoch)).toString("MM DD YYYY");if(this._properties.show_time){if(rdx.utils.is_defined(this._starttime_component)&&rdx.utils.is_defined(this._endtime_component)){f=this._starttime_component.get_data();e=this._endtime_component.get_data()}else{f=g.start_time;e=g.end_time}this._date_container.text(b+":"+f+"-"+m+":"+e)}else{this._date_container.text(b+"-"+m)}if(this.is_show_custom_date()==false&&g.duration_value==null){this._date_container.text(rdx.i18n.get_string("rdx.Custom"))}else{this._date_container.text(rdx.i18n.get_string(this._properties[g.duration_value]))}if(rdx.utils.is_defined(a)&&a==true){this.fire_change_handler_callback((b+"-"+m),rdx.form_constants.calendar_component_options.CUSTOM,b,m,f,e,g.start_epoch,g.end_epoch,h)}else{this._update_selected_date((b+"-"+m),rdx.form_constants.calendar_component_options.CUSTOM,b,m,f,e,g.start_epoch,g.end_epoch)}}else{if((rdx.utils.is_defined(g.start_date)&&rdx.utils.is_defined(g.end_date))&&this._properties.single_selection===false){if(Date.parseExact(g.start_date,this._properties.date_format)!=null&&Date.parseExact(g.end_date,this._properties.date_format)!=null){if(this._properties.show_time){f=this._starttime_component.get_data();e=this._endtime_component.get_data();this._date_container.text(g.start_date+":"+f+"-"+g.end_date+":"+e)}else{this._date_container.text(g.start_date+"-"+g.end_date)}if(rdx.utils.is_defined(a)&&a==true){this.fire_change_handler_callback((g.start_date+"-"+g.end_date),rdx.form_constants.calendar_component_options.CUSTOM,g.start_date,g.end_date,f,e,null,null,h)}else{this._update_selected_date((g.start_date+"-"+g.end_date),rdx.form_constants.calendar_component_options.CUSTOM,g.start_date,g.end_date,f,e,null,null)}}}else{if((this._properties.single_selection===true)&&rdx.utils.is_defined(g.start_date)){if(Date.parseExact(g.start_date,this._properties.date_format)!=null){if(this._properties.show_time){f=this._starttime_component.get_data();this._date_container.text(g.start_date+":"+f)}else{this._date_container.text(g.start_date)}if(rdx.utils.is_defined(a)&&a==true){this.fire_change_handler_callback(g.start_date,rdx.form_constants.calendar_component_options.CUSTOM,g.start_date,null,f,null,null,null,h)}else{this._update_selected_date(g.start_date,rdx.form_constants.calendar_component_options.CUSTOM,g.start_date,null,f,null,null,null)}}}else{if((this._properties.single_selection===true)&&rdx.utils.is_defined(g.start_epoch)){b=new Date(this._offset_calculation_for_timezones(g.start_epoch)).toString(this._properties.date_format);if(this._properties.show_time){f=this._starttime_component.get_data();this._date_container.text(b+":"+f)}else{this._date_container.text(b)}if(rdx.utils.is_defined(a)&&a==true){this.fire_change_handler_callback(b,rdx.form_constants.calendar_component_options.CUSTOM,b,null,f,null,g.start_epoch,null,h)}else{this._update_selected_date(b,rdx.form_constants.calendar_component_options.CUSTOM,b,null,f,null,g.start_epoch,null)}}else{if((this._properties.single_selection===true)&&g&&Date.parse(g)!==null){this._date_container.text(g);this.fire_change_handler_callback(g,rdx.form_constants.calendar_component_options.CUSTOM,g,null,null,null,null,null)}}}}}}};rdx.time_component=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={hour_format_24:false,default_time:true,show_seconds:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._timepicker_container=null;this._time_container=null;this._timepicker_row=null;this._time=null;this._hour_textbox=null;this._minute_textbox=null;this._second_textbox=null;this._ampm_textbox=null;this._focus=null;this._type=null;this._single_digit=10;this._max_hours_is_24=23;this._max_hour_is_12=11;this._max_mints_sec=59;this._default_time=new Date();this.class_names="time_component"};rdx.time_component.prototype.render=function(){this._create_timepicker();return this};rdx.time_component.prototype.get_component_type=function(){return rdx.form_constants.TIME};rdx.time_component.prototype.get_component=function(){return this._time_component};rdx.time_component.prototype.get_field=function(){return this._field};rdx.time_component.prototype.get_data=function(){var a=this._properties.hour_format_24;var b=this._properties.show_seconds;if(a==false&&b==true){return this._hour_textbox.val()+":"+this._minute_textbox.val()+":"+this._second_textbox.val()+" "+this._ampm_textbox.val()}else{if(a==false&&b==false){return this._hour_textbox.val()+":"+this._minute_textbox.val()+" "+this._ampm_textbox.val()}else{if(a==true&&b==true){return this._hour_textbox.val()+":"+this._minute_textbox.val()+":"+this._second_textbox.val()}else{if(a==true&&b==false){return this._hour_textbox.val()+":"+this._minute_textbox.val()}}}}};rdx.time_component.prototype.set_data=function(g){var b=this._properties.hour_format_24;var m=this._properties.show_seconds;var f,h,e;if(rdx.utils.is_defined(g)){var a=g.split(":");if(b==true){if(m==true){f=parseInt(a[0])=="NaN"?" ":a[0];h=parseInt(a[1])=="NaN"?" ":a[1];e=parseInt(a[2])=="NaN"?" ":a[2];this._hour_textbox.val(f);this._minute_textbox.val(h);this._second_textbox.val(e)}else{f=parseInt(a[0])=="NaN"?" ":a[0];h=parseInt(a[1])=="NaN"?" ":a[1];this._hour_textbox.val(f);this._minute_textbox.val(h)}}else{if(m==true){if(rdx.utils.is_defined(a[2])){var d=a[2].split(" ");f=parseInt(a[0])=="NaN"?" ":a[0];h=parseInt(a[1])=="NaN"?" ":a[1];e=parseInt(d[0])=="NaN"?" ":d[0];this._hour_textbox.val(f);this._minute_textbox.val(h);this._second_textbox.val(e);this._ampm_textbox.val(d[1])}if(f>11){f=f%12}}else{if(rdx.utils.is_defined(a[1])){var d=a[1].split(" ");f=parseInt(a[0])=="NaN"?" ":a[0];h=parseInt(d[0])=="NaN"?" ":d[0];if(f>11){f=f%12}this._hour_textbox.val(f);this._minute_textbox.val(h);this._ampm_textbox.val(d[1])}}}}};rdx.time_component.prototype.pad_zero=function(b){var a="0";return a.concat(b)};rdx.time_component.prototype._set_value_on_blur=function(b){var a=b.target.value;if(a==""){b.target.value="00"}else{if(parseInt(a)<b.data._this._single_digit){a=parseInt(a);a=b.data._this.pad_zero(a);b.target.value=a}}};rdx.time_component.prototype.set_am_pm=function(a,b){if(b=="AM"){a.data._this._ampm_textbox.attr("value","PM")}else{a.data._this._ampm_textbox.attr("value","AM")}return};rdx.time_component.prototype.bind_hour=function(){var b=this._properties.default_time;var e=this._properties.hour_format_24;var a=this._default_time.getHours();var d=a%12;if(parseInt(d)<this._single_digit){d=this.pad_zero(d)}if(parseInt(a)<this._single_digit){a=this.pad_zero(a)}this._hour_textbox=$("<input>");this._hour_textbox.attr({type:"text","aria-label":"Input hour"});if(b==false){if(e==false){this._hour_textbox.attr("placeholder","hh").addClass("textbox_attr")}else{this._hour_textbox.attr("placeholder","hh").addClass("textbox_attr")}}else{if(b==true){if(e==false){this._hour_textbox.attr("value",d).addClass("textbox_attr")}else{this._hour_textbox.attr("value",a).addClass("textbox_attr")}}}this._hour_textbox.bind(rdx.events.KEYDOWN,{type:"hour",is_24_hour_format:this._properties.hour_format_24,_this:this},this._handle_key_down);this._hour_textbox.bind(rdx.events.KEYUP,{type:"hour",is_24_hour_format:this._properties.hour_format_24,_this:this},this._handle_key_up);this._hour_textbox.bind(rdx.events.BLUR,{type:"hour",_this:this},this._on_blur)};rdx.time_component.prototype.bind_minutes=function(){var b=this._properties.default_time;var d=this._properties.hour_format_24;var a=this._default_time.getMinutes();if(parseInt(a)<this._single_digit){a=this.pad_zero(a)}this._minute_textbox=$("<input>");this._minute_textbox.attr({type:"text","aria-label":"Input minutes"});if(this._properties.default_time==false){this._minute_textbox.attr("placeholder","mm").addClass("textbox_attr")}else{this._minute_textbox.attr("value",a).addClass("textbox_attr")}this._minute_textbox.bind(rdx.events.KEYDOWN,{type:"minute",_this:this},this._handle_key_down);this._minute_textbox.bind(rdx.events.KEYUP,{type:"minute",_this:this},this._handle_key_up);this._minute_textbox.bind(rdx.events.BLUR,{type:"minute",_this:this},this._on_blur)};rdx.time_component.prototype.bind_seconds=function(){var a=this._properties.default_time;var d=this._properties.hour_format_24;var b=this._default_time.getSeconds();if(parseInt(b)<this._single_digit){b=this.pad_zero(b)}this._second_textbox=$("<input>");this._second_textbox.attr({type:"text","aria-label":"Input seconds"});if(a==false){this._second_textbox.attr("placeholder","ss").addClass("textbox_attr")}else{this._second_textbox.attr("value",b).addClass("textbox_attr")}this._second_textbox.bind(rdx.events.KEYDOWN,{type:"second",_this:this},this._handle_key_down);this._second_textbox.bind(rdx.events.KEYUP,{type:"second",_this:this},this._handle_key_up);this._second_textbox.bind(rdx.events.BLUR,{type:"second",_this:this},this._on_blur)};rdx.time_component.prototype.bind_am_pm=function(){var a=this._default_time.getHours();this._ampm_textbox=$("<input>");this._ampm_textbox.attr({type:"text","aria-label":"AM PM input"});if(this._properties.default_time==true){if(parseInt(a)>=12){this._ampm_textbox.attr("value","PM").addClass("textbox_attr")}else{this._ampm_textbox.attr("value","AM").addClass("textbox_attr")}}else{this._ampm_textbox.attr("value","AM").addClass("textbox_attr")}this._ampm_textbox.bind(rdx.events.KEYDOWN,{type:"am_pm"},this._handle_key_down);this._ampm_textbox.bind(rdx.events.KEYUP,{type:"am_pm"},this._handle_key_up);this._ampm_textbox.bind(rdx.events.BLUR,{type:"am_pm",_this:this},this._on_blur)};rdx.time_component.prototype._on_blur=function(b){var a;if(b.data.type=="hour"){b.data._this._focus="hour";b.data._this._type="hour";b.data._this._set_value_on_blur(b)}else{if(b.data.type=="minute"){b.data._this._focus="minute";b.data._this._type="minute";b.data._this._set_value_on_blur(b)}else{if(b.data.type=="second"){b.data._this._focus="second";b.data._this._type="second";b.data._this._set_value_on_blur(b)}else{if(b.data.type=="am_pm"){b.data._this._focus="am_pm";b.data._this._type="am_pm"}}}}};rdx.time_component.prototype._handle_click_to_increase_value=function(d){var b;var a=d.data._this._focus;if(rdx.utils.is_not_defined(a)){d.data._this._type="hour"}var e=d.data._this._properties.hour_format_24;if(d.data._this._type=="hour"){b=d.data._this._hour_textbox.val();if(e){if(parseInt(b)>=d.data._this._max_hours_is_24){b=0}else{b++}}else{if(parseInt(b)>=d.data._this._max_hour_is_12){b=0}else{b++}}d.data._this._hour_textbox.focus();if(parseInt(b)<10){b=d.data._this.pad_zero(b)}d.data._this._hour_textbox.attr("value",b)}else{if(d.data._this._type=="minute"){b=d.data._this._minute_textbox.val();if(parseInt(b)>=d.data._this._max_mints_sec){b=0}else{b++}d.data._this._minute_textbox.focus();if(parseInt(b)<d.data._this._single_digit){b=d.data._this.pad_zero(b)}d.data._this._minute_textbox.attr("value",b)}else{if(d.data._this._type=="second"){b=d.data._this._second_textbox.val();if(parseInt(b)>=d.data._this._max_mints_sec){b=0}else{b++}d.data._this._second_textbox.focus();if(parseInt(b)<d.data._this._single_digit){b=d.data._this.pad_zero(b)}d.data._this._second_textbox.attr("value",b)}else{if(d.data._this._type=="am_pm"){value=d.data._this._ampm_textbox.val();d.data._this._ampm_textbox.focus();d.data._this.set_am_pm(d,value)}}}}};rdx.time_component.prototype._handle_click_to_decrease_value=function(d){var b;var a=d.data._this._focus;if(rdx.utils.is_not_defined(a)){d.data._this._type="hour"}var e=d.data._this._properties.hour_format_24;if(d.data._this._type=="hour"){b=d.data._this._hour_textbox.val();if(e){if(parseInt(b)==0){b=d.data._this._max_hours_is_24}else{b--}}else{if(parseInt(b)==0){b=d.data._this._max_hour_is_12}else{b--}}d.data._this._hour_textbox.focus();if(parseInt(b)<d.data._this._single_digit){b=d.data._this.pad_zero(b)}d.data._this._hour_textbox.attr("value",b)}else{if(d.data._this._type=="minute"){b=d.data._this._minute_textbox.val();if(parseInt(b)==0){b=d.data._this._max_mints_sec}else{b--}d.data._this._minute_textbox.focus();if(parseInt(b)<d.data._this._single_digit){b=d.data._this.pad_zero(b)}d.data._this._minute_textbox.attr("value",b)}else{if(d.data._this._type=="second"){b=d.data._this._second_textbox.val();if(parseInt(b)==0){b=d.data._this._max_mints_sec}else{b--}d.data._this._second_textbox.focus();if(parseInt(b)<d.data._this._single_digit){b=d.data._this.pad_zero(b)}d.data._this._second_textbox.attr("value",b)}else{if(d.data._this._type=="am_pm"){value=d.data._this._ampm_textbox.val();d.data._this._ampm_textbox.focus();d.data._this.set_am_pm(d,value)}}}}};rdx.time_component.prototype.append_time_picker=function(){var d=$("<span>").append(":").addClass("colon_span");var b=$("<span>").append(":").addClass("colon_span");var f=$("<input>").addClass("spinner-up-button");f.attr({type:"button","aria-label":"Increase"});var a=$("<input>").addClass("spinner-down-button");a.attr({type:"button","aria-label":"Increase"});var e=$("<span/>").append(f,a).addClass("time_component_spinner");f.bind(rdx.events.CLICK,{_this:this,is_24_hour_format:this._properties.hour_format_24},this._handle_click_to_increase_value);a.bind(rdx.events.CLICK,{_this:this,is_24_hour_format:this._properties.hour_format_24},this._handle_click_to_decrease_value);if(this._properties.show_seconds!=true){if(this._properties.hour_format_24!=true){this._time.append(this._hour_textbox,d,this._minute_textbox,this._ampm_textbox,e)}else{this._time.append(this._hour_textbox,d,this._minute_textbox,e)}}else{if(this._properties.hour_format_24!=true){this._time.append(this._hour_textbox,d,this._minute_textbox,b,this._second_textbox,this._ampm_textbox,e)}else{this._time.append(this._hour_textbox,d,this._minute_textbox,b,this._second_textbox,e)}}};rdx.time_component.prototype._create_timepicker=function(){this._timepicker_container=$("<table>").addClass("time_component").append($("<tbody>"));this._parent.append(this._timepicker_container);this._timepicker_row=$("<tr>");this._timepicker_container.append(this._timepicker_row);this._time=$("<td>").addClass("first_column");this._timepicker_row.append(this._time);this.bind_hour();this.bind_minutes();this.bind_seconds();this.bind_am_pm();this.append_time_picker()};rdx.time_component.prototype._handle_key_down=function(d){var s=$(this);var m=s.val();var b=parseInt(m);var n=d.data.is_24_hour_format;var f=d.keyCode;var p=d.data.type;var o="0";var q;if(f>=rdx.keycodes.NUMPAD_ZERO&&f<=rdx.keycodes.NUMPAD_NINE){f=f-48;q=String.fromCharCode(f)}else{q=String.fromCharCode(d.which)}var g=m.concat(q);var e=m.length;var a=d.target;var h=String.fromCharCode(d.target.value)==""?0:parseInt(g);if(!((d.keyCode>=rdx.keycodes.ZERO&&d.keyCode<=rdx.keycodes.NINE)||(d.keyCode>=rdx.keycodes.NUMPAD_ZERO&&d.keyCode<=rdx.keycodes.NUMPAD_NINE)||d.keyCode==rdx.keycodes.BACKSPACE||d.keyCode==rdx.keycodes.TAB||d.keyCode==rdx.keycodes.DELETE)){return false}if(e>2&&((d.keyCode!=rdx.keycodes.BACKSPACE&&d.keyCode!=rdx.keycodes.TAB&&d.keyCode!=rdx.keycodes.DELETE))){return false}else{if(p=="hour"){if(n){if(parseInt(h)>d.data._this._max_hours_is_24){return false}}else{if(parseInt(h)>d.data._this._max_hour_is_12){return false}}}else{if(p=="minute"){if(parseInt(h)>d.data._this._max_mints_sec){return false}}else{if(p=="second"){if(parseInt(h)>d.data._this._max_mints_sec){return false}}else{if(p=="am_pm"){if((q!="AM"||q!="PM")&&d.keyCode!=rdx.keycodes.TAB){return false}}}}}}return true};rdx.time_component.prototype._handle_key_up=function(b){if(rdx.utils.is_defined(b)){var f=(b.keyCode==rdx.keycodes.UP_ARROW)?true:false;var d=(b.keyCode==rdx.keycodes.DOWN_ARROW)?true:false;var a=b.target;var e=b.target.value==""?0:parseInt(b.target.value);var g=b.data.is_24_hour_format;var p=0;var o=0;var h="0";var m=b.target.value;if(rdx.utils.is_defined(b.data)&&rdx.utils.is_defined(a)){var n=b.data.type;if(rdx.utils.is_defined(b.data.type)){if(n=="hour"){if(f){if(g){if(parseInt(e)>=b.data._this._max_hours_is_24){p=0}else{p=e+1}}else{if(parseInt(e)>=b.data._this._max_hour_is_12){p=0}else{p=e+1}}if(parseInt(p)<b.data._this._single_digit){p=p.toString();p=h.concat(p);a.value=p}else{a.value=p}}else{if(d){if(g){if(parseInt(e)==0){o=b.data._this._max_hours_is_24}else{if(parseInt(e)>b.data._this._max_hours_is_24){o=0}else{o=e-1}}}else{if(parseInt(e)==0){o=b.data._this._max_hour_is_12}else{if(parseInt(e)>b.data._this._max_hour_is_12){o=0}else{o=e-1}}}if(parseInt(o)<b.data._this._single_digit){o=o.toString();o=h.concat(o);a.value=o}else{a.value=o}}}}else{if(n=="minute"||n=="second"){if(f){if(parseInt(e)>=b.data._this._max_mints_sec){p=0}else{p=e+1}if(parseInt(p)<b.data._this._single_digit){p=p.toString();p=h.concat(p);a.value=p}else{a.value=p}}else{if(d){if(parseInt(e)==0){o=b.data._this._max_mints_sec}else{if(parseInt(e)>b.data._this._max_mints_sec){o=0}else{o=e-1}}if(parseInt(o)<b.data._this._single_digit){o=o.toString();o=h.concat(o);a.value=o}else{a.value=o}}}}else{if(n=="am_pm"){if(!(g)){if(d||f){if(m==""){m="PM"}if((b.keyCode==rdx.keycodes.BACKSPACE||b.keyCode==rdx.keycodes.TAB)&&(m=="AM"||m=="PM"||m=="")){m=m}else{if(m=="PM"){m="AM"}else{if(m=="AM"){m="PM"}}}a.value=m}}}}}}}b.preventDefault();b.stopPropagation()}else{return true}};rdx.time_slider=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={option:{bounds:{min:(12).months().ago(),max:new Date()},defaultValues:{min:(12).months().ago(),max:new Date()},durationIn:null,durationOut:null,enabled:true,formatter:function(n){var o=n.getDate();var h=rdx.utils.get_month_name(n.getMonth());var g=n.getFullYear();var d=n.getHours();var f=n.getMinutes();var m=n.getSeconds();var e=o+" "+h+" "+g+" "+rdx.utils.get_value_in_two_digits(d)+":"+rdx.utils.get_value_in_two_digits(f)+":"+rdx.utils.get_value_in_two_digits(m)+" ";return e},steps:"minutes",valueLabels:"change"},valuesChanged:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._slider=null};rdx.time_slider.prototype.render=function(){this._slider=this._parent.dateRangeSlider(this._properties.option)};rdx.time_slider.prototype.get_component_type=function(){return rdx.form_constants.TIME_SLIDER};rdx.time_slider.prototype.get_data=function(){var e=this._parent.dateRangeSlider("values");var d=e.min;var b=e.max;var a={start_date:d,start_epoch:d.getTime(),end_date:b,end_epoch:b.getTime()};return a};rdx.time_slider.prototype.set_data=function(a){if(rdx.utils.is_defined(a)){this.reset_bounds(a.min,a.max);this.reset_default_bounds(a.default_min,a.default_max)}};rdx.time_slider.prototype.get_component=function(){return this._slider};rdx.time_slider.prototype.get_field=function(){return this._field};rdx.time_slider.prototype.set_min_bound=function(a){this._properties.option.bounds.min=a};rdx.time_slider.prototype.set_max_bound=function(a){this._properties.option.bounds.max=a};rdx.time_slider.prototype.set_default_min_bound=function(a){this._properties.option.defaultValues.min=a};rdx.time_slider.prototype.set_default_max_bound=function(a){this._properties.option.defaultValues.max=a};rdx.time_slider.prototype.destroy=function(){this._parent.dateRangeSlider("destroy")};rdx.time_slider.prototype.reset_bounds=function(b,a){this.destroy();if(rdx.utils.is_defined(b)){this.set_min_bound(new Date(b))}if(rdx.utils.is_defined(a)){this.set_max_bound(new Date(a))}this.render()};rdx.time_slider.prototype.reset_default_bounds=function(b,a){this.destroy();if(rdx.utils.is_defined(b)){this.set_default_min_bound(new Date(b))}if(rdx.utils.is_defined(a)){this.set_default_max_bound(new Date(a))}this.render()};rdx.regex_field=function(a,b){this._parent=a;this._field=b;this._DEFAULT_PROPERTIES={standalone:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._component=null;this._data=null;this._text_area=null;this._regex_textarea=null;this._regex_options=null;this._result_span=null;this._subject_string_area=null;this._match_container=null;this._token_map={"Zero or one of a":"a?","Zero or more of a":"ba*","One or more of a":"a+","Exactly n of a":"a{n}","n or more of a":"a{n,}","Between m and n of a":"a{m,n}","Greedy quantifier":"a*","Lazy quantifier":"a*?","Possessive quantifier":"a*+","Start of match":"\\G","Start of string":"^","End of string":"$","Start of string(multiline mode)":"\\A","End of string(multiline mode)":"\\Z","Absolute end of string":"\\z","A word boundary":"\\b","Non-word boundary":"\\B","A single character of: a, b or c":"[abc]","A character except: a, b or c":"[^abc]","A character in the range: a-z":"[a-z]","A character not in the range: a-z":"[^a-z]","A character in the range: a-z or A-Z":"[a-zA-Z]","Any single character":".","Any whitespace character":"\\s","Any non-whitespace character":"\\S","Any digit":"\\d","Any non-digit":"\\D","Any word character":"\\w","Any non-word character":"\\W","Any unicode sequences":"\\X","Capture everything enclosed":"(...)","Match either a or b":"(a|b)","Match everything enclosed":"(?:...)","Atomic group":"(?>...)","Duplicate subpattern group":"(?|...)",Comment:"(?#...)","Named capturing group":"(?'name'...)","Named capturing group(alternate)":"(?<name>...)","Inline modifiers":"(?imsxXU)","Conditional statement":"(?(...)|)","Recurse entire pattern":"(?R)","Recurse first subpattern":"(?1)","Recurse first relative subpattern":"(?+1)","Positive lookahead":"(?=...)","Negative lookahead":"(?!...)","Positive lookbehind":"(?<=...)","Negative lookbehind":"(?<!...)",Newline:"\\n","Carriage return":"\\r",Tab:"\\t","Null character":"\\0","Match one byte":"\\C","Unicode newlines":"\\R","Vertical whitespace character":"\\v","Negation of \\v":"\\V","Horizontal whitespace character":"\\h","Negation of \\h":"\\H","Reset match":"\\K","Match nth subpattern":"\\n","Unicode property X":"\\pX","Unicode property":"\\p{...}","Negation of \\p":"\\PX","Negation of any \\p":"\\P{...}","Quote; treat as literals":"\\Q...\\E","Match subpattern `name`":"\\k<name>","Match subpattern `name`(alternate)":"\\k{name}","Match nth group subpattern":"\\gn","Match nth group subpattern(alternate)":"\\g{n}","Match nth relative subpattern":"\\g{-n}","Recurse subpattern `name`":"\\g'name'","Recurse nth subpattern":"\\g<n>","Recurse nth subpattern(alternate)":"\\g<+n>","Hex character YY":"\\xYY","Hex character YYYY":"\\x{YYYY}","Octal character ddd":"\\ddd","Control character Y":"\\cY","Backspace character":"[\\b]","Makes any character literal":"\\","Letters and digits":"[[:alnum:]]",Letters:"[[:alpha:]]","Ascii codes 0-127":"[[:ascii:]]","Space or tab only":"[[:blank:]]","Control characters":"[[:cntrl:]]","Decimal digits":"[[:digit:]]","Visible characters (not space)":"[[:graph:]]","Lowercase letters":"[[:lower:]]","Visible characters":"[[:print:]]","Visible punctuation characters":"[[:punct:]]",Whitespace:"[[:space:]]","Uppercase letters":"[[:upper:]]","Word characters":"[[:word:]]","Hexadecimal digits":"[[:xdigit:]]",Verbs:"(*UTF16)",Multiline:"m","Case insensitive":"i","Ignore whitespace":"x","Single line":"s",Unicode:"u",eXtended:"X",Ungreedy:"U",Anchor:"A"};this._modifier_array=["m","i","x","s","u","X","U","A"];this._resource_name="regex_evaluator"};rdx.regex_field.prototype.render=function(){this._component=$("<div>").addClass("regex_field");this._render_textarea_and_link();this._parent.append(this._component);return this};rdx.regex_field.prototype._render_textarea_and_link=function(){var b=$.extend({},{},this._field._properties);b.input_type=rdx.form_constants.TEXT_AREA;b.add_link={click_handler_callback:new rdx.callback(this,this.show_regex_editor),label:rdx.i18n.get_string("rdx.regex_editor_label"),tooltip:rdx.i18n.get_string("rdx.regex_editor_tooltip")};var a=new rdx.form_field(b);this._text_area=new rdx.text_area(this._component,a).render();this._text_area.get_component().attr("spellcheck",false)};rdx.regex_field.prototype.show_regex_editor=function(e,a){var d=$("<div>").addClass("regex-container");if(rdx.utils.is_defined(a)){this._create_regex_editor(d,a)}else{var f=this._text_area.get_data();this._create_regex_editor(d,this._text_area,f)}var b=this;if(!rdx.page.is_slider_visible()){slider_container=rdx.page.show_slider({});slider_container.show()}this._regex_editor_container_div=rdx.page.get_slider_crumb().crumb.add_container(rdx.i18n.get_string("rdx.regex_editor_label"),d)};rdx.regex_field.prototype._create_regex_editor=function(s,w,b){var z=this;var f=$("<div>").addClass("left-regex-container");var D=$("<div>").addClass("regular-expression");var I=$("<div>").addClass("regular-expression-header").append(rdx.i18n.get_string("rdx.regular_expression"));this._regex_textarea=$("<textarea />").addClass("regex-textarea").attr({autofocus:"autofocus",placeholder:rdx.i18n.get_string("rdx.regex_placeholder"),rows:"1",tabindex:"1",spellcheck:false});this._regex_textarea.val(b);this._regex_textarea.bind("keydown",{regex_editor:this},function(L){z._restore_message_status(L)});this._regex_textarea.bind("paste",{regex_editor:this},function(L){z._restore_message_status(L)});this._regex_options=$("<input />").addClass("regex-options-input").attr({type:"text",placeholder:"mixXsuUA",size:"20",tabindex:"2",value:""});var g=$("<span>").addClass("start-regex").append("/");var E=$("<span>").addClass("end-regex").append("/");var F=$("<div>").addClass("clearfix").append(g).append(this._regex_textarea).append(E).append(this._regex_options);D.append(I);D.append(F);var H=$("<div>").addClass("subject-string");var e=$("<div>").addClass("subject-string-header");this._result_span=$("<span>").addClass("message").addClass("no-match");this._result_span.append(rdx.i18n.get_string("rdx.not_matched_label"));this._result_span.hide();var G=$("<div>").addClass("subject-string-text").append("Subject String");e.append(G);e.append(this._result_span);this._subject_string_area=$("<div>").addClass("subject-string-textarea").attr({contenteditable:true,spellcheck:false});this._subject_string_area.bind("keydown",{regex_editor:this},function(L){z._remove_all_elements(L)});this._subject_string_area.bind("paste",{regex_editor:this},function(L){z._remove_all_elements(L)});var q=$("<div>").addClass("evaluate-button-bar");var A=new rdx.button_bar(q,new rdx.form_field({properties:{add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.expression_evaluator.title"),grey_button_click_handler_callback:new rdx.callback(this,this._evaluate_regex)}})).render();H.append(e);H.append(this._subject_string_area);H.append(q);f.append(D);f.append(H);var v=$("<div>").addClass("right-regex-container");var n=$("<div>").addClass("tokens-block");var u=$("<div>").addClass("tokens-header").append("Tokens");var d=$("<div>").addClass("tokens-list");var t=this._token_map;for(var K in t){if(t.hasOwnProperty(K)){var J=t[K];var m=$("<span>").addClass("regex-span-token").append(J);var h=$("<div>").addClass("regex-tokens").attr("data-symbol",J).append(K).append(m);d.append(h)}}n.append(u);n.append(d);d.bind(rdx.events.CLICK,{regex_editor:this},function(L){z._get_regex_token(L)});d.disableSelection();var B=$("<div>").addClass("match-information");var a=$("<div>").addClass("match-information-header").append(rdx.i18n.get_string("rdx.match_information"));this._match_container=$("<div>").addClass("match-information-container");var p=$("<div>").append(rdx.i18n.get_string("rdx.match_information_message"));this._match_container.append(p);B.append(a);B.append(this._match_container);v.append(n);v.append(B);s.append(f);s.append(v);var C=$("<div>").addClass("buttons-bar");var o=new rdx.button_bar(C,new rdx.form_field({properties:{add_blue_button:true,blue_button_label:rdx.i18n.get_string("rdx.ok_label"),blue_button_click_handler_callback:new rdx.callback(this,this._save_and_return_regex_data,[s,w]),add_grey_button:true,grey_button_label:rdx.i18n.get_string("rdx.form_close_button_label"),grey_button_click_handler_callback:new rdx.callback(this,this._handle_close_button,[s])}})).render();s.append(C)};rdx.regex_field.prototype._evaluate_regex=function(f){var e=this._regex_textarea.val();e=e.replace(/\//g,"\\/");var b=$.trim(this._regex_options.val());var d=this._subject_string_area.html().trim().replace(/<div(\s*)\/*>/ig,"\n").replace(/<\/div>/ig,"").replace(/<br(\s*)\/*>/ig,"\n").replace(/(<p>)/ig,"").replace(/(<\/p>)/ig,"\n").replace(/&nbsp;/ig,"").replace(/&amp;/ig,"&").trim();var h=this._resource_name;if(rdx.utils.is_defined(this._properties.resource_name)){h=this._properties.resource_name}var a=rdx.utils.get_resource(h);var g={regex:e,options:b,subject:d};this._match_container.empty();this._match_container.append(rdx.i18n.get_string("rdx.regex_processing"));rdx.model.post(a,new rdx.callback(this,this._regex_response_arrived,[d]),g,null,null)};rdx.regex_field.prototype._regex_response_arrived=function(g,f){var q=g.match_information["information"];var m=null;var p=null;var o=false;var d=false;this._match_container.empty();this._result_span.empty();if(rdx.utils.is_defined(g.match_information["matches"])){m=g.match_information["matches"]}if(rdx.utils.is_defined(g.match_information["error"])){p=g.match_information["error"]}if(q.indexOf(rdx.i18n.get_string("rdx.match_groups"))>-1){o=true}else{if(q.indexOf(rdx.i18n.get_string("rdx.no_match_groups"))>-1){o=false}else{if(q.indexOf(rdx.i18n.get_string("rdx.no_pattern_match"))>-1){q=q.replace(rdx.i18n.get_string("rdx.not_text"),'<span class="not-matched">'+rdx.i18n.get_string("rdx.not_text")+"</span>");d=true}}}var n=$("<div>").append(q);this._match_container.append(n);this._result_span.removeClass("no-match");this._result_span.removeClass("match");this._result_span.removeClass("error");this._subject_string_area.removeClass("font-color-green");this._subject_string_area.removeClass("font-color-red");if(rdx.utils.is_defined(m)){d=false;for(var h=0;h<m.length;h++){var t=m[h];if(rdx.utils.is_defined(t)){var s=t.match_string;if(o){var a=h+1;var e=$("<div>").append(a+". "+s);this._match_container.append(e)}}}this._result_span.addClass("match");this._result_span.append(rdx.i18n.get_string("rdx.matched_label"));this._subject_string_area.addClass("font-color-green")}else{if(rdx.utils.is_defined(p)){var b=$("<div>").append(p);this._match_container.append(b);this._result_span.addClass("error");this._result_span.append(rdx.i18n.get_string("rdx.error_label"));this._subject_string_area.addClass("font-color-red")}else{if(d){this._result_span.addClass("no-match");this._result_span.append(rdx.i18n.get_string("rdx.not_matched_label"));this._subject_string_area.addClass("font-color-red")}}}this._result_span.show()};rdx.regex_field.prototype._clear_message_span=function(){this._result_span.hide();this._result_span.empty();this._result_span.removeClass("match");this._result_span.removeClass("error");this._result_span.addClass("no-match");this._result_span.append(rdx.i18n.get_string("rdx.not_matched_label"));this._match_container.empty();var a=$("<div>").append(rdx.i18n.get_string("rdx.match_information_message"));this._match_container.append(a)};rdx.regex_field.prototype._restore_message_status=function(a){this._clear_message_span()};rdx.regex_field.prototype._remove_all_elements=function(a){this._clear_message_span();if(this._subject_string_area.text().length===0){this._subject_string_area.empty()}this._subject_string_area.removeClass("font-color-green");this._subject_string_area.removeClass("font-color-red")};rdx.regex_field.prototype._save_and_return_regex_data=function(e,b,a){var d=this._regex_textarea.val();this.set_data(d,a);this._handle_close_button(e,b)};rdx.regex_field.prototype._handle_close_button=function(b,a){a.remove();if(rdx.page.get_slider_crumb().get_current_crumb().index<=0){rdx.page.hide_slider()}else{rdx.page.get_slider_crumb().remove_current_crumb()}$(this._regex_editor_container_div).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});this._regex_editor_container_div.remove()};rdx.regex_field.prototype._get_regex_token=function(b){b.preventDefault();var e=b.target||b.srcElement||b.originalTarget;e=$(e);if(e.hasClass("regex-span-token")){while(true){if(e.hasClass("regex-tokens")){break}e=e.parent()}}var d=e.attr("data-symbol");var a=$.inArray(d,this._modifier_array);if(a===-1){this._regex_textarea.val(this._regex_textarea.val()+d)}else{this._regex_options.val(this._regex_options.val()+d)}};rdx.regex_field.prototype.add_event_handler=function(a,b){this._component.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.regex_field.prototype.get_component_type=function(){return rdx.form_constants.REGULAR_EXPRESSION_FIELD_AND_EDITOR};rdx.regex_field.prototype.get_component=function(){return this._component};rdx.regex_field.prototype.get_field=function(){return this._field};rdx.regex_field.prototype.set_data=function(b,a){this._data=b;if(this._properties.standalone==false){rdx.utils.insert_at_caret(a,b)}else{this._text_area.set_data(b)}};rdx.regex_field.prototype.get_data=function(){return this._text_area.get_data()};rdx.color_picker_component=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._field=b;var d={show_input:true,show_alpha:true,show_color_palette:true,preferred_format:null,allow_empty:true,show_flat:false,disbaled:false,choose_button_label:"Select",cancel_button_label:"Cancel",color_palette:[["rgb(0, 0, 0)","rgb(102, 102, 102)","rgb(204, 204, 204)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)"],["rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)"],["rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)"],["rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)"],["rgb(166, 77, 121)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)"],["rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)"]]};this._properties=$.extend({},d,b.get_properties());this._colorpicker_container=null;this._custom_input_text=null;this._view_link_map={};this._link_properties=null};rdx.color_picker_component.prototype.render=function(){this._create_colorpicker();this._create_event_bindings();this._attach_color_picker();return this};rdx.color_picker_component.prototype._attach_color_picker=function(){var a={};if(this._properties.show_input){a.showInput=this._properties.show_input}if(this._properties.show_color_palette){a.showPalette=this._properties.show_color_palette}if(this._properties.show_alpha){a.showAlpha=this._properties.show_alpha}if(this._properties.color_palette){a.palette=this._properties.color_palette}if(this._properties.preferred_format){a.preferredFormat=this._properties.preferred_format}if(this._properties.allow_empty){a.allowEmpty=this._properties.allow_empty}if(this._properties.show_flat){a.flat=this._properties.show_flat}if(this._properties.disbaled){a.disbaled=this._properties.disbaled}if(this._properties.choose_button_label){a.chooseText=this._properties.choose_button_label}if(this._properties.cancel_button_label){a.cancelText=this._properties.cancel_button_label}this._custom_input_text.spectrum(a);this._custom_input_text.show()};rdx.color_picker_component.prototype._create_event_bindings=function(){this._custom_input_text.bind(rdx.events.CHANGE,{color_picker_component:this},function(a){a.data.color_picker_component._custom_input_text.spectrum("set",a.data.color_picker_component.get_data());a.stopPropagation()})};rdx.color_picker_component.prototype._create_colorpicker=function(){this._colorpicker_container=$("<div>").addClass("colorpicker_component");this._custom_input_text=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("spectrum_textbox");this._colorpicker_container.append(this._custom_input_text);this._parent.append(this._colorpicker_container)};rdx.color_picker_component.prototype.set_data=function(a){if(rdx.utils.is_not_defined(a)){return}this._custom_input_text.val(a);this._custom_input_text.trigger(rdx.events.CHANGE);return};rdx.color_picker_component.prototype.get_data=function(){return this._custom_input_text.val()};rdx.color_picker_component.prototype.get_component_type=function(){return rdx.form_constants.COLOR_PICKER};rdx.color_picker_component.prototype.get_component=function(){return this._colorpicker_container};rdx.color_picker_component.prototype.get_field=function(){return this._field};rdx.color_picker_component.prototype.toggle_read_only=function(a){if(a){this._custom_input_text.removeAttr("readonly");this._custom_input_text.removeClass("form_field_disabled");this._custom_input_text.unbind(rdx.events.KEYDOWN,this._prevent_default);this._custom_input_text.spectrum("enable")}else{this._custom_input_text.attr("readonly","true");this._custom_input_text.addClass("form_field_disabled");this._custom_input_text.bind(rdx.events.KEYDOWN,null,this._prevent_default);this._custom_input_text.spectrum("disable")}};rdx.toggle_component=function(a,b){this._parent=typeof(a)=="string"?$("#"+a):a;this._DEFAULT_PROPERTIES={label:"",enabled:false,change_handler_callback:null,data_populate_callback:null,display_on_off_label:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.get_properties());this._field=b};rdx.toggle_component.prototype.render=function(){this.toggle_container=$("<div>").addClass("toggle_component_container");this.toggle_button=$("<div>").addClass("toggle_button").attr("tabindex",0).appendTo(this.toggle_container).attr("title","Click to toggle selection");var a=$("<span>").appendTo(this.toggle_button).addClass("icon");this._status_text=$("<span>").appendTo(this.toggle_container).addClass("state");if(this._properties.display_on_off_label===false){this._status_text.addClass("hide")}this.toggle_button.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{toggle_component:this},function(b){b.data.toggle_component._handle_click(b)});if(this._properties.change_handler_callback){this.toggle_button.bind(rdx.events.CHANGE+" "+rdx.events.KEY_PRESS,{change_handler_callback:this._properties.change_handler_callback,that:this},function(b){if(rdx.utils.is_defined(b.keyCode)&&b.keyCode!==13){return}else{b.data.change_handler_callback.call_back([b.data.that])}})}this._parent.append(this.toggle_container);this.data_populate_callback()};rdx.toggle_component.prototype.data_populate_callback=function(){if(rdx.utils.is_defined(this._properties.data_populate_callback)){var d=this;var b=this._properties.data_populate_callback;var a=new rdx.callback_params({return_callback:new rdx.callback(function(f,e){e.set_data(f)},[d])});b.call_back([a])}else{this.set_data(this._properties.enabled)}};rdx.toggle_component.prototype._handle_click=function(b){var a=b.data.toggle_component;if(a.toggle_button.hasClass("state-on")){a.toggle_button.removeClass("state-on").addClass("state-off");this._status_text.text("OFF")}else{a.toggle_button.addClass("state-on").removeClass("state-off");this._status_text.text("ON")}a.toggle_button.trigger(rdx.events.CHANGE)};rdx.toggle_component.prototype.add_event_handler=function(a,b){this.toggle_button.bind(a,{ns_callback:b},function(d){d.data.ns_callback.call_back([d])})};rdx.toggle_component.prototype.set_data=function(a){if(a===true||a==="true"){this.toggle_button.removeClass("state-off").addClass("state-on");this._status_text.text("ON")}else{this.toggle_button.removeClass("state-on").addClass("state-off");this._status_text.text("OFF")}};rdx.toggle_component.prototype.get_field=function(){return this._field};rdx.toggle_component.prototype.get_data=function(a){if(this.toggle_button.hasClass("state-on")){return true}return false};rdx.toggle_component.prototype.get_component=function(){return this.toggle_container};rdx.toggle_component.prototype.get_parent=function(){return this._parent};rdx.toggle_component.prototype.get_component_type=function(){return rdx.form_constants.TOGGLE_COMPONENT};rdx.file_upload=function(a,d){var e={url:"",method:rdx.ajax_handler_constants.POST,encoding_type:"multipart/form-data",file_component_name:"",resource_name:null,close_upload_window_on_success:true,dialog_mode:true,upload_success_callback:null,upload_error_callback:null,check_for_duplicate:true,custom_validator:null,is_image_validator:false,class_names:"",add_submit_button:true,add_download_button:false,download_callback:null,submit_button_class_name:null,validate_on_submit:true,mask_on_success:true,file_path:null,remote_dir_path:null,remote_resource:null,delete_resource:null,append_default_path:true,filter_filetype:null,read_resource:null,upload_url:null,mkdir_resource:"",download_resource:"",show_dirs:true,local:true,remote:false,default_type:"local",resource_response_callback:null,show_header:true,append_path:true,remotefiledir:null,placeholder:"",inline_upload:false,pagination:false,search:false,value:"",input_read_only:false,text_box_width:null,read_filecontent_as_object:false,read_filecontent_from_client:false,max_file_size:null,process_filedata_as_base64:false,show_select_component:rdx.form_constants.RADIO_BUTTON,open_file_upload_on_load_in_direct_mode:true,store_user_data:false,auto_upload:false,multiple_selection_allowed:false,is_image_preview:false,image_preview_url:"",resource_operations:{upload:false,download:false,view:false,remove:false,create_dir:false,zip:false},file_browser_display_columns:{name:true,is_dir:true,modified_timestamp:true,accessed_timestamp:true,size:false},view_context:null,resource_properties:null};var b={minHeight:50,width:350,modal:true,resizable:false,dialogClass:"configure_view",title:rdx.i18n.get_string("rdx.file_upload_title")};this._properties=$.extend({},e,a);this._properties.file_browser_display_columns=$.extend(true,e.file_browser_display_columns,a.file_browser_display_columns);this._dialog_properties=$.extend({},b,d);this._dialog_properties.title=rdx.i18n.get_string(this._dialog_properties.title);this._file_upload=$("<div>").addClass(this._properties.class_names);this._user_data={};this._properties.file_element_id=rdx.utils.random();this._file_element;this._submit_button;this._is_loaded=false;this._form=null;this._custom_input_text;this._multi_select_display_component;this._custom_img_object;this._preview_img_element;this._current_file_name;this._parent_table;this._selected_type;this._str_local=rdx.i18n.get_string("rdx.local");this._str_remote=rdx.i18n.get_string("rdx.remote");this._mask_id="__file_upload_"+this._properties.url};rdx.file_upload.prototype.render=function(){this._form=$("<form>");this._set_form_attributes(this._form);this._parent_table=$("<div>").addClass("fileupload_div");var b=$("<div>");this._parent_table.append(b);if(this._properties.multiple_selection_allowed){this._properties.show_select_component=rdx.form_constants.CHECK_BOX;this._multi_select_display_component=$("<div>").addClass("multi_selection_fileupload");if(rdx.utils.is_not_empty(this._properties.placeholder)){this._multi_select_display_component.attr("data-placeholder",rdx.i18n.get_string(this._properties.placeholder))}else{this._multi_select_display_component.attr("data-placeholder","Selected Files:")}b.removeClass("fileupload_button");this._parent_table.append(this._multi_select_display_component);this._browse_textbox=this._multi_select_display_component}else{this._custom_input_text=rdx.dom_utils.get_element(rdx.form_constants.TEXT_BOX).addClass("fileupload_textbox").attr("aria-label","File name");if(rdx.utils.is_not_empty(this._properties.placeholder)){this._custom_input_text.attr("placeholder",rdx.i18n.get_string(this._properties.placeholder))}if(rdx.utils.is_not_empty(this._properties.value)){this._custom_input_text.val(rdx.i18n.get_string(this._properties.value))}if(rdx.utils.is_defined(this._properties.text_box_width)){this._custom_input_text.css("width",this._properties.text_box_width)}this._custom_input_text.attr("tabindex","-1");var d=$("<div>").addClass("fileupload_td_textbox").append(this._custom_input_text);b.addClass("fileupload_button");this._browse_textbox=d;this._parent_table.append(d);if(this._is_image_preview()){this._preview_img_element=$("<img>").attr("src","").attr("height",60).attr("width",60).attr("alt","Icon Image").attr("style","display: none;");var g=$("<div>").addClass("fileupload_img_preview").append(this._preview_img_element);this._parent_table.append(g)}}this._browse_button_div=this._create_browse_button_div();b.append(this._browse_button_div);if(this._properties.add_download_button===true){this._download_button=this._get_download_button();this._download_button.hide();var f=$("<div>").addClass("file_upload_submit_button").append(this._download_button);this._parent_table.append(f)}if(this._properties.add_submit_button===true){this._submit_button=this._get_submit_button();var f=$("<div>").addClass("file_upload_submit_button").append(this._submit_button);this._parent_table.append(f)}var e=$("<iframe>").attr("frameborder",0).attr("width","0px").attr("height","0px").hide();var h="upload_data_holder_"+Math.round(Math.random()*100);e.attr("id",h);e.attr("name",h);this._form.attr("target",h);this._form.append(this._parent_table);this._file_upload.append(this._form);this._file_upload.append(e);var a=this;e.bind(rdx.events.LOAD,{iframe:e,file_upload:this},function(o){if(!a._is_loaded){a._is_loaded=true;return}if(rdx.utils.is_defined(o.data.file_upload._selected_type)&&o.data.file_upload._selected_type==o.data.file_upload._str_local){rdx.mask.unmask(o.data.file_upload._mask_id);var p=o.data.iframe.contents().text();if(rdx.utils.is_not_defined(p)){a._handle_error();return}if(rdx.utils.is_empty(p)){return}try{var m=JSON.parse(p)}catch(n){rdx.message_box.error(n)}if(m[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]==0){a._handle_success()}else{a._handle_error(m)}a._current_file_name=a.get_file_name();a._file_element.val("");if(this._properties.multiple_selection_allowed){a._multi_select_display_component.children().remove()}else{a._custom_input_text.val("")}}});this._form.bind(rdx.events.SUBMIT,{file_upload:a},function(p,q){if(!p.data.file_upload._is_loaded){return false}if(rdx.utils.is_defined(p.data.file_upload._selected_type)&&p.data.file_upload._selected_type==p.data.file_upload._str_local){var o=p.data.file_upload;var n=o.validate();if(rdx.utils.is_not_defined(n)){n=true}if(n){if(o._properties.check_for_duplicate&&rdx.utils.is_defined(o._properties.resource_name)&&rdx.utils.is_not_defined(q)){o._check_for_duplicate();return false}if(rdx.utils.is_not_defined(window.FormData)){rdx.status_bar.display_activity(rdx.i18n.get_string("rdx.file_upload_status_start",{file_name:o._file_element.val()}));rdx.mask.mask(o._file_upload,p.data.file_upload._mask_id)}else{if(o._properties.dialog_mode==true||o._properties.inline_upload==true){var m=new rdx.file_upload_controller();m._show_progress_for_upload(o)}return false}if(o._properties.validate_on_submit!=true){return true}}return n}else{return true}});if(this._properties.dialog_mode){this.get_component().dialog(this._dialog_properties)}if(this._properties.direct_upload==true&&rdx.utils.is_defined(window.FormData)&&this._properties.open_file_upload_on_load_in_direct_mode){this.get_component().dialog("close");this._browse_label.trigger(rdx.events.CLICK)}return this};rdx.file_upload.prototype._create_browse_button_div=function(){this._file_element=this._get_file_element().attr("aria-label","click to chooose file");var a=$("<div>").addClass("fileupload_browse_button");if(rdx.utils.is_ie()){this._browse_arrow=$("<button>").addClass("fileupload_browse_arrow").attr("aria-label","press down to open chooser");this._browse_label=$("<label>").addClass("fileupload_browse_label").attr("tabindex",0).text(rdx.i18n.get_string("rdx.choose_file"));this._add_button=$("<span>").addClass("cus_file").append(this._file_element).append(this._browse_label).append(this._browse_arrow);this._local_label=$("<label>").append(this._str_local);this._local_list_element=$("<li>").append($("<span>").attr("tabindex",0).html(this._local_label)).append($("<span>").addClass("tick"));this._appliance_list_element=$("<li>").append($("<span>").attr("tabindex",0).html(rdx.i18n.get_string("rdx.appliance"))).append($("<span>").addClass("tick"));this._local_label.attr("for",this._properties.file_element_id)}else{this._browse_arrow=$("<button>").addClass("fileupload_browse_arrow").attr("aria-label","press down to open chooser");this._browse_label=$("<span>").addClass("fileupload_browse_label").attr("tabindex",0).text(rdx.i18n.get_string("rdx.choose_file"));this._add_button=$("<span>").addClass("cus_file").append(this._browse_label).append(this._browse_arrow).append(this._file_element);this._local_list_element=$("<li>").attr("tabindex",0).append($("<span>").append(this._str_local)).append($("<span>").addClass("tick"));this._appliance_list_element=$("<li>").attr("tabindex",0).append($("<span>").text(rdx.i18n.get_string("rdx.appliance"))).append($("<span>").addClass("tick"))}this._drop_down_div=$("<ul>").addClass("cus_dropdown").attr("style","overflow: hidden; display: none;");if(this._properties.local){this._drop_down_div.append(this._local_list_element)}if(this._properties.remote){this._drop_down_div.append(this._appliance_list_element)}if((rdx.utils.is_defined(this._properties.default_type)&&this._properties.default_type==this._str_remote)||(this._properties.local==false)){this._selected_type=this._str_remote;this._appliance_list_element.addClass("selected");if(!this._properties.multiple_selection_allowed){this._custom_input_text.removeAttr("readonly")}}else{this._selected_type=this._str_local;this._local_list_element.addClass("selected");if(!this._properties.multiple_selection_allowed){this._custom_input_text.attr("readonly","true")}}if(this._properties.input_read_only==true){if(!this._properties.multiple_selection_allowed){this._custom_input_text.attr("readonly","true")}}if(rdx.utils.is_ie()){if(this.is_local_selected()){this._browse_label.attr("for",this._properties.file_element_id);if(rdx.utils.get_browser_version().indexOf("8")==0){this._file_element.removeClass("file fileupload_transparent");this._file_element.addClass("file fileupload_transparent_ie")}}else{this._browse_label.attr("for","undefined");if(rdx.utils.get_browser_version().indexOf("8")==0){this._file_element.removeClass("file fileupload_transparent_ie");this._file_element.addClass("file fileupload_transparent")}}}this._add_button.append(this._drop_down_div);this._drop_down_div.on("keydown",this.move_focus_to_next_list_element);a.append(this._add_button);this._create_event_bindings();return a};rdx.file_upload.prototype.move_focus_to_next_list_element=function(a){if(event.keyCode!==13&&event.keyCode!==9){var b=$(document.activeElement);if(b.siblings().length!==0&&b.hasClass("selected")){var d=b.removeClass("selected").next();if(d[0]){d.addClass("selected").focus()}else{b.prev().addClass("selected").focus()}}}};rdx.file_upload.prototype._create_event_bindings=function(){this._browse_arrow.bind("click keyup",{file_upload:this},function(e){if(rdx.utils.is_defined(e.keyCode)&&e.keyCode!==13&&e.keyCode!==40){return}rdx.utils.slide_up_down(e.data.file_upload._drop_down_div,false);var d=$(e.data.file_upload._local_list_element);d.addClass("selected").focus();var b=d.next();if(b[0]){b.removeClass("selected")}$(document).bind(rdx.events.CLICK+".filebrowser",{file_upload:e.data.file_upload},function(f){f.data.file_upload._drop_down_div.hide();$(document).unbind(rdx.events.CLICK+".filebrowser");f.stopPropagation()});e.stopPropagation();e.preventDefault()});var a=function(b){if(rdx.utils.is_defined(b.keyCode)&&b.keyCode!==13&&b.keyCode!==40){return}b.data.file_upload._drop_down_div.hide();b.data.file_upload._local_list_element.removeClass("selected");b.data.file_upload._appliance_list_element.removeClass("selected");$(this).addClass("selected");if($(this).text()!=b.data.file_upload._str_local){b.data.file_upload._selected_type=b.data.file_upload._str_remote;if(b.data.file_upload._properties.input_read_only==true){if(!b.data.file_upload._properties.multiple_selection_allowed){b.data.file_upload._custom_input_text.attr("readonly","true")}}else{if(!b.data.file_upload._properties.multiple_selection_allowed){b.data.file_upload._custom_input_text.removeAttr("readonly")}}if(rdx.utils.is_ie()){b.data.file_upload._browse_label.attr("for","undefined");if(rdx.utils.get_browser_version().indexOf("8")==0){b.data.file_upload._file_element.removeClass("file fileupload_transparent_ie");b.data.file_upload._file_element.addClass("file fileupload_transparent")}}new rdx.file_browser(b.data.file_upload,{root_directory:b.data.file_upload._properties.remote_dir_path,mask_dir_path:b.data.file_upload._properties.mask_dir_path,append_path:b.data.file_upload._properties.append_path,show_header:b.data.file_upload._properties.show_header,file_browser_display_columns:b.data.file_upload._properties.file_browser_display_columns,filter_filetype:b.data.file_upload._properties.filter_filetype,remotefiledir:b.data.file_upload._properties.remotefiledir,show_dirs:b.data.file_upload._properties.show_dirs,resource_operations:b.data.file_upload._properties.resource_operations,view_context:b.data.file_upload._properties.view_context,resource_properties:b.data.file_upload._properties.resource_properties,file_component_name:b.data.file_upload._properties.file_component_name,remote_resource:b.data.file_upload._properties.remote_resource,read_resource:b.data.file_upload._properties.read_resource,upload_url:b.data.file_upload._properties.upload_url,mkdir_resource:b.data.file_upload._properties.mkdir_resource,download_resource:b.data.file_upload._properties.download_resource,delete_resource:b.data.file_upload._properties.delete_resource,pagination:b.data.file_upload._properties.pagination,search:b.data.file_upload._properties.search,show_select_component:b.data.file_upload._properties.show_select_component,multiple_selection_allowed_for_upload:b.data.file_upload._properties.multiple_selection_allowed,resource_response_callback:b.data.file_upload._properties.resource_response_callback,select_callback:new rdx.callback(b.data.file_upload,rdx.file_upload.select_callback_function)},b.data.file_upload._properties.dialog_properties).render()}else{b.data.file_upload._selected_type=b.data.file_upload._str_local;if(!b.data.file_upload._properties.multiple_selection_allowed){b.data.file_upload._custom_input_text.attr("readonly","true")}if(rdx.utils.is_ie()){b.data.file_upload._browse_label.attr("for",b.data.file_upload._properties.file_element_id);if(rdx.utils.get_browser_version().indexOf("8")==0){b.data.file_upload._file_element.removeClass("file fileupload_transparent");b.data.file_upload._file_element.addClass("file fileupload_transparent_ie")}}else{b.data.file_upload._file_element.trigger(rdx.events.CLICK);b.data.file_upload._drop_down_div.hide()}}b.stopPropagation()};this._appliance_list_element.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{file_upload:this},a);this._local_list_element.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{file_upload:this},a);this._browse_label.bind("click keyup",{file_upload:this},function(b){if(b&&b.keyCode&&b.keyCode!==13&&b.keyCode!==40){return}b.stopPropagation();b.data.file_upload._drop_down_div.hide();if(b.data.file_upload._appliance_list_element.hasClass("selected")){b.data.file_upload._selected_type=b.data.file_upload._str_remote;if(!b.data.file_upload._properties.multiple_selection_allowed){if(b.data.file_upload._properties.input_read_only==true){b.data.file_upload._custom_input_text.attr("readonly","true")}else{b.data.file_upload._custom_input_text.removeAttr("readonly")}}new rdx.file_browser(b.data.file_upload,{root_directory:b.data.file_upload._properties.remote_dir_path,mask_dir_path:b.data.file_upload._properties.mask_dir_path,append_path:b.data.file_upload._properties.append_path,show_header:b.data.file_upload._properties.show_header,remotefiledir:b.data.file_upload._properties.remotefiledir,filter_filetype:b.data.file_upload._properties.filter_filetype,file_browser_display_columns:b.data.file_upload._properties.file_browser_display_columns,view_context:b.data.file_upload._properties.view_context,show_dirs:b.data.file_upload._properties.show_dirs,resource_operations:b.data.file_upload._properties.resource_operations,resource_properties:b.data.file_upload._properties.resource_properties,file_component_name:b.data.file_upload._properties.file_component_name,remote_resource:b.data.file_upload._properties.remote_resource,read_resource:b.data.file_upload._properties.read_resource,upload_url:b.data.file_upload._properties.upload_url,mkdir_resource:b.data.file_upload._properties.mkdir_resource,download_resource:b.data.file_upload._properties.download_resource,delete_resource:b.data.file_upload._properties.delete_resource,pagination:b.data.file_upload._properties.pagination,show_select_component:b.data.file_upload._properties.show_select_component,search:b.data.file_upload._properties.search,multiple_selection_allowed_for_upload:b.data.file_upload._properties.multiple_selection_allowed,resource_response_callback:b.data.file_upload._properties.resource_response_callback,select_callback:new rdx.callback(b.data.file_upload,rdx.file_upload.select_callback_function)}).render()}else{b.data.file_upload._selected_type=b.data.file_upload._str_local;if(!b.data.file_upload._properties.multiple_selection_allowed){b.data.file_upload._custom_input_text.attr("readonly","true")}if(!rdx.utils.is_ie()){b.data.file_upload._file_element.trigger(rdx.events.CLICK)}}});this._file_element.bind(rdx.events.CHANGE,{file_upload:this},function(f){f.data.file_upload.set_selected_type(f.data.file_upload._str_local);if(f.data.file_upload._properties.read_filecontent_from_client){var e=f.data.file_upload;var d=f.target;if(rdx.utils.is_defined(e._properties.max_file_size)){if(parseInt(d.files[0].size/(1024*1024))>15){rdx.message_box.error("File size greater than 15MB cannot be uploaded.");return}}var b=new FileReader();b.onload=function(){var m=b.result;var g=m;e._current_file_name=e.get_file_name();if(e._properties.read_filecontent_as_object==true){g={name:e._current_file_name,contents:m}}f.data.file_upload.set_data(g);var h=$(document.body).find(".file_upload_tbody");if(h.hasClass("error_text")){h.removeClass("error_text")}};b.readAsDataURL(d.files[0])}if(f.data.file_upload._is_image_preview()){f.data.file_upload.upload_img_for_preview(f.data.file_upload._file_element)}if(f.data.file_upload._is_image_validator()){f.data.file_upload.upload_img_file(f.data.file_upload._file_element)}if(rdx.utils.is_not_empty(f.data.file_upload.get_file_name())){f.data.file_upload._current_file_name=f.data.file_upload.get_file_name()}if(f.data.file_upload._properties.direct_upload==true&&rdx.utils.is_defined(window.FormData)){f.data.file_upload._form.trigger("submit")}else{f.data.file_upload.set_input_text(f.data.file_upload.get_file_name());if(f.data.file_upload._properties.auto_upload===true){f.data.file_upload._form.trigger("submit");if(f.data.file_upload._properties.add_download_button===true){f.data.file_upload._download_button.show()}}}});this._browse_label.bind("mousedown",function(){$(this).addClass("active")});this._browse_label.bind("mouseup",function(){$(this).removeClass("active")});this._browse_arrow.bind("mousedown",function(){$(this).addClass("active")});this._browse_arrow.bind("mouseup",function(){$(this).removeClass("active")})};rdx.file_upload.prototype.set_input_text=function(e){if(this._properties.multiple_selection_allowed){if(!rdx.utils.is_array(e)){e=[e]}for(var d=0;d<e.length;d++){var b=$("<div>").addClass("fileupload_elem_value").append(e);var a=$("<span>").addClass("cross_on_hover");b.append(a);a.bind(rdx.events.CLICK,{},function(f){f.target.parentElement.remove();f.stopPropagation()});this._multi_select_display_component.append(b)}this._multi_select_display_component.trigger(rdx.events.CHANGE)}else{this._custom_input_text.val(e);this._custom_input_text.focusin();this._custom_input_text.trigger(rdx.events.CHANGE)}};rdx.file_upload.prototype._check_for_duplicate=function(){var d=rdx.utils.get_resource(this._properties.resource_name);if(rdx.utils.is_not_defined(d.primary_keys)){this._trigger_form_submit();return}var b={};b[d.primary_keys[0]]=this.get_file_name();var a=rdx.url_utils.construct_url_params(null,rdx.url_utils.GET_BY_NAME_TYPE,d.primary_keys,b);rdx.model.get(d,a,new rdx.callback(this,this._prompt_for_duplicates),this._file_upload,new rdx.callback(this,this._trigger_form_submit))};rdx.file_upload.prototype._trigger_form_submit=function(){if(!this._properties.read_filecontent_from_client){this._form.trigger(rdx.events.SUBMIT,[true])}};rdx.file_upload.prototype.set_selected_type=function(a){if(rdx.utils.is_defined(this._submit_button)){this._submit_button.show()}this._selected_type=a};rdx.file_upload.prototype.submit=function(b,a){if(rdx.utils.is_defined(b)){this._properties.upload_success_callback=b}if(rdx.utils.is_defined(a)){this._properties.upload_error_callback=a}this._form.trigger(rdx.events.SUBMIT,[true])};rdx.file_upload.prototype._prompt_for_duplicates=function(a){rdx.message_box.confirm(rdx.i18n.get_string("rdx.file_upload_confirm",{file_name:this.get_file_name()}),new rdx.callback(this,this._trigger_form_submit),new rdx.callback(this,this._unmask))};rdx.file_upload.prototype._unmask=function(){rdx.mask.unmask(this._mask_id);rdx.status_bar.clear_activity();rdx.status_bar.clear_status()};rdx.file_upload.prototype.get_file_name=function(){if(rdx.utils.is_defined(this._selected_type)&&this._selected_type==this._str_remote){if(this._properties.multiple_selection_allowed){return rdx.file_upload.get_remote_selected_files(this._multi_select_display_component)}else{return this._custom_input_text.val()}}var d=this._file_element.val();if(rdx.utils.is_empty(d)&&rdx.utils.is_not_empty(this._custom_input_text.val())){return this._custom_input_text.val()}var e=(d.indexOf("\\")>=0?d.lastIndexOf("\\"):d.lastIndexOf("/"));if(d==""||e<0){return d}var a=d.substring(e);if(a.indexOf("\\")===0||a.indexOf("/")===0){a=a.substring(1)}var b=rdx.utils.is_defined(this._properties.file_path)?this._properties.file_path:"";return b+a};rdx.file_upload.prototype.validate=function(f){var m=this.get_file_name();if(rdx.utils.is_not_empty(m)&&!rdx.utils.is_array(m)){m=[m]}if(rdx.utils.is_empty(m)){rdx.message_box.error(rdx.i18n.get_string("rdx.file_upload_button_error"));return false}var h="";var e=this._properties.filter_filetype;if(rdx.utils.is_defined(e)){if(rdx.utils.is_array(e)){for(var b=0;b<m.length;b++){var g=false;for(var d=0;d<e.length;d++){if((new RegExp(e[d]+"$")).test(m[b])){g=true;break}}if(!g){h=h+m+","}}}else{for(var b=0;b<m.length;b++){if(!(new RegExp(e+"$")).test(m[b])){h=h+m+","}}}if(rdx.utils.is_not_empty(h)){h=h.substring(0,h.length-1);rdx.message_box.error(rdx.i18n.get_string("rdx.file_upoload_invalid_filetype",{file_name:h}));return false}}var a=true;if(rdx.utils.is_defined(this._properties.custom_validator)){if(this._is_image_validator()){a=this._properties.custom_validator.call_back([this._file_element.val(),this.get_img_element()])}else{a=this._properties.custom_validator.call_back([this._file_element.val()])}}return a};rdx.file_upload.prototype.get_custom_validator=function(){return this._properties.custom_validator};rdx.file_upload.prototype._handle_success=function(e,a){this.set_input_text(this.get_file_name());if(this._properties.mask_on_success===true){this._file_element.prop("disabled",true)}var d=null;if(rdx.utils.is_defined(this._properties.resource_name)){try{d=rdx.resources[this._properties.resource_name]}catch(b){}}if(d){rdx.model.trigger_model_changed_event({},null,d);rdx.model.get_count(d,null,new rdx.callback(this,function(f){$(rdx.utils.get_resource(this._properties.resource_name)).trigger(rdx.events.MODEL_COUNT_CHANGED,f)},null,null,null))}if(rdx.utils.is_defined(this._properties.upload_success_callback)){this._properties.upload_success_callback.call_back([this._file_element.val(),this.get_component()])}else{if(this._properties.dialog_mode&&this._properties.close_upload_window_on_success){this.get_component().dialog("close");this.get_component().remove()}}if(this._properties.auto_upload===true){this._file_element.prop("value","")}rdx.status_bar.clear_activity();rdx.status_bar.update_status(rdx.i18n.get_string("rdx.file_upload_status_complete",{file_name:this._file_element.val()}))};rdx.file_upload.prototype._handle_error=function(a){if(rdx.utils.is_defined(this._properties.upload_error_callback)){var d=rdx.utils.is_defined(a)?a.message:"";this._properties.upload_error_callback.call_back([this._file_element.val(),d]);return}var b=rdx.i18n.get_string("rdx.file_upload_error",{file_name:this._file_element.val()});if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a.message)){b=b+"\n"+rdx.i18n.get_string("rdx.file_upload_error_reason")+a.message}if(this._properties.auto_upload===true){this._file_element.prop("value","")}rdx.status_bar.clear_activity();rdx.status_bar.update_status(b,rdx.ERROR);rdx.message_box.error(b)};rdx.file_upload.prototype._get_file_element=function(){var b=$("<input>").attr("tabindex",-1);var a=this._properties.filter_filetype;var d=(rdx.utils.is_defined(a)&&rdx.utils.is_array(a))?a.join(","):a;b.attr("type","file");b.attr("name",this._properties.file_component_name);b.attr("id",this._properties.file_element_id);b.attr("size",25);if(d){b.attr("accept",d)}b.addClass("file fileupload_transparent");return b};rdx.file_upload.prototype.set_tooltip=function(a){this._browse_textbox.attr("title",a)};rdx.file_upload.prototype._get_submit_button=function(){var a=$("<input>").addClass("file_upload_button rdx_blue_button");if(rdx.utils.is_defined(this._properties.submit_button_class_name)){a.addClass(this._properties.submit_button_class_name)}a.attr("type","submit");a.attr("value",rdx.i18n.get_string("rdx.file_upload_button"));a.attr("title",rdx.i18n.get_string("rdx.file_upload_button_tooltip"));return a};rdx.file_upload.prototype._get_download_button=function(){var a=this;var b=$("<input>").addClass("file_download_button secondary_button");if(rdx.utils.is_defined(this._properties.download_button_class_name)){b.addClass(this._properties.download_button_class_name)}b.attr("type","button").attr("value",rdx.i18n.get_string("rdx.download_button"));b.attr("title",rdx.i18n.get_string("rdx.file_download_button_tooltip"));b.bind(rdx.events.CLICK,{},function(d){a.download_file();d.stopPropagation()});return b};rdx.file_upload.prototype.download_file=function(){var a=this._custom_input_text.val();if(rdx.utils.is_defined(this._properties.download_callback)){this._properties.download_callback.call_back([a])}};rdx.file_upload.prototype._set_form_attributes=function(b){b.attr("name","form");b.attr("method",this._properties.method);b.attr("action",this._properties.url);b.attr("enctype",this._properties.encoding_type);b.attr("encoding",this._properties.encoding_type);if(rdx.utils.is_defined(rdx.ajax_handler_constants.CUSTOM_HEADERS)){for(var a in rdx.ajax_handler_constants.CUSTOM_HEADERS){b.append($("<label>").append($("<span>",{"class":"hide","aria-hidden":"true"}).text("input")).append($("<input>").attr({"aria-hidden":"true",type:"text",value:rdx.ajax_handler_constants.CUSTOM_HEADERS[a],name:a,style:"display:none"}).css("height","0px")))}}};rdx.file_upload.prototype._set_properties=function(){rdx.form_utils.set_basic_field_attributes(this._element,this._field);this._element.attr("title",this._field.get_tooltip())};rdx.file_upload.prototype.get_component=function(){return this._file_upload};rdx.file_upload.prototype.get_data=function(a){if(rdx.utils.is_defined(this._selected_type)&&this._selected_type==this._str_remote){if(this._properties.multiple_selection_allowed){return rdx.file_upload.get_remote_selected_files(this._multi_select_display_component)}else{return this._custom_input_text.val()}}if(this._properties.read_filecontent_from_client==true){if(this._properties.read_filecontent_as_object==false){return this._current_file_content}else{var b={name:this._current_file_name,contents:this._current_file_content};if(this._properties.process_filedata_as_base64==true){if(rdx.utils.is_defined(b.contents)&&b.contents.indexOf(";base64,")!=-1){b.contents=b.contents.split(";base64,")[1];b.encoding_type="base64"}b=$.extend(true,b,this._user_data)}return b}}if(rdx.utils.is_defined(this._custom_input_text)&&rdx.utils.is_not_empty(this._custom_input_text.val())&&rdx.utils.is_not_defined(this._current_file_name)){return this._custom_input_text.val()}return this._current_file_name};rdx.file_upload.prototype.set_data=function(h,g,b){if(rdx.utils.is_not_defined(h)){return}if(this.is_file_reader()){this._browse_label.text(rdx.i18n.get_string(this._properties.change_browse_label_on_success));if(this._properties.read_filecontent_as_object==true){this._current_file_name=h.name;this._current_file_content=h.contents;if(this._properties.process_filedata_as_base64==true){this._user_data=$.extend(true,this._user_data,h);delete this._user_data.name;delete this._user_data.contents;this._custom_input_text.val(this._current_file_name)}}else{if(h.startsWith("data")){this._current_file_content=h.split(",")[1]}else{this._current_file_content=h}this._hide_component_other_than_browse();this._set_image_file(h)}}if(this._properties.multiple_selection_allowed){if(rdx.utils.is_array(h)){h=[h]}for(var f=0;f<h.length;f++){var e=rdx.utils.is_defined(h[f].name)?h[f].name:h;if(rdx.utils.is_defined($(this._multi_select_display_component).children()[f])){$($(this._multi_select_display_component).children()[f])[0].childNodes[0].nodeValue=(e)}else{var d=$("<div>").addClass("fileupload_elem_value").append(e);var a=$("<span>").addClass("cross_on_hover");d.append(a);a.bind(rdx.events.CLICK,{},function(m){m.target.parentElement.remove();m.stopPropagation()});this._multi_select_display_component.append(d)}}}else{if(typeof(h)==="object"){this._custom_input_text.val(this._current_file_name)}else{this._custom_input_text.val(h)}if(this._is_image_preview()){this.upload_img_for_preview(this._file_element,h)}if(this._properties.add_download_button===true&&rdx.utils.is_not_empty(h)){this._download_button.show()}}return};rdx.file_upload.prototype.is_local_selected=function(a){if(rdx.utils.is_defined(this._selected_type)&&this._selected_type==this._str_local){return true}return false};rdx.file_upload.prototype.is_file_reader=function(){return this._properties.read_filecontent_from_client};rdx.file_upload.prototype.get_file_content=function(){return this._current_file_content};rdx.file_upload.get_remote_selected_files=function(a){var d=[];for(var b=0;b<a.children().length;b++){d.push(a.children()[b].innerText)}return d};rdx.file_upload.select_callback_function=function(h,e){if(this._properties.multiple_selection_allowed){if(!rdx.utils.is_array(h)){h=[e+h.name]}for(var g=0;g<h.length;g++){var f=e+h[g].name;if(this._properties.append_default_path==false&&rdx.utils.is_defined(this._properties.remote_dir_path)){if(rdx.utils.ends_with(this._properties.remote_dir_path,"/")){f=(e+h[g].name).substring(this._properties.remote_dir_path.length)}else{f=(e+h[g].name).substring((this._properties.remote_dir_path+"/").length)}}if(rdx.utils.is_defined($(this._multi_select_display_component).children()[g])){$($(this._multi_select_display_component).children()[g])[0].childNodes[0].nodeValue=(f)}else{var d=$("<div>").addClass("fileupload_elem_value").append(f);var b=$("<span>").addClass("cross_on_hover");d.append(b);b.bind(rdx.events.CLICK,{},function(m){m.target.parentElement.remove();m.stopPropagation()});this._multi_select_display_component.append(d)}}if(($(this._multi_select_display_component).children().length)>h.length){var a=$(this._multi_select_display_component).children().length-(h.length);for(var g=0;g<a;g++){$(this._multi_select_display_component).children()[h.length+g].remove()}}this._multi_select_display_component.trigger(rdx.events.CHANGE)}else{if(this._properties.append_default_path==false&&rdx.utils.is_defined(this._properties.remote_dir_path)){if(rdx.utils.ends_with(this._properties.remote_dir_path,"/")){h=h.substring(this._properties.remote_dir_path.length)}else{h=h.substring((this._properties.remote_dir_path+"/").length)}}this._custom_input_text.val(h);this._custom_input_text.focusin();this._custom_input_text.trigger(rdx.events.CHANGE);if(this._is_image_preview()){this.upload_img_for_preview(this._file_element,h)}}if(this._properties.inline_upload===true&&rdx.utils.is_defined(this._submit_button)){this._submit_button.hide()}};rdx.file_upload.prototype.get_text_element=function(){if(this._properties.multiple_selection_allowed){return this._multi_select_display_component}else{return this._custom_input_text}};rdx.file_upload.prototype.upload_img_for_preview=function(f,e){if(rdx.utils.is_defined(f)){var g=f[0];var a=window.URL||window.webkitURL;var d=g.files[0];this._preview_img_element.attr("style","display: block;");if(rdx.utils.is_defined(d)){this._preview_img_element.attr("src",a.createObjectURL(d))}else{var b=this._properties.image_preview_url+rdx.url_utils.encode_uri_component(e)+"&rand_key="+rand;this._preview_img_element.attr("src",b)}this._preview_img_element.trigger(rdx.events.CHANGE)}};rdx.file_upload.prototype.upload_img_file=function(e){if(rdx.utils.is_defined(e)){var f=new Image();var g=e[0];if(rdx.utils.is_ie()&&(rdx.utils.get_browser_version().indexOf("8")==0||rdx.utils.get_browser_version().indexOf("9")==0)){var d=g.value;f.src=d}else{var a=window.URL||window.webkitURL;var b=g.files[0];f.src=a.createObjectURL(b)}this._custom_img_object=f}};rdx.file_upload.prototype._is_image_validator=function(){if(rdx.utils.is_defined(this._properties.is_image_validator)&&this._properties.is_image_validator==true){return true}return false};rdx.file_upload.prototype._is_image_preview=function(){if(rdx.utils.is_defined(this._properties.is_image_preview)&&this._properties.is_image_preview==true){return true}return false};rdx.file_upload.prototype.get_img_element=function(){return this._custom_img_object};rdx.file_browser=function(d,a,e){var f={root_directory:null,filter_filetype:null,remote_resource:null,read_resource:null,upload_url:null,file_component_name:"",mkdir_resource:"",download_resource:"",delete_resource:null,select_callback:null,resource_response_callback:null,show_dirs:true,show_header:true,append_path:true,remotefiledir:null,pagination:false,search:false,show_open_directory:false,show_select_component:null,use_nitro_resource:false,multiple_selection_allowed_for_upload:false,resource_operations:{upload:false,upload_extention:null,download:false,view:false,remove:false,create_dir:false,importfile:false,zip:false},file_browser_display_columns:{name:true,is_dir:true,modified_timestamp:true,accessed_timestamp:true,size:false},mask_dir_path:null};this._properties=$.extend({},f,a);var b={width:650,modal:true,draggable:true,dialogClass:"configure_view",resizable:false,title:rdx.i18n.get_string("rdx.filebrowser")};this._dialog_properties=$.extend({},b,e);this._file_browser_display_columns=this._properties.file_browser_display_columns;this._base_view=null;this._view_definition=null;this._resource_operations=this._properties.resource_operations;this._parent=d;if(this._properties.root_directory.indexOf("/",this._properties.root_directory.length-1)==-1){this._properties.root_directory+="/"}this._container=null;this._header_span=null;this._prev_img;this._next_img;this._back_history=new Array();this._forward_history=new Array();this._allow_select_op=true;this._current_directory=this._properties.root_directory};rdx.file_browser.prototype.render=function(e){e=rdx.utils.is_defined(e)?e:false;this._allow_select_op=!(e);if(rdx.utils.is_not_defined(this._properties.root_directory,this._properties.remote_resource)){rdx.message_box.error(rdx.i18n.get_string("rdx.file_browser_error"));return}if(e){this._properties.show_open_directory=true}var a=this._create_available_files();var b=this._create_file_browser_footer();this._container=$("<div>").addClass("filebrowser");if(this._properties.show_header==true){var d=this._create_file_browser_header();this._container.append(d)}this._container.append(a);if(!e){this._container.append(b);if(rdx.page.is_slider_visible()){this._dialog_properties.appendTo=".rdx_slider"}this._container.dialog(this._dialog_properties)}};rdx.file_browser.prototype._create_file_browser_header=function(){var b=$("<div>");b.addClass("filebrowser_header");this._prev_img=$("<img>").attr("src",rdx.images.BACK_INACTIVE_IMAGE).attr("alt","Previous").attr("title",rdx.i18n.get_string("rdx.table_pagination_next")).addClass("pagination_img_spacing");this._next_img=$("<img>").attr("src",rdx.images.NEXT_INACTIVE_IMAGE).attr("alt","Next").attr("title",rdx.i18n.get_string("rdx.table_pagination_next")).addClass("pagination_img_spacing");this._prev_img.bind(rdx.events.CLICK,{filebrowser_view:this},function(e){var d=e.data.filebrowser_view._back_history;if(d.length>0){var f=e.data.filebrowser_view;f._forward_history.push(f._current_directory);f._next_img.attr("src",rdx.images.NEXT_ACTIVE_IMAGE);f._current_directory=d.pop();if(d.length==0){f._prev_img.attr("src",rdx.images.BACK_INACTIVE_IMAGE)}f._refresh_files()}});this._next_img.bind(rdx.events.CLICK,{filebrowser_view:this},function(e){var d=e.data.filebrowser_view._forward_history;if(d.length>0){var f=e.data.filebrowser_view;f._back_history.push(f._current_directory);f._prev_img.attr("src",rdx.images.BACK_ACTIVE_IMAGE);f._current_directory=d.pop();if(d.length==0){f._next_img.attr("src",rdx.images.NEXT_INACTIVE_IMAGE)}f._refresh_files()}});b.append($("<span>").addClass("filebrowser_navigation").append($("<span>").addClass("left").append(this._prev_img)).append($("<span>").addClass("right").append(this._next_img)));var a=this._current_directory;if(rdx.utils.is_defined(this._properties.mask_dir_path)&&rdx.utils.is_defined(this._properties.mask_dir_path.expression)&&this._properties.mask_dir_path.expression.evaluate()==true&&rdx.utils.is_defined(this._properties.mask_dir_path.pattern)&&rdx.utils.is_defined(this._properties.mask_dir_path.mask)&&a.indexOf(this._properties.mask_dir_path.pattern)!=-1){a=a.replace(this._properties.mask_dir_path.pattern,this._properties.mask_dir_path.mask)}this._header_span=$("<span>").addClass("cur_path").append($("<strong>").append(rdx.i18n.get_string("rdx.current_directory")+": ")).append(a);b.append(this._header_span);return b};rdx.file_browser.prototype._handle_select_operation=function(b){var e=rdx.utils.is_defined(b.get_selected_rows_data)?b.get_selected_rows_data():this._base_view.get_view().get_component().get_selected_items_data();if(this._properties.multiple_selection_allowed_for_upload==false){if(rdx.utils.is_array(e)){e=e[0]}if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.name)&&rdx.utils.is_defined(e.is_dir)){this._forward_history.length=0;if(this._properties.show_header==true){this._next_img.attr("src",rdx.images.NEXT_INACTIVE_IMAGE)}if(e.is_dir=="true"){this._prev_img.attr("src",rdx.images.BACK_ACTIVE_IMAGE);this._back_history.push(this._current_directory);if(e.name==".."){var a=this._current_directory.substring(0,this._current_directory.length-1);this._current_directory=a.substring(0,a.lastIndexOf("/"))+"/"}else{this._current_directory+=e.name+"/"}var d=this;setTimeout(function(){d._refresh_files(null,true)},50)}else{if(this._allow_select_op){this._container.dialog("destroy").remove();if(rdx.utils.is_defined(this._properties.select_callback)){this._properties.select_callback.call_back([this._current_directory+e.name])}}}}}else{if(this._allow_select_op){this._container.dialog("destroy").remove();if(rdx.utils.is_defined(this._properties.select_callback)){this._properties.select_callback.call_back([e,this._current_directory])}}}};rdx.file_browser.prototype._create_file_browser_footer=function(){var b=$("<div>");b.addClass("filebrowser_footer");var a=new rdx.form_field({properties:{add_blue_button:true,blue_button_click_handler_callback:new rdx.callback(this,this._handle_select_operation),blue_button_label:rdx.i18n.get_string("rdx.open"),add_grey_button:true,grey_button_click_handler_callback:new rdx.callback(this,this._dispose_dialog),grey_button_label:rdx.i18n.get_string("rdx.cancel")}});var d=new rdx.button_bar(b,a).render();return b};rdx.file_browser.prototype._do_delete=function(a,m){if(rdx.utils.is_defined(m)&&m==false){var h=a.get_selected_rows_data();for(var e=0;e<h.length;e++){rdx.model.remove(rdx.utils.get_resource(this._properties.remote_resource),new rdx.callback(null,function(n){}),h[e],null,null,null)}}else{var g=a.get_selected_rows_data();var f=(this._properties.delete_resource)?this._properties.delete_resource:this._properties.remote_resource;if(g.length>0){var d=new rdx.model_executor_service(new rdx.callback(this,this._refresh_files));for(var b=0;b<g.length;b++){d.add("post",rdx.utils.get_resource(f),{name:this._current_directory+g[b]["name"]},"delete",null,null,null)}d.execute()}}};rdx.file_browser.prototype._do_upload=function(b,g){var f=$("<form>").attr({method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"}).hide();var a=this._properties.filter_filetype;var h=(rdx.utils.is_defined(a)&&rdx.utils.is_array(a))?a.join(","):a;var e=$("<input>").attr({type:"file",name:this._properties.file_component_name});if(h){e.attr("accept",h)}f.append(e);if(rdx.utils.is_defined(rdx.ajax_handler_constants.CUSTOM_HEADERS)){for(var d in rdx.ajax_handler_constants.CUSTOM_HEADERS){f.append($("<input>").attr("type","text").attr("value",rdx.ajax_handler_constants.CUSTOM_HEADERS[d]).attr("name",d).attr("style","display:none").css("height","0px"))}}this._container.append(f);e.bind(rdx.events.CHANGE,{form:f,file_browser:this,dir:this._current_directory},function(n){var o=n.data.form;var p=n.data.file_browser;var m=o.find("input:file").val();if(rdx.utils.is_defined(p._properties.resource_operations)&&rdx.utils.is_defined(p._properties.resource_operations.upload_extentions)&&p._properties.resource_operations.upload_extentions.length>0){var v=false;var t="";for(var q=0;q<p._properties.resource_operations.upload_extentions.length;q++){if(rdx.utils.ends_with(m,p._properties.resource_operations.upload_extentions[q])){v=true}t=t+p._properties.resource_operations.upload_extentions[q];if(q<p._properties.resource_operations.upload_extentions.length-1){t=t+", "}}if(v===false){rdx.message_box.error(rdx.i18n.get_string("rdx.invalid_file_extention",{supported_extentions:t}));return}}var s=n.data.dir;var u;if(rdx.utils.is_defined(g)&&g==false){u=p._parent._properties.url}else{u=p._properties.upload_url+"?filter=dir:"+rdx.url_utils.encode_uri_component(s)}p._upload_frame_loader(o,u)});e.trigger("click")};rdx.file_browser.prototype._upload_frame_loader=function(b,m){var g=$("<iframe>").attr({width:0,height:0,border:0}).hide();var h="upload_data_holder_"+Math.round(Math.random()*100);g.attr({id:h,name:h});b.append(g);var a=b.find("input:file").val();g.bind(rdx.events.LOAD,{iframe:g,file_browser:this,filename:a},function(q){g.unbind(rdx.events.LOAD);rdx.status_bar.clear_activity();var t=null;try{t=q.data.iframe.contents().text()}catch(p){rdx.message_box.error("File not Uploaded");return}if(rdx.utils.is_not_defined(t)){return}var u=q.data.iframe;try{var o=JSON.parse(t);if(o[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]!=0){if($.inArray(o[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.RESPONSE_SESSION_EXPIRY_ERROR_CODES)!=-1){var s=new rdx.callback(rdx.utils,rdx.utils.do_logout,[true]);rdx.message_box.error(o.message,s);return}rdx.message_box.error(o.message);return}else{rdx.status_bar.update_status(rdx.i18n.get_string("rdx.file_upload_status_complete",{file_name:q.data.filename}));q.data.file_browser._refresh_files()}}catch(p){}});b.attr("target",h);b.attr("action",m);var d=a.substring(a.lastIndexOf("\\")+1);var e=rdx.utils.is_defined(this._view_definition.resource_name)?rdx.utils.get_resource(this._view_definition.resource_name):{};if(rdx.utils.is_not_defined(e.primary_keys)){b.submit();return}var f={};f[e.primary_keys[0]]=d;var n=rdx.url_utils.construct_url_params(null,rdx.url_utils.GET_BY_NAME_TYPE,e.primary_keys,f);rdx.model.get(e,n,new rdx.callback(this,this._prompt_for_duplicates,[b,d]),null,new rdx.callback(this._submit_form,[b,d]))};rdx.file_browser.prototype._submit_form=function(d,b,a){rdx.status_bar.display_activity(rdx.i18n.get_string("rdx.file_upload_status_start",{file_name:a}));b.submit()};rdx.file_browser.prototype._prompt_for_duplicates=function(d,b,a){rdx.message_box.confirm(rdx.i18n.get_string("rdx.file_upload_confirm",{file_name:a}),new rdx.callback(this._submit_form,[d,b,a]),new rdx.callback(function(){rdx.mask.unmask_all_components()}))};rdx.file_browser.prototype._do_view=function(b){var f=b.get_selected_rows_data();var d=(rdx.utils.is_defined(this._properties.read_resource))?this._properties.read_resource:"";var h={type:rdx.view_constants.CONFIGURE_VIEW,resource_name:d,view_context:{static_filter:{}},resource_properties:[{form_fields:{response:{input_type:rdx.form_constants.TEXT_AREA,display_label:false,height:375,width:"99%",read_only:true}}}],dialog_properties:{width:500},view_properties:{add_create_button:false,title:"rdx.view_file"}};if(this._properties.use_nitro_resource){var g=this.get_nitro_resrc_payload(f[0]["name"]);h.view_context.static_filter=g;h.response_callback=new rdx.callback(function(n){var m=rdx.utils.get_formatted_response(n.get_response());m.response=rdx.utils.is_ie()&&((rdx.utils.get_browser_version().indexOf("8")==0)||(rdx.utils.get_browser_version().indexOf("9")==0))?m.filecontent:atob(m.filecontent);n.resume(m)})}else{var e=this._current_directory+f[0]["name"];h.view_context.static_filter={path:e}}var a=rdx.view_utils.show_view_in_slider(h,null,null,null,false);a.prepare_view()};rdx.file_browser.prototype._mkdir=function(){var b={type:rdx.view_constants.CONFIGURE_VIEW,resource_name:this._properties.mkdir_resource,view_context:{is_data_set:true},resource_properties:[{form_fields:{basedir:{hidden:true,value:this._current_directory},path:{label:"rdx.directory_name"}}}],view_properties:{title:"rdx.create_new_directory",callback_after_operation:new rdx.callback(this,this._refresh_files)}};var a=rdx.view_utils.show_view_in_slider(b,null,null,null,false);a.prepare_view()};rdx.file_browser.prototype._do_import=function(){var b={type:rdx.view_constants.CONFIGURE_VIEW,resource_name:this._properties.importfile_resource,view_context:{is_data_set:true},resource_properties:[{form_fields:{filename:{label:"rdx.file_name",mandatory:true},filedir:{value:this._current_directory,hidden:true},filedata:{display_label:false,label:"rdx.file_content",input_type:"textarea",col_span:2,height:"300",mandatory:true},overwrite:{value:"false",hidden:true}}}],view_properties:{title:"rdx.import",button_label:"rdx.save",callback_after_operation:new rdx.callback(this,this._refresh_files)}};var a=rdx.view_utils.show_view_in_slider(b,null,null,null,false);a.prepare_view()};rdx.file_browser.prototype._dispose_dialog=function(){if(rdx.utils.is_defined(this._container)){this._container.dialog("destroy").remove()}};rdx.file_browser.prototype._create_available_files=function(){var b={};if(this._resource_operations.download){b.download={label:"rdx.download_button",tooltip:"rdx.download_button_tooltip",single_selection:true,multiple_selection:false,expression:new rdx.expression('{is_dir} != "true"'),action_type:rdx.ACTION,click_handler_callback:new rdx.callback(this,this._do_download,[this._resource_operations.is_url_filter])}}if(this._resource_operations.upload){b.upload={label:"rdx.file_upload_button",tooltip:"rdx.file_upload_button_tooltip",single_selection:true,multiple_selection:true,no_selection:true,action_type:rdx.ACTION,click_handler_callback:new rdx.callback(this,this._do_upload,[this._resource_operations.is_url_filter])}}if(this._resource_operations.view){b.view={label:"rdx.view_button",tooltip:"rdx.view_button_tooltip",single_selection:true,multiple_selection:false,expression:new rdx.expression('{is_dir} != "true"'),action_type:rdx.ACTION,click_handler_callback:new rdx.callback(this,this._do_view)}}if(this._resource_operations.remove){b.remove={label:"rdx.button_delete",tooltip:"rdx.button_delete_tooltip",single_selection:true,multiple_selection:true,prompt:"rdx.table_data_action_confirm_single",expression_mode:"ALL",action_type:rdx.ACTION,click_handler_callback:new rdx.callback(this,this._do_delete,[this._resource_operations.is_url_filter])}}if(this._resource_operations.create_dir){b.create_dir={label:"rdx.create_dir_button",tooltip:"rdx.create_dir_button_tooltip",single_selection:true,multiple_selection:true,no_selection:true,click_handler_callback:new rdx.callback(this,this._mkdir)}}if(this._resource_operations.importfile){b.importfile={label:"rdx.import",tooltip:"rdx.importfile_button_tooltip",single_selection:true,multiple_selection:true,no_selection:true,click_handler_callback:new rdx.callback(this,this._do_import)}}if(this._properties.show_open_directory){b.dbl_click={label:"rdx.open_directory",single_selection:true,action_type:rdx.ACTION,click_handler_callback:new rdx.callback(this,this._handle_select_operation)};if(!this._allow_select_op){b.dbl_click.expression=new rdx.expression('{is_dir} == "true"')}}var d={name:{label:"rdx.name",renderer_callback:new rdx.callback(this,this._append_image)}};if(this._file_browser_display_columns.is_dir==true){d.is_dir={label:"rdx.type",renderer_callback:new rdx.callback(function(e){if(e.is_dir=="true"&&e.name!=".."){return rdx.i18n.get_string("rdx.directory")}else{if(e.is_dir=="false"){return rdx.i18n.get_string("rdx.file")}else{return""}}})}}if(this._file_browser_display_columns.modified_timestamp==true){d.modified_timestamp={label:"rdx.date_modified"}}if(this._file_browser_display_columns.accessed_timestamp==true){d.accessed_timestamp={label:"rdx.date_accessed"}}if(this._file_browser_display_columns.size==true){d.size={label:"rdx.size"}}this._view_definition={type:rdx.view_constants.DETAIL_VIEW,name:"rdx_file_browser_component_detail_view",resource_name:this._properties.remote_resource,response_callback:new rdx.callback(this,this.data_massage_response_callback),double_click_operation:"dbl_click",resource_properties:d,view_properties:{pagination:this._properties.pagination,search:this._properties.search,is_tool_bar_required:false,_dont_show_title:true,show_select_component:this._properties.show_select_component,show_view_settings:false},resource_operations:b};if(rdx.utils.is_defined(this._properties.view_context)){this._view_definition.view_context=this._properties.view_context}if(this._properties.append_path===true){this._view_definition.view_context={use_args:true,static_filter:{fileLocation:this._current_directory}}}var a=$("<div>").addClass("filebrowser_table");if(this._allow_select_op){a.addClass("filebrowser_table_scroll")}this._base_view=new rdx.base_view(a,this._view_definition);this._base_view.prepare_view();return a};rdx.file_browser.prototype._refresh_files=function(b,d){this._base_view.get_view_context().set_url_params({static_filter:{fileLocation:this._current_directory}});if(rdx.utils.is_defined(d)&&d==true&&this._properties.pagination){this._base_view.get_view().get_pagination().reset_page_number();delete this._base_view.get_view().get_view_context().get_url_params().filter}this._base_view.get_view().refresh_view();if(this._properties.show_header==true){this._header_span.empty();var a=this._current_directory;if(rdx.utils.is_defined(this._properties.mask_dir_path)&&rdx.utils.is_defined(this._properties.mask_dir_path.expression)&&this._properties.mask_dir_path.expression.evaluate()==true&&rdx.utils.is_defined(this._properties.mask_dir_path.pattern)&&rdx.utils.is_defined(this._properties.mask_dir_path.mask)&&a.indexOf(this._properties.mask_dir_path.pattern)!=-1){a=a.replace(this._properties.mask_dir_path.pattern,this._properties.mask_dir_path.mask)}this._header_span.append($("<strong>").append(rdx.i18n.get_string("rdx.current_directory")+": ")).append(a).ellipsis(60)}if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.params)){b.params.resume()}};rdx.file_browser.prototype._append_image=function(b){var a=$("<span>");if(b.is_dir=="true"){a.addClass("dirtype_span")}else{a.addClass("filetype_span")}a.text(b.name).ellipsis(50);return a};rdx.file_browser.prototype._get_prompt_data=function(a){var b=rdx.i18n.get_string(rdx.utils.get_resource(this._properties.remote_resource)["obj_type"]);return{action:rdx.i18n.get_string(a.label.toLowerCase()).toLowerCase(),obj_type:b}};rdx.file_browser.prototype._do_download=function(a,e){var d=a.get_selected_rows_data()[0];d.file_name=d.file_name||d.name;var b;if(rdx.utils.is_defined(e)&&e==false){b=a._properties.list_view._resource.download_url+"/"+d.file_name}else{b="/rapi/"+this._properties.download_resource+"?filter=path:"+rdx.url_utils.encode_uri_component(this._current_directory+d.name)+"&rand_key="+rand}this._iframe_loader({file_url:b})};rdx.file_browser.prototype._iframe_loader=function(a){this.DEFAULT_PROPERTIES={file_url:null,error_message:null,failure_callback:null,success_callback:null};var b=$.extend({},this.DEFAULT_PROPERTIES,a);if(rdx.utils.is_not_defined(b.file_url)){return}if(rdx.utils.is_defined(this._download_iframe_holder)){this._download_iframe_holder.remove()}var d=$("<iframe>").attr("frameborder",0).attr("width","0px").attr("height","0px");d.attr("src",b.file_url);$(document.body).append(d);this._download_iframe_holder=d;d.bind(rdx.events.LOAD,{iframe:d,properties:b},function(h){var m=null;try{m=h.data.iframe.contents().text()}catch(g){rdx.message_box.error("File not found");return}if(rdx.utils.is_not_defined(m)){return}var n=h.data.iframe;try{var f=JSON.parse(m);var e=h.data.properties.failure_callback;if(f[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]!=0){var p=new rdx.callback();if($.inArray(f[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.RESPONSE_SESSION_EXPIRY_ERROR_CODES)!=-1){p=new rdx.callback(rdx.utils,rdx.utils.do_logout,[true])}if(rdx.utils.is_defined(e)){e.call_back();p.call_back()}else{rdx.message_box.error(f.message,p)}return}var o=h.data.properties.success_callback;if(rdx.utils.is_defined(o)){o.call_back()}}catch(g){}})};rdx.file_browser.prototype.data_massage_response_callback=function(f){var b=f.get_unformatted_response();var a=[];var g=[];if(rdx.utils.is_defined(b)&&(rdx.utils.is_defined(b[this._properties.remote_resource])||rdx.utils.is_defined(b[this._properties.remotefiledir]))){if(this._properties.append_path==false){a=b[this._properties.remotefiledir];for(var d=0;d<a.length;d++){if(rdx.utils.is_defined(a[d]["file_name"])){a[d]["name"]=a[d]["file_name"]}else{if(rdx.utils.is_defined(this._properties.resource_properties)&&this._properties.resource_properties.name){a[d]["name"]=a[d][this._properties.resource_properties.name]}}if(rdx.utils.is_defined(a[d]["file_last_modified"])){a[d].modified_timestamp=a[d]["file_last_modified"]}if(rdx.utils.is_defined(a[d]["file_size"])){a[d].size=rdx.view_formatters.size_in_bytes_formatter(null,null,a[d]["file_size"])}else{if(rdx.utils.is_defined(this._properties.resource_properties)&&this._properties.resource_properties.file_size){a[d]["size"]=a[d][this._properties.resource_properties.file_size]}}a[d]["is_dir"]=a[d]["is_dir"]||false}}else{a=b[this._properties.remote_resource];for(var d=0;d<a.length;d++){if(rdx.utils.is_defined(a[d].filemode)&&$.inArray("DIRECTORY",a[d].filemode)!=-1){a[d].is_dir="true"}else{if(rdx.utils.is_not_defined(a[d].is_dir)){a[d].is_dir="false"}}a[d].name=a[d].filename;a[d].modified_timestamp=a[d].filemodifiedtime;a[d].accessed_timestamp=a[d].fileaccesstime;if(rdx.utils.is_defined(a[d]["filesize"])){if(a[d].is_dir=="true"){a[d].size="-NA-"}else{a[d].size=rdx.view_formatters.size_in_bytes_formatter(null,null,a[d]["filesize"])}}}}for(var d=0;d<a.length;d++){if(a[d]["is_dir"]=="true"){if(this._properties.show_dirs){g.push(a[d])}}else{var e=a[d].name.substring(a[d].name.lastIndexOf("."),a[d].name.length);if(rdx.utils.is_defined(this._properties.filter_filetype)&&this._properties.filter_filetype.length>0&&rdx.utils.is_defined(e)&&e.length>0){if(rdx.utils.is_array(this._properties.filter_filetype)){if($.inArray(e,this._properties.filter_filetype)!=-1){g.push(a[d])}}else{if(e===this._properties.filter_filetype){g.push(a[d])}}}else{g.push(a[d])}}}}f.resume(g)};rdx.file_browser.prototype.get_container=function(){return this._container};rdx.file_browser.prototype.get_nitro_resrc_payload=function(a){var b={fileLocation:this._current_directory,filename:a};return b};rdx.splitter=function(b,a){this._parent=typeof(b)=="string"?$("#"+b):b;this._DEFAULT_PROPERTIES={vertical:true,outline:true,first_pane_min_size:0,second_pane_min_size:0,use_first_pane_size:null,class_names:"splitter"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._splitter=$(document.createElement("div")).addClass(this._properties.class_names);this._first_pane=$(document.createElement("div")).addClass("pane");this._second_pane=$(document.createElement("div")).addClass("pane")};rdx.splitter.prototype.render=function(){this._parent.append(this._splitter.append(this._first_pane).append(this._second_pane));var a={outline:this._properties.outline,activeClass:"move"};a.splitbarClass=this._properties.vertical?"vertical_split_bar":"horizontal_split_bar";a.type=this._properties.vertical?"v":"h";if(this._properties.use_first_pane_size==true){a[this._properties.vertical?"sizeLeft":"sizeTop"]=true}else{if(this._properties.use_first_pane_size==false){a[this._properties.vertical?"sizeRight":"sizeBottom"]=true}}a[this._properties.vertical?"minLeft":"minTop"]=this._properties.first_pane_min_size;a[this._properties.vertical?"minRight":"minBottom"]=this._properties.second_pane_min_size;this._splitter.splitter(a);rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this.resize));return this};rdx.splitter.prototype.get_first_pane=function(){return this._first_pane};rdx.splitter.prototype.get_second_pane=function(){return this._second_pane};rdx.splitter.prototype.add_resize_handler=function(a){this._splitter.bind(rdx.events.RESIZE,{rdx_callback:a},function(b){b.data.rdx_callback.call_back()})};rdx.splitter.prototype.resize=function(){if(!rdx.utils.is_ie()||(rdx.utils.is_ie()&&parseInt(rdx.utils.browser().version)>=9)){var d=this._first_pane.height();var e=this._second_pane.height();var b=$(window).height();var a=b-rdx.page.get_header_height()-25;if(d>a&&d>e){a=d+30}else{if(e>a&&e>d){a=e+30}}rdx.page.get_content().height(a);this._splitter.css("height",a);if(!rdx.utils.is_chrome_safari()){this._splitter.css("width",rdx.page.get_content().width())}if(!(rdx.utils.is_ie()&&parseInt(rdx.utils.browser().version)<9)){this._splitter.trigger("resize")}}else{this._splitter.css("height",this._parent.height());if(!rdx.utils.is_chrome_safari()){this._splitter.css("width",rdx.page.get_content().width())}if(!(rdx.utils.is_ie()&&parseInt(rdx.utils.browser().version)<9)){this._splitter.trigger("resize")}}};rdx.tree_node=function(a){this._DEFAULT_PROPERTIES={name:"",view:null,tooltip:"",select:false,expand_selected:true,license_keys:[],show_if_not_licensed:false,nodes:[],is_valid_callback:null,is_node_icon_present:null,activate_callback:null,deactivate_callback:null,node_key:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.tree_node.prototype.get_is_node_icon_present=function(){return this._properties.is_node_icon_present};rdx.tree_node.prototype.get_name=function(){return rdx.i18n.get_string(this._properties.name)};rdx.tree_node.prototype.get_callback_function=function(){return this._properties.is_valid_callback};rdx.tree_node.prototype.get_view=function(){return this._properties.view};rdx.tree_node.prototype.get_tooltip=function(){if(rdx.utils.is_defined(this._properties.tooltip)){return rdx.i18n.get_string(this._properties.tooltip)}return""};rdx.tree_node.prototype.to_select=function(){return this._properties.select};rdx.tree_node.prototype.to_expand_selected=function(){return this._properties.expand_selected};rdx.tree_node.prototype.get_license_keys=function(){return this._properties.license_keys};rdx.tree_node.prototype.to_show_if_not_licensed=function(){return this._properties.show_if_not_licensed};rdx.tree_node.prototype.get_nodes=function(){return this._properties.nodes};rdx.tree_node.prototype.get_activate_callback=function(){return this._properties.activate_callback};rdx.tree_node.prototype.get_deactivate_callback=function(){return this._properties.deactivate_callback};rdx.tree_node.prototype.get_node_key=function(){return rdx.i18n.get_string(this._properties.node_key)};rdx.tree=function(d,e,a,b){this._parent=typeof(d)=="string"?$("#"+d):d;this._tree_nodes=e;this._DEFAULT_PROPERTIES={swipe:true,is_accordion:false,show_expand_collapse_all:false,show_unlicensed_nodes:true,tree_pane_min_width:250,view_pane_min_width:"auto",expand_on_single_click:true,show_hide_licensed_features_link:false,deployment_nodes:null,tree_pane_width:"15%",tree_search:false,tree_favourites:null,select_child_node_with_view:false,default_node_key:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._show_favourites=((this._properties.tree_favourites!==false)&&rdx.utils.is_object(this._properties.tree_favourites)&&rdx.utils.is_callback(this._properties.tree_favourites.get_favourites)&&rdx.utils.is_callback(this._properties.tree_favourites.set_favourites))?true:false;this._properties.swipe=this._properties.search===true?false:this._properties.swipe;this._tree_pane=null;this._tree_menu=null;this._favourites=this._show_favourites?this._properties.tree_favourites.get_favourites.call_back():undefined;this._expand_collapse_table=null;this._show_hide_link_table=null;this._tree_div=null;this._view_pane=null;this._node_to_select=null;this._expand_selected_node=true;this._license_response=null;this._feature_response=null;this._VIEW_KEY_SEPARATOR="^";this._resource_list=(rdx.utils.is_defined(b))?b:null;this.resource_name_map={};this._resource_results={};this._license_resource=rdx.utils.is_defined(this._resource_list)&&rdx.utils.is_defined(this._resource_list[rdx.LICENSE_KEY])?rdx.utils.get_resource(this._resource_list[rdx.LICENSE_KEY]):null;this._feature_resource=rdx.utils.is_defined(this._resource_list)&&rdx.utils.is_defined(this._resource_list[rdx.FEATURE_KEY])?rdx.utils.get_resource(this._resource_list[rdx.FEATURE_KEY]):null;this._current_node_key=null;this._current_deployment=null;this._current_deploment_container=null;this._root_node=null;this._root_dyna_node=null;this._tree_mask_id="__tree_mask_id";this._input_search=null;this._clear_span=null;this._set_double_click_tree=false;this._set_single_click_tree=true;this._show_hide_licensed_features_link=null;this._tree_search_entities=[]};rdx.tree.prototype.render=function(){if(rdx.utils.is_not_defined(this._resource_list)){this._render()}else{this._get_resource_data()}};rdx.tree.prototype._get_resource_data=function(g,e){var m=0;g=false||g;var b=null;for(var d in this._resource_list){if(rdx.utils.is_not_defined(b)){var a=true;b=new rdx.model_executor_service(new rdx.callback(this,this._response_arrived,[g,e]),new rdx.callback(),a)}var h=this._resource_list[d];var f=rdx.utils.get_resource(h);b.add("get",f,null,null);this.resource_name_map[m++]={key:d,resource_name:h}}if(rdx.utils.is_defined(b)){b.execute()}else{rdx.mask.unmask_dom_element(this._tree_pane,this._tree_mask_id)}};rdx.tree.prototype.get_resource_result=function(a){return this._resource_results[a]};rdx.tree.prototype._response_arrived=function(h,g,e){var f=h.get_collated_response();var a=h.get_collated_result();var d=0;var m="";for(i=0,end_index=f.length;i<end_index;i++){if(rdx.utils.is_defined(this.resource_name_map[i])){this._resource_results[this.resource_name_map[i].key]=f[i][this.resource_name_map[i].resource_name];if((this.resource_name_map[i].key==rdx.LICENSE_KEY||this.resource_name_map[i].key==rdx.FEATURE_KEY)&&a[i]===false){m+="</br>"+f[i];d++}}}if(d>0){var b=rdx.i18n.get_string("rdx.executor_service_error",{error_count:d,error_messages:m});rdx.message_box.error(b)}this._license_response=this.get_resource_result(rdx.LICENSE_KEY);this._feature_response=this.get_resource_result(rdx.FEATURE_KEY);if(g){this._render_tree_nodes();if(rdx.utils.is_defined(this._current_node_key)){this.select_node(this._current_node_key,!e)}else{if(rdx.utils.is_defined(this._current_deployment)){if(rdx.utils.is_defined(this._node_to_select)){this.select_node(this._node_to_select.key,true)}else{if(rdx.utils.is_defined(this._root_node)){this.select_node(this._root_node.key,true)}}}}this._resize();rdx.mask.unmask_dom_element(this._tree_pane,this._tree_mask_id)}else{this._render()}};rdx.tree.prototype.get_view_definition=function(d,a){a=rdx.utils.is_defined(a)?a:true;var b=this._tree_div.dynatree("getTree").getNodeByKey(d);if(a===false){return b.data.ns_view_definition}return b.data.ns_view_definition?b.data.ns_view_definition:(b.data.children.length>0)?b.data.children[0].ns_view_definition:null};rdx.tree.prototype._refresh_tree_on_search=function(){};rdx.tree.prototype.refresh_tree=function(e,d,a,b){rdx.mask.mask_dom_element(this._tree_pane,this._tree_mask_id);this._get_resource_data(true,b)};rdx.tree.prototype._add_search=function(){var a=$("<div>").addClass("search_div");this._input_search=$("<input type = 'text' placeholder = 'Search in tree'>").addClass("search_text_box smooth_all_corner");this._clear_span=$("<span>").addClass("clear hidden");a.append(this._input_search);a.append(this._clear_span);this._parent.before(a);this._clear_span.bind("mouseover",function(){$(this).addClass("hover")});this._clear_span.bind("mouseout",function(){$(this).removeClass("hover").removeClass("active")});this._clear_span.bind("mousedown",function(){$(this).addClass("active")});this._clear_span.bind("click",{tree:this,search_box:this._input_search},function(d){var b=d.data.tree;b.search("");d.data.search_box.val("");$(this).addClass("hidden")});a.bind("keyup",{tree:this},function(e){var d=e.data.tree;var g=d._input_search;var h=d._clear_span;var f=g.val();var b=d.search(f);if(f===""){h.addClass("hidden")}else{if(b){h.removeClass("hidden")}}d.set_all_rows_selected();d.set_all_rows_unselected()});return a};rdx.tree.prototype.toggle_collapse=function(){if(rdx.utils.is_not_defined(this._root_dyna_node)){return}this._root_dyna_node.visit(function(a){a.toggleExpand()})};rdx.tree.prototype.set_all_rows_selected=function(){if(rdx.utils.is_not_defined(this._root_dyna_node)){return}this._root_dyna_node.visit(function(a){a.select(true)})};rdx.tree.prototype.set_all_rows_unselected=function(){if(rdx.utils.is_not_defined(this._root_dyna_node)){return}this._root_dyna_node.visit(function(a){a.select(false)})};rdx.tree.prototype.search=function(e){this.show_all_nodes();if(e.length<1){this._clear=true;this._root_dyna_node.visit(function(f){$(f.li).show()});this.toggle_collapse();this._refresh_tree_on_search()}else{if(e.length>=1){this._clear=false;var d=this.get_child_list(this._root_dyna_node);if(rdx.utils.is_defined(d)){for(var b=0;b<d.length;b++){var a={hide:false};this._search_node(d[b],e,a)}}}}this._parent.trigger(rdx.events.UPDATE_COUNT);return true};rdx.tree.prototype.get_child_list=function(a){return a.childList};rdx.tree.prototype.show_all_nodes=function(){this._root_dyna_node.visit(function(a){a.expand(true);$(a.li).show();a.li.hidden=false})};rdx.tree.prototype._search_node=function(g,h,b){var f=this.get_child_list(g);if(rdx.utils.is_defined(f)){var a=true;for(var e=0;e<f.length;e++){var d={hide:false};this._search_node(f[e],h,d);a=a&&d.hide}if(a&&!this._is_pattern_present(g,h)){this._hide_node(g);b.hide=true}else{if(this._is_pattern_present(g,h)){b.hide=false;g.visit(function(m){m.expand(true);$(m.li).show();m.li.hidden=false})}else{b.hide=false}}}else{if(!this._is_pattern_present(g,h)){this._hide_node(g);b.hide=true}else{b.hide=false}}};rdx.tree.prototype._is_pattern_present=function(a,b){if((a.data.title.toLowerCase()).indexOf(b.toLowerCase())>=0){return true}return false};rdx.tree.prototype._get_all_nodes=function(b,f){var e=b.get_name();var d=b.get_nodes();if(rdx.utils.is_not_empty(f)){f=f+" > "+e}else{f=e}this._tree_search_entities.push(f);if(d.length>0){for(var a=0;a<d.length;a++){this._get_all_nodes(d[a],f)}}else{return}};rdx.tree.prototype._add_tree_search=function(){this._tree_search=$("<div>").addClass("tree-search");this._tree_search_input=$("<input>").attr({placeholder:"Search in Menu",id:"tree_search_input_textbox"}).addClass("tree-search-text");this._tree_search_clear=$("<button>").addClass("btn-icon search-clear hide").attr("title","Clear menu search").attr("aria-label",'Clear menu search"');this._tree_search.append($('<label for="tree_search_input_textbox" class="hide">Search in Menu</label>')).append(this._tree_search_input);this._tree_search.append(this._tree_search_clear);this._tree_pane.append(this._tree_search);var b=this._tree_nodes[0].get_nodes();this._root_node_name=this._tree_nodes[0].get_name();for(var a=0;a<b.length;a++){this._get_all_nodes(b[a],"")}this._tree_search_suggestions=$("<div>").addClass("tree_search_suggestion").attr("tabindex",0);this._tree_pane.append(this._tree_search_suggestions);this._tree_search_clear.bind(rdx.events.CLICK,{that:this},function(d){var e=d.data.that;e._tree_search_input.val("");e._tree_search_suggestions.empty();e._tree_search_clear.addClass("hide");$(".tree_search_suggestion").removeClass("border-bottom")});this._tree_search.bind(rdx.events.KEYUP,{that:this},function(f){var m=f.data.that;if(f.keyCode==27){rdx.get_tree()._expand_or_collapse_all(false);f.data.that._tree_search_suggestions.empty();$(".tree_search_suggestion").removeClass("border-bottom");return}var g=m._tree_search_input.val();if(rdx.utils.is_empty(g)){m._tree_search_clear.addClass("hide")}else{m._tree_search_clear.removeClass("hide")}var h=function(){if(($(".tree_search_suggestion .tree_search_suggestion_option").length>0)&&(!($(".tree_search_suggestion").hasClass("border-bottom")))){$(".tree_search_suggestion").addClass("border-bottom")}};var d=function(){m._search_items=new Array();m._tree_search_suggestions.empty();$(".tree_search_suggestion").removeClass("border-bottom");var u=m._tree_search_entities;var t=m._tree_search_input.val();if(rdx.utils.is_not_empty(t)){for(var p=0;p<u.length;p++){var o=u[p].toLowerCase();if(o.indexOf(t.toLowerCase())>-1){m._search_items.push(u[p])}}var s=m._search_items.length;if(s>0){m._tree_search_suggestions.hide();for(var p=0;p<s;p++){var q=m._root_node_name+m._VIEW_KEY_SEPARATOR+(m._search_items[p].split(" > ")).join(m._VIEW_KEY_SEPARATOR);if(rdx.utils.is_defined(m.get_node(q))){var n=m._search_items[p].split(">").join("<span class='node-separator'></span>");m._tree_search_suggestions.append($("<div>").addClass("tree_search_suggestion_option").attr("tabindex",0).attr("id",q).html(n))}}h();m._tree_search_suggestions.show()}}$(".tree_search_suggestion_option").bind(rdx.events.CLICK,{that:m},function(){var w=f.data.that,v=this.getAttribute("id");$(".tree_search_suggestion").removeClass("border-bottom");_tree_menu=w._tree_menu;_tree_div=w._tree_div;if($(_tree_menu).hasClass("closed")){w._close_favourites();$(_tree_div).slideDown(200);$(_tree_menu).removeClass("closed")}rdx.get_tree().select_node(v);w._tree_search_suggestions.empty()})};var e=(function(){var n=0;return function(p,o){clearTimeout(n);n=setTimeout(p,o)}})();e(function(){d()},500)})};rdx.tree.prototype._open_favourites=function(){var a=this._favourites_list;if($(a).hasClass("closed")){this._favourites_container.show(200);a.removeClass("closed")}};rdx.tree.prototype._close_favourites=function(){var a=this._favourites_list;if(!($(a).hasClass("closed"))){this._favourites_container.hide(200);this._favourites_list.addClass("closed")}};rdx.tree.prototype._add_favourites=function(){this._favourites_parent.addClass("border-bottom");this._favourites_list=$("<div>").addClass("favourites_list closed");this._favourites_list_content=$("<span>").addClass("favourite_list_content");this._favourites_icon=$("<span>").addClass("favourites_icon");this._favourites_menu_expander=$("<span>").addClass("favourites_menu_expander");this._favourites_list.append(this._favourites_list_content);this._favourite_title=$("<a>").addClass("favourite_title").text(rdx.i18n.get_string("rdx.favorites")).attr("href","#");this._favourites_list_content.append(this._favourites_menu_expander);this._favourites_list_content.append(this._favourite_title);this._favourites_list_content.append(this._favourites_icon);this._favourites_container=$("<div>").addClass("favourites_container");this._favourites_parent.append(this._favourites_list);this._favourites_parent.append(this._favourites_container);this._favourites_list.bind(rdx.events.CLICK,{that:this},function(d){var m=d.data.that;if($(this).hasClass("closed")){m._favourites=m._properties.tree_favourites.get_favourites.call_back();m._favourites_container.empty();for(var g=0;g<m._favourites.length;g++){var b=m._favourites[g],h=m.get_node(b),p=$("<div>").addClass("favourite_item").data("key",b),e=$("<span>").addClass("favourite_item_contents");if(rdx.utils.is_defined(h)){var o="";if(h.data.title){o=h.data.title}var n=$("<span>").addClass("dynatree-icon").addClass("favourite").attr("tabindex",0).attr("aria-label","Remove "+o+" from favourites list");n.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{node:m,favourite_icon_clicked:true},m._favourite_icon_click_handler);var f=$("<span>").addClass("title").append(h.data.title).attr("tabindex",0);n.appendTo(e);f.appendTo(e);p.append(e);m._favourites_container.append(p);p.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{tree:m},function(t){if(rdx.utils.is_defined(t.keyCode)&&t.keyCode==13){if((t.target.className=="dynatree-icon favourite"||t.target.className=="dynatree-icon")&&(rdx.utils.is_defined($(t.target).children()))){$($(t.target).children()[0]).trigger("click");return}}else{if(rdx.utils.is_defined(t.keyCode)&&t.keyCode!=13){return}}var v=t.data.tree,s=$(this).data("key"),u=v.get_node(s),q=v.get_view_definition(s);if(rdx.utils.is_defined(v.get_node(s).data.activate_callback)){v.get_node(s).data.activate_callback.call_back()}$(".favourite_item.active").removeClass("active");$(this).addClass("active");if(rdx.utils.is_defined(v._current_node_key)){v.get_node(v._current_node_key).data.ns_view.destroy_view();if(rdx.utils.is_defined(v.get_node(v._current_node_key).data.deactivate_callback)){v.get_node(v._current_node_key).data.deactivate_callback.call_back()}v._view_pane.empty();u.data.ns_view=new rdx.base_view(v._view_pane,q);u.data.ns_view.prepare_view();u.data.ns_view.get_parent().attr("tabindex","0");u.data.ns_view.get_parent()[0].focus();v._current_node_key=s}})}}m._open_favourites();$(m._tree_div).slideUp(200);$(m._tree_menu).addClass("closed")}else{m._close_favourites()}});var a=this;setTimeout(function(){a._favourites_list.trigger(rdx.events.CLICK,[true])},300)};rdx.tree.prototype._add_menu=function(){this._tree_menu=$("<div>").addClass("tree_menu closed");this._menu_content=$("<span>").addClass("menu_content");this._menu_expander=$("<span>").addClass("menu_expander");this._menu_icon=$("<span>").addClass("menu_icon");this._tree_menu.append(this._menu_content);this._menu_title=$("<a>").addClass("menu_title").text("Menu").attr("href","#");this._menu_content.append(this._menu_title);this._menu_content.append(this._menu_expander);this._menu_content.append(this._menu_icon);if(rdx.utils.is_not_defined(this._tree_div)){this._tree_pane.append(this._tree_menu)}else{$(this._tree_menu).insertBefore($(this._tree_div));this._tree_menu.removeClass("closed")}this._tree_menu.bind(rdx.events.CLICK,{that:this},function(d){var e=d.data.that,a=e._tree_div,b=e._tree_menu;if($(b).hasClass("closed")){e._close_favourites();$(a).slideDown(200);$(b).removeClass("closed")}else{$(a).slideUp(200);$(b).addClass("closed")}})};rdx.tree.prototype._render=function(){this._container=$("<div>").addClass("tree_nav_container");this._tree_pane_cell=$("<div>").addClass("tree_panel_cell");this._tree_pane_cell.css({width:this._properties.tree_pane_min_width,"min-height":window.innerHeight-rdx.page.get_header_height()});this._tree_pane=$("<div>").addClass("tree_pane").appendTo(this._tree_pane_cell);if(this._properties.tree_search===true){this._add_tree_search()}this._favourites_parent=$("<div>").addClass("favourites_parent");this._tree_pane.append(this._favourites_parent);if(this._show_favourites===true&&rdx.utils.is_defined(this._favourites)&&this._favourites.length>0){this._add_favourites();this._add_menu()}this._second_pane_cell=$("<div>").addClass("rdx_second_pane_cell");this._second_pane_cell.css({"min-width":this._properties.view_pane_min_width,"margin-left":this._properties.tree_pane_min_width});this.second_pane=$("<div>").addClass("rdx_second_pane_container").appendTo(this._second_pane_cell);this._navigation_div=$("<div>").appendTo(this.second_pane);this._view_pane=$('<div id="view_content">').addClass("ns_view_container").appendTo(this.second_pane);this._container.append(this._tree_pane_cell).append(this._second_pane_cell);this._parent.append(this._container);rdx.global_title_bar=new rdx.title_bar(this._navigation_div,this._view_pane);rdx.page.apply_nav_type();this._render_tree_nodes();this._tree_div.dynatree("getTree").reactivate();rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this._resize));this._init_root();$(window).bind(rdx.events.SCROLL,{that:this},this._handle_page_scroll);$(window).resize();if(this._show_favourites===true&&rdx.utils.is_defined(this._favourites)&&this._favourites.length>0){this._tree_div.hide()}};rdx.tree.prototype._init_root=function(){var b=this._tree_div.dynatree("getRoot");if(this._properties.is_accordion===false){var a=this.get_child_list(b);if(a.length>0){b=a[0]}}this._root_dyna_node=b};rdx.tree.prototype._hide_node=function(a){if(rdx.utils.is_defined(a.li)){$(a.li).hide();a.li.hidden=true}};rdx.tree.prototype._favourite_icon_click_handler=function(b){var f=b.data.node,n=b.data.favourite_icon_clicked,p=rdx.utils.is_defined(f.tree)?f.tree.options.ns_tree:b.data.node,h=p._properties.tree_favourites.get_favourites.call_back(),d=rdx.utils.is_defined(f.data)?f.data.key:$(this).closest(".favourite_item").data("key"),e=d.split(p._VIEW_KEY_SEPARATOR);if($(".favourites_list").length<=0){p._add_favourites();p._add_menu()}var g=rdx.utils.is_defined(f.data)?f.data.key:$(this).closest(".favourite_item").data("key");if($.inArray(g,h)==-1){var o=$("<div>").addClass("favourite_item").data("key",d),a=$("<span>").addClass("favourite_item_contents").html(e[e.length-1]);o.append(a);$(".favourites_container").append(o);h.push(d);p._properties.tree_favourites.set_favourites.call_back(h);var m="";if(f.data){m=f.data.title}var m="Remove "+m+" from favourites list";$(this).addClass("favourite").attr("aria-label",m);if($(".favourites_list").hasClass("closed")){$(".favourites_container").hide()}o.bind("click",{tree:p},function(t){var v=t.data.tree,s=$(this).data("key"),u=v.get_node(s),q=v.get_view_definition(s);$(".favourite_item").each(function(w){if(w.hasClass("active")){w.removeClass("active")}});this.addClass("active");if(rdx.utils.is_defined(v._current_node_key)){v.get_node(v._current_node_key).data.ns_view.destroy_view();p._view_pane.empty();u.data.ns_view=new rdx.base_view(p._view_pane,q);u.data.ns_view.prepare_view();v._current_node_key=s}})}else{$(this).removeClass("favourite");var m="";if(f.data){m=f.data.title}if(m==""){if(e){m=e[e.length-1]}}if(n===true){$("li[id='Tree"+g+"']").find(".dynatree-icon").first().removeClass("favourite").attr("aria-label","Add "+m+" to favourites list")}$(".favourite_item:contains("+e[e.length-1]+")").remove();h=$.grep(h,function(q){return q!=d});p._properties.tree_favourites.set_favourites.call_back(h);if($(".favourite_item").length<=0){p._favourites_parent.empty();p._favourites_parent.removeClass("border-bottom");p._tree_menu.remove();p._tree_div.css({display:"block"})}}b.stopPropagation()};rdx.tree.prototype._render_tree_nodes=function(){var b={idPrefix:"Tree",generateIds:true,activeVisible:true,debugLevel:0,clickFolderMode:1,onFocus:null,autoFocus:true,autoCollapse:this._properties.swipe,ns_tree:this};if(this._properties.swipe===true){b.fx={height:"toggle",duration:200}}if(this._properties.is_accordion){b.classNames={expander:"accordion-expander",keyboard:true,active:"accordion-active",connector:"accordion-connector"}}this._construct_dyna_tree_nodes(this._tree_nodes,b,true,"");var h=null;if(this._node_to_select){h=this._node_to_select}else{if(b.children&&b.children.length>0){h=b.children[0]}}if(h){h.activate=true;h.expand=this._expand_selected_node}b.onKeydown=function(q,p){switch(p.keyCode){case 37:q.activate();case 39:q.activate();case 13:if((p.target.className=="dynatree-icon favourite"||p.target.className=="dynatree-icon")&&rdx.utils.is_defined($(q.li.childNodes))&&rdx.utils.is_defined($(q.li.childNodes).children().length>1)){$($(q.li.childNodes).children()[1]).trigger("click");var o=q.data.title;var n="Add "+o+" to favourites list";if(p.target.className=="dynatree-icon favourite"){n="Remove "+o+" from favourites list"}if(p.target.className=="dynatree-icon"){$($(q.li.childNodes).children()[1]).attr("aria-label",n)}return false}else{q.activate();var m=q.tree.options.ns_tree;if(m._view_pane){m._view_pane.attr("tabindex",0);m._view_pane[0].focus();p.preventDefault();p.stopPropagation()}}}};b.onFocus=function(m){m.data.focus=true};var a=this;if(this._properties.is_accordion===true||this._properties.expand_on_single_click===true){b.onClick=function(o,n){var m=o.getEventTargetType(n);if(n&&m=="expander"){o.activate();return}if(o.isActive()===true){o.deactivate()}o.toggleExpand()}}if(this._properties.expand_on_single_click===true){b.onDblClick=function(m){if(rdx.utils.is_not_defined(m.parent.getParent().li)){a._set_double_click_tree=true;a._set_single_click_tree=false}else{m.toggleExpand()}}}b.onActivate=function(s){var n=s.tree.options.ns_tree;if(rdx.utils.is_defined(s.getParent())&&rdx.utils.is_defined(s.getParent().li)){var u=s.getParent();var t=s.getParent().li.id;var m=t.split("^").length;while(rdx.utils.is_defined(u)&&t.indexOf("^")!==-1&&m>2){u=u.parent;t=u.li.id;m=t.split("^").length}if(rdx.utils.is_defined(u)){$(u.span).addClass("dynatree-active")}}if(rdx.utils.is_defined(s.data.activate_callback)){s.data.activate_callback.call_back()}n._clear_selected_node();var p=s.data.ns_license_keys;if(rdx.status_bar){if(!n.is_licensed(p)){rdx.status_bar.update_status(rdx.i18n.get_string("rdx.tree_feature_not_licensed",{license_label:n.get_license_label(p)}))}else{if(!n.is_enabled(p)){rdx.status_bar.update_status(rdx.i18n.get_string("rdx.tree_feature_not_enabled",{license_label:n.get_license_label(p)}))}}}if(!s.data.ns_view_definition){if(n._properties.select_child_node_with_view===false){n._view_pane.html('<p align="center"><b>'+rdx.i18n.get_string("rdx.page_under_construction")+"</b></p>")}else{if(rdx.utils.is_defined(s.childList)){var q=n._get_leaf_node_view(s,n);if(rdx.utils.is_defined(q)){setTimeout(function(){if(rdx.utils.is_defined(q.li)){$(q.li).trigger("click")}else{n._select_node(q)}},500)}else{n._view_pane.html('<p align="center"><b>'+rdx.i18n.get_string("rdx.page_under_construction")+"</b></p>")}}}return}var o=s.data.ns_view_definition;if(!o.view_properties){o.view_properties={}}n._current_node_key=o.__tree_key;n._view_pane.empty();s.data.ns_view=new rdx.base_view(n._view_pane,o);s.data.ns_view.prepare_view();$(s.span).bind(rdx.events.CONTEXT_MENU,{tree:n},function(w){var B=w.data.tree;var v=B.get_node(B._current_node_key);if(rdx.utils.is_defined(v)){if(rdx.utils.is_defined(rdx.global_title_bar)){var A=rdx.global_title_bar.get_current_crumb();if(rdx.utils.is_defined(A.view_info)&&rdx.utils.is_defined(A.view_info.base_view)){if(rdx.view_utils.get_tree_key(A.view_info.base_view.get_view_definition())!=rdx.view_utils.get_tree_key(v.data.ns_view.get_view_definition())){return true}}}var z=n._prepare_tree_menu_items(v.data);if(z.length>0){new rdx.context_menu($(v.span),z,new rdx.callback(B,B.get_item_info,[v.data.ns_view]),{menu_event:w,show:true}).build_menu();return false}}return true})};b.onDeactivate=function(m){m.tree.options.ns_tree._clear_selected_node();if(rdx.utils.is_defined(m.data.deactivate_callback)){m.data.deactivate_callback.call_back()}};b.onRender=function(p,n){var m=p.tree.options.ns_tree;if(m._show_favourites===true){m._favourites=m._properties.tree_favourites.get_favourites.call_back();if($.inArray(p.data.key,m._favourites)>-1){if(p.data.key&&(p.data.key.split("^").length-1)>1){$(n).find(".dynatree-icon").addClass("favourite").attr("tabindex",0).attr("aria-label","Remove "+p.data.title+" from favourites list")}}if((p.data.key&&(p.data.key.split("^").length-1)>1)&&$(n).find(".dynatree-icon").length>0){var o="Add "+p.data.title+" to favourites list";if($(n).find(".dynatree-icon").hasClass("favourite")){o="Remove "+p.data.title+" from favourites list"}$(n).find(".dynatree-icon").attr("tabindex",0).attr("aria-label",o);$(n).find(".dynatree-icon").bind("click",{node:p,favourite_icon_clicked:false},m._favourite_icon_click_handler)}}if($(n).hasClass("document_disabled")||$(n).hasClass("folder_disabled")){$(n).append('<span class="dynatree_alert dynatree_disabled"></span>')}if($(n).hasClass("document_unlicensed")||$(n).hasClass("folder_unlicensed")){$(n).append('<span class="dynatree_alert dynatree_unlicensed"></span>')}$(n).bind("click",{nodeSpan:n,node:p},function(u){var q=u.data.node.tree.options.ns_tree;var s=p.data.ns_view_definition;if(rdx.utils.is_not_defined(q._current_node_key)&&rdx.utils.is_defined(p.data)&&rdx.utils.is_defined(p.data.key)){q._current_node_key=p.data.key}if(rdx.utils.is_defined(q)&&q.refresh_features){q.refresh_features=false;if(rdx.utils.is_defined(u.data.node.data)&&rdx.utils.is_defined(u.data.node.data.key)){var t=new RegExp(/^[A-Z a-z]+\^[A-Z a-z]+$/);if(t.test(u.data.node.data.key)){q.refresh_tree(null,null,null,true)}else{q.refresh_tree()}}else{q.refresh_tree()}}})};if(this._properties.show_expand_collapse_all){this._expand_collapse_table=$("<table>").addClass("expand_collapse_table").append($("<tbody>"));var d=$("<td>").append(this._create_expand_or_collapse_all_link(true));var e=$("<td>").addClass("right_align").append(this._create_expand_or_collapse_all_link(false));this._tree_pane.append(this._expand_collapse_table.append($("<tr>").append(d).append(e)))}if(rdx.utils.is_defined(this._tree_div)){this._tree_div.remove()}if(rdx.utils.is_defined(this._deployment_container)){this._deployment_container.remove()}this._tree_div=$("<div>").addClass("tree_div").dynatree(b);this._tree_div.addClass("disallow_selection");rdx.register_tree(this);this._tree_pane.append(this._tree_div);if(rdx.utils.is_defined(this._properties.deployment_nodes)){this._render_deployment_tree()}if(this._properties.show_hide_licensed_features_link){this._tree_div.addClass("tree_div_with_features_link");if(rdx.utils.is_defined(this._show_hide_link_table)){this._show_hide_link_table.remove()}this._show_hide_link_table=$("<table>").addClass("expand_collapse_table").addClass("show_hide_license_link").append($("<tbody>"));this._show_hide_licensed_features_link=this._create_show_hide_unlicensed_nodes_link();var g=$("<td>").append(this._show_hide_licensed_features_link);this._tree_pane.append(this._show_hide_link_table.append($("<tr>").append(g)))}else{this._tree_div.addClass("tree_div_plain")}if(rdx.utils.is_defined(this._properties.show_information_box)&&this._properties.show_information_box){this._tree_information_box=$("<div>").addClass("information_box");this._tree_pane.append(this._tree_information_box);this._information_box_header=$("<div>").append(rdx.i18n.get_string("rdx.message_box_information")).addClass("information_box_header");this._tree_information_box.append(this._information_box_header);if(rdx.utils.is_defined(this._properties.information_text)){this._information_box=$("<div>").append(rdx.i18n.get_string(this._properties.information_text)).addClass("information_box_text");this._tree_information_box.append(this._information_box);if(rdx.utils.is_defined(this._properties.information_box_link_text)){var f=$("<a>").append(rdx.i18n.get_string(this._properties.information_box_link_text)).addClass("information_box_link");if(rdx.utils.is_defined(this._properties.information_box_link_click_callback)){f.bind(rdx.events.CLICK,{callback:this._properties.information_box_link_click_callback},function(m){m.data.callback.call_back()});this._tree_information_box.append(f)}}}}$(this).trigger(rdx.events.LOAD);if(rdx.utils.is_defined(rdx.app_search)){delete rdx.app_search}};rdx.tree.prototype._get_leaf_node_view=function(e,a){if(rdx.utils.is_defined(e.data)&&rdx.utils.is_defined(e.data["ns_view_definition"])){return e}else{var d=null;if(rdx.utils.is_defined(e.childList)){for(var f=0;f<e.childList.length;f++){var b=e.childList[f];d=a._get_leaf_node_view(b,a);if(rdx.utils.is_defined(d)){break}}}return d}};rdx.tree.prototype._clear_view_node=function(){if(rdx.utils.is_not_defined(this._current_node_key)){return}var a=this.get_node(this._current_node_key);if(rdx.utils.is_defined(a)){if(a.data.ns_view){a.data.ns_view.destroy_view();a.data.ns_view=null}a.tree.options.ns_tree._view_pane.children().remove()}this._current_node_key=null};rdx.tree.prototype._clear_selected_node=function(){if(rdx.utils.is_defined(this._navigation_div)){this._navigation_div.show()}this._clear_view_node();if(rdx.utils.is_defined(this._current_deployment)){this._current_deployment.destroy();this._current_deploment_container.removeClass("rdx_tree_selected_deployment");this._current_deployment=null;this._current_deploment_container=null}};rdx.tree.prototype._render_deployment_tree=function(){this._deployment_container=$("<div>").addClass("rdx_deployment_main_container");if(rdx.utils.is_defined(this._properties.deployment_type_title)){var deployment_title_container=$("<span>").addClass("rdx_tree_deployment_title_container").append(rdx.i18n.get_string(this._properties.deployment_type_title));this._deployment_container.append(deployment_title_container)}var main_container=$("<table>").addClass("rdx_tree_deployment").attr("cellPadding",0).attr("cellSpacing",0).append($("<tbody>"));for(var ind=0;ind<this._properties.deployment_nodes.length;ind++){var row=$("<tr>");var cell=$("<td>").append($("<a>").attr("href","#").addClass(this._properties.deployment_nodes[ind]["image_class_name"]).append(rdx.i18n.get_string(this._properties.deployment_nodes[ind]["name"])));row.append(cell);cell.bind(rdx.events.CLICK,{tree:this,deployment:this._properties.deployment_nodes[ind]},function(event){var tree=event.data.tree;var deployment=event.data.deployment;if(rdx.utils.is_defined(tree._current_deploment_container)){tree._current_deploment_container.removeClass("rdx_tree_selected_deployment")}if(rdx.utils.is_defined(tree._current_node_key)){tree.get_node(tree._current_node_key).deactivate()}tree._clear_selected_node();tree._current_deploment_container=$(this);tree._expand_or_collapse_all(false);if(rdx.utils.is_defined(tree._navigation_div)){tree._navigation_div.hide()}if(rdx.utils.is_defined(deployment.class_name)){var args="tree._view_pane";var deployment=eval("new "+deployment.class_name+"("+args+");");deployment.render();tree._current_deployment=deployment}$(this).addClass("rdx_tree_selected_deployment")});main_container.append(row)}this._deployment_container.append(main_container);this._tree_pane.append(this._deployment_container)};rdx.tree.prototype.get_item_info=function(a){var b=a.get_item_info();b.action_item_data=[];return b};rdx.tree.prototype._prepare_tree_menu_items=function(f){var m=f.ns_view.get_action_items();var d=new Array();if(rdx.utils.is_not_defined(m)){return d}for(var a=0;a<m.length;a++){if(m[a].is_no_selection()||m[a].is_independent_of_selection()){d.push(m[a])}else{continue}}var b=f.ns_license_keys;if(rdx.utils.is_not_defined(b)||b.length===0){return d}else{if(d.length>0){d[d.length-1]._properties.add_separator=true}}if(!this.is_licensed(b)){return d}if(this.is_enabled(b)){var h={label:"rdx.tree_disable_feature",tooltip:rdx.i18n.get_string("rdx.tree_disable_feature_tooltip"),image_url:rdx.images.DOCUMENT_DISABLE_IMG,no_selection:true,click_handler_callback:new rdx.callback(this,this._trigger_feature_enable_disable,[f,"disable"])};var e=new rdx.action(h);d.push(e)}else{var g={label:"rdx.tree_enable_feature",tooltip:rdx.i18n.get_string("rdx.tree_enable_feature_tooltip"),image_url:rdx.images.DOCUMENT_ENABLE_IMG,no_selection:true,click_handler_callback:new rdx.callback(this,this._trigger_feature_enable_disable,[f,"enable"])};var e=new rdx.action(g);d.push(e)}return d};rdx.tree.prototype._trigger_feature_enable_disable=function(a,d,b){rdx.model.post(this._feature_resource,new rdx.callback(this,this.refresh_tree),{feature:d.ns_license_keys},new rdx.callback(this,this._handle_error),b,null,this._parent)};rdx.tree.prototype._handle_error=function(a){rdx.mask.unmask_dom_element(this._tree_pane,this._tree_mask_id);if(rdx.utils.is_not_defined(a)){return}rdx.message_box.error(a);rdx.status_bar.update_status(a,rdx.ERROR)};rdx.tree.prototype._resize=function(){if(this._container.css("display")=="none"){return}var h=this._tree_pane.outerWidth(true);if(rdx.utils.is_defined(this._expand_collapse_table)){rdx.utils.set_width(this._expand_collapse_table,h)}var f=0;if(rdx.utils.is_defined(this._show_hide_link_table)){this._show_hide_link_table.width(h)}if(!rdx.utils.is_chrome_safari()){this._container.css("width",rdx.page.get_content().width())}var g=$(window).height();var e=$(document.body).height();var d=g>e?g:e;var b=this._tree_pane.position();var m=rdx.page.get_header_position();var a={data:{that:this}};this._handle_page_scroll(a)};rdx.tree.prototype._handle_page_scroll=function(e){var d=e.data.that;var f=d.second_pane.height();var a=$(".tree_pane",d._tree_pane_cell).height();if(f>a){d._tree_pane_cell.css("height",f)}else{var b=d._tree_pane_cell.height();if(b!=a){d._tree_pane_cell.css("height",a)}}};rdx.tree.prototype._create_expand_or_collapse_all_link=function(a){var d=rdx.i18n.get_string(a?"rdx.expand_all":"rdx.collapse_all");var b=rdx.i18n.get_string(a?"rdx.tree_expand_all_tooltip":"rdx.tree_collapse_all_tooltip");return $("<a>").attr("href","#").text(d).attr("title",b).bind(rdx.events.CLICK,{rdx_tree:this,expand:a},function(e){e.data.rdx_tree._expand_or_collapse_all(e.data.expand)})};rdx.tree.prototype._create_show_hide_unlicensed_nodes_link=function(){var a=this._get_show_hide_licensed_nodes_text();return $("<a>").attr("href","#").text(a).bind(rdx.events.CLICK,{rdx_tree:this},function(b){b.data.rdx_tree._properties.show_unlicensed_nodes=!b.data.rdx_tree._properties.show_unlicensed_nodes;var d=b.data.rdx_tree._get_show_hide_licensed_nodes_text();$(this).text(d);b.data.rdx_tree.refresh_tree()})};rdx.tree.prototype._get_show_hide_licensed_nodes_text=function(){return rdx.i18n.get_string(this._properties.show_unlicensed_nodes?"rdx.hide_unlicensed_nodes":"rdx.show_unlicensed_nodes")};rdx.tree.prototype._expand_or_collapse_all=function(a){if(this._properties.swipe){this._tree_div.dynatree("option","autoCollapse",false)}this._tree_div.dynatree("getRoot").visit(function(e){var d=e.childList;if(rdx.utils.is_defined(d)){for(var b=0;b<d.length;b++){d[b].expand(a)}}});if(this._properties.swipe){this._tree_div.dynatree("option","autoCollapse",true)}};rdx.tree.prototype._is_first_level_node=function(b){if(rdx.utils.is_defined(b)){var a=b.split(this._VIEW_KEY_SEPARATOR);if(a.length==2){return 1}else{return 0}}return 0};rdx.tree.prototype._construct_dyna_tree_nodes=function(q,u,v,d){for(var h=0,p=q.length;h<p;h++){var s=((d)?d:"")+((q[h].get_name())?q[h].get_name():"");var n=this._show_favourites?null:false;if(rdx.utils.is_defined(q[h].get_view())){q[h].get_view().__tree_key=s;q[h].get_view().add_to_bread_crumb=true;if((rdx.utils.is_not_defined(q[h].get_view().view_properties)||rdx.utils.is_not_defined(q[h].get_view().view_properties.title))||(rdx.utils.is_defined(q[h].get_view().view_properties.favorites)&&rdx.utils.is_defined(q[h].get_view().view_properties.favorites===false))){if(rdx.utils.is_not_defined(q[h].get_view().view_properties)){q[h].get_view().view_properties={}}q[h].get_view().view_properties.title=q[h].get_name();var e=this._is_first_level_node(q[h].get_view().__tree_key);n=(this._show_favourites&&(!(e)))?null:false}}var b={title:q[h].get_name(),key:s,ns_view_definition:q[h].get_view(),tooltip:q[h].get_tooltip(),ns_license_keys:q[h].get_license_keys(),icon:n,activate_callback:q[h].get_activate_callback(),deactivate_callback:q[h].get_deactivate_callback()};if(v===true){this._root_node=b}if(rdx.utils.is_defined(q[h].get_callback_function())){var t=q[h].get_callback_function();var w=t.call_back([new rdx.tree_callback_params({resource_results:this._resource_results})]);if(w===false){continue}}var f="";var o=q[h].get_license_keys();var g=q[h].to_show_if_not_licensed();if(o.length>0){if(!this.is_licensed(o)){if(!g){if(!this._properties.show_unlicensed_nodes){continue}f="_unlicensed"}}else{if(g){continue}else{if(!this.is_enabled(o)){f="_disabled"}}}}var a=q[h].get_nodes();var m="";if(this._properties.is_accordion){m="accordion_"}if(v&&this._properties.is_accordion){b.addClass="accordion"+f;this._construct_dyna_tree_nodes(a,b,false,"")}else{if(rdx.utils.is_defined(q[h].get_view())){if(rdx.utils.is_defined(q[h].get_view().view_properties)){if(q[h].get_view().view_properties.tested_ok){f="_tested"}}}if(a.length>0){b.addClass=m+"folder"+f;this._construct_dyna_tree_nodes(a,b,false,s+this._VIEW_KEY_SEPARATOR)}else{b.addClass=m+"document"+f}}if(!u.children){u.children=[]}u.children.push(b);if(rdx.utils.is_defined(this._properties.default_node_key)&&this._properties.default_node_key===b.key){this._node_to_select=b}else{if(!this._node_to_select&&q[h].to_select()){this._expand_selected_node=q[h].to_expand_selected();this._node_to_select=b}}}};rdx.tree.prototype.is_licensed=function(d){if(!this._license_response){return true}for(var b=0,a=d.length;b<a;b++){if(this._license_response[d[b]]==false){return false}}return true};rdx.tree.prototype.is_enabled=function(d){if(!this._feature_response){return true}for(var b=0,a=d.length;b<a;b++){if(this._feature_response[d[b]]==false){return false}}return true};rdx.tree.prototype.get_license_label=function(a){if(a.length>0&&rdx.utils.is_defined(this._license_resource)){if(this._license_resource.properties[a[0]]){return rdx.i18n.get_string(this._license_resource.properties[a[0]].label)}else{return a[0]}}return""};rdx.tree.prototype.get_node=function(a){var b=this._tree_div.dynatree("getTree").getNodeByKey(a);if(b==null){return null}return b};rdx.tree.prototype.select_node=function(b,a){var d=this._tree_div.dynatree("getTree").getNodeByKey(b);if(d==null){return false}this._select_node(d,a);return true};rdx.tree.prototype._select_node=function(b,a){a=(rdx.utils.is_defined(a))?a:false;if(b.isActive()){b.deactivate();b.activate()}else{b.activate();if(a===false){b.expand()}}};rdx.tree.prototype.reinit_tree_menu=function(){var a=this.get_node(this._current_node_key);if(rdx.utils.is_not_defined(a)){return}var b=this._prepare_tree_menu_items(a.data);if(b.length>0){new rdx.context_menu($(a.span),b,new rdx.callback(this,this.get_item_info,[a.data.ns_view])).build_menu()}};rdx.tree.prototype.activate_current_node=function(){this.select_node(this._current_node_key,true)};rdx.tree.prototype.get_view_title=function(b){var a=this._tree_div.dynatree("getTree").getNodeByKey(b);return a.data.title};rdx.tree.prototype.re_render_selected_node=function(a){this._render_tree_nodes();this.select_node(a,true)};rdx.tree_callback_params=function(a){this._properties=a};rdx.tree_callback_params.prototype.get_resource_response=function(a){return this._properties.resource_results[a]};rdx.vertical_accordion_navigation=function(d,e,a,b){this._parent=typeof(d)=="string"?$("#"+d):d;this._tree_nodes=e;this._DEFAULT_PROPERTIES={swipe:true,is_accordion:false,show_expand_collapse_all:false,show_unlicensed_nodes:true,tree_pane_min_width:250,view_pane_min_width:500,expand_on_single_click:true,show_hide_licensed_features_link:false,deployment_nodes:null,tree_pane_width:"15%"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._tree_pane=null;this._expand_collapse_table=null;this._show_hide_link_table=null;this._tree_div=null;this._view_pane=null;this._node_to_select=null;this._expand_selected_node=true;this._license_response=null;this._feature_response=null;this._VIEW_KEY_SEPARATOR="^";this._resource_list=(rdx.utils.is_defined(b))?b:null;this.resource_name_map={};this._resource_results={};this._license_resource=rdx.utils.is_defined(this._resource_list)&&rdx.utils.is_defined(this._resource_list[rdx.LICENSE_KEY])?rdx.utils.get_resource(this._resource_list[rdx.LICENSE_KEY]):null;this._feature_resource=rdx.utils.is_defined(this._resource_list)&&rdx.utils.is_defined(this._resource_list[rdx.FEATURE_KEY])?rdx.utils.get_resource(this._resource_list[rdx.FEATURE_KEY]):null;this._current_node_key=null;this._current_deployment=null;this._current_deploment_container=null;this._root_node=null;this._tree_mask_id="__tree_mask_id";this._set_double_click_tree=false;this._set_single_click_tree=true;this._show_hide_licensed_features_link=null;this._view_name_def_map={};this._secondary_menu_context_children={};this._target_objects={};this._resource_key_map={};this._current_view=null;this._first_time_flag=false;this._default_click_flag=false;this._prototype_views=["Agents","App Templates"];this._no_secondary_tree=false;this._prototyped_marker='<div class= "prototyped"></div>'};rdx.vertical_accordion_navigation.prototype.render=function(){this._parent.addClass("accordion_menu");if(rdx.utils.is_not_defined(this._resource_list)){this._render()}else{this._get_resource_data()}};rdx.vertical_accordion_navigation.prototype._get_resource_data=function(a){};rdx.vertical_accordion_navigation.prototype._initialize_data=function(){for(var G=0;G<this._tree_nodes.length;G++){var F=this._tree_nodes[G];var L=F.get_nodes();var q=F.get_name();if(rdx.utils.is_defined(L)){for(var D=0;D<L.length;D++){var o=q;var e=L[D];var u=e.get_name();var J=e.get_link();var d=J.get_nodes();o=o+"^"+u;for(var C=0;C<d.length;C++){var A=d[C].get_name();var h=d[C].get_nodes();var g=d[C].get_view();var I=o+"^"+A;if(rdx.utils.is_defined(g)&&rdx.utils.is_defined(g.resource_name)&&g.resource_name!==""){this._resource_key_map[g.resource_name]=I}if(rdx.utils.is_defined(h)){for(var B=0;B<h.length;B++){var s=h[B].get_name();var K=h[B].get_view();var b=I+"^"+s;if(rdx.utils.is_defined(K)&&rdx.utils.is_defined(K.resource_name)&&K.resource_name!==""){this._resource_key_map[K.resource_name]=b}}}}}}var E=F.get_link();if(rdx.utils.is_defined(E)){var p=E.get_nodes();for(var z=0;z<p.length;z++){var o=q;var a=p[z].get_name();var H=p[z].get_nodes();var t=p[z].get_view();var I=o+"^"+a;if(rdx.utils.is_defined(t)&&rdx.utils.is_defined(t.resource_name)&&t.resource_name!==""){this._resource_key_map[t.resource_name]=I}for(var w=0;w<H.length;w++){var f=H[w].get_name();var v=H[w].get_view();var b=I+"^"+f;if(rdx.utils.is_defined(v)&&rdx.utils.is_defined(v.resource_name)&&v.resource_name!==""){this._resource_key_map[v.resource_name]=b}}}}}};rdx.vertical_accordion_navigation.prototype.get_key_by_resource=function(a){if(rdx.utils.is_defined(a)&&a!==""){return this._resource_key_map[a]}return""};rdx.vertical_accordion_navigation.prototype._render=function(){this._initialize_data();var d=$("<div>").addClass("vertical_accordion_tree");this._navigation_primary=$("<div>").addClass("navigation narrowed");this._navigation_secondary=$("<div>").addClass("navigation_secondary");this._page_content=$("<div>").addClass("page_content");d.append(this._navigation_primary);d.append(this._navigation_secondary);var a=$("<div>").addClass("ui_page_container");a.append(d);a.append(this._page_content);this._parent.append(a);this.second_pane=$("<div>");this._navigation_div=$("<div>");this.second_pane.append(this._navigation_div).addClass("rdx_second_pane_container");this._view_pane=$("<div>").addClass("main_view_container");this.second_pane.append(this._view_pane);this._page_content.append(this.second_pane);rdx.global_title_bar=new rdx.title_bar(this._navigation_div,this._view_pane);this._primary_list=$("<div>").addClass("list");this._navigation_primary.append(this._primary_list);this._secondary_selected_menu=$("<div>").addClass("selected-menu");this._secondary_list=$("<div>").addClass("list");this._navigation_secondary.append(this._secondary_selected_menu);this._navigation_secondary.append(this._secondary_list);this._menu_items_link={};for(var b=0;b<this._tree_nodes.length;b++){this._render_nodes(this._tree_nodes[b])}this.register_event_handlers();rdx.register_tree(this)};rdx.vertical_accordion_navigation.prototype._render_nodes=function(o,d){var e=o;var f=e.get_name();var b=e.get_nodes();var n=e.get_link();var p=$("<div>").addClass("item clearfix menu-item primary-menu");var a=e.get_icon_class();var m=$("<span>").addClass(a+" icon");var h=$("<span>").addClass("menu").append(f);count_elem=$("<span>").addClass("count");p.append(m);p.append(h);p.append(count_elem);if(rdx.utils.is_not_defined(d)){this._primary_list.append(p)}var g=f;p.attr("data-view_name",g);this._target_objects[g]=p;if(rdx.utils.is_defined(n)){this._menu_items_link[g]=n;p.addClass("primary-menu-item")}p.attr("title",f);var q=$("<div>").addClass("sub-list menu-item primary-menu-item");if(d==true){this._primary_list.prepend(q)}else{this._primary_list.append(q)}if(d==true){this._primary_list.prepend(p)}this._render_sublist_menu_items(q,b,null,count_elem,g)};rdx.vertical_accordion_navigation.prototype._render_sublist_menu_items=function(A,m,g,w,a){var f=0;try{if(rdx.utils.is_not_empty($(w).text())){var s=parseInt($(w).text());f=s}}catch(t){}w.empty();var b=m.length+f;if(b>0){w.append(b)}for(var o=0;o<m.length;o++){var d=m[o];var h=d.get_name();var z=d.get_link();var n=$("<div>").addClass("item clearfix lower-menu");var v=d.get_icon_class();var u=$("<span>").addClass(v+" icon");var p=$("<span>").addClass("menu");p.append(h);w=$("<span>").addClass("count");n.append(u);n.append(p);n.append(w);A.append(n);n.attr("title",h);var q=a+"^"+h;n.attr("data-view_name",q);this._target_objects[q]=n;if(rdx.utils.is_defined(z)){this._menu_items_link[q]=z}}};rdx.vertical_accordion_navigation.prototype.register_event_handlers=function(){var a=this;a._primary_list.bind(rdx.events.CLICK,{accordion_menu:this},function(b){a._process_and_allocate_events(b);b.stopPropagation();b.stopImmediatePropagation()})};rdx.vertical_accordion_navigation.prototype._get_target=function(a){var b=a.target||a.srcElement||a.originalTarget;return $(b)};rdx.vertical_accordion_navigation.prototype._process_and_allocate_events=function(a){if(!rdx.utils.is_defined(a)){return}var b=this._get_target(a);while(true){if(b.hasClass("menu-item")){break}b=b.parent()}if((b.hasClass("primary-menu")&&b.hasClass("primary-menu-item"))||b.hasClass("primary-menu-item")){this._show_accordion_tree(a)}else{if(b.hasClass("primary-menu")){this._show_primary_menu_items(a)}}};rdx.vertical_accordion_navigation.prototype._show_primary_menu_items=function(b){if(!rdx.utils.is_defined(b)){return}var d=this._get_target(b);while(true){if(d.hasClass("item clearfix")){break}d=d.parent()}if(d.is(".selected")){d.removeClass("selected")}else{var a=d.parent();a.find(".selected").removeClass("selected");d.addClass("selected")}this._show_secondary_tree=false};rdx.vertical_accordion_navigation.prototype._show_accordion_tree=function(al){if(!rdx.utils.is_defined(al)){return}var a=this._get_target(al);while(true){if(a.hasClass("item clearfix")){break}a=a.parent()}this._show_secondary_tree=true;var q=this;var C=a.attr("data-view_name");var B=C;var z=this._menu_items_link[C];var H=z.get_name();var v=z.get_nodes();this._secondary_list.empty();this._secondary_selected_menu.empty();this._secondary_selected_menu.append(H);if(a.hasClass("primary-menu")||a.hasClass("lower-menu")){var s=a.parent();s.find(".selected").removeClass("selected");a.addClass("selected")}var d=null;var b=null;var t=false;for(var ai=0;ai<v.length;ai++){var am=v[ai].get_name();var F=v[ai].get_nodes();var V=v[ai].get_view();var aj=B+"^"+am;if(rdx.utils.is_defined(V)){this._view_name_def_map[aj]=V}var e=$("<div>").addClass("item clearfix secondary_item");if(!ai){d=e;if(rdx.utils.is_not_defined(v[ai].get_view())){t=true}}e.attr("data-view_name",aj);this._target_objects[aj]=e;var w=$("<span>").addClass("icon");w.addClass(v[ai].get_icon_class());if(F.length){e.addClass("expand_collapse_item");w.addClass("plus")}var u=$("<span>").addClass("menu");u.append(am);e.append(w);e.append(u);this._secondary_list.append(e);if(F.length){var A=$("<div>").addClass("sub-list");e.addClass("secondary_menu_item");for(var ah=0;ah<F.length;ah++){var an=F[ah].get_name();var ab=F[ah].get_nodes();var Z=F[ah].get_view();var W=aj+"^"+an;this._view_name_def_map[W]=Z;var I=$("<div>").addClass("item clearfix secondary_child accordion_child_node");if(t==true&&!ah&&rdx.utils.is_defined(F[ah].get_view())){b=I}I.attr("data-view_name",W);this._target_objects[W]=I;var ak=$("<span>").addClass("menu");ak.append(an);I.append(ak);A.append(I);if(ab.length){var f=$("<span>").addClass("icon plus");I.prepend(f);var G=$("<div>").addClass("sub-list");for(var ag=0;ag<ab.length;ag++){var Q=ab[ag].get_name();var L=ab[ag].get_nodes();var ae=ab[ag].get_view();var U=W+"^"+Q;this._view_name_def_map[U]=ae;var R=$("<div>").addClass("item clearfix secondary_child accordion_child_node");R.attr("data-view_name",U);this._target_objects[U]=R;var o=$("<span>").addClass("menu");o.append(Q);R.append(o);G.append(R);if(L.length){R.prepend(f);var E=$("<div>").addClass("sub-list");for(var af=0;af<L.length;af++){var O=L[af].get_name();var K=L[af].get_nodes();var ac=L[af].get_view();var T=U+"^"+O;this._view_name_def_map[T]=ac;var P=$("<div>").addClass("item clearfix secondary_child accordion_child_node");P.attr("data-view_name",T);this._target_objects[T]=P;var h=$("<span>").addClass("menu");h.append(O);P.append(h);E.append(P);if(K.length){P.prepend(f);var D=$("<div>").addClass("sub-list");for(var ad=0;ad<K.length;ad++){var M=K[ad].get_name();var J=K[ad].get_nodes();var aa=K[ad].get_view();var S=T+"^"+M;this._view_name_def_map[S]=aa;var N=$("<div>").addClass("item clearfix secondary_child accordion_child_node");N.attr("data-view_name",S);this._target_objects[S]=N;var g=$("<span>").addClass("menu").append(M);g.append(M);N.append(g);D.append(N)}this._secondary_list.append(D);this._secondary_menu_context_children[T]=D}}this._secondary_list.append(E);this._secondary_menu_context_children[U]=E}}this._secondary_list.append(G);this._secondary_menu_context_children[W]=G}}this._secondary_list.append(A);this._secondary_menu_context_children[aj]=A}}$(".secondary_item").bind(rdx.events.CLICK,{systemlog:this},function(m){q._show_secondary_menu_items(m)});$(".secondary_child").bind(rdx.events.CLICK,{systemlog:this},function(m){q._higlight_selected_menu(m)});$(".accordion_child_node").bind(rdx.events.CLICK,{systemlog:this},function(m){q._load_selected_view(m)})};rdx.vertical_accordion_navigation.prototype._show_secondary_menu_items=function(a){var g=this._get_target(a);var f=null;while(true){if(g.hasClass("item clearfix")){break}g=g.parent()}var e=g.attr("data-view_name");var m=this._secondary_menu_context_children[e];if(g.is(".selected")){var n=g.attr("data-view_name").split("^")[0];if(g.hasClass("secondary_menu_item")){g.removeClass("selected")}if(g.hasClass("secondary_menu_item")){m.slideUp(200)}}else{var b=g.parent();b.find(".selected").removeClass("selected");var d=this._secondary_menu_context_children;for(var h in d){if(d.hasOwnProperty(h)){d[h].slideUp(200)}}if(g.hasClass("secondary_menu_item")){m.slideDown(200)}g.addClass("selected")}this._load_view(e)};rdx.vertical_accordion_navigation.prototype.select_node=function(f,h){this.set_selected_node(f);var a=f.split("^");var b="";this.set_first_time_flag(true);for(var e=0;e<a.length;e++){var d=a[e];if(b===""){b=d}else{b=b+"^"+d}var g=this.get_context_obj(b);g.trigger("click")}this.set_first_time_flag(false)};rdx.vertical_accordion_navigation.prototype.is_first_time=function(){return this._first_time_flag};rdx.vertical_accordion_navigation.prototype.set_first_time_flag=function(a){this._first_time_flag=a};rdx.vertical_accordion_navigation.prototype.set_selected_node=function(a){this._node_to_select=a};rdx.vertical_accordion_navigation.prototype.get_selected_node=function(){return this._node_to_select};rdx.vertical_accordion_navigation.prototype.set_context_obj=function(a,b){this._target_objects[a]=b};rdx.vertical_accordion_navigation.prototype.get_context_obj=function(a){return this._target_objects[a]};rdx.vertical_accordion_navigation.prototype._show_secondary_navigation=function(a){var b=600;if(a){this._navigation_secondary.css("left","240px");this._page_content.css("margin-left","450px");this._navigation_secondary.show()}else{this._navigation_secondary.hide(b);this._page_content.animate({"margin-left":240},b)}};rdx.vertical_accordion_navigation.prototype._show_full=function(a){var d=600;var b=this;if(a){b._navigation_secondary.animate({left:240},d,function(){b._navigation_primary.removeClass("narrowed")});b._page_content.animate({"margin-left":450},d,function(){if(rdx.utils.is_defined(b._current_view.get_view().recalculate_widths_and_heights)){b._current_view.get_view().recalculate_widths_and_heights(true)}})}else{if(this._show_secondary_tree){b._navigation_secondary.animate({left:60},d,function(){b._navigation_primary.addClass("narrowed")});this._page_content.animate({"margin-left":270},d,function(){if(rdx.utils.is_defined(b._current_view.get_view().recalculate_widths_and_heights)){b._current_view.get_view().recalculate_widths_and_heights(false)}})}}};rdx.vertical_accordion_navigation.prototype._load_view=function(e){this._navigation_primary.show();this._navigation_secondary.show();this._clear_prev_view();for(var g=0;g<rdx.page.global_elements.length;g++){var h=rdx.page.global_elements[g];if(rdx.utils.is_defined(h["class"])){$("."+h["class"]).remove()}else{if(rdx.utils.is_defined(h.id)){$("#"+h.id).remove()}else{$(h.obejct).remove()}}}var b=this._view_name_def_map[e];if(!b){this._view_pane.html('<p align="center"><b>'+rdx.i18n.get_string("rdx.page_under_construction")+"</b></p>");return}if(!b.view_properties){b.view_properties=new Object()}var n=e.split("^");var m=n[n.length-1];if($.inArray(m,this._prototype_views)!==-1){$(".prototyped").show()}else{$(".prototyped").hide()}this._view_pane.empty();var f=new rdx.base_view(this._view_pane,b);if(rdx.utils.is_defined(rdx.global_title_bar)&&rdx.utils.is_defined(b.add_to_bread_crumb)&&b.add_to_bread_crumb){rdx.global_title_bar.clear_toolbar_items();rdx.global_title_bar.remove_all_crumbs();var a="";if(rdx.utils.is_defined(b.view_properties.title)){a=rdx.i18n.get_string(b.view_properties.title)}else{a=rdx.i18n.get_string(b.title)}var q="";var d=rdx.global_title_bar.get_current_crumb();if(rdx.utils.is_defined(d)){if(rdx.utils.is_defined(d.view_info)&&rdx.utils.is_defined(d.view_info.base_view)){if(rdx.utils.is_defined(b.bread_crumb_formatter)){this._bread_crumb_processing_data=d.view_info.base_view.get_view_context().get_data();var o=new rdx.formatter(b.bread_crumb_formatter);o.map_data_items(this._bread_crumb_processing_data);var p=o.get_map_values();if(rdx.utils.is_defined(p)&&(p.length)>0){q=p[0]}a=a+" : "+q}}}rdx.global_title_bar.add_crumb(a,f);f.bread_crumb_added(true)}f.prepare_view();this._navigation_primary.show();this._navigation_secondary.show();this._current_view=f};rdx.vertical_accordion_navigation.prototype._clear_prev_view=function(){if(rdx.utils.is_defined(this._current_view)){this._current_view.destroy_view();this._current_view=null}};rdx.vertical_accordion_navigation.prototype._higlight_selected_menu=function(b){var d=this._get_target(b);while(true){if(d.hasClass("item clearfix")){break}d=d.parent()}var a=d.parent();a.find(".selected").removeClass("selected");d.addClass("selected")};rdx.vertical_accordion_navigation.prototype._load_selected_view=function(b){this._navigation_primary.show();this._navigation_secondary.show();var d=this._get_target(b);while(true){if(d.hasClass("item clearfix")){break}d=d.parent()}var a=d.attr("data-view_name");var e=this._secondary_menu_context_children[a];this._load_view(a);this._navigation_primary.show();this._navigation_secondary.show()};rdx.vertical_accordion_navigation.prototype.animate_and_update_node=function(f){var b=f.element;var a=f.node_defn;var e=$(b).clone();var d=f.do_add;if(d==true){e.css("height",$(b).height()).css("width",$(b).width()).css("z-index",99999999);e.css("position","absolute").css("left",$(b).offset().left).css("top",$(b).offset().top);$(document.body).append(e);e.animate({left:$(this._primary_list).offset().left,top:$(this._primary_list).offset().top,opacity:"0.5",height:"10px",width:"10px"},2000,function(g){e.hide(300,function(){$(this).remove()});rdx.get_tree()._handle_animation_complete(f)})}else{this._remove_node(f)}};rdx.vertical_accordion_navigation.prototype._remove_node=function(o){for(var f=0;f<o.node_defn.tree_nodes.length;f++){var m=o.node_defn.tree_nodes[f].get_name();var d=this._get_node(m);if(d.is_node_present==true){var a=o.node_defn.tree_nodes[f].get_nodes();if(rdx.utils.is_defined(a)&&a.length>0){for(var b=0;b<a.length;b++){var n=this._get_sub_node(m+"^"+a[b].get_name());if(n.is_node_present==true){n.container.remove();var g=d.count_element.text();try{g=parseInt(g);if(g>0){g=g-1}d.count_element.empty().append(g)}catch(h){}}}}}}};rdx.vertical_accordion_navigation.prototype._handle_animation_complete=function(f){for(var d=0;d<f.node_defn.tree_nodes.length;d++){var b=f.node_defn.tree_nodes[d].get_name();var e=this._get_node(b);if(e.is_node_present==true){var a=f.node_defn.tree_nodes[d].get_nodes();if(rdx.utils.is_defined(a)&&a.length>0){this._render_sublist_menu_items(e.sub_list_cont,a,null,e.count_element,b)}}else{this._render_nodes(f.node_defn.tree_nodes[d],true)}}};rdx.vertical_accordion_navigation.prototype._get_node=function(b){var f={is_node_present:false};for(var d=0;d<this._primary_list.children().length;d++){var e=this._primary_list.children()[d];var a=$(e).children();if(rdx.utils.is_defined(a[1])&&$(a[1]).hasClass("menu")){if(b==$(a[1]).text()){f.is_node_present=true;f.count_element=$(a[2]);f.container=$(e);if(rdx.utils.is_defined(this._primary_list.children()[d+1]&&$(this._primary_list.children()[d+1]).hasClass("sub-list"))){f.sub_list_cont=$(this._primary_list.children()[d+1]);break}}}}return f};rdx.vertical_accordion_navigation.prototype._get_sub_node=function(e){var h={is_node_present:false};var b=false;for(var d=0;d<this._primary_list.children().length;d++){var f=this._primary_list.children()[d];var a=$(f).children();for(var g=0;g<a.length;g++){if(rdx.utils.is_defined(a[g])&&rdx.utils.is_defined($(a[g]).attr("data-view_name"))){if(e==$(a[g]).attr("data-view_name")){h.is_node_present=true;h.container=$(a[g]);b=true;break}}}if(b==true){break}}return h};rdx.vertical_accordion_navigation.prototype.get_view_definition=function(a){if(this._view_name_def_map[a]){return node.data.ns_view_definition}else{return null}};rdx.vertical_accordion_navigation.prototype.get_node=function(b){var a={};a.data={};a.data.key=b;a.data.ns_view_definition=this._view_name_def_map[b];return a};rdx.accordion_menu=function(a){this._DEFAULT_PROPERTIES={name:"",link:null,tooltip:"",select:false,expand_selected:true,license_keys:[],show_if_not_licensed:false,nodes:[],is_valid_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.accordion_menu.prototype.get_name=function(){return rdx.i18n.get_string(this._properties.name)};rdx.accordion_menu.prototype.get_callback_function=function(){return this._properties.is_valid_callback};rdx.accordion_menu.prototype.get_tooltip=function(){if(rdx.utils.is_defined(this._properties.tooltip)){return rdx.i18n.get_string(this._properties.tooltip)}return""};rdx.accordion_menu.prototype.to_select=function(){return this._properties.select};rdx.accordion_menu.prototype.to_expand_selected=function(){return this._properties.expand_selected};rdx.accordion_menu.prototype.get_license_keys=function(){return this._properties.license_keys};rdx.accordion_menu.prototype.to_show_if_not_licensed=function(){return this._properties.show_if_not_licensed};rdx.accordion_menu.prototype.get_nodes=function(){return this._properties.nodes};rdx.accordion_menu.prototype.get_link=function(){return this._properties.link};rdx.accordion_menu.prototype.get_icon_class=function(){return this._properties.icon_class};rdx.accordion_menu_node=function(a){this._DEFAULT_PROPERTIES={name:"",link:null,tooltip:"",select:false,expand_selected:true,license_keys:[],show_if_not_licensed:false,is_valid_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.accordion_menu_node.prototype.get_name=function(){return rdx.i18n.get_string(this._properties.name)};rdx.accordion_menu_node.prototype.get_callback_function=function(){return this._properties.is_valid_callback};rdx.accordion_menu_node.prototype.get_tooltip=function(){if(rdx.utils.is_defined(this._properties.tooltip)){return rdx.i18n.get_string(this._properties.tooltip)}return""};rdx.accordion_menu_node.prototype.to_select=function(){return this._properties.select};rdx.accordion_menu_node.prototype.to_expand_selected=function(){return this._properties.expand_selected};rdx.accordion_menu_node.prototype.get_license_keys=function(){return this._properties.license_keys};rdx.accordion_menu_node.prototype.to_show_if_not_licensed=function(){return this._properties.show_if_not_licensed};rdx.accordion_menu_node.prototype.get_link=function(){return this._properties.link};rdx.accordion_menu_node.prototype.get_icon_class=function(){return this._properties.icon_class};rdx.accordion_tree=function(a){this._DEFAULT_PROPERTIES={name:"",tooltip:"",select:false,expand_selected:true,license_keys:[],show_if_not_licensed:false,nodes:[],is_valid_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.accordion_tree.prototype.get_name=function(){return rdx.i18n.get_string(this._properties.name)};rdx.accordion_tree.prototype.get_callback_function=function(){return this._properties.is_valid_callback};rdx.accordion_tree.prototype.get_tooltip=function(){if(rdx.utils.is_defined(this._properties.tooltip)){return rdx.i18n.get_string(this._properties.tooltip)}return""};rdx.accordion_tree.prototype.to_select=function(){return this._properties.select};rdx.accordion_tree.prototype.to_expand_selected=function(){return this._properties.expand_selected};rdx.accordion_tree.prototype.get_license_keys=function(){return this._properties.license_keys};rdx.accordion_tree.prototype.to_show_if_not_licensed=function(){return this._properties.show_if_not_licensed};rdx.accordion_tree.prototype.get_nodes=function(){return this._properties.nodes};rdx.accordion_tree.prototype.get_icon_class=function(){return this._properties.icon_class};rdx.accordion_tree_node=function(a){this._DEFAULT_PROPERTIES={name:"",view:null,tooltip:"",select:false,expand_selected:true,license_keys:[],show_if_not_licensed:false,nodes:[],is_valid_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.accordion_tree_node.prototype.get_name=function(){return rdx.i18n.get_string(this._properties.name)};rdx.accordion_tree_node.prototype.get_callback_function=function(){return this._properties.is_valid_callback};rdx.accordion_tree_node.prototype.get_view=function(){return this._properties.view};rdx.accordion_tree_node.prototype.get_tooltip=function(){if(rdx.utils.is_defined(this._properties.tooltip)){return rdx.i18n.get_string(this._properties.tooltip)}return""};rdx.accordion_tree_node.prototype.to_select=function(){return this._properties.select};rdx.accordion_tree_node.prototype.to_expand_selected=function(){return this._properties.expand_selected};rdx.accordion_tree_node.prototype.get_license_keys=function(){return this._properties.license_keys};rdx.accordion_tree_node.prototype.to_show_if_not_licensed=function(){return this._properties.show_if_not_licensed};rdx.accordion_tree_node.prototype.get_nodes=function(){return this._properties.nodes};rdx.accordion_tree_node.prototype.get_icon_class=function(){return this._properties.icon_class};rdx.dashboard_constants=new function(){this.REFRESH_IMAGE="refresh_image"};rdx.gadget=function(b,a){this._DEFAULT_PROPERTIES={header:"",content:null,keywords:[],resizable:false,collapse_expand:true,maximize_restore:true,close:true};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b);this._DEFAULT_CUSTOMIZABLE_PROPERTIES={add:false,column_index:-1,row_index:-1,collapsed:false,maximized:false};this._customizable_properties=$.extend({},this._DEFAULT_CUSTOMIZABLE_PROPERTIES,a)};rdx.gadget.prototype.get_header=function(){return rdx.i18n.get_string(this._properties.header)};rdx.gadget.prototype.get_content=function(){return this._properties.content};rdx.gadget.prototype.get_keywords=function(){return this._properties.keywords};rdx.gadget.prototype.is_resizable=function(){return this._properties.resizable};rdx.gadget.prototype.can_collapse_expand=function(){return this._properties.collapse_expand};rdx.gadget.prototype.can_maximize_restore=function(){return this._properties.maximize_restore};rdx.gadget.prototype.can_close=function(){return this._properties.close};rdx.gadget.prototype.get_properties=function(){return this._properties};rdx.gadget.prototype.get_customizable_properties=function(){return this._customizable_properties};rdx.gadget.prototype.add=function(a){if(rdx.utils.is_not_defined(a)){return this._customizable_properties.add}this._customizable_properties.add=a};rdx.gadget.prototype.column_index=function(a){if(rdx.utils.is_not_defined(a)){return this._customizable_properties.column_index}this._customizable_properties.column_index=a};rdx.gadget.prototype.row_index=function(a){if(rdx.utils.is_not_defined(a)){return this._customizable_properties.row_index}this._customizable_properties.row_index=a};rdx.gadget.prototype.collapsed=function(a){if(rdx.utils.is_not_defined(a)){return this._customizable_properties.collapsed}this._customizable_properties.collapsed=a};rdx.gadget.prototype.maximized=function(a){if(rdx.utils.is_not_defined(a)){return this._customizable_properties.maximized}this._customizable_properties.maximized=a};rdx.gadget.prototype.set_view=function(a){this._properties.gadget_view=a};rdx.gadget.prototype.get_view=function(){return this._properties.gadget_view};rdx.dashboard_finder=function(e,d,b,a){this._parent=e;this._dashboard=d;this._container=b;this._gadgets=a;this._search_gadgets=null;this._search_gadgets_img=null;this._search_gadgets_content=null;this._search_gadgets_txt=null;this._search_gadgets_result=null};rdx.dashboard_finder.prototype.render=function(){this._search_gadgets=$(document.createElement("div")).addClass("search_gadgets");this._search_gadgets_img=$(document.createElement("img")).attr("src",rdx.images.LEFT_DOUBLE_ARROW_IMG);this._search_gadgets.append($(document.createElement("a")).attr("href","#").bind(rdx.events.CLICK,{ns_dashboard_finder:this},function(a){a.data.ns_dashboard_finder._slide_search_gadgets_result()}).append(this._search_gadgets_img));this._search_gadgets_txt=$(document.createElement("input")).attr("type","text");this._search_gadgets_result=$(document.createElement("div")).addClass("search_gadgets_result");this._search_gadgets_content=$(document.createElement("div")).addClass("search_gadgets_content").append(rdx.i18n.get_string("rdx.dashboard_finder_text")+"<br><br>").append($(document.createElement("form")).addClass("inline_display").bind(rdx.events.SUBMIT,{ns_dashboard_finder:this},function(a){a.data.ns_dashboard_finder._search_matching_gadgets();return false}).append(this._search_gadgets_txt).append($(document.createElement("input")).attr("type","submit").attr("value",rdx.i18n.get_string("rdx.dashboard_finder_button")))).append(this._search_gadgets_result);this._search_gadgets.append(this._search_gadgets_content);this._parent.append(this._search_gadgets);return this};rdx.dashboard_finder.prototype._add_add_to_dashboard_link=function(d){var a=$(document.createElement("a")).attr("href","#").html(rdx.i18n.get_string("rdx.dashboard_finder_add")).bind(rdx.events.CLICK,{ns_dashboard_finder:this,ns_gadget:d},function(e){e.data.ns_dashboard_finder._add_gadget_to_dashboard(e.data.ns_gadget,$(this))});var b=$(a).clone(true).html($(document.createElement("img")).attr("src",rdx.images.DOCUMENT_ADD_IMG));this._search_gadgets_result.append($(document.createElement("div")).append(b).append(a).append("<br><br>"))};rdx.dashboard_finder.prototype._get_matched_gadgets=function(f){var g=[];for(var h in this._gadgets){var e=this._gadgets[h];if(e.add()){continue}var d=e.get_keywords();for(var a=0,b=d.length;a<b;a++){if(d[a].match(f)){g.push(e);break}}}return g};rdx.dashboard_finder.prototype._close_all_gadgets=function(){var a=this._dashboard;this._search_gadgets_result.children(".gadget").each(function(b){a._close_gadget($(this))})};rdx.dashboard_finder.prototype._slide_search_gadgets_result=function(){this._search_gadgets_txt.val("");this._search_gadgets_content.toggle("slow");if(this._search_gadgets_img.attr("src").match(rdx.images.LEFT_DOUBLE_ARROW_IMG)){this._container.animate({opacity:0.3});this._search_gadgets_img.attr("src",this._search_gadgets_img.attr("src").replace(rdx.images.LEFT_DOUBLE_ARROW_IMG,rdx.images.RIGHT_DOUBLE_ARROW_IMG));this._search_gadgets_txt.focus()}else{this._container.animate({opacity:1});this._search_gadgets_img.attr("src",this._search_gadgets_img.attr("src").replace(rdx.images.RIGHT_DOUBLE_ARROW_IMG,rdx.images.LEFT_DOUBLE_ARROW_IMG));this._close_all_gadgets();this._search_gadgets_result.html("")}};rdx.dashboard_finder.prototype._search_matching_gadgets=function(){var f=$.trim(this._search_gadgets_txt.val().toLowerCase());var o=null;try{if(!f.match(/^[\w^$*]*$/)){throw rdx.i18n.get_string("rdx.reg_exp_invalid")}f=f.replace(/\*/g,".*");o=new RegExp(f,"i")}catch(b){rdx.message_box.error(rdx.i18n.get_string("rdx.dashboard_finder_invalid_text"));return}var a=this._get_matched_gadgets(o);this._close_all_gadgets();this._search_gadgets_result.html("<b>"+rdx.i18n.get_string("rdx.dashboard_finder_match_count",{count:a.length})+"</b><br><br>");var n={collapse_expand:false,maximize_restore:false,close:false};for(var e=0,m=a.length;e<m;e++){var d=a[e].get_properties();var g={collapse_expand:a[e].can_collapse_expand(),maximize_restore:a[e].can_maximize_restore(),close:a[e].can_close()};$.extend(a[e].get_properties(),n);var h=this._dashboard._add_gadget(a[e],this._search_gadgets_result);this._add_add_to_dashboard_link(a[e]);h.resize_view();$.extend(a[e].get_properties(),g)}};rdx.dashboard_finder.prototype._add_gadget_to_dashboard=function(e,d){if(e.add()){rdx.message_box.error(rdx.i18n.get_string("rdx.dashboard_finder_add_error"));return}var a=this._dashboard._add_gadget(e);a.resize_view();var b=this._dashboard;this._search_gadgets_result.children(".gadget").each(function(g){var f=$(this);if(f.data("ns_gadget")==e){b._close_gadget(f)}});if(rdx.status_bar){rdx.status_bar.update_status("rdx.gadget_added")}d.parent().remove()};rdx.dashboard_finder.prototype.show_search=function(){this._search_gadgets.show()};rdx.dashboard_finder.prototype.hide_search=function(){this._search_gadgets.hide()};rdx.dashboard=function(e,b,d,a,f){this._parent=typeof(e)=="string"?$("#"+e):e;this._gadgets=b;this._DEFAULT_PROPERTIES={use_cookie:false,name:"ns_dashboard",resource_name:"uiinternal",resizable:false,searchable:false,columns_count:2,columns_width:["50%","50%"],response_callback:null};this._DEFAULT_SORTABLE_PROPERTIES={connectWith:".dashboard_column",cursor:"move",handle:".gadget_header",opacity:0.6,revert:200,placeholder:"sortable_placeholder",tolerance:"pointer"};this._DEFAULT_RESIZABLE_PROPERTIES={ghost:false,animate:true,autoHide:true,minWidth:300,minHeight:150,helper:"resizable_helper"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,d);this._sortable_properties=$.extend({},this._DEFAULT_SORTABLE_PROPERTIES,a);this._resizable_properties=$.extend({},this._DEFAULT_RESIZABLE_PROPERTIES,f);this._columns=new Array(this._properties.columns_count);this._gadget_div_to_maximize=null;this._modified=false;this._dashboard_finder=null;this._show_save_customization_prompt=true;this._save_customization_prompt=rdx.i18n.get_string("rdx.dashboard_modified_confirm")};rdx.dashboard.prototype.render=function(){var a=$(document.createElement("div")).addClass("dashboard_container").css("overflow","auto");a.width("99%");for(var d=0,b=this._columns.length;d<b;d++){this._columns[d]=$(document.createElement("div")).addClass("dashboard_column");if(this._properties.columns_width[d]){this._columns[d].width(this._properties.columns_width[d])}a.append(this._columns[d])}if(this._properties.searchable){this._dashboard_finder=new rdx.dashboard_finder(this._parent,this,a,this._gadgets).render()}this._parent.append(a);this._load_customization();$(".dashboard_column").sortable(this._sortable_properties);$(".dashboard_column").bind(rdx.events.SORT_STOP,{ns_dashboard:this},function(e,f){e.data.ns_dashboard.sort_gadget(f.item)});rdx.page.add_event_handler(rdx.events.PAGE_UNLOAD,new rdx.callback(this,this._unload_dashboard));return this};rdx.dashboard.prototype._add_gadgets=function(){var b=[];for(var m in this._gadgets){if(!this._gadgets[m].add()){continue}var h=this._gadgets[m].column_index();if(h<0||h>=this._columns.length){h=0}if(!rdx.utils.is_defined(b[h])){b[h]=[]}var g=this._gadgets[m].row_index();if(g<0){for(var f=0,e=b[h].length;f<=e;f++){if(!rdx.utils.is_defined(b[h][f])){g=f;break}}}b[h].splice(g,0,this._gadgets[m])}for(var f=0,e=b.length;f<e;f++){if(rdx.utils.is_defined(b[f])){for(var a=0,d=b[f].length;a<d;a++){if(b[f][a]){this._add_gadget(b[f][a],null,null)}}}}if(this._gadget_div_to_maximize!=null){this._gadget_div_to_maximize.children(".gadget_maximize").click()}this._modified=false};rdx.dashboard.prototype._get_one_column_padding_height=function(){return 40};rdx.dashboard.prototype._get_two_column_padding_height=function(){return 28};rdx.dashboard.prototype._get_three_column_padding_height=function(){return 24};rdx.dashboard.prototype._add_gadget=function(e,p,t){var n=$(document.createElement("div")).addClass("gadget smooth_all_corner");var b=e.column_index();if(b<0||b>=this._columns.length){b=this._get_column_index_to_add_gadget()}this._columns[b].append(n);var u=$(document.createElement("div")).addClass("gadget_collapse_expand");var a=$(document.createElement("div")).addClass("gadget_collapse_expand");var d=e.get_content();d=$.extend({},d);if(rdx.utils.is_defined(d.view_properties)){d.view_properties=$.extend({},d.view_properties);d.view_properties.title=" "}var m=e.get_header()+(d.type==rdx.view_constants.DETAIL_VIEW?' (<span class="count"></span>)':"");var h=$(document.createElement("div")).addClass("gadget_header").addTouch().append(m);n.append(h);var s=$(document.createElement("div")).addClass("gadget_content");var g=null;if(rdx.utils.is_defined(t)){g=t-h.height();s.height(g)}s.append($("<img name='"+rdx.dashboard_constants.REFRESH_IMAGE+"'>").attr("src",rdx.images.SPACER_IMG).addClass(rdx.dashboard_constants.REFRESH_IMAGE));var q={ns_gadget_div:n,ns_dashboard:this,gadget:e,maximize_div:a,collapse_div:u,div_height:g,content_div:s};if(e.can_collapse_expand()){n.prepend(u.addClass("gadget_collapse").bind(rdx.events.CLICK,q,function(B){var v=B.data.ns_gadget_div;var A=B.data.ns_dashboard;var z=B.data.gadget.get_view();$(this).toggleClass("gadget_collapse").toggleClass("gadget_expand");var w=$(this).hasClass("gadget_expand");A._collapse_expand_gadget(v,w,z)}))}if(e.can_maximize_restore()){n.prepend(a.addClass("gadget_maximize").bind(rdx.events.CLICK,q,function(C){var v=C.data.ns_gadget_div;var B=C.data.ns_dashboard;var A=C.data.collapse_div;var z=C.data.gadget.get_view();$(this).toggleClass("gadget_maximize").toggleClass("gadget_restore");var w=$(this).hasClass("gadget_restore");if(rdx.utils.is_defined(C.data.div_height)){if(w){C.data.content_div.height(rdx.page.get_content().height()-35)}else{C.data.content_div.height(C.data.div_height)}}B._maximize_restore_gadget(v,w,A,z)}));if(e.maximized()&&this._gadget_div_to_maximize==null){this._gadget_div_to_maximize=n;this._show_save_customization_prompt=false}}var f=$(document.createElement("div")).addClass("gadget_collapse_expand").addClass("gadget_close").bind(rdx.events.CLICK,q,function(z){var v=z.data.ns_gadget_div;var A=v.data("ns_gadget");var w=z.data.ns_dashboard;rdx.message_box.confirm(rdx.i18n.get_string("rdx.gadget_close_confirm",{gadget:A.get_header()}),new rdx.callback(this,function(){w._close_gadget(v)}))});if(!this._properties.searchable||!e.can_close()){f.hide()}n.prepend(f);var o=new rdx.base_view(s,d);e.set_view(o);o.prepare_view();if(e.can_collapse_expand()){n.bind(rdx.events.GADGET_COLLAPSED,{ns_gadget_content_view:o},function(v){v.data.ns_gadget_content_view.pause_view()});n.bind(rdx.events.GADGET_EXPANDED,{ns_gadget_content_view:o},function(v){v.data.ns_gadget_content_view.resume_view();v.data.ns_gadget_content_view.resize_view()})}if(e.can_maximize_restore()){n.bind(rdx.events.GADGET_RESTORED,{ns_gadget_content_view:o},function(v){v.data.ns_gadget_content_view.resize_view()});n.bind(rdx.events.GADGET_MAXIMIZED,{ns_gadget_content_view:o},function(v){v.data.ns_gadget_content_view.resize_view()})}n.bind(rdx.events.GADGET_CLOSED,{ns_gadget_content_view:o},function(v){v.data.ns_gadget_content_view.destroy_view()});if(d.type==rdx.view_constants.DETAIL_VIEW){s.bind(rdx.events.VIEW_COUNT_CHANGED,function(w,v){$(this).parent().children(".gadget_header").children(".count").text(v)})}n.append(s);if(this._properties.resizable&&e.is_resizable()){n.resizable(this._resizable_properties)}n.data("ns_gadget",e);if(p){p.append(n);return o}e.add(true);e.column_index(b);if(e.collapsed()&&e.can_collapse_expand()){n.children(".gadget_collapse").click()}this._modified=true;return o};rdx.dashboard.prototype._get_column_index_to_add_gadget=function(){var f=Number.MAX_VALUE;var a=-1;for(var e=0,d=this._columns.length;e<d;e++){var b=this._columns[e].height();if(b<f){f=b;a=e}}return a};rdx.dashboard.prototype._close_gadget=function(a){if(a.parent().hasClass("dashboard_column")){var b=a.data("ns_gadget");b.add(false);b.column_index(-1);b.collapsed(false);b.maximized(false);this._modified=true;if(rdx.status_bar){rdx.status_bar.update_status("rdx.gadget_removed")}}a.trigger(rdx.events.GADGET_CLOSED);a.children(".gadget_restore").click();a.remove()};rdx.dashboard.prototype._load_customization=function(){if(this._properties.use_cookie){this._load_customization_from_properties(rdx.utils.get_cookie(this._properties.name))}else{rdx.model.get(rdx.utils.get_resource(this._properties.resource_name),this._properties.name,new rdx.callback(this,this._load_customization_result_arrived,[true]),this._parent,new rdx.callback(this,this._load_customization_result_arrived,[false]))}};rdx.dashboard.prototype._load_customization_result_arrived=function(a,b){this._load_customization_from_properties(b?a[this._properties.resource_name][0].property_value:null);$(window).resize()};rdx.dashboard.prototype._load_customization_from_properties=function(a){if(a!=null&&a.length>0){try{var b="";if(rdx.utils.is_defined(this._properties.response_callback)){a=this._properties.response_callback.call_back([a])}b=JSON.parse(a);for(var e in b){if(this._gadgets[e]){$.extend(this._gadgets[e].get_customizable_properties(),b[e])}}}catch(d){}}this._add_gadgets()};rdx.dashboard.prototype._save_customization=function(){var d={};for(var h in this._gadgets){d[h]=this._gadgets[h].get_customizable_properties()}var a=JSON.stringify(d);if(this._properties.use_cookie){rdx.utils.set_cookie(this._properties.name,a)}else{var e=rdx.utils.get_resource(this._properties.resource_name);var g={property_name:this._properties.name,property_value:a};var f=rdx.model.to_json(g,e,false);var b=e.set_url?e.set_url:e.get_url;rdx.utils.ajax(rdx.ajax_handler_constants.PUT,b,f,new rdx.callback(),false)}};rdx.dashboard.prototype._unload_dashboard=function(){if(!this._modified||!window.confirm(rdx.i18n.get_string("rdx.dashboard_modified_confirm"))){return}this._save_customization()};rdx.dashboard.prototype._collapse_expand_gadget=function(a,e,b){var d=a.data("ns_gadget");if(e){a.height(a.find(".gadget_header").height()+10);if(this._properties.resizable&&d.is_resizable()){a.resizable("destroy")}a.trigger(rdx.events.GADGET_COLLAPSED);if(rdx.status_bar){rdx.status_bar.update_status("rdx.gadget_collapsed")}}else{a.height("100%");if(this._properties.resizable&&d.is_resizable()){a.resizable(this._resizable_properties)}a.trigger(rdx.events.GADGET_EXPANDED);if(rdx.status_bar){rdx.status_bar.update_status("rdx.gadget_expanded")}}d.collapsed(e);this._modified=true;a.find(".gadget_content").toggle();if(!e){b.resize_view()}};rdx.dashboard.prototype._maximize_restore_gadget=function(n,h,p,q){var e=n.data("ns_gadget");if(rdx.utils.is_not_defined(e)){return}var f=n.parent(".dashboard_column");var a=f.parent(".dashboard_container");var d=a.children().index(f);var t=f.children().index(n);if(h){f.width("100%");if(rdx.status_bar){rdx.status_bar.update_status("rdx.gadget_maximized")}if(this._properties.searchable){this._dashboard_finder.hide_search()}}else{if(this._properties.columns_width[d]){f.width(this._properties.columns_width[d])}if(rdx.status_bar){rdx.status_bar.update_status("rdx.gadget_restored")}if(this._properties.searchable){this._dashboard_finder.show_search()}}if($(p).hasClass("gadget_expand")){$(p).toggleClass("gadget_collapse").toggleClass("gadget_expand");this._collapse_expand_gadget(n,false,q)}for(var m=0,s=this._columns.length;m<s;m++){var o=this._columns[m].children();for(var g=0,b=o.length;g<b;g++){if(m!=d||g!=t){$(o[g]).toggle();$(o[g]).trigger(h?rdx.events.GADGET_COLLAPSED:rdx.events.GADGET_EXPANDED)}}if(m!=d){if(h){this._columns[m].width("0%")}else{if(this._properties.columns_width[m]){this._columns[m].width(this._properties.columns_width[m])}}}}n.trigger(h?rdx.events.GADGET_MAXIMIZED:rdx.events.GADGET_RESTORED);e.maximized(h);this._modified=true;if((this._show_save_customization_prompt)){rdx.message_box.confirm(this._save_customization_prompt,new rdx.callback(null,function(u){u._save_customization()},[this]),new rdx.callback())}this._show_save_customization_prompt=true};rdx.dashboard.prototype.sort_gadget=function(a){var e=a.parent(".dashboard_column");a.data("ns_gadget").column_index(e.parent(".dashboard_container").children().index(e));for(var d=0,b=this._columns.length;d<b;d++){var e=this._columns[d];e.children().each(function(){$(this).data("ns_gadget").row_index(e.children().index($(this)))})}a.data("ns_gadget").get_view().resize_view();this._modified=true};rdx.wizard_constants=new function(){this.ORIGINAL="original";this.MODIFIED="modified";this.MODIFIED_CHILDREN="modified_children"};rdx.wizard_summary_page=function(b,a){this._parent=b;this._page_container=null;this._DEFAULT_PROPERTIES={title:"",description:"",renderer_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.wizard_summary_page.prototype.show_page=function(){this._page_container.show()};rdx.wizard_summary_page.prototype.hide_page=function(){this._page_container.hide()};rdx.wizard_summary_page.prototype.render=function(){this._page_container=$("<div>");this._page_container.addClass("wizard_form_panel");this._parent.append(this._page_container);return this};rdx.wizard_summary_page.prototype.add_summary_details=function(d,b,a){var e="";if(rdx.utils.is_defined(this._properties.renderer_callback)){e=this._properties.renderer_callback.call_back([d,b,this._page_container,a])}this._page_container.empty();this._page_container.append(e)};rdx.wizard_summary_page.prototype.get_title=function(){return rdx.i18n.get_string(this._properties.title)};rdx.wizard_summary_page.prototype.get_description=function(){return rdx.i18n.get_string(this._properties.description)};rdx.wizard_header_navigation=function(b,a,f,d,e){this._pages_info=b;this._header_panel=a;this._summary_page=d;this._description_panel=f;$(e).bind(rdx.events.WIZARD_PAGE_CHANGED,{callback:new rdx.callback(this,this.set_header_info)},function(g,m,h){g.data.callback.call_back([m,h])})};rdx.wizard_header_navigation.prototype.set_header_info=function(d,b){var e="";var a="";if(rdx.utils.is_defined(this._pages_info[b])){e=this._pages_info[b].get_title();a=this._pages_info[b].get_description()}else{if(rdx.utils.is_defined(this._summary_page)){e=this._summary_page.get_title();a=this._summary_page.get_description()}}this._add_info_to_panel(this._header_panel,e);this._add_info_to_panel(this._description_panel,a)};rdx.wizard_header_navigation.prototype._add_info_to_panel=function(a,b){a.html("");a.append(b)};rdx.wizard_link_node=function(e,b,a,d){this._page_titles=this._get_page_titles(b);this._summary_page=a;this._content_container=e;this._link_node_info=new Object();this._NODE_COLUMN="node_column";this._DELTA_COLUMN="delta_column";this._IMAGE_COLUMN="image_column";$(d).bind(rdx.events.WIZARD_PAGE_CHANGED,{callback:new rdx.callback(this,this.navigate_to_link)},function(f,h,g){f.data.callback.call_back([h,g])})};rdx.wizard_link_node.prototype.navigate_to_link=function(b,a){if(b>=0){this._link_node_info[b][this._NODE_COLUMN].removeClass("wizard_current_node");this._link_node_info[b][this._DELTA_COLUMN].removeClass("wizard_delta_node_selected")}this._link_node_info[a][this._NODE_COLUMN].addClass("wizard_current_node");this._link_node_info[a][this._DELTA_COLUMN].addClass("wizard_delta_node_selected");if(b<a&&b>=0){this._link_node_info[b][this._IMAGE_COLUMN].attr("src",rdx.images.ELEMENT_SELECTED)}this._link_node_info[a][this._IMAGE_COLUMN].attr("src",rdx.images.ELEMENT)};rdx.wizard_link_node.prototype.render=function(){this._content_container.attr("cellSpacing",0).attr("cellPadding",0).addClass("wizard_link_node");var a=0;var f=$("<tr>");var b=$("<td>").addClass("wizard_links_col").addClass("wizard_link_node_wrapper").attr("valign","top");var e=$("<tr>").append(($("<td>")).addClass("link_node_bottom_container"));f.append(b);this._content_container.append(f);this._content_container.append(e);var d=$("<table>").attr("cellSpacing",0).attr("cellPadding",0).append($("<tbody>"));b.append(d);for(;a<this._page_titles.length;a++){this._add_link_node(d,this._page_titles[a],a)}if(rdx.utils.is_defined(this._summary_page)){this._add_link_node(d,this._summary_page.get_title(),a)}this._link_node_info[0][this._NODE_COLUMN].addClass("wizard_current_node");this._link_node_info[0][this._DELTA_COLUMN].addClass("wizard_delta_node_selected");return this};rdx.wizard_link_node.prototype._add_link_node=function(d,h,b){var g=$("<tr>");d.append(g);var f=$("<td>");var a=rdx.images.ELEMENT;var e=$("<img>").attr("src",a);e.addClass("wizard_link_node_image");f.append(e).append(h);f.attr("align","left");f.attr("valign","center");g.append(f);this._link_node_info[b]={node_column:f,delta_column:f,image_column:e}};rdx.wizard_link_node.prototype._get_page_titles=function(d){var a=new Array();for(var b=0;b<d.length;b++){a.push(rdx.i18n.get_string(d[b].title))}return a};rdx.wizard_link_node.prototype.get_link_node=function(){return this};rdx.wizard_page_navigation=function(a,b,d){this._pages_info=a;this._summary_page=b;this._current_page_summary_page=false;$(d).bind(rdx.events.WIZARD_PAGE_CHANGED,{callback:new rdx.callback(this,this.navigate_to_page)},function(g,m,h,n,f,e){g.data.callback.call_back([m,h,n,f,e])})};rdx.wizard_page_navigation.prototype.navigate_to_page=function(e,d,f,b,a){if(e>=0){if(rdx.utils.is_defined(this._pages_info[e])){this._pages_info[e].hide_page()}else{if(rdx.utils.is_defined(this._summary_page)){this._summary_page.hide_page()}}}if(this._current_page_summary_page){this._summary_page.hide_page()}if(rdx.utils.is_defined(this._pages_info[d])){this._pages_info[d].show_page();this._current_page_summary_page=false}else{if(rdx.utils.is_defined(this._summary_page)){b=b||false;this._summary_page.add_summary_details(f,b,a);this._summary_page.show_page();this._current_page_summary_page=true}}};rdx.wizard_page=function(b,a,d){this._parent=b;this._page_container=null;this._DEFAULT_PROPERTIES={title:"",description:"",view:"",callback_before_operation:null,pre_submit_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._submit_operation=d;this._view=rdx.utils.get_view(this._get_view_name());this._fields=this._view.resource_properties;this._resource_name=this._view.resource_name;this._resource=rdx.utils.get_resource(this._resource_name);this._original_resource_data=null;this._modified_resource_data=null;this._form=null};rdx.wizard_page.prototype.show_page=function(){this._page_container.show()};rdx.wizard_page.prototype.hide_page=function(){this._page_container.hide()};rdx.wizard_page.prototype.render=function(){this._page_container=$("<div>");this._page_container.addClass("wizard_form_panel");this._parent.append(this._page_container);var a=$.extend(true,{},this._view);a.view_properties=rdx.utils.is_defined(a.view_properties)?a.view_properties:{};var e={toggle_view:false,from_wizard:true,add_title:false,two_row_layout_for_fields:false,show_slider:rdx.DIALOG,add_create_button:false,add_close_button:false,submit_operation:this._submit_operation,add_border:false,dialog_mode:false};a.view_properties=$.extend({},a.view_properties,e);var d=new rdx.base_view(this._page_container,a);d.show_action_in_slider(rdx.DIALOG);var f=new Object();f.is_data_set=true;var b=d.get_view_context();var g=a.resource_name;b.set_url_params(f,{});d.prepare_view();this._form=d.get_form()};rdx.wizard_page.prototype.get_title=function(){return rdx.i18n.get_string(this._properties.title)};rdx.wizard_page.prototype.get_description=function(){return rdx.i18n.get_string(this._properties.description)};rdx.wizard_page.prototype.get_resource_name=function(){return this._resource_name};rdx.wizard_page.prototype.get_resource=function(){return this._resource};rdx.wizard_page.prototype.get_fields=function(){return this._fields};rdx.wizard_page.prototype.get_form=function(){return this._form};rdx.wizard_page.prototype._get_view_name=function(){return this._properties.view};rdx.wizard_page.prototype.set_original_resource_data=function(a){if(rdx.utils.is_defined(a)){this._original_resource_data=$.extend(true,{},a)}};rdx.wizard_page.prototype.get_original_resource_data=function(){return this._original_resource_data};rdx.wizard_page.prototype.set_modified_resource_data=function(a){this._modified_resource_data=a};rdx.wizard_page.prototype.get_modified_resource_data=function(){return this._modified_resource_data};rdx.wizard_page.prototype.get_callback_before_operation=function(){return this._properties.callback_before_operation};rdx.wizard_page.prototype.get_pre_submit_callback=function(){return this._properties.pre_submit_callback};rdx.wizard_page.prototype.get_view=function(){return this._view};rdx.wizard=function(b,a,d){this._parent=b;this._definition=a;this._resource=d;this._submit_handler_callback=null;this._resource_data_fetch_callback=null;this._wizard_container=$("<div>");this._wizard_container.addClass("wizard");this._pages_info=new Object();this._wizard_link=null;this._panels_holder=new Object();this._current_page_index=0;this._previous_page_index=-1;if(rdx.utils.is_not_defined(a.view_properties.submit_operation)||rdx.utils.is_not_defined(a.view_properties.submit_operation.method)){a.view_properties.submit_operation={method:"add",action:null}}this._submit_operation=a.view_properties.submit_operation;this.TOP_PANEL="top_panel";this.CENTER_PANEL="center_panel";this.CONTENT_PANEL="content_panel";this.LINK_NODE_PANEL="link_node_panel";this.BUTTON_BAR_PANEL="button_bar_panel";this.TITLE_PANEL="title_panel";this.DESCRIPTION_PANEL="description_panel";this.BACK_BUTTON="back_button";this.NEXT_BUTTON="next_button";this.FINISH_BUTTON="finish_button";this._resource_data=null;this._wizard_save_complete=false;this._page_failed_index=-1};rdx.wizard.prototype.render=function(e){this._add_top_panel();this._add_center_panel();this._add_bottom_navigation_bar();this._render_wizard_data();var d=rdx.utils.is_defined(this._definition.view_properties)&&rdx.utils.is_defined(this._definition.view_properties.title)?rdx.i18n.get_string(this._definition.view_properties.title):"Wizard";var b={height:500,width:700,modal:true,resizable:false,dialogClass:"rdx_wizard",title:d};var a=$.extend({},b,e);this._wizard_container.dialog(a);this._resize()};rdx.wizard.prototype._add_top_panel=function(){var a=$("<div>");a.addClass("wizard_top_panel");a.addClass("wizard_top_panel_border");a.addClass("smooth_all_corner");a.addClass("wizard_panel_spacing_bottom");this._add_to_panel_holder(this.TOP_PANEL,a);var b=$("<div>");b.addClass("wizard_current_node");b.addClass("wizard_title_panel");b.addClass("smooth_right_corner");this._add_to_panel_holder(this.TITLE_PANEL,b);var d=$("<div>");d.addClass("wizard_description_panel");this._add_to_panel_holder(this.DESCRIPTION_PANEL,d);a.append(b);a.append(d);this._wizard_container.append(a)};rdx.wizard.prototype._add_center_panel=function(){var a=$("<div>");this._add_to_panel_holder(this.CENTER_PANEL,a);a.addClass("wizard_center_panel");a.addClass("wizard_panel_spacing_bottom");this._add_link_nodes_panel(a);this._add_content_panel(a);this._wizard_container.append(a)};rdx.wizard.prototype._add_link_nodes_panel=function(a){var b=$("<div>");b.addClass("wizard_link_nodes_panel");b.addClass("smooth_all_corner");b.addClass("wizard_border");a.append(b);var d=$("<table>").append($("<tbody>"));b.append(d);this._add_to_panel_holder(this.LINK_NODE_PANEL,d)};rdx.wizard.prototype._add_content_panel=function(a){var b=$("<div>");b.addClass("wizard_content_panel");b.addClass("smooth_all_corner");b.addClass("wizard_border");b.addClass("wizard_content_panel_spacing");a.append(b);this._add_to_panel_holder(this.CONTENT_PANEL,b)};rdx.wizard.prototype._add_bottom_navigation_bar=function(){var m=$("<table>").addClass("wizard").append($("<tbody>"));var d=$("<tr>");m.append(d);if(rdx.utils.is_defined(this._definition.view_properties)&&rdx.utils.is_defined(this._definition.view_properties.help_id)){var f=$("<td>").addClass("wizard_help");rdx.help.add_help(f,this._definition.view_properties.help_id);d.append(f)}var e=$("<td>").addClass("wizard_navigation_bar").attr("colspan",2);d.append(e);var h=this._get_button(rdx.i18n.get_string("rdx.wizard_back_button"),rdx.i18n.get_string("rdx.wizard_back_button_tooltip"));h.prop("disabled",true).addClass("cancel_button");this._add_to_panel_holder(this.BACK_BUTTON,h);var a=this._get_button(rdx.i18n.get_string("rdx.wizard_next_button"),rdx.i18n.get_string("rdx.wizard_next_button_tooltip"));a.addClass("submit_button");this._add_to_panel_holder(this.NEXT_BUTTON,a);var g=this._get_button(rdx.i18n.get_string("rdx.wizard_finish_button"),rdx.i18n.get_string("rdx.wizard_finish_button_tooltip"));g.addClass("submit_button");g.hide();this._add_to_panel_holder(this.FINISH_BUTTON,g);var b=this._get_button(rdx.i18n.get_string("rdx.wizard_close_button"),rdx.i18n.get_string("rdx.wizard_close_button_tooltip"));b.addClass("cancel_button");b.bind(rdx.events.CLICK,{wizard:this},function(n){if(rdx.utils.is_defined(n.data.wizard._definition.close_prompt)){rdx.message_box.confirm(rdx.i18n.get_string(n.data.wizard._definition.close_prompt),new rdx.callback(n.data.wizard,n.data.wizard.close))}else{n.data.wizard.close()}});h.bind(rdx.events.CLICK,{wizard:this,button:a,finish_button:g},function(n){if($(this).prop("disabled")){return}n.data.wizard.handle_back_button_click()});a.bind(rdx.events.CLICK,{wizard:this,back_button:h,finish_button:g},function(n){if($(this).prop("disabled")){return}if(!n.data.wizard.get_pages_info()[n.data.wizard._current_page_index].get_form().validate()){return}n.data.wizard.handle_next_button_click()});g.bind(rdx.events.CLICK,{wizard:this},function(n){n.data.wizard._get_panel(n.data.wizard.FINISH_BUTTON).prop("disabled",true);if(rdx.utils.is_defined(n.data.wizard._get_submit_handler_callback())){if(rdx.utils.is_defined(n.data.wizard._definition.view_properties)&&rdx.utils.is_defined(n.data.wizard._definition.view_properties.model_executor_continue_on_error)){n.data.wizard._get_panel(n.data.wizard.BACK_BUTTON).prop("disabled",true)}n.data.wizard._get_submit_handler_callback().call_back()}});e.append(h);e.append(a);e.append(g);e.append(b);this._wizard_container.append(m);this._add_to_panel_holder(this.BUTTON_BAR_PANEL,e)};rdx.wizard.prototype.handle_next_button_click=function(){var f=this._get_panel(this.BACK_BUTTON);var b=this._get_panel(this.NEXT_BUTTON);var d=this._get_panel(this.FINISH_BUTTON);f.prop("disabled",false);this._previous_page_index=this._current_page_index;var a=this._definition.pages.length;var e=null;if(rdx.utils.is_defined(this._definition.summary_page)){a=a+1;if(rdx.utils.is_defined(this._resource_data_fetch_callback)){e=this._resource_data_fetch_callback.call_back();this._resource_data=e}}if(this._current_page_index!=a-1){this._current_page_index=this._current_page_index+1}if(this._current_page_index==a-1){this._hide_button(b);this._show_button(d)}$(this).trigger(rdx.events.WIZARD_PAGE_CHANGED,[this._previous_page_index,this._current_page_index,e]);this._resize()};rdx.wizard.prototype.handle_back_button_click=function(){var d=this._get_panel(this.BACK_BUTTON);var a=this._get_panel(this.NEXT_BUTTON);var b=this._get_panel(this.FINISH_BUTTON);this._hide_button(b);this._show_button(a);$(this).trigger(rdx.events.WIZARD_PAGE_CHANGED,[this._current_page_index,this._previous_page_index]);this._current_page_index=this._previous_page_index;if(this._previous_page_index!=0){this._previous_page_index=this._previous_page_index-1}else{d.prop("disabled",true)}this._resize()};rdx.wizard.prototype.goto_page=function(b){this._wizard_save_complete=false;var e=this._get_panel(this.BACK_BUTTON);var a=this._get_panel(this.NEXT_BUTTON);var d=this._get_panel(this.FINISH_BUTTON);d.removeAttr("disabled");this._hide_button(d);this._show_button(a);$(this).trigger(rdx.events.WIZARD_PAGE_CHANGED,[this._current_page_index,b]);this._current_page_index=b;this._page_failed_index=b;this._previous_page_index=b-1;if(this._current_page_index==0){e.prop("disabled",true)}if(this._current_page_index==this._definition.pages.length-1&&this._definition.pages.length>1){this._hide_button(a);this._show_button(d)}this._resize()};rdx.wizard.prototype._hide_button=function(a){a.hide();a.removeClass("wizard_show_button")};rdx.wizard.prototype._show_button=function(a){a.show();a.addClass("wizard_show_button")};rdx.wizard.prototype._get_button=function(a,d){var b=$(document.createElement("input"));b.attr("type","button");b.attr("value",a);b.attr("title",d);return b};rdx.wizard.prototype._render_wizard_data=function(){for(var b=0;b<this._definition.pages.length;b++){var d=new rdx.wizard_page(this._get_panel(this.CONTENT_PANEL),this._definition.pages[b],this._submit_operation);d.render();if(b>0){d.hide_page()}this._pages_info[b]=d}var a=null;if(this._definition.summary_page){a=new rdx.wizard_summary_page(this._get_panel(this.CONTENT_PANEL),this._definition.summary_page).render();a.hide_page()}new rdx.wizard_page_navigation(this._pages_info,a,this).navigate_to_page(-1,0);new rdx.wizard_header_navigation(this._pages_info,this._get_panel(this.TITLE_PANEL),this._get_panel(this.DESCRIPTION_PANEL),a,this).set_header_info(-1,0);new rdx.wizard_link_node(this._get_panel(this.LINK_NODE_PANEL),this._definition.pages,a,this).render()};rdx.wizard.prototype._resize=function(){var a=this._wizard_container.height()-this._get_panel(this.TOP_PANEL).height()-this._get_panel(this.BUTTON_BAR_PANEL).height()-16;this._get_panel(this.CENTER_PANEL).height(a)};rdx.wizard.prototype._add_to_panel_holder=function(b,a){this._panels_holder[b]=a};rdx.wizard.prototype._get_panel=function(a){return this._panels_holder[a]};rdx.wizard.prototype._get_submit_handler_callback=function(){return this._submit_handler_callback};rdx.wizard.prototype.get_pages_info=function(){return this._pages_info};rdx.wizard.prototype.add_submit_handler_callback=function(a){this._submit_handler_callback=a};rdx.wizard.prototype.add_resource_data_fetch_callback=function(a){this._resource_data_fetch_callback=a};rdx.wizard.prototype.get_resource_data=function(){return this._resource_data};rdx.wizard.prototype.set_save_complete=function(a){this._wizard_save_complete=true;this._page_failed_index=-1;this._get_panel(this.BACK_BUTTON).hide();var d=this._get_panel(this.FINISH_BUTTON);this._hide_button(d);this._get_panel(this.NEXT_BUTTON).hide();var b=this._definition.view_properties;if(rdx.utils.is_defined(b)&&rdx.utils.is_not_defined(b.post_submit_callback)){this._destroy_view()}else{if(rdx.utils.is_defined(this._definition.summary_page)){$(this).trigger(rdx.events.WIZARD_PAGE_CHANGED,[this._previous_page_index,this._current_page_index,this.get_resource_data(),true,a])}}};rdx.wizard.prototype.close=function(){var b=this._definition.view_properties;var a=this.get_resource_data();if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.prompt_on_close)){if(rdx.utils.is_defined(b.prompt_on_close.callback)){if(b.prompt_on_close.callback.call_back([a,this._wizard_save_complete,this._page_failed_index])==true){rdx.message_box.confirm(rdx.i18n.get_string(b.prompt_on_close.message),new rdx.callback(this,this._do_close,[b,a]),new rdx.callback(this,this._destroy_view))}else{this._do_close(b,a)}}else{rdx.message_box.confirm(rdx.i18n.get_string(b.prompt_on_close.message),new rdx.callback(this,this._do_close,[b,a]),new rdx.callback(this,this._destroy_view))}}else{this._do_close(b,a)}};rdx.wizard.prototype._do_close=function(b,a){if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.post_submit_callback)){if(rdx.utils.is_defined(a)){b.post_submit_callback.call_back([a,this._wizard_save_complete,this._page_failed_index])}this._destroy_view()}else{this._destroy_view()}};rdx.wizard.prototype._destroy_view=function(){this._wizard_container.dialog("close");this._wizard_container.remove()};rdx.op_wizard_page_navigation=function(a){this._op_wizard_view=a};rdx.op_wizard_page_navigation.prototype.register_wizard_events=function(a,b){a.bind(rdx.events.OP_WIZARD_PAGE_CHANGED,{callback:new rdx.callback(this,this.navigate_to_page,[b])},function(f,h,d,e,m,g){f.data.callback.call_back([h,d,e,m,g]);f.preventDefault();f.stopPropagation()});a.bind(rdx.events.OP_WIZARD_PAGE_CANCELLED,{wizard:this._op_wizard_view},function(d){d.data.wizard.cancel_view_operation();d.preventDefault();d.stopPropagation()});a.bind(rdx.events.OP_WIZARD_MESSAGE_CONTAINER,{wizard:this._op_wizard_view},function(e,d){e.data.wizard.create_message_container(d);e.preventDefault();e.stopPropagation()});a.bind(rdx.events.OP_WIZARD_PAGE_COLLAPSE,{wizard:this,index:b},function(e){var f=e.data.wizard._op_wizard_view.get_pages_info();for(var d=0;d<f.length;d++){if(e.data.index!=d&&f[d].is_page_optional()){e.data.wizard._trigger_page_event(f[d])}}})};rdx.op_wizard_page_navigation.prototype._trigger_page_event=function(a){$(a.get_base_view().get_view()).trigger(rdx.events.PAGE_COLLAPSE)};rdx.op_wizard_page_navigation.prototype.unregister_wizard_events=function(a){a.unbind(rdx.events.OP_WIZARD_PAGE_CHANGED)};rdx.op_wizard_page_navigation.prototype.navigate_to_page=function(m,e,f,o,n,h,b){var d=this._op_wizard_view.get_page_navigate_callback(h);if(rdx.utils.is_defined(d)&&rdx.utils.is_not_defined(b)){var g=this;var a=new rdx.view_callback_on_response_arrived_params({return_call_back:new rdx.callback(function(t,q,v,B,z,E,C,A){var w=false;var s=null;var p=null;var u=null;var D=null;if(rdx.utils.is_defined(a.get_additional_params())){if(rdx.utils.is_defined(a.get_additional_params()["skip_next"])&&a.get_additional_params()["skip_next"]==true){w=true}if(rdx.utils.is_defined(a.get_additional_params()["dynamic_view_name"])){s=a.get_additional_params()["dynamic_view_name"]}if(rdx.utils.is_defined(a.get_additional_params()["dynamic_summary_view_name"])){p=a.get_additional_params()["dynamic_summary_view_name"]}if(rdx.utils.is_defined(a.get_additional_params()["dynamic_view_context"])){u=a.get_additional_params()["dynamic_view_context"]}if(rdx.utils.is_defined(a.get_additional_params()["dynamic_resource_data"])){v=a.get_additional_params()["dynamic_resource_data"]}if(rdx.utils.is_defined(a.get_additional_params()["dynamic_pages"])){D=a.get_additional_params()["dynamic_pages"]}}g._navigate_to_page(t,v,B,z,E,C,A,w,s,p,u,D)},[e,m,f,o,n,h]),unformatted_response:m,response:e});d.call_back([a])}else{this._navigate_to_page({},e,m,f,o,n,h,false)}};rdx.op_wizard_page_navigation.prototype._navigate_to_page=function(f,h,q,o,w,t,p,n,d,a,g,u){if(rdx.utils.is_defined(w)&&w==false&&rdx.utils.is_not_defined(u)){this._op_wizard_view.finish_view_operation();return}if(rdx.utils.is_defined(u)&&u.length>0){this._op_wizard_view.update_pages_info(u,p)}var v=this._op_wizard_view.get_pages_div_info();if(p<0||p>=v.length||this._op_wizard_view.get_pages_info()[p].is_skip_page()==true){return}if(rdx.utils.is_not_empty(d)&&rdx.utils.is_defined(this._op_wizard_view.get_pages_info()[p+1])){this._op_wizard_view.get_pages_info()[p+1].set_view_dfn(rdx.utils.get_view(d))}if(rdx.utils.is_not_empty(a)&&rdx.utils.is_defined(this._op_wizard_view.get_pages_info()[p+1])){this._op_wizard_view.get_pages_info()[p+1].set_summary_view_dfn(rdx.utils.get_view(a))}if(rdx.utils.is_defined(n)&&t==false){var e=p+1;var s=this._op_wizard_view.get_pages_info();if(rdx.utils.is_defined(s[e])){s[e].do_skip_page(n)}}if(!o){if(this._op_wizard_view.get_pages_info()[p].is_page_optional()){this._op_wizard_view.create_wizard_summary_page_view(p,h,q,n);if(p<(v.length-1)){this._op_wizard_view.get_pages_info()[p+1].get_base_view().prepare_view();$(this._op_wizard_view.get_pages_info()[p+1].get_base_view().get_view()).trigger(rdx.events.PAGE_EXPAND)}return}else{this._op_wizard_view.create_wizard_summary_page_view(p,h,q,n)}p++}if(p<v.length&&(!this._op_wizard_view.get_pages_info()[p].is_page_optional()||t)){if(t===false&&this._op_wizard_view._view_properties.render_subsequest_view===false){return}var b=t||this._op_wizard_view.get_pages_info()[p].is_edit_clicked();if(b==false){this._op_wizard_view.get_pages_info()[p].do_skip_page(n)}if(this._op_wizard_view.get_pages_info()[p].is_skip_page()==true){p++}this._op_wizard_view.create_wizard_page_view(p,h,t,g);if(rdx.utils.is_defined(this._op_wizard_view.get_pages_info()[p])&&this._op_wizard_view.get_pages_info()[p].is_skip_page()==false){this._op_wizard_view.destroy_all_subsequent_views(p)}}else{for(var m=p;m<=v.length;m++){if(rdx.utils.is_defined(this._op_wizard_view.get_pages_info()[m])&&this._op_wizard_view.get_pages_info()[m].is_skip_page()==false){this._op_wizard_view.create_wizard_page_view(m,h,t,n,g)}else{if(m==v.length&&rdx.utils.is_not_defined(this._op_wizard_view.get_pages_info()[m])){this._op_wizard_view.render_last_page(m,t,h)}}}if(p!=v.length){$(this._op_wizard_view.get_pages_info()[p].get_base_view().get_view()).trigger(rdx.events.PAGE_EXPAND)}}};rdx.op_wizard_pages_info=function(a){this._DEFAULT_PROPERTIES={wizard_view:null,view_dfn:null,summary_view_dfn:null,dom_object:null,base_view:null,resource_for_operation:null,exec_service_result:null,page_navigate_callback:null,optional:false,wizard_page:null,is_edit_clicked:false,skip_page:false,flow_section_obj:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.op_wizard_pages_info.prototype.get_op_wizard_view=function(){return this._properties.wizard_view};rdx.op_wizard_pages_info.prototype.get_wizard_page=function(){return this._properties.wizard_page};rdx.op_wizard_pages_info.prototype.set_wizard_page=function(a){return this._properties.wizard_page=a};rdx.op_wizard_pages_info.prototype.get_dom_object=function(){return this._properties.dom_object};rdx.op_wizard_pages_info.prototype.set_dom_object=function(a){this._properties.dom_object=a};rdx.op_wizard_pages_info.prototype.get_view_dfn=function(){return this._properties.view_dfn};rdx.op_wizard_pages_info.prototype.set_view_dfn=function(a){this._properties.view_dfn=a};rdx.op_wizard_pages_info.prototype.get_summary_view_dfn=function(){return this._properties.summary_view_dfn};rdx.op_wizard_pages_info.prototype.set_summary_view_dfn=function(a){this._properties.summary_view_dfn=a};rdx.op_wizard_pages_info.prototype.get_base_view=function(){return this._properties.base_view};rdx.op_wizard_pages_info.prototype.set_base_view=function(a){this._properties.base_view=a};rdx.op_wizard_pages_info.prototype.get_resource_for_operation=function(){return this._properties.resource_for_operation};rdx.op_wizard_pages_info.prototype.set_resource_for_operation=function(a){this._properties.resource_for_operation=a};rdx.op_wizard_pages_info.prototype.get_exec_service_result=function(){return this._properties.exec_service_result};rdx.op_wizard_pages_info.prototype.set_exec_service_result=function(a){this._properties.exec_service_result=a};rdx.op_wizard_pages_info.prototype.get_page_navigate_callback=function(){return this._properties.page_navigate_callback};rdx.op_wizard_pages_info.prototype.set_page_optional=function(a){this._properties.optional=a};rdx.op_wizard_pages_info.prototype.is_page_optional=function(){return this._properties.optional};rdx.op_wizard_pages_info.prototype.set_is_edit_clicked=function(a){this._properties.is_edit_clicked=a};rdx.op_wizard_pages_info.prototype.is_edit_clicked=function(){return this._properties.is_edit_clicked};rdx.op_wizard_pages_info.prototype.do_skip_page=function(a){this._properties.skip_page=a};rdx.op_wizard_pages_info.prototype.is_skip_page=function(){return this._properties.skip_page};rdx.op_wizard_pages_info.prototype.get_flow_state_container=function(){if(rdx.utils.is_not_defined(this._properties.flow_section_obj)){return null}return this._properties.flow_section_obj.state_container};rdx.op_wizard_pages_info.prototype.get_flow_section_container=function(){if(rdx.utils.is_not_defined(this._properties.flow_section_obj)){return null}return this._properties.flow_section_obj.section_container};rdx.job=function(e,b,d,a){this._id=e;this._interval=b;this._callback=d;this._synchronous=a;this._paused=false};rdx.job.prototype.get_id=function(){return this._id};rdx.job.prototype.get_interval=function(){return this._interval};rdx.job.prototype.get_callback=function(){return this._callback};rdx.job.prototype.is_synchronous=function(){return this._synchronous};rdx.job.prototype._is_paused=function(){return this._paused};rdx.job.prototype._set_paused=function(a){this._paused=a};rdx.scheduler=new function(){this._jobs=new Object();this._paused=false;this._does_job_exist=function(a){if(this._jobs[a]){return true}return false};this._clear_timer=function(a){if(!this._does_job_exist(a)){return}if(this._jobs[a].timer){clearTimeout(this._jobs[a].timer)}};this._execute_job=function(a){a.get_callback().call_back();if(a.is_synchronous()){this.job_completed(a.get_id())}};this.schedule_job=function(e,a){this.remove_job(e.get_id());var f=null;var b=e.get_interval();if(rdx.utils.is_callback(b)){b=b.call_back()}if(!this._paused&&!e._is_paused()&&!a){var d=this;f=setTimeout(function(){d._execute_job(e)},b)}this._jobs[e.get_id()]={job:e,timer:f};if(!this._paused&&!e._is_paused()&&a){this._execute_job(e)}};this.remove_job=function(a){if(!this._does_job_exist(a)){return}this._clear_timer(a);delete this._jobs[a]};this.remove_all_jobs=function(){for(var a in this._jobs){this.remove_job(a)}};this.resume_all_jobs=function(a){if(!this._paused){return}this._paused=false;for(var b in this._jobs){this.schedule_job(this._jobs[b].job,a)}};this.pause_all_jobs=function(){this._paused=true;for(var a in this._jobs){this._clear_timer(a)}};this.resume_job=function(b,a){if(!this._does_job_exist(b)){return}this._jobs[b].job._set_paused(false);this.schedule_job(this._jobs[b].job,a)};this.pause_job=function(a){if(!this._does_job_exist(a)){return}this._jobs[a].job._set_paused(true);this._clear_timer(a)};this.job_completed=function(a){if(!this._does_job_exist(a)){return}this.schedule_job(this._jobs[a].job)}};rdx.cache_constants=new function(){this.IN_PROGRESS="in_progress";this.AVAILABLE="available";this.CACHE_OBJECT_DEFAULT_LIFE_TIME=7000};rdx.cache=new function(){this._cache={};this.create=function(a){this._cache[a]={object:null,state:rdx.cache_constants.IN_PROGRESS}};this.clear=function(a){if(this._cache[a]){delete this._cache[a]}};this.update=function(d,b){if(!this._cache[d]){this.create()}var e=this._cache[d];e.object=b;e.state=rdx.cache_constants.AVAILABLE;var a=this;setTimeout(function(){a.clear(d)},rdx.cache_constants.CACHE_OBJECT_DEFAULT_LIFE_TIME);$(e).trigger(rdx.events.CACHE_OBJECT_AVAILABLE,[b]);try{$(e).unbind(rdx.events.CACHE_OBJECT_AVAILABLE)}catch(f){}};this.get=function(a,d){if(!this._cache[a]){return false}var b=this._cache[a];if(b.state==rdx.cache_constants.AVAILABLE){d.call_back([b.object])}else{if(b.state==rdx.cache_constants.IN_PROGRESS){$(b).bind(rdx.events.CACHE_OBJECT_AVAILABLE,{ns_callback:d},function(f,e){f.data.ns_callback.call_back([e])})}}return true}};rdx.model_constants=new function(){this.RENAME_ACTION="rename";this.SESSION_ID_KEY="sessionid";this.GET="get";this.SET="set";this.ADD="add";this.REMOVE="remove";this.NONE="none";this.GET_COUNT="get_count";this.POST="post";this.NOOP="no_op"};rdx.nitro_to_cli_parser=function(properties){this._DEFAULT_PROPERTIES={parser_component:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,properties);this._parser_component=eval("new "+this._properties.parser_component+"();")};rdx.nitro_to_cli_parser.prototype.parse=function(d){var f=d.method;var a="";try{switch(f){case rdx.model_constants.ADD:a=this._parser_component.get_add_command(d);break;case rdx.model_constants.SET:a=this._parser_component.get_set_command(d);break;case rdx.model_constants.POST:a=this._parser_component.get_post_command(d);break;case rdx.model_constants.REMOVE:a=this._parser_component.get_remove_command(d);break}}catch(b){}return a};rdx.model=new function(){this._base_url=null;this._session_id=null;this.set_base_url=function(a){this._base_url=a};this.unset_base_url=function(){this._base_url=null};this.set_session_id=function(a){this._session_id=a};this.unset_session_id=function(){this._session_id=null};this.get_all=function(e,f,h,g,b){var n=rdx.utils.is_defined(e.get_all_url)?e.get_all_url:e.get_url;var a=rdx.url_utils.get_url(n,f);if(rdx.utils.is_pure_rest_api(e)){a=rdx.url_utils.replace_placeholder_in_url(a)}a=this._add_session_id_to_url(a);a=this.add_base_url_to_url(a);if(e.cacheable){if(rdx.cache.get(a,h)){return}rdx.cache.create(a)}var m=new rdx.ajax_handler(a,new rdx.callback(this,this._get_response_arrived_method,[e,h,e.cacheable]));m.set_error_callback(b);m.set_related_dom_object(g);if(rdx.utils.is_defined(e.header_context)){m.set_resource_context(e.header_context)}var d=rdx.i18n.get_string(e.obj_type);m.set_activity(rdx.i18n.get_string("rdx.ajax_status_requesting",{obj_type:d}));m.dispatch()};this.get=function(f,h,p,m,d,o,g){var b=rdx.url_utils.get_url(f.get_url,h);if(rdx.utils.is_pure_rest_api(f)){b=rdx.url_utils.replace_placeholder_in_url(b)}b=this._add_session_id_to_url(b);b=this.add_base_url_to_url(b);var n=new rdx.ajax_handler(b,p);n.set_error_callback(d);n.set_related_dom_object(m);if(rdx.utils.is_defined(g)||rdx.utils.is_defined(f.header_context)){var a=g||f.header_context;n.set_resource_context(a)}var e=rdx.i18n.get_string(f.obj_type);n.set_activity(rdx.i18n.get_string("rdx.ajax_status_requesting",{obj_type:e}));n.dispatch(o)};this.get_by_url=function(h,e,m,f,d,g){if(rdx.utils.is_pure_rest_api(h)){e=rdx.url_utils.replace_placeholder_in_url(e)}e=this._add_session_id_to_url(e);e=this.add_base_url_to_url(e);var b=new rdx.ajax_handler(e,m);b.set_error_callback(d);b.set_related_dom_object(f);var a=rdx.i18n.get_string(h.obj_type);b.set_activity(rdx.i18n.get_string("rdx.ajax_status_requesting",{obj_type:a}));b.dispatch(g)};this.get_count=function(h,f,m,g,e){var d=rdx.utils.is_defined(h.get_all_url)?h.get_all_url:h.get_url;d=rdx.url_utils.get_url(d,f);d=this._add_session_id_to_url(d);d=this.add_base_url_to_url(d);var b=new rdx.ajax_handler(rdx.url_utils.get_count_url(d),new rdx.callback(this,this._count_response_arrived_method,[h,m,false]));if(rdx.utils.is_defined(h.header_context)){b.set_resource_context(h.header_context)}b.set_error_callback(e);b.set_related_dom_object(g);var a=rdx.i18n.get_string(h.obj_type);b.set_activity(rdx.i18n.get_string("rdx.ajax_status_requesting_count",{obj_type:a}));b.dispatch()};this.add=function(g,m,f,e,a,h){a=$.extend({},a||{});a.operation_object=f;var d=g.add_url?g.add_url:g.get_url;d=this.add_base_url_to_url(d);var b=new rdx.ajax_handler(d,new rdx.callback(this,this._operation_response_arrived_method,[g,m,rdx.model_constants.ADD,a]),rdx.ajax_handler_constants.POST,this.to_json(f,g,true,null,true));if(rdx.utils.is_defined(g.header_context)){b.set_resource_context(g.header_context)}b.set_error_callback(e);b.set_related_dom_object(h);this._set_activity(b,rdx.utils.get_activity(a,g,rdx.model_constants.ADD,f));this._set_status(b,rdx.utils.get_status(a,g,rdx.model_constants.ADD,f));this._set_mask_id(b,a.view_definition);b.dispatch()};this.no_op=function(f,h,d,b,e,a,g){a=$.extend({},a||{});a.operation_object=d;this._operation_response_arrived_method({},f,h,rdx.model_constants.NOOP,a)};this.set=function(e,n,f,d,a,m){a=$.extend({},a||{});a.operation_object=f;var b=e.set_url?e.set_url:e.get_url;rest_handler=rdx.utils.get_rest_handler(null,null,null,null,null);b=rest_handler.get_set_url(e,b,f);if(!(rdx.utils.is_pure_rest_api(e))){b=this.add_base_url_to_url(b)}var g=rdx.ENCODE_PUT_REQUEST&&rdx.ENCODE_PUT_REQUEST===true;var h=new rdx.ajax_handler(b,new rdx.callback(this,this._operation_response_arrived_method,[e,n,rdx.model_constants.SET,a]),rdx.ajax_handler_constants.PUT,this.to_json(f,e,g,null,false));h.set_error_callback(d);h.set_related_dom_object(m);if(rdx.utils.is_defined(e.header_context)){h.set_resource_context(e.header_context)}this._set_activity(h,rdx.utils.get_activity(a,e,rdx.model_constants.SET,f));this._set_status(h,rdx.utils.get_status(a,e,rdx.model_constants.SET,f));this._set_mask_id(h,a.view_definition);h.dispatch()};this.remove=function(e,n,g,d,f,a,m,b){a=$.extend({},a||{});a.operation_object=g;var h=new rdx.ajax_handler(this._get_remove_url(g,e,b),new rdx.callback(this,this._operation_response_arrived_method,[e,n,rdx.model_constants.REMOVE,a]),rdx.ajax_handler_constants.DELETE);h.set_error_callback(d);h.set_related_dom_object(m);if(rdx.utils.is_defined(e.header_context)){h.set_resource_context(e.header_context)}this._set_activity(h,rdx.utils.get_activity(a,e,rdx.model_constants.REMOVE,g));this._set_status(h,rdx.utils.get_status(a,e,rdx.model_constants.REMOVE,g));this._set_mask_id(h,a.view_definition);h.dispatch()};this.post=function(f,q,m,e,h,b,p,n,g){b=$.extend({},b||{});b.operation_object=m;var d=f[h+"_url"]?f[h+"_url"]:f.get_url;d=this.add_base_url_to_url(d);var o=new rdx.ajax_handler(d,new rdx.callback(this,this._operation_response_arrived_method,[f,q,h,b]),rdx.ajax_handler_constants.POST,this.to_json(m,f,true,h,true),n);o.set_error_callback(e);o.set_related_dom_object(p);if(rdx.utils.is_defined(g)||rdx.utils.is_defined(f.header_context)){var a=g||f.header_context;o.set_resource_context(a)}this._set_activity(o,rdx.utils.get_activity(b,f,h,m));this._set_status(o,rdx.utils.get_status(b,f,h,m));this._set_mask_id(o,b.view_definition);o.dispatch()};this._set_activity=function(a,b){a.set_activity(b)};this._set_status=function(a,b){a.set_status(b)};this._set_mask_id=function(a,b){if(rdx.utils.is_not_defined(b)){return}if(rdx.utils.is_not_defined(b[rdx.mask.MASK_KEY])){return}a.set_mask_id(b[rdx.mask.MASK_KEY])};this._get_response_arrived_method=function(b,d,e,a){e.call_back([b]);if(a){rdx.cache.update(d.get_url,b)}};this._count_response_arrived_method=function(b,e,f,a){var d=0;if(b[e.name]){if(rdx.utils.is_not_empty(b[e.name])&&rdx.utils.is_defined(rdx.utils.get_formatted_response(b[e.name])["__count"])){d=rdx.utils.get_formatted_response(b[e.name])["__count"]}}else{if(rdx.utils.is_defined(b[0])&&rdx.utils.is_defined(b[0]["__count"])){d=rdx.utils.get_formatted_response(b[0]["__count"])}}$(e).trigger(rdx.events.MODEL_COUNT_CHANGED,[d]);f.call_back([d])};this._operation_response_arrived_method=function(b,e,f,d,a){if(e.cacheable){rdx.cache.clear(e.get_url)}f.call_back([b]);if(this.is_event_registered_in_model(a.event_resource?rdx.utils.get_resource(a.event_resource):e,rdx.events.MODEL_CHANGED)){if(d==rdx.model_constants.REMOVE||d==rdx.model_constants.RENAME_ACTION||d==rdx.model_constants.NOOP||a.refresh_action==rdx.view_constants.REMOVE_SELECTED){if(rdx.utils.is_not_defined(b[e.name])||rdx.utils.is_not_defined(b[e.name][0])){b[e.name]=[a.operation_object]}this.trigger_model_changed_event(b,d,e,a)}else{rdx.model.trigger_resource_get(a,e,b,d)}}};this.trigger_resource_get=function(b,m,d,f){var h=rdx.utils.is_defined(b)?b.timeout:null;if(rdx.utils.is_not_defined(d[m.name])||rdx.utils.is_not_defined(d[m.name][0])){if(rdx.utils.is_not_defined(b.operation_object)||rdx.utils.is_not_defined(m.primary_keys)||rdx.utils.is_not_defined(b.operation_object[m.primary_keys[0]])||(rdx.utils.is_defined(b.trigger_get)&&b.trigger_get==false)){this.trigger_model_changed_event(b.operation_object,f,m,b)}else{var g=rdx.url_utils.construct_url_params(g,rdx.url_utils.GET_BY_NAME_TYPE,m.primary_keys,b.operation_object);this.get(m,g,new rdx.callback(this,this.trigger_model_changed_event,[f,m,b]),null,new rdx.callback(),h)}return}for(var e in d[m.name]){if(d[m.name].hasOwnProperty(e)){var a=rdx.url_utils.construct_url_params(a,rdx.url_utils.GET_BY_NAME_TYPE,m.primary_keys,d[m.name][e]);this.get(m,a,new rdx.callback(this,this.trigger_model_changed_event,[f,m,b]),null,new rdx.callback(),h)}}};this.trigger_model_changed_event=function(b,e,f,a){if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a.view)&&this.is_event_registered_in_model((a.view instanceof Object)?a.view:rdx.utils.get_view(a.view),rdx.events.MODEL_CHANGED)){$(a.view).trigger(rdx.events.MODEL_CHANGED,[b[f.name]?b[f.name]:[],e,a]);return}if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a.event_resource)){var d=null;if(rdx.utils.is_defined(b[f.name])&&rdx.utils.is_defined(a.pass_response)&&a.pass_response){d=b[f.name]}$(rdx.utils.get_resource(a.event_resource)).trigger(rdx.events.MODEL_CHANGED,[d,e,a])}else{$(f).trigger(rdx.events.MODEL_CHANGED,[b[f.name]?b[f.name]:[],e,a])}};this.add_model_change_listener=function(a,b){$(a).bind(rdx.events.MODEL_CHANGED,{ns_callback:b},this._model_change_callback)};this.add_model_change_custom_listener=function(b,d,a){$(b).bind(rdx.events.MODEL_CHANGED,{ns_callback:d},a)};this._model_change_callback=function(e,b,d,a){e.data.ns_callback.call_back([b,d,a])};this.remove_model_change_listener=function(a){$(a).unbind(rdx.events.MODEL_CHANGED,this._model_change_callback)};this.remove_model_change_custom_listener=function(b,a){$(b).unbind(rdx.events.MODEL_CHANGED,a)};this.is_event_registered_in_model=function(b,a){return rdx.utils.is_defined($._data(b))&&rdx.utils.is_defined($._data(b)["events"])&&rdx.utils.is_defined($._data(b)["events"][a])};this.to_json=function(e,b,g,d,a){var h=new Object();if(d||rdx.utils.is_defined(rdx.ajax_handler_constants.NITRO_PARAMS)){var n=new Object();if(d){n.action=d}for(var m in rdx.ajax_handler_constants.NITRO_PARAMS){n[m]=rdx.ajax_handler_constants.NITRO_PARAMS[m]}h.params=n}this._add_session_id_to_obj(h);h[b.name]=e;var f="";rest_handler=rdx.utils.get_rest_handler(null,null,null,null,null);f=rest_handler.to_json(b,h,f,g,a);return f};this._get_remove_url=function(e,d,b){var a=d.remove_url?d.remove_url:d.get_url;a=a.replace(/\/$/,"");var g="";for(var f=0,m=d.primary_keys.length;f<m;f++){var n="";var o=d.primary_keys[f];if(m==1){n=e[o];if(rdx.utils.is_defined(n)&&(rdx.utils.is_not_defined(d.remove_query_param)||d.remove_query_param==false)){var h=(rdx.USE_DOUBLE_ENCODING==rdx.REMOVE);a+="/"+rdx.url_utils.encode_uri_component(n,h)}else{g+=o+":"+rdx.url_utils.encode_uri_component(n)}}else{n=rdx.url_utils.encode_uri_component(e[o]);g+=o+":"+n+","}}if(rdx.utils.is_defined(b)){if(rdx.utils.is_not_empty(g)&&d.primary_keys.length==1){g+=","}for(var o in b){n=rdx.url_utils.encode_uri_component(b[o]);g+=o+":"+n+","}}if(g!=""){a+="?args="+g.replace(/,$/,"")}a=this._add_session_id_to_url(a);a=this.add_base_url_to_url(a);return a};this.add_base_url_to_url=function(a){if(rdx.utils.is_not_defined(this._base_url)||!a.match(/^\//)){return a}return(this._base_url+a)};this._add_session_id_to_url=function(a){if(rdx.utils.is_not_defined(this._session_id)){return a}return rdx.url_utils.add_query_param(a,rdx.model_constants.SESSION_ID_KEY,this._session_id)};this._add_session_id_to_obj=function(a){if(rdx.utils.is_not_defined(this._session_id)){return}a[rdx.model_constants.SESSION_ID_KEY]=this._session_id}};rdx.model_executor_service=function(e,a,b,d){this._DEFAULT_PROPERTIES={progress_bar:false,progress_bar_type:rdx.PROGRESS_INFO,progress_cell_count:10,group_actions:{},show_error_on_progress:true,convert_nitro_to_cli:true};this._total_requests_registered=0;this._number_of_requests=0;this._queue=new Array();this.continue_on_error=rdx.utils.is_defined(b)?b:false;this._collated_request=new Array();this._collated_response=new Array();this._collated_result=new Array();this._collated_resource=new Array();this._collated_resrc_for_operation=new Array();this._success_callback=e;this._failure_callback=a;this._progress_view=null;this._progress_messages=[];this._properties=$.extend({},this._DEFAULT_PROPERTIES,d);this._properties.mode=this._properties.progress_bar_type;this._group_actions=this._properties.group_actions;this._current_request=null;this._nitro_to_cli_parser=null;this._enable_transaction=rdx.utils.is_defined(this._properties.enable_transaction)?this._properties.enable_transaction:false;if(this._properties.convert_nitro_to_cli===true&&rdx.utils.is_defined(rdx.APP_NITRO_TO_CLI_PARSER)){this._nitro_to_cli_parser=new rdx.nitro_to_cli_parser({parser_component:rdx.APP_NITRO_TO_CLI_PARSER})}this._transaction=new rdx.transaction(this)};rdx.model_executor_service.prototype.add=function(g,f,q,m,e,u,b,t,p,o){this._DEFAULT_REQUEST_PROPERTIES={group_name:null,rollback:{}};var n={};var t=rdx.utils.is_defined(t)?t:false;var a=new rdx.callback(this,this._on_model_call_successfull,[f,n,q,t]);var d=new rdx.callback(this._transaction,this._transaction.invoke_failure_handler,[new rdx.callback(this,this._on_model_call_failure,[f,n,q,t]),this._collated_request,n]);n.properties=$.extend({},this._DEFAULT_REQUEST_PROPERTIES,p);n.resource=f;n.resource_for_operation=q;n.continue_on_error=t;switch(g){case rdx.model_constants.ADD:n.method=rdx.model.add;b=$.extend({refresh_action:rdx.view_constants.ADD_NEW},b);n.params=[f,a,q,d,b,u];n.operation=rdx.model_constants.ADD;break;case rdx.model_constants.SET:n.method=rdx.model.set;b=$.extend({refresh_action:rdx.view_constants.REFRESH_RELEVANT},b);n.params=[f,a,q,d,b,u];n.operation=rdx.model_constants.SET;break;case rdx.model_constants.POST:n.method=rdx.model.post;n.action=m;n.params=[f,a,q,d,m,b,u,n.properties];n.operation=rdx.model_constants.POST;break;case rdx.model_constants.GET:n.method=rdx.model.get;var s=(rdx.utils.is_defined(b))?b.timeout:null;var h=null;if(rdx.utils.is_defined(b)&&(rdx.utils.is_defined(b.header))){h=b.header}n.params=[f,e,a,u,d,s,h];n.operation=rdx.model_constants.GET;break;case rdx.model_constants.GET_COUNT:n.method=rdx.model.get_count;n.params=[f,e,a,u,d];n.operation=rdx.model_constants.GET_COUNT;break;case rdx.model_constants.REMOVE:n.method=rdx.model.remove;n.params=[f,a,q,d,m,b,u,e];n.operation=rdx.model_constants.REMOVE;break;case rdx.model_constants.NOOP:n.method=rdx.model.no_op;b=$.extend({refresh_action:rdx.view_constants.ADD_NEW},b);n.params=[f,a,q,d,m,b,u];n.operation=rdx.model_constants.NOOP;break}n.resource_context=b;if(rdx.utils.is_defined(o)&&o==true){this._queue.unshift(n)}else{this._queue.push(n)}this._number_of_requests=this._number_of_requests+1;this._total_requests_registered=this._number_of_requests};rdx.model_executor_service.prototype.execute=function(){if(this._queue.length==0){this._transaction.invoke_success_handler(new rdx.callback(this,this._invoke_success_callback))}else{if(this._total_requests_registered===this._queue.length){this._transaction.start_transaction(new rdx.callback(this,this._execute))}else{this._transaction.register_command(new rdx.callback(this,this._execute))}}};rdx.model_executor_service.prototype._execute=function(){var a=this._queue.shift();this._current_request=a;if(this._can_execute_request(a)){this._update_progress(rdx.IN_PROGRESS,a);if(rdx.utils.is_defined(a.method)){a.method.apply(rdx.model,a.params)}}else{this._execute_next_request()}};rdx.model_executor_service.prototype._invoke_success_callback=function(){if(rdx.utils.is_not_defined(this._success_callback)){return}var a=new rdx.model_executor_service_result({collated_response:this._collated_response,collated_result:this._collated_result,collated_resource:this._collated_resource,collated_resrc_for_operation:this._collated_resrc_for_operation});if(!this._show_progress_bar()){this._invoke_model_service_executor_success_callback(a,false,this._success_callback)}else{this._progress_view.set_progressive_close_callback(new rdx.callback(this._invoke_model_service_executor_success_callback,[a,true,this._success_callback]))}if(this._number_of_requests==0){this._update_progress(rdx.COMPLETED,null)}};rdx.model_executor_service.prototype._invoke_model_service_executor_success_callback=function(a,b,d){if(rdx.utils.is_defined(b)&&b==true){rdx.mask.unmask("__MODEL_EXEC_SERVICE")}if(rdx.utils.is_defined(d)){d.call_back([a])}};rdx.model_executor_service.prototype._handle_response=function(a,f,e,b,d){this._collated_request.push(d);this._collated_response.push(a);this._collated_result.push(f);this._collated_resource.push(e);this._collated_resrc_for_operation.push(b);this._execute_next_request()};rdx.model_executor_service.prototype._execute_next_request=function(){this._number_of_requests=this._number_of_requests-1;if(this._number_of_requests>0){this.execute()}else{this._transaction.invoke_success_handler(new rdx.callback(this,this._invoke_success_callback))}};rdx.model_executor_service.prototype._on_model_call_successfull=function(b,g,f,e){if(this._properties.convert_nitro_to_cli===true&&rdx.utils.is_defined(rdx.APP_NITRO_TO_CLI_PARSER)){var d=this._nitro_to_cli_parser.parse({method:this._current_request.operation,resource_for_operation:e,resource:g,action:this._current_request.action});var a=new CustomEvent("rdx_debugger_command_event",{detail:{command_str:d}});document.dispatchEvent(a);if(rdx.utils.is_not_empty(d)){console.warn(d)}}this._update_progress(rdx.SUCCESS,f);this._handle_response(b,true,g,e,f);if(this._enable_transaction){this._transaction.save_context_data(f)}};rdx.model_executor_service.prototype._on_model_call_failure=function(a,g,f,b){f.response=a;this._update_progress(rdx.FAILED,f);this._update_group_status(f);if((rdx.utils.is_defined(this.continue_on_error)&&this.continue_on_error==true)||(f.continue_on_error==true)){this._handle_response(a,false,g,b,f)}else{var e=new rdx.model_executor_service_result({error_resource:g,error_message:a,error_param:f.param,collated_response:this._collated_response});rdx.status_bar.update_status(a,rdx.ERROR);if(this._show_progress_bar()){this._progress_view.set_progressive_close_callback(new rdx.callback(this._invoke_model_executor_service_failure_callback,[e,true,this._failure_callback]));this._update_progress(rdx.COMPLETED,null)}else{if(rdx.utils.is_defined(this._failure_callback)){this._invoke_model_executor_service_failure_callback(e,false,this._failure_callback)}if(rdx.utils.is_not_empty(a)){a=rdx.utils.html_encode(a);rdx.page.show_notification(a,rdx.ERROR,null,null,null,true)}try{rdx.mask.unmask_all_components()}catch(d){}}}};rdx.model_executor_service.prototype._update_group_status=function(a){if(rdx.utils.is_defined(a.properties)&&rdx.utils.is_defined(a.properties.group_name)&&rdx.utils.is_defined(this._group_actions)){if(this._group_actions[a.properties.group_name].action==rdx.STOP_AFTER_FIRST_FAILURE){this._group_actions[a.properties.group_name]["status"]=rdx.STOP_AFTER_FIRST_FAILURE}}};rdx.model_executor_service.prototype._invoke_model_executor_service_failure_callback=function(d,b,a){if(rdx.utils.is_defined(b)&&b==true){rdx.mask.unmask("__MODEL_EXEC_SERVICE")}if(rdx.utils.is_defined(a)){a.call_back([d])}};rdx.model_executor_service.prototype.pending_requests_count=function(){return this._number_of_requests};rdx.model_executor_service.prototype.reset_queue=function(){this._queue=new Array();this._number_of_requests=0};rdx.model_executor_service.prototype._can_execute_request=function(a){var b=this._get_group(a);if(b==null){return true}if(rdx.utils.is_defined(b.status)&&b.status==b.action){return false}return true};rdx.model_executor_service.prototype._show_progress_bar=function(){return(this._properties.progress_bar==true)};rdx.model_executor_service.prototype._get_group=function(a){if(rdx.utils.is_not_defined(a.properties.group_name)||rdx.utils.is_not_defined(this._group_actions)){return null}if(rdx.utils.is_defined(this._group_actions[a.properties.group_name])&&rdx.utils.is_defined(this._group_actions[a.properties.group_name].action)){return this._group_actions[a.properties.group_name]}return null};rdx.model_executor_service.prototype._update_progress=function(b,a){if(this._show_progress_bar()){if(this._progress_view==null){this._properties.disable_minimize=true;this._properties.auto_close_on_success=true;this._progress_view=rdx.mask.mask_with_progress($(document.body),"__MODEL_EXEC_SERVICE",this._properties)}if(b==rdx.IN_PROGRESS){var e=rdx.utils.get_activity(a.resource_context,a.params[0],a.operation,a.resource_for_operation);this._progress_messages.push({status:b,message:e})}else{if(b==rdx.COMPLETED){this._progress_messages.push({status:b})}else{if(this._properties.show_error_on_progress==true){var e=rdx.utils.get_status(a.resource_context,a.params[0],a.operation,a.resource_for_operation);this._progress_messages.pop();var d={status:b,message:e};if(b==rdx.FAILED&&rdx.utils.is_defined(a.response)){d.reason=a.response;d.message=a.response}this._progress_messages.push(d)}}}this._progress_view.handle_progressive_info_progress(this._progress_messages)}};rdx.model_executor_service.prototype.is_transaction_enabled=function(){return this._enable_transaction};rdx.model_executor_service_result=function(a){this._DEFAULT_PROPERTIES={error_resource:null,error_message:"",error_param:null,collated_response:null,collated_result:null,collated_resource:null,collated_resrc_for_operation:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.model_executor_service_result.prototype.get_error_param=function(){return this._properties.error_param};rdx.model_executor_service_result.prototype.get_error_message=function(){return this._properties.error_message};rdx.model_executor_service_result.prototype.get_collated_response=function(){return this._properties.collated_response};rdx.model_executor_service_result.prototype.get_collated_result=function(){return this._properties.collated_result};rdx.model_executor_service_result.prototype.get_error_resource=function(){return this._properties.error_resource};rdx.model_executor_service_result.prototype.get_collated_resource=function(){return this._properties.collated_resource};rdx.model_executor_service_result.prototype.get_collated_resource_for_operation=function(){return this._properties.collated_resrc_for_operation};rdx.transaction=function(a){this._transaction_id=null;this._rollback_commands=new Array();this._context_data_temp={};this._context_data=new Array();this._executor_service=a;this._enable_transaction=a._enable_transaction;this._custom_callbacks=rdx.transactions_callbacks};rdx.transaction.prototype.start_transaction=function(a){if(!this._enable_transaction){a.call_back()}else{switch(rdx.transaction_mode){case"GUI":default:this.register_command(a)}}};rdx.transaction.prototype.commit_transaction=function(a){a.call_back()};rdx.transaction.prototype.register_command=function(b){var a=this._executor_service._queue[0];if(this.is_context_required(a)){this.save_rollback_context(a,b)}else{b.call_back()}};rdx.transaction.prototype.rollback_transaction=function(e,a,d){this._rollback_commands=this.get_rollback_commands(d);if(this.is_rollback_required(e)){var b=new rdx.model_executor_service(new rdx.callback(this,this.rollback_success_handler),new rdx.callback(function(){}),true,null);this.create_rollback_commands(b);b.execute()}e.call_back([a])};rdx.transaction.prototype.invoke_success_handler=function(a){this.commit_transaction(a)};rdx.transaction.prototype.invoke_failure_handler=function(a,e,b,d){if(rdx.utils.is_defined(d.properties)){d.properties.rollback_not_required=true}if(this._enable_transaction&&(d.continue_on_error===false)){this.rollback_transaction(e,a,b)}else{e.call_back([a])}};rdx.transaction.prototype.rollback_success_handler=function(){this.reset_transaction()};rdx.transaction.prototype.is_rollback_required=function(b){if(this._rollback_commands.length===0){return false}else{if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.params)&&rdx.utils.is_defined(b.params.length)){var a=b.params[3];return !a}else{return !this._executor_service.continue_on_error}}};rdx.transaction.prototype.get_rollback_commands=function(b){var a=b.length-1;while(a>=0){var d=b[a];a--;if(rdx.utils.is_defined(d.properties)&&d.properties.rollback_not_required===true){continue}this._rollback_commands.push(d)}return this._rollback_commands};rdx.transaction.prototype.create_rollback_commands=function(p){var d=this._rollback_commands.length;for(i=0;i<d;i++){var h=this._rollback_commands[i];var g=this.get_rollback_action(h.action);var b=this.get_rollback_method(h.action,h);var f=this.get_rollback_params(b,h);var e=this.get_rollback_resource(h.resource);var q=true;var o=this.get_rollback_resource_for_operation(b,e,h);if(this.is_context_data_required(b,h)&&(rdx.utils.is_defined(h.properties)&&h.properties.is_context_data_required===true)){var n=this._context_data.pop();o=n;if(this.is_unset_request_required(n)){this.create_unset_request(h,n,p)}}var a=h.resource_context;var m=h.properties;m.is_rollback_command=true;if(rdx.utils.is_defined(g)&&(g==="enable"||g==="disable")){if(rdx.utils.is_defined(this._custom_callbacks)&&rdx.utils.is_defined(this._custom_callbacks.filter_resource_events_callback)){this._custom_callbacks.filter_resource_events_callback.call_back([e])}}if(this.command_rollback_required(b,e,o,g)){p.add(b,e,o,g,f,null,a,q,m)}}};rdx.transaction.prototype.command_rollback_required=function(g,d,a,b){if(g===rdx.model_constants.SET&&rdx.utils.is_not_defined(d.is_binding_resource)){var e=rdx.utils.get_object_length(a[0]);if(rdx.utils.is_defined(d.primary_keys)){var f=d.primary_keys.length;if(e===f){return false}else{return true}}else{true}}else{if(b==="enable"||b==="disable"){return false}else{return true}}};rdx.transaction.prototype.get_rollback_resource=function(a){return rdx.utils.get_resource(a.name)};rdx.transaction.prototype.get_rollback_resource_for_operation=function(e,d,b){var a=b.resource_for_operation;if(rdx.utils.is_defined(this._transaction_callbacks)&&rdx.utils.is_defined(this._transaction_callbacks.do_resc_data_alteration_callback)&&this._transaction_callbacks.do_resc_data_alteration_callback.call_back([e,d,a])&&rdx.utils.is_defined(this._transaction_callbacks.do_resc_data_alteration_callback)){this._transaction_callbacks.do_resc_data_alteration_callback.call_back([d,a])}else{return a}};rdx.transaction.prototype.get_rollback_action=function(a){switch(a){case"enable":return"disable";case"disable":return"enable";case"unset":return;default:return a}};rdx.transaction.prototype.get_rollback_method=function(d,b){if(rdx.utils.is_defined(d)){if(d==="unset"){return rdx.model_constants.SET}else{return rdx.model_constants.POST}}else{var e=b.operation;var a=(rdx.utils.is_defined(b.resource)&&rdx.utils.is_defined(b.resource.binding_resource))?b.resource.binding_resource:false;switch(e){case rdx.model_constants.ADD:case rdx.model_constants.POST:return rdx.model_constants.REMOVE;case rdx.model_constants.SET:if(a){return rdx.model_constants.REMOVE}else{return rdx.model_constants.SET}case rdx.model_constants.REMOVE:if(a){return rdx.model_constants.SET}else{return rdx.model_constants.ADD}}}};rdx.transaction.prototype.get_rollback_params=function(g,b){switch(g){case rdx.model_constants.GET:var f={};var d=new Array();if(rdx.utils.is_defined(b.params[2])&&rdx.utils.is_object(b.params[2])){if(rdx.utils.is_defined(b.resource.primary_keys)&&b.resource.primary_keys.length){for(prop in b.resource.primary_keys){var e={};e.name=b.resource.primary_keys[prop];e.value=b.params[2][b.resource.primary_keys[prop]];d.push(e)}}}f.get_by_name=d;return f;case rdx.model_constants.SET:case rdx.model_constants.REMOVE:if(b.operation===rdx.model_constants.REMOVE){if(rdx.utils.is_array(b.params)&&rdx.utils.is_not_empty(b.params[7])){var a=b.params[7];for(prop in a){b.resource_for_operation[prop]=a[prop]}}}return null;case rdx.model_constants.POST:default:return null}};rdx.transaction.prototype.is_context_required=function(d){if(this._enable_transaction&&this._executor_service._can_execute_request(d)){var f=d.operation;var e=d.action;var a=(rdx.utils.is_defined(d.resource))?d.resource.binding_resource:false;var b=(rdx.utils.is_defined(d.properties)&&rdx.utils.is_defined(d.properties.is_rollback_command))?d.properties.is_rollback_command:false;switch(f){case rdx.model_constants.REMOVE:return(a||b)?false:true;case rdx.model_constants.SET:return(a||b)?false:true;case rdx.model_constants.POST:return(rdx.utils.is_defined(e)&&e==="unset")?true:false;default:return false}}else{return false}};rdx.transaction.prototype.is_context_data_required=function(b,a){switch(b){case rdx.model_constants.ADD:return true;case rdx.model_constants.SET:return(rdx.utils.is_defined(a.resource)&&!rdx.utils.is_defined(a.resource.binding_resource))?true:false;case rdx.model_constants.POST:return((rdx.utils.is_defined(a.resource)&&!rdx.utils.is_defined(a.resource.binding_resource)&&rdx.utils.is_defined(a.action)&&a.action==="unset"))?true:false;default:return false}};rdx.transaction.prototype.handle_context_data=function(b,f,e,d){var a={};if(d){a=b;if(rdx.utils.is_defined(this._custom_callbacks)&&rdx.utils.is_defined(this._custom_callbacks.filter_context_data_callback)){this._context_data_temp=this._custom_callbacks.filter_context_data_callback.call_back([a,e])}else{this._context_data_temp=a}this._save_context_data=true}f.call_back()};rdx.transaction.prototype.save_context_data=function(a){if(rdx.utils.is_defined(this._save_context_data)&&this._save_context_data){this._context_data.push(this._context_data_temp);a.properties.is_context_data_required=true;this._save_context_data=false}};rdx.transaction.prototype.save_rollback_context=function(d,g){var e=d.resource;var b=this.get_rollback_params(rdx.model_constants.GET,d);var f=new rdx.callback(this,this.handle_context_data,[g,d,true]);var a=new rdx.callback(this,this.handle_context_data,[g,d,false]);rdx.model.get(e,b,f,null,a)};rdx.transaction.prototype.is_unset_request_required=function(a){return(rdx.utils.is_array(a)&&rdx.utils.is_object(a[0])&&rdx.utils.is_defined(a[0]["unset_keys"]))};rdx.transaction.prototype.create_unset_request=function(g,n,o){var f="unset";var b=rdx.model_constants.POST;var e=this.get_rollback_params(b,g);var d=g.resource;var p=true;var a=g.resource_context;var m={};var h=g.properties;h.is_rollback_command=true;for(prop in n[0]["unset_keys"]){m[n[0]["unset_keys"][prop]]=true}if(rdx.utils.is_object_empty(m)){delete n[0]["unset_keys"];return}var q=d.primary_keys;for(prop in d.primary_keys){m[q[prop]]=n[0][q[prop]]}delete n[0]["unset_keys"];o.add(b,d,m,f,e,null,a,p,h)};rdx.transaction.prototype.reset_transaction=function(){var a=this._executor_service;a._collated_request=new Array();a._collated_response=new Array();a._collated_result=new Array();a._collated_resource=new Array();a._collated_resrc_for_operation=new Array();a._total_requests_registered=0;a._number_of_requests=0;a._queue=new Array();this._completed_requests=new Array();this._rollback_commands=new Array();this._context_data=new Array()};rdx.crossfilter=function(b,a){this._crossfilter=crossfilter(b);this._DEFAULT_PROPERTIES={group_by:undefined,top:-1,bottom:-1,filter:undefined};this._dimension_map={};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a)};rdx.crossfilter.prototype._create_or_fetch_dimension=function(a,b){if(Object.keys(this._dimension_map).length>=25){console.log("No memory to create any more dimensions");return null}if(rdx.utils.is_not_defined(this._dimension_map[a])||b==true){this._dimension_map[a]=this._crossfilter.dimension(function(e){if(b==true){return e[a]}else{if(rdx.utils.is_defined(e[a])&&rdx.utils.is_not_empty(e[a])){if(rdx.utils.is_ipv4(e[a].toString())){return rdx.utils.convert_ip_to_string(e[a])}if(rdx.utils.is_ip_group(e[a].toString())){return rdx.utils.convert_ip_to_string(e[a])}if(rdx.utils.is_number(e[a].toString())){return Number(e[a])}else{if(rdx.utils.is_string(e[a])){return e[a].toLowerCase()}}}}return e[a]})}return this._dimension_map[a]};rdx.crossfilter.prototype.get_all_data=function(a,b){var d=null;var e=this._create_or_fetch_dimension(a);if(rdx.utils.is_defined(b)&&b=="descending"){d=e.top(Infinity)}else{d=e.bottom(Infinity)}return d};rdx.crossfilter.prototype.size=function(){return this._crossfilter.size()};rdx.crossfilter.prototype.dimension_size=function(a){var b=0;if(rdx.utils.is_defined(this._dimension_map[a])){b=this._dimension_map[a].top(Infinity).length}return b};rdx.crossfilter.prototype.get_data=function(e){var f=null,d=Infinity;if(rdx.utils.is_not_defined(e)){return f}var b=e.dimension;var g=this._create_or_fetch_dimension(b);var a=rdx.utils.is_defined(e.bottom)?true:false;if(rdx.utils.is_defined(e.group_by)){g=g.group()}if(a){f=g.bottom(e.bottom)}else{if(rdx.utils.is_defined(e.top)){f=g.top(e.top)}else{f=g.top(d)}}return f};rdx.crossfilter.prototype.update_data=function(a){this._crossfilter.add([a])};rdx.crossfilter.prototype.get_unique_values=function(e,b){var d=null,a=Infinity;if(rdx.utils.is_not_defined(e)){return d}var e=this._crossfilter.dimension(function(g){var f=g[e]||"";if(rdx.utils.is_defined(b)){var h=f.toLocaleLowerCase();b=b.toLocaleLowerCase();if(h.indexOf(b)==-1){f=""}}return f});d=e.group().top(Infinity);return d};rdx.crossfilter.prototype.filtered_data=function(d,f,g){var e=null,b=Infinity;if(rdx.utils.is_not_defined(d)){return e}var a=this._create_or_fetch_dimension(d.dimension,g);if(rdx.utils.is_array(f)){if(d.filter=="array"){e=a.filter([f[0],f[f.length-1]])}else{e=a.filterFunction(function(h){return $.inArray(h,f)>-1})}}else{if(rdx.utils.is_function(d.filter)){e=a.filter(d.filter)}else{e=a.filter(f)}}return e};rdx.crossfilter.prototype.clear_all_filters=function(){if(rdx.utils.is_not_defined(this._dimension_map)){return}else{for(var a in this._dimension_map){var b=this._create_or_fetch_dimension(a);b.filterAll()}}};rdx.crossfilter.prototype.clear_filter=function(b){if(rdx.utils.is_not_defined(b)){return}var a=this._create_or_fetch_dimension(b);a.filterAll()};rdx.crossfilter.prototype.get_dimension_size=function(b){if(rdx.utils.is_not_defined(b)){return 0}var a=this._create_or_fetch_dimension(b);return a.top(Infinity).length};rdx.crossfilter.prototype.clear_all_dimensions=function(){for(var a in this._dimension_map){this._dimension_map[a].dispose()}};rdx.crossfilter_controller=new function(){this._resource_crossfilter_map={};this.add_resource_to_crossfilter=function(d,a,b){this._resource_crossfilter_map[d]=new rdx.crossfilter(a,b)};this.update_crossfilter_data=function(b,a){if(rdx.utils.is_defined(this._resource_crossfilter_map[b])){this._resource_crossfilter_map[b].update_data(a)}};this.remove_resource_to_crossfilter=function(a){if(rdx.utils.is_defined(this._resource_crossfilter_map[a])){this._resource_crossfilter_map[a].dispose();delete this._resource_crossfilter_map[a]}};this.is_resource_crossfilter_present=function(a){return rdx.utils.is_defined(this._resource_crossfilter_map[a])};this.get_all_data=function(d,b,a){if(rdx.utils.is_defined(this._resource_crossfilter_map[d])){return this._resource_crossfilter_map[d].get_all_data(b,a)}else{return[]}};this.get_unique_values=function(d,a,b){return this._resource_crossfilter_map[d].get_unique_values(a,b)};this.get_data_size=function(a,b){if(rdx.utils.is_defined(this._resource_crossfilter_map[a])){if(rdx.utils.is_defined(b)){return this._resource_crossfilter_map[a].get_dimension_size(b)}else{return this._resource_crossfilter_map[a].size()}}return 0};this.get_data_by_properties=function(d,a){if(rdx.utils.is_not_defined(this._resource_crossfilter_map[d])){return null}var b=this._resource_crossfilter_map[d];return b.get_data(a)};this.apply_filter=function(d,a,f,e){if(rdx.utils.is_not_defined(this._resource_crossfilter_map[d])){return null}var b=this._resource_crossfilter_map[d];return b.filtered_data(a,f,e)};this.clear_all_filters=function(b){var a=this._resource_crossfilter_map[b];return a.clear_all_filters()};this.clear_filter=function(b,d){if(rdx.utils.is_not_defined(this._resource_crossfilter_map[b])){return null}var a=this._resource_crossfilter_map[b];return a.clear_filter(d)};this.remove_crossfilter=function(b){if(rdx.utils.is_not_defined(this._resource_crossfilter_map[b])){return}var a=this._resource_crossfilter_map[b];a.clear_all_dimensions();delete this._resource_crossfilter_map[b]}};rdx.view_constants=new function(){this.HEADER_VIEW="HEADER_VIEW";this.CLOUDNET_HEADER_VIEW="CLOUDNET_HEADER_VIEW";this.INFO_VIEW="INFORMATION_VIEW";this.DETAIL_VIEW="DETAIL_VIEW";this.SUMMARY_DETAIL_VIEW="SUMMARY_DETAIL_VIEW";this.SUMMARY_VIEW="SUMMARY_VIEW";this.NAVIGATION_STEPS_VIEW="NAVIGATION_STEPS_VIEW";this.CONFIGURE_VIEW="CONFIGURE_VIEW";this.OVERVIEW_VIEW="OVERVIEW_VIEW";this.TABBED_VIEW="TABBED_VIEW";this.URL_VIEW="URL_VIEW";this.CHART_VIEW="CHART_VIEW";this.DISTRIBUTION_INFO_VIEW="DISTRIBUTION_INFO_VIEW";this.COMPOSITE_VIEW="COMPOSITE_VIEW";this.ACCORDION_VIEW="ACCORDION_VIEW";this.RESPONSIVE_COMPOSITE_VIEW="RESPONSIVE_COMPOSITE_VIEW";this.RESPONSIVE_TABLE_VIEW="RESPONSIVE_TABLE_VIEW";this.WIZARD_VIEW="WIZARD_VIEW";this.GEO_MAP_VIEW_NEW="GEO_MAP_VIEW_NEW";this.ONE_PAGE_WIZARD_PAGE_VIEW="ONE_PAGE_WIZARD_PAGE_VIEW";this.ONE_PAGE_WIZARD_VIEW="ONE_PAGE_WIZARD_VIEW";this.DASHBOARD_VIEW="DASHBOARD_VIEW";this.GETTING_STARTED_VIEW="GETTING_STARTED_VIEW";this.FEATURE_WELCOME_VIEW="FEATURE_WELCOME_VIEW";this.SYSLOG_VIEW="SYSLOG_VIEW";this.SYSTEMLOG_VIEW="SYSTEMLOG_VIEW";this.SEARCH_FILTER_DETAILS_VIEW="SEARCH_FILTER_DETAILS_VIEW";this.GEO_MAP_VIEW="GEO_MAP_VIEW";this.GEO_VECTOR_MAP_VIEW="GEO_VECTOR_MAP_VIEW";this.TOPOLOGY_DIAGRAM_VIEW="TOPOLOGY_DIAGRAM_VIEW";this.CONFIGURATION_DIFF_VIEW="CONFIGURATION_DIFF_VIEW";this.VISUALIZER_VIEW="VISUALIZER_VIEW";this.AUTHENTICATION_VISUALIZER_VIEW="AUTHENTICATION_VISUALIZER_VIEW";this.VISUALIZER="VISUALIZER";this.NETWORK_VISUALIZER_VIEW="NETWORK_VISUALIZER_VIEW";this.APP_FW_VISUALIZER="APP_FW_VISUALIZER";this.ENTITY_VISUALIZER_VIEW="ENTITY_VISUALIZER_VIEW";this.LINKS_VIEW="LINKS_VIEW";this.DOWNLOADS_VIEW="DOWNLOADS_VIEW";this.CONFIG_ADVICE_VIEW="CONFIG_ADVICE_VIEW";this.OFFLINE_VISUALIZER_VIEW="OFFLINE_VISUALIZER_VIEW";this.TABULAR_PAGE_VIEW="TABULAR_PAGE_VIEW";this.ANALYTICS_DASHBOARD_VIEW="ANALYTICS_DASHBOARD_VIEW";this.SUMMARY_CHART_DETAIL_VIEW="SUMMARY_CHART_DETAIL_VIEW";this.ADVANCE_CHART_VIEW="ADVANCE_CHART_VIEW";this.THREE_PANE_DASHBOARD="THREE_PANE_DASHBOARD";this.CUSTOM_VIEW="CUSTOM_VIEW";this.CAROUSEL_VIEW="CAROUSEL_VIEW";this.GRID_LAYOUT="GRID_LAYOUT";this.MAP_ICON_LAYOUT="MAP_ICON_LAYOUT";this.REFRESH_ALL="REFRESH_ALL";this.REMOVE_SELECTED="REMOVE_SELECTED";this.REFRESH_RELEVANT="REFRESH_RELEVANT";this.ADD_NEW="ADD_NEW";this.REFRESH_NONE="REFRESH_NONE";this.REFRESH_RELEVANT_OR_ADD_NEW="REFRESH_RELEVANT_OR_ADD_NEW";this.CHECK_IF_EXISTS_AND_ADD_NEW="CHECK_IF_EXISTS_AND_ADD_NEW";this.STANDALONE_SEARCH="STANDALONE_SEARCH";this.REFRESH_RELEVANT_OR_ADD_MULTIPLE="REFRESH_RELEVANT_OR_ADD_MULTIPLE";this.ACCORDION_LIST_VIEW="ACCORDION_LIST_VIEW";this.DYNAMIC_VIEW_PROPERTIES="__dynamic_view_properties";this.VIEW_TOOLBAR_PADDING=0;this.RESOURCE_VISUALIZER_VIEW="RESOURCE_VISUALIZER_VIEW";this.PADDING_HEIGHT=rdx.utils.is_ie()||rdx.utils.is_chrome_safari()?-1:-1;this.view_actions={SHOW:"show",HIDE:"hide",READ_ONLY:"read_only",EDITABLE:"editable",DATA_REFRESH:"data_refresh",NONE:"none"};this.view_state={NEW:0,CREATED:1,INITIALIZED:2,PASSIVE:3,ACTIVE:4,DESTROYED:0};this.data_selection_param={ALL:0,SELECTED:1};this.GEO_LEVEL={WORLD:0,COUNTRY:1,STATE:2};this.VIEWS_WITH_SETTINGS=[this.DETAIL_VIEW];this.LOGGED_IN_USER_COOKIE_NAME="logged_in_user_name";this.HOP_DIAGRAM="hop";this.FORMATION_DIAGRAM="formation";this.MINIMUM_COLUMNS_FOR_TABLE_CUSTOMIZATION=2;this.VIEW_EXPORT={QUERY_PARAM:"report_context",VIEW_SELECTION:"view_selection",VIEW_GET_URL:"view_and_get_url",REPORT_DURATION:"report_duration"}};rdx.view_context=function(a){this._base_view=a;this._url_params=new Object();this._init_data=null;this._app_context_data=null;this._properties=$.extend({},this._DEFAULT_PROPERTIES);this.OBJECT_NAME="rdx.view_context"};rdx.view_context.prototype=new rdx.context();rdx.view_context.prototype.get_data=function(a){if(this._base_view.get_view_state()>rdx.view_constants.view_state.INITIALIZED){return this._get_dynamic_data(a)}return this._data};rdx.view_context.prototype.get_initial_data=function(){return this._init_data};rdx.view_context.prototype.set_app_context_data=function(a){this._app_context_data=a};rdx.view_context.prototype.get_app_context_data=function(){return this._app_context_data};rdx.view_context.prototype.set_initial_data=function(){this._init_data=this._get_dynamic_data(rdx.view_constants.data_selection_param.ALL)};rdx.view_context.prototype._get_dynamic_data=function(a){if(!rdx.utils.is_function(this._base_view.get_view().get_data)){return[]}return this._base_view.get_view().get_data(a)};rdx.view_context.prototype.get_base_view=function(){return this._base_view};rdx.view_context.prototype.set_base_view=function(a){if(rdx.utils.is_defined(a)){this._base_view=a}if(rdx.utils.is_defined(this._base_view.get_view_definition()["resource_name"])){var b=rdx.utils.get_resource(this._base_view.get_view_definition()["resource_name"]);if(rdx.utils.is_defined(b.use_args)){this.set_use_args(b.use_args)}}};rdx.view_context.prototype.set_url_params=function(b,a){this.set_context_data(a,b)};rdx.view_context.prototype.get_object_name=function(){return"rdx.view_context"};rdx.view_utils=new function(){this.GET_TYPE="get";this.GET_COUNT_TYPE="count";this.GET_FILTER_TYPE="filter";this.GET_BY_NAME_TYPE="get_by_name";this.GET_CUSTOM_TYPE="query_params";this.get_action_bar_items=function(f,h,d){var e=[];for(var b in f.resource_operations){var g=f.resource_operations[b];var a=null;switch(b){case"custom_operations":for(var b in f.resource_operations.custom_operations){var g=f.resource_operations.custom_operations[b];a=$.extend({},g);this._add_button(g,a,e,h,d)}break;default:a=$.extend({},g);this._add_button(g,a,e,h,d);break}}return e};this._view_handler=function(d,h,b,g,f){g=rdx.utils.is_not_defined(g)?{}:g;var a=new rdx.base_view(h,rdx.utils.get_view(b));var e=a.get_view_context();var m=rdx.utils.is_defined(f)&&rdx.utils.is_defined(f.get_data())?f.get_data():{};if(rdx.utils.is_array(m)){m=m[0]}e.set_url_params(g,m);a.prepare_view()};this._add_button=function(e,a,d,f,b){if(a!=null){a.image_url=rdx.images.get_app_url(a.image_url)}if(e.click_handler_callback){a.click_handler_callback=e.click_handler_callback}else{if(e.view){var g=new rdx.callback(this._view_handler,[f,e.view,e.view_context,b]);a.click_handler_callback=g}}d.push(new rdx.action(a))};this.add_dynamic_view_properties=function(a,b){if(rdx.utils.is_defined(a,b)&&rdx.utils.is_defined(b.view_params)){a.view_properties[rdx.view_constants.DYNAMIC_VIEW_PROPERTIES]=b.view_params}};this.get_dynamic_view_properties=function(a){if(rdx.utils.is_defined(a.view_properties)){return a.view_properties[rdx.view_constants.DYNAMIC_VIEW_PROPERTIES]}return null};this.get_tree_key=function(a){if(rdx.utils.is_defined(a)){return a.__tree_key}return null};this.remove_dynamic_view_properties=function(a){if(rdx.utils.is_defined(a.view_properties)&&rdx.utils.is_defined(a.view_properties[rdx.view_constants.DYNAMIC_VIEW_PROPERTIES])){a.view_properties[rdx.view_constants.DYNAMIC_VIEW_PROPERTIES]=null;delete a.view_properties[rdx.view_constants.DYNAMIC_VIEW_PROPERTIES]}};this.get_model_method=function(a,b){var e=true;if(rdx.utils.is_defined(b)){e=b}var d=null;if(e){d=rdx.model_constants.ADD}return rdx.utils.is_not_defined(a.view_properties)?d:rdx.utils.is_not_defined(a.view_properties.submit_operation)?d:a.view_properties.submit_operation.method};this.get_action=function(a){var b=null;if(rdx.utils.is_defined(a.view_properties)&&rdx.utils.is_defined(a.view_properties.submit_operation)){b=a.view_properties.submit_operation.action;if(rdx.utils.is_not_defined(b)){b=null}}return b};this.is_view_active=function(a){var b=a.get_view_state();if(b>=rdx.view_constants.view_state.ACTIVE){return true}return false};this.is_view_initialized=function(a){var b=a.get_view_state();if(b>=rdx.view_constants.view_state.INITIALIZED){return true}return false};this.is_view_created=function(a){var b=a.get_view_state();if(b>=rdx.view_constants.view_state.CREATED){return true}return false};this.get_export_app_context=function(a,d){var b={};if(rdx.utils.is_defined(a,d)){for(key in a){b[key]=d[a[key]]}}return b};this.get_title=function(b){var a=b.get_view_definition();var d=a.view_properties;var e=b.get_resource();if(rdx.utils.is_defined(d)&&rdx.utils.is_defined(d.title)){return rdx.i18n.get_string(d.title)}if(rdx.utils.is_defined(e)&&rdx.utils.is_not_empty(e.obj_type)){var f=rdx.i18n.get_string(e.obj_type);if(a.type==rdx.view_constants.CONFIGURE_VIEW){if(rdx.utils.is_not_defined(d)||rdx.utils.is_not_defined(d.submit_operation)){return rdx.i18n.get_string("rdx.view_configure_title_add",{obj_type:f})}if(rdx.utils.is_defined(d.submit_operation.method)&&d.submit_operation.method==rdx.model_constants.ADD){return rdx.i18n.get_string("rdx.view_configure_title_add",{obj_type:f})}else{return rdx.i18n.get_string("rdx.view_configure_title_modify",{obj_type:f})}}else{return f}}return""};this.create_modify_view=function(f,b,d){var g=$.extend(true,{},rdx.views[f]);if(rdx.utils.is_defined(g.resource_name)){var a=rdx.utils.get_resource(g.resource_name).primary_keys;a=rdx.utils.is_defined(a)?a:[]}else{throw f+": Resource Name is not defined"}if(rdx.utils.is_not_defined(d)||!d){for(var e=0;e<a.length;e++){if(rdx.utils.is_array(g.resource_properties)){if(rdx.utils.is_not_defined(b)){b=0}g.resource_properties[b].form_fields[a[e]].read_only=true}else{if(rdx.utils.is_defined(g.resource_properties[a[e]])){g.resource_properties[a[e]].read_only=true}}}}if(rdx.utils.is_defined(g.view_properties)){if(rdx.utils.is_defined(g.view_properties.submit_operation)){g.view_properties.submit_operation.method="set"}else{g.view_properties.submit_operation={method:"set"}}}else{g.view_properties={submit_operation:{method:"set"}}}return g};this.create_full_edit_view=function(a){var b=rdx.view_utils.create_modify_view(a,0,true);b.view_properties.callback_before_operation=new rdx.callback(neo.view_callbacks.do_edit_op_with_delete_add);return b};this.get_model_change_response_formatted=function(b,d){if(rdx.utils.is_not_defined(d)||rdx.utils.is_not_defined(b)){return null}d=rdx.utils.get_formatted_response(d);if(rdx.utils.is_not_defined(d)){return null}if(rdx.utils.is_not_defined(b.response_formatter)||rdx.utils.is_object_empty(b.response_formatter)){return[d]}var a={};for(var e in b.response_formatter){a[e]=d[b.response_formatter[e]];if(e!=b.response_formatter[e]){delete a[b.response_formatter[e]]}}return[a]};this.get_inner_list_view_data=function(g){var f={resource_defn:g.get_resource(),resource_for_operation:{},callback_on_success:null,callback_on_failure:null,model_method:rdx.model_constants.NOOP,action:null,resource_context:{},return_call_back:null};var d=new rdx.configure_view_operation_params(f);g.process_inner_view_data(d,[]);var b=d.get_resource_for_operation();var e=[];if(rdx.utils.is_defined(b)){for(var a in b){e.push(b[a])}}return e};this.render_tree_drilldown_view=function(h,d,f){if(rdx.utils.is_not_defined(h)){return}var b=$.extend(true,{},rdx.utils.get_view(h),{add_to_bread_crumb:true});if(rdx.utils.is_defined(b.__tree_key)){delete b.__tree_key}var g=rdx.page.get_tree_content_pane();var a=new rdx.base_view(g,b);if(rdx.utils.is_defined(d)&&rdx.utils.is_defined(f)){var e=a.get_view_context();e.set_url_params(d,f)}a.prepare_view()};this.show_view_in_slider=function(e,n,g,o,b,h,f){var d=null;if(!rdx.page.is_slider_visible()){if(rdx.utils.is_defined(h)){d=rdx.page.show_slider(h,null,e)}else{d=rdx.page.show_slider({},null,e)}}var m=new rdx.base_view(rdx.page.get_slider_crumb().get_handler(),e);m.set_crumb_handler(rdx.page.get_slider_crumb().get_handler());var a=m.get_view_context();if(rdx.utils.is_defined(o)){g=g?g:{};a.set_url_params(o,g)}else{if(g||e.type==rdx.view_constants.CONFIGURE_VIEW){a.set_url_params({is_data_set:true},g)}}if(rdx.utils.is_not_defined(b)||b===true){m.prepare_view()}$(m).bind(rdx.events.BEFORE_VIEW_DESTROYED,{callback:f},function(q,p){if(rdx.utils.is_defined(q.data.callback)){q.data.callback.call_back([p])}});$(m).bind(rdx.events.VIEW_DESTROYED,{callback:n},function(q,p){if(rdx.utils.is_defined(q.data.callback)){q.data.callback.call_back()}if(rdx.page.get_slider_crumb().get_current_crumb().index<0){rdx.page.hide_slider()}});return m};this.show_view_in_full_page=function(a,b){var e=null;var f=document.activeElement;if(rdx.utils.is_not_defined(a.add_to_bread_crumb)||a.add_to_bread_crumb==false){e=new rdx.base_view(rdx.page.get_content(),a);e.set_toggle_view(true)}else{var d=b.get_parent();if(rdx.utils.is_defined(b._parent_base_view)&&b._parent_base_view._view_definition.container_view===false){d=b._parent_base_view.get_parent()}e=new rdx.base_view(d,a);e.set_crumb_handler(b.get_crumb_handler())}$(e).bind(rdx.events.VIEW_DESTROYED,{current_focus:f},function(h,g){f.focus()});return e};this.create_top_panel=function(d){var a=$("<div>");if(rdx.utils.is_defined(d)){a.addClass("rdx_top_panel configure_view_top_panel");var b=$("<div>").addClass("rdx_title_panel");b.append(rdx.i18n.get_string(d));a.append(b)}return a};this.show_export_report_panel=function(d,m,h,g){if(rdx.utils.is_defined(h)&&h==false){m.call_back()}else{rdx.view_object_get_callback=m;if(rdx.utils.is_defined(m)&&rdx.utils.is_defined(rdx.EXPORT_VIEW_NAME)){var a=rdx.utils.get_view(rdx.EXPORT_VIEW_NAME);var f=g||m.object&&m.object._view_definition.view_properties&&m.object._view_definition.view_properties.disable_csv_export===true;if(a.tabs){for(var e=0;e<a.tabs.length;e++){var b=a.tabs[e]["view"];if(f===true){b.resource_properties.export_format.formatter.map={PDF:"pdf",JPEG:"jpeg",PNG:"png"}}else{b.resource_properties.export_format.formatter.map={PDF:"pdf",JPEG:"jpeg",PNG:"png",CSV:"csv"}}}}if(rdx.utils.is_defined(a)){rdx.view_utils.show_view_in_slider(a,null,null,null,true,{show_bread_crumb:false})}}}};this.show_client_export_report_panel=function(b){rdx.client_export_callback=b.data.view_callback;var a=rdx.utils.get_view(rdx.views.client_export_configure_view);if(rdx.utils.is_defined(a)){rdx.view_utils.show_view_in_slider(a,null,{view:b.data.view},null,true,{show_bread_crumb:false})}};this.get_parameters_open_view_from_query_string=function(){rdx.view_object_from_query_string=null;rdx.view_selection_from_query_string=null;var a=rdx.utils.get_url_query_param(rdx.view_constants.VIEW_EXPORT.QUERY_PARAM);if(rdx.utils.is_defined(a)){a=a?decodeURIComponent(a):null;var b=JSON.parse(a);if(!$.isEmptyObject(b)){rdx.view_object_from_query_string=b;if(b[rdx.view_constants.VIEW_EXPORT.VIEW_SELECTION]){rdx.view_selection_from_query_string=b[rdx.view_constants.VIEW_EXPORT.VIEW_SELECTION]}if(b[rdx.view_constants.VIEW_EXPORT.VIEW_GET_URL]){rdx.export_context_view_and_get_url=b[rdx.view_constants.VIEW_EXPORT.VIEW_GET_URL]}}}};this.hide_tree_pane=function(){var a=$(".tree_pane");if(rdx.utils.is_defined(a)){var b=$(".tree_pane").parent();if(rdx.utils.is_defined(b)){b.css("display","none")}}};this.hide_header_pane=function(){var a=$(".ns_header");if(rdx.utils.is_defined(a)){a.hide()}};this.add_report_header=function(b,n,h){if(rdx.utils.is_defined(b)){var g=$("<div>").addClass("export_report_header_div");var o=$("<span>").addClass("export_report_product_name_span").append(rdx.i18n.get_string("rdx.report_generated_by")).append(b);var d=$("<span>").addClass("export_report_entity_name_span");if(rdx.utils.is_defined(n)){d.append("&nbsp;").append(rdx.i18n.get_string("rdx.for")).append(n)}var f=$("<span>").addClass("export_report_user_name_and_time_span");if(rdx.utils.is_defined(h)){var m=$("<span>").append(rdx.i18n.get_string("rdx.by")).append(h).append("&nbsp;");f.append(m)}var a=$("<span>").append(Highcharts.dateFormat("%d %b %Y, %l:%M %P",(new Date).getTime()));f.append(a);g.append(o).append(d).append(f);var e=$(".ns_content").first();if(rdx.utils.is_defined(e)){e.prepend(g)}}};this.add_formfield_at_the_beginning_of_resource_properties=function(d,b,a){if(rdx.utils.is_not_defined(d,b,a)){return null}if(rdx.utils.is_defined(d.resource_properties)){if(rdx.utils.is_array(d.resource_properties)){d.resource_properties[0]=$.extend(true,{form_field_key:a},d.resource_properties[0])}else{d.resource_properties=$.extend(true,{form_field_key:a},d.resource_properties)}}return d};this.add_time_selection_bar=function(u,m,s,a){var b=new Object();if(rdx.utils.is_defined(u)){if(m.enabled||s.enabled){if(s.enabled){var e=$("<div>").addClass("time_selection_bar_picker_container");u.append(e);var h=new rdx.form_field({input_type:rdx.form_constants.CALENDAR,display_label:false,properties:s});var o=new rdx.calendar_component(e,h);o.render();if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)){o.set_data(rdx.SELECTED_DURATION_OBJECT,false,!rdx.SELECTED_DURATION_OBJECT.time_range)}b.picker=o}if(m.enabled){var g=$("<div>").addClass("time_selection_bar_slider_container");var f=$("<div>").addClass("time_selection_bar_slider_time_display");b.time_display_div=f;var t=$("<div>");g.append(f).append(t);u.append(g);var p=new rdx.form_field({input_type:rdx.form_constants.TIME_SLIDER,display_label:false,properties:m});var d=new rdx.time_slider(t,p);d.render();if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)){d.set_data({default_min:rdx.SELECTED_DURATION_OBJECT.start_epoch,default_max:rdx.SELECTED_DURATION_OBJECT.end_epoch,min:rdx.utils.is_defined(o)?o.get_data().start_epoch:rdx.SELECTED_DURATION_OBJECT.start_epoch,max:rdx.utils.is_defined(o)?o.get_data().end_epoch:rdx.SELECTED_DURATION_OBJECT.end_epoch})}else{d.set_data({default_min:rdx.utils.is_defined(o)?o.get_data().start_epoch:(new Date).getTime(),default_max:rdx.utils.is_defined(o)?o.get_data().end_epoch:(new Date).getTime(),min:rdx.utils.is_defined(o)?o.get_data().start_epoch:(new Date).getTime(),max:rdx.utils.is_defined(o)?o.get_data().end_epoch:(new Date).getTime()})}b.slider=d;if(rdx.utils.is_defined(a)){if(rdx.utils.is_defined(a.button_text)&&rdx.utils.is_defined(a.click_handler_callback)){var n=$("<div>").addClass("time_selection_bar_go_button_container");var q=$("<input class='rdx_button rdx_blue_button' type = 'button'>").attr("value",rdx.i18n.get_string(a.button_text));q.bind(rdx.events.CLICK,{callback:a.click_handler_callback,slider:d},function(w){var z=w.data.callback;var v=w.data.slider;z.call_back([v.get_data(),true])});n.append(q);u.append(n)}}}}}return b};this.print_view_details=function(b,a){$(".print_view_iframe").remove();var d='<iframe class="print_view_iframe" name="print_frame" width="0" height="0" frameborder="0" src="about:blank"></iframe>';$("body").append($(d));window.frames.print_frame.document.body.innerHTML=a.html();window.frames.print_frame.window.focus();window.frames.print_frame.window.print()};this.render_info_on_chart=function(h,o,d){var f=$(".highcharts-container",h.renderTo);var a=$(".info-on-chart",f);var g=(a.length==1?$(a[0]):null);if(!g){var e=h.plotLeft+(h.plotWidth*0.5);var b=h.plotTop+(h.plotHeight*0.5);f.css({position:"relative"});var n='<span style="text-align:center;min-height:20px;display:inline-block;visibility:hidden"></span>';var p=$('<a class="donut-chart-text">'+o+"</a>").attr("href","#");g=$(n).addClass("info-on-chart").append(p);if(d){g.append($('<span class="info-lbl">').text(d))}p.attr("title","Click to view details");$(document.body).append(g);var m=parseInt(b+(g.height()*-0.5));g.remove();f.append(g);g.css({width:"80%",left:"10%",top:m,position:"absolute",visibility:"visible"})}else{$(".donut-chart-text",g).text(o)}};this.get_modified_view_defn_for_entity_choose=function(d,b){b=b||{};var a=$.extend(true,{},rdx.utils.get_view(d));a.view_properties=rdx.utils.is_not_defined(a.view_properties)?{}:a.view_properties;a.dialog_properties=rdx.utils.is_not_defined(a.dialog_properties)?{}:a.dialog_properties;a.dialog_properties.view_properties=$.extend(true,{resource_name:a.resource_name},a.dialog_properties.view_properties);a.view_properties.submit_operation={method:"no_op"};if(b.multi_selection==true){a.view_properties.show_select_component=rdx.form_constants.CHECK_BOX;a.dialog_properties.multi_selection=true}else{a.view_properties.show_select_component=rdx.form_constants.RADIO_BUTTON;a.dialog_properties.single_selection=true}if(rdx.utils.is_not_defined(a.view_properties.pagination)){a.view_properties.pagination=true}a.view_properties.is_tool_bar_required=false;a.view_properties.search=true;a.view_properties.append_data_to_first=false;a.view_properties.add_create_button=false;a.view_properties.add_close_button=false;delete a.add_to_bread_crumb;a.dialog_properties.blue_button_label=rdx.i18n.get_string("rdx.message_box_ok_button");a.resource_properties=rdx.utils.is_not_defined(a.resource_properties)?{}:a.resource_properties;return a};this.add_pseudo_bread_crumb=function(d){var a=$(".title_tool_bar_table td.title",rdx.page.get_content())[0];var e=$(".pseudo_crumb",a);if(e.length===0){var b=$('<img src="/admin_ui/rdx/core/images/breadcrumb_sep.png">');e=$('<div class="pseudo_crumb bread_crumb_container">').appendTo(a);e.append(b).append($("<span>"))}if(rdx.utils.is_defined(d)&&d.length>0){e.removeClass("hide");$("span",e).text(d)}else{e.addClass("hide")}};this.select_tree_node=function(a,b){if(a&&rdx.utils.is_defined(a.data.tree_key)){b=a.data.tree_key}rdx.get_tree().select_node(b)};this.reset_scroll=function(){var b=rdx.page.get_header_position();if(rdx.utils.is_defined(b)){var e=rdx.page.get_header_height()+b.top;if(d>e){e=0}else{if(d!==0){e=e-d}}var d=$(document).scrollTop(e);var a=$(document).scrollLeft(0)}};this.load_export_library=function(a,b){rdx.view_utils.export_report($(".rdx_second_pane_container"),b)};this.export_report=function(m,q){var n=[];var s=[];var p=document.getElementsByTagName("svg");var t=p.length-1;while(t>=0){var d=p[t];var h=d.parentNode;var g=h.innerHTML;var a=document.createElement("canvas");var f=(new XMLSerializer()).serializeToString(d);f=f.replace(/version=\"1.1"/,"");f=f.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");if((f.search(/width="[0-9]*%"/))>0){f=f.replace(/width="[0-9]*%"/,"width='"+h.offsetWidth+"'");f=f.replace(/height="[0-9]*%"/,"height='"+h.offsetHeight+"'")}var b=f.match(/rgba\(\s*(-?\d+|-?\d*\.\d+(?=%))(%?)\s*,\s*(-?\d+|-?\d*\.\d+(?=%))(\2)\s*,\s*(-?\d+|-?\d*\.\d+(?=%))(\2)\s*,\s*(-?\d+|-?\d*.\d+)\s*\)/g);if(rdx.utils.is_defined(b)&&rdx.utils.is_not_empty(b)){var o=b.length;for(var e=0;e<o;e++){f=f.replace(b[e],rdx.view_utils.rgbaTorgb(b[e]))}}f=f.replace("cursor: pointer","");f=f.replace("opacity: 1","");canvg(a,f);n.push({parent:h,child:d});h.removeChild(d);s.push({parent:h,child:a});h.appendChild(a);t--}html2canvas(m,{onrendered:function(w){var v=w.getContext("2d");v.webkitImageSmoothingEnabled=false;v.mozImageSmoothingEnabled=false;v.imageSmoothingEnabled=false;v.fillStyle="white";var z={pagesplit:false,background:"#fff"};var B="Report-"+new Date().toLocaleString();var A=w.toDataURL("image/png",1);if(q=="pdf"){if(w.width>w.height){var u=new jsPDF("l","mm",[w.width,w.height]);u.addImage(A,"PNG",10,10,w.width,w.height)}else{var u=new jsPDF("p","mm",[w.height,w.width]);u.addImage(A,"PNG",10,10)}u.save(B+".pdf")}else{w.toBlob(function(C){saveAs(C,B+".png")})}s.forEach(function(C){C.parent.removeChild(C.child)});n.forEach(function(C){C.parent.appendChild(C.child)})}})};this.rgbaTorgb=function(f){var n=f.substring(f.indexOf("(")).split(","),m=parseInt(rdx.view_utils.trim(n[0].substring(1)),10),h=parseInt(rdx.view_utils.trim(n[1]),10),d=parseInt(rdx.view_utils.trim(n[2]),10),e=parseFloat(rdx.view_utils.trim(n[3].substring(0,n[3].length-1))).toFixed(2);return("rgb("+m.toString()+", "+h.toString()+", "+d.toString()+")")};this.trim=function(a){return a.replace(/^\s+|\s+$/gm,"")};this.JSONToCSVConvertor=function(q,f,m,t){var e=typeof q!="object"?JSON.parse(q):q;var p="";p+="#"+f+"\r\n\n";if(m){var s="";for(var g in t){s+=t[g]+","}s=s.slice(0,-1);p+=s+"\r\n"}for(var d=0;d<e.length;d++){var s="";var o=e[d];$.each(t,function(u,v){if(o[v].indexOf("Instance_Group")!==-1){}else{s+='"'+o[v]+'",'}});s.slice(0,s.length-1);p+=s+"\r\n"}if(p==""){rdx.page.show_notification("Error in generating input key file: Invalid data",rdx.ERROR,true);return}var b="";b+=f.replace(/ /g,"_");if(rdx.utils.is_ie()||rdx.utils.is_safari()){var h=window.open();h.document.write("sep=,\r\n"+p);h.document.close();h.document.execCommand("SaveAs",true,b+".csv");h.close()}else{var a="data:application/csv;charset=utf-8,"+encodeURIComponent(p);var n=document.createElement("a");n.href=a;n.style="visibility:hidden";n.download=b+".csv";document.body.appendChild(n);n.click();document.body.removeChild(n)}};this.create_grid_layout=function(b,h){var e={lanes:3,direction:"vertical"};h=$.extend(true,e,h);b.attr("id","grid").addClass("grid");var a=h.attr||[];var d=b.children();var n=0,m=0;for(var g=0;g<d.length;g++){var f=$(d[g]);f.addClass("grid-item");if(rdx.utils.is_not_defined(f.attr("data-h"))){f.attr("data-h",1)}if(rdx.utils.is_not_defined(f.attr("data-w"))){f.attr("data-w",1)}if(rdx.utils.is_not_defined(f.attr("data-x"))){f.attr("data-x",n)}else{n=parseInt(f.attr("data-x"))}if(rdx.utils.is_not_defined(f.attr("data-y"))){f.attr("data-y",m);m++}else{m=parseInt(f.attr("data-y"))}if(m===h.lanes-1){m=0;n++}}b.gridList({lanes:h.lanes,direction:h.direction})}};rdx.download_util=function(d,b,a){this._parent=d;this._DEFAULT_PROPERTIES={header_title:"Downloads",header_title_class_name:"ns_wp_header",header_description:"Use this page to download resources for building custom management tools for the device or integration with the third party tools"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._view_definition=b};rdx.download_util.prototype.render=function(){var g=$(document.createElement("table")).attr("width","75%").attr("align","center").attr("cellpadding",0).attr("cellspacing",0);g.addClass("smooth_all_corner").addClass("layout_border").addClass("download_custom_theme_class");if(!g.html().match(/<tbody>/i)){g.append(document.createElement("tbody"))}var d=$(g[0].tBodies[0].insertRow(-1));$(d[0].insertCell(-1)).attr("colspan",3).attr("height","10px");var h=$(g[0].tBodies[0].insertRow(-1));h.addClass(this._properties.header_title_class_name).css("font-size","150%");$(h[0].insertCell(-1)).attr("colspan",3).append(this._properties.header_title);var f=$(g[0].tBodies[0].insertRow(-1));$(f[0].insertCell(-1)).attr("colspan",3).append("<br>"+this._properties.header_description);$(g[0].tBodies[0].insertRow(-1)).attr("colspan",3).attr("height",10);for(var e in this._view_definition){var b=this._view_definition[e];this._add_node_header(b,e,g);for(var a=0;a<b.length;a++){this._add_child_nodes(b[a],g);this._add_spacer_row(g,11)}}this._parent.append(g)};rdx.download_util.prototype._add_spacer_row=function(d,a){var b=$(d[0].tBodies[0].insertRow(-1));$(b[0].insertCell(-1)).attr("colspan",3).attr("height",a)};rdx.download_util.prototype._add_node_header=function(a,e,d){var f=a.header_class_name?a.header_class_name:"ns_small_header";var b=$(d[0].tBodies[0].insertRow(-1));$(b[0].insertCell(-1)).attr("colspan",3).addClass("ns_small_header").append(e);var g=$(d[0].tBodies[0].insertRow(-1));$(g[0].insertCell(-1)).attr("colspan",3).attr("height",5)};rdx.download_util.prototype._add_child_nodes=function(e,f){var h=rdx.i18n.get_string(e.href_short_description);var b=$(document.createElement("img")).attr("src",rdx.images.get_app_url(e.img_url)).attr("title",rdx.i18n.get_string(e.img_title));var a=$(document.createElement("a")).attr("href",e.href).attr("target",this._get_href_target(h,e.href_target)).append(b);var g=$(f[0].tBodies[0].insertRow(-1));$(g[0].insertCell(-1)).append(a).width(40);var m=$(document.createElement("a")).attr("href",e.href).attr("target",this._get_href_target(h,e.href_target)).append(h);var d=$(document.createElement("br"));$(g[0].insertCell(-1)).append(m).append(d).append(rdx.i18n.get_string(e.href_description))};rdx.download_util.prototype._get_href_target=function(f,e){if(e){return rdx.i18n.get_string(e)}var d=f.toUpperCase();var g="";var a=d.split(" ");for(var b=0;b<a.length;b++){g+=a[b]+"_"}g=g.substring(0,e.length-1);return g};rdx.distribution_info_view=function(d,b,e,a){this._base_view=a;this._view_definition=b;this._parent=d;this._resource=e;this._DEFAULT_PROPERTIES={add_border:true,show_percentage:false,height:null,colors_enum:null,show_total_items:false,show_zero_value_rows:true,info_color_type:"border-left",class_names:"",vertical_child:true};this._extra_info_renderer_callback=null;this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._add_extra_info=(rdx.utils.is_defined(this._properties.add_extra_info)&&this._properties.add_extra_info===true);if(this._add_extra_info===true&&rdx.utils.is_defined(this._properties.extra_info_renderer_callback)){this._extra_info_renderer_callback=this._properties.extra_info_renderer_callback}this._is_data_dynamic=rdx.utils.is_defined(b.is_data_dynamic)?b.is_data_dynamic:false;this._resource_properties=$.extend(true,{},b.resource_properties);for(var f in b.resource_properties){if(e.properties[f]){this._resource_properties[f]=$.extend(true,{},e.properties[f],this._resource_properties[f])}}};rdx.distribution_info_view.prototype.make_view=function(){this._container_div=$("<div>").addClass("distribution_info_view").appendTo(this._parent);if(this._properties.class_names){this._container_div.addClass(this._properties.class_names)}if(this._properties.show_percentage===true){this._container_div.addClass("percentage_view");this._properties.colors=null}};rdx.distribution_info_view.prototype.get_resource_response_arrived=function(b){var a={};if(this._is_data_dynamic){var f={};for(var e=0;e<b.length;e++){var g=b[e];var d=g[this._resource_properties.name_field];a[d]=g[this._resource_properties.value_field];f[d]={}}this._resource_properties=f}else{a=rdx.utils.is_object(b)?b:b[0]}this._container_div.empty();this._create_info_list(a);if(rdx.utils.is_defined(this._extra_info_renderer_callback)){this._extra_info_renderer_callback.call_back([a])}};rdx.distribution_info_view.prototype._create_info_list=function(g){if(rdx.utils.is_not_defined(g)){g={}}var q=Object.keys(this._resource_properties);var n=$("<ul>").addClass("distribution-items");var b={parent_prop:{"class":"distribution-item"},item_prop:{"class":"item-text"},item_count_prop:{"class":"item-count"},total:""};var s=this;var f=null;if(this._properties.header){f=$('<div class="distribution-item header">').append($('<div class="item-text">').text(this._properties.header));this._container_div.append(f)}if(this._properties.show_percentage===true||this._properties.show_total_items===true){b.total=0;for(var h in q){var t=g[q[h]]||0;b.total=b.total+parseInt(t)}var p=null;if(this._properties.show_percentage===true){b.parent_prop["class"]="distribution-item percent";p=$("<div>",b.item_count_prop).text(b.total).appendTo(f)}else{if(this._properties.show_total_items===true){b.parent_prop["class"]="info_row";p=$('<div class="count">').text(b.total);var d=$('<div class="total_count">').append(p).append($('<div class="text">').text("Total"));this._container_div.append(d)}}if(p&&s._view_definition.point_select&&s._view_definition.point_select.total_click_callback){p.addClass("anchor").attr("tabindex",0);p.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{},function(u){if(rdx.utils.is_defined(u.keyCode)&&u.keyCode!==13){return}s._view_definition.point_select.total_click_callback.call_back([null])})}}for(var e in q){var a=null;var m=g[q[e]]||0;if(this._properties.colors&&this._properties.info_color_type=="background"){a={"background-color":this._properties.colors[e]}}else{if(this._properties.colors&&this._properties.info_color_type=="border-left"){a={"border-left":"5px solid "+this._properties.colors[e]}}}if(this._properties.colors_enum&&rdx.utils.is_defined(this._properties.colors_enum[q[e]])){a=this._properties.colors_enum[q[e]]}if(this._properties.show_zero_value_rows===false&&parseInt(m)===0){continue}if(this._properties.vertical_child===false){n.append(this._get_non_vertical_item(q[e],g))}else{n.append(this._get_info_row_item(q[e],g[q[e]],a,b))}}if(this._properties.show_zero_value_rows===false&&b.total===0){var o=$("<li>").addClass("chart_view_chart_no_data").text(rdx.i18n.get_string("rdx.chart_view_no_data_to_display"));n.append(o)}this._container_div.append(n);return n};rdx.distribution_info_view.prototype._get_non_vertical_item=function(b,d){var a=$("<li>").addClass("distribution-single-row-item");if(rdx.utils.is_defined(this._resource_properties[b].formatter)){this._resource_properties[b].formatter.callback.call_back([d,a])}return a};rdx.distribution_info_view.prototype._get_info_row_item=function(n,g,b,m){if(!this._is_data_dynamic&&!this._view_definition.resource_properties[n]){return null}var a;a=$("<li>",m.parent_prop);if(rdx.utils.is_defined(this._resource_properties[n].formatter)){this._resource_properties[n].formatter.callback.call_back([g,a]);return a}var o=this._resource_properties[n]?this._resource_properties[n].label:null;o=o?rdx.i18n.get_string(o):n;var d=$("<span>",m.item_prop).attr("data_key",n).text(this._properties.show_percentage===true?"":o);var e=$("<span>",m.item_count_prop).attr("data_key",n).text(g);var f=$("<a>").attr("href","#").appendTo(a);f.append(d).append(e);if(b&&this._properties.show_percentage===false){a.css(b)}if(this._properties.show_percentage){var q=Number(g)*100/m.total+"%";d.append(this._create_percentage_el(q,b));d.append($("<span>").attr("data_key",n).text(o))}var p=this;var h={key:n,name:o};a.bind(rdx.events.CLICK,{point_data:h},function(s){p._view_definition.point_select.callback.call_back([s.data.point_data])});return a};rdx.distribution_info_view.prototype._create_percentage_el=function(f,d){var a={height:"7px","background-color":"#009999",width:f};a=$.extend(true,a,d);var e=$("<div>").addClass("total_available");var b=$("<div>").css(a).appendTo(e);return e};rdx.distribution_info_view.prototype.get_is_back_button_required=function(){return false};rdx.distribution_info_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.distribution_info_view.prototype.register_event_handlers=function(){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this._base_view,this._base_view.refresh_view))};rdx.distribution_info_view.prototype.get_resource_name=function(){return this._view_definition.resource_name};rdx.distribution_info_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.distribution_info_view.prototype.add_mask=function(){return true};rdx.title_bar=function(b,d,a){this.navigation_div=b;this.navigation_div.addClass("title_tool_bar_table");this._tool_bar_table=$("<table>").addClass("tool_bar_table").attr("cellPadding",0).attr("cellSpacing",0).attr("role","presentation").append($("<tbody>"));this._tool_bar_row=$("<tr>");this._tool_bar_table.append(this._tool_bar_row);this._crumb_div=$("<td>").addClass("title");this._title_div=null;this._title=$("<td>").addClass("title");this._back_button=$("<td>");this._added_crumb=false;this.crumb=new rdx.bread_crumb(this._crumb_div,d,a);this._is_global_filter_added=false;this._global_filter=[];this._global_filter_list=null;this._current_global_filter=null;this._is_title_bar_shown=true;this._DEFAULT_PROPERTIES={add_toolbar:true,add_help_id:false,add_back_button:false,add_title:false};this._properties=$.extend(true,{},this._DEFAULT_PROPERTIES,a);if(rdx.utils.is_defined(this._properties.persist_view)&&this._properties.persist_view==true){this._tool_bar_row.append(this._crumb_div)}if(this._properties.add_toolbar==true){if(this.is_add_back_button()==true){this._tool_bar_row.prepend(this._back_button);this._back_button.addClass("back_button_toolbar");if(this.is_add_help_id()==true){this._tool_bar_div=$("<td>").addClass("custom_help_link_container")}}else{this._tool_bar_div=$("<td>").addClass("top_links_container")}if(this._properties.add_title==true){this._tool_bar_row.append(this._title)}this._custom_component_container=$("<td>");this._global_filter_container=$("<td>");this._tool_bar_row.append(this._custom_component_container);this._tool_bar_row.append(this._global_filter_container);if(rdx.help.show_help()==true){this._tool_bar_row.append(this._tool_bar_div)}}this.navigation_div.append(this._tool_bar_table);this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a)};rdx.title_bar.prototype.height=function(){return this.navigation_div.outerHeight(true)};rdx.title_bar.prototype.add_toolbar_items=function(a,b){this.clear_toolbar_items();new rdx.ribbon($(this._tool_bar_div),a,b).render()};rdx.title_bar.prototype.add_title=function(b,a){if(rdx.utils.is_defined(this._title_div)){this._title.empty()}var b=rdx.i18n.get_string(b);if(rdx.utils.is_not_empty(b)){if(rdx.utils.is_defined(a)){this._title_div=$("<h2>").addClass("page_title").append(a).append(rdx.i18n.get_string(b))}else{this._title_div=$("<h2>").addClass("page_title").text(rdx.i18n.get_string(b))}this._title.append(this._title_div)}else{if(rdx.utils.is_defined(a)){this._title.append(a)}}};rdx.title_bar.prototype.add_back_button_toolbar=function(a,b){this._custom_component_container.empty();$(this._back_button).addClass("ribbon_back_button");new rdx.ribbon($(this._back_button),a,b).render()};rdx.title_bar.prototype.add_custom_component=function(a){if(rdx.utils.is_defined(a)){a.call_back([this._custom_component_container])}};rdx.title_bar.prototype.add_crumb=function(b,a){if(!this._added_crumb){this._added_crumb=true;if(this._tool_bar_row.find("td").length==0){this._tool_bar_row.append(this._crumb_div)}else{this._tool_bar_row.find("td").eq(0).after(this._crumb_div)}}return this.crumb.add_view(b,a)};rdx.title_bar.prototype.clear_all=function(){this.crumb.clear_all()};rdx.title_bar.prototype.clear_toolbar_items=function(){$(this._tool_bar_div).children().remove();this._custom_component_container.empty();this._custom_component_container.removeClass();if(!this.is_global_filter_added()){this._global_filter_container.empty();this._global_filter_container.removeClass()}};rdx.title_bar.prototype.get_current_crumb=function(){return this.crumb.get_current_crumb()};rdx.title_bar.prototype.update_current_crumb_title=function(a){return this.crumb.update_current_crumb_title(a)};rdx.title_bar.prototype.remove_all_crumbs=function(){this.crumb.remove_all_crumbs()};rdx.title_bar.prototype.remove_current_crumb=function(){return this.crumb.go_back_to_previous_crumb()};rdx.title_bar.prototype.get_handler=function(){return this.crumb.get_handler()};rdx.title_bar.prototype.is_add_back_button=function(){return this._properties.add_back_button};rdx.title_bar.prototype.is_add_help_id=function(){return this._properties.add_help_id};rdx.title_bar.prototype.register_global_filter_change_event=function(a){this._global_filter_list.add_event_handler(rdx.events.CHANGE,a)};rdx.title_bar.prototype.remove_global_filter_change_event=function(a){this._global_filter_list.remove_event_handler(rdx.events.CHANGE,a)};rdx.title_bar.prototype.is_global_filter_added=function(){return this._is_global_filter_added};rdx.title_bar.prototype.get_current_global_filter=function(){return this._current_global_filter};rdx.title_bar.prototype.set_current_global_filter=function(a){this._current_global_filter=a};rdx.title_bar.prototype.get_global_filter_options=function(){return this._global_filter};rdx.title_bar.prototype.add_global_filter=function(f,g,a){this._is_global_filter_added=true;this._global_filter=f;var b=this._global_filter_container;var d=new Array();if(f.length==0){return}for(var e in f){d.push(f[e].label)}b.addClass("global_operations_separator");this._global_filter_list=new rdx.dropdown_menu(b,new rdx.form_field({formatter:{map:d},mandatory:true,properties:{size:1,set_current:true}}));this._global_filter_list.render();if(rdx.utils.is_defined(a)&&a){this.register_global_filter_change_event(g)}};rdx.title_bar.prototype.remove_global_filter=function(){this._global_filter_container.empty();this._global_filter_container.removeClass();this._is_global_filter_added=false;this._current_global_filter=null};rdx.title_bar.prototype.show_title_bar=function(){this.navigation_div.show();this._is_title_bar_shown=true};rdx.title_bar.prototype.hide_title_bar=function(){this.navigation_div.hide();this._is_title_bar_shown=false};rdx.title_bar.prototype.get_crumb_length=function(){return this.crumb.get_crumb_length()};rdx.title_bar.prototype.update_crumb_title=function(b){var a=this.crumb.get_current_crumb().crumb_container.find("span");if(rdx.utils.is_defined(a)){a.text(b)}};rdx.title_bar.prototype.get_navigation_div=function(){return this.navigation_div};rdx.title_bar.prototype.is_title_bar_shown=function(){return this._is_title_bar_shown};rdx.bread_crumb=function(d,b,a){this.crumb_div=d;this._head_crumb=this._current_crumb={next_crumb:null,prev_crumb:null,crumb_container:null,crumb_title:null,crumb_link:null,tree_key:null,view_info:null,index:-1,slider:false};this._crumb_length=0;this._DEFAULT_PROPERTIES={persist_view:false,render_crumb_from_tree_key:true,add_slider:false};this._views_list=[];this._properties=$.extend(true,{},this._DEFAULT_PROPERTIES,a);this._bread_crumb_handler=new rdx.bread_crumb_handler(this);this._parent_container=b;this._crumb_link=null};rdx.bread_crumb.prototype._handle_bread_crumb_event=function(b,a){this.add_view(b,a)};rdx.bread_crumb.prototype.clear_all=function(){this._views_list=[];$(this.crumb_div).children().remove();this._crumb_length=0;this._head_crumb=this._current_crumb={next_crumb:null,prev_crumb:null,crumb_container:null,crumb_title:null,crumb_link:null,tree_key:null,view_info:null,index:-1,slider:false}};rdx.bread_crumb.prototype._remove_crumb=function(a){if(rdx.utils.is_not_defined(a)){return}this._remove_crumb(a.next_crumb);this._views_list.splice(a.index,1);a.crumb_container.remove();if(this._crumb_length>0){this._crumb_length--}};rdx.bread_crumb.prototype.remove_crumb=function(b,a){var d=b;if(a){this._remove_crumb(b.next_crumb);if(rdx.utils.is_defined(b.next_crumb)){b.next_crumb=null}this._current_crumb=b}else{this._remove_crumb(b);if(rdx.utils.is_defined(b.prev_crumb)){b.prev_crumb.next_crumb=null;this._current_crumb=b.prev_crumb}if(b.next_crumb&&b.next_crumb.view_info&&b.next_crumb.view_info.view_definition.view_properties&&b.next_crumb.view_info.view_definition.view_properties.toggle_view!=true){if(b.next_crumb.view_info.base_view&&rdx.utils.is_not_defined(b.next_crumb.tree_key)){b.next_crumb.view_info.base_view.destroy_view()}}}if(this._properties.slider===true&&a===false){rdx.page.update_slider_title(this._current_crumb.title)}};rdx.bread_crumb.prototype._handle_tree_view_addition=function(a){if(rdx.utils.is_not_defined(a._view_definition.__tree_key)){return}if(a._view_definition.__tree_key){this.remove_crumb(this._head_crumb,true);var h=a._view_definition.__tree_key.indexOf("^");var d=this._head_crumb;this.clear_all();this._current_crumb=this._head_crumb;while((h=a._view_definition.__tree_key.indexOf("^",h+1))>0){var f=a._view_definition.__tree_key.substr(0,h);var b=rdx.get_tree().get_view_definition(f,false);if(rdx.utils.is_defined(b)){var g={prev_crumb:d,tree_key:f};d.next_crumb=g;this._add_new_crumb(b.view_properties.title,g,true);d=g}else{var e=rdx.get_tree().get_view_title(f);var g={prev_crumb:d,tree_key:f,is_not_link:true};d.next_crumb=g;this._add_new_crumb(e,g,false);d=g}}}};rdx.bread_crumb.prototype._add_new_crumb=function(f,g,b){var a=$("<div>").addClass("current");if(b){this._crumb_link=$("<a>").attr("href","#").append(rdx.i18n.get_string(f));if(rdx.utils.is_instrumentation_enabled()){var e=rdx.utils.get_view_title();inner_text=rdx.i18n.get_string(f);if(inner_text){this._crumb_link.attr("id",e+"-brd-crmb-"+inner_text.replace(/\ /g,"_"))}}}else{this._crumb_link=$("<span>").append(rdx.i18n.get_string(f))}if(this._crumb_length==0){a.append(this._crumb_link);if((!rdx.page.is_slider_visible())&&rdx.utils.is_defined(rdx.global_title_bar)){rdx.global_title_bar.hide_title_bar()}else{if(rdx.utils.is_defined(rdx.page.get_slider_crumb)&&rdx.page.is_slider_visible()){rdx.page.get_slider_crumb().hide_title_bar();rdx.page.update_slider_bread_crumb(false)}}this._head_crumb=g}else{if((!rdx.page.is_slider_visible())&&rdx.utils.is_defined(rdx.global_title_bar)){rdx.global_title_bar.show_title_bar()}else{if(rdx.utils.is_defined(rdx.page.get_slider_crumb)&&rdx.page.is_slider_visible()){rdx.page.get_slider_crumb().show_title_bar();rdx.page.update_slider_bread_crumb(true)}}var d=$("<img>").attr("alt","Separator");if(rdx.constants.NAV_TYPE_TABS==rdx.page.get_navigation_type()){d.attr("src",rdx.images.BREAD_CRUMB_IMG)}else{d.attr("src",rdx.images.BREAD_CRUMB_SEP)}a.append(d).append(this._crumb_link)}if(rdx.utils.is_defined(this._current_crumb.crumb_container)){this._current_crumb.crumb_container.removeClass("current")}a.addClass("bread_crumb_container");this.crumb_div.append(a);g.crumb_title=f;g.crumb_container=a;g.crumb_link=this._crumb_link;this._current_crumb=g;this._crumb_length++;if(b){this._register_click_event(this._crumb_link,g)}};rdx.bread_crumb.prototype._register_click_event=function(b,a){b.bind(rdx.events.CLICK,{crumb:a,bread_crumb:this},function(e){var d=e.data.crumb;if(rdx.utils.is_not_defined(d.next_crumb)){return}var f=e.data.bread_crumb;d.crumb_container.addClass("current");f._current_crumb.crumb_container.removeClass("current");if(f._properties.persist_view==false){f._handle_tree_based_link(d)}else{f._handle_view_persist_link(d)}})};rdx.bread_crumb.prototype._handle_view_persist_link=function(b){var e=b.index;if(this._views_list.length==1&&e==0){var a=this._views_list[0].crumb;if(rdx.utils.is_defined(a.view_info)&&rdx.utils.is_defined(a.view_info.is_view)&&a.view_info.is_view===false){$(a.view_info.parent).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});a.view_info.parent.remove()}else{a.view_info.base_view.destroy_view({slider_clicked:this._properties.slider});a.view_info.base_view.get_parent().remove()}this.remove_crumb(a,true)}else{for(var d=this._views_list.length-1;d>e;d--){var a=this._views_list[d].crumb;if(rdx.utils.is_defined(a.view_info)&&rdx.utils.is_defined(a.view_info.is_view)&&a.view_info.is_view===false){$(a.view_info.parent).trigger(rdx.events.VIEW_DESTROYED,{slider_clicked:this._properties.slider});a.view_info.parent.remove()}else{a.view_info.base_view.destroy_view({slider_clicked:this._properties.slider});a.view_info.base_view.get_parent().remove()}this.remove_crumb(a,true)}}this._current_crumb=b;b.next_crumb=null;if(rdx.utils.is_defined(b.view_info)){b.view_info.parent.show();this._add_parent_specefic_class(b.view_info.parent,b.view_info.base_view)}this._make_link_crumb_as_text(b);if(this._current_crumb.index==0){rdx.page.update_slider_bread_crumb(false)}else{rdx.page.update_slider_bread_crumb(true)}};rdx.bread_crumb.prototype._handle_tree_based_link=function(e){var d=this._current_crumb.view_info.view_definition;if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.view_info)&&(e.view_info.view_definition.type===rdx.view_constants.TABBED_VIEW)){var f=e.view_info.base_view.get_view();var a=f._current_view.get_view_definition().view_properties.title;rdx.view_utils.add_dynamic_view_properties(e.view_info.base_view._view_definition,{view_params:{default_tab:a}})}if(rdx.utils.is_defined(e.tree_key)){rdx.get_tree().select_node(e.tree_key);return}else{if(rdx.utils.is_defined(e.view_info.base_view._view_definition.__tree_key)){if(rdx.utils.is_defined(d.add_to_bread_crumb)&&d.add_to_bread_crumb===true&&rdx.utils.is_not_defined(d.__tree_key)){this._current_crumb.view_info.base_view.destroy_view()}rdx.get_tree().select_node(e.view_info.base_view._view_definition.__tree_key);return}else{this._current_crumb.view_info.base_view.destroy_view();this._current_crumb=e;this.remove_crumb(e,true);e.next_crumb=null;var b=new rdx.base_view(e.view_info.parent,e.view_info.view_definition);b.set_view_context(e.view_info.view_context);b.prepare_view(true);e.view_info.base_view=b}}};rdx.bread_crumb.prototype._add_parent_specefic_class=function(d,a){if(this._properties.persist_view==false){return}if(rdx.utils.is_not_defined(a)){d.addClass("op_wizard_form_panel");return}var e=a.get_view_definition()["type"];var b=a.get_view_definition()["view_properties"];if(this._crumb_length>=1){if(e==rdx.view_constants.CONFIGURE_VIEW){d.addClass("op_wizard_form_panel")}else{if(e==rdx.view_constants.ONE_PAGE_WIZARD_PAGE_VIEW||e==rdx.view_constants.ONE_PAGE_WIZARD_VIEW){d.removeClass("op_wizard_form_panel")}else{d.addClass("op_wizard_form_panel")}}}else{if(e==rdx.view_constants.CONFIGURE_VIEW){d.addClass("op_wizard_form_panel")}else{d.removeClass("op_wizard_form_panel")}}};rdx.bread_crumb.prototype.add_view=function(d,b){if(this._check_add_view_with_crumb_menu(b)){this.add_view_with_crumb_menu(d,b);return}var a=b.get_parent();if(rdx.utils.is_empty(d)){d=rdx.view_utils.get_title(b)}if(this._properties.persist_view===true){a=$("<div>").css("width","100%");if(this._views_list.length>0){$(this._views_list[this._views_list.length-1].container).hide()}if(rdx.utils.is_defined(this._parent_container)){if(this._properties.slider===true){a.css("width","0px").css("position","absolute");a.animate({width:"100%",right:0})}this._parent_container.append(a);this._add_parent_specefic_class(a,b)}}else{if(rdx.utils.is_defined(this._current_crumb.view_info)){if(!this._current_crumb.view_info.base_view._view_definition.container_view){this._current_crumb.view_info.base_view.destroy_view({bread_crumb:"NO_REMOVE"})}}}if(this._properties.render_crumb_from_tree_key===true){this._handle_tree_view_addition(b)}var e={title:d,index:this._views_list.length,prev_crumb:this._current_crumb,view_info:{base_view:b,parent:a,view_definition:b.get_view_definition(),resource_name:rdx.utils.is_defined(b.get_resource())?b.get_resource().name:null,view_context:$.extend(true,{},b.get_view_context())}};this._current_crumb.next_crumb=e;this._make_text_crumb_as_link(this._current_crumb);this._views_list.push({crumb:e,container:a});this._add_new_crumb(d,e,false);$(b).bind(rdx.events.VIEW_DESTROYED,{bc:this,crumb:e},function(h,g){var m=h.data.bc;var f=h.data.crumb;if(rdx.utils.is_not_defined(g.bread_crumb)||g.bread_crumb!="NO_REMOVE"){if(m._properties.slider===true&&rdx.utils.is_defined(m._current_crumb.prev_crumb)&&m._current_crumb.prev_crumb.index>=0){if(rdx.utils.is_function(m._current_crumb.prev_crumb.view_info.base_view.get_view().is_help_rendered)&&m._current_crumb.prev_crumb.view_info.base_view.get_view().is_help_rendered()==true){rdx.page.update_slider_help()}else{if((rdx.utils.is_defined(m._current_crumb.prev_crumb.view_info.base_view.get_view()))&&(rdx.utils.is_defined(m._current_crumb.prev_crumb.view_info.base_view.get_view()._view_definition))){rdx.page.update_slider_help(m._current_crumb.prev_crumb.view_info.base_view.get_view()._view_definition.view_properties.help_id)}}}m.remove_crumb(f,false);if(m._properties.persist_view===true){if(rdx.utils.is_defined(m._current_crumb)){if(rdx.utils.is_defined(m._current_crumb.view_info)){m._current_crumb.view_info.parent.show();m._add_parent_specefic_class(m._current_crumb.view_info.parent,m._current_crumb.view_info.base_view)}m._make_link_crumb_as_text(m._current_crumb)}}}});if(this._properties.slider===true){rdx.page.update_slider_title(d);if(rdx.utils.is_function(b.get_view().is_help_rendered)&&b.get_view().is_help_rendered()===true){rdx.page.update_slider_help()}else{rdx.page.update_slider_help(b._view_definition.view_properties.help_id)}}return a};rdx.bread_crumb.prototype._check_add_view_with_crumb_menu=function(b){var d=b._view_definition.view_class_name&&b._view_definition.view_class_name.indexOf("rdx.ext.analytics")!==-1?true:false;var e=b._view_definition.type=="ANALYTICS_DASHBOARD_VIEW";var a=rdx.utils.is_not_defined(b._view_definition.breadcrumb);return(d||e)&&a};rdx.bread_crumb.prototype.add_view_with_crumb_menu=function(d,b){var a=b.get_parent();if(rdx.utils.is_empty(d)){d=rdx.view_utils.get_title(b)}if(this._properties.persist_view===true){a=$("<div>").css("width","100%");if(this._views_list.length>0){$(this._views_list[this._views_list.length-1].container).hide()}if(rdx.utils.is_defined(this._parent_container)){if(this._properties.slider===true){a.css("width","0px").css("position","absolute");a.animate({width:"100%",right:0})}this._parent_container.append(a);this._add_parent_specefic_class(a,b)}}else{if(rdx.utils.is_defined(this._current_crumb.view_info)){}}if(this._properties.render_crumb_from_tree_key===true){this._handle_tree_view_addition(b)}var e={index:this._views_list.length,prev_crumb:this._current_crumb,view_info:{base_view:b,parent:a,view_definition:b.get_view_definition(),view_context:$.extend(true,{},b.get_view_context())}};this._current_crumb.next_crumb=e;this._make_text_crumb_as_link(this._current_crumb);this._views_list.push({crumb:e,container:a});this._add_new_crumb(d,e,false);$(b).bind(rdx.events.VIEW_DESTROYED,{bc:this,crumb:e},function(h,g){var m=h.data.bc;var f=h.data.crumb;if(rdx.utils.is_not_defined(g.bread_crumb)||g.bread_crumb!="NO_REMOVE"){m.remove_crumb(f,false);if(m._properties.persist_view===true){if(rdx.utils.is_defined(m._current_crumb)){if(rdx.utils.is_defined(m._current_crumb.view_info)){m._current_crumb.view_info.parent.show();m._add_parent_specefic_class(m._current_crumb.view_info.parent,m._current_crumb.view_info.base_view)}m._make_link_crumb_as_text(m._current_crumb)}}}});return a};rdx.bread_crumb.prototype.add_container=function(d,b){rdx.page.update_slider_title(d);var a=$("<div>").css("width","100%");if(this._views_list.length>0){$(this._views_list[this._views_list.length-1].container).hide()}if(rdx.utils.is_defined(this._parent_container)){if(this._properties.slider===true){a.css("width","0px").css("position","absolute");a.animate({width:"100%",right:0})}this._parent_container.append(a.append(b));a.addClass("op_wizard_form_panel")}var e={title:d,index:this._views_list.length,prev_crumb:this._current_crumb,view_info:{parent:a,is_view:false}};this._current_crumb.next_crumb=e;this._make_text_crumb_as_link(this._current_crumb);this._views_list.push({crumb:e,container:a});this._add_new_crumb(d,e,false);$(a).bind(rdx.events.VIEW_DESTROYED,{bc:this,crumb:e},function(h,g){var m=h.data.bc;var f=h.data.crumb;m.remove_crumb(f,false);if(m._properties.persist_view===true){if(rdx.utils.is_defined(m._current_crumb)){if(rdx.utils.is_defined(m._current_crumb.view_info)){m._current_crumb.view_info.parent.show();m._current_crumb.view_info.parent.addClass("op_wizard_form_panel")}m._make_link_crumb_as_text(m._current_crumb)}}});return a};rdx.bread_crumb.prototype._make_text_crumb_as_link=function(b){var a=b.crumb_container;if(rdx.utils.is_defined(a)){var e=a.children("span");if(e.length===0||(rdx.utils.is_defined(b.is_not_link)&&b.is_not_link)){return}else{var d={};if(rdx.utils.is_defined(b.view_info.view_context)){d=rdx.utils.get_formatted_response(b.view_info.view_context.get_data())}var f=rdx.i18n.get_string(b.crumb_title).match(/{/)?rdx.i18n.get_string(b.view_info.view_definition.view_properties.title,d):rdx.i18n.get_string(b.crumb_title);var g=$("<a>").attr("href","#").append(f);e.replaceWith(g);this._register_click_event(g,b)}}};rdx.bread_crumb.prototype._make_link_crumb_as_text=function(b){var a=b.crumb_container;if(rdx.utils.is_defined(a)){var d=a.children("a");if(d.length>0){var e=$("<span>").append(rdx.i18n.get_string(b.crumb_title));d.replaceWith(e)}}};rdx.bread_crumb.prototype.get_current_crumb=function(){return this._current_crumb};rdx.bread_crumb.prototype.update_current_crumb_title=function(a){this._crumb_link.empty();this._crumb_link.append(rdx.i18n.get_string(a))};rdx.bread_crumb.prototype.go_back_to_previous_crumb=function(){if(rdx.utils.is_defined(this._current_crumb.prev_crumb)){var a=this._current_crumb.prev_crumb;var b=this;b._current_crumb.crumb_container.removeClass("current");if(rdx.utils.is_defined(a.crumb_container)){a.crumb_container.addClass("current");if(rdx.utils.is_not_defined(a.next_crumb)){return}}if(this._properties.persist_view===false){this._handle_tree_based_link(a)}else{this._handle_view_persist_link(a)}}else{return}};rdx.bread_crumb.prototype.remove_all_crumbs=function(){while(true){if(rdx.utils.is_not_defined(this._current_crumb)||rdx.utils.is_not_defined(this._current_crumb.crumb_container)){break}this.go_back_to_previous_crumb();if(rdx.utils.is_not_defined(this._current_crumb.prev_crumb)){break}}this.clear_all()};rdx.bread_crumb.prototype.get_handler=function(){return this._bread_crumb_handler};rdx.bread_crumb.prototype.get_crumb_length=function(){return this._crumb_length};rdx.bread_crumb.prototype.get_crumb_data=function(){return this._current_crumb.view_info.view_context.get_data()};rdx.bread_crumb_handler=function(a){this._bread_crumb=a};rdx.bread_crumb_handler.prototype.add_view=function(b,a){return this._bread_crumb.add_view(b,a)};rdx.slider=function(a){this._DEFAULT_PROPERTIES={slide_time:1000,show_bread_crumb:true,help_slider:false,mask_custom_class:"slider_mask",title:null,slider_width:"75%"};this._DEFAULT_PROPERTIES.slider_mask=rdx.mask.SLIDER_MASK;this._properties=$.extend(true,{},this._DEFAULT_PROPERTIES,a);this._parent=rdx.page.get_content();this._slider_container=$("<div>").addClass("rdx_slider").attr("tabindex",0);this._container=$("<div>").addClass("rdx_slider_container");this._slider_top_container=null;this._bread_crumb_container=$("<div>").addClass("rdx_slider_bread_crumb_container");this._title_bar=new rdx.title_bar(this._bread_crumb_container,this._container,{render_crumb_from_tree_key:false,slider:true,persist_view:true,add_toolbar:false});rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this._handle_resize));this._click_function=null;this._scroll_function=null;this._mask_container=null;this._is_slider_shown=false;this._title_container=null;this._is_help_shown=false;this._slider_id=null;this._hidden=false;this._slider_id=rdx.mask.SLIDER_MASK;this._refresh_allowed_views={DETAIL_VIEW:true};this._HELP_SLIDER_DEFAULT_PROPERTIES={mask_custom_class:"help_slider_mask",slider_width:"400px"};this._HELP_SLIDER_DEFAULT_PROPERTIES.slider_mask=rdx.mask.SLIDER_HELP_MASK;if(this._properties.help_slider){var b=$.extend(true,{},this._properties,this._HELP_SLIDER_DEFAULT_PROPERTIES);this._properties=b;this._slider_container.addClass("rdx_help_slider");this._slider_id=rdx.mask.SLIDER_HELP_MASK}};rdx.slider.prototype._handle_resize=function(){if(rdx.utils.is_not_defined(this._mask_container)){return}var e=rdx.page.get_header_height();var b=$(document).scrollTop();var h=e-b;var g=h>=0?h:0;var d=$(this._mask_container).children().outerHeight(true);this._slider_container.height((d-g));h=rdx.page.get_header_height()-b;g=h>=0?h:0;this._slider_container.css("top",g);this._bread_crumb_container.css("top",g);var a=this._properties.show_bread_crumb&&this._title_bar.is_title_bar_shown()?this._bread_crumb_container.height():0;var f=a+this._slider_top_container.height();this._slider_top_container.css("top",g+a);this._container.css("top",g+f)};rdx.slider.prototype.get_slider_container=function(){return this._container};rdx.slider.prototype.get_height=function(){return this._slider_container.height()};rdx.slider.prototype.get_title_bar=function(){return this._title_bar};rdx.slider.prototype.show=function(a,d){if(rdx.utils.is_not_defined(a)||rdx.utils.is_not_defined(a.slider_width)){this._properties.slider_width="75%"}this._hidden=false;if(this._is_slider_shown===true){return this}var p=$.extend(true,{},this._properties);if(rdx.utils.is_defined(a)){p=$.extend(true,p,a)}this._properties=p;var h=null;h=rdx.mask.mask_dom_element($(document.body),this._properties.slider_mask,this._properties.mask_custom_class);rdx.page.get_content().attr("aria-hidden","true");this._slider_top_container=$("<div>").addClass("rdx_slider_top_container");this._title_container=$("<span>").addClass("rdx_slider_title_container");if(this._properties.title&&(rdx.utils.is_defined(this._properties.title))){this._title_container.append(rdx.i18n.get_string(this._properties.title))}this._slider_top_container.append(this._title_container);var o=$("<button>").addClass("rdx_slider_cross_container btn-icon").attr({"aria-label":"Close"});o.bind(rdx.events.CLICK,{slider:this},this._handle_close);this._slider_top_container.append(o);if(rdx.utils.is_defined(d)&&this._refresh_allowed_views[d.type]){if(!(rdx.utils.is_defined(d.view_properties)&&d.view_properties.add_refresh_on_slider===false)){var t=$("<button>").addClass("rdx_slider_refresh_container btn-icon").attr({href:"#","aria-label":"Refresh"});t.bind(rdx.events.CLICK,{slider:this,view_dfn:d},this._handle_refresh);this._slider_top_container.append(t)}}if(p.show_bread_crumb===false){this._bread_crumb_container.hide()}else{this._bread_crumb_container.show()}this._slider_container.append(this._bread_crumb_container);this._slider_container.append(this._slider_top_container);this._slider_container.attr("tabindex",0);this._slider_container.on("keydown",{that:this,cross_button:o,bread_crumb_container:this._bread_crumb_container},this.handle_slider_navigation);var q=$(document).scrollTop();var f=rdx.page.get_header_height()-q;var s=f>=0?f:0;this._slider_container.css("top",s).append(this._container);this._bread_crumb_container.css("top",s);var e=p.show_bread_crumb?this._bread_crumb_container.height():0;var n=e+this._slider_top_container.height();this._slider_top_container.css("top",s+e);this._container.css("top",s+n);var u=this._properties.slider_width;if(this._properties.help_slider===false){var g=rdx.page.get_content()[0].offsetLeft;if(g>50){var b=$(document.body).width();u=b-g;u=parseInt((u*75)/100)}}if(rdx.utils.is_ie()&&parseInt(rdx.utils.browser().version)<=9){this._slider_container.css("width",u).css("right",0)}else{this._slider_container.animate({width:u,right:0})}$(document.body).append(this._slider_container);if(!p.help_slider){rdx.page.get_content().addClass("rdx_background_opacity")}var m=this;this._click_function=function(z){z.stopPropagation();z.preventDefault();var v=null;var w=null;if(p.help_slider){rdx.mask.unmask_dom_element($(document.body),m._slider_id);w=$(document.elementFromPoint(z.clientX,z.clientY));if(w.is("select")){if(rdx.utils.is_chrome_safari()){rdx.utils.trigger_select_element(w)}}else{w.trigger("focus");w.click()}}z.data.slider.hide()};slider=this;setTimeout(function(){if(rdx.utils.is_defined(h)){h.bind(rdx.events.CLICK,{slider:m,properties:p},m._click_function)}},200);this._scroll_function=function(z){var w=rdx.page.get_header_height();var v=$(document).scrollTop();var B=w-v;var A=B>=0?B:0;m._slider_container.css("top",A)};$(window).bind("scroll",this._scroll_function);$(window).bind("keyup",{slider:m,properties:p},function(v){if(v.keyCode===27){v.stopPropagation();v.preventDefault();v.data.slider.hide()}});this._mask_container=h;$(document.body).addClass("rdx_slider_body");this._handle_resize();this._is_slider_shown=true;this._slider_container.focus();return this};rdx.slider.prototype.hide=function(){this._is_help_shown=false;if(!this._hidden){this._hidden=true;this._mask_container=null;$(document.body).removeClass("rdx_slider_body");rdx.mask.unmask_dom_element($(document.body),this._slider_id);this._slider_container.animate({width:"0",right:0});this._title_bar.remove_all_crumbs();this._slider_container.empty();this._container.empty();if(!this._properties.help_slider){rdx.page.get_content().removeClass("rdx_background_opacity")}if(rdx.utils.is_defined(this._click_function)&&rdx.utils.is_defined(rdx.page.get_content())){rdx.page.get_content().unbind(rdx.events.CLICK,this._click_function)}if(rdx.utils.is_defined(this._scroll_function)){$(window).unbind("scroll",this._scroll_function)}$(window).unbind("keyup");this._slider_container.off("keydown");this._slider_container.removeAttr("tabindex");this._is_slider_shown=false;$(this).trigger(rdx.events.SLIDER_CLOSE);$(this).unbind(rdx.events.SLIDER_CLOSE);rdx.page.get_content().attr("aria-hidden","false")}};rdx.slider.prototype.update_bread_crumb=function(b){var d=$(document).scrollTop();var g=rdx.page.get_header_height()-d;var f=g>=0?g:0;this._slider_container.css("top",f).append(this._container);this._bread_crumb_container.css("top",f);var a=0;var e=this._slider_top_container.height();if(rdx.utils.is_defined(b)&&b===true){this._bread_crumb_container.show();a=this._bread_crumb_container.height();e=e+a}else{this._bread_crumb_container.hide()}this._slider_top_container.css("top",f+a);this._container.css("top",f+e);rdx.utils.set_focus_on_first_editable_component(this._container[0])};rdx.slider.prototype.update_title=function(a){if(rdx.utils.is_not_defined(a)||rdx.utils.is_not_defined(this._title_container)){return}a=rdx.i18n.get_string(a);this._title_container.empty();this._title_container.append(a)};rdx.slider.prototype.update_help=function(a){if(rdx.utils.is_not_defined(a)||this._properties.help_slider===true){if(this._is_help_shown){this._help_div.remove();this._is_help_shown=false}}else{if(rdx.utils.is_defined(a)&&!this._is_help_shown&&rdx.utils.is_defined(rdx.APP_HELP_BASE)){this._help_div=$("<a>").addClass("rdx_slider_help_container").attr({href:"#","aria-label":"Help"});rdx.help.add_help(this._help_div,a);this._is_help_shown=true;this._slider_top_container.append(this._help_div)}else{if(rdx.utils.is_defined(a)&&this._is_help_shown){this._help_div.remove();this._help_div=$("<a>").addClass("rdx_slider_help_container").attr({href:"#","aria-label":"Help"});rdx.help.add_help(this._help_div,a);this._slider_top_container.append(this._help_div)}}}};rdx.slider.prototype.add_close_event_handler=function(a){$(this).bind(rdx.events.SLIDER_CLOSE,{callback:a},function(b){b.data.callback.call_back()})};rdx.slider.prototype._handle_close=function(b){b.preventDefault();var a=b.data.slider;var d=a._title_bar.get_current_crumb();if(rdx.utils.is_defined(d.prev_crumb)&&rdx.utils.is_defined(d.prev_crumb.crumb_container)){a._title_bar.remove_current_crumb(d)}else{a.hide()}};rdx.slider.prototype._handle_refresh=function(b){b.preventDefault();var a=b.data.view_dfn;$(rdx.utils.get_resource(a.resource_name)).trigger(rdx.events.MODEL_CHANGED,[[],null,{refresh_action:rdx.view_constants.REFRESH_ALL}])};rdx.slider.prototype.destroy=function(){this.hide();this._slider_container.remove()};rdx.slider.prototype.is_slider_shown=function(){return this._is_slider_shown};rdx.slider.prototype.set_title=function(a){this._properties.title=a};rdx.slider.prototype.handle_slider_navigation=function(b){var a=$(document.activeElement);var d;if(b.keyCode==9&b.shiftKey==false){d=b.data.that.get_boundry_elements(this,b.data.cross_button,b.data.bread_crumb_container);if(a[0]==d.last_buttom_el||(a[0].type=="radio"&&a[0].isEqualNode(d.last_buttom_el))){d.target_top_element.focus();b.preventDefault()}}else{if(b.keyCode==9&&b.shiftKey==true){d=b.data.that.get_boundry_elements(this,b.data.cross_button,b.data.bread_crumb_container);if(a[0]==d.target_top_element[0]||a[0]==d.target_top_element){d.last_buttom_el.focus();b.preventDefault()}}}};rdx.slider.prototype.get_boundry_elements=function(b,m,h){var e=$(".rdx_slider_container",b).children();var g=$("a",h);var f;var n;if(g.length>0){f=g[0]}else{f=m}var d=e[e.length-1];var a=$("button,a,input",d).filter(":visible");if(a.length>0){n=a[a.length-1]}else{n=f}return{target_top_element:f,last_buttom_el:n}};rdx.view_callback_on_response_arrived_params=function(a){this._DEFAULT_PROPERTIES={return_call_back:null,response:null,unformatted_response:null,app_context_data:null,inherited_data:null,inherited_init_data:null,additional_params:{},refresh_relevant:false,search_params:null,view_context:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a);this._intermediate_callback=null};rdx.view_callback_on_response_arrived_params.prototype.get_search_params=function(){return this._properties.search_params};rdx.view_callback_on_response_arrived_params.prototype.get_refresh_relevant=function(){return this._properties.refresh_relevant};rdx.view_callback_on_response_arrived_params.prototype.get_response=function(){return this._properties.response};rdx.view_callback_on_response_arrived_params.prototype.get_app_context_data=function(){return this._properties.app_context_data};rdx.view_callback_on_response_arrived_params.prototype.get_inherited_data=function(){return this._properties.inherited_data};rdx.view_callback_on_response_arrived_params.prototype.get_inherited_init_data=function(){return this._properties.inherited_init_data};rdx.view_callback_on_response_arrived_params.prototype.get_unformatted_response=function(){return this._properties.unformatted_response};rdx.view_callback_on_response_arrived_params.prototype.set_intermediate_callback=function(a){return this._intermediate_callback=a};rdx.view_callback_on_response_arrived_params.prototype.resume=function(a,b){var d=rdx.utils.is_defined(this._intermediate_callback)?this._intermediate_callback:this._properties.return_call_back;return d.call_back([(a)?a:this.get_response(),b])};rdx.view_callback_on_response_arrived_params.prototype.force_resume=function(a,b){return this._properties.return_call_back.call_back([(a)?a:this.get_response(),b])};rdx.view_callback_on_response_arrived_params.prototype.set_is_not_configured=function(){if(rdx.utils.is_not_defined(this._properties.additional_params)){this._properties.additional_params={}}this._properties.additional_params.is_configured=false};rdx.view_callback_on_response_arrived_params.prototype.is_configured=function(){if(rdx.utils.is_not_defined(this._properties.additional_params)){return true}if(rdx.utils.is_not_defined(this._properties.additional_params.is_configured)){return true}return this._properties.additional_params.is_configured==true};rdx.view_callback_on_response_arrived_params.prototype.set_additional_params=function(a){return this._properties.additional_params=a};rdx.view_callback_on_response_arrived_params.prototype.get_additional_params=function(a){return this._properties.additional_params};rdx.view_callback_on_response_arrived_params.prototype.get_view_context=function(){return this._properties.view_context};rdx.view_callback_on_response_arrived_params.prototype.get_pagination=function(a){return this._properties.pagination};rdx.base_view=function(n,e){this.current_focus=document.activeElement;if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.view_properties)&&rdx.utils.is_defined(e.view_properties.advertisement_view)){this._base_view_advertisement_div=$("<div>").addClass("advertisement_div");this._base_view_parent_div=$("<div>");n.append(this._base_view_advertisement_div).append(this._base_view_parent_div);var h=new rdx.base_view(this._base_view_advertisement_div,rdx.utils.get_view(e.view_properties.advertisement_view));h.prepare_view();n=this._base_view_parent_div}this._view_definition=e;this._view_definition.view_properties=rdx.utils.is_defined(this._view_definition.view_properties)?this._view_definition.view_properties:{};this._view_context=new rdx.view_context();this._view_context.set_base_view(this);this._added_global_filter=false;this._view_logo_title_description_container=null;this._toolbar_parent=null;this._global_filter_change_event_callback=null;this._show_settings=false;this._settings=null;this._bread_crumb_handler=null;this._show_hide_builtin_policies_from_cookie="hide_builtin_policies";this._detail_summary_view_map={};if(rdx.SHOW_VIEW_SETTINGS==true&&rdx.utils.is_settings_implemented(this._view_definition.type)&&rdx.utils.is_defined(rdx.resources[rdx.SETTINGS_RESOURCE_NAME])){var d=true;if(rdx.utils.is_defined(this._view_definition.view_properties.show_view_settings)&&this._view_definition.view_properties.show_view_settings==false){d=false}if(d&&rdx.LOGGED_IN_USER_NAME){this._settings_key=rdx.utils.create_settings_key(rdx.LOGGED_IN_USER_NAME,this._view_definition.name);this._get_stored_settings();this._show_settings=true}}if(this._view_definition.view_context){this._view_context.set_url_params(this._view_definition.view_context,{})}if(rdx.utils.is_defined(this._view_definition.resource_defn)&&rdx.utils.is_object(this._view_definition.resource_defn)){this._resource=this._view_definition.resource_defn}else{if(this._view_definition.resource_name){this._resource=rdx.utils.get_resource(this._view_definition.resource_name)}}this._job_id=this._view_definition.auto_refresh?this._resource.name+rdx.utils.random():null;this._view_state=rdx.view_constants.view_state.NEW;this._action_bar=null;this._tool_bar_table=null;this._disable_bread_crumb=false;this._is_bread_crumb_added_from_tree=false;if(rdx.utils.is_defined(this._view_definition.view_properties.invoke_diagnostic_job_record)){this._no_data_parent_div=$("<div>").addClass("no_data_parent_div").addClass("hide");n.append(this._no_data_parent_div);this._view_definition.view_properties.invoke_diagnostic_job_record.call_back([this._no_data_parent_div])}this._view_div=$("<div>").addClass("view_div_decorator");this._view_container=$("<div>").addClass("base_view_container");this._view_div.append(this._view_container);this._title_ribbon_cell=null;this._title_div=null;this._description_div=null;if(rdx.utils.is_defined(this._view_definition.view_properties.message_container_callback)){this._view_definition.view_properties.message_container_callback.call_back([n])}if(rdx.utils.is_defined(this._view_definition.message_container)&&(this._view_definition.message_container!==null)){var o=this._view_definition.message_container;var p=o.message_title;var q=o.message;var a=o.resource_name;var b=o.resource_key;var f=rdx.utils.is_not_defined(o.fire_resource_call)?true:o.fire_resource_call;if(f===true){rdx.model.get_all(rdx.utils.get_resource(a),null,new rdx.callback(null,function(s){if(!s[a][b]){rdx.message_container.warning(n,p,q,o)}}))}else{rdx.message_container.success(n,q,o,p)}}this._view=this._get_view();if(rdx.utils.is_defined(this._settings)&&this._show_settings===true){if(rdx.utils.is_defined(this._view.set_settings)&&rdx.utils.is_function(this._view.set_settings)){this._view.set_settings(this._settings)}else{this._view._settings=this._settings}}if(rdx.utils.is_defined(this._view.set_settings_key)&&rdx.utils.is_function(this._view.set_settings_key)){this._view.set_settings_key(this._settings_key)}else{this._view._settings_key=this._settings_key}this._DEFAULT_PROPERTIES={is_tool_bar_required:false,force_get_all:false};this._implementing_view_properties={is_tool_bar_required:rdx.utils.is_function(this._view.is_tool_bar_required)?this._view.is_tool_bar_required():this._DEFAULT_PROPERTIES.is_tool_bar_required,force_get_all:rdx.utils.is_function(this._view.force_get_all)?this._view.force_get_all():this._DEFAULT_PROPERTIES.force_get_all};this._properties=$.extend({},this._implementing_view_properties,this._view_definition.view_properties);this._is_view_in_slider=false;if(rdx.utils.is_defined(n)&&(n instanceof rdx.bread_crumb_handler)){this._parent=n.add_view(rdx.i18n.get_string(this._properties.title),this);this._bread_crumb_handler=n;this._is_view_in_slider=true}else{this._parent=n;if(this._show_view_in_dialog()){this._parent=$("<div>")}else{if(this._is_toggle_view(true)===true){this._parent=rdx.page.get_content()}}if(rdx.utils.is_not_defined(this._parent)){this._parent=$("<div>")}}if(rdx.utils.is_defined(this._view_definition.calendar_properties)){this._timeline_slider_parent=$("<div>");this._parent.append(this._timeline_slider_parent);this._timeline_slider=new rdx.timeline_slider(this._timeline_slider_parent,this._view_definition,this);this._timeline_slider.render()}if(rdx.utils.is_not_defined(this._view_definition[rdx.mask.MASK_KEY])){var m=rdx.mask.get_id();this._view_definition[rdx.mask.MASK_KEY]=m}this._parent.append(this._view_div);if(rdx.utils.is_defined(this._view_definition.on_view_destroyed_callback)){rdx.page.add_event_handler(rdx.events.PAGE_UNLOAD,this._view_definition.on_view_destroyed_callback)}var g=this;this._default_dialog_properties={modal:true,resizable:false,dialogClass:"configure_view",title:rdx.i18n.get_string(this._view_definition.view_properties.title)};this._is_tool_bar_required=this._properties.is_tool_bar_required;this._force_get_all=this._properties.force_get_all;this._is_resize_required=true;if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.height)&&rdx.utils.is_function(this._view.set_height)){this._is_resize_required=false}this._DEFAULT_TOGGLE_VIEW_PROPERTIES={view:null,link:null,parent_div:this._parent,view_context:null,details_mode:false,toggle_link:null};this._crossfilter=rdx.utils.is_defined(this._properties.crossfilter)?true:false;this._DEFAULT_TOGGLE_VIEW_PROPERTIES._is_toggled=false;this._DEFAULT_TOGGLE_VIEW_PROPERTIES._toggle_view=this._view_definition;this._DEFAULT_TOGGLE_VIEW_PROPERTIES._toggle_view_context=null;this._DEFAULT_TOGGLE_VIEW_PROPERTIES._toggle_parent_div=this._parent;this._toggle_properties=$.extend({},this._DEFAULT_TOGGLE_VIEW_PROPERTIES,this._view_definition.view_toggle_link);this._toggle_container=null;this._top_right_container=null;this._crumb_handler=null;this.load_all=true;this._bread_crumb_processing_data=null;this._show_in_slider=false;this._toggle_view=false;this._inherited_data_callback=null;this._inherited_init_data=null;this._add_entity_select_btn=false;this._hide_global_toolbar=rdx.utils.is_defined(this._view_definition.view_properties.hide_global_toolbar)?this._view_definition.view_properties.hide_global_toolbar:false;if((this._is_toggle_view(true)===true&&this._parent.hasClass("ns_content"))||this._view_definition.type=="ONE_PAGE_WIZARD_VIEW"){rdx.page.enable_navigation(false)}rdx.active_views.set_view(this._view_definition.name,this)};rdx.base_view.prototype._show_view_in_dialog=function(){if(rdx.utils.is_defined(this._crumb_handler)){return false}return((rdx.utils.is_function(this._view.is_dialog)&&this._view.is_dialog())||(this._view_definition.view_properties.dialog==true)&&rdx.utils.is_not_defined(this._view_definition.add_to_bread_crumb))};rdx.base_view.prototype.get_view_context=function(){return this._view_context};rdx.base_view.prototype.set_view_context=function(a){this._view_context=a;this._view_context.set_base_view(this)};rdx.base_view.prototype.get_parent=function(){return this._parent};rdx.base_view.prototype.get_view_container=function(){return this._view_div};rdx.base_view.prototype.get_view_definition=function(){return this._view_definition};rdx.base_view.prototype._check_and_add_bread_crumb=function(g){if((rdx.view_utils.is_view_created(this))||g){return false}if(rdx.utils.is_defined(rdx.global_title_bar)&&this._view_definition.add_to_bread_crumb&&!this._disable_bread_crumb&&!this._is_bread_crumb_added_from_tree){rdx.global_title_bar.clear_toolbar_items();var m="";if(rdx.utils.is_defined(this._view_definition.view_properties.title)){m=rdx.i18n.get_string(this._view_definition.view_properties.title)}else{m=rdx.i18n.get_string(this._view_definition.title)}var h=rdx.global_title_bar.get_current_crumb();if(rdx.utils.is_defined(h,this._view_definition.bread_crumb_formatter)&&h.view_info&&h.view_info.base_view){var b=h.view_info.base_view.get_view_context().get_data();this._bread_crumb_processing_data=b;if(h.view_info.view_definition.type===rdx.view_constants.TABBED_VIEW){var f=h.view_info.base_view._view._current_view.get_view_context();if(rdx.utils.is_function(f.get_data)){b=f.get_data()}}var e=new rdx.formatter(this._view_definition.bread_crumb_formatter);e.map_data_items(b);var a=e.get_map_values();if(rdx.utils.is_defined(a)&&(a.length)>0){m=m+" : "+a[0]}}this._bread_crumb_title=this._view_definition.view_properties.title;if(rdx.utils.is_defined(m)){var d=rdx.i18n.get_string(m).match(/{/)?m:rdx.i18n.get_string(m)}rdx.global_title_bar.add_crumb(d,this)}if(this._is_bread_crumb_added_from_tree){this._is_bread_crumb_added_from_tree=false}return true};rdx.base_view.prototype.disable_bread_crumb=function(){return this._disable_bread_crumb=true};rdx.base_view.prototype.bread_crumb_added=function(a){return this._is_bread_crumb_added_from_tree=a};rdx.base_view.prototype.refresh_view=function(a,b){if(rdx.utils.is_not_defined(b)){this.get_view_context().invalidate_data()}if(rdx.utils.is_function(this._view.refresh_view)){this._view.refresh_view(a,b)}else{this.prepare_view()}};rdx.base_view.prototype.prepare_view=function(d,a){if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().view_stack.push(this)}if(rdx.utils.is_defined(a)){this.load_all=a}d=rdx.utils.is_not_defined(d)?false:d;this.add_global_filter_to_view();this._check_and_add_bread_crumb(d);if(rdx.utils.is_defined(rdx.global_title_bar)){if(this._hide_global_toolbar){rdx.global_title_bar.hide_title_bar()}else{}}if(!rdx.view_utils.is_view_created(this)&&(rdx.ELEMENTS_READONLY===false)){this._is_action_bar_required=rdx.utils.is_function(this._view.is_action_bar_required)?this._view.is_action_bar_required():false}if(!rdx.view_utils.is_view_created(this)){this._make_view()}else{this._view_state=rdx.view_constants.view_state.CREATED;if(rdx.utils.is_function(this._view.reset_view_before_refresh)){this._view.reset_view_before_refresh()}if(rdx.utils.is_defined(this._toggle_component)){this._toggle_component.data_populate_callback()}}if(this._is_toggle_view()==true){rdx.page.toggle_view(true)}if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.is_prototyped_view)&&this._view_definition.view_properties.is_prototyped_view===true){$(".prototyped").show()}this.mask();var f=(rdx.utils.is_defined(this._view_definition.auto_refresh)&&this._view_definition.auto_refresh===true);if(this._crossfilter&&rdx.crossfilter_controller.is_resource_crossfilter_present(this._resource.name)){var h=null;var e=this.get_data_from_crossfilter();if(rdx.utils.is_defined(this._resource)){h={};h[this._resource.name]=e}else{h=e}this._get_resource_response_arrived(h)}else{if(this._crossfilter&&this._view_definition.type==rdx.view_constants.DETAIL_VIEW&&rdx.utils.is_function(this._view_context.is_data_set)&&!this._view_context.is_data_set()){rdx.model.get_count(this._resource,this._view_context.get_url_params(),new rdx.callback(this,this._handle_crossfilter_count))}else{if(!f&&rdx.utils.is_defined(this._view_context)&&((this._view_context.is_url_params_set()&&rdx.utils.is_defined(this._resource)&&this._force_get_all===false)||(rdx.utils.is_function(this._view_context.is_data_set)&&this._view_context.is_data_set()))){if(this._view_context.is_url_params_set()){var b=new rdx.callback(this,this._response_arrived);rdx.model.get(this._resource,this._view_context.get_url_params(),new rdx.callback(this,this._get_resource_response_arrived),this._view._parent,b)}else{if((rdx.utils.is_function(this._view_context.is_data_set)&&this._view_context.is_data_set())){var g=this._view_context.get_data();var h=null;if(rdx.utils.is_defined(this._resource)){h={};h[this._resource.name]=g}else{h=g}this._get_resource_response_arrived(h)}}}else{this._initialize_view()}}}rdx.view_utils.remove_dynamic_view_properties(this._view_definition);if(rdx.utils.is_defined(rdx.get_debugger)){rdx.get_debugger().activate_view(this._view_definition,this._view_div)}if(rdx.utils.is_defined(rdx.app_search)){rdx.app_search.update_active_view_list(this._view_definition)}};rdx.base_view.prototype._handle_crossfilter_count=function(a){var b=this._view_definition.view_properties.crossfilter.threshold_limit?this._view_definition.view_properties.crossfilter.threshold_limit:rdx.constants.CROSS_FILTER_THRESHOLD_LIMIT;if(a>=b){this._crossfilter=false;delete this._view_definition.view_properties.crossfilter;if(rdx.utils.is_function(this._view.set_crossfilter)){this._view.set_crossfilter(false)}}this._initialize_view()};rdx.base_view.prototype.mask=function(){if(rdx.utils.is_function(this._view.handle_mask)){return}if(rdx.utils.is_function(this._view.add_mask)&&this._view.add_mask()==true){rdx.mask.mask_component(this._view_div,this.get_mask_id())}};rdx.base_view.prototype.unmask=function(){if(rdx.utils.is_function(this._view.handle_unmask)){return}if(rdx.utils.is_function(this._view.add_mask)&&this._view.add_mask()==true){rdx.mask.unmask_component(this._view_div,this.get_mask_id())}};rdx.base_view.prototype.get_mask_id=function(){return("__base_view_mask"+this._view_definition[rdx.mask.MASK_KEY])};rdx.base_view.prototype.set_default_dialog_properties=function(a){a=a==null?{}:a;this._default_dialog_properties=a};rdx.base_view.prototype.resize_view=function(){if(!rdx.view_utils.is_view_created(this)||!this.is_resize_required()){return}if(rdx.utils.is_function(this._view.resize_view)){this._view.resize_view()}};rdx.base_view.prototype.get_form=function(){if(rdx.utils.is_function(this._view.get_form)){return this._view.get_form()}return null};rdx.base_view.prototype.pause_view=function(){if(this._view_definition.auto_refresh){rdx.scheduler.pause_job(this._job_id)}if(rdx.utils.is_defined(rdx.get_debugger)){rdx.get_debugger().pause_view(this._view_definition)}};rdx.base_view.prototype.resume_view=function(){if(this._view_definition.auto_refresh){rdx.scheduler.resume_job(this._job_id)}if(rdx.utils.is_defined(rdx.get_debugger)){rdx.get_debugger().activate_view(this._view_definition,this._view_div)}if(rdx.utils.is_defined(rdx.app_search)){rdx.app_search.update_active_view_list(this._view_definition)}};rdx.base_view.prototype.set_toggle_view=function(a){this._toggle_view=a};rdx.base_view.prototype._is_toggle_view=function(a){if(a==true){return((this._view_definition.view_properties.toggle_view==true||this._toggle_view==true)||(rdx.utils.is_function(this._view.do_toggle_view)&&this._view.do_toggle_view()==true))}return((rdx.utils.is_defined(this._view_definition.view_properties.toggle_view)||this._toggle_view==true)||(rdx.utils.is_function(this._view.do_toggle_view)&&this._view.do_toggle_view()==true))};rdx.base_view.prototype.destroy_view=function(b,a){var e=true;if(rdx.utils.is_defined(a)){e=a}if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.is_prototyped_view)&&this._view_definition.view_properties.is_prototyped_view===true){$(".prototyped").hide()}if(this._added_global_filter){rdx.global_title_bar.remove_global_filter()}else{if(rdx.utils.is_defined(this._global_filter_change_event_callback)){rdx.global_title_bar.remove_global_filter_change_event(this._global_filter_change_event_callback)}}var d={base_view:this};if(rdx.utils.is_defined(b)){d=$.extend(d,b)}$(this).trigger(rdx.events.BEFORE_VIEW_DESTROYED,d);this._view_state=rdx.view_constants.view_state.DESTROYED;this._view_div.remove();this._view_div.empty();if(rdx.utils.is_defined(this._view_logo_title_description_container)){this._view_logo_title_description_container.remove()}if(rdx.utils.is_defined(this._button_bar_div)){this._button_bar_div.remove()}if(rdx.utils.is_function(this._view.destroy_view)){this._view.destroy_view(a)}if(this._is_toggle_view()==true){rdx.page.toggle_view(false)}$(this).trigger(rdx.events.VIEW_DESTROYED,d);if(this._view_definition.auto_refresh){rdx.scheduler.remove_job(this._job_id)}if(rdx.status_bar&&e==true){rdx.page.hide_notification_bar();rdx.status_bar.clear_status()}if(rdx.utils.is_defined(this._view_definition.on_view_destroyed_callback)){this._view_definition.on_view_destroyed_callback.call_back()}if(this._show_view_in_dialog()){if(rdx.utils.is_not_defined(d)||(rdx.utils.is_defined(d)&&rdx.utils.is_not_defined(d.close_event))){this._parent.dialog("close")}rdx.page.get_content().attr("aria-hidden","false");this._parent.remove()}if(rdx.utils.is_defined(this._timeline_slider)){this._timeline_slider.destroy_timeline_slider();this._timeline_slider_parent.remove()}if(e===true){rdx.page.hide_notification_bar()}if(rdx.utils.is_defined(this._search_collapse_arrow)){this._search_collapse_arrow.remove()}if(rdx.utils.is_defined(rdx.get_debugger)){rdx.get_debugger().destroy_view(this._view_definition)}if(rdx.utils.is_defined(rdx.app_search)){rdx.app_search.update_active_view_list(this._view_definition,true)}if(this._crossfilter&&rdx.crossfilter_controller.is_resource_crossfilter_present(this._resource.name)){rdx.crossfilter_controller.remove_crossfilter(this._resource.name)}if((this._is_toggle_view(true)===true&&this._parent.hasClass("ns_content"))||this._view_definition.type=="ONE_PAGE_WIZARD_VIEW"){rdx.page.enable_navigation(true)}rdx.active_views.remove_view(this._view_definition.name);if(rdx.utils.is_defined(this.current_focus)&&rdx.utils.is_function(this.current_focus.focus)){this.current_focus.focus()}};rdx.base_view.prototype.add_global_context=function(){var t=$(".title_tool_bar_table",rdx.page.get_content())[0];var o=$(".global_context_holder",t);if(!this._view_definition.global_context){if(rdx.page.is_slider_visible()||(rdx.utils.is_defined(this._view_definition.is_child_view)&&this._view_definition.is_child_view===true)){return true}if(o){rdx.page.set_global_context_fields(null);$(".pseudo_crumb",t).remove();o.remove()}return false}if(o.length===0){o=$("<div>").addClass("global_context_holder").appendTo(t)}else{o.empty()}var g=this._view_definition.global_context.form_fields;if(!g){return false}var d=function(E,G,D,C){var F=$(E.target).val();if(rdx.utils.is_defined(C)&&C.key=="duration"){rdx.SELECTED_DURATION=rdx.utils.populate_selected_duration(F,false)}setTimeout(function(){G._base_view.refresh_view(null,true);if(rdx.utils.is_defined(C.add_to_bread_crumb)){rdx.view_utils.add_pseudo_bread_crumb(F)}},100)};var z=[];for(var B in g){var h=g[B];var q=new rdx.form_field(h);var A=$("<label>").append($('<span class="hide">').text(h.key)).appendTo(o);var e=rdx.component_helper.get_component(h.input_type,A,q);e.render();z.push(e);var a=h.value;var s=new rdx.callback(null,d,[this._view,B,h]);if(h.key=="duration"){a=rdx.utils.populate_selected_duration(rdx.SELECTED_DURATION,true);var s=new rdx.callback(null,d,[this._view,B,h])}if(rdx.utils.is_defined(a)){e.set_data(a)}e.add_event_handler("change",s)}rdx.page.set_global_context_fields(z);if(this._view_definition.global_context.enable_run_diagnostics===true){var v=$('<button class="global_action_button run_diagnostic_div btn-icon"><span class="hide">Run Diagnostics</span></button>');v.attr({title:"Run Diagnostics","aria-label":"Run Diagnostics"}).attr("href","#").appendTo(o);v.bind(rdx.events.CLICK,{that:this},function(D){var C=D.data.that;C._view_definition.view_properties.run_diagnostics_callback.call_back();D.stopPropagation()})}if(this._view_definition.global_context.enable_show_diagnostics===true){var p=$('<button class="global_action_button show_diagnostic_div btn-icon"><span class="hide">Show Diagnostics</span></button>');p.attr({title:"Show Diagnostics","aria-label":"Show Diagnostics"}).attr("href","#").appendTo(o);p.bind(rdx.events.CLICK,{that:this},function(D){var C=D.data.that;C._view_definition.view_properties.show_diagnostics_details_in_blue_callback.call_back();D.stopPropagation()})}if(this._view_definition.global_context.enable_refresh===true){var n=function(C){var D=C.data.view;D._base_view.refresh_view(null,true)};var u=$('<button class="global_action_button refresh btn-icon"><span class="reload hide">Refresh</span></button>');u.attr({title:"Click to refresh","aria-label":"Click to refresh"}).attr("href","#").appendTo(o);u.bind(rdx.events.CLICK,{view:this._view},n)}if(this._view_definition.global_context.enable_export===true&&rdx.utils.is_defined(this._view_definition.global_context.export_type)&&this._view_definition.global_context.export_type=="client"){var m=function(D,C){rdx.view_utils.load_export_library(C,D)};var b=$('<button class="global_action_button export btn-icon"><span class="hide">Export</span></button>');b.attr({title:"Click to Export","aria-label":"Click to Export"}).attr("href","#").appendTo(o);b.bind(rdx.events.CLICK,{that:this,view:this._view,view_callback:new rdx.callback(this,m)},rdx.view_utils.show_client_export_report_panel)}else{if(this._view_definition.global_context.enable_export===true){var b=$('<button class="global_action_button export btn-icon"><span class="hide">Export</span></button>');b.attr({title:"Click to Export","aria-label":"Click to Export"}).attr("href","#").appendTo(o);b.bind(rdx.events.CLICK,{that:this},function(D){var C=D.data.that;rdx.view_utils.show_export_report_panel(null,new rdx.callback(C,C.get_view_object_for_export),true,C._view_definition.name);D.stopPropagation()})}}rdx.active_views.remove_view(this._view_definition.name);if(this._view_definition.global_context.enable_filter===true){var w=function(C){rdx.page.set_global_context_data({appname_group:"",user_name:"",domain_name:""});rdx.view_utils.add_pseudo_bread_crumb("");var D=C.data.view;D._base_view.refresh_view(null,true)};var f=$('<button class="global_action_button filter btn-icon"><span class="hide">Filter</span></button>');f.attr("title","Remove filters").attr("aria-label","Remove filters");f.appendTo(o);f.bind(rdx.events.CLICK,{view:this._view},w)}return true};rdx.base_view.prototype._make_view=function(){if(this.is_resize_required()){rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this.resize_view))}this.add_global_context();var p=$("<div>").addClass("view_top_container");var A=$("<div>").addClass("ribbon");var a=false;var q=rdx.position.TOP;this._render_title_for_view();var d=$("<div>");var f=this.get_toolbar_parent_elem();if(rdx.utils.is_defined(f)){f.empty();f.prepend(d)}else{if(rdx.utils.is_defined(this._view.is_title_required)&&this._view.is_title_required()&&rdx.utils.is_defined(this._view_desc_block)){this._view_logo_title_description_container.append(d)}}d.empty();if(this.is_tool_bar_required()&&rdx.utils.is_defined(d)){d.addClass("toolbar_buttons");this._add_toolbar(d)}else{if((rdx.utils.is_not_defined(this._view_definition.view_properties.add_back_button)||this._view_definition.view_properties.add_back_button==true)&&rdx.utils.is_function(this._view.get_is_back_button_required)&&(this._view.get_is_back_button_required()==true)&&(this._view._base_view.is_show_in_slider()==false)&&rdx.utils.is_not_defined(this._view._base_view.get_crumb_handler())&&!this._back_button_rendered){this.add_back_button_toolbar()}else{if(rdx.utils.is_defined(d)&&this._add_to_global_toolbar()){var o=rdx.utils.is_function(this._view.get_toolbar_items)?this._view.get_toolbar_items():[];if(o.length!=0){this._add_app_toolbar_item(o)}this._add_export_toolbar_item(o);if(rdx.utils.is_defined(this._view_definition.view_properties.custom_help_enabled)&&this._view_definition.view_properties.custom_help_enabled){this._add_custom_help_toolbar_item(o)}var u=this;if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties)&&this._view._view_definition.view_properties.title_properties.print_view===true){o.push(new rdx.action({tooltip:"print",image_url:rdx.images.PRINTER_IMAGE,click_handler_callback:new rdx.callback(null,rdx.view_utils.print_view_details,[u._parent])}))}d.addClass("toolbar_buttons");this.add_view_toolbar_items(d,o,this.get_top_tool_bar_properties())}}}if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.view_properties.action_bar_position)){q=this._view._view_definition.view_properties.action_bar_position}if(this._is_action_bar_required&&rdx.utils.is_function(this._view.get_action_items)&&rdx.utils.is_defined(this._view.get_action_items())){var e=this._get_buttons(rdx.position.LEFT);if(rdx.utils.is_defined(this._add_entity_select_btn)&&this._add_entity_select_btn==true){var t={label:rdx.i18n.get_string("rdx.select"),tooltip:rdx.i18n.get_string("rdx.select"),no_selection:false,single_selection:true,multiple_selection:true,button_type:rdx.BLUE_BUTTON,click_handler_callback:new rdx.callback(this,this._handle_button_click)};var C=new rdx.action(t);e.unshift(C)}var n=$.extend(true,{},this.get_action_bar_properties(e));n.align=rdx.position.LEFT;if(rdx.utils.is_defined(this._properties.action_label)){n.action_label=rdx.i18n.get_string(this._properties.action_label)}if(n.link_bar==true){p.removeClass("view_top_container").addClass("links_action_bar")}this._action_bar=new rdx.ribbon(A,e,n).render();if(e.length>0||n.link_bar==true){a=true}}var b=$("<div>").addClass("action_links_ct").appendTo(A);this._hide_default_policies=rdx.utils.get_cookie(this._show_hide_builtin_policies_from_cookie);if(rdx.utils.is_not_defined(this._hide_default_policies)){this._hide_default_policies=true}if(rdx.utils.is_defined(this._properties.show_builtin_policies)){this._hide_default_policies=!this._properties.show_builtin_policies}if(this._properties.show_hide_link==true){this._top_mid_container=$("<div>").addClass("action_links_block show_hide_link");var h=$("<a>").attr("href","#");var g="entity";if(rdx.utils.is_defined(this._resource.obj_type)){g=rdx.i18n.get_string(this._resource.obj_type)}var m=g.charAt(g.length-1);if(m=="y"){g=g.substring(0,g.length-1);g+="ies"}else{g+="s"}var v=$("<span>").text((this._hide_default_policies==false||this._hide_default_policies=="false")?"Hide built-in "+g:"Show built-in "+g);h.append(v);h.bind(rdx.events.CLICK,{base_view:this,show_hide_anchor_link_span:v,entity_name:g},function(D){if(D.data.base_view._hide_default_policies==true||D.data.base_view._hide_default_policies=="true"){rdx.utils.set_cookie(D.data.base_view._show_hide_builtin_policies_from_cookie,false);D.data.show_hide_anchor_link_span.text("Hide built-in "+D.data.entity_name);D.data.base_view._hide_default_policies=false;D.data.base_view._initialize_view()}else{rdx.utils.set_cookie(D.data.base_view._show_hide_builtin_policies_from_cookie,true);D.data.show_hide_anchor_link_span.text("Show built-in "+D.data.entity_name);D.data.base_view._hide_default_policies=true;D.data.base_view._initialize_view()}});a=true;b.append(this._top_mid_container.append(h))}var s=[];if(rdx.utils.is_function(this._view.get_action_items)&&this._is_action_bar_required){s=this._get_buttons(rdx.position.RIGHT)}if((this._properties.pagination==true&&this._properties.search==true)||s.length>0||this._show_settings){this._top_right_container=$("<div>").addClass("action_links_block");if(s.length>0){var n=$.extend(true,{},this.get_action_bar_properties(s));n.align=rdx.position.RIGHT;if(n.link_bar==true){p.removeClass("view_top_container").addClass("links_action_bar")}new rdx.ribbon(this._top_right_container,s,n).render()}a=true;b.append(this._top_right_container)}if(a==true&&q==rdx.position.TOP){p.append(A);this._view_container.append(p)}else{if(rdx.utils.is_not_defined(this._crumb_handler)){this._view_div.addClass("base_view_no_view_top_container")}}var w=this._get_buttons("title_buttons");if(w.length>0){var n=$.extend(true,{},this.get_action_bar_properties(w));if(rdx.utils.is_function(this._view.get_button_bar)){this._title_ribbon_cell=this._view.get_button_bar()}else{this._title_ribbon_cell=$("<div>").addClass("button_div");if(rdx.utils.is_defined(this._view_logo_title_description_container)){var z=$(".toolbar_buttons",this._view_logo_title_description_container);if(z.length>0){z.prepend(this._title_ribbon_cell)}else{this._view_logo_title_description_container.append(this._title_ribbon_cell)}}else{this._view_container.prepend(this._title_ribbon_cell)}}this._action_bar=new rdx.ribbon(this._title_ribbon_cell,w,n).render();if(rdx.utils.is_defined(this._custom_title_bar)){var B=this._custom_title_bar.get_navigation_div();$(B).addClass("rdx_small_width_title_bar")}}this._view.make_view();if(a==true&&q==rdx.position.BOTTOM){p.append(A);this._view_container.append(p)}else{if(rdx.utils.is_not_defined(this._crumb_handler)){this._view_div.addClass("base_view_no_view_top_container")}}if(this._show_view_in_dialog()){if(rdx.utils.is_function(this._view.show_dialog)){this._view.show_dialog()}else{this.show_dialog()}}if(rdx.utils.is_function(this._view.make_view_finalize)){this._view.make_view_finalize()}this._view_state=rdx.view_constants.view_state.CREATED;if(rdx.utils.is_function(this._view.register_event_handlers)){this._view.register_event_handlers()}if(this.is_toggle_link_present()){this._set_toggle_link()}if(rdx.utils.is_defined(this._view_definition.view_properties)&&this._view_definition.view_properties.add_button_bar===true){if(rdx.utils.is_defined(this._view_definition.dialog_properties)&&rdx.utils.is_defined(this._view_definition.dialog_properties.view_properties)){this._render_button_bar(false)}else{if(rdx.utils.is_not_defined(this.get_form())){this._render_button_bar(true)}}}if(this.is_resize_required()){this.resize_view()}else{this._view.set_height(this._view_definition.view_properties.height)}if(this._show_settings===true){this._add_settings_icon(A)}};rdx.base_view.prototype._render_title_for_view=function(){if(rdx.utils.is_function(this._view.is_title_required)&&this._view.is_title_required()&&(rdx.utils.is_not_defined(this._view_definition.view_properties.add_back_button))&&!(rdx.page.is_slider_visible())){this._view_logo_title_description_container=$("<div>").addClass("title_description_toolbar_container");var d=$("<div>");var e=$("<h2>");var a=$("<div>");var g=$("<div>");var h=false;var f="";if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.view_properties.title)){f=rdx.i18n.get_string(this._view._view_definition.view_properties.title)}if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties)&&rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties.title_renderer_callback)){var b=$("<div>").addClass("render_custom_title").appendTo(this._view_logo_title_description_container);this._view._view_definition.view_properties.title_properties.title_renderer_callback.call_back([b]);h=true}else{if(rdx.utils.is_not_empty(f)&&rdx.utils.is_defined(this._view._view_definition)&&(rdx.utils.is_not_defined(this._view._view_definition.view_properties._dont_show_title)||!this._view._view_definition.view_properties._dont_show_title)){if(!f.match(/{/)){e.addClass("page_title no_padding_page_title").text(f);this._view_logo_title_description_container.append(e);h=true}}}if(rdx.utils.is_defined(this._view._view_definition.view_properties.toggle_button)&&this._view._view_definition.view_properties.toggle_button==true&&rdx.utils.is_defined(this._view._view_definition.view_properties.toggle_button_properties)){this._toggle_component=new rdx.toggle_component(this._view_logo_title_description_container,new rdx.form_field(this._view._view_definition.view_properties.toggle_button_properties));this._toggle_component.render()}if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties)){if(rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties.title_class)){e.addClass(this._view._view_definition.view_properties.title_properties.title_class)}if(rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties.title_image_class_name)){d.addClass("page_title_logo").addClass(this._view._view_definition.view_properties.title_properties.title_image_class_name);this._view_logo_title_description_container.prepend(d);h=true}if(rdx.utils.is_defined(this._view._view_definition.view_properties.title_properties.description)){a.addClass("page_description");if(rdx.utils.is_string(this._view._view_definition.view_properties.title_properties.description)){a.text(rdx.i18n.get_string(this._view._view_definition.view_properties.title_properties.description))}else{if(rdx.utils.is_object(this._view._view_definition.view_properties.title_properties.description)){a.append(this._view._view_definition.view_properties.title_properties.description)}}this._view_logo_title_description_container.append(a);h=true}}if(h||this._is_tool_bar_required){this._parent.prepend(this._view_logo_title_description_container)}this._view_desc_block=a}};rdx.base_view.prototype.add_global_filter_to_view=function(){var d=this.get_view_definition();if(rdx.utils.is_defined(rdx.global_title_bar)){var a=true;if(d.type==rdx.view_constants.TABBED_VIEW||d.type==rdx.view_constants.COMPOSITE_VIEW){a=false}if(rdx.global_title_bar.is_global_filter_added()){if(a){if(rdx.utils.is_not_defined(this._global_filter_change_event_callback)){this._global_filter_change_event_callback=new rdx.callback(this,this._handle_global_filter_change_event,[rdx.global_title_bar.get_global_filter_options()]);rdx.global_title_bar.register_global_filter_change_event(this._global_filter_change_event_callback)}}this.set_current_global_filter_context()}else{if(rdx.utils.is_defined(d.global_filter)){rdx.global_title_bar.add_global_filter(d.global_filter,new rdx.callback(this,this._handle_global_filter_change_event,[d.global_filter]),a);this._added_global_filter=true;for(var b in d.global_filter){rdx.global_title_bar.set_current_global_filter(d.global_filter[b]);break}this.set_current_global_filter_context()}}}};rdx.base_view.prototype._render_button_bar=function(e){this._button_bar_div=$("<div>").addClass("base_view_button_bar form_buttons");var d={add_blue_button:!e,add_grey_button:true,blue_button_label:"rdx.button_insert",blue_button_tooltip:null,grey_button_label:"rdx.form_close_button_label",grey_button_tooltip:null,blue_button_click_handler_callback:new rdx.callback(this,this._handle_button_click),grey_button_click_handler_callback:new rdx.callback(this,this.destroy_view),button_bar_positon:"BOTTOM",destroy_parent_view:false};var b=this.get_form();if(rdx.utils.is_defined(b)){b.set_keyboard_handler_callback(new rdx.callback(this,this._handle_button_click))}if(rdx.APP_HELP_BASE&&rdx.utils.is_defined(this._view_definition.view_properties.help_id)){var f=$("<div>").addClass("rdx_right");rdx.help.add_help(f,this._view_definition.view_properties.help_id);this._button_bar_div.append(f)}d=$.extend(true,d,this._view_definition.dialog_properties);if(d.destroy_parent_view===true&&rdx.utils.is_defined(this.get_parent_base_view())){d.grey_button_click_handler_callback=new rdx.callback(this.get_parent_base_view(),this.get_parent_base_view().destroy_view,[null,false])}var a=$("<div>");this._button_bar=new rdx.button_bar(a,new rdx.form_field({properties:d})).render();this._button_bar_div.append(a);if(d.button_bar_positon.toUpperCase()=="TOP"){this._button_bar_div.addClass("top_positioned_button_bar");this._view_container.before(this._button_bar_div)}else{this._view_container.after(this._button_bar_div)}};rdx.base_view.prototype._handle_button_click=function(){if(!rdx.utils.is_function(this._get_view().get_data)){this.destroy_view();return}var d=this.get_form();if(rdx.utils.is_defined(d)){var q=d.validate();if(!q){return}}var n=this._view_definition.dialog_properties.view_properties;n=rdx.utils.is_not_defined(n)?{}:n;var m=rdx.utils.is_not_defined(n.submit_operation)?{}:n.submit_operation;var f=rdx.utils.is_not_defined(m.method)?rdx.model_constants.NOOP:m.method;var g=rdx.utils.is_not_defined(m.action)?null:m.action;var b=rdx.utils.is_not_defined(n.resource_context)?{refresh_action:rdx.view_constants.REFRESH_RELEVANT_OR_ADD_NEW}:n.resource_context;if(rdx.utils.is_not_defined(n.resource_name)){throw"'resource_name' argument should be passed in the dialog_properties.view_properties object of the view dfn."}var p=rdx.utils.get_resource(n.resource_name);var h={resource_defn:p,resource_context:b,resource_for_operation:{},model_method:f,action:g};var o=new rdx.configure_view_operation_params(h);var a=[];var e=new rdx.view_component_adapter_data(this);e.process_inner_view_data(o,a);if(rdx.utils.is_defined(this._view_definition.dialog_properties.data_formatter_callback)){this._view_definition.dialog_properties.data_formatter_callback.call_back([o])}var s=new rdx.callback(this,this.destroy_view);if(this._view_definition.dialog_properties.destroy_parent_view===true&&rdx.utils.is_defined(this.get_parent_base_view())){s=new rdx.callback(this.get_parent_base_view(),this.get_parent_base_view().destroy_view)}new rdx.form_controller(this).submit_standalone_view_data(o,a,s,s)};rdx.base_view.prototype._get_buttons=function(f){var e=[];if(rdx.utils.is_function(this._view.get_action_items)&&rdx.utils.is_defined(this._view.get_action_items())){for(var b=0,a=this._view.get_action_items().length;b<a;b++){var d=this._view.get_action_items()[b];if(d.get_align()==f){e.push(d)}}}return e};rdx.base_view.prototype.get_top_right_container=function(){return this._top_right_container};rdx.base_view.prototype.get_bread_crumb_processing_data=function(){return this._bread_crumb_processing_data};rdx.base_view.prototype.show_dialog=function(){if(rdx.utils.is_not_defined(this._view_definition.add_to_bread_crumb)){this._parent.dialog($.extend(true,{},this._default_dialog_properties,this._view_definition.dialog_properties))}rdx.page.get_content().attr("aria-hidden","true")};rdx.base_view.prototype._swap_properties=function(b,e,d){var a=b[e];b[e]=b[d];b[d]=a};rdx.base_view.prototype._set_toggle_link=function(){this._toggle_container=$("<span>").addClass("toggle_base_view_container");this._toggle_properties.link=rdx.i18n.get_string(this._toggle_properties.link);var a=$("<a>").attr("href","#").append(this._toggle_properties.link);this._toggle_container.append(a);a.bind(rdx.events.CLICK,{view:this,toggle_properties:this._toggle_properties},function(b){b.data.view.handle_toggle_view()});if(this._toggle_properties._is_toggled&&this._toggle_properties.details_mode){this._view_container.prepend(this._toggle_container)}else{a.css("float","right");this._view_container.append(this._toggle_container)}};rdx.base_view.prototype.handle_toggle_view=function(){if(this._toggle_properties.details_mode){if(this._toggle_properties._is_toggled){rdx.page.get_content().children("div").show()}else{rdx.page.get_content().children("div").hide()}this._toggle_properties.parent_div.show();this._toggle_properties._toggle_parent_div.hide()}this._toggle_properties.parent_div.empty();var a=$.extend(true,{},this._toggle_properties);this._swap_properties(a,"view","_toggle_view");this._swap_properties(a,"link","toggle_link");this._swap_properties(a,"view_context","_toggle_view_context");this._swap_properties(a,"parent_div","_toggle_parent_div");a._is_toggled=(!(a._is_toggled));var b=$.extend(true,{},this._toggle_properties.view);b.view_toggle_link=a;var d=new rdx.base_view(this._toggle_properties.parent_div,b);if(rdx.utils.is_defined(this._toggle_properties.view_context)){d.get_view_context().set_url_params(null,this._toggle_properties.view_context)}d.prepare_view()};rdx.base_view.prototype.get_crumb=function(){return this._crumb};rdx.base_view.prototype.is_add_global_actions=function(){return rdx.utils.is_defined(this._view_definition.global_resource_operations)};rdx.base_view.prototype._add_toolbar=function(m){var h=this.is_add_global_actions()?new rdx.callback(this,this._populate_global_actions):null;if(this._add_to_global_toolbar()){var f=rdx.utils.is_function(this._view.get_toolbar_items)?this._view.get_toolbar_items():[];this._add_help_toolbar_item(f);this._add_export_toolbar_item(f);if(rdx.utils.is_defined(this._view_definition.view_properties.custom_help_enabled)&&this._view_definition.view_properties.custom_help_enabled){this._add_custom_help_toolbar_item(f)}this._add_app_toolbar_item(f);this.add_view_toolbar_items(m,f,this.get_top_tool_bar_properties());if(rdx.utils.is_defined(h)){rdx.global_title_bar.add_custom_component(h)}}else{if(!this._tool_bar_table){this._tool_bar_table=$("<table>").append($("<tbody>")).attr("cellspacing","0")}var n=$("<tr>").appendTo(this._tool_bar_table);var b="";if(rdx.utils.is_defined(this._resource)){b=rdx.i18n.get_string(b)}var d=rdx.i18n.get_string("rdx.refresh_tooltip",{obj_type:b});var f=rdx.utils.is_function(this._view.get_toolbar_items)?this._view.get_toolbar_items():[];this._add_help_toolbar_item(f);this._add_export_toolbar_item(f);if(rdx.utils.is_defined(this._view_definition.view_properties.custom_help_enabled)&&this._view_definition.view_properties.custom_help_enabled){this._add_custom_help_toolbar_item(f)}this._add_app_toolbar_item(f);var e=this.get_top_tool_bar_properties();if(rdx.utils.is_defined(h)){var g=$(n[0].insertCell(-1));h.call_back([g])}var a=$("<td>").appendTo(n);a.addClass("top_links_container");new rdx.ribbon(a,f,e).render();m.append(this._tool_bar_table)}};rdx.base_view.prototype.get_top_tool_bar_properties=function(){return{spacing:0,align:"right",add_separator:true,add_scroller:false}};rdx.base_view.prototype.get_action_bar_properties=function(f){var e=false;var d={class_names:"ribbon ribbon_bottom",add_buttons:true,link_bar:false};if(f.length>0){d.link_bar=true;for(var b=0,a=f.length;b<a;b++){var g=f[b];if(g.get_button_type()!=rdx.LINK){d.link_bar=false;break}}}return d};rdx.base_view.prototype._add_help_toolbar_item=function(d){if(!rdx.help.show_help()){return}if(!rdx.APP_HELP_BASE||rdx.utils.is_not_defined(this._view_definition.view_properties)||rdx.utils.is_not_defined(this._view_definition.view_properties.help_id)){return}var b=false;for(var a=0;a<d.length;a++){var e=d[a].get_image_url();if(e===rdx.images.HELP_IMG){b=true}}if(!b){d.push(new rdx.action({tooltip:rdx.help.HELP_TOOLTIP,image_url:rdx.images.HELP_IMG,click_handler_callback:new rdx.callback(this,this._handle_help_click,[this._view_definition.view_properties.help_id])}))}};rdx.base_view.prototype._add_custom_help_toolbar_item=function(a){a.push(new rdx.action({tooltip:rdx.help.HELP_TOOLTIP,image_url:rdx.images.HELP_IMG,click_handler_callback:new rdx.callback(this,this._handle_custom_help_click,[this._view_definition.view_properties.help_id])}))};rdx.base_view.prototype._add_export_toolbar_item=function(d){if(!this.show_export()){return}if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.show_export)&&this._view_definition.view_properties.show_export==false){return}var a=null;var b=true;if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.export_callback)){a=this._view_definition.view_properties.export_callback;b=false}else{if(rdx.utils.is_defined(this._view.get_view_object_for_export)){a=this._view.get_view_object_for_export}else{a=this.get_view_object_for_export}}d.push(new rdx.action({tooltip:rdx.i18n.get_string("rdx.click_to_export"),image_url:rdx.images.EXPORT_IMAGE,click_handler_callback:new rdx.callback(this,rdx.view_utils.show_export_report_panel,[new rdx.callback(this,a),b,this._view_definition.d_name])}))};rdx.base_view.prototype._add_app_toolbar_item=function(a){if(rdx.utils.is_not_defined(rdx.APP_TOOL_BAR_ACTIONS)||(!rdx.utils.is_array(rdx.APP_TOOL_BAR_ACTIONS))||((rdx.utils.is_defined(this._view_definition.view_properties.add_app_tool_bar_actions)&&!this._view_definition.view_properties.add_app_tool_bar_actions))){return}$.merge(a,rdx.APP_TOOL_BAR_ACTIONS)};rdx.base_view.prototype._populate_global_actions=function(a){if(!rdx.utils.is_function(this._view.get_global_actions)){return}var d=new Array();var f=this._view.get_global_actions();if(f.length==0){return}a.addClass("global_operations_separator");for(var b=0;b<f.length;b++){d.push(f[b].get_label())}var e=false;if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.global_resource_operations_set_current)){e=this._view_definition.view_properties.global_resource_operations_set_current}new rdx.dropdown_menu(a,new rdx.form_field({formatter:{map:d},mandatory:true,properties:{set_current:e}})).render().add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._handle_global_action_click,[f]))};rdx.base_view.prototype._handle_global_action_click=function(d,f,a,g){for(var b=0;b<g.length;b++){var e=g[b];if(e.get_label()==f){e.perform_action();a.val("");return}}};rdx.base_view.prototype._handle_help_click=function(a,b){rdx.help.handle_help_click_event(b)};rdx.base_view.prototype._handle_custom_help_click=function(){if(rdx.utils.is_defined(this._view_definition.custom_help_callback)){this._view_definition.custom_help_callback.call_back()}};rdx.base_view.prototype._initialize_view=function(){if(this._resource){if(this._view_definition.auto_refresh){if(rdx.utils.is_defined(this._view_definition.auto_refresh_handler_callback)){rdx.scheduler.schedule_job(new rdx.job(this._job_id,this._view_definition.auto_refresh_handler_callback,new rdx.callback(this,this._get_resource)),true)}else{rdx.scheduler.schedule_job(new rdx.job(this._job_id,this._view_definition.auto_refresh_delay,new rdx.callback(this,this._get_resource)),true)}}else{this._get_resource()}}else{if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.standalone_mode)&&this._view_definition.view_properties.standalone_mode&&this._view_definition.response_callback){this._get_resource_response_arrived([])}else{this._view_state=rdx.view_constants.view_state.ACTIVE;if(rdx.utils.is_defined(rdx.get_debugger)){rdx.get_debugger().activate_view(this._view_definition,this._view_div)}if(rdx.utils.is_defined(rdx.app_search)){rdx.app_search.update_active_view_list(this._view_definition)}}}};rdx.base_view.prototype._get_resource=function(){var h=null;var a=this.get_view_context();var b=$.extend(true,{},a.get_properties());var o={};var f={};if(rdx.utils.is_defined(this._properties.show_hide_link_filter)){f=this._properties.show_hide_link_filter}else{f={static_filter:{isdefault:"false"}}}if(rdx.utils.is_defined(this._properties.show_hide_link)&&this._properties.show_hide_link==true){if(this._hide_default_policies==false||this._hide_default_policies=="false"){if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.static_filter)&&rdx.utils.is_object_not_empty(b.static_filter)){for(var m in b.static_filter){delete b.static_filter[m]}}if(rdx.utils.is_defined(o.custom)&&rdx.utils.is_defined(o.custom.pageno)){o.custom.pageno=1}a.set_context_data(a.get_data(),b)}else{o=$.extend(true,b,f);if(rdx.utils.is_defined(o.custom)&&rdx.utils.is_defined(o.custom.pageno)){o.custom.pageno=1}a.set_context_data(a.get_data(),o)}}if(a.is_url_params_set()){h=a.get_url_params()}else{if(rdx.utils.is_defined(this._view_definition.get_view_context_callback)){h=this._view_definition.get_view_context_callback.call_back()}}if(this._view_definition.view_context&&this._view_definition.view_context.add_resource_properties_as_attributes===true){var d=rdx.utils.object_keys(this._view_definition.resource_properties);var n=[];for(var e=0;e<d.length;e++){n.push({key:d[e]})}var g=rdx.url_utils.construct_url_params({is_query_param:true},rdx.url_utils.GET_ATTRS_TYPE,null,null,n);h=$.extend(true,h,g)}rdx.model.get_all(this._resource,h,new rdx.callback(this,this._get_resource_response_arrived),this._view_div,new rdx.callback(this,this._response_arrived))};rdx.base_view.prototype._add_to_global_toolbar=function(){return(rdx.utils.is_defined(rdx.global_title_bar)&&this._view_definition.add_to_bread_crumb&&!this._disable_bread_crumb)};rdx.base_view.prototype._get_resource_response_arrived=function(b){if(!rdx.view_utils.is_view_created(this)){return}var h=[];if(rdx.utils.is_defined(this._resource)){if(rdx.utils.is_defined(b[this._resource.name])){if(rdx.utils.is_array(b[this._resource.name])){h=b[this._resource.name]}else{if(rdx.utils.is_not_empty(b[this._resource.name])){h=[b[this._resource.name]]}}}else{if(rdx.utils.is_pure_rest_api(this._resource)){h.push(b)}}this.get_view_context().set_data(h)}this._view_state=rdx.view_constants.view_state.INITIALIZED;var g=rdx.utils.is_not_empty(this._view_definition.view_properties.title)?this._view_definition.view_properties.title:rdx.view_utils.get_title(this);if((rdx.i18n.get_string(g)).indexOf("{")!=-1){if(rdx.utils.is_defined(this._custom_title_bar)){this._custom_title_bar.add_title(rdx.i18n.get_string(g,(h.length>0?h[0]:{})))}else{var f=$("<div>");f.addClass("page_title no_padding_page_title").text(rdx.i18n.get_string(g,(h.length>0?h[0]:{})));if(rdx.utils.is_defined(this._view_logo_title_description_container)){this._view_logo_title_description_container.prepend(f)}}}if(rdx.utils.is_defined(this._bread_crumb_title)&&rdx.i18n.get_string(this._bread_crumb_title).match(/{/)){rdx.global_title_bar.update_crumb_title(rdx.i18n.get_string(this._bread_crumb_title,(h.length>0?h[0]:{})))}if(this._description_div!=null){this._description_div.empty();this._description_div.append(rdx.i18n.get_string(this._view_definition.view_properties.description,(h.length>0?h[0]:{})))}if(this._view_definition.response_callback){var d=this;var a={return_call_back:new rdx.callback(function(m,n){if(!d._crossfilter){if(rdx.utils.is_defined(n)){d._view_context.set_app_context_data(n)}else{d._view_context.set_app_context_data(m)}}if(rdx.utils.is_function(d._view.get_resource_response_arrived)){d._view.get_resource_response_arrived(m)}d._response_arrived()}),response:h,inherited_data:rdx.utils.is_defined(d.get_inherited_data_callback())?d.get_inherited_data_callback().call_back():null,inherited_init_data:d._inherited_init_data,app_context_data:d._view_context.get_app_context_data(),unformatted_response:b,view_context:d.get_view_context()};if(d._view_definition.type=="DETAIL_VIEW"&&rdx.utils.is_defined(d._view._pagination)){a.pagination={page_size:d._view._pagination.get_page_size(),page_number:d._view._pagination.get_page_number()}}var e=new rdx.view_callback_on_response_arrived_params(a);this._view_definition.response_callback.call_back([e])}else{if(rdx.utils.is_object_empty(h)&&!rdx.utils.is_array(h)){return}if(rdx.utils.is_function(this._view.get_resource_response_arrived)){this._view.get_resource_response_arrived(h);if(rdx.utils.is_not_defined(this._view_context.get_app_context_data())){this._view_context.set_app_context_data(h)}}this._response_arrived()}};rdx.base_view.prototype.show_notification_bar=function(b,e){var a=rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.submit_operation)&&rdx.utils.is_defined(this._view_definition.view_properties.submit_operation.method)?this._view_definition.view_properties.submit_operation.method:"add";var g=(rdx.utils.is_defined(this._view_definition.view_properties.notification_status)&&rdx.utils.is_defined(this._view_definition.view_properties.notification_status.formatter))?this._view_definition.view_properties.notification_status.formatter:null;var f=(rdx.utils.is_defined(rdx.i18n.get_string(this._view_definition.view_properties.notification_status))&&rdx.utils.is_defined(rdx.i18n.get_string(this._view_definition.view_properties.notification_status.message)))?rdx.i18n.get_string(this._view_definition.view_properties.notification_status.message):rdx.utils.get_status({},rdx.utils.get_resource(this._view_definition.resource_name),a,b);if(rdx.utils.is_defined(rdx.i18n.get_string(this._view_definition.view_properties.notification_status))&&rdx.utils.is_defined(this._view_definition.view_properties.notification_status.message_renderer_callback)){f=this._view_definition.view_properties.notification_status.message_renderer_callback.call_back([this._view_definition.view_properties.notification_status.message,b])}else{if(rdx.utils.is_defined(g)&&rdx.utils.is_defined(g.resource_keys)){g.format=f;var d=new rdx.formatter(g);f=d.get_formatted_message(b)}}rdx.page.show_notification(f,e)};rdx.base_view.prototype._response_arrived=function(d){this.unmask();if(rdx.utils.is_not_defined(this._resource)){return}if(d){var b=rdx.i18n.get_string("rdx.view_base_error",{obj_type:rdx.i18n.get_string(this._resource.obj_type),error:rdx.utils.get_detailed_error_message(d)});var a=this;rdx.message_box.error(b,new rdx.callback(this,function(){if(a._view_definition.auto_refresh){rdx.scheduler.job_completed(a._job_id)}}));rdx.status_bar.update_status(b,rdx.ERROR)}else{if(this._view_definition.auto_refresh){rdx.scheduler.job_completed(this._job_id)}}if(!rdx.utils.is_function(this._view.get_resource_response_arrived)){this._view_state=rdx.view_constants.view_state.ACTIVE;if(rdx.utils.is_defined(rdx.get_debugger)){rdx.get_debugger().activate_view(this._view_definition,this._view_div)}if(rdx.utils.is_defined(rdx.app_search)){rdx.app_search.update_active_view_list(this._view_definition)}}if(this._view_state==rdx.view_constants.view_state.ACTIVE){this.get_view_context().set_initial_data()}this.get_view_container().trigger(rdx.events.VIEW_PREPARATION_COMPLETED);if(rdx.utils.is_instrumentation_enabled()){var e=rdx.utils.get_view_title();$("button").each(function(){if(rdx.utils.is_function($(this).text)){inner_text=$.trim($(this).text())}$(this).attr("id",e+"-btn-"+inner_text.replace(/\ /g,"_"))})}};rdx.base_view.prototype._get_view=function(){var e=null,g;switch(this._view_definition.type){case rdx.view_constants.HEADER_VIEW:e=new rdx.header_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.ACCORDION_LIST_VIEW:e=new rdx.ext.analytics.accordion_list_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.ACCORDION_VIEW:e=new rdx.accordion_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.CLOUDNET_HEADER_VIEW:e=new rdx.cloudnet_header_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.INFO_VIEW:e=new rdx.info_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.DETAIL_VIEW:e=new rdx.list_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.SUMMARY_DETAIL_VIEW:e=new rdx.summary_detail_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.SUMMARY_VIEW:e=new rdx.summary_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.NAVIGATION_STEPS_VIEW:e=new rdx.navigation_steps_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.CHART_VIEW:e=new rdx.chart_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.DISTRIBUTION_INFO_VIEW:e=new rdx.distribution_info_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.CONFIGURE_VIEW:e=new rdx.configure_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.OVERVIEW_VIEW:e=new rdx.overview_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.TABBED_VIEW:e=new rdx.tabbed_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.URL_VIEW:e=new rdx.url_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.THREE_PANE_DASHBOARD:e=new rdx.three_pane_dashboard(this._view_container,this._view_definition,this);break;case rdx.view_constants.RESPONSIVE_COMPOSITE_VIEW:e=new rdx.responsive_composite_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.RESPONSIVE_TABLE_VIEW:e=new rdx.responsive_table(this._view_container,this._view_definition,this);break;case rdx.view_constants.COMPOSITE_VIEW:e=new rdx.composite_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.CAROUSEL_VIEW:e=new rdx.carousel_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.SYSLOG_VIEW:e=new rdx.syslog_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.SYSTEMLOG_VIEW:e=new rdx.systemlog_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.SEARCH_FILTER_DETAILS_VIEW:e=new rdx.search_filter_details_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.WIZARD_VIEW:e=new rdx.wizard_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.ONE_PAGE_WIZARD_VIEW:e=new rdx.op_wizard_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.ONE_PAGE_WIZARD_PAGE_VIEW:e=new rdx.op_wizard_page(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.DASHBOARD_VIEW:e=new rdx.dashboard_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.GETTING_STARTED_VIEW:e=new rdx.getting_started_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.APPS_VIEW:e=new rdx.apps_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.VISUALIZER_VIEW:e=new rdx.visualizer_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.AUTHENTICATION_VISUALIZER_VIEW:e=new rdx.authentication_visualizer_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.NETWORK_VISUALIZER_VIEW:e=new rdx.network_visualizer_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.RESOURCE_VISUALIZER_VIEW:e=new rdx.resource_visualizer(this._view_container,this._view_definition,this);break;case rdx.view_constants.APP_FW_VISUALIZER:e=new rdx.app_fw_visualizer_view(this._view_container,this._view_definition,this);break;case rdx.view_constants.ENTITY_VISUALIZER_VIEW:e=new rdx.entity_visualizer_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.FEATURE_WELCOME_VIEW:e=new rdx.feature_welcome_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.GEO_MAP_VIEW:e=new rdx.geo_map_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.GEO_MAP_VIEW_NEW:e=new rdx.geo_map_view_new(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.GEO_VECTOR_MAP_VIEW:e=new rdx.geo_vector_map_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.APPS_VIEW:e=new rdx.apps_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.LINKS_VIEW:e=new rdx.links_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.DOWNLOADS_VIEW:e=new rdx.downloads_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.TOPOLOGY_DIAGRAM_VIEW:e=new rdx.topology_diagram_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.CONFIGURATION_DIFF_VIEW:e=new rdx.configuration_diff_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.ANALYTICS_DASHBOARD_VIEW:e=new rdx.analytics_dashboard_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.SUMMARY_CHART_DETAIL_VIEW:e=new rdx.summary_chart_detail_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.TABULAR_PAGE_VIEW:e=new rdx.tabular_page_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.OFFLINE_VISUALIZER_VIEW:e=new rdx.offline_visualizer_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.VISUALIZER:e=new rdx.visualizer(this._view_container,this._view_definition,this);break;case rdx.view_constants.ADVANCE_CHART_VIEW:e=new rdx.advance_chart_view(this._view_container,this._view_definition,this._resource,this);break;case rdx.view_constants.CUSTOM_VIEW:var d="this._view_container, this._view_definition, this._resource, this";var f=this._view_definition.view_class_name.split(".");var a=window;for(var b=0;b<f.length;b++){if(rdx.utils.is_defined(a[f[b]])){a=a[f[b]]}}e=new a(this._view_container,this._view_definition,this._resource,this);break;default:throw"Invalid view definition found"}var g=rdx.i18n.get_string(this._view_definition.view_properties.title)||"Others";if(rdx.utils.is_instrumentation_enabled()&&typeof _caq!=="undefined"){_caq("setPage",g)}return e};rdx.base_view.prototype.get_view=function(){return this._view};rdx.base_view.prototype.get_item_info=function(){if(rdx.utils.is_function(this.get_view().get_item_info)){return this.get_view().get_item_info()}else{return{action_item_data:[],total_item_count:null}}};rdx.base_view.prototype.get_action_items=function(){if(rdx.utils.is_function(this.get_view().get_action_items)){return this.get_view().get_action_items()}return[]};rdx.base_view.prototype.get_action_bar_height=function(){return rdx.utils.is_defined(this._action_bar)?this._action_bar.get_height():0};rdx.base_view.prototype.is_tool_bar_required=function(){return this._is_tool_bar_required==true};rdx.base_view.prototype.is_toggle_link_present=function(){return rdx.utils.is_defined(this._toggle_properties.view)};rdx.base_view.prototype.get_toggle_link_height=function(){if(this.is_toggle_link_present()&&rdx.utils.is_defined(this._toggle_container)){return this._toggle_container.outerHeight(true)}return 0};rdx.base_view.prototype.get_toolbar_height=function(){if(this._add_to_global_toolbar()){return rdx.global_title_bar.height()+rdx.view_constants.VIEW_TOOLBAR_PADDING}else{if(rdx.utils.is_defined(this._tool_bar_table)){return this._tool_bar_table.outerHeight(true)+rdx.view_constants.VIEW_TOOLBAR_PADDING}else{return 0}}};rdx.base_view.prototype.get_toolbar=function(){return this._tool_bar_table};rdx.base_view.prototype.is_resize_required=function(){return this._is_resize_required==true};rdx.base_view.prototype.remove_decorator=function(){if(this.is_tool_bar_required()){return}this._view_div.removeClass("view_div_decorator")};rdx.base_view.prototype.refresh_action_bar_state=function(a){if(rdx.utils.is_defined(this._action_bar)){this._action_bar.refresh_state(a)}if(rdx.utils.is_defined(this._button_bar)){this._button_bar.refresh_state(a)}};rdx.base_view.prototype.get_resource=function(){return this._resource};rdx.base_view.prototype.get_view_state=function(){return this._view_state};rdx.base_view.prototype.set_view_state=function(a){this._view_state=a;if(rdx.utils.is_defined(rdx.get_debugger)){if(this._view_state==rdx.view_constants.view_state.ACTIVE){rdx.get_debugger().activate_view(this._view_definition,this._view_div)}else{if(this._view_state==rdx.view_constants.view_state.DESTROYED){rdx.get_debugger().destroy_view(this._view_definition)}}}if(rdx.utils.is_defined(rdx.app_search)){if(this._view_state==rdx.view_constants.view_state.ACTIVE){rdx.app_search.update_active_view_list(this._view_definition)}else{if(this._view_state==rdx.view_constants.view_state.DESTROYED){rdx.app_search.update_active_view_list(this._view_definition,true)}}}if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode&&this._view_state>=rdx.view_constants.view_state.ACTIVE){if(this._is_view_in_slider){setTimeout(function(){rdx_ut_executor_deferred.view_is_active_in_slider(rdx_ut_executor_deferred)},rdx_ut_executor_deferred.timeout)}else{setTimeout(function(){rdx_ut_executor_deferred.view_is_active(rdx_ut_executor_deferred)},rdx_ut_executor_deferred.timeout)}}};rdx.base_view.prototype.set_add_entity_select_btn=function(a){this._add_entity_select_btn=a};rdx.base_view.prototype.set_crumb_handler=function(a){this._crumb_handler=a;if(rdx.utils.is_not_defined(this._properties.is_tool_bar_required)){this._is_tool_bar_required=false}};rdx.base_view.prototype.get_crumb_handler=function(){return this._crumb_handler};rdx.base_view.prototype.get_event_obj=function(){return this._event_obj};rdx.base_view.prototype.get_settings=function(){return this._settings};rdx.base_view.prototype.get_settings_key=function(){return this._settings_key};rdx.base_view.prototype._get_stored_settings=function(){if(rdx.utils.is_defined(rdx.settings_object)){var a=rdx.settings_object[this._settings_key];if(rdx.utils.is_defined(a)){try{this._settings=JSON.parse(rdx.utils.html_decode(a))}catch(b){}}}};rdx.base_view.prototype._add_settings_icon=function(d){var e=this.get_top_right_container();if(rdx.utils.is_defined(e)){var b=$("<div>").addClass("settings_container").appendTo(e);if(this.no_left_and_right_buttons()==true){b.addClass("small_settings_container")}var a=$("<span>").addClass("settings_span").attr("tabindex",0);a.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{view:this._view,settings_span:a},function(h){if(rdx.utils.is_defined(h.data.view)&&rdx.utils.is_defined(h.data.settings_span)){if(rdx.utils.is_defined(h.keyCode)&&h.keyCode!==13){return}else{var g=h.data.view;var f=h.data.settings_span;if(!f.hasClass("settings_active_span")){f.addClass("settings_active_span")}f.closest(".settings_container").addClass("expanded");if(rdx.utils.is_defined(g.show_settings_pane)&&rdx.utils.is_function(g.show_settings_pane)){g.show_settings_pane(f)}}}});b.append(a)}};rdx.base_view.prototype.show_action_in_slider=function(a){this._show_in_slider=a};rdx.base_view.prototype.is_show_in_slider=function(){return this._show_in_slider};rdx.base_view.prototype.set_render_mode=function(a){this._render_mode=a};rdx.base_view.prototype.set_inherited_data_callback=function(a){this._inherited_data_callback=a};rdx.base_view.prototype.get_inherited_data_callback=function(){return this._inherited_data_callback};rdx.base_view.prototype.set_inherited_init_data=function(a){this._inherited_init_data=a};rdx.base_view.prototype.get_inherited_init_data=function(){return this._inherited_init_data};rdx.base_view.prototype.add_back_button_toolbar=function(){var e=$("<div>").addClass("back_button_title_bar");var f=(this._view instanceof rdx.op_wizard_view||this._view instanceof rdx.op_wizard_page);this._view_container.prepend(e);var d=false;if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.help_id)&&!(f)){d=true}this._custom_title_bar=new rdx.title_bar(e,this._view._parent,{add_help_id:d,add_back_button:true,add_title:true});var a=[];this._add_help_toolbar_item(a);if(d==true){this._custom_title_bar.add_toolbar_items(a,this.get_top_tool_bar_properties(false))}var h={spacing:0,align:"right",add_separator:false,add_scroller:false,class_names:"ribbon ribbon_back_button"};this._custom_title_bar.add_back_button_toolbar(this._add_back_button_toolbar(),h);var g=rdx.utils.is_not_empty(this._view_definition.view_properties.title)?this._view_definition.view_properties.title:rdx.view_utils.get_title(this);var b=rdx.utils.is_defined(this._view_definition.view_properties.title_image)?this._view_definition.view_properties.title_image:null;if(g.indexOf("{")==-1){this._custom_title_bar.add_title(rdx.i18n.get_string(g),b)}};rdx.base_view.prototype._add_back_button_toolbar=function(){return[new rdx.action({tooltip:"rdx.back",click_handler_callback:new rdx.callback(this._view,this._view.close_view,[false])})]};rdx.base_view.prototype.show_export=function(){if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.export_enabled)){return this._view_definition.view_properties.export_enabled}else{return rdx.EXPORT_ENABLED}};rdx.base_view.prototype.get_view_object_for_export=function(h){var g=rdx.i18n.get_string("rdx.view_details");if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.title)){g=rdx.i18n.get_string(this._view._view_definition.title)}else{if(rdx.utils.is_defined(this._view._view_definition)&&rdx.utils.is_defined(this._view._view_definition.view_properties.title)){g=rdx.i18n.get_string(this._view._view_definition.view_properties.title)}}var a={};if(h==="csv"){if(rdx.utils.is_defined(this._view._view_definition.export_csv_callback)){a=this._view._view_definition.export_csv_callback()}else{a[g]={resource_name:this._view_definition.resource_name};if(rdx.utils.is_function(this._view.get_export_context_for_csv)){this._view.get_export_context_for_csv(a)}else{var e=this.get_export_context_for_csv(true);e.attrs=rdx.url_utils.populate_attrs_from_resource_defn(this._view_definition);$.extend(a[g],e)}}}else{if(rdx.utils.is_defined(this._view._view_definition.export_callback)){a=this._view._view_definition.export_callback()}else{var e={};var d=null;if(this._view_definition.type===rdx.view_constants.TABBED_VIEW){d=this._view._current_view._view_definition.name;var b=this._view._current_view;e.url_params=b.get_view_context().get_url_params();g=g+" - "+rdx.i18n.get_string(this._view._current_view._properties.title)}else{d=this._view_definition.name;e.url_params=this.get_view_context().get_url_params();if(this._view_definition.export_app_context){var f=this.get_view_context().get_app_context_data();e.app_context_data=rdx.view_utils.get_export_app_context(this._view_definition.export_app_context,f)}}a.view_title=g;a[rdx.view_constants.VIEW_EXPORT.VIEW_GET_URL]={};a[rdx.view_constants.VIEW_EXPORT.VIEW_GET_URL][d]=e}}a.browser_timezone_offset=new Date().getTimezoneOffset()*60;return a};rdx.base_view.prototype._handle_global_filter_change_event=function(f,g,b,e){var a={};for(var d in e){if(e[d]["label"]==g){a=e[d];rdx.global_title_bar.set_current_global_filter(a)}}this.refresh_view(a)};rdx.base_view.prototype.set_current_global_filter_context=function(){var a=rdx.global_title_bar.get_current_global_filter();if(rdx.utils.is_defined(a)){var b=a.view_context;if(rdx.utils.is_defined(a)){rdx.utils.merge_and_set_url_params(this,b)}}};rdx.base_view.prototype.get_export_context_for_csv=function(b){if(rdx.utils.is_defined(b)&&b===true){var a={};if(this._view_definition.type===rdx.view_constants.TABBED_VIEW){a=this._view._current_view.get_view_context().get_url_params();a=rdx.url_utils.stringify_url_params_json(a);a.resource_name=this._view._current_view._resource.name;return a}else{a=this._view_context.get_url_params();return rdx.url_utils.stringify_url_params_json(a)}}else{return rdx.url_utils.get_url(this._resource.get_url,this._view_context.get_url_params())}};rdx.base_view.prototype.add_view_toolbar_items=function(b,a,d){new rdx.ribbon($(b),a,d).render()};rdx.base_view.prototype.set_toolbar_parent_elem=function(a){this._toolbar_parent=a};rdx.base_view.prototype.get_toolbar_parent_elem=function(){return this._toolbar_parent};rdx.base_view.prototype.set_parent_base_view=function(a){this._parent_base_view=a};rdx.base_view.prototype.get_parent_base_view=function(){return this._parent_base_view};rdx.base_view.prototype._render_heading=function(){return((this._get_buttons("title_buttons").length>0)||(rdx.utils.is_defined(this._view_definition.view_properties,this._view_definition.view_properties.heading))||(rdx.utils.is_defined(this._view_definition.view_properties,this._view_definition.view_properties.description)))};rdx.base_view.prototype.no_left_and_right_buttons=function(){return((this._get_buttons(rdx.position.LEFT).length==0)&&(this._get_buttons(rdx.position.RIGHT).length==0))};rdx.base_view.prototype.get_data_from_crossfilter=function(){var b=this._properties.crossfilter;var a=null;a=rdx.crossfilter_controller.get_data_by_properties(this._resource.name,b);return a};rdx.base_view.prototype.is_crossfilter_view=function(){return this._crossfilter};rdx.abstract_view=function(){};rdx.abstract_view.prototype.get_base_view=function(){return null};rdx.abstract_view.prototype.get_data=function(){return null};rdx.abstract_view.prototype.make_view=function(){return null};rdx.abstract_view.prototype.get_view_context=function(){return null};rdx.abstract_view.prototype.destroy_view=function(){return null};rdx.abstract_view.prototype.resize_view=function(){return null};rdx.abstract_view.prototype.get_resource_response_arrived=function(){return null};rdx.header_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._MAX_NO_OF_CHARS_IN_WELCOME_TEXT=50;this._logout_url=null;this._brand_key=null;this._platform_key=null;this._platform_name=null;this._host_key=null;this._host_name=null;this._build_key=null;this._build_version=null;this._user_name_key=null;this._user_name_value=null;this._application_key=null;this._ip_address_key=null;this._application_names={};this._global_options_key=null;this._global_options_default_value_key=null;this._menu_table=null;this._info_table=null;this._ns_logo_tr=null;this._on_mouse_hover=false;this._system_drop_down={options:[],selected_option:""};this._system_drop_down_change_callback=null;this._build_info_renderer=null;this._host_item_label=null;this._info_link_array={};this._menu_div_container=null;this._status_key=null;this._server_time_renderer=null;this._version_key=null;this._system_upgarde_notifier=null;this._skip_to_content_id="ns_content"};rdx.header_view.prototype.make_view=function(){this._base_view.remove_decorator();var a=this._view_definition.view_properties.stand_alone;if(!a){this._brand_key=this._view_definition.view_properties.brand_key;this._build_key=this._view_definition.view_properties.build_key;this._user_name_key=this._view_definition.view_properties.user_name_key;this._host_key=this._view_definition.view_properties.host_key;this._ip_address_key=this._view_definition.view_properties.ip_address_key;this._logout_url=this._view_definition.view_properties.logout_url;this._platform_key=this._view_definition.view_properties.platform_key;this._application_key=this._view_definition.view_properties.application_key;this._system_drop_down_change_callback=this._view_definition.view_properties.system_drop_down_change_callback;this._build_info_renderer=this._view_definition.view_properties.build_info_renderer;this._global_options_key=this._view_definition.view_properties.global_options_key;this._global_options_default_value_key=this._view_definition.view_properties.global_options_default_value_key;this._status_key=this._view_definition.view_properties.status_key;this._server_time_renderer=this._view_definition.view_properties.server_time_renderer;this._version_key=this._view_definition.view_properties.version_key;this._system_upgarde_notifier=this._view_definition.view_properties.system_upgarde_notifier;this._skip_to_content_id=this._view_definition.view_properties.skip_to_content_id||this._skip_to_content_id}this._info_table=$("<div>").addClass("full_width_table ns_banner_table rdx_page_center_align header_info");var h=$("<div>").appendTo(this._info_table).addClass("info_cell_left");var d=$("<div>").appendTo(this._info_table).addClass("info_cell_right");if(!a||rdx.utils.is_defined(this._view_definition.view_properties.brand_value)){this._ns_logo_tr=$("<div>");var s=$("<div>").addClass("ns_logo");var m=$("<a>").attr("href",rdx.BRAND_LOGO_LINK).attr("target","PRODUCT_LINK");var u=$("<h1>").addClass("ns_logo_version ns_company_logo");u.append($("<span>").addClass("org-name").text(rdx.i18n.get_string("rdx.company_name")));this._platform_name=$("<span>").appendTo(u).addClass("platform_name");if(rdx.utils.is_defined(this._view_definition.view_properties.brand_value)){this._platform_name.append(this._view_definition.view_properties.brand_value)}m.append(u);this._ns_logo_tr.append(s.append(m));h.append(this._ns_logo_tr);rdx.page._ns_logo_tr=this._ns_logo_tr}var q=$(document.createElement("div")).addClass("header_info_right");var b=$(document.createElement("ul"));if(rdx.utils.is_defined(rdx.app_search)){var t=$("<li>").addClass("header_view_menu_settings_link_app_search header_view_menu_settings_link");var p;var g=$("<a>").bind(rdx.events.CLICK,function(w){rdx.app_search.show_search_toolbar(w)});$(g).addClass("app_search_button_in_header_hide");t.append(g);b.append(t)}if(!a){this._status_container_ul=$("<li>").addClass("header_info_container");b.append(this._status_container_ul);this._system_dropdown_ul=$("<li>").addClass("header_info_container");b.append(this._system_dropdown_ul);var v=null;if(rdx.utils.is_defined(this._server_time_renderer)){var f=$("<li>").appendTo(b);this._time_div=$("<div>").addClass("rdx_header server_time").appendTo(f)}user_info_container=$("<li>").addClass("rdx_header_user_info_container").append(this._build_user_info_dropdown_menu());b.append(user_info_container)}q.append(b);d.append(q);var e=$("<div>").addClass("header_parent_div").appendTo(this._parent);var o=$("<a>").attr("href","#ns_content").attr("aria-label","Skip Navigation").addClass("skip_navigation").text("Skip Navigation");o.attr("href","#"+this._skip_to_content_id);var n=$("<div>").addClass("ns_header ns_header_view_panel").append(o).append(this._info_table);if(rdx.utils.is_not_defined(a)||a===false){this._menu_table=$("<div>").addClass("header_menu rdx_page_center_align");this._create_menu_table();this._menu_div_container=$("<div>").addClass("header_menu_center");if(this._view_definition.info_links||this._view_definition.app_links){n=n.append(this._menu_div_container.append(this._menu_table))}}e.append(n);this._parent.append(e);rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this._resize))};rdx.header_view.prototype._handle_show_hide_container=function(b){if(rdx.utils.is_defined(b.keyCode)&&b.keyCode!==27){return}else{var a=b.data.container;rdx.utils.slide_up_down(a,true,new rdx.callback(function(d){var e=d.data.main_cont;if(rdx.utils.is_defined(e)){e.addClass("rdx_header_info_container")}},[b]),400);a.removeClass("rdx_header_dropdown_collapsed");$(window).unbind(rdx.events.CLICK+" "+rdx.events.KEYUP,this._handle_show_hide_container)}};rdx.header_view.prototype._build_user_info_dropdown_menu=function(){var b=$("<div>").addClass("rdx_header dropdown_container");this._user_name_value=$('<a href="#">').appendTo(b);var a=$("<div>").addClass("rdx_header_dropdown_options_container");var e=$("<a>").addClass("header_info_item_value rdx_header_info_logout_label").attr("href","#").text("Logout");e.bind(rdx.events.CLICK,{ns_view_properties:this._view_definition.view_properties,logout_url:this._logout_url},function(o){var n=o.data.ns_view_properties;if(rdx.utils.is_defined(n.logout_callback)){n.logout_callback.call_back()}if(rdx.utils.is_defined(o.data.logout_url)){window.location=o.data.logout_url}else{rdx.utils.do_logout(false)}});a.append(e);var h=true;if(this._version_key||this._host_key||this._ip_address_key||this._build_key||this._system_upgarde_notifier){var g=$("<div>").addClass("header_more_info");h=false;if(this._version_key){var d=$("<div>").addClass("header_info_item_label").append(rdx.i18n.get_string("Version"));this._build_version_key=$("<div>").addClass("header_info_item_value");g.append(d).append(this._build_version_key)}if(this._host_key){this._host_item_label=$("<div>").addClass("header_info_item_label");this._host_name=$("<div>").addClass("header_info_item_value");g.append(this._host_item_label).append(this._host_name)}if(this._ip_address_key){this._ip_address_item_label=$("<div>").addClass("header_info_item_label");this._ip_address_name=$("<div>").addClass("header_info_item_value");g.append(this._ip_address_item_label).append(this._ip_address_name)}if(this._build_key){var m=$("<div>").addClass("header_info_item_label").append(rdx.i18n.get_string("Release"));this._build_version=$("<div>").addClass("header_info_item_value");g.append(m).append(this._build_version)}if(this._system_upgarde_notifier){var f=$("<a>").addClass("header_info_item_label header_info_system_update_label").attr("href","#").text("Check for updates");g.append(f);if(rdx.utils.is_defined(this._system_upgarde_notifier.system_upgarde_notifier_callback)){f.bind(rdx.events.CLICK,{header_view:this,system_upgarde_notifier_callback:this._system_upgarde_notifier.system_upgarde_notifier_callback},function(n){n.data.system_upgarde_notifier_callback.call_back()})}}a.append(g)}if(h){e.addClass("last_item")}b.append(a);b.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{container:a,main_cont:b,header_view:this},function(o){var n=o.data.container;n.css("min-width",o.data.main_cont.outerWidth(true));if(!n.hasClass("rdx_header_dropdown_collapsed")){if(rdx.utils.is_defined(o.keyCode)&&o.keyCode!==13){return}else{rdx.utils.slide_up_down(n,false,null,400);n.addClass("rdx_header_dropdown_collapsed");$(window).bind(rdx.events.CLICK+" "+rdx.events.KEYUP,{container:a},o.data.header_view._handle_show_hide_container)}}else{if(rdx.utils.is_defined(o.keyCode)&&o.keyCode!==27){return}else{rdx.utils.slide_up_down(n,true,null,400);n.removeClass("rdx_header_dropdown_collapsed");$(window).unbind(rdx.events.CLICK+" "+rdx.events.KEYUP,o.data.header_view._handle_show_hide_container)}}o.stopPropagation()});a.hide();this._dropdown_container=b;return b};rdx.header_view.prototype._create_global_options=function(){if(this._system_drop_down.options.length===0){this._system_dropdown_ul.empty();return}var g=(this._system_drop_down.selected_option==="")?this._system_drop_down.options[0]:this._system_drop_down.selected_option;this._system_dropdown_ul.empty();var o=$("<span>").addClass("header_info_item_label_status").append(g).css("color","#D3D3D3");var n=$("<a>").addClass("header_info_item_value").attr("href","#").text("Partition");var b=$("<div>").addClass("rdx_header_dropdown_container_composite rdx_header_info_container");var m=$("<div>");var q=$("<div>").append(n);var f=$("<div>").append(o);m.append(q).append(f);b.append(m);var p=$("<div>").addClass("rdx_header_dropdown_options_container");var h=$("<div>").addClass("global_more_info").appendTo(p);for(var e=0,d=this._system_drop_down.options.length;e<d;e++){var a=$("<a>").addClass("header_info_item_label").attr("href","#");a.append(this._system_drop_down.options[e]);h.append(a);a.bind(rdx.events.CLICK,{header_view:this,selected_option_label:o,selected_item:this._system_drop_down.options[e]},function(t){var s=t.data.selected_option_label.text();t.data.header_view._change_application(t,t.data.selected_item,s,t.data.header_view._system_drop_down_change_callback)})}b.append(p);this._system_dropdown_ul.append(b);b.bind(rdx.events.CLICK,{container:p,main_cont:b,header_view:this},function(t){var s=t.data.container;var u=t.data.main_cont;s.css("min-width",t.data.main_cont.outerWidth(true));if(!s.hasClass("rdx_header_dropdown_collapsed")){rdx.utils.slide_up_down(s,false,null,400);s.addClass("rdx_header_dropdown_collapsed");u.removeClass("rdx_header_info_container");$(window).bind(rdx.events.CLICK,{container:p},t.data.header_view._handle_show_hide_container)}else{rdx.utils.slide_up_down(s,true,new rdx.callback(function(v){if(rdx.utils.is_defined(v)){v.addClass("rdx_header_info_container")}},[u]),400);s.removeClass("rdx_header_dropdown_collapsed");$(window).unbind(rdx.events.CLICK,t.data.header_view._handle_show_hide_container)}t.stopPropagation()});p.hide()};rdx.header_view.prototype._create_menu_table=function(){var g=this._menu_table;var v=location.pathname;if(rdx.utils.is_array(this._view_definition.applications)&&this._view_definition.applications.length>0){var u=this._view_definition.applications[0];var d=$(document.createElement("div"));for(var f=0;f<this._view_definition.applications.length;f++){var o=this._view_definition.applications[f];var P=rdx.i18n.get_string(o.name);this._application_names[P]=o;var M=$.merge([],o.app_links);M=$.merge(M,o.info_links);for(var D=0,O=M.length;D<O;D++){if(M[D].url==v){u=o;break}}}this._view_definition.app_links=u.app_links;this._view_definition.info_links=u.info_links;var E=rdx.utils.object_keys(this._application_names);var B=new rdx.form_field({key:"dummy_formfield_key",formatter:{map:E},mandatory:true,properties:{set_current:true,change_handler_callback:new rdx.callback(this,this._change_application)}});var I=new rdx.dropdown_menu(d,B).render();I.set_data(rdx.i18n.get_string(u.name));var A=$(document.createElement("table")).addClass("applications_table full_width_table").attr("cellPadding",0).attr("cellSpacing",0);if(!A.html().match(/<tbody>/i)){A.append(document.createElement("tbody"))}var w=$(A[0].tBodies[0].insertRow(-1));var z=$(w[0].insertCell(-1)).addClass("applications_menu");var b=$("<td>").append(d);this._ns_logo_tr.append(b);g.append(A);g=z}var L=$("<ul>").addClass("left_menu");var F=$("<ul>").addClass("right_menu");if(this._view_definition.app_links){for(var D=0,O=this._view_definition.app_links.length;D<O;D++){var m=$("<li>");var n=$("<a>").attr("href",this._view_definition.app_links[D].url).text(rdx.i18n.get_string(this._view_definition.app_links[D].title));if(rdx.utils.is_defined(this._view_definition.app_links[D].target)){n.attr("target",this._view_definition.app_links[D].target)}m.append(n);if(rdx.utils.is_not_empty(this._view_definition.app_links[D].url)&&this._view_definition.app_links[D].url.indexOf(v)>=0){if(rdx.utils.is_defined(this._view_definition.header_change_callback)){this._view_definition.header_change_callback.call_back([this._view_definition.app_links[D].url])}m.addClass("active")}L.append(m)}}var H=false;if(this._view_definition.info_links){for(var D=0,O=this._view_definition.info_links.length;D<O;D++){var h=$(document.createElement("li"));var N="_self";if(rdx.utils.is_defined(this._view_definition.info_links[D].target)){N=this._view_definition.info_links[D].target}var a=$("<a>").attr("href",this._view_definition.info_links[D].url).attr("target",N);if(rdx.utils.is_defined(this._view_definition.info_links[D].resource)&&rdx.utils.is_defined(rdx.utils.get_resource(this._view_definition.info_links[D].resource))){var q=rdx.i18n.get_string(this._view_definition.info_links[D].title);var t=rdx.utils.get_resource(this._view_definition.info_links[D].resource);var J=this._view_definition.info_links[D].response_key;a.text(q+" (0)");if(rdx.utils.is_defined(this._view_definition.info_links[D].hidden)&&this._view_definition.info_links[D].hidden==true){a.addClass("hide_info_link");a.hide()}if(!a.hasClass("hide_info_link")){if(rdx.utils.is_not_defined(J)){this._invoke_show_with_count(this,t,a,q,true)}else{this._invoke_show_with_get(this,t,a,q,J)}}if(rdx.utils.is_defined(this._view_definition.info_links[D].refresh_interval)){var K=this._view_definition.info_links[D].refresh_interval;var C=this;var G=function(){if(rdx.utils.is_not_defined(J)){C._invoke_show_with_count(C,t,a,q,true)}else{C._invoke_show_with_get(C,t,a,q,J)}a.show()}();var p=setInterval(function(){if(!a.hasClass("hide_info_link")){if(rdx.utils.is_not_defined(J)){C._invoke_show_with_count(C,t,a,q,true)}else{C._invoke_show_with_get(C,t,a,q,J)}a.show()}},K)}}else{var a=$(document.createElement("a")).attr("href",this._view_definition.info_links[D].url).attr("target",N).text(rdx.i18n.get_string(this._view_definition.info_links[D].title));a.text(rdx.i18n.get_string(this._view_definition.info_links[D].title))}h.append(a);if(rdx.utils.is_not_empty(this._view_definition.info_links[D].url)&&this._view_definition.info_links[D].url.indexOf(v)>=0){if(rdx.utils.is_defined(this._view_definition.header_change_callback)){this._view_definition.header_change_callback.call_back([this._view_definition.info_links[D].url])}h.addClass("active")}H=true;F.append(h);this._info_link_array[q]=a}}if(rdx.utils.is_defined(this._system_upgarde_notifier)){var s=new rdx.notifier(F);s.render();s.add_notification(this._system_upgarde_notifier.system_upgarde_notifier_callback)}if(rdx.utils.is_defined(this._view_definition.settings_link_click_handler_callback)){var e=$("<li>").addClass("header_view_menu_settings_link");var a=$("<a>").attr("href","#").attr("title","Settings").attr("aria-label","Settings").bind(rdx.events.CLICK,{callback:this._view_definition.settings_link_click_handler_callback},function(Q){Q.data.callback.call_back()});e.append(a.append($("<span>")));F.append(e)}g.append(L);g.append(F)};rdx.header_view.prototype.header_view_show_info_links=function(){for(var a in this._info_link_array){this._info_link_array[a].removeClass("hide_info_link")}};rdx.header_view.prototype.header_view_hide_info_links=function(){for(var a in this._info_link_array){this._info_link_array[a].addClass("hide_info_link")}};rdx.header_view.prototype._handle_link_clicked=function(a){this._prevent_logout=true;window.location.href=a};rdx.header_view.prototype._invoke_show_with_get=function(f,a,d,e,b){rdx.model.get(a,null,new rdx.callback(f._show_with_get,[d,e,b]),null,new rdx.callback(f._show_error,[d,e]))};rdx.header_view.prototype._show_error=function(b,e,f){if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(e)&&rdx.utils.is_defined(f)){var d="";if(rdx.utils.is_defined(b)){d=b}var a=$("<img>").attr("src",rdx.images.HELP_IMG);e.empty();e.append($("<span>").append(f+" (").append(a).append(")"))}};rdx.header_view.prototype._show_with_get=function(b,f,g,e){if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(f)&&rdx.utils.is_defined(g)){var a=rdx.utils.get_formatted_response(b[e]);var d=0;if(rdx.utils.is_defined(a.count)){d=a.count}f.empty();f.text(g+" ("+d+")")}};rdx.header_view.prototype._invoke_show_with_count=function(e,a,b,d){rdx.model.get_count(a,null,new rdx.callback(e._show_with_count,[b,d]),null,new rdx.callback(e._show_error,[b,d]))};rdx.header_view.prototype._show_with_count=function(a,b,d){if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(d)){b.text("");b.text(d+" ("+a+")")}};rdx.header_view.prototype._change_application=function(d,e,a,f){if(rdx.utils.is_defined(f)){f.call_back([e,a])}else{var b=this._application_names[e];window.location.href=b.app_links[0].url}};rdx.header_view.prototype.get_resource_response_arrived=function(f){if(this._view_definition.view_properties.stand_alone){return}var h=false;f=rdx.utils.get_formatted_response(f);if(rdx.utils.is_defined(f[this._brand_key])){var m=rdx.utils.html_decode(f[this._brand_key]);if(rdx.utils.is_not_empty(f[this._platform_key])&&f[this._platform_key]!=="1"){m+=" ("+f[this._platform_key]+")"}this._platform_name.text(m)}if(rdx.utils.is_defined(f[this._host_key])){var a=f[this._host_key];if(rdx.utils.is_defined(a)&&a.length>0){var n=a.split(" ").join("");if(n.indexOf("()")>0){var d=a.substr(0,a.indexOf("("));this._host_item_label.text("IP Address");this._host_name.text(d).ellipsis(this._MAX_NO_OF_CHARS_IN_WELCOME_TEXT)}else{if(a.indexOf("(")>0){this._host_item_label.text("IP Address (Host Name)");this._host_name.text(a).ellipsis(this._MAX_NO_OF_CHARS_IN_WELCOME_TEXT)}else{var o="Host Name";if(rdx.utils.is_ipv4(a)||rdx.utils.is_ipv6(a)){o="IP Address"}this._host_item_label.text(o);this._host_name.text(a).ellipsis(this._MAX_NO_OF_CHARS_IN_WELCOME_TEXT)}}}}if(f[this._ip_address_key]){var e=f[this._ip_address_key];ip_address_label="IP Address";this._ip_address_item_label.text(ip_address_label);this._ip_address_name.text(e).ellipsis(this._MAX_NO_OF_CHARS_IN_WELCOME_TEXT)}if(rdx.utils.is_defined(this._version_key)&&rdx.utils.is_not_empty(f[this._version_key])){this._build_version_key.text(f[this._version_key])}if(rdx.utils.is_defined(f[this._build_key])){var g=f[this._build_key];var q=g.split(",");if(rdx.utils.is_defined(q[1])){var p=q[0].concat(", "+q[1])}else{var p=q[0]}if(this._build_info_renderer!=null){g=this._build_info_renderer.call_back([g])}this._build_version.text(g)}if(this._server_time_renderer!=null&&rdx.utils.is_defined(f.current_time_formatted)){var b=[];b.push(f.time_zone_offset);b.push(f.current_time);b.push(f.time_zone);this._server_time_renderer.call_back([b,this._time_div])}if(rdx.utils.is_defined(f[this._user_name_key])){this._user_name_value.text(f[this._user_name_key]).ellipsis(this._MAX_NO_OF_CHARS_IN_WELCOME_TEXT)}if(rdx.utils.is_defined(this._view_definition.application_defn)&&rdx.utils.is_defined(f[this._application_key])){this._view_definition.applications=this._view_definition.application_defn[f[this._application_key]];h=true}if(rdx.utils.is_defined(this._status_key)){if(rdx.utils.is_not_defined(f[this._status_key.response_key])){this._status_container_ul.empty()}else{this._status_container_ul.bind("render_status",{header_view:this,response:f},function(v){var s=v.data.header_view;var w=s._status_key.status_callback;var u=f[s._status_key.response_key];var t=s._status_container_ul;v.data.header_view._change_application(v,u,t,w)});this._status_container_ul.trigger("render_status")}}if(rdx.utils.is_defined(this._global_options_key)){this._system_drop_down={options:[],selected_option:""};if(rdx.utils.is_defined(f[this._global_options_key])){this._system_drop_down={options:f[this._global_options_key]};if(rdx.utils.is_defined(this._global_options_default_value_key)&&rdx.utils.is_defined(f[this._global_options_default_value_key])){this._system_drop_down.selected_option=f[this._global_options_default_value_key]}}this._create_global_options()}if((this._view_definition.info_links||this._view_definition.app_links)&&h){this._create_menu_table()}};rdx.header_view.prototype._resize=function(){if(rdx.utils.is_not_defined(this._menu_table)){return}};rdx.header_view.prototype.hide_navigation=function(){this._menu_div_container.addClass("hide")};rdx.header_view.prototype.show_navigation=function(){this._menu_div_container.removeClass("hide")};rdx.info_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._form_parent=null;this._form=null;this._info_controller=new rdx.info_controller(this,this._parent);this._action_properties=null;this._toolbar_items=null;this._extra_info_renderer_callback=null;this._is_tool_bar_required=(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title)&&rdx.utils.is_not_defined(this._view_definition.view_properties._dont_show_title));this._is_action_bar_required=rdx.utils.is_defined(this._view_definition.resource_operations);this._display_title=(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.display_title)&&this._view_definition.view_properties.display_title==true);this._add_extra_info=(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.add_extra_info)&&this._view_definition.view_properties.add_extra_info==true);if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.extra_info_renderer_callback)){this._extra_info_renderer_callback=this._view_definition.view_properties.extra_info_renderer_callback}if(this._display_title==true&&rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title)){this._title_div=$("<div>").addClass("info_view_title_panel");this._title_span=$("<span>");this._title_div.append(this._title_span)}this._form_parent=$("<div>")};rdx.info_view.prototype=new rdx.abstract_view();rdx.info_view.prototype.make_view=function(){this._parent.append(this._form_parent);var d=this._base_view.get_view_context().get_data();var b=$.extend({},this._view_definition.view_properties);var a="";if((rdx.utils.is_defined(b.two_row_layout_for_fields))&&(b.two_row_layout_for_fields==true)){a="form form_cell_decoration info_view two_row_layout_info_view"}else{if((rdx.utils.is_defined(b.two_row_layout_info_summary))&&(b.two_row_layout_info_summary==true)){a="form form_cell_decoration info_view two_row_layout_info_summary";b.two_row_layout_for_fields=true}else{a="form form_cell_decoration info_view"}}if(rdx.utils.is_defined(b.layout)){if(b.layout==rdx.SUMMARY){a="op_wizard_summary_page_form_panel"}}b.read_only=true;b.class_names=a+" "+b.class_names;b.add_border=false;if(rdx.utils.is_not_defined(b.two_row_layout_for_fields)){b.two_row_layout_for_fields=false}this._form=new rdx.form(this._form_parent,this._view_definition.resource_properties,this._resource.properties,b);this._form.set_resource(this._resource);if(rdx.utils.is_defined(d)&&rdx.utils.is_object_not_empty(d)){this._form.set_form_data(rdx.utils.get_formatted_response(d))}if(this.is_action_bar_required()&&this.is_link_bar()==false){this._form_parent.addClass("table_form_parent_div").addClass("smooth_all_corner")}this._form.render()};rdx.info_view.prototype.add_mask=function(){if(rdx.utils.is_defined(this._view_definition.view_properties.add_mask)){return this._view_definition.view_properties.add_mask}return true};rdx.info_view.prototype.is_tool_bar_required=function(){return false};rdx.info_view.prototype.is_action_bar_required=function(){return this._is_action_bar_required};rdx.info_view.prototype.is_link_bar=function(){var a=this._base_view.get_action_bar_properties(this.get_action_items());return a.link_bar};rdx.info_view.prototype.register_event_handlers=function(){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this._base_view,this._base_view.refresh_view))};rdx.info_view.prototype.destroy_view=function(){rdx.model.remove_model_change_listener(this._resource)};rdx.info_view.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.info_view.prototype._add_tool_bar=function(){var b=rdx.i18n.get_string(this._resource.obj_type);var d=rdx.i18n.get_string("rdx.refresh_tooltip",{obj_type:b});var a=[new rdx.action({tooltip:d,image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this._base_view,this._base_view.refresh_view)})];this._toolbar_items=a};rdx.info_view.prototype._add_action_bar=function(a){if(rdx.utils.is_not_defined(a)){return}var e=rdx.i18n.get_string(this._resource.obj_type);var f=[];for(var b in a){var g=a[b];switch(b){case"remove":var d={label:"rdx.button_delete",tooltip:rdx.i18n.get_string("rdx.button_delete_tooltip",{obj_type:e}),action:"remove",single_selection:true,multiple_selection:true,prompt:"rdx.table_data_action_confirm_single",expression_mode:"ALL"};this._add_button(d,g,f,this._info_controller._do_remove,b);break;case"custom_operations":this._add_custom_operations(f,e,a);break;default:this._add_custom_button(g,f,e,b);break}}this._action_properties=f};rdx.info_view.prototype._add_custom_operations=function(e,d,a){if(rdx.utils.is_not_defined(a.custom_operations)){return}for(var b in a.custom_operations){var f=a.custom_operations[b];this._add_custom_button(f,e,d,b)}};rdx.info_view.prototype._add_custom_button=function(f,e,d,b){var a={label:"Do Custom Operation",tooltip:"Do Custom Operation on "+d,action_type:rdx.EXTRA_ACTION};this._add_button(a,f,e,this._info_controller._do_generic_custom_operation,b)};rdx.info_view.prototype._view_handler=function(d,g,b,f){f=rdx.utils.is_not_defined(f)?{}:f;var a=new rdx.base_view(g,rdx.utils.get_view(b));var e=a.get_view_context();e.set_url_params(f,{});a.prepare_view()};rdx.info_view.prototype._add_button=function(d,b,f,h,e){var a=$.extend({},d,b);if(rdx.utils.is_defined(a)){a.prompt_data_callback=new rdx.callback(this,this._get_prompt_data)}if(b.view){var m=new rdx.callback(this._view_handler,[this._base_view.get_parent(),b.view,b.view_context]);a.click_handler_callback=m}else{if(b.click_handler_callback){a.click_handler_callback=new rdx.callback(this._info_controller,this._info_controller._do_custom_operation,[b.click_handler_callback])}else{a.click_handler_callback=new rdx.callback(this._info_controller,h,[])}}var g=new rdx.action(a);f.push(g)};rdx.info_view.prototype._get_prompt_data=function(a){var b=rdx.i18n.get_string(this._resource.obj_type);return{action:rdx.i18n.get_string(a.label.toLowerCase()).toLowerCase(),obj_type:b}};rdx.info_view.prototype.get_action_items=function(){if(rdx.utils.is_defined(this._action_properties)){return this._action_properties}this._add_action_bar(this._view_definition.resource_operations);return this._action_properties};rdx.info_view.prototype.get_resource_response_arrived=function(b){if(rdx.utils.is_defined(this._view_definition.view_properties.unformatted_response)&&this._view_definition.view_properties.unformatted_response){var e=b}else{var e=rdx.utils.is_array(b)?b[0]:b}if(this._display_title==true&&rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title)){var d=rdx.i18n.get_string(this._view_definition.view_properties.title,e);if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title_renderer_callback)){var a=this._view_definition.view_properties.title_renderer_callback.call_back([d,e]);if(rdx.page.is_slider_visible()){rdx.page.update_slider_title(a);rdx.page.get_slider_crumb().update_current_crumb_title(a)}else{this._form_parent.prepend(this._title_div);this._title_span.append(a)}}else{if(rdx.page.is_slider_visible()){rdx.page.update_slider_title(d);rdx.page.get_slider_crumb().update_current_crumb_title(d)}else{this._form_parent.prepend(this._title_div);this._title_span.append(d)}}}if(rdx.utils.is_defined(this._view_definition.view_properties.unformatted_response)&&this._view_definition.view_properties.unformatted_response){this._form.initialize(b)}else{this._form.initialize(rdx.utils.is_array(b)?b[0]:b)}this._form.get_form_holder().set_form_data(b);if(rdx.utils.is_defined(this._extra_info_renderer_callback)){this._extra_info_renderer_callback.call_back([b])}};rdx.info_view.prototype.get_form=function(){return this._form};rdx.info_view.prototype.get_base_view=function(){return this._base_view};rdx.info_view.prototype.close_view=function(a){this._base_view.destroy_view({submit_called:(rdx.utils.is_defined(a)&&a)},false)};rdx.info_view.prototype.get_button_bar=function(){this._ribbon_div=$("<span>").addClass("info_ribon_span");this._title_div.append(this._ribbon_div);this._form_parent.addClass("info_form_parent");return this._ribbon_div};rdx.info_view.prototype.is_title_required=function(){return true};rdx.info_controller=function(b,a){this._info_view=b;this._parent=a};rdx.info_controller.prototype._do_generic_custom_operation=function(a,b){this._perform_operation(rdx.model.post,a)};rdx.info_controller.prototype._perform_operation=function(m,e,h,d){var g=(e.action)?e.action:e.label.toLowerCase();var f=rdx.utils.get_formatted_response(this._info_view.get_form().get_form_holder().get_form_data());var b={action_properties:e,resource_defn:this._info_view._resource,activity:h,status:d,refresh_action:e.refresh_action};var a=this._info_view.get_base_view();m.apply(rdx.model,[this._info_view._resource,new rdx.callback(),this._get_resource_for_operation(f),null,g,b,this._parent])};rdx.info_controller.prototype._get_resource_for_operation=function(f){var e={};var a=rdx.utils.is_defined(this._info_view._resource.primary_keys)?this._info_view._resource.primary_keys:[];for(var d=0,b=a.length;d<b;d++){e[a[d]]=f[a[d]]}return e};rdx.info_controller.prototype._do_custom_operation=function(a,d){var b=this._info_view.get_form().get_form_holder().get_form_data();d.call_back([new rdx.callback_params({resource_data:b,info_view:this._info_view})])};rdx.info_controller.prototype._do_remove=function(a){var b=rdx.utils.get_formatted_response(this._info_view.get_form().get_form_holder().get_form_data());rdx.model.remove(this._info_view._resource,new rdx.callback(rdx.global_title_bar.crumb,rdx.global_title_bar.crumb.go_back_to_previous_crumb),this._get_resource_for_operation(b),null,null,null,this._parent)};rdx.form_controller=function(b,d,e,f,a){this._parent=d;this._base_view=b;this._resume_from_point_of_failure=rdx.utils.is_not_defined(e)?false:e;this._success_callback=rdx.utils.is_defined(f)?f:new rdx.callback();this._failure_callback=rdx.utils.is_defined(a)?a:new rdx.callback();this._model_executor_service=null;this._mask_id=rdx.mask.get_id()};rdx.form_controller.prototype.get_resource_for_operation=function(a){a=(rdx.utils.is_defined(a))?a:false;this._view=this._base_view.get_view();this._form=this._view.get_form();if(rdx.utils.is_defined(this._base_view.get_view_context())&&rdx.utils.is_defined(this._base_view.get_view_context().get_app_context_data())){this._form.set_app_context_data(this._base_view.get_view_context().get_app_context_data())}this._resource=this._base_view.get_resource();return rdx.form_utils.get_resource_for_operation(this._form,this._resource,null,a)};rdx.form_controller.prototype._start_operation=function(f,e,a,d){var b=new rdx.file_upload_controller(new rdx.callback(this,this._start_model_operation,[f,e,a,d]),this._view);b.add_form(this._view.get_form());b.do_operation()};rdx.form_controller.prototype._start_model_operation=function(e,d,a,b){this._do_operation(e,d,a,b)};rdx.form_controller.prototype._process_inner_views_data=function(e){var a=e.get_resource_for_operation();var d=[];for(var b in a){if(rdx.utils.is_not_defined(a[b])){continue}if(!(a[b] instanceof rdx.view_component_adapter_data)){continue}var f=a[b];delete a[b];f.process_inner_view_data(e,d,b)}return d};rdx.form_controller.prototype._get_operation_param=function(m,h,d,f,b,e,a){var g={resource_defn:b,resource_for_operation:e,callback_on_success:m,callback_on_failure:h,model_method:d,action:f,resource_context:{view_definition:this._view._view_definition,view:this._view},return_call_back:new rdx.callback(this,this._resume_callback_after_operation,[null,true,true]),app_context_data:this._base_view.get_view_context().get_app_context_data(),show_field_error_callback:new rdx.callback(this,this._show_field_error),form_data:a,activate_view_state:new rdx.callback(this,this._activate_view_state),unmask_view:(rdx.utils.is_defined(this._view._view_definition.view_properties)&&this._view._view_definition.view_properties.standalone_mode==true)?new rdx.callback(this,this._unmask):null,mask_view:(rdx.utils.is_defined(this._view._view_definition.view_properties)&&this._view._view_definition.view_properties.standalone_mode==true)?new rdx.callback(this,this._mask):null};return new rdx.configure_view_operation_params(g)};rdx.form_controller.prototype._show_field_error=function(a){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);this._form.show_field_errors(a)};rdx.form_controller.prototype._unmask=function(){rdx.mask.unmask_component(this._parent,this._mask_id)};rdx.form_controller.prototype._mask=function(){rdx.mask.mask_component(this._parent,this._mask_id)};rdx.form_controller.prototype._activate_view_state=function(){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE)};rdx.form_controller.prototype._do_operation=function(e,m,C,v){var n=new Array();var B=this._resource;var w=this.get_resource_for_operation(true);var u=w.result;var q=w.complete_form_data;if(rdx.utils.is_defined(u.multiple_resource)){var F=u.result;for(var b in F){var s=rdx.utils.get_resource(b);var D=this._get_operation_param(e,m,C,v,s,F[b],q);var z=this._process_inner_views_data(D);n.push(D);n=n.concat(z)}}else{var g=this._view.get_form().get_embedded_views();for(var h=0;h<g.length;h++){var p=g[h];if(rdx.utils.is_not_defined(p)||p.get_component_type()!=rdx.form_constants.CARD){continue}if(p.get_current_card_component().get_component_type()!=rdx.form_constants.VIEW){continue}var o="Card_Component_inner_view"+h;var E=p.get_current_card_component().get_data();u[o]=E}var D=this._get_operation_param(e,m,C,v,B,u,q);var z=this._process_inner_views_data(D);n.push(D);n=n.concat(z)}if(rdx.utils.is_defined(this._view._view_definition.view_properties)&&rdx.utils.is_defined(this._view._view_definition.view_properties.callback_before_operation)){n=this._view._view_definition.view_properties.callback_before_operation.call_back([n]);if(n===false){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);return}}if(rdx.utils.is_defined(this._view._view_definition.view_properties)&&this._view._view_definition.view_properties.standalone_mode){return}this._resume_from_point_of_failure=rdx.utils.is_defined(this._view._view_definition.view_properties)&&rdx.utils.is_defined(this._view._view_definition.view_properties.resume_from_point_of_failure)?this._view._view_definition.view_properties.resume_from_point_of_failure:this._resume_from_point_of_failure;if(this._resume_from_point_of_failure==false||rdx.utils.is_not_defined(this._model_executor_service)){var t=null;if(rdx.utils.is_defined(this._base_view.get_view_definition().view_properties.continue_on_error)){t=this._base_view.get_view_definition().view_properties.continue_on_error}var A=null;if(rdx.utils.is_defined(this._view._view_definition.view_properties.progress_bar)){A=this._view._view_definition.view_properties.progress_bar}var d=false;if(rdx.utils.is_defined(this._view._view_definition.view_properties.enable_transaction)){d=this._view._view_definition.view_properties.enable_transaction}if(rdx.utils.is_object(A)){A.enable_transaction=d}else{A={};A.enable_transaction=d}this._model_executor_service=new rdx.model_executor_service(e,m,t,A);this.create_executor_service_objects(this._model_executor_service,n,0)}else{if(this._model_executor_service.is_transaction_enabled()){var a=0}else{var f=this._model_executor_service.pending_requests_count();this._model_executor_service.reset_queue();var a=(n.length>0)?n.length-f:0}this.create_executor_service_objects(this._model_executor_service,n,a)}this._model_executor_service.execute()};rdx.form_controller.prototype.create_executor_service_objects=function(g,e,d,a){if(rdx.utils.is_not_defined(e)){return}for(var f=d;f<e.length;f++){var h=e[f];if(rdx.utils.is_defined(h.get_resource_context())){var b=h.get_resource_context();if(rdx.utils.is_defined(b.view_definition)&&rdx.utils.is_defined(b.view_definition.view_properties)&&rdx.utils.is_defined(b.view_definition.view_properties.submit_operation)){b.timeout=b.view_definition.view_properties.submit_operation.refresh_delay}}if(h.get_model_method()!=rdx.model_constants.REMOVE&&(rdx.utils.is_not_defined(a)&&rdx.utils.is_object_empty(h.get_resource_for_operation()))&&rdx.utils.is_empty(h.get_action())){continue}g.add(h.get_model_method(),h.get_resource_defn(),h.get_resource_for_operation(),h.get_action(),h.get_param(),this._parent,h.get_resource_context(),h.get_continue_on_error())}};rdx.form_controller.prototype.submit_standalone_view_data=function(d,e,f,a){if(rdx.utils.is_defined(this._base_view.get_view_definition().view_properties.callback_before_operation)){e=this._base_view.get_view_definition().view_properties.callback_before_operation.call_back([d,e])}if(e===false){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);return}var b=new rdx.model_executor_service(f,a);if(rdx.utils.is_object_not_empty(d.get_resource_for_operation())){this.create_executor_service_objects(b,[d],0,true)}this.create_executor_service_objects(b,e,0,true);b.execute()};rdx.form_controller.prototype.do_model_operation=function(d){var g=false;if(rdx.utils.is_defined(this._base_view._view_definition.view_properties)&&this._base_view._view_definition.view_properties.standalone_mode){g=true}if(!rdx.view_utils.is_view_active(this._base_view)&&g==false){return}this._mask();this._base_view.set_view_state(rdx.view_constants.view_state.PASSIVE);this._view=this._base_view.get_view();this._form=this._view.get_form();this._resource=this._base_view.get_resource();var b=rdx.view_utils.get_model_method(this._view._view_definition);var e=rdx.view_utils.get_action(this._view._view_definition);var f=true;if(rdx.utils.is_defined(this._view._view_definition.view_properties.destroy_on_success)){f=this._view._view_definition.view_properties.destroy_on_success}if(rdx.utils.is_defined(d)&&d==false){f=false}var h=new rdx.callback(this,this.model_operation_callback,[true,f]);var a=new rdx.callback(this,this.model_operation_callback,[false,false]);this._start_operation(h,a,b,e)};rdx.form_controller.prototype.model_operation_callback=function(b,d,a){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);this._unmask();if(rdx.utils.is_defined(this._base_view.get_view_definition().view_properties.callback_after_operation)){var e=new rdx.configure_view_operation_params({return_call_back:new rdx.callback(this,this._resume_callback_after_operation,[b,d,a])});this._base_view.get_view_definition().view_properties.callback_after_operation.call_back([{status:d,params:e,result:b}])}else{this._finish_model_operation(b,d,a)}};rdx.form_controller.prototype._resume_callback_after_operation=function(e,b,d,a){this._finish_model_operation(b,d,a)};rdx.form_controller.prototype._finish_model_operation=function(b,d,a){if(d){this._success_callback.call_back([b])}else{this._failure_callback.call_back([b])}if(a&&rdx.utils.is_function(this._view.close_view)){this._view.close_view(d)}if(d){this._view._base_view.show_notification_bar(this._view.get_data())}if(!d&&rdx.utils.is_defined(this._view._view_definition.view_properties.notification_status)){rdx.page.hide_notification_bar()}};rdx.form_controller.prototype.set_callback=function(b,a){this._success_callback=rdx.utils.is_defined(b)?b:new rdx.callback();this._failure_callback=rdx.utils.is_defined(a)?a:new rdx.callback()};rdx.list_view_action_callback_params=function(a){this._DEFAULT_PROPERTIES={selected_rows_data:null,selected_rows_primary_keys:null,resource_context:null,list_view:null,all_rows_data:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.list_view_action_callback_params.prototype.get_selected_rows_data=function(){return this._properties.selected_rows_data};rdx.list_view_action_callback_params.prototype.get_all_rows_data=function(){return this._properties.all_rows_data};rdx.list_view_action_callback_params.prototype.get_selected_rows_primary_keys=function(){return this._properties.selected_rows_primary_keys};rdx.list_view_action_callback_params.prototype.get_resource_context=function(){return this._properties.resource_context};rdx.list_view_action_callback_params.prototype.is_response_callback_defined=function(){return rdx.utils.is_defined(this._properties.list_view._view_definition.response_callback)};rdx.list_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._table_parent=null;this._component=null;this._list_controller=new rdx.list_controller(this,this._parent);this._pagination=null;this._action_items=null;this._action_menu_items=null;this._toolbar_items=null;this._is_done_clicked=false;this._DEFAULT_PROPERTIES={details:false,pagination:false,search:false,standalone_search:false,append_data_to_first:true,layout:rdx.view_constants.GRID_LAYOUT,no_rows_show_table:true,show_context_menu_on_click:true,table_row_height:null,details_table_class:"info_view_icon"};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.view_properties);this._details_view_rendered=false;this._update_count_from_search_filter=false;if(this._properties.pagination==true&&this._properties.search==true){this._properties.search=true}else{this._properties.search=false}if(rdx.utils.is_defined(this._view_definition.resource_operations)){this._properties.show_select_component=(b.view_properties.show_select_component)?(b.view_properties.show_select_component):rdx.form_constants.CHECK_BOX;this._properties.add_show_component_column=true;if(rdx.utils.is_defined(b.view_properties.add_show_component_column)){this._properties.add_show_component_column=b.view_properties.add_show_component_column}if(this._properties.show_select_component=="none"){this._properties.show_select_component=null}}this._table_mask_id=rdx.utils.generate_unique_id("list_view");this._row_click_handler_callback=null;this._row_remove_click_handler_callback=null};rdx.list_view.prototype=new rdx.abstract_view();rdx.list_view.prototype.make_view=function(){this._crossfilter=this.crossfilter_enabled();this._current_number_of_columns=0;this._initialize_all_columns();if(this._is_done_clicked==true){if(rdx.utils.is_not_defined(this._settings)){this._settings={};this._settings.columns=[]}this._settings.columns=this._visible_columns}if(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)){this._initialize_visible_columns_from_settings()}else{this._visible_columns=this._all_columns}var a=rdx.utils.get_object_length(this._all_columns);if(a<=rdx.view_constants.MINIMUM_COLUMNS_FOR_TABLE_CUSTOMIZATION){this._base_view._show_settings=false}this._inline_view_parent=$("<div>").addClass("list_view_inline_view");this._parent.append(this._inline_view_parent);this._table_parent=$(document.createElement("div")).addClass("table_form_parent_div");this._parent.append(this._table_parent);this._add_table();if(!this.is_action_bar_required()){this._table_parent.addClass("add_table_bottom_border");if(!this._properties.search){this._parent.addClass("remove_div_top_border");if(this._base_view._show_settings==false){this._parent.addClass("hide_header")}}}this._add_summary_content();this._add_pagination();if(rdx.utils.is_not_defined(this._properties.tag_properties)){this._add_search_filter()}else{rdx.model.get(rdx.utils.get_resource(this._properties.tag_properties.resource_name),null,new rdx.callback(this,this._get_tag_properties))}if(rdx.utils.is_defined(this._parent)){rdx.utils.set_focus_on_first_clickable_component(this._parent.get(0))}};rdx.list_view.prototype.set_crossfilter=function(a){this._crossfilter=a;if(a===false){this.get_view_context().set_url_params({custom:{pageno:this._pagination.get_page_number(),pagesize:this._pagination.get_page_size()}})}};rdx.list_view.prototype.get_tool_bar=function(){return this._base_view.get_toolbar()};rdx.list_view.prototype.get_base_view=function(){return this._base_view};rdx.list_view.prototype.get_view=function(){return this._base_view.get_view()};rdx.list_view.prototype.is_tool_bar_required=function(){var a=rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.is_tool_bar_required)?this._view_definition.view_properties.is_tool_bar_required:null;if(rdx.utils.is_defined(this._base_view.get_crumb_handler())||(rdx.utils.is_defined(a)&&a==false)){return false}return true};rdx.list_view.prototype.force_get_all=function(){return true};rdx.list_view.prototype.is_action_bar_required=function(){return rdx.utils.is_defined(this._view_definition.resource_operations)};rdx.list_view.prototype._add_tool_bar=function(){var b=rdx.i18n.get_string(this._resource.obj_type);var e=rdx.i18n.get_string("rdx.refresh_tooltip",{obj_type:b});var a=[];if(rdx.utils.is_defined(this._view_definition)&&rdx.utils.is_defined(this._view_definition.view_properties)&&(rdx.utils.is_not_defined(this._view_definition.view_properties.hide_refresh_button)||this._view_definition.view_properties.hide_refresh_button==false)){a.push(new rdx.action({tooltip:e,image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this._do_refresh)}))}else{a=[]}if(rdx.utils.is_defined(this._view_definition.view_properties.custom_toolbar_actions)){for(var d in this._view_definition.view_properties.custom_toolbar_actions){var f=this._view_definition.view_properties.custom_toolbar_actions[d];a.push(new rdx.action(f))}}this._toolbar_items=a};rdx.list_view.prototype.get_toolbar_items=function(){if(rdx.utils.is_defined(this._toolbar_items)){return this._toolbar_items}this._add_tool_bar();return this._toolbar_items};rdx.list_view.prototype._add_search_filter=function(){if(!this._properties.pagination||!this._properties.search){return}var g=[];for(var f in this._view_definition.resource_properties){var e=this._resource.properties[f];var a=$.extend({},this._view_definition.resource_properties[f]);if(rdx.utils.is_defined(e)){a.key=e.key;if(rdx.utils.is_not_defined(a.label)){a.label=e.label}if(e.type){a.type=e.type}}if(rdx.utils.is_defined(a.hidden)&&a.hidden==true){if(rdx.utils.is_not_defined(a.search)||a.search==false){continue}}if(rdx.utils.is_defined(a.search)&&a.search==false){continue}var d=a.label;if(rdx.utils.is_defined(a.search_label)&&rdx.utils.is_not_empty(a.search_label)){d=a.search_label}g.push({key:a.key,label:d,type:a.type,search_properties:a.search_properties});if(rdx.utils.is_defined(a.hidden)&&a.hidden==true){var b=Object.keys(this._visible_columns).length;this._visible_columns[a.key]=++b}}this._search=new rdx.search(this._table_parent,{search_dropdown_map:g,visible_columns:this._visible_columns,pre_searched_object:this._get_searched_object(),standalone_search:this._properties.standalone_search,search_filter_action:null,tag_support:this._properties.enable_tag_search,tag_properties:this._properties.tag_properties,is_crossfilter:this._crossfilter,resource_name:this._resource.name});this._search.render();this._search.add_search_listner(new rdx.callback(this,this._search_filter_action))};rdx.list_view.prototype._get_searched_object=function(){var e=null;var a=this.get_view_context();if(rdx.utils.is_defined(a)){var p=a.get_url_params();if(rdx.utils.is_defined(p)){var d=p.filter;if(rdx.utils.is_defined(d)&&d.length){if(rdx.utils.is_defined(this._view_definition)&&rdx.utils.is_defined(this._view_definition.view_properties)&&(rdx.utils.is_defined(this._view_definition.view_properties.search))&&(this._view_definition.view_properties.search)){var f=this._view_definition.resource_properties;if(rdx.utils.is_defined(f)){for(var g=0,m=d.length;g<m;g++){var b=d[g]["name"];var o=d[g]["value"];if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(f[b])){var n=f[b];var h=n.search;if(rdx.utils.is_not_defined(h)||h==true){if(rdx.utils.is_not_defined(e)){e=[]}e.push({key:b,value:o})}}else{if(rdx.utils.is_defined(this._tag_keys)&&$.inArray(b,this._tag_keys)>-1){if(rdx.utils.is_not_defined(e)){e=[]}e.push({key:b,value:o})}}}}}}}}return e};rdx.list_view.prototype._add_summary_content=function(){if(rdx.utils.is_not_defined(this._properties.render_summary_content_callback)){return}this._summary_div=$("<div>").addClass("table_summary_div");this._parent.append(this._summary_div)};rdx.list_view.prototype._add_pagination=function(){if(!this._properties.pagination){return}var a=$("<div>").addClass("pagination_div");var b={};if(rdx.utils.is_defined(this._properties.pagination_type)&&this._properties.pagination_type=="compact"){a=this._properties.pagination_dom?this._properties.pagination_dom:a;a.addClass("compact_pagination_div");b.type="compact"}else{this._parent.append(a)}if(this._properties.pagination_properties){b=$.extend(true,b,this._properties.pagination_properties)}this._pagination=new rdx.pagination(a,b).render();if(this._crossfilter===false){if(this._base_view.load_all==true){this.get_view_context().set_url_params({custom:{pageno:this._pagination.get_page_number(),pagesize:this._pagination.get_page_size()}})}}else{if(this._crossfilter==true&&this._base_view.get_view_context().is_data_set()!=true){var d=this._properties.crossfilter.threshold_limit?this._properties.crossfilter.threshold_limit:rdx.constants.CROSS_FILTER_THRESHOLD_LIMIT;if(this._base_view.load_all==true){this.get_view_context().set_url_params({custom:{pageno:this._pagination.get_page_number(),pagesize:d}})}}}};rdx.list_view.prototype.get_pagination=function(){return this._pagination};rdx.list_view.prototype.reset_view_before_refresh=function(){if(!this._properties.pagination||this._crossfilter===true){return}this.get_view_context().set_url_params({custom:{pageno:this._pagination.get_page_number(),pagesize:this._pagination.get_page_size()}})};rdx.list_view.prototype._update_total_count=function(){if(this._crossfilter&&this._properties.enable_tag_search!=true){if(rdx.crossfilter_controller.is_resource_crossfilter_present(this._resource.name)){var b=this._properties.crossfilter;this._pagination.update_total_count(rdx.crossfilter_controller.get_data_size(this._resource.name,b.dimension),true)}return}var a=null;if(rdx.utils.is_defined(this.get_view_context().get_url_params())){a=$.extend(true,{},this.get_view_context().get_url_params());rdx.url_utils.remove_from_url_object(a,"pagesize",rdx.url_utils.GET_CUSTOM_TYPE);rdx.url_utils.remove_from_url_object(a,"pageno",rdx.url_utils.GET_CUSTOM_TYPE)}rdx.model.get_count(this._resource,a,new rdx.callback(this._pagination,this._pagination.update_total_count,[true]),this._parent,new rdx.callback(this._pagination,this._pagination.update_total_count,[false]))};rdx.list_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.list_view.prototype.set_view_context=function(a){return this._base_view.set_view_context(a)};rdx.list_view.prototype._search_action=function(b){var d=this;rdx.utils.slide_up_down(this._search.get_component(),b);var a=$(".entire_search_div",this._parent);if(rdx.utils.is_defined(a)){rdx.utils.set_focus_on_first_editable_component(a[0])}};rdx.list_view.prototype._search_filter_action=function(d,f){switch(this._properties.standalone_search){case true:this._refresh_view(f,rdx.model_constants.NOOP,{refresh_action:rdx.view_constants.STANDALONE_SEARCH});break;default:this.get_view_context().remove_url_type(rdx.url_utils.GET_FILTER_TYPE);this.get_view_context().set_is_query_param(d);var e=null;if(d){e={};var a={};for(var b in f){e[b]=f[b];a[b]=b}this._filter_data={key:a,value:e}}if(this._crossfilter==true&&this._properties.enable_tag_search!=true){this._apply_cross_filter(f)}else{this._update_count_from_search_filter=d;if(!this._update_count_from_search_filter){this._filter_data=null;this._pagination.reset_page_number()}if(this._pagination.get_page_number()>1){this._pagination.reset_page_number()}var g={custom:{pageno:this._pagination.get_page_number()}};if(d){g.filter=a}this.get_view_context().set_url_params(g,e);this._update_total_count();this._base_view.refresh_view();rdx.mask.mask_component(this._table_parent,this._table_mask_id,{position:"absolute",top:"0",bottom:"0",right:"0",left:"0",margin:"auto"});break}}};rdx.list_view.prototype._apply_cross_filter=function(b){rdx.crossfilter_controller.clear_all_filters(this._resource.name);for(var f in b){try{var m=rdx.utils.html_decode(b[f]);var h=new RegExp(m.toLowerCase().slice(1,-1),"gi");var a={dimension:f,filter:function(p,n){if(rdx.utils.is_array(p)){for(var o=0;o<p.length;o++){var e=p[o].toLowerCase();return e.match(h)}}else{if(rdx.utils.is_defined(p)&&rdx.utils.is_not_empty(p)){var e=p.toLowerCase();return e.match(h)}else{return null}}}};var d=rdx.crossfilter_controller.apply_filter(this._resource.name,a,b[f],true)}catch(g){rdx.page.show_notification(rdx.i18n.get_string("rdx.search_regex_error"),rdx.ERROR)}}this.get_resource_response_arrived(rdx.crossfilter_controller.get_all_data(this._resource.name,this._properties.crossfilter.dimension),true)};rdx.list_view.prototype._pagination_action=function(b,d){if(this._crossfilter){var f=this._properties.crossfilter.order?this._properties.crossfilter.order:"ascending";this.get_resource_response_arrived(rdx.crossfilter_controller.get_all_data(this._resource.name,this._properties.crossfilter.dimension,f));return}var e=null,a=this.get_view_context();if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(a._url_params)&&rdx.utils.is_defined(a._url_params.get_by_name)){e=a._url_params.get_by_name}a.set_url_params({custom:{pageno:b,pagesize:d}});if(e!==null){a._url_params.get_by_name=e;a._properties.get_by_name=e}this.set_view_context(a);if(rdx.utils.is_defined(this._filter_data)){this._apply_filter();this._update_total_count()}this._base_view.refresh_view()};rdx.list_view.prototype._do_crossfilter_sort=function(d,b){var a=b==true?"ascending":"descending";if(rdx.utils.is_defined(this._properties.crossfilter.dimension)){this._properties.crossfilter.dimension=d;this._properties.crossfilter.order=a}this.get_resource_response_arrived(rdx.crossfilter_controller.get_all_data(this._resource.name,d,a))};rdx.list_view.prototype._sort_table_action=function(b,a){if(this._crossfilter){return}if(rdx.utils.is_defined(this._properties.sort_update_callback)){this._properties.sort_update_callback.call_back([this.get_view_context(),b,a])}else{a=(a==true)?"yes":"no";this.get_view_context().set_url_params({custom:{order_by:b,asc:a}})}this._base_view.refresh_view()};rdx.list_view.prototype._add_table=function(){this.add_theme_specific_class(this);var e=[];var g=false;var a=this._view_definition.resource_properties;if(rdx.utils.is_defined(this._visible_columns)){if(this._is_setting_back_to_default==true){this._visible_columns=this._all_columns}a=this._visible_columns}for(var d in a){var b=this._resource.properties[d];var f=$.extend({},this._view_definition.resource_properties[d]);if(b){f.key=b.key;if(rdx.utils.is_not_defined(f.label)){f.label=b.label}if(b.tooltip){f.tooltip=b.tooltip}if(b.type){f.type=b.type}}if(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)&&this._is_setting_back_to_default!=true){this._apply_sort_order_from_settings(f,d);this._apply_size_from_settings(f,d)}if(rdx.utils.is_defined(a[d]["column_class_name"])){f.class_name=a[d]["column_class_name"]}if(rdx.utils.is_defined(a[d]["chart_renderer_callback"])){f.class_name=a[d]["chart_renderer_callback"]}f.store_data=true;g=true;e.push(new rdx.table_column(f))}this._read_table_properties_set_to_view(e);if(rdx.utils.is_defined(this._settings_key)){if(rdx.utils.is_defined(this._component)){if(rdx.utils.is_defined(this._component.get_table())){var h=this;this._component.get_table().dragtable({dragaccept:".dummy_header",persistState:function(q){if(rdx.utils.is_defined(q)){var o=q.startIndex-1;var p=q.endIndex-1;if(o!=p){h._update_settings_with_new_order(o,p);h._save_new_settings();if(rdx.utils.is_function(h._component.move_column_from_start_to_end_index)){h._component.move_column_from_start_to_end_index(o,p)}}else{h._component.sort_column_of_index(o);if(rdx.utils.is_defined(h._component._columns[o])){var n=h._component._columns[o].get_key();var m=h._component._get_sort_order();h._update_settings_with_new_sort_key(n,m);if(!(h._all_columns[n].sortable===false)){h._save_new_settings()}}}}},containment:this._parent})}}}};rdx.list_view.prototype.onSampleResized=function(a){this._component._table=$(a.currentTarget)};rdx.list_view.prototype._read_table_properties_set_to_view=function(a){if(rdx.utils.is_not_defined(this._properties)){return}if(this._properties.details){this._properties.details_renderer_callback=new rdx.callback(this,this._details_renderer)}if(rdx.utils.is_defined(this._properties.drilldown_renderer_callback)){this._drilldown_renderer_callback=new rdx.callback(this,this._drilldown_renderer)}if(this._properties.layout==rdx.view_constants.MAP_ICON_LAYOUT){this._component=new rdx.map(this._table_parent,a,this._properties).render()}else{if(this._properties.table_type){this._properties.class_names="table compact_table";this._properties.table_row_height=28}this._component=new rdx.table(this._table_parent,a,this._properties,this);if(rdx.utils.is_defined(this._row_click_handler_callback)){this._component.set_row_click_handler_callback(this._row_click_handler_callback)}if(rdx.utils.is_defined(this._row_remove_click_handler_callback)){this._component.set_row_remove_click_handler_callback(this._row_remove_click_handler_callback)}if(rdx.utils.is_defined(this._settings_key)){this._component.set_resize_event_callback(new rdx.callback(this,this._update_settings_with_new_column_sizes))}if(rdx.utils.is_defined(this._drilldown_renderer_callback)){this._component.set_drilldown_renderer_callback(this._drilldown_renderer_callback)}this._component.render();this._compact_table_created=false}};rdx.list_view.prototype.get_component=function(){return this._component};rdx.list_view.prototype.add_theme_specific_class=function(a){if(!a.is_action_bar_required()){a._table_parent.addClass("table_no_border")}};rdx.list_view.prototype.get_global_actions=function(){if(rdx.utils.is_not_defined(this._view_definition.global_resource_operations)){return new Array()}var e=new Array();for(var b in this._view_definition.global_resource_operations){var a={label:"",tooltip:"",image_url:rdx.images.DOCUMENT_DISABLE_IMG};var d=this._view_definition.global_resource_operations[b];d.independent_of_selection=true;this._add_button(a,d,e,this._list_controller._do_generic_custom_operation,b,false)}return e};rdx.list_view.prototype._add_action_bar=function(m,a){if(rdx.utils.is_not_defined(m)){return}var h=rdx.i18n.get_string(this._resource.obj_type);var p=[];for(var n in m){var d=m[n];if(rdx.utils.is_defined(m[n]["operation"])){n=m[n]["operation"]}switch(n){case"add":var v={label:"rdx.button_add",tooltip:rdx.i18n.get_string("rdx.button_add_tooltip",{obj_type:h}),no_selection:true,single_selection:true};this._add_button(v,d,p,this._list_controller._do_add,n);break;case"insert":var b={label:"rdx.button_insert",tooltip:rdx.i18n.get_string("rdx.button_insert_tooltip",{obj_type:h}),no_selection:true,single_selection:true,multiple_selection:true,action_type:rdx.EXTRA_ACTION};this._add_button(b,d,p,this._list_controller._do_insert,n);break;case"set":var s={label:"rdx.button_modify",tooltip:rdx.i18n.get_string("rdx.button_modify_tooltip",{obj_type:h}),double_click:true,single_selection:true,table_row_click:true};this._add_button(s,d,p,this._list_controller._do_set,n);break;case"remove":var o={label:"rdx.button_delete",tooltip:rdx.i18n.get_string("rdx.button_delete_tooltip",{obj_type:h}),action:"remove",single_selection:true,multiple_selection:true,prompt:"rdx.table_data_action_confirm",refresh_action:rdx.view_constants.REMOVE_SELECTED,expression_mode:"ALL"};this._add_button(o,d,p,this._list_controller._do_remove,n);break;case"delet":var t={label:"rdx.button_delete",tooltip:rdx.i18n.get_string("rdx.button_delete_tooltip",{obj_type:h}),action:"delete",single_selection:true,multiple_selection:true,prompt:"rdx.table_data_action_confirm",refresh_action:rdx.view_constants.REMOVE_SELECTED,expression_mode:"ALL"};this._add_button(t,d,p,this._list_controller._do_delet,n);break;case"enable":var w={label:"rdx.button_enable",tooltip:rdx.i18n.get_string("rdx.button_enable_tooltip",{obj_type:h}),single_selection:true,prompt:"rdx.table_data_action_confirm",refresh_action:rdx.view_constants.REFRESH_RELEVANT,action_type:rdx.EXTRA_ACTION};this._add_button(w,d,p,this._list_controller._do_enable,n);break;case"disable":var u={label:"rdx.button_disable",tooltip:rdx.i18n.get_string("rdx.button_disable_tooltip",{obj_type:h}),single_selection:true,prompt:"rdx.table_data_action_confirm",refresh_action:rdx.view_constants.REFRESH_RELEVANT,action_type:rdx.EXTRA_ACTION};this._add_button(u,d,p,this._list_controller._do_disable,n);break;case"reboot":var e={label:"rdx.button_reboot",tooltip:rdx.i18n.get_string("rdx.button_reboot_tooltip",{obj_type:h}),prompt:"rdx.table_data_action_confirm_single",single_selection:true,action_type:rdx.EXTRA_ACTION};this._add_button(e,d,p,this._list_controller._do_reboot,n);break;case"rename":var g={label:"rdx.button_rename",tooltip:rdx.i18n.get_string("rdx.button_rename_tooltip",{obj_type:h}),single_selection:true,refresh_action:rdx.view_constants.REFRESH_ALL,action_type:rdx.EXTRA_ACTION,fetch_resrc_name_from_view:false};this._add_button(g,d,p,this._list_controller._do_rename,n);break;case"separator":var f={label:rdx.SEPARATOR,multiple_selection:false,single_selection:true,separator:true};var q=$.extend(f,d);this._add_custom_button(q,p,h,n);break;case"custom_operations":this._add_custom_operations(p,h,m);break;default:this._add_custom_button(d,p,h,n);break}}if(!a){this._action_items=p}else{this._action_menu_items=p}};rdx.list_view.prototype.get_action_items=function(){if(rdx.utils.is_defined(this._action_items)){return this._action_items}if(rdx.utils.is_defined(this._view_definition.resource_operations)){this._add_action_bar(this._view_definition.resource_operations,false)}if(rdx.utils.is_defined(this._view_definition.resource_menu_operations)){this._add_action_bar(this._view_definition.resource_menu_operations,true)}if(rdx.utils.is_not_defined(this._action_items)){return[]}return this._action_items};rdx.list_view.prototype.make_view_finalize=function(){if(rdx.utils.is_not_defined(this._view_definition.resource_menu_operations)){this._component.set_menu_properties(this._action_items)}else{this._component.set_menu_properties(this._action_menu_items)}};rdx.list_view.prototype.get_inline_view_parent=function(){return this._inline_view_parent};rdx.list_view.prototype._get_prompt_data=function(b){var a=rdx.utils.is_defined(b.selected_rows_for_action)?b.selected_rows_for_action.length:this._component.get_selected_items_data().length;obj_label=(a===1)?rdx.i18n.get_string(this._resource.obj_type):rdx.i18n.get_string(this._resource.obj_type).concat("(s)");return{action:rdx.i18n.get_string(b.label.toLowerCase()).toLowerCase(),obj_type:obj_label,number_of_selected:a}};rdx.list_view.prototype._add_button=function(d,b,f,h,e){if(!this._can_render_action(b)){return}var a=$.extend({},d,b);if(b.click_handler_callback){a.click_handler_callback=new rdx.callback(this._list_controller,this._list_controller._do_custom_operation,[b.click_handler_callback])}else{a.click_handler_callback=new rdx.callback(this._list_controller,h,[])}if(rdx.utils.is_defined(a)){a.prompt_data_callback=new rdx.callback(this,this._get_prompt_data)}var g=new rdx.action(a);if(a.add_row_editor==true){this._row_click_handler_callback=new rdx.callback(this,this._handle_row_editor_click,[g]);return}else{if(a.add_row_remove==true){this._row_remove_click_handler_callback=new rdx.callback(this,this._handle_row_remove_click,[g]);return}}f.push(g)};rdx.list_view.prototype._handle_row_remove_click=function(b,a){a.get_properties().selected_rows_for_action=b;a.perform_action()};rdx.list_view.prototype._handle_row_editor_click=function(b,a){a.get_properties().selected_rows_for_action=b;a.perform_action()};rdx.list_view.prototype._add_custom_operations=function(e,d,a){if(rdx.utils.is_not_defined(a.custom_operations)){return}for(var b in a.custom_operations){var f=a.custom_operations[b];this._add_custom_button(f,e,d,b)}};rdx.list_view.prototype._can_render_action=function(a){if(rdx.utils.is_defined(a)){if(rdx.utils.is_defined(a.render)&&rdx.utils.is_defined(a.render.evaluate)&&rdx.utils.is_function(a.render.evaluate)){return a.render.evaluate()}}return true};rdx.list_view.prototype._add_custom_button=function(f,e,d,b){if(!this._can_render_action(f)){return}var a={label:"Do Custom Operation",action_type:rdx.EXTRA_ACTION};this._add_button(a,f,e,this._list_controller._do_generic_custom_operation,b)};rdx.list_view.prototype._get_data_for_menu=function(){return this._component.get_selected_items_data()};rdx.list_view.prototype.get_item_info=function(){return this._component.get_item_info()};rdx.list_view.prototype.register_event_handlers=function(){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this,this._refresh_view));this._component.add_event_handler(rdx.events.ROW_SELECTION_CHANGED,new rdx.callback(this,this._row_selection_changed));this._component.add_event_handler(rdx.events.COLUMN_CONTEXT_CHANGED,new rdx.callback(this,this._refresh_view_on_changed_column_context));this._row_selection_changed();if(this._crossfilter==true){if(rdx.utils.is_function(this._component.table_sort_handler)){this._component.table_sort_handler(new rdx.callback(this,this._do_crossfilter_sort))}}else{if(this._properties.server_sorting){if(rdx.utils.is_function(this._component.table_sort_handler)){this._component.table_sort_handler(new rdx.callback(this,this._sort_table_action))}}}if(this._properties.pagination){if(rdx.utils.is_function(this._component.table_sort_handler)){this._component.table_sort_handler(new rdx.callback(this,this._sort_table_action))}this._pagination.add_event_handler(new rdx.callback(this,this._pagination_action))}};rdx.list_view.prototype.destroy_view=function(){if(rdx.utils.is_defined(this._view_definition.dialog_properties)&&(rdx.utils.is_defined(this._view_definition.dialog_properties.unbind_resource_event_listener)&&this._view_definition.dialog_properties.unbind_resource_event_listener===false)){return}else{if(/_without_global_bindings$/.test(this._view_definition.name)){if(this._resource.binding_resource){rdx.utils.update_resource_bindings(this._resource);return}}else{rdx.model.remove_model_change_listener(this._resource)}}$(".column-filter-wrapper").remove();if(rdx.utils.is_defined(this._search)){this._search.remove()}};rdx.list_view.prototype._refresh_view_on_changed_column_context=function(d,b,a){var e=this._base_view.get_view_context();if(rdx.utils.is_object_not_empty(d)){rdx.url_utils.add_to_url_object(e.get_url_params(),[a],b,d)}else{rdx.url_utils.remove_from_url_object(e.get_url_params(),[a],b)}this.refresh_view()};rdx.list_view.prototype.set_height=function(a){this._table_parent.height(a)};rdx.list_view.prototype._row_selection_changed=function(){this._base_view.refresh_action_bar_state(this.get_item_info())};rdx.list_view.prototype.get_resource_response_arrived=function(b,d){if(this._properties.search===true&&this._properties.enable_tag_search===true){this._search.update_tag_properties()}if(this._crossfilter){if(!rdx.crossfilter_controller.is_resource_crossfilter_present(this._resource.name)){rdx.crossfilter_controller.add_resource_to_crossfilter(this._resource.name,b);if(rdx.utils.is_defined(this._properties.crossfilter.dimension)){b=rdx.crossfilter_controller.get_all_data(this._resource.name,this._properties.crossfilter.dimension)}}if(this._properties.table_type&&!this._compact_table_created){this._create_compact_table()}if(rdx.utils.is_defined(d)&&d){this._pagination.reset_page_number()}var e=this._pagination.get_page_size();var g=this._pagination.get_page_number();b=b.slice(((g-1)*e),g*e)}if(this._properties.table_type&&!this._compact_table_created){this._create_compact_table()}this._response=b;try{rdx.mask.unmask_component(this._table_parent,this._table_mask_id);if(this._properties.pagination&&!this._update_count_from_search_filter&&!this._resource.binding_resource){this._update_total_count();this._update_count_from_search_filter=false}this._component.add_items(b,null,true);if(rdx.utils.is_defined(this._properties.render_summary_content_callback)&&rdx.utils.is_defined(this._summary_div)){this._properties.render_summary_content_callback.call_back([this,this._summary_div,b])}this._row_selection_changed();this._parent.trigger(rdx.events.VIEW_COUNT_CHANGED,b.length);this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);if(rdx.utils.is_defined(this._properties.set_height_of_table_callback)){var a=this._properties.set_height_of_table_callback.call_back();this._component.set_table_height(a)}}catch(f){}};rdx.list_view.prototype._match_update=function(b,a,e,d){if(d===rdx.view_constants.CHECK_IF_EXISTS_AND_ADD_NEW){return this._component.check_if_data_exist(b,this._resource.primary_keys,a,e)}return this._component.update_item_data(b,this._resource.primary_keys,a,e)};rdx.list_view.prototype._refresh_view=function(b,f,g){if(this._base_view._is_view_destroyed){return}if(g&&rdx.utils.is_defined(g.refresh_action)){b=rdx.view_utils.get_model_change_response_formatted(this._view_definition,b);var d=this._get_model_change_operation(f);var p=this._is_progressive_update(d,b);switch(g.refresh_action){case rdx.view_constants.REFRESH_ALL:this.refresh_view();break;case rdx.view_constants.REMOVE_SELECTED:var w=this._resource.primary_keys;if(rdx.utils.is_defined(this._resource.bind_unbind_keys)){w=this._resource.bind_unbind_keys}var m=b[0];if(m&&m.length>1){this._component.delete_items(m,w)}else{this._component.delete_item(m,w)}this._parent.trigger(rdx.events.VIEW_COUNT_CHANGED,this._component.get_item_count());if(this._properties.pagination){this._pagination.decrease_data_range();h=this._pagination.get_total_count()}else{h=this._component.get_rows_data().length}var e=$(this._base_view.get_resource());e.trigger(rdx.events.MODEL_COUNT_CHANGED,h);if(this.crossfilter_enabled()){this.refresh_view()}break;case rdx.view_constants.REFRESH_RELEVANT:case rdx.view_constants.REFRESH_RELEVANT_OR_ADD_NEW:case rdx.view_constants.CHECK_IF_EXISTS_AND_ADD_NEW:var q=g.refresh_action==rdx.view_constants.REFRESH_RELEVANT;if(this._view_definition.response_callback){var z=this;var v=false;var u=g.refresh_action;var s=new rdx.view_callback_on_response_arrived_params({return_call_back:new rdx.callback(function(B){v=z._match_update(B[0],p,q,g.refresh_action);if(v==false&&(u==rdx.view_constants.REFRESH_RELEVANT_OR_ADD_NEW||u==rdx.view_constants.CHECK_IF_EXISTS_AND_ADD_NEW)){z._component.add_item(B[0],null,z._properties.append_data_to_first,null,null,true);z._parent.trigger(rdx.events.VIEW_COUNT_CHANGED,z._component.get_item_count());if(z._properties.pagination){z._pagination.increase_data_range()}}z._row_selection_changed()}),response:b});this._view_definition.response_callback.call_back([s])}else{v=this._match_update(b[0],p,q,g.refresh_action)}if(g.refresh_action==rdx.view_constants.CHECK_IF_EXISTS_AND_ADD_NEW&&(v==true||(v==false&&rdx.utils.is_defined(this._view_definition.response_callback)))){break}if(g.refresh_action==rdx.view_constants.REFRESH_RELEVANT||(g.refresh_action==rdx.view_constants.REFRESH_RELEVANT_OR_ADD_NEW&&(v==true||(v==false&&rdx.utils.is_defined(this._view_definition.response_callback))))){break}case rdx.view_constants.ADD_NEW:this._component.add_item(b[0],null,this._properties.append_data_to_first,null,null,true,true);var e=$(this._base_view.get_resource());var h=0;if(this._properties.pagination){this._pagination.increase_data_range();h=this._pagination.get_total_count()}else{h=this._component.get_rows_data().length}e.trigger(rdx.events.MODEL_COUNT_CHANGED,h);if(this.crossfilter_enabled()){rdx.crossfilter_controller.update_crossfilter_data(this._resource.name,b[0])}break;case rdx.view_constants.REFRESH_RELEVANT_OR_ADD_MULTIPLE:var A=[];var a=[];$.each(b[0],function(B,C){A.push(C)});var v;for(var n=0;n<A.length;n++){v=false;v=this._match_update(A[n],p,false,g.refresh_action);if(v==false){a.push(A[n])}}this._component.add_items(a,null,null,true);this._parent.trigger(rdx.events.VIEW_COUNT_CHANGED,this._component.get_item_count());if(this._properties.pagination){this._pagination.increase_data_range()}break;case rdx.view_constants.REFRESH_NONE:break;case rdx.view_constants.STANDALONE_SEARCH:if(this._view_definition.response_callback){var o=this;var s=new rdx.view_callback_on_response_arrived_params({return_call_back:new rdx.callback(function(B,C){if(rdx.utils.is_defined(o._base_view.app_context_data)){o.get_view_context().set_app_context_data(o._base_view.app_context_data)}else{o.get_view_context().set_app_context_data(B)}if(rdx.utils.is_function(o.get_resource_response_arrived)){o.get_resource_response_arrived(B)}o._base_view._response_arrived()}),response:b,search_params:this._search.get_search_filter_map(),table_component:o._component});this._view_definition.response_callback.call_back([s])}else{throw"Response Callback is not defined"}break}this._check_and_evaluate_for_request_reprocess(b,f,g,d,p);this._row_selection_changed();if(this._view_definition.refresh_data_callback){var t=this._component.get_all_rows_data();this._view_definition.refresh_data_callback.call_back([t])}return}this.refresh_view()};rdx.list_view.prototype._is_progressive_update=function(b,a){var d=false;if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.expression)&&rdx.utils.is_defined(b.refresh_interval)){d=b.expression.evaluate(a)}return d};rdx.list_view.prototype._get_model_change_operation=function(a){if(rdx.utils.is_not_defined(this._view_definition.model_change_operations)){return null}return this._view_definition.model_change_operations[a]};rdx.list_view.prototype._check_and_evaluate_for_request_reprocess=function(f,d,a,b,e){if(rdx.utils.is_defined(b)&&e){a.timeout=b.refresh_interval;a.refresh_action=rdx.view_constants.REFRESH_RELEVANT;a.operation_object=rdx.utils.is_array(f)?f[0]:f;rdx.model.trigger_resource_get(a,this._resource,f,d)}};rdx.list_view.prototype.refresh_view=function(a,d){d=rdx.utils.is_defined(d)?d:false;this._component.delete_all_items();if(this._crossfilter){rdx.crossfilter_controller.remove_crossfilter(this._resource.name)}if(rdx.utils.is_function(this._component.get_header_checkbox)){var b=this._component.get_header_checkbox();if(rdx.utils.is_defined(b)){b.prop("checked",false)}}if(!d){this.get_view_context().invalidate_data()}if(rdx.utils.is_defined(a)){this.get_view_context().set_url_params(a);this._base_view.set_view_context(this.get_view_context())}this._parent.trigger(rdx.events.VIEW_COUNT_CHANGED,this._component.get_item_count());this._base_view.prepare_view()};rdx.list_view.prototype._update_view=function(a){this._component.update_item_data(a,this._resource.primary_keys)};rdx.list_view.prototype._details_renderer=function(e,q){var m=$("<div>").addClass("detail_view_details").addClass("smooth_all_corner");var n;if(this._view_definition.details_view){n=rdx.utils.get_view(this._view_definition.details_view)}else{n={type:rdx.view_constants.INFO_VIEW,view_properties:{number_of_columns:2},resource_name:this._resource.name};n.resource_properties=$.extend({},this._resource.properties)}var f=rdx.utils.get_resource(n.resource_name);if(n.type==rdx.view_constants.DETAIL_VIEW){details_view_context={get_by_name:f.primary_keys}}else{details_view_context={is_data_set:true}}if(rdx.utils.is_object(this._properties.details)&&this._properties.details.inline){if($(q).hasClass("detail_expanded")){if($(q).find("."+this._properties.details_table_class).length>0){$(q).find("."+this._properties.details_table_class).removeClass("inline_info_collapsed")}$(q).addClass("detail_collapsed");$(q).removeClass("detail_expanded");$(q).next().remove()}else{if($(q).find("."+this._properties.details_table_class).length>0){$(q).find("."+this._properties.details_table_class).addClass("inline_info_collapsed")}$(q).removeClass("detail_collapsed");$(q).addClass("detail_expanded");var h=$("<tr>");var b=$("<td>").attr("colspan",rdx.utils.object_keys(this._view_definition.resource_properties).length);h.append(b);h.insertAfter($(q));var o=new rdx.base_view(b,n);var a=o.get_view_context();var p=parseInt($(q).attr("index"))-1;var g=rdx.utils.is_defined(this._response[p])?this._response[p]:{};a.set_url_params({is_data_set:true},g);o.prepare_view()}}else{if(rdx.utils.is_not_defined(this._details_view_rendered)||this._details_view_rendered==false){var d=rdx.view_utils.show_view_in_slider(n,new rdx.callback(function(s){s._details_view_rendered=false},[this]),e,details_view_context,null,{slider_width:"50%"});this._details_view_rendered=true}}};rdx.list_view.prototype.handle_dependency=function(a){this._refresh_view(a.get_value(),null,a.get_resource_context())};rdx.list_view.prototype.get_data=function(a){if(rdx.utils.is_not_defined(a)||a==rdx.view_constants.data_selection_param.SELECTED){return this.get_component().get_selected_items_data()}return this.get_component().get_rows_data()};rdx.list_view.prototype.get_properties=function(){return this._properties};rdx.list_view.prototype.get_resource_name=function(){return this._view_definition.resource_name};rdx.list_view.prototype._do_refresh=function(){if(this._properties.pagination==true){if(this._update_count_from_search_filter&&this._properties.search==true){this._apply_filter()}this._pagination.reset_page_number();if(this._crossfilter===false){this.get_view_context().set_url_params({custom:{pageno:this._pagination.get_page_number(),pagesize:this._pagination.get_page_size()}})}this._update_total_count()}this.refresh_view()};rdx.list_view.prototype._apply_filter=function(){if(rdx.utils.is_defined(this._filter_data)){this.get_view_context().remove_url_type(rdx.url_utils.GET_FILTER_TYPE);this.get_view_context().set_is_query_param(true);var a={filter:this._filter_data.key};this.get_view_context().set_url_params(a,this._filter_data.value)}};rdx.list_view.prototype.set_settings=function(a){this._settings=a};rdx.list_view.prototype.get_settings=function(){return this._settings};rdx.list_view.prototype.get_settings_key=function(){return this._settings_key};rdx.list_view.prototype.set_settings_key=function(a){this._settings_key=a};rdx.list_view.prototype.show_settings_pane=function(b){if($(".options_container_columns").length==0){var a=$("<div>").addClass("options_container_columns");b.after(a)}var d=null;$(".ns_body").bind(rdx.events.MOUSE_UP+" "+rdx.events.KEYUP,function(f){if(rdx.utils.is_defined(f.keyCode)&&f.keyCode!==27){return}else{d=f;if(!($.contains(a[0],f.target))){var e=a.closest(".settings_container.expanded");e.removeClass("expanded");a.remove();$(".ns_body").unbind(rdx.events.MOUSE_UP+" "+rdx.events.KEYUP)}}f.preventDefault()});this._fill_columns_container(a,b,d)};rdx.list_view.prototype._fill_columns_container=function(w,p,q){if(rdx.utils.is_defined(this._all_columns_for_selection_panel)&&rdx.utils.is_defined(w)){w.empty();this._column_checkboxes=null;var d=rdx.utils.get_resource(this._view_definition.resource_name);if(rdx.utils.is_defined(d)){var b=null;var n=null;var g=true;for(var f in this._all_columns_for_selection_panel){var h=d.properties[f];if((rdx.utils.is_defined(h)&&h.label)||rdx.utils.is_defined(this._all_columns_for_selection_panel[f]["label"])){var C=rdx.utils.is_defined(this._all_columns_for_selection_panel[f]["label"])?rdx.i18n.get_string(this._all_columns_for_selection_panel[f]["label"]):rdx.i18n.get_string(h.label);if(this._all_columns_for_selection_panel[f]["hidden"]==true){continue}var s=f;if(rdx.utils.is_not_defined(b)){b=$("<table>").addClass("columns_table").append($("<tbody>"));var t=$("<div>").addClass("columns_table_div");t.append(b);w.append(t)}if(rdx.utils.is_not_defined(n)){n=$("<div>").addClass("add_columns_div");w.append(n);var e=$("<span>").append(rdx.i18n.get_string("rdx.op_wizard_done_button"));var m=$("<button>").addClass("rdx_button rdx_blue_button").attr("aria-label",rdx.i18n.get_string("rdx.op_wizard_done_button")).append(e);n.append(m);m.bind(rdx.events.CLICK,{_this:this,column_container:w,settings_pane:p},function(D){D.data.settings_pane.removeClass("settings_active_span");D.data.settings_pane.closest(".settings_container").removeClass("expanded");if(rdx.utils.is_defined(D.data.column_container)){D.data.column_container.remove();if(rdx.utils.is_defined(q)){$(".ns_body").unbind(q)}D.preventDefault()}D.data._this._persist_column_selection()});var A=$("<span>").append(rdx.i18n.get_string("rdx.op_wizard_cancel_button"));var v=$("<button>").addClass("rdx_button rdx_grey_button").attr("aria-label",rdx.i18n.get_string("rdx.op_wizard_cancel_button")).append(A);n.append(v);v.bind(rdx.events.CLICK,{column_container:w,settings_pane:p},function(D){D.data.settings_pane.removeClass("settings_active_span");D.data.settings_pane.closest(".settings_container").removeClass("expanded");if(rdx.utils.is_defined(D.data.column_container)){D.data.column_container.remove();if(rdx.utils.is_defined(q)){$(".ns_body").unbind(q)}D.preventDefault()}});var u=$("<a>").attr("href","#").addClass("defaults_link").append(rdx.i18n.get_string("rdx.go_back_to_default"));u.bind(rdx.events.CLICK,{_this:this,column_container:w,settings_pane:p},function(D){D.data.settings_pane.removeClass("settings_active_span");D.data.settings_pane.closest(".settings_container").removeClass("expanded");if(rdx.utils.is_defined(D.data._this)){D.data._this._go_back_to_default_column_selection();D.data.column_container.remove();if(rdx.utils.is_defined(q)){$(".ns_body").unbind(q)}D.preventDefault()}});n.append(u)}if(rdx.utils.is_not_defined(this._column_checkboxes)){this._column_checkboxes=new Array()}var a=$("<tr>");var B=$("<td>");var z=$("<td>");b.append(a);a.append(B).append(z);var o=null;if(this._is_column_visible(s)){o=$("<input type = 'checkbox' checked>").attr({"aria-label":"select"})}else{o=$("<input type = 'checkbox'>").attr({"aria-label":"select"})}if(!this._is_removable(f)||g==true){if(o.prop("checked")==false){o.prop("disabled",false)}else{o.prop("disabled",true)}}g=false;o.bind(rdx.events.CLICK,{},function(D){});o.attr("label",C).attr("value",s);B.append(o);z.append(C);this._column_checkboxes.push(o)}}}}};rdx.list_view.prototype._initialize_all_columns=function(){var a=this._view_definition.resource_properties;if(rdx.utils.is_defined(a)){this._all_columns=new Object();this._all_columns_for_selection_panel=new Object();for(var b in a){if(rdx.utils.is_defined(a[b].render)&&!a[b].render.evaluate()){continue}if(rdx.utils.is_defined(a[b]["is_default_property"])&&a[b]["is_default_property"]==false){this._all_columns_for_selection_panel[b]=a[b];continue}if(rdx.utils.is_not_defined(a[b].hidden)||a[b].hidden!=true){this._all_columns[b]=a[b];this._all_columns_for_selection_panel[b]=a[b]}}}};rdx.list_view.prototype._initialize_visible_columns_from_settings=function(){var e=this._view_definition.resource_properties;var h=this.get_settings();var d=h.columns;if(rdx.utils.is_defined(d)){this._visible_columns=new Object();var m=new Array();for(var g in d){if(rdx.utils.is_not_empty(g)){var f=e[g];if(rdx.utils.is_defined(f)){if(rdx.utils.is_not_defined(f.hidden)||!f.hidden){m[d[g]["index"]]=g}}}}for(var b=0,a=m.length;b<a;b++){if(rdx.utils.is_defined(m[b])){this._visible_columns[m[b]]=b}}}};rdx.list_view.prototype._is_column_visible=function(b){var a=false;if(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)){a=rdx.utils.is_defined(this._settings.columns[b])}else{if(rdx.utils.is_defined(this._visible_columns)){a=rdx.utils.is_defined(this._visible_columns[b])}}return a};rdx.list_view.prototype._persist_column_selection=function(){var h=new Array();var b=new Array();var s=new Array();var e=JSON.parse(JSON.stringify(this._visible_columns));var f=Object.keys(this._view_definition.resource_properties);var q=(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns))?this._settings:this._visible_columns;if(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)){q=q.columns;for(var d in q){if(rdx.utils.is_defined(e[d])){h[this._settings.columns[d]["index"]]=d}}}else{for(var d in q){h.push(d)}}for(var v=0,z=this._column_checkboxes.length;v<z;v++){var p=this._column_checkboxes[v];var t=p.attr("value");var o=p.prop("checked");if(rdx.utils.is_defined(o)&&o==true){b.push(t)}else{s.push(t)}}for(var v=0,z=b.length;v<z;v++){var m=b[v];if(jQuery.inArray(m,h)==-1){h.push(m)}}for(var v=0,z=s.length;v<z;v++){var g=s[v];if(jQuery.inArray(g,h)!=-1){h.splice($.inArray(g,h),1)}}var n=h.slice(),v=1;h=[];for(var v=0,u=1;v<f.length;v++){if(n.indexOf(f[v])>=0){h[u]=f[v];u++}}this._visible_columns=null;if(rdx.utils.is_defined(this._all_columns_for_selection_panel)&&rdx.utils.is_defined(h)&&h.length){this._visible_columns=new Object();for(var v=0,z=h.length;v<z;v++){var w=h[v];if(rdx.utils.is_defined(w)){this._visible_columns[w]=this._all_columns_for_selection_panel[w];if(rdx.utils.is_defined(this._visible_columns[w])){this._visible_columns[w]["index"]=v}}}if(rdx.utils.is_defined(this._base_view._view._action_items)&&this._base_view._view._action_items.length>0){this._base_view._view_container.empty();this._base_view.destroy_view();this._is_done_clicked=true;if(rdx.utils.is_defined(this._base_view._view._toolbar_items)&&this._base_view._view._toolbar_items.length>=2){this._base_view._view._toolbar_items.pop()}this._base_view._parent.append(this._base_view._view_div);this._base_view._view_div.append(this._base_view._view_container);var a=this.get_view_context();a.invalidate_data();this._base_view.set_view_context(a);this._base_view.prepare_view()}else{this._table_parent.find(".table_table_div").empty();this._add_table()}this._component.add_items(this._response,null,true);this._update_settings();this._update_settings_with_new_column_sizes();this._save_new_settings();this._is_done_clicked=false}};rdx.list_view.prototype._update_settings=function(){if(rdx.utils.is_defined(this._visible_columns)){this._settings=null;var a=1;for(var b in this._visible_columns){if(rdx.utils.is_not_defined(this._settings)){this._settings=new Object();this._settings.columns=new Object()}var d=new Object();d.index=a++;this._settings.columns[b]=d}this._current_number_of_columns=a}};rdx.list_view.prototype._save_new_settings=function(){if(rdx.utils.is_defined(this._settings)){var b=JSON.stringify(this._settings);var d=rdx.utils.get_resource(rdx.SETTINGS_RESOURCE_NAME);if(rdx.utils.is_defined(d)){if(rdx.utils.is_defined(this._settings_key)){var a=new Object();a[rdx.SETTINGS_RESOURCE_KEY_PROPERTY_NAME]=this._settings_key;a[rdx.SETTINGS_RESOURCE_VALUE_PROPERTY_NAME]=b;rdx.model.set(d,new rdx.callback(null,function(){}),a);if(rdx.utils.is_defined(rdx.settings_object)){rdx.settings_object[this._settings_key]=b}}}}};rdx.list_view.prototype._update_settings_with_new_order=function(a,d){if(rdx.utils.is_not_defined(this._settings)||rdx.utils.is_not_defined(this._settings.columns)){this._update_settings()}if(a>d){var f=null;for(var e in this._settings.columns){var b=this._settings.columns[e]["index"];if(b<a&&b>=d){this._settings.columns[e]["index"]=parseInt(this._settings.columns[e]["index"])+1}if(b==a){f=e}}}if(a<d){var f=null;for(var e in this._settings.columns){var b=this._settings.columns[e]["index"];if(b>a&&b<=d){this._settings.columns[e]["index"]=parseInt(this._settings.columns[e]["index"])-1}if(b==a){f=e}}}if(rdx.utils.is_defined(f)){var g=this._settings.columns[f];if(rdx.utils.is_not_defined(g)){g=new Object()}g.index=d;this._settings.columns[f]=g}};rdx.list_view.prototype._is_removable=function(m){var a=true;var h=this._resource;var g=false;var f=this._view_definition.resource_properties;if(rdx.utils.is_defined(h.primary_keys)&&rdx.utils.is_array(h.primary_keys)&&h.primary_keys.length){for(var e=0,d=h.primary_keys.length;e<d;e++){var b=h.primary_keys[e];if(m==b){g=true;break}}}if(g==false){if(!(rdx.utils.is_not_defined(f[m].removable)||f[m].removable==true)){a=false}}else{a=false}return a};rdx.list_view.prototype.add_mask=function(){return true};rdx.list_view.prototype._go_back_to_default_column_selection=function(){this._visible_columns=this._all_columns;this._is_setting_back_to_default=true;if((rdx.utils.is_defined(this._base_view._view._action_items)&&this._base_view._view._action_items.length>0)){this._base_view._view_container.empty();this._base_view.destroy_view();if((rdx.utils.is_defined(this._base_view._view._toolbar_items)&&this._base_view._view._toolbar_items.length>=2)){this._base_view._view._toolbar_items.pop()}this._base_view._parent.append(this._base_view._view_div);this._base_view._view_div.append(this._base_view._view_container);var a=this.get_view_context();a.invalidate_data();this._base_view.set_view_context(a);this._base_view.prepare_view()}else{this._table_parent.find(".table_table_div").empty();this._add_table()}this._component.add_items(this._response,null,true);this._update_settings();this._update_settings_with_new_column_sizes();this._save_new_settings();this._is_setting_back_to_default=false};rdx.list_view.prototype._update_settings_with_new_sort_key=function(d,b){if(rdx.utils.is_not_defined(this._settings)||rdx.utils.is_not_defined(this._settings.columns)){this._update_settings()}if(rdx.utils.is_defined(d)&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)){for(var e in this._settings.columns){var a=this._settings.columns[e];if(e==d){a.default_sort=b}else{a.default_sort=null}}}};rdx.list_view.prototype._apply_sort_order_from_settings=function(d,e){if(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)&&rdx.utils.is_defined(e)&&rdx.utils.is_defined(d)){for(var a in this._settings.columns){var b=this._settings.columns[a];if(rdx.utils.is_defined(b)){if(a==e){if(b.default_sort!=null){d.default_sort=b.default_sort;return}}}}d.default_sort=null}};rdx.list_view.prototype._update_settings_with_new_column_sizes=function(){var n=this._component;if(rdx.utils.is_defined(n)){var b=n.get_headers();if(rdx.utils.is_defined(b)&&rdx.utils.is_array(b)&&b.length){if(rdx.utils.is_not_defined(this._settings)||rdx.utils.is_not_defined(this._settings.columns)){this._update_settings()}for(var e=0,g=b.length;e<g;e++){var f=b[e];var m=f.key;var a=f.value;var h=$(a).width();var d=screen.width;var o=h/d;if(rdx.utils.is_defined(this._settings.columns)&&rdx.utils.is_defined(this._settings.columns[m])){this._settings.columns[m]["size_factor"]=o}else{if(rdx.utils.is_not_defined(this._settings.columns[m])){this._settings.columns[m]=new Object();this._settings.columns[m]["index"]=this._current_number_of_columns++}this._settings.columns[m]["size_factor"]=null}}}}};rdx.list_view.prototype._apply_size_from_settings=function(d,e){if(rdx.utils.is_defined(this._settings)&&rdx.utils.is_defined(this._settings.columns)&&rdx.utils.is_defined(e)&&rdx.utils.is_defined(d)){for(var a in this._settings.columns){var b=this._settings.columns[a];if(rdx.utils.is_defined(b)){if(a==e){if(b.size_factor!=null){d.width=parseFloat(b.size_factor)*screen.width;return}}}}}};rdx.list_view.prototype.refresh_view_with_resrc_context=function(b,d,a){this._refresh_view(b,d,a)};rdx.list_view.prototype.is_title_required=function(){return true};rdx.list_view.prototype._drilldown_renderer=function(d){var e=this._properties.drilldown_renderer_callback.get_params();var a=[d[0],this.get_base_view()];if(rdx.utils.is_defined(e)&&(e.length>0)){for(var b=0;b<e.length;b++){a.push(e[b])}}this._properties.drilldown_renderer_callback.call_back(a)};rdx.list_view.prototype._create_compact_table=function(){if(this._properties.table_type){var a=this._component._table_thead_row.height();var b=this._component._table_div.height();var d=b-a;var e=Math.floor(d/this._properties.table_row_height);this._component.set_total_number_rows(e);if(this._pagination){this._pagination.set_page_size(e)}this._compact_table_created=true}};rdx.list_view.prototype.action_on_view_selection=function(g,f){var a=this._base_view;var d=this._base_view.get_view_definition().view_properties.dependent_views;if(rdx.utils.is_defined(d)){for(var b=0;b<d.length;b++){var e=rdx.active_views.get_view(d[b]);if(rdx.utils.is_defined(e)){e.refresh_view(null,true)}}}};rdx.list_view.prototype._get_tag_properties=function(a){var e=this._properties.tag_properties;var f=a[e.resource_name];var b=[];for(var d=0;d<f.length;d++){if(f[d]["entity_type"]===e.entity_type){if(rdx.utils.is_array(f[d][e.key])){b=f[d][e.key]}else{if(rdx.utils.is_not_empty(f[d][e.key])){b=f[d][e.key].split(",")}}break}}this._tag_keys=b;this._add_search_filter()};rdx.list_view.prototype.crossfilter_enabled=function(){var a=false;if(this._properties.pagination==true&&rdx.utils.is_defined(this._properties.crossfilter)){a=true}return a};rdx.summary_detail_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._form_controller=new rdx.form_controller(this._base_view,this._parent,false);this._DEFAULT_PROPERTIES={pagination:false,no_rows_show_table:true,add_button_label:"Add",add_button_required:true,add_introduction_message:false,configuration_required:true,view_selector_title:"",no_default_configuration:false,view_selector:null,view_selector_change_callback:null,add_custom_view:null};this._view_selector_value=null;this._response=[];this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.view_properties);this._row_click_handler_callback=null;this._row_remove_click_handler_callback=null};rdx.summary_detail_view.prototype=new rdx.abstract_view();rdx.summary_detail_view.prototype.make_view=function(){this._parent.addClass("summary_detail_view");if(this._properties.add_introduction_message){var g=$("<div>").addClass("intro_message");this._properties.introduction_message_renderer_callback(g);this._parent.append(g)}if(rdx.utils.is_defined(this._properties.add_custom_view)){var m=$("<div>");var q=$.extend(true,{},rdx.utils.get_view(this._properties.add_custom_view));var A=new rdx.base_view(m,q);A.prepare_view();this._parent.append(m)}var v=$("<div>").addClass("clearfix").hide();if(this._properties.configuration_required){v.show()}if(rdx.utils.is_defined(this._properties.view_selector)){var z=$("<div>");var o=$("<div>");var u=[];for(var t=0;t<this._properties.view_selector.length;t++){u.push(this._properties.view_selector[t].name)}var s=new rdx.form_field({input_type:rdx.form_constants.LIST,properties:{size:1},label:this._properties.view_selector_title,mandatory:true,formatter:{map:u}});var n=new rdx.list(o,s);n.render();z.append(o);n.get_component().addClass("summary_view_selector");n.get_component().on("change",{that:this,view_selector:this._properties.view_selector},function(D){var B=true;D.data.that._view_selector_value=D.data.view_selector;for(var C=0;C<D.data.view_selector.length;C++){if(D.data.view_selector[C]["name"]==this.value){B=D.data.view_selector[C]["show_view"]}}if(!B){v.hide()}else{v.show()}if(rdx.utils.is_defined(D.data.that._properties.view_selector_change_callback)){D.data.that._properties.view_selector_change_callback.call_back([this.value])}});this._parent.append(z)}var p=$("<div>");v.append(p);var f=rdx.utils.object_keys(this._response);if((rdx.utils.is_defined(this._response)&&f.length>0)||this._properties.no_default_configuration){this._row_divs=[];for(var t=0;t<f.length;t++){var h=this._response[f[t]];var w=$("<div>");this._row_divs.push(w);var b=$.extend(true,{},rdx.utils.get_view(this._properties.summary_row_view));var d=b.response_callback;b.response_callback=new rdx.callback(this,this._summary_view_response_callback,[d,f[t]]);b.view_properties.edit_click_handler_callback=new rdx.callback(this,this.summary_view_edit_click_handler_callback,[f[t]]);b.view_properties.delete_click_handler_callback=new rdx.callback(this,this.summary_view_delete_click_handler_callback,[b.view_properties.delete_callback,f[t]]);var A=new rdx.base_view(w,b);if(rdx.utils.is_defined(A._resource)){var a=A.get_view_context();a.set_url_params({get_by_name:A._resource.primary_keys},h)}A.prepare_view();this._parent.append(w)}if(this._properties.add_button_required){var e=$("<input type = 'button'>").addClass("rdx_button rdx_grey_button").attr("value",(this._properties.add_button_label));this._button_div=$("<div>");this._button_div.append(e);this._button_div.bind(rdx.events.CLICK,{that:this,add_row_div:p},function(B){B.data.that._render_add_new(B.data.add_row_div);e.addClass("hide")})}this._parent.append(v);this._parent.append(this._button_div)}else{this._parent.append(v);this._render_add_new(p)}};rdx.summary_detail_view.prototype._render_add_new=function(e){var a=$.extend(true,{},rdx.utils.get_view(this._properties.add_row_view));var d=new rdx.base_view(e,a);var f=a.view_properties.callback_before_operation;var g=a.view_properties.callback_after_operation;a.view_properties.callback_before_operation=new rdx.callback(this,this._add_row_view_callback_before_operation,[d,f]);a.view_properties.callback_after_operation=new rdx.callback(this,this._add_row_view_callback_after_operation,[d,g]);var b=d.get_view();b.set_custom_cancel_handler_callback(new rdx.callback(this,this._close_row_view_callback_before_operation,[d]));d.prepare_view()};rdx.summary_detail_view.prototype._summary_view_response_callback=function(e,a,b){var d={};d.index=b;d.response=this._response[b];if(rdx.utils.is_defined(a)&&rdx.utils.is_function(a.call_back)){a.call_back([e,d])}else{e.resume(d)}};rdx.summary_detail_view.prototype.summary_view_edit_click_handler_callback=function(b){var f=this._row_divs[b];f.append($("<div>")).addClass("clearfix");var h=$("<div>");f.append(h);var a=$.extend(true,{},rdx.utils.get_view(this._properties.edit_row_view));a.view_properties.button_label="Save";var m=a.response_callback;a.response_callback=new rdx.callback(this,this.row_edit_view_response_callback,[m,b]);var n=new rdx.base_view(h,a);var g=a.view_properties.callback_before_operation;var e=a.view_properties.callback_after_operation;a.view_properties.callback_before_operation=new rdx.callback(this,this._add_row_view_callback_before_operation,[n,g,b]);a.view_properties.callback_after_operation=new rdx.callback(this,this._add_row_view_callback_after_operation,[n,e,b]);var d=n.get_view();d.set_custom_cancel_handler_callback(new rdx.callback(this,this._close_row_view_callback_before_operation,[n]));n.prepare_view();if(rdx.utils.is_defined(this._properties.add_button_required)&&this._properties.add_button_required){this._button_div.hide()}};rdx.summary_detail_view.prototype.row_edit_view_response_callback=function(d,a,b){if(rdx.utils.is_defined(a)&&rdx.utils.is_function(a.call_back)){a.call_back([d,this._response[b]])}else{d.resume(this._response[b])}};rdx.summary_detail_view.prototype.summary_view_delete_click_handler_callback=function(e,b){var d=this;var g=this._response[b];var a={return_call_back:new rdx.callback(function(h,m){d._response.splice(b,1);d.refresh_view()}),response:g};var f=new rdx.view_callback_on_response_arrived_params(a);if(rdx.utils.is_defined(e)&&rdx.utils.is_function(e.call_back)){e.call_back([f])}};rdx.summary_detail_view.prototype._add_row_view_callback_before_operation=function(e,a,d,b){if(rdx.utils.is_defined(d)&&rdx.utils.is_function(d.call_back)){e=d.call_back([e])}return e};rdx.summary_detail_view.prototype._add_row_view_callback_after_operation=function(e,a,f,b){if(rdx.utils.is_defined(f)&&rdx.utils.is_function(f.call_back)){e=f.call_back([e])}if(e.status){var d=e.result.get_collated_resource_for_operation();if(rdx.utils.is_defined(b)){this._response.splice(b,1,d)}else{this._response.push(d)}a.destroy_view();this.refresh_view()}e.params.resume()};rdx.summary_detail_view.prototype._close_row_view_callback_before_operation=function(b,a){this.refresh_view();return false};rdx.summary_detail_view.prototype.refresh_view=function(){this._parent.empty();this.make_view()};rdx.summary_detail_view.prototype.get_resource_response_arrived=function(a){this._response=a;this.refresh_view()};rdx.navigation_steps_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._DEFAULT_PROPERTIES={pagination:false,no_rows_show_table:true};this._response=null;this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.view_properties)};rdx.navigation_steps_view.prototype=new rdx.abstract_view();rdx.navigation_steps_view.prototype.make_view=function(){var d=$("<div>").addClass("clearfix");var o=$("<div>").addClass("navigation_heading rdx_border smooth_all_corner").text("Steps");var g=$("<div>").addClass("navigation_steps_content");d.append(o);var h=false;if(rdx.utils.is_defined(this._response)){for(var e=0;e<this._response.length;e++){var f=$("<div>").addClass("rdx_border smooth_all_corner");var n=$("<span>").addClass("navigation_steps_number").text(e+1);var m=$("<span>").addClass("navigation_steps_list").text(this._response[e]["step"]);var b=$("<span>").addClass("rdx_green_tick_background").css("float","right");b.hide();if(rdx.utils.is_defined(this._response[e]["selected"])&&this._response[e]["selected"]){h=true;f.addClass("navigation_steps_list_selected");b.hide()}else{if(!h){f.removeClass("navigation_steps_list_selected");b.show()}}f.append(n);f.append(m);f.append(b);g.append(f);if(e!=this._response.length-1){var a=$("<div>").addClass("rdx_down_flow_arrow");g.append(a)}}}d.append(g);this._parent.append(d)};rdx.navigation_steps_view.prototype.refresh_view=function(){this._parent.empty();this.make_view()};rdx.navigation_steps_view.prototype.get_resource_response_arrived=function(a){this._response=a;this.refresh_view()};rdx.summary_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._DEFAULT_PROPERTIES={pagination:false,no_rows_show_table:true};this._response=null;this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.view_properties);this._row_click_handler_callback=null;this._row_remove_click_handler_callback=null};rdx.summary_view.prototype=new rdx.abstract_view();rdx.summary_view.prototype.make_view=function(){var w=$("<div>").addClass("clearfix").addClass("summary_view").css("display","flex");var n=0;if(rdx.utils.is_defined(this._response)){n=this._response.index}if(rdx.utils.is_defined(this._response)){var a=this._response.response[0]}var u=$("<div>").addClass("summary_index").text(parseInt(n)+1);if(rdx.utils.is_defined(this._properties.is_index_tag_required)){var b=this._properties.is_index_tag_required(a);u.append(b)}w.append(u);var f=$("<div>").addClass("summary_content");w.append(f);var d=Object.keys(this._view_definition.resource_properties).length;width_percentage=parseInt(100/d);for(var e in this._view_definition.resource_properties){var p=this._view_definition.resource_properties[e]["label"];var v="-NA-";if(rdx.utils.is_defined(a)){v=a[e]}var z=$("<div>").addClass("summary_data").attr("style","width: "+width_percentage+"%;");var s=$("<div>").css("color","#999");s.text(p);var g=$("<div>").text(v);z.append(s).append(g);f.append(z)}var q=$("<div>").addClass("clearfix summary_tools");var h=$("<div>").addClass("summary_tools_edit");var t=$("<div>");var o=this;h.on(rdx.events.CLICK,function(){o._base_view.destroy_view();o._properties.edit_click_handler_callback.call_back()});var m=$("<div>").addClass("summary_tools_delete");m.on(rdx.events.CLICK,function(){o._properties.delete_click_handler_callback.call_back()});q.append(m).append(h);w.append(q);this._parent.append(w)};rdx.summary_view.prototype._destroy_view=function(a){a.hide()};rdx.summary_view.prototype.get_resource_response_arrived=function(a){this._response=a;this._parent.empty();this.make_view()};rdx.list_controller=function(b,a){this._list_view=b;this._parent=a;this._active_view=null};rdx.list_controller.prototype._get_resource_for_operation=function(e){var f={};var a=this._list_view._resource.primary_keys;for(var d=0,b=a.length;d<b;d++){f[a[d]]=e[a[d]]}return f};rdx.list_controller.prototype._get_modified_data=function(a){if(rdx.utils.is_not_defined(this._list_view.get_base_view().get_inherited_data_callback())){return a}var b=a;if(rdx.utils.is_array(b)){return b[0]=$.extend(true,this._list_view.get_base_view().get_inherited_data_callback().call_back(),b[0])}else{b=$.extend(true,this._list_view.get_base_view().get_inherited_data_callback().call_back(),b)}return b};rdx.list_controller.prototype._do_add=function(a){if(!rdx.view_utils.is_view_active(this._list_view.get_base_view())){return}var e=this._list_view.get_view_context();data=e.get_data();if(data.length==0){data.push({})}var d=this._get_view(rdx.utils.get_view(a.view));var b=d.get_view_context();b.set_url_params({is_data_set:true},this._get_modified_data(data));d.prepare_view()};rdx.list_controller.prototype._do_insert=function(a){a.independent_of_selection=true;this._do_generic_custom_operation(a,true)};rdx.list_controller.prototype._do_set=function(a){if(!rdx.view_utils.is_view_active(this._list_view.get_base_view())){return}var b=(rdx.utils.is_defined(a.selected_rows_for_action))?a.selected_rows_for_action:this._list_view._component.get_selected_items_data();if(b.length==0){return}var f=this._list_view.get_view_context();var d=this._get_view(rdx.utils.get_view(a.view));var g=d.get_view_context();var e=rdx.utils.is_defined(a.selected_rows_for_action)?a.selected_rows_for_action:f.get_data();g.set_url_params({get_by_name:this._list_view._resource.primary_keys},e);rdx.set_view_context=g;d.prepare_view()};rdx.list_controller.prototype._do_delet=function(a){this._perform_operation(rdx.model.no_op,a)};rdx.list_controller.prototype._do_remove=function(a){this._perform_operation(rdx.model.remove,a)};rdx.list_controller.prototype._do_enable=function(a){this._perform_operation(rdx.model.post,a,"rdx.ajax_status_enabling","rdx.ajax_status_enabling_completed")};rdx.list_controller.prototype._do_disable=function(a){this._perform_operation(rdx.model.post,a,"rdx.ajax_status_disabling","rdx.ajax_status_disabling_completed")};rdx.list_controller.prototype._do_reboot=function(a){this._perform_operation(rdx.model.post,a,"rdx.ajax_status_rebooting","rdx.ajax_status_rebooting_completed")};rdx.list_controller.prototype._do_rename=function(q){if(!rdx.view_utils.is_view_active(this._list_view.get_base_view())){return}var d=this._list_view._component.get_selected_items_data();if(d.length==0){return}var n=this._list_view._resource;var o=n.primary_keys[0];var g="newname";if(rdx.utils.is_not_defined(n.properties[g])){n.properties[g]={key:"newname",type:"VALNAME",validation_type:"VALNAME",label:n.properties[o].label,mandatory:true}}if(rdx.utils.is_defined(n.properties[o].tooltip)){n.properties[g]["tooltip"]=n.properties[o].tooltip}var e=this._list_view._view_definition.resource_properties[o];if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.label)){n.properties[g].label=e.label}var s=rdx.i18n.get_string(n.obj_type);var m=rdx.i18n.get_string("rdx.view_configure_title_rename",{obj_type:s});var f={type:rdx.view_constants.CONFIGURE_VIEW,resource_properties:{},view_properties:{submit_operation:{method:"post",action:"rename"},title:m}};f.resource_name=(q.fetch_resrc_name_from_view)?this._list_view.get_resource_name():n.name;f.resource_properties[o]={hidden:"true"};f.resource_properties[g]={};var b=$.extend({},d[0]);b[g]=b[o];var h=this._get_view(f);var p=this._list_view.get_view_context();var a=h.get_view_context();a.set_url_params({is_data_set:true},b);h.prepare_view()};rdx.list_controller.prototype._perform_operation=function(a,n,e,g){if(!rdx.view_utils.is_view_active(this._list_view.get_base_view())){return}var f=(n.action)?n.action:(rdx.i18n.get_string(n.label)).toLowerCase();var b=(rdx.utils.is_defined(n.selected_rows_for_action))?n.selected_rows_for_action:this._list_view._component.get_selected_items_data();var d={action_properties:n,resource_defn:this._list_view._resource,activity:e,status:g,refresh_action:n.refresh_action};if(n.no_selection&&b.length==0||n.independent_of_selection){d.view_resource_data={};a.apply(rdx.model,[this._list_view._resource,new rdx.callback(),{},null,f,d,this._parent])}else{if(b.length>1&&rdx.utils.is_defined(n.method)&&n.method==rdx.model_constants.NOOP&&n.refresh_action==rdx.view_constants.REMOVE_SELECTED){d.view_resource_data=b;a.apply(rdx.model,[this._list_view._resource,new rdx.callback(),b,null,f,d,this._parent])}else{for(var h=0,m=b.length;h<m;h++){d.view_resource_data=b[h];a.apply(rdx.model,[this._list_view._resource,new rdx.callback(),this._get_resource_for_operation(b[h]),null,f,d,this._parent])}}}};rdx.list_controller.prototype._do_generic_custom_operation=function(f,g){var h=rdx.utils.is_defined(f.state)&&(f.state==rdx.OPEN);if(!rdx.view_utils.is_view_active(this._list_view.get_base_view())&&h==false){return}var a=this._list_view.get_base_view();if(rdx.utils.is_defined(f.view)||rdx.utils.is_defined(f.view_dfn)){if(rdx.utils.is_defined(f.state)&&(f.state==rdx.CLOSE)&&rdx.utils.is_defined(this._active_view)&&this._active_view!=null){if(rdx.utils.is_function(this._active_view.destroy_view)){this._active_view.destroy_view();this._list_view.get_inline_view_parent().empty();return}}var o=rdx.utils.is_defined(f.view_dfn)?f.view_dfn:rdx.utils.get_view(f.view);o=$.extend(true,{},o);var n=this._list_view.get_base_view().get_parent();if(rdx.utils.is_defined(f.dialog_properties)){o.dialog_properties=$.extend(true,{width:500},f.dialog_properties);o.view_properties=rdx.utils.is_not_defined(o.view_properties)?{}:o.view_properties;o.dialog_properties.view_properties=$.extend(true,{resource_name:this._list_view.get_base_view().get_resource().name},o.dialog_properties.view_properties);o.view_properties.show_select_component=rdx.form_constants.CHECK_BOX;o.view_properties.add_create_button=false;o.view_properties.add_close_button=false;o.view_properties.add_button_bar=true;delete o.add_to_bread_crumb}if(rdx.utils.is_defined(f.dynamic_view_properties)){o.view_properties=rdx.utils.is_not_defined(o.view_properties)?{}:o.view_properties;o.view_properties=$.extend(true,o.view_properties,f.dynamic_view_properties)}var p=this._get_view(o);if(rdx.utils.is_defined(f.reset_action_callback)){$(p).bind(rdx.events.VIEW_DESTROYED,{action_properties:f},function(B){B.data.action_properties.reset_action_callback.call_back()})}var u=this._list_view.get_view_context();var z=p.get_view_context();var s=rdx.utils.is_defined(g)?null:u.get_data();var v=this._list_view.get_base_view();if(rdx.utils.is_defined(this._list_view.get_component())&&this._list_view.get_component() instanceof rdx.table&&!(this._list_view.get_component().get_selected_row_count())){if(rdx.utils.is_defined(v.get_view_definition().bread_crumb_formatter)){var w={};if(rdx.utils.is_defined(v.get_bread_crumb_processing_data())){var A=v.get_bread_crumb_processing_data()[0];var e=v.get_view_definition().bread_crumb_data_formatter;if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(A)){for(var d in e){if(rdx.utils.is_defined(A[d])){A[e[d]]=A[d];s=A}}}}}}var m=new Object();var b=rdx.utils.get_cookie("hide_builtin_policies");if(rdx.utils.is_empty(b)){b="true"}var q={};if(rdx.utils.is_defined(o.view_properties.show_hide_link_filter)){q=o.view_properties.show_hide_link_filter}else{q={static_filter:{isdefault:"false"}}}if(rdx.utils.is_not_defined(f.view_context)){if(rdx.utils.is_defined(o.view_properties.show_hide_link)&&o.view_properties.show_hide_link&&(b==true||b=="true")){m.static_filter=q.static_filter}if(rdx.utils.get_view(f.view).resource_name&&rdx.utils.is_not_defined(g)){m.get_by_name=rdx.utils.get_resource(o.resource_name).primary_keys}z.set_url_params(m,this._get_modified_data(s))}else{if(rdx.utils.is_defined(o.view_properties.show_hide_link)&&o.view_properties.show_hide_link&&(b==true||b=="true")){m=$.extend(true,f.view_context,q)}else{m=f.view_context}z.set_url_params(m,this._get_modified_data(s))}if(f.is_app_context_data_set){var t=this._list_view._component.get_selected_items_data();z.set_app_context_data(t)}p.prepare_view();this._active_view=p}else{this._perform_operation(rdx.model.post,f)}};rdx.list_controller.prototype._get_view=function(d){var a=null;var b=rdx.utils.is_defined(d.view_properties)?d.view_properties:{};d.view_properties=b;if(rdx.utils.is_not_defined(this._list_view.get_base_view().get_crumb_handler())&&this._list_view.get_base_view().is_show_in_slider()==false){a=rdx.view_utils.show_view_in_full_page(d,this._list_view.get_base_view())}else{if(rdx.utils.is_not_defined(this._list_view.get_base_view().get_crumb_handler())&&this._list_view.get_base_view().is_show_in_slider()==true&&(rdx.utils.is_not_defined(b.render_mode)||(rdx.utils.is_defined(b.render_mode)&&b.render_mode!=rdx.INLINE))){a=rdx.view_utils.show_view_in_slider(d,null,null,null,false)}else{a=new rdx.base_view(this._get_view_container(d),d);a.set_crumb_handler(this._list_view.get_base_view().get_crumb_handler())}}return a};rdx.list_controller.prototype._get_view_container=function(d){var b=false;if(rdx.utils.is_defined(d.view_properties)){if(rdx.utils.is_defined(d.view_properties.toggle_view)){b=d.view_properties.toggle_view}if(rdx.utils.is_defined(d.view_properties.render_mode)&&d.view_properties.render_mode==rdx.INLINE){return this._list_view.get_inline_view_parent()}}var a=this._list_view.get_base_view().get_crumb_handler();a=rdx.utils.is_not_defined(a)?this._list_view.get_base_view().get_parent():a;if(b==true){a=rdx.page.get_content()}return a};rdx.list_controller.prototype._do_custom_operation=function(b,m){if(!rdx.view_utils.is_view_active(this._list_view.get_base_view())){return}var g=(rdx.utils.is_defined(b.selected_rows_for_action))?b.selected_rows_for_action:this._list_view._component.get_selected_items_data();var h=(this._list_view.get_component() instanceof rdx.table)?this._list_view._component.get_all_rows_data():null;var d=new Array();if(rdx.utils.is_not_defined(b.independent_of_selection)||!b.independent_of_selection){for(var f=0,e=g.length;f<e;f++){d.push(this._get_resource_for_operation(g[f]))}}var a={action_properties:b,resource_defn:this._list_view._resource,refresh_action:b.refresh_action};m.call_back([new rdx.list_view_action_callback_params({selected_rows_primary_keys:d,selected_rows_data:g,all_rows_data:h,resource_context:a,list_view:this._list_view,inherit_data:this._get_modified_data(g)})])};rdx.configure_view_operation_params=function(a){this._DEFAULT_PROPERTIES={resource_defn:null,resource_for_operation:null,callback_on_success:null,callback_on_failure:null,continue_on_error:false,model_method:null,param:null,return_call_back:null,app_context_data:null,show_field_error_callback:null,action:null,resource_context:null,dom_element:null,form_data:null,activate_view_state:null,unmask_view:null,mask_view:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.configure_view_operation_params.prototype.get_resource_defn=function(){return this._properties.resource_defn};rdx.configure_view_operation_params.prototype.show_error=function(a){if(rdx.utils.is_not_defined(this._properties.show_field_error_callback)){return}this._properties.show_field_error_callback.call_back([a])};rdx.configure_view_operation_params.prototype.activate_view_state=function(){if(rdx.utils.is_not_defined(this._properties.activate_view_state)){return}this._properties.activate_view_state.call_back()};rdx.configure_view_operation_params.prototype.get_resource_for_operation=function(){return this._properties.resource_for_operation};rdx.configure_view_operation_params.prototype.get_callback_on_success=function(){return this._properties.callback_on_success};rdx.configure_view_operation_params.prototype.get_callback_on_failure=function(){return this._properties.callback_on_failure};rdx.configure_view_operation_params.prototype.get_model_method=function(){return this._properties.model_method};rdx.configure_view_operation_params.prototype.get_action=function(){return this._properties.action};rdx.configure_view_operation_params.prototype.get_dom_element=function(){return this._properties.dom_element};rdx.configure_view_operation_params.prototype.set_resource_defn=function(a){return this._properties.resource_defn=a};rdx.configure_view_operation_params.prototype.set_resource_for_operation=function(a){return this._properties.resource_for_operation=a};rdx.configure_view_operation_params.prototype.set_callback_on_success=function(a){return this._properties.callback_on_success=a};rdx.configure_view_operation_params.prototype.set_model_method=function(a){return this._properties.model_method=a};rdx.configure_view_operation_params.prototype.set_action=function(a){return this._properties.action=a};rdx.configure_view_operation_params.prototype.set_resource_context=function(a){return this._properties.resource_context=a};rdx.configure_view_operation_params.prototype.get_resource_context=function(){return this._properties.resource_context};rdx.configure_view_operation_params.prototype.set_param=function(a){return this._properties.param=a};rdx.configure_view_operation_params.prototype.get_continue_on_error=function(){return this._properties.continue_on_error};rdx.configure_view_operation_params.prototype.set_continue_on_error=function(a){return this._properties.continue_on_error=a};rdx.configure_view_operation_params.prototype.get_param=function(){return this._properties.param};rdx.configure_view_operation_params.prototype.get_app_context_data=function(){return this._properties.app_context_data};rdx.configure_view_operation_params.prototype.resume=function(){return this._properties.return_call_back.call_back([this])};rdx.configure_view_operation_params.prototype.get_form_data=function(){return this._properties.form_data};rdx.configure_view_operation_params.prototype.unmask_present_view=function(){if(rdx.utils.is_not_defined(this._properties.unmask_view)){return}this._properties.unmask_view.call_back()};rdx.configure_view_operation_params.prototype.mask_present_view=function(){if(rdx.utils.is_not_defined(this._properties.mask_view)){return}this._properties.mask_view.call_back()};rdx.configure_view=function(d,b,e,a){this._base_view=a;this._view_definition=b;this._parent=d;this._resource=e;this._form=null;this._form_controller=new rdx.form_controller(this._base_view,this._parent,false);this._field_dependencies=null;this._custom_submit_handler_callback=null;this._custom_cancel_handler_callback=null;this.is_back_button_required=true;this.focus_view=true};rdx.configure_view.prototype=new rdx.abstract_view();rdx.configure_view.prototype.make_view=function(){this._base_view.remove_decorator();this._DEFAULT_PROPERTIES={standalone_mode:false};var e=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);var h=e.standalone_mode?{}:this._resource.properties;if(rdx.utils.is_not_defined(e.submit_operation)||rdx.utils.is_not_defined(e.submit_operation.method)){e.submit_operation={method:rdx.model_constants.ADD,action:null}}if(rdx.utils.is_not_defined(this._custom_submit_handler_callback)){e.submit_handler_callback=new rdx.callback(this._form_controller,this._form_controller.do_model_operation)}else{e.submit_handler_callback=this._custom_submit_handler_callback}if(rdx.utils.is_defined(e.cancel_handler_callback)){this.set_custom_cancel_handler_callback(e.cancel_handler_callback)}if(rdx.utils.is_not_defined(this._custom_cancel_handler_callback)){e.cancel_handler_callback=new rdx.callback(this,this.configure_view_close)}else{e.cancel_handler_callback=this._custom_cancel_handler_callback}if(this.is_dialog()==false){e.add_border=false}e.form_name=this._view_definition.name?this._view_definition.name:(this._resource?this._resource.name:null);this._form=new rdx.form(this._parent,this._view_definition.resource_properties,h,e);this._form.get_form_holder().set_is_dialog(this._is_dialog_mode());var d=e.title;if((d==null||d=="")&&rdx.utils.is_defined(this._resource)){var g=rdx.i18n.get_string(this._resource.obj_type);var f=rdx.i18n.get_string("rdx.view_configure_title_add",{obj_type:g});var b=rdx.i18n.get_string("rdx.view_configure_title_modify",{obj_type:g});d=this._form.get_form_holder().is_add_mode()?f:b}else{if(rdx.utils.is_defined(this._resource)){var g=rdx.i18n.get_string(this._resource.obj_type);d=rdx.i18n.get_string(d,{obj_type:g})}else{d=rdx.i18n.get_string(d)}}if(this._is_dialog_mode()==false){this._parent.addClass("op_wizard_form_panel form_inline smooth_all_corner");if(this.get_is_back_button_required()==true){this._parent.addClass("custom_view_title_bar");this._form.set_add_help_id(false)}}if(this._view_definition.view_properties.from_wizard==true){this._parent.removeClass("op_wizard_form_panel")}if(rdx.utils.is_defined(this._view_definition.view_properties.custom_view_class_name)){this._parent.addClass(this._view_definition.view_properties.custom_view_class_name)}if(this._view_definition.view_properties.add_title==false){this._parent.removeClass("form_inline")}this._form.set_crumb_handler(this._base_view.get_crumb_handler());this._form.render();this._form.set_resource(this._resource);this._form.get_form_holder().set_app_context_data(this._base_view.get_view_context().get_app_context_data());this._form.add_form_initialized_event(new rdx.callback(this,this._form_initialized));rdx.form_utils.prefill_form_data(this._parent,this._form,this._form,this._form._get_field_resource_response_arrived);var a={minHeight:50,width:350,modal:true,resizable:false,title:d,dialogClass:"configure_view"};this._base_view.set_default_dialog_properties(a)};rdx.configure_view.prototype.add_mask=function(){return true};rdx.configure_view.prototype.do_toggle_view=function(){if(this._view_definition.view_properties.toggle_view==false){return false}return true};rdx.configure_view.prototype.make_view_finalize=function(){this._form.finalize()};rdx.configure_view.prototype.handle_unmask=function(){rdx.mask.unmask_component(this._parent,this._base_view.get_mask_id())};rdx.configure_view.prototype.get_resource_response_arrived=function(b){var a=rdx.utils.get_formatted_response(b);if(rdx.utils.is_not_defined(a)){this._form.initialize();this._form_initialized(this._form);return}this._form.initialize(a)};rdx.configure_view.prototype._form_initialized=function(a){if(rdx.utils.is_defined(this._view_definition.field_dependencies)){this._field_dependencies=new rdx.dependency(this._form,this._view_definition.field_dependencies)}this.handle_unmask();if(rdx.utils.is_defined(this._field_dependencies)){this._field_dependencies.trigger_dependencies()}if(rdx.utils.is_defined(this._parent)&&this.get_focus_view()==true){rdx.utils.set_focus_on_first_editable_component(this._parent.get(0))}this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);this._base_view.get_view_context().set_initial_data()};rdx.configure_view.prototype._is_dialog_mode=function(){if(rdx.utils.is_defined(this._base_view.get_crumb_handler())){return false}if(rdx.utils.is_not_defined(this._view_definition.view_properties.dialog_mode)){return false}return this._view_definition.view_properties.dialog_mode};rdx.configure_view.prototype.get_form=function(){return this._form};rdx.configure_view.prototype.is_dialog=function(){return this._is_dialog_mode()};rdx.configure_view.prototype.configure_view_close=function(a){this.close_view(false)};rdx.configure_view.prototype.close_view=function(a,b){if(rdx.utils.is_not_defined(b)){b=a}if(rdx.utils.is_defined(b)&&b==true){rdx.page.hide_notification_bar()}this._base_view.destroy_view({submit_called:(rdx.utils.is_defined(b)&&b)},false)};rdx.configure_view.prototype.destroy_view=function(b){var a=this._form.destroy_form(b)};rdx.configure_view.prototype._is_add_mode=function(){if(rdx.utils.is_not_defined(this._view_definition.view_properties)||rdx.utils.is_not_defined(this._view_definition.view_properties.submit_operation)){return true}var a=this._view_definition.view_properties.submit_operation.method;if(rdx.utils.is_defined(a)&&a==rdx.model_constants.ADD){return true}return false};rdx.configure_view.prototype.get_form_controller=function(){return this._form_controller};rdx.configure_view.prototype.get_data=function(){return this.get_form_controller().get_resource_for_operation()};rdx.configure_view.prototype.set_custom_submit_handler_callback=function(a){this._custom_submit_handler_callback=a};rdx.configure_view.prototype.set_custom_cancel_handler_callback=function(a){this._custom_cancel_handler_callback=a};rdx.configure_view.prototype.get_is_back_button_required=function(){if(this._view_definition.view_properties.is_back_button_required===false){return false}return this.is_back_button_required};rdx.configure_view.prototype.get_focus_view=function(){if(this._view_definition.view_properties.focus_view===false){return false}return this.focus_view};rdx.configure_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.configure_view.prototype.is_title_required=function(){return false};rdx.overview_view=function(d,b,a){this._parent=d;this._view_definition=b;this._base_view=a;this._toolbar_items=null;this._entity_count_requests=[];this.is_toolbar_required=true};rdx.overview_view.prototype=new rdx.abstract_view();rdx.overview_view.prototype.make_view=function(){this._parent.removeClass("view_div_decorator");var b=$(document.createElement("div")).addClass("overview_div");this._parent.append(b);this.create_top_level_border_boxes(b,this._view_definition.nodes);if(rdx.utils.is_defined(this._view_definition.common_links)){var a=$("<div>");a.addClass("overview_common_links");this.process_links(a,this._view_definition.common_links,true);b.append(a)}};rdx.overview_view.prototype.create_top_level_border_boxes=function(d,b){for(var a=0,f=b.length;a<f;a++){var e=b[a];var g=$("<table>").attr("cellSpacing",0).attr("role","presentation").addClass("overview_table_border").addClass("smooth_all_corner").append($("<tbody>"));if(rdx.utils.is_defined(this._view_definition.view_properties.add_border)&&!this._view_definition.view_properties.add_border){g.css("border","none")}d.append(g);this.create_link_groups(g,e)}};rdx.overview_view.prototype.create_link_groups=function(h,g){var f=null;for(var b=0,e=g.length;b<e;b++){if(b%2==0){f=$("<tr>");h.append(f)}var d=g[b];var a=$("<td>");a.append(this.create_link_group(d));if(d.name&&d.name.length>0){a.addClass("overview_table_cell_non_empty");if((b%2!=0&&g.length>1)||g.length==1){a.addClass("overview_table_cell_last_child")}f.append(a)}}};rdx.overview_view.prototype.create_link_group=function(b){var a=$("<table>").addClass("overview_table_no_border").attr("role","presentation").append($("<tbody>"));var f=$("<tr>");a.append(f);var d=$("<td>");f.append(d);var e=$("<h3>").addClass("overview_table_title_cell");e.text(rdx.i18n.get_string(b.name));d.append(e);if(b.name&&b.name.length>0){this.process_links(d,b.links)}return a};rdx.overview_view.prototype.process_links=function(q,d,B){var g;for(var C=0,v=d.length;C<v;C++){if(!d[C]){continue}var o=d[C];if(!this._can_render(o)){continue}var E=(B)?$("<span>"):$("<div>");q.append(E);var F=o.title;var e=o.tooltip;e=rdx.utils.is_not_empty(e)?rdx.i18n.get_string(e):rdx.i18n.get_string("rdx.view_render_open_link_text");if(rdx.utils.is_defined(o.is_valid_callback)){var f=o.is_valid_callback;if(f.call_back()==false){continue}}if(!F){if(o.entitytype){F=o.entitytype}else{F="No Data"}}if(o.entitytype){entity_types=o.entitytype.split("^");var s=false;var A;if(entity_types.length==1){A=rdx.utils.get_resource(o.entitytype)}else{s=true;A=rdx.utils.get_resource(o.entitytype.replace(/\^/g,"_"))}count_img_cell=$(document.createElement("img")).attr("src",rdx.images.IN_PROGRESS_IMG).attr("alt",rdx.i18n.get_string("rdx.page_loading")).addClass("overview_link_img");count_img_cell.css({height:"20px",width:"20px"});rdx.utils.add_image_error_handler(count_img_cell);E.append(count_img_cell);var h=rdx.utils.is_defined(o.title)?o.title:A.obj_type;g=$(document.createElement("a")).attr("href","#").attr("title",e).append(" "+rdx.i18n.get_string(h));if(s){for(var z=0;z<entity_types.length;z++){var t=rdx.utils.get_resource(entity_types[z]);var n={html_text:g,resrc:t,img_cell:count_img_cell,success_callback:new rdx.callback(this,this._get_entity_count_response_arrived,[t.name,g,A,count_img_cell,true,s,h,o]),dom_object:this._parent,error_callback:new rdx.callback(this,this._get_entity_count_response_arrived,[t.name,g,A,count_img_cell,false,s,h,o])};count_img_cell.show();rdx.model.get_count(n.resrc,null,n.success_callback,n.dom_object,n.error_callback);this._entity_count_requests.push(n)}}else{var n={html_text:g,resrc:A,img_cell:count_img_cell,success_callback:new rdx.callback(this,this._get_entity_count_response_arrived,[A.name,g,A,count_img_cell,true,s,h,o]),dom_object:this._parent,error_callback:new rdx.callback(this,this._get_entity_count_response_arrived,[A.name,g,A,count_img_cell,false,s,h,o])};count_img_cell.show();rdx.model.get_count(n.resrc,null,n.success_callback,n.dom_object,n.error_callback);this._entity_count_requests.push(n)}g.bind(rdx.events.CLICK,{link:o},function(H){var m=rdx.get_tree();if(rdx.utils.is_defined(m)){if(rdx.utils.is_defined(H.data.link.tree_node_path)){var G=m.get_node(H.data.link.tree_node_path);if(rdx.utils.is_defined(G)){rdx.view_utils.add_dynamic_view_properties(G.data.ns_view_definition,H.data.link)}m.select_node(H.data.link.tree_node_path)}else{if(rdx.utils.is_defined(H.data.link.view)&&rdx.utils.is_defined(H.data.link.view.__tree_key)){var I=rdx.view_utils.get_tree_key(H.data.link.view);var G=m.get_view_definition(I);if(rdx.utils.is_defined(G)){rdx.view_utils.add_dynamic_view_properties(G,H.data.link)}m.select_node(I)}}}})}else{if(o.click_handler_callback){g=$(document.createElement("a")).attr("href","#").attr("title",e).append(F);g.html(rdx.i18n.get_string(F));E.addClass("overview_link_without_img");g.bind(rdx.events.CLICK,{ns_click_handler_callback:o.click_handler_callback},function(m){m.data.ns_click_handler_callback.call_back()})}else{if(o.view){g=$(document.createElement("a")).attr("href","#").attr("title",e).append(F);g.html(rdx.i18n.get_string(F));var u=null;if(o.multiple_count==true){var h=o.title;var p=this;var b=new rdx.model_executor_service(new rdx.callback(null,function(m){var H=m.get_collated_response();var G=m.get_collated_resource_for_operation()[0];p._update_count_response(G,H[0],H[1])}));for(var D=0;D<o.resources.length;D++){b.add(rdx.model_constants.GET_COUNT,rdx.utils.get_resource(o.resources[D]),{html_text:g,link_title:h})}b.execute()}if(typeof(o.view)=="string"){u=rdx.utils.get_view(o.view)}else{u=o.view}E.addClass("overview_link_without_img");g.bind(rdx.events.CLICK,{view_definition:u,overview_view:this,link:o},function(J){var m=rdx.get_tree();var I=J.data.view_definition;rdx.view_utils.add_dynamic_view_properties(I,J.data.link);if(rdx.utils.is_defined(m)&&rdx.utils.is_defined(I.__tree_key)){m.select_node(I.__tree_key)}else{var G=rdx.view_utils.show_view_in_full_page(I,J.data.overview_view._base_view);var H=G.get_view_context();if(rdx.utils.is_defined(o.view_context)){H.set_url_params(o.view_context,{})}G.prepare_view()}});if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().overview_view_link_stack.push({clickable:g,title:rdx.i18n.get_string(F)})}}else{if(o.link){var w=new rdx.link(o.link);g=$("<a>").attr("href","#").attr("title",e).append(F);g.bind(rdx.events.CLICK,{link_defn:w},function(m){m.data.link_defn.fire()});E.addClass("overview_link_without_img")}else{g=$(document.createElement("div")).html(F);E.addClass("overview_link_without_img")}}}}if(o.class_name){E.addClass(o.class_name)}if(rdx.utils.is_instrumentation_enabled()&&g&&g.context&&g.context.tagName=="A"){var a=rdx.utils.get_view_title();inner_text=$.trim(g.text());g.attr("id",a+"-anc-"+inner_text.replace(/\ /g,"_"))}E.append(g);if(rdx.utils.is_defined(o.tooltip)){rdx.utils._render_tooltip(E,o.tooltip)}if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().overview_view_link_stack.push({clickable:g,title:F})}}};rdx.overview_view.prototype._can_render=function(a){if(rdx.utils.is_defined(a)){if(rdx.utils.is_defined(a.render)&&rdx.utils.is_defined(a.render.evaluate)&&rdx.utils.is_function(a.render.evaluate)){return a.render.evaluate()}}return true};rdx.overview_view.prototype.is_tool_bar_required=function(){return true};rdx.overview_view.prototype.is_action_bar_required=function(){return true};rdx.overview_view.prototype.is_title_required=function(){return true};rdx.overview_view.prototype._add_tool_bar=function(){var a=[new rdx.action({image_url:rdx.images.REFRESH_IMG,tooltip:rdx.i18n.get_string("rdx.refresh"),click_handler_callback:new rdx.callback(this,this._refresh_view)})];this._toolbar_items=a};rdx.overview_view.prototype._is_toolbar_required=function(){return this.is_toolbar_required};rdx.overview_view.prototype.get_toolbar_items=function(){if(this._is_toolbar_required()===true){if(rdx.utils.is_not_defined(this._toolbar_items)){this._add_tool_bar()}return this._toolbar_items}else{return[]}};rdx.overview_view.prototype._refresh_view=function(){for(var d=0,b=this._entity_count_requests.length;d<b;d++){var a=this._entity_count_requests[d];a.html_text.text(" "+rdx.i18n.get_string(a.resrc.obj_type))}for(var d=0,b=this._entity_count_requests.length;d<b;d++){var a=this._entity_count_requests[d];a.img_cell.show();a.img_cell.attr("src",rdx.images.IN_PROGRESS_IMG).attr("alt","in_progress");a.img_cell.css({height:"32px",width:"32px"});rdx.model.get_count(a.resrc,null,a.success_callback,a.dom_object,a.error_callback)}};rdx.overview_view.prototype._update_count_response=function(b,a,e){var d=rdx.i18n.get_string(b.link_title,{count_0:a,count_1:e});b.html_text.text(d);if(a==0){b.html_text.addClass("link_disabled").attr("title","").unbind("click")}};rdx.overview_view.prototype._get_entity_count_response_arrived=function(v,b,h,u,d,B,q,m,n){if(u.image_url){if(u.image_url.indexOf("+")>0){u.image_url=u.image_url.substring(0,u.image_url.indexOf("+"))}}d.attr("src",rdx.images.SPACER_IMG);d.show();if(B){d.hide();var s=v;var A=rdx.i18n.get_string(m);var p=h.html().match(/(?:<b>)?(.+?)(?:\<)/i);var f;if(h.html().indexOf(" ")==0){f=s}else{if(h.html().indexOf("<b>No</b>")==0||q==false){f=s}else{if(q==true){f=parseInt(p[1])+parseInt(s)}}}if(f==0){f="No"}if(isNaN(s)){f=""}try{var a=parseInt(f);if(a>1){var z=A;var e=z.charAt(z.length-1);var t=z.charAt(z.length-2);var o=["a","e","i","o","u"];if(e=="y"&&$.inArray(t,o)==-1){z=z.substring(0,z.length-1);z+="ies"}else{if(e=="x"){z+="es"}else{z+="s"}}A=z}}catch(g){}if(rdx.utils.is_defined(n.response_renderer_callback)){var w=n.response_renderer_callback.call_back([s,true]);h.html(w)}else{h.html("<b>"+f+"</b> "+A)}}else{d.hide();if(rdx.utils.is_defined(n.response_renderer_callback)){var w=n.response_renderer_callback.call_back([v,false]);h.html(w)}else{h.replaceWith(rdx.i18n.get_string(u.obj_type)+" : "+v)}}};rdx.tabbed_view=function(d,b,a){this._parent=d;this._view_definition=b;this._base_view=a;this._title_div=null;this._tabs_div=null;this._view_div=null;this._view_definition.container_view=rdx.utils.is_defined(this._view_definition.container_view)?this._view_definition.container_view:true;this._DEFAULT_PROPERTIES={add_border:true,content_border_width:"0",extra_info_renderer_callback:null,add_extra_info:false,destroy_view_on_tab_change:true,refresh_all_views:false,open_all_tabs:false,tab_class:null,expand_all_tabs:false,add_search:false,multi_selection:false,max_selection:null,multi_select_callback:null,add_filter:false,custom_filter:false,filter_options:null,filter_options_callback:null,add_filter_title:null,filter_change_callback:null,search_handler_callback:null,search_placeholder:rdx.i18n.get_string("rdx.search"),class_names:null,add_refresh:false,add_clear_filter:false,get_tabs_callback:null,merge_view_context:true,update_tab_count:false,add_tab_to_breadcrumb:true,add_more_tab_properties:{title:null,click_handler_callback:null}};this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.view_properties);this._tab_items_container=new Object();this._current_view=null;this._all_views={};this._is_vertical_tab=rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.align_vertically)?this._view_definition.view_properties.align_vertically:false;this._render_in_same_parent=rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.render_in_same_parent)?this._view_definition.view_properties.render_in_same_parent:false;this._render_title_for_tabs=rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.render_title_for_tabs)?this._view_definition.view_properties.render_title_for_tabs:false;this._tab_titles_map={};this._parent.addClass("tabbed_view");if(rdx.utils.is_defined(this._properties.class_names)){this._parent.addClass(this._properties.class_names)}};rdx.tabbed_view.prototype=new rdx.abstract_view();rdx.tabbed_view.prototype.get_base_view=function(){return this._base_view};rdx.tabbed_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.tabbed_view.prototype.make_view=function(){if(rdx.utils.is_defined(rdx.export_context_view_and_get_url)){rdx.export_context_view_and_get_url={}}if(rdx.utils.is_not_defined(rdx.global_navigation_bar)){this._title_div=$("<div>");this._parent.append(this._title_div)}this._tabs_div=$("<div>");this._tabs_div.addClass("tabs");if(rdx.utils.is_defined(this._properties.tab_class)){this._tabs_div.addClass(this._properties.tab_class)}this._parent.append(this._tabs_div);if(!this._properties.add_border){this._tabs_div.css("border","none")}this._view_div=$(document.createElement("div")).addClass("tabbed_view_div");this._view_div.css("border-width",this._properties.content_border_width);if(this._is_vertical_tab){this._parent.addClass("clearfix vertical_tabs_parent");this._parent.addClass(this._view_definition.name);this._tabs_div.addClass("vertical_tabs");if(this._render_title_for_tabs){this._tabs_div.addClass("vertical_tabs_title")}this._view_div.addClass("vertical_tabs_view")}this._parent.append(this._view_div);var J;var C;var a=true;var B;if(rdx.utils.is_defined(this._view_definition.add_to_bread_crumb)){a=this._view_definition.add_to_bread_crumb}this._properties.is_tool_bar_required=false;if(rdx.utils.is_defined(this._properties.get_tabs_callback)){this._view_definition.tabs=this._properties.get_tabs_callback.call_back()}for(var D=0,M=this._view_definition.tabs.length;D<M;D++){var p=this._view_definition.tabs[D];var q=rdx.utils.is_defined(p.hide_values)?p.hide_values:[];var u=$.extend({},p.view);u.view_properties=$.extend(true,u.view_properties,{_dont_show_title:true,export_enabled:false});var z="Tab "+D;if(p.title){z=p.title}else{if(u.view_properties.title){z=u.view_properties.title}}if(rdx.utils.is_defined(u.tab_render_callback)){this._skip_resize=true}if(this._properties.add_tab_to_breadcrumb===false){u.add_to_bread_crumb=false}else{u.add_to_bread_crumb=rdx.utils.is_defined(u.add_to_bread_crumb)?u.add_to_bread_crumb:a}u.view_properties.title=z;var A=$("<div>").addClass("each_tab");if(this._properties.add_filter==true&&rdx.utils.is_defined(p.category)){A.attr("data-filter-type",p.category)}if(rdx.utils.is_defined(this._properties.current_value)){if(q.length>0){if($.inArray(this._properties.current_value,q)!=-1){continue}}}if(rdx.utils.is_defined(p.is_valid_callback)){var s=p.is_valid_callback.call_back();if(s===false){continue}if(rdx.utils.is_empty(B)){B=z}}if(D==0&&rdx.utils.is_empty(B)){B=z}if(rdx.utils.is_not_defined(J)){J=z}var t=z;z=rdx.i18n.get_string(z);this._tabs_div.append(A);var E=$("<a>").attr("href","#").attr("title",z);if(rdx.utils.is_defined(p.title_renderer_callback)){p.title_renderer_callback.call_back([E])}if(rdx.utils.is_instrumentation_enabled()){var d=rdx.utils.get_view_title();inner_text=$.trim(z);E.attr("id",d+"-tab-"+inner_text.replace(/\ /g,"_"))}A.append(E);var e=$(document.createElement("span"));if(rdx.utils.is_defined(p.image)){e.append($("<img>").attr("src",p.image))}e.append(z);E.append(e);this._tab_items_container[t]={tabbed_view:this,li:A,view_definition:u,inherit_context:(rdx.utils.is_defined(p.inherit_context)&&p.inherit_context?true:false),count:null,i18n_title:t,is_open:false,extra_tabbed_info_dom:rdx.utils.is_defined(g)?g:null};if(p.view.type==rdx.view_constants.DETAIL_VIEW||(rdx.utils.is_defined(this._properties.add_extra_info)&&this._properties.add_extra_info)){var f=$("<span>").addClass("data-count");this._tab_items_container[t]["count"]=f;if(rdx.utils.is_defined(this._properties.extra_info_renderer_callback)){var m=this;if(this._is_vertical_tab){f.addClass("vertical-data-count")}var g=$("<span>").addClass("extra_info_span");this._tab_items_container[t]["extra_tabbed_info_dom"]=g;A.append(g);this._call_extra_info_renderer_callback(t,A)}else{var h=this._get_row_count(p,f,t);h=h?h:0;f.text(h);E.append(f);if(rdx.utils.is_defined(this._properties.update_tab_count)&&this._properties.update_tab_count){var w=new rdx.base_view(null,p.view).get_view();var I=w.get_resource_name();var b=rdx.utils.get_resource(I);$(b).bind(rdx.events.MODEL_COUNT_CHANGED,{tab_counter:f},this._refresh_tab_count)}}}var K=rdx.utils.is_defined(p.inherit_context)&&p.inherit_context?true:false;A.bind(rdx.events.CLICK,{tabbed_view:this,a1:A,a2:u,a3:K,a4:t,a5:p.tab_change_data,a6:p.tab_click_handler_callback},function(O){O.preventDefault();if(rdx.utils.is_defined(O.data.a6)){O.data.a6.call_back()}O.data.tabbed_view._tab_clicked(O.data.a1,O.data.a2,O.data.a3,O.data.a4,O.data.a5,O);return false});if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().tabbed_view_tab_stack.push({clickable:A,title:z})}if(this._properties.open_all_tabs===true){A.trigger(rdx.events.CLICK)}}if(rdx.utils.is_defined(this._properties.add_more_tab_properties)&&rdx.utils.is_defined(this._properties.add_more_tab_properties.title)){var N=this._properties.add_more_tab_properties;var v=$("<button>").addClass("btn-icon add_more_button").appendTo(this._tabs_div).text(N.title);var G=$("<span>").addClass("plus_icon").prependTo(v).text("+");v.bind(rdx.events.CLICK,{},function(O){N.click_handler_callback.call_back();O.stopPropagation()})}this.toolbar_div=$("<div>").addClass("tabs_toolbar_container");if(this._properties.align_vertically==true){this._tabs_div.prepend(this.toolbar_div)}else{this._tabs_div.append(this.toolbar_div)}if(this._properties.add_search===true){this.toolbar_div.append(this.add_search_bar())}if(this._properties.add_filter===true){this.add_filter(this.toolbar_div)}if(this._properties.add_clear_filter===true){this.toolbar_div.append(this.add_clear_filter())}if(this._properties.add_refresh===true){this.toolbar_div.append(this.add_refresh())}var H=rdx.view_utils.get_dynamic_view_properties(this._view_definition);if(rdx.utils.is_defined(H)&&rdx.utils.is_defined(H.default_tab)&&rdx.utils.is_defined(this._tab_items_container[H.default_tab])){J=this._properties[rdx.view_constants.DYNAMIC_VIEW_PROPERTIES]["default_tab"]}if((rdx.utils.is_defined(this._view_definition.view_properties.opened_tabs)&&this._view_definition.view_properties.opened_tabs!=null)&&rdx.utils.is_not_empty(this._view_definition.view_properties.opened_tabs)){var o=new Array();o=this._view_definition.view_properties.opened_tabs;for(var n=0;n<o.length;n++){this._tab_items_container[o[n]].li.trigger(rdx.events.CLICK)}}else{this._tab_clicked(this._tab_items_container[J].li,this._tab_items_container[J].view_definition,this._tab_items_container[J].inherit_context,B,p.tab_change_data)}if(!this._skip_resize){this.resize_view();var F=(this._is_vertical_tab)?"."+this._view_definition.name+" .current_tabs":".current_tabs";var L=this._tabs_div.children(F);if(L.length>0){L.data("ns_view").resize_view()}}};rdx.tabbed_view.prototype._call_extra_info_renderer_callback=function(b,a){var d=this;var e=new rdx.view_callback_on_response_arrived_params({return_call_back:new rdx.callback(function(h,g){if(rdx.utils.is_defined(g)){var f=d._tab_items_container[g].extra_tabbed_info_dom;if(rdx.utils.is_defined(f)){f.empty();f.append(h)}}})});this._properties.extra_info_renderer_callback.call_back([e,b,a])};rdx.tabbed_view.prototype._get_row_count=function(e,g,f){var b=null;var a=new rdx.base_view(null,e.view).get_view();var m=a.get_resource_name();var d=e.view.view_properties;if(rdx.utils.is_defined(d.callback_for_counter)){d.callback_for_counter.call_back([m,g]);return}var h=rdx.utils.get_resource(m);if(rdx.utils.is_defined(a.get_view_context().get_url_params())){b=$.extend(true,{},a.get_view_context().get_url_params())}rdx.model.get_count(h,b,new rdx.callback(function(n){g.text(n)},[m,g]))};rdx.tabbed_view.prototype._refresh_tab_count=function(b,a){if(rdx.utils.is_defined(b.data.tab_counter)){b.data.tab_counter.text(a)}};rdx.tabbed_view.prototype._tab_clicked=function(p,n,v,o,w,u){if(p.hasClass("mask_tab")||p.children().hasClass("mask_tab")||p.children().children().hasClass("mask_tab")){return}var t=(this._is_vertical_tab)?"."+this._view_definition.name+" .current_tabs":".current_tabs";var z=this._tabs_div.children(t);if(rdx.utils.is_defined(n.tab_render_callback)){n.tab_render_callback.call_back();this._tabs_div.children().removeClass("current_tabs");p.addClass("current_tabs");return}if(rdx.utils.is_defined(this._properties.max_selection)){if($(t).length==1&&p.hasClass("current_tabs")){return}else{if($(t).length<=this._properties.max_selection&&p.hasClass("current_tabs")){this._view_div.empty()}else{if($(t).length<=this._properties.max_selection&&!p.hasClass("current_tabs")){this._view_div.empty()}else{return}}}if(rdx.utils.is_not_defined(this._tab_titles_map[o])){this._tab_titles_map[o]={is_clicked:true,view_definition:n}}else{if(rdx.utils.is_not_defined(this._tab_titles_map[o].is_clicked)){this._tab_titles_map[o].is_clicked=true}else{delete this._tab_titles_map[o].is_clicked}}}if(z.length>0){if(this._render_in_same_parent==true){if(this._render_title_for_tabs==true&&p.hasClass("current_tabs")){if(z.length==1){return}else{if(rdx.utils.is_defined(this._properties.onchange_callback)){this._properties.onchange_callback.call_back([this._view_definition,o,true])}p.removeClass("current_tabs");p.data("ns_view").destroy_view();p.data("ns_view").header_div.remove();this.calculate_height();return}}}else{if(this._properties.destroy_view_on_tab_change===true){z.data("ns_view").current_focus=u.target;z.data("ns_view").destroy_view();z.data("ns_view",null);this._view_div.children().remove()}else{z.data("ns_view")._view_div.hide()}if(this._properties.expand_all_tabs===true){this._view_div.addClass("expand_vertical_tabs");var e=this._tabs_div;if(!(e.hasClass("tabs_title_hide"))){e.addClass("tabs_title_hide")}var A=z.data("ns_view")._view_definition.view_properties.title;var s=$("<div>").addClass("tab_title_all_expand").append(A);z.data("ns_view")._view_div.prepend(s);z.data("ns_view")._view_div.show()}z.removeClass("current_tabs")}}if(rdx.utils.is_defined(this._properties.max_selection)&&$(t).length>=this._properties.max_selection){$(u.target).parents(t).removeClass("current_tabs");delete this._tab_titles_map[o].is_clicked;this._view_div.empty()}else{if(rdx.utils.is_defined(this._properties.max_selection)&&$(t).length<=this._properties.max_selection){if($(u.target).parents(t).hasClass("current_tabs")){$(u.target).parents(t).removeClass("current_tabs")}else{p.addClass("current_tabs")}}else{p.addClass("current_tabs")}}if(this._properties.destroy_view_on_tab_change===false&&rdx.utils.is_defined(p.data("ns_view"))){p.data("ns_view")._view_div.show()}else{var q=$.extend(true,{},n);if(rdx.utils.is_not_defined(q.view_properties)){q.view_properties={}}q.view_properties.hide_refresh_button=true;if(this._render_in_same_parent!=true){var a=new rdx.base_view(this._view_div,q)}else{this._view_div_individual=$(document.createElement("div")).addClass("view_div_individual");this._view_div.append(this._view_div_individual);var a=new rdx.base_view(this._view_div_individual,q)}var f=a.get_view_container();var b=a.get_resource();$(b).bind(rdx.events.MODEL_COUNT_CHANGED,{tab:this._tab_items_container[o]},function(E,B){if(rdx.utils.is_defined(E.data.tab.count)&&E.data.tab.li.hasClass("current_tabs")){var D=E.data.tab.view_definition;var C=D.view_properties;if(rdx.utils.is_defined(C.callback_for_counter)){C.callback_for_counter.call_back([D.resource_name,E.data.tab.count])}else{E.data.tab.count.text(B)}}});var h=this.get_view_context().get_app_context_data();if(v&&rdx.utils.is_defined(h)){a.get_view_context().set_url_params(n.view_context,h);a.get_view_context().set_app_context_data(h)}var g=this;$(f).bind(rdx.events.VIEW_PREPARATION_COMPLETED,{tab:this._tab_items_container[o]},function(D){if(g._is_vertical_tab){D.data.tab.is_open=true;var F=g._tab_items_container;var G=0;for(var C in F){if(F[C]["is_open"]){var E=F[C]["li"].outerHeight();G+=E}}var B=g._view_div.outerHeight();if(G<B){g._tabs_div.css("height",B)}else{g._tabs_div.css("height",G)}}});a.set_toolbar_parent_elem(this._base_view._view_desc_block);a.set_parent_base_view(this._base_view);if(this._render_title_for_tabs==true){var d=$("<div>").addClass("header_tabbed_view_title").append(o);var m=$("<button>").addClass("header_tabbed_view_close").attr("aria-label","Close");d.append(m);this._view_div_individual.prepend(d);m.bind(rdx.events.CLICK,{info_click:this,tab_title:o},function(B){if($(".header_tabbed_view").length!=1){B.data.info_click._tab_items_container[B.data.tab_title].li.removeClass("current_tabs");a.destroy_view();d.remove();B.data.info_click.calculate_height();B.data.info_click._tab_items_container[B.data.tab_title]["is_open"]=false;if(rdx.utils.is_defined(B.data.info_click._properties.onchange_callback)){B.data.info_click._properties.onchange_callback.call_back([B.data.info_click._view_definition,o,true])}}});a.header_div=d}if(rdx.utils.is_defined(this._properties.multi_selection)&&this._properties.multi_selection==true){this._tab_titles_map[o]["ns_view"]=a;if(rdx.utils.is_defined(this._properties.multi_selection)&&this._properties.multi_selection==true){this._properties.multi_select_callback.call_back([this._tab_titles_map,a]);if(z.length>0){if(rdx.utils.is_defined(this._properties.onchange_callback)){this._properties.onchange_callback.call_back([this._view_definition,o,null,this._tab_titles_map,a,w])}a.prepare_view(true)}else{if(rdx.utils.is_defined(q.add_to_bread_crumb)&&q.add_to_bread_crumb===false){if(rdx.utils.is_defined(this._properties.onchange_callback)){this._properties.onchange_callback.call_back([this._view_definition,o,null,this._tab_titles_map,a,w])}a.prepare_view(true)}else{if(rdx.utils.is_defined(this._properties.onchange_callback)){this._properties.onchange_callback.call_back([this._view_definition,o,null,this._tab_titles_map,a,w])}a.prepare_view()}}}}else{if(rdx.utils.is_defined(q.add_to_bread_crumb)&&q.add_to_bread_crumb===false){if(rdx.utils.is_defined(this._properties.onchange_callback)){this._properties.onchange_callback.call_back([this._view_definition,o,null,null,a,w])}a.prepare_view(true)}else{if(rdx.utils.is_defined(this._properties.onchange_callback)){this._properties.onchange_callback.call_back([this._view_definition,o,null,null,a,w])}a.prepare_view()}}this._current_view=a;this._all_views[a._view_definition.view_properties.title]=a;if(rdx.utils.is_defined(this._title_div)){this._title_div.children().remove();if(rdx.utils.is_function(a.get_view().get_tool_bar)&&rdx.utils.is_defined(a.get_view().get_tool_bar())){this._title_div.append(a.get_view().get_tool_bar().removeClass("tool_bar_table_no_border"))}}p.data("ns_view",a);this._current_view.params={};this._current_view.params.li=p;this._current_view.params.inherit_context=v;this._current_view.params.tab_title=o;if($(".tree_pane").length>0){if(rdx.utils.is_defined(rdx.get_tree())&&rdx.utils.is_defined(rdx.get_tree().reinit_tree_menu)){rdx.get_tree().reinit_tree_menu()}}}};rdx.tabbed_view.prototype.calculate_height=function(){if(this._is_vertical_tab){var e=this._tab_items_container;var f=0;for(var b in e){if(e[b]["is_open"]){var d=e[b]["li"].outerHeight();f+=d}}var a=this._view_div.outerHeight();if(f<a){this._tabs_div.css("height",a)}else{this._tabs_div.css("height",f)}}};rdx.tabbed_view.prototype._add_tool_bar=function(){var a=[new rdx.action({tooltip:rdx.i18n.get_string("rdx.refresh"),image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this._refresh_view)})];this._toolbar_items=a};rdx.tabbed_view.prototype.get_toolbar_items=function(){if(rdx.utils.is_defined(this._toolbar_items)){return this._toolbar_items}this._add_tool_bar();return this._toolbar_items};rdx.tabbed_view.prototype.is_action_bar_required=function(){return rdx.utils.is_defined(this._view_definition.resource_operations)};rdx.tabbed_view.prototype._add_action_bar=function(){this._action_properties=rdx.view_utils.get_action_bar_items(this._view_definition,this._base_view.get_parent())};rdx.tabbed_view.prototype.get_action_items=function(){if(rdx.utils.is_defined(this._action_properties)){return this._action_properties}this._add_action_bar();return this._action_properties;return[]};rdx.tabbed_view.prototype.refresh_view=function(a){this._refresh_view(a)};rdx.tabbed_view.prototype._refresh_view=function(b){var d=new Object();if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.view_context)){d=b.view_context}if(rdx.utils.is_defined(this._properties.add_filter)&&this._properties.custom_filter==true){this._call_filter_option_callback();return}if(this._properties.refresh_all_views===true){for(var a in this._all_views){var a=this._all_views[a];if(!(a.get_view_definition().view_properties.auto_refresh===false)){if(rdx.utils.is_defined(a._view.refresh_view)){a._view.refresh_view(b)}else{a.prepare_view()}}}}else{if(rdx.utils.is_defined(this._current_view._view)){var a=this._current_view._view;if(rdx.utils.is_defined(this._properties.merge_view_context)&&this._properties.merge_view_context==true){rdx.utils.merge_and_set_url_params(a,d)}if(this._current_view.get_view_state()===rdx.view_constants.view_state.DESTROYED){this._tab_clicked(this._current_view.params.li,a._base_view.get_view_definition(),this._current_view.params.inherit_context,this._current_view.params.tab_title);return}else{a._refresh_view(b)}}if(rdx.utils.is_defined(this._properties.extra_info_renderer_callback)){var e=this;for(var f in this._tab_items_container){this._call_extra_info_renderer_callback(f,this._tab_items_container[f].li)}}}};rdx.tabbed_view.prototype.destroy_view=function(){if(this._properties.destroy_view_on_tab_change==false){for(var a in this._all_views){this._all_views[a].destroy_view()}}else{if(rdx.utils.is_defined(this._current_view)){this._current_view.destroy_view()}}};rdx.tabbed_view.prototype.is_title_required=function(){return true};rdx.tabbed_view.prototype.get_tabbed_element=function(b){for(var a in this._tab_items_container){if(rdx.i18n.get_string(a).toLowerCase()==rdx.i18n.get_string(b).toLowerCase()){return this._tab_items_container[a].li}}return null};rdx.tabbed_view.prototype.get_tabbed_view_definition=function(b){for(var a in this._tab_items_container){if(rdx.i18n.get_string(a).toLowerCase()==rdx.i18n.get_string(b).toLowerCase()){return this._tab_items_container[a].view_definition}}return null};rdx.tabbed_view.prototype.add_search_bar=function(){var f=this;var b=$("<input type = 'text'>").addClass("search_text").attr({placeholder:this._properties.search_placeholder,"aria-label":this._properties.search_placeholder});var d=$("<span>").addClass("search_image");var a=$("<div>").addClass("block_search").append(d).append(b);var e=$("<span>").addClass("clear_text").appendTo(a).hide();b.bind(rdx.events.KEYUP,{input_type:b},function(m){var h=(m.keyCode?m.keyCode:m.which);var g=m.data.input_type.val().toLocaleLowerCase();if(g.length>0){e.show()}if(rdx.utils.is_defined(f._properties.search_handler_callback)){f._properties.search_handler_callback.call_back([g])}else{f._tabs_div.find(".each_tab").each(function(n,o){if(($(o).find("span").text()).toLocaleLowerCase().indexOf(g)>-1){$(o).removeClass("hidden")}else{$(o).addClass("hidden")}})}});e.bind(rdx.events.CLICK,{input_type:b},function(g){$(this).hide();g.data.input_type.val("");g.data.input_type.trigger(rdx.events.KEYUP);g.stopPropagation()});return a};rdx.tabbed_view.prototype.add_refresh=function(){var b=$("<button>").addClass("refresh_tab btn-icon").attr("title","Refresh");var a=$("<span>").addClass("hide").text("Refresh").appendTo(b);var d=this;b.bind(rdx.events.CLICK,{},function(e){d._properties.clear_filters_callback.call_back();d._current_view.refresh_view()});return b};rdx.tabbed_view.prototype.add_clear_filter=function(){var d=$("<button>").addClass("clear_filters_tab btn-icon").attr("title","Clear All Filters");var a=$("<span>").addClass("hide").text("Refresh").appendTo(d);var b=this;d.bind(rdx.events.CLICK,{},function(e){rdx.SELECTED_DURATION="last_1_hour";$(".filter_select  > [value='Last 1 Hour']").attr("selected",true);b._properties.clear_filters_callback.call_back();b._current_view.refresh_view()});return d};rdx.tabbed_view.prototype._call_filter_option_callback=function(a){this._search_input.empty();this.update_filter()};rdx.tabbed_view.prototype.add_filter=function(f){var g=this;var h=$("<label>").addClass("filter").appendTo(f);var a=$("<div>").addClass("filter_title").text(this._properties.add_filter_title).appendTo(h);if(this._properties.add_filter_title!==true){a.addClass("hide")}this._search_input=$("<select>").addClass("filter_select list").appendTo(h);var b=[];if(this._properties.filter_options_callback){b=this._properties.filter_options_callback.call_back([this._search_input,this])||[]}else{b=this._properties.filter_options}for(var d=0;d<b.length;d++){if(rdx.utils.is_object(b[d])){var e=$("<option>").text(b[d]["label"]).attr("value",b[d]["key"])}else{var e=$("<option>").text(b[d]).attr("value",b[d])}if(!this._properties.custom_filter){if(rdx.utils.is_defined(rdx.SELECTED_DURATION)){if(rdx.SELECTED_DURATION===b[d]||rdx.SELECTED_DURATION===b[d]["key"]){e.attr("selected",true)}}}else{if(d==0){e.attr("selected",true)}}this._search_input.append(e)}this._search_input.bind(rdx.events.CHANGE,{},function(m){var n=$(this).val();if(rdx.utils.is_defined(g._properties.filter_change_callback)){if(!g._properties.custom_filter){rdx.SELECTED_DURATION=n}g._properties.filter_change_callback.call_back([n,g])}else{g._filter_tabs(n)}m.preventDefault()})};rdx.tabbed_view.prototype.update_filter=function(f){var g=this;var b=[];if(this._properties.filter_options_callback){b=this._properties.filter_options_callback.call_back([this._search_input,g])||[]}else{b=this._properties.filter_options}for(var d=0;d<b.length;d++){if(rdx.utils.is_object(b[d])){var e=$("<option>").text(b[d]["label"]).attr("value",b[d]["key"])}else{var e=$("<option>").text(b[d]).attr("value",b[d])}if(!this._properties.custom_filter){if(rdx.utils.is_defined(rdx.SELECTED_DURATION)){if(rdx.SELECTED_DURATION===b[d]||rdx.SELECTED_DURATION===b[d]["value"]){e.attr("selected",true)}}}else{if(d==0){e.attr("selected",true)}}this._search_input.append(e)}if(rdx.utils.is_defined(this._current_view._view)){var a=this._current_view._view;if(this._current_view.get_view_state()===rdx.view_constants.view_state.DESTROYED){this._tab_clicked(this._current_view.params.li,a._base_view.get_view_definition(),this._current_view.params.inherit_context,this._current_view.params.tab_title);return}else{a._refresh_view()}}};rdx.tabbed_view.prototype._filter_tabs=function(b){this._tabs_div.find(".each_tab").each(function(d,e){if(b==="All"){$(e).removeClass("filtered")}else{if($(e).attr("data-filter-type")===b){$(e).removeClass("filtered")}else{$(e).addClass("filtered")}}});if(this._properties.multi_selection===true){for(var a in this._tab_titles_map){if(rdx.utils.is_defined(this._tab_titles_map[a]["is_clicked"])){delete this._tab_titles_map[a].is_clicked}}}if(b=="All"){$(this._tabs_div.find(".each_tab")[0]).trigger(rdx.events.CLICK)}else{$(this._tabs_div.find("[data-filter-type="+b+"]")[0]).trigger(rdx.events.CLICK)}};rdx.url_view=function(d,b,a){this._parent=d;this._view_definition=b;this._base_view=a;this._iframe=null;this._DEFAULT_PROPERTIES={border:true,full_page_view:false};this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties)};rdx.url_view.prototype=new rdx.abstract_view();rdx.url_view.prototype.make_view=function(){if(this._properties.border===false){this._base_view.remove_decorator()}var b=this._view_definition.url;var a=this._base_view.get_view_context();if(rdx.utils.is_defined(a)&&rdx.utils.is_object_not_empty(a.get_url_params())){b=rdx.url_utils.get_url(this._view_definition.url,a.get_url_params())}this._iframe=$(document.createElement("iframe")).attr("src",b).attr("frameborder",0).addClass("iframe");if(rdx.utils.is_defined(this._view_definition.view_properties)){if(rdx.utils.is_defined(this._view_definition.view_properties.class_names)){this._iframe.addClass(this._view_definition.view_properties.class_names)}}if(rdx.utils.is_defined(this._view_definition.height)){this._iframe.height(this._view_definition.height)}this._parent.append(this._iframe);this.resize_view()};rdx.url_view.prototype.resize_view=function(){if(rdx.utils.is_defined(this._view_definition.height)){return}if(this._properties.full_page_view===false){var d=this._base_view.get_toolbar_height();var b=this._base_view.get_action_bar_height();var a=($(window).height()-rdx.page.get_header_height()-d-40);this._iframe.height(a)}else{var a=($(window).height()+40);this._iframe.height(a)}};rdx.url_view.prototype.refresh_view=function(){if(rdx.utils.is_defined(this._iframe)&&rdx.utils.is_defined(this._iframe.attr("src"))){this._iframe.attr("src",this._iframe.attr("src"))}};rdx.chart_view=function(p,e,g,s){this._parent=p;this._view_definition=e;this._resource=g;this._base_view=s;var q={type:rdx.chart_constants.LINE,show_current_values:false,show_peak_values:false,show_average_values:false,multiple_input_data_array:false,xaxis:null,yaxis:null,stackSeriesKey:null,is_data_stacked:false,colors_enum:[],title:null,x_axis_label_spacing:150,y_axis_label_renderer_callback:null,x_axis_label_enabled:true,x_axis_label_rotation:0,dynamic_number_of_arrays:false,is_response_array_of_objects:false,information_note:null,selected_data:null,overridden_colors:null,is_cdf_chart:false,metric_selection:false,metric_selection_callback:null,metric_selection_options:{},default_metric_selection_option:null,histogram:false,step_for_histogram:10,customizable_x_axis:false,add_duration:false,duration_change_callback:null,use_default_label:false,duration_options:[{label:"5 Min",desc:"Last 5 Minutes",key:"last_5_min"},{label:"H",desc:"Last One Hour",key:"last_1_hour"},{label:"D",desc:"Last One Day",key:"last_1_day",select_by_default:true},{label:"W",desc:"Last One Week",key:"last_1_week"},{label:"M",desc:"Last One Month",key:"last_1_month"}]};this._view_properties=$.extend({},q,this._view_definition.view_properties);this._crossfilter=rdx.utils.is_defined(this._view_properties.crossfilter)?true:false;if(rdx.utils.is_defined(this._view_properties)){this._view_properties.title=rdx.i18n.get_string(this._view_properties.title);this._view_properties.header_title=rdx.i18n.get_string(this._view_properties.header_title)}if(rdx.utils.is_defined(this._view_properties._dont_show_title)&&(this._view_properties._dont_show_title==true)){this._view_properties.title=null}if(rdx.utils.is_defined(this._view_properties.is_date_time_xaxis)&&this._view_properties.is_date_time_xaxis==false){this._view_properties.show_current_values=false}if(rdx.utils.is_defined(this._view_properties.plot_two_axis)&&this._view_properties.plot_two_axis==true){this._view_properties.plot_two_axis=true}this._series=new Array();this._dummy_data_plotted=false;var f=typeof(this._view_properties.secondary_y_axis)=="undefined"?null:this._view_properties.secondary_y_axis;var o=0;var b=this._view_definition.resource_properties;for(var n in b){var t=b[n];var d=(typeof(t.percentage_axis)=="undefined"?false:t.percentage_axis);var h={name:this._get_resource_prop_label(n),percentage_axis:d,data:[]};var a=this._view_properties.type;var m=(typeof(t.type)=="undefined"?null:t.type);if(m!=null){h.type=m;a=m}if(a==rdx.chart_constants.AREA||a==rdx.chart_constants.STACKED_AREA||a==rdx.chart_constants.AREA_SPLINE||a==rdx.chart_constants.STACKED_AREA_SPLINE){h.data.push({y:0,x:new Date().getTime()});this._dummy_data_plotted=true}if(f!=null&&this._view_properties.type!=rdx.chart_constants.PIE){if(f==n){this._view_properties.secondary_y_axis=o}}this._series.push(h);o++;if(this._view_properties.type==rdx.chart_constants.PIE){break}}if(this._view_properties.add_duration===true){this.add_duration_dropdown()}this._highcharts_chart_div=$("<div>");this._parent.append(this._highcharts_chart_div);this._parent.addClass("chart_view");this._chart=new rdx.chart(this._highcharts_chart_div,this._view_properties,this._view_definition);this._multiple_series=null;this._current_values_parents={};this._information_note_div=null;this._current_values_div=null;this._context_selector=e.context_selector||null};rdx.chart_view.prototype=new rdx.abstract_view();rdx.chart_view.prototype.make_view=function(){this._render_summary_values();if(rdx.utils.is_defined(this._view_properties.properties)){this._chart_custom_properties=this._view_properties.properties;this._render_metrics_properties()}else{this._highcharts_chart_div.css("height","100%");this._chart._properties.class_names=(this._chart._properties.class_names=="chart")?"chart chart_without_metrics":("chart chart_without_metrics "+this._chart._properties.class_names)}this._chart.render(this._series);this._render_more_info()};rdx.chart_view.prototype.is_title_required=function(){if(this._view_properties.title){return true}else{return false}};rdx.chart_view.prototype._render_metrics_properties=function(){var e=$("<div>").addClass("chart_metrics_main_div");this._parent.prepend(e);for(var d in this._chart_custom_properties){this._render_metric(this._chart_custom_properties[d],e)}var a=e.outerHeight();var f=this._parent.outerHeight();var b=parseInt(((f-a)/f)*100);this._highcharts_chart_div.css("height",b+"%")};rdx.chart_view.prototype._render_metric=function(g,m){var b=$("<label>").addClass("single_metric");var a=$("<span>").addClass("metric_labels").append(g.label+":");b.append(a);var h={formatter:g.formatter,properties:{size:1},mandatory:true};var d=$("<div>").addClass("metric_charts_list");b.append(d);var n=new rdx.form_field(h);var f=new rdx.list(d,n).render();f.add_event_handler(rdx.events.CHANGE,new rdx.callback(this._metric_list_change_handler_callback,[g,this,n]));var e=rdx.utils.is_defined(g.align)?g.align:"left";if(e=="right"){b.css({top:0,right:"5px"})}else{b.css({top:0,left:"11px"})}m.append(b)};rdx.chart_view.prototype._metric_list_change_handler_callback=function(d,g,e,m){var h=d.data.list_get_data_callback.call_back();if(rdx.utils.is_defined(m.get_formatter())){h=m.get_formatter().get_storage_value(h)}var n=g.context_type;var a=e._base_view.get_view_context();var b=a.get_properties();var f=rdx.utils.is_defined(b.custom)?b.custom:{};f[n]=h;b.custom=f;a.set_url_params(b,null);e._base_view.refresh_view(null,true)};rdx.chart_view.prototype._get_resource_prop_label=function(a){if(this._view_definition.categorize_by_filter&&this._view_definition.category_resource_props&&this._view_definition.category_resource_props[a]){return this._view_definition.category_resource_props[a].label}else{if(this._view_definition.resource_properties[a]&&this._view_definition.resource_properties[a].label){return rdx.i18n.get_string(this._view_definition.resource_properties[a].label)}else{if(this._view_definition.more_info_properties&&this._view_definition.more_info_properties[a]&&this._view_definition.more_info_properties[a].label){return rdx.i18n.get_string(this._view_definition.more_info_properties[a].label)}}}return rdx.i18n.get_string(this._resource.properties[a].label)};rdx.chart_view.prototype.set_property=function(a,b){this._view_properties[a]=b;this._chart.set_property(a,b)};rdx.chart_view.prototype._render_summary_values=function(){if(this._view_properties.show_current_values==false&&this._view_properties.show_peak_values==false&&this._view_properties.show_average_values==false){return}this._current_values_div=$("<div>").addClass("current_values smooth_all_corner");this._parent.append(this._current_values_div);if(this._view_properties.multiple_input_data_array==false){for(var q=0,A=this._series.length;q<A;q++){var s=this._series[q].name;var p=$("<td>").append(rdx.i18n.get_string("rdx.chart_current_series_name",{series_name:s}));var e=$("<span>").append("&nbsp;");var m=$("<td>").addClass("value").append(e);if(this._series[q].percentage_axis==true){m.addClass("hidden").append("%")}var b=$("<tr>");var w=$("<tr>");this._current_values_div.append($("<table>").addClass("label_value_table").append($("<tbody>")).append(b.append(p)).append(w.append(m)));this._current_values_parents[s]=e}}else{var b=$("<tr>");var w=$("<tr>");var g=0;if(this._view_properties.show_current_values==true){++g}if(this._view_properties.show_average_values==true){++g}if(this._view_properties.show_peak_values==true){++g}var o=100/g;if(this._view_properties.show_current_values==true){var e=$("<span>").append("&nbsp;");var h=$("<td>").append(rdx.i18n.get_string(rdx.chart_constants.CURRENT)).width(o);var n=$("<td>").addClass("value").append(e);b.append(h);w.append(n);this._current_values_parents[rdx.chart_constants.CURRENT]=e}if(this._view_properties.show_average_values==true){var f=$("<td>").append(rdx.i18n.get_string(rdx.chart_constants.AVERAGE)).width(o);var z=$("<span>").append("&nbsp;");var a=$("<td>").addClass("value").append(z);b.append(f);w.append(a);this._current_values_parents[rdx.chart_constants.AVERAGE]=z}if(this._view_properties.show_peak_values==true){var v=$("<td>").append(rdx.i18n.get_string(rdx.chart_constants.PEAK)).width(o);var u=$("<span>").append("&nbsp;");var d=$("<td>").addClass("value").append(u);b.append(v);w.append(d);this._current_values_parents[rdx.chart_constants.PEAK]=u}var t=$("<table>").addClass("current_value_table").addClass("label_value_table").append($("<tbody>"));this._current_values_div.append(t.append(b).append(w))}};rdx.chart_view.prototype.form_data_by_category=function(z){var s=this._view_definition.categorize_by_filter;var n=s.split(",");var b=this._view_definition.resource_properties;var t=[];var a=[];var w={};var u=0;for(var h in b){if(b.hasOwnProperty(h)){u++}}for(var p=0,v=z.length;p<v;p++){var q=z[p];var m="";for(c=0;c<n.length;c++){var B=q[n[c]]?q[n[c]]:null;if(!B){continue}if(c>0){m=m+"_"}m=m+B}if(!m||m==""){continue}var g={};for(var A in b){g[m+"_"+A]=q[A]}if(q.timestamp){g.timestamp=q.timestamp}else{if(rdx.utils.is_defined(this._view_definition.view_properties.timestamp_label)){g[this._view_definition.view_properties.timestamp_label]=q[this._view_definition.view_properties.timestamp_label]}}a.push(g);if($.inArray(m,t)===-1){t.push(m)}}for(var o=0;o<t.length;o++){var d=t[o];for(var f in b){if(!w[d+"_"+f]){var e=this._get_resource_prop_label(f);if(u>1&&t.length>1){if(!(this._view_properties.use_default_label==true)){e=d+"_"+e}}else{if(u===1&&t.length>=1){e=d}}w[d+"_"+f]={label:e}}}}return[a,w]};rdx.chart_view.prototype.get_unique_from_array=function(f,e){if(!rdx.utils.is_defined(e)){return null}var a=new Array();for(var d=0,b=f.length;d<b;d++){if(a.indexOf(f[d][e])===-1){a.push(f[d][e])}}return a};rdx.chart_view.prototype.get_resource_response_arrived=function(ae){try{if(this._view_definition.view_properties.title=="L7 Client-side Latency"){this._view_definition=rdx.views.timeline_tabbed_chart_views.tabs[9].view}if(this._view_definition.view_properties.title=="L7 Server-side Latency"){this._view_definition=rdx.views.timeline_tabbed_chart_views.tabs[10].view}var F=this._view_definition.resource_properties;var au=null;var at=null;if(rdx.utils.is_defined(ae)&&rdx.utils.is_object(ae)&&rdx.utils.is_defined(ae.response)){au=ae.response;if(rdx.utils.is_defined(ae.multiple_input_data_array)){this._view_properties.multiple_input_data_array=ae.multiple_input_data_array;at=ae.multiple_input_data_array}if(rdx.utils.is_defined(ae.max_number_of_points)){this._chart.set_max_number_of_points(ae.max_number_of_points)}if(rdx.utils.is_defined(ae.secondary_y_axis_properties)){this._chart.set_secondary_y_axis(ae.secondary_y_axis_properties["secondary_y_axis"],ae.secondary_y_axis_properties["secondary_y_axis_label_renderer_callback"])}if(rdx.utils.is_defined(ae.x_axis_label_enabled)){this._chart.set_xaxis_label_enabled(ae.x_axis_label_enabled)}if(rdx.utils.is_defined(ae.x_axis_label_rotation)){this._chart.set_xaxis_label_rotation(ae.x_axis_label_rotation)}if(rdx.utils.is_defined(ae.yaxis)){this._view_properties.yaxis=ae.yaxis}if(rdx.utils.is_defined(ae.y_axis_label_renderer_callback)){this._chart.set_yaxis_label_renderer_callback(ae.y_axis_label_renderer_callback)}}else{au=ae}if(rdx.utils.is_defined(this._view_definition.categorize_by_filter)){var m=this.form_data_by_category(au);au=m[0];F=m[1];this._view_definition.category_resource_props=F}if(rdx.utils.is_defined(au)){if(au.length<=0){if(rdx.utils.is_defined(this._view_properties.add_point_after_multiple_points)&&this._view_properties.multiple_input_data_array==false){return}if(rdx.utils.is_defined(this._parent)){this._chart._chart_div.hide();this._chart._no_data_div.show();if(rdx.utils.is_defined(this._toggle_anchor)){this._toggle_anchor.hide()}if(rdx.utils.is_defined(this._more_chart_info)){this._more_chart_info.hide()}return}}else{this._chart._no_data_div.hide();this._chart._chart_div.show();if(rdx.utils.is_defined(this._toggle_anchor)){this._toggle_anchor.show()}if(rdx.utils.is_defined(this._more_chart_info)&&this._view_properties.type===rdx.chart_constants.PIE){this._more_chart_info.show()}}}if(this._view_properties.multiple_input_data_array===false||(rdx.utils.is_defined(at)&&at===false)){var o=rdx.utils.is_array(au)?au[0]:au;if(typeof(o)=="undefined"){return}var ay=new Array();var R=new Date().getTime();if(rdx.utils.is_not_defined(this._view_properties.is_response_series)){for(var C in F){var A=this._get_resource_prop_label(C);var ac=new Object();ac.name=A;if(this._view_properties.type!=rdx.chart_constants.PIE){ac.x=R}var ax=F[C].formatter_callback;if(typeof(ax)!="undefined"){ac.y=ax.call_back([o])}else{ac.y=parseFloat(o[C])}ay.push(ac)}}var w=null;if(rdx.utils.is_defined(this._view_properties.title_resource_key)&&rdx.utils.is_defined(o[this._view_properties.title_resource_key])){w=o[this._view_properties.title_resource_key]}this._chart.set_title_response_str(w);if(ay.length>0||rdx.utils.is_defined(this._view_properties.is_response_series)){if(this._view_properties.type!=rdx.chart_constants.PIE){if(rdx.utils.is_defined(this._view_properties.add_point_after_multiple_points)&&this._view_properties.add_point_after_multiple_points===true&&rdx.utils.is_defined(this._view_properties.is_response_series)&&this._view_properties.is_response_series){this._chart.add_multiple_points(au,null,this.get_primary_series_index(au))}else{this._update_current_values(ay);this._chart.add_points(ay,this._dummy_data_plotted?true:null)}if(this._dummy_data_plotted){this.resize_view();this._dummy_data_plotted=false}}else{var g=new Object();g.data=rdx.utils.is_defined(this._view_properties.is_response_series)?au:ay;var q=new Array();q.push(g);this._chart.set_data(q)}}}else{if(this._view_properties.is_date_time_xaxis==true){if(rdx.utils.is_defined(this._view_properties.leave_old_data_intact)&&this._view_properties.leave_old_data_intact){if(rdx.utils.is_not_defined(this._multiple_series)){this._multiple_series=new Array()}}else{if(rdx.utils.is_defined(this._view_properties.reload_data_on_refresh)&&this._view_properties.reload_data_on_refresh){this._multiple_series=new Array()}}var q=new Array();var D=0;var J=0;if(rdx.utils.is_defined(this._view_properties.is_response_series)&&this._view_properties.is_response_series){if(rdx.utils.is_defined(this._multiple_series)&&D<this._multiple_series.length&&rdx.utils.is_defined(this._multiple_series[D].data)){while(D<au.length){if(au[D]["name"]==this._multiple_series[D]["name"]){au[D]["data"]=this._multiple_series[D]["data"].concat(au[D]["data"])}D++}}q=au}else{for(var C in F){J++;q[D]={name:this._get_resource_prop_label(C),id:C,data:(rdx.utils.is_defined(this._multiple_series)&&D<this._multiple_series.length&&rdx.utils.is_defined(this._multiple_series[D].data))?this._multiple_series[D].data:new Array()};if(rdx.utils.is_defined(this._view_properties.update_sereis_callback)){var z=this._view_properties.update_sereis_callback.call_back([q[D]["name"],rdx.utils.get_formatted_response(au)]);if(rdx.utils.is_defined(z)){q[D]=$.extend(true,q[D],z)}}for(var av=0,U=au.length;av<U;av++){if(!rdx.utils.is_defined(au[av][C])){continue}var ac=new Object();if(this._view_properties.type!=rdx.chart_constants.PIE){if(rdx.utils.is_defined(this._view_properties.xaxis)){ac.x=au[av][this._view_properties.xaxis]}else{ac.x=R}}var ax=F[C].formatter_callback;if(typeof(ax)!="undefined"){ac.y=ax.call_back([au[av]])}else{ac.y=parseFloat(au[av][C])}if(rdx.utils.is_defined(q[D].store_custom_data)){ac.custom_data=au[av][q[D].store_custom_data]}q[D].data.push(ac);var A=q[D].name;if(rdx.utils.is_defined(this._view_properties.colors_enum)&&this._view_properties.colors_enum.length>0){var M=this._view_properties.colors_enum[0][A];if(rdx.utils.is_defined(M)){q[D].color=M}}}D++}}if(J>1&&this._view_properties.plot_two_axis==true){q[0].yAxis=1}this._update_current_values(q);this._multiple_series=q;this._chart.render(q)}else{if(rdx.utils.is_defined(this._view_definition.view_properties.histogram)&&this._view_definition.view_properties.histogram){var q=new Array();var B={},ai,av,G=[];if(rdx.utils.is_defined(au)){for(av=0;av<au.length;av++){var g={};g.name=au[av]["x1"];g.y=au[av]["y"];g.custom_data={dx:au[av]["dx"]};G.push(g)}var g=new Object();g.data=G;g.name=rdx.i18n.get_string(this._resource.properties[this._view_properties.xaxis].label);q.push(g);this._update_current_values(q);this._chart.render(q)}}else{if(rdx.utils.is_defined(this._view_definition.view_properties.customizable_x_axis)&&this._view_definition.view_properties.customizable_x_axis){if(rdx.utils.is_defined(au)){for(var H in F){var q=new Array();var N=this.get_unique_from_array(au,H);var P=new Array();for(var an in N){var ay=new Array();for(var av=0,U=au.length;av<U;av++){if(au[av][H]!=N[an]){continue}var ad=0;var aq=au[av][this._view_properties.xaxis];if(ad>=this._chart._properties.colors.length){ad=0}var M=this._chart._properties.colors[ad];if(rdx.utils.is_defined(this._view_properties.colors_enum)&&this._view_properties.colors_enum.length>0){M=this._view_properties.colors_enum[0][N[an]];if(rdx.utils.is_defined(M)){this._chart._properties.colors[ad]=M}}ad++;ay.push({name:aq,color:M,y:parseInt(au[av][this._view_properties.yaxis])});P.push(au[av][this._view_properties.xaxis])}P=rdx.utils.remove_duplicates_in_array(P);if(ay.length>0){var g=new Object();g.data=ay;g.color=ay[0]["color"];g.name=rdx.i18n.get_string(N[an]);q.push(g)}else{var g=new Object();var q=new Array();q.push(g);this._chart.set_data(q,true,P)}}}this._chart._properties.categories=P;this._chart._redraw_and_avoid_negatives(true);var b=this._view_definition.view_properties.width;if(rdx.utils.is_not_defined(b)){b=this._chart._properties.width}var f=this._view_definition.view_properties.height;if(rdx.utils.is_not_defined(f)){f=this._chart._properties.height}this._chart.set_size(b,f);this._chart.render(q)}}else{if(this._view_definition.view_properties.type==rdx.chart_constants.SPLINE&&rdx.utils.is_defined(this._view_definition.view_properties.is_cdf_chart)&&this._view_definition.view_properties.is_cdf_chart){var q=new Array();var ay=new Array();if(rdx.utils.is_defined(au)){var am=new Array();var ab=0;for(var av=0,U=au.length;av<U;av++){ab=ab+parseFloat(au[av][this._view_properties.yaxis]);am.push(ab)}for(var av=0,U=au.length;av<U;av++){var O=0;if(ab>0){O=(am[av]/ab)*100}ay.push({x:parseInt(au[av][this._view_properties.xaxis]),y:O})}}if(ay.length>0){var g=new Object();g.data=ay;g.name=rdx.i18n.get_string(this._resource.properties[this._view_properties.xaxis].label);q.push(g)}this._update_current_values(q);this._chart.render(q)}else{if(this._view_definition.view_properties.is_response_array_of_objects&&((this._view_definition.view_properties.type==rdx.chart_constants.STACKED_AREA_SPLINE)||(this._view_definition.view_properties.type==rdx.chart_constants.AREA)||(this._view_definition.view_properties.type==rdx.chart_constants.AREA_SPLINE)||(this._view_definition.view_properties.type==rdx.chart_constants.SPLINE)||(this._view_definition.view_properties.type==rdx.chart_constants.LINE)||(this._view_definition.view_properties.type==rdx.chart_constants.BAR)||(this._view_definition.view_properties.type==rdx.chart_constants.COLUMN))){var T=rdx.utils.is_defined(this._view_definition.view_properties.dynamic_number_of_arrays)&&this._view_definition.view_properties.dynamic_number_of_arrays;var p=[];if(rdx.utils.is_defined(au)){if(rdx.utils.is_defined(au[0])){p=au[0]}}var q=new Array();var N=new Array();if(T){N=p}else{N=F}for(var H in N){if(T){au=p[H]}else{if(rdx.utils.is_defined(p[this._resource.properties[H].key])){au=p[this._resource.properties[H].key]}}var ay=new Array();var P=new Array();if(rdx.utils.is_defined(au)){if((this._view_definition.view_properties.type==rdx.chart_constants.BAR)||(this._view_definition.view_properties.type==rdx.chart_constants.COLUMN)){for(var av=0,U=au.length;av<U;av++){ay.push(parseInt(au[av][this._view_properties.yaxis]));P.push(au[av][this._view_properties.xaxis])}}else{for(var av=0,U=au.length;av<U;av++){ay.push({x:au[av][this._view_properties.xaxis],y:parseInt(au[av][this._view_properties.yaxis])});P.push(au[av][this._view_properties.xaxis])}}}if(ay.length>0){var g=new Object();g.data=ay;if(T){g.name=rdx.i18n.get_string(H)}else{g.name=this._get_resource_prop_label(C)}q.push(g)}else{var g=new Object();var q=new Array();q.push(g)}}this._update_current_values(q);if((this._view_definition.view_properties.type==rdx.chart_constants.STACKED_AREA_SPLINE)||(this._view_definition.view_properties.type==rdx.chart_constants.AREA_SPLINE)||(this._view_definition.view_properties.type==rdx.chart_constants.SPLINE)||(this._view_definition.view_properties.type==rdx.chart_constants.LINE)){this._chart.render(q)}else{this._chart.set_data(q,true,P)}}else{var aA=(this._view_definition.view_properties.type==rdx.chart_constants.PIE);var ay=new Array();P=new Array();var ar=new Array();var ah=new Array();var ad=0;for(var al=0,U=au.length;al<U;al++){var aq=au[al][this._view_properties.xaxis];var d={};if(ad>=this._chart._properties.colors.length){ad=0}var M=this._chart._properties.colors[ad];if(rdx.utils.is_defined(this._view_properties.colors_enum)&&this._view_properties.colors_enum.length>0){M=this._view_properties.colors_enum[0][aq];if(rdx.utils.is_defined(M)){this._chart._properties.colors[ad]=M}}ad++;var v={name:aq,color:M,y:parseFloat(au[al][this._view_properties.yaxis])};if(rdx.utils.is_defined(this._view_properties.selected_data)&&this._view_properties.selected_data==aq){v.selected=true;v.sliced=true}if(rdx.utils.is_defined(this._view_properties.store_custom_data)){var n=this._view_properties.store_custom_data;for(Z=0;Z<n.length;Z++){d[n[Z]]=au[al][n[Z]]}v.custom_data=d}if(aA){ay.push(v)}else{if(this._view_definition.view_properties.type==rdx.chart_constants.STACKED_COLUMN||(this._view_definition.view_properties.type==rdx.chart_constants.STACKED_BAR)){var e=this._view_properties.stackSeriesKey;if(rdx.utils.is_not_defined(e)){break}if(!this._view_properties.is_data_stacked){ar.push({name:au[al][e]})}}else{var a={name:aq,color:M,y:parseInt(au[al][this._view_properties.yaxis])};if(rdx.utils.is_defined(this._view_properties.store_custom_data)){a.custom_data=d}ay.push(a)}}P.push(au[al][this._view_properties.xaxis])}if(this._view_definition.view_properties.type==rdx.chart_constants.STACKED_COLUMN||(this._view_definition.view_properties.type==rdx.chart_constants.STACKED_BAR)){var h=this._view_properties.is_data_stacked;if(h){ar=this._view_properties.stackSeriesKey}else{ar=rdx.utils.remove_duplicates_in_json_array(ar,"name")}P=rdx.utils.remove_duplicates_in_array(P);var I=new Array();for(var ao=0;ao<ar.length;ao++){var L=new Array();var ag=P.length;for(var az=0;az<ag;az++){var t=P[az];L.push({name:t,y:null,color:this._chart._properties.colors[az]});I[t]=az}var af=h?ar[ao]:ar[ao].name;var E={};for(var ap=0;ap<au.length;ap++){var Q=au[ap];var W=this._view_properties.stackSeriesKey;var ak=h?af:Q[W];var aj=h?af:this._view_properties.yaxis;if(ak==af){var aw=parseFloat(Q[aj]);var S=Q[this._view_properties.xaxis];var K=this._chart._properties.colors[ao];if(rdx.utils.is_defined(this._view_properties.colors_enum)&&this._view_properties.colors_enum.length>0){K=this._view_properties.colors_enum[0][ak];if(rdx.utils.is_defined(K)){this._chart._properties.colors[ao]=K}}var Z=I[S];var aa=L[Z].y;if(aa!==null){aw+=aa}L[Z]={name:S,y:aw,color:K}}}E.name=h?this._resource.properties[af].label:af;E.data=L;ah.push(E)}}else{if(ay.length>0){var g=new Object();g.data=ay;g.name=rdx.i18n.get_string(this._resource.properties[this._view_properties.yaxis].label);var q=new Array();q.push(g);this._chart.set_data(q,true,P)}else{var g=new Object();g.data=[];var q=new Array();q.push(g);this._chart.set_data(q,true,P)}}}}}}}if((this._view_definition.view_properties.type==rdx.chart_constants.STACKED_COLUMN)||(this._view_definition.view_properties.type==rdx.chart_constants.STACKED_BAR)){this._chart._properties.categories=P;this._chart._redraw_and_avoid_negatives(true);var b=this._view_definition.view_properties.width;if(rdx.utils.is_not_defined(b)){b=this._chart._properties.width}var f=this._view_definition.view_properties.height;if(rdx.utils.is_not_defined(f)){f=this._chart._properties.height}this._chart.render(ah)}}this._render_information_note();if(this._view_properties.resize_view==true){this.resize_view()}this._show_more_info(au);if(rdx.utils.is_defined(this._view_properties.on_data_update)){this._view_properties.on_data_update.call_back([this._chart._chart,au])}}catch(V){}};rdx.chart_view.prototype.get_stack_data_object=function(d,a,e){var b=new Array();return b};rdx.chart_view.prototype._render_more_info=function(){if(rdx.utils.is_not_defined(this._view_definition.more_info_properties)){return}if(rdx.utils.is_defined(this._more_chart_info)){this._more_chart_info.empty()}else{var a=$("<div>").addClass("more_info_container").appendTo(this._parent);this._more_chart_info=$("<ul>").addClass("chart-more-info").appendTo(a);if(rdx.utils.is_defined(this._view_properties.more_info)&&this._view_properties.more_info.layout==="TABLE"){this._more_chart_info.addClass("table-layout");if(this._view_properties.type!=rdx.chart_constants.PIE){a.append(this._render_toggle_anchor())}}if(rdx.utils.is_defined(this._view_properties.more_info)&&this._view_properties.more_info.layout==="DATATABLE"){this._more_chart_info=$("<div>").addClass("chart-more-info").appendTo(a).addClass("datatable-layout");a.append(this._render_toggle_anchor())}}};rdx.chart_view.prototype._render_toggle_anchor=function(){var a=this;this._more_chart_info.addClass("hidden").hide();this._toggle_anchor=$("<a>").addClass("toggle_more_info").attr("href","#").text("Tabular View").hide();this._toggle_anchor.bind(rdx.events.CLICK,{},function(b){if(a._more_chart_info.hasClass("hidden")){a._highcharts_chart_div.hide();a._more_chart_info.show();a._more_chart_info.removeClass("hidden");$(b.target).text("Graphical View")}else{a._more_chart_info.hide();a._highcharts_chart_div.show();a._more_chart_info.addClass("hidden");$(b.target).text("Tabular View")}b.preventDefault()});return this._toggle_anchor};rdx.chart_view.prototype._show_more_info=function(m){if(rdx.utils.is_defined(this._view_definition.more_info_properties)){if(rdx.utils.is_defined(this._more_chart_info)){this._more_chart_info.empty()}if(rdx.utils.is_defined(this._toggle_anchor)){this._toggle_anchor.show()}if(this._view_properties.multiple_input_data_array===true){var q=[];if(rdx.utils.is_defined(this._view_properties.more_info)&&rdx.utils.is_defined(this._view_properties.more_info.exclude_list)){q=this._view_properties.more_info.exclude_list}var a=this._view_definition.more_info_properties;if(this._view_properties.more_info.layout=="DATATABLE"){m=this._process_datatable_data(m,a);var t=this.get_more_info_view(m);var g=new rdx.base_view(this._more_chart_info,t);var s=g.get_view_context();s.set_url_params({is_data_set:true},m);g.prepare_view()}else{for(var p=0;p<m.length;p++){var e=m[p];if($.inArray(e[a.key],q)==-1){var o=e[a.value];var f=(this._view_properties.colors&&this._view_properties.colors[p])?this._view_properties.colors[p]:null;var d=this._get_more_info_row(a.key,e[a.key],o,f);if(d){this._more_chart_info.append(d)}}}}}else{if(this._view_properties.multiple_input_data_array===false){var h=0;for(var n in this._view_definition.more_info_properties){var a=this._view_definition.more_info_properties[n];var b=this._get_resource_prop_label(n);var o=rdx.utils.is_array(m)?m[0][n]:m[n];var f=this._view_properties.colors?this._view_properties.colors[h]:null;var d=this._get_more_info_row(n,b,o,f);if(d){this._more_chart_info.append(d)}h++}}}}};rdx.chart_view.prototype._process_datatable_data=function(h,d){var m={};var f=d.category;var b=d.key;var g=d.value;for(var a=0;a<h.length;a++){if(rdx.utils.is_not_defined(m[h[a][f]])){m[h[a][f]]={category:h[a][f]}}m[h[a][f]][h[a][b]]=h[a][g]}h=[];for(var e in m){h.push(m[e])}return h};rdx.chart_view.prototype.get_more_info_view=function(g){var e={};for(var d=0;d<g.length;d++){var f=g[d];for(var a in f){if(rdx.utils.is_not_defined(e[a])){e[a]={key:a,label:a,renderer_callback:new rdx.callback(this,this.datatable_render_callback,[a,g[d]])};if(a=="category"){e[a]["label"]="Category";e[a]["width"]="150px"}}}}var b={type:rdx.view_constants.DETAIL_VIEW,resource_name:"ns",add_to_bread_crumb:false,is_child_view:true,resource_properties:e,view_properties:{title:"",show_view_settings:false,is_tool_bar_required:false,export_enabled:false,rows_selection:false,class_names:"more_info_datatable table"}};return b};rdx.chart_view.prototype.datatable_render_callback=function(b,d){var e=this;if(rdx.utils.is_defined(this._view_properties.point_select_callback)&&d!="category"&&rdx.utils.is_not_empty(b[d])){var a=$("<a>").text(b[d]).attr("href","#");a.bind(rdx.events.CLICK,{},function(f){e._view_properties.point_select_callback.call_back([{key:d,object:b}]);f.stopPropagation();f.preventDefault()});return a}else{return b[d]}};rdx.chart_view.prototype._get_more_info_row=function(n,d,o,g){var e=$("<span>");e.addClass("row-lbl").text(d).attr("title",d);var f=true;if(rdx.utils.is_defined(this._view_properties.more_info)&&rdx.utils.is_defined(this._view_properties.more_info.row_renderer)){f=this._view_properties.more_info.row_renderer.call_back([o])}var b=null;var m=null;if(f){b=$("<li>").addClass("chart-info-row");m=$("<a>").addClass("more-info-anchor").appendTo(b).attr("href","#");if(!this._view_properties.multiple_input_data_array&&rdx.utils.is_defined(this._view_definition.more_info_properties[n].renderer_callback)){o=this._view_definition.more_info_properties[n].renderer_callback.call_back([o])}var h=$("<span>").addClass("row-data").attr("key",n).text(o);var q=this;if(rdx.utils.is_defined(this._view_definition.view_properties.point_select_callback)){b.addClass("details_from_chart");var p={key:n,name:d,value:o};b.bind(rdx.events.CLICK,{point_data:p},function(s){q._view_definition.view_properties.point_select_callback.call_back([s.data.point_data])})}else{b.bind(rdx.events.CLICK,{point_data:p},function(s){s.stopPropagation();s.preventDefault()})}m.append(e).append(h);if(rdx.utils.is_defined(this._view_properties.more_info)&&this._view_properties.more_info.layout==="TABLE"){if(g){b.css("border-left","5px solid "+g)}if(this._view_properties.colors_enum.length>0){var a=rdx.utils.is_array(this._view_properties.colors_enum)?this._view_properties.colors_enum[0]:this._view_properties.colors_enum;b.css("border-left","5px solid "+a[d])}}}return b};rdx.chart_view.prototype._update_current_values=function(f){if(this._view_properties.show_current_values==false&&this._view_properties.show_peak_values==false&&this._view_properties.show_average_values==false){return}if(this._view_properties.multiple_input_data_array==false){for(var g=0,n=f.length;g<n;g++){var b=this._current_values_parents[f[g].name];b.parent().removeClass("hidden");b.text(rdx.chart_utils.format_number(f[g].y))}}else{var o=true;if(rdx.utils.is_object_not_empty(f)&&rdx.utils.is_object_not_empty(f[0])){o=false}if(rdx.utils.is_defined(this._view_definition.view_properties.y_axis_label_renderer_callback)){var p=this._view_definition.view_properties.y_axis_label_renderer_callback}if(rdx.utils.is_defined(this._current_values_parents[rdx.chart_constants.CURRENT])){var b=this._current_values_parents[rdx.chart_constants.CURRENT];if(o){b.text("-")}else{var m=this.get_current_value(f);if(rdx.utils.is_defined(p)){b.text(p.call_back([{key:m},"key"]))}else{b.text(rdx.chart_utils.format_number(m))}}}if(rdx.utils.is_defined(this._current_values_parents[rdx.chart_constants.AVERAGE])){var e=this._current_values_parents[rdx.chart_constants.AVERAGE];if(o){e.text("-")}else{var a=this.get_average_value(f);if(rdx.utils.is_defined(p)){e.text(p.call_back([{key:a},"key"]))}else{e.text(rdx.chart_utils.format_number(a))}}}if(rdx.utils.is_defined(this._current_values_parents[rdx.chart_constants.PEAK])){var h=this._current_values_parents[rdx.chart_constants.PEAK];if(o){h.text("-")}else{var d=this.get_peak_value(f);if(rdx.utils.is_defined(p)){h.text(p.call_back([{key:d},"key"]))}else{h.text(rdx.chart_utils.format_number(d))}}}}};rdx.chart_view.prototype.resize_view=function(){this._chart.set_size()};rdx.chart_view.prototype.get_base_view=function(){return this._base_view};rdx.chart_view.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.chart_view.prototype.get_current_value=function(d){var e=0;if(rdx.utils.is_array(d)){var f=d.length;for(var b=0;b<f;b++){if(rdx.utils.is_defined(d[b]["data"])&&rdx.utils.is_array(d[b]["data"])){var a=d[b]["data"].length;if(rdx.utils.is_defined(d[b]["data"][a-1].y)){e+=d[b]["data"][a-1].y}else{if(rdx.utils.is_num(d[b]["data"][a-1])){e+=d[b]["data"][a-1]}}}}}return e};rdx.chart_view.prototype.get_average_value=function(e){var a=0;if(rdx.utils.is_array(e)){var m=0;var d=0;var n=0;var b=e.length;for(var f=0;f<b;f++){if(rdx.utils.is_defined(e[f]["data"])&&rdx.utils.is_array(e[f]["data"])){var g=e[f]["data"].length;d+=g;n=g;for(var h=0;h<g;h++){if(rdx.utils.is_defined(e[f]["data"][h].y)){m+=e[f]["data"][h].y}else{if(rdx.utils.is_num(e[f]["data"][h])){m+=e[f]["data"][h]}}}}}if(this.is_stacked_chart()){if(n>0){a=Math.round(m/n)}}else{if(d>0){a=Math.round(m/d)}}}return a};rdx.chart_view.prototype.get_peak_value=function(a){var b=0;if(rdx.utils.is_array(a)){if(this.is_stacked_chart()){b=this.get_stacked_peak_value(a)}else{b=this.get_series_peak_value(a)}}return b};rdx.chart_view.prototype.get_series_peak_value=function(f){var h=0;var m=f.length;var e=[];for(var d=0;d<m;d++){var b=[];if(rdx.utils.is_defined(f[d]["data"])&&rdx.utils.is_array(f[d]["data"])){var a=f[d]["data"].length;for(var g=0;g<a;g++){if(rdx.utils.is_defined(f[d]["data"][g].y)){b.push(f[d]["data"][g].y)}else{if(rdx.utils.is_num(f[d]["data"][g])){b.push(f[d]["data"][g])}}}}if(b.length!=0){e[d]=Math.max.apply(Math,b)}}if(e.length!=0){h=Math.max.apply(Math,e)}return h};rdx.chart_view.prototype.get_stacked_peak_value=function(d){var f=0;var g=[];var h=d.length;for(var b=0;b<h;b++){if(rdx.utils.is_defined(d[b]["data"])&&rdx.utils.is_array(d[b]["data"])){var a=d[b]["data"].length;if(g.length==0){for(var e=0;e<a;e++){g[e]=0}}for(var e=0;e<a;e++){if(rdx.utils.is_defined(d[b]["data"][e].y)){g[e]+=d[b]["data"][e].y}else{g[e]+=d[b]["data"][e]}}}}if(g.length!=0){f=Math.max.apply(Math,g)}return f};rdx.chart_view.prototype.is_stacked_chart=function(){if(rdx.utils.is_defined(this._view_definition)){var a=this._view_definition.view_properties.type;return((a==rdx.chart_constants.STACKED_AREA_SPLINE)||(a==rdx.chart_constants.STACKED_AREA)||(a==rdx.chart_constants.STACKED_BAR)||(a==rdx.chart_constants.STACKED_COLUMN))}return false};rdx.chart_view.prototype._render_information_note=function(){if(rdx.utils.is_defined(this._view_properties.information_note)){if(rdx.utils.is_defined(this._information_note_div)){this._information_note_div.remove()}this._information_note_div=$("<div>").addClass("chart_view_label_title").text("Note: "+rdx.i18n.get_string(this._view_properties.information_note));this._chart._parent.after(this._information_note_div)}};rdx.chart_view.prototype.add_mask=function(){if(rdx.utils.is_defined(this._view_properties.add_mask)){return this._view_properties.add_mask}return true};rdx.chart_view.prototype.add_metric_selection_control=function(){var d=this;var e=this._view_properties.metric_selection_options;var f=$("<select>").addClass("drop_down_selector");this.metric_selection_control.append(f);this.metric_selection_control.appendTo(this._parent);for(var a in e){var b=$("<option>").attr({value:e[a]}).text(a);f.append(b)}if(rdx.utils.is_defined(this._view_properties.default_metric_selection_option)){f.val(this._view_properties.default_metric_selection_option.call_back([this]))}f.change(function(){if(rdx.utils.is_defined(d._view_properties.metric_selection_callback)){d._view_properties.metric_selection_callback.call_back([$(this).val(),d])}})};rdx.chart_view.prototype.get_resource_name=function(){return this._view_definition.resource_name};rdx.chart_view.prototype.add_duration_dropdown=function(){var f=this;var h=this._view_properties.duration_options;var b=$("<div>").addClass("items");var g=false;for(var d=0;d<h.length;d++){var a=$("<span>").append(h[d]["label"]).addClass("item").attr("value",h[d]["key"]).attr("title",h[d]["desc"]);if(h[d]["select_by_default"]===true){a.addClass("selected")}b.append(a);a.bind(rdx.events.CLICK,{},function(o){if($(o.target).hasClass("selected")){return}var n=$(this).attr("value");rdx.SELECTED_DURATION=n;f._parent.find(".selected").removeClass("selected");$(o.target).addClass("selected");if(rdx.utils.is_defined(f._view_properties.duration_change_callback)){f._view_properties.duration_change_callback.call_back([n,f._base_view])}else{var p=$.extend(true,{},f._view_definition.view_context,{custom:{duration:n}});var m=f.get_view_context();m.set_url_params(p);f.refresh_view()}})}var e=$("<div>").addClass("duration_options").append(b).appendTo(this._parent)};rdx.chart_view.prototype.destroy=function(){this.get_base_view().destroy_view()};rdx.chart_view.prototype.get_primary_series_index=function(d){var a=-1;if(rdx.utils.is_not_defined(d)||!rdx.utils.is_array(d)){return a}for(var b=0;b<d.length;b++){if(rdx.utils.is_defined(d[b]["primary_series"])&&d[b]["primary_series"]){a=b;break}}return a};rdx.chart_view.prototype.refresh_view=function(a){if(this._crossfilter){var d=this._view_properties.crossfilter;var b=rdx.crossfilter_controller.get_data_by_properties(this._resource.name,d);this._chart.set_series_data(b)}else{this._base_view.prepare_view()}};rdx.chart_view.prototype.action_on_view_selection=function(m,f){var p=this._base_view;var h=p.is_crossfilter_view();if(h){var a=p.get_resource().name;var d=p.get_view_definition().view_properties.crossfilter;var e=d.dimension;if(rdx.utils.is_defined(e)){if(f){var n=rdx.crossfilter_controller.apply_filter(a,d,m)}else{var n=rdx.crossfilter_controller.clear_filter(a,e)}}var o=this._base_view.get_view_definition().view_properties.dependent_views;if(rdx.utils.is_defined(o)){for(var g=0;g<o.length;g++){var b=rdx.active_views.get_view(o[g]);if(rdx.utils.is_defined(b)){b.refresh_view(null,true)}}}}};rdx.composite_view=function(d,b,a){this._parent=d;this._view_definition=b;this._DEFAULT_VIEW_PROPERTIES={layout:rdx.view_constants.GRID_LAYOUT,columns_width:[],destoy_view_on_inner_view_destroy:false,theme:"default",class_names:null,add_border:false,cell_border:true,add_header:true,cell_gap:0,cell_padding:0,border_radius:0,is_common_data_resource:false,accordion:false,add_drop_down:false,drop_down_options:{},drop_down_callback:null,drop_down_title:null,default_dropdown_option:null};this._toolbar_items=null;this._container=null;this._table=null;this._view_properties=$.extend({},this._DEFAULT_VIEW_PROPERTIES,b.view_properties);this._base_view=a;this._views_table=null;this._parent_child_view_map={};this._views_map={};this._view_dependencies=null;this._currently_destroyed_view_index=-1;this._inner_view_already_destroyed=false};rdx.composite_view.prototype=new rdx.abstract_view();rdx.composite_view.prototype.make_view=function(){if(rdx.utils.is_defined(rdx.export_context_view_and_get_url)){rdx.export_context_view_and_get_url={}}this._base_view.remove_decorator();if(this._view_properties.add_drop_down){this._add_drop_down_options()}switch(this._view_properties.layout){case rdx.view_constants.GRID_LAYOUT:this._make_grid_view();break}if(rdx.utils.is_defined(this._view_definition.view_dependencies)){this._view_dependencies=new rdx.dependency(this,this._view_definition.view_dependencies,false);this._view_dependencies.trigger_dependencies()}if(rdx.utils.is_not_empty(this._view_properties.ns_view_class)){$(this._parent).closest(".ns_view_container").addClass(this._view_properties.ns_view_class)}};rdx.composite_view.prototype._add_drop_down_options=function(){var f=this;var g=$("<div>").addClass("drop_down_ribbon");this._parent.append(g);var a=$("<div>").addClass("drop_down_title").text(this._view_properties.drop_down_title);var b=$("<select>").addClass("drop_down_selector list");for(var d in this._view_properties.drop_down_options){var e=$("<option>").attr({value:this._view_properties.drop_down_options[d]}).text(d);b.append(e)}if(rdx.utils.is_defined(this._view_properties.default_dropdown_option)){b.val(this._view_properties.default_dropdown_option.call_back())}g.append(a).append(b);b.change(function(){if(rdx.utils.is_defined(f._view_properties.drop_down_callback)){f._view_properties.drop_down_callback.call_back([$(this).val(),f])}})};rdx.composite_view.prototype._add_tool_bar=function(){var a=[new rdx.action({tooltip:rdx.i18n.get_string("rdx.refresh"),image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this._refresh_view)})];this._toolbar_items=a};rdx.composite_view.prototype._add_action_bar=function(){this._action_properties=rdx.view_utils.get_action_bar_items(this._view_definition,this._base_view.get_parent(),this._base_view.get_view_context())};rdx.composite_view.prototype.get_toolbar_items=function(){if(rdx.utils.is_defined(this._view_properties.is_tool_bar_required)&&!this._view_properties.is_tool_bar_required){return[]}if(rdx.utils.is_defined(this._toolbar_items)){return this._toolbar_items}this._add_tool_bar();return this._toolbar_items};rdx.composite_view.prototype.get_action_items=function(){if(rdx.utils.is_defined(this._action_properties)){return this._action_properties}this._add_action_bar();return this._action_properties};rdx.composite_view.prototype.is_tool_bar_required=function(){return true};rdx.composite_view.prototype.is_action_bar_required=function(){return rdx.utils.is_defined(this._view_definition.resource_operations)};rdx.composite_view.prototype.get_tool_bar=function(){return this._base_view.get_toolbar()};rdx.composite_view.prototype.get_is_back_button_required=function(){if(rdx.utils.is_not_defined(this._view_properties.add_back_button)){return false}return this._view_properties.add_back_button};rdx.composite_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.composite_view.prototype._make_grid_view=function(){var g=0;var t=0;var q={};for(var f in this._view_definition.views){var n=this._view_definition.views[f];if(rdx.utils.is_defined(n.show_view)){if(!n.show_view.evaluate()){continue}}q[f]=n;var m=n.row_index;var e=n.column_index;var u=n.row_span;var p=n.column_span;var h=m+1+(rdx.utils.is_defined(u)?(u-1):0);if(g<h){g=h}var d=e+1+(rdx.utils.is_defined(p)?(p-1):0);if(t<d){t=d}}var b=rdx.utils.create_2D_array(g,t);for(var f in q){var n=q[f];b[n.row_index][n.column_index]=f}this._views_table=b;var a=null;var s=null;if(this._container===null){s=$("<table>").addClass("composite_view").attr("cellPadding",0).attr("cellSpacing",0).attr("role","presentation").append($("<tbody>"));a=$("<div>").addClass("composite_view_container");if(rdx.utils.is_defined(this._view_properties.class_names)){a.addClass(this._view_properties.class_names)}a.append(s);if(this._view_properties.add_border===true){a.addClass("add_border")}if(this._view_properties.theme=="light"){a.addClass("composite_view_light")}this._container=a;this._table=s}if(!this._view_properties.is_common_data_resource){this._render_views(b)}else{rdx.mask.mask_component(this._parent,this._view_definition.name)}if(rdx.utils.is_defined(this._view_properties.view_title)){var o=$("<h3>").addClass("composite_view_title_cont");o.append(rdx.i18n.get_string(this._view_properties.view_title));this._parent.append(o)}this._parent.append(a);this._operation_after_dom_render()};rdx.composite_view.prototype._render_views=function(b,o){var z=0;var d=this._base_view.get_view_context();var O=d.get_properties();for(var G=0,F=b.length;G<F;G++){var w=$("<tr>").appendTo(this._table);for(var e=0,C=b[G].length;e<C;e++){var B=b[G][e];if(rdx.utils.is_not_defined(B)){continue}var n=$.extend(true,{separator:false,separator_title:"",content_border:false,add_title_decoration:true},this._view_definition.views[B]);var t=n.row_span;var K=n.column_span;var s=n.separator;var J=n.seperator_title;if(s===false){var H;if(rdx.utils.is_defined(this._view_definition.views[B]["view_definition"])){H=this._view_definition.views[B]["view_definition"]}else{H=rdx.utils.get_view(B)}H.is_child_view=true;var f=$("<td>").addClass("composite_view_cell").appendTo(w);if(rdx.utils.is_not_defined(b[G+1])){f.addClass("last_row")}if(rdx.utils.is_not_defined(b[G][e+1])){f.addClass("last_column")}var u=$("<div>").addClass("cell_content").appendTo(f);if(rdx.utils.is_defined(this._view_properties.row_gap)){u.css("margin-bottom",this._view_properties.row_gap)}if(rdx.utils.is_defined(this._view_properties.columns_width[e])){f.width(this._view_properties.columns_width[e])}if(this._view_properties.cell_border===false){f.addClass("rdx_no_border")}if(this._view_properties.cell_padding>0){f.css({padding:this._view_properties.cell_padding})}if(rdx.utils.is_defined(n.custom_class_name)){f.addClass(n.custom_class_name)}if(n.content_border===true){u.addClass("add_border");u.css("border-radius",this._view_properties.border_radius)}if(this._view_properties.cell_border===false){if((e<(C-1)&&rdx.utils.is_not_defined(K))||(rdx.utils.is_defined(K)&&(C-e-K)>0)){u.css("margin-right",this._view_properties.cell_gap)}if((G<(F-1)&&rdx.utils.is_not_defined(t))||(rdx.utils.is_defined(t)&&(F-G-t)>0)){u.css("margin-bottom",this._view_properties.cell_gap)}}if(n.height){u.css("height",n.height)}if(n.min_height){u.css("min-height",n.min_height)}if(rdx.utils.is_defined(n.class_name)){u.addClass(n.class_name)}var A=rdx.utils.is_defined(H.view_properties)&&rdx.utils.is_defined(H.view_properties.title)&&H.view_properties.add_title!==false;if(A){H=$.extend({},H);H.view_properties=$.extend({},H.view_properties);H.view_properties._dont_show_title=true;var m=(H.view_properties.title);var q=null;q=$("<h3>").addClass("composite_view_title").text(rdx.i18n.get_string(m));if(rdx.utils.is_defined(H.view_properties.title_render_callback)){H.view_properties.title_render_callback.call_back([q])}if(rdx.utils.is_defined(H.view_properties.title_properties)&&rdx.utils.is_defined(H.view_properties.title_properties.title_class_name)){q.addClass(H.view_properties.title_properties.title_class_name)}if(n.add_title_decoration===false){q.addClass("composite_view_no_decoration")}if(rdx.utils.is_defined(H.view_properties.title_text_align)){q.css("text-align",H.view_properties.title_text_align)}if(rdx.utils.is_defined(H.show_detail_link)){var v=rdx.i18n.get_string(H.show_detail_link.link_title);var p=H.show_detail_link.on_click_view;var L=$("<a>").attr("href","#").css("float","right").append(v);L.bind(rdx.events.CLICK,{view_def:p},function(Q){var P=Q.data.view_def;rdx.view_utils.show_view_in_slider(P,null,null,null)});q.append(L)}if(this._view_properties.add_header===true){u.append(q)}}if(rdx.utils.is_defined(H.view_properties)){H.view_properties.is_tool_bar_required=false}var a=$("<div>").appendTo(u);if(rdx.utils.is_defined(t)){f.attr("rowspan",t)}if(rdx.utils.is_defined(K)){f.attr("colspan",K)}if(!(rdx.utils.is_defined(rdx.view_object_from_query_string))){if(rdx.utils.is_defined(H.view_properties)){H.view_properties.toggle_view=false}else{var I={toggle_view:false};H.view_properties=I}}var h=new rdx.base_view(a,H);if(this._view_properties.destoy_view_on_inner_view_destroy===true){$(h).bind(rdx.events.VIEW_DESTROYED,{composite_view:this,index:z},function(P,Q){if(P.data.composite_view._inner_view_already_destroyed===true){return}P.data.composite_view._inner_view_already_destroyed=true;P.data.composite_view._currently_destroyed_view_index=P.data.index;P.data.composite_view._base_view.destroy_view()})}if(rdx.utils.is_function(h.get_view().set_is_back_button_required)){h.get_view().set_is_back_button_required(false)}if(this._view_properties.is_common_data_resource===true){h.get_view_context().set_data(d.get_data())}else{if(rdx.utils.is_defined(this._view_properties.pass_common_context_to_children)&&this._view_properties.pass_common_context_to_children&&rdx.utils.is_defined(this._base_view.get_view_context())){var E=h.get_view_context();if(rdx.utils.is_object_not_empty(d.get_app_context_data())){E.set_app_context_data(d.get_app_context_data());rdx.utils.merge_and_set_url_params(h,O);E.set_url_params(H.view_context,d.get_app_context_data())}else{h.set_view_context(d)}}else{if(rdx.utils.is_defined(H.view_context)&&rdx.utils.is_defined(d.get_app_context_data())){var E=h.get_view_context();E.set_url_params(H.view_context,d.get_app_context_data());E.set_app_context_data(d.get_app_context_data())}}}this._views_map[B]=h;this._parent_child_view_map[z]={parent:u,child:h};z++}if(s===true){var g=$("<div>");var M=$("<div>").html("<H2>"+J+"</H2>").css("float","left").css("position","relative").css("top","0px").css("z-index","999").css("background-color","white").css("padding-right","20px");var N=$(document.createElement("div"));N.css("border-width","0px 0px 1px 0px").css("border-style","solid").css("border-color","black").css("float","right").css("width","100%");N.css("position","relative").css("top","30px");g.append(N).append(M);var D=$("<td>").attr("colspan",K).append(g);this._table.append($("<tr>").append(D))}}}this._render_child_views()};rdx.composite_view.prototype.get_resource_response_arrived=function(b,a){rdx.mask.unmask_component(this._parent,this._view_definition.name);if(this._view_properties.is_common_data_resource){if(rdx.utils.is_object_empty(this._views_map)||this._view_definition.auto_refresh!==true){this._render_views(this._views_table)}else{this._render_child_views(b)}}};rdx.composite_view.prototype._render_child_views=function(d){for(var b in this._views_map){if(this._views_map.hasOwnProperty(b)){var a=this._views_map[b];if(rdx.utils.is_defined()){a.get_view_context().set_data(d)}a.prepare_view(true)}}};rdx.composite_view.prototype.destroy_view=function(){var a=0;for(var b in this._views_map){if(this._views_map.hasOwnProperty(b)){if(a==this._currently_destroyed_view_index){continue}this._views_map[b].current_focus=this._base_view.current_focus;this._views_map[b].destroy_view();a++}}this._currently_destroyed_view_index=-1;if(this._view_properties.is_common_data_resource){rdx.model.remove_model_change_listener(this._view_definition.resource_name)}if(this._view_properties.ns_view_class){$(".ns_view_container",rdx.page.get_content()).removeClass(this._view_properties.ns_view_class)}};rdx.composite_view.prototype.get_base_view=function(){return this._base_view};rdx.composite_view.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.composite_view.prototype.refresh_view=function(a,b){this._refresh_view(a,b)};rdx.composite_view.prototype._refresh_view=function(b,f){if(rdx.utils.is_defined(this._view_properties.refresh_handler_callback)){this._view_properties.refresh_handler_callback.call_back([this._base_view]);return}var e={};if(rdx.utils.is_defined(b)){if(rdx.utils.is_defined(b.view_context)){e=b.view_context}else{e=b}}if(this._view_properties.is_common_data_resource===false&&rdx.utils.is_defined(this._views_map)){var a=null;for(var d in this._views_map){if(this._views_map.hasOwnProperty(d)){a=this._views_map[d];if(rdx.utils.is_defined(e)){rdx.utils.merge_and_set_url_params(a,e)}if(rdx.utils.is_defined(b)){a.refresh_view(b,false)}else{a.refresh_view(null,f)}}}}else{if(this._view_properties.is_common_data_resource){this.destroy_view();this._table.empty();this.get_view_context().invalidate_data();this._base_view.prepare_view()}}};rdx.composite_view.prototype.get_global_actions=function(){if(rdx.utils.is_not_defined(this._view_definition.global_resource_operations)){return[]}var g=[];for(var d in this._view_definition.global_resource_operations){var b={label:"",tooltip:"",image_url:rdx.images.DOCUMENT_DISABLE_IMG,independent_of_selection:true,click_handler_callback:new rdx.callback(this,this._refresh_view)};var f=this._view_definition.global_resource_operations[d];var a=$.extend(true,b,f);var e=new rdx.action(a);g.push(e)}return g};rdx.composite_view.prototype.get_view=function(a){if(this._views_map.hasOwnProperty(a)){return this._views_map[a]}return null};rdx.composite_view.prototype.get_parent_child_view_map=function(){return this._parent_child_view_map};rdx.composite_view.prototype.recalculate_widths_and_heights=function(d){for(var b in this._views_map){if(this._views_map.hasOwnProperty(b)){var a=this._views_map[b].get_view();if(rdx.utils.is_defined(a.recalculate_widths_and_heights)){a.recalculate_widths_and_heights(d)}}}};rdx.composite_view.prototype._operation_after_dom_render=function(){for(var b in this._views_map){if(this._views_map.hasOwnProperty(b)){var a=this._views_map[b].get_view();if(rdx.utils.is_defined(a.execute_after_dom_render)){a.execute_after_dom_render()}}}};rdx.composite_view.prototype.is_title_required=function(){return true};rdx.responsive_composite_view=function(d,b,a){this._parent=d;this._view_definition=b;this._base_view=a;this._view_properties=this._view_definition.view_properties;this._resource=this._base_view.get_resource();this._main_div=$("<div>").addClass("responsive_composite_view");this._parent.append(this._main_div);this._children=this._view_definition.children;this._DEFAULT_CHILD_PROPERTIES={classname:"",width:"100%",height:"auto",custom_css:null};if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.class_names)){this._parent.addClass(this._view_definition.view_properties.class_names)}this._view_map={};this._crossfilter=rdx.utils.is_defined(this._view_properties.crossfilter)?true:false;this._pass_common_context=rdx.utils.is_defined(this._view_properties.pass_common_context_to_children)?true:false};rdx.responsive_composite_view.prototype=new rdx.abstract_view();rdx.responsive_composite_view.prototype.make_view=function(){rdx.current_page_number=1;this._recalculate_height();if(rdx.utils.is_not_defined(this._children)||!(rdx.utils.is_array(this._children))){return}if(!this._pass_common_context){this._render_view_layout(this._children,this._main_div)}if(rdx.utils.is_defined(this._view_properties.views_map_callback)){this._view_properties.views_map_callback.call_back([this._view_map])}if(this._resource){rdx.mask.mask_component(this._base_view._parent,"responsive_composite_view")}};rdx.responsive_composite_view.prototype._render_view_layout=function(g,p){if(rdx.utils.is_not_defined(g)){return}for(var A=0;A<g.length;A++){var G=g[A];var F=this._render_single_view_div(G,p);if(rdx.utils.is_defined(G.children)){this._render_view_layout(G.children,F)}else{if(rdx.utils.is_defined(G.resource_operations||G.view_name)||G.add_search===true||G.add_pagination===true){var H=$("<div>").addClass("responsive_cell_div");var C=$("<div>").addClass("responsive_left_side_container");var f=$("<div>").addClass("responsive_right_side_container");H.append(C).append(f);if(G.add_description){this._description_div=$("<div>").addClass("composite_view_desc_container");C.append(this._description_div)}if(G.add_search){this._add_search_component(H)}if(G.resource_operations){var o=$("<div>").addClass("resource_operations").appendTo(f);for(var s in G.resource_operations){var z=G.resource_operations[s];var h=$("<button>").addClass("rdx_button secondary_button").attr("aria-label",z.label);var n=$("<span>").text(z.label).appendTo(h).addClass("_button_label");o.append(h);h.bind(rdx.events.CLICK,{resource_operation:z},function(I){I.data.resource_operation.click_handler_callback.call_back()})}}if(G.add_pagination){this._page_size=G.pagesize;this._add_pagination_container(f)}F.addClass("responsive_child_div_with_view").append(H);if(rdx.utils.is_defined(G.custom_css)){var B=G.custom_css;for(var E in B){F.css(E,B[E])}}var u=null;if(G.get_view_definition_callback){u=G.get_view_definition_callback.call_back()}else{if(G.view_definition){u=$.extend(true,{},G.view_definition)}else{if(G.view_name){u=$.extend(true,{},rdx.utils.get_view(G.view_name))}else{continue}}}if(rdx.utils.is_not_defined(u.view_properties)){u.view_properties={}}u.view_properties._dont_show_title=true;u.is_child_view=true;u.add_to_bread_crumb=false;var t=null;var a=null;if(rdx.utils.is_defined(G.title)){t=$("<div>").addClass("composite_view_title");var D=$("<div>").addClass("view_title_name").append(G.title);t.append(D);if(u.view_properties.view_help){rdx.utils._render_tooltip(t,rdx.i18n.get_string(u.view_properties.view_help))}if(rdx.utils.is_defined(G.title_component_dom)){t.append(G.title_component_dom.call_back())}if(rdx.utils.is_defined(G.title_class)){t.addClass(G.title_class)}if(rdx.utils.is_defined(u.view_properties.pagination_type)&&u.view_properties.pagination_type=="compact"){var m=$("<div>").addClass("responsive_composite_pagination_div");D.addClass("responsive_composite_pagination_div");t.append(m);u.view_properties.pagination_dom=m}if(rdx.utils.is_defined(G.collapsible)&&G.collapsible){this.collapsible_icon_div=null;this.collapsible_icon_div=$("<div>").addClass("collapsible_icon expanded");t.append(this.collapsible_icon_div)}if(rdx.utils.is_defined(G.collapse_all)&&G.collapse_all){var w=$('<button class="toggle-sec-btn expanded">').append($('<span class="hide">').text("Collapse All")).appendTo(t);w.attr("aria-label","Collapse All");w.bind(rdx.events.CLICK,{},function(I){var J=$(I.target);if(J.hasClass("expanded")){J.attr("title","Expand All").removeClass("expanded");$(".individual_view_container").css("height","30px");$(".view_definition_container").css("display","none");$(".individual_view_header").removeClass("expanded");$(".view_definition_container").slideUp(400)}else{J.attr("title","Collapse All").addClass("expanded");$(".individual_view_container").css("height","auto");$(".view_definition_container").css("display","block");$(".individual_view_header").addClass("expanded");$(".view_definition_container").slideDown(600)}})}H.append(t)}var e=$("<div>").addClass("responsive_view_div");e.addClass("shown");if(rdx.utils.is_defined(G.view_classname)){e.addClass(G.view_classname)}var v=this._calculate_view_div_height(H,t,rdx.utils.is_defined(G.add_search));e.css("height",v);H.append(e);if(rdx.utils.is_defined(G.classname)){H.addClass(G.classname)}var d=new rdx.base_view(e,u);if(G.inherit_context&&rdx.utils.is_defined(this._base_view.get_view_context())){d.set_view_context(this._base_view.get_view_context())}if(G.inherit_data&&rdx.utils.is_defined(this._base_view.get_view_context().get_app_context_data())){d.get_view_context().set_app_context_data(this._base_view.get_view_context().get_app_context_data())}this._view_map[G.view_name]={base_view:d,parent:e,child_obj:G};if(G.add_toggle==true){var q=$("<a>").attr("href","#").appendTo(t).addClass("toggle_button disabled").append(G.toggle_title);q.addClass(G.toggle_title);D.css("float","left");t.css("overflow","auto");q.bind(rdx.events.CLICK,{},function(I){G.toggle_click_handler_callback.call_back([d,$(I.target).hasClass("disabled")]);if($(I.target).hasClass("disabled")){$(I.target).removeClass("disabled");$(I.target).addClass("enabled")}else{$(I.target).removeClass("enabled");$(I.target).addClass("disabled")}})}if(rdx.utils.is_defined(G.collapsible)&&G.collapsible){this.collapsible_icon_div.bind(rdx.events.CLICK,{that:this,collapsible_view_name:G},function(J){if($(".collapsible_icon").hasClass("expanded")){$(".collapsible_icon").removeClass("expanded")}else{$(".collapsible_icon").addClass("expanded")}var L=J.data.that._view_definition.children[0].width;var I=J.data.that._view_definition.children[1].width;var K=$("<div>").addClass("collapsed_section_div");K.append($(".collapsible_icon"));K.append($("<span>").addClass("collapsed_section_title").append(J.data.collapsible_view_name.title));if(J.data.that._view_map[J.data.collapsible_view_name.view_name].parent.hasClass("shown")){$(".responsive_child_div").first().css("width","97%");$(".collapsible_view_div").css("display","none");J.data.that._main_div.append(K);J.data.that._view_map[J.data.collapsible_view_name.view_name].parent.removeClass("shown")}else{$(".responsive_child_div").first().css("width",L);$(".collapsed_section_div").remove();$(".collapsible_view_div").css({display:"block",width:I});$(".collapsible_view_div .composite_view_title").append(J.data.that.collapsible_icon_div);J.data.that._view_map[J.data.collapsible_view_name.view_name].parent.addClass("shown")}})}var b=rdx.utils.is_defined(u.view_properties.load_all)?u.view_properties.load_all:null;d.prepare_view(true,b)}}}};rdx.responsive_composite_view.prototype._add_search_component=function(a){this._search=new rdx.search(a,{search_dropdown_map:this._view_properties.search_propeties.search_columns,do_append:false,pre_searched_object:this._view_properties.search_propeties.pre_searched_object,advance_search:true,do_toggle:false,search_value_formatter_callback:this._view_properties.search_propeties.search_value_formatter_callback});this._search.render();this._search.add_search_listner(new rdx.callback(this,this._search_filter_action))};rdx.responsive_composite_view.prototype._add_pagination_container=function(a){this._pagination_div=$("<div>").addClass("composite_view_pagination_container pagination_div");this._pages_info=$("<div>").addClass("composite_view_pagination_info");this.per_page_size_div=$("<div>").addClass("pagination_img_border per_page_size_div").append(this._page_size+" Per Page");this.current_page_div=$("<div>").addClass("pagination_img_border current_page_info_div");this._pages_info.append(this.per_page_size_div).append(this.current_page_div);var d=this._view_properties.pagination_resource;this.navigation_arrows=$("<div>").addClass("pagination_navigation_container");this._prev_img=$("<button>").addClass("img_opacity nav_back").attr({title:"Go to previous page","aria-label":"Go to previous page",disabled:"disabled"}).appendTo(this.navigation_arrows).append($('<span class="hide">').text("Next"));this._next_img=$("<button>").addClass("img_opacity nav_next").attr({title:"Go to next page","aria-label":"Go to next page",disabled:"disabled"}).appendTo(this.navigation_arrows).append($('<span class="hide">').text("Previous"));this._pagination_div.append(this._pages_info);this._pagination_div.append(this.navigation_arrows);a.append(this._pagination_div);this.pagination_resource_total_count=null;var b=this;rdx.model.get_count(rdx.utils.get_resource(d),null,new rdx.callback(function(e){b.pagination_resource_total_count=e;if(b.pagination_resource_total_count==0){var f=1;rdx.current_page_number=1;b._unbind_img_action(b._prev_img);b._unbind_img_action(b._next_img)}else{if(rdx.current_page_number==1){b._unbind_img_action(b._prev_img)}else{b._bind_img_action(b._prev_img,new rdx.callback(b,b._navigate_previous))}var f=Math.ceil(b.pagination_resource_total_count/b._page_size);if(rdx.current_page_number==f){b._unbind_img_action(b._next_img)}else{b._bind_img_action(b._next_img,new rdx.callback(b,b._navigate_next))}}b.current_page_div.append("Page "+rdx.current_page_number+" of "+f)}))};rdx.responsive_composite_view.prototype._unbind_img_action=function(a){if(a.attr("class").indexOf("img_opacity")==-1){a.removeClass("pointer_cursor").addClass("img_opacity");a.attr("disabled","disabled");a.unbind(rdx.events.CLICK)}};rdx.responsive_composite_view.prototype._bind_img_action=function(b,a){if(b.attr("class").indexOf("img_opacity")!=-1){b.removeClass("img_opacity").addClass("pointer_cursor");b.removeAttr("disabled");b.bind(rdx.events.CLICK,{ns_cancel_handler_callback:a},function(d){d.data.ns_cancel_handler_callback.call_back();d.stopPropagation()})}};rdx.responsive_composite_view.prototype._navigate_previous=function(){rdx.current_page_number=rdx.current_page_number-1;if(rdx.current_page_number<=0){rdx.current_page_number=1}this.refresh_view(null,false)};rdx.responsive_composite_view.prototype._navigate_next=function(){rdx.current_page_number=rdx.current_page_number+1;var a=Math.ceil(this.pagination_resource_total_count/this._page_size);if(rdx.current_page_number>a){rdx.current_page_number=a}this.refresh_view(null,false)};rdx.responsive_composite_view.prototype._search_filter_action=function(a,b){if(a){this._apply_filter(b)}else{this._remove_filter()}this.refresh_view(null,false,a,b)};rdx.responsive_composite_view.prototype._apply_filter=function(e){for(var d in e){if(true){var b=this._get_data_to_pass(e[d]);var a={};a.dimension=d;rdx.crossfilter_controller.apply_filter(this._base_view.get_resource().name,a,b)}}};rdx.responsive_composite_view.prototype._remove_filter=function(){if(true){rdx.crossfilter_controller.clear_all_filters(this._base_view.get_resource().name)}};rdx.responsive_composite_view.prototype._get_data_to_pass=function(d){if(rdx.utils.is_defined(this._view_properties.search_propeties.search_value_formatter_callback)){return d}var a=[];for(var b=0;b<d.length;b++){a.push(d[b].replace(/\//g,""))}return a};rdx.responsive_composite_view.prototype._register_interactions=function(b,a){if(rdx.utils.is_defined(b.connected_views)){$(a).bind(rdx.events.VIEW_SELECTION_CHANGED,{responsive_composite_view:this,view_name:b.view_name,child_obj:b},function(f,n,h){var p=f.data.responsive_composite_view._view_map;var s=f.data.view_name;var d=f.data.child_obj;var o=p[s];if(h){f.data.responsive_composite_view.apply_filter_to_view(o,n)}else{f.data.responsive_composite_view.remove_filter_to_view(o)}if(rdx.utils.is_defined(o)){var e=o.connected_views;if(rdx.utils.is_defined(e)){for(var m=0;m<e.length;m++){var q=p[e[m]];if(rdx.utils.is_defined(q)){var t=q.base_view;var g=t.get_view_definition();if(rdx.utils.is_defined(d.click_handler_callback)){d.click_handler_callback.call_back([t,n,h])}else{t.refresh_view(null,null,true)}}}}}});this._view_map[b.view_name]["connected_views"]=b.connected_views}};rdx.responsive_composite_view.prototype.apply_filter_to_view=function(e,d){if(rdx.utils.is_not_defined(e)){return}var a=e.base_view;var m=a.is_crossfilter_view();if(m){var h=a.get_resource().name;var g=a.get_view_definition().view_properties.crossfilter;var f=g.dimension;if(rdx.utils.is_defined(f)){var b=rdx.crossfilter_controller.apply_filter(h,g,d)}}};rdx.responsive_composite_view.prototype.remove_filter_to_view=function(d){if(rdx.utils.is_not_defined(d)){return}var a=d.base_view;var h=a.is_crossfilter_view();if(h){var g=a.get_resource().name;var f=a.get_view_definition().view_properties.crossfilter;var e=f.dimension;if(rdx.utils.is_defined(e)){var b=rdx.crossfilter_controller.clear_filter(g,e)}}};rdx.responsive_composite_view.prototype._render_single_view_div=function(e,b){var d=$("<div>").addClass("responsive_child_div");var a=$.extend(true,{},this._DEFAULT_CHILD_PROPERTIES,e);if(rdx.utils.is_defined(e.children)){d.addClass(a.classname)}if(rdx.utils.is_defined(e.collapsible)&&e.collapsible){b.addClass("collapsible_view_div")}d.css("width",a.width);d.css("height",a.height);b.append(d);return d};rdx.responsive_composite_view.prototype._calculate_view_div_height=function(a,h,d){var f=a.outerHeight();var e;if(rdx.utils.is_not_defined(h)){e=100}else{var b=h.outerHeight();var g=this._get_margins(h);b=b+g+5;e=parseInt(((f-b)/f)*100)-1}if(d==true){e=e-20}return e+"%"};rdx.responsive_composite_view.prototype._get_margins=function(b){var d=parseInt(b.css("marginTop").replace("px",""));var a=parseInt(b.css("marginBottom").replace("px",""));if(rdx.utils.is_defined(b.children)&&b.children.length>0){d+=parseInt(b.children().css("marginTop").replace("px",""));a+=parseInt(b.children().css("marginBottom").replace("px",""))}return d+a};rdx.responsive_composite_view.prototype._recalculate_height=function(){var a=this._main_div.outerHeight(true);var d=rdx.page.get_header_height(true);if(a==0){a=rdx.page.get_content().height()}if(d===0){d=$(".cwc-isolate-navbar").height()}var f=$(".title_tool_bar_table").outerHeight(true);if(this._view_properties.offset_height){var e=$(".tabs").outerHeight();var b=a-(d+f+e+32)}else{var b=a-(d+f+26)}this._main_div.css("height",b+"px")};rdx.responsive_composite_view.prototype._refresh_view=function(){this.refresh_view()};rdx.responsive_composite_view.prototype.refresh_view=function(b,f,g,h){if(this._resource&&(this._view_properties.add_mask!==false)&&(f!==false)){rdx.mask.mask_component(this._base_view._parent,"responsive_composite_view")}if(this._view_properties.is_common_data_resource){if(rdx.utils.is_defined(g)){if(rdx.utils.is_defined(this._base_view._view_definition.refresh_handler_callback)){this._base_view._view_definition.refresh_handler_callback.call_back([this._base_view,h,g])}else{if(rdx.utils.is_object_not_empty(this._view_map)){for(var e in this._view_map){var a=this._view_map[e]["base_view"];a.refresh_view()}}}}else{this.destroy_view();this._main_div.empty();var d=rdx.utils.is_defined(this._base_view._view_definition.view_properties.load_all)?this._base_view._view_definition.view_properties.load_all:null;this._base_view.prepare_view(true,d)}}else{if(rdx.utils.is_object_not_empty(this._view_map)){for(var e in this._view_map){var a=this._view_map[e]["base_view"];if(this._view_map[e].child_obj.refresh_handler_callback){this._view_map[e].child_obj.refresh_handler_callback.call_back([a])}else{if(a._parent.parent().hasClass("show_toggle")){a._parent.parent().removeClass("show_toggle")}a.refresh_view()}}}}};rdx.responsive_composite_view.prototype.get_resource_response_arrived=function(a){if(this._crossfilter){if(!rdx.crossfilter_controller.is_resource_crossfilter_present(this._resource.name)){rdx.crossfilter_controller.add_resource_to_crossfilter(this._resource.name,a)}}if(this._pass_common_context){this._render_view_layout(this._children,this._main_div)}rdx.mask.unmask_component(this._base_view._parent,"responsive_composite_view")};rdx.responsive_composite_view.prototype.destroy_view=function(d){if(rdx.utils.is_object_not_empty(this._view_map)){for(var b in this._view_map){var a=this._view_map[b]["base_view"];a.destroy_view()}}};rdx.responsive_composite_view.prototype.register_event_handlers=function(){if(rdx.utils.is_defined(this._resource)){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this._base_view,this._base_view.refresh_view))}};rdx.carousel_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._properties=$.extend({},b.view_properties)};rdx.carousel_view.prototype=new rdx.abstract_view();rdx.carousel_view.prototype.make_view=function(){var n=$('<div class="carousel-view clearfix"/>').appendTo(this._parent);var o=$('<div class="box"/>').appendTo(n);this._static_sec=$('<div class="static-sec"/>').appendTo(o);var z=$('<div class="box-title"/>').appendTo(this._static_sec);if(this._properties.icon_class){$('<span class="info-icon">').addClass(this._properties.icon_class).appendTo(z)}z.append(this._properties.title);if(this._view_definition.details_view){var a=$('<a href="#" class="see-all">Details</a>').appendTo(z);a.on("click",{view_name:this._view_definition.details_view},function(A){A.preventDefault();rdx.view_utils.render_tree_drilldown_view(A.data.view_name)})}var t=$('<div class="box-content"/>').appendTo(this._static_sec);var p=Object.keys(this._view_definition.resource_properties.general_props);var q=p.length>0?parseInt(100/p.length):"100";for(var v=0;v<p.length;v++){var g=this._view_definition.resource_properties.general_props[p[v]];var b=$('<div class="a-div"/>').appendTo(t);b.width(q+"%");var s=$('<a href="#" class="value"/>').text(g.value).attr("key",p[v]).appendTo(b);var f=null;var h=rdx.i18n.get_string(g.label);if(g.tooltip){f=rdx.i18n.get_string(g.tooltip)}else{f=h}s.attr("title",f);s.addClass(g.class_name);var m=$('<div class="key"/>').text(h).appendTo(b);if(this._view_definition.point_select&&this._view_definition.point_select.callback){s.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{c_view:this},function(C){if(rdx.utils.is_defined(C.keyCode)&&C.keyCode!==13){return}var B=$(this);var A={key:B.attr("key"),name:B.siblings(".key").text()};C.data.c_view._view_definition.point_select.callback.call_back([A])})}}if(rdx.utils.is_defined(this._view_definition.resource_properties.carousel_props)){this._carousel=$('<div class="carousel block-l"/>').appendTo(o);this._static_sec.addClass("block-l");var u=$('<div class="pagination-container">').appendTo(this._carousel);this._carousel_pg=$('<p class="carousel-pagination">').appendTo(u);var d=$('<button class="carousel-control prev btn-icon disabled" disabled></button>').attr("aria-label","Next Slide").appendTo(u);var e=$('<button class="carousel-control next btn-icon disabled" disabled></button>').attr("aria-label","Previous Slide").appendTo(u);var w=$('<div class="carousel-wrapper">').appendTo(this._carousel);this._carousel_list=$('<ul class="carousel-content" style="left: 0px;"/>').appendTo(w);this._carousel_pg.on("click",this._handle_nav);d.on("click",this._handle_nav);e.on("click",this._handle_nav)}};rdx.carousel_view.prototype.get_resource_response_arrived=function(b){if(rdx.utils.is_not_empty(b)&&rdx.utils.is_defined(this._view_definition.resource_properties.carousel_props)){var a=$.extend(true,{},b[this._view_definition.resource_properties.carousel_props.resource_key]);delete b[this._view_definition.resource_properties.carousel_props.resource_key];this._render_carousel(a)}for(var d in b){$("a.value[key="+d+"]",this._static_sec).text(b[d])}};rdx.carousel_view.prototype._render_carousel=function(n){this._reset_carousel();if(rdx.utils.is_empty(n)){return}var b=this._view_definition.resource_properties.carousel_props;var e=Object.keys(b.slide_names);var p=Object.keys(n).length;var z=p>0?rdx.utils.roundUpTwoDeci(parseFloat(100/p)):100;this._carousel_list.css("width",p*100+"%");var d=0;for(var v=0;v<e.length;v++){var q=e[v];var A=n[q];if(!A){continue}var m=$('<li class="slide-container">').css("width",z+"%").appendTo(this._carousel_list);var t=$('<h6 class="title">').text(b.slide_names[q]).appendTo(m);var h=$('<div class="a-div-ct">').appendTo(m);for(var o in b.resource_keys){var w=b.resource_keys[o];var f=$('<div class="a-div">').appendTo(h);var s=$('<a class="value" href="#">').text(A[o]).attr({key:o,slide_key:q});if(w.class_name){s.addClass(w.class_name)}var u=$('<span class="gp-count">').appendTo(f).append(s);$('<div class="key"/>').text(w.label).appendTo(f);if(w.note&&w.note.key&&A[w.note.key]){var a=$('<span class="note value">').text(w.note.label+": "+A[w.note.key]);u.append(a)}s.bind(rdx.events.CLICK+" "+rdx.events.KEY_PRESS,{c_view:this},function(D){if(rdx.utils.is_defined(D.keyCode)&&D.keyCode!==13){return}var C=$(this);var B={key:C.attr("key"),name:C.siblings(".key").text(),slide_key:C.attr("slide_key")};D.data.c_view._view_definition.point_select.callback.call_back([B])})}var g=$('<a class="carousel-index">'+d+"</a>").attr({href:"#"+d,index:d}).appendTo(this._carousel_pg);d++}this._enable_carousel_actions(p)};rdx.carousel_view.prototype._reset_carousel=function(a){this._carousel_list.empty();this._carousel_list.css("left","0");this._carousel_pg.empty();$(".carousel-control",this._carousel).removeClass("active").addClass("disabled");$("a",this._carousel_pg).removeClass("active")};rdx.carousel_view.prototype._handle_nav=function(a){var o=$(a.target);if(o.hasClass("carousel-index")||o.hasClass("carousel-control")){var t=o.closest(".carousel");var m=$(".carousel-content",t);var h=$(".carousel-pagination > a",t).length;var s=m.width();var e=parseInt(s/h);var g=Math.abs(parseInt(m.css("left"),10));var d=Math.round(g/e);var n=o.attr("index");var q=$(".carousel-pagination .active",t);var f="right";var p=0;if(n){n=parseInt(n);p=(n)*100;if(p<g){f="left"}}else{if(o.hasClass("next")){f="right";n=d+1;p=(n)*100}else{if(o.hasClass("prev")){f="left";n=d-1;p=(n)*100}}}if(n<h&&n>=0){m.animate({left:"-"+p+"%"});q.removeClass("active").siblings('a[index="'+n+'"]').addClass("active");var b=$("button.next",t);var u=$("button.prev",t);if(f=="right"){u.removeClass("disabled").removeAttr("disabled").addClass("active");if(n===(h-1)){b.addClass("disabled").prop("disabled",true).removeClass("active")}}else{b.removeClass("disabled").removeAttr("disabled").addClass("active");if(n===0){u.addClass("disabled").prop("disabled",true).removeClass("active")}}}}};rdx.carousel_view.prototype._enable_carousel_actions=function(d){var b=$(".carousel-control",this._carousel);var a=$("a",this._carousel_pg);if(d>1){$(b[1]).removeClass("disabled").removeAttr("disabled").addClass("active");$(a[0]).addClass("active")}else{b.remove();a.remove()}};rdx.carousel_view.prototype.add_mask=function(){return true};rdx.carousel_view.prototype.is_tool_bar_required=function(){return false};rdx.carousel_view.prototype.is_action_bar_required=function(){return false};rdx.carousel_view.prototype.register_event_handlers=function(){};rdx.carousel_view.prototype.destroy_view=function(){};rdx.carousel_view.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.carousel_view.prototype._add_tool_bar=function(){};rdx.carousel_view.prototype.get_action_items=function(){return[]};rdx.carousel_view.prototype.get_base_view=function(){return this._base_view};rdx.carousel_view.prototype.close_view=function(a){this._base_view.destroy_view({submit_called:(rdx.utils.is_defined(a)&&a)},false)};rdx.carousel_view.prototype.is_title_required=function(){return false};rdx.responsive_table=function(d,b,a){this._parent=d;this._parent.addClass("responsive_table_parent");this._view_definition=b;this._base_view=a;this._main_div=$("<div>").addClass("responsibe_table_div");this._parent.append(this._main_div);this._resource_properties={};var e;adjust_row_height:true;this._view_properties=$.extend(true,e,this._view_definition.view_properties);this._mask_id="responsive_table"+this._view_definition.name;this._table_body_div=$("<div>").addClass("responsive_table_body")};rdx.responsive_table.prototype.make_view=function(){if(rdx.utils.is_not_defined(this._view_definition.resource_properties)){return}this._resource_properties=this._view_definition.resource_properties;if(this._is_header_needed()){this._create_table_headers()}else{this._table_body_div.css("height","100%")}if(rdx.utils.is_defined(this._view_properties.table_class_name)){this._main_div.addClass(this._view_properties.table_class_name)}this._main_div.append(this._table_body_div);rdx.mask.mask_component(this._main_div,this._mask_id)};rdx.responsive_table.prototype._create_table_headers=function(){var b=$("<div>").addClass("responsive_table_header");this._main_div.append(b);var m=rdx.utils.get_resource(this._view_definition.resource_name);var a=rdx.utils.object_keys(this._resource_properties);var g=parseInt(100/a.length);var f=0;for(var e in this._resource_properties){var d=rdx.utils.is_defined(m[e])&&rdx.utils.is_defined(m[e]["label"])?m[e]["label"]:(rdx.utils.is_defined(this._resource_properties[e]["label"])?this._resource_properties[e]["label"]:"");var h=$("<div>").addClass("responsive_table_each_header_div").append(d);h.css("width",g+"%");if(rdx.utils.is_defined(this._view_properties.column_widths)&&rdx.utils.is_array(this._view_properties.column_widths)){h.css("width",this._view_properties.column_widths[f]+"%");f++}b.append(h)}if(rdx.utils.is_defined(this._view_properties.table_header_class)){b.addClass(this._view_properties.table_header_class)}};rdx.responsive_table.prototype._refresh_view=function(a){this.refresh_view()};rdx.responsive_table.prototype.refresh_view=function(){rdx.mask.mask_component(this._main_div,this._mask_id);this._table_body_div.empty();this._base_view.prepare_view()};rdx.responsive_table.prototype.get_resource_response_arrived=function(b){this._table_body_div.empty();rdx.mask.unmask_component(this._main_div,this._mask_id);if(!rdx.utils.is_array(b)||rdx.utils.is_not_defined(b)||(rdx.utils.is_defined(b)&&b.length==0)){var q=$("<div>").addClass("responsive_table_no_data_div");if(rdx.utils.is_defined(this._view_properties.no_data_message)){q.append(this._view_properties.no_data_message)}else{q.append("No data")}this._table_body_div.append(q);return}var n=rdx.utils.object_keys(this._resource_properties);var m=parseInt(100/n.length);var a=parseInt(100/b.length);a=a>20?20:a;for(var e=0;e<b.length;e++){var g=b[e];var h=$("<div>").addClass("responsive_table_each_div");if(this._view_properties.adjust_row_height===true){h.css("height",a+"%")}if(rdx.utils.is_defined(g.__record_selected&&g.__record_selected===true)){h.addClass("selected")}this._table_body_div.append(h);h.bind(rdx.events.CLICK,{that:this,row_data:g},this._select_row);if(rdx.utils.is_defined(this._view_properties.select_first_row)&&this._view_properties.select_first_row==true&&e==0){if(rdx.utils.is_defined(this._view_properties.selected_first_row_callback)){this._view_properties.selected_first_row_callback.call_back([g,h])}}var f=0;for(var o in this._resource_properties){var d=rdx.utils.is_defined(g[o])?g[o]:"";var p=$("<div>").addClass("responsive_table_each_body_div");p.css("width",m+"%");if(rdx.utils.is_defined(this._view_properties.column_widths)&&rdx.utils.is_array(this._view_properties.column_widths)){p.css("width",this._view_properties.column_widths[f]+"%");f++}h.append(p);if(rdx.utils.is_defined(this._resource_properties[o]["renderer_callback"])){this._resource_properties[o]["renderer_callback"].call_back([g,p,e])}else{p.append(d)}}}};rdx.responsive_table.prototype._is_header_needed=function(){var a=false;var e=this._resource_properties;for(var d in e){var b=rdx.utils.is_defined(e[d])&&rdx.utils.is_defined(e[d]["label"])?e[d]["label"]:(rdx.utils.is_defined(this._resource_properties[d]["label"])?this._resource_properties[d]["label"]:"");if(rdx.utils.is_not_empty(b)){a=true;break}}return a};rdx.responsive_table.prototype._select_row=function(b){var e=b.data.that;var d=b.data.row_data;var f=$(b.target);var g=null;if(f.hasClass("responsive_table_each_div")){g=f}else{g=f.closest(".responsive_table_each_div",e._table_body_div)}g.toggleClass("selected").siblings().removeClass("selected");var a=false;if(g.parent().children(".selected").length>0){a=true}$(e._view_definition).trigger(rdx.events.VIEW_SELECTION_CHANGED,[d,a])};rdx.responsive_table.prototype.action_on_view_selection=function(g,f){var a=this._base_view;var d=this._base_view.get_view_definition().view_properties.dependent_views;if(rdx.utils.is_defined(d)){for(var b=0;b<d.length;b++){var e=rdx.active_views.get_view(d[b]);if(rdx.utils.is_defined(this._view_properties.connected_views_callback)){this._view_properties.connected_views_callback.call_back([e,g,f])}else{if(rdx.utils.is_defined(e)){e.refresh_view(null,true)}}}}};rdx.syslog_view=function(e,d,b,a){this._parent=e;this._view_definition=d;this._resource_definition=b;this._base_view=a;this._DEFAULT_VIEW_PROPERTIES={resource_detail_properties:null,dialog_mode:false,show_files:{file_name:null,directory_name:null,resource_name:null,resource_properties:null}};this._view_properties=$.extend(true,{},this._DEFAULT_VIEW_PROPERTIES,this._view_definition.view_properties);this._show_files=(this._view_properties.show_files.resource_name==null&&this._view_properties.show_files.file_name==null)?false:true;this._files=null;this._file_selector_div=null;this._file_resource=null;this._top_bar_height=0;this._refresh_button=null;this._component=null;this._message_details_div=null;this._search=null;this.is_back_button_required=true};rdx.syslog_view.prototype.make_view=function(){var b={minHeight:400,width:600,modal:true,resizable:false,dialogClass:"configure_view",title:""};if(rdx.utils.is_not_defined(this._view_definition.dialog_properties)){this._view_definition.dialog_properties={}}this._view_definition.dialog_properties=$.extend({},b,this._view_definition.dialog_properties);if(this._view_properties.dialog_mode){this._parent.dialog(this._view_definition.dialog_properties)}this._create_files_div();var n=[];var e=[];var f;for(var o in this._view_definition.resource_properties){var p=this._view_definition.resource_properties[o];f=$.extend({},this._resource_definition.properties[o],p);if(n.length==0){f.store_data=true}n.push(new rdx.table_column(f));if(rdx.utils.is_defined(p.search)){if(p.search==true){e.push({key:f.key,label:f.label})}}else{e.push({key:f.key,label:f.label})}}if(n.length>0){this._search=new rdx.search(this._parent,{search_dropdown_map:e,pre_searched_object:null});this._search.render();this._search.add_search_listner(new rdx.callback(this,this._search_filter_action))}this._message_details_div=$("<div>");var h=$("<div>").append($("<hr>").attr("size","8")).append($("<div>").addClass("detail_message_text").append(rdx.i18n.get_string("rdx.syslog_view.detail_message"))).append(this._message_details_div.addClass("detail_message"));this._table_parent=$("<div>").addClass("table_div");this._parent.append(this._table_parent);this._parent.append(h);var g=this._top_bar_height;var m=h.height();var d=this._view_definition.dialog_properties.minHeight-(m+g);var a={height:d};this._component=new rdx.table(this._table_parent,n,a).render()};rdx.syslog_view.prototype.get_is_back_button_required=function(){if(this._view_definition.view_properties.is_back_button_required===false){return false}return this.is_back_button_required};rdx.syslog_view.prototype._search_filter_action=function(g,h){if(g){var f={};for(var b in h){f[b]=h[b]}var d=[];for(var e in f){d.push(e)}var a=this.get_view_context().get_url_params();rdx.url_utils.remove_type_from_url_object(a,rdx.url_utils.GET_FILTER_TYPE);if(this._view_properties.show_files.resource_name){rdx.url_utils.add_to_url_object(a,["name"],rdx.url_utils.GET_BY_NAME_TYPE,{name:this._response[this._files.data("selected_position")][this._file_resource.primary_keys]})}this.get_view_context().set_is_query_param(g);rdx.url_utils.add_to_url_object(a,d,rdx.url_utils.GET_FILTER_TYPE,f)}var m=new rdx.callback(this,this._on_success,[true]);rdx.model.get(this._resource_definition,a,m)};rdx.syslog_view.prototype._on_file_list_fetch_success=function(b){b=b[this._file_resource.name];var a=new Array(b.length);this._files.append(b[0][this._file_resource.primary_keys]).data("selected_position",0);for(var d=0;d<b.length;d++){a[d]=$("<div>").addClass("drop_down_list_div_selected").append(b[d][this._file_resource.primary_keys]).bind(rdx.events.CLICK,{log_file_list:a,primary_key:this._file_resource.primary_keys,response:b,position:d,syslog:this},function(n){var g=n.data.syslog;var h=n.data.response;var e=n.data.position;var f=n.data.log_file_list;var m=n.data.primary_key;$(this).empty();g._files.empty();f[g._files.data("selected_position")].text(h[g._files.data("selected_position")][m]);g._files.data("selected_position",e);g._files.append(h[e][m]);g._file_selector_div.hide();g._on_refresh_button_click(h)});this._file_selector_div.append(a[d])}a[0].empty();this._default_file_object=b[0];this._response=b;this._populate_table()};rdx.syslog_view.prototype.get_resource_response_arrived=function(a){if(this._show_files&&this._view_properties.show_files.resource_name!=null){this._file_resource=rdx.utils.get_resource(this._view_properties.show_files.resource_name);var b=new rdx.callback(this,this._on_file_list_fetch_success);rdx.model.get(this._file_resource,null,b)}else{this._on_success(a,false)}};rdx.syslog_view.prototype._populate_table=function(){if(!this._show_files){return}this._append_file_to_url(this._default_file_object,true)};rdx.syslog_view.prototype._on_success=function(b,a){if((this._show_files||(rdx.utils.is_defined(a)&&a==true))&&rdx.utils.is_defined(b[this._view_definition.resource_name])){b=b[this._view_definition.resource_name]}this._message_details_div.empty();this._component.add_items(b,null,true)};rdx.syslog_view.prototype._on_failure=function(){alert("Syslog viewer failed")};rdx.syslog_view.prototype.register_event_handlers=function(){this._component.add_event_handler(rdx.events.ROW_SELECTION_CHANGED,new rdx.callback(this,this._row_selection_changed));this._refresh_button.bind(rdx.events.CLICK,{syslog:this},function(b){var a=b.data.syslog;a._on_refresh_button_click(a._response)});if(this._show_files.resource_name){this._files.bind(rdx.events.CLICK,{syslog:this},function(b){var a=b.data.syslog;a._file_selector_div.toggle()})}this._search_button.bind(rdx.events.CLICK,{syslog:this},function(b){var d=$(this).hasClass("search_close");$(this).toggleClass("search_close",!d);var a=b.data.syslog;rdx.utils.slide_up_down(a._search.get_component(),!d)})};rdx.syslog_view.prototype._row_selection_changed=function(){var e=this._component.get_selected_items_data()[0];if(rdx.utils.is_defined(e)){this._message_details_div.empty();var f,g,b="";var a=this._view_properties.resource_detail_properties;for(var d=0;d<a.length;d++){f=a[d];g=rdx.i18n.get_string(this._resource_definition.properties[a[d]]["label"]);b+=(g+": "+e[f]+"<br>")}this._message_details_div.append(b)}};rdx.syslog_view.prototype._on_refresh_button_click=function(a){if(this._show_files&&rdx.utils.is_defined(a)){this._append_file_to_url(a[this._files.data("selected_position")])}else{this._base_view.prepare_view()}};rdx.syslog_view.prototype._create_files_div=function(){var g=$("<table>").addClass("table_border").append($("<tbody>"));var a=$("<tr>");this._refresh_button=$("<div>").addClass("refresh_button");this._search_button=$("<div>").addClass("syslog_search_button").addClass("search_close");g.append(a);if(this._show_files){if(this._view_properties.show_files.file_name){this._files=$("<div>").addClass("file_cell_padding").append(this._view_properties.show_files.file_name);var f=$("<div>").append(rdx.i18n.get_string("rdx.syslog_view.file")).append(this._files);a.append($("<td>").addClass("table_border_cell").append(f));var e=$("<div>");var d=$("<div>").append(rdx.i18n.get_string("rdx.syslog_view.directory")).append(e.append(this._view_properties.show_files.directory_name));a.append($("<td>").addClass("table_border_cell").append(d))}else{this._files=$("<div>").addClass("selector_div_dimension").addClass("selector_div").addClass("file_cell_padding");var f=$("<div>").append(rdx.i18n.get_string("rdx.syslog_view.file")).append(this._files);a.append($("<td>").addClass("table_border_cell").append(f));var e=$("<div>");var d=$("<div>").append(rdx.i18n.get_string("rdx.syslog_view.directory")).append(e.append(this._view_properties.show_files.directory_name));a.append($("<td>").addClass("table_border_cell").append(d));this._file_selector_div=$("<div>");this._parent.append(this._file_selector_div.addClass("logs_file_div"));this._file_selector_div.hide()}a.append($("<td>").addClass("table_border_cell").attr("width","98%").attr("align","right").append(this._search_button));a.append($("<td>").attr("width","90%").attr("align","right").append(this._refresh_button))}else{a.append($("<td>").addClass("table_border_cell").attr("width","98%").attr("align","right").append(this._search_button));a.append($("<td>").attr("width","90%")).append($("<td>").attr("width","90%")).append($("<td>").attr("width","90%").attr("align","right").append(this._refresh_button))}var b=$("<div>").addClass("file_directory_div");b.append(g);this._parent.append(b);this._top_bar_height=g.height()};rdx.syslog_view.prototype._append_file_to_url=function(a,d){var b=rdx.url_utils.construct_url_params(b,rdx.url_utils.GET_BY_NAME_TYPE,this._file_resource.primary_keys,a);var e;if(rdx.utils.is_defined(d)){e=new rdx.callback(this,this._on_success,[d])}else{e=new rdx.callback(this,this._on_success)}rdx.model.get(this._resource_definition,b,e)};rdx.syslog_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.wizard_view=function(b,a,d){if(rdx.utils.is_not_defined(a.view_properties)){a.view_properties={}}this._parent=$(document.createElement("div"));this._view_definition=a;this._view_properties=this._view_definition.view_properties;this._resource_map=null;this._wizard=new rdx.wizard(this._parent,a,d);this._wizard_controller=new rdx.wizard_controller(this,this._parent);this._wizard.add_submit_handler_callback(new rdx.callback(this._wizard_controller,this._wizard_controller.submit_changes));this._wizard.add_resource_data_fetch_callback(new rdx.callback(this._wizard_controller,this._wizard_controller.get_resource_data));this._wizard_save_complete=false};rdx.wizard_view.prototype=new rdx.abstract_view();rdx.wizard_view.prototype.make_view=function(){};rdx.wizard_view.prototype.show_dialog=function(){var a=rdx.utils.is_defined(this._view_definition.dialog_properties)?this._view_definition.dialog_properties:{};this._wizard.render(a);this._wizard_controller.initialize()};rdx.wizard_view.prototype.get_resource_response_arrived=function(e){if(rdx.utils.is_defined(this._view_definition.resource_name)||rdx.utils.is_defined(this._view_definition.view_properties.fetch_data)){var b=rdx.utils.is_array(e)?e[0]:e;var a=rdx.utils.is_not_defined(this._view_definition.view_properties.fetch_data)?false:this._view_definition.view_properties.fetch_data;if(rdx.utils.is_not_defined(b)&&!a){return}if(rdx.utils.is_defined(b)&&rdx.utils.is_object_not_empty(b)){var m=this._get_resource_map()[this._view_definition.resource_name].pages;this._get_resource_map()[this._view_definition.resource_name].response=b;for(var f=0;f<m.length;f++){var h=m[f];h.get_form().initialize(b);h.set_original_resource_data(b)}}else{if(a){this._fetch_data_for_every_view()}}}else{var d=this._wizard.get_pages_info();for(var f in d){var g=d[f].get_form();g.initialize({})}}};rdx.wizard_view.prototype._fetch_data_for_every_view=function(){var a=this._get_resource_map();for(var d in a){var b=a[d].resource;if(this._is_add_mode(a[d].pages)){continue}rdx.model.get_all(b,null,new rdx.callback(this,this._handle_response,[d]),this._parent)}};rdx.wizard_view.prototype._is_add_mode=function(e){for(var d=0;d<e.length;d++){var b=e[d].get_view();var a=rdx.view_utils.get_model_method(b);if(a==rdx.model_constants.ADD){return true}}return false};rdx.wizard_view.prototype._handle_response=function(b,g){var f=this._get_resource_map()[g].pages;var a=rdx.utils.get_formatted_response(b[g]);for(var d=0;d<f.length;d++){var e=f[d];e.get_form().initialize(a);e.set_original_resource_data(a)}};rdx.wizard_view.prototype.get_wizard=function(){return this._wizard};rdx.wizard_view.prototype.get_view_properties=function(){return this._view_properties};rdx.wizard_view.prototype.on_success=function(a){this._wizard.set_save_complete(a)};rdx.wizard_view.prototype.is_dialog=function(){return true};rdx.wizard_view.prototype._destroy_view=function(){this._wizard.close()};rdx.wizard_view.prototype._get_resource_map=function(){return this._wizard_controller.get_resource_map()};rdx.dashboard_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._base_view=a;var f={center_view:{},right_view:{},welcome_view:null,add_configure_view:null,link_text:null};this._view_properties=$.extend({},f,this._view_definition.view_properties);this._center_view=null;this._right_view=null};rdx.dashboard_view.prototype=new rdx.abstract_view();rdx.dashboard_view.prototype.make_view=function(){rdx.mask.mask_component($(document.getElementsByClassName("rdx_second_pane_cell")),"dashboard_view_mask_id")};rdx.dashboard_view.prototype.get_resource_response_arrived=function(a){var b=(rdx.utils.is_defined(a)&&a.length>0)?parseInt(a[0]["__count"]):0;if(rdx.utils.is_defined(this._view_properties.welcome_view)&&b==0){this._load_view("welcome_view")}else{this._render_view()}rdx.mask.unmask_all_components()};rdx.dashboard_view.prototype.get_view_context=function(){var a=this._base_view.get_view_context();a.set_url_params({count:true},{});return a};rdx.dashboard_view.prototype._load_view=function(b){var a=this._base_view.get_parent();this._base_view.destroy_view();new rdx.base_view(a,rdx.utils.get_view(this._view_properties[b])).prepare_view()};rdx.dashboard_view.prototype.destroy_view=function(){if(rdx.utils.is_defined(this._center_view)){this._center_view.destroy_view()}if(rdx.utils.is_defined(this._right_view)){this._right_view.destroy_view()}};rdx.dashboard_view.prototype._handle_new_link_click_handler_callback=function(a){if(rdx.utils.is_defined(this._view_properties.add_configure_view)){this._load_view("add_configure_view")}else{if(rdx.utils.is_defined(this._view_properties.add_click_handler_callback)){this._base_view.destroy_view();this._view_properties.add_click_handler_callback.call_back()}}};rdx.dashboard_view.prototype._render_view=function(){var a=$("<td>");var d=$("<td>").addClass("right");var b=$("<tr>").append(a);if(rdx.utils.is_defined(this._view_properties.right_view)){b.append(d)}var m=rdx.utils.is_defined(this._view_properties.title)?this._view_properties.title:"rdx.dashboard";if(rdx.utils.is_not_defined(this._base_view.get_crumb_handler())&&(rdx.utils.is_not_defined(this._view_properties._dont_show_title)||this._view_properties._dont_show_title==false)){var m=rdx.i18n.get_string(m);var f=$("<div>");f.addClass("op_wizard_title");f.append(m);this._parent.append($("<div>").addClass("dashboard_title").append(f))}var h=$("<table>").addClass("layout_table").attr("align","center").attr("cellPadding",0).attr("cellSpacing",0).append($("<tbody>")).append(b);this._parent.removeClass("view_div_decorator").addClass("dashboard_view");if(rdx.utils.is_defined(this._view_properties.add_configure_view)||rdx.utils.is_defined(this._view_properties.add_click_handler_callback)){if(rdx.utils.is_defined(this._view_properties.link_text)){var e={add_blue_button:true,blue_button_click_handler_callback:new rdx.callback(this,this._handle_new_link_click_handler_callback),blue_button_label:this._view_properties.link_text};var g=$("<div>").addClass("add_button");new rdx.button_bar(g,new rdx.form_field({properties:e})).render();this._parent.append(g)}}this._parent.append(h);this._center_view=new rdx.base_view(a,rdx.utils.get_view(this._view_properties.center_view));if(rdx.utils.is_function(this._center_view.get_view().set_is_back_button_required)){this._center_view.get_view().set_is_back_button_required(false)}this._center_view.prepare_view();if(rdx.utils.is_defined(this._view_properties.right_view)||rdx.utils.is_defined(this._view_properties.add_configure_view)||rdx.utils.is_defined(this._view_properties.add_click_handler_callback)){this._right_view=new rdx.base_view(d,rdx.utils.get_view(this._view_properties.right_view));if(rdx.utils.is_function(this._right_view.get_view().set_is_back_button_required)){this._right_view.get_view().set_is_back_button_required(false)}this._right_view.prepare_view()}};rdx.dashboard_view.prototype._add_action_bar=function(){this._action_properties=rdx.view_utils.get_action_bar_items(this._view_definition,this._base_view.get_parent(),this._base_view.get_view_context())};rdx.dashboard_view.prototype.get_action_items=function(){if(rdx.utils.is_defined(this._action_properties)){return this._action_properties}this._add_action_bar();return this._action_properties};rdx.analytics_dashboard_view=function(o,b,d,q){this._parent=o;this._view_definition=b;this._resource=d;this._base_view=q;this._view_context=null;this._view_name=rdx.utils.is_defined(this._view_definition.d_name)?this._view_definition.d_name:this._view_definition.name;var p={time_slider_properties:{enabled:true},time_picker_dropdown_properties:{enabled:true,time_picker_options_get_callback:null,change_handler_callback:null,oldest_date:(12).months().ago(),newest_date:Date.today()},search_view_properties:{enabled:true,placeholder_text:"rdx.enter_text_to_search",submit_handler_callback:null,view_name_to_show:null,searched_context_callback:null},main_view_list:null,main_dashboard_view_list:null,refresh_enabled:false,export_enabled:false,title:"rdx.dashboard",time_panel_update_handler_callback:null,time_convertor_callback:null};if(rdx.utils.is_defined(this._view_definition.view_properties.resources)){var n=this._view_definition.view_properties.resources;this._resources=new Object();for(var f=0;f<n.length;f++){this._resources[rdx.utils.get_resource(n[f]).name]=rdx.utils.get_resource(n[f])}this._all_resources=rdx.utils.object_keys(this._resources)}this._show_home_view=rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.show_home_view)?this._view_definition.view_properties.show_home_view:false;this._show_refresh_button=rdx.utils.is_defined(this._view_definition.view_properties.show_refresh_button)?this._view_definition.view_properties.show_refresh_button:true;this._show_help_button=rdx.utils.is_not_defined(this._view_definition.view_properties.show_help_button)?false:this._view_definition.view_properties.show_help_button;this._show_export_button=rdx.utils.is_not_defined(rdx.EXPORT_ENABLED)?false:rdx.EXPORT_ENABLED;this._auto_refresh_interval=rdx.utils.is_not_defined(this._view_definition.view_properties.auto_refresh_interval)?null:this._view_definition.view_properties.auto_refresh_interval;this._is_inner_view=rdx.utils.is_defined(this._view_definition.view_properties._is_inner_view)?this._view_definition.view_properties._is_inner_view:false;this._view_properties=$.extend({},p,this._view_definition.view_properties);this._main_container_div=null;this._search_container_div=null;this._search_results_div=null;this._time_container_main_div=null;this._go_button_div=null;this._main_view_list_container=null;this._main_dashboard_view_container=null;this._right_side_view_list_container=null;this._tabbed_detail_views_container=null;this._tabbed_chart_views_container=null;this._summary_pane_block_container=null;this._tabbed_extra_detail_views_container=null;this._search_bar=null;this._picker_slider=null;this._main_views=null;this._right_views=null;this._search_results_view=null;this._picked_date=new Object();if(rdx.utils.is_defined(this._view_definition)&&rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.type)){rdx.current_view_type=this._view_definition.view_properties.type}rdx.ext.analytics.schedule_current_view_properties=new Object();if(rdx.utils.is_defined(this._view_definition.view_context.view_context_url)){if(rdx.utils.is_defined(this._view_definition.view_context.view_context_url.username)){var m=this._view_definition.view_context.view_context_url.username;var e={name:m};rdx.ext.analytics.set_export_data(e)}else{if(rdx.utils.is_defined(this._view_definition.view_context.view_context_url.app_name&&this._view_definition.view_context.view_context_url.app_type)){var g=this._view_definition.view_context.view_context_url.app_name;var a=this._view_definition.view_context.view_context_url.app_type;var e={app_name:g,app_type:a};rdx.ext.analytics.set_export_data(e)}else{if(rdx.utils.is_defined(this._view_definition.view_context.view_context_url.gateway_fqdn)){var h=this._view_definition.view_context.view_context_url.gateway_fqdn;var e={gateway_fqdn:h};rdx.ext.analytics.set_export_data(e)}}}}this._show_diagnostics_details_callback=this._view_definition.show_diagnostics_details_in_blue_callback;this._run_diagnostics_callback=this._view_definition.run_diagnostics_callback;this._invoke_diagnostic_job_nitro=this._view_definition.invoke_diagnostic_job_record};rdx.analytics_dashboard_view.prototype=new rdx.abstract_view();rdx.analytics_dashboard_view.prototype.make_view=function(){this._base_view.remove_decorator();this.breadcrumb_executed=false;if(!(rdx.utils.is_defined(this._view_definition.view_properties.render_breadcrumb)&&this._view_definition.view_properties.render_breadcrumb==false)){if($(".analytics_breadcrumb").length==0){var b=this._view_definition.__tree_key;var p=$("<td>").addClass("title_tool_bar_table");var h=new rdx.ext.analytics.breadcrumb(p,this._show_home_view,this._all_resources,this._resources).render(b);h.add_event_handler(rdx.ext.analytics.events.CRUMB_CLICKED,new rdx.callback(this,this._crumb_clicked,[this._view_definition]));if(this._is_inner_view==false){rdx.ext.analytics.set_breadcrumb(h)}var a=$("<td>").addClass("title_tool_bar_table");var n=$("<div>").addClass("refresh_button");a.append(n);a.bind(rdx.events.CLICK,{refresh_div:n},function(v){rdx.global_title_bar.get_current_crumb().view_info.base_view.refresh_view()});this._top_table=$("<table>").addClass("tool_bar_table analytics_title_toolbar").append($("<tbody>"));var u=$("<tr>");this._top_table.append(u);this.breadcrumb_executed=true;u.append(p)}}this._main_container_div=$("<div>").addClass("analytics_dashboard_view_main_container");if(this.is_search_enabled()){this._add_search_section()}if(this._view_definition.view_properties.add_title==true){this._add_dashboard_title_section()}if(this.is_time_slider_enabled()||this.is_time_picker_enabled()){this._add_time_slider_picker_section()}if(this.breadcrumb_executed==true){this.breadcrumb_executed=false;if(rdx.utils.is_defined(this._run_diagnostics_callback)){var f=$("<td>").addClass("title_tool_bar_table").attr("title","Run Diagnostics");u.append(f);var e=$("<a>").addClass("run_diagnostic_div").attr({href:"#","aria-label":"Run Diagnostics"});f.append(e);e.bind(rdx.events.CLICK,{that:this},function(v){v.data.that._run_diagnostics_callback.call_back()})}if(rdx.utils.is_defined(this._show_diagnostics_details_callback)){var d=$("<td>").addClass("title_tool_bar_table").attr("title","Show Diagnostics");u.append(d);var m=$("<a>").addClass("show_diagnostic_div").attr({href:"#","aria-label":"Show Diagnostics"});d.append(m);m.bind(rdx.events.CLICK,{that:this},function(v){v.data.that._show_diagnostics_details_callback.call_back()})}if(this._show_export_button){var o=$("<td>").addClass("title_tool_bar_table").attr("title",rdx.i18n.get_string("rdx.click_to_export"));rdx.ext.analytics.export_button=o;u.append(o);this.create_export_icon(o,new rdx.callback(this,this.get_export_post_object))}if(this._show_refresh_button){u.append(a)}if(this._show_help_button){var t=$("<td>").addClass("title_tool_bar_table");var g=this._view_definition.view_properties.help_id;if(rdx.utils.is_defined(g)){var q=$("<div>").addClass("help_column");rdx.help.add_help(q,g);t.append(q);u.append(t)}}if(this._is_inner_view==false){this._parent.append(this._top_table)}if(this._is_inner_view==false){var s=new rdx.ext.analytics.crumb({selected_object:this._resource,is_analytics_dashboard_view:true,view_definition:this._view_definition});h.add(s)}}if(rdx.utils.is_defined(this._invoke_diagnostic_job_nitro)){if($(".no_data_parent_div").length>0){this._invoke_diagnostic_job_nitro.call_back([this._no_data_parent_div])}else{this._no_data_parent_div=$("<div>").addClass("no_data_parent_div").addClass("hide");this._parent.append(this._no_data_parent_div);this._invoke_diagnostic_job_nitro.call_back([this._no_data_parent_div])}}this._parent.addClass("analytics_dashboard_view_css").append(this._main_container_div)};rdx.analytics_dashboard_view.prototype.create_export_icon=function(a,b){var d=$("<a>").addClass("export_div").attr({href:"#","aria-label":"Export"}).appendTo(a);d.bind(rdx.events.CLICK,{_this:this,export_div:d,view_object_get_callback:b},function(e){rdx.view_utils.show_export_report_panel(null,e.data.view_object_get_callback);e.preventDefault()})};rdx.analytics_dashboard_view.prototype.update_duration=function(){var a=null;if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)&&rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT.duration_value)){if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_hour"){a="last_1_hour"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_day"){a="last_1_day"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_week"){a="last_1_week"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_month"){a="last_1_month"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_1_quarter"){duartion="last_3_months"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_half_year"){duartion="last_6_months"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_1_year"){duartion="last_1_year"}else{if(rdx.SELECTED_DURATION_OBJECT.duration_value=="last_2_years"){duartion="last_2_years"}}}}}}}}}rdx.ext.analytics.view_utils.set_duration(a)};rdx.analytics_dashboard_view.prototype._crumb_clicked=function(b){rdx.page.get_tree_content_pane().empty();var d;if(rdx.utils.is_defined(b.get_view())){d=rdx.utils.get_view(b.get_view())}else{d=this._view_definition}var a=new rdx.base_view(rdx.page.get_tree_content_pane(),d);a.prepare_view()};rdx.analytics_dashboard_view.prototype.get_resource_response_arrived=function(a){};rdx.analytics_dashboard_view.prototype.resize_view=function(){};rdx.analytics_dashboard_view.prototype.refresh_view=function(){this.go_button_handler(rdx.SELECTED_DURATION_OBJECT)};rdx.analytics_dashboard_view.prototype._add_search_section=function(){this._search_container_div=$("<div>").addClass("search_container_div");this._search_results_div=$("<div>").addClass("search_results_div");this._main_container_div.append(this._search_container_div).append(this._search_results_div);var a={placeholder_text:this.get_search_placeholder_text(),search_submit_handler_callback:this.get_search_submit_handler_callback(),cancel_search_handler_callback:this.get_search_cancel_handler_callback()};this._search_bar=new rdx.search_bar(this._search_container_div,a);this._search_bar.render()};rdx.analytics_dashboard_view.prototype._add_dashboard_title_section=function(){var a=$("<div>").append(this.get_title()).addClass("analytics_dashboard_view_title");this._main_container_div.append(a)};rdx.analytics_dashboard_view.prototype._add_refresh_button=function(){var a=$("<a>").addClass("analytics_dashboard_refresh_div").attr({href:"#","aria-label":"Refresh",title:"Refresh"});a.bind(rdx.events.CLICK,{that:this},function(b){b.data.that.refresh_view()});this._main_container_div.append(a)};rdx.analytics_dashboard_view.prototype.get_export_post_object=function(u){if(u=="csv"){var h=new Object();var f,m,n=this.get_main_view_map();if(rdx.utils.is_empty(n)){var o=rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_view_definition();n=o.view_properties.main_view_list}if(rdx.utils.is_not_empty(n)){for(var g in n){m=new rdx.base_view(null,rdx.utils.get_view(g));if(rdx.utils.is_function(m._view_definition.export_csv_payload_callback)){var z=m._view_definition.export_csv_payload_callback();var C=new Object();var v=z._view_context._url_params.args;if(rdx.utils.is_not_defined(v)){v=z._view_context._url_params.get_by_name}var d="";for(var t=0;t<v.length;t++){d+=v[t].name+":"+v[t].value+","}var q=z._view_context._url_params.query_params;C.args=d.slice(0,-1);for(var s=0;s<q.length;s++){if(q[s].name=="cr_enabled"){C.cr_enabled=q[s].value}else{if(q[s].name=="sla_enabled"){C.sla_enabled=q[s].value}else{if(q[s].name=="type"){C.type=q[s].value}else{if(q[s].name=="duration"){C.duration=q[s].value}else{if(q[s].name=="asc"){C.asc=q[s].value}else{if(q[s].name=="order_by"){C.order_by=q[s].value}}}}}}}if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)&&rdx.utils.is_not_defined(rdx.SELECTED_DURATION_OBJECT.duration_value)){var a=rdx.ext.analytics.start_epoch;var p=rdx.ext.analytics.end_epoch;if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(p)){C.report_start_time=a;C.report_end_time=p}}var w=z._view_definition.resource_name;C.resource_name=w;var b=rdx.utils.get_resource(w);C.section_title=rdx.i18n.get_string(z._view_definition.title);h[C.section_title]=C}h[C.section_title]=C}}else{var C=new Object();if(rdx.utils.is_defined(this._view_definition)){C.resource_name=this._view_definition.resource_name;C.duration=rdx.ext.analytics.view_utils.get_duration();var F=rdx.utils.is_defined(this._view_definition.view_properties.title)?this._view_definition.view_properties.title:"CSV Report";C.section_title=rdx.i18n.get_string(F);if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)&&rdx.utils.is_not_defined(rdx.SELECTED_DURATION_OBJECT.duration_value)||rdx.SELECTED_DURATION_OBJECT.time_range){var a=rdx.ext.analytics.start_epoch;var p=rdx.ext.analytics.end_epoch;if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(p)){C.report_start_time=a;C.report_end_time=p}}h[C.section_title]=C}}return h}else{var D=new Object();var A={duration:rdx.ext.analytics.view_utils.get_duration()};D.resource_name=this._resource.name;var o=rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_view_definition();D.view_name=rdx.utils.is_defined(o.d_name)?o.d_name:o.name;if(rdx.utils.is_defined(rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0])){if(rdx.utils.is_defined(rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].name)){A.username=rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].name}if(rdx.utils.is_defined(rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].app_name)){A.app_name=rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].app_name}if(rdx.utils.is_defined(rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].gateway_fqdn)){A.gateway_fqdn=rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].gateway_fqdn}}if(rdx.utils.is_defined(rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_selected_object().app_type)){A.app_type=rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_selected_object().app_type}var d=null;var f,m,n=o.view_properties.main_view_list;for(var g in n){m=new rdx.base_view(null,rdx.utils.get_view(g));if(rdx.utils.is_function(m._view_definition.export_payload_callback)){d=m._view_definition.export_payload_callback();for(var E in d){A[E]=d[E]}}}D.extra_params=A;var B=rdx.ext.analytics.utils.get_report_export_view_context_by_view_name(D);var e=new Object();e.view_context_url=B;e.view_selection=new Object();return e}};rdx.analytics_dashboard_view.prototype._add_time_slider_picker_section=function(){this.set_time_picker_changed_update_range_callback(new rdx.callback(this,this._handle_time_picker_change_callback));this._time_container_main_div=$("<div>").addClass("time_container_main_div").addClass("clearfix");this._main_container_div.append(this._time_container_main_div);this._picker_slider=rdx.view_utils.add_time_selection_bar(this._time_container_main_div,this.get_time_slider_properties(),this.get_time_picker_properties(),this.get_go_button_properties());if(rdx.utils.is_defined(this.get_time_convertor_callback())){var a=this.converted_picked_date(this.get_picker().get_data());this.get_slider().reset_bounds(new Date(a.start_epoch),new Date(a.end_epoch));if(rdx.utils.is_not_defined(rdx.SELECTED_DURATION_OBJECT)||!rdx.SELECTED_DURATION_OBJECT.time_range){this.get_slider().reset_default_bounds(new Date(a.start_epoch),new Date(a.end_epoch))}}this._handle_time_picker_change_callback(this.get_picker().get_data())};rdx.analytics_dashboard_view.prototype._add_main_view_list_container=function(){if(rdx.utils.is_defined(this._main_view_list_container)){this._main_view_list_container.empty()}else{if(rdx.utils.is_not_defined(this.get_right_view_map())){this._main_view_list_container=$("<div>").addClass("main_view_list_container").addClass("hundred_percent_width")}else{this._main_view_list_container=$("<div>").addClass("main_view_list_container")}}this._add_main_view_sections()};rdx.analytics_dashboard_view.prototype._add_main_dashboard_view_container=function(){if(rdx.utils.is_defined(this._main_dashboard_view_container)){this._main_dashboard_view_container.empty()}else{this._main_dashboard_view_container=$("<div>").addClass("main_dashboard_view_container")}this._add_main_dashboard_view_sections()};rdx.analytics_dashboard_view.prototype._add_main_dashboard_view_sections=function(){var b,a,e=this.get_dashboard_view();if(rdx.utils.is_defined(this.get_dashboard_view())){this._main_container_div.append(this._main_dashboard_view_container)}if(rdx.utils.is_defined(this.get_dashboard_view())){if(this._view_definition.view_properties.add_title==true){this._main_dashboard_title=$("<div>").addClass("main_dashboard_view_container_title").append("General Summary");this._main_dashboard_view_container.append(this._main_dashboard_title)}for(var d in e){b=$("<div>").addClass("dashboard_summary_view_container");this._main_dashboard_view_container.append(b);var a=new rdx.base_view(b,rdx.utils.get_view(d));a.prepare_view(true)}}};rdx.analytics_dashboard_view.prototype._add_main_view_sections=function(){this._main_view_list_container.empty();var e,a,g=this.get_main_view_map();if(rdx.utils.is_defined(this.get_main_view_map())){this._main_container_div.append(this._main_view_list_container)}for(var f in g){if(rdx.utils.is_not_defined(this.get_main_views())){this._main_views=new Array()}e=$("<div>").addClass("main_individual_view_container");this._main_view_list_container.append(e);a=new rdx.base_view(e,rdx.utils.get_view(f));a.remove_decorator();var d=a.get_view_context();g[f].call_back([d]);this._main_views.push(a);if(rdx.utils.is_defined(this._view_definition.view_context.view_context_url)){var b=this._view_definition.view_context.view_context_url;a._view_definition.export_populate_callback=function(){return b}}a.prepare_view(true)}};rdx.analytics_dashboard_view.prototype._add_right_side_view_container=function(){if(rdx.utils.is_defined(this._right_side_view_list_container)){this._right_side_view_list_container.empty()}else{this._right_side_view_list_container=$("<div>").addClass("right_side_view_container")}this._add_right_side_view_sections()};rdx.analytics_dashboard_view.prototype._add_right_side_view_sections=function(){this._right_side_view_list_container.empty();var b,a,e=this.get_right_view_map();if(rdx.utils.is_defined(this.get_right_view_map())){this._main_container_div.append(this._right_side_view_list_container)}for(var d in e){if(rdx.utils.is_not_defined(this.get_right_views())){this._right_views=new Array()}b=$("<div>").addClass("right_individual_view_container");this._right_side_view_list_container.append(b);a=new rdx.base_view(b,rdx.utils.get_view(d));a.remove_decorator();e[d].call_back([a.get_view_context()]);this._right_views.push(a);a.prepare_view(true)}};rdx.analytics_dashboard_view.prototype._add_summary_pane_block_container=function(){if(rdx.utils.is_defined(this._summary_pane_block_container)){this._summary_pane_block_container.empty()}else{this._summary_pane_block_container=$("<div>").addClass("summary_pane_view_container")}this._add_summary_pane_block_sections()};rdx.analytics_dashboard_view.prototype._add_summary_pane_block_sections=function(){this._summary_pane_block_container.empty();var b,a,e=this.get_summary_pane_view_map();if(rdx.utils.is_defined(this.get_summary_pane_view_map())){this._main_container_div.append(this._summary_pane_block_container)}for(var d in e){b=$("<div>").addClass("summary_pane_individual_view_container");this._summary_pane_block_container.append(b);a=new rdx.base_view(b,rdx.utils.get_view(d));a.remove_decorator();e[d].call_back([a.get_view_context()]);a.prepare_view(true)}};rdx.analytics_dashboard_view.prototype._add_tabbed_chart_views_container=function(){if(rdx.utils.is_defined(this._tabbed_chart_views_container)){this._tabbed_chart_views_container.empty()}else{this._tabbed_chart_views_container=$("<div>").addClass("tabbed_chart_view_container")}this._add_tabbed_chart_views_sections()};rdx.analytics_dashboard_view.prototype._add_tabbed_chart_views_sections=function(){this._tabbed_chart_views_container.empty();var b,a,e=this.get_tabbed_chart_view_map();if(rdx.utils.is_defined(this.get_tabbed_chart_view_map())){this._main_container_div.append(this._tabbed_chart_views_container)}for(var d in e){b=$("<div>").addClass("tabbed_chart_individual_view_container");this._tabbed_chart_views_container.append(b);a=new rdx.base_view(b,rdx.utils.get_view(d));e[d].call_back([a.get_view_context()]);a.prepare_view(true)}};rdx.analytics_dashboard_view.prototype._add_tabbed_detail_views_container=function(){if(rdx.utils.is_defined(this._tabbed_detail_views_container)){this._tabbed_detail_views_container.empty()}else{this._tabbed_detail_views_container=$("<div>").addClass("tabbed_detail_view_container")}this._add_tabbed_detail_views_sections()};rdx.analytics_dashboard_view.prototype._add_tabbed_detail_views_sections=function(){this._tabbed_detail_views_container.empty();var b,a,e=this.get_tabbed_detail_view_map();if(rdx.utils.is_defined(this.get_tabbed_detail_view_map())){this._main_container_div.append(this._tabbed_detail_views_container)}for(var d in e){b=$("<div>").addClass("tabbed_detail_individual_view_container");this._tabbed_detail_views_container.append(b);a=new rdx.base_view(b,rdx.utils.get_view(d));e[d].call_back([a.get_view_context()]);a.prepare_view(true)}};rdx.analytics_dashboard_view.prototype._add_tabbed_extra_detail_views_container=function(){if(rdx.utils.is_defined(this._tabbed_extra_detail_views_container)){this._tabbed_extra_detail_views_container.empty()}else{this._tabbed_extra_detail_views_container=$("<div>").addClass("tabbed_extra_detail_view_container")}this._add_tabbed_extra_detail_views_sections()};rdx.analytics_dashboard_view.prototype._add_tabbed_extra_detail_views_sections=function(){this._tabbed_extra_detail_views_container.empty();var b,a,e=this.get_tabbed_extra_detail_view_map();if(rdx.utils.is_defined(this.get_tabbed_extra_detail_view_map())){this._main_container_div.append(this._tabbed_extra_detail_views_container)}for(var d in e){b=$("<div>").addClass("tabbed_extra_detail_individual_view_container");this._tabbed_extra_detail_views_container.append(b);a=new rdx.base_view(b,rdx.utils.get_view(d));e[d].call_back([a.get_view_context()]);a.prepare_view(true)}};rdx.analytics_dashboard_view.prototype._handle_time_picker_change_callback=function(a,d){if(d){var b=this.converted_picked_date(a);rdx.SELECTED_DURATION_OBJECT=$.extend({},rdx.SELECTED_DURATION_OBJECT,b,{time_range:false});if(rdx.utils.is_defined(this.get_picker())){rdx.SELECTED_DURATION_OBJECT.duration_value=this.get_picker().get_data().duration_value}if(rdx.utils.is_defined(this.get_slider())){this.get_slider().reset_bounds(new Date(b.start_epoch),new Date(b.end_epoch));this.get_slider().reset_default_bounds(new Date(b.start_epoch),new Date(b.end_epoch))}}this.go_button_handler(a)};rdx.analytics_dashboard_view.prototype.get_search_submit_handler_callback=function(){var a=null;var b=this._view_properties.search_view_properties.view_name_to_show;if(rdx.utils.is_defined(this._view_properties.search_view_properties.submit_handler_callback)){a=this._view_properties.search_view_properties.submit_handler_callback}else{if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(rdx.utils.get_view(b))){var d=rdx.utils.get_view(b);a=new rdx.callback(this,this._show_search_results_in_view,[d])}else{}}return a};rdx.analytics_dashboard_view.prototype.get_search_cancel_handler_callback=function(){return new rdx.callback(this,function(){if(rdx.utils.is_defined(this.get_search_results_view())){this.get_search_results_view().destroy_view()}},[])};rdx.analytics_dashboard_view.prototype._show_search_results_in_view=function(d,b){this._search_results_div.empty();this._search_results_view=new rdx.base_view(this._search_results_div,b);var a=this._search_results_view.get_view_context();if(rdx.utils.is_defined(this.get_searched_context_callback())){this.get_searched_context_callback().call_back([a,d])}this._search_results_view.prepare_view(true)};rdx.analytics_dashboard_view.prototype.is_search_enabled=function(){return this._view_properties.search_view_properties.enabled};rdx.analytics_dashboard_view.prototype.get_search_placeholder_text=function(){return this._view_properties.search_view_properties.placeholder_text};rdx.analytics_dashboard_view.prototype.get_searched_context_callback=function(){return this._view_properties.search_view_properties.searched_context_callback};rdx.analytics_dashboard_view.prototype.get_title=function(){return rdx.i18n.get_string(this._view_properties.title)};rdx.analytics_dashboard_view.prototype.is_time_slider_enabled=function(){if(rdx.utils.is_defined(this._view_properties.time_slider_properties)){return this._view_properties.time_slider_properties.enabled}else{return false}};rdx.analytics_dashboard_view.prototype.time_slider_enabled=function(){return this._view_properties.time_slider_properties.enabled};rdx.analytics_dashboard_view.prototype.get_time_slider_properties=function(){return this._view_properties.time_slider_properties};rdx.analytics_dashboard_view.prototype.is_time_picker_enabled=function(){if(rdx.utils.is_defined(this._view_properties.time_picker_dropdown_properties)){return this._view_properties.time_picker_dropdown_properties.enabled}else{return false}};rdx.analytics_dashboard_view.prototype.get_time_picker_properties=function(){this._view_properties.time_picker_dropdown_properties.drop_down_options=this._view_properties.time_picker_dropdown_properties.time_picker_options_get_callback.call_back();return this._view_properties.time_picker_dropdown_properties};rdx.analytics_dashboard_view.prototype.time_picker_options_get_callback=function(){return this._view_properties.time_picker_dropdown_properties.time_picker_options_get_callback};rdx.analytics_dashboard_view.prototype.get_search_bar=function(){return this._search_bar};rdx.analytics_dashboard_view.prototype.get_time_picker_changed_update_range_callback=function(){return this._view_properties.time_picker_dropdown_properties.change_handler_callback};rdx.analytics_dashboard_view.prototype.set_time_picker_changed_update_range_callback=function(a){this._view_properties.time_picker_dropdown_properties.change_handler_callback=a};rdx.analytics_dashboard_view.prototype.get_picked_date=function(){return this._picked_date};rdx.analytics_dashboard_view.prototype.set_picked_date=function(a){this._picked_date=a};rdx.analytics_dashboard_view.prototype.get_picker_slider=function(){return this._picker_slider};rdx.analytics_dashboard_view.prototype.get_go_button_properties=function(){var a={button_text:"rdx.go",click_handler_callback:new rdx.callback(this,this.go_button_handler,[])};return a};rdx.analytics_dashboard_view.prototype.get_picker=function(){var a=null;if(rdx.utils.is_defined(this.get_picker_slider())){a=this._picker_slider.picker}return a};rdx.analytics_dashboard_view.prototype.get_slider=function(){var a=null;if(rdx.utils.is_defined(this.get_picker_slider())){a=this._picker_slider.slider}return a};rdx.analytics_dashboard_view.prototype.get_time_display_div=function(){var a=null;if(rdx.utils.is_defined(this.get_picker_slider())){a=this._picker_slider.time_display_div}return a};rdx.analytics_dashboard_view.prototype.set_time_in_time_display_div=function(a){if(rdx.utils.is_defined(this.get_time_display_div())){this.get_time_display_div().empty();this.get_time_display_div().append(a)}};rdx.analytics_dashboard_view.prototype.get_search_results_view=function(){return this._search_results_view};rdx.analytics_dashboard_view.prototype.get_main_view_map=function(){return this._view_properties.main_view_list};rdx.analytics_dashboard_view.prototype.get_right_view_map=function(){return this._view_properties.right_view_list};rdx.analytics_dashboard_view.prototype.get_dashboard_view=function(){return this._view_properties.main_dashboard_view_list};rdx.analytics_dashboard_view.prototype.get_summary_pane_view_map=function(){return this._view_properties.summary_pane_block};rdx.analytics_dashboard_view.prototype.get_tabbed_chart_view_map=function(){return this._view_properties.tabbed_chart_views};rdx.analytics_dashboard_view.prototype.get_tabbed_detail_view_map=function(){return this._view_properties.tabbed_detail_views};rdx.analytics_dashboard_view.prototype.get_tabbed_extra_detail_view_map=function(){return this._view_properties.tabbed_extra_detail_views};rdx.analytics_dashboard_view.prototype.get_main_views=function(){return this._main_views};rdx.analytics_dashboard_view.prototype.get_right_views=function(){return this._right_views};rdx.analytics_dashboard_view.prototype.go_button_handler=function(a,d){if(d){var b=this.converted_picked_date(a);rdx.SELECTED_DURATION_OBJECT=$.extend({},rdx.SELECTED_DURATION_OBJECT,b,{time_range:true});if(rdx.utils.is_defined(this.get_picker())){rdx.SELECTED_DURATION_OBJECT.duration_value=this.get_picker().get_data().duration_value}if(rdx.utils.is_defined(rdx.SELECTED_DURATION_OBJECT)){this.set_time_in_time_display_div(rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(rdx.SELECTED_DURATION_OBJECT.start_epoch))+" - "+rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(rdx.SELECTED_DURATION_OBJECT.end_epoch)));if(rdx.utils.is_defined(this.get_time_panel_update_handler_callback())){this.get_time_panel_update_handler_callback().call_back([rdx.SELECTED_DURATION_OBJECT.start_epoch,rdx.SELECTED_DURATION_OBJECT.end_epoch])}}}else{this.set_time_in_time_display_div(rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(this.get_slider().get_data().start_epoch))+" - "+rdx.utils.format_data_dd_m_yyyy_hh_mm_ss(new Date(this.get_slider().get_data().end_epoch)));if(rdx.utils.is_defined(this.get_time_panel_update_handler_callback())){this.get_time_panel_update_handler_callback().call_back([this.get_slider().get_data().start_epoch,this.get_slider().get_data().end_epoch])}}this._add_summary_pane_block_container();if(this.get_main_view_map()){this.destroy_main_views();this._add_main_view_list_container();this._add_right_side_view_container()}this._add_tabbed_chart_views_container();this._add_tabbed_detail_views_container();this._add_tabbed_extra_detail_views_container();this._add_main_dashboard_view_container()};rdx.analytics_dashboard_view.prototype.destroy_main_views=function(){if(rdx.utils.is_defined(this.get_main_views())){for(var b=0,a=this.get_main_views().length;b<a;b++){this.get_main_views()[b].destroy_view()}}};rdx.analytics_dashboard_view.prototype.get_time_panel_update_handler_callback=function(){return this._view_properties.time_panel_update_handler_callback};rdx.analytics_dashboard_view.prototype.converted_picked_date=function(a){var b=this.get_time_convertor_callback();if(rdx.utils.is_defined(b)){return b.call_back([a])}return a};rdx.analytics_dashboard_view.prototype.get_time_convertor_callback=function(a){return this._view_properties.time_convertor_callback};rdx.summary_chart_detail_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;var f={summary_item_renderer_callback:null,key_chart_view_map:null,key_detail_view_map:null,summary_item_click_view_context_for_chart_callback:null,summary_item_click_view_context_for_detail_view_callback:null};this._view_properties=$.extend({},f,this._view_definition.view_properties);this._resource_properties=this._view_definition.resource_properties;this._main_container_div=null;this._summary_strip_container=null;this._chart_view_container=null;this._detail_view_container=null;this._show_detail_view=this._view_properties.show_detail_view;this._selected_summary_item=null;this._summary_items=null;this._chart_view=null;this._detail_view=null;this._summary_response=null;this._selected_key=null;this._currently_selected_item=null;this._any_non_zero_item=false;this._currently_selected_item_index=0};rdx.summary_chart_detail_view.prototype=new rdx.abstract_view();rdx.summary_chart_detail_view.prototype.make_view=function(){this._main_container_div=$("<div>").addClass("summary_chart_detail_view");if(rdx.utils.is_defined(this._view_definition.export_populate_callback)){var a=this._view_definition.export_populate_callback();if(rdx.utils.is_defined(a.selected_index)){this._currently_selected_item_index=a.selected_index}}this._add_summary_strip_container();if(this.get_key_chart_view_map()){this._add_chart_view_section()}if(this.get_key_detail_view_map()&&this.is_show_detail_view()!=false){this._add_detail_view_section()}this._parent.append(this._main_container_div)};rdx.summary_chart_detail_view.prototype.get_resource_response_arrived=function(a){this._summary_response=a;if(this.get_summary_response().length>0){this._main_container_div.removeClass("no_data_to_show");this._add_summary_strip_items()}else{this._add_no_data_to_show()}};rdx.summary_chart_detail_view.prototype.resize_view=function(){};rdx.summary_chart_detail_view.prototype.refresh_view=function(){};rdx.summary_chart_detail_view.prototype._add_summary_strip_container=function(){this._summary_strip_container=$("<div>").addClass("strip_container clearfix");this._main_container_div.append(this._summary_strip_container)};rdx.summary_chart_detail_view.prototype._add_chart_view_section=function(){this._chart_view_container=$("<div>").addClass("chart_view_container");this._main_container_div.append(this._chart_view_container)};rdx.summary_chart_detail_view.prototype._add_detail_view_section=function(){this._detail_view_container=$("<div>").addClass("summary_chart_detail_view_container");this._main_container_div.append(this._detail_view_container)};rdx.summary_chart_detail_view.prototype._add_no_data_to_show=function(){this._summary_strip_container.empty();this._main_container_div.addClass("no_data_to_show");this._summary_strip_container.append(rdx.i18n.get_string("rdx.no_data_to_show"))};rdx.summary_chart_detail_view.prototype.render_vpn_error_counts_call=function(){var f=this;var g=new rdx.model_executor_service(new rdx.callback(function(h){var m=h.get_collated_response()[0].vpn_error_counts;f._summary_response=m;f.render_summary_with_response(m)}));var e=new rdx.view_context();var b=e.get_url_params();var d=b.query_params;var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["flag"],{flag:"3"});if(rdx.utils.is_defined(this._view_definition.view_properties.breadcrumb_key)){if(this._view_definition.view_properties.breadcrumb_key=="name"){if(rdx.utils.is_defined(rdx.ext.analytics.get_export_data().name)){var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["ica_user_name"],{ica_user_name:rdx.ext.analytics.get_export_data().name})}else{var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["ica_user_name"],{ica_user_name:rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].name})}}else{if(this._view_definition.view_properties.breadcrumb_key=="app_name"){if(rdx.utils.is_defined(rdx.ext.analytics.get_export_data().app_name)){var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["appname","flag"],{appname:rdx.ext.analytics.get_export_data().app_name,flag:"3"})}else{var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["appname","flag"],{appname:rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].app_name,flag:"3"})}}else{if(this._view_definition.view_properties.breadcrumb_key=="gateway"){if(rdx.utils.is_defined(rdx.ext.analytics.get_export_data().gateway_fqdn)){var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["vpn_fqdn"],{vpn_fqdn:rdx.ext.analytics.get_export_data().gateway_fqdn})}else{var a=rdx.url_utils.construct_url_params({is_query_param:true,use_args:true},rdx.url_utils.GET_ARGS_TYPE,["vpn_fqdn"],{vpn_fqdn:rdx.ext.analytics.get_breadcrumb()._get_last_added_crumb().get_objects()[0].gateway_fqdn})}}}}}e._url_params=a;insight.hdx_dashboard_common_view_context_callback(e);e._url_params.use_args=true;g.add(rdx.model_constants.GET,rdx.utils.get_resource("vpn_error_counts"),null,null,e.get_url_params());g.execute()};rdx.summary_chart_detail_view.prototype._add_summary_strip_items=function(){this._summary_strip_container.empty();if(rdx.utils.is_defined(this._view_definition.view_properties.fire_vpn_error_counts_call)&&this._view_definition.view_properties.fire_vpn_error_counts_call==true){this.render_vpn_error_counts_call()}else{this.render_summary_with_response(this.get_summary_response())}};rdx.summary_chart_detail_view.prototype.render_summary_with_response=function(m){var n=this._get_summary_item_width();if(rdx.utils.is_empty(m)){var a=new Object();a.error_counts="0";a.error_type="Application Launch";m.push(a)}else{var g=new Object();var f=new Object();var o=new Object();var e=new Object();var p=new Object();for(var d=0;d<m.length;d++){if(m[d].error_type=="Authentication"){f=m[d]}else{if(m[d].error_type=="SSO (Single Sign On)"){o=m[d]}else{if(m[d].error_type=="EPA (End Point Analysis)"){g=m[d]}else{if(m[d].error_type=="Application Launch"){e=m[d]}else{if(m[d].error_type=="Authorization Failure"){p=m[d]}}}}}}m=[];if(!($.isEmptyObject(g))){m.push(g)}if(!($.isEmptyObject(f))){m.push(f)}if(!($.isEmptyObject(p))){m.push(p)}if(!($.isEmptyObject(o))){m.push(o)}if(!($.isEmptyObject(e))){m.push(e)}}for(var d=0,h=m.length;d<h;d++){var b=$("<a>").attr("href","#").attr("style","text-decoration:none; color:#000").addClass("summary_chart_summary_item").css("width",n);b.bind(rdx.events.CLICK,{_type:m[d][this.get_summary_key_property()],_this:this,item:b,currently_selected_item_index:d},function(t){var u=t.data._this;var s=t.data.item;u._currently_selected_item_index=t.data.currently_selected_item_index;if(rdx.utils.is_defined(u.get_currently_selected_item())){$(u.get_currently_selected_item()).removeClass("active-tab")}u.set_currently_selected_item(s);s.addClass("active-tab");u._handle_summary_item_click(t.data._type);var q={selected_index:u._currently_selected_item_index};u._view_definition.export_payload_callback=function(){return q}});if(rdx.utils.is_defined(this.get_summary_item_renderer_callback())){this.get_summary_item_renderer_callback().call_back(b)}else{this._render_summary_strip_item(b,m[d])}this._summary_strip_container.append(b);if(d==0){this._summary_items=new Array()}if(d==this._currently_selected_item_index){b.click()}this._summary_items.push(b)}};rdx.summary_chart_detail_view.prototype._render_summary_strip_item=function(d,a){if(rdx.utils.is_defined(this.get_summary_key_property()&&rdx.utils.is_defined(this.get_summary_value_property()))){var f=a[this.get_summary_value_property()];var e="";if(f==0){if(this.get_any_non_zero_item()==false){this.set_any_non_zero_item(true)}e="summary_item_value_div_all_ok"}else{e="summary_item_value_div"}var b=$("<div>").addClass("summary_item_key_div").append(a[this.get_summary_key_property()]);var g=$("<div>").addClass(e);if(e=="summary_item_value_div"){g.append(a[this.get_summary_value_property()])}d.append(b).append(g)}};rdx.summary_chart_detail_view.prototype._handle_summary_item_click=function(a){this._render_chart_view(a);if(this.is_show_detail_view()!=false){this._render_detail_view(a)}};rdx.summary_chart_detail_view.prototype._render_chart_view=function(b){this._chart_view_container.empty();if(rdx.utils.is_defined(this._chart_view)){this._chart_view.destroy_view()}if(rdx.utils.is_defined(b)){if(rdx.utils.is_defined(this.get_key_chart_view_map())){if(rdx.utils.is_defined(this.get_key_chart_view_map()[b])){if(rdx.utils.is_defined(rdx.utils.get_view(this.get_key_chart_view_map()[b]))){this._chart_view=new rdx.base_view(this._chart_view_container,rdx.utils.get_view(this.get_key_chart_view_map()[b]));if(rdx.utils.is_defined(this.get_summary_item_click_view_context_for_chart_callback())){var a=this.get_summary_item_click_view_context_for_chart_callback().call_back([b,this._chart_view.get_view_context()]);this._chart_view.set_view_context(a)}this._chart_view.prepare_view(true)}}}}};rdx.summary_chart_detail_view.prototype._render_detail_view=function(d){this._detail_view_container.empty();if(rdx.utils.is_defined(this._detail_view)){this._detail_view.destroy_view()}if(rdx.utils.is_defined(d)){if(rdx.utils.is_defined(this.get_key_detail_view_map())){if(rdx.utils.is_defined(this.get_key_detail_view_map()[d])){if(rdx.utils.is_defined(rdx.utils.get_view(this.get_key_detail_view_map()[d]))){this._detail_view=new rdx.base_view(this._detail_view_container,rdx.utils.get_view(this.get_key_detail_view_map()[d]));if(rdx.utils.is_defined(this.get_summary_item_click_view_context_for_detail_view_callback())){var a=this.get_summary_item_click_view_context_for_detail_view_callback().call_back([d,this._detail_view.get_view_context()]);this._detail_view.set_view_context(a)}var b=this._detail_view;this._view_definition.export_csv_payload_callback=function(){return b};this._detail_view.prepare_view(true)}}}}};rdx.summary_chart_detail_view.prototype.get_summary_item_renderer_callback=function(){return this._view_properties.summary_item_renderer_callback};rdx.summary_chart_detail_view.prototype.get_key_chart_view_map=function(){return this._view_properties.key_chart_view_map};rdx.summary_chart_detail_view.prototype.get_key_detail_view_map=function(){return this._view_properties.key_detail_view_map};rdx.summary_chart_detail_view.prototype.get_summary_item_click_view_context_for_chart_callback=function(){return this._view_properties.summary_item_click_view_context_for_chart_callback};rdx.summary_chart_detail_view.prototype.get_summary_item_click_view_context_for_detail_view_callback=function(){return this._view_properties.summary_item_click_view_context_for_detail_view_callback};rdx.summary_chart_detail_view.prototype.get_summary_response=function(){return this._summary_response};rdx.summary_chart_detail_view.prototype.get_resource_properties=function(){return this._resource_properties};rdx.summary_chart_detail_view.prototype.get_summary_key_property=function(){return rdx.utils.is_defined(this.get_resource_properties())?this.get_resource_properties().summary_key_property:null};rdx.summary_chart_detail_view.prototype.get_summary_value_property=function(){return rdx.utils.is_defined(this.get_resource_properties())?this.get_resource_properties().summary_value_property:null};rdx.summary_chart_detail_view.prototype._get_summary_item_width=function(){return this.get_summary_response().length>0?parseInt(100/this.get_summary_response().length)+"%":"100%"};rdx.summary_chart_detail_view.prototype.get_currently_selected_item=function(){return this._currently_selected_item};rdx.summary_chart_detail_view.prototype.set_currently_selected_item=function(a){this._currently_selected_item=a};rdx.summary_chart_detail_view.prototype.get_any_non_zero_item=function(){return this._any_non_zero_item};rdx.summary_chart_detail_view.prototype.set_any_non_zero_item=function(a){this._any_non_zero_item=a};rdx.summary_chart_detail_view.prototype.is_show_detail_view=function(){return this._show_detail_view};rdx.getting_started_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._base_view=a;this._DEFAULT_PROPERTIES={add_custom_brand:false,add_border:true,product_for_info:null,brand_info:null,brand_class_name:"",title:null,title_brand:null,add_getting_started_button:true,button_label:"rdx.get_started",short_desc:null,add_intro:true,detailed_desc:null,start_with_option:null,expand:false,title_height:null,section_height:null,aria_label:null,prerequisites_render_mode:"tile",prerequisites:null};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition);this._list=null};rdx.getting_started_view.prototype=new rdx.abstract_view();rdx.getting_started_view.prototype.make_view=function(){this._base_view.remove_decorator();var a=$("<div>").addClass("getting_started_view");var b=$("<div>").addClass("img_div");var d=$("<div>");if(this._properties.add_custom_brand===false){d.addClass("content_div")}this._add_content(d);a.append(b);a.append(d);this._parent.append(a);if(this._properties.react_component_render_callback){this._properties.react_component_render_callback.call_back([a,this._properties.react_component,this])}};rdx.getting_started_view.prototype._add_content=function(m){if(this._properties.add_intro===true){var p=$("<div>");if(rdx.utils.is_defined(this._properties.intro_class_name)){m.addClass(this._properties.intro_class_name)}if(this._properties.add_custom_brand===true){p.addClass("getting_started_intro_container");if(rdx.utils.is_defined(this._properties.aria_label)){var b=$("<table>").addClass("product_brand_container").addClass(this._properties.brand_class_name).attr("aria-label",this._properties.aria_label).append($("<tbody>"))}else{var b=$("<table>").addClass("product_brand_container").addClass(this._properties.brand_class_name).append($("<tbody>"))}if(this._properties.add_border===false){b.css({border:"none"});p.css({border:"none"})}var e=$("<tr>");b.append(e);var a=$("<td>");e.append(a);a.append($("<div>").addClass("product_container_text").append(this._properties.product_for_info));a.append($("<div>").addClass("brand_container_text").append(this._properties.brand_info));m.append(b);var n=$("<div>").addClass("title title_for_brand");var w=rdx.utils.is_defined(this._properties.custom_welcome_message)?this._properties.custom_welcome_message:"rdx.welcome";this._add_paragraph(n,rdx.i18n.get_string(w),"title_brand");p.append(n)}else{var A=$("<div>").addClass("welcome_info").append(rdx.i18n.get_string("rdx.welcome_to"));m.append(A);var n=$("<div>").addClass("title");this._add_paragraph(n,this._view_definition.title);this._add_paragraph(n,this._view_definition.title_brand,"title_brand");p.append(n)}var d=$("<div>").addClass("small_desc");this._add_paragraph(d,this._view_definition.short_desc);p.append(d);var C=$("<div>").addClass("large_desc");this._add_paragraph(C,this._view_definition.detailed_desc);p.append(C);if(!(rdx.utils.is_empty(this._view_definition.detailed_desc)&&rdx.utils.is_empty(this._view_definition.short_desc))){m.append(p)}}var o=null;if(rdx.utils.is_defined(this._properties.start_with_option)){var f=$("<div>").addClass("start_with_container");var s=$("<div>").addClass("small_desc").append(rdx.i18n.get_string(this._properties.start_with_option.content));var t=new rdx.form_field(this._properties.start_with_option.list_option);var q=$("<div>").addClass("ribbon");var v=$("<div>").addClass("ribbon_label_div ribbon_list_wrapper");this._list=new rdx.list(v,t);this._list.render();var h=$("<span>").addClass("ribbon_dropdown_list");this._list.add_event_handler(rdx.events.CHANGE,new rdx.callback(this,this._handle_list_click,[h]));v.append(h);q.append(v);f.append(s).append(q);m.append(f);var g=this;setTimeout(function(){g._list.select_item(0,true)},100);o=f}if(rdx.utils.is_defined(this._properties.prerequisites)){var z=this._add_checklist_content();o=z;m.append(z)}if(this._properties.add_getting_started_button===true){var B=$("<div>").addClass("image_container");var u={add_blue_button:true,blue_button_label:this._properties.button_label,blue_button_click_handler_callback:new rdx.callback(this,this._handle_get_started_click)};new rdx.button_bar(B,new rdx.form_field({properties:u})).render();if(rdx.utils.is_not_defined(o)){m.append(B)}else{o.append(B)}}};rdx.getting_started_view.prototype._handle_list_click=function(b,d){var a=this;setTimeout(function(){d.empty();d.append(a._list.get_data())},100)};rdx.getting_started_view.prototype._handle_get_started_click=function(){if(rdx.utils.is_defined(this._view_definition.click_handler_callback)){if(rdx.utils.is_defined(this._properties.start_with_option)){this._view_definition.click_handler_callback.call_back([this._base_view,this._list.get_data()])}else{this._view_definition.click_handler_callback.call_back([this._base_view])}}else{if(rdx.utils.is_defined(this._view_definition.on_click_view)){this._parent.empty();new rdx.base_view(this._parent,rdx.utils.get_view(this._view_definition.on_click_view)).prepare_view()}}};rdx.getting_started_view.prototype._add_paragraph=function(b,d,e){var a=$("<span>").append(rdx.i18n.get_string(d));if(rdx.utils.is_defined(e)){a.addClass(e)}b.append(a)};rdx.getting_started_view.prototype.get_resource_response_arrived=function(){};rdx.getting_started_view.prototype._add_prerequites=function(o,m){var a=$("<div>").addClass("checklist_title_container");var n=$("<div>").addClass("checklist_title_wrapper_container");var d=$("<div>").addClass("checklist_title_content");if(rdx.utils.is_defined(this._properties.title_height)){a.css("height",this._properties.title_height)}var b=$("<div>").addClass("checklist_title").append(rdx.i18n.get_string(o.title));var p=$("<div>").addClass("checklist_description").append(rdx.i18n.get_string(o.description));d.append(b);d.append(p);n.append(d);if(rdx.utils.is_defined(o.action_button)){var s=$("<div>").addClass("checklist_button_container");var g=o.action_button.click_handler_callback;o.action_button.blue_button_click_handler_callback=new rdx.callback(this,this._handle_prerequisite_button_click,[g]);var u=new rdx.form_field({properties:o.action_button});new rdx.button_bar(s,u).render();n.append(s)}a.append(n);var t=$("<div>").addClass("checklist_content");if(rdx.utils.is_defined(this._properties.section_height)){t.css("height",this._properties.section_height)}var w=$("<table>").attr("cellPadding",0).attr("cellSpacing",10);var f=null;if(rdx.utils.is_defined(o.renderer_callback)){f=$("<tr>");var h=$("<td>");h.append(o.renderer_callback.call_back([o]));f.append(h);w.append(f)}else{if(rdx.utils.is_defined(o.checklists)){for(i=0;i<o.checklists.length;i++){if((i%2==0&&this._properties.prerequisites_render_mode=="tile")||(this._properties.prerequisites_render_mode=="row")){f=$("<tr>");w.append(f)}var q=$("<td>").addClass("checklist_item");var v=$("<div>").addClass("checklist_item_title");var z=$("<ul>").addClass("checklist_items");if(o.expand==true){var e=$("<span>");if(o.checklists[i].expand==true){v.addClass("checklist_item_title_collapse");z.show()}else{v.addClass("checklist_item_title_expand");z.hide()}z.addClass("checklist_items_list_expand_collapse");v.append(e);v.bind(rdx.events.CLICK,{getting_started_view:this,container:z,title_container:v},function(A){if(A.data.title_container.hasClass("checklist_item_title_collapse")){A.data.title_container.removeClass("checklist_item_title_collapse");A.data.title_container.addClass("checklist_item_title_expand");A.data.container.hide()}else{A.data.title_container.removeClass("checklist_item_title_expand");A.data.title_container.addClass("checklist_item_title_collapse");A.data.container.show(200)}})}if(rdx.utils.is_defined(o.checklists[i].title)){v.append(rdx.i18n.get_string(o.checklists[i].title));q.append(v)}if(rdx.utils.is_defined(o.checklists[i].list)){this._append_checklist_items(o.checklists[i].list,z,true)}q.append(z);f.append(q)}}}t.append(w);m.append(a).append(t);return t};rdx.getting_started_view.prototype._handle_prerequisite_button_click=function(a,b){b.call_back([this._base_view,{}])};rdx.getting_started_view.prototype._add_checklist_content=function(){var e=$("<table>").addClass("checklist_main_container").attr("cellSpacing",0).attr("cellPadding",0).append($("<tbody>"));var d=$("<tr>");e.append(d);if(rdx.utils.is_array(this._view_definition.prerequisites)){e.addClass("checklist_main_table_container");for(var b=0;b<this._view_definition.prerequisites.length;b++){var a=$("<td>").attr("valign","top").attr("width",(""+parseInt(100/this._view_definition.prerequisites.length)+"%"));d.append(a);this._add_prerequites(this._view_definition.prerequisites[b],a)}}else{var a=$("<td>");d.append(a);this._add_prerequites(this._view_definition.prerequisites,a)}return e};rdx.getting_started_view.prototype._append_checklist_items=function(g,b,a){for(var f=0;f<g.length;f++){if(rdx.utils.is_string(g[f])){var e=$("<li />").append(g[f]);b.append(e)}else{var d=g[f]["bullet"];var e=$("<li />").append(d);b.append(e);var h=a==true?"circle":"disc";var m=$("<ul>").attr("type",h);b.append(m);this._append_checklist_items(g[f]["sublinks"],m,!a)}}};rdx.getting_started_view.prototype.is_title_required=function(){return true};rdx.feature_welcome_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._totalcount=0;this._carousel_item_index=0;this._carousel_items_list=[];this._rendered_view=null;this.carousel_properties=rdx.utils.is_defined(this._view_definition.carousel_properties)?this._view_definition.carousel_properties:null;this._DEFAULT_PROPERTIES={custom_view_toggle_handler:null,add_back_button:false,welcome_note:"rdx.welcome_to",class_names:null};this._properties=$.extend(true,{},this._DEFAULT_PROPERTIES,this._view_definition.view_properties)};rdx.feature_welcome_view.prototype=new rdx.abstract_view();rdx.feature_welcome_view.prototype.make_view=function(){if(rdx.utils.is_defined(this._properties.custom_view_toggle_handler)){var e=new rdx.callback_params({return_callback:new rdx.callback(this,this.toggle_view_on_resource_count,[true])});this._properties.custom_view_toggle_handler.call_back([e])}else{if(rdx.utils.is_defined(this._resource)){var b=null;rdx.model.get_count(this._resource,b,new rdx.callback(this,this.toggle_view_on_resource_count,[true]),this._parent,new rdx.callback(this,this.toggle_view_on_resource_count,[false]))}else{this._base_view.remove_decorator();var a=$("<div>").addClass("feature_welcome_view");if(rdx.utils.is_defined(this._properties.class_names)){a.addClass(this._properties.class_names)}var d=$("<div>").addClass("content_div");if(rdx.utils.is_defined(this._view_definition.view_properties.addpadding)&&this._view_definition.view_properties.addpadding==true){a.addClass("feature_welcome_padding")}this._add_content(d);a.append(d);this._parent.append(a)}}};rdx.feature_welcome_view.prototype._add_content=function(a){var b=$("<div>").addClass("welcome_info").append(rdx.i18n.get_string(this._properties.welcome_note));a.append(b);var g=$("<div>").addClass("title");this._add_paragraph(g,this._view_definition.title);a.append(g);var n=$("<div>").addClass("large_desc");this._add_paragraph(n,this._view_definition.description);a.append(n);for(var h=0;h<this._view_definition.body.length;h++){var p=$("<div>").addClass("small_desc");this._add_paragraph(p,this._view_definition.body[h]["subtitle"]);a.append(p);var o=$("<div>").addClass("large_desc");this._add_paragraph(o,this._view_definition.body[h]["description"]);a.append(o)}if(rdx.utils.is_defined(this.carousel_properties)){this._render_carousel(a)}this._buttons_container=$("<div>").addClass("button_container").appendTo(a);if(this._properties.add_back_button){var m=$("<button>").addClass("rdx_button rdx_grey_button").append($("<span>").append("Back"));m.attr("aria-label","Back");m.bind(rdx.events.CLICK,{view_dfn:this._view_definition,base_view:this._base_view},function(s){var q=s.data.view_dfn;if(rdx.utils.is_defined(q.view_properties.back_handler_callback)){q.view_properties.click_handler_callback.call_back([s.data.base_view])}else{if(rdx.utils.is_defined(q.view_properties.back_click_view)){s.data.base_view.destroy_view(null,false);new rdx.base_view(s.data.base_view.get_parent(),rdx.utils.get_view(q.view_properties.back_click_view)).prepare_view()}}});this._buttons_container.append(m)}this._getting_started_button=$("<button>").addClass("rdx_button rdx_blue_button").append($("<span>").append(rdx.i18n.get_string(this._view_definition.view_properties.button_label)));this._getting_started_button.attr("aria-label",rdx.i18n.get_string(this._view_definition.view_properties.button_label));this._getting_started_button.bind(rdx.events.CLICK,{view_dfn:this._view_definition,base_view:this._base_view},function(s){var q=s.data.view_dfn;if(rdx.utils.is_defined(q.view_properties.click_handler_callback)){q.view_properties.click_handler_callback.call_back([s.data.base_view])}else{if(rdx.utils.is_defined(q.view_properties.on_click_view)){new rdx.base_view(s.data.base_view.get_parent(),rdx.utils.get_view(q.view_properties.on_click_view)).prepare_view()}}});this._buttons_container.append(this._getting_started_button);if(rdx.utils.is_defined(this._view_definition.view_properties.nowelcome)&&this._view_definition.view_properties.nowelcome==true){b.hide();g.hide();this._getting_started_button.hide()}if(rdx.utils.is_defined(this._view_definition.resource_operations)){var d=this._view_definition.resource_operations;for(var f in d){var e=$("<button>").addClass("rdx_button rdx_grey_button").appendTo(this._buttons_container).text(rdx.i18n.get_string(d[f]["name"]));e.css("float","right");e.bind(rdx.events.CLICK,{item:d[f],base_view:this._base_view},function(u){var t=u.data.item;var q=rdx.views[t.view_name];var s=rdx.page.get_content();if(t.add_to_bread_crumb===true){s=u.data.base_view.get_parent();s.empty();q.add_to_bread_crumb=true}new rdx.base_view(s,q).prepare_view()})}}};rdx.feature_welcome_view.prototype._add_paragraph=function(b,d,e){if(rdx.utils.is_function(d)){var a=$("<span>").append(d()).addClass("content")}else{var a=$("<span>").append(rdx.i18n.get_string(d)).addClass("content")}if(rdx.utils.is_defined(e)){a.addClass(e)}b.append(a)};rdx.feature_welcome_view.prototype.get_resource_response_arrived=function(){};rdx.feature_welcome_view.prototype.destroy_view=function(){if(this._rendered_view){this._rendered_view.destroy_view()}};rdx.feature_welcome_view.prototype.toggle_view_on_resource_count=function(d,g){var b=this;if(!g){this._totalcount=0}else{this._totalcount=d}if(this._totalcount>0&&rdx.utils.is_defined(this._view_definition.view_properties.detail_view)){if(this._base_view._view_state==rdx.view_constants.view_state.DESTROYED){return}this._base_view.destroy_view(null,false);this._rendered_view=new rdx.base_view(this._base_view.get_parent(),rdx.utils.get_view(this._view_definition.view_properties.detail_view));this._rendered_view.prepare_view()}else{this._base_view.remove_decorator();var a=$("<div>").addClass("feature_welcome_view");if(rdx.utils.is_defined(this._properties.class_names)){a.addClass(this._properties.class_names)}var e=$("<div>").addClass("content_div");this._add_content(e);a.append(e);this._parent.append(a)}if(this._totalcount>0&&rdx.utils.is_defined(this._properties.show_full_page_view)){var f=$("<button>").addClass("rdx_button rdx_blue_button").text(rdx.i18n.get_string(this._properties.full_page_button_text)).prependTo(this._buttons_container);this._getting_started_button.removeClass("rdx_blue_button").addClass("secondary_button");f.bind(rdx.events.CLICK,{},function(h){new rdx.base_view(rdx.page.get_content(),rdx.utils.get_view(b._properties.show_full_page_view)).prepare_view()})}};rdx.feature_welcome_view.prototype._render_carousel=function(b){var d=this.carousel_properties.carousel_items;var o=rdx.i18n.get_string(this.carousel_properties.title);var f=$("<div>").addClass("carousel_ct");f.append($("<h3>").addClass("carousel_title").append(o));var h=$("<div>").addClass("carousel_body").appendTo(f);var e=$("<div>").addClass("carousel_prev").appendTo(h);var g=$("<div>").addClass("carousel_next").appendTo(h);var n=$("<div>").addClass("carousel_items_wrapper").appendTo(h);var p=$("<div>").addClass("carousel_item_ct").appendTo(n);var a=this.carousel_properties.interval?this.carousel_properties.interval:2000;$.each(d,function(t,z){var s=z.image_class_name;var v=z.image_description;var A=rdx.i18n.get_string(v.title);var w=rdx.i18n.get_string(v.description);var q=$("<div>").attr("slide_index",t);q.append($("<div>").addClass(s));var u=$("<div>").addClass("image_dsc_container").appendTo(q);u.append($("<h3>").addClass("image_dsc_title").append(A));u.append($("<p>").append(w));this._carousel_items_list.push(q)}.bind(this));b.append(f);this.carousel_items_length=this._carousel_items_list.length;p.append(this._carousel_items_list[0][0]);var m=this;g.bind(rdx.events.CLICK,{carousel_item_ct:p,slide_length:d.length,feature_welcome_view:this,slide_delay:a,carousel_items_list:this._carousel_items_list},function(q){m.rotate_carousel(q,true)});e.bind(rdx.events.CLICK,{carousel_item_ct:p,slide_length:d.length,feature_welcome_view:this,slide_delay:a,carousel_items_list:this._carousel_items_list},function(q){m.rotate_carousel(q,false)});h.bind(rdx.events.MOUSE_OVER,{carousel_next:g},function(q){clearInterval(m.carousel_rotation_interval);m.carousel_rotation_interval=null});h.bind(rdx.events.MOUSE_OUT,{carousel_next:g},function(q){if(rdx.utils.is_not_defined(m.carousel_rotation_interval)){m.carousel_rotation_interval=setInterval(function(){g.trigger(rdx.events.CLICK,[true])},a)}})};rdx.feature_welcome_view.prototype.rotate_carousel=function(d,b){var a=d.data.carousel_item_ct;carousel_items=$.map(d.data.carousel_items_list,function(f,e){return d.data.carousel_items_list[e][0]});if(b){a.empty();this._carousel_item_index++;if(this._carousel_item_index>this.carousel_items_length-1){this._carousel_item_index=0}a.append(carousel_items[this._carousel_item_index])}else{a.empty();this._carousel_item_index--;if(this._carousel_item_index<0){this._carousel_item_index=this.carousel_items_length-1}a.append(carousel_items[this._carousel_item_index])}};rdx.feature_welcome_view.prototype.refresh_view=function(b,a){this._parent.empty();this.make_view()};rdx.op_wizard_view=function(d,b,e,a){this._parent=d;this._base_view=a;if(rdx.utils.is_not_defined(b.view_properties)){b.view_properties={}}this._DEFAULT_PROPERTIES={title:null,finish_handler_callback:null,finish_view:null,cancel_handler_callback:null,cancel_view:null,submit_operation:{model_method:rdx.model_constants.ADD},cancel_prompt:"rdx.op_wizard_cancel_prompt",introduction_message_renderer_callback:null,done_button_label:"rdx.op_wizard_done_button",custom_class_names:null,done_button_toltip:"rdx.op_wizard_done_button_tooltip",help_id:null,show_back_button:true,show_flow:false,destroy_subsequent_views:true,render_subsequest_view:true,render_view_on_edit:false,show_finish_button:true,advance_settings_title:rdx.i18n.get_string("rdx.advanced")};this._view_definition=b;this._view_properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._pages_div=null;this._pages_div_info=new Array();this._pages_info=new Array();this._page_navigation=null;this._wizard_save_complete=false;this._page_failed_index=-1;this._introduction_message_container=null;this._current_page_index=-1;this._advanced_section_map={};this._flow_container=null;this._current_flow_section_container=null;this._advanced_section_container=null;this._advanced_sections_containers=null;this._main_page_resource_data=null;this._scroll_function=null;this._right_section=null;this._total_advanced_section_calls=0;this._is_advanced_section_evaluated=false;this._pages_info_is_defined=false;this.is_back_button_required=true;this._title_div=null;this._set_formatted_response=null;this._is_initialized=false};rdx.op_wizard_view.prototype=new rdx.abstract_view();rdx.op_wizard_view.prototype.make_view=function(){this._base_view.remove_decorator();this._container=$("<table>").addClass("op_wizard").attr("cellpadding",0).attr("cellspacing",0).attr("role","presentation").append($("<tbody>"));if(rdx.utils.is_defined(this._view_properties.custom_class_names)){this._container.addClass(this._view_properties.custom_class_names)}if(rdx.utils.is_defined(this._view_properties.introduction_message_renderer_callback)){var e=$("<tr>");this._container.append(e);var o=$("<td>");e.append(o);this._introduction_message_container=$("<div>").addClass("op_wizard_introduction_message");this._introduction_message_container.append(this._view_properties.introduction_message_renderer_callback.call_back());o.append(this._introduction_message_container)}this._container_row=$("<tr>");this._container.append(this._container_row);this._wizard_container=$("<td>").addClass("op_wizard_left_container");this._container_row.append(this._wizard_container);this._parent.append(this._container);this._pages_div=$("<div>").attr("id","pages_div").addClass("op_wizard_pages");this._wizard_container.append(this._pages_div);this._page_navigation=new rdx.op_wizard_page_navigation(this);var u=$("<td>").addClass("op_wizard_right_container");this._right_section=$("<div>").addClass("op_wizard_right_section");u.append(this._right_section);if(this._view_properties.show_flow==true){this._flow_container=$("<div>").addClass("op_flow_settings_container");var f=$("<div>").addClass("op_flow_settings_header rdx_border rdx_background smooth_all_corner");f.append(rdx.i18n.get_string("rdx.basic_settings"));this._flow_container.append(f);this._sections_container=$("<div>").addClass("op_sections_container");this._flow_container.append(this._sections_container);this._right_section.append(this._flow_container);if(rdx.utils.is_not_defined(this._view_properties.help_id)){this._container_row.append(u.append(this._right_section))}}var h=rdx.view_utils.get_model_method(this._view_definition);this._is_initialized=h!=rdx.model_constants.SET?true:false;var t=0;if(rdx.utils.is_defined(this._view_definition.pages)){this._fill_page_info(this._view_definition.pages,0,false);t=this._view_definition.pages.length}if(rdx.utils.is_defined(this._view_definition.optional_pages)){this._fill_page_info(this._view_definition.optional_pages,t,true)}if(h==rdx.model_constants.ADD){var a=this._base_view.get_view_context();var p={};if(a.is_data_set()){p=a.get_data()}this._page_navigation.navigate_to_page(new rdx.model_executor_service_result({}),p,true,true,false,0,true)}var q=this;this._isScrolledIntoView=function(z){var B=$(window).scrollTop();var A=B+$(window).height();var v=$(z).offset().top;var w=v+$(z).height();return((w>=B)&&(v<=A)&&(w<=A)&&(v>=B)||(w<$(window).height())&&(w-v)<(A-B))};this._scroll_function=function(v){var E=rdx.page.get_header_height();var C=$(document).scrollTop();var z=E-C;var D=C>=0?0:20;if(rdx.utils.is_not_defined(q._view_properties.help_id)){D=D-15}var w=q._right_section.height();var F=q._pages_div.height();var A=q._pages_div.offset().top;var B="0px";if(rdx.utils.is_defined(q._title_div)){var B=q._title_div.outerHeight(true);D="0px"}if(z>=0||(F<w)||((C+10)<=A)){q._right_section.css("position","relative");q._right_section.css("margin-top",B)}else{if(q._isScrolledIntoView(q._right_section)){q._right_section.css("position","fixed");q._right_section.css("margin-top","10px")}}q._right_section.css("top",D)};if(rdx.utils.is_not_defined(this._base_view.get_crumb_handler())){$(window).bind(rdx.events.SCROLL,this._scroll_function);rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this._scroll_function));this._scroll_function()}else{this._right_section.css("position","relative");this._right_section.css("margin-top","0px")}if(rdx.utils.is_defined(this._view_properties.help_id)){var d=$("<div>").addClass("op_wizard_help_container op_wizard_page_border rdx_border rdx_background smooth_all_corner").append($("<span>").append($("<a>").attr("href","#").append(rdx.i18n.get_string("rdx.help"))));this._container_row.append(u.append(this._right_section.append(d)));d.bind(rdx.events.CLICK,{help_id:this._view_properties.help_id},function(z){var v=z.data.help_id;var w=new rdx.link({url:rdx.help.get_help_url(v),target_window:"RDXHELP",width:800,height:500});w.fire()})}if(rdx.utils.is_defined(this._view_definition.advanced_pages)){this._advanced_section_container=$("<div>");this._advanced_section_container.hide();this._advanced_title_container=$("<div>").addClass("op_wizard_advanced_section op_wizard_page_border rdx_border rdx_background ").append($("<span>").append(this._view_properties.advance_settings_title));this._advanced_section_container.append(this._advanced_title_container);this._right_section.append(this._advanced_section_container);this._advanced_sections_containers=$("<div>");this._advanced_section_container.append(this._advanced_sections_containers);this._total_advanced_section_calls=this._view_definition.advanced_pages.length;for(var g=0;g<this._view_definition.advanced_pages.length;g++){var n=this._view_definition.advanced_pages[g];var s=$("<a>").attr("href","#").append($("<span>").addClass("op_adv_text_container").append(rdx.i18n.get_string(n.title)));var b=$("<div>").addClass("op_wizard_adv_view_container");b.append(s);this._advanced_sections_containers.append(b);this._advanced_section_map[n.view]={page_obj:n,view_name:n.view,summary_view_name:n.summary_view,container:b,index:g,hide_section:false};b.bind(rdx.events.CLICK,{view_name:n.view,callback:new rdx.callback(this,this._handle_add_advanced_page)},function(v){var w=$(v.target.parentElement).closest(".op_wizard");if(rdx.utils.is_defined(rdx.app_search)&&($(v.target.parentElement).hasClass("op_wizard_disabled_advanced_section")||$(v.target.parentElement.parentElement).hasClass("op_wizard_disabled_advanced_section"))){return}v.data.callback.call_back([v.data.view_name,false,true]);setTimeout(function(){$("#adv_index0 .op_wizard_cross_link",w).focus()},500)})}if(rdx.utils.is_not_defined(this._view_properties.help_id)){this._container_row.append(u);this._advanced_sections_containers.hide();this._advanced_title_container.addClass("op_wizard_disabled_advanced_section")}else{if(rdx.utils.is_not_defined(rdx.app_search)||(rdx.utils.is_defined(rdx.app_search)&&rdx.app_search.current_state==rdx.app_search.states.IDLE)){this._advanced_section_container.hide()}else{var m=$(".op_wizard_adv_view_container");m.addClass("op_wizard_disabled_advanced_section")}}}this._resize()};rdx.op_wizard_view.prototype._handle_add_advanced_page=function(g,p,s){var f=this._advanced_section_map[g];f.container.hide();var d="adv_index";if(p){d="summ"+d}var m=$("<div>");if(rdx.utils.is_defined(f.parent_page_div)){m=f.parent_page_div}var t=d+f.index;var n=$("<div>").attr("id",t);m.append(n);if(p===true){n.addClass("view_no_decorator");g=f.summary_view_name}var b=$.extend(true,{},rdx.utils.get_view(g));if(rdx.utils.is_defined(b.view_properties)&&p===false&&rdx.utils.is_defined(b.view_properties.edit_click_params)&&rdx.utils.is_not_defined(s)){var o=b.view_properties.submit_operation;if(rdx.utils.is_defined(b.view_properties.edit_click_params.method)){if(rdx.utils.is_not_defined(o)){o={method:b.view_properties.edit_click_params.method}}else{o.method=b.view_properties.edit_click_params.method}}if(rdx.utils.is_defined(b.view_properties.edit_click_params.edit_view_name)){b=$.extend(true,{},rdx.utils.get_view(b.view_properties.edit_click_params.edit_view_name))}b.view_properties.submit_operation=o}b.__add_remove_link=true;b.__change_link_handler_callback=new rdx.callback(this,this._handle_view_toggle,[{},n,m,false,f.view_name,true]);var q=new rdx.base_view(n,b);var h=this._main_page_resource_data;var e=b.resource_name;if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(h[e])){h=h[e]}var a=q.get_view_context();a.set_url_params({is_data_set:true},h);q.set_crumb_handler(this._base_view.get_crumb_handler());if(rdx.utils.is_function(q.get_view().set_parent_view)){q.get_view().set_parent_view(rdx.view_constants.ONE_PAGE_WIZARD_VIEW)}q.prepare_view();if(rdx.utils.is_not_defined(f.parent_page_div)){this._pages_div.append(m);f.parent_page_div=m}$(q).bind(rdx.events.VIEW_DESTROYED,{op_wizard_view:this,page_div:n,page_parent_div:m,view_name:f.view_name,load_summary_view:p},function(v,u){v.data.op_wizard_view._handle_view_toggle(u,v.data.page_div,v.data.page_parent_div,v.data.load_summary_view,v.data.view_name,false)});if(rdx.utils.is_defined(s)&&s===true){this._scroll_to_the_end(t)}f.hide_section=true;this._handle_show_hide_advanced_panel()};rdx.op_wizard_view.prototype._scroll_to_the_end=function(a){var b=(rdx.utils.is_defined(this._base_view.get_crumb_handler()))?rdx.page.show_slider():$("html,body");var d=$("#"+a).get(0);$(b).animate({scrollTop:$(d).offset().top-[40]},500)};rdx.op_wizard_view.prototype._handle_show_hide_advanced_panel=function(){var a=true;for(var d=0;d<this._view_definition.advanced_pages.length;d++){var b=this._view_definition.advanced_pages[d];if(this._advanced_section_map[b.view]["hide_section"]==false){a=false;break}}if(a==false){this._advanced_title_container.show()}else{this._advanced_title_container.hide()}};rdx.op_wizard_view.prototype._handle_view_toggle=function(d,a,f,b,e,g){if(b==true||(rdx.utils.is_defined(d)&&rdx.utils.is_defined(d.view_destroyed_on_click))){if(rdx.utils.is_not_defined(this._view_properties.help_id)){this._advanced_title_container.removeClass("op_wizard_disabled_advanced_section")}this._advanced_section_map[e]["container"].show();delete this._advanced_section_map[e]["parent_page_div"];this._advanced_section_map[e]["hide_section"]=false;this._handle_show_hide_advanced_panel()}else{b=(g==true)?false:true;this._handle_add_advanced_page(e,b)}a.remove()};rdx.op_wizard_view.prototype._fill_page_info=function(o,n,u){for(var g=0;g<o.length;g++){var e=rdx.utils.get_view(o[g].view);var s=$("<div>").attr("id","index"+n).hide();var a=null;if(rdx.utils.is_defined(o[g].summary_view)){a=(o[g].summary_view=="NONE")?"NONE":rdx.utils.get_view(o[g].summary_view)}var v={};var w={wizard_view:this,view_dfn:e,summary_view_dfn:a,dom_object:s,base_view:null,resource_for_operation:null,exec_service_result:null,page_navigate_callback:o[g].page_navigate_callback,optional:u,flow_section_obj:v};if(this._pages_info_is_defined==false){this._pages_info[n]=new rdx.op_wizard_pages_info(w)}this._pages_div.append(s);this._pages_div_info[n]=s;this._page_navigation.register_wizard_events(s,n);n++;if(u!=true&&this._view_properties.show_flow==true){var d=o[g]["flow_properties"];if(rdx.utils.is_defined(d)){var b=g+1;var t=$("<div>");var f=(g===0)?"rdx_down_flow_padding":"rdx_down_flow_arrow";t.addClass(f);var q=$("<div>").addClass("op_flow_section_container rdx_border smooth_all_corner");var p=$("<span>").addClass("op_flow_num_container").append(b);q.append(p);var z=rdx.utils.is_defined(e.view_properties)&&rdx.utils.is_defined(e.view_properties.title)?rdx.i18n.get_string(e.view_properties.title):"";var m=$("<span>").addClass("op_flow_sec_title_contaner").addClass(d.image_class_name).append(z);q.append(m);var h=$("<span>").addClass("rdx_green_tick_background op_flow_state_container");h.hide();q.append(h);v.arrow_container=t;v.section_container=q;v.state_container=h;this._sections_container.append(t).append(q)}}}};rdx.op_wizard_view.prototype.update_pages_info=function(h,f){var m=[];var n=[];f=f+1;for(var d=0;d<h.length;d++){var b=rdx.utils.get_view(h[d].view);var g=$("<div>").attr("id","index"+d).hide();var e=null;if(rdx.utils.is_defined(h[d].summary_view)){e=(h[d].summary_view=="NONE")?"NONE":rdx.utils.get_view(h[d].summary_view)}var a={wizard_view:this,view_dfn:b,summary_view_dfn:e,dom_object:g,base_view:null,resource_for_operation:null,exec_service_result:null,page_navigate_callback:h[d].page_navigate_callback,optional:false};m.push(new rdx.op_wizard_pages_info(a));this._pages_div.append(g);n.push(g);this._page_navigation.register_wizard_events(g,(d+f))}this._pages_info=rdx.utils.merge_array_at_index(this._pages_info,m,f);this._pages_div_info=rdx.utils.merge_array_at_index(this._pages_div_info,n,f)};rdx.op_wizard_view.prototype.get_view_properties=function(){return this._view_properties};rdx.op_wizard_view.prototype.get_resource_response_arrived=function(d){var a=rdx.utils.get_formatted_response(d);var b=rdx.view_utils.get_model_method(this._view_definition);var f=0;if(b==rdx.model_constants.SET){if(this._view_properties.show_flow!=true){if(rdx.utils.is_defined(this._view_definition.pages)){for(var e=0;e<this._view_definition.pages.length;e++){this._page_navigation.navigate_to_page(new rdx.model_executor_service_result({}),a,false,true,false,e,null,false)}f=this._view_definition.pages.length}this._finalize_set_flow_load(a)}else{this._set_formatted_response=a;var e=0;this._page_navigation.navigate_to_page(new rdx.model_executor_service_result({}),a,false,true,false,e,null,false)}}};rdx.op_wizard_view.prototype._render_next_page=function(a){this._page_navigation.navigate_to_page(new rdx.model_executor_service_result({}),this._set_formatted_response,false,true,false,a,null,false);if(a+1>=this._view_definition.pages.length){this._finalize_set_flow_load(this._set_formatted_response)}};rdx.op_wizard_view.prototype._finalize_set_flow_load=function(a){if(rdx.utils.is_defined(this._view_definition.optional_pages)){for(var b=pages_length;b<this._view_definition.optional_pages.length;b++){this._page_navigation.navigate_to_page(new rdx.model_executor_service_result({}),a,false,true,false,b,false)}}this._is_initialized=true};rdx.op_wizard_view.prototype.destroy_view=function(){for(var b=0;b<this._pages_div_info.length;b++){this._page_navigation.unregister_wizard_events(this._pages_div_info[b]);var a=this._pages_info[b].get_base_view();if(rdx.utils.is_defined(a)){a.destroy_view();this._pages_info[b].set_base_view(null);this._pages_info[b].set_resource_for_operation(null);this._pages_info[b].set_exec_service_result(null)}}if(rdx.utils.is_defined(this._scroll_function)&&rdx.utils.is_not_defined(this._base_view.get_crumb_handler())){$(window).unbind("scroll",this._scroll_function)}this._wizard_container.remove()};rdx.op_wizard_view.prototype._resize=function(){};rdx.op_wizard_view.prototype.get_pages_info=function(){return this._pages_info};rdx.op_wizard_view.prototype.get_pages_div_info=function(){return this._pages_div_info};rdx.op_wizard_view.prototype.create_wizard_summary_page_view=function(g,d,h,f){if(g==0){this._main_page_resource_data=d}var m=this._pages_info[g];if(rdx.utils.is_not_defined(m.get_summary_view_dfn())){return}var n=m.get_base_view();if(rdx.utils.is_defined(n)){n.destroy_view();this._pages_div_info[g].hide()}var a=m.get_summary_view_dfn();if(a=="NONE"){return}this._update_resp_callback(a,g,false);if(m.is_page_optional()&&rdx.utils.is_not_defined(this._view_definition.pages)){a=$.extend(true,{},a);a.view_properties.__index=g+1}n=new rdx.base_view(this._pages_div_info[g],a);n.set_crumb_handler(this._base_view.get_crumb_handler());n.remove_decorator();view_context=n.get_view_context();var e=d;var b=a.resource_name;if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(d[b])){e=d[b]}view_context.set_url_params({is_data_set:true},e);if(rdx.utils.is_function(n.get_view().set_parent_view)){n.get_view().set_parent_view(rdx.view_constants.ONE_PAGE_WIZARD_VIEW)}n.prepare_view();this._pages_div_info[g].show();m.set_base_view(n);m.set_exec_service_result(h);m.set_resource_for_operation(d);if(this._view_properties.show_flow==true){if(rdx.utils.is_defined(this._current_flow_section_container)){this._current_flow_section_container.removeClass("op_flow_section_selected")}m.get_flow_state_container().show()}};rdx.op_wizard_view.prototype._get_button=function(a,d){var b=$(document.createElement("input"));b.attr("type","button");b.attr("value",rdx.i18n.get_string(a));b.attr("title",rdx.i18n.get_string(d));return b};rdx.op_wizard_view.prototype.show_final_information=function(d){if(rdx.utils.is_defined(this._view_properties.final_view)){var f=$("<div>").addClass("final_info_div");var g=rdx.utils.get_view(this._view_properties.final_view);var a=new rdx.base_view(f,g);var e=d;var b=a.get_view_context();b.set_url_params({is_data_set:true},e);a.set_crumb_handler(this._base_view.get_crumb_handler());this._pages_div.append(f);a.prepare_view()}};rdx.op_wizard_view.prototype._show_advanced_options=function(){if(rdx.utils.is_not_defined(this._advanced_section_container)){return}if(this._is_advanced_section_evaluated==true){return}var b=rdx.mask.get_id();if(rdx.utils.is_object_not_empty(this._advanced_section_map)){rdx.mask.mask_component(this._advanced_sections_containers,b)}for(var d in this._advanced_section_map){var a=this._advanced_section_map[d]["page_obj"];this._advanced_section_map[d]["mask_id"]=b;if(rdx.utils.is_defined(a.show_hide_handler_callback)){var e={return_callback:new rdx.callback(this,this._show_hide_advanced_option,[d]),resource_data:this._main_page_resource_data};a.show_hide_handler_callback.call_back([e])}else{this._show_hide_advanced_option(false,false,d)}}this._is_advanced_section_evaluated=true;if(rdx.utils.is_not_defined(this._view_properties.help_id)){this._advanced_title_container.removeClass("op_wizard_disabled_advanced_section");if(rdx.utils.is_object_not_empty(this._advanced_section_map)){this._advanced_sections_containers.show()}else{this._advanced_sections_containers.hide()}}};rdx.op_wizard_view.prototype._check_and_unmask_advanced_section=function(a){this._total_advanced_section_calls=this._total_advanced_section_calls-1;if(this._total_advanced_section_calls<=0){rdx.mask.unmask_component(this._advanced_sections_containers,a);this.handle_unmask();this._advanced_section_container.show()}};rdx.op_wizard_view.prototype._show_hide_advanced_option=function(a,d,b){this._check_and_unmask_advanced_section(this._advanced_section_map[b]["mask_id"]);if(a==true){this._advanced_section_map[b]["container"].hide();if(d==true){this._handle_add_advanced_page(b,true)}else{this._advanced_section_map[b]["hide_section"]=true;this._handle_show_hide_advanced_panel()}}};rdx.op_wizard_view.prototype.render_last_page=function(d,f,b){if(d>=this._pages_info.length||(d==this._pages_info.length-1&&this._pages_info[d].is_skip_page()==true)){if(rdx.utils.is_defined(this._pages_info[d-1].get_summary_view_dfn())){if(this._view_properties.show_finish_button===true){var g=this._get_button(this._view_properties.done_button_label,this._view_properties.done_button_tooltip);g.addClass("finish_button rdx_button rdx_blue_button");g.bind(rdx.events.CLICK,{op_wizard_page:this,parent:this._parent},function(h){h.data.op_wizard_page.finish_view_operation()})}this._wizard_container.append(g);for(var e=0;e<this._pages_info.length;e++){var a=this._pages_info[e];if(a.is_page_optional()){continue}a.set_is_edit_clicked(true)}if(rdx.utils.is_defined(this._view_properties)&&rdx.utils.is_defined(this._view_properties.notification_status)){this._base_view.show_notification_bar(this._get_data_from_all_views_for_finish_callback())}if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().op_wizard_view_buttons[rdx.i18n.get_string(this._view_properties.done_button_label)]=g}}if(this._view_properties.show_flow==true){this._current_flow_section_container=null}if(rdx.utils.is_defined(this._advanced_section_container)&&!this._is_advanced_section_evaluated){this.handle_mask()}this._show_advanced_options();this.show_final_information(b);return}};rdx.op_wizard_view.prototype.create_wizard_page_view=function(p,g,s,h){if(rdx.utils.is_defined(this._introduction_message_container)&&p>0){this._introduction_message_container.empty();var n=this._view_properties.introduction_message_renderer_callback.call_back([{index:p,resource_data:g}]);if(rdx.utils.is_defined(n)){this._introduction_message_container.append(n)}}if(p>=this._pages_info.length||(p==this._pages_info.length-1&&this._pages_info[p].is_skip_page()==true)){this.render_last_page(p,s);return}var u=this._pages_info[p];var v=u.get_base_view();if(rdx.utils.is_defined(v)){v.destroy_view();this._pages_div_info[p].hide();if(this._view_properties.render_view_on_edit==true&&p==0){this._container.remove();this._is_advanced_section_evaluated=false;this._pages_info_is_defined=true;this.make_view()}}var b=u.get_view_dfn();b=$.extend(true,{},b);if(u.is_page_optional()){b.view_properties.__optional=true;if(rdx.utils.is_not_defined(this._view_definition.pages)){b.view_properties.__index=p+1}}if(rdx.utils.is_not_defined(s)||s==false){if(!u.is_page_optional()&&u.is_edit_clicked()==true){s=true}u.set_is_edit_clicked(false)}else{if(s==true&&this._current_page_index!=-1){for(var e=p+1;e<this._current_page_index;e++){var f=this._pages_info[e];if(f.is_page_optional()){continue}f.set_is_edit_clicked(true)}}}if(rdx.utils.is_defined(b.view_properties)&&s&&rdx.utils.is_defined(b.view_properties.edit_click_params)){var q=b.view_properties.submit_operation;if(rdx.utils.is_defined(b.view_properties.edit_click_params.method)){if(rdx.utils.is_not_defined(q)){q={method:b.view_properties.edit_click_params.method}}else{q.method=b.view_properties.edit_click_params.method}}if(rdx.utils.is_defined(b.view_properties.edit_click_params.edit_view_name)){b=$.extend(true,{},rdx.utils.get_view(b.view_properties.edit_click_params.edit_view_name))}b.view_properties.submit_operation=q}this._update_resp_callback(b,p,true);var m=rdx.utils.is_defined(g)?g:{};if(p==(this._pages_info.length-1)&&rdx.utils.is_not_defined(u.get_summary_view_dfn())){var t={add_continue_button:false,add_done_button:true};b.view_properties=$.extend({},t,b.view_properties)}this._pages_div_info[p].show();v=new rdx.base_view(this._pages_div_info[p],b);var d=b.resource_name;if(rdx.utils.is_defined(d)&&rdx.utils.is_defined(m[d])){m=m[d]}if(rdx.utils.is_function(v.get_view().set_parent_view)){v.get_view().set_parent_view(rdx.view_constants.ONE_PAGE_WIZARD_VIEW)}var a=v.get_view_context();var o={};if(rdx.utils.is_defined(h)&&rdx.utils.is_object_not_empty(h)){o=$.extend(true,{},h,{is_data_set:true})}else{o={is_data_set:true}}a.set_url_params(o,m);u.set_wizard_page(v.get_view());u.set_base_view(v);u.set_view_dfn(b);v.set_crumb_handler(this._base_view.get_crumb_handler());v.prepare_view();if(s&&this._pages_info[p].is_page_optional()){$(v.get_view()).trigger(rdx.events.PAGE_EXPAND)}if(this._view_properties.show_flow==true){u.get_flow_section_container().addClass("op_flow_section_selected");if(rdx.utils.is_defined(this._current_flow_section_container)){this._current_flow_section_container.removeClass("op_flow_section_selected")}this._current_flow_section_container=u.get_flow_section_container()}this._current_page_index=p};rdx.op_wizard_view.prototype.destroy_all_subsequent_views=function(b){if(this._view_properties.destroy_subsequent_views===false){return}if(!this._pages_info[b].is_page_optional()){for(var d=b+1;d<this._pages_info.length;d++){var a=this._pages_info[d].get_base_view();if(rdx.utils.is_defined(a)){a.destroy_view();this._pages_info[d].set_base_view(null);this._pages_info[d].set_resource_for_operation(null);this._pages_info[d].set_exec_service_result(null);this._pages_div_info[d].hide()}}var e=this._wizard_container.find("input.finish_button");if(rdx.utils.is_defined(e)){e.hide()}}};rdx.op_wizard_view.prototype._get_data_from_all_views_for_finish_callback=function(){var a=[];for(var d=0;d<this._pages_info.length;d++){var f=this._pages_info[d].get_wizard_page();if(rdx.utils.is_defined(f)&&rdx.utils.is_function(f.get_callback_data)){var e=f.get_callback_data();if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.resource_for_operation)&&rdx.utils.is_defined(e.model_executor_service_result)){if(rdx.utils.is_not_defined(e.model_executor_service_result.get_collated_resource()[0])){a.push(e);continue}var g=e.model_executor_service_result.get_collated_resource()[0].name;if(rdx.utils.is_object_not_empty(e.resource_for_operation)&&rdx.utils.is_defined(e.resource_for_operation[g])){for(var b in e.resource_for_operation[g]){if(e.resource_for_operation[g][b] instanceof rdx.view_component_adapter_data){e.resource_for_operation[g][b]=e.resource_for_operation[g][b].get_view().get_view_context().get_data(1)}}}}a.push(e)}}return a};rdx.op_wizard_view.prototype.finish_view_operation=function(){var b=this._get_data_from_all_views_for_finish_callback();if(rdx.utils.is_defined(this._view_properties.finish_handler_callback)){if(this._view_properties.finish_handler_callback.call_back([b])!==false){this._destroy_all_inner_views();this._base_view.destroy_view({},false)}return}this._destroy_all_inner_views();this._base_view.destroy_view({},false);if(rdx.utils.is_defined(this._view_properties.finish_view)){var a=rdx.utils.get_view(this._view_properties.finish_view);this._base_view.get_parent().empty();new rdx.base_view(this._base_view.get_parent(),a).prepare_view()}};rdx.op_wizard_view.prototype._destroy_all_inner_views=function(){if(rdx.utils.is_defined(this._pages_info)&&rdx.utils.is_not_empty(this._pages_info)){for(var b=0;b<this._pages_info.length;b++){var a=this._pages_info[b].get_base_view();if(rdx.utils.is_defined(a)){if(rdx.utils.is_function(a.get_view().destroy_view)){a.get_view().destroy_view()}else{a.destroy_view()}this._pages_info[b].set_base_view(null);this._pages_info[b].set_resource_for_operation(null);this._pages_info[b].set_exec_service_result(null);this._pages_div_info[b].hide()}}}};rdx.op_wizard_view.prototype.cancel_view_operation=function(){var a=rdx.view_utils.get_model_method(this._view_definition);if(rdx.utils.is_defined(this._view_properties.cancel_prompt)&&(this._current_page_index!=0&&a==rdx.model_constants.ADD)){rdx.message_box.confirm(rdx.i18n.get_string(this._view_properties.cancel_prompt),new rdx.callback(this,this._cancel_view))}else{this._cancel_view()}};rdx.op_wizard_view.prototype._cancel_view=function(){if(rdx.utils.is_defined(this._view_properties.cancel_handler_callback)){this._view_properties.cancel_handler_callback.call_back();this._base_view.destroy_view({},false);return}this._base_view.destroy_view({},false);if(rdx.utils.is_defined(this._view_properties.cancel_view)){var a=rdx.utils.get_view(this._view_properties.cancel_view);this._base_view.get_parent().empty();new rdx.base_view(this._base_view.get_parent(),a).prepare_view()}};rdx.op_wizard_view.prototype._update_resp_callback=function(a,e,b){if(rdx.utils.is_defined(a.response_callback)){var f=a.response_callback;var d=new rdx.callback(function(o,p,h,g,m){var n=o.get_additional_params();n.op_wizard_page_index=h;n.op_wizard_pages_info=g;if(m._view_properties.show_flow==true){o.set_intermediate_callback(new rdx.callback(m,m._handle_intermediate_response,[o,h,b]))}p.call_back([o])},[f,e,this._pages_info,this]);a.response_callback=d}else{if(this._view_properties.show_flow==true&&this._is_initialized==false){this._handle_intermediate_response({},{},null,e,b)}}};rdx.op_wizard_view.prototype._handle_intermediate_response=function(b,g,h,d,a){var f=rdx.utils.is_defined(h)?h.is_configured():true;if(rdx.utils.is_defined(this._pages_info[d])&&f==true){this._pages_info[d].get_flow_state_container().show()}if(rdx.utils.is_defined(h)){h.force_resume(b,g)}if(this._is_initialized==false&&a==true&&f==true){var e=this;setTimeout(function(){e._render_next_page(d)},100)}else{if(this._is_initialized==false&&a==true&&f==false){this._is_initialized=true;this._scroll_to_the_end("index"+d)}}};rdx.op_wizard_view.prototype.get_page_navigate_callback=function(a){var b=this._pages_info[a];if(rdx.utils.is_defined(b)){return b.get_page_navigate_callback()}return null};rdx.op_wizard_view.prototype.get_data=function(){return null};rdx.op_wizard_view.prototype.create_message_container=function(a){rdx.message_container.success(this._wizard_container,a)};rdx.op_wizard_view.prototype.get_is_back_button_required=function(){if(this._view_properties.show_back_button===false){return false}return this.is_back_button_required};rdx.op_wizard_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.op_wizard_view.prototype.close_view=function(a){this._cancel_view()};rdx.op_wizard_view.prototype.is_help_rendered=function(){return rdx.utils.is_defined(this._view_properties.help_id)};rdx.op_wizard_view.prototype.handle_mask=function(){rdx.mask.mask_component(this._parent,this._base_view.get_mask_id())};rdx.op_wizard_view.prototype.handle_unmask=function(){rdx.mask.unmask_component(this._parent,this._base_view.get_mask_id())};rdx.downloads_view=function(d,b,e,a){this._base_view=a;this._view_definition=b;this._parent=d;this._resource=e;this._form=null;this._form_controller=new rdx.form_controller(this._base_view,this._parent,false);this._field_dependencies=null;this._custom_submit_handler_callback=null;this._custom_cancel_handler_callback=null;this.is_back_button_required=true;this._DEFAULT_PROPERTIES={title_image_url_class_name:null,title_str:null,title_desc:null};this.image_map={SAP:"legatus_sap","Lync 2014":"legatus_lync","Microsoft SharePoint":"legatus_sharepoint","Microsoft Exchange":"legatus_exchange"};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties)};rdx.downloads_view.prototype=new rdx.abstract_view();rdx.downloads_view.prototype.make_view=function(){this._base_view.remove_decorator();var a=$("<div>").addClass("rdx_downloads_view_container");this._render_welcome_text(a);rdx.model.get(rdx.utils.get_resource(this._view_definition.resource),null,new rdx.callback(this._render_links,[a,this.image_map]));this._parent.append(a)};rdx.downloads_view.prototype._render_welcome_text=function(b){if(rdx.utils.is_not_defined(this._properties.title_str,this._properties.title_desc)){return}var g=$("<div>").addClass("rdx_links_title_container");if(rdx.utils.is_defined(this._properties.title_str)){var a=$("<div>").addClass("rdx_link_header_container");if(rdx.utils.is_defined(this._properties.title_image_url_class_name)){a.addClass(this._properties.title_image_url_class_name)}var e=rdx.i18n.get_string(this._properties.title_str);a.append(e);g.append(a)}if(rdx.utils.is_defined(this._properties.title_desc)){var f=rdx.i18n.get_string(this._properties.title_desc);var d=$("<div>").addClass("rdx_link_header_container rdx_link_header_desc_container");d.append(f);g.append(d)}b.append(g)};rdx.downloads_view.prototype._render_links=function(E,t,w){var e=$("<table>").attr("cellpadding",0).attr("cellSpacing",0).addClass("rdx_links_container").attr("background","").append($("<tbody>"));var n=$("<tr>");e.append(n);var m=$("<td>").addClass("rdx_link_main_container");n.append(m);for(var o=0;o<E.app_template_info.length;o++){var f=E.app_template_info[o];var d=$("<table>").addClass("rdx_link_container rdx_download_container smooth_all_corner").attr("cellpadding",0).attr("cellspacing",0).append($("<tbody>"));var q=$("<tr>");d.append(q);var g=$("<td>").addClass("rdx_link_node_cell");q.append(g);var h=$("<div>").addClass("rdx_link_node_cell_container rdx_link_node_title_container");h.addClass(w[E.app_template_info[o]["name"]]);var b=$("<div>").append(rdx.i18n.get_string(f.name));h.append(b);if(f.updated_on||f.version){var A=$("<div>").addClass("legatus_update_details");var D="";if(f.updated_on){D+="<span> Updated On: "+f.updated_on+"</span>"}if(f.version){D+="  |  ";D+="<span> Supported Version: "+f.version+"</span>"}A.html(D);h.append(A)}var B=$('<a href="http://www.citrix.com/static/appexpert/appexpert-template.html" target="_blank"/>').addClass("legatus_download_link");g.append(h,B);var p=$("<tr>");d.append(p);var u=$("<td>").addClass("rdx_link_node_cell");p.append(u);var z=$("<div>").addClass("rdx_link_node_cell_container rdx_link_node_desc_container");z.append(rdx.i18n.get_string(f.desc));u.append(z);var C=$("<tr>");d.append(C);var u=$("<td>").addClass("rdx_link_node_cell");C.append(u);var s=$("<div>").addClass("rdx_link_node_cell_container");var a=$("<div>").append(f.downloads+" Downloads").addClass("legatus_download_counts");s.append(a);var v=$("<div>").append("Ratings: "+f.rating).addClass("legatus_ratings");s.append(v);u.append(s);m.append(d)}t.append(e)};rdx.downloads_view.prototype.add_mask=function(){return false};rdx.downloads_view.prototype.destroy_view=function(a){};rdx.downloads_view.prototype.get_is_back_button_required=function(){return false};rdx.downloads_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.downloads_view.prototype.is_title_required=function(){return true};rdx.apps_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._DEFAULT_PROPERTIES={block_width:"75px",block_height:"75px",button_label:"rdx.subscribe",cancel_button_label:"rdx.unsubscribe",response_renderer_callback:null,node_click_handler_callback:null,remove_node_click_handler_callback:null,render_mode:"app"};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._color_ind=1;this._MAX_COLORS=7};rdx.apps_view.prototype=new rdx.abstract_view();rdx.apps_view.prototype.make_view=function(){this._container=$("<div>").addClass("rdx_apps_view");this._apps_block_container=$("<div>");this._container.append(this._apps_block_container);this._parent.append(this._container)};rdx.apps_view.prototype.refresh_view=function(b){this._color_ind=1;rdx.mask.mask_component(this._base_view.get_parent(),this._base_view.get_mask_id());var a=new rdx.callback_params({return_callback:new rdx.callback(this,this._handle_refresh),resource_data:this._base_view._inherited_init_data});this._properties.response_renderer_callback.call_back([a])};rdx.apps_view.prototype._handle_refresh=function(b){this._apps_block_container.empty();if(rdx.utils.is_not_defined(b)||b.length==0){var n=rdx.utils.is_defined(this._view_definition.view_properties.no_data_message)?this._view_definition.view_properties.no_data_message:"rdx.link_select_msg";var d=$("<div>").addClass("rdx_no_data_row").append(rdx.i18n.get_string(n));this._apps_block_container.append(d);rdx.mask.unmask_component(this._base_view.get_parent(),this._base_view.get_mask_id());return}for(var e=0;e<b.length;e++){var a=b[e];if(rdx.utils.is_defined(a.nodes)){var g=a.title;var f=$("<div>").addClass("app_node_container");if(rdx.utils.is_defined(g)){f.append(rdx.view_utils.create_top_panel(g))}for(var h=0;h<a.nodes.length;h++){var m=a.nodes[h];this._render_node(f,m)}this._apps_block_container.append(f)}else{this._render_node(this._apps_block_container,a)}}rdx.mask.unmask_component(this._base_view.get_parent(),this._base_view.get_mask_id())};rdx.apps_view.prototype._render_node=function(b,a){if(this._properties.render_mode=="app"){this._render_app_block(b,a)}else{b.addClass("rdx_app_feature_node_parent_container");this._render_feature_node_block(b,a)}};rdx.apps_view.prototype._render_app_block=function(q,t){var b=$("<div>").addClass("rdx_app_block").css("width",this._properties.block_width).css("height",this._properties.block_height);b.bind(rdx.events.CLICK,{container:b,that:this,app_block:t},function(u){u.data.that._handle_app_node_click(u.data.container,u.data.app_block)});var a=$("<div>").addClass("app_image_holder smooth_all_corner").addClass(t.image_class_name).addClass("is_relative");if(t.add_letter==true){a.addClass("color"+this._color_ind);this._color_ind=this._color_ind+1;if(this._color_ind>this._MAX_COLORS){this._color_ind=1}}if(t.add_icon==true){var f="/rapi/filedownload?filter=path:"+rdx.url_utils.encode_uri_component(t.icon_url)+"&rand_key="+rand;var h=rdx.i18n.get_string(t.name);var s=(parseInt(this._properties.block_width)*12)/75;if(h.length>s){h=h.substring(0,s)+"..."}var d=$("<img>").attr("src",f).attr("alt",h);d.attr("width",this._properties.block_width);a.append(d)}if(rdx.utils.is_defined(this._properties.remove_node_click_handler_callback)){var p=$("<div>").addClass("remove_icon_cont");a.append($("<div>").addClass("app_remove_holder").append(p));p.bind(rdx.events.CLICK,{that:this,app_block:t,container:a},function(v){v.stopPropagation();rdx.utils.prevent_default(v);var u=rdx.i18n.get_string("rdx.remove_app_node",{name:v.data.app_block.name});rdx.message_box.confirm(u,new rdx.callback(function(w){w.data.that._handle_app_node_remove(w.data.app_block,w.data.container)},[v]))})}a.css("width",this._properties.block_width).css("height",this._properties.block_height);var g=rdx.i18n.get_string(t.name);var o=$("<div>").addClass("app_text_holder").attr("title",g);var e=parseInt(this._properties.block_width);var n=(e*12)/75;if(g.length>n){g=g.substring(0,n)+"..."}o.append(g);b.append(a);b.append(o);if(t.add_letter==true&&rdx.utils.is_not_empty(t.name)){var m=t.name[0]+"";m=m.toUpperCase();a.append($("<div>").addClass("app_first_letter").append(m))}q.append(b)};rdx.apps_view.prototype._handle_app_node_remove=function(b,a){var e=new rdx.callback_params({data:b,return_callback:new rdx.callback(this,this._handle_post_remove_resume,[a])});this._properties.remove_node_click_handler_callback.call_back([e]);var d=$("<div>").addClass("app_text_holder").append(rdx.i18n.get_string(b.name));app_block_cont.append(image_holder);app_block_cont.append(d)};rdx.apps_view.prototype._handle_post_remove_resume=function(a,b){var e=this;b.fadeOut(800,function(){e.refresh_view()});if(app_block.add_letter==true&&rdx.utils.is_not_empty(app_block.name)){var d=app_block.name[0]+"";d=d.toUpperCase();image_holder.append($("<div>").addClass("app_first_letter").append(d));parent.append(app_block_cont)}};rdx.apps_view.prototype._render_feature_node_block=function(n,o){var b=$("<div>").addClass("rdx_app_block rdx_app_feature_block").css("width",this._properties.block_width).css("height",this._properties.block_height);var a=$("<div>").addClass("app_image_holder smooth_all_corner");if(o.add_coming_soon==true){var e=$("<div>").addClass("rdx_app_block_coming_soon");a.append(e)}var h=$("<div>").addClass("app_icon_holder_container");h.addClass(o.image_class_name);a.append(h);var f=$("<div>").addClass("app_text_holder").append(rdx.i18n.get_string(o.name));a.append(f);if(rdx.utils.is_defined(o.background_color)){h.css("background-color",o.background_color);f.css("background-color",o.background_color)}var m=$("<div>").addClass("app_node_desc_container").append(rdx.i18n.get_string(o.description));a.append(m);if(rdx.utils.is_defined(this._properties.node_click_handler_callback)&&o.add_coming_soon!=true){var g=$("<div>").addClass("app_node_action_container");var d=$("<div>").addClass("app_node_action_label_container");this._update_label_action_container(d,o.read_only);g.append(d);a.append(g);g.bind(rdx.events.CLICK,{container:d,node:o,that:this},function(p){p.data.that._handle_app_node_click(p.data.container,p.data.node)})}a.css("width",this._properties.block_width).css("height",this._properties.block_height);b.append(a);n.append(b)};rdx.apps_view.prototype._update_label_action_container=function(a,b){var d="";a.removeClass("app_node_action_label_active").removeClass("app_node_action_label_inactive");if(b==true){d=rdx.i18n.get_string("rdx.unsubscribe");a.addClass("app_node_action_label_active")}else{d=rdx.i18n.get_string("rdx.subscribe");a.addClass("app_node_action_label_inactive")}a.empty();a.append(d)};rdx.apps_view.prototype._handle_app_node_remove=function(b,a){var d=new rdx.callback_params({data:b,return_callback:new rdx.callback(this,this._handle_post_remove_resume,[a])});this._properties.remove_node_click_handler_callback.call_back([d])};rdx.apps_view.prototype._handle_post_remove_resume=function(a,b){var d=this;b.fadeOut(800,function(){d.refresh_view()})};rdx.apps_view.prototype._handle_app_node_click=function(a,b){if(this._view_definition.view_properties.skip_drilldown){if(rdx.utils.is_defined(this._properties.node_click_handler_callback)){this._properties.node_click_handler_callback.call_back([{node_defn:b}])}}else{var d=new rdx.callback_params({return_callback:new rdx.callback(this,this._post_add_action,[!b.read_only,b,a])});if(rdx.utils.is_defined(this._properties.node_click_handler_callback)){this._properties.node_click_handler_callback.call_back([{element:a,node_defn:b,do_add:!b.read_only,return_callback:d}])}}};rdx.apps_view.prototype._post_add_action=function(a,d,e,b){e.read_only=d;this._update_label_action_container(b,e.read_only)};rdx.apps_view.prototype.get_resource_response_arrived=function(a){this.refresh_view()};rdx.apps_view.prototype.register_event_handlers=function(){if(rdx.utils.is_defined(this._resource)){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this,this.refresh_view))}};rdx.offline_visualizer_view=function(d,b,e,a){this._base_view=a;this._view_definition=b;this._entity_resource_name=this._view_definition.entity_resource_name;this._binding_resource_name=this._view_definition.binding_resource_name;this._parent=d;this._resource=e;this._DEFAULT_PROPERTIES={};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._file_name="";this.data={errorcode:0,message:"Done",additionalInfo:{cert_present:"false"},lbvserver:[{name:"lbv1"},{name:"lbv2"},{name:"lbv3"},{name:"lbv4"},{name:"lbv5"},{name:"lbv6"},{name:"lbv7"},{name:"lbv8"}]}};rdx.offline_visualizer_view.prototype.make_view=function(){if(rdx.utils.is_defined(this._view_definition.online)&&this._view_definition.online==true){this._container_div=$("<div>").addClass("config_advice_view");this._online_ns_ip=this._view_definition.ip_address;this._online_lb_name=this._view_definition.entity_name;var a=this._view_definition.resource;rdx.resources[a].get_url="/nitro/v1/config/"+a;rdx.mask.mask_component(this._parent,"offline_viz");rdx.model.post(rdx.resources[a],new rdx.callback(this,this._construct_visualizer),{name:this._view_definition.entity_name,ip_address:this._view_definition.ip_address},new rdx.callback(this,this._error_occured),null,null,null)}else{this._create_dom();this._file_input.jFile()}this._base_view.remove_decorator();return};rdx.offline_visualizer_view.prototype._create_dom=function(){this._container_div=$("<div>").addClass("config_advice_view");var f=$("<div>").addClass("description");var e="Scan your NetScaler Configuration by selecting a registered NetScaler or by uploading the ns.conf file and get the highlights of common mistakes and best practices.";f.append(e);this.tab_panel=$("<div>").addClass("tab-panel");this._upload_tab=$("<div>").addClass("tab selected");this._upload_radio=$("<input />").attr({type:"radio",checked:"true",name:"upload"});this._upload_tab.append(this._upload_radio).append("Upload Configuration File");this._device_tab=$("<div>").addClass("tab");this._device_radio=$("<input />").attr({type:"radio",name:"device"});this._device_tab.append(this._device_radio).append("Select Device");this._upload_file_div=$("<div>").addClass("tab-container bottom-corners top-right-corner upload-file");this._config_form_elem=$("<form>").addClass("config-file-upload-form").attr({enctype:"multipart/form-data",method:"post",action:"/nitro/v1/config/visualizer_conf_file"});var g=$("<input />").attr({type:"hidden",name:"NITRO_WEB_APPLICATION",value:"true"});var a=$("<input />").attr({type:"hidden",name:"is_main",value:"true"});this._config_form_elem.append(g);this._config_form_elem.append(a);var m=$("<div>").addClass("label");m.text("NetScaler Configuration File");var b=$("<div>").addClass("field");this._file_input=$("<input />").attr({type:"file",name:"visualizer_conf_file"});b.append(this._file_input);var d=$("<div>").addClass("button-group");this._input_file_button=$("<input />").addClass("button-blue").attr({type:"button",value:"Upload"});d.append(this._input_file_button);this._config_form_elem.append(m);this._config_form_elem.append(b);this._config_form_elem.append(d);this._upload_file_div.append(this._config_form_elem);this.tab_panel.append(this._upload_file_div);this._progress_div=$("<div>").addClass("progressing");var h=$("<span>").addClass("loader");this._progress_div.append(h);this._progress_div.append(" Getting list of Virtual Servers...");this._container_div.append(this.tab_panel);this._container_div.append(this._progress_div);this._parent.append(this._container_div)};rdx.offline_visualizer_view.prototype.destroy_view=function(a){};rdx.offline_visualizer_view.prototype.get_is_back_button_required=function(){return false};rdx.offline_visualizer_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.offline_visualizer_view.prototype.register_event_handlers=function(){var a=this;if(rdx.utils.is_defined(this._input_file_button)){this._input_file_button.bind(rdx.events.CLICK,{configadvice:this},function(b){a._upload_configuration_file(b)})}if(rdx.utils.is_defined(this._device_tab)){this._device_tab.bind(rdx.events.CLICK,{configadvice:this},function(b){a._show_select_device_option(b)})}if(rdx.utils.is_defined(this._upload_tab)){this._upload_tab.bind(rdx.events.CLICK,{configadvice:this},function(b){a._show_upload_file_option(b)})}};rdx.offline_visualizer_view.prototype._visualize_per_entity=function(b){b.preventDefault();var a=this;this._file_name=$.trim($(".config-file-upload-form .custom-file-input").text());this._selected_lb=a.select_lb_dropdown.val();if(rdx.utils.is_defined(this._parent_container)){this._parent_container.remove()}rdx.resources[this._binding_resource_name].get_url="/nitro/v1/config/"+this._binding_resource_name+"/"+this._selected_lb;rdx.model.get(rdx.resources[this._binding_resource_name],null,new rdx.callback(this,this._construct_visualizer),null,new rdx.callback(this,this._error_occured),null)};rdx.offline_visualizer_view.prototype._upload_configuration_file=function(b){b.preventDefault();var a=this;this._file_name=$.trim($(".config-file-upload-form .custom-file-input").text());if(this._file_name===rdx.i18n.get_string("rdx.no_file_selected")){rdx.message_box.error(rdx.i18n.get_string("rdx.please_enter_config_file"));return false}else{this._progress_div.show();this._config_form_elem.ajaxSubmit({success:function(){a._get_lb_list(b)},error:function(d){a._error_occured(d)}})}};rdx.offline_visualizer_view.prototype._error_occured=function(a){if(rdx.utils.is_defined(this._progress_div)){this._progress_div.hide()}rdx.message_box.error(a)};rdx.offline_visualizer_view.prototype._get_lb_list=function(a){var b=this._entity_resource_name;rdx.model.get(rdx.resources[b],null,new rdx.callback(this,this._process_list),null,new rdx.callback(this,this._error_occured),null)};rdx.offline_visualizer_view.prototype._process_list=function(a){this._progress_div.hide();this._select_lbvserver_div=$("<div>").addClass("tab-container bottom-corners top-right-corner");var d=$("<div>").addClass("field");var f=$("<div>").addClass("label");if(this._view_definition.view_properties.type=="GSLB Visualizer"){f.text("Select GSLB Domain")}else{f.text("Select Virtual Server")}f.css("padding-bottom","10px");this.select_lb_dropdown=$("<select />");this.select_lb_dropdown.addClass("visualizer_lb_dropdown");this.tab_panel.hide();for(var b=0;b<a[this._entity_resource_name].length;b++){var g=$("<option />").append(a[this._entity_resource_name][b]["name"]);this.select_lb_dropdown.append(g)}d.append(f).append(this.select_lb_dropdown);var e=$("<div>").addClass("button-group");this._input_visualize_lb_button=$("<input />").addClass("button-blue").attr({type:"button",value:"View in Visualizer"});e.append(this._input_visualize_lb_button);this._select_lbvserver_div.append(d);this._input_visualize_lb_button.bind(rdx.events.CLICK,{configadvice:this},function(m){var h=m.data.configadvice;h._visualize_per_entity(m)});this._select_lbvserver_div.append(e);this._container_div.append(this._select_lbvserver_div)};rdx.offline_visualizer_view.prototype._construct_visualizer=function(b){rdx.mask.unmask_component(this._parent,"offline_viz");this._binding_response=b[this._binding_resource_name][0];for(var e in this._binding_response){if(rdx.utils.is_array(this._binding_response[e])){if(this._binding_response[e].length==0){delete this._binding_response[e]}else{for(var d=0;d<this._binding_response[e].length;d++){this._binding_response[e][d]=JSON.parse(this._binding_response[e][d])}}}}this._visualizer_title=null;this._block_count=0;this.refresh_div=null;this._block_object={};this._count=0;this._level_tree={};this.to_be_drawn_count=0;this.to_be_drawn=[];this._parent_height="1250";this._label_to_type_obj={};this.lb_request_policies=["lbvserver_cmppolicy_binding","lbvserver_rewritepolicy_binding","lbvserver_appflowpolicy_binding","lbvserver_responderpolicy_binding","lbvserver_auditsyslogpolicy_binding","lbvserver_authorizationpolicy_binding","lbvserver_appfwpolicy_binding","lbvserver_scpolicy_binding","lbvserver_pqpolicy_binding","lbvserver_filterpolicy_binding","lbvserver_tmtrafficpolicy_binding","lbvserver_dnspolicy64_binding","lbvserver_spilloverpolicy_binding","lbvserver_feopolicy_binding","lbvserver_appqoepolicy_binding","lbvserver_transformpolicy_binding","lbvserver_cachepolicy_binding"];this.lb_response_policies=["lbvserver_cmppolicy_binding","lbvserver_rewritepolicy_binding","lbvserver_cachepolicy_binding"];this.lb_res_click_view_map=["lbvserver_cmppolicy_response_binding_op_page","lbvserver_rewritepolicy_response_binding_op_page","lbvserver_cachepolicy_response_binding_op_page"];this.lb_req_click_view_map=["lbvserver_cmppolicy_request_binding_op_page","lbvserver_rewritepolicy_request_binding_op_page","lbvserver_appflowpolicy_request_binding_op_page","lbvserver_responderpolicy_request_binding_op_page","lbvserver_auditsyslogpolicy_request_binding_op_page","lbvserver_authorizationpolicy_request_binding_op_page","lbvserver_appfwpolicy_request_binding_op_page","lbvserver_scpolicy_request_binding_op_page","lbvserver_pqpolicy_request_binding_op_page","lbvserver_filterpolicy_request_binding_op_page","lbvserver_tmtrafficpolicy_request_binding_op_page","lbvserver_dnspolicy64_request_binding_op_page","lbvserver_spilloverpolicy_request_binding_op_page","lbvserver_copolicy_request_binding_op_page","lbvserver_appqoepolicy_request_binding_op_page","lbvserver_transformpolicy_request_binding_op_page","lbvserver_cachepolicy_request_binding_op_page"];this._parent_view_definition=this._view_definition;this._parent_container=$("<div></div>").css("height",this._parent_height).css("border-bottom","1px solid #ccc");this._visualizer_title="LB Visualizer";if(rdx.utils.is_defined(this._view_definition.view_properties.description)){if(rdx.utils.is_defined(this._selected_lb)){var a="Visualizer: "+this._selected_lb}else{var a="Visualizer: "+this._parent_view_definition.lb_name}this.description_div=$("<div>").addClass("visualizer_title").append(a);this.description_div.append(this.refresh_div)}this._initialize_visualizer_view(false)};rdx.offline_visualizer_view.prototype._initialize_visualizer_view=function(b){this._parent_container.addClass("topology_formation_diagram_parent_container");var d={add_grey_button:true,grey_button_label:"rdx.form_close_button_label",grey_button_click_handler_callback:new rdx.callback(this,this.close_view)};this.close_button_container=$("<div>").addClass("visualizer_title");this._parent_container.append(this.description_div);this._container_div.append(this._parent_container);new rdx.button_bar(this.close_button_container,new rdx.form_field({properties:d})).render();for(var e in this._view_definition.diagram_properties){var a=this._view_definition.diagram_properties[e];if(rdx.utils.is_defined(this._level_tree[a.level])){this._level_tree[a.level].push(e)}else{this._level_tree[a.level]=[e]}this._block_count++}this._last_level=a.level;for(var e in this._view_definition.diagram_properties){this.make_block(e,false,this._binding_response)}};rdx.offline_visualizer_view.prototype.make_block=function(e,a,b){var d=this._view_definition.diagram_properties[e];if(e=="node_1"){if(this._view_definition.view_properties.type=="GSLB Visualizer"){b={gslbdomain:{name:b.name}}}else{if(this._view_definition.view_properties.type=="LB Visualizer"){b={lbvserver:{name:b.name,ipv46:b.ipaddress,port:b.port,servicetype:b.type}}}else{if(this._view_definition.view_properties.type=="CSvserver Visualizer"){b={csvserver:{name:b.name}}}}}}else{if(e=="node_3"||e=="node_5"){b==null}}this._render_block(b,d,e,true,false)};rdx.offline_visualizer_view.prototype._render_block=function(b,f,C,e,n){var s=0;var p="";if(f.connector_block==true){var v=$("<div />").addClass("visualizer_connectorblock");s=(this._parent_container.height()/(this._block_count-1))*(f.level-1);if(C=="node_10"){v.css("top",-160)}if(C=="node_5"){v.css("top",510)}else{v.css("top",s-75)}}else{if(rdx.utils.is_defined(f.scrollable_single_block)){var F=b;var m="";var o=0;for(var A=0;A<f.resource_name.length;A++){if(F[f.resource_name[0]]){var I=F[f.resource_name[0]];for(var B=0;B<I.length;B++){if(rdx.utils.is_defined(I[B][f.key[A]])&&rdx.utils.is_not_empty(I[B][f.key[A]])){var G=I[B][f.key[A]];o++;if(o==2||(I.length==1&&rdx.utils.is_not_defined(F[f.resource_name[1]]))){m=m+"<div class = 'visualizer_slide' data-center = 'true'>"+G+"</div>"}else{if(f.key[A]=="lbvserver"){m=m+"<div class = 'visualizer_slide-deffault-blue'>"+G+"</div>"}else{m=m+"<div class = 'visualizer_slide'>"+G+"</div>"}}}}}}if(o>0){var v=$("<div />").html('						<div class="visualizer_toolbar">							<div class="visualizer_prev"></div>							<div class="visualizer_next"></div>						</div>						<div class="visualizer_view-port">							<div class="visualizer_scrollable-panel">'+m+"</div>");var h=$(".visualizer_scrollable-panel").width(o*250);v.addClass("visualizer_slider")}else{var v=$("<div></div>").addClass("zero_count_message");var t=f.zero_count_message;v.text(t);v.css("top",150);v.css("left",351);v.css("padding-left",50);v.addClass("visualizer_singleblock")}}else{var a=b;if(f.resource_name.length==1||f.single_block==false){var v=$("<div />").addClass("visualizer_block_container");if(f.direction=="left"){v.css("left",121)}else{if(f.direction=="right"){v.css("left",561)}}if(f.level==1){s="60px"}else{if(f.level==2){s=200}else{if(f.level==3){s=390}else{if(f.level==5){s=1180}else{s=1000}}}}v.css("top",s);var w=$("<div />").addClass("visualizer_basic_node");var q=$("<div />");v.append(w);if(rdx.utils.is_not_defined(a[f.resource_name])){p=f.zero_count_message}else{if(f.key&&rdx.utils.is_array(f.key)){for(var z=0;z<f.key.length;z++){if(rdx.utils.is_not_empty(f.label[z])){p=p+"<br/><span>"+f.label[z]+" : "+a[f.resource_name][f.key[z]]+"</span>"}else{if(rdx.utils.is_not_defined(a[f.resource_name][f.key[z]])){p=p+a[f.key[z]]}else{p=p+a[f.resource_name][f.key[z]]}}}}else{if(f.key){if(f.key=="vservername"){p=a[f.resource_name][0][f.key]}else{p=a[f.resource_name][f.key]}if(f.label){p=p+" "+f.label}}else{if(f.count){p=a[f.resource_name].length+" "+f.label}}}}if(f.display_data){if(f.display_data["data_renderer_callback"]){var H=a[0][f.resource_name][0];var d=f.display_data["data_renderer_callback"].call_back([H])}p=p+"<br/><span>"+d+"<span/>"}w.html(p);if(rdx.utils.is_defined(f.click_view_name)){this.add_click_view_map(v,w,this._view_definition,C,f.click_view_name[0])}this._block_object[C]=v}else{a=b;if(f.direction=="left"){var E="REQUEST";var v=$("<div />").addClass("visualizer_block_container_left")}else{if(f.direction=="right"){var E="RESPONSE";var v=$("<div />").addClass("visualizer_block_container_right")}else{var v=$("<div />").addClass("visualizer_block_container")}}s=((this._parent_container.height())/(this._block_count-1))*(f.level-1);v.css("top",s-125);var g=0;for(var A=0;A<f.resource_name.length;A++){if(rdx.utils.is_defined(a[f.resource_name[A]])){g=a[f.resource_name[A]].length;if(g>0){var w=$("<div></div>").addClass("visualizer_singleblock");var u=$("<span />").addClass("node_child_number").text(g);if(f.click_view_name){this.add_click_view_map(v,w,this._view_definition,C,f.click_view_name[B])}var D=f.label[A];w.text(D).prepend(u);v.append(w)}}}if(rdx.utils.is_not_defined(D)){var w=$("<div></div>").addClass("zero_count_message");var D=f.zero_count_message;w.text(D);v.append(w);w.addClass("visualizer_singleblock")}}}}this._parent_container.append(v);this._count++;this._block_object[C]=v;this.render_visualizer();if(rdx.utils.is_defined(f.scrollable_single_block)){$(".visualizer_prev").bind(rdx.events.CLICK,{obj:this},function(J){if($(this).hasClass("visualizer_disabled")){return false}J.data.obj._move_divs("visualizer_prev",true);J.stopPropagation()});$(".visualizer_next").bind(rdx.events.CLICK,{obj:this},function(J){if($(this).hasClass("visualizer_disabled")){return false}J.data.obj._move_divs("visualizer_next",true);J.stopPropagation()});$(".visualizer_view-port").bind(rdx.events.CLICK,{obj:this,parent_view:this._view_definition},function(J){var N=J.target;if($(N).hasClass("visualizer_slide-bound_vpnvserver")){var O=rdx.utils.get_view("sslvpn_vserver_set_view");var R=rdx.view_utils.show_view_in_slider(O,null,{name:N.textContent});return}else{if(($(N).hasClass("visualizer_slide")||$(N).hasClass("visualizer_slide-deffault-blue"))&&($(N).hasClass("cs_visualizer_box_selected")==false)){if(rdx.utils.is_defined(J.data.obj._container_div.children()[1])){J.data.obj._container_div.children()[1].remove()}if(rdx.utils.is_defined(J.data.obj._parent_container)){J.data.obj._parent_container.css("border-bottom-width","none");J.data.obj._parent_container.css("border-bottom-style","none")}var Q=$.extend(true,{},rdx.views.offline_lb_visualizer_view);Q.entity_name=$(N).html();delete Q.diagram_properties.node_1;Q.diagram_properties.node_10={};Q.diagram_properties.node_10.connector_block=true;Q.diagram_properties.node_10.child="node_3";Q.diagram_properties.node_10.connect_top=true;Q.view_properties={};Q.add_to_bread_crumb=false;Q.ip_address=J.data.parent_view.ip_address;Q.online=true;var L=$(".visualizer_scrollable-panel div.cs_visualizer_box_selected");L.removeClass("cs_visualizer_box_selected");$(N).addClass("cs_visualizer_box_selected");var M=$(N).prev();var P=$(N).next();if(rdx.utils.is_defined(M.attr("data-center"))){J.data.obj._move_divs("visualizer_next",false)}else{J.data.obj._move_divs("visualizer_prev",false)}var K=new rdx.base_view(J.data.obj._container_div,Q);K.prepare_view();J.stopPropagation()}else{return}}})}};rdx.offline_visualizer_view.prototype.render_visualizer=function(){if(this._count==this._block_count){this._parent.append(this._container_div);this.rearrange_elements();this.connect_block_elements();this._add_connection_overlays()}if(rdx.utils.is_defined(this._view_definition.view_properties.connect_defaults)){var f=$(".visualizer_scrollable-panel");if(f.children().length==1){if(rdx.utils.is_defined(this._parent_container)){this._parent_container.css("border-bottom-width","none");this._parent_container.css("border-bottom-style","none")}$(".visualizer_scrollable-panel").addClass("visualizer_move_center");var b=$(".visualizer_scrollable-panel");b.children()[0];var a=$.extend(true,{},rdx.views.offline_lb_visualizer_view);target_div=$(".visualizer_scrollable-panel div[data-center=true]");a.entity_name=$(target_div).html();delete a.diagram_properties.node_1;a.diagram_properties.node_10={};a.diagram_properties.node_10.connector_block=true;a.diagram_properties.node_10.child="node_3";a.diagram_properties.node_10.connect_top=true;a.view_properties={};a.add_to_bread_crumb=false;a.ip_address=this._view_definition.ip_address;a.online=true;var d=new rdx.base_view(this._container_div,a);d.prepare_view();event.stopPropagation()}else{if(f.length==0){return}else{var e=$(".visualizer_scrollable-panel div[data-center=true]");if(e.length>=1){if(rdx.utils.is_defined(this._parent_container)){this._parent_container.css("border-bottom-width","none");this._parent_container.css("border-bottom-style","none")}var a=$.extend(true,{},rdx.views.offline_lb_visualizer_view);target_div=$(".visualizer_scrollable-panel div[data-center=true]");a.entity_name=$(target_div).html();delete a.diagram_properties.node_1;a.diagram_properties.node_10={};a.diagram_properties.node_10.connector_block=true;a.diagram_properties.node_10.child="node_3";a.diagram_properties.node_10.connect_top=true;a.view_properties={};a.add_to_bread_crumb=false;a.ip_address=this._view_definition.ip_address;a.online=true;var d=new rdx.base_view(this._container_div,a);d.prepare_view();event.stopPropagation()}else{return}}}}if(rdx.utils.is_defined(this._view_definition.view_properties.connect_defaults)){var f=$(".visualizer_scrollable-panel");if(f.children().length==1){$(".visualizer_scrollable-panel").addClass("visualizer_move_center")}else{if(f.length==0){return}}}};rdx.offline_visualizer_view.prototype._move_divs=function(h,g){var a=$(".visualizer_scrollable-panel");if(a.children().length<4){$(".visualizer_next").addClass("visualizer_disabled");$(".visualizer_prev").addClass("visualizer_disabled");return}if(g){var e=$(".visualizer_scrollable-panel div.cs_visualizer_box_selected");e.removeClass("cs_visualizer_box_selected")}var d=parseInt(a.css("left"));var b=0;if(h=="visualizer_prev"){var f=$(".visualizer_scrollable-panel div[data-center=true]");f.prev().attr("data-center","true");f.removeAttr("data-center");if(d==0){b=d}else{b=d+250}}else{var f=$(".visualizer_scrollable-panel div[data-center=true]");f.next().attr("data-center","true");f.removeAttr("data-center");if(d<-(250*($(".visualizer_slide").length-3))){b=d}else{b=d-250}}a.animate({left:b},150,function(){if(b==0){$(".visualizer_prev").addClass("visualizer_disabled")}else{if(b<-(250*($(".visualizer_slide").length-3))){$(".visualizer_next").addClass("visualizer_disabled")}else{$(".visualizer_prev,.visualizer_next").removeClass("visualizer_disabled")}}})};rdx.offline_visualizer_view.prototype._add_connection_overlays=function(){for(var d in this._view_definition.diagram_properties){var a=this._view_definition.diagram_properties[d];if(rdx.utils.is_defined(a.connection_img)){var b=$("<div />");b.css("left",this._block_object[d].position().left);if(a.direction=="left"){b.css("left",this._block_object[d].position().left+53);b.css("top",this._block_object[d].position().top-58);b.addClass("connection_div_req")}else{if(a.direction=="right"){b.css("left",this._block_object[d].position().left+53);b.css("top",this._block_object[d].position().top+this._block_object[d].height()+29);b.addClass("connection_div_res")}}}this._parent_container.append(b)}};rdx.offline_visualizer_view.prototype.rearrange_elements=function(){for(var b=1;b<=5;b++){var a=this._level_tree[b];if(rdx.utils.is_not_defined(a)){continue}var g=this._block_object[a[0]].position().top;var e=this.find_largest_element(a);var d=this._level_tree[b+1];if(d){this._set_top_offset(d,e.position,g)}if(b==3&&rdx.utils.is_defined(this._block_object.node_7)){if(this._block_object.node_4.height()!=this._block_object.node_7.height()){var f=e.element[0].offsetTop+(e.element.height()/2);if(this._block_object.node_7.height()>100){this._block_object.node_7.css("top",f-50)}else{this._block_object.node_7.css("top",f)}}}else{this._parent_container.css("height",g+70)}}return};rdx.offline_visualizer_view.prototype.find_largest_element=function(a){var d=[];var g=0;var b=null;for(var f=0;f<a.length;f++){var e=this._block_object[a[f]].height();var h=$(this._block_object[a[f]]).position().top;if(g<(e+h)){g=e+h;b=this._block_object[a[f]]}}return{element:b,position:g}};rdx.offline_visualizer_view.prototype._set_top_offset=function(b,a,f){for(var e=0;e<b.length;e++){var d=this._block_object[b[e]];var g=d.position()["top"];d.css("top",a+75)}return};rdx.offline_visualizer_view.prototype.create_add_new_link=function(e,b,f,d){var a=$('<a href="javascript:void(0);" class="add_new_block" title="Add New"><img src="'+rdx.images.PLUS_WHITE+'" alt="Add"/>Add New</a>').bind(rdx.events.CLICK,{object:this,node:e,view_definition:b,block_id:f,add_view_name:d},function(n){var m=rdx.utils.get_view(n.data.add_view_name);var h=n.data.view_definition;var g=rdx.view_utils.show_view_in_slider(m,null,{name:h.selected_entity});$(g).bind(rdx.events.VIEW_DESTROYED,{node:e,block_id:f,obj:n.data.object},function(p){var q=p.data.block_id;var o=p.data.node;o.empty();p.data.obj.make_block(q)});n.stopPropagation()});if(rdx.utils.is_defined(a)){e.append(a)}this._parent_container.append(e)};rdx.offline_visualizer_view.prototype.add_click_view_map=function(a,e,d,f,b){e.attr("tabindex",0);e.bind(rdx.events.CLICK+" "+rdx.events.KEYUP,{obj:this,lb_name:this._online_lb_name,ns_ip:this._online_ns_ip},function(g){if(rdx.utils.is_defined(g.keyCode)&&g.keyCode!==13){return}if($(g.target).hasClass("visualizer_singleblock")||$(g.target).hasClass("visualizer_basic_node")){var h=[];var s={};var p=g.target.textContent;p=p.replace(/[0-9]/g,"");var t=g.data.obj;for(var n=0;n<t._view_definition.diagram_properties["node_4"]["label"].length;n++){t._label_to_type_obj[t._view_definition.diagram_properties["node_4"]["label"][n]]=t.lb_request_policies[n]}for(var n=0;n<t._view_definition.diagram_properties["node_7"]["label"].length;n++){t._label_to_type_obj[t._view_definition.diagram_properties["node_7"]["label"][n]]=t.lb_response_policies[n]}t._label_to_type_obj[" Services"]="lbvserver_service_binding";t._label_to_type_obj["No Services"]="lbvserver_servicegroup_binding";if(p!=" Services"&&p!="No Services"){var o=rdx.utils.get_view("policy_click_detail_view");o.view_properties.title=p}else{var o=rdx.utils.get_view("service_click_detail_view")}var m=t._label_to_type_obj[p];s[m]=t._binding_response[m];if(rdx.utils.is_defined(m)){s[m][0]["name"]=t._binding_response.name}var q=rdx.view_utils.show_view_in_slider(o,null,s[m])}else{return}})};rdx.offline_visualizer_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.offline_visualizer_view.prototype.connect_block_elements=function(){for(var b in this._block_object){var a=this._view_definition.diagram_properties[b];if(rdx.utils.is_defined(a.child)&&rdx.utils.is_defined(this._block_object[a.child])){this._connect_block_elements(b,a.child,a)}continue}};rdx.offline_visualizer_view.prototype._connect_block_elements=function(a,n,o){var b={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top","Bottom"],connector:["Straight"]};var s={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[236,0]}]};var g={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[231,0]}]};var q={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[0,236]}]};var p={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[0,231]}]};var h={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[203,0]}]};var t={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[234,0]}]};var d={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[0,203],cornerRadius:10}]};var f={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[0,234],cornerRadius:1}]};if(rdx.utils.is_array(n)){for(var e=0;e<n.length;e++){this._connect_block_elements(a,n[e])}}else{this._jsPlumb=jsPlumb.getInstance();var m={};if(rdx.utils.is_defined(o.connect_top)){m=s}else{if(rdx.utils.is_defined(o.connect_bottom)){m=h;if(((this._block_object.node_5.height()+this._block_object.node_5.offset().top)-(this._block_object.node_7.height()+this._block_object.node_7.offset().top))>200){m.connector[1].stub=[0,((this._block_object.node_5.height()+this._block_object.node_5.offset().top)-(this._block_object.node_7.height()+this._block_object.node_7.offset().top))]}}else{if((rdx.utils.is_defined(o.direction)&&o.direction=="right")&&rdx.utils.is_not_defined(o.single_connect)){m=d;if(this._block_object.node_4.height()>265){m.connector[1].stub=[this._block_object.node_7.offset().top-this._block_object.node_3.offset().top,0]}}else{if((rdx.utils.is_defined(o.direction)&&o.direction=="left")){m=q}else{m=b}}}}if(rdx.utils.is_defined(o.connect_bottom)){this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}else{if(rdx.utils.is_defined(o.connect_top)){this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}else{if(rdx.utils.is_defined(o.direction)&&o.direction=="left"){this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}else{this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}}}}};rdx.offline_visualizer_view.prototype.is_title_required=function(){return true};rdx.op_wizard_page=function(d,b,e,a){this._parent=d;this._page_container=null;this._DEFAULT_PROPERTIES={standalone_mode:false,add_create_button:false,add_close_button:false,dialog_mode:false,add_to_bread_crumb:false,add_border:false,add_page_border:true,add_continue_button:true,add_done_button:false,add_cancel_button:true,cancel_button_callback:null,cancel_current_page:false,two_row_layout_for_fields:true,ok_button_label:null,cancel_button_label:null,continue_button_label:null,resume_from_failue_step_on_next_submit:true,add_index_to_page:true,add_skip_button:false,skip_button_label:"rdx.do_it_later",skip_button_handler_callback:null,center_align:true,custom_page_navigation_handler_field:null,add_view_link_name:null,resource_data_massage_callback:null,custom_form_validator_callback:null,skip_current:false};this._base_view=a;this._view_definition=b;this._resource=e;this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._form=null;this._field_dependencies=null;this._form_panel=$("<div>");this._title_panel=null;this._title=null;this._model_executor_service=null;this._panels_holder=new Object();this.TOP_PANEL="top_panel";this.CENTER_PANEL="center_panel";this.CONTENT_PANEL="content_panel";this.CENTER_LEFT_PANEL="center_left_panel";this.CENTER_RIGHT_PANEL="center_right_panel";this.BUTTON_BAR_PANEL="button_bar_panel";this.TITLE_PANEL="title_panel";this.DESCRIPTION_PANEL="description_panel";this.NEXT_BUTTON="next_button";this.FINISH_BUTTON="rdx_blue_button";this.BUTTON_BAR_TABLE="buttons_panel";this.CANCEL_BUTTON="cancel_button";this.SKIP_BUTTON="skip_button";this._optional_page_flag=true;this._form_controller=new rdx.form_controller(a,d,true);this._resource_for_operation=null;this._model_exec_service_result=null;this._custom_view_handler=null;this._parent_view=null};rdx.op_wizard_page.prototype=new rdx.abstract_view();rdx.op_wizard_page.prototype.make_view=function(){if(rdx.utils.is_not_defined(this._view_definition.view_properties.cancel_button_callback)&&(rdx.utils.is_not_defined(this._parent_view)||this._parent_view!=rdx.view_constants.ONE_PAGE_WIZARD_VIEW)){this._properties.cancel_button_callback=new rdx.callback(function(a){a._base_view.destroy_view()},[this])}this._base_view.remove_decorator();this.render();this._form.finalize()};rdx.op_wizard_page.prototype.render=function(){this._page_container=$("<div>").addClass("smooth_all_corner form_inline");this._page_container.addClass("op_wizard_page");this._page_container.addClass("op_wizard_page_border rdx_border");if(this._properties.add_page_border==false){this._page_container.addClass("op_wizard_no_border")}this._parent.append(this._page_container);this._add_top_panel();this._add_center_panel();this._check_for_optional_page();this._title_bar=null};rdx.op_wizard_page.prototype.add_mask=function(){return true};rdx.op_wizard_page.prototype.handle_unmask=function(){rdx.mask.unmask_component(this._parent,this._base_view.get_mask_id())};rdx.op_wizard_page.prototype._add_top_panel=function(){var b=null;if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title)){if(rdx.utils.is_not_defined(this._base_view.get_crumb_handler())||(rdx.utils.is_defined(this._parent_view)&&this._parent_view==rdx.view_constants.ONE_PAGE_WIZARD_VIEW)){if(rdx.utils.is_not_defined(this._view_definition.view_properties.show_title)||this._view_definition.view_properties.show_title==true){b=this._view_definition.view_properties.title}}}if(rdx.utils.is_defined(b)){var a=$("<div>");a.addClass("rdx_top_panel rdx_background");this._add_to_panel_holder(this.TOP_PANEL,a);this._title_panel=$("<h3>").addClass("rdx_title_panel");this._add_to_panel_holder(this.TITLE_PANEL,this._title_panel);a.append(this._title_panel);this._page_container.append(a);this._title_panel.append(rdx.i18n.get_string(b));if(this._view_definition.__add_remove_link==true){var d=$("<button>").attr("aria-label","Close").attr("title","Close").addClass("op_wizard_link_panel op_wizard_cross_link");d.bind(rdx.events.CLICK,{wizard:this},function(e){e.data.wizard._base_view.destroy_view({view_destroyed_on_click:true})});a.append(d)}if(rdx.utils.is_defined(this._properties.add_view_link_name)||rdx.utils.is_defined(this._properties.add_view_link_name_callback)){var d=$("<div>").addClass("op_wizard_link_panel op_wizard_view_link");d.bind(rdx.events.CLICK,{wizard:this},function(h){var f=h.data.wizard._properties;var g=h.data.wizard._form;var e=function(q,p,o){var n=rdx.utils.get_view(q);rdx.view_utils.show_view_in_slider(n,new rdx.callback(function(s){if(rdx.utils.is_defined(s)&&rdx.utils.is_function(s.refresh)){s.refresh()}},[p]),o)};if(rdx.utils.is_defined(f.add_view_link_name)){e(f.add_view_link_name,g,h.data.wizard._get_resource_for_operation())}else{if(rdx.utils.is_defined(f.add_view_link_name_callback)){var m=new rdx.callback_params({return_callback:new rdx.callback(function(n,s,q){var p=n.view_name;var o=rdx.utils.is_defined(n.resource_data)?n.resource_data:q.data.wizard._get_resource_for_operation();e(p,s,o)},[g,h]),resource_data:h.data.wizard._get_resource_for_operation()});f.add_view_link_name_callback.call_back([m])}}});this._add_to_panel_holder(this.BUTTON_BAR_PANEL,d);a.append(d)}this._title=b}};rdx.op_wizard_page.prototype._add_center_panel=function(){var g=$("<div>");var m=null;var f=null;if(this._properties.center_align){g.addClass("op_wizard_center_panel_border rdx_border_color")}if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title)){if(rdx.utils.is_not_defined(this._base_view.get_crumb_handler())||(rdx.utils.is_defined(this._parent_view)&&this._parent_view==rdx.view_constants.ONE_PAGE_WIZARD_VIEW)){g.addClass("op_wizard_center_panel_top_border")}}this._add_to_panel_holder(this.CENTER_PANEL,g);if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.description)){m=this._view_definition.view_properties.description}if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.image_url)){f=this._view_definition.view_properties.image_url}if(rdx.utils.is_defined(m)){var h=$("<div>");h.append(m);h.addClass("op_wizard_description_panel");this._add_to_panel_holder(this.DESCRIPTION_PANEL,h);g.append(h)}if(rdx.utils.is_defined(f)){var d=$("<div>").addClass("op_wizard_center_left_panel op_wizard_image_panel");var o=$("<div>").addClass("op_wizard_center_right_panel");var a=$("<td>").attr("valign","top").append(d);var e=$("<td>").append(o);var n=$("<table>").append($("<tbody>")).append($("<tr>").append(a).append(e));n.addClass("op_wizard_center_panel_table");var b=$("<img>").addClass("op_wizard_image").attr("src",rdx.images.get_app_url(f)).attr("alt",f);d.append(b);this._add_to_panel_holder(this.CENTER_LEFT_PANEL,d);g.append(n);this._add_content_panel(o,g);this._add_to_panel_holder(this.CENTER_RIGHT_PANEL,o)}else{this._add_content_panel(g,g)}this._page_container.append(g)};rdx.op_wizard_page.prototype._add_content_panel=function(a,b){var d=$("<div>");if(this._properties.center_align){d.addClass("op_wizard_content_panel")}a.append(d);this._add_form_content(d);this._add_bottom_navigation_bar(b);this._add_to_panel_holder(this.CONTENT_PANEL,d)};rdx.op_wizard_page.prototype._add_form_content=function(b){b.append(this._form_panel);var d=this._properties;var e=d.standalone_mode?{}:this._resource.properties;if(rdx.utils.is_not_defined(d.submit_operation)||rdx.utils.is_not_defined(d.submit_operation.method)){d.submit_operation={method:rdx.model_constants.ADD,action:null}}var a=$("<div>");if(rdx.utils.is_defined(this._title_bar)){a=this._title_bar.add_crumb(this._title,this._base_view)}else{this._form_panel.append(a)}if(this._properties.center_align){a.addClass("op_wizard_form_panel")}d.form_name=this._view_definition.name?this._view_definition.name:(this._resource?this._resource.name:null);this._form=new rdx.form(a,this._view_definition.resource_properties,e,d);if(rdx.utils.is_defined(this._base_view.get_crumb_handler())){this._form.set_crumb_handler(this._base_view.get_crumb_handler())}this._form.set_form_button_update_callback(new rdx.callback(this,this._handle_button_label_update));this._form.set_keyboard_handler_callback(new rdx.callback(this,this.do_submit));this._form.render();this._form.set_resource(this._resource);this._form.add_form_initialized_event(new rdx.callback(this,this._form_initialized));rdx.form_utils.prefill_form_data(this._form_panel,this._form,this._form,this._form._get_field_resource_response_arrived)};rdx.op_wizard_page.prototype.do_submit=function(){if(!this._form.validate()){return}this._do_submit()};rdx.op_wizard_page.prototype._do_submit=function(){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);var a=this._properties.add_done_button==false;this.handle_submit_button_click(a)};rdx.op_wizard_page.prototype._handle_button_label_update=function(b,e,a){if(this._properties.add_continue_button){var f=this._get_panel("button_bar");if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.is_update_label)&&e.is_update_label==true){f.change_blue_button_label(rdx.i18n.get_string(a))}else{var h=rdx.utils.is_defined(this._properties.continue_button_label)?this._properties.continue_button_label:"rdx.op_wizard_continue_button";f.change_blue_button_label(rdx.i18n.get_string(h))}}if(this._properties.add_done_button){var f=this._get_panel("button_bar");if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.is_update_label)&&e.is_update_label==true){f.change_grey_button_label(dx.i18n.get_string(a))}else{var g=rdx.utils.is_defined(this._properties.ok_button_label)?this._properties.ok_button_label:"rdx.op_wizard_done_button";f.change_grey_button_label(rdx.i18n.get_string(g))}}if(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.hide_button)&&e.hide_button==true){var d=this._get_panel("button_bar");d.hide_grey_button()}};rdx.op_wizard_page.prototype._add_bottom_navigation_bar=function(o){if(this._properties.add_continue_button==false&&this._properties.add_cancel_button==false&&this._properties.add_done_button==false){var q=this._form.get_parent().find("div.form");q.addClass("form_no_button_bar");return}var w=this._form.get_form_holder();var m=w.get_field(this._properties.custom_page_navigation_handler_field);if(rdx.utils.is_defined(this._properties.custom_page_navigation_handler_field)&&rdx.utils.is_defined(m)){if(rdx.utils.is_function(m.field.get_component)){var p=m.field.get_component();if(rdx.utils.is_function(p.get_view)&&rdx.utils.is_function(p.get_view().handle_page_navigation)){this._custom_view_handler=p.get_view()}}}var b=$("<table>").addClass("op_wizard_button_panel").attr("cellpadding",0).attr("cellspacing",0).append($("<tbody>"));var h=$("<tr>");b.append(h);var g=$("<td>").addClass("op_wizard_navigation_bar").attr("colspan",2);h.append(g);var v=rdx.utils.is_defined(this._properties.continue_button_label)?this._properties.continue_button_label:"rdx.op_wizard_continue_button";var u=rdx.utils.is_defined(this._properties.custom_form_validator_callback)?this._properties.custom_form_validator_callback:null;var n=rdx.utils.is_defined(this._properties.ok_button_label)?this._properties.ok_button_label:"rdx.op_wizard_done_button";var f=rdx.utils.is_defined(this._properties.cancel_button_label)?this._properties.cancel_button_label:"rdx.op_wizard_cancel_button";var d=rdx.utils.is_defined(this._properties.cancel_button_callback)?this._properties.cancel_button_callback:null;if(this._properties.add_skip_button==true){var a=this._properties.skip_button_label;var e=rdx.utils.is_defined(this._properties.skip_button_handler_callback)?this._properties.skip_button_handler_callback:null}this._button_bar_div=$("<div>").addClass("base_view_button_bar form_buttons");var s={add_blue_button:this._properties.add_continue_button,add_grey_button:true,blue_button_label:v,blue_button_tooltip:null,grey_button_label:f,grey_button_tooltip:null,blue_button_click_handler_callback:new rdx.callback(this.handle_submit_button_click_form_validation,[true,this,u]),grey_button_click_handler_callback:new rdx.callback(this.handle_cancel_button_click,[this,d]),custom_class_names:"form_buttons"};if(!this._properties.add_cancel_button){s.add_grey_button=false}if(this._properties.add_done_button){s.add_blue_button=true;s.blue_button_label=n;s.blue_button_click_handler_callback=new rdx.callback(this.handle_submit_button_click_form_validation,[false,this,u])}if(this._properties.add_skip_button){s.add_grey_button=true;s.grey_button_label=a;s.grey_button_click_handler_callback=new rdx.callback(this.handle_skip_button_click,[this,e])}var t=$("<div>");s=$.extend(true,s,this._properties);this._button_bar=new rdx.button_bar(t,new rdx.form_field({properties:s})).render();this._add_to_panel_holder("button_bar",this._button_bar);this._button_bar_div.append(t);o.append(this._button_bar_div)};rdx.op_wizard_page.prototype.handle_submit_button_click_form_validation=function(d,g,b,e){if($(b).prop("disabled")){return}if(!b.get_form().validate()){return}if(rdx.utils.is_defined(e)){var f=b.get_form();var a=e.call_back([f]);if(!a){return}}b._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);b.handle_submit_button_click(g);if(rdx.utils.is_ie()){$(window).trigger(rdx.events.SCROLL)}};rdx.op_wizard_page.prototype.handle_cancel_button_click=function(d,a,b){if(rdx.utils.is_defined(b)){b.call_back()}else{if(a._properties.cancel_current_page===true){a._trigger_page_change_event(a.get_data(),null,false,true,false)}else{a._parent.trigger(rdx.events.OP_WIZARD_PAGE_CANCELLED)}}};rdx.op_wizard_page.prototype.handle_skip_button_click=function(e,d,a){if(rdx.utils.is_defined(a)){var f=new rdx.callback_params({return_callback:new rdx.callback(function(g,m){if(m._properties.skip_current==true){var h=m._get_resource_for_operation();m._parent.trigger(rdx.events.OP_WIZARD_PAGE_CHANGED,[{},h,false,true,false])}else{m._parent.trigger(rdx.events.OP_WIZARD_PAGE_CANCELLED)}},[d])});a.call_back([f])}else{if(d._properties.skip_current==true){var b=d._get_resource_for_operation();d._parent.trigger(rdx.events.OP_WIZARD_PAGE_CHANGED,[{},b,false,true,false])}else{d._parent.trigger(rdx.events.OP_WIZARD_PAGE_CANCELLED)}}};rdx.op_wizard_page.prototype.get_resource_response_arrived=function(b){var a=rdx.utils.get_formatted_response(b);if(rdx.utils.is_not_defined(a)){this._form.initialize();this._form_initialized(this._form);return}this._form.initialize(a)};rdx.op_wizard_page.prototype._form_initialized=function(a){if(rdx.utils.is_defined(this._view_definition.field_dependencies)){this._field_dependencies=new rdx.dependency(this._form,this._view_definition.field_dependencies)}this.handle_unmask();if(rdx.utils.is_defined(this._field_dependencies)){this._field_dependencies.trigger_dependencies()}if(rdx.utils.is_defined(this._form_panel)){rdx.utils.set_focus_on_first_editable_component(this._form_panel.get(0))}this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE)};rdx.op_wizard_page.prototype.get_form=function(){return this._form};rdx.op_wizard_page.prototype.destroy_view=function(){this._form.destroy_form();this._page_container.remove();if(this._resource.binding_resource){rdx.utils.update_resource_bindings(this._resource)}};rdx.op_wizard_page.prototype._is_add_mode=function(){if(rdx.utils.is_not_defined(this._view_definition.view_properties)||rdx.utils.is_not_defined(this._view_definition.view_properties.submit_operation)){return true}var a=this._view_definition.view_properties.submit_operation.method;if(rdx.utils.is_defined(a)&&a==rdx.model_constants.ADD){return true}return false};rdx.op_wizard_page.prototype._expand_collapse_page=function(){if(this._optional_page_flag){if(!(this._properties.add_index_to_page)){((this._panels_holder[this.TITLE_PANEL]).prev()).addClass("expand")}this._expand_page()}else{if(!(this._properties.add_index_to_page)&&(((this._panels_holder[this.TITLE_PANEL]).prev()).hasClass("expand"))){((this._panels_holder[this.TITLE_PANEL]).prev()).removeClass("expand")}this._collapse_page()}};rdx.op_wizard_page.prototype._expand_page=function(){this._panels_holder[this.CENTER_PANEL].slideDown();if(this._properties.add_continue_button==true||this._properties.add_cancel_button==true){$(this._panels_holder.button_bar).slideDown()}this._optional_page_flag=false;if(rdx.utils.is_defined(this._form_panel)){rdx.utils.set_focus_on_first_editable_component(this._form_panel.get(0))}};rdx.op_wizard_page.prototype._collapse_page=function(){this._panels_holder[this.CENTER_PANEL].slideUp();if(this._properties.add_continue_button==true||this._properties.add_cancel_button==true){$(this._panels_holder.button_bar).slideUp()}this._optional_page_flag=true};rdx.op_wizard_page.prototype._add_close_button=function(){var a=this._panels_holder[this.BUTTON_BAR_PANEL];var d=rdx.utils.is_defined(this._properties.close_button_label)?this._properties.close_button_label:"rdx.op_wizard_close_button";var b=this._get_button(rdx.i18n.get_string(d));b.addClass("cancel_button");this._add_to_panel_holder(this.CLOSE_BUTTON,b);b.bind(rdx.events.CLICK,{op_wizard_page:this},function(e){e.data.op_wizard_page._collapse_page()});a.append(b)};rdx.op_wizard_page.prototype._add_index_to_title=function(){if(rdx.utils.is_defined(this._properties.__index)){var a=this._properties.__index.toString();var b=$("<div>").addClass("optional_page_index");this._panels_holder[this.TOP_PANEL].prepend(b);if(this._properties.add_index_to_page){b.append(a)}else{b.addClass("op_wizard_collapsable_header")}this._panels_holder[this.TITLE_PANEL].addClass("title_border")}};rdx.op_wizard_page.prototype._collapse_other_pages=function(){this._parent.trigger(rdx.events.OP_WIZARD_PAGE_COLLAPSE)};rdx.op_wizard_page.prototype._check_for_optional_page=function(){if(rdx.utils.is_defined(this._properties.__optional)&&this._properties.__optional){this._panels_holder[this.TOP_PANEL].addClass("optional_page_class");this._add_index_to_title();if(this._properties.add_close_button){this._add_close_button()}this._panels_holder[this.CENTER_PANEL].hide();if(rdx.utils.is_defined(this._panels_holder[this.CANCEL_BUTTON])){this._panels_holder[this.CANCEL_BUTTON].hide()}if(rdx.utils.is_defined(this._panels_holder[this.BUTTON_BAR_TABLE])){this._panels_holder[this.BUTTON_BAR_TABLE].hide()}$(this).bind(rdx.events.PAGE_COLLAPSE,{op_wizard_page:this},function(a){if(!a.data.op_wizard_page._optional_page_flag){a.data.op_wizard_page._expand_collapse_page()}});$(this).bind(rdx.events.PAGE_EXPAND,{op_wizard_page:this},function(a){a.data.op_wizard_page._collapse_other_pages();a.data.op_wizard_page._expand_collapse_page()});this._panels_holder[this.TOP_PANEL].bind(rdx.events.CLICK,{op_wizard_page:this},function(a){a.data.op_wizard_page._collapse_other_pages();a.data.op_wizard_page._expand_collapse_page()})}};rdx.op_wizard_page.prototype.handle_submit_button_click=function(e){var a=this._get_resource_for_operation();var f=null;if(rdx.utils.is_defined(this._custom_view_handler)){var b=this;var d=new rdx.callback_params({return_callback:new rdx.callback(b,b.trigger_page_change_event,[false,e,true])});f=new rdx.callback(this._custom_view_handler,this._custom_view_handler.handle_page_navigation,[d,this._form])}else{f=new rdx.callback(this,this.trigger_page_change_event,[a,false,e])}this._form_controller.set_callback(f);this._form_controller.do_model_operation()};rdx.op_wizard_page.prototype.trigger_page_change_event=function(e,d,f,g,b){this._model_exec_service_result=e;if(rdx.utils.is_defined(this._properties.resource_data_massage_callback)){var a=new rdx.callback_params({return_callback:new rdx.callback(this,this._trigger_page_change_event,[e,f,g,b]),response:rdx.utils.is_defined(e)?e.get_collated_response():null,resource_data:d});this._properties.resource_data_massage_callback.call_back([a])}else{this._trigger_page_change_event(d,e,f,g,b)}};rdx.op_wizard_page.prototype._trigger_page_change_event=function(b,d,e,g,a){var f={};if(this._properties.standalone_mode==false){f[this._resource.name]=b}this._resource_for_operation=f;this._parent.trigger(rdx.events.OP_WIZARD_PAGE_CHANGED,[d,b,e,g,false]);if(rdx.utils.is_defined(a)&&a==true){this._custom_view_handler=null;this.close_view(true)}};rdx.op_wizard_page.prototype._get_resource_for_operation=function(){return rdx.form_utils.get_resource_for_operation(this._form,this._resource,null)};rdx.op_wizard_page.prototype._hide_button=function(a){a.hide();a.removeClass("wizard_show_button")};rdx.op_wizard_page.prototype._show_button=function(a){a.show();a.addClass("wizard_show_button")};rdx.op_wizard_page.prototype._get_button=function(a){var b=$(document.createElement("input"));b.attr("type","button");b.attr("value",a);if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().button_bar_stack.push(b)}return b};rdx.op_wizard_page.prototype._add_to_panel_holder=function(b,a){this._panels_holder[b]=a};rdx.op_wizard_page.prototype._get_panel=function(a){return this._panels_holder[a]};rdx.op_wizard_page.prototype.get_form_controller=function(){return this._form_controller};rdx.op_wizard_page.prototype.get_data=function(){return this.get_form_controller().get_resource_for_operation()};rdx.op_wizard_page.prototype.get_callback_data=function(){return{model_executor_service_result:this._model_exec_service_result,resource_for_operation:this._resource_for_operation,app_context_data:this._base_view.get_view_context().get_app_context_data()}};rdx.op_wizard_page.prototype.close_view=function(a){if(rdx.utils.is_defined(this._custom_view_handler)){return}this._base_view.destroy_view({submit_called:(rdx.utils.is_defined(a)&&a)},false)};rdx.op_wizard_page.prototype.set_parent_view=function(a){this._parent_view=a};rdx.systemlog_view=function(e,d,b,a){this._parent=e;this._view_definition=d;this._resource_definition=b;this._base_view=a;this._view_properties=this._view_definition.view_properties;this._file_name=null;this._directory_name=null;this._container_div=null;this._left_div=null;this._right_div=null;this._content_box=null;this._dir_box=null;this._file_box=null;this._filter_box=null;this._content_box_header=null;this._search_div=null;this._search_properties_div=null;this._pagination_div=null;this._prev_span=null;this._next_span=null;this._match_any_span=null;this._match_any_input=null;this._match_all_span=null;this._match_all_input=null;this._case_sensitive_span=null;this._case_sensitive_input=null;this._regex_span=null;this._regex_input=null;this._file_resource=null;this._refresh_div=null;this._log_container=null;this._no_mesg_container=null;this._content_box_logs_container=null;this._result_count=null;this._reload_div=null;this._select_sort_div=null;this._sort_span_div=null;this._sort_dropdown_list=null;this._dropdown_overlay=null;this._search_component=null;this._search_input=null;this._clear_block=null;this._search_button=null;this._more_div=null;this._dir_box_div=null;this._dir_content=null;this._file_box_div=null;this._file_div=null;this._file_content=null;this._filter_header=null;this._clear_filter=null;this._filter_content=null;this._filter_footer=null;this._filter_components=null;this._filter_button=null;this._filter_properties=null;this._elements=null;this._tags=null;this._time_property=null;this._severity_property=null;this._saved_parsed_component=null;this._sort_order="descending";this._message_source="file";this._removed_search_query="";this._selected_component=null;this.is_back_button_required=true;this._filter_previously_performed=false;this._clear_all_search=false;this._function_call_from_search=false;this._function_call_from_filter=false;this._double_click_search="";this._count_of_messages=0;this._result_elements=[];this._search_query=[];this._filter_components_type={};this._dependendee_context={};this._filter_context_objects={};this._filter_on={};this._systemlog_resource_properties={};this._view_properties_array=[];this._resource_properties_array=[];this._properties_of_number_type=[];this._prev_index=-1;this._next_index=-1;this._start_index=0;this._pageno=1;this._pagesize=50;this._buffer_overflow_pattern="length\\((\\d+)\\)";this._msg_field_pattern="failed for field ([^=]+)=";this._cookie_pattern="failed for (.+)$";this._appfw_regex_field=null;this._context_data=null;this._appfw_deploy_counter=0;this._appfw_profiles_for_bufferoverflow=[];this._appfw_profile_resources={};this._prefilled_data=null;this._title="Log Messages"};rdx.systemlog_view.prototype.make_view=function(){this._populate_view_properties();this._populate_resource_properties();this._create_dom();this._refresh_div.show();this._populate_sort_components();this._populate_filter_components();this._populate_deploy_dropdown_components()};rdx.systemlog_view.prototype._create_dom=function(){this._parent.removeClass("view_div_decorator");this._parent.removeClass("rdx_auto_cursor");this._parent.addClass("systemlog_view base_view_no_view_top_container op_wizard_form_panel form_inline smooth_all_corner custom_view_title_bar");this._container_div=$("<div>").addClass("page-content-syslog clearfix");this._left_div=$("<div>").addClass("section float-left seventy-five-width");this._content_box=$("<div>").addClass("box-container all-border all-round");this._content_box_header=$("<div>").addClass("box-title top-round is-relative content-header");this._search_div=$("<div>").addClass("action-bar is-relative action-bar-shadow search-div");this._search_properties_div=$("<div>").addClass("action-bar is-relative hide search-properties-div");this._pagination_div=$("<div>").addClass("action-bar is-relative adv-search-shadow pagination-div");this._content_box_logs_container=$("<div>").addClass("box-content log_box_container");var o=$("<img/>").addClass("loading").attr("src",rdx.images.IN_PROGRESS_IMG).attr("alt","Loading syslog messages");this._refresh_div=$("<div>").append(o).hide();this._no_mesg_container=$("<div>").addClass("no-matching-record");this._log_container=$("<div>").addClass("log-container");this._content_box_logs_container.append(this._refresh_div);this._content_box_logs_container.append(this._no_mesg_container);this._content_box_logs_container.append(this._log_container);var a=$("<div>").addClass("log-title");var f=$("<span>").append(this._title);this._result_count=$("<span>").addClass("record-count");a.append(f);a.append(this._result_count);this._reload_div=$("<button>").addClass("page-reload btn-icon").attr("title","Refresh syslogs").append($('<span class="hide">Refresh Syslogs</span>'));this._select_sort_div=$("<label>").addClass("sort-div");this._sort_span_div=$("<span>").append(rdx.i18n.get_string("rdx.sort_label")+" ");this._select_sort_div.append(this._sort_span_div);this._content_box_header.append(a);this._content_box_header.append(this._select_sort_div);this._content_box_header.append(this._reload_div);this._deploy_action_div=$("<div>").addClass("deploy-div");this._deploy_span_div=$("<span>").append(rdx.i18n.get_string("rdx.action_label")+" ");this._deploy_action_div.append(this._deploy_span_div);this._content_box_header.append(this._deploy_action_div);this._search_component=$("<div>").addClass("search-component");this._search_input=$("<input/>").attr({type:"text",placeholder:rdx.i18n.get_string("rdx.search")}).addClass("mshandler");this._search_component.append($("<label>").append($('<span class="hide">Search syslog message</span>')).append(this._search_input));this._clear_block=$("<button>").addClass("clear-search btn-icon").append(rdx.i18n.get_string("rdx.clear"));this._search_component.append(this._clear_block);var g=$("<div>").addClass("search-button");this._search_button=$("<input />").addClass("rdx_button rdx_blue_button").attr({type:"button",value:rdx.i18n.get_string("rdx.go_button_label"),title:"Click to search"});g.append(this._search_button);this._more_div=$("<button>").addClass("more-options btn-icon").attr("title","Click to view more search options").append($('<span class="hide">View more search options</span>'));this._search_div.append(this._search_component);this._search_div.append(g);this._search_div.append(this._more_div);var e=$("<div>").addClass("adv-search-div");this._match_any_span=$("<span>").addClass("adv-search-span");this._match_any_input=$("<input />").attr({type:"checkbox",id:"match_any",name:"match_any",value:"match_any"});var h=$("<label>").addClass("adv-search-label").append(rdx.i18n.get_string("rdx.match_any")).attr("for","match_any");this._match_any_span.append(this._match_any_input);this._match_any_span.append(h);e.append(this._match_any_span);this._match_all_span=$("<span>").addClass("adv-search-span");this._match_all_input=$("<input />").attr({type:"checkbox",id:"match_all",name:"match_all",value:"match_all"});var n=$("<label>").addClass("adv-search-label").append(rdx.i18n.get_string("rdx.match_all")).attr("for","match_all");this._match_all_span.append(this._match_all_input);this._match_all_span.append(n);e.append(this._match_all_span);this._match_all_input.prop("checked",true);if(rdx.utils.is_defined(this._view_definition.view_properties.features.search)&&rdx.utils.is_defined(this._view_definition.view_properties.features.search.advanced_search_type)&&this._view_definition.view_properties.features.search.advanced_search_type.length){if($.inArray("case_sensitive",this._view_definition.view_properties.features.search.advanced_search_type)!==-1){this._case_sensitive_span=$("<span>").addClass("adv-search-span");this._case_sensitive_input=$("<input />").attr({type:"checkbox",id:"case_sensitive",name:"case_sensitive",value:"case_sensitive"});var m=$("<label>").addClass("adv-search-label").append(rdx.i18n.get_string("rdx.case_sensitive")).attr("for","case_sensitive");this._case_sensitive_span.append(this._case_sensitive_input);this._case_sensitive_span.append(m);e.append(this._case_sensitive_span)}if($.inArray("regular_expression",this._view_definition.view_properties.features.search.advanced_search_type)!==-1){this._regex_span=$("<span>").addClass("adv-search-span");this._regex_input=$("<input />").attr({type:"checkbox",id:"regular_expression",name:"regular_expression",value:"regular_expression"});var b=$("<label>").addClass("adv-search-label").append(rdx.i18n.get_string("rdx.regular_expression")).attr("for","regular_expression");this._regex_span.append(this._regex_input);this._regex_span.append(b);e.append(this._regex_span)}}this._search_properties_div.append(e);this._prev_span=$("<a>").addClass("pagination-button nav-prev").attr({"data-start":"-1",href:"#"}).append(rdx.i18n.get_string("rdx.prev_page"));this._next_span=$("<a>").addClass("pagination-button nav-next").attr({"data-start":"-1",href:"#"}).append(rdx.i18n.get_string("rdx.table_pagination_next"));this._page_number_span=$("<span>").addClass("page-number");this._pagination_div.append(this._prev_span);this._pagination_div.append(this._next_span);this._pagination_div.append(this._page_number_span);this._content_box.append(this._content_box_header);this._content_box.append(this._search_div);this._content_box.append(this._search_properties_div);this._content_box.append(this._pagination_div);this._content_box.append(this._content_box_logs_container);this._left_div.append(this._content_box);this._container_div.append(this._left_div);if(this._enable_filters){this._right_div=$("<div>").addClass("aside float-left twenty-five-width");this._filter_box=$("<form>").addClass("box-container filter-section all-border all-round")}else{this._left_div.removeClass("float-left seventy-five-width")}if(this._message_source==="file"){this._file_box=$("<div>").addClass("box-container file-block all-border all-round");var d=$("<div>").addClass("box-title top-round aside-font").append(rdx.i18n.get_string("rdx.file"));this._file_box_div=$("<div>").addClass("file-box-content");this._dir_div=$("<div>").addClass("directory-ns-log");this._file_div=$("<div>").addClass("file-ns-log");this._file_box_div.append(this._dir_div);this._file_box_div.append(this._file_div);this._file_box.append(d);this._file_box.append(this._file_box_div);this._right_div.append(this._dir_box);this._right_div.append(this._file_box)}if(this._enable_filters){this._filter_header=$("<div>").addClass("box-title top-round aside-font filter-header").append(rdx.i18n.get_string("rdx.filter_by_label"));this._clear_filter=$("<span>").addClass("clear-all-filters").append(rdx.i18n.get_string("rdx.clear"));this._filter_header.append(this._clear_filter);this._filter_content=$("<div>").addClass("box-content list");this._filter_box.append(this._filter_header);this._filter_box.append(this._filter_content);this._right_div.append(this._filter_box);this._container_div.append(this._right_div)}this._parent.append(this._container_div);if($(".dropdown-overlay").length<1){this._dropdown_overlay=$("<div>").addClass("dropdown-overlay");this._dropdown_overlay.hide();$("body").prepend(this._dropdown_overlay)}else{this._dropdown_overlay=$(".dropdown-overlay")}};rdx.systemlog_view.prototype._populate_view_properties=function(){this._message_source=this._view_definition.message_source||"file";this.is_back_button_required=$.extend(true,this._view_definition.is_back_button_required);this._message_resource_name=(this._message_source==="file")?this._view_definition.message_resource_name:this._view_definition.resource_name;if(rdx.utils.is_defined(this._view_definition.view_context)){this._pagesize=this._view_definition.view_context.custom.pagesize||50}this._enable_filters=rdx.utils.is_defined(this._view_definition.enable_filters)?this._view_definition.enable_filters:true;var b=this._message_source==="file"?this._view_definition.message_resource_properties:this._view_definition.resource_properties;for(var a=0;a<b.length;a++){var d=b[a];if(rdx.utils.is_defined(d.type)){if(d.type==="time"){this._time_property=d.key}if(d.type==="severity"){this._severity_property=d.key}}if(rdx.utils.is_defined(d.display)&&d.display){this._view_properties_array.push(d.key)}if(rdx.utils.is_defined(d.data_type)){this._properties_of_number_type.push(d.key)}}};rdx.systemlog_view.prototype._populate_resource_properties=function(){this._file_resource=rdx.utils.get_resource(this._message_resource_name);var b=this._file_resource.properties;for(var a in b){if(b.hasOwnProperty(a)){var d=b[a];this._systemlog_resource_properties[a]=rdx.i18n.get_string(d.label);this._resource_properties_array.push(a)}}};rdx.systemlog_view.prototype._populate_sort_components=function(){this._sort_dropdown_list=$("<select>").addClass("sort-list list");var b=$("<option>").addClass("dropdown-option sort-order-option").attr("title",rdx.i18n.get_string("rdx.oldest_first")).attr("data-sort_order","ascending").text(rdx.i18n.get_string("rdx.oldest_first"));var a=$("<option>").addClass("dropdown-option sort-order-option selected").attr("title",rdx.i18n.get_string("rdx.oldest_first")).attr("data-sort_order","descending").text(rdx.i18n.get_string("rdx.newest_first"));this._sort_dropdown_list.append(a).append(b);this._sort_dropdown_list.insertAfter(this._sort_span_div)};rdx.systemlog_view.prototype._populate_deploy_dropdown_components=function(){this._deploy_dropdown=$("<div>").addClass("custom-dropdown-container custom-deploy-dropdown-width");this._deploy_dropdown_label=$("<div>").addClass("deploy-dropdown-label deploy-label-position");this._deploy_dropdown_arrow=$("<div>").addClass("deploy-dropdown-arrow");this._deploy_dropdown_list=$("<div>").addClass("deploy-dropdown-list");this._edit_and_deploy_option=$("<div>").addClass("deploy-dropdown-option deploy-disabled");this._edit_and_deploy_option.text(rdx.i18n.get_string("rdx.edit_and_deploy"));this._edit_and_deploy_option.attr("data-deploy_type","edit");this._deploy_option=$("<div>").addClass("deploy-dropdown-option deploy-disabled");this._deploy_option.text(rdx.i18n.get_string("rdx.deploy_label"));this._deploy_option.attr("data-deploy_type","deploy");this._deploy_all_option=$("<div>").addClass("deploy-dropdown-option");this._deploy_all_option.text(rdx.i18n.get_string("rdx.deploy_all_label"));this._deploy_all_option.attr("data-deploy_type","deploy_all");this._deploy_dropdown_list.append(this._edit_and_deploy_option);this._deploy_dropdown_list.append(this._deploy_option);this._deploy_dropdown_list.append(this._deploy_all_option);this._deploy_dropdown_label.text("");this._deploy_dropdown.append(this._deploy_dropdown_label).append(this._deploy_dropdown_arrow).append(this._deploy_dropdown_list);this._deploy_dropdown.insertBefore(this._deploy_span_div)};rdx.systemlog_view.prototype._populate_filter_components=function(){if(!this._enable_filters){return}if(rdx.utils.is_defined(this._view_definition.view_properties.features.filter.filter_on)){this._filter_components=this._view_definition.view_properties.features.filter.filter_on}if(rdx.utils.is_defined(this._view_definition.view_properties.features.filter.filter_properties)){this._filter_properties=this._view_definition.view_properties.features.filter.filter_properties;var t=null;for(var w=0;w<this._filter_components.length;w++){var b=this._filter_components[w];var s=this._filter_properties[b];if(rdx.utils.is_defined(s.dependent_on)){t=s.dependent_on;if(rdx.utils.is_not_defined(s.dependent_data)){rdx.message_box.error(rdx.i18n.get_string("rdx.no_dependent_data_error",{filter_component:b}));return}}if(rdx.utils.is_defined(s.input_type)){this._filter_components_type[b]=s.input_type}else{rdx.message_box.error(rdx.i18n.get_string("rdx.input_type_not_specified_error",{filter_component:b}));return}}if(rdx.utils.is_defined(t)&&(this._filter_properties[t]["input_type"]==="multiple_checkbox")){rdx.message_box.error(rdx.i18n.get_string("rdx.input_type_not_specified_error",{dependent_prop:t}));return}}this._filter_footer=$("<div>").addClass("box-footer");this._filter_button=$("<input />").addClass("rdx_button rdx_blue_button").attr({type:"button",value:rdx.i18n.get_string("rdx.apply_label"),title:"Click to apply filters"});var q=this._message_source==="file"?"("+rdx.i18n.get_string("rdx.in_the_current_page")+")":"";this._filter_info_span=$("<span>").addClass("filter-info").append(q);this._filter_footer.append(this._filter_button);this._filter_footer.append(this._filter_info_span);this._filter_box.append(this._filter_footer);for(var w=0;w<this._filter_components.length;w++){var h=this._filter_components[w];var s=this._filter_properties[h];var F=this._systemlog_resource_properties[h];if(rdx.utils.is_defined(s.dependent_on)){var D=$("<fieldset>").addClass("filter-expandable collapsed disable-div").attr("data-filter_component",h);this._dependendee_context[s.dependent_on]=D}else{var D=$("<fieldset>").addClass("filter-expandable collapsed").attr("data-filter_component",h)}this._filter_context_objects[h]=D;var f=$("<div>").addClass("components-selected-name");var o=$("<a>").attr("href","#").addClass("component-name").append(F);f.append(o);var m=$("<legend>").addClass("filter-title").append(f);if(this._filter_components_type[h]==="check_list"||this._filter_components_type[h]==="text_box"){var a=$("<div>").addClass("filter-content")}else{var a=$("<div>").addClass("multiple-filter-content no-padding")}D.append(m);D.append(a);this._filter_content.append(D);var s=this._filter_properties[h];var C=rdx.utils.is_defined(s.dependent_on)&&this._filter_properties[s.dependent_on].data.length>1;var z=rdx.utils.is_defined(s.dependent_on)&&this._filter_properties[s.dependent_on].data.length===1;if(this._filter_components_type[h]==="multiple_checkbox"){var p=$("<ul />").addClass("dependent-type-filters");var E=rdx.utils.is_defined(s.data)?s.data:null;if(!C&&E){if(rdx.utils.is_defined(s.sort)&&s.sort){E=E.sort()}for(var u=0;u<E.length;u++){var e=$('<input type="checkbox">').addClass("filter-check").attr("data-filter_name",E[u]);var g=$("<label>").addClass("filter-checkbox").append(e).append(E[u]);var B=$("<li/>").append(g).appendTo(p)}}else{if(z){D.removeClass("disable-div");var n=this._filter_properties[s.dependent_on].data[0];this._render_dependant_filters(s,n,h,p)}}a.append(p)}else{if(this._filter_components_type[h]==="check_list"){var E=rdx.utils.is_defined(s.data)?s.data:null;var A=$("<label>").appendTo(a);A.append($('<span class="hide">Source</span>'));if(!C){var d=$("<select>").addClass("filter-dropdown-list list").appendTo(A);$("<option>").addClass("dropdown-option filter-option empty-filter").attr("title","blank option").text("").appendTo(d);E=E.sort();for(var u=0;u<E.length;u++){$("<option>").addClass("dropdown-option filter-option").attr("title",E[u]).text(E[u]).appendTo(d)}}else{if(z){var d=$("<select>").addClass("filter-dropdown-list list").appendTo(A);var n=this._filter_properties[s.dependent_on].data[0];this._render_dependant_filters(s,n,h,d)}}}else{if(this._filter_components_type[h]==="text_box"){var A=$("<label>").append($('<span class="hide">Source</span>'));var v=$('<input name="source">').addClass("ip_textfield").appendTo(A);a.append(A)}}}}};rdx.systemlog_view.prototype.get_resource_response_arrived=function(a){if(this._message_source==="db"){this._handle_log_messages(a)}else{this._populate_response(a)}};rdx.systemlog_view.prototype._handle_log_messages=function(f){var e=null;var d=this;if(rdx.utils.is_defined(d._view_definition.view_context)){d._pageno=d._view_definition.view_context.custom.pageno}if(d._message_source==="db"){var g=this._message_resource_name;var b=f[g]?f[g]:f;var m=d._time_property;if(rdx.utils.is_not_empty(m)){b.sort(function(o,n){if(rdx.utils.is_defined(o,n)){return d._get_comparison_value(d._sort_order,parseInt(o[m]),parseInt(n[m]))}return 0})}var h=(b.length==d._pagesize)?d._pageno+1:-1;var a=(d._pageno>1)?d._pageno-1:-1;e={messages:b,prev:a,next:h,count:b.length}}else{e=f}this._display_log_messages(e)};rdx.systemlog_view.prototype._populate_response=function(a){a=rdx.utils.get_formatted_response(a);this._directory_name=a.log_directory;this._default_file_name=a.default_log_file;this._prefilled_data=this._base_view.get_view_context().get_app_context_data();if(rdx.utils.is_defined(this._prefilled_data)&&rdx.utils.is_defined(this._prefilled_data.syslog_filter)&&rdx.utils.is_defined(this._prefilled_data.syslog_filter["file_name"])){if(rdx.utils.is_not_defined(this._file_name)){this._file_name=this._prefilled_data.syslog_filter["file_name"]}}else{if(rdx.utils.is_defined(this._view_definition.default_file_name)){if(rdx.utils.is_not_defined(this._file_name)){this._file_name=this._view_definition.default_file_name}}else{if(rdx.utils.is_not_defined(this._file_name)){this._file_name=this._default_file_name}}}this._dir_div.empty();this._dir_div.append(this._directory_name);this._display_files(a.files);this._get_syslog_messages([this._file_name,this._start_index])};rdx.systemlog_view.prototype._display_files=function(f){this._file_div.empty();var e=$("<div>").addClass("filelist-dropdown-container");var h=$("<div>").addClass("filelist-dropdown-label").appendTo(e);var m=$("<div>").addClass("filelist-dropdown-arrow").appendTo(e);var a=$("<div>").addClass("filelist-dropdown-list").appendTo(e);this._file_div.append(e);for(var g=0;g<f.length;g++){var d=f[g];var b=d.name;if(b===this._default_file_name){var n=b+" ["+rdx.i18n.get_string("rdx.current_label")+"]"}else{var n=b+" ["+d.file_last_modified_time+"]"}var o=$("<div>").addClass("dropdown-option file-option").attr("data-file_name",b).append(n).appendTo(a);if(b===this._file_name){o.addClass("selected")}}h.append(this._file_name)};rdx.systemlog_view.prototype._get_syslog_messages=function(o){var m=this;this._file_resource=rdx.utils.get_resource(this._message_resource_name);var g={};var b={};var n=this._view_definition.message_resource_url_params;var h=this._file_resource.primary_keys;if(rdx.utils.is_defined(n)){for(var e=0;e<h.length;e++){b[h[e]]=o[e]}}else{n=this._view_definition.view_context;if(this._view_definition.view_properties.pagination){n.custom={pageno:m._pageno,pagesize:m._pagesize}}if(rdx.utils.is_defined(o)){b=o}}var a=new rdx.view_context();a.set_context_data(b,n);g=a.get_url_params();m.set_view_context(a);var f=new rdx.callback(this,this._handle_log_messages);var d=new rdx.callback(this,this._fetch_error);this._log_container.empty();this._refresh_div.show();if(this._message_source==="db"){this._all_log_elements=[];$(".clear-search",this._search_div).trigger("click")}rdx.model.get(this._file_resource,g,f,null,d)};rdx.systemlog_view.prototype._fetch_error=function(a){if(a===undefined){rdx.message_box.error("Could not process the file. File size is too large.")}else{rdx.message_box.error(a)}this._no_mesg_container.hide();this._refresh_div.hide();return};rdx.systemlog_view.prototype._display_log_messages=function(e){this._no_mesg_container.hide();this._log_container.empty();this._log_container.hide();this._page_number_span.empty();var K=e[this._message_resource_name]?e[this._message_resource_name]:e;K=rdx.utils.get_formatted_response(K);var s=K.messages;if(!rdx.utils.is_defined(s)){return}this._prev_index=parseInt(K.prev);this._next_index=parseInt(K.next);this._count_of_messages=K.count||s.length;this._appfw_profiles_for_bufferoverflow=[];var q="";if(this._count_of_messages){this._log_of_appfw_type=false;for(var ab=0;ab<s.length;ab++){var L=s[ab];var p="";var C="";var Q="";var z="";if(rdx.utils.is_defined(this._time_property)&&rdx.utils.is_defined(L[this._time_property])){var M=L[this._time_property];if(rdx.utils.is_defined(M)&&this._message_source==="db"){if(rdx.utils.is_defined(this._view_properties.date_formatter)){M=this._view_properties.date_formatter.call_back([M])}else{M=rdx.view_formatters.seconds_to_date_string_formatter({time:M},"time")}}p="data-"+this._time_property+"='"+L[this._time_property]+"'";C='<div class="log-timestamp">'+M+"</div>"}else{C='<div class="log-timestamp"></div>'}var g="";if(rdx.utils.is_defined(this._severity_property)&&rdx.utils.is_defined(L[this._severity_property])){g=this._get_severity_string(L[this._severity_property]);p=p+" data-"+this._severity_property+"='"+L[this._severity_property]+"'"}if(rdx.utils.is_defined(L.source)){Q=L.source;if(rdx.utils.is_defined(L.host_name)){Q=L.host_name+" ("+Q+")"}}if(rdx.utils.is_defined(L.device_family)){var A=L.device_family;if(rdx.utils.is_defined(L.device_type)){var af=L.device_type;z=('<span class="log-lbl">Device Type:</span><span class="log-data">'+af+"</span>")}}var T='<div class="log-source"> '+Q+"</div>";var E='<div class="log-source"> '+z+"</div>";var P='<div class="log-info">'+C+g+T+E+"</div>";var N=rdx.utils.is_defined(L.full_message)?L.full_message:L.message;N=rdx.utils.is_defined(N)?this._encode_comparator_symbols(N):"";if(this._view_properties.message_format){var J=this._view_properties.message_format;N=J.replace(/\{\{(.*?)\}\}/g,function(ai,ah){return L[ah]})}var d=L.module;var V=L.event_type;var n=L.message;var h=L.profile;var S=false;var ae=false;var f="";var w="";if(V==="APPFW_XSS"||V==="APPFW_SQL"||V==="APPFW_FIELDCONSISTENCY"){w=new RegExp(this._msg_field_pattern,"g");S=true}else{if(V==="APPFW_BUFFEROVERFLOW_URL"||V==="APPFW_BUFFEROVERFLOW_COOKIE"||V==="APPFW_BUFFEROVERFLOW_HDR"){w=new RegExp(this._buffer_overflow_pattern,"g");if($.inArray(h,this._appfw_profiles_for_bufferoverflow)===-1&&rdx.utils.is_defined(h)){this._appfw_profiles_for_bufferoverflow.push(h)}S=true}else{if(V==="APPFW_COOKIE"){w=new RegExp(this._cookie_pattern,"g");S=true}else{if(V==="APPFW_STARTURL"){ae=true;S=true}else{if(V==="APPFW_CSRF_TAG"){var F=L.full_message;var o=new RegExp("cs6=","g");var O=F.search(o);if(O!==-1){var U=F.substr(O+4);var W=U.split(" ");this._context_data=W[0];ae=true;S=true}}}}}}var b=[];if(w!==""&&d==="APPFW"&&S&&rdx.utils.is_defined(L.request_url)){b=w.exec(n)}if(rdx.utils.is_defined(b)&&b.length){this._appfw_regex_field=b[1];var t=this._appfw_regex_field.length;if(this._appfw_regex_field[t-1]==="\\"){this._appfw_regex_field=this._appfw_regex_field.substring(0,t-1)}ae=true}if(d==="APPFW"&&S&&rdx.utils.is_defined(L.request_url)&&ae){this._log_of_appfw_type=true;var v='<p class="log-description appfw-click-to-deploy">'+N+"</p>";var B="";if(rdx.utils.is_defined(this._appfw_regex_field)){B='data-appfw_violation_field="'+this._appfw_regex_field+'"';this._appfw_regex_field=null}else{if(V==="APPFW_CSRF_TAG"&&rdx.utils.is_defined(this._context_data)){B='data-appfw_violation_field="'+this._context_data+'"';this._context_data=null}}f='<div class="appfw-filter-checkbox"><div class="filter-check"></div></div>'}else{var v='<p class="log-description">'+N+"</p>"}var ac="";for(var aa=0;aa<this._view_properties_array.length;aa++){var H=this._view_properties_array[aa];var ad="data-"+H;if(rdx.utils.is_defined(L[H])){var D=L[H];if(H==="session_id"&&(D===""||D==="-")){continue}else{ac=ac+'<span class="component-tag" data-prop="'+H+'">'+this._systemlog_resource_properties[H]+"</span>"}}}for(var Z=0;Z<this._resource_properties_array.length;Z++){var H=this._resource_properties_array[Z];var ad="data-"+H;if(rdx.utils.is_defined(L[H])){var D=L[H];if(typeof D==="string"){D=this._encode_special_symbols(D)}p=p+" "+ad+"='"+D+"'"}}var ag='<div class="property-tags">'+ac+"</div>";if(d==="APPFW"&&S&&rdx.utils.is_defined(L.request_url)&&ae){var R='<div class="log-detail clearfix">'+v+f+ag+"</div>";p=p+" data-appfw_violation_message=1";p=p+" "+B}else{var R='<div class="log-detail">'+v+ag+"</div>"}var u='<div class="log-content clearfix"'+p+">"+P+R+"</div>";q=q+u}this._log_container.html(q);var m=this;if(this._log_of_appfw_type){this._deploy_action_div.show();$(".appfw-filter-checkbox").bind(rdx.events.MOUSE_OVER,function(ah){m._show_appfw_violation_tooltips(ah)});$(".appfw-filter-checkbox").bind(rdx.events.MOUSE_OUT,function(ah){m._remove_appfw_violation_tooltips(ah)})}}else{this._no_mesg_container.html(rdx.i18n.get_string("rdx.no_records_found"));this._no_mesg_container.show()}this._remove_overlay();this._all_log_elements=$(".log-content");if(this._prefilled_data===null){this._prefilled_data=this._base_view.get_view_context().get_app_context_data()}if(rdx.utils.is_defined(this._prefilled_data)&&rdx.utils.is_defined(this._prefilled_data.syslog_filter)){this._refresh_div.show();this._log_container.hide();this._display_with_criteria(this._prefilled_data.syslog_filter)}else{this._refresh_div.hide();this._log_container.show();var G=this._get_count_string(this._count_of_messages);this._result_count.empty().text(G)}var I=this._get_search_placeholder();this._search_input.attr("placeholder",I);if(this._next_index>=0||this._prev_index>=0){if(this._filter_info_span){this._filter_info_span.show()}this._search_div.removeClass("action-bar-shadow");if(this._prev_index===-1){this._prev_span.removeClass("blue-pagination")}else{this._prev_span.attr("data-start",this._prev_index);this._prev_span.addClass("blue-pagination")}if(this._next_index===-1){this._next_span.removeClass("blue-pagination")}else{this._next_span.attr("data-start",this._next_index);this._next_span.addClass("blue-pagination")}this._pagination_div.show();var a=this._get_page_number_string();this._page_number_span.append(a)}else{if(this._next_index===-1&&this._prev_index===-1){if(this._filter_info_span){this._filter_info_span.hide()}this._pagination_div.hide()}}};rdx.systemlog_view.prototype._get_severity_string=function(b){b=this._message_source==="db"?this._get_severity_from_code(b):b;var d=b.toLowerCase();var a=this._to_title_case(d);return'<div class="severity"><span class="'+d+'">'+a+"</span></div>"};rdx.systemlog_view.prototype._get_severity_from_code=function(b){if(rdx.utils.is_defined(this._view_definition.view_properties.features.filter.filter_properties.severity.data)){var d=this._view_definition.view_properties.features.filter.filter_properties.severity.data;var a=parseInt(b);if(rdx.utils.is_defined(d[b])){return d[b]}}return b};rdx.systemlog_view.prototype._to_title_case=function(a){return a.replace(/(?:^|\s)\w/g,function(b){return b.toUpperCase()})};rdx.systemlog_view.prototype._get_search_placeholder=function(){var a=rdx.i18n.get_string("rdx.search");if(this._next_index>=0||this._prev_index>=0){a=a+" "+rdx.i18n.get_string("rdx.in_the_current_page")}return a};rdx.systemlog_view.prototype._get_count_string=function(b){var d=parseInt(b);var a="";if(d<=1){a=" ("+d+" "+rdx.i18n.get_string("rdx.result_text")+")"}else{a=" ("+d+" "+rdx.i18n.get_string("rdx.results_text")+")"}return a};rdx.systemlog_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.systemlog_view.prototype.set_view_context=function(a){return this._base_view.set_view_context(a)};rdx.systemlog_view.prototype._get_page_number_string=function(){var a=this._message_source==="db"?this._pageno:(this._start_index/2000)+1;return"("+rdx.i18n.get_string("rdx.page_label")+" "+a+")"};rdx.systemlog_view.prototype._on_failure=function(){rdx.message_box.error(rdx.i18n.get_string("rdx.syslog_viewer_failed_error"));return};rdx.systemlog_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.systemlog_view.prototype._clear_data=function(a){this._saved_parsed_component=null;this._selected_component=null;this._search_query=[];this._removed_search_query="";this._double_click_search="";this._filter_previously_performed=false;this._function_call_from_search=false;this._function_call_from_filter=false;this._clear_all_search=false;this._count_of_messages=0;this._filter_on={};if(!a){this._prev_index=-1;this._next_index=-1;this._start_index=0}this._appfw_deploy_counter=0;this._success_deployment_counter=0;this._failure_deployment_counter=0;this._failure_deployment_messages=[];this._appfw_profiles_for_bufferoverflow=[];this._appfw_profile_resources={};this._appfw_violation_count=0;if(rdx.utils.is_defined(this._log_violation_checkbox_help)){this._log_violation_checkbox_help.remove_tooltip()}if(rdx.utils.is_defined(this._appfw_action_menu_help)){this._appfw_action_menu_help.remove_tooltip()}};rdx.systemlog_view.prototype.close_view=function(a,b){this._clear_data(false);$(window).unbind("resize");$(window).unbind("scroll",this._handle_page_scroll);this._log_container.unbind("resize");if(rdx.utils.is_not_defined(b)){b=a}this._base_view.destroy_view({submit_called:(rdx.utils.is_defined(b)&&b)},false)};rdx.systemlog_view.prototype.destroy_view=function(a){$(window).unbind("resize");$(window).unbind("scroll",this._handle_page_scroll);this._log_container.unbind("resize")};rdx.systemlog_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.systemlog_view.prototype.register_event_handlers=function(){var a=this;var b;this._content_box_logs_container.bind(rdx.events.CLICK,{systemlog:this},function(d){a._log_container_selected(d)});if(a._message_source!=="db"){this._content_box_logs_container.bind(rdx.events.DOUBLE_CLICK,{systemlog:this},function(d){a._search_selected_text(d)})}this._search_component.bind("mouseover",{systemlog:this},function(d){a._change_cursor(d)});this._search_component.bind(rdx.events.CLICK,{systemlog:this},function(d){a._search_component_helper(d)});this._search_button.bind(rdx.events.CLICK,{systemlog:this},function(d){a._perform_search(d)});this._search_input.bind("keydown",{systemlog:this},function(d){a._key_press_event(d)});$(".file-ns-log").bind(rdx.events.CLICK,{systemlog:this},function(d){a._download_selected_file_contents(d)});this._reload_div.bind(rdx.events.CLICK,{systemlog:this},function(d){d.preventDefault();a._reload_page(d)});this._more_div.bind(rdx.events.CLICK,{systemlog:this},function(d){a._show_advanced_search(d)});this._match_all_input.bind(rdx.events.CLICK,{systemlog:this},function(d){a._toggle_any_or_all_search(d)});this._match_any_input.bind(rdx.events.CLICK,{systemlog:this},function(d){a._toggle_any_or_all_search(d)});this._regex_input.bind(rdx.events.CLICK,{systemlog:this},function(d){a._uncheck_case_sensitive_option(d)});this._case_sensitive_input.bind(rdx.events.CLICK,{systemlog:this},function(d){a._uncheck_regex_option(d)});this._dropdown_overlay.bind(rdx.events.CLICK,{systemlog:this},function(d){a._remove_overlay()});this._deploy_dropdown_label.bind(rdx.events.CLICK,{systemlog:this},function(d){a._show_deploy_options(d)});this._deploy_dropdown_arrow.bind(rdx.events.CLICK,{systemlog:this},function(d){a._show_deploy_options(d)});$(".deploy-dropdown-option").bind(rdx.events.CLICK,{systemlog:this},function(d){a._select_option_and_deploy(d)});$(".deploy-dropdown-option").bind(rdx.events.MOUSE_OVER,{systemlog:this},function(d){a._show_appfw_action_menu_tooltips(d)});$(".deploy-dropdown-option").bind(rdx.events.MOUSE_OUT,{systemlog:this},function(d){a._remove_appfw_action_menu_tooltips(d)});$(".sort-list").on("change",{systemlog:this},function(d){a._select_option_and_sort(d)});if(this._enable_filters){this._filter_content.bind(rdx.events.CLICK,{systemlog:this},function(d){a._show_filter_options(d)});$(".filter-dropdown-list").on("change",{systemlog:this},function(d){a._select_and_display_filters(d)});$(".dependent-type-filters").bind(rdx.events.CLICK,{systemlog:this},function(d){a._check_multiple_filters(d)});this._filter_button.bind(rdx.events.CLICK,{systemlog:this},function(d){a._apply_filters(d)});$(".clear-all-filters").bind(rdx.events.CLICK,{systemlog:this},function(d){a._clear_all_filters(d,true)})}this._pagination_div.bind(rdx.events.CLICK,{systemlog:this},function(d){a._do_pagination(d)});$(window).bind("resize",function(){clearTimeout(b);b=setTimeout(function(){a._calculate_widths()},50)});$(window).bind("scroll",{systemlog_view:a},a._handle_page_scroll)};rdx.systemlog_view.prototype._handle_page_scroll=function(d){if(!rdx.utils.is_defined(d)){return}var a=d.data.systemlog_view;var b=rdx.page.get_sticky_header()?rdx.page.get_header_height():0;if($(this).scrollTop()>=($(".systemlog_view .page-content-syslog").offset().top-b)){if($(".fixed-box-title").length===0){a._content_box_header.addClass("fixed-box-title")}if($(".fixed-action-bar").length===0){a._search_div.addClass("fixed-action-bar")}if($(".fixed-adv-search-bar").length===0){a._search_properties_div.addClass("fixed-adv-search-bar")}if($(".fixed-pagination-bar").length===0){a._pagination_div.addClass("fixed-pagination-bar");if(a._search_properties_div.is(":hidden")){var e=80+b;a._pagination_div.css({top:e+"px"})}else{var e=115+b;a._pagination_div.css({top:e+"px"})}}if(a._message_source==="file"&&a._enable_filters&&$(".fixed-file-section").length===0){a._file_box.addClass("fixed-file-section")}if(a._enable_filters&&$(".fixed-filter-section").length===0){a._filter_box.addClass("fixed-filter-section")}if(a._enable_filters&&a._message_source==="db"){a._filter_box.css("top","0px")}a._calculate_widths()}else{a._content_box_header.removeClass("fixed-box-title");a._search_div.removeClass("fixed-action-bar");a._search_properties_div.removeClass("fixed-adv-search-bar");a._pagination_div.removeClass("fixed-pagination-bar");a._pagination_div.css("top","");if(a._file_box){a._file_box.removeClass("fixed-file-section")}if(a._filter_box){a._filter_box.removeClass("fixed-filter-section")}a._content_box_header.width("auto");a._search_div.width("auto");a._search_properties_div.width("auto");a._pagination_div.width("auto")}};rdx.systemlog_view.prototype.do_scroll_top=function(){$(window).scrollTop(0)};rdx.systemlog_view.prototype._log_container_selected=function(a){if(!rdx.utils.is_defined(a)){return}var b=this._get_target(a);if(b.hasClass("appfw-filter-checkbox")||b.hasClass("filter-check")){this._process_appfw_operation(a)}else{if(b.hasClass("component-tag")){this._parsed_property_selected(a)}else{return}}};rdx.systemlog_view.prototype._show_appfw_violation_tooltips=function(b){if(!rdx.utils.is_defined(b)){return}var d=this._get_target(b);if(rdx.utils.is_defined(this._log_violation_checkbox_help)){this._log_violation_checkbox_help.remove_tooltip()}this._log_violation_checkbox_help=new rdx.tooltip(d);var a={};a.message=rdx.i18n.get_string("rdx.appfw_checkbox_violation_message");this._log_violation_checkbox_help.render(a)};rdx.systemlog_view.prototype._remove_appfw_violation_tooltips=function(a){if(rdx.utils.is_defined(this._log_violation_checkbox_help)){this._log_violation_checkbox_help.remove_tooltip()}};rdx.systemlog_view.prototype._show_appfw_action_menu_tooltips=function(b){if(!rdx.utils.is_defined(b)){return}var e=this._get_target(b);if(rdx.utils.is_defined(this._appfw_action_menu_help)){this._appfw_action_menu_help.remove_tooltip()}this._appfw_action_menu_help=new rdx.tooltip(e);var a={};var d=e.attr("data-deploy_type");if(d==="edit"){a.message=rdx.i18n.get_string("rdx.appfw_edit_and_deploy_violation_message")}else{if(d==="deploy"){a.message=rdx.i18n.get_string("rdx.appfw_deploy_violation_message")}else{if(d==="deploy_all"){a.message=rdx.i18n.get_string("rdx.appfw_deploy_all_violation_message")}}}this._appfw_action_menu_help.render(a)};rdx.systemlog_view.prototype._remove_appfw_action_menu_tooltips=function(a){if(rdx.utils.is_defined(this._appfw_action_menu_help)){this._appfw_action_menu_help.remove_tooltip()}};rdx.systemlog_view.prototype._process_appfw_operation=function(a){if(!rdx.utils.is_defined(a)){return}var m=this._get_target(a);var b=m;if(m.hasClass("appfw-filter-checkbox")){b=$(m.children(".filter-check"))}while(true){if(m.hasClass("log-content")){break}m=m.parent()}var n=this._deploy_dropdown_list.children(".deploy-dropdown-option");var o=null;var e=null;for(var h=0;h<n.length;h++){if($(n[h]).attr("data-deploy_type")==="edit"){o=$(n[h])}else{if($(n[h]).attr("data-deploy_type")==="deploy"){e=$(n[h])}}}if(b.hasClass("checked")){b.removeClass("checked");this._appfw_deploy_counter--;m.removeAttr("data-appfw_edit_violation");m.removeAttr("data-appfw_deploy_violation");this._last_edit_deploy_target=null;if(this._appfw_deploy_counter===0){if(rdx.utils.is_defined(o)){o.addClass("deploy-disabled")}if(rdx.utils.is_defined(e)){e.addClass("deploy-disabled")}}else{if(this._appfw_deploy_counter===1){if(rdx.utils.is_defined(o)){o.removeClass("deploy-disabled")}var d=$(".log-content:visible");for(var f=0;f<d.length;f++){var g=$(d[f]);if(rdx.utils.is_defined(g.attr("data-appfw_deploy_violation"))){g.attr("data-appfw_edit_violation",1);this._last_edit_deploy_target=g;break}}}}}else{b.addClass("checked");this._appfw_deploy_counter++;if(this._appfw_deploy_counter===1){m.attr("data-appfw_edit_violation",1);m.attr("data-appfw_deploy_violation",1);this._last_edit_deploy_target=m;if(rdx.utils.is_defined(o)){o.removeClass("deploy-disabled")}if(rdx.utils.is_defined(e)){e.removeClass("deploy-disabled")}}else{if(rdx.utils.is_defined(this._last_edit_deploy_target)){this._last_edit_deploy_target.removeAttr("data-appfw_edit_violation");this._last_edit_deploy_target=null}m.attr("data-appfw_deploy_violation",1);if(rdx.utils.is_defined(o)){o.addClass("deploy-disabled")}}}};rdx.systemlog_view.prototype._show_deploy_options=function(a){if(this._dropdown_overlay.is(":hidden")){this._deploy_dropdown_list.show();this._dropdown_overlay.show()}else{this._remove_overlay()}};rdx.systemlog_view.prototype._select_option_and_deploy=function(g){var h=this._get_target(g);if(h.hasClass("deploy-disabled")){return}this._remove_overlay();var e=h.text();var a=h.attr("data-deploy_type");h.parent().children(".deploy-dropdown-option").removeClass("selected");h.addClass("selected");this._deploy_dropdown_label.text(e);var f=$(".log-content:visible");this._appfw_bufferflow_violation_occured=false;this._appfw_violation_count=0;for(var d=0;d<f.length;d++){var b=$(f[d]);var m=b.attr("data-event_type");if((a==="edit"&&rdx.utils.is_defined(b.attr("data-appfw_edit_violation"))||(a==="deploy"&&rdx.utils.is_defined(b.attr("data-appfw_deploy_violation")))||(a==="deploy_all"&&rdx.utils.is_defined(b.attr("data-appfw_violation_message"))))){this._appfw_violation_count++;if(m==="APPFW_BUFFEROVERFLOW_URL"||m==="APPFW_BUFFEROVERFLOW_COOKIE"||m==="APPFW_BUFFEROVERFLOW_HDR"){this._appfw_bufferflow_violation_occured=true}}}if(this._appfw_bufferflow_violation_occured){this._fetch_profile_data_for_bufferoverflow(a,f)}else{this._scan_and_deploy_rules(a,f)}};rdx.systemlog_view.prototype._fetch_profile_data_for_bufferoverflow=function(a,h){var b=this;var g=new rdx.model_executor_service(new rdx.callback(b,b._edit_and_deploy_appfw_violation,[a,h]),null,true,null);if(rdx.utils.is_defined(this._appfw_profiles_for_bufferoverflow)&&this._appfw_profiles_for_bufferoverflow.length){var d="appfwprofile";this._appfw_resource=rdx.utils.get_resource(d);for(var f=0;f<this._appfw_profiles_for_bufferoverflow.length;f++){g.add(rdx.model_constants.GET,this._appfw_resource,null,null,this._appfw_profiles_for_bufferoverflow[f],null,null,true)}}var e=g.pending_requests_count();if(e){g.execute()}};rdx.systemlog_view.prototype._edit_and_deploy_appfw_violation=function(h,a,e){var g=h.get_collated_response();this._appfw_profile_resources={};for(var d=0;d<g.length;d++){if(rdx.utils.is_defined(g[d]["appfwprofile"])){var f=g[d]["appfwprofile"][0];if(rdx.utils.is_defined(f)){for(var b in f){if(f.hasOwnProperty(b)&&b==="name"){var m=f[b];this._appfw_profile_resources[m]=f;break}}}}}this._scan_and_deploy_rules(a,e)};rdx.systemlog_view.prototype._scan_and_deploy_rules=function(a,d){if(this._appfw_violation_count<=5){this._appfw_violation_count=5}var n=this;var m=new rdx.model_executor_service(new rdx.callback(n,n._appfw_deploy_success_from_log),new rdx.callback(n,n._appfw_deploy_failure_from_log),true,{progress_bar:true,display_rows:this._appfw_violation_count});var g=0;for(var e=0;e<d.length;e++){var f=$(d[e]);var b=f.attr("data-event_type");if(a==="edit"&&rdx.utils.is_defined(f.attr("data-appfw_edit_violation"))){this._get_appfw_violation_data(a,f,m);return}else{if((a==="deploy"&&rdx.utils.is_defined(f.attr("data-appfw_deploy_violation")))||(a==="deploy_all"&&rdx.utils.is_defined(f.attr("data-appfw_violation_message")))){this._get_appfw_violation_data(a,f,m)}}}var h=m.pending_requests_count();if(h){m.execute()}};rdx.systemlog_view.prototype._get_appfw_violation_data=function(p,h,t){var m=h.attr("data-appfw_violation_field");var z=h.attr("data-event_type");var L=h.attr("data-request_url");var o=h.attr("data-profile");var w=h.attr("data-message");var n=new RegExp(this._cookie_pattern,"g");var M,d,F,C;if(z==="APPFW_FIELDCONSISTENCY"){M=w.substr(w.indexOf("failed for field")+"failed for field ".length);M=M.replace("\\","")}else{if(z==="APPFW_XSS"||z==="APPFW_SQL"){M=w.substr(w.indexOf("failed for field")+"failed for field ".length);M=M.substring(0,M.indexOf("\\"))}else{if(z==="APPFW_BUFFEROVERFLOW_URL"||z==="APPFW_BUFFEROVERFLOW_COOKIE"||z==="APPFW_BUFFEROVERFLOW_HDR"){n=new RegExp(this._buffer_overflow_pattern,"g");d=n.exec(w);M=d&&d[1]}else{if(z==="APPFW_COOKIE"){M=w.substr(w.indexOf("failed for")+"failed for ".length);M=M.replace("\\","")}}}}var I="";this._action_key="";var q="";var v=z;if(z==="APPFW_BUFFEROVERFLOW_URL"||z==="APPFW_BUFFEROVERFLOW_COOKIE"||z==="APPFW_BUFFEROVERFLOW_HDR"){v="APPFW_BUFFEROVERFLOW_"}var E=appfw.profile_action_keys;for(var G=0;G<E.length;G++){var J=E[G];for(var K in J){if(J.hasOwnProperty(K)&&J.filter===v){this._action_key=J.key;q=J.learn}}}if(rdx.utils.is_defined(m)){I=m}if(v==="APPFW_BUFFEROVERFLOW_"){this._deploy_bufferoverflow_violation(p,t,o,this._action_key,z,I);return}var g=appfw.get_relax_binding_from_action_key(this._action_key);this._relax_resrc=rdx.utils.get_resource(g);var D;var s={};var b,f;if(z==="APPFW_XSS"||z==="APPFW_SQL"){I=w.substr(w.indexOf("failed for ")+"failed for ".length);I=I.substring(0,I.indexOf(" "));if(z==="APPFW_XSS"){b=w.substr(w.indexOf('="Bad ')+'="Bad '.length);f=b.split(":");F=f[0];C=f[1];C=C.replace(/"+$/,"");s.value_type=F;s.value=C}else{b=w.substr(w.indexOf("SQL ")+"SQL ".length);b=b.substring(0,b.indexOf(" "));if(b=="SpecialStr"){s.value_type="SpecialString";s.value=w.substring((w.indexOf("("))+1,w.indexOf(")"))}else{if(b=="Keyword"||b=="Wildchar"){s.value_type=b;if(w.indexOf('\\="..')>=0){if(w.indexOf("(")>=0){s.value=w.substring((w.indexOf('\\="..'))+'\\="..'.length,w.indexOf("("))}else{s.value=w.substring((w.indexOf('\\="..'))+'\\="..'.length)}}else{if(w.indexOf("(")>=0){s.value=w.substring((w.indexOf('\\="'))+'\\="'.length,w.indexOf("("))}else{D=w.substring((w.indexOf('\\="'))+'\\="'.length);if(D.charAt(D.length-1)==='"'){D=D.substring(0,D.length-1)}s.value=D}}}}}}s.binding_detail_view={};s.hits="";s.loc=I;s.profilename=o;s.securitycheck=q;s.name=M;if((v==="APPFW_XSS"||v==="APPFW_SQL")&&L!==""){if(L.indexOf("?")!==-1){var e=L.split("?");L=e[0]}}s.url=L;switch(v){case"APPFW_STARTURL":s.fieldname="";break;case"APPFW_XSS":s.fieldname="Field";break;case"APPFW_SQL":s.fieldname="Field";break;case"APPFW_FIELDCONSISTENCY":s.fieldname="Field";break;case"APPFW_COOKIE":s.fieldname="Cookie";s.url="";break;case"APPFW_CSRF_TAG":s.fieldname="";s.action_url=L;s.url=I;break}s.f__orig=$.extend(true,{},s);this._relax_data=appfw.get_learn_data_for_deploy(s,this._action_key,null);var u="";var H="";switch(v){case"APPFW_STARTURL":u="starturl";break;case"APPFW_XSS":u="formactionurl_xss";break;case"APPFW_SQL":u="formactionurl_sql";break;case"APPFW_FIELDCONSISTENCY":u="formactionurl_ffc";break;case"APPFW_COOKIE":u="cookieconsistency";break;case"APPFW_CSRF_TAG":u="csrfformactionurl";H="csrftag";break}var a=this._relax_data[u];this._relax_data.comment=rdx.i18n.get_string("rdx.deployed_from_syslog_viewer");this._relax_data.state="ENABLED";var B=this;if(p==="edit"&&rdx.utils.is_defined(this._relax_data)&&this._action_key!==""){this._relax_data.source_for_edit_op="SyslogViewer";var A=appfw.get_learn_edit_deploy_view_name(this._action_key);rdx.view_utils.show_view_in_slider(rdx.utils.get_view(A),new rdx.callback(B,B._restore_deploy_dropdown_options),this._relax_data,{is_data_set:true})}else{if((p==="deploy"||p==="deploy_all")&&rdx.utils.is_defined(this._relax_data)&&this._relax_resrc!==""){t.add(rdx.model_constants.ADD,this._relax_resrc,this._relax_data,null,null,null,{})}}};rdx.systemlog_view.prototype._appfw_deploy_success_from_log=function(a){this._restore_deploy_dropdown_options()};rdx.systemlog_view.prototype._appfw_deploy_failure_from_log=function(a){this._restore_deploy_dropdown_options()};rdx.systemlog_view.prototype._restore_deploy_dropdown_options=function(){this._deploy_dropdown_label.text("");this._deploy_dropdown_list.children(".deploy-dropdown-option").removeClass("selected")};rdx.systemlog_view.prototype._deploy_bufferoverflow_violation=function(s,p,n,g,b,f){var o=this._appfw_profile_resources[n];if(rdx.utils.is_not_defined(o)){return}appfw.set_cur_profile_name(o.name);appfw.set_cur_profile_resrc(o);var e=appfw.get_profile_type_key(o.type);appfw.set_cur_profile_type(e);appfw.set_cur_action_key(g);var d=parseInt(f);var h=false;if(b==="APPFW_BUFFEROVERFLOW_URL"){var u=o.bufferoverflowmaxurllength;if(d>u){h=true;o.bufferoverflowmaxurllength=d}}else{if(b==="APPFW_BUFFEROVERFLOW_COOKIE"){var u=o.bufferoverflowmaxcookielength;if(d>u){h=true;o.bufferoverflowmaxcookielength=d}}else{if(b==="APPFW_BUFFEROVERFLOW_HDR"){var u=o.bufferoverflowmaxheaderlength;if(d>u){h=true;o.bufferoverflowmaxheaderlength=d}}}}var t=this;if((s==="deploy"||s==="deploy_all")&&h){var m={};m[g]=o.action_key;m.name=o.name;m.bufferoverflowmaxurllength=o.bufferoverflowmaxurllength;m.bufferoverflowmaxcookielength=o.bufferoverflowmaxcookielength;m.bufferoverflowmaxheaderlength=o.bufferoverflowmaxheaderlength;p.add(rdx.model_constants.SET,this._appfw_resource,m,null,null,null,{})}else{if(s==="edit"){var q={};q.action_key=g;q.check_name="Buffer Overflow";q.block=o.block;q.log=o.log;q.remove=o.remove;q.stats=o.stats;q.xout=o.xout;q.check_type="Common";q.learn="disabled";q.more=">>";q.name=o.name;var a=appfw.get_check_setting_view_name(g);rdx.view_utils.show_view_in_slider(rdx.utils.get_view(a),new rdx.callback(t,t._restore_deploy_dropdown_options),q,{is_data_set:true})}else{this._restore_deploy_dropdown_options()}}};rdx.systemlog_view.prototype._parsed_property_selected=function(b){if(!rdx.utils.is_defined(b)){return}var f=this._get_target(b);var v=null;if(f.hasClass("component-grey-tag")){f.removeClass("component-grey-tag");while(true){if(f.hasClass("log-detail")){break}f=f.parent()}var o=f.children(":first");var e=o.text();e=this._encode_comparator_symbols(e);e=this._get_complete_pattern(o,e);this._saved_parsed_component=f;o.html(e)}else{var t=f.data("prop");var m=f.siblings("span.component-tag");if(m.hasClass("component-grey-tag")){m.removeClass("component-grey-tag")}else{if(rdx.utils.is_defined(this._saved_parsed_component)){var o=this._saved_parsed_component.children(":first");var e=o.text();e=this._encode_comparator_symbols(e);e=this._get_complete_pattern(o,e);o.html(e);var u=this._saved_parsed_component.children(":nth-child(2)");var q=u.children();for(var d=0;d<q.length;d++){var n=$(q[d]);if(n.hasClass("component-grey-tag")){n.removeClass("component-grey-tag");break}}}}f.addClass("component-grey-tag");while(true){if(f.hasClass("log-content clearfix")){break}if(f.hasClass("log-detail")){v=f}f=f.parent()}var o=v.children(":first");var p=f.data(t);var g=o.text();g=this._encode_comparator_symbols(g);if(typeof p==="string"){p=this._encode_comparator_symbols(p)}var s=p;if(t==="event_id"){s=new RegExp("\\s"+p+"\\s","g");var h=g.search(s);if(h!==-1){g=g.replace(s,' <span class="keyword">'+p+"</span> ")}else{s=new RegExp("cn1="+p,"g");var a=g.search(s);if(a!==-1){g=g.replace(s,'cn1=<span class="keyword">'+p+"</span>")}else{s=new RegExp("\\["+p+"\\]","g");g=g.replace(s,'[<span class="keyword">'+p+"</span>]")}}}else{if(t==="transaction_id"){s=new RegExp("\\s"+p+"-","g");var h=g.search(s);if(h!==-1){g=g.replace(s,' <span class="keyword">'+p+"</span>-")}else{s=new RegExp("cn2="+p,"g");g=g.replace(s,'cn2=<span class="keyword">'+p+"</span>")}}else{g=g.replace(s,'<span class="keyword">'+p+"</span>")}}g=this._get_complete_pattern(o,g);this._saved_parsed_component=v;o.html(g)}};rdx.systemlog_view.prototype._get_target=function(a){var b=a.target||a.srcElement||a.originalTarget;return $(b)};rdx.systemlog_view.prototype._encode_comparator_symbols=function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;")};rdx.systemlog_view.prototype._encode_special_symbols=function(a){return a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};rdx.systemlog_view.prototype._get_complete_pattern=function(f,g){var e=$(f).find(".search");if(e.length){var a={};for(var d=0;d<e.length;d++){if(!a[$(e[d]).text()]){a[$(e[d]).text()]=true}}for(var b in a){if(a.hasOwnProperty(b)){var h=new RegExp(b,"g");g=g.replace(h,'<span class="search">'+b+"</span>")}}}return g};rdx.systemlog_view.prototype._search_selected_text=function(b){var d=this._get_target(b);if(d.hasClass("property-tags")||d.hasClass("component-tag")||d.hasClass("info")||d.hasClass("err")||d.hasClass("debug")||d.hasClass("emergency")||d.hasClass("alert")||d.hasClass("critical")||d.hasClass("warn")||d.hasClass("notice")){return}var e=this._get_selected_text();var a=$.trim(e);if(!a){return}if(e&&e.removeAllRanges){e.removeAllRanges()}if($.inArray(a,this._search_query)===-1){this._search_query.push(a)}else{return}this._double_click_search=a;this._perform_search(b)};rdx.systemlog_view.prototype._get_selected_text=function(){var a="";if(window.getSelection){a=window.getSelection()}else{if(document.getSelection){a=document.getSelection()}else{if(document.selection){a=document.selection.createRange().text}}}return a};rdx.systemlog_view.prototype._change_cursor=function(a){this._search_component.css("cursor","text")};rdx.systemlog_view.prototype._search_component_helper=function(a){var b=this._get_target(a);if(b.hasClass("clear-search")){this._clear_search_queries(b,a)}else{if(b.hasClass("clear-search-item")){this._remove_search_query(b,a)}else{if(b.hasClass("search-component")){this._search_input.focus()}}}return};rdx.systemlog_view.prototype._clear_search_queries=function(b,a){this._clear_all_search=true;this._search_input.val("");$(b).parent().children(".search-block").remove();this._perform_search(a)};rdx.systemlog_view.prototype._remove_search_query=function(e,d){this._search_input.val("");var a=e.siblings(".search-item").children(".search-value").text();if(this._search_query.length===1){this._removed_search_query=a}else{var b=$.inArray(a,this._search_query);if(b!==-1){this._search_query.splice($.inArray(a,this._search_query),1)}}$(e).parent(".search-block").remove();this._perform_search(d)};rdx.systemlog_view.prototype._perform_search=function(b){if(!rdx.utils.is_defined(b)){this._result_elements=this._all_log_elements;return}var d=$.trim(this._search_input.val());if(!d&&!this._search_query.length){this._result_elements=this._all_log_elements;return}if(d){if($.inArray(d,this._search_query)===-1){this._search_query.push(d)}else{this._search_input.val("");this._result_elements=this._all_log_elements;return}}if(this._function_call_from_filter){this._populate_search_results(d,b)}else{this._no_mesg_container.hide();this._log_container.hide();this._refresh_div.show();var a=this;setTimeout(function(){a._populate_search_results(d,b)},100)}};rdx.systemlog_view.prototype._populate_search_results=function(N,Q){if(this._function_call_from_filter||this._message_source==="db"){this._elements=this._all_log_elements}else{this._function_call_from_search=true;this._apply_filters(Q);this._function_call_from_search=false;this._elements=this._result_elements}this._result_elements=[];if(this._double_click_search){N=this._double_click_search}if(this._search_query.length&&N){this._search_input.val("");this._search_input.attr("placeholder","");this._create_search_block(N)}var E={};if(!this._removed_search_query&&!this._clear_all_search){for(var M=0;M<this._search_query.length;M++){var g=null;if(this._case_sensitive_input.length&&this._case_sensitive_input.prop("checked")){g=new RegExp(this._search_query[M],"g")}else{if(this._regex_input.length&&this._regex_input.prop("checked")){g=new RegExp("("+this._search_query[M]+")","gi")}else{var b=this._escapeRegExp(this._search_query[M]);g=new RegExp("("+b+")","gi")}}E[this._search_query[M]]=g}}var G=0;if(rdx.utils.is_defined(this._saved_parsed_component)){var v=this._saved_parsed_component.children(":nth-child(2)");var m=v.children();for(var L=0;L<m.length;L++){var t=$(m[L]);if(t.hasClass("component-grey-tag")){t.removeClass("component-grey-tag");break}}}for(var M=0;M<this._elements.length;M++){var n=$(this._elements[M]);var z=n.children();var P=z[0];var D=z[1];var H=$(P).children(":first");var d=H.text();var h=$(D).children(":first");var s=$(D).children(":first").text();if(!this._removed_search_query&&!this._clear_all_search){var a=false;var O=[];var q=[];var f=false;if(this._match_any_input.prop("checked")){for(var L=0;L<this._search_query.length;L++){var K=this._search_query[L];var g=E[K];var F=d.search(g);if(F!==-1){O.push(K);f=true}var C=s.search(g);if(C!==-1){q.push(K);f=true}}}else{if(this._match_all_input.prop("checked")){for(var L=0;L<this._search_query.length;L++){var R=false;var K=this._search_query[L];var g=E[K];var F=d.search(g);if(F!==-1){R=true;O.push(K)}var C=s.search(g);if(C!==-1){q.push(K)}else{if(!R){f=false;O=[];q=[];break}}}if(O.length||q.length){f=true}}}if(f){++G;for(var J=0;J<O.length;J++){var w=O[J];var e=E[w];if(this._case_sensitive_input.length&&this._case_sensitive_input.prop("checked")){d=d.replace(e,'<span class="search">'+w+"</span>")}else{if(this._regex_input.length&&this._regex_input.prop("checked")){d=d.replace(e,'<span class="search">$1</span>')}else{d=d.replace(e,'<span class="search">$1</span>')}}}H.html(d);s=this._encode_comparator_symbols(s);for(var I=0;I<q.length;I++){var u=this._encode_comparator_symbols(q[I]);var p=E[u];if(this._case_sensitive_input.length&&this._case_sensitive_input.prop("checked")){s=s.replace(p,'<span class="search">'+u+"</span>")}else{if(this._regex_input.length&&this._regex_input.prop("checked")){s=s.replace(p,'<span class="search">$1</span>')}else{s=s.replace(p,'<span class="search">$1</span>')}}}h.html(s);n.show();this._result_elements.push(n)}else{n.hide()}}else{++G;H.html(d);s=this._encode_comparator_symbols(s);h.html(s);n.show();this._result_elements.push(n)}}var B=this._get_search_placeholder();this._search_input.attr("placeholder",B);if((this._removed_search_query&&(this._search_query.length===1))||this._clear_all_search){this._search_query=[];this._removed_search_query="";this._search_input.attr("placeholder",B);this._clear_block.hide();this._clear_all_search=false}var A=this._get_count_string(G);this._double_click_search="";if(!this._function_call_from_filter){this._result_count.empty().text(A);var o="";if(!G){if(this._next_index>=0||this._prev_index>=0){o=" "+rdx.i18n.get_string("rdx.in_this_page")}this._no_mesg_container.html(rdx.i18n.get_string("rdx.no_records_found")+o);this._no_mesg_container.show()}this._refresh_div.hide();$("html, body").animate({scrollTop:"0px"},0);this._log_container.show()}};rdx.systemlog_view.prototype._create_search_block=function(d){var b=$("<div>").addClass("search-block rollover");var f=$("<div>").addClass("search-item");var a=$("<div>").addClass("search-value").text(d).appendTo(f);var e=$("<span>").addClass("clear-search-item");b.append(e);b.append(f);b.insertBefore(this._search_input);if(this._clear_block.is(":hidden")){this._clear_block.show()}};rdx.systemlog_view.prototype._escapeRegExp=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};rdx.systemlog_view.prototype._key_press_event=function(a){if(!rdx.utils.is_defined(a)){return}if(a.which===13){this._perform_search(a)}else{if(a.which===8&&!this._search_input.val().length){this._remove_search_phrase(a)}}};rdx.systemlog_view.prototype._remove_search_phrase=function(d){if(!rdx.utils.is_defined(d)){return}var e=this._get_target(d);if(e.prev().hasClass("search-block")){e=e.prev();var a=e.children().find(".search-value").text();if(this._search_query.length===1){this._removed_search_query=a}else{var b=$.inArray(a,this._search_query);if(b!==-1){this._search_query.splice($.inArray(a,this._search_query),1)}}e.remove()}this._perform_search(d)};rdx.systemlog_view.prototype._show_file_list_dropdown=function(a){if(!rdx.utils.is_defined(a)){return}var b=this._get_target(a);if(!(b.hasClass("filelist-dropdown-container")||b.hasClass("filelist-dropdown-label")||b.hasClass("filelist-dropdown-arrow"))){return}$(".filelist-dropdown-list").show();if(this._dropdown_overlay.is(":hidden")){this._dropdown_overlay.show()}else{this._remove_overlay()}};rdx.systemlog_view.prototype._download_selected_file_contents=function(f){if(!rdx.utils.is_defined(f)){return}var g=this._get_target(f);var b=this;if(g.hasClass("filelist-dropdown-container")||g.hasClass("filelist-dropdown-label")||g.hasClass("filelist-dropdown-arrow")){$(".filelist-dropdown-list").show()}else{if(g.hasClass("filelist-dropdown-list")||g.hasClass("file-option")){var d=g.attr("data-file_name");this._file_name=d;var a=g.parent();var e=a.parent().children(".filelist-dropdown-label");a.children(".dropdown-option").removeClass("selected");$(e).text(d);g.addClass("selected");this._start_index=0;this._log_container.hide();this._no_mesg_container.hide();this._refresh_div.show();this._revert_settings(f,false);setTimeout(function(){b._get_syslog_messages([b._file_name,b._start_index])},100)}}if(this._dropdown_overlay.is(":hidden")){this._dropdown_overlay.show()}else{this._remove_overlay()}};rdx.systemlog_view.prototype._reload_page=function(b){if(!rdx.utils.is_defined(b)){return}this._log_container.hide();this._no_mesg_container.hide();this._refresh_div.show();var a=false;if(this._next_index>=0||this._prev_index>=0){a=true}this._revert_settings(b,a);this._log_container.empty();if(this._message_source==="db"){this.get_view_context().invalidate_data();this._get_syslog_messages();return}this._file_resource=rdx.utils.get_resource(this._view_definition.resource_name);var d=new rdx.callback(this,this._construct_response);rdx.model.get(this._file_resource,{},d)};rdx.systemlog_view.prototype._revert_settings=function(b,a){this._deploy_action_div.hide();this._edit_and_deploy_option.addClass("deploy-disabled");this._deploy_option.addClass("deploy-disabled");this._deploy_dropdown_label.text("");this._deploy_dropdown_list.children(".deploy-dropdown-option").removeClass("selected");this._remove_overlay();this._clear_data(a);if(!a){this._pagination_div.hide();if(this._search_properties_div.is(":hidden")){this._search_div.addClass("action-bar-shadow")}this._prev_span.removeClass("blue-pagination");this._prev_span.attr("data-start",this._prev_index);this._next_span.removeClass("blue-pagination");this._next_span.attr("data-start",this._next_index);this._filter_info_span.hide()}var d=this._get_search_placeholder();this._search_input.attr("placeholder",d);this._search_component.find(".search-block").remove();this._search_input.attr("placeholder",d);this._clear_block.hide();this._result_count.empty();if(this._enable_filters){this._clear_all_filters(b,false);this._clear_filter.hide()}if(this._case_sensitive_input.length){this._case_sensitive_input.prop("checked",false)}if(this._regex_input.length){this._regex_input.prop("checked",false)}this._match_any_input.prop("checked",false);this._match_all_input.prop("checked",true)};rdx.systemlog_view.prototype._construct_response=function(a){var b=a[this._view_definition.resource_name];this.get_resource_response_arrived(b)};rdx.systemlog_view.prototype._show_advanced_search=function(a){if(!rdx.utils.is_defined(a)){return}if(this._search_properties_div.is(":hidden")){this._search_div.removeClass("action-bar-shadow");if(this._next_index===-1){this._search_properties_div.addClass("adv-search-shadow")}this._search_properties_div.slideDown(100)}else{this._search_properties_div.slideUp(100);this._search_properties_div.removeClass("adv-search-shadow");if(this._next_index===-1){this._search_div.addClass("action-bar-shadow")}}};rdx.systemlog_view.prototype._toggle_any_or_all_search=function(a){var b=this._get_target(a);if(b.attr("value")==="match_any"){this._match_all_input.prop("checked",false);this._match_any_input.prop("checked",true)}else{if(b.attr("value")==="match_all"){this._match_any_input.prop("checked",false);this._match_all_input.prop("checked",true)}}this._perform_search(a)};rdx.systemlog_view.prototype._uncheck_case_sensitive_option=function(a){if(this._case_sensitive_input.prop("checked")){this._case_sensitive_input.prop("checked",false)}};rdx.systemlog_view.prototype._uncheck_regex_option=function(a){if(this._regex_input.prop("checked")){this._regex_input.prop("checked",false)}};rdx.systemlog_view.prototype._show_sorting_options=function(a){if(this._dropdown_overlay.is(":hidden")){this._sort_dropdown_list.show();this._dropdown_overlay.show()}else{this._remove_overlay()}};rdx.systemlog_view.prototype._select_option_and_sort=function(d){this._remove_overlay();this._refresh_div.show();this._log_container.hide();var a=this;var b=d.currentTarget.value;this._sort_order=$(d.target).find("option:selected").attr("data-sort_order");this._selected_component=this._time_property;setTimeout(function(){a._sort_log_messages(d)},100)};rdx.systemlog_view.prototype._remove_overlay=function(){this._dropdown_overlay.hide();$(".filelist-dropdown-list").hide();this._deploy_dropdown_list.hide()};rdx.systemlog_view.prototype._sort_log_messages=function(d){if(!rdx.utils.is_defined(this._selected_component)){return}var b=$(".log-timestamp");var a=this;b.sort(function(f,e){var g=a._get_content_values(f,e);return a._get_comparison_value(a._sort_order,g[0],g[1])});b=b.map(function(){return $(this).closest(".log-content").get(0)});this._log_container.empty();this._log_container.append(b);this._log_container.show();this._refresh_div.hide()};rdx.systemlog_view.prototype._get_content_values=function(e,d){var f=[];var b=new Date($(e).text());var a=new Date($(d).text());f.push(b,a);return f};rdx.systemlog_view.prototype._get_comparison_value=function(e,f,d){if(isNaN(f)||isNaN(d)){return 0}if(e==="descending"){return d-f}else{if(e==="ascending"){return f-d}}return 0};rdx.systemlog_view.prototype._show_filter_options=function(b){var n=this._get_target(b);if(!(n.hasClass("filter-title")||n.hasClass("components-selected-name")||n.hasClass("component-name")||n.hasClass("clear-filter-item"))){return}var h=n;while(true){if(h.hasClass("filter-expandable")){break}h=h.parent()}if(h.hasClass("disable-div")){return}var f=h.attr("data-filter_component");var d=this._filter_components_type[f];if(n.hasClass("clear-filter-item")&&d==="multiple_checkbox"){var o=n.parent(".filter-item-block");var m=o.attr("data-filter_value");o.remove();var p=h.children(".multiple-filter-content");var e=$(p).children(".dependent-type-filters").find("div.filter-check");for(var g=0;g<e.length;g++){if(m===$(e[g]).attr("data-filter_name")){$(e[g]).removeClass("checked");break}}var a=h.children(".filter-title").children(".components-selected-name").children(".filter-item-block");$(a).first().css("margin-left","15px");return}if(h.hasClass("collapsed")){h.removeClass("collapsed").addClass("expanded");if(d==="check_list"||d==="text_box"){h.children(".filter-content").slideDown(100)}else{if(d==="multiple_checkbox"){h.children(".multiple-filter-content").slideDown(100)}}}else{h.removeClass("expanded").addClass("collapsed");if(d==="check_list"||d==="text_box"){h.children(".filter-content").slideUp(100)}else{if(d==="multiple_checkbox"){h.children(".multiple-filter-content").slideUp(100)}}}};rdx.systemlog_view.prototype._select_and_display_filters=function(d){var q=this._get_target(d);var o=d.currentTarget.value;var n=q;var u=n;while(true){if(n.hasClass("filter-dropdown-container")){u=n}if(n.hasClass("filter-expandable")){break}n=n.parent()}$(u).children(".filter-dropdown-label").text(o);var g=n.attr("data-filter_component");if(rdx.utils.is_not_defined(this._dependendee_context[g])){return}var e=$(this._dependendee_context[g]);var b=e.attr("data-filter_component");var p=this._filter_properties[b];var a=null;if(this._filter_components_type[b]==="multiple_checkbox"){var f=e.children(".multiple-filter-content");var a=$(f).children(".dependent-type-filters");var t=e.children(".filter-title").children(".components-selected-name");var v=$(t).children(".filter-item-block");for(var m=0;m<v.length;m++){$(v).remove()}$(a).empty()}else{if(this._filter_components_type[b]==="check_list"){var s=e.children(".filter-content").children(".filter-dropdown-container");var h=$(s).children(".filter-dropdown-label");var a=$(s).children(".filter-dropdown-list");$(a).empty()}}if(q.hasClass("empty-filter")){if(e.hasClass("expanded")){$(f).slideUp(200);e.removeClass("expanded").addClass("collapsed")}e.addClass("disable-div")}else{e.removeClass("disable-div");this._render_dependant_filters(p,o,b,a)}};rdx.systemlog_view.prototype._render_dependant_filters=function(o,n,d,b){if(rdx.utils.is_defined(o.dependent_data)){var h=o.dependent_data;var f=h[n];if(rdx.utils.is_defined(f)){f=f.sort()}else{f=[]}if(this._filter_components_type[d]==="multiple_checkbox"){for(var g=0;g<f.length;g++){var p=$('<input type="checkbox">').addClass("filter-check").attr("data-filter_name",f[g]);var m=$("<label>").addClass("filter-checkbox").append(p).append(f[g]);var q=$("<li/>").append(m);$(b).append(q)}}else{if(this._filter_components_type[d]==="check_list"){var a=$("<option>").addClass("dropdown-option filter-option empty-filter").attr("title","blank option").text("");$(b).append(a);for(var g=0;g<f.length;g++){var e=$("<option>").addClass("dropdown-option filter-option").attr("title",f[g]).text(f[g]);$(b).append(e)}}}}};rdx.systemlog_view.prototype._check_multiple_filters=function(a){var o=this._get_target(a);if(!(o.hasClass("filter-checkbox")||o.hasClass("filter-check"))){return}var h=o;while(true){if(h.hasClass("filter-expandable")){break}h=h.parent()}var e=o;if(o.hasClass("filter-checkbox")){e=o.children(".filter-check")}var f=h.children(":first");var b=$(f).children(".components-selected-name");var m=e.attr("data-filter_name");var s=$(b).children(".filter-item-block");if($(e).hasClass("checked")){$(e).removeClass("checked");for(var g=0;g<s.length;g++){if(m===$(s[g]).attr("data-filter_value")){$(s[g]).remove();break}}}else{for(var g=0;g<s.length;g++){if(m===$(s[g]).attr("data-filter_value")){return}}$(e).addClass("checked");var p=$("<div>").addClass("filter-item-block").attr("data-filter_value",m);var q=$("<div>").addClass("filter-item");var d=$("<div>").addClass("filter-value").append(m).appendTo(q);var n=$("<button>").addClass("clear-filter-item btn-icon").append($('<span class="hide">Remove</span>'));p.append(n);p.append(q);if(!s.length){$(p).css("margin-left","15px")}$(b).append(p)}$(s).first().css("margin-left","15px")};rdx.systemlog_view.prototype._apply_filters=function(b){this._filter_on={};var a=this._filter_context_objects;for(var o in a){if(a.hasOwnProperty(o)){var s=a[o];if(this._filter_components_type[o]==="check_list"&&!$(s).hasClass("disable-div")){var m=$(".filter-dropdown-list",s).val();if($.trim(m)){this._filter_on[o]=[m]}}else{if(this._filter_components_type[o]==="multiple_checkbox"){var d=$(s).children(".filter-title").children(".components-selected-name").children(".filter-item-block");if(!d.length){continue}for(var h=0;h<d.length;h++){var m=$(d[h]).attr("data-filter_value");if(!$.trim(m)){continue}if(rdx.utils.is_defined(this._filter_on[o])){this._filter_on[o].push(m)}else{this._filter_on[o]=[m]}}}else{if(this._filter_components_type[o]==="text_box"){var n=$("input[name="+o+"]",s).val();if($.trim(n)){this._filter_on[o]=[n]}}}}}}if(this._message_source==="db"){this._pageno=1;var f=this._view_properties.features.filter.filter_properties.severity;if(this._filter_on.severity&&rdx.utils.is_defined(f.use_code)&&f.use_code===true){var q=this._filter_on.severity;for(var e=0;e<q.length;e++){q[e]=this._view_definition.view_properties.features.filter.filter_properties.severity.data.indexOf(q[e])}}this._filter_on=rdx.url_utils.convert_filter_object_to_regex_form(this._filter_on);this._get_syslog_messages(this._filter_on);return}if($.isEmptyObject(this._filter_on)&&!this._filter_previously_performed&&!this._search_query.length){this._result_elements=this._all_log_elements;this._refresh_div.hide();this._log_container.show();var g=this._get_count_string(this._count_of_messages);this._result_count.empty().text(g);return}if(this._function_call_from_search){this._populate_filter_results(b)}else{this._no_mesg_container.hide();this._log_container.hide();this._refresh_div.show();var p=this;setTimeout(function(){p._populate_filter_results(b)},100)}};rdx.systemlog_view.prototype._populate_filter_results=function(s){if(this._function_call_from_search){this._elements=this._all_log_elements}else{this._function_call_from_filter=true;this._perform_search(s);this._function_call_from_filter=false;this._elements=this._result_elements}this._result_elements=[];var g=0;if($.isEmptyObject(this._filter_on)){for(var t=0;t<this._elements.length;t++){++g;var d=$(this._elements[t]);if(!this._search_query.length&&d.children().find(".search").length){var e=d.children();var m=e[0];var n=e[1];var v=$(m).children(":first");var z=v.text();var f=$(n).children(":first");var b=$(n).children(":first").text();v.html(z);b=this._encode_comparator_symbols(b);f.html(b)}d.show();this._result_elements.push(d)}this._filter_previously_performed=false;this._clear_filter.hide()}else{this._clear_filter.show();for(var t=0;t<this._elements.length;t++){var d=$(this._elements[t]);var o=false;for(var w in this._filter_on){if(this._filter_on.hasOwnProperty(w)&&rdx.utils.is_defined(d.attr("data-"+w))){var h=false;var u=this._filter_on[w];if(u.length>1){for(var q=0;q<u.length;q++){if(d.attr("data-"+w)===u[q]){h=true;break}}}else{if(u.length===1){if(d.attr("data-"+w)===u[0]){h=true}}}if(h){o=true}else{o=false;break}}else{if(rdx.utils.is_not_defined(d.attr("data-"+w))){o=false;break}}}if(o){++g;d.show();this._result_elements.push(d)}else{d.hide()}}this._filter_previously_performed=true}if(!this._function_call_from_search){var p=this._get_count_string(g);this._result_count.empty().text(p);var a="";if(!g){if(this._next_index>=0||this._prev_index>=0){a=" "+rdx.i18n.get_string("rdx.in_this_page");this._filter_info_span.show()}else{this._filter_info_span.hide()}this._no_mesg_container.html(rdx.i18n.get_string("rdx.no_records_found")+a);this._no_mesg_container.show()}this._refresh_div.hide();$("html, body").animate({scrollTop:"0px"},0);this._log_container.show()}};rdx.systemlog_view.prototype._clear_all_filters=function(g,f){var a=this._filter_context_objects;for(var d in a){if(a.hasOwnProperty(d)){var h=a[d];var e=$(h);if(this._filter_components_type[d]==="check_list"&&!e.hasClass("disable-div")){this._remove_checklist_filter(e);if(rdx.utils.is_not_defined(this._dependendee_context[d])){continue}var b=this._dependendee_context[d];this._remove_multiplecheckbox_filter(b,true);$(b).addClass("disable-div")}else{if(this._filter_components_type[d]==="multiple_checkbox"&&!e.hasClass("disable-div")){this._remove_multiplecheckbox_filter(e,false);if(rdx.utils.is_not_defined(this._dependendee_context[d])){continue}var b=this._dependendee_context[d];this._remove_checklist_filter(b);$(b).addClass("disable-div")}else{if(this._filter_components_type[d]==="text_box"&&!e.hasClass("disable-div")){$("input",h).val("")}}}}}if(f){this._apply_filters(g)}};rdx.systemlog_view.prototype._remove_checklist_filter=function(b){var d=$(b).children(".filter-content").children(".filter-dropdown-container");var a=$(d).children(".filter-dropdown-label");$(a).text("");$(a).siblings(".filter-dropdown-list").children(".filter-option").removeClass("selected");if($(b).hasClass("expanded")){$(b).children(".filter-content").slideUp(200);$(b).removeClass("expanded").addClass("collapsed")}};rdx.systemlog_view.prototype._remove_multiplecheckbox_filter=function(h,a){var g=$(h).children(".multiple-filter-content");var b=$(g).children(".dependent-type-filters");var e=$(h).children(".filter-title").children(".components-selected-name");var m=$(e).children(".filter-item-block");for(var d=0;d<m.length;d++){$(m).remove()}if($(h).hasClass("expanded")){$(g).slideUp(200);$(h).removeClass("expanded").addClass("collapsed")}if(a){$(b).empty()}else{var f=$(b).find("div.filter-check");for(var d=0;d<f.length;d++){if($(f[d]).hasClass("checked")){$(f[d]).removeClass("checked")}}}};rdx.systemlog_view.prototype._do_pagination=function(b){var d=this._get_target(b);if(!d.hasClass("blue-pagination")){return}this._start_index=d.attr("data-start");this._log_container.hide();this._no_mesg_container.hide();this._refresh_div.show();this._page_number_span.empty();if(this._message_source==="db"){this._handle_db_pagination(d);return}this._revert_settings(b,true);var a=this;setTimeout(function(){a._get_syslog_messages([a._file_name,a._start_index])},100)};rdx.systemlog_view.prototype._handle_db_pagination=function(a){if(a.hasClass("nav-next")){this._pageno++}else{if(a.hasClass("nav-prev")){this._pageno--}else{return}}var b=$.isEmptyObject(this._filter_on)?null:this._filter_on;this._get_syslog_messages(b)};rdx.systemlog_view.prototype._calculate_widths=function(){var d=$(".log_box_container",this._container_div).outerWidth();var a=this._container_div.outerWidth();var b=((25*a)/100)-12;this._content_box_header.outerWidth(d);this._search_div.outerWidth(d);this._search_properties_div.outerWidth(d);this._pagination_div.outerWidth(d);if(this._file_box){this._file_box.width(b)}if(this._filter_box){this._filter_box.width(b)}};rdx.systemlog_view.prototype.get_is_back_button_required=function(){if(this._view_properties.show_back_button===false){return false}return this.is_back_button_required};rdx.systemlog_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.systemlog_view.prototype.is_title_required=function(){return true};rdx.systemlog_view.prototype._display_with_criteria=function(o){if(rdx.utils.is_defined(o.module)&&o.module!==""){this._appfw_filter_by_module=o.module}if(rdx.utils.is_defined(o.profile)&&o.profile!==""){this._appfw_filter_by_profile=o.profile;if(this._appfw_filter_by_module==="APPFW"){var b="cs1="+this._appfw_filter_by_profile;if($.inArray(b,this._search_query)===-1){this._search_query.push(b)}this._create_search_block(b)}}if(rdx.utils.is_defined(o.search)&&o.search.length){this._appfw_filter_by_search=o.search;for(var J=0;J<this._appfw_filter_by_search.length;J++){var b=this._appfw_filter_by_search[J];if($.inArray(b,this._search_query)===-1){this._search_query.push(b)}this._create_search_block(b)}}var g=this._filter_content.children();for(var Q=0;Q<g.length;Q++){var d=$(g[Q]);if(d.attr("data-filter_component")==="module"&&rdx.utils.is_defined(this._appfw_filter_by_module)){d.removeClass("collapsed").addClass("expanded");d.children(".filter-content").slideDown(200);d.children(".filter-content").children(".filter-dropdown-container").children(".filter-dropdown-label").text(this._appfw_filter_by_module);var T=d.children(".filter-content").find("select");T.val(this._appfw_filter_by_module)}if(d.attr("data-filter_component")==="event_type"&&rdx.utils.is_defined(o.event_types)&&o.event_types!==""){d.removeClass("collapsed").addClass("expanded");d.children(".multiple-filter-content").slideDown(200);var D=d.children(".multiple-filter-content").children(".dependent-type-filters");this._appfw_filter_by_event_types=o.event_types.split("|");var M=this._filter_properties.event_type;$(d).removeClass("disable-div");if(rdx.utils.is_defined(M.dependent_data)){var V=M.dependent_data;var G=V[this._appfw_filter_by_module];G=G.sort()}var F=d.children(":first");var t=$(F).children(".components-selected-name");var e=[];for(var N=0;N<this._appfw_filter_by_event_types.length;N++){var z=this._appfw_filter_by_event_types[N];for(var L=0;L<G.length;L++){if(G[L].indexOf(z)!==-1){e.push(G[L])}}}for(var K=0;K<e.length;K++){var f=$("<div>").addClass("filter-item-block").attr("data-filter_value",e[K]);var w=$("<div>").addClass("filter-item");var C=$("<div>").addClass("filter-value").append(e[K]).appendTo(w);var B=$("<a>").attr("href","#").addClass("clear-filter-item");f.append(B);f.append(w);if(K===0){$(f).css("margin-left","15px")}$(t).append(f)}for(var P=0;P<G.length;P++){var R=$("<li />");var v=$("<div>").addClass("filter-checkbox").append(G[P]);if($.inArray(G[P],e)!==-1){var h=$("<div>").addClass("filter-check checked").attr("data-filter_name",G[P])}else{var h=$('<input type="checkbox">').addClass("filter-check").attr("data-filter_name",G[P])}v.append(h);R.append(v);$(D).append(R)}}if(d.attr("data-filter_component")==="severity"&&rdx.utils.is_defined(o.severity)&&o.severity.length){d.removeClass("collapsed").addClass("expanded");d.children(".multiple-filter-content").slideDown(200);this._appfw_filter_by_severities=o.severity;var M=this._filter_properties.severity;var U=M.data;if(rdx.utils.is_defined(U)){var F=d.children(":first");var t=$(F).children(".components-selected-name");var u=[];for(var I=0;I<this._appfw_filter_by_severities.length;I++){var O=this._appfw_filter_by_severities[I].toUpperCase();if($.inArray(O,U)!==-1){u.push(O)}}for(var H=0;H<u.length;H++){var O=u[H];var f=$("<div>").addClass("filter-item-block").attr("data-filter_value",O);var w=$("<div>").addClass("filter-item");var C=$("<div>").addClass("filter-value").append(O).appendTo(w);var B=$("<a>").attr("href","#").addClass("clear-filter-item");f.append(B);f.append(w);if(H===0){$(f).css("margin-left","15px")}$(t).append(f)}var a=d.children(".multiple-filter-content").children(".dependent-type-filters").children().children(".filter-checkbox").children(".filter-check");for(var E=0;E<a.length;E++){var S=$(a[E]);var A=S.attr("data-filter_name");if($.inArray(A,U)!==-1){S.addClass("checked")}}}}}this._filter_button.trigger("click")};rdx.search_filter_details_view=function(d,b,e,a){this._base_view=a;this._view_definition=b;this._parent=d;this._resource=e;this._DEFAULT_PROPERTIES={add_border:true};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._selected_filter_object=null;this._search_query=[];this._removed_search_query="";this._clear_all_search=false;this._regex_search=false};rdx.search_filter_details_view.prototype.make_view=function(){this._create_dom()};rdx.search_filter_details_view.prototype._create_dom=function(){this._container_div=$("<div>").addClass("search_filter_details_view");if(!this._properties.add_border){this._container_div.css({border:"none"})}this._search_box=$("<label>").addClass("search_filter_search_box");this._category_filter_block=$("<div>").addClass("search_filter_category_filter");var a=$("<div>").addClass("search_filter_category_details");this._search_input_text=$("<input>").attr({type:"text",placeholder:"Search"}).addClass("mshandler");this._search_box.append($('<span class="hide">Search</span>')).append(this._search_input_text);this._clear_search=$("<button>").addClass("clear_search btn-icon").attr("aria-label","Clear search text");this._indicator_object=$("<div>").addClass("category_current_indicator");this._category_filter_block.append(this._indicator_object);var h=$("<ul>").addClass("category_filter_list");if(rdx.utils.is_defined(this._properties)&&rdx.utils.is_defined(this._properties.filter_properties)&&rdx.utils.is_defined(this._properties.filter_properties.filter_values)){var d=this._properties.filter_properties.filter_values;for(var e=0;e<d.length;e++){var n=d[e];var m=$("<li>").addClass("filter_category hide");m.attr("data-filter_value",n.value);if(rdx.utils.is_defined(n.selected)&&n.selected){m.addClass("default")}h.append(m);var g=$("<button>").addClass("category_filter_num btn-icon").text(0);if(rdx.utils.is_defined(n.color)){g.css("background-color",n.color)}m.append(g)}}this._category_filter_block.append(h);if(rdx.utils.is_defined(this._properties)&&rdx.utils.is_defined(this._properties.data_properties)&&rdx.utils.is_defined(this._properties.data_properties.regex_search)&&this._properties.data_properties.regex_search){this._regex_search=true}if(rdx.utils.is_defined(this._properties.filter_properties.show_total)&&this._properties.filter_properties.show_total){var f=$("<div>").addClass("category_info_container");var b=$("<span>").addClass("num_details_label").append("Total: ");this._num_details=$("<span>").addClass("num_details").append(0);f.append(b);f.append(this._num_details);this._category_filter_block.append(f)}else{h.css("margin-right","0px")}this._category_title=$("<div>").addClass("category_title");this._category_title_text=$("<span>").addClass("category_title_text");this._category_title.append(this._category_title_text).append(this._search_box).append(this._clear_search);this._details_list=$("<div>").addClass("details_list");a.append(this._category_title);a.append(this._details_list);a.append(this._show_all);this._container_div.append(this._category_filter_block);this._container_div.append(a);this._parent.append(this._container_div)};rdx.search_filter_details_view.prototype.get_resource_response_arrived=function(d){var v=0;var h=this._properties.filter_properties.count;var n=this._properties.filter_properties.category;if(rdx.utils.is_defined(h)){for(var B=0;B<d.length;B++){var p=d[B][this._properties.filter_properties.category];for(var o=0;o<this._properties.filter_properties.filter_values.length;o++){var A=this._properties.filter_properties.filter_values[o];if(p===A.value){v=v+parseInt(d[B][h])}}}}if(rdx.utils.is_defined(this._properties.filter_properties.show_total)&&this._properties.filter_properties.show_total){this._num_details.empty();this._num_details.append(v)}if(v===0){this._category_title_text.empty();this._category_title.hide();this._details_list.empty();var q=$("<div>").addClass("event_data").append("No data to display");this._details_list.append(q);if(rdx.utils.is_defined(this._properties.data_properties.callback_after_render)){this._properties.data_properties.callback_after_render.call_back()}return}if(rdx.utils.is_defined(d)){this._selected_filter_object=null;var a={};if(rdx.utils.is_defined(n)){if(rdx.utils.is_defined(h)&&rdx.utils.is_defined(n)){var g=$("ul.category_filter_list li",this._container_div);for(var z=0;z<d.length;z++){var s=d[z];for(var w=0;w<g.length;w++){var b=$(g[w]);var e=b.attr("data-filter_value");if(e===s[n]){b.removeClass("hide");$(".category_filter_num",b).text(s[h])}if(b.hasClass("default")&&!b.hasClass("hide")){this._selected_filter_object=b;a.name=n;a.value=e}}}if($.isEmptyObject(a)){for(var t=1;t<g.length;t++){var f=$(g[t]).children(".category_filter_num");if(!$(f).is(":hidden")){this._selected_filter_object=$(g[t]);a.name=n;a.value=$(g[t]).attr("data-filter_value");break}}}}}}if(rdx.utils.is_defined(this._properties)&&rdx.utils.is_defined(this._properties.data_properties)&&rdx.utils.is_defined(this._properties.data_properties.resource_name)){this._static_filter_array=[];var u={};if(!$.isEmptyObject(a)){u[a.name]=a.value}if(rdx.utils.is_defined(this._indicator_object)){this._indicator_object.show()}this._fetch_data(u)}if(rdx.utils.is_defined(this._properties.height)){this._set_detail_list_height()}};rdx.search_filter_details_view.prototype._set_detail_list_height=function(){var b=this._category_filter_block.outerHeight()+this._category_title.outerHeight()+1;var a=this._properties.height-b;this._details_list.css("height",a)};rdx.search_filter_details_view.prototype._fetch_data=function(f){if(this._regex_search&&rdx.utils.is_defined(this._data_resource_property)&&f[this._data_resource_property]){f[this._data_resource_property]="/"+f[this._data_resource_property]+"/"}var b={};var g=[];var o=this._base_view.get_view_context().get_url_params().filter;for(var h=0;h<o.length;h++){var e=o[h];b[e.name]=e.value}if(rdx.utils.is_defined(this._properties.data_properties)&&rdx.utils.is_defined(this._properties.data_properties.view_context)&&rdx.utils.is_defined(this._properties.data_properties.view_context.static_filter)){for(var n in this._properties.data_properties.view_context.static_filter){if(this._properties.data_properties.view_context.static_filter.hasOwnProperty(n)){b[n]=this._properties.data_properties.view_context.static_filter[n]}}}b=$.extend(b,f);for(var n in b){g.push(n)}if(rdx.utils.is_defined(this._properties)&&rdx.utils.is_defined(this._properties.data_properties)&&rdx.utils.is_defined(this._properties.data_properties.resource_name)){this._details_data_resource=rdx.utils.get_resource(this._properties.data_properties.resource_name);var m=new rdx.callback(this,this._display_data_details,[b]);var d=new rdx.callback(this,this._error_occured);if(rdx.utils.is_not_defined(this._properties.show_all)||(rdx.utils.is_defined(this._properties.show_all)&&this._properties.show_all===false)){var p={filter:g,is_query_param:true,custom:{pageno:1,pagesize:10}}}else{var p={filter:g,is_query_param:true}}var a=new rdx.context();a.set_context_data(b,p);url_params=a.get_url_params();rdx.model.get(this._details_data_resource,url_params,m,null,d)}};rdx.search_filter_details_view.prototype._display_data_details=function(a,f){var g=a[this._properties.data_properties.resource_name];if(rdx.utils.is_defined(this._properties.data_properties.response_callback)&&rdx.utils.is_function(this._properties.data_properties.response_callback)){g=this._properties.data_properties.response_callback(g)}this._category_title_text.empty();var d=null;if(rdx.utils.is_defined(this._selected_filter_object)){d=this._selected_filter_object.attr("data-filter_value");this._category_title_text.append(d);this._category_title.show()}this._details_list.empty();if(rdx.utils.is_defined(this._properties)&&rdx.utils.is_defined(this._properties.data_properties)&&rdx.utils.is_defined(this._properties.data_properties.resource_properties)){for(var e in this._properties.data_properties.resource_properties){if(this._properties.data_properties.resource_properties.hasOwnProperty(e)){this._data_resource_property=e}}}var o=0;if(rdx.utils.is_defined(this._data_resource_property)&&rdx.utils.is_defined(g)){for(var h=0;h<g.length;h++){o=o+1;var n=g[h];var q=$("<div>").addClass("event_data").append(n[this._data_resource_property]);this._details_list.append(q)}}else{var q=$("<div>").addClass("event_data").append("No data to display");this._details_list.append(q)}if(rdx.utils.is_defined(this._properties.view_more)&&this._properties.view_more.enabled===true){var b=$("<div>").addClass("event_data");var p=$("<a>").attr("href","#").text(rdx.i18n.get_string("rdx.show_all"));b.append(p);this._details_list.append(b);var s=this;p.bind(rdx.events.CLICK,function(){if(rdx.utils.is_defined(s._properties.view_more)&&rdx.utils.is_defined(s._properties.view_more.click_handler_callback)){s._properties.view_more.click_handler_callback.call_back()}if(rdx.utils.is_defined(s._properties.view_more.view_name)){var v=rdx.page.get_tree_content_pane();v.empty();var t=new rdx.base_view(v,rdx.utils.get_view(s._properties.view_more.view_name));var u=s.get_view_context().get_url_params();if(rdx.utils.is_defined(u)&&u.filter){t.get_view_context()._url_params.filter=$.merge(t.get_view_context()._url_params.filter,u.filter);for(var w=0;w<u.filter.length;w++){t.get_view_context()._properties.static_filter[u.filter[w]["name"]]=u.filter[w]["value"]}}t.prepare_view()}})}if(o>=10&&rdx.utils.is_defined(this._properties.show_all)&&this._properties.show_all===false){this._show_all=$("<div>").addClass("show_all");var m=$("<span>").addClass("show_span").append("Show all");this._show_all.append(m);this._details_list.append(this._show_all)}if(d&&this._selected_filter_object){this._position_selector_indicator(this._selected_filter_object)}};rdx.search_filter_details_view.prototype._position_selector_indicator=function(b){var g=b.outerWidth()-10;var m=this._indicator_object.outerWidth();var h=0;var e=b.prevAll("li");for(var d=0;d<e.length;d++){var f=$(e[d]);if(!f.hasClass("hide")){h+=f.outerWidth()}}var a=10+h+parseInt((g-m)/2);this._indicator_object.css("left",a+"px");this._indicator_object.show()};rdx.search_filter_details_view.prototype._error_occured=function(a){rdx.message_box.error(a)};rdx.search_filter_details_view.prototype.get_is_back_button_required=function(){return false};rdx.search_filter_details_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.search_filter_details_view.prototype.register_event_handlers=function(){var a=this;this._search_input_text.bind("keydown",function(b){a._key_press_event(b)});this._search_box.bind(rdx.events.CLICK,function(b){a._search_component_helper(b)});this._category_filter_block.bind(rdx.events.CLICK,function(b){var d=a._get_target(b);if(d.hasClass("category_filter_num")){a._filter_data(b)}})};rdx.search_filter_details_view.prototype._search_component_helper=function(a){var b=this._get_target(a);if(b.hasClass("clear_search")){this._clear_search_queries(b,a)}else{if(b.hasClass("clear_search_item")){this._remove_search_query(b,a)}else{if(b.hasClass("search_filter_search_box")){this._search_input_text.focus()}}}return};rdx.search_filter_details_view.prototype._clear_search_queries=function(b,a){this._clear_all_search=true;this._search_input_text.val("");$(b).parent().children(".search_block").remove();this._search_query=[];this._perform_search(a)};rdx.search_filter_details_view.prototype._remove_search_query=function(e,d){this._search_input_text.val("");var a=e.siblings(".search_item").children(".search_value").text();if(this._search_query.length===1){this._removed_search_query=a}var b=$.inArray(a,this._search_query);if(b!==-1){this._search_query.splice($.inArray(a,this._search_query),1)}$(e).parent(".search_block").remove();this._perform_search(d)};rdx.search_filter_details_view.prototype._key_press_event=function(a){if(!rdx.utils.is_defined(a)){return}if(a.which===13){this._perform_search(a)}else{if(a.which===8&&!this._search_input_text.val().length){this._remove_search_phrase(a)}}};rdx.search_filter_details_view.prototype._remove_search_phrase=function(d){if(!rdx.utils.is_defined(d)){return}var e=this._get_target(d);if(e.prev().hasClass("search_block")){e=e.prev();var a=e.children().find(".search_value").text();if(this._search_query.length===1){this._removed_search_query=a}var b=$.inArray(a,this._search_query);if(b!==-1){this._search_query.splice($.inArray(a,this._search_query),1)}e.remove()}this._perform_search(d)};rdx.search_filter_details_view.prototype._perform_search=function(a){if(!rdx.utils.is_defined(a)){return}var b=$.trim(this._search_input_text.val());if(!b&&!this._search_query.length&&!this._removed_search_query&&!this._clear_all_search){return}if(b){if($.inArray(b,this._search_query)===-1){this._search_query.push(b)}else{this._search_input_text.val("");return}}this._fetch_search_results(b,a)};rdx.search_filter_details_view.prototype._fetch_search_results=function(e,d){if(this._search_query.length&&e){if(this._clear_search.is(":hidden")){this._clear_search.show()}}var a={};if(this._search_query.length&&rdx.utils.is_defined(this._data_resource_property)){var f=this._search_query.join("|");if(f){a[this._data_resource_property]=f}}if(rdx.utils.is_defined(this._properties.filter_properties.category)&&rdx.utils.is_defined(this._selected_filter_object)){var b=this._selected_filter_object.attr("data-filter_value");a[this._properties.filter_properties.category]=b}this._fetch_data(a);if(this._removed_search_query||this._clear_all_search){this._removed_search_query="";this._search_input_text.attr("placeholder","Search");this._clear_search.hide();this._clear_all_search=false}};rdx.search_filter_details_view.prototype._filter_data=function(d){if(!rdx.utils.is_defined(d)){return}var e=this._get_target(d);if(!e.hasClass("category_filter_num")){return}this._selected_filter_object=e.parent();var a={};if(this._search_query.length&&rdx.utils.is_defined(this._data_resource_property)){var f=this._search_query.join("|");if(f){a[this._data_resource_property]=f}}if(rdx.utils.is_defined(this._properties.filter_properties.category)&&rdx.utils.is_defined(this._selected_filter_object)){var b=this._selected_filter_object.attr("data-filter_value");a[this._properties.filter_properties.category]=b}this._fetch_data(a)};rdx.search_filter_details_view.prototype._get_target=function(a){var b=a.target||a.srcElement||a.originalTarget;return $(b)};rdx.search_filter_details_view.prototype.get_resource_name=function(){return this._view_definition.resource_name};rdx.search_filter_details_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.search_filter_details_view.prototype.add_mask=function(){return true};rdx.configuration_diff_view=function(e,b,f,a){this._parent=e;this._view_definition=b;this._DEFAULT_VIEW_PROPERTIES={config_diff_resource:null,response_type:"XML",conf_file_starts_with:"ns.conf",diff_type:"save_running_diff",config_files_fetch_resource:null,batch_command_resrc:null,batch_command_download_url:null,batch_action:null,click_handler_callback:null,resource:null,display_title:null,batch_config_download_callback:null,resource_operations:null,display_columns:{saved_configuration:true,running_configuration:true,correction_configuration:true}};this._properties=$.extend({},this._DEFAULT_VIEW_PROPERTIES,b.view_properties);this._base_view=a;this.is_back_button_required=true;this._resource=rdx.utils.get_resource(this._properties.config_diff_resource);this._container=$("<div>").addClass("config_diff_container form");this._table_container=$("<div>").addClass("config_diff_table_container");this._saved_cmd_key="saved_cmd";this._running_cmd_key="running_cmd";this._corrective_cmd_key="corrective_cmd";this._saved_cmd_label=rdx.utils.is_defined(this._properties.saved_command_title)?rdx.i18n.get_string(this._properties.saved_command_title):"Saved Configuration";this._running_cmd_label=rdx.utils.is_defined(this._properties.running_command_title)?rdx.i18n.get_string(this._properties.running_command_title):"Running Configuration";this._correction_cmd_label="Correction Configuration";this._submit_button_label="Show configuration difference";this._current_node="Current Node";this._peer_node="Peer Node";this._base_file_map={};this._second_file_map={};this._corrective_commands="";this._batch_command_button_bar=null;this._header_row_div=null;this._number_of_columns=0;for(var d in this._properties.display_columns){if(this._properties.display_columns[d]===true){this._number_of_columns++}}this._commands_data=[];this._column_width=(100/this._number_of_columns)+"%"};rdx.configuration_diff_view.prototype=new rdx.abstract_view();rdx.configuration_diff_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.configuration_diff_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.configuration_diff_view.prototype._mask=function(){rdx.mask.mask_component(this._parent,this._base_view.get_mask_id())};rdx.configuration_diff_view.prototype._unmask=function(){rdx.mask.unmask_component(this._parent,this._base_view.get_mask_id())};rdx.configuration_diff_view.prototype.make_view=function(){this._base_view.remove_decorator();this._mask();switch(this._properties.diff_type){case"view_config":case"save_running_diff":case"ha_save_running_diff":var a=this;setTimeout(function(){var d=$("<div>").addClass("config_diff_top_container config_diff_plain_container");a._container.append(d);if(rdx.utils.is_defined(a._properties.display_title)&&rdx.utils.is_not_empty(a._properties.display_title)){var f=$("<p>").append(a._properties.display_title).addClass("config_diff_title");d.append(f).addClass("display_title")}if(a._properties.diff_type=="view_config"){d.remove();a._container.css("padding-top","0")}a._render_export_button(d);a._container.append(a._table_container);var b=null;var e=null;if(a._properties.diff_type=="ha_save_running_diff"){b={display_str:a._current_node};e={display_str:a._peer_node}}a._render_table(b,e);a._render_close_button(a._container);a._parent.append(a._container);if(rdx.utils.is_defined(a._properties.resource_operations)){a.render_operations()}a._start_process()},100);break;case"revision_diff":case"version_diff":this._render_chooser_form();break}$(window).bind(rdx.events.SCROLL,this,this._scroll_function);rdx.page.add_event_handler(rdx.events.PAGE_RESIZED,new rdx.callback(this,this._resize_view))};rdx.configuration_diff_view.prototype._scroll_function=function(b){var a=rdx.utils.is_defined(b)?b.data:this;scrollTop=$(window).scrollTop();scrollLeft=$(window).scrollLeft();if(rdx.utils.is_defined(a._header_row_div)){if(scrollTop>=$(".back_button_title_bar").height()+rdx.page.get_header_height()+$(".config_diff_top_container").height()+40){a._header_row_div.addClass("fixed")}else{if(a._header_row_div.hasClass("fixed")){a._header_row_div.removeClass("fixed")}}if(scrollLeft>0){a._header_row_div.css("left",0-(scrollLeft)+10)}else{a._header_row_div.css("left","")}}};rdx.configuration_diff_view.prototype._resize_view=function(){var b=rdx.utils.is_defined(this._top_container)?this._top_container:this._base_view.get_parent();var d=rdx.utils.is_defined(this._top_container)?10:12;var a=(b.width()/this._number_of_columns)-d;$(".config_diff_cell_text_node").width(a)};rdx.configuration_diff_view.prototype.get_resource_response_arrived=function(){};rdx.configuration_diff_view.prototype.is_tool_bar_required=function(){return false};rdx.configuration_diff_view.prototype.is_action_bar_required=function(){return false};rdx.configuration_diff_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.configuration_diff_view.prototype.get_base_view=function(){return this._base_view};rdx.configuration_diff_view.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.configuration_diff_view.prototype.refresh_view=function(a){this._table_container.empty();this._start_process()};rdx.configuration_diff_view.prototype._render_close_button=function(b){var d={add_grey_button:true,grey_button_label:"rdx.form_close_button_label",grey_button_click_handler_callback:new rdx.callback(this,this.close_view)};var a=$("<div>").addClass("config_diff_close_button_container");b.append(a);new rdx.button_bar(a,new rdx.form_field({properties:d})).render()};rdx.configuration_diff_view.prototype._render_table=function(b,e){if(rdx.utils.is_defined(this._table_container)){this._table_container.empty()}var a=(rdx.utils.is_defined(b)&&rdx.utils.is_defined(b.display_str))?b.display_str:this._saved_cmd_label;var d=(rdx.utils.is_defined(e)&&rdx.utils.is_defined(e.display_str))?e.display_str:this._running_cmd_label;if(this._properties.diff_type=="view_config"){a=this._properties.display_title;d=this._properties.display_title}this._add_table_row(a,d,this._correction_cmd_label,true)};rdx.configuration_diff_view.prototype._render_chooser_form=function(){var d=this._base_view._view_context.get_app_context_data();var s=null;var b=null;this._top_container=$("<div>").addClass("config_diff_top_container");if(rdx.utils.is_defined(this._properties.display_title)&&rdx.utils.is_not_empty(this._properties.display_title)){var p=$("<p>").append(this._properties.display_title).addClass("config_diff_title");var o=$("<div>").addClass("config_diff_plain_container").append(p).addClass("display_title");this._top_container.append(o)}var g=$("<div>").addClass("config_diff_form op_wizard_form_panel");var n={base_file:{label:"Base File",input_type:rdx.form_constants.LIST,mandatory:false,properties:{size:1,mandatory:true}},second_file:{label:"Second File",input_type:rdx.form_constants.LIST,mandatory:false,properties:{size:1,mandatory:true}}};var f={add_close_button:false,add_create_button:false,add_border:false};var e=new rdx.form(g,n,{base_file:{key:"base_file"},second_file:{key:"second_file"}},f).render();var h=$("<div>").addClass("config_diff_button_bar");var q={add_blue_button:true,blue_button_label:this._submit_button_label,blue_button_click_handler_callback:rdx.utils.is_defined(this._properties.click_handler_callback)?new rdx.callback(this,this._properties.click_handler_callback,[e]):new rdx.callback(this,this._handle_form_button_click,[e])};var m=$("<div>").addClass("config_diff_submit_button_container");h.append(m);new rdx.button_bar(m,new rdx.form_field({properties:q})).render();this._top_container.append(g).append(h);this._render_export_button(h);this._container.append(this._top_container);this._container.append(this._table_container);this._render_close_button(this._container);this._parent.append(this._container);var a="config_files";if(rdx.utils.is_not_empty(d)){b=d.ns_ip_address;s=rdx.url_utils.construct_url_params(s,rdx.url_utils.GET_BY_NAME_TYPE,{ns_ip_address:"ns_ip_address"},{ns_ip_address:b});a=this._resource.name}rdx.model.get(rdx.utils.get_resource(a),s,new rdx.callback(this,this._handle_form_response,[e,b]))};rdx.configuration_diff_view.prototype._render_export_button=function(a){if(rdx.utils.is_defined(this._properties.batch_command_resrc)){var d=$("<div>").addClass("btn_container").appendTo(a);var e={add_grey_button:true,grey_button_label:"rdx.export_corrective_commands",grey_button_click_handler_callback:rdx.utils.is_defined(this._properties.batch_config_download_callback)?new rdx.callback(this,this._properties.batch_config_download_callback):new rdx.callback(this,this._handle_batch_configuration_button_click)};this._batch_command_button_bar=new rdx.button_bar(d,new rdx.form_field({properties:e})).render();this._batch_command_button_bar.disable()}var b=$("<div>").addClass("btn_container").appendTo(a);var e={add_grey_button:true,grey_button_label:"Export diff report",grey_button_click_handler_callback:new rdx.callback(this,this._export_diff_report)};this._export_command_button_bar=new rdx.button_bar(b,new rdx.form_field({properties:e})).render()};rdx.configuration_diff_view.prototype._export_diff_report=function(){var b=[];var g=[];var e=$(".config_diff_row",this._table_container);for(var a=0;a<e.length;a++){var f=$(e[a]);if(f.hasClass("config_diff_header_row")){b=$(".config_diff_cell_text_node",f).map(function(){return $(this).text()}).get()}else{if(f.hasClass("config_diff_row")){var d={};$(".config_diff_cell_text_node",f).each(function(h){d[b[h]]=$(this).text()});g.push(d)}}}rdx.view_utils.JSONToCSVConvertor(g,this._properties.display_title,true,b)};rdx.configuration_diff_view.prototype.render_operations=function(f){var b=this._properties.resource_operations;var g=$("<div>").addClass("resource_operations").appendTo($(".config_diff_top_container")).css("float","right");for(var e in b){if(b.hasOwnProperty(e)){var a=$("<div>").addClass("operation");var d={add_grey_button:true,grey_button_label:b[e]["label"],grey_button_click_handler_callback:b[e]["click_handler_callback"]};d.grey_button_click_handler_callback.params[0]=this._commands_data;this.resource_operations_button_bar=new rdx.button_bar(a,new rdx.form_field({properties:d})).render();this.resource_operations_button_bar.disable();g.append(a)}}};rdx.configuration_diff_view.prototype._handle_form_response=function(f,a,e){var m=a.get_form_holder();var g=f[this._resource.name];g=rdx.utils.is_defined(g)?g:f.remotefiledir;if(rdx.utils.is_not_defined(g)){return}this._base_file_map={};this._second_file_map={};this._base_file_map.RunningConfiguration={file_name:"runningconfig",display_str:"Running Configuration"};this._base_file_map.SavedConfiguration={file_name:"ns.conf",display_str:"Saved Configuration"};for(var b=0;b<g.length;b++){var h=g[b];if(rdx.utils.is_defined(this._properties.resource)){h=g[b][this._properties.resource];this._base_file_map[h]={display_str:h};this._second_file_map[h]={display_str:h};continue}if(h.is_dir=="true"){continue}if(!rdx.utils.starts_with(h.name,this._properties.conf_file_starts_with)){continue}if(this._properties.diff_type=="revision_diff"){this._add_revision_diff_to_map(h)}else{if(this._properties.diff_type=="version_diff"){this._add_version_diff_to_map(h)}}}var m=a.get_form_holder();var n=m.get_field("base_file");var d=m.get_field("second_file");this._add_to_list("base_file",this._base_file_map,a);this._add_to_list("second_file",this._second_file_map,a);this._unmask()};rdx.configuration_diff_view.prototype._add_to_list=function(d,f,e){var a=e.get_form_holder().get_field(d).field;for(var b in f){a.add_item(f[b]["display_str"])}};rdx.configuration_diff_view.prototype._handle_batch_configuration_button_click=function(a){this._mask();var b={commands:this._corrective_commands};rdx.model.post(rdx.utils.get_resource(this._properties.batch_command_resrc),new rdx.callback(this,this._iframe_loader),b,new rdx.callback(this,this._unmask),this._properties.batch_action)};rdx.configuration_diff_view.prototype._iframe_loader=function(){this._unmask();var b=this._properties.batch_command_download_url;b+="?filter=path:%2Ftmp%2Fbatch_commands&rand_key="+window.rand;var a={file_url:b};if(rdx.utils.is_defined(this._download_iframe_holder)){this._download_iframe_holder.remove()}this.DEFAULT_PROPERTIES={file_url:null,error_message:null,failure_callback:null,success_callback:null};var d=$.extend({},this.DEFAULT_PROPERTIES,a);if(rdx.utils.is_not_defined(d.file_url)){return}if(rdx.utils.is_defined(this._download_iframe_holder)){this._download_iframe_holder.remove()}var e=$("<iframe>").attr("frameborder",0).attr("width","0px").attr("height","0px");e.attr("src",d.file_url);$(document.body).append(e);this._download_iframe_holder=e;e.bind(rdx.events.LOAD,{iframe:e,properties:d},function(m){var n=null;try{n=m.data.iframe.contents().text()}catch(h){rdx.message_box.error("File not found");return}if(rdx.utils.is_not_defined(n)){return}var o=m.data.iframe;try{var g=JSON.parse(n);var f=m.data.properties.failure_callback;if(g[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD]!=0){var q=new rdx.callback();if($.inArray(g[rdx.ajax_handler_constants.RESPONSE_TYPE_JSON_ERROR_CODE_FIELD],rdx.ajax_handler_constants.RESPONSE_SESSION_EXPIRY_ERROR_CODES)!=-1){q=new rdx.callback(rdx.utils,rdx.utils.do_logout,[true])}if(rdx.utils.is_defined(f)){f.call_back();q.call_back()}else{rdx.message_box.error(g.message,q)}return}var p=m.data.properties.success_callback;if(rdx.utils.is_defined(p)){p.call_back()}}catch(h){}})};rdx.configuration_diff_view.prototype._handle_form_button_click=function(e,d){this._mask();var a=d.get_form_holder();var b=a.get_field("base_file").field.get_data()+"";b=b.replace(/\s+/g,"");var f=rdx.utils.trim(a.get_field("second_file").field.get_data())+"";f=f.replace(/\s+/g,"");if(rdx.utils.is_empty(b)){new rdx.notification_bar().show("Base File is empty.",rdx.ERROR);return}if(rdx.utils.is_empty(f)){new rdx.notification_bar().show("Second File is empty.",rdx.ERROR);return}if(b==f){new rdx.notification_bar().show("Base File and Second File are same.",rdx.ERROR);return}this._start_process(this._base_file_map[b],this._second_file_map[f])};rdx.configuration_diff_view.prototype._add_revision_diff_to_map=function(g){var h=g.name;var e="ns.conf.NS";if(rdx.utils.starts_with(h,e)){return}if(h==this._properties.conf_file_starts_with){return}else{try{var a=parseInt(h.substring((this._properties.conf_file_starts_with.length+1)));if(isNaN(a)==true){return}var d="Configuration Revision - "+(a+1)+" ( "+g.modified_timestamp+" ) ";var b=d.replace(/\s+/g,"");this._base_file_map[b]={file_name:h,display_str:d};this._second_file_map[b]={file_name:h,display_str:d}}catch(f){}}};rdx.configuration_diff_view.prototype._add_version_diff_to_map=function(f){var g=f.name;var e="ns.conf.NS";if(!rdx.utils.starts_with(g,e)){return}var a=g.substring(e.length);var d="Configuration Release - "+(a)+" ( "+f.modified_timestamp+" ) ";var b=d.replace(/\s+/g,"");this._base_file_map[b]={file_name:g,display_str:d};this._second_file_map[b]={file_name:g,display_str:d}};rdx.configuration_diff_view.prototype._start_process=function(a,b){this._corrective_commands="";switch(this._properties.response_type){case"XML":this._handle_xml_payload(a,b);break}};rdx.configuration_diff_view.prototype._add_table_row=function(e,f,b,h){row_div=$("<div>").addClass("config_diff_row");var d="config_diff_cell";if(h===true){row_div.addClass("config_diff_header_row");d+=" header_cell";this._header_row_div=row_div;var a=rdx.utils.is_defined(this._top_container)?this._top_container:this._base_view.get_parent();var g=a.width()-parseInt(a.css("padding-left"))-parseInt(a.css("padding-right"));this._column_width=parseInt(g/this._number_of_columns)}if(this._properties.display_columns.saved_configuration===true){row_div.append($("<div>").addClass(d).css("width",this._column_width).append($("<span>").addClass("config_diff_cell_text_node").append(e)))}if(this._properties.display_columns.running_configuration===true){row_div.append($("<div>").addClass(d).css("width",this._column_width).append($("<span>").addClass("config_diff_cell_text_node").append(f)))}if(this._properties.display_columns.correction_configuration===true){row_div.append($("<div>").addClass(d).css("width",this._column_width).append($("<span>").addClass("config_diff_cell_text_node").append(b)))}this._table_container.append(row_div)};rdx.configuration_diff_view.prototype._handle_xml_payload=function(f,h){var a=null;if(rdx.utils.is_defined(f)||rdx.utils.is_defined(h)){var g={};if(rdx.utils.is_defined(f)){var e=f.file_name;if(e=="runningconfig"){g.base_file=e}else{g.base_file=encodeURIComponent("/nsconfig/"+e)}}if(rdx.utils.is_defined(h)){var m=h.file_name;if(m=="runningconfig"){g.second_file=m}else{g.second_file=encodeURIComponent("/nsconfig/"+m)}}var d=new rdx.context({static_get_by_name:g,use_args:true});d.set_context_data();a=d.get_url_params()}else{if(this._properties.diff_type=="ha_save_running_diff"){var d=new rdx.context({static_get_by_name:{base_file:"ha_mode",second_file:"ha_mode"},use_args:true});d.set_context_data();a=d.get_url_params()}}var b=rdx.url_utils.get_url(this._resource.get_url,a);rdx.utils.ajax(rdx.ajax_handler_constants.GET,b,a,new rdx.callback(this,this._handle_xml_get,[f,h]),true,null,null,this._properties.response_type)};rdx.configuration_diff_view.prototype._handle_xml_get=function(d,a,b){if(rdx.utils.is_not_defined(d)||(rdx.utils.is_defined(d)&&rdx.utils.is_defined(d.childNodes)&&d.childNodes.length==0)||(rdx.utils.is_defined(d)&&rdx.utils.is_defined(d.childNodes)&&rdx.utils.is_defined(d.childNodes[0])&&rdx.utils.is_defined(d.childNodes[0].childNodes)&&d.childNodes[0].childNodes.length<1)){if(rdx.utils.is_string(a)&&rdx.utils.is_not_empty(a)&&a.toLowerCase().indexOf("not authorized")!=-1){rdx.message_box.error("Not authorized to execute this command")}else{rdx.message_box.error("Error in fetching the configuration")}return}if(rdx.utils.is_defined(d.childNodes)&&d.childNodes.length>0&&(rdx.utils.is_defined(d.childNodes[0].childNodes)&&d.childNodes[0].childNodes.length>=1)&&(rdx.utils.is_defined(d.childNodes[0].childNodes[0])&&d.childNodes[0].childNodes[0].childNodes.length>=1)){this._render_table(a,b);this._process_xml(d.childNodes[0].childNodes[0].childNodes);if(rdx.utils.is_defined(this._batch_command_button_bar)){this._batch_command_button_bar.enable()}}else{rdx.message_box.info("No difference found")}this._unmask()};rdx.configuration_diff_view.prototype._process_xml=function(a){var g=0;var h=1;for(var d=0;d<a.length;d++){var f=a[d];if(f.tagName!="AuditCommand"){continue}if(f.childNodes.length<=1){continue}var m={};var b=f.childNodes[g];var e=f.childNodes[h];m[this._saved_cmd_key]=rdx.utils.is_not_empty($(b).text())?$(b).text():"";this._process_operation_param(m,e);this._add_data_row(m)}};rdx.configuration_diff_view.prototype._process_operation_param=function(h,g){h.params_obj=[];for(var d=0;d<g.childNodes.length;d++){var b=g.childNodes[d].tagName;switch(b){case"CommandInTarget":h[this._running_cmd_key]=rdx.utils.is_not_empty($(g.childNodes[d]).text())?$(g.childNodes[d]).text():"";break;case"CommandToExecute":h[this._corrective_cmd_key]=rdx.utils.is_not_empty($(g.childNodes[d]).text())?$(g.childNodes[d]).text():"";break;case"params":var f={};for(var e=0;e<g.childNodes[d].childNodes.length;e++){var a=g.childNodes[d].childNodes[e];f[a.tagName]=rdx.utils.is_not_empty($(a).text())?$(a).text():""}h.params_obj.push(f);break}}};rdx.configuration_diff_view.prototype._add_data_row=function(g){this._commands_data.push(g);for(var f=0;f<g.params_obj.length;f++){var d=g.params_obj[f];var b=rdx.utils.is_not_empty(d.name)?d.name:"";var e=rdx.utils.is_not_empty(d.value)?d.value:"";var a=rdx.utils.is_not_empty(d.targetvalue)?d.targetvalue:"";this._decorate_command(g,"saved_cmd",b,e,false);this._decorate_command(g,"running_cmd",b,a,true)}if(rdx.utils.is_defined(g[this._corrective_cmd_key])){this._corrective_commands+=g[this._corrective_cmd_key]+"\n"}this._add_table_row(g[this._saved_cmd_key],g[this._running_cmd_key],g[this._corrective_cmd_key],false)};rdx.configuration_diff_view.prototype.add_data_row=function(a){this._add_data_row(a)};rdx.configuration_diff_view.prototype._decorate_command=function(h,m,d,s,f){if(rdx.utils.is_empty(s)||s=='""'){return}if(rdx.utils.is_empty(h[m])){h[m]=" - "}else{var p=h[m].indexOf("-"+d);var t=h[m].indexOf(d);if(p!=-1){var b=h[m].substring(0,p);d="-"+d;var q=b.length+d.length+1+s.length;var n=h[m].substring(q,h[m].length);var o="<span class='config_diff_decorator'>"+d+" "+s+"</span>";h[m]=b+o+n}else{if(p==-1&&t==-1&&f==true){var o="<span class='config_diff_decorator'>"+d+" "+s+"</span>";h[m]=h[m]+" "+o}else{if(t!=-1){var b=h[m].substring(0,t);var n=h[m].substring(t+d.length,h[m].length);var e=n.indexOf(s);var g=d+n.substring(0,e+s.length);var a=n.substring(e+s.length);var o="<span class='config_diff_decorator'>"+g+"</span>";h[m]=b+o+a}}}}};rdx.accordion_view=function(d,b,a){this._parent=d;this._base_view=a;this._view_definition=b;this._view_properties=b.view_properties;this._resource=b.resource_name;this._DEFAULT_PROPERTIES={multi_selection:false,views_generator_callback:null};this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._parent.css("height","100%");this._all_views=[]};rdx.accordion_view.prototype.make_view=function(){this._section_div=$("<div>").addClass("accordion_container");this._parent.append(this._section_div);if(rdx.utils.is_defined(this._view_properties.class_names)){this._section_div.addClass(this._view_properties.class_names)}if(rdx.utils.is_defined(this._view_properties.accordion_view_desc_callback)){var a=this._properties.accordion_view_desc_callback.call_back();this._section_div.append(a)}};rdx.accordion_view.prototype.construct_accordion=function(b){var d;for(d=0;d<b.length;d++){this._view_content_div_container=$("<div>").attr("id",d).addClass("individual_view_container");var a=rdx.utils.is_defined(b[d]["height"])?b[d]["height"]:"100%";this._view_content_div_container.css("height",a);if(!(rdx.utils.is_defined(b[d]["collapsed"])&&b[d]["collapsed"])){this._views_title_container=$("<div>").addClass("individual_view_header expanded")}else{this._views_title_container=$("<div>").addClass("individual_view_header")}this._title_span=$("<a>").addClass("individual_view_title").attr("style","text-decoration:none; color:#000").attr("href","#");if(rdx.utils.is_callback(b[d]["title"])){this._title_span.append(b[d]["title"].call_back())}else{this._title_span.append(b[d]["title"])}if(rdx.utils.is_defined(b[d]["title_click_handler_callback"])){this._title_span.addClass("link");this._title_span.bind(rdx.events.CLICK,{callback:b[d]["title_click_handler_callback"]},function(e){e.data.callback.call_back([e]);e.preventDefault()})}this._arrow_span=$("<a>").addClass("arrow_icons");this._views_title_container.append(this._title_span).append(this._arrow_span);this._views_definition_div=$("<div>").addClass("view_definition_container");this._view_content_div_container.append(this._views_title_container).append(this._views_definition_div);this._section_div.append(this._view_content_div_container);this.prepare_child_views(b[d],this._views_definition_div);if(rdx.utils.is_defined(b[d]["collapsed"])&&b[d]["collapsed"]){this._view_content_div_container.css("height","30px");this._views_definition_div.css("display","none")}this._views_title_container.bind(rdx.events.CLICK,{that:this,header:this._views_title_container,dom:this._views_definition_div,view_property:b[d],view_content_div_container:this._view_content_div_container,view_content_div_container_height:a},function(e){if($(e.data.header).hasClass("expanded")){e.data.view_content_div_container.css("height","30px");$(e.data.header).removeClass("expanded");$(e.data.dom).slideUp(400)}else{e.data.view_content_div_container.css("height",e.data.view_content_div_container_height);$(e.data.header).addClass("expanded");$(e.data.dom).slideDown(600)}if(rdx.utils.is_defined(e.data.view_property.collapsed)&&e.data.view_property.collapsed){e.data.dom.css("display","block");e.data.view_property.collapsed=false}var f=$(e.target).position().top;if(rdx.page.is_slider_visible()===false){window.scrollTo(0,f)}e.preventDefault()})}};rdx.accordion_view.prototype.prepare_child_views=function(f,d){if(rdx.utils.is_defined(f.view_definition)){var b=typeof f.view_definition==="object"?f.view_definition:rdx.utils.get_view(f.view_definition);var a=new rdx.base_view(d,b);a.prepare_view();this._all_views.push(a)}else{if(rdx.utils.is_defined(f.content)){if(rdx.utils.is_callback(f.content)){var e=$("<div>").append(f.content.call_back())}else{var e=$("<div>").append(rdx.i18n.get_string(f.content))}d.append(e)}}};rdx.accordion_view.prototype.get_resource_response_arrived=function(b){var a=[];if(rdx.utils.is_defined(this._view_definition.views)){a=this._view_definition.views}else{if(rdx.utils.is_defined(this._properties.views_generator_callback)){a=this._properties.views_generator_callback.call_back([b])}}this.construct_accordion(a)};rdx.accordion_view.prototype.get_all_option_clicked_callback=function(){return this._view_properties.all_option_clicked_callback};rdx.accordion_view.prototype.get_option_clicked_callback=function(){return this._view_properties.option_clicked_callback};rdx.accordion_view.prototype.refresh_view=function(){this._parent.empty();this._base_view.prepare_view()};rdx.accordion_view.prototype._add_height_to_view_definition_div=function(b,a){var d=a.outerHeight();b.css("height","90%")};rdx.accordion_view.prototype.destroy_view=function(){for(var a=0;a<this._all_views.length;a++){this._all_views[a].destroy_view()}this._parent.empty()};rdx.op_wizard_summary_page=function(d,b,e,a){this._parent=d;this._page_container=null;this._DEFAULT_PROPERTIES={standalone_mode:false,read_only:true,add_create_button:false,add_close_button:false,dialog_mode:false,add_to_bread_crumb:false,add_border:false,two_row_layout_for_fields:true,add_change_link:true,custom_class_names:null,add_view_link_name:null};this._base_view=a;this._view_definition=b;this._parent=d;this._resource=e;this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._form=null;this._panels_holder=new Object();this.TOP_PANEL="top_panel";this.CENTER_PANEL="center_panel";this.CONTENT_PANEL="content_panel";this.CENTER_LEFT_PANEL="center_left_panel";this.CENTER_RIGHT_PANEL="center_right_panel";this.BUTTON_BAR_PANEL="button_bar_panel";this.TITLE_PANEL="title_panel"};rdx.op_wizard_summary_page.prototype=new rdx.abstract_view();rdx.op_wizard_summary_page.prototype.make_view=function(){this.render()};rdx.op_wizard_summary_page.prototype.render=function(){this._page_container=$("<div>").addClass("op_wizard_page").addClass("op_custom_summary_view").addClass("op_wizard_page_border rdx_border").addClass("smooth_all_corner");if(rdx.utils.is_defined(this._properties.custom_class_names)){this._page_container.addClass(this._properties.custom_class_names)}this._parent.append(this._page_container);this._add_top_panel();this._add_center_panel();this._set_optional_page_index()};rdx.op_wizard_summary_page.prototype.add_mask=function(){return true};rdx.op_wizard_summary_page.prototype.handle_unmask=function(){rdx.mask.unmask_component(this._parent,this._base_view.get_mask_id())};rdx.op_wizard_summary_page.prototype._add_top_panel=function(){var d=null;if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.title)){d=this._view_definition.view_properties.title}var a=$("<div>");a.addClass("rdx_top_panel rdx_background");this._add_to_panel_holder(this.TOP_PANEL,a);if(rdx.utils.is_defined(d)||this._properties.add_change_link==true){if(rdx.utils.is_defined(d)){var b=$("<div>").addClass("rdx_title_panel");b.append(rdx.i18n.get_string(d));this._add_to_panel_holder(this.TITLE_PANEL,b)}if(this._view_definition.__add_remove_link==true||this._properties.add_remove_link==true){var e=$("<a>").attr("href","#").addClass("op_wizard_link_panel op_wizard_cross_link").attr("aria-label","Remove");if(rdx.utils.is_defined(this._properties.remove_link_text)){e.removeClass("op_wizard_cross_link").addClass("op_wizard_text_button").text(this._properties.remove_link_text)}e.bind(rdx.events.CLICK,{wizard:this},function(f){if(rdx.utils.is_defined(f.data.wizard._properties.remove_link_callback)){f.data.wizard._properties.remove_link_callback.call_back([f.data.wizard._base_view,f.data.wizard._get_resource_for_operation()])}else{f.data.wizard._base_view.destroy_view()}});a.append(e);if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().op_summary_view_buttons.push([d.concat("_cross_button"),e])}}if(this._properties.add_change_link==true){var e=$("<a>").attr("href","#").addClass("op_wizard_link_panel op_wizard_change_link").attr("aria-label","Form Edit");if(rdx.utils.is_defined(this._properties.change_link_text)){e.removeClass("op_wizard_change_link").addClass("op_wizard_text_button").text(this._properties.change_link_text)}e.bind(rdx.events.CLICK,{wizard:this},function(g){var f=new Object();if(rdx.utils.is_defined(g.data.wizard._resource)){f[g.data.wizard._resource.name]=g.data.wizard._get_resource_for_operation()}if(rdx.utils.is_defined(g.data.wizard._properties.change_link_callback)){g.data.wizard._properties.change_link_callback.call_back([g.data.wizard._base_view,g.data.wizard._get_resource_for_operation()])}else{if(rdx.utils.is_defined(g.data.wizard._view_definition.__change_link_handler_callback)){g.data.wizard._view_definition.__change_link_handler_callback.call_back();return}g.data.wizard._parent.trigger(rdx.events.OP_WIZARD_PAGE_CHANGED,[new rdx.model_executor_service_result({}),f,true,true,true])}});this._add_to_panel_holder(this.BUTTON_BAR_PANEL,e);a.append(e);if(rdx.utils.is_defined(rdx.get_test_framework)&&rdx.get_test_framework().is_test_mode){rdx.get_test_framework().op_summary_view_buttons.push([d.concat("_edit_button"),e])}}if(rdx.utils.is_defined(this._properties.add_view_link_name)){var e=$("<span>").addClass("op_wizard_link_panel op_wizard_view_link");e.bind(rdx.events.CLICK,{wizard:this},function(g){var f=rdx.utils.get_view(g.data.wizard._properties.add_view_link_name);rdx.view_utils.show_view_in_slider(f,g.data.wizard._get_resource_for_operation())});this._add_to_panel_holder(this.BUTTON_BAR_PANEL,e);a.append(e)}a.append(b)}this._page_container.append(a)};rdx.op_wizard_summary_page.prototype._add_center_panel=function(){var a=$("<div>");var m=null;a.addClass("op_wizard_center_panel").addClass("op_wizard_center_panel_border rdx_border_color");this._add_to_panel_holder(this.CENTER_PANEL,a);if(rdx.utils.is_defined(this._view_definition.view_properties)&&rdx.utils.is_defined(this._view_definition.view_properties.image_url)){m=this._view_definition.view_properties.image_url}if(rdx.utils.is_defined(m)){var f=$("<div>").addClass("op_wizard_center_left_panel op_wizard_image_panel");var h=$("<div>").addClass("op_wizard_center_right_panel");var b=$("<td>").attr("valign","top").append(f);var e=$("<td>").append(h);var d=$("<table>").append($("<tr>")).append($("<tbody>")).append(b).append(e);d.addClass("op_wizard_center_panel_table");var g=$("<img>").addClass("op_wizard_image").attr("src",rdx.images.get_app_url(m)).attr("alt",m);f.append(g);this._add_to_panel_holder(this.CENTER_LEFT_PANEL,f);a.append(d);this._add_content_panel(h);this._add_to_panel_holder(this.CENTER_RIGHT_PANEL,h)}else{this._add_content_panel(a)}this._page_container.append(a)};rdx.op_wizard_summary_page.prototype._add_content_panel=function(a){var b=$("<div>");if(this._properties.center_align){b.addClass("op_wizard_content_panel")}a.append(b);this._add_form_content(b);this._add_to_panel_holder(this.CONTENT_PANEL,b)};rdx.op_wizard_summary_page.prototype._add_form_content=function(b){var a=$("<div>").addClass("op_wizard_summary_page_form_panel");if(this._properties.center_align){a.addClass("op_wizard_form_panel")}b.append(a);var d=this._properties;var e=d.standalone_mode?{}:this._resource.properties;if(rdx.utils.is_not_defined(d.submit_operation)||rdx.utils.is_not_defined(d.submit_operation.method)){d.submit_operation={method:rdx.model_constants.ADD,action:null}}d.fixed_column_width=true;this._form=new rdx.form(a,this._view_definition.resource_properties,e,d).render();if(this._form.get_form_holder().get_embedded_views().length>0){this._page_container.addClass("op_wizard_summary_view_page")}if(this._form.get_form_holder().is_two_row_layout_for_fields()==true){this._page_container.addClass("op_two_column_summary_view")}this._form.set_resource(this._resource);this._form.add_form_initialized_event(new rdx.callback(this,this._form_initialized));rdx.form_utils.prefill_form_data(a,this._form,this._form,this._form._get_field_resource_response_arrived);this._form.finalize()};rdx.op_wizard_summary_page.prototype.get_resource_response_arrived=function(b){var a=rdx.utils.get_formatted_response(b);if(rdx.utils.is_not_defined(a)){this._form_initialized(this._form);return}this._form.initialize(a);this.is_message_container()};rdx.op_wizard_summary_page.prototype._form_initialized=function(a){if(rdx.utils.is_defined(this._view_definition.field_dependencies)){this._field_dependencies=new rdx.dependency(this._form,this._view_definition.field_dependencies)}this.handle_unmask();if(rdx.utils.is_defined(this._field_dependencies)){this._field_dependencies.trigger_dependencies()}this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE)};rdx.op_wizard_summary_page.prototype.get_form=function(){return this._form};rdx.op_wizard_summary_page.prototype.destroy_view=function(a){this._form.destroy_form(a);this._parent.remove()};rdx.op_wizard_summary_page.prototype._is_add_mode=function(){if(rdx.utils.is_not_defined(this._view_definition.view_properties)||rdx.utils.is_not_defined(this._view_definition.view_properties.submit_operation)){return true}var a=this._view_definition.view_properties.submit_operation.method;if(rdx.utils.is_defined(a)&&a==rdx.model_constants.ADD){return true}return false};rdx.op_wizard_summary_page.prototype._add_to_panel_holder=function(b,a){this._panels_holder[b]=a};rdx.op_wizard_summary_page.prototype._get_panel=function(a){return this._panels_holder[a]};rdx.op_wizard_summary_page.prototype._get_resource_for_operation=function(){return rdx.form_utils.get_resource_for_operation(this._form,this._resource,null)};rdx.op_wizard_summary_page.prototype.get_data=function(){return this._get_resource_for_operation()};rdx.op_wizard_summary_page.prototype._set_optional_page_index=function(){if(rdx.utils.is_defined(this._properties.__index)){var b=this._properties.__index;var a=b.toString();var d=$("<div>").addClass("optional_page_index");this._panels_holder[this.TOP_PANEL].prepend(d);d.append(a);this._panels_holder[this.TITLE_PANEL].addClass("title_border")}};rdx.op_wizard_summary_page.prototype.is_message_container=function(){if(rdx.utils.is_defined(this._properties.message_container)){var g=rdx.i18n.get_string(this._properties.message_container);var a=g.split(" ");var e=g;for(var d=0;d<a.length;d++){if(a[d][0]=="{"){var b=a[d].substring(1,a[d].length-1);var f=this._form.get_field_value(b);e=e.replace(a[d],'<span style = "color:#2A2723 ">'+f+"</span>")}}this._parent.trigger(rdx.events.OP_WIZARD_MESSAGE_CONTAINER,[e])}};rdx.op_wizard_summary_page.prototype.is_title_required=function(){return false};rdx.wizard_controller=function(a,b){this._wizard_view=a;this._parent=b;this._resource_map=null};rdx.wizard_controller.prototype.initialize=function(){this._initialize_resource_map()};rdx.wizard_controller.prototype.submit_changes=function(){var b=this.get_resource_map();var h=new rdx.file_upload_controller(new rdx.callback(this,this._start_model_operation,[b]),this._wizard_view);for(var m in b){for(var d in b[m].pages){var g=b[m].pages[d];var f=g.get_form();h.add_form(f);var a=f.get_embedded_views();for(var d=0;d<a.length;d++){if(rdx.utils.is_not_defined(a[d].get_component())||!rdx.utils.is_function(a[d].get_component().get_form)){continue}var e=a[d].get_component().get_form();if(rdx.utils.is_not_defined(e)){continue}h.add_form(e)}}}h.do_operation()};rdx.wizard_controller.prototype._start_model_operation=function(a){this._submit_form_field_changes(a)};rdx.wizard_controller.prototype._submit_form_field_changes=function(b){var a=this._wizard_view._view_definition.pre_submit_callback;if(rdx.utils.is_defined(this._wizard_view._view_definition)&&rdx.utils.is_defined(a)){var d=this;var e=new rdx.view_callback_on_response_arrived_params({return_call_back:new rdx.callback(function(g,h,f){d._start_submit_form_field_changes(f,g)},[b])});a.call_back([e])}else{this._start_submit_form_field_changes(b)}};rdx.wizard_controller.prototype._process_inner_views_data=function(e){var a=e.get_resource_for_operation();var d=new Array();for(var b in a){if(rdx.utils.is_not_defined(a[b])){continue}if(!(a[b] instanceof rdx.view_component_adapter_data)){continue}var f=a[b];delete a[b];f.set_force_merge_to_same_resource();f.process_inner_view_data(e,d)}return d};rdx.wizard_controller.prototype._get_operation_param=function(h,g,b,e,a,d){var f={resource_defn:a,resource_for_operation:d,callback_on_success:h,callback_on_failure:g,model_method:b,action:e,resource_context:{view_definition:this._wizard_view._view_definition,view:this._view},return_call_back:null};return new rdx.configure_view_operation_params(f)};rdx.wizard_controller.prototype._start_submit_form_field_changes=function(a,q){var s=false;if(rdx.utils.is_defined(this._wizard_view._view_definition.view_properties)){if(rdx.utils.is_defined(this._wizard_view._view_definition.view_properties.model_executor_continue_on_error)){s=true}}var p=new rdx.model_executor_service(new rdx.callback(this._wizard_view,this._wizard_view.on_success),new rdx.callback(this,this._on_failure),s);for(var v in a){var t=null;var b=rdx.utils.get_resource(v);var f={view_definition:this._wizard_view._view_definition};var e=null;var A=null;var u=null;var w=new Array();for(var m in a[v].pages){e=a[v].pages[m];var d=e.get_form();var o=e.get_view();A=rdx.view_utils.get_model_method(o);u=rdx.view_utils.get_action(o);t=rdx.form_utils.get_resource_for_operation(d,e.get_resource(),t);var n=this._get_operation_param(null,null,A,u,b,t);var z=this._process_inner_views_data(n);w=w.concat(z)}if(rdx.utils.is_defined(e.get_callback_before_operation())){e.get_callback_before_operation().call_back([v,t,f,w,q]);this._enable_finish_button()}e.set_modified_resource_data(t);var h=true;if(rdx.utils.is_defined(e.get_view())){if(rdx.utils.is_defined(A)&&A==rdx.model_constants.NONE){h=false}}if(h&&rdx.utils.is_object_not_empty(t)){p.add(A,b,t,u,null,this._parent,f)}for(var m=0;m<w.length;m++){var g=w[m];p.add(g.get_model_method(),g.get_resource_defn(),g.get_resource_for_operation(),g.get_action(),null,this._parent,g.get_resource_context())}}if(rdx.utils.is_object_not_empty(t)||w.length>0){p.execute()}};rdx.wizard_controller.prototype.get_resource_data=function(){var f={};var g=this.get_resource_map();for(var a in g){var n=null;var e=rdx.utils.get_resource(a);var o=new Array();f[a]=new Object();for(var h in g[a].pages){var m=g[a].pages[h];n=rdx.form_utils.get_resource_for_operation(m.get_form(),m.get_resource(),n);f[a][rdx.wizard_constants.ORIGINAL]=m.get_original_resource_data();var b=this._get_operation_param(null,null,null,null,e,n);var d=this._process_inner_views_data(b);o=o.concat(d)}f[a][rdx.wizard_constants.MODIFIED]=n;if(o.length>0){f[a][rdx.wizard_constants.MODIFIED_CHILDREN]=o}}return f};rdx.wizard_controller.prototype._on_failure=function(e){var d=e.get_error_resource();var b=e.get_error_message();var a=parseInt(this.get_resource_map()[d.name].page_index);this._wizard_view.get_wizard().goto_page(a)};rdx.wizard_controller.prototype._initialize_resource_map=function(){var b=new Object();var a=this._get_wizard_view().get_wizard().get_pages_info();for(var d in a){if(rdx.utils.is_not_defined(b[a[d].get_resource_name()])){var e=new Array();e.push(a[d]);b[a[d].get_resource_name()]={page_index:d,response:null,pages:e,resource:a[d].get_resource()}}else{b[a[d].get_resource_name()].pages.push(a[d])}}this._resource_map=b};rdx.wizard_controller.prototype.get_resource_map=function(){return this._resource_map};rdx.wizard_controller.prototype._get_wizard_view=function(){return this._wizard_view};rdx.wizard_controller.prototype._enable_finish_button=function(){if(rdx.utils.is_defined(this._get_wizard_view().get_wizard()._get_panel("finish_button"))){this._get_wizard_view().get_wizard()._get_panel("finish_button").removeAttr("disabled")}};rdx.file_upload_controller=function(b,a){this._success_callback=b;this._view=a;this._request_count=0;this._file_upload_components=[]};rdx.file_upload_controller.prototype.add_form=function(e){var a=e.get_embedded_views();this._file_upload_components=this._file_upload_components.concat(rdx.utils.clone_array(e.get_form_holder().get_file_upload_components()));this._file_upload_components=rdx.form_utils.validate_file_upload_send_to_server(this._file_upload_components,e);for(var b=0;b<a.length;b++){if(rdx.utils.is_not_defined(a[b].get_component())||!rdx.utils.is_function(a[b].get_component().get_form)){continue}var d=a[b].get_component().get_form();if(rdx.utils.is_defined(d)){this._file_upload_components=this._file_upload_components.concat(rdx.utils.clone_array(d.get_form_holder().get_file_upload_components()))}}};rdx.file_upload_controller.prototype.do_operation=function(){this._request_count=this._file_upload_components.length;if(this._request_count==0){this._success_callback.call_back();this._do_trigger_event();return}this._trigger_file_upload()};rdx.file_upload_controller.prototype._do_trigger_event=function(){if(rdx.utils.is_defined(this._view)&&rdx.utils.is_defined(this._view._view_definition.view_properties)&&this._view._view_definition.view_properties.standalone_mode==true){if(rdx.utils.is_defined(this._view)&&rdx.model.is_event_registered_in_model(this._view,rdx.events.MODEL_CHANGED)){$(this._view).trigger(rdx.events.MODEL_CHANGED,[[{}],null,null])}}};rdx.file_upload_controller.prototype._trigger_file_upload=function(){if(this._request_count<=0){this._success_callback.call_back();this._do_trigger_event();return}var a=this._file_upload_components.shift();if(a.get_field().is_part_of_resource()===false||a.is_file_reader()){this._handle_file_upload_success();return}var b=new rdx.callback(this,this._handle_file_upload_success);if(!rdx.utils.is_empty(a.get_data())&&a.is_local_selected()&&!a.is_direct_upload()){a.submit(b);this._show_progress_for_upload(a._element)}else{this._handle_file_upload_success()}};rdx.file_upload_controller.prototype._handle_file_upload_success=function(){this._request_count=this._request_count-1;this._trigger_file_upload()};rdx.file_upload_controller.prototype._show_progress_for_upload=function(d){var f=d;var m=f._file_element[0];var h=m.getAttribute("name");var e=new FormData();var b=rdx.utils.is_defined(window.rand)?window.rand:"";d._file_details=m.files[m.files.length-1];e.append("NITRO_WEB_APPLICATION",true);e.append("rand_key",b);e.append(h,d._file_details);this._progress_bar=new rdx.progress_bar($(document.body),{mode:rdx.PROGRESS_BAR});this._progress_bar.show_time_remaining(true);this._progress_bar.show_cancel_button(true);this._progress_bar.show_close_button(false);var a=new Date();this._ajax_request=new rdx.ajax_handler(d._properties.url,new rdx.callback(d,d._handle_success,[this._progress_bar]),"POST",e);this._ajax_request._error_callback=new rdx.callback(this,function(n){this._progress_bar.remove_progress_percent_dialog();if(rdx.utils.is_not_empty(n)){error_message=rdx.utils.html_encode(n)}rdx.message_box.error(n);rdx.status_bar.update_status(n,rdx.ERROR);if(this.base_view){this.base_view.set_view_state(rdx.view_constants.view_state.ACTIVE)}});this._progress_bar.cancel_upload_callback=new rdx.callback(this,this._cancel_callback,[d]);this._ajax_request.set_content_type_header(false);this._ajax_request._progress_bar=this._progress_bar;this._ajax_request.start_time=a.getTime();this._ajax_request._file_upload_params=d;this._progress_bar.handle_percent_progress_bar();this._ajax_request.attach_events_for_upload();d.request_status=this._ajax_request;d.progress_bar=this._progress_bar;if(d._properties.dialog_mode==false&&d._properties.inline_upload==false){if(rdx.utils.is_defined(this._view)&&rdx.utils.is_defined(this._view._base_view)){this.base_view=this._view._base_view;var g=this.base_view.get_view();this._ajax_request._parent_component=g._parent;this._ajax_request._parent_mask_id=this._view._base_view._view._form?this._view._base_view._view._form._mask_id:null}}};rdx.file_upload_controller.prototype._cancel_callback=function(a){this._ajax_request._req.abort();var g=a._file_details.name;if(a._properties.resource_name==null&&a._properties.remote==true){var f=a._properties.remote_dir_path+"/"+g;var d=rdx.utils.get_resource(a._properties.remote_resource);if(rdx.utils.ends_with(a._properties.remote_dir_path,"/")){f=a._properties.remote_dir_path+g}rdx.model.post(d,null,{name:f},new rdx.callback(this,function(h){this._progress_bar.remove_progress_percent_dialog();rdx.mask.unmask_all_components()}),"delete")}else{var b=rdx.resources[a._properties.resource_name].get_url+"/"+g;var e=new rdx.ajax_handler(b,new rdx.callback(this,function(h){this._progress_bar.remove_progress_percent_dialog();rdx.mask.unmask_all_components()}),"DELETE",null);e._error_callback=new rdx.callback(this,function(h){rdx.mask.unmask_all_components();this._progress_bar.remove_progress_percent_dialog()});e._send();if(rdx.utils.is_defined(a._properties.resource_name)){rdx.model.trigger_model_changed_event({},null,rdx.utils.get_resource(a._properties.resource_name))}}if(rdx.utils.is_defined(this.base_view)){this._view._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE)}};rdx.view_renderers=new function(){this._state_up_values=["up","running","enabled","clear","finished","success","completed","active","regex","installed"];this._state_down_values=["down","halted","critical","failed","down when going out of service","uninstalled"];this._state_outofservice_values=["out of service","in progress","notregex","partial-up","partial-down","paused","going out of service","upgrading"];this._state_major_values=["major"];this._state_minor_values=["minor"];this._state_warning_values=["warning"];this._state_information_values=["information"];this._state_unknown_values=["unknown","disabled","inactive"];this.state_renderer=function(e,s,d,b,h,t){if(rdx.utils.is_not_defined(e[s])){return e[s]}var o=e[s];var a=rdx.view_renderers._get_state_class(o);if(rdx.utils.is_defined(t)){var q="";var p={params:e,link_callback:t};q=$("<a>").attr("href","#").text(o).bind(rdx.events.CLICK,p,function(u){u.stopPropagation();var v=u.data.link_callback;if(rdx.utils.is_defined(v)){v.call_back([u.data.params]);return}})}if(a==null){if(rdx.utils.is_defined(t)){return q}else{return o}}var n=null;if(rdx.utils.is_defined(b)){var m;var g=b.properties;if(rdx.utils.is_defined(g.display_key_label)){m=rdx.utils.get_resource_key_label(g.resource_name,g.resource_key)}else{if(rdx.utils.is_defined(g.display_key_value)){m=e[g.resource_key]}}n=$(document.createElement("span")).append(m)}else{if(h==true){n=$(document.createElement("span")).append("")}else{if(rdx.utils.is_defined(t)){n=$(document.createElement("span")).append(q)}else{n=$(document.createElement("span")).append(o)}}}if(d){a.attr("title",o);n.css("display","none")}else{if(h==true){a.addClass("left")}else{a.addClass("right")}}var f=$("<span>");f.append(a);f.append(a).append(n);f.attr("title",o);return f};this._get_state_class=function(e){var d=e.toLowerCase();if(d!="-na-"){e=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase()}var a=null;if($.inArray(d,rdx.view_renderers._state_up_values)>=0){a="up"}else{if($.inArray(d,rdx.view_renderers._state_down_values)>=0){a="down"}else{if($.inArray(d,rdx.view_renderers._state_outofservice_values)>=0){a="outofservice"}else{if($.inArray(d,rdx.view_renderers._state_major_values)>=0){a="major"}else{if($.inArray(d,rdx.view_renderers._state_minor_values)>=0){a="minor"}else{if($.inArray(d,rdx.view_renderers._state_warning_values)>=0){a="outofservice"}else{if($.inArray(d,rdx.view_renderers._state_information_values)>=0){a="information"}else{if($.inArray(d,rdx.view_renderers._state_unknown_values)>=0){a="unknown"}}}}}}}}if(a==null){return null}var b=$("<span>").addClass("dot "+a);return b};this.field_state_renderer=function(b,h,g,m){var e=b[g];var f=b[h];var a=rdx.view_renderers._get_state_class(e);if(a==null){return f}if(rdx.utils.is_defined(m)){a.attr("title",m)}var d=$("<span>").append(a).append($('<span style="padding:0px 4px;  vertical-align: middle;">').text(f));return d};this.alert_field_renderer=function(b,g,m){var h=b[g];var a=$("<img>");a.attr("src",rdx.images.ALERT_IMG);var e=$("<span>");e.append($('<span style="padding:0px 4px;  vertical-align: middle;">').text(h)).append(a);var d={message:m,hide_more:true,remove_tooltip_mouse_leave:true};var f=new rdx.tooltip(a,d);a.bind(rdx.events.MOUSE_OVER,function(){f.render()});a.bind(rdx.events.MOUSE_LEAVE,function(n){f.remove_tooltip(n)});return e};this.add_state_up_value=function(a){rdx.view_renderers._state_up_values.push(a)};this.add_state_down_value=function(a){rdx.view_renderers._state_down_values.push(a)};this.add_state_outofservice_value=function(a){rdx.view_renderers._state_outofservice_values.push(a)};this.add_state_major_value=function(a){rdx.view_renderers._state_major_values.push(a)};this.add_state_warning_value=function(a){rdx.view_renderers._state_warning_values.push(a)};this.add_state_information_value=function(a){rdx.view_renderers._state_information_values.push(a)};this.add_state_unknown_value=function(a){rdx.view_renderers._state_unknown_values.push(a)};this.link_renderer=function(b,d,f){if(rdx.utils.is_not_defined(b[d])){return b[d]}var e=b[d];var a=rdx.utils.is_defined(f)?rdx.i18n.get_string(f):rdx.i18n.get_string("rdx.view_render_open_link_text");return $(document.createElement("a")).attr("href","http://"+e).attr("title",a).attr("target",e.replace(/\./g,"_")).append(e).bind(rdx.events.CLICK,function(g){g.stopPropagation()})};this.bar_chart_renderer=function(a,b,d){if(rdx.utils.is_not_defined(a[b])){return a[b]}return new rdx.bar_chart(null,{value:a[b],class_names:d}).render()};this.rate_in_bps_renderer=function(a,b){return value=rdx.view_formatters.rate_in_bps_formatter(a,b)};this.size_in_bytes_renderer=function(a,b){return value=rdx.view_formatters.size_in_bytes_formatter(a,b)};this.seconds_to_date_string_renderer=function(a,b){return value=rdx.view_renderers.date_string_renderer(a,b,rdx.view_formatters.SECOND)};this.date_string_renderer=function(a,d,b){return value=rdx.view_formatters.date_string_formatter(a,d,b)};this.onoff_renderer=function(a,b){return value=rdx.view_formatters.onoff_formatter(a,b)};this.seconds_to_day_hour_min_sec_renderer=function(a,b,d){return rdx.view_formatters.seconds_to_day_hour_min_sec_formatter(a,b,d)};this.trimmed_url_renderer=function(b,d,e){var a="";if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(d)&&rdx.utils.is_defined(b[d])){a=rdx.view_formatters.trimmed_url_formatter(b,d,e)}return a};this.trimmed_url_renderer_with_tooltip=function(a,b,e){var d="";if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(a[b])){d=$(document.createElement("span")).attr("title",a[b]).append(rdx.view_formatters.trimmed_url_formatter(a,b,e))}return d};this.percent_label_renderer=function(a,b){if(rdx.utils.is_defined(a[b])){var d=a[b];return d+" %"}return a[b]};this.ellipsis_renderer=function(a,b,d){if(rdx.utils.is_not_defined(a[b])){return a[b]}return($("<span>").append(a[b]).ellipsis(d))};this.allcaps_renderer=function(a,b){if(rdx.utils.is_not_defined(a[b])||typeof(a[b])!="string"){return a[b]}return a[b].toUpperCase()};this.seconds_renderer=function(b,d,e,a){return rdx.view_formatters.seconds_formatter(b,d,e,a)};this.number_comma_kilo_renderer=function(a,b){return rdx.view_formatters.number_comma_kilo_formatter(a,b)};this.edit_remove_link_renderer=function(d,o,h,b,g,e,s,a){if(rdx.utils.is_not_defined(h)&&rdx.utils.is_not_defined(b)){return d[o]}var q=rdx.utils.is_not_defined(a)?$("<div>"):a;q.addClass("view_edit_remove_link_row");if(rdx.utils.is_defined(b)){var m=rdx.utils.is_defined(e)?rdx.i18n.get_string(e):rdx.i18n.get_string("rdx.button_remove");var f=$("<span>").addClass("view_renderer_link").addClass("view_remove_link").attr("title",m).bind(rdx.events.CLICK,{row_obj:d,click_handler_callback:b},function(u){u.stopPropagation();rdx.utils.prevent_default(u);var t=u.data.click_handler_callback;if(rdx.utils.is_defined(t)){rdx.message_box.confirm(rdx.i18n.get_string("rdx.table_data_action_confirm_single_row"),new rdx.callback(function(w,v){t.call_back([v])},[t,d]));return}});q.append(f)}if(rdx.utils.is_defined(h)){var p=rdx.utils.is_defined(g)?rdx.i18n.get_string(g):rdx.i18n.get_string("rdx.edit");var n=$("<span>").addClass("view_renderer_link").addClass("view_edit_link").attr("title",p).bind(rdx.events.CLICK,{row_obj:d,click_handler_callback:h},function(u){var t=u.data.click_handler_callback;if(rdx.utils.is_defined(t)){t.call_back([d]);return}});q.append(n)}if(rdx.utils.is_defined(o,d[o])){q.append($("<span>").addClass("view_link_text").append(d[o]).attr("title",d[o]))}return q};this.seconds_to_hh_mm_ss_renderer=function(a,b,d){return rdx.view_formatters.seconds_to_hh_mm_ss_formatter(a,b,d)};this.edit_remove_link_renderer_copy=function(b,o,h,a,f,d,s){if(rdx.utils.is_not_defined(h)&&rdx.utils.is_not_defined(a)){return b[o]}var q=$("<div>").addClass("view_edit_remove_link_row_copy");if(rdx.utils.is_defined(a)){var m=rdx.utils.is_defined(d)?rdx.i18n.get_string(d):rdx.i18n.get_string("rdx.button_remove");var e=$("<span>").addClass("view_renderer_link_copy").addClass("view_remove_link_copy").attr("title",m).bind(rdx.events.CLICK,{row_obj:b,click_handler_callback:a},function(u){var t=u.data.click_handler_callback;if(rdx.utils.is_defined(t)){rdx.message_box.confirm(rdx.i18n.get_string("rdx.table_data_action_confirm_single_row"),new rdx.callback(function(w,v){t.call_back([v])},[t,b]));return}});q.append(e)}if(rdx.utils.is_defined(h)){var p=rdx.utils.is_defined(f)?rdx.i18n.get_string(f):rdx.i18n.get_string("rdx.edit");var n=$("<span>").addClass("view_renderer_link_copy").addClass("view_edit_link_copy").attr("title",p).bind(rdx.events.CLICK,{row_obj:b,click_handler_callback:h},function(u){var t=u.data.click_handler_callback;if(rdx.utils.is_defined(t)){t.call_back([b]);return}});if(rdx.utils.is_not_defined(s)){s="More"}var g=$("<a>").attr("href","#").addClass("more_label_style").html(s);n.append(g);q.append(n)}return q};this.render_notification_views=function(f,a,g){if(rdx.utils.is_not_defined(f)){return""}var b=rdx.utils.get_view(f);var e=rdx.utils.is_not_empty(a)?rdx.i18n.get_string(a):rdx.i18n.get_string("rdx.click_here_to_view");var d=$("<a>").append(e).addClass("notification_view_link").bind(rdx.events.CLICK,{resource_data:rdx.utils.is_defined(g)?g:null,view:f},function(h){var m=h.data.resource_data;rdx.view_utils.show_view_in_slider(rdx.utils.get_view(h.data.view),null,m)});return d};this.trimmed_data_renderer=function(a,b,d){return rdx.view_formatters.trimmed_data_formatter(a,b,d)};this.help_details_renderer=function(a){var p={messages:null};var m=$("<div>").addClass("rdx_help_details_container");var n=$.extend(true,{},p,a);if(rdx.utils.is_not_defined(n.messages)){return m}var h=[];for(var f=0;f<n.messages.length;f++){var b=n.messages[f];var q=$("<div>").addClass("rdx_help_block_container");var o=$("<div>").addClass("rdx_help_block_title rdx_background rdx_border");o.append($("<span>").addClass("rdx_help_blick_title_container").append(b.title));var e=$("<span>").addClass("rdx_help_expand_collapse rdx_help_collapse");o.append(e);q.append(o);var s=$("<div>").addClass("rdx_help_message_container");s.append(rdx.i18n.get_string(b.message));q.append(s);s.hide();m.append(q);h.push({message_container:s,title_container:o,icon_container:e,message_obj:b,ind:f})}var d={current:{}};for(var f=0;f<h.length;f++){var g=h[f];if(g.message_obj["expand"]==true){g.icon_container.removeClass("rdx_help_collapse").addClass("rdx_help_expand");rdx.utils.slide_up_down(g.message_container,false);d.current=g}g.title_container.bind(rdx.events.CLICK,{current_obj:d,containers_list:h,ind:f},function(t){if(t.data.current_obj.current["ind"]==t.data.ind){return}t.data.current_obj.current["icon_container"].removeClass("rdx_help_expand").addClass("rdx_help_collapse");t.data.current_obj.current["message_container"].hide();rdx.utils.slide_up_down(t.data.containers_list[t.data.ind]["message_container"],false);t.data.current_obj.current=t.data.containers_list[t.data.ind];t.data.containers_list[t.data.ind]["icon_container"].removeClass("rdx_help_collapse").addClass("rdx_help_expand")})}return m};this.edit_remove_download_link_renderer=function(e,t,o,d,h,f,w,n,m,b){if(rdx.utils.is_not_defined(o)&&rdx.utils.is_not_defined(d)){return e[t]}var v=rdx.utils.is_not_defined(b)?$("<div>"):b;v.addClass("view_edit_remove_link_row");if(rdx.utils.is_defined(d)){var p=rdx.utils.is_defined(f)?rdx.i18n.get_string(f):rdx.i18n.get_string("rdx.button_remove");var g=$("<span>").addClass("view_renderer_link").addClass("view_remove_link_new").attr("title",p).bind(rdx.events.CLICK,{row_obj:e,click_handler_callback:d},function(A){A.stopPropagation();rdx.utils.prevent_default(A);var z=A.data.click_handler_callback;if(rdx.utils.is_defined(z)){rdx.message_box.confirm(rdx.i18n.get_string("rdx.table_data_action_confirm_single_row"),new rdx.callback(function(C,B){z.call_back([B])},[z,e]));return}});v.append(g)}if(rdx.utils.is_defined(o)){var u=rdx.utils.is_defined(h)?rdx.i18n.get_string(h):rdx.i18n.get_string("rdx.edit");var s=$("<span>").addClass("view_renderer_link").addClass("view_edit_link_new").attr("title",u).bind(rdx.events.CLICK,{row_obj:e,click_handler_callback:o},function(A){var z=A.data.click_handler_callback;if(rdx.utils.is_defined(z)){z.call_back([e]);return}});v.append(s)}if(rdx.utils.is_defined(n)){var q=rdx.utils.is_defined(m)?rdx.i18n.get_string(m):rdx.i18n.get_string("rdx.download_button");var a=$("<span>").addClass("view_renderer_link").addClass("view_download_link_new").attr("title",q).bind(rdx.events.CLICK,{row_obj:e,click_handler_callback:n},function(A){var z=A.data.click_handler_callback;if(rdx.utils.is_defined(z)){z.call_back([e]);return}});v.append(a)}if(rdx.utils.is_defined(t,e[t])){v.append($("<span>").addClass("view_link_text").append(e[t]).attr("title",e[t]))}return v}};rdx.view_formatters=new function(){this.TERA_BYTES="TB";this.GIGA_BYTES="GB";this.MEGA_BYTES="MB";this.KILO_BYTES="KB";this.BYTES="bytes";this.GBPS="gbps";this.MBPS="mbps";this.KBPS="kbps";this.BPS="bps";this.MILLI_SECOND="milli_second";this.SECOND="second";this.MINUTE="minute";this.HOUR="hour";this.KILO_BYTES_VALUE=1024;this.MEGA_BYTES_VALUE=this.KILO_BYTES_VALUE*1024;this.GIGA_BYTES_VALUE=this.MEGA_BYTES_VALUE*1024;this.TERA_BYTES_VALUE=this.GIGA_BYTES_VALUE*1024;this.MICRO_SECOND_UNIT="\u00B5s";this.MILLI_SECOND_UNIT="ms";this.SECOND_UNIT="s";this.list_formatter=function(b,g,f){if(rdx.utils.is_not_defined(f)){f=new Array()}if(!rdx.utils.is_array(b)){return b}var a=[];for(var e=0,d=b.length;e<d;e++){var h=b[e][g];if($.inArray(h,f)==-1){a.push(h)}}return a.sort()};this.rate_in_bps_formatter=function(d,e){if(rdx.utils.is_not_defined(d[e])){return d[e]}var h=d[e];var f=h;var g=rdx.view_formatters.BPS;var a=h/(rdx.view_formatters.GIGA_BYTES_VALUE);if(a>=1){f=a;g=rdx.view_formatters.GBPS}else{var b=h/(rdx.view_formatters.MEGA_BYTES_VALUE);if(b>=1){f=b;g=rdx.view_formatters.MBPS}else{var m=h/rdx.view_formatters.KILO_BYTES_VALUE;if(m>=1){f=m;g=rdx.view_formatters.KBPS}}f=parseFloat(f).toFixed(2)}return rdx.view_formatters.decimal_formatter({decimal_formatter:f},"decimal_formatter")+" "+rdx.i18n.get_string("rdx.view_format_units_"+g)};this.size_in_gb_formatter=function(b,d,g){if(rdx.utils.is_not_defined(g)){if(rdx.utils.is_not_defined(b[d])){return b[d]}var g=b[d]}if((typeof(g)=="string")&&(g.indexOf("bytes")>-1||g.indexOf("MB")>-1||g.indexOf("KB")>-1||g.indexOf("GB")>-1)){return g}var e=g;var f=rdx.view_formatters.BYTES;var a=g/(rdx.view_formatters.GIGA_BYTES_VALUE);if(a>=1){e=a;f=rdx.view_formatters.GIGA_BYTES}return rdx.view_formatters.decimal_formatter({decimal_formatter:e},"decimal_formatter")};this.size_in_bytes_formatter=function(b,n,h,g){if(rdx.utils.is_not_defined(h)){if(rdx.utils.is_not_defined(b[n])){return b[n]}var h=b[n]}if((typeof(h)=="string")&&(h.indexOf("bytes")>-1||h.indexOf("MB")>-1||h.indexOf("KB")>-1||h.indexOf("GB")>-1)){return h}var o=h;var e=rdx.view_formatters.BYTES;var m=h/(rdx.view_formatters.TERA_BYTES_VALUE);if(m>=1){o=m;e=rdx.view_formatters.TERA_BYTES}else{var d=h/(rdx.view_formatters.GIGA_BYTES_VALUE);if(d>=1){o=d;e=rdx.view_formatters.GIGA_BYTES}else{var a=h/(rdx.view_formatters.MEGA_BYTES_VALUE);if(a>=1){o=a;e=rdx.view_formatters.MEGA_BYTES}else{var p=h/rdx.view_formatters.KILO_BYTES_VALUE;if(p>=1){o=p;e=rdx.view_formatters.KILO_BYTES}}}}if(o==1){e=e.replace(/s$/,"")}if(g){var f=[];f.push(Math.round(rdx.view_formatters.decimal_formatter({decimal_formatter:o},"decimal_formatter")));f.push(rdx.i18n.get_string("rdx.view_format_units_"+e));return f}else{return rdx.view_formatters.decimal_formatter({decimal_formatter:o},"decimal_formatter")+" "+rdx.i18n.get_string("rdx.view_format_units_"+e)}};this.bytes_converter=function(a,b,e){if(rdx.utils.is_not_defined(a[b])){return a[b]}var f=parseFloat(a[b]);var d=f;switch(e){case rdx.view_formatters.GIGA_BYTES:d=f/(rdx.view_formatters.GIGA_BYTES_VALUE);break;case rdx.view_formatters.MEGA_BYTES:d=f/(rdx.view_formatters.MEGA_BYTES_VALUE);break;case rdx.view_formatters.KILO_BYTES:d=f/rdx.view_formatters.KILO_BYTES_VALUE;break;default:d=f}return rdx.view_formatters.decimal_formatter({decimal_formatter:d},"decimal_formatter")};this.convert_to_bytes=function(a,b,e){if(rdx.utils.is_not_defined(a[b])){return a[b]}var f=parseFloat(a[b]);var d=f;switch(e){case rdx.view_formatters.GIGA_BYTES:d=f*(rdx.view_formatters.GIGA_BYTES_VALUE);break;case rdx.view_formatters.MEGA_BYTES:d=f*(rdx.view_formatters.MEGA_BYTES_VALUE);break;case rdx.view_formatters.KILO_BYTES:d=f*rdx.view_formatters.KILO_BYTES_VALUE;break;default:d=f}return d+""};this.decimal_formatter=function(a,b){if(rdx.utils.is_not_defined(a[b])){return a[b]}var d=a[b];if(rdx.utils.is_defined(d)){if((""+d).indexOf(rdx.i18n.get_decimal_separator())>=0){d=new Number(d).toFixed(2);if((""+d).indexOf(rdx.i18n.get_decimal_separator()+"00")>0){d=Math.round(d)}}return d}};this.days_to_years_days_formatter=function(f){if(f==0){return 0}var e="";var b={" year":365.25," day":1};for(var a in b){var d=Math.floor(f/b[a]);if(d>=1){e+=d+a+(d>1?"s":"")+" ";f-=d*b[a]}}return e};this.seconds_to_date_string_formatter=function(a,b){return this.date_string_formatter(a,b,rdx.view_formatters.SECOND)};this.date_string_formatter=function(b,f,d){if(rdx.utils.is_not_defined(b[f])||b[f]==""){return b[f]}var e=parseInt(b[f]);if(e<0){return""}if(rdx.utils.is_not_defined(d)){d=rdx.view_formatters.SECOND}switch(d){case rdx.view_formatters.SECOND:e=e*1000;break;default:e=e}var a=new Date(e);if(rdx.display_time_in_GMT==true){return a.toGMTString()}else{return a.toDateString()+" "+a.toLocaleTimeString()}};this.seconds_to_day_hour_min_sec_formatter=function(e,n,g){if(rdx.utils.is_not_defined(e[n])){return e[n]}var m=e[n];if(rdx.utils.is_not_defined(g)){g=rdx.view_formatters.SECOND}var h=m;if(g==rdx.view_formatters.MILLI_SECOND){h=m/1000}else{if(g==rdx.view_formatters.MINUTE){h=m*60}else{if(g==rdx.view_formatters.HOUR){h=m*60*60}}}var d=Math.floor(h/86400);var a=Math.floor((h%86400)/3600);var f=Math.floor(((h%86400)%3600)/60);var b=Math.floor(((h%86400)%3600)%60);var o="";if(d>0){o+=d+rdx.i18n.get_string("rdx.formatter_day_separator")+" "}if(a>0){o+=a+rdx.i18n.get_string("rdx.formatter_hour_separator")+" "}o+=f+rdx.i18n.get_string("rdx.formatter_mininute_separator")+" ";o+=b+rdx.i18n.get_string("rdx.formatter_second_separator");return o};this.minutes_to_age_formatter=function(e,g,f,m){var h=parseInt(e[g]);if(rdx.utils.is_not_defined(f)){f={day:24*60,hour:60,minute:1}}var n=[];for(var a in f){var b=Math.floor(h/f[a]);if(b==1){n.push(b+" "+a)}if(b>=2){n.push(b+" "+a+"s")}h%=f[a]}var d=n.toString().replace(/,/g,", ");if(d.length>0){if(rdx.utils.is_defined(m)){d+=(" "+m)}}else{d="--"}return d};this.onoff_formatter=function(a,b){if(rdx.utils.is_not_defined(a[b])){return a[b]}var d=a[b];if(d=="true"){return rdx.i18n.get_string("rdx.on_status")}return rdx.i18n.get_string("rdx.off_status")};this.yesno_formatter=function(a,b){if(rdx.utils.is_not_defined(a[b])){return a[b]}var d=a[b];if(d){return rdx.i18n.get_string("rdx.yes")}return rdx.i18n.get_string("rdx.no")};this.truefalse_formatter=function(a,b){if(rdx.utils.is_not_defined(a[b])){return a[b]}var d=a[b];if(d&&d==="true"){return rdx.i18n.get_string("rdx.yes")}return rdx.i18n.get_string("rdx.no")};this.yesno_for_enable_disable_formatter=function(a,b){if(rdx.utils.is_not_defined(a[b])){return a[b]}var d=a[b];if(rdx.utils.is_defined(d)){if(d=="ENABLED"||d=="YES"){return rdx.i18n.get_string("rdx.yes")}}return rdx.i18n.get_string("rdx.no")};this.trimmed_url_formatter=function(d,e,h){if(rdx.utils.is_not_defined(d[e])){return d[e]}var b,f=d[e];if(!rdx.utils.is_string(f)){return f}var a=f.lastIndexOf("/");var g=f.indexOf("?");if(g!=-1||a!=-1){if(g!=-1){b=f.substring(a==-1?0:a,g)}else{b=f.substring(a==-1?0:a)}}else{b=f}if(rdx.utils.is_defined(h)&&b.length>h){return b.substr(0,h)+"..."}return b};this.time_from_to_formatter=function(e,f,b,d){if(rdx.utils.is_not_defined(e[f])||(typeof e[f]!="number")||e[f]<0){return e[f]}try{var m=parseInt(e[f]);var h=m;if(rdx.utils.is_defined(b,d)){if(b!=d){var a=d;switch(b+"->"+d){case rdx.view_formatters.MICRO_SECOND_UNIT+"->"+rdx.view_formatters.MILLI_SECOND_UNIT:h=h/1000;break;case rdx.view_formatters.MICRO_SECOND_UNIT+"->"+rdx.view_formatters.SECOND_UNIT:h=h/1000000;break;case rdx.view_formatters.MILLI_SECOND_UNIT+"->"+rdx.view_formatters.MICRO_SECOND_UNIT:h=h*1000;break;case rdx.view_formatters.MILLI_SECOND_UNIT+"->"+rdx.view_formatters.SECOND_UNIT:h=h/1000;break;case rdx.view_formatters.SECOND_UNIT+"->"+rdx.view_formatters.MILLI_SECOND_UNIT:h=h*1000;break;case rdx.view_formatters.SECOND_UNIT+"->"+rdx.view_formatters.SECOND_UNIT:h=h*1000000;break;default:a=b;break}h=h+" "+a}else{h=h+" "+b}}}catch(g){}return h};this.seconds_formatter=function(b,d,f,a){if(rdx.utils.is_not_defined(b)||rdx.utils.is_not_defined(d)||rdx.utils.is_not_defined(b[d])){return b[d]}var g=b[d];var e=g;if(f==this.MICRO_SECOND_UNIT){if(g>=1000){if(g<(1000*1000)){e=g/1000;f=this.MILLI_SECOND_UNIT}else{e=g/(1000*1000);f=this.SECOND_UNIT}}}else{if(f==this.MILLI_SECOND_UNIT){if(g>=1000){e=g/1000;f=this.SECOND_UNIT}}else{}}if(rdx.utils.is_defined(a)){e=parseFloat(e).toFixed(a)}return e+" "+f};this.number_comma_kilo_formatter=function(a,b){var d="",f="",e=false;if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(a[b])){d=a[b];if(d<1000){}else{d=parseFloat(d/1000).toFixed(2);e=true}f=rdx.chart_utils.format_number(d)+((e==true)?" K":"")}return f};this.number_comma_formatter=function(a,b){if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(b)&&rdx.utils.is_defined(a[b])){var d=a[b];return d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}return""};this.seconds_to_hh_mm_ss_formatter=function(b,f,g){var h="",e="",m="",d="";if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(f)&&rdx.utils.is_defined(b[f])){h=b[f];if(rdx.utils.is_defined(g)){if(g==this.SECOND_UNIT||g==this.MILLI_SECOND_UNIT||g==this.MICRO_SECOND_UNIT){if(g==this.MILLI_SECOND_UNIT){h=h/1000}else{if(g==this.MICRO_SECOND_UNIT){h=h/(1000*1000)}}}else{return h}}var a=parseInt(h/(60*60));e=(a>=24)?a:(a%24);m=parseInt(h/60)%60;d=parseInt(h%60);h=e+" h: "+m+" m: "+d+"s"}return h};this.long_int_formatter=function(a,b,e){var d=a[b];if(rdx.utils.is_not_defined(d)){return""}d=d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return(e?d+" "+e:d)};this.trimmed_data_formatter=function(a,b,d){var f="";if(rdx.utils.is_defined(a)&&rdx.utils.is_defined(b)){var e=a[b];f=e;if(rdx.utils.is_defined(d)){if(e.length>d){f=$("<span>").text(e.substring(0,d)+"...").attr("title",e)}}}return f}};rdx.view_dependency_component=function(a,b){this._view=a;this._dependency_defn=b};rdx.view_dependency_component.prototype.get_component=function(b){if(!rdx.utils.is_function(this._view.get_view)){throw"Dependency configuration is not supported for this type of view "+b}var a=this._view.get_view(b);return a};rdx.view_dependency_component.prototype.set_dependent_info=function(d){if(!rdx.utils.is_function(this._view.get_view)){throw"Dependency configuration is not supported for this type of view "+property_key}var a=this._view.get_view(d.get_property());var b=d.is_parent_dependent();if(rdx.utils.is_defined(b)&&b){a=this._view}d.set_view(a);d.set_component(a._parent);this._set_action_and_container(d)};rdx.view_dependency_component.prototype._set_action_and_container=function(a){var b=null;switch(a.get_action()){case rdx.form_constants.field_actions.SHOW:case rdx.form_constants.field_actions.HIDE:b=this.toggle_show_hide;break;case rdx.view_constants.view_actions.DATA_REFRESH:view=a.get_view();component=a.get_component();b=this.do_data_refresh;break;default:throw"Dependency configuration is in-correct for "+dependent_fields[i]+" does not have an action set"}a.set_action_fn(b)};rdx.view_dependency_component.prototype.event_handling_callback=function(n,s,a,w,u){var f=w.property_key;if(!rdx.utils.is_function(this._view.get_view)){throw"Dependency configuration is not supported for this type of view "+f}var t=this._view.get_view(f)+"";for(var o=0,e=u.length;o<e;o++){var q=u[o];var t=q.get_view();var b=q.get_component();var p=q.get_action_fn();var m=q.get_action();var h=q.get_resource();var d=q.get_trigger_values();var v=q.get_dependency_determinant();if(rdx.utils.is_function(w.component.get_dependency_determinant_value)){if(v!=rdx.form_constants.dependency_determinant.VALUE){n=w.component.get_dependency_determinant_value(v)}}q.set_value(rdx.utils.get_formatted_response(n));q.set_resource_context(a);if(rdx.utils.is_defined(component,p,d)){var g=false;if(!rdx.utils.is_array(d)){if($.inArray(field_value,d.values)==-1){g=true}}else{if($.inArray(field_value,d)==-1){g=true}}q.set_reverse_action(g);p.apply(this,[q])}else{p.apply(this,[q])}}};rdx.view_dependency_component.prototype.toggle_show_hide=function(e){var b=false;var a=e.get_view();var g=e.get_action();var f=e.get_reverse_action();var d=e.get_component();if(rdx.utils.is_function(field.get_field)){field.get_field().set_hidden(true)}if((g==rdx.form_constants.field_actions.HIDE&&f)||(g==rdx.form_constants.field_actions.SHOW&&!f)){b=true;if(rdx.utils.is_function(field.get_field)){field.get_field().set_hidden(false)}}if(b){d.show()}else{d.hide()}return null};rdx.view_dependency_component.prototype.do_data_refresh=function(e){var g=e.get_view();var d=e.get_action();var f=e.get_pass_context();var b=e.get_view_to_open();if(rdx.utils.is_defined(f)&&f&&rdx.utils.is_defined(e.get_value())&&rdx.utils.is_defined(g._base_view)){var o=e.get_value();var a=o.view_context;if(rdx.utils.is_defined(a)){if(rdx.utils.is_defined(b)){var m=$.extend(true,m,rdx.utils.get_view(b));var h=o.new_view_title;if(rdx.utils.is_defined(h)){m.view_properties["title"]=h}var n=new rdx.base_view(g._base_view.get_parent(),m);n.set_view_context(a);n.prepare_view()}else{g._base_view.set_view_context(a);g._base_view.destroy_view();g._base_view.prepare_view()}}}else{if(rdx.utils.is_defined(e.get_view_context())&&rdx.utils.is_defined(e.get_value())&&rdx.utils.is_defined(g._base_view)){var a=g._base_view.get_view_context();a.set_url_params(e.get_view_context(),e.get_value());g._base_view.set_view_context(a);g._base_view.prepare_view()}else{if(rdx.utils.is_function(g.handle_dependency)){g.handle_dependency(e)}}}};rdx.view_dependency_component.prototype.trigger_dependencies=function(d){if(rdx.utils.is_defined(this._view._view_definition.trigger_depedency_on_load)&&this._view._view_definition.trigger_depedency_on_load==false){return}for(var a=0,b=d.length;a<b;a++){var f=d[a].callback;var e=d[a].event;if(rdx.utils.is_defined(f,e)){f.call_back([{},null,{}])}}};rdx.active_views=(function(){var a={};return{set_view:function(d,b){var e=b.get_view_definition().type;a[d]=b;this.register_events(b.get_view_definition(),b)},register_events:function(d,b){if(rdx.utils.is_not_defined(d)||rdx.utils.is_not_defined(d.view_properties.dependent_views)){return}$(d).bind(rdx.events.VIEW_SELECTION_CHANGED,{base_view:b},function(h,m,g){var f=h.data.base_view;var e=f.get_view();if(rdx.utils.is_function(e.action_on_view_selection)){e.action_on_view_selection(m,g)}})},get_view:function(b){return a[b]},remove_view:function(b){delete a[b]}}})();rdx.geo_map_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._parent_id=null;this._attach_unique_id_for_parent();var f={backgroundColor:{fill:"#FFFFFF",stroke:"#666",strokeWidth:0},colorAxis:{minValue:0,colors:["#66FF66","#003300"]},datalessRegionColor:"F5F5F5",displayMode:"auto",enableRegionInteractivity:"auto",keepAspectRatio:true,region:"world",magnifyingGlass:{enable:true,zoomFactor:5},resolution:"countries",width:this._parent.width(),data:[["Country","Users"],["United States",0]],legend:"none",tooltip:{showColorCode:true},geo_level:rdx.view_constants.WORLD};this._view_properties=$.extend({},f,this._view_definition.view_properties);if(this._view_properties.geo_level==rdx.view_constants.GEO_LEVEL.COUNTRY||this._view_properties.geo_level==rdx.view_constants.GEO_LEVEL.STATE){this._view_properties.resolution="provinces"}if(this._view_properties.geo_level==rdx.view_constants.GEO_LEVEL.STATE){this._view_properties.displayMode="markers"}this._options=null;this._chart=null;this._data=null;this._geo_level=this._view_properties.geo_level;this._response=null;this._resource_properties=this._view_definition.resource_properties;this._location_resource_properties_object={continent_property:null,continent_code_property:null,country_property:null,country_code_property:null,region_property:null,region_code_property:null,city_property:null,city_latitude_property:null,city_longitude_property:null};this._data_resource_property=null;this._select_handler_callback=this._view_properties.select_handler_callback};rdx.geo_map_view.prototype.make_view=function(){$(".title_tool_bar_table").first().show();this._set_location_and_data_resource_properties_object();this._set_geo_chart_options()};rdx.geo_map_view.prototype.get_resource_response_arrived=function(a){this._response=a;this._initialize_geo_chart_and_process_response()};rdx.geo_map_view.prototype.resize_view=function(){if(rdx.utils.is_defined(this._chart,this._data)){this._options.height=this._parent.height();this._options.width=this._parent.width();this._chart.draw(this._data,this._options)}};rdx.geo_map_view.prototype.destroy_view=function(){if(rdx.utils.is_defined(this._chart)){this._chart.clearChart();this._parent.empty()}};rdx.geo_map_view.prototype._set_location_and_data_resource_properties_object=function(){for(var a in this._view_definition.resource_properties){var b=this._view_definition.resource_properties[a];if(rdx.utils.is_defined(b,b.is_continent)&&b.is_continent){this._location_resource_properties_object.continent_property=a}else{if(rdx.utils.is_defined(b,b.is_continent_code)&&b.is_continent_code){this._location_resource_properties_object.continent_code_property=a}else{if(rdx.utils.is_defined(b,b.is_country)&&b.is_country){this._location_resource_properties_object.country_property=a}else{if(rdx.utils.is_defined(b,b.is_country_code)&&b.is_country_code){this._location_resource_properties_object.country_code_property=a}else{if(rdx.utils.is_defined(b,b.is_region)&&b.is_region){this._location_resource_properties_object.region_property=a}else{if(rdx.utils.is_defined(b,b.is_region_code)&&b.is_region_code){this._location_resource_properties_object.region_code_property=a}else{if(rdx.utils.is_defined(b,b.is_city)&&b.is_city){this._location_resource_properties_object.city_property=a}else{if(rdx.utils.is_defined(b,b.is_city_latitude)&&b.is_city_latitude){this._location_resource_properties_object.city_latitude_property=a}else{if(rdx.utils.is_defined(b,b.is_city_longitude)&&b.is_city_longitude){this._location_resource_properties_object.city_longitude_property=a}else{if(rdx.utils.is_defined(b,b.is_data)&&b.is_data){this._data_resource_property=a;if(rdx.utils.is_defined(b.renderer_callback)){this._data_renderer_callback=b.renderer_callback}else{this._data_renderer_callback=null}}else{continue}}}}}}}}}}}};rdx.geo_map_view.prototype._load_geo_chart_library=function(){var a=document.createElement("script");a.src=window.location.protocol+"//www.google.com/jsapi";a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);var b=this;a.onload=function(d){b._load_geo_chart()}};rdx.geo_map_view.prototype._load_geo_chart=function(){var a=this;google.load("visualization","1",{callback:function(b){a._load_map()},packages:["geochart"]})};rdx.geo_map_view.prototype._load_map=function(){if(rdx.utils.is_defined(this._response)&&this._response.length){this._data=this._create_geo_chart_data();if(rdx.utils.is_defined(this._response)){if(this._geo_level==rdx.view_constants.GEO_LEVEL.COUNTRY||this._geo_level==rdx.view_constants.GEO_LEVEL.STATE){this._options.region=this._response[0][this._location_resource_properties_object.country_code_property]}}this._chart=new google.visualization.GeoChart(this._parent[0]);this._chart.draw(this._data,this._options);var a=this;google.visualization.events.addListener(this._chart,"select",function(){a._location_select_handler()});this.resize_view()}};rdx.geo_map_view.prototype._attach_unique_id_for_parent=function(){this._parent_id=rdx.utils.generate_unique_id("geo_map");this._parent.attr("id",this._parent_id)};rdx.geo_map_view.prototype._create_geo_chart_data=function(){this._data=new google.visualization.DataTable();this._create_first_data_element();for(var b=0,a=this._response.length;b<a;b++){this._create_data_element(this._response[b])}return this._data};rdx.geo_map_view.prototype._create_first_data_element=function(){var a=new Array();if(this._geo_level==rdx.view_constants.GEO_LEVEL.WORLD){this._data.addColumn("string","Country");this._data.addColumn("number",rdx.i18n.get_string(this._resource.properties[this._data_resource_property].label));if(rdx.utils.is_defined(this._data_renderer_callback)){this._data.addColumn({type:"string",role:"tooltip"})}}else{if(this._geo_level==rdx.view_constants.GEO_LEVEL.COUNTRY){this._data.addColumn("string","Region");this._data.addColumn("number",rdx.i18n.get_string(this._resource.properties[this._data_resource_property].label));if(rdx.utils.is_defined(this._data_renderer_callback)){this._data.addColumn({type:"string",role:"tooltip"})}}else{this._data.addColumn("number","Lat");this._data.addColumn("number","Long");this._data.addColumn("string","City");this._data.addColumn("number",rdx.i18n.get_string(this._resource.properties[this._data_resource_property].label));if(rdx.utils.is_defined(this._data_renderer_callback)){this._data.addColumn({type:"string",role:"tooltip"})}}}return a};rdx.geo_map_view.prototype._create_data_element=function(a){var d=new Array();if(this._geo_level==rdx.view_constants.GEO_LEVEL.WORLD){if(rdx.utils.is_defined(a[this._location_resource_properties_object.country_property],a[this._data_resource_property])){if(rdx.utils.is_defined(this._data_renderer_callback)){var b=new Object();b[this._data_resource_property]=parseInt(a[this._data_resource_property]);this._data.addRow([a[this._location_resource_properties_object.country_property],parseInt(a[this._data_resource_property]),rdx.i18n.get_string(this._resource.properties[this._data_resource_property].label)+" : "+this._data_renderer_callback.call_back([b,this._data_resource_property,this._resource.properties[this._data_resource_property].unit])])}else{this._data.addRow([a[this._location_resource_properties_object.country_property],parseInt(a[this._data_resource_property])])}}}else{if(this._geo_level==rdx.view_constants.GEO_LEVEL.COUNTRY){if(rdx.utils.is_defined(this._data_renderer_callback)){var b=new Object();b[this._data_resource_property]=parseInt(a[this._data_resource_property]);this._data.addRow([a[this._location_resource_properties_object.region_property],parseInt(a[this._data_resource_property]),rdx.i18n.get_string(this._resource.properties[this._data_resource_property].label)+" : "+this._data_renderer_callback.call_back([b,this._data_resource_property,this._resource.properties[this._data_resource_property].unit])])}else{this._data.addRow([a[this._location_resource_properties_object.region_property],parseInt(a[this._data_resource_property])])}}else{if(rdx.utils.is_defined(this._data_renderer_callback)){var b=new Object();b[this._data_resource_property]=parseInt(a[this._data_resource_property]);this._data.addRow([parseFloat(a[this._location_resource_properties_object.city_latitude_property]),parseFloat(a[this._location_resource_properties_object.city_longitude_property]),a[this._location_resource_properties_object.city_property],parseInt(a[this._data_resource_property]),rdx.i18n.get_string(this._resource.properties[this._data_resource_property].label)+" : "+this._data_renderer_callback.call_back([b,this._data_resource_property,this._resource.properties[this._data_resource_property].unit])])}else{this._data.addRow([parseFloat(a[this._location_resource_properties_object.city_latitude_property]),parseFloat(a[this._location_resource_properties_object.city_longitude_property]),a[this._location_resource_properties_object.city_property],parseInt(a[this._data_resource_property])])}if(rdx.utils.is_defined(a[this._location_resource_properties_object.city_latitude_property],a[this._location_resource_properties_object.city_longitude_property],a[this._location_resource_properties_object.city_property],parseInt(a[this._data_resource_property]))){d.push(a[this._location_resource_properties_object.city_property],a[this._location_resource_properties_object.city_property],parseInt(a[this._data_resource_property]))}}}return d};rdx.geo_map_view.prototype._initialize_geo_chart_and_process_response=function(){this._load_geo_chart_library()};rdx.geo_map_view.prototype._location_select_handler=function(){if(rdx.utils.is_defined(this._select_handler_callback)&&!(this._view_properties.displayMode=="markers")){var a=this._chart.getSelection();if(rdx.utils.is_defined(a)){var b=this._data.getValue(a[0].row,0);if(rdx.utils.is_defined(b)){this._select_handler_callback.call_back([this._get_selected_object(b)])}}}else{return}};rdx.geo_map_view.prototype._get_selected_object=function(b){var a=new Object();if(this._geo_level==rdx.view_constants.GEO_LEVEL.WORLD){a[this._location_resource_properties_object.country_property]=b}else{if(this._geo_level==rdx.view_constants.GEO_LEVEL.COUNTRY){a[this._location_resource_properties_object.region_property]=b;a[this._location_resource_properties_object.country_property]=this._get_country_for_region(b)}else{}}return a};rdx.geo_map_view.prototype._get_country_for_region=function(f){var b=null;if(rdx.utils.is_defined(this._response)&&this._response.length){for(var e=0,d=this._response.length;e<d;e++){var a=this._response[e];if(a[this._location_resource_properties_object.region_property]==f){b=a[this._location_resource_properties_object.country_property];break}}}return b};rdx.geo_map_view.prototype._set_geo_chart_options=function(){this._options={backgroundColor:this._view_properties.backgroundColor,colorAxis:this._view_properties.colorAxis,datalessRegionColor:this._view_properties.datalessRegionColor,displayMode:this._view_properties.displayMode,enableRegionInteractivity:this._view_properties.enableRegionInteractivity,keepAspectRatio:this._view_properties.keepAspectRatio,region:this._view_properties.region,magnifyingGlass:this._view_properties.magnifyingGlass,resolution:this._view_properties.resolution,width:this._view_properties.width,legend:this._view_properties.legend}};rdx.geo_map_view.prototype.set_data_property=function(a){this._data_resource_property=a};rdx.geo_map_view.prototype.set_select_handler_callback=function(a){this._select_handler_callback=a};rdx.geo_map_view.prototype.set_data_renderer_callback=function(a){this._data_renderer_callback=a};rdx.geo_map_view_new=function(e,d,g,a){this._parent=e;this._view_definition=d;this._resource=g;this._base_view=a;this._parent_id=null;var h={maxZoom:18,minZoom:2,zoom:2,height:500,animate:false,no_of_arc_points:100,curved_line_style:{weight:1,color:"#703da1",opacity:0.65},circle_options:{color:"#703da1",opacity:0.5,clickable:true,weight:5,radius:1},heatmap_show_tooltip:"Show heat map",heatmap_hide_tooltip:"Hide heat map",search_handler_callback:null,click_handler_callback:null,hover_handler_callback:null,link_renderer_callback:null,connection_click_handler_callback:null,marker_highlight_renderer_callback:null,marker_bubble_click_handler_callback:null,legend_map:null,get_api_key_callback:null};this._view_properties=$.extend({},h,this._view_definition.view_properties);var f=$.extend(true,{},{},this._view_properties);if(this._view_properties.search_handler_callback){var b=new rdx.callback(this,this._handle_search_handler_callback);f.search_handler_callback=b}this._geo_map_component=new rdx.geo_map_new(this._parent,f)};rdx.geo_map_view_new.prototype.make_view=function(){rdx.mask.mask_component(this._parent)};rdx.geo_map_view_new.prototype.load_map_api=function(a){rdx.geo_map_utils.load_google_map(new rdx.callback(this,this._load_api_success_callback,[a]),this._view_properties.get_api_key_callback.call_back());rdx.mask.unmask_component(this._parent)};rdx.geo_map_view_new.prototype._load_api_success_callback=function(a){rdx.geo_map_marker_wrapper();this._geo_map_component.render(a)};rdx.geo_map_view_new.prototype.get_resource_response_arrived=function(a){this.load_map_api(a)};rdx.geo_map_view_new.prototype.resize_view=function(){};rdx.geo_map_view_new.prototype._handle_search_handler_callback=function(b){var a=this._view_properties.search_handler_callback.call_back([b]);var d=false;if(a.search_filter==true){d=true}var e=this._base_view.get_view_context();if(rdx.utils.is_defined(a.view_context)){e.set_context_data(null,a.view_context)}if(d==true||rdx.utils.is_empty(b)){this._base_view.refresh_view()}return d};rdx.geo_map_view_new.prototype.destroy_view=function(){this._geo_map_component.destroy()};rdx.geo_map_view_new.prototype.get_toolbar_items=function(){this._add_tool_bar();return this._toolbar_items};rdx.geo_map_view_new.prototype._add_tool_bar=function(){var b=this;var a=[new rdx.action({tooltip:rdx.i18n.get_string("rdx.refresh"),image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this.refresh_view)})];this._toolbar_items=a};rdx.geo_map_view_new.prototype.is_title_required=function(){return true};rdx.geo_map_view_new.prototype.refresh_view=function(a){this._base_view.prepare_view()};rdx.topology_diagram_view=function(d,b,e,a){this._is_dialog=(rdx.utils.is_defined(b.view_properties.is_dialog)&&b.view_properties.is_dialog)?true:false;this._is_slider=(rdx.utils.is_defined(b.view_properties.is_slider)&&b.view_properties.is_slider)?true:false;this._parent=this._is_dialog?$("<div>"):d;this._view_definition=b;this._view_properties=b.view_properties;this._resource=e;this._base_view=a;this.diagram_type=this._get_diagram_type();this._jsPlumb=null;this._parent_container=null;this._formation_diagram_container=null;this.services_id={};this.networks_id={};this.network_bar={};this._entity_type=null;this._entity_name=null;this._switch=null;this._connection=null;this._ip=null;this._diagram=null;this._entity_id=null;this._source_property_name=null;this._target_property_name=null;this._source_property_view=null;this._target_property_view=null;this._source_type_property_resource_type=null;this._target_type_property_resource_type=null;this._source_type_property_name=null;this._target_type_property_name=null;this._source_type_property_view=null;this._target_type_property_view=null;this._source_type_property_resource=null;this._target_type_property_resource=null;this._link_data_property_name=null;this._hop_property_name=null;this._source_id=null;this._destination_id=null;this._response=null;this.elementsLevel={};this.elementsAtLevel={};this.currentCountAtLevel={};this._number_of_levels=0;this._source=null;this._current_segment_index=0;this._new_item_index=0;var f={is_dialog:false,is_editable:false,height:300,width:300,icons:{client:rdx.images.CLIENT_IMAGE,cloud:rdx.images.CLOUD_IMAGE,netscaler:rdx.images.NETSCALER_IMAGE,repeater:rdx.images.REPEATER_IMAGE,server:rdx.images.SERVER_IMAGE,device:rdx.images.NETSCALER_IMAGE,network:rdx.images.CLOUD_IMAGE,br:rdx.images.CB_IMAGE,sdwanvw:rdx.images.CB_IMAGE}};this._view_properties=$.extend({},f,this._view_definition.view_properties);if(rdx.utils.is_defined(this._view_properties)&&rdx.utils.is_defined(this._view_properties.title)){this._view_properties.title=rdx.i18n.get_string(this._view_properties.title)}if(rdx.utils.is_defined(this._view_properties._dont_show_title)&&(this._view_properties._dont_show_title==true)){this._view_properties.title=null}this._get_resource_properties();this._is_editable=rdx.utils.is_defined(this._view_properties.is_editable)&&this._view_properties.is_editable;this._available_items_resource=rdx.utils.is_defined(this._view_properties.available_items_resource)?this._view_properties.available_items_resource:null;this._click_view_map=this._view_properties.click_view_map};rdx.topology_diagram_view.prototype._get_diagram_type=function(){if(rdx.utils.is_defined(this._view_properties)){var a=this._view_properties;if(rdx.utils.is_defined(a.diagram_type)){var b=a.diagram_type;if(b==rdx.view_constants.HOP_DIAGRAM){return"hop_diagram"}else{if(b==rdx.view_constants.FORMATION_DIAGRAM){return"formation_diagram"}else{return null}}}}return null};rdx.topology_diagram_view.prototype._get_resource_properties=function(){if(this.diagram_type=="hop_diagram"){for(var a in this._view_definition.resource_properties){var b=this._view_definition.resource_properties[a];if(rdx.utils.is_defined(b)){if(rdx.utils.is_defined(b.is_source)&&b.is_source){this._source_property_name=a;this._source_property_view=b;this._source_property_resource=this._resource.properties[a]}if(rdx.utils.is_defined(b.is_target)&&b.is_target){this._target_property_name=a;this._target_property_view=b;this._target_property_resource=this._resource.properties[a]}if(rdx.utils.is_defined(b.is_source_type)&&b.is_source_type){this._source_type_property_name=a;this._source_type_property_view=b;this._source_type_property_resource=this._resource.properties[a]}if(rdx.utils.is_defined(b.is_target_type)&&b.is_target_type){this._target_type_property_name=a;this._target_type_property_view=b;this._target_type_property_resource=this._resource.properties[a]}if(rdx.utils.is_defined(b.is_hop)&&b.is_hop){this._hop_property_name=a}if(rdx.utils.is_defined(b.is_source_text)&&b.is_source_text){this._source_text_property_name=a}if(rdx.utils.is_defined(b.is_target_text)&&b.is_target_text){this._target_text_property_name=a}if(rdx.utils.is_defined(b.is_source_top)&&b.is_source_top){this._source_top_property_name=a}if(rdx.utils.is_defined(b.is_source_left)&&b.is_source_left){this._source_left_property_name=a}if(rdx.utils.is_defined(b.is_target_top)&&b.is_target_top){this._target_top_property_name=a}if(rdx.utils.is_defined(b.is_target_left)&&b.is_target_left){this._target_left_property_name=a}if(rdx.utils.is_defined(b.is_source_icon_path)&&b.is_source_icon_path){this._source_icon_path_property_name=a}if(rdx.utils.is_defined(b.is_target_icon_path)&&b.is_target_icon_path){this._target_icon_path_property_name=a}if(rdx.utils.is_defined(b.is_link_data)&&b.is_link_data){this._link_data_property_name=a}}}}else{if(this.diagram_type==="formation_diagram"){for(var a in this._view_definition.resource_properties){var b=this._view_definition.resource_properties[a];if(rdx.utils.is_defined(b)){if(rdx.utils.is_defined(b.is_entity_type)&&b.is_entity_type){this._entity_type=a}if(rdx.utils.is_defined(b.is_entity_name)&&b.is_entity_name){this._entity_name=a}if(rdx.utils.is_defined(b.is_switch)&&b.is_switch){this._switch=a}if(rdx.utils.is_defined(b.is_connection)&&b.is_connection){this._connection=a}if(rdx.utils.is_defined(b.is_ip)&&b.is_ip){this._ip=a}if(rdx.utils.is_defined(b.is_diagram)&&b.is_diagram){this._diagram=a}if(rdx.utils.is_defined(b.is_entity_id)&&b.is_entity_id){this._entity_id=a}}}}}};rdx.topology_diagram_view.prototype.make_view_hop_diagram=function(){this._parent.empty();this._diagram_title=rdx.utils.is_defined(this._view_properties.title)?rdx.i18n.get_string(this._view_properties.title):null;var p=$("<table>").addClass("diagram_table_container").append($("<tbody>"));this._parent.append(p);if(this._diagram_title){var o=$("<tr>");var d=$("<td>").attr("colspan","2").addClass("topology_hop_diagram_title").hide();d.append(this._diagram_title);o.append(d);p.append(o)}var e=$("<tr>");this._td_diagram=$("<td>").css("width",(this._is_editable&&this._available_items_resource)?"80%":"100%");this._td_available_items=$("<td>").css("width",(this._is_editable&&this._available_items_resource)?"20%":"0%");e.append(this._td_diagram);if(this._is_editable){e.append(this._td_available_items)}p.append(e);if(rdx.utils.is_defined(this._click_view_map)){this._click_detail_row=$("<tr>");this._click_detail_column=$("<td>");this._click_detail_row.append(this._click_detail_column);p.append(this._click_detail_row)}this._diagram_container=this._td_diagram;if(this._is_editable&&this._available_items_resource){var m=rdx.utils.get_resource(this._available_items_resource);var f=this;rdx.model.get(m,null,new rdx.callback(this,function(q){if(rdx.utils.is_defined(q)){f._create_available_items_pane(q)}}),null,new rdx.callback(this,function(){rdx.message_box.info("appflow.cannot_get_available_items")}));var g=$("<tr>");var b=$("<td>").attr("colspan","2").addClass("topology_hop_action_pane");var h=$("<button>").addClass("topology_hop_save_button").append(rdx.i18n.get_string("rdx.save")).bind(rdx.events.CLICK,{_this:this},function(q){q.data._this._save_diagram()});var n=$("<button>").addClass("topology_hop_cancel_button").append(rdx.i18n.get_string("rdx.cancel"));b.append(h).append(n);g.append(b);p.append(g)}else{this._td_available_items.css("display","none")}this._diagram_container.addClass("topology_hop_diagram_container");if(this._view_properties.is_dialog){var a={minHeight:550,width:800,modal:true,resizable:true,title:this._view_properties.title};this._parent.dialog($.extend({},a,this._view_definition.dialog_properties))}if(rdx.utils.is_defined(this._view_properties.height)){this._diagram_container.css("height",this._view_properties.height)}else{this._diagram_container.css("height","550")}this._configure_jsPlumb_defaults_hop_diagram()};rdx.topology_diagram_view.prototype.make_view_formation_diagram=function(){this._parent.empty();var a=$("<div></div>");a.addClass("topology_formation_diagram_parent_container");var b=$("<div></div>");b.addClass("topology_formation_diagram_container");this._parent.append(a);this._parent_container=a;this._parent_container.append(b);this._formation_diagram_container=b;this._jsPlumb=jsPlumb.getInstance();this._configure_jsPlumb_defaults_formation_diagram(this._jsPlumb)};rdx.topology_diagram_view.prototype.make_view=function(){if(this.diagram_type==="hop_diagram"){this.make_view_hop_diagram()}else{if(this.diagram_type==="formation_diagram"){this.make_view_formation_diagram()}else{}}};rdx.topology_diagram_view.prototype.get_resource_response_arrived_hop=function(h){var d=h;this._parent_top_offset=$(this._parent).offset().top;this._parent_left_offset=$(this._parent).offset().left;this._response=d;this._is_saved_diagram=this._view_properties.is_saved_diagram;if(rdx.utils.is_defined(this._source_property_name)&&rdx.utils.is_defined(this._target_property_name)){if(rdx.utils.is_not_defined(this._is_saved_diagram)||!this._is_saved_diagram){for(var f=0,e=d.length;f<e;f++){var g=d[f];var a=0;if(rdx.utils.is_defined(g[this._hop_property_name])){a=parseInt(g[this._hop_property_name])}if(rdx.utils.is_defined(g[this._source_property_name])){if(!rdx.utils.is_defined(this.elementsLevel[g[this._source_property_name]])){this.elementsLevel[g[this._source_property_name]]=a}else{if(this.elementsLevel[g[this._source_property_name]]<a){this.elementsLevel[g[this._source_property_name]]=a}}}if(rdx.utils.is_defined(g[this._target_property_name])){if(!rdx.utils.is_defined(this.elementsLevel[g[this._target_property_name]])){this.elementsLevel[g[this._target_property_name]]=a+1}else{if(this.elementsLevel[g[this._target_property_name]]<(a+1)){this.elementsLevel[g[this._target_property_name]]=a+1}}}}for(var b in this.elementsLevel){var m=this.elementsLevel[b];if(rdx.utils.is_defined(this.elementsAtLevel[m])){this.elementsAtLevel[m]++}else{this.elementsAtLevel[m]=1;this._number_of_levels++}}for(var f=0,e=d.length;f<e;f++){this._create_segment_hop_diagram(d[f])}}else{this._create_segment_saved_diagram(d[this._current_segment_index])}}};rdx.topology_diagram_view.prototype.get_resource_response_arrived_formation=function(e){var o=this._entity_type;var B=this._ip;var E=this._connection;var a=this._update_response_with_formation_element_positions(e);if(o){for(var A=0;A<a.length;A++){var d=a[A];if(d[o]=="container_height"){var w=d.height;this._formation_diagram_container.css({height:w});break}}if(a.length>2){for(var A=0;A<a.length;A++){var d=a[A];if(d[o]==="service"){this._draw_service_elements(d)}else{if(d[o]==="network"){this._draw_network_elements(d)}else{if(d[o]==="footer"){this.drawFooter(d)}}}}}for(var A=0;A<a.length;A++){var d=a[A];if(d[o]==="service"){var f=[],g=[];var q=[],t=[];q=[d.left,d.top];t=[d.width,d.height];var s=d.anchors;var n=[];var b=d[E];var m=d[B];var v=this.services_id[m];var h=v.id_service;for(var z=0;z<(d[E].length);z++){var u="topology_formation"+b[z]+"vertical_bar";var D=$("."+h);var p=$("."+u);var C=this.network_bar[b[z]];if(rdx.utils.is_defined(p)&&rdx.utils.is_defined(D)&&rdx.utils.is_defined(C)){f=[C.left,C.top];g=[C.width,C.height];n[z]=this.anchorFinder(f,g,q,t,s[z]);this.connect_elements(p,D,[n[z],s[z]],{strokeStyle:C.color})}}}}}};rdx.topology_diagram_view.prototype.get_resource_response_arrived=function(a){if(this.diagram_type==="hop_diagram"){this.get_resource_response_arrived_hop(a)}else{if(this.diagram_type==="formation_diagram"){this.get_resource_response_arrived_formation(a)}}};rdx.topology_diagram_view.prototype._configure_jsPlumb_defaults_hop_diagram=function(a){jsPlumb.importDefaults({PaintStyle:{lineWidth:3,strokeStyle:"#1172b9"},Endpoint:["Dot",{radius:4,cssClass:"topology_hop_endpoint"}],EndpointStyle:{fillStyle:"#1172b9"},Connector:["Straight"],DragOptions:{cursor:"pointer",zIndex:2000},DropOptions:{tolerance:"touch",hoverClass:"dropHover",activeClass:"dragActive"},ConnectionsDetachable:true,ReattachConnections:true,Scope:"x"});_this=this;this._end_point_options={isSource:this._is_editable,isTarget:this._is_editable,maxConnections:10,beforeDrop:function(e){var b=$(document.getElementById(e.sourceId));var g=$(document.getElementById(e.targetId));var o=b.attr(_this._source_icon_path_property_name);var n=g.attr(_this._target_icon_path_property_name);var m=b.offset().left/screen.width;var f=b.offset().top/screen.height;var p=g.offset().left/screen.width;var h=g.offset().top/screen.height;var d={source:e.sourceId,source_text:"",source_icon_path:o,source_left_offset:m,source_top_offset:f,target:e.targetId,target_text:"",target_icon_path:n,target_left_offset:p,target_top_offset:h};_this._to_save_response.push(d);return true},scope:"x"};if(this._is_editable){jsPlumb.bind("click",function(d,b){if(confirm("Delete connection from "+d.sourceId+" to "+d.targetId+"?")){jsPlumb.detach(d)}})}else{jsPlumb.bind("click",function(d,b){})}};rdx.topology_diagram_view.prototype._configure_jsPlumb_defaults_formation_diagram=function(a){a.importDefaults({Connector:["Straight",{gap:[0,5]}]})};rdx.topology_diagram_view.prototype._draw_network_elements=function(a){var m=this._entity_type;var s=this._entity_name;var d=this._switch;var b=this._entity_id;var n=a[b];var g=a[m];var f=$("<div></div>");if(rdx.utils.is_defined(this._click_view_map)&&rdx.utils.is_defined(this._click_view_map[g])&&rdx.utils.is_defined(rdx.utils.get_view(this._click_view_map[g]))){f.css("cursor","pointer").bind(rdx.events.CLICK,{ID:n,view_definition:this._click_view_map[g]},function(z){var C=z.data.ID;var w=rdx.utils.get_view(z.data.view_definition);var B=null;if(rdx.utils.is_defined(w.resource_name)){B=rdx.utils.get_resource(w.resource_name)}if(rdx.utils.is_defined(B)&&rdx.utils.is_defined(B.primary_keys)){var u=B.primary_keys[0];if(rdx.utils.is_defined(C)&&rdx.utils.is_defined(w)){var v=rdx.page.show_slider();var A=new Object();A[u]=C;var t=new rdx.base_view(v,w);rdx.url_utils.add_to_url_object(t.get_view_context().get_url_params(),[u],rdx.url_utils.GET_BY_NAME_TYPE,A);t.prepare_view()}}})}var e=$("<div></div>").addClass("topology_formation_network_name_container");var o=$("<div></div>");f.append(e);f.append(o);f.addClass("topology_formation_ntw_container");this._formation_diagram_container.append(f);if(s){var p=$("<p>"+a[s]+"</p>").addClass("topology_formation_network_element_name");e.append(p)}if(d){var h=$("<p>"+a[d]+"</p>").addClass("topology_formation_network_element_name");o.append(h);o.addClass("topology_formation_network_switch_name_container")}var q=$("<div class=topology_formation"+n+"vertical_bar></div>");q.addClass("topology_formation_vertical_bar");this._formation_diagram_container.append(q);f.css({top:a.top,left:a.left,width:a.width,height:a.height});o.css({width:a.width*a.switch_percentage,height:a.height});e.css({width:a.width*(1-a.switch_percentage),"background-color":a.color,color:a.color,height:a.height,left:(a.switch_percentage*a.width)});q.css({top:a.vrtcl_bar_top,left:a.vrtcl_bar_left,width:a.vrtcl_bar_width,height:a.vrtcl_bar_height,color:a.color,"background-color":a.color});this.network_bar[n]={top:a.vrtcl_bar_top,left:a.vrtcl_bar_left,width:a.vrtcl_bar_width,height:a.vrtcl_bar_height,color:a.color,ID:n}};rdx.topology_diagram_view.prototype._draw_service_elements=function(t){var m=this._entity_type;var u=this._entity_name;var n=this._ip;var b=this._entity_id;var q=Math.random();var a=t[n];var o=a.replace(/\./g,"");o="topology_formation_"+o;var g=t[b];var h=t[m];var e=$("<div></div>").addClass(o);if(rdx.utils.is_defined(this._click_view_map)&&rdx.utils.is_defined(this._click_view_map[h])&&rdx.utils.is_defined(rdx.utils.get_view(this._click_view_map[h]))){e.css("cursor","pointer").bind(rdx.events.CLICK,{service_entity_id:g,view_definition:this._click_view_map[h]},function(B){var E=B.data.service_entity_id;var A=rdx.utils.get_view(B.data.view_definition);var D=null;if(rdx.utils.is_defined(A.resource_name)){D=rdx.utils.get_resource(A.resource_name)}if(rdx.utils.is_defined(D)&&rdx.utils.is_defined(D.primary_keys)){var w=D.primary_keys[0];if(rdx.utils.is_defined(E)&&rdx.utils.is_defined(A)){var z=rdx.page.show_slider();var C=new Object();C[w]=E;var v=new rdx.base_view(z,A);rdx.url_utils.add_to_url_object(v.get_view_context().get_url_params(),[w],rdx.url_utils.GET_BY_NAME_TYPE,C);v.prepare_view()}}})}var p=$("<div></div>");var d=$("<div></div>");e.css({top:t.top,left:t.left,width:t.width,height:t.height,color:t.color});e.addClass("topology_formation_service_container");p.css({height:(t.height*0.7),"background-color":t.color});p.addClass("topology_formation_ip_container");d.css({height:(t.height*0.3)});d.addClass("topology_formation_status_container");p.hover(function(){$(this).css("background-color",t.onhover_color)},function(){$(this).css("background-color",t.color)});if(u){var f=$("<p>"+t[u]+"</p>").addClass("topology_formation_service_element_name_font")}var s=$("<p>"+t[n]+"</p>").addClass("topology_formation_network_element_name_ip");p.append(f);p.append(s);e.append(p);e.append(d);this._formation_diagram_container.append(e);this.services_id[a]={id_service:o}};rdx.topology_diagram_view.prototype.drawFooter=function(b){var a=$("<div></div>");a.addClass("topology_formation_footer_element");a.css({top:b.top,left:b.left,width:b.width,height:b.height});this._formation_diagram_container.append(a)};rdx.topology_diagram_view.prototype.anchorFinder=function(n,d,e,f,a){var m=f[1]*(a[1]);m=e[1]+m;var g=m-n[1];var b=g/d[1];var h=[1,b,0,0];return h};rdx.topology_diagram_view.prototype.connect_elements=function(b,e,f,a){var d={endpoints:a.endpoints||[["Rectangle",{width:4,height:4}],["Rectangle",{width:10,height:10,border:"5px"}]],paintStyle:a.paintStyle||{strokeStyle:a.strokeStyle||"#00CCFF",lineWidth:a.lineWidth||5,fillStyle:"transparent"},anchors:f,endpointStyles:a.endpointStyles||[{fillStyle:"transparent",strokeStyle:a.strokeStyle||"#00CCFF"},{fillStyle:"transparent",strokeStyle:a.strokeStyle||"#00CCFF"}]};this._jsPlumb.connect({source:b,target:e},d)};rdx.topology_diagram_view.prototype._update_response_with_formation_element_positions=function(s){var b=s;var C=0,q=0,d=5,f=500;var A=35,t=225,H=15,a=15,z=100;ntw_elt_left=30;default_switch_percentage=0.35;var g=50,B=100,w=225,P=130;var N=15;var u=40;var v=this._entity_type;var Q=this._connection;var M=["#1eb2a9","#ee8108","#a9bf3b","#008fc7","#09c0e3","#CC5480","#ef3124","#ffbe00","#db4c3c","#c5881c","#6a93c7","#386398","#669999","#993333","#006600","#990099","#ff9966","#99ff99","#9999ff","#cc6600","#33cc33","#cc99ff","#ff6666","#99cc66","#ff7f2a","#ffd332","#1bae44"];if(v){for(var L=0;L<b.length;L++){var o=b[L];if(o[v]==="service"){q++}if(o[v]==="network"){C++}}}var h=(C)*(A+H)+(g)+z;var D=((C-1)*(a))+t+(B)+ntw_elt_left;var p=h+(q*(P+g));var G=ntw_elt_left+t-d;var O=p;var n=((C-1)*(a))+d;if(v){for(var L=0,e=0;L<b.length;L++){var o=b[L];if(o[v]==="network"){o.top=e*(A+H)+z;o.left=ntw_elt_left;o.width=((C-1-e)*(a))+t;o.height=A;o.vrtcl_bar_height=p-(o.top+o.height);o.vrtcl_bar_left=o.left+o.width-d;o.vrtcl_bar_width=d;o.vrtcl_bar_top=o.top+o.height;o.switch_percentage=(t*default_switch_percentage)/o.width;o.color=M[e%(M.length)];e++}}for(var L=0,I=0;L<b.length;L++){var o=b[L];if(o[v]==="service"){o.top=h+(I*(P+g));o.left=D;o.width=w;o.height=P;o.color="#e3e3e4";o.onhover_color="#fedc69";var m=0.7*(1/(o[Q].length+1));var E=[];for(var J=0;J<o[Q].length;J++){E.push([0,(J+1)*m,0,0])}o.anchors=E;I++}}var K={};K[v]="container_height";K.height=(h+(q*(P+g)))+f}b.push(K);var F={};F[v]="footer";F.height=u;F.top=O;F.left=G-N;F.width=n+(2*N);b.push(F);return b};rdx.topology_diagram_view.prototype._save_diagram=function(){if(rdx.utils.is_defined(this._to_save_response)&&this._to_save_response.length){for(var f=0,e=this._to_save_response.length;f<e;f++){var h=this._to_save_response[f];var d=($(document.getElementById(h.source)).offset().top);var b=($(document.getElementById(h.source)).offset().left);var a=($(document.getElementById(h.target)).offset().top);var g=($(document.getElementById(h.target)).offset().left);h.source_left_offset=(b-this._parent_left_offset)/this._diagram_container.width();h.source_top_offset=(d-this._parent_top_offset)/this._diagram_container.height();h.target_left_offset=(g-this._parent_left_offset)/this._diagram_container.width();h.target_top_offset=(a-this._parent_top_offset)/this._diagram_container.height()}}};rdx.topology_diagram_view.prototype._create_available_items_pane=function(o){var n=$("<div>").append(rdx.i18n.get_string("appflow.available_items")).addClass("topology_hop_available_items_header");var e=$("<div>").addClass("topology_hop_available_items_container");for(var d=0,m=o.length;d<m;d++){if(d==0){this._td_available_items.append(n).append(e)}var p=$("<div>");e.append(p);var g=o[d].type;var a=o[d].name;var b=this._view_properties.icons[g];var h=$("<img>").css("padding-top","100px").attr("title","Double click to use the item in the diagram").attr("src",b).bind(rdx.events.DOUBLE_CLICK,{type:g,icon_path:b,_this:this},function(q){q.data._this._add_new_item(q.data.type,q.data.icon_path)});p.append(h);var f=$("<span>").append(a).css("font-weight","bold");p.append(f)}};rdx.topology_diagram_view.prototype._add_new_item=function(f,e){var d=$("<div>").attr("id",f+this._new_item_index).css("position","absolute");var b=this._is_dialog?100:this._diagram_container.offset().top+20;d.css("top",b);var a=$("<img>").attr("src",e);d.append(a);d.attr(this._source_icon_path_property_name,e);d.attr(this._target_icon_path_property_name,e);jsPlumb.draggable(d,{containment:"parent"});this._diagram_container.append(d);jsPlumb.addEndpoint(f+this._new_item_index,{anchor:"BottomCenter"},this._end_point_options);this._new_item_index++;d.bind(rdx.events.DOUBLE_CLICK,{},function(g){jsPlumb.remove(this)})};rdx.topology_diagram_view.prototype._create_segment_hop_diagram=function(F){var z=F[this._source_property_name];var I=F[this._target_property_name];var C=F[this._source_text_property_name];var s=F[this._target_text_property_name];var m=F[this._source_type_property_name];var f=F[this._target_type_property_name];var p=rdx.utils.is_defined(this._view_definition.resource_properties[this._link_data_property_name]["renderer_callback"])?this._view_definition.resource_properties[this._link_data_property_name]["renderer_callback"].call_back([F]):F[this._link_data_property_name];var H=parseInt(F[this._hop_property_name]);var v=100;var h=100;var u=null;var g=null;var B=null;var w=null;var q=null;var e=null;var E=true;if(rdx.utils.is_not_defined(this._to_save_response)){this._to_save_response=new Array()}if(rdx.utils.is_defined(this._view_properties.icons)){var G=this._view_properties.icons;var t=null;var o=null;if(!document.getElementById(z.replace(/\./g,"_"))){var b=this.elementsLevel[z];var n=1;if(rdx.utils.is_defined(this.elementsAtLevel[b])){n=this.elementsAtLevel[b]}if(rdx.utils.is_defined(this.currentCountAtLevel[b])){this.currentCountAtLevel[b]++}else{this.currentCountAtLevel[b]=1}if(this._is_slider){v=200;h=300}else{if(rdx.utils.is_defined(this._diagram_container.height())){v=this._diagram_container.height()/(n+1);if(this._number_of_levels!=1){h=(this._diagram_container.width()-50)/(this._number_of_levels)}}else{v=100;h=100}}var u=(this._is_dialog||this._is_slider)?25:this._diagram_container.offset().left+10;u=u+(h*(b-1));var g=(this._is_dialog||this._is_slider)?0:this._diagram_container.offset().top;g=g+(this.currentCountAtLevel[b]*v);t=$("<div>").attr("id",z.replace(/\./g,"_")).css("left",u).css("top",g).css("position","absolute");if(rdx.utils.is_defined(this._click_view_map)&&rdx.utils.is_defined(this._click_view_map[m])&&rdx.utils.is_defined(rdx.utils.get_view(this._click_view_map[m]))){t.css("cursor","pointer");t.bind(rdx.events.CLICK,{view:rdx.utils.get_view(this._click_view_map[m]),_this:this,source:z},function(L){var R=L.data.view;var P=L.data._this;var J=L.data.source;if(rdx.utils.is_defined(R)&&rdx.utils.is_defined(P)&&rdx.utils.is_defined(J)){P._click_detail_column.empty();var O=$("<div>").addClass("hop_diagram_detail_view_header").append(J);var Q=$("<div>").addClass("hop_diagram_detail_view_container");P._click_detail_column.append(O).append(Q);var M=P.get_base_view().get_view_context();var K=new Object();$.extend(true,K,M);K._data=null;var T=new rdx.base_view(Q,R);var N=rdx.utils.get_resource(R.resource_name).primary_keys[0];var S=new Object();S[N]=J;rdx.url_utils.add_to_url_object(K.get_url_params(),[N],rdx.url_utils.GET_BY_NAME_TYPE,S);T.set_view_context(K);T.prepare_view()}})}if(E){t.click();E=false}q=G[m];$(t).attr(this._source_icon_path_property_name,q);var d=$("<img>").attr("src",q).css("top","30%").css("position","absolute");this._diagram_container.append(t);var o=$("<div>").text(C).addClass("formation_hop_icon_label");var A=$("<div>").css("position","relative");t.append(A).css("min-height","60px");A.append(d).append(o).css("min-height","60px");d.load({source:z,_this:this,parent:this._diagram_container,div:t,source_icon:d,node_title_div:o},function(J){o.width(this.width)});if(this._is_editable){jsPlumb.draggable(t,{containment:"parent"})}if(this._is_editable){t.bind(rdx.events.DOUBLE_CLICK,{},function(J){jsPlumb.remove(this)})}}if(!document.getElementById(I.replace(/\./g,"_"))){var b=this.elementsLevel[I];var n=1;if(rdx.utils.is_defined(this.elementsAtLevel[b])){n=this.elementsAtLevel[b]}if(rdx.utils.is_defined(this.currentCountAtLevel[b])){this.currentCountAtLevel[b]++}else{this.currentCountAtLevel[b]=1}if(this._is_slider){v=200;h=300}else{if(rdx.utils.is_defined(this._diagram_container.height())){v=this._diagram_container.height()/(n+1);if(this._number_of_levels!=1){h=this._diagram_container.width()/(this._number_of_levels)}}else{v=100;h=100}}B=parseInt($("#"+z.replace(/\./g,"_")).css("left"))+(h);w=(this._is_dialog||this._is_slider)?0:this._parent.offset().top;w=w+(this.currentCountAtLevel[b]*v);t=$("<div>").attr("id",I.replace(/\./g,"_")).css("left",B).css("top",w).css("position","absolute");if(rdx.utils.is_defined(this._click_view_map)&&rdx.utils.is_defined(this._click_view_map[f])&&rdx.utils.is_defined(rdx.utils.get_view(this._click_view_map[f]))){t.css("cursor","pointer");t.bind(rdx.events.CLICK,{view:rdx.utils.get_view(this._click_view_map[f]),_this:this,target:I},function(K){var R=K.data.view;var O=K.data._this;var P=K.data.target;if(rdx.utils.is_defined(R)&&rdx.utils.is_defined(O)&&rdx.utils.is_defined(P)){O._click_detail_column.empty();var N=$("<div>").addClass("hop_diagram_detail_view_header").append(P);var Q=$("<div>").addClass("hop_diagram_detail_view_container");O._click_detail_column.append(N).append(Q);var L=O.get_base_view().get_view_context();var J=new Object();$.extend(true,J,L);J._data=null;var T=new rdx.base_view(Q,R);var M=rdx.utils.get_resource(R.resource_name).primary_keys[0];var S=new Object();S[M]=P;rdx.url_utils.add_to_url_object(J.get_url_params(),[M],rdx.url_utils.GET_BY_NAME_TYPE,S);T.set_view_context(J);T.prepare_view()}})}e=G[f];$(t).attr(this._target_icon_path_property_name,e);var D=$("<img>").attr("src",e).css("top","30%").css("position","absolute");this._diagram_container.append(t);var o=$("<div>").text(s).addClass("formation_hop_icon_label");var A=$("<div>").css("position","relative");t.append(A).css("min-height","60px");A.append(D).append(o).css("min-height","60px");D.load({source:z.replace(/\./g,"_"),target:I.replace(/\./g,"_"),_this:this,parent:this._diagram_container,div:t,target_icon:D,link_data:p,node_title_div:o},function(J){o.width(this.width);J.data._this._draw_segment(J.data.source,J.data.target,J.data.link_data)});if(this._is_editable){jsPlumb.draggable(t,{containment:"parent"})}if(this._is_editable){t.bind(rdx.events.DOUBLE_CLICK,{},function(J){jsPlumb.remove(this)})}}else{this._draw_segment(z,I,p)}var a={source:z,source_text:C,source_icon_path:q,source_left_offset:u,source_top_offset:g,target:I,target_text:s,target_icon_path:e,target_left_offset:B,target_top_offset:w};this._to_save_response.push(a)}};rdx.topology_diagram_view.prototype._create_segment_saved_diagram=function(C){if(this._current_segment_index>=this._response.length){return}var D=this._view_properties.icons;var u=C[this._source_property_name];var F=C[this._target_property_name];var A=C[this._source_text_property_name];var g=C[this._source_type_property_name];var p=C[this._target_text_property_name];var e=C[this._target_type_property_name];var m=C[this._link_data_property_name];var n=C[this._link_data_property_name];var E=C[this._hop_property_name];var s=null;var f=null;var o=null;var z=null;var t=null;var d=null;if(rdx.utils.is_not_defined(this._to_save_response)){this._to_save_response=new Array()}if(rdx.utils.is_defined(this._view_properties.icons)){var q=null;var h=null;if(!document.getElementById(u)){f=this._parent_top_offset+(C[this._source_top_property_name]*this._diagram_container.height());s=this._parent_left_offset+(C[this._source_left_property_name]*this._diagram_container.width());q=$("<div>").attr("id",u).css("left",s).css("top",f).css("position","absolute");o=C[this._source_icon_path_property_name];$(q).attr(this._source_icon_path_property_name,o);var b=$("<img>").attr("src",o).css("top","30%").css("position","absolute");this._diagram_container.append(q);var h=$("<div>").text(A).addClass("formation_hop_icon_label");var v=$("<div>").css("position","relative");q.append(v).css("min-height","60px");v.append(b).append(h).css("min-height","60px");$(q).attr("title",A).css("cursor","pointer");b.load({_this:this,div:q,node_title_div:h,target:F,source:u,item:C,link_data:m,source_text:A,source_icon_path:o,source_left_offset:s,source_top_offset:f},function(W){var U=W.data._this;var K=W.data.node_title_div;var Z=W.data.source_text;var M=W.data.source_icon_path;var O=W.data.source_left_offset;var J=W.data.source_top_offset;var ac=W.data.target;var R=W.data.source;var ab=W.data.item;var L=W.data.link_data;var P=W.data.div;P.bind(rdx.events.MOUSE_OVER,{id:R},function(ad){var al=jsPlumb.getConnections({scope:"*",source:ad.data.id});var af=[];if(rdx.utils.is_defined(al)&&al.length){for(var ah=0,ai=al.length;ah<ai;ah++){var ae=al[ah];ae.setPaintStyle({strokeStyle:"#8a0d55"});af.push(ae.id);var ak=jsPlumb.getConnections({scope:"*",source:ae.target});for(var ag=0;ag<ak.length;ag++){var aj=ak[ag];aj.setPaintStyle({strokeStyle:"#8a0d55"});if(af.indexOf(aj.id)==-1){af.push(aj.id)}}}}});P.bind(rdx.events.MOUSE_OUT,{id:R},function(ad){var al=jsPlumb.getConnections({scope:"*",source:ad.data.id});var af=[];if(rdx.utils.is_defined(al)&&al.length){for(var ah=0,ai=al.length;ah<ai;ah++){var ae=al[ah];ae.setPaintStyle({strokeStyle:"#1172b9"});af.push(ae.id);var ak=jsPlumb.getConnections({scope:"*",source:ae.target});for(var ag=0;ag<ak.length;ag++){var aj=ak[ag];aj.setPaintStyle({strokeStyle:"#1172b9"});if(af.indexOf(aj.id)==-1){af.push(aj.id)}}}}});if(U._is_editable){jsPlumb.draggable(P,{containment:"parent"});P.bind(rdx.events.DOUBLE_CLICK,{},function(ad){jsPlumb.remove(this)})}K.width(this.width);if(!document.getElementById(ac)){var N=ab[U._target_text_property_name];var I=ab[U._target_type_property_name];var Q=U._parent_top_offset+(ab[U._target_top_property_name]*U._diagram_container.height());var V=U._parent_left_offset+(ab[U._target_left_property_name]*U._diagram_container.width());var P=$("<div>").attr("id",ac).css("left",V).css("top",Q).css("position","absolute");var H=ab[U._target_icon_path_property_name];$(P).attr(U._target_icon_path_property_name,H);var aa=$("<img>").attr("src",H).css("top","30%").css("position","absolute");U._diagram_container.append(P);var K=$("<div>").text(N).addClass("formation_hop_icon_label");var S=$("<div>").css("position","relative");P.append(S).css("min-height","60px");var T=N+" ["+L+"]";$(P).attr("title",T).css("cursor","pointer");S.append(aa).append(K).css("min-height","60px");aa.load({source:R,div:P,target:ac,__this:U,link_data:L,node_title_div:K,source_text:Z,source_icon_path:M,source_left_offset:O,source_top_offset:J},function(af){var an=af.data.source_text;var ao=af.data.source_icon_path;var am=af.data.source_left_offset;var ai=af.data.source_top_offset;var ad=af.data.source;var ak=af.data.target;var al=af.data.__this;var ah=af.data.node_title_div;var aj=af.data.link_data;var ae=af.data.div;ae.bind(rdx.events.MOUSE_OVER,{id:ak},function(ap){var ay=jsPlumb.getConnections({scope:"*",source:ap.data.id});var ar=[];if(rdx.utils.is_defined(ay)&&ay.length){for(var au=0,av=ay.length;au<av;au++){var aq=ay[au];aq.setPaintStyle({strokeStyle:"#8a0d55"});ar.push(aq.id);var ax=jsPlumb.getConnections({scope:"*",source:aq.target});for(var at=0;at<ax.length;at++){var aw=ax[at];aw.setPaintStyle({strokeStyle:"#8a0d55"});if(ar.indexOf(aw.id)==-1){ar.push(aw.id)}}}}});ae.bind(rdx.events.MOUSE_OUT,{id:ak},function(ap){var ay=jsPlumb.getConnections({scope:"*",source:ap.data.id});var ar=[];if(rdx.utils.is_defined(ay)&&ay.length){for(var au=0,av=ay.length;au<av;au++){var aq=ay[au];aq.setPaintStyle({strokeStyle:"#1172b9"});ar.push(aq.id);var ax=jsPlumb.getConnections({scope:"*",source:aq.target});for(var at=0;at<ax.length;at++){var aw=ax[at];aw.setPaintStyle({strokeStyle:"#1172b9"});if(ar.indexOf(aw.id)==-1){ar.push(aw.id)}}}}});ah.width(this.width);al._draw_segment(ad,ak,aj);if(al._is_editable){jsPlumb.draggable(ae,{containment:"parent"});ae.bind(rdx.events.DOUBLE_CLICK,{},function(ap){jsPlumb.remove(this)})}al._draw_segment(ad,ak,aj);var ag={source:ad,source_text:an,source_icon_path:ao,source_left_offset:am,source_top_offset:ai,target:ak,target_text:N,target_icon_path:H,target_left_offset:V,target_top_offset:Q};al._to_save_response.push(ag);al._current_segment_index++;al._create_segment_saved_diagram(al._response[al._current_segment_index])})}else{var N=ab[U._target_text_property_name];var I=ab[U._target_type_property_name];var Q=U._parent_top_offset+(ab[U._target_top_property_name]*U._diagram_container.height());var V=U._parent_left_offset+(ab[U._target_left_property_name]*U._diagram_container.width());var H=ab[U._target_icon_path_property_name];U._draw_segment(R,ac,L);var G={source:R,source_text:Z,source_icon_path:M,source_left_offset:O,source_top_offset:J,target:ac,target_text:N,target_icon_path:H,target_left_offset:V,target_top_offset:Q};U._to_save_response.push(G);U._current_segment_index++;U._create_segment_saved_diagram(U._response[U._current_segment_index])}})}else{var p=C[this._target_text_property_name];var e=C[this._target_type_property_name];var t=this._parent_top_offset+(C[this._target_top_property_name]*this._diagram_container.height());var z=this._parent_left_offset+(C[this._target_left_property_name]*this._diagram_container.width());var d=C[this._target_icon_path_property_name];if(!document.getElementById(F)){var q=$("<div>").attr("id",F).css("left",z).css("top",t).css("position","absolute");$(q).attr(this._target_icon_path_property_name,d);var B=$("<img>").attr("src",d).css("top","30%").css("position","absolute");this._diagram_container.append(q);var h=$("<div>").text(p).addClass("formation_hop_icon_label");var v=$("<div>").css("position","relative");q.append(v).css("min-height","60px");var w=p+" ["+m+"]";$(q).attr("title",w).css("cursor","pointer");v.append(B).append(h).css("min-height","60px");f=this._parent_top_offset+(C[this._source_top_property_name]*this._diagram_container.height());s=this._parent_left_offset+(C[this._source_left_property_name]*this._diagram_container.width());o=C[this._source_icon_path_property_name];B.load({source:u,div:q,target:F,_this:this,link_data:m,node_title_div:h,source_text:A,source_icon_path:o,source_left_offset:s,source_top_offset:f},function(I){var Q=I.data.source_text;var R=I.data.source_icon_path;var P=I.data.source_left_offset;var L=I.data.source_top_offset;var G=I.data.source;var O=I.data.target;var M=I.data._this;var K=I.data.node_title_div;var N=I.data.link_data;var H=I.data.div;H.bind(rdx.events.MOUSE_OVER,{id:O},function(S){var ac=jsPlumb.getConnections({scope:"*",target:S.data.id});var U=[];if(rdx.utils.is_defined(ac)&&ac.length){for(var W=0,Z=ac.length;W<Z;W++){var T=ac[W];T.setPaintStyle({strokeStyle:"#8a0d55"});U.push(T.id);var ab=jsPlumb.getConnections({scope:"*",target:T.source});for(var V=0;V<ab.length;V++){var aa=ab[V];aa.setPaintStyle({strokeStyle:"#8a0d55"});if(U.indexOf(aa.id)==-1){U.push(aa.id)}}}}});H.bind(rdx.events.MOUSE_OUT,{id:O},function(S){var ac=jsPlumb.getConnections({scope:"*",target:S.data.id});var U=[];if(rdx.utils.is_defined(ac)&&ac.length){for(var W=0,Z=ac.length;W<Z;W++){var T=ac[W];T.setPaintStyle({strokeStyle:"#1172b9"});U.push(T.id);var ab=jsPlumb.getConnections({scope:"*",target:T.source});for(var V=0;V<ab.length;V++){var aa=ab[V];aa.setPaintStyle({strokeStyle:"#1172b9"});if(U.indexOf(aa.id)==-1){U.push(aa.id)}}}}});K.width(this.width);if(M._is_editable){jsPlumb.draggable(H,{containment:"parent"});H.bind(rdx.events.DOUBLE_CLICK,{},function(S){jsPlumb.remove(this)})}M._draw_segment(G,O,N);var J={source:G,source_text:Q,source_icon_path:R,source_left_offset:P,source_top_offset:L,target:O,target_text:p,target_icon_path:d,target_left_offset:z,target_top_offset:t};M._to_save_response.push(J);M._current_segment_index++;M._create_segment_saved_diagram(M._response[M._current_segment_index])})}else{t=this._parent_top_offset+(C[this._target_top_property_name]*this._diagram_container.height());z=this._parent_left_offset+(C[this._target_left_property_name]*this._diagram_container.width());d=C[this._target_icon_path_property_name];f=this._parent_top_offset+(C[this._source_top_property_name]*this._diagram_container.height());s=this._parent_left_offset+(C[this._source_left_property_name]*this._diagram_container.width());o=C[this._source_icon_path_property_name];this._draw_segment(u,F,m);var a={source:u,source_text:A,source_icon_path:o,source_left_offset:s,source_top_offset:f,target:F,target_text:p,target_icon_path:d,target_left_offset:z,target_top_offset:t};this._to_save_response.push(a);this._current_segment_index++;this._create_segment_saved_diagram(this._response[this._current_segment_index])}}}};rdx.topology_diagram_view.prototype._draw_segment=function(b,d,g){var f=jsPlumb.addEndpoint(b,{anchor:"RightMiddle"},this._end_point_options);var e=jsPlumb.addEndpoint(d,{anchor:"LeftMiddle"},this._end_point_options);var a=jsPlumb.connect({source:f,target:e,scope:"x",Connector:["Straight"],overlays:["Label",["Label",{label:g,location:0.6,id:b+"_"+d,cssClass:"topology_hop_connection_label"}]]})};rdx.topology_diagram_view.prototype.resize_view=function(){};rdx.topology_diagram_view.prototype.get_base_view=function(){return this._base_view};rdx.topology_diagram_view.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.visualizer_view=function(d,b,a){this._view_definition=b;this._parent=d;this._visualizer_title=null;this._block_count=0;this.refresh_div=null;this._base_view=a;this._block_object={};this._count=0;this._level_tree={};this.to_be_drawn_count=0;this.to_be_drawn=[];this.is_back_button_required=true;this._parent_height=this._view_definition.view_properties.height;this._parent_min_height=this._view_definition.view_properties.min_height;this.lb_request_policies=["lbvserver_cmppolicy_binding","lbvserver_rewritepolicy_binding","lbvserver_appflowpolicy_binding","lbvserver_responderpolicy_binding","lbvserver_auditsyslogpolicy_binding","lbvserver_authorizationpolicy_binding","lbvserver_appfwpolicy_binding","lbvserver_scpolicy_binding","lbvserver_pqpolicy_binding","lbvserver_filterpolicy_binding","lbvserver_tmtrafficpolicy_binding","lbvserver_dnspolicy64_binding","lbvserver_spilloverpolicy_binding","lbvserver_feopolicy_binding","lbvserver_appqoepolicy_binding","lbvserver_transformpolicy_binding","lbvserver_cachepolicy_binding"];this.lb_response_policies=["lbvserver_cmppolicy_binding","lbvserver_rewritepolicy_binding","lbvserver_cachepolicy_binding"];this.lb_res_click_view_map=["lbvserver_cmppolicy_response_binding_op_page","lbvserver_rewritepolicy_response_binding_op_page","lbvserver_cachepolicy_response_binding_op_page"];this.lb_req_click_view_map=["lbvserver_cmppolicy_request_binding_op_page","lbvserver_rewritepolicy_request_binding_op_page","lbvserver_appflowpolicy_request_binding_op_page","lbvserver_responderpolicy_request_binding_op_page","lbvserver_auditsyslogpolicy_request_binding_op_page","lbvserver_authorizationpolicy_request_binding_op_page","lbvserver_appfwpolicy_request_binding_op_page","lbvserver_scpolicy_request_binding_op_page","lbvserver_pqpolicy_request_binding_op_page","lbvserver_filterpolicy_request_binding_op_page","lbvserver_tmtrafficpolicy_request_binding_op_page","lbvserver_dnspolicy64_request_binding_op_page","lbvserver_spilloverpolicy_request_binding_op_page","lbvserver_copolicy_request_binding_op_page","lbvserver_appqoepolicy_request_binding_op_page","lbvserver_transformpolicy_request_binding_op_page","lbvserver_cachepolicy_request_binding_op_page"];this._view_defn={type:rdx.view_constants.VISUALIZER_VIEW,diagram_properties:{node_1:{connector_block:true,level:1,child:"node_3"},node_3:{connector_block:true,level:2,child:"node_4",connect_top:true},node_4:{resource_name:this.lb_request_policies,connect:true,connection_img:"req-arrow1.png",zero_count_message:"No Request Policies",level:3,condition:{bindpoint:"REQUEST"},direction:"left",child:"node_5",count:true,label:["Compression Policy","Rewrite Policy","AppFlow Policy","Responder Policy","AuditSyslog Policy","Authorization Policy","AppFW Policy","Sure Connect Policy","Priority Queuing Policy","Filter Policy","Traffic Policy","DNS64 Policy","Spillover Policy","FEO Policies","AppQoe Policy","Transform Policy","Cache Policy"],click_view_name:this.lb_req_click_view_map,single_block:true},node_5:{connector_block:true,level:4,child:"node_7",connect_bottom:true},node_6:{resource_name:["lbvserver"],key:"totalservices",connect:true,image_url:"/admin_ui/rdx/core/images/server.png",label:"Services",click_view_name:["visualizer_lbvserver_service_binding_op_page"],single_block:false,level:5,zero_count_message:"No Services",child:"node_5",display_data:{data_renderer_callback:new rdx.callback(neo.view_formatters.health_percentage_formatter)}},node_7:{resource_name:this.lb_response_policies,connect:true,connection_img:"res-arrow1.png",direction:"right",child:"node_3",level:3,zero_count_message:"No Response Policies",count:true,label:["Compression Policy","Rewrite Policy","Cache Policies"],single_block:true,click_view_name:this.lb_res_click_view_map}},view_properties:{title:"LB Visualizer",toggle_view:true,referrer:"cs",height:"1050",basic_settings_view_name:"lbvserver_visualizer_common_settings_view",description:"LoadBalancing Visualizer"},right_div_properties:{vserver:{label:"Virtual Server",node_id:"node_3"},policies:{label:"Policies",node_top:"node_5",node_bottom:"node_3",add_view_name:"lbvserverpolicychoose_op_wizard_view"},services:{label:"Services",add_view_name:"lbvserver_service_binding_insert_view"}}}};rdx.visualizer_view.prototype.make_view=function(){if(rdx.utils.is_defined(this._view_definition.application_name)&&rdx.utils.is_array(this._view_definition.selected_entity)&&this._view_definition.selected_entity.length>1){this._select_public_endpoint_div=$("<div>").addClass("tab-container bottom-corners top-right-corner op_wizard_button_panel");this._select_public_endpoint_text=$("<div />").addClass("visualizer_public_endpoint_text");this._select_public_endpoint_text.text("Select the Public Endpoint");this._select_public_endpoint_div.css("padding-left","0px");this._select_public_endpoint_div.css("background-color","#FFFFFF");this._select_public_endpoint_div.append(this._select_public_endpoint_text);this.select_public_endpoint_dropdown=$("<select />");this.select_public_endpoint_dropdown.addClass("public_endpoint_list");for(var a=0;a<this._view_definition.selected_entity.length;a++){var b=$("<option />").append(this._view_definition.selected_entity[a]);this.select_public_endpoint_dropdown.append(b)}this._select_public_endpoint_div.append(this.select_public_endpoint_dropdown);var d=$("<div>").addClass("button-group");this._input_visualize_lb_button=$("<input />").addClass("submit_button").attr({type:"button",value:"Visualize"});d.append(this._input_visualize_lb_button);this._input_visualize_lb_button.bind(rdx.events.CLICK,{obj:this},function(f){var e=f.data.obj;e._view_definition.selected_entity=e.select_public_endpoint_dropdown.val();if(rdx.utils.is_defined($(".visualizer_title"))){$(".visualizer_title").remove()}if(rdx.utils.is_defined($(".visualizer_title"))){$(".topology_formation_diagram_parent_container").remove()}e._make_view()});this._select_public_endpoint_div.append(d);this._parent.append(this._select_public_endpoint_div);return}else{this._make_view()}};rdx.visualizer_view.prototype._make_view=function(){this._parent.addClass("op_wizard_form_panel form_inline smooth_all_corner");if(rdx.utils.is_defined(this._parent_min_height)){this._parent_container=$("<div>").css({height:this._parent_height,"min-height":this._parent_min_height,"border-bottom":"1px solid #ccc",overflow:"auto"})}else{this._parent_container=$("<div>").css("height",this._parent_height).css("border-bottom","1px solid #ccc")}this._visualizer_title="Visualizer - "+this._view_definition.selected_entity;this._visualizer_description_title=$("<div />").addClass("visualizer_description_title").append(this._view_definition.view_properties.title);if(rdx.utils.is_defined(this._view_definition.description)){this._upper_description_div=$("<div />").addClass("visualizer_upper_description").append(this._view_definition.description)}if(rdx.utils.is_defined(this._view_definition.view_properties.description)){this.description_div=$("<div>").addClass("visualizer_title").append(this._visualizer_title);this.refresh_div=$("<div />").addClass("visualizer_refresh_div").html('<a href="javascript:void(0);" title="Click here to Refresh"><img src="'+rdx.images.REFRESH_IMG+'" alt="Add"/></a>').bind(rdx.events.CLICK,{object:this,view_definition:this._view_definition},function(a){var b=a.data.object;b._parent_container.empty();b.close_button_container.empty();b._block_count=0;b._block_object={};b._count=0;b.to_be_drawn_count=0;b.to_be_drawn=[];b._level_tree={};b._initialize_visualizer_view(true)});this.description_div.append(this.refresh_div)}this._initialize_visualizer_view(false)};rdx.visualizer_view.prototype._initialize_visualizer_view=function(a){this._parent_container.addClass("topology_formation_diagram_parent_container");var b={add_grey_button:true,grey_button_label:"rdx.form_close_button_label",grey_button_click_handler_callback:new rdx.callback(this,this.close_view)};this.close_button_container=$("<div>").addClass("visualizer_title");if(a){$(this._parent.children()[this._parent.children().length-1]).remove()}this._parent.append(this._visualizer_description_title).append(this._upper_description_div).append(this.description_div).append(this._parent_container);this._parent.append(this.close_button_container);new rdx.button_bar(this.close_button_container,new rdx.form_field({properties:b})).render();this.construct_visualizer_elements(this._view_definition)};rdx.visualizer_view.prototype.construct_visualizer_elements=function(d){this._cs_parent_div=$("<div />").addClass("topology_formation_diagram_parent_container");for(var b in d.diagram_properties){var a=d.diagram_properties[b];if(rdx.utils.is_defined(this._level_tree[a.level])){this._level_tree[a.level].push(b)}else{this._level_tree[a.level]=[b]}this._block_count++}this._last_level=a.level;for(var b in d.diagram_properties){this.make_block(b,d,false)}};rdx.visualizer_view.prototype._create_right_add_div=function(n){this.right_add_div=$("<div />").addClass("visualizer_add_new_div").css("height","100%");if(rdx.utils.is_defined(n.view_properties.referrer)&&n.view_properties.referrer=="cs"){var b=$("<div />").addClass("vserver_add_div");b.css("height",106);if(rdx.utils.is_defined(this._view_definition.application_name)){b.text("Public Endpoint")}else{b.text("CS Virtual Server")}var d=$("<div />").addClass("vserver_add_div");d.css("height",75);if(rdx.utils.is_defined(this._view_definition.application_name)){d.text("Application Units")}else{d.text("Virtual Server(s)")}var h=$("<div />").addClass("policy_add_div").html('<span class="visualizer_">Policies</span><br/><a href="javascript:void(0);" class="add_new_block" title="Add New"><img src="'+rdx.images.PLUS_WHITE+'" alt="Add"/>Add</a>').bind(rdx.events.CLICK,{object:this,view_definition:n},function(s){if($(s.target).hasClass("add_new_block")==false){return}var q=rdx.utils.get_view("lbvserverpolicychoose_op_wizard_view");var p=s.data.view_definition;var o=rdx.view_utils.show_view_in_slider(q,null,{name:p.selected_entity});$(o).bind(rdx.events.VIEW_DESTROYED,{obj:s.data.object},function(t){var u=t.data.obj;u._block_count=0;u._block_object={};u._count=0;u.to_be_drawn_count=0;u.to_be_drawn=[];u._cs_parent_div.empty();u._level_tree={};u.right_add_div.remove();u.construct_visualizer_elements(u._view_defn)});s.stopPropagation()});h.css("height",this._block_object.node_5.position().top-this._block_object.node_3.position().top);var f=$("<div />").addClass("policy_add_div").html('<span class="visualizer_">Services</span><br/><a href="javascript:void(0);" class="add_new_block" title="Add New"><img src="'+rdx.images.PLUS_WHITE+'" alt="Add"/>Add</a>').bind(rdx.events.CLICK,{object:this,view_definition:n},function(s){if($(s.target).hasClass("add_new_block")==false){return}var q=rdx.utils.get_view("lbvserver_service_binding_insert_view");var p=s.data.view_definition;var o=rdx.view_utils.show_view_in_slider(q,null,{name:p.selected_entity});$(o).bind(rdx.events.VIEW_DESTROYED,{obj:s.data.object},function(t){var u=t.data.obj;u._block_count=0;u._block_object={};u._count=0;u.to_be_drawn_count=0;u.to_be_drawn=[];u._cs_parent_div.empty();u._level_tree={};u.right_add_div.remove();u.construct_visualizer_elements(u._view_defn)});s.stopPropagation()});this.right_add_div.append(b,d,h,f);this._parent_container.append(this.right_add_div)}else{for(var m in this._view_definition.right_div_properties){var a=this._view_definition.right_div_properties[m];if(rdx.utils.is_defined(a.add_view_name)){if(a.add_saved_data==true){var g=a.add_saved_data}var e=$("<div />").addClass("policy_add_div").html('<span class="visualizer_">'+a.label+'</span><br/><a href="javascript:void(0);" class="add_new_block" title="Add New"><img src="'+rdx.images.PLUS_WHITE+'" alt="Add"/>Add</a>').bind(rdx.events.CLICK,{object:this,div_properties:a,view_definition:n},function(s){if($(s.target).hasClass("add_new_block")==false){return}var q=rdx.utils.get_view(s.data.div_properties.add_view_name);var p=s.data.view_definition;if(p.saved_data){var o=rdx.view_utils.show_view_in_slider(q,null,{name:p.saved_data})}else{var o=rdx.view_utils.show_view_in_slider(q,null,{name:p.selected_entity})}$(o).bind(rdx.events.VIEW_DESTROYED,{obj:s.data.object},function(t){var u=t.data.obj;u._parent_container.empty();u.close_button_container.empty();u._block_count=0;u._block_object={};u._count=0;u.to_be_drawn_count=0;u.to_be_drawn=[];u._level_tree={};u._initialize_visualizer_view(true)});s.stopPropagation()})}else{var e=$("<div />").addClass("vserver_add_div").text(a.label)}if(rdx.utils.is_defined(a.node_id)){e.css("height",this._block_object[a.node_id].position().top)}else{if(rdx.utils.is_defined(a.node_top)&&rdx.utils.is_defined(a.node_bottom)){e.css("height",this._block_object[a.node_top].position().top-this._block_object[a.node_bottom].position().top)}}this.right_add_div.append(e)}}if(rdx.utils.is_defined(m)){this._parent_container.append(this.right_add_div)}};rdx.visualizer_view.prototype.make_block=function(d,n,g){var f=n.diagram_properties[d];if(rdx.utils.is_defined(f.resource_name)&&(rdx.utils.is_defined(f.connect&&f.connect!=false))){if(d=="node_2"&&n.view_properties.description=="Content Switching Visualizer"){var b=new rdx.model_executor_service(new rdx.callback(this,this.handle_cs_actions,[n,f,d,true,g]),new rdx.callback(),true)}else{var b=new rdx.model_executor_service(new rdx.callback(this,this._render_block,[n,f,d,true,g]),new rdx.callback(),true)}for(var e=0;e<f.resource_name.length;e++){if(f.resource_name[e]=="csaction"){continue}var h=rdx.utils.get_resource(f.resource_name[e]);var a=h.primary_keys;var m=rdx.url_utils.construct_url_params(null,rdx.url_utils.FORCE_GET_BY_NAME_TYPE,a,{name:n.selected_entity});b.add("get",h,null,null,m)}b.execute()}else{this._render_block(null,n,f,d,true,false)}};rdx.visualizer_view.prototype.handle_cs_actions=function(b,n,g,d,o,h){var f=b.get_collated_response();var a=new rdx.model_executor_service(new rdx.callback(this,this._handle_cs_actions,[n,g,d,true,h,b]),new rdx.callback(),true);if(rdx.utils.is_defined(f[1].csvserver_cspolicy_binding)){for(var e=0;e<f[1].csvserver_cspolicy_binding.length;e++){var m=rdx.url_utils.construct_url_params(null,rdx.url_utils.FORCE_GET_BY_NAME_TYPE,rdx.utils.get_resource("cspolicy").primary_keys,{policyname:f[1].csvserver_cspolicy_binding[e].policyname});a.add("get",rdx.utils.get_resource("cspolicy"),null,null,m)}a.execute()}};rdx.visualizer_view.prototype._handle_cs_actions=function(d,p,m,e,q,n,g){var h=d.get_collated_response();var b=0;var a=new rdx.model_executor_service(new rdx.callback(this,this.handle_lb_vpn,[p,m,e,true,n,g]),new rdx.callback(),true);for(var f=0;f<h.length;f++){if(rdx.utils.is_defined(h[f].cspolicy)&&rdx.utils.is_defined(h[f].cspolicy[0])&&rdx.utils.is_defined(h[f].cspolicy[0].action)){b++;var o=rdx.url_utils.construct_url_params(null,rdx.url_utils.FORCE_GET_BY_NAME_TYPE,rdx.utils.get_resource("csaction").primary_keys,{name:h[f].cspolicy[0].action});a.add("get",rdx.utils.get_resource("csaction"),null,null,o)}}if(b>0){a.execute()}else{this.handle_lb_vpn(null,p,m,e,q,n,g)}};rdx.visualizer_view.prototype.handle_lb_vpn=function(e,m,h,g,a,f,d){if(e!=null){if(e.get_collated_response().length>0){for(var b=0;b<e.get_collated_response().length;b++){if(e.get_collated_response().length>1){if(rdx.utils.is_defined(e.get_collated_response()[b].csaction)){e.get_collated_response()[0].csaction.push(e.get_collated_response()[b].csaction[0])}}}d._properties.collated_response.push(e.get_collated_response()[0]);if(e.get_collated_response()[0].csaction[0].targetlbvserver==e.get_collated_response()[0].csaction[1].targetlbvserver){e.get_collated_response()[0].csaction.shift()}}}this._render_block(d,m,h,g,true,f)};rdx.visualizer_view.prototype._render_block=function(b,z,g,H,e,o){var t=0;var q="";if(g.connector_block==true){var C=$("<div />").addClass("visualizer_connectorblock");t=(this._parent_container.height()/(this._block_count-1))*(g.level-1);if(H=="node_5"){C.css("top",748);if(rdx.utils.is_defined(z.view_properties.referrer)){C.css("top",510)}}else{if(H=="node_1"&&rdx.utils.is_defined(z.view_properties.referrer)){C.css("top",178)}else{if(H=="node_3"&&rdx.utils.is_defined(z.view_properties.referrer)){C.css("top",230)}else{C.css("top",t-75)}}}}else{if(rdx.utils.is_defined(g.scrollable_single_block)){var K=b.get_collated_response();var n="";var p=0;for(var F=0;F<g.resource_name.length;F++){if(rdx.utils.is_defined(K[F])&&rdx.utils.is_defined(K[F][g.resource_name[F]])){var P=K[F][g.resource_name[F]];for(var G=0;G<P.length;G++){var B=P[G];var f=g.key[F];if(rdx.utils.is_defined(B[f])&&rdx.utils.is_not_empty(B[f])){var L=B[f];if(z.application_name){if(g.key[F]=="lbvserver"){L="Default"}else{L=neo.application_template_utils.get_formatted_application_unit_name(z.application_name,L)}}p++;if(p==2||(P.length==1&&rdx.utils.is_not_defined(K[F+1]))){n=n+"<div class = 'visualizer_slide' data-center = 'true'>"+L+"</div>"}else{if(g.key[F]=="lbvserver"){n=n+"<div class = 'visualizer_slide-deffault-blue'>"+L+"</div>"}else{if(g.key[F]=="targetvserver"){n=n+"<div class = 'visualizer_slide visualizer_slide-bound_vpnvserver'>"+L+"</div>"}else{n=n+"<div class = 'visualizer_slide'>"+L+"</div>"}}}}else{if(rdx.utils.is_not_defined(B[f])&&f=="targetvserver"){if(rdx.utils.is_defined(B.targetlbvserver)){var L=B.targetlbvserver;if(z.application_name){if(g.key[F]=="lbvserver"){L="Default"}else{L=neo.application_template_utils.get_formatted_application_unit_name(z.application_name,L)}}p++;if(p==2||(P.length==1&&rdx.utils.is_not_defined(K[F+1])&&rdx.utils.is_not_defined(K[F+1][g.resource_name[F+1]]))){n=n+"<div class = 'visualizer_slide' data-center = 'true'>"+L+"</div>"}else{if(f=="lbvserver"){n=n+"<div class = 'visualizer_slide-deffault-blue'>"+L+"</div>"}else{n=n+"<div class = 'visualizer_slide'>"+L+"</div>"}}}}}}}}if(p>0){var C=$("<div />").html('						<div class="visualizer_toolbar">							<div class="visualizer_prev"></div>							<div class="visualizer_next"></div>						</div>						<div class="visualizer_view-port">							<div class="visualizer_scrollable-panel">'+n+"</div>");var m=$(".visualizer_scrollable-panel").width(p*250);C.addClass("visualizer_slider")}else{var C=$("<div></div>").addClass("zero_count_message");var w=g.zero_count_message;C.text(w);C.css("top",150);C.css("left",546);C.css("padding-left",50);C.addClass("visualizer_singleblock")}}else{if(b){var a=b.get_collated_response();if(!rdx.utils.is_object(a[0])){this._count++;return}if(g.resource_name.length==1||g.single_block==false){var C=$("<div />").addClass("visualizer_block_container");if(g.level==1){t="10px"}else{if(g.level==2){t=200}else{if(g.level==3){t=390}else{t=820}}}C.css("top",t);if(g.direction=="right"){C.css("left",767)}else{if(g.direction=="left"){C.css("left",327)}}if(rdx.utils.is_defined(z.view_properties.referrer)&&z.view_properties.referrer=="cs"){C.css("left",552);C.css("top",585)}var D=$("<div />").addClass("visualizer_basic_node").addClass("visualizer_text_overflow");var s=$("<div />");if(g.image_type=="up_down_state"){if(a[0][g.resource_name][0]["curstate"]=="UP"){s.addClass("visualizer_basic_image_node_green")}else{s.addClass("visualizer_basic_image_node_red")}}else{if(rdx.utils.is_defined(g.image_url)){var O='url("'+g.image_url+'") no-repeat 40% 5px;';s.addClass("visualizer_basic_image_server")}}C.append(s).append(D);if(rdx.utils.is_not_defined(a[0][g.resource_name])){q=g.zero_count_message}else{if(g.key&&rdx.utils.is_array(g.key)){for(var E=0;E<g.key.length;E++){if(g.key[E]=="port"&&a[0][g.resource_name][0][g.key[E]]==65535){a[0][g.resource_name][0][g.key[E]]="*"}if(rdx.utils.is_not_empty(g.label[E])){q=q+'<br/><span class = "visualizer_basic_node_key">'+g.label[E]+'</span> <span class = "visualizer_basic_node_value">'+a[0][g.resource_name][0][g.key[E]]+"</span>"}else{q=q+a[0][g.resource_name][0][g.key[E]]}}}else{if(g.key){q=a[0][g.resource_name][0][g.key];if(g.label){q=q+" "+g.label}if(rdx.utils.is_defined(g.save_data)&&g.save_data==true){z.saved_data=q}}else{if(g.count){q=a[0][g.resource_name].length+" "+g.label}}}}if(g.display_data){if(g.display_data["data_renderer_callback"]){var N=a[0][g.resource_name][0];var d=g.display_data["data_renderer_callback"].call_back([N]);var v=d.split("%");var M=Math.floor(v[0]);d=M+"% "+v[1]}q=q+"<br/><span>"+d+"<span/>"}D.html(q);if(rdx.utils.is_defined(g.click_view_name)){this.add_click_view_map(C,D,z,H,g.click_view_name[0])}this._block_object[H]=C;if(rdx.utils.is_defined(g.node_render_callback)){g.node_render_callback.call_back([H,C,g,z,D,s,this.refresh_div])}}else{if(g.direction=="left"){var J="REQUEST";var C=$("<div />").addClass("visualizer_block_container_left");if(rdx.utils.is_defined(z.view_properties.referrer)&&z.view_properties.referrer=="cs"){C.css("top",325);C.css("left",315)}}else{if(g.direction=="right"){var J="RESPONSE";var C=$("<div />").addClass("visualizer_block_container_right");if(rdx.utils.is_defined(z.view_properties.referrer)&&z.view_properties.referrer=="cs"){C.css("top",325);C.css("left",780)}}else{var C=$("<div />").addClass("visualizer_block_container")}}if(rdx.utils.is_not_defined(z.view_properties.referrer)){t=((this._parent_container.height())/(this._block_count-1))*(g.level-1);C.css("top",t-75)}for(var G=0;G<a.length;G++){var h=0;for(var F=0;F<g.resource_name.length;F++){if(rdx.utils.is_defined(a[G][g.resource_name[F]])){for(var E=0;E<a[G][g.resource_name[F]].length;E++){if(rdx.utils.is_empty(a[G][g.resource_name[F]][E]["bindpoint"])||rdx.utils.is_not_defined(a[G][g.resource_name[F]][E]["bindpoint"])||a[G][g.resource_name[F]][E]["bindpoint"]==J){h++}}if(h>0){var D=$("<div></div>").addClass("visualizer_singleblock");var A=$("<span />").addClass("node_child_number").text(h);var u=$("<span />").addClass("node_child_arrow");if(g.click_view_name){this.add_click_view_map(C,D,z,H,g.click_view_name[G])}var I=g.label[F];D.text(I).prepend(A).append(u);C.append(D)}}}}if(rdx.utils.is_not_defined(I)){var D=$("<div></div>").addClass("zero_count_message");var I=g.zero_count_message;D.text(I);C.append(D);D.addClass("visualizer_singleblock")}}}}}if(rdx.utils.is_defined(z.view_properties.referrer)){this._cs_parent_div.append(C)}else{this._parent_container.append(C)}if(rdx.utils.is_defined(g.scrollable_single_block)){$(".visualizer_prev").bind(rdx.events.CLICK,{obj:this},function(Q){if($(this).hasClass("visualizer_disabled")){return false}Q.data.obj._move_divs("visualizer_prev",true);Q.stopPropagation()});$(".visualizer_next").bind(rdx.events.CLICK,{obj:this},function(Q){if($(this).hasClass("visualizer_disabled")){return false}Q.data.obj._move_divs("visualizer_next",true);Q.stopPropagation()});$(".visualizer_view-port").bind(rdx.events.CLICK,{obj:this,parent_view:z},function(T){var R=T.target;if($(R).hasClass("visualizer_slide-bound_vpnvserver")){var S=rdx.utils.get_view("sslvpn_vserver_set_view");var Q=rdx.view_utils.show_view_in_slider(S,null,{name:R.textContent});return}else{if(($(R).hasClass("visualizer_slide")||$(R).hasClass("visualizer_slide-deffault-blue"))&&($(R).hasClass("cs_visualizer_box_selected")==false)){T.data.obj._cs_parent_div.remove();T.data.obj.right_add_div.remove();var U=T.data.parent_view;T.data.obj._connect_defaults(R,U);T.stopPropagation()}else{return}}})}this._count++;this._block_object[H]=C;this.render_visualizer(z)};rdx.visualizer_view.prototype._connect_defaults=function(f,h){var a=f.textContent;if(rdx.utils.is_not_defined(a)){var a=f.text()}var b=$(f);var d=$(".visualizer_scrollable-panel div.cs_visualizer_box_selected");d.removeClass("cs_visualizer_box_selected");b.addClass("cs_visualizer_box_selected");if(rdx.utils.is_defined(b.attr("data-center"))){this._create_cs_individual_view(a,h)}else{var g=b.prev();var e=b.next();if(rdx.utils.is_defined(g.attr("data-center"))){this._move_divs("visualizer_next",false)}else{this._move_divs("visualizer_prev",false)}this._create_cs_individual_view(a,h)}};rdx.visualizer_view.prototype._move_divs=function(h,g){var a=$(".visualizer_scrollable-panel");if(a.children().length<4){$(".visualizer_next").addClass("visualizer_disabled");$(".visualizer_prev").addClass("visualizer_disabled");return}if(g){var e=$(".visualizer_scrollable-panel div.cs_visualizer_box_selected");e.removeClass("cs_visualizer_box_selected")}var d=parseInt(a.css("left"));var b=0;this._cs_parent_div.remove();this.right_add_div.remove();if(h=="visualizer_prev"){var f=$(".visualizer_scrollable-panel div[data-center=true]");f.prev().attr("data-center","true");f.removeAttr("data-center");if(d==0){b=d}else{b=d+250}}else{var f=$(".visualizer_scrollable-panel div[data-center=true]");f.next().attr("data-center","true");f.removeAttr("data-center");if(d<-(250*($(".visualizer_slide").length-3))){b=d}else{b=d-250}}a.animate({left:b},150,function(){if(b==0){$(".visualizer_prev").addClass("visualizer_disabled")}else{if(b<-(250*($(".visualizer_slide").length-3))){$(".visualizer_next").addClass("visualizer_disabled")}else{$(".visualizer_prev,.visualizer_next").removeClass("visualizer_disabled")}}})};rdx.visualizer_view.prototype.render_visualizer=function(f){if(this._count==this._block_count){if(rdx.utils.is_not_defined(f.view_properties.referrer)){if(this.to_be_drawn_count>0){for(var b=0;b<this.to_be_drawn.length;b++){this.to_be_drawn_count--;this._render_block(this.to_be_drawn[b]["executor_result"],this.to_be_drawn[b]["view_defn"],this.to_be_drawn[b]["view_property"],this.to_be_drawn[b]["block_id"],false,true)}}if(f.view_properties.title!="CS Visualizer"){this.rearrange_elements(f)}this._parent_container.append(this._cs_parent_div);this.connect_block_elements(f);this._add_connection_overlays(f,this._parent_container)}else{this._parent_container.append(this._cs_parent_div);this.rearrange_elements(f);this.connect_block_elements(f);this._add_connection_overlays(f,this._cs_parent_div)}this._block_object={};this._block_count=0;this._count=0;this._level_tree={};if(rdx.utils.is_defined(f.view_properties.connect_defaults)){var e=$(".visualizer_scrollable-panel");if(e.children().length==1){$(".visualizer_scrollable-panel").addClass("visualizer_move_center");var a=$(".visualizer_scrollable-panel");a.children()[0];this._connect_defaults(a.children()[0],f)}else{if(e.length==0){return}else{var d=$(".visualizer_scrollable-panel div[data-center=true]");if(d.length>=1){this._connect_defaults(d,f)}else{return}}}}}};rdx.visualizer_view.prototype._add_connection_overlays=function(f,e){for(var d in f.diagram_properties){var a=f.diagram_properties[d];if(rdx.utils.is_defined(a.connection_img)){var b=$("<div />");b.css("left",this._block_object[d].position().left);if(a.direction=="left"){b.css("left",this._block_object[d].position().left+63);b.css("top",this._block_object[d].position().top-58);b.addClass("connection_div_req")}else{if(a.direction=="right"){b.css("left",this._block_object[d].position().left+62);b.css("top",this._block_object[d].position().top+this._block_object[d].height()+29);b.addClass("connection_div_res")}}}e.append(b)}};rdx.visualizer_view.prototype.rearrange_elements=function(f){for(var b=1;b<=5;b++){var a=this._level_tree[b];if(rdx.utils.is_not_defined(a)){continue}var h=this._block_object[a[0]].position().top;var e=this.find_largest_element(a);var d=this._level_tree[b+1];if(d){this._set_top_offset(d,e.position,h)}if(b==3&&f.view_properties.title!="GSLB Visualizer"){if(this._block_object.node_4.height()!=this._block_object.node_7.height()){var g=e.element[0].offsetTop+(e.element.height()/2);if(this._block_object.node_7.height()>100){this._block_object.node_7.css("top",g-50)}else{this._block_object.node_7.css("top",g)}}}else{this._parent_container.css("height",h+70)}}if(this._parent_container.height()<440){this._parent_container.css("height",440)}this._create_right_add_div(f);return};rdx.visualizer_view.prototype.find_largest_element=function(a){var d=[];var g=0;var b=null;for(var f=0;f<a.length;f++){var e=this._block_object[a[f]].height();var h=$(this._block_object[a[f]]).position().top;if(g<(e+h)){g=e+h;b=this._block_object[a[f]]}}return{element:b,position:g}};rdx.visualizer_view.prototype._set_top_offset=function(b,a,f){for(var e=0;e<b.length;e++){var d=this._block_object[b[e]];var g=d.position()["top"];d.css("top",a+75)}return};rdx.visualizer_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.visualizer_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.visualizer_view.prototype.create_add_new_link=function(e,b,f,d){var a=$('<a href="javascript:void(0);" class="add_new_block" title="Add New"><img src="'+rdx.images.PLUS_WHITE+'" alt="Add"/>Add New</a>').bind(rdx.events.CLICK,{object:this,node:e,view_definition:b,block_id:f,add_view_name:d},function(n){var m=rdx.utils.get_view(n.data.add_view_name);var h=n.data.view_definition;var g=rdx.view_utils.show_view_in_slider(m,null,{name:h.selected_entity});$(g).bind(rdx.events.VIEW_DESTROYED,{node:e,block_id:f,obj:n.data.object},function(p){var q=p.data.block_id;var o=p.data.node;o.empty();p.data.obj.make_block(q)});n.stopPropagation()});if(rdx.utils.is_defined(a)){e.append(a)}this._parent_container.append(e)};rdx.visualizer_view.prototype.add_click_view_map=function(a,e,d,f,b){e.attr("tabindex",0);e.bind(rdx.events.CLICK+" "+rdx.events.KEYUP,{view_defn:d,container:a,node:e,block_id:f,object:this,click_view_name:b},function(n){if(rdx.utils.is_defined(n.keyCode)&&n.keyCode!==13){return}var m=rdx.utils.get_view(n.data.click_view_name);var h=n.data.view_defn;var g=rdx.view_utils.show_view_in_slider(m,null,{name:h.selected_entity})})};rdx.visualizer_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.visualizer_view.prototype.connect_block_elements=function(d){for(var b in this._block_object){var a=d.diagram_properties[b];if(rdx.utils.is_defined(a.child)&&rdx.utils.is_defined(this._block_object[a.child])){this._connect_block_elements(b,a.child,a,d)}continue}};rdx.visualizer_view.prototype._connect_block_elements=function(a,n,o,s){var b={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top","Bottom"],connector:["Straight"]};var t={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[226,0]}]};var g={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[231,0]}]};var q={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[0,226]}]};var p={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[0,231]}]};var h={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[214,0]}]};var u={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[234,0]}]};var d={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[0,214],cornerRadius:10}]};var f={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#5386c5",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[0,234],cornerRadius:1}]};if(rdx.utils.is_array(n)){for(var e=0;e<n.length;e++){this._connect_block_elements(a,n[e])}}else{this._jsPlumb=jsPlumb.getInstance();var m={};if(rdx.utils.is_defined(o.connect_top)){m=t;if(rdx.utils.is_defined(s.view_properties.referrer)){m=g}}else{if(rdx.utils.is_defined(o.connect_bottom)){m=h;if(((this._block_object.node_5.height()+this._block_object.node_5.offset().top)-(this._block_object.node_7.height()+this._block_object.node_7.offset().top))>200){m.connector[1].stub=[0,((this._block_object.node_5.height()+this._block_object.node_5.offset().top)-(this._block_object.node_7.height()+this._block_object.node_7.offset().top))]}if(rdx.utils.is_defined(s.view_properties.referrer)){m=u}}else{if((rdx.utils.is_defined(o.direction)&&o.direction=="right")){if(rdx.utils.is_defined(s.view_properties.referrer)){m=f}else{if(rdx.utils.is_defined(o.connect_right_top)&&o.connect_right_top==true){m=b}else{m=d}}if(this._block_object.node_4.height()>265){m.connector[1].stub=[this._block_object.node_7.offset().top-this._block_object.node_3.offset().top,0]}}else{if((rdx.utils.is_defined(o.direction)&&o.direction=="left")){m=q;if(rdx.utils.is_defined(s.view_properties.referrer)){m=p}}else{m=b}}}}if(rdx.utils.is_defined(o.connect_bottom)){this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}else{if(rdx.utils.is_defined(o.connect_top)){this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}else{if(rdx.utils.is_defined(o.direction)&&o.direction=="left"){this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}else{this._jsPlumb.connect({source:this._block_object[a],target:this._block_object[n]},m)}}}}};rdx.visualizer_view.prototype._create_cs_individual_view=function(a,d){var b=this._view_defn;if(rdx.utils.is_defined(d.application_name)){if(a=="Default"){a=neo.application_template_utils.get_application_unit_other_name(d.application_name)}else{a=neo.application_template_utils.get_application_unit_name(d.application_name,a)}}b.selected_entity=a;this.construct_visualizer_elements(b)};rdx.network_visualizer_view=function(d,b,a){this._parent=d;this.currentVlan=null;this._base_view=a;this.is_back_button_required=true;this.details={};this._jsPlumb=jsPlumb.getInstance()};rdx.network_visualizer_view.prototype.make_view=function(){neo.view_callbacks.network_visulaizer_callback(this)};rdx.network_visualizer_view.prototype.response_callback=function(resp_callback_param,selectors){var ip_address,that,cntr2,text_red,grp_cnt,grp_cntr,last_class,indvl_ip,state_class,left_group_markup,cntr,base_markup,left_markup,indvl_channel,left_indvl_markup,center_indvl_markup,right_indvl_markup,highest_col,cntr_id;that=this;base_markup='<div class="ns_grid main-nwrk-vslzr-cntnr"> 					<div class="grid_cell left"><div class="title first"><span>Interface</span></div><div class="content"></div></div>					<div class="grid_cell center"><div class="title"><span>Vlan</span></div><div class="content"></div></div>					<div class="grid_cell right"><div class="title last"><span>IP Address</span></div><div class="content"></div></div>					<div class="grid_cell details"><div class="title last"><span>Details</span></div><div class="content">						<div class="vlan-dtl"><span class="dtl">VLAN:</span><span class="vlu"></span></div>						<div class="vlan-id-dtl"><span class="dtl">VLAN ID:</span><span class="vlu"></span></div>						<div class="bdn-intrfc-dtl"><span class="dtl">Bound Interfaces:</span><span class="vlu"></span></div>						<div class="ipv6-rout-dtl"><span class="dtl">IPv6 Dynamic Routing:</span><span class="vlu"></span></div>						<div class="bnd-ip-dtl"><span class="dtl">IP Address:</span><span class="vlu"></span></div>					</div></div>				  </div>';this._parent.append(base_markup);left_markup="";left_group_markup="";if(resp_callback_param.left.groups){for(cntr in resp_callback_param.left.groups){left_group_markup+=" <div class='left_group'> <div class='grp-title-main'><div class='grp-title left-clickable'  data-left-vlan='"+resp_callback_param.left.groups[cntr].vlan+"'   data-left-grp-title='"+cntr+"'>"+cntr+"</div></div>";indvl_channel=resp_callback_param.left.groups[cntr].bound_interfaces_data;if(indvl_channel){grp_cnt=rdx.utils.get_object_length(indvl_channel);grp_cntr=1;for(cntr2 in indvl_channel){last_class="";if(grp_cntr===grp_cnt){last_class="last"}grp_cntr++;text_red="";if(indvl_channel[cntr2].state!="ENABLED"){text_red="txt-red"}grp_indvl_markup="<div class='grp-main'><div class='grp-indvl  left-clickable  "+last_class+" "+text_red+"'  data-left-vlan='"+resp_callback_param.left.groups[cntr].vlan+"'  data-left-grp-indvl='"+cntr2+"'>"+cntr2+"</div></div>";left_group_markup+=grp_indvl_markup}}left_group_markup+="</div>"}}if(resp_callback_param.left.indivuals){left_indvl_markup="";for(cntr in resp_callback_param.left.indivuals){text_red="";if(resp_callback_param.left.indivuals[cntr].state!="ENABLED"){text_red="txt-red"}left_indvl_markup+="<div class='left-main'><div class='left-indvl left-clickable "+text_red+"' data-left-vlan='"+resp_callback_param.left.indivuals[cntr].vlan+"' data-left-indvl='"+resp_callback_param.left.indivuals[cntr].devicename+"'>"+resp_callback_param.left.indivuals[cntr].devicename+"</div></div>"}}$(".main-nwrk-vslzr-cntnr .left .content").append(left_group_markup);$(".main-nwrk-vslzr-cntnr .left .content").append(left_indvl_markup);if(resp_callback_param.right.items){right_indvl_markup="";for(cntr in resp_callback_param.right.items){indvl_ip=resp_callback_param.right.items[cntr];state_class="red";ip_address=indvl_ip.ipaddress||indvl_ip.ipv6address;var slash_vlu;var netmask=indvl_ip.netmask;if(indvl_ip.ipaddress){slash_vlu=0;var sub_n_m_add=netmask.split(".");$(sub_n_m_add).each(function(indx,value){if(!isNaN(value)){slash_vlu+=eval(parseInt(value,10).toString(2).split("").join("+"))}});slash_vlu="/"+slash_vlu.toString()}else{slash_vlu=""}if(indvl_ip.state=="ENABLED"){state_class="green"}right_indvl_markup+="<div class='right-main'><div class='inside-box' data-right-indvl='"+ip_address+"'><div class='circle "+state_class+"'></div><div class='ip-name' >"+ip_address+slash_vlu+"</div></div></div>"}}$(".main-nwrk-vslzr-cntnr .right .content").append(right_indvl_markup);if(resp_callback_param.center.items){center_indvl_markup="";var i=0;var is_first;for(cntr in resp_callback_param.center.items){is_first="";cntr_id=resp_callback_param.center.items[cntr].id;if(this.details&&!this.details[resp_callback_param.center.items[cntr].id]){this.details[resp_callback_param.center.items[cntr].id]={}}this.details[cntr_id].vlan=resp_callback_param.center.items[cntr].id;this.details[cntr_id].bound_interfaces=resp_callback_param.center.items[cntr].ifaces;this.details[cntr_id].ipv6dynamicrouting=resp_callback_param.center.items[cntr].ipv6dynamicrouting;if(i===0){is_first="current";that.currentVlan=resp_callback_param.center.items[cntr].id}i++;center_indvl_markup+="<div class='center-main'><div class='inside-box "+is_first+" ' data-vlanid = '"+resp_callback_param.center.items[cntr].id+"'>"+resp_callback_param.center.items[cntr].id+"</div></div>"}}$(".main-nwrk-vslzr-cntnr .center .content").append(center_indvl_markup);this.updateDetails(this.details[this.currentVlan]);highest_col=Math.max($(".main-nwrk-vslzr-cntnr .grid_cell.left").height(),$(".main-nwrk-vslzr-cntnr .grid_cell.center").height(),$(".main-nwrk-vslzr-cntnr .grid_cell.right").height());$(".main-nwrk-vslzr-cntnr .grid_cell").height(highest_col);this.connectDefault(selectors);$(".main-nwrk-vslzr-cntnr .center .content .inside-box").click(function(event){var vlanid=$(event.target).attr("data-vlanid");neo.view_callbacks.click_center_callback(vlanid,that,resp_callback_param)});$(".main-nwrk-vslzr-cntnr .left .content .left-clickable").click(function(event){var vlanid=$(event.target).attr("data-left-vlan");if(!vlanid){return}neo.view_callbacks.click_center_callback(vlanid,that,resp_callback_param)})};rdx.network_visualizer_view.prototype.updateDetails=function(a){$(".main-nwrk-vslzr-cntnr .details .bdn-intrfc-dtl .vlu").text("");$(".main-nwrk-vslzr-cntnr .details .ipv6-rout-dtl .vlu").text("");$(".main-nwrk-vslzr-cntnr .details .bnd-ip-dtl .vlu").text("");$(".main-nwrk-vslzr-cntnr .details .vlan-dtl .vlu").text(a.vlan);$(".main-nwrk-vslzr-cntnr .details .vlan-id-dtl .vlu").text(a.vlan);$(".main-nwrk-vslzr-cntnr .details .bdn-intrfc-dtl .vlu").text(a.bound_interfaces);$(".main-nwrk-vslzr-cntnr .details .ipv6-rout-dtl .vlu").text(a.ipv6dynamicrouting);$(".main-nwrk-vslzr-cntnr .details .bnd-ip-dtl .vlu").text(a.ipvalues)};rdx.network_visualizer_view.prototype.clickCallBack=function(a,b){this.selectDefault(a);$(".main-nwrk-vslzr-cntnr .center .center-main .current").removeClass("current");$(".main-nwrk-vslzr-cntnr .center .center-main [data-vlanid='"+b+"']").addClass("current");this.currentVlan=b;this.updateDetails(this.details[this.currentVlan])};rdx.network_visualizer_view.prototype.connectDefault=function(a){var b=this;$(".main-nwrk-vslzr-cntnr .right .content .inside-box").each(function(d,e){var f=$(this).attr("data-right-indvl");f=f.replace(/\//g,"_");f=f.replace(/\./g,"_");f=f.replace(/\:/g,"_");f="un-selected c_"+f;b._jsPlumb.connect({source:$(this).parent(".right-main"),target:$(this),cssClass:f},{anchor:["Left"],connector:["Straight"],endpoint:"Blank",paintStyle:{strokeStyle:"#E9E9E9",lineWidth:4,radius:2}})});$(".main-nwrk-vslzr-cntnr .left .left-indvl").each(function(d,e){var f=$(this).text();f=f.replace(/\//g,"_");f=f.replace(/\./g,"_");f="un-selected c_"+f;b._jsPlumb.connect({source:$(this).parent(".left-main"),target:$(this),cssClass:f},{anchor:["Right"],connector:["Straight"],endpoint:"Blank",paintStyle:{strokeStyle:"#E9E9E9",lineWidth:4,radius:2}})});$(".main-nwrk-vslzr-cntnr .left .left_group .grp-title").each(function(d,e){var f=$(this).text();f=f.replace(/\//g,"_");f=f.replace(/\./g,"_");f="un-selected c_"+f;b._jsPlumb.connect({source:$(this).parent(".grp-title-main"),target:$(this),cssClass:f},{anchor:["Right"],connector:["Straight"],endpoint:"Blank",paintStyle:{strokeStyle:"#E9E9E9",lineWidth:4,radius:2}})});$(".main-nwrk-vslzr-cntnr .left .left_group .grp-indvl").each(function(d,e){var f=$(this).text();f=f.replace(/\//g,"_");f=f.replace(/\./g,"_");f="un-selected c_"+f;b._jsPlumb.connect({source:$(this).parent(".grp-main"),target:$(this),cssClass:f},{anchor:["Right"],connector:["Straight"],endpoint:"Blank",paintStyle:{strokeStyle:"#E9E9E9",lineWidth:4,radius:2}})});this.selectDefault(a)};rdx.network_visualizer_view.prototype.selectDefault=function(d){var b,e,f,a;$(".selected").each(function(){var g=$(this);rdx.utils.replace_class_svg(g[0],"un-selected","selected")});$(".main-nwrk-vslzr-cntnr .left .left_group .grp-main .current").removeClass("current");$(".main-nwrk-vslzr-cntnr .left .left_group .grp-title-main .current").removeClass("current");$(".main-nwrk-vslzr-cntnr .left .left-main .current").removeClass("current");$(".main-nwrk-vslzr-cntnr .right .right-main .current").removeClass("current");for(e in d.left.individuals){a=d.left.individuals[e];this.selectSvg(a);$(".main-nwrk-vslzr-cntnr .left .left-main [data-left-indvl='"+a+"']").addClass("current")}for(e in d.left.groups){a=d.left.groups[e].title;this.selectSvg(a);$(".main-nwrk-vslzr-cntnr .left .left_group .grp-title-main [data-left-grp-title='"+a+"']").addClass("current");if(d.left.groups[e].individuals){for(f in d.left.groups[e].individuals){a=d.left.groups[e].individuals[f];this.selectSvg(a);$(".main-nwrk-vslzr-cntnr .left .left_group .grp-main [data-left-grp-indvl='"+a+"']").addClass("current")}}}for(e in d.right){a=d.right[e];this.selectSvg(a);$(".main-nwrk-vslzr-cntnr .right .right-main [data-right-indvl='"+a+"']").addClass("current")}};rdx.network_visualizer_view.prototype.selectSvg=function(a){a=a.replace(/\//g,"_");a=a.replace(/\./g,"_");a=a.replace(/\:/g,"_");a="c_"+a;elmnt=$("."+a).first();if(rdx.utils.is_defined(elmnt[0])){rdx.utils.replace_class_svg(elmnt[0],"selected","un-selected")}};rdx.network_visualizer_view.prototype.is_title_required=function(){return true};rdx.network_visualizer_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.network_visualizer_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.network_visualizer_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.resource_visualizer=function(d,b,a){this._parent=d;this._base_view=a;this.is_back_button_required=true;this._view_definition=b;this._jsPlumb=jsPlumb.getInstance();this._draw_flowchart_line=jsPlumb.getInstance();var e={right_pane_click_handler_callback:null,left_pane_click_handler:null,add_device_click_handler_callback:null,show_core_allocation:false};this._view_properties=$.extend({},e,this._view_definition.view_properties);this._colored_arrays=["#F6CC4B","#009688","#45DE6D","#E49CFF","#FF9B7D","#A7CAF3","#E86361","#AA55FF","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3"];this._inner_views=[]};rdx.resource_visualizer.prototype.make_view=function(){};rdx.resource_visualizer.prototype.refresh_view=function(){};rdx.resource_visualizer.prototype.do_toggle_view=function(){if(this._view_definition.view_properties.toggle_view==true){return true}return false};rdx.resource_visualizer.prototype.is_title_required=function(){if(rdx.utils.is_defined(this._view_definition.view_properties.title)){return true}return false};rdx.resource_visualizer.prototype.get_is_back_button_required=function(){if(this._view_definition.view_properties.is_back_button_required===true){return true}return false};rdx.resource_visualizer.prototype.get_resource_response_arrived=function(a){this._resp_callback_param=a;if(this._view_properties.show_core_allocation===true){this._render_visualizer_layout()}else{this._render_top_charts();this._render_header();this._render_left_pane();this._render_right_pane();this._render_resource_pane();var b=Math.max(this._left_cell_content.outerHeight(),this._right_main_cell.outerHeight(),this._resource_summary_cell.outerHeight());this._resource_summary_cell.height(b+50);if(this._left_cell_content.height()<this._right_cell_content.height()){this._connector_div.height(this._right_cell_content.height()-45)}else{this._connector_div.height(this._left_cell_content.height()-40)}}rdx.mask.unmask_all_components()};rdx.resource_visualizer.prototype._render_top_charts=function(){var h=this._view_definition.view_properties.top_chart_views;var f=true;var e=$("<div>").addClass("top_charts").appendTo(this._parent);for(var d in h){var b=$("<div>").addClass("top_chart");var m=rdx.i18n.get_string(h[d]["title"]);var g=$("<div>").addClass("chart_title").append(m);b.append(g);var a=new rdx.base_view(b,rdx.utils.get_view(d));a.prepare_view();e.append(b);if(f){b.addClass("first");f=false}this._inner_views.push(a)}};rdx.resource_visualizer.prototype._render_header=function(){var g=this;this._base_markup=$("<div>").addClass("ns_grid");this._left_main_cell=$("<div>").addClass("grid_cell left");var f=$("<div>").addClass("title first");var d=$("<span>").append(rdx.i18n.get_string(this._view_properties.left_pane_header_title));this._left_cell_content=$("<div>").addClass("content");this._connector_div=$("<div>").addClass("connector_div");this._highlited_div=$("<div>").addClass("highlited");this._left_main_cell.append(f.append(d)).append(this._left_cell_content);this._base_markup.append(this._left_main_cell.append(this._connector_div.append(this._highlited_div)));this._parent.append(this._base_markup).addClass("resource_visualizer");this._resource_summary_cell=$("<div>").addClass("grid_cell resource_summary");var e=$("<div>").addClass("title");var b=$("<span>").append(rdx.i18n.get_string(this._view_properties.resource_pane_header_title));this._resource_summary_cell_content=$("<div>").addClass("content");this._resource_summary_charts_content=$("<div>").addClass("charts_content");this._resource_info_content=$("<div>").addClass("info_content");this._resource_summary_info_content=$("<div>").addClass("info_content");this._resource_summary_cell_content.append(this._resource_summary_charts_content).append(this._resource_info_content).append(this._resource_summary_info_content);this._resource_summary_cell.append(e.append(b)).append(this._resource_summary_cell_content);this._right_main_cell=$("<div>").addClass("grid_cell right");this._right_cell_title=$("<div>").addClass("title");var a=$("<span>").append(rdx.i18n.get_string(this._view_properties.right_pane_header_title));this._right_cell_content=$("<div>").addClass("content");this._right_cell_title.append(a);this._right_main_cell.append(this._right_cell_title).append(this._right_cell_content);this._base_markup.append(this._right_main_cell);this._base_markup.append(this._resource_summary_cell)};rdx.resource_visualizer.prototype._render_left_pane=function(){var a=this;if(this._resp_callback_param.left.groups){this._render_group_elements()}if(this._resp_callback_param.left.individuals){this._render_individual_elements()}this._bind_events()};rdx.resource_visualizer.prototype._render_group_elements=function(){var n=this;var f=this._resp_callback_param.left.groups;for(var o in f){if(f.hasOwnProperty(o)){var m=" ";if(f[o].state!="UP"){m="red_color"}var a=$("<div>").addClass("left_group");var e=$("<div>").addClass("group_title_main");this._left_clickable_div=$("<div>").addClass("group_title left_clickable").addClass(m);if(f[o]["is_used"]=="false"){a.addClass("disabled")}var b=$("<span>").addClass("empty_span");this._left_clickable_div.attr("data-left-value",o).append(o);a.append(e.append(this._left_clickable_div.append(b)));var s=f[o].membered_interfaces;this._connectDefault(e,this._left_clickable_div,o);if(rdx.utils.is_defined(s)){for(var h=0;h<s.length;h++){var g=s[h]["state"];var d=$("<div>").addClass("group_main");var q=s[h]["port"];var p=$("<div>").addClass("group_individual interface").attr("data-left-value",q).append(q);if(g=="DOWN"){p.addClass("red_color")}var b=$("<span>").addClass("empty_span");d.append(p.append(b));a.append(d);this._connectDefault(d,p,d.text())}}this._left_cell_content.append(a)}}};rdx.resource_visualizer.prototype._render_individual_elements=function(){var g=this._resp_callback_param.left.individuals;var f=this;for(var h in g){if(g.hasOwnProperty(h)){var m=$("<div>").addClass("left_main");var e="";if(g[h].state!="UP"){e="red_color"}var d=$("<span>").append(g[h].devicename);var a=$("<a href='#'>").addClass("left_individual interface").addClass("left_clickable").addClass(e).attr("data-left-value",g[h].devicename).append(d);if(g[h]["is_used"]=="false"){a.addClass("disabled")}var b=$("<span>").addClass("empty_span");m.append(a.append(b));this._left_cell_content.append(m);this._connectDefault(m,a,a.text())}}};rdx.resource_visualizer.prototype._bind_events=function(){var a=this;this._left_cell_content.click(function(b){var d=$(b.target).attr("data-left-value")||$(b.target).closest(".left_individual").attr("data-left-value");if(!d||$(b.target).parents().hasClass("disabled")){return}a.remove_all_connections();a._view_properties.left_pane_click_handler.call_back([d,a,a._resp_callback_param]);b.preventDefault()}).bind(rdx.events.MOUSE_OVER,function(d){var e=$(d.target).attr("data-left-value")||$(d.target).closest(".left_individual").attr("data-left-value");var b=$(d.target).closest(".left_individual")||$(d.target);if(rdx.utils.is_empty(b["0"])){b["0"]=$(d.target)[0]}$(".rdx_tooltip_z_index").remove();if(!e||$(d.target).hasClass("group_title")){return}a._show_interface_summary(e,b)}).bind(rdx.events.MOUSE_LEAVE,{that:this},function(b){$(".rdx_tooltip_z_index").remove()})};rdx.resource_visualizer.prototype._render_right_pane=function(p){var n=this;var h=$("<div>");if(this._resp_callback_param.right.items.length>0){p=rdx.utils.is_defined(p)?p:this._resp_callback_param.right.items;for(var a in p){if(p.hasOwnProperty(a)){var t=p[a];state_class="red";ip_address=t.ip_address;if(rdx.utils.is_empty(t.ipv6_address)){ip_address=t.ipv4_address}else{ip_address=t.ip_address}var o=$("<span>").addClass("hostname").append(t.name);var b=$("<div>").addClass("circle");if(t.instance_state=="Up"){state_class="green"}else{if($.inArray(t.instance_state.toLowerCase(),rdx.view_renderers._state_outofservice_values)!=-1){state_class="yellow";if(rdx.utils.is_defined(t.reason)){b.attr("title",t.reason)}}}b.addClass(state_class);var q=$("<div>").addClass("right_main");this._inside_box=$("<a href='#'>").addClass("inside_box").attr("data-right-ip-address",ip_address).attr("data-bound-interfaces",t.bound_interface).attr("data-device-family",t.device_family).attr("data-device-license",t.license);var e=$("<div>").addClass("product_logo").attr("title",t.device_family_name);var m=$("<span>").addClass("ip_address").append(ip_address);var f=$("<div>").addClass("ip-name").append(o).append("<br/>").append(m);this._inside_box.append(e).append(b).append(f);var s=$("<a href='#'>").addClass("close").append();var g=$("<img>").attr("src",rdx.images.MESSAGE_CLOSE).attr("alt","Close");this._inside_box.append(s.append(g));s.click(function(u){n.close_info_pane();u.stopPropagation();u.preventDefault();n.remove_all_connections()});q.append(this._inside_box);h.append(q);this._connectDefault(q,n._inside_box,ip_address,"Left")}}h.addClass("clickable").click(function(u){if(!($(u.target).hasClass("expanded")||$(u.target).parents().hasClass("expanded"))){var v,z,w;v=$(u.target).attr("data-right-ip-address")||$(u.target).parents(".inside_box").attr("data-right-ip-address");z=$(u.target).attr("data-bound-interfaces")||$(u.target).parents(".inside_box").attr("data-bound-interfaces");w=$(u.target).attr("data-device-family")||$(u.target).parents(".inside_box").attr("data-device-family");if(w=="nsswg"){w="ns"}if(!v){return}n.remove_all_connections();$(".right .inside_box").each(function(B,C){n._jsPlumb.hide(C)});$(".right_main",n._right_cell_content).addClass("hide");$(u.target).parents(".right_main").removeClass("hide").addClass("expanded");n._connector_div.height(n._left_cell_content.height()-40);var A={};A.ip_address=v;A.bound_interfaces=z;A.right_items=n._resp_callback_param.right.items;A.device_family=w;A.virtual_interface_resource=n._view_definition.view_properties[w]["virtual_interface_resource"];n._view_properties.right_pane_click_handler_callback.call_back([A,n])}u.preventDefault()})}else{var d=$("<div>").append(rdx.i18n.get_string("rdx.no_instances_available_message")).addClass("no_data");h.append(d)}this._right_cell_content.append(h)};rdx.resource_visualizer.prototype._render_resource_pane=function(){if(rdx.utils.is_defined(this._view_definition.view_properties.resource_summary)){var b=this._view_definition.view_properties.resource_summary.views;var a=this._view_definition.view_properties.resource_summary.chart_views;var f=this._view_definition.view_properties.resource_summary.information_views;for(var e in a){this._render_chart_views(this._resource_summary_charts_content,a[e])}for(var e=0;e<f.length;e++){var d=new rdx.base_view(this._resource_info_content,rdx.utils.get_view(f[e]));d.prepare_view();this._inner_views.push(d)}for(var e=0;e<b.length;e++){var d=new rdx.base_view(this._resource_summary_info_content,rdx.utils.get_view(b[e]));d.prepare_view();this._inner_views.push(d)}}};rdx.resource_visualizer.prototype._render_chart_views=function(b,a){var e=a.resource_name;var d=this;rdx.model.get(rdx.utils.get_resource(e),null,new rdx.callback(null,function(g,m,f,n){var h=g[f.resource_name][0];if(rdx.utils.is_defined(f.response_callback)){f.response_callback.call_back([n,m,f,g])}else{n.create_chart_view(m,f,h)}},[b,a,d]),null,null,null,this._view_definition.header_context)};rdx.resource_visualizer.prototype.create_chart_view=function(u,p,g){var o=$("<div>").addClass("main_chart");var t=$("<div>").addClass("title").append(p.title);var n=$("<div>").addClass("chart_inner_div");var d=$("<div>").addClass("chart_content");var s=$("<div>").addClass("chart_data");var a=$("<div>").addClass("allocated");var m=$("<div>").addClass("free");var e=$("<span>").addClass("total");var b=p.resource_properties;if(rdx.utils.is_defined(p.click_handler_callback)){o.click(function(){p.click_handler_callback.call_back()});o.addClass("clickable")}else{if(rdx.utils.is_defined(p.on_click_view)){o.click(function(){rdx.view_utils.show_view_in_slider(rdx.utils.get_view(p.on_click_view))});o.addClass("clickable")}}var h=g[b[0]["key"]];var q=g[b[2]["key"]];allocated_value=h-q;var f={};f.free_value=q;f.allocated_value=allocated_value;if(rdx.utils.is_defined(p.render_callback)){h=p.render_callback.call_back([null,null,h]);allocated_value=p.render_callback.call_back([null,null,allocated_value]);q=p.render_callback.call_back([null,null,q])}a.append(allocated_value).append(b[1]["label"]);m.append(q).append(b[2]["label"]);e.append(h);t.append(e);s.append(a).append(m);n.append(d).append(s);o.append(t).append(n);u.append(o);var w=rdx.utils.get_view(p.view_name);w.response_callback=new rdx.callback(this._charts_response_callback,[f]);var v=new rdx.base_view(d,w);v.prepare_view();this._inner_views.push(v)};rdx.resource_visualizer.prototype._charts_response_callback=function(a,b){a.resume(b)};rdx.resource_visualizer.prototype.render_info_pane=function(e,m){this._info_div=$("<div>").addClass("center_info_div info_view");var n=$("<table>").addClass("detail_info_table").addClass("table").append($("<tbody>"));var f=$("<tbody>");$(".expanded").append(this._info_div);var g=e.device_family;var b=this._view_definition.view_properties[g]["info_display_properties"];var h=this._view_definition.view_properties.bytes_info;if(rdx.utils.is_defined(this._view_definition.view_properties[g]["memory_info"])){var a=this._view_definition.view_properties[g]["memory_info"]}else{var a=this._view_definition.view_properties.memory_info}var d=e.network_interfaces;this._render_vlan_pane(e,d);this._render_info_charts(h,a,e);this._render_info_feilds(f,b,e);n.append(f);this._info_div.append(n);this.clickCallBack(m)};rdx.resource_visualizer.prototype._render_vlan_pane=function(g,f){var d=$("<div>");var b=$("<div>");var p="";this._info_div.append(d).append(b);for(var e=0;e<f.length;e++){var n=$("<span>").addClass("line_connectors");if(f[e]["is_member_ifc"]==true){continue}var h=f[e].vlan_whitelist_array;var o=f[e].port_name;p=$("<div>").addClass("vlan").attr("data-left-vlan-group",o);if(rdx.utils.is_defined(f[e]["virtual_port"])){o=f[e]["virtual_port"]}var a=$("<span>").addClass("empty_span");var m=$("<span>").append(o).addClass("vlans");p.append(n).append(a).append(m);if(rdx.utils.is_defined(h)&&h.length!=0){m.append(" (VLANs "+h+")")}if(f[e]["port_name"].indexOf("LA")>-1){d.append(p)}else{b.append(p)}}};rdx.resource_visualizer.prototype._render_info_feilds=function(e,a,m){for(var b in a){var g=$("<tr>");var d=$("<td>").addClass("label").append(rdx.i18n.get_string(a[b]["label"]));var f=m[b];if(rdx.utils.is_defined(a[b]["renderer_callback"])){f=a[b]["renderer_callback"].call_back([m])}var h=$("<td>").addClass("field").append(f);g.append(d).append(h);e.append(g)}};rdx.resource_visualizer.prototype._render_info_charts=function(p,b,e){var o=$("<div>").addClass("other_info");var h=$("<div>").addClass("bytes_info");for(var g in p){if(rdx.utils.is_defined(e[g])){var n=$("<div>").addClass("inner_div");var f=$("<div>").addClass("header").append(p[g]["header_label"]);var m=$("<div>").addClass("total_bytes").append(e[g]);var s=$("<div>").addClass("footer").append(p[g]["footer_label"]);n.append(f).append(m).append(s);h.append(n)}}var a=$("<div>").addClass("memory_info");var d=true;for(var g in b){if(rdx.utils.is_defined(e[g])){var n=$("<div>").addClass("inner_div");var f=$("<div>").addClass("header").append(b[g]["label"]);var q=new rdx.bar_chart(null,{value:e[g],class_names:"bar_chart green_foreground"}).render();var m=$("<div>").append(q);var s=$("<div>").addClass("footer").append(e[g]).append("%");n.append(f).append(m).append(s);a.append(n);if(d==true){n.addClass("first");d=false}}}if(h.children().length>0){o.append(h)}else{a.addClass("single_column")}o.append(a);this._info_div.append(o)};rdx.resource_visualizer.prototype._show_interface_summary=function(a,h){var d={};var o=this._resp_callback_param.left.interfaces_summary;var n="";var e=o[a];for(var b in this._view_definition.view_properties.interface_summary){var f=rdx.i18n.get_string(this._view_definition.view_properties.interface_summary[b]["label"]);var g=e[b];if(rdx.utils.is_defined(this._view_definition.view_properties.interface_summary[b]["renderer_callback"])){g=this._view_definition.view_properties.interface_summary[b]["renderer_callback"].call_back([e])}n=n+"<span>"+f+"</span> : <b>"+g+"</b><br/>"}d.message=n;d.hide_more=true;d.class_names="resource_visualizer_tooltips";var m=new rdx.tooltip(h,d);m.render(d)};rdx.resource_visualizer.prototype._connectDefault=function(f,a,d,e){var b=this;if(rdx.utils.is_not_defined(e)){e="Right"}d=d.replace(/\//g,"_");d=d.replace(/\./g,"_");d="un-selected c_"+d;setTimeout(function(){b._jsPlumb.connect({source:f,target:a,cssClass:d},{anchor:[e],connector:["Straight"],endpoint:"Blank",paintStyle:{strokeStyle:"#E9E9E9",lineWidth:2,radius:2}})},1000)};rdx.resource_visualizer.prototype.selectDefault=function(f){var e,b,d,a;this.remove_all_connections();for(b in f.left.individuals){if(f.left.individuals.hasOwnProperty(b)){a=f.left.individuals[b];$(".left  [data-left-value='"+a+"']").addClass("current");$(".left  [data-left-value='"+a+"']").addClass("current");if(f.right.length>0){this.selectSvg(a)}}}for(b in f.left.groups){if(f.left.groups.hasOwnProperty(b)){a=f.left.groups[b].channel_id;$(".group_title_main [data-left-value ='"+a+"']").addClass("current");if(f.left.groups[b].individuals){for(d in f.left.groups[b].individuals){a=f.left.groups[b].individuals[d];this.selectSvg(a);$(".group_main [data-left-value ='"+a+"']").addClass("current")}}if(f.right.length>0){this.selectSvg(a)}}}for(b in f.right){if(f.right.hasOwnProperty(b)){a=f.right[b].ip_address;this.selectSvg(a);$(".right_main [data-right-ip-address='"+a+"']").addClass("current");this._highlited_div.addClass("connected")}}this._adjust_height()};rdx.resource_visualizer.prototype._adjust_height=function(){var a=$(".left .current");var e=$(".right_main .current");var b=[];for(var h=0;h<e.length;h++){var d=$(e[h]).offset();b.push(d.top+29)}for(var h=0;h<a.length;h++){var d=$(a[h]).offset();b.push(d.top+15)}var f=Math.max.apply(Math,b);var g=Math.min.apply(Math,b);var n=f-g;var m=this._connector_div.offset().top;this._highlited_div.height(n+1).css("top",g-m)};rdx.resource_visualizer.prototype.selectSvg=function(a){a=a.replace(/\//g,"_");a=a.replace(/\./g,"_");a="c_"+a;elmnt=$("."+a).first();rdx.utils.replace_class_svg(elmnt[0],"selected","un-selected")};rdx.resource_visualizer.prototype.clickCallBack=function(m){var n=m.split(",");var b=0;for(var g=0,o=0;g<n.length;g++,o++){b=g*10;if(b>90){b=90}var f="vlan_connectors";if(n[g].indexOf("LA")>-1){var d=$(".group_title[data-left-value = '"+n[g]+"'] .empty_span")}else{var d=$(".left_individual[data-left-value = '"+n[g]+"'] .empty_span");if(d.length==0){d=$(".group_individual[data-left-value = '"+n[g]+"'] .empty_span")}}var p=$(".vlan[data-left-vlan-group = '"+n[g]+"']  .empty_span");if(o>=this._colored_arrays.length){o=0}var e="color_"+o;var a=this._colored_arrays[o];p.parent().addClass(e);d.addClass(e);if(d.length>0){if(p.length>1){for(var h=0;h<p.length;h++){this.draw_lines(p[h],d,f,a,b)}}else{this.draw_lines(p,d,f,a,b)}}}};rdx.resource_visualizer.prototype.draw_lines=function(a,d,f,e,b){this._draw_flowchart_line.connect({target:a,source:d,cssClass:f},{anchors:["Right","Left"],connector:["Flowchart",{stub:[b,0],cornerRadius:2}],endpoint:"Blank",paintStyle:{strokeStyle:e,lineWidth:2}})};rdx.resource_visualizer.prototype.close_info_pane=function(){$(".resource_visualizer .right svg").removeClass("hide");$(".resource_visualizer .right .right_main").removeClass("hide").removeClass("expanded");if(rdx.utils.is_defined(this._info_div)){this._info_div.remove()}};rdx.resource_visualizer.prototype.remove_all_connections=function(){var b=this;$(".current").removeClass("current");$(".selected").each(function(){var e=$(this);rdx.utils.replace_class_svg(e[0],"un-selected","selected")});$(".right .inside_box").each(function(e,f){b._jsPlumb.show(f)});this._highlited_div.removeClass("connected");this._draw_flowchart_line.detachEveryConnection();if(this._left_cell_content.height()<this._right_cell_content.height()){this._connector_div.height(this._right_cell_content.height()-45)}else{this._connector_div.height(this._left_cell_content.height()-40)}for(var a=0;a<this._colored_arrays.length;a++){var d="color_"+a;$("."+d).removeClass(d)}};rdx.resource_visualizer.prototype._render_legends=function(f){var d=$("<div>").addClass("legends").appendTo(f);var b=this._view_properties.legends;for(var e=0;e<b.length;e++){var h=$("<div>").addClass("legend").appendTo(d);var a=$("<div>").addClass("color_box").appendTo(h).addClass(b[e].toLowerCase());var g=$("<div>").addClass("legend_label").appendTo(h).append(b[e])}};rdx.resource_visualizer.prototype._render_available_cores_info=function(a,b){var d=$("<div>").addClass("info").appendTo(b);d.bind(rdx.events.MOUSE_OVER,{},function(f){var e={};e.message=a.text;e.hide_more=true;e.class_names="core_allocation_help_tooltip";var g=new rdx.tooltip(d,e);g.render(e)});d.bind(rdx.events.MOUSE_OUT,{},function(e){$(".rdx_tooltip_z_index").remove()})};rdx.resource_visualizer.prototype._render_toggle_switch=function(d){var g=$("<div>").addClass("toggle_switch").appendTo(d);var f=$("<div>").addClass("toggle_switch_text").append("Hyperthread view").appendTo(g);var b=$("<label>").addClass("toggle_switch_label").appendTo(g);var a=$("<input>").addClass("toggle_switch_input").appendTo(b);a.attr("type","checkbox");a.checked=false;a.bind(rdx.events.CHANGE,{},function(h){if(this.checked){$(".hyperthread_view_off").addClass("hide");$(".hyperthread_view_on").removeClass("hide")}else{$(".hyperthread_view_on").addClass("hide");$(".hyperthread_view_off").removeClass("hide")}});var e=$("<span>").addClass("slider").appendTo(b)};rdx.resource_visualizer.prototype._render_visualizer_layout=function(){var f=$("<div>").addClass("core_allocation_layout").appendTo(this._parent);var b=$("<div>").addClass("additional_info").appendTo(f);if(rdx.utils.is_defined(this._view_properties.legends)){this._render_legends(b)}this._render_toggle_switch(b);var C=this._resp_callback_param;var z=this._resp_callback_param.help;var s=this._resp_callback_param.is_single_pool;if(rdx.utils.is_defined(z)){this._render_available_cores_info(z,b)}this._main_table_div=$("<div>").appendTo(f);this._main_table=$("<table>").addClass("core_allocation_table").appendTo(this._main_table_div);var A=$("<thead>").appendTo(this._main_table);var a=$("<tbody>").appendTo(this._main_table);var t=$("<tr>").addClass("header_row").appendTo(A);var v=$("<th>").addClass("core_allocation_table_header th_first").appendTo(t);var o=$("<th>").addClass("core_allocation_table_header col_core_info left").appendTo(t);var F=$("<div>").addClass("core_allocation_table_header_div").appendTo(o).append("Cores");var q=$("<th>").addClass("core_allocation_table_header table_header_instance left").appendTo(t);if(this._resp_callback_param.num_sockets=="2"){var p=$("<th>").addClass("core_allocation_table_header table_header_instance right").appendTo(t);var h=$("<th>").addClass("core_allocation_table_header col_core_info right").appendTo(t);var D=$("<div>").addClass("core_allocation_table_header_div").appendTo(h).append("Cores");var g=$("<th>").addClass("core_allocation_table_header th_last").appendTo(t)}else{f.addClass("single_socket")}for(var E in C){if(C.hasOwnProperty(E)){if(E!="help"&&E!="is_single_pool"&&E!="num_sockets"){this._render_table(C[E],a,s,false)}}}var n=$(".row_core").length;var m=$("<td>").addClass("first_td").attr("rowspan",n).prependTo($(".core_allocation_table tbody tr:first-child"));var d=$("<div>").addClass("outer").appendTo(m);var B=$("<div>").addClass("inner").append("Socket 01").appendTo(d);if(this._resp_callback_param.num_sockets=="2"){var w=$("<td>").addClass("last_td").attr("rowspan",n).appendTo($(".core_allocation_table tbody tr:first-child"));var u=$("<div>").addClass("outer").appendTo(w);var e=$("<div>").addClass("inner").append("Socket 02").appendTo(u)}};rdx.resource_visualizer.prototype._render_table=function(g,d,e,a){var f=$("<tr>").addClass("row_core").appendTo(d);for(var b in g){if(g.hasOwnProperty(b)){if(g[b].type=="core"){this._render_core_column(g[b],f,e)}else{this._render_details_off_state(g[b],f,e,b);this._render_details_on_state(g[b],f,e,b)}}}};rdx.resource_visualizer.prototype._render_core_column=function(b,f){var h=$("<td>").addClass("col_core_info").appendTo(f);var a=$("<div>").addClass("core").appendTo(h);var g=$("<div>").addClass("core_info").appendTo(a);var d=$("<div>").addClass("label").appendTo(g).append(b.label);resource_visualizer._add_allocation_mode(b.allocation_mode,h);var e=new rdx.bar_chart(null,{value:b.usage,class_names:"bar_chart"}).render();g.append(e);g.attr("title","Usage : "+b.usage)};rdx.resource_visualizer.prototype._render_details_off_state=function(z,C,f,e){var g=$("<td>").addClass("detailed_core_info hyperthread_view_off").appendTo(C);resource_visualizer._add_allocation_mode(z.allocation_mode,g);z.allocation_mode=z.allocation_mode.toLowerCase();if(z.allocation_mode=="available"){var q=$("<div>").addClass("available_div").appendTo(g);if(e=="col1"){g.addClass("socket_space_right")}if(e=="col2"){g.addClass("socket_space_left")}}else{if((z.allocation_mode=="fullpooled")||(z.allocation_mode=="semipooled")){g.attr("rowspan",z.rowspan);var q=$("<div>").addClass("detailed_core_info_div").appendTo(g);var a=z.instances.split(",");for(var v=0;v<a.length;++v){var s=$("<div>").addClass("instance pool_instance_left").appendTo(q);s.append(a[v]);++v;var p=$("<div>").addClass("instance pool_instance_right").appendTo(q);p.append(a[v])}if(f=="false"){if(e=="col1"){q.parent().addClass("socket_space_right")}if(e=="col2"){q.parent().addClass("socket_space_left")}}if(e=="col2"){q.parent().addClass("right_socket")}}else{if(z.allocation_mode=="committed"){g.attr("rowspan",z.rowspan);g.attr("colspan",z.colspan);var u=z.hyperthreads;var q=$("<div>").addClass("detailed_core_info_div").appendTo(g);var A=$("<div>").addClass("instance").appendTo(q);A.append(z.instances);var t=$("<div>").addClass("hyperthread last");var m=0;var G=0;var n;if(rdx.utils.is_not_empty(z.instances)){for(var F in u){if(u.hasOwnProperty(F)){if(u[F].type=="PE"){var d=$("<div>").addClass("hyperthread").appendTo(q);var o=$("<div>").addClass("usage");var b=$("<div>").addClass("type").append(u[F].type);var h=new rdx.bar_chart(null,{value:u[F].usage,class_names:"bar_chart"}).render();o.append(b);o.append(h);d.append(o)}if(u[F].type=="MGMT"){G+=1;m+=parseFloat(u[F].usage)}}}n=z.is_single_socket;m=m/G;var b=$("<div>").addClass("type").append("MGMT");var o=$("<div>").addClass("usage");var h=new rdx.bar_chart(null,{value:m.toFixed(2),class_names:"bar_chart"}).render();o.append(b).append(h);t.append(o).appendTo(q)}if(n=="true"){if(e=="col1"){q.parent().addClass("socket_space_right")}if(e=="col2"){q.parent().addClass("socket_space_left")}}if(e=="col2"){q.parent().addClass("right_socket")}}else{if(z.allocation_mode=="shareddedicated"){var u=z.hyperthreads;var q=$("<div>").addClass("detailed_core_info_div").appendTo(g);var A=$("<div>").addClass("instance").appendTo(q);A.append(z.instances);for(var F in u){if(u.hasOwnProperty(F)){var d=$("<div>").addClass("hyperthread").appendTo(q);var o=$("<div>").addClass("usage").appendTo(d);if(rdx.utils.is_not_empty(z.instances)){var b=$("<div>").addClass("type").append(u[F].type);var B=new rdx.bar_chart(null,{value:u[F].usage,class_names:"bar_chart"}).render();if(u[F].type.toLowerCase()!=="none"){o.append(b)}o.append(B);d.append(o)}}}if(e=="col1"){q.parent().addClass("socket_space_right")}if(e=="col2"){q.parent().addClass("socket_space_left");q.parent().addClass("right_socket")}}else{if(z.allocation_mode=="reserved"){var u=z.hyperthreads;var q=$("<div>").addClass("detailed_core_info_div").appendTo(g);var A=$("<div>").addClass("instance_header").appendTo(q);A.append(z.instances);var E=$("<div>").addClass("vcpu").appendTo(q);var w=4;if(z.instances.toLowerCase()=="svm"){w=1}for(var v=0;v<w;++v){var D=$("<div>").addClass("vcpu");D.append("vcpu"+(v+1)).appendTo(E)}for(var F in u){if(u.hasOwnProperty(F)){var d=$("<div>").addClass("hyperthread").appendTo(q);var o=$("<div>").addClass("usage").appendTo(d);if(rdx.utils.is_not_empty(z.instances)){var B=new rdx.bar_chart(null,{value:u[F].usage,class_names:"bar_chart"}).render();o.append(B)}}}if(e=="col2"){q.parent().addClass("right_socket")}}}}}}};rdx.resource_visualizer.prototype._render_details_on_state=function(B,E,m,g){var n=$("<td>").addClass("detailed_core_info hyperthread_view_on hide").appendTo(E);resource_visualizer._add_allocation_mode(B.allocation_mode,n);if(B.allocation_mode=="available"){var s=$("<div>").addClass("available_div").appendTo(n);if(g=="col1"){n.addClass("socket_space_right")}if(g=="col2"){n.addClass("socket_space_left")}}else{if(B.allocation_mode=="fullpooled"||B.allocation_mode=="semipooled"){n.attr("rowspan",B.rowspan);var v=B.hyperthreads;var s=$("<div>").addClass("detailed_core_info_div").appendTo(n);var b=$("<div>").addClass("fullpooled_instance").appendTo(s);var e=$("<div>").addClass("hyperthread_info").appendTo(s);var a=B.instances.split(",");for(var z=0;z<a.length;++z){var t=$("<div>").addClass("instance").append(a[z]);b.append(t)}for(var I in v){if(v.hasOwnProperty(I)){var f=$("<div>").addClass("hyperthread").appendTo(e);this._render_hyperthreads(v[I],f,"")}}if(m=="false"){if(g=="col1"){s.parent().addClass("socket_space_right")}if(g=="col2"){s.parent().addClass("socket_space_left")}}if(g=="col2"){s.parent().addClass("right_socket")}}else{if(B.allocation_mode=="committed"){n.attr("rowspan",B.rowspan);n.attr("colspan",B.colspan);var v=B.hyperthreads;var s=$("<div>").addClass("detailed_core_info_div").appendTo(n);var C=$("<div>").addClass("instance").appendTo(s);C.append(B.instances);var u=$("<div>").addClass("hyperthread last");var h=$("<div>").addClass("hyperthread_label_div").appendTo(u);var o=0;var H=0;var p;var z=1;if(rdx.utils.is_not_empty(B.instances)){for(var I in v){if(v.hasOwnProperty(I)){if(v[I].type=="PE"){var f=$("<div>").addClass("hyperthread").appendTo(s);var w=$("<div>").addClass("hyperthread_label").appendTo(f).append(v[I].label);var d=$("<div>").addClass("type").append(v[I].type);d.append(z).appendTo(f);++z;var D=new rdx.bar_chart(null,{value:v[I].usage,class_names:"bar_chart"}).render();f.append(D)}if(v[I].type=="MGMT"){var w=$("<div>").addClass("hyperthread_label").appendTo(h).append(v[I].label);H+=1;o+=parseFloat(v[I].usage)}}}p=B.is_single_socket;var d=$("<div>").addClass("type").append("MGMT").appendTo(u);o=o/H;var D=new rdx.bar_chart(null,{value:o.toFixed(2),class_names:"bar_chart"}).render();u.append(D).appendTo(s)}if(p=="true"){if(g=="col1"){s.parent().addClass("socket_space_right")}if(g=="col2"){s.parent().addClass("socket_space_left")}}if(g=="col2"){s.parent().addClass("right_socket")}}else{if(B.allocation_mode=="shareddedicated"){var v=B.hyperthreads;var s=$("<div>").addClass("detailed_core_info_div").appendTo(n);var C=$("<div>").addClass("instance").appendTo(s);C.append(B.instances);for(var I in v){if(v.hasOwnProperty(I)){var f=$("<div>").addClass("hyperthread").appendTo(s);var w=$("<div>").addClass("hyperthread_label").appendTo(f).append(v[I].label);var q=$("<div>").addClass("usage").appendTo(f);if(rdx.utils.is_not_empty(B.instances)){var d=$("<div>").addClass("type").append(v[I].type);var D=new rdx.bar_chart(null,{value:v[I].usage,class_names:"bar_chart"}).render();if(v[I].type.toLowerCase()!=="none"){q.append(d)}q.append(D)}}}if(g=="col1"){s.parent().addClass("socket_space_right")}if(g=="col2"){s.parent().addClass("socket_space_left");s.parent().addClass("right_socket")}}else{if(B.allocation_mode=="reserved"){var v=B.hyperthreads;var s=$("<div>").addClass("detailed_core_info_div").appendTo(n);var C=$("<div>").addClass("instance_header").appendTo(s);C.append(B.instances);var G=$("<div>").addClass("vcpu").appendTo(s);var A=4;if(B.instances.toLowerCase()=="svm"){A=1}for(var z=0;z<A;++z){var F=$("<div>").addClass("vcpu");F.append("vcpu"+(z+1)).appendTo(G)}for(var I in v){if(v.hasOwnProperty(I)){var f=$("<div>").addClass("hyperthread").appendTo(s);var w=$("<div>").addClass("hyperthread_label").appendTo(f).append(v[I].label);var q=$("<div>").addClass("usage").appendTo(f);if(rdx.utils.is_not_empty(B.instances)){var D=new rdx.bar_chart(null,{value:v[I].usage,class_names:"bar_chart"}).render();q.append(D)}}}if(g=="col2"){s.parent().addClass("right_socket")}}}}}}};rdx.resource_visualizer.prototype._render_hyperthreads=function(d,f,h){var b=$("<div>").addClass("hyperthread_label").appendTo(f).append(d.label);var e=d.type;if(rdx.utils.is_not_empty(h)){var a=$("<div>").addClass("instance").appendTo(f);if(e.toLowerCase()!="none"){a.append(e+" ")}a.append(h)}var g=new rdx.bar_chart(null,{value:d.usage,class_names:"bar_chart"}).render();f.append(g)};rdx.resource_visualizer.prototype.close_view=function(){for(var a=0;a<this._inner_views.length;a++){this._inner_views[a].destroy_view()}this._base_view.destroy_view()};rdx.app_fw_visualizer_view=function(d,b,a){this._parent=d;this.loop_cntr=0;this.profilename="";this._base_view=a;this.is_back_button_required=true;this._key=rdx.resources[b.resource_name].primary_keys[rdx.resources[b.resource_name].primary_keys.length-1];this._key="url";this._str_temp="";this._leaf_markup="";this.visual_object=null;this._top=20;this._box_space=37;this._root_top=0;this._bottom=0;this._fltr_select_val="";this.linearObj={};this.zoomfit_scale=0;this.zoomfit_translate=0;this.svg_height=0;this.nodeEnter=null;this.svg_width=0;this._level=1;this._total_levels=1;this._decorator_width=0;this._selected_leaf=null;this.slider_height=0;this._level_top=[];this._response=null;this.appfw_resp_keys={starturlaction:{single_key:true,resp_rlx_vis_key:"starturl",resp_lrnd_vis_key:"url",resp_lrnd_dep_key:"url",resp_relx_actn_url:"starturl"},denyurlaction:{single_key:true,resp_rlx_vis_key:"denyurl",resp_lrnd_vis_key:"url",resp_lrnd_dep_key:"url",resp_relx_actn_url:"denyurl"},cookieconsistencyaction:{single_key:true,resp_rlx_vis_key:"cookieconsistency",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"loc",resp_relx_actn_url:"cookieconsistency"},creditcardaction:{single_key:false,resp_rlx_vis_key:"creditcardnumber",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"url",resp_relx_actn_url:"creditcardnumberurl"},fieldconsistencyaction:{single_key:false,resp_rlx_vis_key:"fieldconsistency",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"url",resp_relx_actn_url:"formactionurl_ffc"},fieldformataction:{single_key:false,resp_rlx_vis_key:"fieldformat",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"url",resp_relx_actn_url:"formactionurl_ff"},csrftagaction:{single_key:false,resp_rlx_vis_key:"csrftag",resp_lrnd_vis_key:"url",resp_lrnd_dep_key:"action_url",resp_relx_actn_url:"csrfformactionurl"},crosssitescriptingaction:{single_key:false,resp_rlx_vis_key:"crosssitescripting",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"url",resp_relx_actn_url:"formactionurl_xss"},sqlinjectionaction:{single_key:false,resp_rlx_vis_key:"sqlinjection",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"url",resp_relx_actn_url:"formactionurl_sql"},safeobjectaction:{single_key:true,resp_rlx_vis_key:"safeobject",resp_lrnd_vis_key:"url",resp_lrnd_dep_key:"url",resp_relx_actn_url:"starturl"},contenttypeaction:{single_key:true,resp_rlx_vis_key:"contenttype",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"name",resp_relx_actn_url:"starturl"},xmlxssaction:{single_key:true,resp_rlx_vis_key:"xmlxss",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"name",resp_relx_actn_url:"xmlxss"},xmlsqlinjectionaction:{single_key:true,resp_rlx_vis_key:"xmlsqlinjection",resp_lrnd_vis_key:"name",resp_lrnd_dep_key:"name",resp_relx_actn_url:"xmlsqlinjection"}};this._response_indxd={};this.jsonObjRet={};this._response_key="";this._delimiter_response=null;this._jsPlumb=jsPlumb.getInstance();this._initialize_view=function(m){var f,p,e,h,o,n,g;p=b.resource_name;e=b.sig_name;this.profilename=e;n=b.action_key;if(appfw){appfw.set_cur_action_key(n)}this._response_key=b.resp_key;this._response_key="url";o=this;h=rdx.utils.get_resource(p);b._resource=h;f="";if(!m){this.draw(n,b)}else{o.reset(false)}g="";if(rdx.utils.is_defined(o.appfw_resp_keys[n])&&!o.appfw_resp_keys[n].single_key){if(b.sub_type==="learning_visualiser"){f=h.get_url+"?args=profilename:"+e+",securitycheck:"+b.learned_pcheck+",paging:on"}else{f=h.get_url+"?args=name:"+e}$(".app-fw-visualizer .visualizer-svg .error-msg ").addClass("hide-me");$(".app-fw-visualizer .visualizer .root").removeClass("hide-me");$.ajax({url:f,success:function(s){var A=appfw.get_relax_binding_from_action_key(n);if((b.sub_type==="learning_visualiser"&&rdx.utils.is_defined(s)&&s.appfwlearningdata)||(b.sub_type==="relaxation_visualiser"&&rdx.utils.is_defined(s)&&s[A])){var v={},z,w,q,u,t;s=s.appfwlearningdata||s[A];z="";w=0;q="url";u="";if(b.sub_type!=="learning_visualiser"){q=o.appfw_resp_keys[n].resp_relx_actn_url}else{if(n==="csrftagaction"){q="name"}}for(t in s){if(!v[s[t][q]]){v[s[t][q]]={};if(o._fltr_select_val===s[t][q]){u="selected";g=encodeURIComponent(s[t][q])}else{if(w===0){g=encodeURIComponent(s[t][q]);if(!m){o._fltr_select_val=s[t][q]}}}z+="<option value='"+s[t][q]+"' "+u+" >"+s[t][q]+"</option>";u="";w=w+1}}$("#app-fw-action-url").html(z);o.callVisualiserData(g,b,e,h,n,o,m)}else{$(".app-fw-visualizer .visualizer-svg .error-msg ").removeClass("hide-me");$(".app-fw-visualizer .visualizer .root").addClass("hide-me");$("#app-fw-action-url").html("")}},error:new rdx.callback(this,function(){rdx.message_box.info("Action url load failed. Please try again")}),headers:{"Content-Type":"application/json",NITRO_WEB_APPLICATION:true,rand_key:rand},type:"GET"})}else{o.callVisualiserData(null,b,e,h,n,o,m)}return}};rdx.app_fw_visualizer_view.prototype.callVisualiserData=function(e,a,s,o,d,g,q){var m,b="",t=$("#app-fw-action-url").val(),f="url",h,n,p;if(a.sub_type!=="learning_visualiser"){f=this.appfw_resp_keys[d].resp_relx_actn_url}else{if(d==="csrftagaction"){f="name"}}if(e){b="&filter="+f+":"+e}else{if(t){b="&filter="+f+":"+encodeURIComponent(t)}}if(a.sub_type==="learning_visualiser"){h=$("#app-fw-visualiser-pgsz").val()||50;n=$("#app-fw-visualiser-pgno").val()||1;p=o.get_url+"?args=profilename:"+s+",securitycheck:"+a.learned_pcheck+",paging:on&pageno="+n+"&pagesize="+h+b;m=o.get_url+"?args=profilename:"+s+",securitycheck:"+a.learned_pcheck+",paging:on&count=yes"+b}else{p=o.get_url+"?args=name:"+s+b}$(".app-fw-visualizer .visualizer-svg .error-msg ").addClass("hide-me");$(".app-fw-visualizer .visualizer .root").removeClass("hide-me");$.ajax({url:p,success:function(u){if((a.sub_type==="learning_visualiser"&&rdx.utils.is_defined(u)&&u.appfwlearningdata)||(a.sub_type==="relaxation_visualiser"&&rdx.utils.is_defined(u)&&u[appfw.get_relax_binding_from_action_key(d)])){g.response_callback(u,d,g,o,a,m,q)}else{$(".app-fw-visualizer .visualizer-svg .error-msg ").removeClass("hide-me");$(".app-fw-visualizer .visualizer .root").addClass("hide-me")}},error:new rdx.callback(this,function(){rdx.message_box.info("appflow.cannot_get_available_items")}),headers:{"Content-Type":"application/json",NITRO_WEB_APPLICATION:true,rand_key:rand},type:"GET"})};rdx.app_fw_visualizer_view.prototype.response_callback=function(b,g,f,a,e,h,d){if((e.sub_type==="learning_visualiser"&&rdx.utils.is_defined(b)&&b.appfwlearningdata)||(e.sub_type==="relaxation_visualiser"&&rdx.utils.is_defined(b)&&b[appfw.get_relax_binding_from_action_key(g)])){f._decorator_width=$(".view_div_decorator").width();f._response=b;this._delimiter_response=b[appfw.get_relax_binding_from_action_key(g)]||b.appfwlearningdata;f=this;var m;$.each(this._delimiter_response,function(){var n;if(e.sub_type==="learning_visualiser"){n=this[f.appfw_resp_keys[g].resp_lrnd_vis_key];if(n){m=f.set_data_change(this,g);f._response_indxd[n.replace(/\s/g,"__/\\__")]=m}}else{n=this[f.appfw_resp_keys[g].resp_rlx_vis_key];if(n){f._response_indxd[n.replace(/\s/g,"__/\\__")]=this}}});e._view_definition={};e._view_definition.action_key=g;this.drawNext("slash",g,e);if(e.sub_type==="learning_visualiser"&&($("#app-fw-visualiser-pgno")&&$("#app-fw-visualiser-pgno").children().length<=0)){$(".app-fw-visualizer .visualizer-svg .error-msg ").addClass("hide-me");$(".app-fw-visualizer .visualizer-svg .root").removeClass("hide-me");$.ajax({url:h,success:function(n){var o;if(n&&n.appfwlearningdata){o=n.appfwlearningdata[0].__count||0}f._total_rule_count=o;f.paginate()},headers:{"Content-Type":"application/json",NITRO_WEB_APPLICATION:true,rand_key:rand},type:"GET"})}if(!d){$(".app-fw-visualizer .tools .edit").click(function(){var n,p,o,q=f._selected_leaf.attr("data-full-key");o="appfw_relax_edit_view_"+g;p=rdx.utils.get_view(o);n=rdx.view_utils.show_view_in_slider(p,null,f._response_indxd[q.replace(/\s/g,"__/\\__")]);$(n).bind(rdx.events.VIEW_DESTROYED,{},function(){f._initialize_view(true)})});$(".app-fw-visualizer .tools .disable").click(function(){var n=f.prepare_object_params_arr(a,e);neo.view_callbacks.appfw_do_enable_by_edit(n,false,null,f);return});$(".app-fw-visualizer .tools .enable").click(function(){var n=f.prepare_object_params_arr(a,e);neo.view_callbacks.appfw_do_enable_by_edit(n,true,null,f)});$(".app-fw-visualizer .tools .edit-deploy").click(function(){var n,o,p=f._selected_leaf.attr("data-full-key");n={resource_defn:a,refresh_action:rdx.view_constants.REFRESH_ALL};o=new rdx.list_view_action_callback_params({selected_rows_primary_keys:f._response_indxd[p.replace(/\s/g,"__/\\__")],selected_rows_data:[f._response_indxd[p.replace(/\s/g,"__/\\__")]],all_rows_data:f._response_indxd[p.replace(/\s/g,"__/\\__")],resource_context:n,list_view:e});if(g==="crosssitescriptingaction"||g==="sqlinjectionaction"){o._properties.selected_rows_primary_keys.f__orig.url="^"+o._properties.selected_rows_primary_keys.f__orig.url+"$";o._properties.selected_rows_primary_keys.url="^"+o._properties.selected_rows_primary_keys.url+"$"}neo.view_callbacks.appfw_show_learn_edit_deploy_view(o,f)});$(".app-fw-visualizer .tools .deploy").click(function(){var s,p=f._selected_leaf,t,v,n,w,q;if(p.data("grp-regex")){v=$("#app-fw-action-url").val();var o=null;var u=null;if(f._selected_leaf.attr("data-xss_sql_children_same_value_type")==="true"){o=f._selected_leaf.attr("data-xss_sql_value_type");u=f._selected_leaf.attr("data-xss_sql_value")}else{if(f._selected_leaf.attr("data-xss_sql_children_same_value_type")==="false"){rdx.message_box.error("Please select different node. The selected node has child nodes of different types.")}}s={hits:2000,profilename:e.sig_name,securitycheck:e.resp_key,isregex_ffc:"REGEX",name:appfw.encode_unicode_chars(p.data("full-key").replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&")+p.data("grp-regex")),loc:appfw.encode_unicode_chars(p.data("full-key").replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&")+p.data("grp-regex")),url:(v&&appfw.encode_unicode_chars(v.replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&")))||appfw.encode_unicode_chars(p.data("full-key").replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&")+p.data("grp-regex"))};if(g==="fieldformataction"){s.fieldtype="integer"}if(g==="creditcardaction"){s.ccnumber=s.name}if(g==="csrftagaction"){t=s.name;s.name=s.url;s.url=t}if(g==="crosssitescriptingaction"||g==="sqlinjectionaction"){if(rdx.utils.is_defined(o)&&rdx.utils.is_defined(u)){s.value_type=o;s.value=u}}n={resource_defn:a,refresh_action:rdx.view_constants.REFRESH_ALL};s.f__orig=$.extend(true,{},s);w={selected_rows_primary_keys:s,selected_rows_data:[s],all_rows_data:s,resource_context:n,list_view:e};q=new rdx.list_view_action_callback_params(w);if(g==="fieldformataction"){neo.view_callbacks.appfw_fieldformat_do_learn_deploy_fieldtype(q,f,g,true)}else{neo.view_callbacks.appfw_do_learn_deploy(q,f,g,true)}}else{s=f.prepare_object_params_arr(a,e);if(g==="fieldformataction"){neo.view_callbacks.appfw_fieldformat_do_learn_deploy_fieldtype(s,f,g)}else{neo.view_callbacks.appfw_do_learn_deploy(s,f,g)}}return});$(".app-fw-visualizer .tools .skip").click(function(){var n=f.prepare_object_params_arr(a,e);neo.view_callbacks.appfw_do_learn_skip(n,f);return});$(".app-fw-visualizer .tools .refresh").click(function(){f._initialize_view(true)});$(".app-fw-visualizer .tools .delete").click(function(){var t,v,w,s,u,p,o,q,n;t=new rdx.model_executor_service(new rdx.callback(function(){f._initialize_view(true)}));s=a;if(g==="crosssitescriptingaction"||g==="sqlinjectionaction"){p=f.prepare_object_params_arr(a,e);neo.view_callbacks.appfw_relax_detail_view_sqlxss_delete(p,f);return}u={resource_defn:a,refresh_action:rdx.view_constants.REFRESH_ALL};if($(".c_"+f._selected_leaf.data("lvl-vlu"))&&$(".c_"+f._selected_leaf.data("lvl-vlu")).length>0){for(q=0;q<$(".c_"+f._selected_leaf.data("lvl-vlu")).length;q=q+1){v=$(".c_"+f._selected_leaf.data("lvl-vlu")).get(q);v=$(v);o=v.attr("data-full-key");if($(".c_"+v.data("lvl-vlu")).length===0){w=$.extend(true,{},f._response_indxd[o.replace(/\s/g,"__/\\__")]);t.add(rdx.model_constants.REMOVE,s,w,null,null,null,u)}}}else{if(f._selected_leaf.data("grp-regex")){n=f.linearObj.root;f.setSelRowObjParams(n,null,t,a)}else{o=f._selected_leaf.attr("data-full-key");w=$.extend(true,{},f._response_indxd[o.replace(/\s/g,"__/\\__")]);t.add(rdx.model_constants.REMOVE,s,w,null,null,null,u)}}if(rdx.utils.is_defined(w)){delete w.stateflag}rdx.message_box.confirm("Do you want to delete selected item?",new rdx.callback(function(){t.execute()}))});$(".app-fw-visualizer #app-fw-delimiter").change(function(){f.reset(false);f.drawNext(this.value,g,e)})}$(".app-fw-visualizer .visualizer-svg  .nodes").delegate(".node","click",{},function(){f.setRegex(this);f.leaves_root_hndl_selection(this,e)})}else{$(".app-fw-visualizer .visualizer-svg .error-msg ").addClass("hide-me");$(".app-fw-visualizer .visualizer .root").removeClass("hide-me")}};rdx.app_fw_visualizer_view.prototype.setRegex=function(p){p=$(p);if(p.data("grp-regex")){return}var o,b=[],B=[],u=0,w=0,s,q,z=[],t=this._response_indxd,h,g,f,n,v,A=String(p.data("full-key"));if($(".c_"+p.data("lvl-vlu"))&&$(".c_"+p.data("lvl-vlu")).length>0){var a=true;var e=null;var d=null;o=$(".c_"+p.data("lvl-vlu"));s=0;var m=0;$(o).each(function(){var H=$(this),G=String(H.data("full-key")),E=String(H.data("key")),F=E.split(""),I;var C=G.replace(/\s/g,"__/\\__");if(rdx.utils.is_defined(t[C])&&t[C]["securitycheck"]==="crossSiteScripting"){var J=t[C]["value_type"];var D=t[C]["value"];if(!m){e=J;d=D}if(e!==J||d!==D){a=false}m++}if(H.hasClass("end_leaf")||rdx.utils.has_class_svg(H.get(0),"end_leaf")){if(s===0){u=G.length;s=s+1}else{if(G.length<u){u=G.length}}if(G.length>w){w=G.length}}for(I=0;I<F.length;I=I+1){if(b.indexOf(F[I])<0){b.push(F[I]);B.push(F[I].charCodeAt())}}});if(a){p.attr("data-xss_sql_children_same_value_type","true");p.attr("data-xss_sql_value_type",e);p.attr("data-xss_sql_value",d)}else{p.attr("data-xss_sql_children_same_value_type","false")}u=u-A.length;w=w-A.length;h=B.sort(function(D,C){return D-C});for(q=0;q<h.length;q=q+1){if((h[q]>=48&&h[q]<=57)||(h[q]>=65&&h[q]<=90)||(h[q]>=97&&h[q]<=122)){g=h[q];f=g;while(h[q+1]-h[q]===1){if(!((h[q]>=48&&h[q]<=57)||(h[q]>=65&&h[q]<=90)||(h[q]>=97&&h[q]<=122))){break}q=q+1;f=h[q]}n=String.fromCharCode(g);n=n.replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&");v=String.fromCharCode(f);v=v.replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&");if(g===f){z.push(String(n))}else{if(f-g===1){z.push(String(n));z.push(String(v))}else{z.push(n+"-"+v)}}}else{z.push(String.fromCharCode(h[q]).replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&"))}}p.attr("data-grp-regex","["+z.join("")+"]{"+u+","+w+"}")}return""};rdx.app_fw_visualizer_view.prototype.leaves_root_hndl_selection=function(e,b){var a=false,d,f;e=$(e);if(e.attr("data-lvl-vlu")==="0_0"){a=true}if(this._selected_leaf){this._selected_leaf.removeClass("selected");rdx.utils.remove_class_svg(this._selected_leaf.get(0),"selected")}if($(e).hasClass("leaf")||$(e).hasClass("root")){this._selected_leaf=$(e);$(e).addClass("selected")}if(rdx.utils.has_class_svg(e.get(0),"node")||rdx.utils.has_class_svg(e.get(0),"root")){this._selected_leaf=$(e);$(e).addClass("selected");rdx.utils.add_class_svg(e.get(0),"selected")}d=$(e);f=String(d.data("full-key"));$(".app-fw-visualizer .selected-rule-cntr .sel-rule").text(f.replace(/[-\\[\]{()*+?.,^$|#\/]/g,"\\$&")+(d.data("grp-regex")||""));if(b.sub_type==="learning_visualiser"){if(!a){$(".app-fw-visualizer .tools .edit-deploy").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .edit-deploy").removeAttr("disabled")}else{$(".app-fw-visualizer .tools .edit-deploy").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .edit-deploy").attr("disabled","disabled")}$(".app-fw-visualizer .tools .deploy").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .deploy").removeAttr("disabled");$(".app-fw-visualizer .tools .skip").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .skip").removeAttr("disabled")}else{if(!a){$(".app-fw-visualizer .tools .edit").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .edit").removeAttr("disabled")}else{$(".app-fw-visualizer .tools .edit-deploy").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .edit-deploy").attr("disabled","disabled")}$(".app-fw-visualizer .tools .delete").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .delete").removeAttr("disabled");$(".app-fw-visualizer .tools .delete").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .enable").removeAttr("disabled");$(".app-fw-visualizer .tools .enable").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .disable").removeClass("rdx_button_disabled");$(".app-fw-visualizer .tools .disable").removeAttr("disabled")}};rdx.app_fw_visualizer_view.prototype.set_data_change=function(b,a){var d,e;switch(a){case"starturlaction":d={url:appfw.decode_data_for_regex(b.url),hits:b.hits,profilename:b.profilename,securitycheck:b.securitycheck,f__orig:b};break;case"cookieconsistencyaction":d={loc:appfw.decode_data_as_is(b.name),name:b.name,hits:b.hits,profilename:b.profilename,securitycheck:b.securitycheck,f__orig:b};break;case"creditcardaction":d={url:appfw.decode_data_for_regex(b.url),hits:b.hits,name:b.name,ccnumber:b.name,cctype:b.fieldtype,profilename:b.profilename,securitycheck:b.securitycheck,f__orig:b};break;case"fieldconsistencyaction":d={loc:appfw.decode_data_as_is(b.name),name:b.name,url:appfw.decode_data_for_regex(b.url),hits:b.hits,profilename:b.profilename,securitycheck:b.securitycheck,f__orig:b};break;case"fieldformataction":d={fieldformat:appfw.decode_data_as_is(b.name),name:b.name,url:appfw.decode_data_for_regex(b.url),fieldtype:b.fieldtype,minlen:b.fieldformatminlength,maxlen:b.fieldformatmaxlength,f__charmap:b.fieldformatcharmappcre,f__choice:"FIELDTYPE",hits:b.hits,profilename:b.profilename,securitycheck:b.securitycheck,f__orig:b};break;case"csrftagaction":d={url:appfw.decode_data_for_regex(b.url),action_url:appfw.decode_data_as_is(b.name),name:b.name,hits:b.hits,profilename:b.profilename,securitycheck:b.securitycheck,f__orig:b};break;case"sqlinjectionaction":case"crosssitescriptingaction":e=new RegExp("^Field$","i");if(e.test(b.fieldtype)){b.fieldtype="FormField"}d={loc:appfw.decode_data_as_is(b.name),url:appfw.decode_data_for_regex(b.url),hits:b.hits,name:b.name,fieldtype:b.fieldtype,profilename:b.profilename,value:b.value,value_type:b.value_type,securitycheck:b.securitycheck,f__orig:b};break;default:d=b;break}return d};rdx.app_fw_visualizer_view.prototype.prepare_object_params_arr=function(h,e){var f,m,a,d,n,g,b;a={resource_defn:h,refresh_action:rdx.view_constants.REFRESH_ALL};d=this._selected_leaf.attr("data-full-key");n={selected_rows_primary_keys:[this._response_indxd[d.replace(/\s/g,"__/\\__")]],selected_rows_data:[this._response_indxd[d.replace(/\s/g,"__/\\__")]],all_rows_data:this._response_indxd[d.replace(/\s/g,"__/\\__")],resource_context:a,list_view:e};if($(".c_"+this._selected_leaf.data("lvl-vlu"))&&$(".c_"+this._selected_leaf.data("lvl-vlu")).length>0){n.selected_rows_data=[];n.selected_rows_primary_keys=[];for(g=0;g<$(".c_"+this._selected_leaf.data("lvl-vlu")).length;g=g+1){m=$(".c_"+this._selected_leaf.data("lvl-vlu")).get(g);m=$(m);d=m.attr("data-full-key");if($(".c_"+m.data("lvl-vlu")).length===0){n.selected_rows_data.push(this._response_indxd[d.replace(/\s/g,"__/\\__")]);n.selected_rows_primary_keys.push(this._response_indxd[d.replace(/\s/g,"__/\\__")])}}}else{if(this._selected_leaf.data("grp-regex")){b=this.linearObj.root;n.selected_rows_data=[];n.selected_rows_primary_keys=[];this.setSelRowObjParams(b,n)}}f=new rdx.list_view_action_callback_params(n);return f};rdx.app_fw_visualizer_view.prototype.setSelRowObjParams=function(a,n,f,h){var b=a.children||a._children,e=this,m,d,g;b.forEach(function(o){if(!(o.children||o._children)){if(o.data_ttl_class.indexOf("c_"+e._selected_leaf.data("lvl-vlu"))>=0){var p=o.data_full_key;if(n){n.selected_rows_data.push(e._response_indxd[p.replace(/\s/g,"__/\\__")]);n.selected_rows_primary_keys.push(e._response_indxd[p.replace(/\s/g,"__/\\__")])}else{if(f){d=h;g={resource_defn:h,refresh_action:rdx.view_constants.REFRESH_ALL};m=$.extend(true,{},e._response_indxd[p.replace(/\s/g,"__/\\__")]);f.add(rdx.model_constants.REMOVE,d,m,null,null,null,g)}}}}else{e.setSelRowObjParams(o,n,f,h)}})};rdx.app_fw_visualizer_view.prototype.paginate=function(){var f="",b,e,a,d;d=this._total_rule_count;a=$("#app-fw-visualiser-pgsz").val();e=Math.ceil(d/a);for(b=1;b<=e;b=b+1){f+="<option value='"+b+"'>"+b+"</option>"}$("#app-fw-visualiser-pgno").html(f)};rdx.app_fw_visualizer_view.prototype.make_view=function(){this._initialize_view()};rdx.app_fw_visualizer_view.prototype.reset=function(a){d3.select("svg").selectAll("*").remove();$("svg").remove();this.linearObj={};this._str_temp="";this._jsPlumb.deleteEveryEndpoint();if(a){this._parent.children(".app-fw-visualizer").remove()}if(this._selected_leaf){this._selected_leaf.removeClass("selected")}this._selected_leaf=null;$(".app-fw-visualizer .selected-rule-cntr .sel-rule").text("");$(".app-fw-visualizer .tools .edit").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .edit").attr("disabled","disabled");$(".app-fw-visualizer .tools .delete").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .delete").attr("disabled","disabled");$(".app-fw-visualizer .tools .enable").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .enable").attr("disabled","disabled");$(".app-fw-visualizer .tools .disable").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .disable").attr("disabled","disabled");$(".app-fw-visualizer .tools .edit-deploy").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .edit-deploy").attr("disabled","disabled");$(".app-fw-visualizer .tools .deploy").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .deploy").attr("disabled","disabled");$(".app-fw-visualizer .tools .skip").addClass("rdx_button_disabled");$(".app-fw-visualizer .tools .skip").attr("disabled","disabled");$(".app-fw-visualizer .leaves").html("")};rdx.app_fw_visualizer_view.prototype.draw=function(f,d){var e=this,a,b="";this.reset(true);if(rdx.utils.is_defined(e.appfw_resp_keys[f])&&!e.appfw_resp_keys[f].single_key){b='<label for="app-fw-delimiter" id = "lbl-actn-url">Action Url</label>                         <select id="app-fw-action-url">                         </select> '}a='<div class="app-fw-visualizer">                     <div class="tools">                         <label for="app-fw-delimiter">Delimiter</label>                         <select id="app-fw-delimiter">                             <option value="slash">/</option>                             <option value="non-alpha">Non Alpha</option>                             <option value="non-alpha-num">Non Alpha-numeric</option>                             <option value="any">Any</option>                         </select> '+b;if(d.sub_type==="learning_visualiser"){a+='<button class="edit-deploy rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Do Custom Operation on Application Firewall learning data" ><span>Edit & Deploy</span></button>             <button class="deploy rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Do Custom Operation on Application Firewall learning data" ><span>Deploy</span></button>            <button class="skip rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Do Custom Operation on Application Firewall learning data" ><span>Skip</span></button>            <button class="best_fit rdx_button rdx_grey_button" title="Fit to page" ><span>Best Fit</span></button>            <button class="save_img rdx_button rdx_grey_button" title="Fit to page" ><span>Save Image</span></button>            <label for="app-fw-visualiser-pgsz">Page Size</label>            <select id="app-fw-visualiser-pgsz">                <option value="25">25</option>                <option value="50" selected>50</option>                <option value="75" >75</option>            </select>            <label for="app-fw-visualiser-pgno">Page Number</label>            <select id="app-fw-visualiser-pgno">            </select>'}else{a+='<button class="add rdx_button rdx_grey_button" title="Create a new AppFirewall DenyURL Binding" ><span>Add</span></button>             <button class="edit rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Configure the selected AppFirewall DenyURL Binding" ><span>Edit</span></button>            <button class="delete rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Delete the selected AppFirewall DenyURL Binding" ><span>Delete</span></button>            <button class="enable rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Do Custom Operation on AppFirewall DenyURL Binding" ><span>Enable</span></button>            <button class=" disable rdx_button rdx_grey_button rdx_button_disabled" disabled="disabled" title="Do Custom Operation on AppFirewall DenyURL Binding" ><span>Disable</span></button>            <button class="best_fit rdx_button rdx_grey_button" title="Fit to page" ><span>Best Fit</span></button>            <button class="save_img rdx_button rdx_grey_button" title="Fit to page" ><span>Save Image</span></button>'}a+='<img class="refresh" src="/admin_ui/rdx/core/images/refresh.png" alt="Refresh Application Firewall Profile" >                    </div>                     <div class="selected-rule-cntr">                         <label >Selected Rule:</label>                         <label class="sel-rule"></label>                     </div>                     <div class="visualizer-svg">                         <div class="zoom-vertical-item">                             <button class="zoom-btn zoom-in" title="Zoom in"><div class="widget-zoom-icon"></div></button>                             <button class="zoom-btn zoom-out" title="Zoom Out"><div class="widget-zoom-icon"></div></button>                             <div class="btn-dvdr"></div>                         </div>                         <div class="full-screen">                             <button class="zoom-btn-fs full-scrn-exp"><div class="widget-zoom-icon" title="Toggle Full Screen"></div></button>                             <!-- img src="/admin_ui/rdx/core/images/noun_27845_cc.svg" -->                         </div>                         <div class="error-msg hide-me">No Items</div>                         <div class="svg-container"></div>                     </div>               </div>';this._parent.append(a);$(".app-fw-visualizer .tools .add").click(function(){var g,m,h,o,n;h="appfw_relax_add_view_"+f;m=rdx.utils.get_view(h);o=e._selected_leaf&&e._selected_leaf.attr("data-full-key");n=(e._selected_leaf&&e._response_indxd[o.replace(/\s/g,"__/\\__")])||{name:e.profilename};g=rdx.view_utils.show_view_in_slider(m,null,n);$(g).bind(rdx.events.VIEW_DESTROYED,{},function(){e._initialize_view()})});$(".app-fw-visualizer #app-fw-visualiser-pgno").change(function(){e.reset(false);e._initialize_view(true)});$(".app-fw-visualizer #app-fw-action-url").change(function(){e.reset(false);e._fltr_select_val=$("#app-fw-action-url").val();e._initialize_view(true)});$(".app-fw-visualizer #app-fw-visualiser-pgsz").change(function(){e.paginate();e.reset(false);e._initialize_view(true)})};rdx.app_fw_visualizer_view.prototype.drawNext=function(a,d,b){var e;e=this.form_visualizer_object(a,d,b);this.visual_object=e;this._total_levels=1};rdx.app_fw_visualizer_view.prototype.form_visualizer_object=function(a,d,b){var e={};switch(a){case"slash":e=this.formDelimiterObj(/(\/)/,d,b);break;case"non-alpha":e=this.formDelimiterObj(/([^a-zA-z])/,d,b);break;case"non-alpha-num":e=this.formDelimiterObj(/([^a-zA-Z\\d])/,d,b);break;case"any":e=this.formDelimiterObj("",d,b);break}return e};rdx.app_fw_visualizer_view.prototype.formDelimiterObj=function(H,g,p){var e,w,J,q,P,Z,N=[],ac="",M={},t=this._delimiter_response,L,K,U,o,C,O,T,A,z,I,n,u,s,ab,aa,E,m,d,b,v;for(P in t){if(t.hasOwnProperty(P)){if(p.sub_type==="learning_visualiser"){ac=t[P][this.appfw_resp_keys[g].resp_lrnd_vis_key]||"^$"}else{ac=t[P][this.appfw_resp_keys[g].resp_rlx_vis_key]}N=ac.split(H);q=M;for(Z=0;Z<N.length;Z=Z+1){if(N[Z]){if(!q){q={};q[N[Z]]={}}else{if(!q[N[Z]]){if(!q[N[Z]]){q[N[Z]]={}}q=q[N[Z]]}else{q=q[N[Z]]}}}}}}e={};e=this.traverse(M);if(rdx.utils.get_object_length(e)===0&&this._str_temp){e[this._str_temp]={}}w=$.extend(true,{},e);this.linearObj.root={value:{},children:[],name:"/",data_key:"root",data_full_key:"",data_lvl:0,data_lvl_vlu:"0_0"};w=this.formLinearObj(w,1,"c_0_0","",this.linearObj.root.children);J=$(".ns_content").outerHeight();this.slider_height=J;$(".app-fw-visualizer").height(J-($(".ns_content .view_div_decorator .title_tool_bar_table").outerHeight()+30));$(".app-fw-visualizer .visualizer-svg").height($(".app-fw-visualizer").outerHeight()-($(".app-fw-visualizer .tools").outerHeight()+$(".app-fw-visualizer .selected-rule-cntr").outerHeight()+46));L=this;K=this.linearObj.root;U=0;o=0;T=0;A=750;I=-Infinity;n=Infinity;s=-Infinity;aa=Infinity;C=$(".app-fw-visualizer .visualizer-svg").width();O=$(".app-fw-visualizer .visualizer-svg").height();u=d3.layout.tree().size([O,C]);this.tree=u;ab=d3.svg.diagonal().projection(function(ad){return[ad.y,ad.x]});function a(ag,ai,af){if(!ag){return}ai(ag);var ae=af(ag),ah,ad;if(ae){ah=ae.length;for(ad=0;ad<ah;ad=ad+1){a(ae[ad],ai,af)}}}a(K,function(ad){U=U+1;o=Math.max(ad.name.substr(0,10).length+10,o)},function(ad){return ad.children&&ad.children.length>0?ad.children:null});function F(){u.sort(function(ae,ad){return ad.name.toLowerCase()<ae.name.toLowerCase()?1:-1})}F();function R(){E.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}d=d3.behavior.zoom().scaleExtent([0.1,3]).on("zoom",R);b=d3.select(".visualizer-svg .svg-container").append("svg").attr("width",C).attr("height",O).attr("class","overlay").call(d);function S(ah,af,ag,ae){var ai=af||d.scale(),ad=-ah.x0,aj=-ah.y0;ag=ag||C;ae=ae||O;ad=(ad*ai+ag/2)-(((s-aa)*ai)/2);aj=(aj*ai+ae/2)-(((I-n)*ai+10)/2);d3.select("g").transition().duration(A).attr("transform","translate("+ad+","+aj+")scale("+ai+")");d.scale(ai);d.translate([ad,aj])}function W(ad,al,ae){var ai,ag,ah,af,ak=-ad.x0,aj=-ad.y0;al=al||C;ae=ae||O;ah=(I-n)/(s-aa);af=ae/al;if(af>ah){ai=al/(s-aa)}else{ai=ae/(I-n)}if(ah==0){ai=0.5*ai;ag=0.5*(ae/(I-n));ak=(ak*ai+al/2);aj=(aj*ag+ae/2)}else{ai=0.85*ai;ag=0.85*(ae/(I-n));ak=(ak*ai+al/2)-(((s-aa)*ai+50)/2);aj=(aj*ag+ae/2)-(((I-n)*ag+50)/2)}d3.select("g").transition().duration(A).attr("transform","translate("+ak+","+aj+")scale("+ai+")");return ai}function h(ad){if(ad.children){ad._children=ad.children;ad.children=null}else{if(ad._children){ad.children=ad._children;ad._children=null}}return ad}function v(ad){L.setRegex(this);L.leaves_root_hndl_selection(this,p,ad)}function Q(ad){if(d3.event.defaultPrevented){return}ad=h(ad);G(ad);v.call(this,ad)}function G(ad){var al=[1],ae,af,ag,ak,am,ai,aj,an,ah=function(ap,ao){if(ao.children&&ao.children.length>0){if(al.length<=ap+1){al.push(0)}al[ap+1]+=ao.children.length;ao.children.forEach(function(aq){ah(ap+1,aq)})}};ah(0,z);ae=d3.max(al)*25;u=u.size([ae,C]);af=u.nodes(z).reverse();an=u.links(af);af.forEach(function(ao){ao.y=(ao.depth*(o*10));if(ao.y>s){s=ao.y}if(ao.y<aa){aa=ao.y}if(ao.x>I){I=ao.x}if(ao.x<n){n=ao.x}});ag=E.selectAll("g.node").data(af,function(ao){return ao.id||(ao.id=++T)});ai=ag.enter().append("g").attr("class",function(ap){var ao=ap.children||ap._children?"":" end_leaf";return"node "+(ap.data_ttl_class||"")+ao}).attr("data-lvl-vlu",function(ao){return ao.data_lvl_vlu}).attr("data-key",function(ao){return ao.data_key}).attr("data-full-key",function(ao){return ao.data_full_key}).attr("title",function(ao){return ao.data_full_key}).attr("transform",function(){return"translate("+ad.y0+","+ad.x0+")"}).on("click",Q);ai.append("circle").attr("class",function(ap){var ao;if(L._response_indxd[ap.data_full_key.replace(/\s/g,"__/\\__")]&&L._response_indxd[ap.data_full_key.replace(/\s/g,"__/\\__")].state==="DISABLED"){ao="nodeCircle red"}else{if(L._response_indxd[ap.data_full_key.replace(/\s/g,"__/\\__")]&&L._response_indxd[ap.data_full_key.replace(/\s/g,"__/\\__")].state==="ENABLED"){ao="nodeCircle green"}else{ao="nodeCircle"}}return ao}).attr("r",0).style("fill",function(ao){return ao._children?"lightsteelblue":"#fff"});ai.append("text").attr("x",function(ao){return ao.children||ao._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(ao){return ao.children||ao._children?"end":"start"}).text(function(ap){var ao=(L._response_indxd[ap.data_full_key.replace(/\s/g,"__/\\__")]&&L._response_indxd[ap.data_full_key.replace(/\s/g,"__/\\__")].hits)||0;return ap.name.substr(0,10)+"  ["+ao+"]"}).style("fill-opacity",0).append("svg:title").text(function(ao){return ao.data_full_key});ag.select("text").attr("x",function(ao){return ao.children||ao._children?-10:10}).attr("text-anchor",function(ao){return ao.children||ao._children?"end":"start"}).text(function(ap){var ao=(L._response_indxd[ap.data_full_key]&&L._response_indxd[ap.data_full_key].hits)||0;return ap.name.substr(0,10)+"  ["+ao+"]"}).append("svg:title").text(function(ao){return ao.data_full_key});ag.select("circle.nodeCircle").attr("r",4.5).style("fill",function(ao){return ao._children?"lightsteelblue":""});aj=ag.transition().duration(A).attr("transform",function(ao){return"translate("+ao.y+","+ao.x+")"});aj.select("text").style("fill-opacity",1);am=ag.exit().transition().duration(A).attr("transform",function(){return"translate("+ad.y+","+ad.x+")"}).remove();am.select("circle").attr("r",0);am.select("text").style("fill-opacity",0);ak=E.selectAll("path.link").data(an,function(ao){return ao.target.id});ak.enter().insert("path","g").attr("class","link").attr("d",function(){var ao={x:ad.x0,y:ad.y0};return ab({source:ao,target:ao})});ak.transition().duration(A).attr("d",ab);ak.exit().transition().duration(A).attr("d",function(){var ao={x:ad.x,y:ad.y};return ab({source:ao,target:ao})}).remove();af.forEach(function(ao){ao.x0=ao.x;ao.y0=ao.y})}function B(){d3.select("g").attr("transform","translate("+d.translate()+")scale("+d.scale()+")")}function f(ae,ad){return d3.transition().duration(350).tween("zoom",function(){var ag=d3.interpolate(d.translate(),ae),af=d3.interpolate(d.scale(),ad);return function(ah){d.scale(af(ah)).translate(ag(ah));B()}})}function D(){var ak=1,ai=0.4,ah=1,ae,ad=[C/2,O/2],am=d.scaleExtent(),af=d.translate(),al=[],ag=[],aj={x:af[0],y:af[1],k:d.scale()};ae=$(this).hasClass("zoom-in")?"zoom_in":"zoom_out";d3.event.preventDefault();ak=(ae==="zoom_in")?1:-1;ah=d.scale()*(1+ai*ak);if(ah<am[0]||ah>am[1]){return false}al=[(ad[0]-aj.x)/aj.k,(ad[1]-aj.y)/aj.k];aj.k=ah;ag=[al[0]*aj.k+aj.x,al[1]*aj.k+aj.y];aj.x+=ad[0]-ag[0];aj.y+=ad[1]-ag[1];f([aj.x,aj.y],aj.k)}E=b.append("g");z=K;z.x0=0;z.y0=0;G(z);m=W(z);S(z,m);$(".app-fw-visualizer .full-screen").click(function(){var ad=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;if(!ad){rdx.utils.launchIntoFullscreen($(".app-fw-visualizer").get(0))}else{rdx.utils.exitFullscreen()}});function V(){var ad,ag,ah,af,ae=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;if(ae){ad=screen.height;$(".app-fw-visualizer").height(ad-(30));$(".app-fw-visualizer .visualizer-svg").height($(".app-fw-visualizer").outerHeight()-($(".app-fw-visualizer .tools").outerHeight()+$(".app-fw-visualizer .selected-rule-cntr").outerHeight()+46));$(".app-fw-visualizer .visualizer-svg .svg-container").height($(".app-fw-visualizer").outerHeight()-($(".app-fw-visualizer .tools").outerHeight()+$(".app-fw-visualizer .selected-rule-cntr").outerHeight()+46));ah=$(".app-fw-visualizer .visualizer-svg").width();af=$(".app-fw-visualizer .visualizer-svg").height();ag=W(z,ah,af);S(z,ag,ah,af)}else{ad=L.slider_height;$(".app-fw-visualizer").height(ad-($(".ns_content .view_div_decorator .title_tool_bar_table").outerHeight()+30));$(".app-fw-visualizer .visualizer-svg").height($(".app-fw-visualizer").outerHeight()-($(".app-fw-visualizer .tools").outerHeight()+$(".app-fw-visualizer .selected-rule-cntr").outerHeight()+46));$(".app-fw-visualizer .visualizer-svg .svg-container").height($(".app-fw-visualizer").outerHeight()-($(".app-fw-visualizer .tools").outerHeight()+$(".app-fw-visualizer .selected-rule-cntr").outerHeight()+46));ag=W(z);S(z,ag)}}$(".app-fw-visualizer").get(0).addEventListener("webkitfullscreenchange",V);d3.selectAll(".app-fw-visualizer .zoom-btn").on("click",D);$(".app-fw-visualizer .zoom-btn, .app-fw-visualizer .zoom-btn-fs").click(function(ag){var af,ae,ah,ad,ai;af=$(this);if(af.find(".ink").length===0){af.prepend("<span class='ink'></span>")}ae=af.find(".ink");ae.removeClass("animate");if(!ae.height()&&!ae.width()){ah=Math.max(af.outerWidth(),af.outerHeight());ae.css({height:ah,width:ah})}ad=ag.pageX-af.offset().left-ae.width()/2;ai=ag.pageY-af.offset().top-ae.height()/2;ae.css({top:ai+"px",left:ad+"px"}).addClass("animate")});$(".app-fw-visualizer .tools .best_fit").click(function(){var ad=W(z);S(z,ad);return});$(".app-fw-visualizer .tools .save_img").bind("click",function(ag){ag.preventDefault();try{var ad=!!new Blob()}catch(ag){rdx.message_box.error("Please use any modern browser")}$("<style>.node{cursor:pointer}.node circle{fill:#fff;stroke:#4682b4;stroke-width:1.5px}.node text{font-size:10px;font-family:sans-serif}.link{fill:none;stroke:#ccc;stroke-width:1.5px}.templink{fill:none;stroke:red;stroke-width:3px}.ghostCircle.show{display:block}.activeDrag .ghostCircle,.ghostCircle{display:none}.node.selected text{fill:#448BCC;font-weight:700}</style>").prependTo("svg");var af=d3.select("svg").attr("title","Visualiser").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML;af=af.replace(/data-full-key=""/g,"");af=af.replace(/title=""/g,"");af=af.replace(/(data-key)=["]?((?:.(?!["](?:\S+)=|["]))+.)["]?/g,"");af=af.replace(/(data-full-key)=["]?((?:.(?!["](?:\S+)=|["]))+.)["]?/g,"");af=af.replace(/(title)=["]?((?:.(?!["](?:\S+)=|["]))+.)["]?/g,"");var ae=new Blob([af],{type:"image/svg+xml"});saveAs(ae,"learning_visualiser.svg");return});return e};rdx.app_fw_visualizer_view.prototype.formLinearObj=function(g,b,a,d,f){var e=this;this.loop_cntr+=1;$.each(g,function(m,h){var n=0;n=f.push({name:m,children:[],data_key:m,data_lvl_vlu:b+"_"+e.loop_cntr,data_ttl_class:a,data_lvl:b,data_full_key:d+m});if(typeof h==="object"){e.formLinearObj(h,b+1,a+" c_"+b+"_"+e.loop_cntr,d+m,f[n-1].children)}e.loop_cntr=e.loop_cntr+1});b=b-1;return};rdx.app_fw_visualizer_view.prototype.traverse=function(b){var a=this;if(typeof b==="object"){$.each(b,function(e,d){a.traverse(d);if(rdx.utils.get_object_length(b)<=1){if(rdx.utils.get_object_length(b[e])===0){delete b[e]}else{if(rdx.utils.get_object_length(b[e])===1){b[e+a._str_temp]=b[e][a._str_temp];delete b[e][a._str_temp];delete b[e]}}a._str_temp=e+a._str_temp}else{if(rdx.utils.get_object_length(b[e])===0){delete b[e];b[e+a._str_temp]={}}else{if(rdx.utils.get_object_length(b[e])===1){b[e+a._str_temp]=b[e][a._str_temp];delete b[e][a._str_temp];delete b[e]}else{delete b[e];b[e+a._str_temp]=d}}a._str_temp=""}})}return b};rdx.app_fw_visualizer_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.app_fw_visualizer_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.app_fw_visualizer_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.authentication_visualizer_view=function(d,b,a){this._view_definition=b;this._parent=d;this._visualizer_title=null;this._block_count=0;this.refresh_div=null;this._base_view=a;this._block_object={};this._count=0;this._level_tree={};this.to_be_drawn_count=0;this.to_be_drawn=[];this.is_back_button_required=true;this._parent_height=this._view_definition.view_properties.height;this._inner_node={};this._single_inner_block={};this._fail_block_object={};this._fail_block_source_object={};this._last_node_top_offset=0;this._connector_div_arr=[];this._connector_div_primary_arr=[];this._connector_div_secondary_arr=[];this.user_resp=null;this.group_resp=[];this.user_group_model_changed=false;this._session_blocks=[];this._traffic_blocks=[];this._authorization_blocks=[];this._user_group_count=0;this._duplicate_check_array=[]};rdx.authentication_visualizer_view.prototype.make_view=function(){this._parent.addClass("op_wizard_form_panel form_inline smooth_all_corner");this._parent_container=$("<div>").css("height",this._parent_height).addClass("authentication_visualizer_parent_container");if(rdx.utils.is_defined(this._view_definition.view_properties["basic_settings_view_name"])){this._basic_settings_view_container=$("<div>").css("margin-bottom","");var d=rdx.utils.get_view(this._view_definition.view_properties["basic_settings_view_name"]);var b=new rdx.base_view(this._basic_settings_view_container,d);var a=b.get_view_context();a.set_url_params({get_by_name:["name"]},{name:this._view_definition.selected_entity});b.prepare_view();this._parent.append(this._basic_settings_view_container)}this._visualizer_title="Visualizer - "+this._view_definition.selected_entity;if(rdx.utils.is_defined(this._view_definition.view_properties.description)){this.description_div=$("<div>").addClass("visualizer_title").append(this._visualizer_title);this.refresh_div=$("<div />").addClass("visualizer_refresh_div").html('<a href="javascript:void(0);" title="Click here to Refresh"><img src="'+rdx.images.REFRESH_IMG+'" alt="Refresh" /></a>').bind(rdx.events.CLICK,{object:this,view_definition:this._view_definition},function(e){var f=e.data.object;f.refresh_view(e.data.view_definition)});this.user_group_slider_div=$("<div />").addClass("authentication_visualizer_show_aside_div").html('<a href="javascript:void(0);" title="Click here to select the User/Groups"><img src="'+rdx.images.SHOW_ASIDE+'" alt="User/Groups" /></a>').bind(rdx.events.CLICK,{object:this,view_definition:this._view_definition},function(e){var f=e.data.object;f._render_user_group_view()});this.description_div.append(this.user_group_slider_div).append(this.refresh_div)}this._initialize_visualizer_view(false)};rdx.authentication_visualizer_view.prototype._render_user_group_view=function(){var d={type:rdx.view_constants.CONFIGURE_VIEW,resource_name:"authdashboard_user_group_resrc",resource_properties:{aaauser:{label:"User",input_type:rdx.form_constants.LIST,properties:{size:1},resource_name:"aaauser",formatter:{resource_keys:["username"]}},aaagroup:{label:"Group",input_type:rdx.form_constants.BIND_UNBIND_LIST,resource_name:"aaagroup",formatter:{resource_keys:["groupname"],properties:{mandatory:false}}}},view_properties:{title:"Users and Groups",submit_operation:{method:"no_op"},callback_before_operation:new rdx.callback(function(g,f){var e=g[0].get_resource_for_operation();if(rdx.utils.is_not_empty(e.aaauser)){f.user_resp=e.aaauser;f.user_group_model_changed=true}if(rdx.utils.is_defined(e.aaagroup)&&e.aaagroup.length>0){f.group_resp=e.aaagroup;f.user_group_model_changed=true}return},[this])}};var b=function(e){if(e.user_group_model_changed==true){e.refresh_view(e._view_definition)}};var a=rdx.view_utils.show_view_in_slider(d,new rdx.callback(b,[this]))};rdx.authentication_visualizer_view.prototype._initialize_visualizer_view=function(a){this._parent_container.addClass("topology_formation_diagram_parent_container");var b={add_grey_button:true,grey_button_label:"rdx.form_close_button_label",grey_button_click_handler_callback:new rdx.callback(this,this.close_view)};this.close_button_container=$("<div>").addClass("visualizer_title");if(a){this._parent.children()[this._parent.children().length-1].remove()}this._parent.append(this.description_div).append(this._parent_container);this._parent.append(this.close_button_container);new rdx.button_bar(this.close_button_container,new rdx.form_field({properties:b})).render();this.construct_visualizer_elements(this._view_definition)};rdx.authentication_visualizer_view.prototype.construct_visualizer_elements=function(d){this._block_count=0;this._block_object={};this._count=0;this._level_tree={};this.to_be_drawn_count=0;this.to_be_drawn=[];this._connector_div_arr=[];this._connector_div_primary_arr=[];this._connector_div_secondary_arr=[];this._last_block_node_top_offset=0;this._last_node_top_offset=0;for(var b in d.diagram_properties){var a=d.diagram_properties[b];if(rdx.utils.is_defined(this._level_tree[a.level])){this._level_tree[a.level].push(b)}else{this._level_tree[a.level]=[b]}if(rdx.utils.is_not_defined(a.heading)){this._block_count++}}this.make_block(d)};rdx.authentication_visualizer_view.prototype.make_block=function(m){for(var h in m.diagram_properties){var g=m.diagram_properties[h];if(rdx.utils.is_defined(g.resource_name)&&(rdx.utils.is_defined(g.connect&&g.connect!=false))){var b=new rdx.model_executor_service(new rdx.callback(this,this._render_block,[m,g,h,true,false]),new rdx.callback(),true);for(var e=0;e<g.resource_name.length;e++){var f=rdx.utils.get_resource(g.resource_name[e]);if(g.resource_name[e].match(/authorizationpolicy_binding/)){continue}var d=f.primary_keys;var a=rdx.url_utils.construct_url_params(null,rdx.url_utils.FORCE_GET_BY_NAME_TYPE,d,{name:m.selected_entity});if(rdx.utils.is_defined(g.filter)){a.filter=g.filter;if(g.resource_name[e].match(/authenticationldappolicy_binding/)){g.filter["groupextraction"]="false"}a.is_query_param=true}b.add("get",f,null,null,a)}b.execute()}else{this._render_block(null,m,g,h,true,false)}}};rdx.authentication_visualizer_view.prototype._render_block=function(d,B,g,I,f,o){this._last_block_node_top_offset=0;var v=0;var s="";if(g.heading==true){this._render_heading_block(g);this._count--}if(g.connector_div==true||g.connector_div_primary==true||g.connector_div_secondary==true){var D=$("<div />").addClass("authentication_visualizer_connector_div");var v=100;var A=767;var n=20;if(rdx.utils.is_not_empty(g.top_offset)){v=g.top_offset;D.css("top",v)}if(g.direction=="right"){D.css("left",rdx.utils.is_not_empty(g.right_offset)?g.right_offset:A)}if(g.direction=="left"){D.css("left",rdx.utils.is_not_empty(g.left_offset)?g.left_offset:n)}this._parent_container.append(D);this._block_object[I]=D;if(g.connector_div==true){this._connector_div_arr.push(D)}else{if(g.connector_div_primary==true){this._connector_div_primary_arr.push(D)}else{this._connector_div_secondary_arr.push(D)}}}else{if(g.success==true){var D=$("<div />").addClass("authentication_visualizer_block_container").addClass("authentication_visualizer_success_block");var v=100;var A=767;var n=20;if(rdx.utils.is_not_empty(g.top_offset)){v=g.top_offset}if(g.direction=="right"){D.css("left",rdx.utils.is_not_empty(g.right_offset)?g.right_offset:A)}if(g.direction=="left"){D.css("left",rdx.utils.is_not_empty(g.left_offset)?g.left_offset:n)}var E=$("<div></div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");D.css("top",v);E.text(g.title).addClass("authentication_visualizer_text_align");D.append("<div>").append(E);this._parent_container.append(D);this._block_object[I]=D}else{if(d){var b=d.get_collated_response();if(!rdx.utils.is_object(b[0])){this._count++;return}if(g.resource_name.length==1&&g.single_block==false&&rdx.utils.is_not_defined(g.multiple_block)){var D=$("<div />").addClass("authentication_visualizer_block_container");var v=100;var A=rdx.utils.is_not_empty(g.right_offset)?g.right_offset:767;var n=rdx.utils.is_not_empty(g.left_offset)?g.left_offset:20;if(rdx.utils.is_not_empty(g.top_offset)){v=g.top_offset}D.css("top",v);if(g.direction=="right"){D.css("left",A)}if(g.direction=="left"){D.css("left",n)}if(rdx.utils.is_defined(B.view_properties.referrer)&&B.view_properties.referrer=="cs"){D.css("left",552);D.css("top",585)}var E=$("<div />").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");var t=$("<div />");if(g.image_type=="up_down_state"){if(b[0][g.resource_name][0]["curstate"]=="UP"){t.addClass("visualizer_basic_image_node_green")}else{t.addClass("authentication_visualizer_basic_image_node_red")}}else{if(rdx.utils.is_defined(g.image_url)){var M='url("'+g.image_url+'") no-repeat 40% 5px;';t.addClass("visualizer_basic_image_server")}}D.append(t).append(E);if(rdx.utils.is_not_defined(b[0][g.resource_name])){s=g.zero_count_message}else{if(g.key&&rdx.utils.is_array(g.key)){for(var F=0;F<g.key.length;F++){if(rdx.utils.is_not_empty(g.label[F])){s=s+'<br/><span class = "visualizer_basic_node_key">'+g.label[F]+'</span> <span class = "visualizer_basic_node_value">'+b[0][g.resource_name][0][g.key[F]]+"</span>"}else{s=s+b[0][g.resource_name][0][g.key[F]]}}}else{if(g.key){s=b[0][g.resource_name][0][g.key];if(g.label){s=s+" "+g.label}if(rdx.utils.is_defined(g.save_data)&&g.save_data==true){B.saved_data=s}}else{if(g.count){s=b[0][g.resource_name].length+" "+g.label}}}}if(g.display_data){if(g.display_data["data_renderer_callback"]){var N=b[0][g.resource_name][0];var e=g.display_data["data_renderer_callback"].call_back([N])}s=s+"<br/><span>"+e+"<span/>"}E.html(s);if(rdx.utils.is_defined(g.click_view_name)){this.add_click_view_map(D,E,B,I,g.click_view_name[0])}this._block_object[I]=D;if(rdx.utils.is_defined(g.fail_block)){this._fail_block_source_object[g.fail_block_id]=D}this._parent_container.append(D)}else{if(g.resource_name.length==1&&g.single_block==false&&rdx.utils.is_defined(g.multiple_block)){var v=rdx.utils.is_not_empty(g.top_offset)?g.top_offset:100;var A=rdx.utils.is_not_empty(g.right_offset)?g.right_offset:767;var n=rdx.utils.is_not_empty(g.left_offset)?g.left_offset:127;var p=0;var J=[];var u=false;if(rdx.utils.is_defined(g.single_inner_block)&&g.single_inner_block==true){if(!(g[I] in this._single_inner_block)){this._single_inner_block[I]={}}u=true;var q=this._render_heading_block(g,true)}if(rdx.utils.is_defined(b[0][g.resource_name[0]])){for(var F=0;F<b[0][g.resource_name[0]].length;F++){var D=$("<div />").addClass("authentication_visualizer_block_container");if(g.direction=="right"){D.css("left",A)}if(g.direction=="left"){D.css("left",n)}var E=$("<div></div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");var m={};var K=b[0][g.resource_name[0]][F]["policy"];E.text(K).addClass("authentication_visualizer_text_align");if(p!=0){v=v+70}if(v>this._last_block_node_top_offset){this._last_block_node_top_offset=v}if(rdx.utils.is_defined(g.set_block_node_top_offset)&&g.set_block_node_top_offset==true){this._last_block_node_top_offset=this._last_block_node_top_offset+60;D.css("top",this._last_block_node_top_offset)}else{D.css("top",v)}D.append("<div>").append(E);J.push(D);if(p==0){this._block_object[I]=D}if(u===false){this._parent_container.append(D)}p++}if(!(I in this._inner_node)){this._inner_node[I]={}}var w=J.slice(0);if(rdx.utils.is_defined(g.policy_binding_view)){var a=this._render_add_policy_binding_div(B,g,true,v>this._last_block_node_top_offset?v:this._last_block_node_top_offset);w.push(a);J.push(a)}this._inner_node[I]=J;if(rdx.utils.is_defined(q)){w.unshift(q)}this._single_inner_block[I]=w}if(rdx.utils.is_not_defined(K)){var D=$("<div>").addClass("authentication_visualizer_block_container");v=100;if(g.direction=="right"){D.css("left",A)}if(g.direction=="left"){D.css("left",n)}if(v>this._last_block_node_top_offset){this._last_block_node_top_offset=v}if(rdx.utils.is_defined(g.set_block_node_top_offset)&&g.set_block_node_top_offset==true){D.css("top",this._last_block_node_top_offset)}else{D.css("top",v)}var E=$("<div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");var K=g.zero_count_message;E.text(K);D.append($("<div>")).append(E);this._block_object[I]=D;if(u===false){this._parent_container.append(D)}else{var w=[];w.push(q);w.push(D);J.push(D);if(rdx.utils.is_defined(g.policy_binding_view)){var a=this._render_add_policy_binding_div(B,g,true,v>this._last_block_node_top_offset?v:this._last_block_node_top_offset);w.push(a);J.push(a)}this._single_inner_block[I]=w;this._inner_node[I]=J}}if(rdx.utils.is_defined(g.fail_block)){this._fail_block_source_object[g.fail_block_id]=D}}else{if(g.resource_name.length>1&&g.single_block==false){var v=rdx.utils.is_not_empty(g.top_offset)?g.top_offset:100;var A=rdx.utils.is_not_empty(g.right_offset)?g.right_offset:767;var n=rdx.utils.is_not_empty(g.left_offset)?g.left_offset:127;var p=0;var J=[];var w=[];var u=false;this._last_block_node_top_offset=0;if(rdx.utils.is_defined(g.single_inner_block)&&g.single_inner_block==true){if(!(g[I] in this._single_inner_block)){this._single_inner_block[I]={}}u=true}if(!(I in this._inner_node)){this._inner_node[I]={}}for(var G=0;G<g.resource_name.length;G++){if(u===true){K=null;var q=this._render_heading_block(g,true,G);w.push(q);if(g.push_title_to_connector_div===true){this._connector_div_arr.push(q)}}if(g.resource_name[G].match(/authorizationpolicy_binding/)){b.unshift({})}if(rdx.utils.is_defined(b[G][g.resource_name[G]])){for(var F=0;F<b[G][g.resource_name[G]].length;F++){var D=$("<div />").addClass("authentication_visualizer_block_container");if(g.direction=="right"){D.css("left",A)}if(g.direction=="left"){D.css("left",n)}var E=$("<div></div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");var m={};var K=b[G][g.resource_name[G]][F]["policy"];if(g.resource_name[G].match(/session|traffic/)){this._duplicate_check_array.push(K)}E.text(K).addClass("authentication_visualizer_text_align");if(p!=0){v=v+70}if(rdx.utils.is_defined(g.set_block_node_top_offset)&&g.set_block_node_top_offset==true){if(v>this._last_block_node_top_offset){this._last_block_node_top_offset=v}this._last_block_node_top_offset=this._last_block_node_top_offset+60;D.css("top",this._last_block_node_top_offset)}else{D.css("top",v)}if(v>this._last_node_top_offset){this._last_node_top_offset=v}D.append("<div>").append(E);J.push(D);w.push(D);if(p==0){this._block_object[I]=D}if(g.push_to_connector_primary_div==true){this._connector_div_primary_arr.push(D)}else{if(g.push_to_connector_secondary_div==true){this._connector_div_secondary_arr.push(D)}}if(u===false){this._parent_container.append(D)}p++}}if(this.user_group_model_changed===true&&(g.resource_name[G]).match(/sessionpolicy|trafficpolicy|authorizationpolicy/g)){this._user_group_block_creation(g.resource_name[G],J,w,n)}if(rdx.utils.is_not_defined(K)&&u===true){var D=this._render_zero_count_message_block(g,u,q,n,A,I,G);w.push(D);J.push(D)}this._inner_node[I]=J;if(rdx.utils.is_defined(g.policy_binding_view)&&u===true){var a=this._render_add_policy_binding_div(B,g,true,v>this._last_block_node_top_offset?v:this._last_block_node_top_offset,G);w.push(a);J.push(a)}this._single_inner_block[I]=w}if(rdx.utils.is_not_defined(K)&&u===false){var D=this._render_zero_count_message_block(g,u,q,n,A,I)}if(rdx.utils.is_defined(g.fail_block)){this._fail_block_source_object[g.fail_block_id]=D}if(g.push_to_connector_primary_div==true){this._connect_connector_div_primary_to_inner_blocks(B)}else{if(g.push_to_connector_secondary_div==true){this._connect_connector_div_secondary_to_inner_blocks(B)}}}else{if(g.direction=="left"){var L="REQUEST";var D=$("<div />").addClass("visualizer_block_container_left");if(rdx.utils.is_defined(B.view_properties.referrer)&&B.view_properties.referrer=="cs"){D.css("top",325);D.css("left",315)}}else{if(g.direction=="right"){var L="RESPONSE";var D=$("<div />").addClass("visualizer_block_container_right");if(rdx.utils.is_defined(B.view_properties.referrer)&&B.view_properties.referrer=="cs"){D.css("top",325);D.css("left",780)}}else{var D=$("<div />").addClass("authentication_visualizer_block_container")}}if(rdx.utils.is_not_defined(B.view_properties.referrer)){v=((this._parent_container.height())/(this._block_count-1))*(g.level-1);D.css("top",v-75)}for(var H=0;H<b.length;H++){var h=0;for(var G=0;G<g.resource_name.length;G++){if(rdx.utils.is_defined(b[H][g.resource_name[G]])){for(var F=0;F<b[H][g.resource_name[G]].length;F++){if(rdx.utils.is_empty(b[H][g.resource_name[G]][F]["bindpoint"])||rdx.utils.is_not_defined(b[H][g.resource_name[G]][F]["bindpoint"])||b[H][g.resource_name[G]][F]["bindpoint"]==L){h++}}if(h>0){var E=$("<div></div>").addClass("authentication_visualizer_singleblock");var C=$("<span />").addClass("node_child_number").text(h);var z=$("<span />").addClass("node_child_arrow");if(g.click_view_name){this.add_click_view_map(D,E,B,I,g.click_view_name[H])}var K=g.label[G];E.text(K).prepend(C).append(z);D.append(E)}}}}if(rdx.utils.is_not_defined(K)){var E=$("<div></div>").addClass("authentication_zero_count_message");var K=g.zero_count_message;E.text(K);D.append(E);E.addClass("authentication_visualizer_singleblock")}this._parent_container.append(D);this._block_object[I]=D}}}}}}this._count++;this.render_visualizer(B)};rdx.authentication_visualizer_view.prototype._user_group_block_creation=function(a,f,n,h){var m=a.replace(/vpnvserver|authenticationvserver/,"aaauser");var d=a.replace(/vpnvserver|authenticationvserver/,"aaagroup");var b=new rdx.model_executor_service(new rdx.callback(this._user_group_session_block_creation_success_callback,[a,m,d,f,n,this,h]));if(rdx.utils.is_defined(this.user_resp)){var e=new rdx.context();e.set_context_data({name:this.user_resp},{force_get_by_name:{name:this.user_resp}});b.add("get",rdx.utils.get_resource(m),null,null,e.get_url_params())}for(var g=0;g<this.group_resp.length;g++){var e=new rdx.context();e.set_context_data({name:this.group_resp[g]},{force_get_by_name:{name:this.group_resp[g]}});b.add("get",rdx.utils.get_resource(d),null,null,e.get_url_params())}b.execute()};rdx.authentication_visualizer_view.prototype._user_group_session_block_creation_success_callback=function(b,a,o,d,e,p,g,n){var q=b.get_collated_response();var f=new Array();for(var m=0;m<q.length;m++){if(rdx.utils.is_defined(q[m][o])){for(var h=0;h<q[m][o].length;h++){if($.inArray(q[m][o][h]["policy"],g._duplicate_check_array)==-1){g._create_individual_blocks(a,e,p,q[m][o][h]["policy"],g,n)}}}if(rdx.utils.is_defined(q[m][d])){for(var h=0;h<q[m][d].length;h++){if($.inArray(q[m][d][h]["policy"],g._duplicate_check_array)==-1){g._create_individual_blocks(a,e,p,q[m][d][h]["policy"],g,n)}}}}};rdx.authentication_visualizer_view.prototype._create_individual_blocks=function(m,g,e,h,d,a){var f=$("<div />").addClass("authentication_visualizer_block_container");f.css("left",a);var b=$("<div></div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");b.text(h).addClass("authentication_visualizer_text_align");d._last_block_node_top_offset=d._last_block_node_top_offset+60;f.css("top",d._last_block_node_top_offset);f.append("<div>").append(b);if(m.match(/sessionpolicy/)){d._session_blocks.push(f)}else{if(m.match(/trafficpolicy/)){d._traffic_blocks.push(f)}else{d._authorization_blocks.push(f)}}};rdx.authentication_visualizer_view.prototype._render_zero_count_message_block=function(n,g,a,m,p,d,h){var e=$("<div>").addClass("authentication_visualizer_block_container authentication_zero_count_message");top_offset=100;if(n.direction=="right"){e.css("left",p)}if(n.direction=="left"){e.css("left",m)}if(top_offset>this._last_block_node_top_offset){this._last_block_node_top_offset=top_offset}if(this._last_block_node_top_offset>this._last_node_top_offset){this._last_node_top_offset=this._last_block_node_top_offset}if(rdx.utils.is_defined(n.set_block_node_top_offset)&&n.set_block_node_top_offset==true&&h!=0){this._last_block_node_top_offset=this._last_block_node_top_offset+60;e.css("top",this._last_block_node_top_offset)}else{e.css("top",top_offset)}var f=$("<div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");var b=n.zero_count_message;f.text(b);e.append($("<div>")).append(f);this._block_object[d]=e;if(g===false){this._parent_container.append(e)}else{var o=[];o.push(a);o.push(e);this._single_inner_block[d]=o}return e};rdx.authentication_visualizer_view.prototype._render_single_inner_blocks=function(h){var a=40;var e=0;for(var g in this._single_inner_block){var f=h.diagram_properties[g];if(this._single_inner_block[g].length>0){for(var d=0;d<this._single_inner_block[g].length;d++){if(d!=0&&f.set_block_node_top_offset){a=a+60;if(a>this._last_block_node_top_offset){this._last_block_node_top_offset=a}this._single_inner_block[g][d].css("top",a)}if((this._single_inner_block[g][d]).hasClass("authentication_zero_count_message")){if(e==0&&this._authorization_blocks.length>0){a=a-60;continue}if(e==1&&this._session_blocks.length>0){a=a-60;continue}if(e==2&&this._traffic_blocks.length>0){a=a-60;continue}}if((this._single_inner_block[g][d]).hasClass("authentication_visualizer_add_policy_binding")&&f.set_block_node_top_offset){if(e==0){e++;for(var b=0;b<this._authorization_blocks.length;b++){this._authorization_blocks[b].css("top",a);a=a+60;if(a>this._last_block_node_top_offset){this._last_block_node_top_offset=a}this._parent_container.append(this._authorization_blocks[b]);this._single_inner_block[g][d].css("top",this._last_block_node_top_offset)}continue}if(e==1){for(var b=0;b<this._session_blocks.length;b++){this._session_blocks[b].css("top",a);a=a+60;if(a>this._last_block_node_top_offset){this._last_block_node_top_offset=a}this._parent_container.append(this._session_blocks[b]);this._single_inner_block[g][d].css("top",this._last_block_node_top_offset)}}if(e==2){for(var b=0;b<this._traffic_blocks.length;b++){this._traffic_blocks[b].css("top",a);a=a+60;if(a>this._last_block_node_top_offset){this._last_block_node_top_offset=a}this._parent_container.append(this._traffic_blocks[b]);this._single_inner_block[g][d].css("top",this._last_block_node_top_offset)}}e++}this._parent_container.append(this._single_inner_block[g][d])}}}this._parent_container.css("height",this._last_block_node_top_offset>this._last_node_top_offset?this._last_block_node_top_offset+200:this._last_node_top_offset+200);this._connect_inner_blocks(h);this._connect_connector_div_to_inner_blocks(h)};rdx.authentication_visualizer_view.prototype._render_fail_block=function(f){for(var e in this._block_object){var d=f.diagram_properties[e];if(rdx.utils.is_defined(d.fail_block)){var b=$("<div>").addClass("authentication_visualizer_block_container").addClass("authentication_visualizer_fail_block");b.css("top",this._last_node_top_offset+100);if(d.direction=="right"){b.css("left",d.right_offset)}if(d.direction=="left"){b.css("left",d.left_offset)}var a=$("<div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");a.text("Fail");b.append($("<div>")).append(a);this._fail_block_object[d.fail_block_id]=b;this._parent_container.append(b);if(rdx.utils.is_defined(d.policy_binding_view)){this._render_add_policy_binding_div(f,d)}}}};rdx.authentication_visualizer_view.prototype._render_add_policy_binding_div=function(g,e,b,a,d){var h=$("<div>").addClass("authentication_visualizer_add_policy_binding");if(e.direction=="right"){h.css("left",e.right_offset)}if(e.direction=="left"){h.css("left",e.left_offset)}h.bind(rdx.events.CLICK,{object:this,view_definition:g,view_property:e,arr_pos:d},function(n){var w=n.data.view_definition;var s=n.data.object;var m=n.data.view_property.resource_name;var A=false;var v=false;var t=n.data.view_property.policy_binding_view;var q;if(rdx.utils.is_array(n.data.view_property.policy_binding_view)&&rdx.utils.is_defined(n.data.arr_pos)){t=n.data.view_property.policy_binding_view[n.data.arr_pos]}for(var u=0;u<m.length;u++){rdx.model.add_model_change_listener(rdx.utils.get_resource(m[u]),new rdx.callback(function(){A=true;if(v==true){s.refresh_view(w);v=false;A=false}}))}var o=rdx.utils.get_view(t);var p=function(B){if(A==false){v=true}else{var C=B.data.object;C.refresh_view(B.data.view_definition);v=false;A=false}};var z=rdx.view_utils.show_view_in_slider(o,new rdx.callback(p,[n]),{name:w.selected_entity})});var f=this._last_node_top_offset+60;h.css("top",f);if(rdx.utils.is_defined(a)){this._last_block_node_top_offset=a+70;h.css("top",this._last_block_node_top_offset)}if(rdx.utils.is_not_defined(b)){this._parent_container.append(h)}else{return h}};rdx.authentication_visualizer_view.prototype._render_heading_block=function(g,f,m){var e=$("<div />").addClass("authentication_visualizer_block_container authentication_visualizer_heading_block authentication_visualizer_text_align");var b=40;var h=100;var a=100;if(g.direction=="right"){e.css("left",rdx.utils.is_not_empty(g.right_offset)?g.right_offset:h)}if(g.direction=="left"){e.css("left",rdx.utils.is_not_empty(g.left_offset)?g.left_offset:a)}var d=$("<div></div>").addClass("authentication_visualizer_basic_node").addClass("authentication_visualizer_text_overflow");if(b>this._last_block_node_top_offset){this._last_block_node_top_offset=b}if(rdx.utils.is_defined(g.set_block_node_top_offset)&&g.set_block_node_top_offset==true){if(rdx.utils.is_defined(m)&&m!=0){this._last_block_node_top_offset=this._last_block_node_top_offset+60}e.css("top",this._last_block_node_top_offset)}else{e.css("top",b)}if(rdx.utils.is_defined(m)&&rdx.utils.is_array(g.title)){d.text(g.title[m])}else{d.text(g.title)}e.append("<div>").append(d);if(f===true){return e}else{this._parent_container.append(e)}};rdx.authentication_visualizer_view.prototype.render_visualizer=function(a){if(this._count==this._block_count){this.rearrange_elements(a);this.connect_block_elements(a);this._block_object={};this._block_count=0;this._count=0;this._level_tree={}}};rdx.authentication_visualizer_view.prototype.rearrange_elements=function(f){for(var b=1;b<=5;b++){var a=this._level_tree[b];if(rdx.utils.is_not_defined(a)){continue}if(rdx.utils.is_not_defined(this._block_object[a[0]])){continue}var g=this._block_object[a[0]].position().top;var e=this.find_largest_element(a);var d=this._level_tree[b+1];if(d){this._set_top_offset(d,e.position,g)}}this._render_fail_block(f);this._render_single_inner_blocks(f);return};rdx.authentication_visualizer_view.prototype.find_largest_element=function(a){var d=[];var g=0;var b=null;for(var f=0;f<a.length;f++){if(rdx.utils.is_not_defined(this._block_object[a[f]])){continue}var e=this._block_object[a[f]].height();var h=$(this._block_object[a[f]]).position().top;if(g<(e+h)){g=e+h;b=this._block_object[a[f]]}}return{element:b,position:g}};rdx.authentication_visualizer_view.prototype._set_top_offset=function(b,a,f){for(var e=0;e<b.length;e++){var d=this._block_object[b[e]];if(rdx.utils.is_defined(d)){var g=d.position()["top"];d.css("top",a+75)}}return};rdx.authentication_visualizer_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.authentication_visualizer_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.authentication_visualizer_view.prototype.add_click_view_map=function(a,e,d,f,b){e.attr("tabindex",0);e.bind(rdx.events.CLICK+" "+rdx.events.KEYUP,{view_defn:d,container:a,node:e,block_id:f,object:this,click_view_name:b},function(n){if(rdx.utils.is_defined(n.keyCode)&&n.keyCode!==13){return}var m=rdx.utils.get_view(n.data.click_view_name);var h=n.data.view_defn;var g=rdx.view_utils.show_view_in_slider(m,null,{name:h.selected_entity})})};rdx.authentication_visualizer_view.prototype.close_view=function(){this._base_view.destroy_view()};rdx.authentication_visualizer_view.prototype._connect_inner_blocks=function(f){for(var e in this._inner_node){var d=f.diagram_properties[e];if(this._inner_node[e].length>0){for(var b=0;b<this._inner_node[e].length-1;b++){if((this._inner_node[e][b]).hasClass("authentication_visualizer_add_policy_binding")){continue}if(this._inner_node[e][b+1].hasClass("authentication_visualizer_add_policy_binding")&&d.set_block_node_top_offset){if(this._user_group_count==0){if(this._authorization_blocks.length>0){if(!(this._inner_node[e][b]).hasClass("authentication_zero_count_message")){this._connect_block_elements(this._inner_node[e][b],this._authorization_blocks[0],{multiple_block:true},f,true)}for(var a=0;a<this._authorization_blocks.length-1;a++){this._connect_block_elements(this._authorization_blocks[a],this._authorization_blocks[a+1],{multiple_block:true},f,true)}}this._user_group_count++;continue}if(this._user_group_count==1){if(this._session_blocks.length>0){if(!(this._inner_node[e][b]).hasClass("authentication_zero_count_message")){this._connect_block_elements(this._inner_node[e][b],this._session_blocks[0],{multiple_block:true},f,true)}for(var a=0;a<this._session_blocks.length-1;a++){this._connect_block_elements(this._session_blocks[a],this._session_blocks[a+1],{multiple_block:true},f,true)}this._connect_block_elements(this._session_blocks[a],this._inner_node[e][b+1],{multiple_block:true},f,true);this._user_group_count++;continue}}if(this._user_group_count==2){if(this._traffic_blocks.length>0){if(!(this._inner_node[e][b]).hasClass("authentication_zero_count_message")){this._connect_block_elements(this._inner_node[e][b],this._traffic_blocks[0],{multiple_block:true},f,true)}for(var a=0;a<this._traffic_blocks.length-1;a++){this._connect_block_elements(this._traffic_blocks[a],this._traffic_blocks[a+1],{multiple_block:true},f,true)}this._connect_block_elements(this._traffic_blocks[a],this._inner_node[e][b+1],{multiple_block:true},f,true);this._user_group_count++;continue}}}if((this._inner_node[e][b]).hasClass("authentication_zero_count_message")&&d.set_block_node_top_offset){if(this._user_group_count==0&&this._authorization_blocks.length>0){continue}if(this._user_group_count==1&&this._session_blocks.length>0){continue}if(this._user_group_count==2&&this._traffic_blocks.length>0){continue}}this._connect_block_elements(this._inner_node[e][b],this._inner_node[e][b+1],{multiple_block:true},f,true)}}}this.user_resp=null;this.group_resp=[];this._session_blocks=[];this._traffic_blocks=[];this._authorization_blocks=[];this.user_group_model_changed=false;this._duplicate_check_array=[];this._user_group_count=0};rdx.authentication_visualizer_view.prototype.connect_block_elements=function(d){for(var b in this._block_object){var a=d.diagram_properties[b];if(rdx.utils.is_defined(a.child)&&rdx.utils.is_defined(this._block_object[a.child])){this._connect_block_elements(b,a.child,a,d,a.multiple_block)}continue}for(var b in this._fail_block_source_object){this._connect_block_elements(this._fail_block_source_object[b],this._fail_block_object[b],{multiple_block:true},d,true)}};rdx.authentication_visualizer_view.prototype._connect_connector_div_to_inner_blocks=function(b){for(var a=1;a<this._connector_div_arr.length;a++){this._connect_block_elements(this._connector_div_arr[0],this._connector_div_arr[a],{stub:true})}};rdx.authentication_visualizer_view.prototype._connect_connector_div_primary_to_inner_blocks=function(b){if(this._connector_div_primary_arr.length>2){for(var a=2;a<this._connector_div_primary_arr.length;a++){this._connect_block_elements(this._connector_div_primary_arr[0],this._connector_div_primary_arr[a],{primary_stub:true,connect_without_arrow:true})}}};rdx.authentication_visualizer_view.prototype._connect_connector_div_secondary_to_inner_blocks=function(b){if(this._connector_div_secondary_arr.length>2){for(var a=2;a<this._connector_div_secondary_arr.length;a++){this._connect_block_elements(this._connector_div_secondary_arr[0],this._connector_div_secondary_arr[a],{secondary_stub:true,connect_without_arrow:true})}}};rdx.authentication_visualizer_view.prototype._connect_block_elements=function(z,G,e,t,q,d){var w={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top","Bottom"],connector:["Straight"]};var o={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:2,lineWidth:2},isSource:true,isTarget:true,anchor:["BottomCenter","TopCenter"],connector:["Straight"]};var h={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:2,lineWidth:2},isSource:true,isTarget:true,anchor:["RightMiddle","LeftMiddle"],connector:["Straight"]};var D={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:2,lineWidth:2},isSource:true,isTarget:true,anchor:["Right","Left"],connector:["Straight"]};var m={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[226,0]}]};var E={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[231,0]}]};var f={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[0,226]}]};var F={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[0,231]}]};var u={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[214,0]}]};var n={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Bottom"],connector:["Straight",{stub:[234,0]}]};var p={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[0,214],cornerRadius:10}]};var C={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:4,lineWidth:4},isSource:true,isTarget:true,filter:".ep",anchor:["Top"],connector:["Straight",{stub:[0,234],cornerRadius:1}]};if(rdx.utils.is_array(G)){for(var B=0;B<G.length;B++){this._connect_block_elements(z,G[B])}}else{this._jsPlumb=jsPlumb.getInstance({ConnectionOverlays:[["Arrow",{location:1,id:"arrow",length:8,width:6,height:1,foldback:0.7}]]});if((rdx.utils.is_defined(e.connect_without_arrow)&&e.connect_without_arrow==true)){this._jsPlumb=jsPlumb.getInstance()}var s={};if(rdx.utils.is_defined(e.connect_bottom)){s=u;if(((this._block_object.node_5.height()+this._block_object.node_5.offset().top)-(this._block_object.node_7.height()+this._block_object.node_7.offset().top))>200){s.connector[1].stub=[0,((this._block_object.node_5.height()+this._block_object.node_5.offset().top)-(this._block_object.node_7.height()+this._block_object.node_7.offset().top))]}if(rdx.utils.is_defined(t.view_properties.referrer)){s=n}}else{if(rdx.utils.is_defined(d)&&d===true){s=D}else{if((rdx.utils.is_defined(q)&&q===true)||(rdx.utils.is_defined(e.multiple_block)&&e.multiple_block===true)){s=o}else{if((rdx.utils.is_defined(e.direction)&&e.direction=="right")){if(rdx.utils.is_defined(t.view_properties.referrer)){s=C}else{if(rdx.utils.is_defined(e.connect_right_top)&&e.connect_right_top==true){s=w}else{s=p}}if(this._block_object.node_4.height()>265){s.connector[1].stub=[this._block_object.node_7.offset().top-this._block_object.node_3.offset().top,0]}}else{if((rdx.utils.is_defined(e.direction)&&e.direction=="left")){s=h;if(rdx.utils.is_defined(t.view_properties.referrer)){s=F}}else{if(rdx.utils.is_defined(e.stub)&&e.stub==true){var v=z.position().top;var b=G.position().top;var a=z.height();var A=G.height();var g=v>b?v-b-A/2-7:b-v+A/2+7;s={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:2,lineWidth:2},isSource:true,isTarget:true,anchor:["LeftMiddle"],connector:["Straight",{stub:[g,0]}]}}else{if((rdx.utils.is_defined(e.primary_stub)&&e.primary_stub==true)||(rdx.utils.is_defined(e.secondary_stub)&&e.secondary_stub==true)){var v=z.position().top;var b=G.position().top;var a=z.height();var A=G.height();var g=b-v+A/2+8;s={endpoint:["Dot",{radius:0.1}],paintStyle:{strokeStyle:"#cccccd",fillStyle:"transparent",radius:2,lineWidth:2},isSource:true,isTarget:true,anchor:["RightMiddle"],connector:["Straight",{stub:[g,0]}]}}else{s=h}}}}}}}if(rdx.utils.is_defined(e.connect_bottom)){this._jsPlumb.connect({source:this._block_object[z],target:this._block_object[G]},s)}else{if(rdx.utils.is_defined(e.connect_top)){this._jsPlumb.connect({source:this._block_object[z],target:this._block_object[G]},s)}else{if(rdx.utils.is_defined(e.multiple_block)&&e.multiple_block===true){if(typeof z==="string"){z=this._block_object[z];s=h}if(typeof G==="string"){G=this._block_object[G];s=h}this._jsPlumb.connect({source:z,target:G},s)}else{if(rdx.utils.is_defined(e.direction)&&e.direction=="left"){this._jsPlumb.connect({source:this._block_object[z],target:this._block_object[G]},s)}else{if((rdx.utils.is_defined(e.stub)&&e.stub===true)||(rdx.utils.is_defined(e.primary_stub)&&e.primary_stub==true)||(rdx.utils.is_defined(e.secondary_stub)&&e.secondary_stub==true)){this._jsPlumb.connect({source:z,target:G},s)}else{this._jsPlumb.connect({source:this._block_object[z],target:this._block_object[G]},s)}}}}}}};rdx.authentication_visualizer_view.prototype.refresh_view=function(a){$(".topology_formation_diagram_parent_container").empty();this.construct_visualizer_elements(a)};rdx.entity_visualizer_view=function(d,b,e,a){this._parent=d;this._base_view=a;this._view_definition=b;this._resource=e;this._jsPlumb=jsPlumb.getInstance();this._draw_flowchart_line=jsPlumb.getInstance();var f={header_renderer_callback:null,left_entity_renderer_callback:null,left_visualizer_renderer_callback:null,right_entity_renderer_callback:null,right_visualizer_renderer_callback:null,draw_left_connectors_handler_callback_per_one_entity:null,left_data_handler_callback_per_one_entity:null,draw_right_connectors_handler_callback_per_one_entity:null,right_data_handler_callback_per_one_entity:null,left_cell_click_handler_callback:null,right_cell_click_handler_callback:null,left_button_bar_click_handler_callback:null,right_button_bar_click_handler_callback:null,no_results_msg:"rdx.no_records_found",dont_show_empty_visualizer:false,search_filter:true};this._view_properties=$.extend({},f,this._view_definition.view_properties);this._left_visualizer_entities=[];this._right_visualizer_entities=[];this._is_left_response_empty=false;this._is_right_response_empty=false};rdx.entity_visualizer_view.prototype.make_view=function(){this._container=$("<div>").addClass("entity_visualizer");this._parent.append(this._container);if(!this._header_pane){this._render_header()}if(this._view_properties.left_visualizer){this._create_left_pane_dom();rdx.mask.mask_component(this._left_visualizer_container,"__left_entity_visualizer")}if(this._view_properties.right_visualizer){this._render_right_pane();rdx.mask.mask_component(this._right_visualizer_container,"__right_entity_visualizer")}this._render_connectors()};rdx.entity_visualizer_view.prototype.get_resource_response_arrived=function(a){this._create_visualizer()};rdx.entity_visualizer_view.prototype._create_visualizer=function(){var a={status:"all"};this._set_filter_val(a);this._render_visualizers(a)};rdx.entity_visualizer_view.prototype._render_header=function(){if(rdx.utils.is_defined(this._view_properties.header_renderer_callback)){this._view_properties.header_renderer_callback.call_back()}else{if(rdx.utils.is_not_defined(this._view_properties.header)){return}this._header_pane=$("<div>").addClass("header_pane").appendTo(this._container);this._left_container=$("<div>").addClass("left_container");this._right_container=$("<div>").addClass("right_container");var m=$("<div>").addClass("left_entity");var d=$("<h3>").addClass("left_position");var w="";if(rdx.utils.is_defined(this._view_properties.header.left_entity)&&rdx.utils.is_defined(this._view_properties.header.left_entity.title)){w=this._view_properties.header.left_entity.title}var f=$("<span>").append(w);if(rdx.utils.is_defined(this._view_properties.header.left_entity)&&rdx.utils.is_defined(this._view_properties.header.left_entity.image_class_name)){f.addClass(this._view_properties.header.left_entity.image_class_name)}this._left_separator=$("<span>").addClass("left_separator");this._left_count=$("<span>").addClass("left_count");d.append(f);d.append(this._left_separator);d.append(this._left_count);this._left_entity_buttons_bar=$("<div>").addClass("right_position");if(rdx.utils.is_defined(this._view_properties.header.left_entity)&&rdx.utils.is_defined(this._view_properties.header.left_entity.buttons_bar)){for(var z=0;z<this._view_properties.header.left_entity.buttons_bar.length;z++){var a=this._view_properties.header.left_entity.buttons_bar[z];var s="";if(rdx.utils.is_defined(a.name)){s=a.name}var v=$("<div>").addClass("vis_button_ct").appendTo(this._left_entity_buttons_bar);var e=$("<input />").addClass("rdx_button rdx_blue_button").attr({type:"button",value:s});if(rdx.utils.is_defined(a.disabled_on_render)){e.addClass("rdx_button_disabled");e.attr("disabled","disabled")}if(rdx.utils.is_defined(a.image_class_name)){e.addClass(a.image_class_name)}v.append(e)}}m.append(d);m.append(this._left_entity_buttons_bar);var u="";var D="";if(rdx.utils.is_defined(this._view_properties.header.left_entity)&&rdx.utils.is_defined(this._view_properties.header.left_entity.description)){u=this._view_properties.header.left_entity.description}if(rdx.utils.is_not_empty(u)){D=$("<div>").addClass("left_description").text(u)}else{D=$("<span>").addClass("left_description empty")}if(rdx.utils.is_defined(this._view_properties.header.left_entity)&&rdx.utils.is_defined(this._view_properties.header.left_entity.buttons_bar)){var a=this._view_properties.header.left_entity.buttons_bar[0];if(Object.keys(a.values).length>0){var A=$("<div>").addClass("ribbon_label_div ribbon_list_wrapper");var a=this._view_properties.header.left_entity.buttons_bar[0];var b=$("<select>").addClass("list").attr("size","1");for(var F in a.values){var C=a.values[F];var h=$("<option>").attr("value",F).text(C);h.appendTo(b)}b.appendTo(A);if(rdx.utils.is_defined(a.callback)){var n=$(b).val();$(b).bind(rdx.events.CHANGE,{parent:this._left_entity_buttons_bar,callback:a.callback},function(G){G.data.callback.call_back([G,$(b).val()])})}D.removeClass("empty").css({display:"block"});A.appendTo(D)}}var t=$("<div>").addClass("right_entity");var o=$("<h3>").addClass("left_position");var B="";if(rdx.utils.is_defined(this._view_properties.header.right_entity)&&rdx.utils.is_defined(this._view_properties.header.right_entity.title)){B=this._view_properties.header.right_entity.title}var E=$("<span>").append(B);if(rdx.utils.is_defined(this._view_properties.header.right_entity)&&rdx.utils.is_defined(this._view_properties.header.right_entity.image_class_name)){E.addClass(this._view_properties.header.right_entity.image_class_name)}this._right_separator=$("<span>").addClass("right_separator");this._right_count=$("<span>").addClass("right_count");o.append(E);o.append(this._right_separator);o.append(this._right_count);this._right_entity_buttons_bar=$("<div>").addClass("right_position");if(rdx.utils.is_defined(this._view_properties.header.right_entity)&&rdx.utils.is_defined(this._view_properties.header.right_entity.buttons_bar)){var p=$("<div>").addClass("vis_button_ct").appendTo(this._right_entity_buttons_bar);for(var z=0;z<this._view_properties.header.right_entity.buttons_bar.length;z++){var a=this._view_properties.header.right_entity.buttons_bar[z];var s="";if(rdx.utils.is_defined(a.name)){s=a.name}var e=$("<input />").addClass("rdx_button rdx_blue_button").attr({type:"button",value:s});if(rdx.utils.is_defined(a.image_class_name)){e.addClass(a.image_class_name)}p.append(e)}}t.append(o);t.append(this._right_entity_buttons_bar);var u="";var g;if(rdx.utils.is_defined(this._view_properties.header.right_entity)&&rdx.utils.is_defined(this._view_properties.header.right_entity.description)){u=this._view_properties.header.right_entity.description}if(rdx.utils.is_not_empty(u)){g=$("<div>").addClass("right_description").append(u)}var q="50%";if((this._view_properties.header.left_entity&&!this._view_properties.header.right_entity)||(!this._view_properties.header.left_entity&&this._view_properties.header.right_entity)){q="100%"}if(this._view_properties.header.left_entity){this._left_container.append(m);if(!D.hasClass("empty")){this._left_container.append(D)}this._left_container.width(q)}if(this._view_properties.header.right_entity){this._right_container.append(t);if(rdx.utils.is_defined(g)){this._right_container.append(g)}this._right_container.width(q)}this._header_pane.append(this._left_container).append(this._right_container);if(rdx.utils.is_defined(this._view_properties.header.left_entity)&&rdx.utils.is_defined(this._view_properties.header.left_entity.left_button_bar_click_handler_callback)){this._view_properties.left_button_bar_click_handler_callback=this._view_properties.header.left_entity.left_button_bar_click_handler_callback}if(rdx.utils.is_defined(this._view_properties.header.right_entity)&&rdx.utils.is_defined(this._view_properties.header.right_entity.right_button_bar_click_handler_callback)){this._view_properties.right_button_bar_click_handler_callback=this._view_properties.header.right_entity.right_button_bar_click_handler_callback}}};rdx.entity_visualizer_view.prototype._create_left_pane_dom=function(){if(rdx.utils.is_defined(this._view_properties.left_entity_renderer_callback)){this._view_properties.left_entity_renderer_callback.call_back()}else{this._left_cell=$("<div>").addClass("left_entity_pane").appendTo(this._container);if(rdx.utils.is_defined(this._view_properties.left_visualizer.class_name)){this._left_cell.addClass(this._view_properties.left_visualizer.class_name)}if(rdx.utils.is_defined(this._view_properties.left_visualizer.title)){var a=$("<div>").addClass("left_entity_pane_title").text(this._view_properties.left_visualizer.title);a.appendTo(this._left_cell)}if(rdx.utils.is_defined(this._view_properties.left_visualizer.left_pane_refresh)){var d=$("<img>").attr("src",rdx.images.REFRESH_IMG).attr("alt","Refresh").addClass("left_pane_refresh");var f=new rdx.callback(this._base_view,this._base_view.refresh_view);d.on("click",{click_cb:f},function(){f.call_back()})}this._left_cell.append(d);if(rdx.utils.is_defined(this._view_properties.left_visualizer.description)){var h=$("<div>").addClass("left_entity_pane_description").text(this._view_properties.left_visualizer.description);h.appendTo(this._left_cell)}if(!this._view_properties.right_visualizer){this._left_cell.width("100%")}if(this._view_properties.search_filter){this._left_search_filter_options=$("<div>").addClass("search_filter_block").appendTo(this._left_cell);var e=$("<div>").addClass("left_position");var g=$("<button>").addClass("div_button").append("All");e.append(g);this._left_search_filter_options.append(e);var b=this;g.bind("click",function(n){$(this).parent().children(".div_button").removeClass("selected");$(this).addClass("selected");var m={status:"all",clicked:"left"};b._render_visualizers(m)})}this._left_visualizer_container=$("<div>").addClass("left_visualizer_container").appendTo(this._left_cell)}};rdx.entity_visualizer_view.prototype._set_filter_val=function(a){var e=$(".div_button",this._left_search_filter_options);for(var d=0;d<e.length;d++){var b=$(e[d]);b.removeClass("selected");if(a&&b.text().toLowerCase()==a.status){b.addClass("selected")}}};rdx.entity_visualizer_view.prototype._render_right_pane=function(){if(rdx.utils.is_defined(this._view_properties.right_entity_renderer_callback)){this._view_properties.right_entity_renderer_callback.call_back()}else{this._right_cell=$("<div>").addClass("right_entity_pane");if(!this._view_properties.left_visualizer){this._right_cell.width("100%")}if(this._view_properties.search_filter){this._right_search_filter_options=$("<div>").addClass("search_filter_block");var f=$("<div>").addClass("left_position");var e=$("<button>").addClass("div_button selected").append("All");var a=$("<button>").addClass("div_button").append("Up");var d=$("<button>").addClass("div_button").append("Down");f.append(e);f.append(a);f.append(d);this._right_search_filter_options.append(f);this._right_cell.append(this._right_search_filter_options);var b=this;e.bind("click",function(h){$(this).parent().children(".div_button").removeClass("selected");$(this).addClass("selected");var g={status:"all",clicked:"right"};b._render_visualizers(g)});a.bind("click",function(h){$(this).parent().children(".div_button").removeClass("selected");$(this).addClass("selected");var g={status:"up",clicked:"right"};b._remove_all_connections();b._render_visualizers(g)});d.bind("click",function(h){$(this).parent().children(".div_button").removeClass("selected");$(this).addClass("selected");var g={status:"down",clicked:"right"};b._remove_all_connections();b._render_visualizers(g)})}this._right_visualizer_container=$("<div>").addClass("right_visualizer_container");this._right_cell.append(this._right_visualizer_container);this._container.append(this._right_cell)}};rdx.entity_visualizer_view.prototype._render_connectors=function(){this._connector_div=$("<div>").addClass("connector_pane").hide();this._highlighted_connector_div=$("<div>").addClass("highlighted_connector_pane");this._container.append(this._connector_div);this._container.append(this._highlighted_connector_div)};rdx.entity_visualizer_view.prototype._render_visualizers=function(a){this._render_left_visualizer(a)};rdx.entity_visualizer_view.prototype._render_left_visualizer=function(d){if(rdx.utils.is_defined(this._view_properties.left_visualizer_renderer_callback)){this._view_properties.left_visualizer_renderer_callback.call_back()}else{if(this._view_properties.left_visualizer){this._visualizer_resource=rdx.utils.get_resource(this._view_properties.left_visualizer.resource_name);var a={};if(rdx.utils.is_defined(this._view_properties.left_visualizer.view_context)){a=this._view_properties.left_visualizer.view_context}var e=new rdx.callback(this,this._construct_left_visualizer,[true,false,d,this._view_properties.left_visualizer.resource_name]);var b=new rdx.callback(this,this._error_occured);rdx.model.get(this._visualizer_resource,a,e,null,b)}else{if(this._view_properties.right_visualizer){this._render_right_visualizer(d)}}}};rdx.entity_visualizer_view.prototype._construct_left_visualizer=function(e,a,b,d,f){this._remove_left_visualizer();if(rdx.utils.is_defined(this._view_properties.left_visualizer.response_callback)){this._view_properties.left_visualizer.response_callback.call_back([e])}this._construct_visualizer(e,a,b,d,f);if(rdx.utils.is_defined(this._view_properties.left_visualizer.on_render)){this._view_properties.left_visualizer.on_render.call_back([e])}this._render_right_visualizer(d)};rdx.entity_visualizer_view.prototype._remove_left_visualizer=function(){if(rdx.utils.is_defined(this._left_visualizer_container)){this._left_visualizer_container.empty()}};rdx.entity_visualizer_view.prototype._construct_right_visualizer=function(e,a,b,d,f){this._remove_right_visualizer();this._construct_visualizer(e,a,b,d,f)};rdx.entity_visualizer_view.prototype._remove_right_visualizer=function(){if(rdx.utils.is_defined(this._right_visualizer_container)){this._right_visualizer_container.empty()}};rdx.entity_visualizer_view.prototype.register_event_handlers=function(){rdx.model.add_model_change_listener(this._visualizer_resource,new rdx.callback(this,this.refresh_view))};rdx.entity_visualizer_view.prototype._construct_visualizer=function(o,D,E,C,H){var b=o[H];if(!this._view_properties.right_visualizer){this._is_right_response_empty=true;E=true}if(!this._view_properties.left_visualizer){this._is_left_response_empty=true}if(D){rdx.mask.unmask_component(this._left_visualizer_container,"__left_entity_visualizer");var A=b.length;this._left_count.empty();if(A){this._is_left_response_empty=false;this._left_container.show();this._left_count.append(A);if(this._left_search_filter_options){this._left_search_filter_options.show()}}else{this._is_left_response_empty=true;this._left_visualizer_container.text(rdx.i18n.get_string(this._view_properties.no_results_msg));if(this._is_left_response_empty&&this._view_properties.dont_show_empty_visualizer){this._left_container.hide();this._right_container.css("width","100%");this._right_container.css("border-left","1px solid #e4e5e6");this._left_cell.remove();this._right_cell.css("width","100%");this._right_cell.css("border-left","1px solid #e4e5e6");return}else{this._left_container.show();this._left_count.append(0)}}}else{rdx.mask.unmask_component(this._right_visualizer_container,"__right_entity_visualizer");var m=b.length;this._right_count.empty();if(m){this._is_right_response_empty=false;this._right_container.show();this._right_count.append(m);if(this._right_search_filter_options){this._right_search_filter_options.show()}if(!this._is_left_response_empty&&!this._is_right_response_empty){this._connector_div.show()}}else{this._is_right_response_empty=true;var q=$("<p class='no_results'>").text(rdx.i18n.get_string(this._view_properties.no_results_msg));this._right_visualizer_container.append(q);if(this._is_right_response_empty&&this._view_properties.dont_show_empty_visualizer){this._right_container.hide();this._left_container.css("width","100%");this._left_container.css("border-left","1px solid #e4e5e6");this._right_cell.remove();this._left_cell.css("width","100%");this._left_cell.css("border-left","1px solid #e4e5e6");return}else{this._right_container.show();this._right_count.append(0)}}}if(D){var f=this._view_properties.left_visualizer.entities}else{var f=this._view_properties.right_visualizer.entities}for(var G=0;G<b.length;G++){var u=$("<div>").addClass("entity_container");if(D){var n=$("<div>").addClass("parent_left_entity_container");if(rdx.utils.is_defined(this._view_properties.left_visualizer.left_data_handler_callback_per_one_entity)){this._view_properties.left_visualizer.left_data_handler_callback_per_one_entity.call_back()}else{u.attr("data-entity_data",b[G]["agent_id"])}var w=$("<span>").addClass("left_connector_dot");var I="left"+G}else{var n=$("<div>").addClass("parent_right_entity_container");if(rdx.utils.is_defined(this._view_properties.right_visualizer.right_data_handler_callback_per_one_entity)){this._view_properties.right_visualizer.right_data_handler_callback_per_one_entity.call_back()}else{u.attr("data-entity_data",b[G]["agent_id"])}var w=$("<span>").addClass("right_connector_dot");var I="right"+G}if(!(this._is_left_response_empty||this._is_right_response_empty)){u.append(w)}u.attr("data-entity_identifier",I);for(var M in f){if(f.hasOwnProperty(M)){var L=true;var t=f[M];var h=t.type;if(rdx.utils.is_defined(t.validator)){if(rdx.utils.is_defined(t.validator.resource_key,t.validator.exclude_values)){var p=b[G][t.validator.resource_key];L=t.validator.exclude_values.indexOf(p)===-1?true:false}}if(!L){continue}if(h==="image_block"){var z=t.property_value;var e=b[G][z];var J=t.image_class_names[e];var d=$("<div>").addClass(J);u.append(d)}else{if(h==="data_block"){var a=$("<div>").addClass("entity_block");if(rdx.utils.is_defined(t.is_number_type)){a.addClass("align_center")}else{a.addClass("align_left")}if(rdx.utils.is_defined(t.property_key)){var s=t.property_key;var v="";if(rdx.utils.is_defined(s.name)){v=s.name}else{v=b[G][s]}if(rdx.utils.is_defined(t.renderer_callback)){v=t.renderer_callback.call_back([b[G]])}if($.isArray(v)){for(var F=0;F<v.length;F++){var g=$("<div>").addClass("property_key").append(v[F]);a.append(g)}}else{var g=$("<div>").addClass("property_key").append(v);a.append(g)}}var K=t.property_value;var B=$("<div>").addClass("property_value").append(b[G][K]);if(rdx.utils.is_defined(f[M].click_handler_callback)){B.bind(rdx.events.CLICK,{agent_id:b[G]["agent_id"],callback:f[M].click_handler_callback},function(N,O){return N.data.callback.call_back([N,O])})}a.append(B);u.append(a)}}}}n.append(u);if(D){this._left_visualizer_container.append(n);if(!(this._is_left_response_empty||this._is_right_response_empty)){if(this._view_properties.left_visualizer&&rdx.utils.is_defined(this._view_properties.left_visualizer.draw_left_connectors_handler_callback_per_one_entity)){this._view_properties.left_visualizer.draw_left_connectors_handler_callback_per_one_entity.call_back()}else{this._draw_lines(n,u,I,"Right")}}}else{this._right_visualizer_container.append(n);if(!(this._is_left_response_empty||this._is_right_response_empty)){if(this._view_properties.right_visualizer&&rdx.utils.is_defined(this._view_properties.right_visualizer.draw_right_connectors_handler_callback_per_one_entity)){this._view_properties.right_visualizer.draw_right_connectors_handler_callback_per_one_entity.call_back()}else{this._draw_lines(n,u,I,"Left")}}}}if(E){this._finalize_visualizer();this._register_events()}};rdx.entity_visualizer_view.prototype._finalize_visualizer=function(d){if(rdx.utils.is_defined(this._left_cell)&&rdx.utils.is_defined(this._right_cell)){var a=this._left_cell.outerHeight();var f=this._left_visualizer_container.outerHeight();var e=this._right_cell.outerHeight();var b=this._right_visualizer_container.outerHeight();if((a-f)>=92){this._left_cell.height(f+92-10)}else{if((a-f)<0){this._left_cell.height(f+92)}}if((e-b)>=92){this._right_cell.height(b+92-10)}else{if((e-b)<0){this._right_cell.height(b+92)}}if(this._left_cell.outerHeight()<this._right_cell.outerHeight()){this._left_cell.height(this._right_cell.outerHeight());if(rdx.utils.is_defined(this._connector_div)){this._connector_div.height(this._right_cell.outerHeight())}}else{this._right_cell.height(this._left_cell.outerHeight());if(rdx.utils.is_defined(this._connector_div)){this._connector_div.height(this._left_cell.outerHeight())}}}if(rdx.utils.is_defined(this._connector_div)){this._connector_div.css("top",this._left_container.outerHeight()+"px")}if(rdx.utils.is_defined(this._highlighted_connector_div)){this._highlighted_connector_div.css("top",this._left_container.outerHeight()+"px")}};rdx.entity_visualizer_view.prototype._error_occured=function(a){rdx.status_bar.clear_status()};rdx.entity_visualizer_view.prototype._draw_lines=function(d,a,b,e){if(rdx.utils.is_not_defined(e)){e="Right"}this._jsPlumb.connect({source:d,target:a,cssClass:b},{anchor:[e],connector:["Straight"],endpoint:"Blank",paintStyle:{strokeStyle:"#E9E9E9",lineWidth:2,radius:2}})};rdx.entity_visualizer_view.prototype._render_right_visualizer=function(h){if(rdx.utils.is_defined(this._view_properties.right_visualizer_renderer_callback)){this._view_properties.right_visualizer_renderer_callback.call_back()}else{this._visualizer_resource=rdx.utils.get_resource(this._view_properties.right_visualizer.resource_name);var n={};if(h.status==="all"){if(rdx.utils.is_defined(this._view_properties.right_visualizer.view_context)){n=this._view_properties.right_visualizer.view_context}}else{var g=this._view_properties.right_visualizer.view_context.filter[0];var f=g.name;var a={};a[f]=f;a.instance_state="instance_state";var d={};d[f]=g.value;if(h.status==="up"){d.instance_state="Up"}else{if(h.status==="down"){d.instance_state="Down"}}var b=new rdx.context();var o={filter:a,is_query_param:true};b.set_context_data(d,o);n=b.get_url_params()}var m=new rdx.callback(this,this._construct_right_visualizer,[false,true,h,this._view_properties.right_visualizer.resource_name]);var e=new rdx.callback(this,this._error_occured);rdx.model.get(this._visualizer_resource,n,m,null,e)}};rdx.entity_visualizer_view.prototype.recalculate_widths_and_heights=function(b){var d=this._left_container.outerHeight();var a=this._right_container.outerHeight();if(b){if(d>a){this._right_container.height(d)}else{this._left_container.height(a)}}else{if(d<a){this._right_container.height(d)}else{this._left_container.height(a)}}if(rdx.utils.is_defined(this._left_cell)&&rdx.utils.is_defined(this._right_cell)){if(this._left_cell.outerHeight()<this._right_cell.outerHeight()){this._left_cell.height(this._right_cell.outerHeight());if(rdx.utils.is_defined(this._connector_div)){this._connector_div.height(this._right_cell.outerHeight())}}else{this._right_cell.height(this._left_cell.outerHeight());if(rdx.utils.is_defined(this._connector_div)){this._connector_div.height(this._left_cell.outerHeight())}}}if(rdx.utils.is_defined(this._connector_div)){this._connector_div.css("top",this._left_container.outerHeight()+"px")}};rdx.entity_visualizer_view.prototype.destroy_view=function(a){rdx.model.remove_model_change_listener(this._visualizer_resource)};rdx.entity_visualizer_view.prototype.get_is_back_button_required=function(){return false};rdx.entity_visualizer_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.entity_visualizer_view.prototype._register_events=function(){var a=this;if(rdx.utils.is_defined(this._left_entity_buttons_bar)){this._left_entity_buttons_bar.unbind(rdx.events.CLICK)}if(rdx.utils.is_defined(this._right_entity_buttons_bar)){this._right_entity_buttons_bar.unbind(rdx.events.CLICK)}if(!(this._is_left_response_empty||this._is_right_response_empty)){if(rdx.utils.is_defined(this._left_cell)){if(rdx.utils.is_defined(this._view_properties.left_cell_click_handler_callback)){this._left_cell.bind(rdx.events.CLICK,{callback:this._view_properties.left_cell_click_handler_callback},function(b,d){return b.data.callback.call_back([b,d])})}else{this._left_cell.bind(rdx.events.CLICK,{entity_block:this},function(b){a._show_left_entity_connections(b)})}}}if(!(this._is_left_response_empty||this._is_right_response_empty)){if(rdx.utils.is_defined(this._right_cell)){if(rdx.utils.is_defined(this._view_properties.right_cell_click_handler_callback)){this._right_cell.bind(rdx.events.CLICK,{callback:this._view_properties.right_cell_click_handler_callback},function(b,d){return b.data.callback.call_back([b,d])})}else{this._right_cell.bind(rdx.events.CLICK,{entity_block:this},function(b){a._show_right_entity_connections(b)})}}}if(rdx.utils.is_defined(this._view_properties.left_button_bar_click_handler_callback)){this._left_entity_buttons_bar.bind(rdx.events.CLICK,{callback:this._view_properties.left_button_bar_click_handler_callback},function(b,d){return b.data.callback.call_back([b,d])})}if(rdx.utils.is_defined(this._view_properties.right_button_bar_click_handler_callback)){this._right_entity_buttons_bar.bind(rdx.events.CLICK,{callback:this._view_properties.right_button_bar_click_handler_callback},function(b,d){return b.data.callback.call_back([b,d])})}};rdx.entity_visualizer_view.prototype._show_left_entity_connections=function(b){if(!rdx.utils.is_defined(b)){return}var m=this._get_target(b);if(!(m.hasClass("entity_container")||m.hasClass("left_connector_dot")||m.hasClass("status_up")||m.hasClass("status_down")||m.hasClass("entity_block")||m.hasClass("property_value")||m.hasClass("property_key"))){return}this._remove_all_connections();while(true){if(m.hasClass("entity_container")){break}m=m.parent()}m.addClass("highlighted_entity");var e=m.children(".left_connector_dot");e.addClass("highlighted_entity");this._left_visualizer_entities.push(m);var g=m.attr("data-entity_data");var a=m.attr("data-entity_identifier");var s=$("svg."+a);s.children("path").attr("stroke","#F8CE3B");var p=$(".right_visualizer_container .entity_container");var o=[];for(var f=0;f<p.length;f++){var n=$(p[f]);var q=n.attr("data-entity_data");if(g===q){o.push(n);this._right_visualizer_entities.push(n);n.addClass("highlighted_entity");var e=n.children(".right_connector_dot");e.addClass("highlighted_entity");var d=n.attr("data-entity_identifier");var h=$("svg."+d);h.children("path").attr("stroke","#F8CE3B")}}this._highlight_vertical_connector([m],o)};rdx.entity_visualizer_view.prototype._highlight_vertical_connector=function(h,g){var m=[];for(var b=0;b<h.length;b++){var a=$(h[b]).offset();var o=Math.ceil(($(h[b]).outerHeight())/2);m.push(a.top+o)}for(var b=0;b<g.length;b++){var a=$(g[b]).offset();var o=Math.ceil(($(g[b]).outerHeight())/2);m.push(a.top+o)}var d=Math.max.apply(Math,m);var e=Math.min.apply(Math,m);var n=d-e;if(rdx.utils.is_defined(this._connector_div)&&rdx.utils.is_defined(this._highlighted_connector_div)){var f=this._connector_div.offset().top;this._highlighted_connector_div.height(n+2).css("top",e-f-1);this._highlighted_connector_div.show()}};rdx.entity_visualizer_view.prototype._show_right_entity_connections=function(b){if(!rdx.utils.is_defined(b)){return}var m=this._get_target(b);if(!(m.hasClass("entity_container")||m.hasClass("left_connector_dot")||m.hasClass("status_up")||m.hasClass("status_down")||m.hasClass("entity_block")||m.hasClass("property_value")||m.hasClass("property_key"))){return}this._remove_all_connections();while(true){if(m.hasClass("entity_container")){break}m=m.parent()}m.addClass("highlighted_entity");var e=m.children(".right_connector_dot");e.addClass("highlighted_entity");this._right_visualizer_entities.push(m);var h=m.attr("data-entity_data");var a=m.attr("data-entity_identifier");var s=$("svg."+a);s.children("path").attr("stroke","#F8CE3B");var o=$(".left_visualizer_container .entity_container");var p=[];for(var g=0;g<o.length;g++){var f=$(o[g]);var q=f.attr("data-entity_data");entity_list=h.split(",");if($.inArray(q,entity_list)!==-1){p.push(f);this._left_visualizer_entities.push(f);f.addClass("highlighted_entity");var e=f.children(".left_connector_dot");e.addClass("highlighted_entity");var d=f.attr("data-entity_identifier");var n=$("svg."+d);n.children("path").attr("stroke","#F8CE3B")}}this._highlight_vertical_connector(p,[m])};rdx.entity_visualizer_view.prototype._get_target=function(a){var b=a.target||a.srcElement||a.originalTarget;return $(b)};rdx.entity_visualizer_view.prototype._remove_all_connections=function(){for(var d=0;d<this._left_visualizer_entities.length;d++){var e=$(this._left_visualizer_entities[d]);e.removeClass("highlighted_entity");var b=e.children(".left_connector_dot");b.removeClass("highlighted_entity");var a=e.attr("data-entity_identifier");var f=$("svg."+a);f.children("path").attr("stroke","#E9E9E9")}this._left_visualizer_entities.length=0;for(var d=0;d<this._right_visualizer_entities.length;d++){var e=$(this._right_visualizer_entities[d]);e.removeClass("highlighted_entity");var b=e.children(".right_connector_dot");b.removeClass("highlighted_entity");var a=e.attr("data-entity_identifier");var f=$("svg."+a);f.children("path").attr("stroke","#E9E9E9")}this._right_visualizer_entities.length=0;if(rdx.utils.is_defined(this._highlighted_connector_div)){this._highlighted_connector_div.height(0)}};rdx.entity_visualizer_view.prototype.get_view_context=function(){return this._base_view.get_view_context()};rdx.entity_visualizer_view.prototype.get_toolbar_items=function(){if(rdx.utils.is_defined(this._view_properties.is_tool_bar_required)&&!this._view_properties.is_tool_bar_required){return[]}if(rdx.utils.is_defined(this._toolbar_items)){return this._toolbar_items}this._add_tool_bar();return this._toolbar_items};rdx.entity_visualizer_view.prototype._add_tool_bar=function(){var a=[new rdx.action({tooltip:rdx.i18n.get_string("rdx.refresh"),image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this._base_view,this._base_view.refresh_view)})];this._toolbar_items=a};rdx.entity_visualizer_view.prototype.is_title_required=function(){return true};rdx.reboot_view=function(a){this._DEFAULT_PROPERTIES={ip_address:null,title:"",message:rdx.i18n.get_string("rdx.reboot_message"),timeout:60,refresh_timer:30,progress_title:null,show_progress_title:true,max_time:15,redirect_on_max_timeout:false,status:null,wait_message:"Please wait...",restore:null,activity_status:null,url:null,notification:null,current_status:null,ping_url:null,show_progress_bar:false,show_time:false,delay_for_device_status_check:1200,disable_ping:false};this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a);this._reboot_dom_object={};this._reboot_timer_interval_attempts=0;this._total_number_of_seconds=0};rdx.reboot_view.prototype.check_connection=function(d){var b=rdx.i18n.get_string(this._properties.progress_title);var a=this;if(this._properties.show_progress_title==true){rdx.mask.mask_with_progress($(document.body),this._properties.id,{single_progress:true,title:b,mode:rdx.PROGRESS_INFO})}this._connection_check_interval=setInterval(function(){var f=rdx.utils.is_defined(a._properties.ip_address)?a._properties.ip_address:location.host;var e=location.protocol+"//"+f;if(rdx.utils.is_defined(a._properties.test_url)){e=a._properties.test_url}rdx.utils.ajax(rdx.ajax_handler_constants.GET,e,null,new rdx.callback(),null,new rdx.callback(null,function(){a.render();if(rdx.utils.is_defined(d)){clearTimeout(d)}}),1000)},3000)};rdx.reboot_view.prototype.stop=function(){if(this._properties.show_progress_title==true){rdx.mask.unmask(this._properties.id)}if(rdx.utils.is_defined(this._connection_check_interval)){clearInterval(this._connection_check_interval)}};rdx.reboot_view.prototype.render=function(){if(rdx.utils.is_defined(this._connection_check_interval)){clearInterval(this._connection_check_interval)}if($(".reboot_view").length>0&&this._properties.restore==false){return}var a=$("<div>").addClass("reboot_view");var e=$("<div>").addClass("wrapper");var d=$("<div>").addClass("top");var b=$("body").addClass("reboot_body");rdx.page.empty_body_content();b.append(a.append(e.append(d)));if(rdx.utils.is_defined(this._properties.status)){e.append(this._create_status_container())}else{if(rdx.utils.is_defined(this._properties.restore)){a.addClass("restore");e.append(this._create_restore_container())}else{e.append(this._create_center_container())}}if(this._properties.disable_ping==false){this._start_check_connectivity_timer(this._properties.timeout)}document.title=rdx.i18n.get_string("rdx.rebooting")};rdx.reboot_view.prototype._create_center_container=function(){var a=$("<div>").addClass("center");var d=$("<span>").addClass("title").append(this._properties.title);var e=$("<div>").addClass("center_content");var b=$("<span>").addClass("message").append(this._properties.message);var f=$("<hr>").addClass("separator");e.append(b).append(f).append(this._create_reboot_content());a.append(d).append(e);return a};rdx.reboot_view.prototype._create_restore_container=function(){var a=$("<div>").addClass("center");var d=$("<div>").addClass("title_logo");var b=$("<div>").addClass("sub_title").append(this._properties.sub_title);this._current_status=$("<div>").addClass("current_status");this._current_status_text=$("<p>").addClass("current_status_text").append(this._properties.current_status);this._current_status.append(this._current_status_text);if(this._properties.show_progress_bar==true){this._div_for_hidden_images=$("<div>");this._div_for_progress_image=$("<div>").addClass("div_for_progress_image");this._div_for_error_image=$("<div>").addClass("div_for_error_image");this._div_for_success_image=$("<div>").addClass("div_for_success_image");this._div_for_hidden_images.append(this._div_for_progress_image).append(this._div_for_error_image).append(this._div_for_success_image);this._progress_bar=$("<div>").addClass("progress_bar");this._progress_indicator=$("<div>").addClass("progress_indicator");progress_bar_width_initial=this._current_progress_value+"%";this._progress_indicator.css({width:progress_bar_width_initial});this._progress_bar.append(this._progress_indicator);this._current_status.append(this._progress_bar);this._current_status.append(this._div_for_hidden_images)}if(this._properties.show_time==true){this._time_remaining=$("<div>").addClass("time_remaining").text("Time Remaining:");this._time=$("<span>").addClass("timer");this._time_remaining.append(this._time);this._current_status.append(this._time_remaining);this._time.text(rdx.utils.convert_seconds_to_minutes(" "+this._current_time_remaining,true))}this._wait_message=$("<div>").addClass("wait_message");var f=$("<div>").addClass("notification").append(this._properties.notification);var g=$("<button>").addClass("rdx_button rdx_blue_button").attr("aria-label","Login");var e=this;g.click(function(){window.location.href="/"});if(this._properties.final_status=="progress"){this._wait_message.append(this._properties.wait_message);if(this._properties.show_progress_bar||this._properties.show_time){this._start_progress_bar_time()}}else{if(this._properties.final_status=="failed"||this._properties.final_status=="success"){this._wait_message.append(g);if(this._properties.final_status=="failed"){g.append("Login").addClass("error")}if(this._properties.final_status=="success"){g.append("Login").addClass("success")}setTimeout(function(){clearInterval(e._reboot_timer_interval)},1000);if(rdx.utils.is_defined(this._progress_interval)){clearInterval(this._progress_interval)}if(rdx.utils.is_defined(this._progress_indicator)){this._progress_indicator.css({width:"100%"})}if(rdx.utils.is_defined(this._time_remaining)){this._time_remaining.remove()}}}a.append(d).append(b).append(this._current_status).append(this._wait_message).append(f);a.append(this._show_hide_details());this._create_reboot_content();return a};rdx.reboot_view.prototype._start_progress_bar_time=function(){this._cummulative_value_of_progress=this._calculate_cumulative_progress_value();this._original_step_duration_array=this._calculate_time_for_process();this._total_time=this._calculate_total_time();this._actual_step_duration_array=this._original_step_duration_array.slice();this._current_progress_value=(rdx.utils.is_defined(this._current_progress_value))?this._current_progress_value:0;this._current_time_remaining=rdx.utils.is_defined(this._current_time_remaining)?this._current_time_remaining:this._total_time;var a=this;if(rdx.utils.is_defined(this._progress_interval)){clearInterval(this._progress_interval)}this._progress_interval=setInterval(function(){a._update_progress_bar_time()},1000)};rdx.reboot_view.prototype._show_hide_details=function(){var a=$("<div>").addClass("details_log_container");this._detail_log_header=$("<div>").addClass("detail_log_header");this._details_container=$("<div>").addClass("details_log");this._details_container.append(this._update_activity_status());a.append(this._detail_log_header).append(this._details_container);this.update_detail_log_height();return a};rdx.reboot_view.prototype.update_detail_log_height=function(){var a=this;setTimeout(function(){var b=$(document).height();var d=$(".center").outerHeight();a._details_container.height(b-d-8)},100)};rdx.reboot_view.prototype._update_activity_status=function(){var g=$("<ul>").addClass("items");var p=rdx.images.LOADER_TICK;var d=[];if(rdx.utils.is_defined(this._properties.activity_status)){d=this._properties.activity_status}var f=0;for(var m=0;m<d.length;m++){var h=$("<li>").addClass("item");var u=$("<span>").addClass("status_message").append(d[m]["message"]);h.append(u);if(d[m]["progress"]=="success"){h.addClass("success")}else{if(d[m]["progress"]=="progress"){h.addClass("in_progress")}else{if(d[m]["progress"]=="failed"){f++;h.addClass("failed");var o=$("<div>").addClass("error_details");var q=d[m]["error_message"];var n=$("<ul>");if(rdx.utils.is_array(q)){for(var b=0;b<q.length;b++){var s=$("<li>").addClass("errors");s.append(q[m]);n.append(s)}}else{var s=$("<li>").addClass("errors");n.append(s.append(q))}h.addClass("error").append(o.append(n));h.click(function(){$(this).find(".error_details").toggle();$(this).toggleClass("expanded")})}else{h.addClass("pending")}}}g.append(h)}var e="Errors";if(f==1){e="Error"}var a=$("<p>").append(e).addClass("errors");if(f!=0){var t=$("<p>").append(f);this._detail_log_header.append(t).append(a)}return g};rdx.reboot_view.prototype._create_status_container=function(){var a=$("<div>").addClass("center");var e=$("<span>").addClass("title").append(this._properties.title);var d=$("<span>").addClass("status").append(this._properties.status);var b=$("<span>").append("complete").addClass("complete");a.append(e).append("<br/>").append(d).append(b).append("<br/>");this._create_reboot_content();return a};rdx.reboot_view.prototype._create_reboot_content=function(){this._reboot_dom_object.login_countdown_span=$("<span>").append(rdx.utils.convert_seconds_to_minutes(this._properties.timeout)).addClass("login_countdown");this._reboot_dom_object.login_now_option_span=$("<span>").addClass("login_now_option");this._reboot_dom_object.login_countdown_message_span=$("<span>").addClass("login_countdown_message");var b=$("<span>");if(this._properties.disable_ping==false){this._reboot_dom_object.login_countdown_message_span.append(rdx.i18n.get_string("rdx.reboot_view_logging_on_in"));b.append(this._reboot_dom_object.login_countdown_message_span[0]).append(this._reboot_dom_object.login_countdown_span[0]).append(this._reboot_dom_object.login_now_option_span[0])}else{var a=$("<a>").attr("href","#").append("here ");a.bind(rdx.events.CLICK,{that:this},function(d){new rdx.link({url:"http://"+d.data.that._properties.ip_address}).fire()});this._reboot_dom_object.login_countdown_message_span.append($("<span>").append("Click ").append(a).append(" to connect."));b.append(this._reboot_dom_object.login_countdown_message_span[0])}return b};rdx.reboot_view.prototype._refresh_success_callback=function(d,a){try{a=JSON.parse(a);this._properties=$.extend(true,this._DEFAULT_PROPERTIES,a.ping_progress);this.render()}catch(b){window.location.href=rdx.utils.is_defined(this._properties.url)?this._properties.url:"/"}};rdx.reboot_view.prototype._refresh_error_callback=function(){if((rdx.utils.is_defined(this._properties.max_time))&&(this._total_number_of_seconds>this._properties.max_time*60)){if(rdx.utils.is_defined(this._properties.redirect_on_max_timeout)&&this._properties.redirect_on_max_timeout){window.location.href=rdx.utils.is_defined(this._properties.url)?this._properties.url:"/"}this._reboot_dom_object.login_countdown_span.empty();this._reboot_dom_object.login_countdown_message_span.empty();this._reboot_dom_object.login_now_option_span.empty();this._reboot_dom_object.login_countdown_message_span.append(rdx.i18n.get_string("rdx.server_down_message"))}else{this._reboot_timer_interval_attempts++;this._reboot_dom_object.login_countdown_message_span.empty();var b=$("<span>").append(rdx.i18n.get_string("rdx.reboot_view_unable_to_connect",{reboot_timer_interval_attempts:this._reboot_timer_interval_attempts})).addClass("login_countdown_message");this._reboot_dom_object.login_countdown_message_span.append(b);this._reboot_dom_object.login_countdown_span.empty();this._reboot_dom_object.login_countdown_span.append(rdx.utils.convert_seconds_to_minutes(this._properties.refresh_timer));var d=this;var a=$("<a>").append("here").attr("href","#");a.bind("click",function(f){f.preventDefault();d._test_connectivity()});this._reboot_dom_object.login_now_option_span.empty();this._reboot_dom_object.login_now_option_span.append(rdx.i18n.get_string("rdx.reboot_view_click")).append(a).append(rdx.i18n.get_string("rdx.reboot_view_to_connect_now"));this._start_check_connectivity_timer(this._properties.refresh_timer)}};rdx.reboot_view.prototype._start_check_connectivity_timer=function(b){var d=b;var a=this;this._reboot_timer_interval=setInterval(function(){a._total_number_of_seconds++;var e=a._reboot_dom_object.login_countdown_span;if(d==0){clearInterval(a._reboot_timer_interval);a._reboot_dom_object.login_countdown_message_span.empty();a._reboot_dom_object.login_countdown_message_span.append(rdx.i18n.get_string("rdx.trying_to_connect_now"));a._reboot_dom_object.login_now_option_span.empty();e.empty();a._test_connectivity();return}e.empty();e.append(rdx.utils.convert_seconds_to_minutes(d));d--},1000,a._reboot_timer_interval,a,d)};rdx.reboot_view.prototype._test_connectivity=function(){if(rdx.utils.is_defined(this._reboot_timer_interval)){clearInterval(this._reboot_timer_interval)}var b=rdx.utils.is_defined(this._properties.ip_address)?this._properties.ip_address:location.host;var a=rdx.utils.is_defined(this._properties.ping_url)?this._properties.ping_url:(location.protocol+"//"+b);var d=this._reboot_dom_object.login_countdown_message_span;this._reboot_dom_object.login_now_option_span.empty();this._reboot_dom_object.login_countdown_span.empty();this._reboot_dom_object.login_countdown_message_span.empty();d.empty();d.append(rdx.i18n.get_string("rdx.trying_to_connect_now"));rdx.utils.ajax(rdx.ajax_handler_constants.GET,a,null,new rdx.callback(this,this._refresh_success_callback),null,new rdx.callback(this,this._refresh_error_callback),5000)};rdx.reboot_view.prototype._calculate_time_for_process=function(){var a=[];for(var b=0;b<this._properties.activity_status.length;b++){a[b]=parseInt(this._properties.activity_status[b].component_upgrade_time)}return a};rdx.reboot_view.prototype._calculate_cumulative_progress_value=function(){var b=[];for(var a=0;a<this._properties.activity_status.length;a++){if(a!=0){b[a]=b[a-1]+(parseFloat(this._properties.activity_status[a].component_upgrade_time)/this._calculate_total_time())*100}else{b[a]=(parseFloat(this._properties.activity_status[a].component_upgrade_time)/this._calculate_total_time())*100}}return b};rdx.reboot_view.prototype._calculate_total_time=function(){var b=0;for(var a=0;a<this._properties.activity_status.length;a++){b+=parseInt(this._properties.activity_status[a].component_upgrade_time)}return b};rdx.reboot_view.prototype._find_current_step=function(){var a=0;for(var b=0;b<this._properties.activity_status.length;b++){if((this._properties.activity_status[b].progress=="success")||(this._properties.activity_status[b].progress=="failed")){a=b+1}}return a};rdx.reboot_view.prototype._update_progress_bar_time=function(){var b=this._find_current_step();var g=0;if(this._current_progress_value<this._cummulative_value_of_progress[b]&&this._current_progress_value!=99){if(b==0){this._current_progress_value=this._current_progress_value+parseFloat(((this._cummulative_value_of_progress[b])/(parseFloat(this._properties.activity_status[b].component_upgrade_time))).toFixed(2))}else{this._current_progress_value=this._current_progress_value+parseFloat(((this._cummulative_value_of_progress[b]-this._cummulative_value_of_progress[b-1])/(parseFloat(this._properties.activity_status[b].component_upgrade_time))).toFixed(2))}if((b!=0)&&(this._properties.activity_status[b-1].progress=="success"||this._properties.activity_status[b-1].progress=="failed")&&(this._current_progress_value<this._cummulative_value_of_progress[b-1])){var f=0;this._current_progress_value=this._cummulative_value_of_progress[b-1];for(var e=0;e<b;e++){f+=this._original_step_duration_array[e];this._current_time_remaining=this._total_time-f}}if(parseInt(this._current_time_remaining)>1){this._current_time_remaining--}if((parseInt(this._current_time_remaining)>1&&parseInt(this._current_time_remaining)<5)&&this._properties.activity_status[b].progress=="progress"){this._current_time_remaining=5;this._current_progress_value=99}progress_bar_width_percent=this._current_progress_value+"%";this._progress_indicator.css({width:progress_bar_width_percent});this._time.text(" "+rdx.utils.convert_seconds_to_minutes(this._current_time_remaining,true));if(this._properties.final_status=="failed"){clearInterval(this._progress_interval)}}else{this._actual_step_duration_array[b]++}if(this._actual_step_duration_array[b]-this._original_step_duration_array[b]>this._properties.delay_for_device_status_check){var a=rdx.utils.convert_seconds_to_minutes((this._original_step_duration_array[b]+this._properties.delay_for_device_status_check),true);this._current_status_text.text(rdx.i18n.get_string("rdx.server_down_message_severe",{server_down_time:a}));this._wait_message.css({visibility:"hidden"});if(rdx.utils.is_defined(this._progress_bar)){this._progress_bar.css({visibility:"hidden"})}if(rdx.utils.is_defined(this._time_remaining)){this._time_remaining.css({visibility:"hidden"})}var d=this._div_for_error_image.css("backgroundImage");$(".item.in_progress",".details_log").css({backgroundImage:d});$(".item.pending",".details_log").css({backgroundImage:d});if(rdx.utils.is_defined(this._reboot_timer_interval)){clearInterval(this._reboot_timer_interval)}if(rdx.utils.is_defined(this._progress_interval)){clearInterval(this._progress_interval)}}};rdx.tabular_page=function(a){this._DEFAULT_PROPERTIES={tabular_page_view:null,view:null,tab_link:null,base_view:null,resource_for_operation:null,tab_class_name:null,tab_title:null,tab_content_container:null,tab_content_rendered:false,tab_content_variable:false,render_always:false,tab_navigate_callback:null,tab_content_renderer_callback:null,formatted_data:null,app_context_data:null,draft_data:null,enable_skip:false,skip_count:1};this._properties=$.extend({},this._DEFAULT_PROPERTIES,a)};rdx.tabular_page.prototype.get_tabular_page_view=function(){return this._properties.tabular_page_view};rdx.tabular_page.prototype.set_tabular_page_view=function(a){this._properties.tabular_page_view=a};rdx.tabular_page.prototype.get_view_dfn=function(){return this._properties.view};rdx.tabular_page.prototype.set_view_dfn=function(a){this._properties.view_dfn=a};rdx.tabular_page.prototype.get_view_properties=function(a){var b=this.get_view_dfn();if(rdx.utils.is_defined(b.property)){return b.property}};rdx.tabular_page.prototype.get_tab_link=function(){return this._properties.tab_link};rdx.tabular_page.prototype.set_tab_link=function(a){this._properties.tab_link=a};rdx.tabular_page.prototype.get_resource_for_operation=function(){return this._properties.resource_for_operation};rdx.tabular_page.prototype.set_resource_for_operation=function(a){this._properties.resource_for_operation=a};rdx.tabular_page.prototype.get_exec_service_result=function(){return this._properties.exec_service_result};rdx.tabular_page.prototype.set_exec_service_result=function(a){this._properties.exec_service_result=a};rdx.tabular_page.prototype.get_tab_navigate_callback=function(){return this._properties.tab_navigate_callback};rdx.tabular_page.prototype.set_tab_navigate_callback=function(a){this._properties.tab_navigate_callback=a};rdx.tabular_page.prototype.get_tab_class_name=function(){return this._properties.tab_class_name};rdx.tabular_page.prototype.set_tab_class_name=function(a){this._properties.tab_class_name=a};rdx.tabular_page.prototype.get_tab_title=function(){return this._properties.tab_title};rdx.tabular_page.prototype.set_tab_title=function(a){this._properties.tab_title=a};rdx.tabular_page.prototype.get_base_view=function(){return this._properties.base_view};rdx.tabular_page.prototype.set_base_view=function(a){this._properties.base_view=a};rdx.tabular_page.prototype.get_tab_content_container=function(){return this._properties.tab_content_container};rdx.tabular_page.prototype.set_tab_content_container=function(a){this._properties.tab_content_container=a};rdx.tabular_page.prototype.get_tab_content_rendered=function(){return this._properties.tab_content_rendered};rdx.tabular_page.prototype.set_tab_content_rendered=function(a){this._properties.tab_content_rendered=a};rdx.tabular_page.prototype.get_tab_content_variable=function(){return this._properties.tab_content_variable};rdx.tabular_page.prototype.set_tab_content_variable=function(a){this._properties.tab_content_variable=a};rdx.tabular_page.prototype.get_tab_content_renderer_callback=function(){return this._properties.tab_content_renderer_callback};rdx.tabular_page.prototype.set_tab_content_renderer_callback=function(a){this._properties.tab_content_renderer_callback=a};rdx.tabular_page.prototype.get_formatted_data=function(){return this._properties.formatted_data};rdx.tabular_page.prototype.set_formatted_data=function(a){this._properties.formatted_data=a};rdx.tabular_page.prototype.get_app_context_data=function(){return this._properties.app_context_data};rdx.tabular_page.prototype.set_app_context_data=function(a){this._properties.app_context_data=a};rdx.tabular_page.prototype.get_draft_data=function(){return this._properties.draft_data};rdx.tabular_page.prototype.set_draft_data=function(a){this._properties.draft_data=a};rdx.tabular_page.prototype.is_skip_enabled=function(){return this._properties.enable_skip};rdx.tabular_page.prototype.set_skip_page=function(a){this._properties.enable_skip=a};rdx.tabular_page.prototype.get_skip_count=function(){return this._properties.skip_count};rdx.tabular_page.prototype.set_skip_count=function(a){this._properties.skip_count=a};rdx.tabular_page_view_controller=function(e,d,g,b,f,a){this._tabular_page_view=e;this._parent=d;this._base_view=e.get_base_view();this._model_executor_service=null;this._mask_id=rdx.mask.get_id();this._success_callback=rdx.utils.is_defined(g)?g:new rdx.callback();this._failure_callback=rdx.utils.is_defined(b)?b:new rdx.callback();this._inline_file_upload=rdx.utils.is_defined(f)?f:true;this._multiple_resource=rdx.utils.is_defined(a)?a:false;this._properties=this._tabular_page_view._properties};rdx.tabular_page_view_controller.prototype.submit_data=function(f){if(this._inline_file_upload){if(this._multiple_resource){var h=new rdx.callback(this,this._submit_multiple_resource_data,[f])}else{var h=new rdx.callback(this,this._submit_form_field_changes,[f])}var d=new rdx.file_upload_controller(h,this._tabular_page_view);var b=this._tabular_page_view.get_tabular_pages();for(var g=0;g<b.length;g++){var p=b[g];if(p.get_tab_content_rendered()==true){var o=p.get_base_view();var a=o.get_view().get_form();d.add_form(a);var m=a.get_embedded_views();for(var e=0;e<m.length;e++){if(rdx.utils.is_not_defined(m[e].get_component())||!rdx.utils.is_function(m[e].get_component().get_form)){continue}var n=m[e].get_component().get_form();if(rdx.utils.is_not_defined(n)){continue}d.add_form(n)}}}d.do_operation()}else{if(this._multiple_resource){new rdx.callback(this,this._submit_multiple_resource_data,[f]).call_back()}else{new rdx.callback(this,this._submit_form_field_changes,[f]).call_back()}}};rdx.tabular_page_view_controller.prototype._submit_form_field_changes=function(d){var b=this._get_tabular_page_view();var m=false;if(rdx.utils.is_defined(this._tabular_page_view._properties)&&this._tabular_page_view._properties.standalone_mode){m=true}this._mask();this._base_view.set_view_state(rdx.view_constants.view_state.PASSIVE);var o=b._get_tabs_pages_data();var e=b._get_resource();var f=rdx.view_utils.get_model_method(b._view_definition);var g=rdx.view_utils.get_action(b._view_definition);var p=this._get_operation_param(null,null,f,g,e,o);o=this._process_resource_for_operation(p);p.set_resource_for_operation(o);if(rdx.utils.is_defined(this._tabular_page_view._properties)&&rdx.utils.is_defined(this._tabular_page_view._properties.callback_before_operation)){p=this._tabular_page_view._properties.callback_before_operation.call_back([p,d]);if(p===false){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);return}if(p.get_model_method()==="no-op"){this._tabular_page_view._finish_view();return}}if(rdx.utils.is_defined(this._tabular_page_view._properties)&&this._tabular_page_view._properties.standalone_mode){return}var q=false;if(rdx.utils.is_defined(this._tabular_page_view._properties)){if(rdx.utils.is_defined(this._tabular_page_view._properties.model_executor_continue_on_error)){q=true}}var n=new rdx.callback(this,this.model_operation_callback,[true]);var h=new rdx.callback(this,this.model_operation_callback,[false]);var a=new rdx.model_executor_service(n,h,q);a.add(p.get_model_method(),p.get_resource_defn(),p.get_resource_for_operation(),p.get_action(),p.get_param(),this._parent,p.get_resource_context(),p.get_continue_on_error());if(rdx.utils.is_object_not_empty(o)){a.execute()}};rdx.tabular_page_view_controller.prototype._submit_multiple_resource_data=function(e){var d=this._get_tabular_page_view();this._mask();this._base_view.set_view_state(rdx.view_constants.view_state.PASSIVE);var s=d._get_tabs_pages_data();var g=d._get_resource();var h=rdx.view_utils.get_model_method(d);var m=rdx.view_utils.get_action(d);var t=this._get_operation_param(null,null,h,m,g,s);t.set_resource_for_operation(s);if(rdx.utils.is_defined(this._tabular_page_view._properties)&&rdx.utils.is_defined(this._tabular_page_view._properties.callback_before_operation)){t=this._tabular_page_view._properties.callback_before_operation.call_back([t,e]);if(t===false){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);return}}if(rdx.utils.is_defined(this._tabular_page_view._properties)&&this._tabular_page_view._properties.standalone_mode){return}var b=d.get_tabular_pages();var q=new rdx.callback(this,this.model_operation_callback,[true]);var n=new rdx.callback(this,this.model_operation_callback,[false]);var a=new rdx.model_executor_service(q,n,false);for(var o=0;o<b.length;o++){var v=b[o];if(v.get_tab_content_rendered()==true){var u=v.get_base_view();var p=u.get_view_definition();var f=v.get_resource_for_operation();var t=this._get_operation_param(null,null,rdx.view_utils.get_model_method(view_definition),rdx.view_utils.get_action(view_definition),g,f);a.add(t.get_model_method(),t.get_resource_defn(),t.get_resource_for_operation(),t.get_action(),t.get_param(),this._parent,t.get_resource_context(),t.get_continue_on_error())}}a.execute()};rdx.tabular_page_view_controller.prototype.model_operation_callback=function(a,b){this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE);this._unmask();if(rdx.utils.is_defined(this._base_view.get_view_definition().view_properties.callback_after_operation)){var d=new rdx.configure_view_operation_params({return_call_back:new rdx.callback(this,this._resume_callback_after_operation,[a,b])});this._base_view.get_view_definition().view_properties.callback_after_operation.call_back([{status:b,params:d,result:a}])}else{this._finish_model_operation(a,b)}};rdx.tabular_page_view_controller.prototype._resume_callback_after_operation=function(d,a,b){this._finish_model_operation(a,b)};rdx.tabular_page_view_controller.prototype._finish_model_operation=function(a,b){if(b){this._success_callback.call_back([a]);this._tabular_page_view._finish_view()}else{rdx.page.show_notification(a.get_error_message(),rdx.ERROR)}};rdx.tabular_page_view_controller.prototype._get_tabular_page_view=function(){return this._tabular_page_view};rdx.tabular_page_view_controller.prototype._get_operation_param=function(h,g,b,e,a,d){var f={resource_defn:a,resource_for_operation:d,callback_on_success:h,callback_on_failure:g,model_method:b,action:e,resource_context:{view_definition:this._tabular_page_view._view_definition,view:this},return_call_back:null};return new rdx.configure_view_operation_params(f)};rdx.tabular_page_view_controller.prototype._process_resource_for_operation=function(a){var e=a.get_resource_for_operation();var n={};for(var h=0;h<e.length;h++){var o=e[h];var d=[];for(var f in o){if(rdx.utils.is_not_defined(o[f])){continue}if(!(o[f] instanceof rdx.view_component_adapter_data)){continue}var g=o[f];if(this._properties.aggregate_all_inner_views_data===false){d=[]}g.process_inner_view_data(a,d);if(rdx.utils.is_array(d)){delete e[h][f];e[h][f]=[];for(var b=0;b<d.length;b++){var m=d[b].get_resource_for_operation();e[h][f].push(m)}}}n=$.extend(null,n,e[h])}return n};rdx.tabular_page_view_controller.prototype._unmask=function(){rdx.mask.unmask_component(this._parent,this._mask_id)};rdx.tabular_page_view_controller.prototype._mask=function(){rdx.mask.mask_component(this._parent,this._mask_id)};rdx.tabular_page_view=function(d,b,e,a){this._parent=d;this._base_view=a;this._resource=e;this.is_back_button_required=true;this._original_fetched_data={};this._DEFAULT_PROPERTIES={submit_operation:{model_method:rdx.model_constants.ADD},custom_class_names:null,help_id:null,show_back_button:true,inline_file_upload:true,multiple_resource:false,save_exit_button:true,save_exit_label:"rdx.tabular_save_exit_button",independent_pages:false,finish_handler_callback:null,show_lastpage_backbutton:true,aggregate_all_inner_views_data:true,add_cancel_button:true,finish_button_label:null,global_page_info:false,tab_align:"horizontal",cancel_button_label:"rdx.cancel",add_tab_page_border:false};this._view_definition=b;this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._tabs_container=null;this._tabular_pages=[];this._tabs_pages_data=[];this._current_tab_index=0;this._previous_tab_index=-1;this._back_button=null;this._finish_button=null;this._save_button=null;this._cancel_button=null;this._skip_button=null;this._next_button=null;this.tabular_page_view_controller=new rdx.tabular_page_view_controller(this,this._parent,null,null,this._properties.inline_file_upload,this._properties.multiple_resource);this._submit_handler_callback=new rdx.callback(this.tabular_page_view_controller,this.tabular_page_view_controller.submit_data)};rdx.tabular_page_view.prototype=new rdx.abstract_view();rdx.tabular_page_view.prototype.make_view=function(){this._base_view.remove_decorator();this._tabs_container=$("<div>").addClass("tabular_page_view "+this._properties.tab_align).appendTo(this._parent);if(this._properties.custom_class_names){this._tabs_container.addClass(this._properties.custom_class_names)}this.render_tab_links(this._tabs_container);this._add_bottom_navigation_bar(this._tabs_container);this.render_tab_content(this._current_tab_index);this._update_navigation_bar(this._current_tab_index);this._base_view.set_view_state(rdx.view_constants.view_state.ACTIVE)};rdx.tabular_page_view.prototype.render_tab_links=function(g){var o=$("<ul>").addClass("tabular_page_view_tabs").appendTo(g);var u=$("<div>").addClass("tabular_page_view_center_panel").appendTo(g);if(this._properties.add_tab_page_border===true){u.addClass("add_border")}if(rdx.utils.is_defined(this._view_definition.tabs)){var q=this._view_definition.tabs;var n=function(A,v,z,w){this.tabular_page_view=null;this.view=v;this.tab_link=z;this.tab_content_container=w};for(var h=0;h<q.length;h++){var s=rdx.utils.get_view(q[h].view);var b=$("<li>").appendTo(o);var e=$("<a>").addClass("tabular_page_view_tab").attr("href","#").appendTo(b);if(rdx.utils.is_defined(q[h].tab_class_name)){e.addClass(q[h].tab_class_name);var d=$('<span class="tab_icon">').appendTo(e)}var m=$('<span class="tab_name">').text(rdx.i18n.get_string(q[h].tab_title)).appendTo(e);var t=$("<div>").addClass("tabular_page_container").addClass("hide").appendTo(u);if(rdx.utils.is_defined(q[h].content_class_name)){t.addClass(q[h].content_class_name)}var a=$.extend(null,q[h],new n(this,s,e,t));this._tabular_pages[h]=new rdx.tabular_page(a);if(this._properties.show_back_button){this.register_events_to_tab_links(e,h)}}if(this._properties.global_page_info=="true"||this._properties.global_page_info===true){var f=$('<div class="global-page-info">');var p=$(".title",this._parent);p.append(f);this.set_global_page_info(f);this._view_definition.global_page_info_update.call_back([this.get_global_page_info()]);this._parent.bind("UPDATE_GLOBAL_HEADER",{that:this},function(v,w){if(rdx.utils.is_defined(v.data.that._view_definition.global_page_info_update)){v.data.that._view_definition.global_page_info_update.call_back([v.data.that.get_global_page_info(),w])}})}}};rdx.tabular_page_view.prototype.render_tab_content=function(f){var h=this._tabular_pages[f];var o=h.get_tab_link();o.addClass("active");var b=h.get_view_dfn();if(rdx.utils.is_not_defined(b.view_properties)){b.view_properties={}}var e={add_title:false,add_create_button:false,add_close_button:false,submit_operation:rdx.model_constants.NOOP,toggle_view:false,ignore_key_press_events:true};b.view_properties=$.extend(true,b.view_properties,e);var n=h.get_tab_content_container().removeClass("hide");var g=h.get_tab_content_renderer_callback();var m;if(rdx.utils.is_defined(g)){var d={tabular_page_view:this,current_tab_index:f,parent:n,original_fetched_data:this._original_fetched_data};m=g.call_back([d])}else{m=new rdx.base_view(n,b);if(rdx.utils.is_object_not_empty(this._original_fetched_data)){var a=m.get_view_context();a.set_url_params({is_data_set:true},this._original_fetched_data)}}if(rdx.utils.is_function(m.get_view().set_is_back_button_required)){m.get_view().set_is_back_button_required(false)}h.set_base_view(m);m.prepare_view();h.set_tab_content_rendered(true)};rdx.tabular_page_view.prototype._add_bottom_navigation_bar=function(a){var d=$("<div>").addClass("tabs_bottom_navigation_panel").appendTo(a);if(this._properties.show_back_button){this._back_button=rdx.utils._get_button(rdx.i18n.get_string("rdx.back"),rdx.i18n.get_string("rdx.tabular_back_button_tooltip")," tabular_page_navigation_button tabular_grey_button tabular_back_button");this._back_button.addClass("hide")}this._next_button=rdx.utils._get_button(rdx.i18n.get_string("rdx.table_pagination_next"),rdx.i18n.get_string("rdx.tabular_next_button_tooltip")," tabular_page_navigation_button tabular_page_blue_button tabular_next_button");if(rdx.utils.is_defined(this._properties.finish_button_label)){this._finish_button=rdx.utils._get_button(rdx.i18n.get_string(this._properties.finish_button_label),rdx.i18n.get_string("rdx.tabular_execute_button_tooltip")," tabular_page_navigation_button tabular_page_blue_button")}else{this._finish_button=rdx.utils._get_button(rdx.i18n.get_string("rdx.wizard_finish_button"),rdx.i18n.get_string("rdx.tabular_execute_button_tooltip")," tabular_page_navigation_button tabular_page_blue_button")}this._finish_button.addClass("hide");this._cancel_button=rdx.utils._get_button(rdx.i18n.get_string(this._properties.cancel_button_label),rdx.i18n.get_string("rdx.tabular_finish_button_tooltip"),"tabular_page_navigation_button tabular_grey_button");this._skip_button=rdx.utils._get_button(rdx.i18n.get_string("rdx.skip_label"),rdx.i18n.get_string("rdx.tabular_skip_button_tooltip"),"tabular_page_navigation_button tabular_grey_button");this._skip_button.addClass("hide");if(this._properties.save_exit_button){this._save_button=$("<div>").addClass("tabular_save_exit_button_container");var b=rdx.utils._get_button(rdx.i18n.get_string(this._properties.save_exit_label),rdx.i18n.get_string("rdx.tabular_save_exit_button_tooltip"),"tabular_page_navigation_button tabular_grey_button").appendTo(this._save_button)}this._cancel_button.bind(rdx.events.CLICK,{tabular_page_view:this},function(e){e.data.tabular_page_view.cancel_view_operation()});if(this._properties.show_back_button){this._back_button.bind(rdx.events.CLICK,{tabular_page_view:this},function(f){var e=f.data.tabular_page_view;if(e._current_tab_index===0){e.cancel_view_operation()}else{e.handle_navigation(e._previous_tab_index,false)}})}this._next_button.bind(rdx.events.CLICK,{tabular_page_view:this},function(f){var e=f.data.tabular_page_view;e.handle_navigation(e._current_tab_index+1,true)});this._skip_button.bind(rdx.events.CLICK,{tabular_page_view:this},function(g){var f=g.data.tabular_page_view;var h=f._current_tab_index+f.get_tabular_page(f._current_tab_index).get_skip_count();for(var e=f._current_tab_index;e<h;e++){var m=f.get_tabular_page(e);m.set_resource_for_operation(null);f._set_tabs_pages_data(null,e)}f._perform_operation_after_save(f._current_tab_index,h,true,true)});if(this._properties.save_exit_button){this._save_button.bind(rdx.events.CLICK,{tabular_page_view:this},function(f){var e=f.data.tabular_page_view;e.submit_data_handler(e._current_tab_index,true)})}this._finish_button.bind(rdx.events.CLICK,{tabular_page_view:this},function(f){var e=f.data.tabular_page_view;e.submit_data_handler(e._current_tab_index)});if(this._properties.add_cancel_button){d.append(this._cancel_button)}if(this._properties.show_back_button){d.append(this._back_button)}d.append(this._next_button);d.append(this._skip_button);d.append(this._finish_button);if(this._properties.save_exit_button){d.append(this._save_button)}};rdx.tabular_page_view.prototype._validate_tabular_page_data=function(b,e){if(this._properties.independent_pages===true||(rdx.utils.is_defined(e)&&b>e)){return true}var a=this.get_tabular_page(b);var d=a.get_base_view().get_view().get_form();if(rdx.utils.is_defined(d)){return d.validate()}};rdx.tabular_page_view.prototype._save_tabular_page_data=function(b,m,d,f,a){if(!this._validate_tabular_page_data(b,m)){return false}var h=this.get_tabular_page(b);var e=this._get_resource_for_operation(h);h.set_resource_for_operation(e);if(rdx.utils.is_defined(h.get_tab_navigate_callback())){var g=new rdx.callback_params({return_callback:new rdx.callback(this,this._set_current_tab_page_data,[b,m,d,f,a]),tabular_page_view:this,current_tab_index:b,next_tab_index:m,is_valid:true});h.get_tab_navigate_callback().call_back([g]);if(rdx.utils.is_defined(a)&&a){return g._properties.is_valid}}else{this._set_tabs_pages_data(e,b);if(rdx.utils.is_defined(a)&&a){return}else{if(b!==(this._get_tabs_length()-1)||(rdx.utils.is_defined(d)&&!d)){this._perform_operation_after_save(b,m,d,f)}}}};rdx.tabular_page_view.prototype._set_current_tab_page_data=function(f,b,h,d,e,a){var g=f?rdx.utils.get_formatted_response(f):this.get_tabular_page(b).get_resource_for_operation();this.get_tabular_page(b).set_resource_for_operation(g);this._set_tabs_pages_data(g,b);if(rdx.utils.is_not_defined(a)){this._perform_operation_after_save(b,h,d,e)}};rdx.tabular_page_view.prototype._perform_operation_after_save=function(a,g,e,f){if(f){this.set_previous_tab_index(a);this.set_current_tab_index(g);this.get_tabular_page(a).get_tab_content_container().addClass("hide")}else{if(g!==null){this.get_tabular_page(a).get_tab_content_container().addClass("hide");this.set_current_tab_index(g);this.set_previous_tab_index(g-1)}}var d=this.get_tabular_page(g);if(d&&d._properties.button_render_callback){var b={tabular_pages:this.get_tabular_pages(),direction:e,next_button:this._next_button,cancel_button:this._cancel_button};d._properties.button_render_callback.call_back([b])}else{if(g!==null){this._next_button[0].value=rdx.i18n.get_string("rdx.table_pagination_next");this._cancel_button[0].value=rdx.i18n.get_string(this._properties.cancel_button_label)}}if(rdx.utils.is_defined(this._current_tab_index)){this._update_navigation_bar(this._current_tab_index);if(rdx.utils.is_defined(e)){this._update_active_tab_link(a);this._display_tabular_page_content(this._current_tab_index,e)}}};rdx.tabular_page_view.prototype._display_tabular_page_content=function(b,a){var d=this.get_tabular_page(this._current_tab_index);var h=d.get_tab_content_variable();var g=d.get_tab_content_rendered();if(g){if(h&&a||d._properties.render_always===true){var e=d.get_base_view();d.set_draft_data({resource_for_operation:d.get_resource_for_operation(),formatted_data:d.get_formatted_data()});e.destroy_view();d.set_resource_for_operation(null);d.set_base_view(null);this.render_tab_content(this._current_tab_index)}else{var f=d.get_tab_link();f.addClass("active");d.get_tab_content_container().removeClass("hide")}}else{this.render_tab_content(this._current_tab_index)}};rdx.tabular_page_view.prototype._update_active_tab_link=function(a){var d=this.get_tabular_page(a);var b=d.get_tab_link();b.removeClass("active").addClass("done")};rdx.tabular_page_view.prototype.handle_navigation=function(g,b){var e=Math.abs(this._current_tab_index-g);var f=this.get_tabular_page(g).get_tab_link().hasClass("done");var d=this._properties.independent_pages===true||e==1||f;var a=this.get_tabular_page(this._current_tab_index)._properties.view;if(d&&a.custom_validation_callback){a.custom_validation_callback.call_back([new rdx.callback(this,this._save_tabular_page_data),this._current_tab_index,g,b,this,null])}else{if(d&&this._save_tabular_page_data(this._current_tab_index,g,b)===false){return}}};rdx.tabular_page_view.prototype.submit_data_handler=function(d,a){if(this._properties.independent_pages){this._finish_view();return}if(this._save_tabular_page_data(d,null,null,null,a)===false){return}var e=a?{save_exit:true}:null;if(a===true){var b=this.get_tabular_page(this._current_tab_index)._properties.view;if(b.custom_validation_callback){b.custom_validation_callback.call_back([new rdx.callback(this,function(){this._get_submit_handler_callback().call_back([e])}),this._current_tab_index,null,null,this,true]);return}}this._get_submit_handler_callback().call_back([e])};rdx.tabular_page_view.prototype._update_navigation_bar=function(a){var b=this._tabular_pages[a];var d=this._properties.navigation_handler?this._properties.navigation_handler.call_back():true;if(d){this._next_button.prop("disabled",false);this._next_button.addClass("tabular_page_blue_button")}else{this._next_button.removeClass("tabular_page_blue_button");this._next_button.prop("disabled",true)}if(a===0){if(this._properties.show_back_button){if(this._properties.add_cancel_button){this._back_button.addClass("hide")}else{this._back_button.removeClass("hide")}}this._finish_button.addClass("hide");this._next_button.removeClass("hide");this._skip_button.addClass("hide")}else{if(a>0&&a<this._get_tabs_length()-1){this._next_button.removeClass("hide");if(this._properties.show_back_button){this._back_button.removeClass("hide")}this._finish_button.addClass("hide");if(this.get_tabular_page(this._current_tab_index).is_skip_enabled()===true){this._skip_button.removeClass("hide")}else{this._skip_button.addClass("hide")}}}if(a==this._get_tabs_length()-1){this._next_button.addClass("hide");if(this._properties.show_back_button){this._back_button.removeClass("hide");if(!this._properties.show_lastpage_backbutton){this._back_button.addClass("hide");this.deregister_events_to_tab_links()}}this._finish_button.removeClass("hide");this._skip_button.addClass("hide")}if(rdx.utils.is_defined(this._save_button)&&this._properties.save_exit_button===true){if(rdx.utils.is_defined(b._properties.save_exit_button)&&b._properties.save_exit_button===false){this._save_button.addClass("hide")}else{this._save_button.removeClass("hide")}}};rdx.tabular_page_view.prototype._get_resource_for_operation=function(d){var b=d.get_base_view();if(!b){return{}}var g=rdx.utils.is_defined(b.get_view().get_form)?b.get_view().get_form():null;if(!g){return{}}var h=b.get_resource();var f={};if(rdx.utils.is_defined(b.get_view_definition())){f=b.get_view_definition().view_properties}if(rdx.utils.is_defined(f.send_complete_form_data)&&f.send_complete_form_data){var e=rdx.form_utils.get_resource_for_operation(g,h,null,true)}else{var e=rdx.form_utils.get_resource_for_operation(g,h,null)}var m={};var a=false;$.each(e,function(o,n){if((n instanceof rdx.view_component_adapter_data)){a=true;return false}});if(a){m=this._get_formatted_resource_for_operation(b,e)}d.set_formatted_data(m);return e};rdx.tabular_page_view.prototype._get_formatted_resource_for_operation=function(a,d){var g=$.extend(true,{},d);var b=a.get_view().get_form_controller();var f=a.get_resource();var e=b._get_operation_param(null,null,null,null,f,[g]);this.tabular_page_view_controller._process_resource_for_operation(e);return g};rdx.tabular_page_view.prototype.get_current_tab_index=function(){return this._current_tab_index};rdx.tabular_page_view.prototype.update_tab_index=function(a,b){this.set_current_tab_index(a);this.set_previous_tab_index(b)};rdx.tabular_page_view.prototype.set_current_tab_index=function(a){this._current_tab_index=a};rdx.tabular_page_view.prototype._get_tabs_pages_data=function(){return this._tabs_pages_data};rdx.tabular_page_view.prototype._get_current_tab_saved_data=function(a){return this._tabs_pages_data[a]};rdx.tabular_page_view.prototype._get_resource=function(){return this._resource};rdx.tabular_page_view.prototype._set_tabs_pages_data=function(b,a){this._tabs_pages_data[a]=b};rdx.tabular_page_view.prototype.get_tabular_pages=function(){return this._tabular_pages};rdx.tabular_page_view.prototype.set_tabs_pages_data=function(b,a){this._tabs_pages_data[a]=b};rdx.tabular_page_view.prototype.get_tabular_page=function(a){return this._tabular_pages[a]};rdx.tabular_page_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.tabular_page_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.tabular_page_view.prototype.cancel_view_operation=function(){var a=rdx.view_utils.get_model_method(this._view_definition);if(rdx.utils.is_defined(this._properties.cancel_prompt)&&(this._current_tab_index!==0&&a==rdx.model_constants.ADD)){rdx.message_box.confirm(rdx.i18n.get_string(this._properties.cancel_prompt),new rdx.callback(this,this._cancel_view))}else{this._cancel_view()}};rdx.tabular_page_view.prototype._cancel_view=function(){if(rdx.utils.is_defined(this._properties.cancel_handler_callback)){this._properties.cancel_handler_callback.call_back();this._base_view.destroy_view({},false);return}for(var a=0;a<this._tabular_pages.length;++a){if(rdx.utils.is_defined(this._tabular_pages[a].get_base_view())){this._tabular_pages[a].get_base_view().destroy_view({},false)}}this._base_view.destroy_view({},false)};rdx.tabular_page_view.prototype._finish_view=function(){if(rdx.utils.is_defined(this._properties.finish_handler_callback)){var b={};for(var a=0;a<this._tabular_pages.length;++a){b=$.extend(b,this._get_resource_for_operation(this._tabular_pages[a]))}b=$.extend(this._original_fetched_data,b);this._properties.finish_handler_callback.call_back([b]);this._base_view.destroy_view({},false);return}for(var a=0;a<this._tabular_pages.length;++a){if(rdx.utils.is_defined(this._tabular_pages[a].get_base_view())){this._tabular_pages[a].get_base_view().destroy_view({},false)}}this._base_view.destroy_view({},false)};rdx.tabular_page_view.prototype.destroy_view=function(){this._tabular_pages={};this._tabs_container.empty();this._tabs_container.remove();if(rdx.utils.is_defined(this._properties.on_close_callback)){this._properties.on_close_callback.call_back()}};rdx.tabular_page_view.prototype.close_view=function(a){this._cancel_view()};rdx.tabular_page_view.prototype.register_events_to_tab_links=function(b,a){b.bind(rdx.events.CLICK,{tabular_page_view:this,tab_index:a},function(g){var f=g.data.tabular_page_view;var e=g.data.tab_index;var d=true;if(f._current_tab_index>e){d=false}f.handle_navigation(e,d)})};rdx.tabular_page_view.prototype.deregister_events_to_tab_links=function(){for(var a=0;a<this._tabular_pages.length;++a){var b=this._tabular_pages[a].get_tab_link();b.unbind(rdx.events.CLICK)}};rdx.tabular_page_view.prototype.get_base_view=function(){return this._base_view};rdx.tabular_page_view.prototype._get_submit_handler_callback=function(){return this._submit_handler_callback};rdx.tabular_page_view.prototype._get_tabs_length=function(){return this._tabular_pages.length};rdx.tabular_page_view.prototype.get_is_back_button_required=function(){return this.is_back_button_required};rdx.tabular_page_view.prototype.set_is_back_button_required=function(a){this.is_back_button_required=a};rdx.tabular_page_view.prototype.get_resource_response_arrived=function(a){this._original_fetched_data=rdx.utils.get_formatted_response(a);if(this._properties.independent_pages){return true}if(rdx.utils.is_defined(this._original_fetched_data)&&rdx.utils.is_object_not_empty(this._original_fetched_data)){var b=this.get_tabular_page(0);b.get_base_view().get_view().get_form().initialize(this._original_fetched_data)}};rdx.tabular_page_view.prototype.set_original_fetched_data=function(a){this._original_fetched_data=a};rdx.tabular_page_view.prototype.get_tabular_page_view_controller=function(){return this.tabular_page_view_controller};rdx.tabular_page_view.prototype.do_toggle_view=function(){if(this._view_definition.view_properties.toggle_view===false){return false}return true};rdx.tabular_page_view.prototype.get_previous_tab_index=function(){return this._previous_tab_index};rdx.tabular_page_view.prototype.set_previous_tab_index=function(a){this._previous_tab_index=a};rdx.tabular_page_view.prototype.get_global_page_info=function(){return{parent:this._properties.global_page_info}};rdx.tabular_page_view.prototype.set_global_page_info=function(a){this._properties.global_page_info=a};if(typeof(rdx)!=="undefined"){rdx.app_search=new function(){this.label_obj={};this.title_obj={};this.view_info_obj={};this.tabjson={};this.finalobj={};this.opjsonobj={};this.suggestions_obj={};this._parent_div=null;this._close_search_button=null;this._search_div=null;this._search_component=null;this._search_input=null;this._search_description_div=null;this._search_result_div=null;this._search_description_parent_div=null;this._search_result_parent_div=null;this._wrap_suggestion_description=null;this._suggestions_parent_div=null;this._no_result_span=null;this._search_phrase="";this.app_search_flag=true;this.div_title="";this.div_subtitle="";this._active_views={};this.states={};this.states.IDLE="IDLE";this.states.SEARCHING="SEARCHING";this.current_state=null;this.init=function(){var b=rdx.views;this.current_state=this.states.IDLE;for(var a in b){if(b.hasOwnProperty(a)){if(rdx.utils.is_defined(b[a]["name"])&&(rdx.utils.is_not_empty(b[a]["name"]))){this.build_label_map(b[a],a);if(b[a]["type"]=="DETAIL_VIEW"){this.update_label_view_map_for_detail_configview(b[a],a)}else{if(b[a]["type"]=="INFORMATION_VIEW"||b[a]["type"]=="FEATURE_WELCOME_VIEW"){this.update_view_map_for_info_feature_view(b[a],a)}else{if(b[a]["type"]=="ONE_PAGE_WIZARD_VIEW"){this.update_view_map_for_op_view(b[a],a)}else{if(b[a]["type"]=="TABBED_VIEW"){this.update_label_view_map_for_tabbed_view(b[a],a)}else{if(b[a]["type"]=="OVERVIEW_VIEW"){this.update_label_view_map_for_overview(b[a],a)}}}}}}}}if(rdx.utils.is_defined(rdx.get_tree()._tree_nodes)){this.build_tree_map(rdx.get_tree()._tree_nodes)}this.show_app_search_option_in_header()};this.add_support_info=function(){if(rdx.utils.is_defined(rdx.views)){$.each(rdx.views,function(a,b){if(rdx.utils.is_defined(b)&&rdx.utils.is_defined(a)){b.name=a}})}};this.update_label_map=function(b,a,d){if(rdx.utils.is_not_empty(b)){if(rdx.utils.is_not_defined(d[b])){d[b]=[]}if(jQuery.inArray(a,d[b])==-1){d[b].push(a)}}};this.build_tree_map=function(b){for(var a=0;a<b.length;a++){if(b[a]["_properties"]["nodes"].length>0){var d=rdx.i18n.get_string(b[a]["_properties"]["name"]);if(rdx.utils.is_defined(b[a]["_properties"]["view"])){this.update_label_map(d,b[a]["_properties"]["view"]["name"],this.label_obj);if(rdx.utils.is_defined(b[a]["_properties"]["view"])&&b[a]["_properties"]["view"]["type"]=="TABBED_VIEW"){this.update_label_map(d,b[a]["_properties"]["view"]["tabs"][0]["view"]["name"],this.label_obj)}}this.build_tree_map(b[a]["_properties"]["nodes"])}else{var d=rdx.i18n.get_string(b[a]["_properties"]["name"]);if(rdx.utils.is_defined(b[a]["_properties"]["view"])&&b[a]["_properties"]["view"]["type"]=="TABBED_VIEW"){this.update_label_map(d,b[a]["_properties"]["view"]["tabs"][0]["view"]["name"],this.label_obj)}else{if(rdx.utils.is_defined(b[a]["_properties"]["view"])){this.update_label_map(d,b[a]["_properties"]["view"]["name"],this.label_obj)}}}}};this.get_active_views=function(){return this._active_views};this.update_active_view_list=function(b,d){var a=b.name;if(d){var a=b.name;if(rdx.utils.is_defined(a)){if(this._active_views.hasOwnProperty(a)){delete this._active_views[a]}}}else{if(rdx.utils.is_defined(a)){if(this._active_views.hasOwnProperty(a)){delete this._active_views[a]}this._active_views[a]=b}}};this.get_div_title_subtitle=function(a){if($(a.target.parentElement.firstChild).hasClass("app_search_heading")){this.div_title=rdx.utils.is_defined(a.target.parentElement.firstChild.textContent)?a.target.parentElement.firstChild.textContent:a.target.parentElement.firstChild.innerText;this.div_subtitle=rdx.utils.is_defined(a.target.textContent)?a.target.textContent:a.target.innerText}else{this.div_title=rdx.utils.is_defined(a.target.parentElement.parentElement.firstChild.textContent)?a.target.parentElement.parentElement.firstChild.textContent:a.target.parentElement.parentElement.firstChild.innerText;this.div_subtitle=rdx.utils.is_defined(a.target.parentElement.textContent)?a.target.parentElement.textContent:a.target.parentElement.innerText}};this.options_click_event=function(e,h){h.get_div_title_subtitle(e);var g=h.div_title;var b=h.div_subtitle;var f=h.suggestions_obj[g];var d=$(e.target).attr("id");for(var a=0;a<f.length;){if(f[a]==b){h._search_phrase=b;h._openpage(f[a+1],h.finalobj,b);break}else{a=a+1}}if(a!=f.length){this.current_state=this.states.IDLE;if($(h._parent_div).hasClass("app_search_unhide")){$(h._parent_div).removeClass("app_search_unhide")}h._search_input.val("");h._search_input.val(""+b);$(h._parent_div).addClass("app_search_hide")}};this.options_hover_event=function(u,f){f._search_description_div.remove();var o=document.getElementsByClassName("app_search_hover_background_blue");if(o.length!=0){$(o[0]).removeClass("app_search_hover_background_blue")}f.get_div_title_subtitle(u);var C=f.div_title;var a=f.div_subtitle;if($(u.target.parentElement.firstChild).hasClass("app_search_heading")){$(u.target).addClass("app_search_hover_background_blue")}else{$(u.target.parentElement).addClass("app_search_hover_background_blue")}var n=f.suggestions_obj[C];var m=$("<div/>").addClass("app_search_description_heading");m.text(""+a.toUpperCase());for(var t=0;t<n.length;){if(n[t]==a){var h=n[t+1];var g=rdx.utils.get_view(h);var q=$("<div/>").addClass("app_search_description_div");var v=$("<div/>").addClass("app_search_description_div");if(rdx.utils.is_defined(rdx.i18n.get_string(g.view_properties["title"]))){v.text(""+rdx.i18n.get_string(g.view_properties["title"]))}var z=f.finalobj[h][0];z=z.replace(/([~!@#$%^&*()_+=`{}\[\]\|\\:;'<>,.\/?])+/g," / ").replace(/^(-)+|(-)+$/g,"");z=z.replace("NetScaler/","");q.text("Path :  "+z);if(rdx.utils.is_defined(g.resource_name)){var A=rdx.utils.get_resource(g.resource_name)}var e=false;var b=$("<div/>").addClass("app_search_description_div");if(rdx.utils.is_defined(A)){for(var d in A.properties){var p=rdx.i18n.get_string(A.properties[d]["label"]);if(rdx.utils.is_defined(p)&&p.toLowerCase()==a.toLowerCase()){var b=$("<div/>").addClass("app_search_description_div");var s=rdx.i18n.get_string(A.properties[d]["tooltip"]);e=true;if(f._search_description_div!=null){f._search_description_div.empty()}b.append(s)}}}if(f._search_description_div!=null){f._search_description_div.empty()}var w;var B=a+h;f._search_description_div.append(m);if(e==true){f._search_description_div.append(b)}f._search_description_div.append(q);f._wrap_suggestion_description.append(f._search_description_div);break}else{t=t+2}}};this.create_suggestions_container=function(f){if(f._search_description_div!=null){f._search_description_div.empty();f._search_description_div.remove()}if(f._suggestions_parent_div!=null){f._suggestions_parent_div.empty();f._suggestions_parent_div.remove()}for(var A in f.suggestions_obj){if(A!="undefined"&&f.suggestions_obj.hasOwnProperty(A)){var t=$("<div />").addClass("app_search_suggestions_options");var d=$("<div />").addClass("app_search_heading app_search_suggestions_height");d.text(""+A);$(d).attr("spellcheck",false);t.append(d);var h=0;f._search_description_div=$("<div>").addClass("app_search_description");var v=$("<div/>").addClass("app_search_description_div");for(var w=0;w<f.suggestions_obj[A].length;){var s=f.suggestions_obj[A][w];var o=f.suggestions_obj[A][w+1];var e=f._search_input.val();var q=f._search_input.val().toLowerCase();var n=s.toLowerCase();var z=n.indexOf(q);var p;if(z!=-1){var u=0;var m="";for(var g=z;g<s.length;g++){if(u<e.length){m+=s[g];u++}}p=s.replace(m,"<b>"+m+"</b>")}var b=$("<div/>").addClass("app_search_suggestions_options app_search_suggestions_height app_search_left_padding");var a=s.toLowerCase()+o;$(b).attr("spellcheck",false);$(b).attr("id",o);b.append(p);b.attr("data-count",h);h++;t.append(b);b.bind(rdx.events.CLICK,{that:f},function(B){f.options_click_event(B,f)});$(b).hover(function(B){f.options_hover_event(B,f)});w=w+2;f._suggestions_parent_div.append(t)}}f._wrap_suggestion_description.append(f._suggestions_parent_div);f._parent_div.append(f._wrap_suggestion_description)}};this.show_search_toolbar=function(b){var a=this;var h=a.get_active_views();var e=rdx.utils.object_keys(h);var f=rdx.utils.object_keys(h).length-1;var d=e[f];var o=rdx.utils.get_view(d);var n=o.type;if((n!="CONFIGURE_VIEW"&&n!="ONE_PAGE_WIZARD_VIEW"&&n!="CUSTOM_VIEW")&&a._parent_div!=null){$(a._parent_div).removeClass("app_search_hide");$(a._parent_div).addClass("app_search_unhide");a.remove_pointer();rdx.mask.mask_dom_element($(document.body),"mask_bg");setTimeout(function(p){$(a._search_input).focus()},500)}else{if(a._parent_div==null&&(n!="CONFIGURE_VIEW"&&n!="ONE_PAGE_WIZARD_VIEW"&&n!="CUSTOM_VIEW")){a._parent_div=$("<div>").addClass("app_search");a._wrap_suggestion_description=$("<div>").addClass("app_search_parent_box_shadow");a._search_div=$("<div>").addClass("app_search_action-bar app_search_action_bar_shadow");a._search_div.width("675px");a._search_div.height("89%");a._search_component=$("<div>").addClass("search_component");a._search_input=$("<input />").attr({type:"text",placeholder:rdx.i18n.get_string("Search here"),id:"app_search_input_textbox"}).addClass("mshandler");a._search_component.append(a._search_input);var m=$("<div />").addClass("close-button");a._close_search_button=$("<input />").attr({type:"button"}).addClass("app_search_close");m.append(a._close_search_button);a._search_div.append(a._search_component);a._search_div.append(m);a._parent_div.append(a._search_div);$(document.body).append(a._parent_div);$(a._search_input).focus();$(a._search_input).attr("spellcheck",false);rdx.mask.mask_dom_element($(document.body),"mask_bg");a._suggestions_parent_div=$("<div>").addClass("app_search_suggestion");a._close_search_button.bind(rdx.events.CLICK,{that:a},function(q){var p=q.data.that;p._parent_div.remove();p._parent_div=null;p.app_search_flag=false;rdx.mask.unmask("mask_bg")});$("body").bind(rdx.events.CLICK,{that:a},function(q){if(!$(q.target).closest(".app_search").length&&!$(q.target).closest(".app_search_button_in_header_show").length){var p=q.data.that;if(rdx.utils.is_defined(p._parent_div)){rdx.mask.unmask("mask_bg");p.current_state=p.states.IDLE;if($(p._parent_div).hasClass("app_search_unhide")){$(p._parent_div).removeClass("app_search_unhide")}$(p._parent_div).addClass("app_search_hide")}}});a._search_input.bind(rdx.events.KEYUP,{that:a},function(s){if(s.keyCode==27){if(a._wrap_suggestion_description!=null){a._search_input.val("");a._wrap_suggestion_description.empty();a._wrap_suggestion_description.remove();if(a._no_result_span!=null){a._no_result_span.empty();a._no_result_span.remove();a._no_result_span=null}}}var p=function(){if(rdx.utils.is_not_empty(a._search_input.val())){a.suggestions_obj={};a.finalobj={};var A="^";var t=A+a._search_input.val();t=t.toLowerCase();var z=new RegExp(t);for(var w in a.label_obj){if(a.label_obj.hasOwnProperty(w)){key1=w.toLowerCase();if(a._search_input.val().toLowerCase().split(" ").length==1){var u=key1.split(" ");for(var v=0;v<u.length;v++){u[v]=u[v].toLowerCase();if(z.test(u[v])){a.create_suggestions(w,a)}}}if(z.test(key1)){a.create_suggestions(w,a)}}}if(rdx.utils.is_object_not_empty(a.suggestions_obj)){if(a._no_result_span!=null){a._no_result_span.empty();a._no_result_span.remove();a._no_result_span=null}a.create_suggestions_container(a)}else{a._wrap_suggestion_description.empty();a._wrap_suggestion_description.remove();if(a._no_result_span==null){a._no_result_span=$("<span> No Results </span>").addClass("no_results_css");a._parent_div.append(a._no_result_span)}}}else{if(a._wrap_suggestion_description!=null){a._wrap_suggestion_description.empty();a._wrap_suggestion_description.remove()}}};var q=(function(){var t=0;return function(v,u){clearTimeout(t);t=setTimeout(v,u)}})();q(function(){p()},500)})}else{var g=new rdx.notification_bar().show("Please complete this configuration and then proceed to search.",rdx.INFO)}}};this.create_suggestions=function(a,b){b._search_in_label_obj(a)};this.update_suggestions_map=function(e,d,a,b){if(rdx.utils.is_not_defined(b[e])){b[e]=[]}if(((jQuery.inArray(d,b[e])==-1)&&(jQuery.inArray(a,b[e])==-1))||(((jQuery.inArray(d,b[e])==-1)&&(jQuery.inArray(a,b[e])!=-1)))){b[e].push(d);b[e].push(a)}};this.split_tree_key=function(f,b,a){var e=f.split("^");e.reverse();var d;if(rdx.utils.is_defined(e[1])){d=e[1]+" / "+e[0]}else{d=e[0]}this.update_suggestions_map(d,b,a,this.suggestions_obj)};this.remove_pointer=function(){var a=$(".pointer_container");$(a).removeClass("pointer_container pointer_container shake");$(a).addClass("pointer stop")};this.add_pointer=function(f,e){if(rdx.utils.is_ie()){return}else{var a;var b=$("<div>").addClass("pointer_container pointer_container shake pointer_tab_margin");if(f=="DETAIL_VIEW"||f=="INFORMATION_VIEW"||f=="FEATURE_WELCOME_VIEW"){a='//div[contains(text(), "'+rdx.app_search._search_phrase+"\") and contains(@class,'table_th_label_div')]"}else{if(f=="OVERVIEW_VIEW"){a='//td/div/a[contains(text(), "'+e+'")]';$(b).removeClass("pointer_tab_margin")}else{if(f=="CONFIGURE_VIEW"||f=="ONE_PAGE_WIZARD_VIEW"){a='//td[@fieldfor="'+e+'" or @fieldfor="'+e+"*\"  and not(ancestor::*[contains(@style,'display: none;')])]";$(b).removeClass("pointer_tab_margin")}else{if(f=="TABBED_VIEW"){a='//a/span[contains(text(), "'+e+'")]'}}}}var d=document.evaluate(a,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(rdx.utils.is_defined(d)){$(d).append(b);$(d).bind(rdx.events.MOUSE_OVER,{},function(g){rdx.app_search.remove_pointer()})}else{if(f=="TABBED_VIEW"){a='//div[contains(text(), "'+rdx.app_search._search_phrase+'")]';if(rdx.utils.is_defined(d)){$(d).append(b);$(d).bind(rdx.events.MOUSE_OVER,{},function(g){rdx.app_search.remove_pointer()})}}}}};this._openpage=function(p,e,f){var B=this.finalobj[p][0];this._search_phrase=f;if(this.finalobj[p][1]=="DETAIL_VIEW"||this.finalobj[p][1]=="INFORMATION_VIEW"||this.finalobj[p][1]=="FEATURE_WELCOME_VIEW"||this.finalobj[p][1]=="OVERVIEW_VIEW"){rdx.get_tree().select_node(B);this.add_pointer(this.finalobj[p][1],f)}else{if(this.finalobj[p][1]=="CONFIGURE_VIEW"||this.finalobj[p][1]=="ONE_PAGE_WIZARD_VIEW"){rdx.get_tree().select_node(B);var t=rdx.utils.get_view(p);var o=this.finalobj[p][2];t.view_properties.toggle_view=true;var b=new rdx.base_view(rdx.page.get_content(),t);var a=b.get_view_context();if(o=="DETAIL_VIEW"){a.set_url_params({is_data_set:true})}b.prepare_view();this.app_search_flag=false;this.add_pointer(this.finalobj[p][1],f)}else{if(this.finalobj[p][2]=="TABBED_VIEW"){var m=rdx.utils.get_view(e[p][1]);rdx.get_tree().select_node(B);var A=rdx.global_title_bar.get_current_crumb().prev_crumb;var z=A.view_info.base_view.get_view();var b=A.view_info.base_view;var C;for(var w=0;w<m.tabs.length;w++){if(m.tabs[w]["view"]["name"]==p||m.tabs[w]["view"]["view_properties"]["help_id"]==p){C=m.tabs[w]["title"];if(C==undefined||C=="undefined"){C=rdx.i18n.get_string(m.tabs[w]["view"]["view_properties"]["title"])}break}}var d=b.get_view().get_tabbed_element(C);var q=b.get_view().get_tabbed_view_definition(C);z._tab_clicked(d,q);this.add_pointer(this.finalobj[p][2],f)}else{if(this.finalobj[p][2]=="ONE_PAGE_WIZARD_VIEW"){this.current_state=this.states.SEARCHING;var g=this.finalobj[p][0];var v=p;var n=this.finalobj[p][1];rdx.get_tree().select_node(g);var t=rdx.utils.get_view(n);var b=rdx.view_utils.show_view_in_full_page(t);b.prepare_view();for(var w=0;w<t.advanced_pages.length;w++){if(t.advanced_pages[w]["view"]==p||t.advanced_pages[w]["summary_view"]==p){var u=document.getElementsByClassName("op_wizard_adv_view_container")[w];var h=u.childNodes;var s=$("<div>").addClass("pointer_container pointer_container shake");$(h).append(s);$(window).scrollTop($(s).position().top)}}}}}}rdx.mask.unmask("mask_bg")};this.get_title_from_overview=function(b,f){for(var e=0;e<b.length;e++){if(rdx.utils.is_defined(b[e]["links"])){this.get_title_from_overview(b[e]["links"],f)}else{if(rdx.utils.is_defined(b[e]["title"])){var g=rdx.i18n.get_string(b[e]["title"]);if(rdx.utils.is_defined(g)){if(rdx.utils.is_defined(f.name)){var a=f.name;if(rdx.utils.is_defined(f.__tree_key)){this.update_view_map(a,f.__tree_key,"DETAIL_VIEW","OVERVIEW_VIEW",this.view_info_obj);if(rdx.utils.is_defined(b[e]["view"])||rdx.utils.is_defined(b[e]["click_handler_callback"])){var d;if(rdx.utils.is_defined(b[e]["view"])){if(rdx.utils.is_defined(b[e]["view"]["name"])){d=b[e]["view"]["name"]}}else{if(rdx.utils.is_defined(b[e]["view"])){d=b[e]["view"]}}this.update_label_map(g,a,this.label_obj);this.update_view_map(d,f.__tree_key,"CONFIGURE_VIEW","OVERVIEW_VIEW",this.view_info_obj)}}}}}else{this.get_title_from_overview(b[e],f)}}}};this.update_label_view_map_for_overview=function(a,b){this.update_view_map(b,a.__tree_key,a.type,"OVERVIEW_VIEW",this.view_info_obj);this.get_title_from_overview(a.nodes,a)};this.update_label_view_map_for_tabbed_view=function(d,f){for(var g=0;g<d.tabs.length;g++){var h,m;if(rdx.utils.is_defined(d.tabs[g]["view"])){if(rdx.utils.is_defined(d.tabs[g]["view"]["name"])){h=d.tabs[g]["view"]["name"]}if(rdx.utils.is_not_defined(d.tabs[g]["title"])){m=d.tabs[g]["view"]["view_properties"]["title"]}else{m=d.tabs[g]["title"]}if(rdx.utils.is_defined(d.__tree_key)){this.update_label_map(rdx.i18n.get_string(m),h,this.label_obj);this.update_view_map(h,d.__tree_key,f,"TABBED_VIEW",this.tabjson)}if(rdx.utils.is_defined(d.tabs[g]["view"]["resource_operations"])&&(rdx.utils.is_defined(d.tabs[g]["view"]["resource_operations"]["add"]))){if(rdx.utils.is_defined(d.tabs[g]["view"]["resource_operations"]["add"]["view"])){var n=rdx.utils.get_view(d.tabs[g]["view"]["resource_operations"]["add"]["view"]);try{var b=rdx.utils.get_resource(n.resource_name);if(rdx.utils.is_defined(b)){var e="create "+(rdx.i18n.get_string(b.obj_type)).toLowerCase();this.update_label_map(e,n.name,this.label_obj);this.update_view_map(n.name,d.__tree_key,"CONFIGURE_VIEW","DETAIL_VIEW",this.view_info_obj)}}catch(a){}}}}}};this.update_view_map_for_op_view=function(b,d){if(rdx.utils.is_defined(b.pages)){for(var a=0;a<b.pages.length;a++){this.update_label_map(b.pages[a]["view"],d,this.opjsonobj)}}if(rdx.utils.is_defined(b.advanced_pages)){for(var a=0;a<b.advanced_pages.length;a++){this.update_label_map(b.advanced_pages[a]["view"],d,this.opjsonobj)}}};this.search_for_label=function(f,n,e){for(var a in f){if(rdx.utils.is_defined(f[a]["label"])){var g=rdx.i18n.get_string(f[a]["label"]);this.update_label_map(g,e,this.label_obj)}else{if(n=="domain_gslbvserver_binding"||rdx.utils.is_not_defined(n)){}else{var m,d;if((rdx.utils.is_defined(n))&&n){try{d=rdx.utils.get_resource(n);if(rdx.utils.is_defined(d.properties)){m=d.properties;if((rdx.utils.is_defined(m[a]))&&(rdx.utils.is_defined(m[a]["label"]))){var h=rdx.i18n.get_string(m[a]["label"]);if(rdx.utils.is_defined(h)){this.update_label_map(h,e,this.label_obj)}}}}catch(b){}}}}}};this.build_label_map=function(e,f){if(rdx.utils.is_defined(e.resource_properties)){if((e.resource_properties.length==1)||rdx.utils.is_not_defined(e.resource_properties.length)){if(rdx.utils.is_defined(e.resource_properties["form_fields"])){this.search_for_label(e.resource_properties["form_fields"],e.resource_name,f)}else{if(rdx.utils.is_defined(e.resource_properties[0])){this.search_for_label(e.resource_properties[0]["form_fields"],e.resource_name,f)}else{this.search_for_label(e.resource_properties,e.resource_name,f)}}}else{for(var d=0;d<e.resource_properties.length;d++){if(rdx.utils.is_defined(e.resource_properties[d]["form_fields"])){this.search_for_label(e.resource_properties[d]["form_fields"],e.resource_name,f)}else{if(rdx.utils.is_defined(e.resource_properties[d]["form_sections"])){if(e.resource_properties[d]["form_sections"].length==1){this.search_for_label(e.resource_properties[d]["form_sections"][0]["form_fields"],e.resource_name,f)}else{for(var a=0;a<e.resource_properties[d]["form_sections"].length;a++){if(rdx.utils.is_defined(e.resource_properties[d]["form_sections"][a]["form_fields"])){this.search_for_label(e.resource_properties[d]["form_sections"][a]["form_fields"],e.resource_name,f)}else{if(rdx.utils.is_defined(e.resource_properties[d]["form_sections"][a]["columns"])){if(e.resource_properties[d]["form_sections"][a]["columns"].length==1){this.search_for_label(e.resource_properties["form_sections"][a]["columns"]["form_fields"],e.resource_name,f)}else{for(var g=0;g<e.resource_properties[d]["form_sections"][a]["columns"].length;g++){this.search_for_label(e.resource_properties[d]["form_sections"][a]["columns"][g]["form_fields"],e.resource_name,f)}}}}}}}else{if(rdx.utils.is_defined(e.resource_properties[d]["columns"])){if(e.resource_properties[d]["columns"].length==1){this.search_for_label(e.resource_properties[d]["columns"]["form_fields"],e.resource_name,f)}else{for(var b=0;b<e.resource_properties[d]["columns"].length;b++){this.search_for_label(e.resource_properties[d]["columns"][b]["form_fields"],e.resource_name,f)}}}}}}}}};this.update_label_view_map_for_detail_configview=function(d,e){if(rdx.utils.is_defined(d.__tree_key)){this.update_view_map(e,d.__tree_key,d.type,"DETAIL_VIEW",this.view_info_obj);for(var m in d.resource_operations){if(rdx.utils.is_defined(d.resource_operations[m])&&rdx.utils.is_defined(d.resource_operations[m]["view"])){if(m=="set"||m=="custom operations"){}else{var a;var f=rdx.utils.get_view(d.resource_operations[m]["view"]);a=f.name;if(m=="add"){try{var g=rdx.utils.get_resource(d.resource_name);if(rdx.utils.is_defined(g)){var h="Create "+(rdx.i18n.get_string(g.obj_type));this.update_label_map(h,a,this.label_obj)}}catch(b){}}this.update_view_map(a,d.__tree_key,f.type,"DETAIL_VIEW",this.view_info_obj)}}}}};this._search_in_label_obj=function(g){if(rdx.utils.is_defined(this.label_obj[g])){for(var f in this.label_obj[g]){var a=this.label_obj[g][f];var h;if(rdx.utils.is_defined(this.view_info_obj[a])&&rdx.utils.is_defined(this.view_info_obj[a][0])){this.update_view_map(a,this.view_info_obj[a][0],this.view_info_obj[a][1],this.view_info_obj[a][2],this.finalobj);this.split_tree_key(this.view_info_obj[a][0],g,a)}if(rdx.utils.is_defined(this.opjsonobj[a])){for(var d in this.opjsonobj[a]){var e=this.opjsonobj[a][d];if(rdx.utils.is_defined(this.view_info_obj[e])){var h=this.view_info_obj[e][0];if(rdx.utils.is_defined(h)){this.update_view_map(a,h,this.opjsonobj[a][d],"ONE_PAGE_WIZARD_VIEW",this.finalobj);this.split_tree_key(h,g,a)}}}}if(rdx.utils.is_defined(this.tabjson[a])){for(var b=0;b<this.tabjson[a].length;){var h=this.tabjson[a][b];this.update_view_map(a,this.tabjson[a][b],this.tabjson[a][b+1],this.tabjson[a][b+2],this.finalobj);this.split_tree_key(h,g,a);b=b+3}}}}};this.update_view_map_for_info_feature_view=function(a,b){if(rdx.utils.is_defined(a.__tree_key)){this.update_view_map(b,a.__tree_key,a.type,"INFO/COMPOSITE",this.view_info_obj)}};this.update_view_map=function(e,d,a,b,f){if(rdx.utils.is_not_defined(f[e])){f[e]=[]}if((jQuery.inArray(a,f[e])==-1)||(jQuery.inArray(d,f[e])==-1)){f[e].push(d);f[e].push(a);f[e].push(b)}};this.show_app_search_option_in_header=function(){var a=$(".app_search_button_in_header_hide");if(a){$(a).addClass("app_search_button_in_header_show");$(a).removeClass("app_search_button_in_header_hide")}}};rdx.page.add_event_handler(rdx.events.WINDOW_LOADED,new rdx.callback(rdx.app_search.add_support_info))}rdx.three_pane_dashboard=function(d,b,a){this._base_view=a;this._view_definition=b;this._parent=d;this.is_back_button_required=true;this._DEFAULT_PROPERTIES={add_back_button:true,class_names:null};this._is_action_bar_required=true;this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._resource_operations=$.extend(true,{},this._view_definition.resource_operations);this._left_pane=this._view_definition.left_pane;this._middle_pane=this._view_definition.middle_pane;this._right_pane=this._view_definition.right_pane;this._main_div=$("<div>").addClass("three_pane_dashboard");if(rdx.utils.is_defined(this._properties.class_names)){this._main_div.addClass(this._properties.class_names)}this._parent.append(this._main_div);this._current_page=1;this._page_size=10;this.right_page_size=5;this.right_page_count=1;this._resource=rdx.utils.get_resource(this._middle_pane.resource_name)};rdx.three_pane_dashboard.prototype.make_view=function(){this._render_panes()};rdx.three_pane_dashboard.prototype._render_panes=function(){this._top_container=$("<div>").addClass("top_container");this._main_container=$("<div>").addClass("main_container");this._left_pane_dom=$("<div>").addClass("left_pane");this._middle_pane_dom=$("<div>").addClass("middle_pane");this._right_pane_dom=$("<div>").addClass("right_pane");this._main_div.append(this._top_container).append(this._main_container);this._main_container.append(this._left_pane_dom).append(this._middle_pane_dom).append(this._right_pane_dom);this._render_top_container();this._render_left_pane();this._render_middle_pane();this._right_pane_header=$("<div>").addClass("right_pane_header").appendTo(this._right_pane_dom);this._right_pane_title=$("<div>").addClass("right_pane_title").appendTo(this._right_pane_header);this._right_pane_content=$("<div>").addClass("right_pane_content").appendTo(this._right_pane_dom);var d=this;rdx.mask.mask_component(this._main_container,"three_pane");var b=$("<div>").addClass("pop_out_div").attr("title","Expand/Collapse");var a=$("<span>").addClass("pop_out");b.append(a);this._right_pane_header.append(b);this._poped_out=false;b.bind(rdx.events.CLICK,{},function(e){d.popout_right_pane()});this._right_pane_pagination=$("<div>").addClass("right_pane_pagination").appendTo(this._right_pane_header);this._right_pane_pagination_bottom=$("<div>").addClass("right_pane_pagination").appendTo(this._right_pane_dom)};rdx.three_pane_dashboard.prototype._render_top_container=function(){var h=this;this._resource_properties_div=$("<div>").addClass("resource_properties");if(this._view_definition.resource_summary){var b=rdx.utils.get_view(this._view_definition.resource_summary.view);var g=new rdx.base_view(this._top_container,b);g.prepare_view(true)}this._top_container.append(this._resource_properties_div);if(this._middle_pane.search===true){this.add_search_component(this._top_container)}for(var d in this._resource_operations){if(this._resource_operations.hasOwnProperty(d)){var f=this._resource_operations[d];var e=$("<span>").addClass("plus_sign").append("+");var a=$("<span>").addClass("title_text").append("New Application");this._create_new_item_button=$("<div>").addClass("rdx_button rdx_blue_button").append(e).append(a);this._resource_properties_div.append(this._create_new_item_button);var h=this;this._create_new_item_button.bind(rdx.events.CLICK,{},function(o){if(rdx.utils.is_defined(f.view)){var n=rdx.utils.get_view(f.view);var m=new rdx.base_view(null,n);m.prepare_view()}else{if(rdx.utils.is_defined(f.click_handler_callback)){f.click_handler_callback.call_back()}}})}}};rdx.three_pane_dashboard.prototype._render_left_pane=function(){if(this._left_pane.hidden===true){this._left_pane_dom.hide();this._right_pane_dom.css("width","74%");return}};rdx.three_pane_dashboard.prototype._render_middle_pane=function(d){var b=null;this._middle_content_block=$("<div>").addClass("content");this._middle_pane_dom.append(this._middle_content_block);if(rdx.utils.is_defined(this._view_definition.view_context)){var g=this._view_definition.view_context;var m=g.filter;var a=[];for(var f in m){a.push(f)}b=rdx.url_utils.construct_url_params({is_query_param:true},rdx.url_utils.GET_FILTER_TYPE,a,m)}rdx.model.get_count(rdx.utils.get_resource(this._middle_pane.resource_name),b,new rdx.callback(this,function(n){this._total_middle_count=n;if(n<=this._page_size){$(".middle_pane .pagination").hide()}}));var e={pageno:this._current_page,pagesize:this._page_size};var h=["pageno","pagesize"];if(this._search_by_name===true){e.name=d;h.unshift("name")}if(rdx.utils.is_defined(this._middle_pane.resource_name)){rdx.model.get(rdx.utils.get_resource(this._middle_pane.resource_name),b,new rdx.callback(this,this._update_middle_pane))}if(this._middle_pane.hidden===true){this._middle_pane_dom.hide();this._right_pane_dom.css("width","100%");return}};rdx.three_pane_dashboard.prototype._update_middle_pane=function(f){var a=f[this._middle_pane.resource_name];var d=this;if(a.length==0){this.render_right_pane();return}rdx.utils.sort_array(a,this._middle_pane.title);for(var e=0;e<a.length;e++){var n=$("<div>").addClass("item");var h=$("<div>").addClass("title").appendTo(n);var m=$("<span>").addClass("text").append(a[e][this._middle_pane.title]).appendTo(h).attr("title",a[e][this._middle_pane.title]);var b=$("<div>").addClass("container");var g=$("<div>").addClass("other_info").append(this._middle_pane.renderer_callback.call_back([this._middle_pane.resource_properties,a[e],b]));g.append(b).appendTo(n);this._middle_content_block.append(n);h.bind(rdx.events.CLICK,{data:a[e]},function(p,s,q,t){d._clicked_title=$(p.target).hasClass("title")?$(p.target):$(p.target).parents(".title");$(".middle_pane .selected").removeClass("selected");d._clicked_title.addClass("selected");clearTimeout(d._timeout_interval);if(!(s===true)&&!(t===true)){d.auto_refresh=false;d.right_page_count=1;rdx.mask.mask_component(d._right_pane_dom,"right_pane");$(".pagination .current").val(d.right_page_count)}var o={auto_refresh:s,composite_view:q};if(rdx.utils.is_defined(d._middle_pane.click_handler_callback)){d._middle_pane.click_handler_callback.call_back([p.data.data,d,o])}else{d.render_right_pane()}});if(rdx.utils.is_defined(this._middle_pane.resource_operations)){this._add_resource_operation(a[e],h)}if(e==0){h.trigger(rdx.events.CLICK)}}$(window).bind(rdx.events.SCROLL,{data:this},this._scroll_function)};rdx.three_pane_dashboard.prototype._add_resource_operation=function(m,h){var a=this._middle_pane.resource_operations;for(var e in a){if(a.hasOwnProperty(e)){var d=a[e];var b=$("<div>").addClass("operation");var f=$("<span>").addClass("operation_icon").appendTo(b);var g=this;if(e=="remove"){f.addClass("remove").attr("title","Delete")}else{if(e=="edit"){f.addClass("edit").attr("title","Edit")}else{b.append(d.title)}}b.bind(rdx.events.CLICK,{index:e},function(p){if(p.data.index=="remove"){rdx.message_box.confirm(rdx.i18n.get_string("rdx.remove_app_node",{name:m.name}),new rdx.callback(function(){rdx.mask.mask_component(g._main_container,"three_pane");rdx.model.remove(rdx.utils.get_resource(g._middle_pane.resource_name),new rdx.callback(),m)}))}else{if(rdx.utils.is_defined(d.view)){var o=rdx.utils.get_view(d.view);var n=new rdx.base_view(null,o);n.get_view_context().set_url_params(null,m);n.prepare_view()}else{if(rdx.utils.is_defined(d.click_handler_callback)){d.click_handler_callback.call_back()}}}p.stopPropagation()})}h.append(b)}};rdx.three_pane_dashboard.prototype.add_pagination_component=function(f){var b=this;var a=$("<div>").addClass("pagination");var d=$("<div>").addClass("previous").append("< Back");var e=$("<div>").addClass("next").append("Next >");d.click(function(g){if(b._current_page==1){return}else{clearTimeout(b._timeout_interval);b.auto_refresh=false;b._current_page--;b._middle_pane_dom.empty();b._right_pane_content.empty();b._render_middle_pane()}});e.click(function(g){clearTimeout(b._timeout_interval);if(b._total_middle_count<=b._current_page*b._page_size){return}else{b.auto_refresh=false;b._current_page++;b._middle_pane_dom.empty();b._right_pane_content.empty();b._render_middle_pane()}});a.append(d).append(e);f.append(a)};rdx.three_pane_dashboard.prototype.add_right_pane_pagination_component=function(g){var m=this;var n=$("<div>").addClass("pagination");var d=$("<div>").addClass("previous page").append("< Back");var a=$("<div>").addClass("next page").append("Next >");var f=this.right_pane_max_items;var o=Math.ceil(f/this.right_page_size);n.append(d);if(o<=1){n.hide()}var h=$("<div>").addClass("content").appendTo(n);var b=$("<input type='text'>").addClass("current").attr("value",m.right_page_count);var e=$("<span>").addClass("total").append(o);h.append("Showing").append(b).append("of").append(e);b.bind(rdx.events.KEYDOWN,{},function(p){if((p.keyCode>=48&&p.keyCode<=57)||(p.keyCode==8)){}else{p.preventDefault()}});b.bind(rdx.events.KEYUP,{},function(q){if(q.keyCode!==13){return}var p=parseInt(b.val());if(rdx.utils.is_empty(p)||p==0){return}if(p>o){p=o;b.val(o)}rdx.mask.mask_component(m._right_pane_dom,"right_pane");m.auto_refresh=false;m.right_page_count=p;$(".pagination .current").val(m.right_page_count);m._clicked_title.trigger(rdx.events.CLICK,[false,null,true])});d.click(function(p){if(m.right_page_count==1){return}else{rdx.mask.mask_component(m._right_pane_dom,"right_pane");m.auto_refresh=false;m.right_page_count--;$(".pagination .current").val(m.right_page_count);m._right_pane_content.empty();m._clicked_title.trigger(rdx.events.CLICK,[false,null,true])}});a.click(function(p){if(m.right_pane_max_items<=m.right_page_count*m.right_page_size){return}else{rdx.mask.mask_component(m._right_pane_dom,"right_pane");m.auto_refresh=false;m.right_page_count++;$(".pagination .current").val(m.right_page_count);m._right_pane_content.empty();m._clicked_title.trigger(rdx.events.CLICK,[false,null,true])}});n.append(a);g.empty().append(n)};rdx.three_pane_dashboard.prototype.render_right_pane=function(a){var f=this;if(rdx.utils.is_not_defined(this._total_middle_count)||this._total_middle_count===0){this._right_pane_header.hide();this._middle_pane_dom.hide();this._right_pane_dom.width("100%");var e=$("<a>").addClass("").append("Click here");var d=$("<div>").addClass("no_items_message").append(e).append(" to define new applications.");if(rdx.utils.is_defined(this._properties.no_items_message)){d=$("<div>").addClass("no_items_message").append(this._properties.no_items_message)}e.click(function(){f._create_new_item_button.trigger(rdx.events.CLICK)});rdx.mask.unmask_component(this._main_container,"three_pane");rdx.mask.unmask_component(this._right_pane_dom,"right_pane");this._right_pane_content.append(d);return}this._right_pane_title.text(this._clicked_title.text());this._right_pane_content.empty();a=rdx.utils.is_defined(a)?a:rdx.utils.get_view(this._right_pane.view);var g=new rdx.base_view(this._right_pane_content,a);var b=g.get_view_context();b.set_url_params({is_data_set:true});g.prepare_view(true);rdx.mask.unmask_component(this._main_container,"three_pane");rdx.mask.unmask_component(this._right_pane_dom,"right_pane");this.add_right_pane_pagination_component(this._right_pane_pagination_bottom);this.refresh_right_view(g)};rdx.three_pane_dashboard.prototype.refresh_right_view=function(b){var a=this;if(this._properties.auto_refresh===false){return}this._timeout_interval=setTimeout(function(){a.auto_refresh=true;a._clicked_title.trigger(rdx.events.CLICK,[true,b])},7*1000)};rdx.three_pane_dashboard.prototype.update_right_pane=function(f,m){var a=m.get_view_context();a.set_url_params({is_data_set:true},f);var q=m._view_definition.views;var h=0;for(var g in q){var s=q[g].view_definition.views;for(var p in s){var n=s[p].view_definition.tabs[0]["view"]["views"];for(var b in n){if(n[b]["view_definition"]["type"]=="TABBED_VIEW"){var o=n[b]["view_definition"]["tabs"];for(var e=0;e<o.length;e++){var d=o[e];d.view.response_callback.params[0]=f[h]}}else{n[b].view_definition.response_callback.params[0]=f[h]}}}h++}m.refresh_view(a,false);this.refresh_right_view(m)};rdx.three_pane_dashboard.prototype.add_search_component=function(f){var e=this;var b=$("<input type = 'text'>").addClass("search_text").attr("placeholder","Search");var d=$("<span>").addClass("search_image");var a=$("<div>").addClass("block_search").append(d).append(b);f.append(a);b.bind(rdx.events.KEYUP,{dom:f,input_type:b},function(h){var m=h.data.dom;var g=h.data.input_type.val().toLocaleLowerCase();e._middle_pane_dom.find(".item").each(function(n,o){if(($(o).find(".title").text()).toLocaleLowerCase().indexOf(g)>-1){$(o).show()}else{$(o).hide()}})})};rdx.three_pane_dashboard.prototype._scroll_function=function(b){var a=rdx.utils.is_defined(b)?b.data.data:this;var e=$(window).scrollTop();var f=$(window).scrollLeft();if(rdx.utils.is_defined(a._middle_pane_dom)){if(e>=rdx.page.get_header_height()+170){var d=e-(rdx.page.get_header_height()+165);a._middle_pane_dom.addClass("fixed").css("top",d)}else{if(a._middle_pane_dom.hasClass("fixed")){a._middle_pane_dom.removeClass("fixed")}}}};rdx.three_pane_dashboard.prototype.register_event_handlers=function(){rdx.model.add_model_change_listener(this._resource,new rdx.callback(this._base_view,this._base_view.refresh_view))};rdx.three_pane_dashboard.prototype.destroy_view=function(){rdx.model.remove_model_change_listener(this._resource)};rdx.three_pane_dashboard.prototype.get_view_context=function(){return this.get_base_view().get_view_context()};rdx.three_pane_dashboard.prototype.refresh_view=function(a){clearTimeout(this._timeout_interval);this.right_page_count=1;this.auto_refresh=false;this._main_div.empty();this.make_view()};rdx.three_pane_dashboard.prototype.popout_right_pane=function(){if(this._poped_out==false){this._middle_pane_dom.hide(500);this._right_pane_dom.width("100%");this._right_pane_dom.css("transition","width 1s");this._poped_out=true}else{this._middle_pane_dom.show(600);this._right_pane_dom.width("74%");this._right_pane_dom.css("transition","width 0.5s");this._poped_out=false}};rdx.three_pane_dashboard.prototype.get_is_back_button_required=function(){return false};rdx.three_pane_dashboard.prototype.get_toolbar_items=function(){this._add_tool_bar();return this._toolbar_items};rdx.three_pane_dashboard.prototype._add_tool_bar=function(){var b=this;var a=[new rdx.action({tooltip:rdx.i18n.get_string("rdx.refresh"),image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this.refresh_view)})];this._toolbar_items=a};rdx.three_pane_dashboard.prototype.is_title_required=function(){return false};rdx.three_pane_dashboard.prototype.close_view=function(){this._base_view.destroy_view()};rdx.visualizer=function(d,b,a){this._base_view=a;this._view_definition=b;this.is_back_button_required=true;this._parent=d;this._toolbar_items=null;this._DEFAULT_PROPERTIES={margin:{top:80,right:20,bottom:50,left:80},margin_for_indent:false,is_tool_bar_required:true,is_refresh_required:false,width:1000,height:500,vertical_offset:rdx.constants.DEFAULT_VERTICAL_OFFSET,horizontal_offset:rdx.constants.DEFAULT_HORIZONTAL_OFFSET,add_back_button:false,zoom_behaviour:false,show_export:false,class_names:null,root_position_horizontal:rdx.constants.LEFT,root_position_vertical:rdx.constants.DEFAULT_ROOT_POSITION};this._DEAFULT_SVG_PROPERTIES={background:"#fff",border:"#fff"};this._DEFAULT_BLOCK_CHILDREN_PROPERTIES={connector_type:rdx.constants.LINE,position:rdx.constants.BOTTOM,connected_to:rdx.constants.FIRST,render_add:rdx.constants.TOP,column_connection:null};this._is_action_bar_required=true;this._properties=$.extend(true,this._DEFAULT_PROPERTIES,this._view_definition.view_properties);this._svg_properties=$.extend(true,this._DEAFULT_SVG_PROPERTIES,this._properties.svg_properties);this._connectors=[];this._extra_connections={};this._map_of_shapes=new Map()};rdx.visualizer.prototype.make_view=function(){rdx.mask.mask_component(this._parent,"_visualizer_view");if(this._properties.is_refresh_required){var g=$(document.createElement("img")).attr("src",rdx.images.REFRESH_IMG).attr("alt","Refresh").attr("title","Refresh").bind(rdx.events.CLICK,{visualizer_ref:this},function(t){t.data.visualizer_ref.refresh_view(t)});var o=$("<div>").attr("title","Refresh").addClass("visualizer_refresh_div").append(g);this._parent.append(o)}if(this._properties.zoom_behaviour){var p=$(document.createElement("div")).attr("class","zoom_div");var a=$(document.createElement("button")).attr("class","zoom-in").attr("direction","1").attr("aria-label","Visualizer Zoom - In").attr("parent_width",this._properties.width).attr("parent_height",this._properties.height).attr("parent_class",this._properties.class_names);var f=$("<div>").addClass("widget-zoom-icon");a.append(f);p.append(a);var h=$(document.createElement("button")).attr("class","zoom-out").attr("direction","-1").attr("aria-label","Visualizer Zoom - Out").attr("parent_width",this._properties.width).attr("parent_height",this._properties.height).attr("parent_class",this._properties.class_names);var m=$("<div>").addClass("widget-zoom-icon");h.append(m);p.append(h);this._parent.append(p);function q(){d3.select("."+rdx.dep_class_name).attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}zoomListener=d3.behavior.zoom().scaleExtent([0.2,3]).on("zoom",q);function s(){d3.select("."+rdx.dep_class_name).attr("transform","translate(50,100 )scale("+zoomListener.scale()+")")}function e(v,u,t){return d3.transition().duration(350).tween("zoom",function(){var z=d3.interpolate(zoomListener.translate(),v),w=d3.interpolate(zoomListener.scale(),u);return function(C){zoomListener.scale(w(C)).translate(z(C));s();var A=d3.select("."+rdx.dep_class_name).node().getBBox().height;var D=d3.select("."+rdx.dep_class_name).node().getBBox().width;var B=d3.select("."+rdx.dep_class_name).node().getAttribute("predef_width");var E=d3.select("."+rdx.dep_class_name).node().getAttribute("predef_height");if(A>E){d3.select("."+rdx.dep_class_name).attr("height",A+150)}else{d3.select("."+rdx.dep_class_name).attr("height",E)}if(D>B){d3.select("."+rdx.dep_class_name).attr("width",D+100)}else{d3.select("."+rdx.dep_class_name).attr("width",B)}$("."+d3.select("."+rdx.dep_class_name).node().getAttribute("selector")).trigger(d3.select("."+rdx.dep_class_name).node().getAttribute("event_triggered"))}})}function d(){var w=1,t=0.4,v=1,z,u=$(this).attr("parent_class");center=[d3.select("."+u).node().getAttribute("width")/2,d3.select("."+u).node().getAttribute("height")/2],extent=zoomListener.scaleExtent(),translate=zoomListener.translate(),translate0=[],l=[],view={x:translate[0],y:translate[1],k:zoomListener.scale()};w=$(this).attr("direction");d3.event.preventDefault();rdx.dep_class_name=u;v=zoomListener.scale()*(1+t*w);if(v<extent[0]||v>extent[1]){return false}translate0=[(center[0]-view.x)/view.k,(center[1]-view.y)/view.k];view.k=v;l=[translate0[0]*view.k+view.x,translate0[1]*view.k+view.y];view.x+=center[0]-l[0];view.y+=center[1]-l[1];e([view.x,view.y],view.k),u}if(rdx.utils.is_defined(this._properties.zoom_class)){a.addClass(this._properties.zoom_class);h.addClass(this._properties.zoom_class);d3.selectAll("."+this._properties.zoom_class).on("click",d)}else{a.addClass("zoom-btn");h.addClass("zoom-btn");d3.selectAll(".zoom-btn").on("click",d)}}this._svg=d3.select(this._parent[0]).append("svg").attr("height",this._properties.height).attr("width",this._properties.width).classed("visualizer_svg",true).attr("predef_height",this._properties.height).attr("predef_width",this._properties.width);for(var b in this._svg_properties){if(this._svg_properties.hasOwnProperty(b)){this._svg=this._svg.style(b,this._svg_properties[b])}}var n=this._svg.append("g").attr("transform","translate("+this._properties.margin.left+","+this._properties.margin.top+")").classed("visualizer_elements",true).attr("predef_height",this._properties.height).attr("predef_width",this._properties.width);if(rdx.utils.is_defined(this._properties.zoom_event)){n.attr("selector",this._properties.zoom_event.selector);n.attr("event_triggered",this._properties.zoom_event.event_triggered)}if(rdx.utils.is_defined(this._properties.class_names)){n.attr("class",this._properties.class_names)}this._connectors_group=n.append("g").classed("connectors",true);this._shapes=n.append("g").classed("nodes",true)};rdx.visualizer.prototype.get_resource_response_arrived=function(b){this._root=b;this._root.X=this._properties.height;this._root.Y=0;var e;this._root_node=this._render_root(b);if(rdx.utils.is_defined(b.children)){e=this._shapes.append("g");this._render_shapes(this._root.children,{parent_node:this._root_node,parent:e})}if(rdx.utils.is_defined(b.block_children)){e=this._shapes.append("g");var d=$.extend(true,this._DEFAULT_BLOCK_CHILDREN_PROPERTIES,b.block_properties);this._process_block_children(b.block_children);this._render_block_children(b.block_children,{parent_node:this._root_node,parent:e,max_length:rdx.visualizer_utils.get_max_length(b.block_children)},d)}this._process_other_connections(b.children);this._adjust_svg_dimensions();this._adjust_root();this.connect_nodes();if(this._parent.parent().parent().hasClass("custom_visualizer_div")){var a=this._parent.parent().parent().parent().parent()[0];d3.select(a).attr("width",this._svg.node().getBBox().width).attr("height",this._svg.node().getBBox().height)}rdx.mask.unmask_all_components()};rdx.visualizer.prototype._adjust_root=function(){var h=this._shapes.node().getBBox().height;var f=this._properties.root_position_vertical;var e=this._shapes.node().getBBox().width;var g=this._properties.root_position_horizontal;var n=this._root_node.node().getAttribute("X");var m=this._root_node.node().getAttribute("Y");var d=this._root_node.node().getBBox().height;var b=this._root_node.node().getBBox().width;var a;if(this._properties.root_position_vertical!=rdx.constants.TOP){if(this._properties.root_position_vertical==rdx.constants.BOTTOM){f=h}else{if(this._properties.root_position_vertical==rdx.constants.CENTER){f=h/2}}if(this._root_node.node().nodeName==rdx.constants.IMAGE){f=f-this._root_node.node().getBBox().height}a="translate( 0,"+(f-m)+")";this._root_node.attr("transform",a);this._root_node.attr("Y",f)}if(this._properties.root_position_horizontal!=rdx.constants.LEFT){if(this._properties.root_position_horizontal==rdx.constants.RIGHT){g=e}else{if(this._properties.root_position_horizontal==rdx.constants.CENTER){g=e/2-this._root_node.node().getBBox().width/2}}a="translate( "+(g-n)+",0)";this._root_node.attr("transform",a);this._root_node.attr("X",g)}rdx.visualizer_utils.transform_node(this._root_node);if(this._root_node.node().getAttribute("class")==rdx.constants.CUSTOM_SHAPE){X=b/2;Y=d/2;if(!(this._root_node.node().getAttribute("middle_connection")==="false")){Y-=20}this._root_node.attr("X",X);this._root_node.attr("Y",Y);this._root_node.attr("transform","translate(0,0)")}};rdx.visualizer.prototype._adjust_svg_dimensions=function(){var b=this._shapes.node().getBBox().width;var a=this._shapes.node().getBBox().height;var d=(this._properties.margin_for_indent)?0:this._properties.margin.left;if((b+d)>this._properties.width){this._svg.attr("width",b+100)}else{this._svg.attr("width",this._properties.width)}if((a+this._properties.margin.top)>this._properties.height){this._svg.attr("height",a+100)}else{this._svg.attr("height",this._properties.height)}if(rdx.utils.is_defined(this._properties.class_names)){$("."+this._properties.class_names).attr("width",this._svg.node().getAttribute("width"));$("."+this._properties.class_names).attr("height",this._svg.node().getAttribute("height"))}};rdx.visualizer.prototype._render_root=function(b){var a=new rdx.shapes(this._shapes,b);var d=a.render(this);b.shape_ref=d;d.attr("id","root_node");d.attr("X",0);d.attr("Y",0);return d};rdx.visualizer.prototype._render_shapes=function(m,d){for(var f=0;f<m.length;f++){if(rdx.utils.is_defined(m[f].hidden)){m[f].styles={};m[f].styles.visibility="hidden"}var n=d.parent.append("g");var q=new rdx.shapes(n,m[f]);var h=q.render(this);m[f].shape_ref=h;m[f].parent_ref=n;if(rdx.utils.is_defined(m[f]["id"])){this._map_of_shapes[m[f]["id"]]=m[f]}if(rdx.utils.is_defined(m[f].position)){d.position=m[f].position}else{d.position=rdx.constants.RIGHT}this.transform(d,f,h,m);var g=this;this._connectors.push({source:m[f],target:d.parent_node,properties:m[f].connector});if(rdx.utils.is_defined(m[f].block_children)){var a={};a=$.extend(true,a,this._DEFAULT_BLOCK_CHILDREN_PROPERTIES,m[f].block_properties);var p=n.append("g").classed("block_children",true);if(m[f].block_children.length>0){this._process_block_children(m[f].block_children);this._render_block_children(m[f].block_children,{parent_node:h,parent:p,max_length:rdx.visualizer_utils.get_max_length(m[f].block_children)},a)}}if(rdx.utils.is_defined(m[f].add_new_children)&&m[f].add_new_children===true){m[f]=rdx.visualizer_utils.add_new_item_to_child_list(m[f],g)}if(rdx.utils.is_defined(m[f].children)&&m[f].children.length>0){var o=n.append("g");m[f].child_group=o;this._render_shapes(m[f].children,{parent_node:h,parent:o});this._adjust_elements(m,f,h)}if(rdx.utils.is_defined(m[f].connect_to)){if(rdx.utils.is_not_defined(this._extra_connections[m[f].connect_to])){this._extra_connections[m[f].connect_to]=[]}this._extra_connections[m[f].connect_to].push({source:m[f]})}if(rdx.utils.is_defined(this._extra_connections[m[f].id])){var b=this._extra_connections[m[f].id];for(var e=0;e<b.length;e++){b[e].target=h;this._connectors.push(b[e])}}}};rdx.visualizer.prototype._process_other_connections=function(a){for(var d=0;d<a.length;d++){if(rdx.utils.is_defined(a[d].other_connections)&&rdx.utils.is_not_empty(a[d].other_connections)){for(var e=0;e<a[d].other_connections.length;e++){var b={path_type:rdx.constants.DIAGONAL_CONNECTOR,middle:true,highlight:true,arrow:true};if(rdx.utils.is_defined(a[d].other_connections.reverse_attr)){b.reverse_attr=true}this._connectors.push({source:a[d],target:this._map_of_shapes[a[d].other_connections[e]].shape_ref,properties:b})}}if(rdx.utils.is_defined(a[d].children)&&a[d].children.length>0){this._process_other_connections(a[d].children)}}};rdx.visualizer.prototype._process_block_children=function(a){for(var b=0;b<a.length;b++){if(rdx.utils.is_not_defined(a[b].column)){a[b].column=[]}if(a[b].column.length===0&&rdx.utils.is_defined(a[b].zero_count_message)){a[b].column.push({label:{name:a[b].zero_count_message,position:rdx.constants.CENTER},shape:{type:rdx.constants.RECTANGLE}})}}};rdx.visualizer.prototype._render_block_children=function(v,n,f){var m=this;var d=[];var B=[];for(var E=0;E<v.length;E++){var h=E;v[E].max_width=0;var w=[];var p=0;var t={hidden:"true"};var D=(rdx.utils.is_defined(v[E].add_view))?true:false;var s={items:v[E],len:n.max_length+1,obj:t,flag:D,render_add:f.render_add};v[E]=rdx.visualizer_utils.normalize_array_items(s,m);x_y_coords=this._calculate_x_y_for_blocks(v,n,f,h);x_coord=x_y_coords.x_coord;if(rdx.utils.is_defined(x_y_coords.y_coord)){y_coord=x_y_coords.y_coord}else{x_y_coords.y_coord=y_coord}if(rdx.utils.is_defined(v[E].label)){this._render_label_for_blocks(v,n.parent,E,x_y_coords)}render_col:for(k=0;k<v[E].column.length;k++){var A=v[E].column[k];var q=x_coord;if(rdx.utils.is_defined(A.hidden)){A.styles={};A.styles.visibility="hidden";if(rdx.utils.is_defined(v[E].render_hidden)&&v[E].render_hidden===false){continue render_col}}var e=new rdx.shapes(n.parent,v[E].column[k]);w[k]=e.render(m);A.shape_ref=w[k];A.parent_ref=n.parent;var u=n.parent.node().getBBox().height;var b=n.parent.node().getBBox().width;var g=rdx.utils.is_defined(v[E].vertical_offset)?v[E].vertical_offset:(this._properties.vertical_offset);var o=p;if(k-p>2){o=p+2}switch(f.position){case rdx.constants.BOTTOM:Y=y_coord+((o+1)*g);break;case rdx.constants.ADJACENT:Y=y_coord+(o*g);break;default:break}p++;w[k].attr("X",q);this._process_transform_for_block_node(w[k],w[k-1],{x_pos:q,Y:Y});if(v[E].max_width<w[k].node().getBBox().width){v[E].max_width=w[k].node().getBBox().width}if(k===0){if(f.column_connection==rdx.constants.CASCADE_CONNECTION){B.push({src_ref:w[k]})}}if(k==v[E].column.length-1){if(f.column_connection==rdx.constants.GROUP_CONNECTION){d.push({src_ref:w[k]})}}var z={block_children_props:f,curr_item_index:k,curr_block_index:E,parent_node:n.parent_node};this._process_connections_for_blocks(v,w,z)}}m._process_first_last_nodes(d,B);m._process_connections_among_blocks(v,f);var C=n.parent.node().getBBox().width;var a=n.parent.node().getBBox().height;if(rdx.utils.is_defined(f.offset_from_parent)){C+=(f.offset_from_parent)}n.parent_node.attr("block_width",C).attr("block_height",a).attr("block_children","true")};rdx.visualizer.prototype._calculate_x_y_for_blocks=function(n,g,a,m){var e=m;var f;var h=0;var b=g.parent_node.node().getAttribute("Y")||0;var d=g.parent_node.node().getAttribute("X")||0;if(rdx.utils.is_defined(g.parent_node.node().getAttribute("custom"))){d=parseInt(d)+parseInt(g.parent_node.node().getAttribute("width"))}if(e===0){switch(a.position){case rdx.constants.BOTTOM:h=rdx.utils.is_defined(a.offset_from_parent)?a.offset_from_parent:(e*this._properties.horizontal_offset);if(rdx.utils.is_defined(g.parent_node.node().getAttribute("custom"))){f=parseInt(b)+parseInt(g.parent_node.node().getAttribute("height"))}else{f=parseInt(b)+g.parent_node.node().getBBox().height}break;case rdx.constants.ADJACENT:h=rdx.utils.is_defined(n[m].horizontal_offset)?n[m].horizontal_offset:(1.5*this._properties.horizontal_offset);f=parseInt(b);break;default:break}}else{while(e){e--;if(rdx.utils.is_defined(n[e])){h=n[e].x_offset+n[e].max_width}}h+=rdx.utils.is_defined(n[m].horizontal_offset)?n[m].horizontal_offset:this._properties.horizontal_offset/2.5}n[e].x_offset=h;return{x_coord:parseInt(d)+h,y_coord:f}};rdx.visualizer.prototype._render_label_for_blocks=function(a,e,b,f){var d={};d.label=a[b].label.name;d.parent=e;d.position={};if(b%2===0){d.position.x=(f.x_coord-10)}else{d.position.x=(f.x_coord+10)}d.position.y=(f.y_coord+10);text=rdx.visualizer_utils.render_label(d);if(b%2===0){text.attr("x",(d.position.x-text.node().getBBox().width))}};rdx.visualizer.prototype._process_transform_for_block_node=function(a,d,b){if(a.node().getAttribute("class")!=rdx.constants.CUSTOM_SHAPE){if(rdx.utils.is_defined(d)&&d.node().getAttribute("class")==rdx.constants.CUSTOM_SHAPE){b.x_pos+=d.node().getAttribute("width")/2;a.attr("X",b.x_pos);d.attr("X",b.x_pos)}}a.attr("Y",Y);if(a.node().nodeName===rdx.constants.RECTANGLE||a.node().nodeName===rdx.constants.IMAGE){b.x_pos=b.x_pos-((a.node().getBBox().width)/2);b.Y=b.Y-((a.node().getBBox().height)/2)}a.attr("transform","translate("+b.x_pos+","+b.Y+")")};rdx.visualizer.prototype._process_connections_for_blocks=function(q,b,o){var s=o.block_children_props;var e=o.curr_item_index;var a=o.curr_block_index;if(e===0&&a===0){if(s.connected_to==rdx.constants.FIRST){if(s.flow===true){this._connectors.push({target:o.parent_node,source:q[a].column[e],properties:{flow:true}})}else{this._connectors.push({source:q[a].column[e],target:o.parent_node})}}}if(e>0){var g=s.connector_type;if(rdx.utils.is_defined(q[a].connector_type)){g=q[a].connector_type}if(g!="none"){this._connectors.push({source:q[a].column[e],target:b[e-1],properties:{path_type:g}})}if(s.column_connection==rdx.constants.CASCADE_CONNECTION){if(e<q[a].column.length-1){if(a<q.length-1){var d={x:parseInt(b[0].node().getAttribute("X"))+parseInt(b[0].node().getAttribute("width")/2)+(this._properties.horizontal_offset/4),y:b[0].node().getAttribute("Y")};var t={x:parseInt(b[e].node().getAttribute("X"))+parseInt(b[0].node().getAttribute("width")/2),y:parseInt(b[e].node().getAttribute("Y"))};this._connectors.push({source:t,target:d,properties:{path_type:rdx.constants.STEP_CONNECTOR,extra_line:true}})}}}}if(e==q[a].column.length-1){if(s.connected_to==rdx.constants.MIDDLE){var f=parseInt(q[0].column.length/2);var m=parseInt(q[0].column[f].shape_ref.node().getAttribute("X"))-q[0].column[f].shape_ref.node().getBBox().width/2;if(s.connector_type==rdx.constants.U_TYPE_CONNECTOR){m-=this._properties.horizontal_offset/5}var n={x:parseInt(o.parent_node.node().getAttribute("X")),y:parseInt(o.parent_node.node().getAttribute("Y"))};var h={x:m,y:parseInt(q[0].column[f].shape_ref.node().getAttribute("Y"))-q[0].column[f].shape_ref.node().getBBox().height/2};this._connectors.push({source:n,target:h,properties:{path_type:rdx.constants.DIAGONAL_CONNECTOR,extra_line:true}})}}if(s.position==rdx.constants.BOTTOM&&rdx.utils.is_defined(b[0])){if(s.connect_last_node_to_parent===true){if(a==(q.length-1)&&(e==0)){var p={path_type:rdx.constants.STEP_CONNECTOR,extra_line:true};if(s.flow===true){p.flow=true}this._connectors.push({source:o.parent_node,target:b[0],properties:p})}}}};rdx.visualizer.prototype._process_connections_among_blocks=function(b,e){var d;if(e.column_connection==rdx.constants.INDIVIDUAL_CONNECTION){for(ind=0;ind<b.length-1;ind++){d=rdx.utils.is_defined(b[ind].add_view)?(b[ind].column.length-1):b[ind].column.length;for(j=0;j<d;j++){var a=rdx.utils.is_defined(b[ind+1].add_view)?true:false;var f=rdx.visualizer_utils.get_corresponding_target(b[ind+1].column,j,a);if(rdx.utils.is_defined(f)&&rdx.utils.is_defined(f.shape_ref)){this._connectors.push({source:b[ind].column[j].shape_ref,target:f.shape_ref,properties:{path_type:rdx.constants.STEP_CONNECTOR,middle:true,extra_line:true}})}}}}if(e.column_connection==rdx.constants.ONE_ONE_CONNECTION){for(ind=0;ind<b.length-1;ind++){d=rdx.utils.is_defined(b[ind].add_view)?(b[ind].column.length-1):b[ind].column.length;for(j=0;j<d;j++){if(rdx.utils.is_defined(b[ind+1].column[j])&&rdx.utils.is_defined(b[ind+1].column[j].shape_ref)){if(rdx.utils.is_not_defined(b[ind+1].column[j].hidden)){this._connectors.push({source:b[ind].column[j].shape_ref,target:b[ind+1].column[j].shape_ref,properties:{path_type:rdx.constants.DIAGONAL_CONNECTOR,middle:true,extra_line:true}})}}}}}};rdx.visualizer.prototype._process_first_last_nodes=function(d,e){for(var a=0;a<d.length-1;a++){this._connectors.push({source:d[a].src_ref,target:d[a+1].src_ref})}for(var b=0;b<e.length-1;b++){this._connectors.push({source:e[b].src_ref,target:e[b+1].src_ref,properties:{extra_line:true}})}};rdx.visualizer.prototype.connect_nodes=function(){for(var b=0;b<this._connectors.length;b++){var a=new rdx.connectors(this._connectors_group,this._connectors[b]).render();if(rdx.utils.is_defined(this._connectors[b].properties)&&rdx.utils.is_defined(this._connectors[b].properties.extra_line)){var d=parseInt(b)-1;this._connectors[b].source=this._connectors[d].source}if(rdx.utils.is_defined(this._connectors[b].source.connector_ref)){this._connectors[b].source.connector_ref.push(a)}else{this._connectors[b].source.connector_ref=a}}};rdx.visualizer.prototype.transform=function(m,o,g,p){var n=g.node().getBBox().height>0?g.node().getBBox().height:parseInt(g.node().getAttribute("height"));var f=g.node().getBBox().width>0?g.node().getBBox().width:parseInt(g.node().getAttribute("width"));var b=m.parent_node.node().getAttribute("X")||0;var a=m.parent_node.node().getAttribute("Y")||0;var h=0;var e=rdx.utils.is_defined(p[o].horizontal_offset)?p[o].horizontal_offset:this._properties.horizontal_offset;var t=rdx.utils.is_defined(p[o].vertical_offset)?p[o].vertical_offset:this._properties.vertical_offset;if(o===0){h=parseInt(a)}else{if(rdx.utils.is_not_defined(p[o].children)&&rdx.utils.is_not_defined(p[o].block_children)){if(rdx.utils.is_defined(p[o-1].shape_ref.node().getAttribute("Y"))){var s=p[o].shape_ref.node().getBBox().height>0?parseInt(p[o].shape_ref.node().getBBox().height):parseInt(p[o].shape_ref.node().getAttribute("height"));h=parseInt(p[o-1].shape_ref.node().getAttribute("Y"))+s}else{h=parseInt(a)+parseInt(p[o].shape_ref.node().getBBox().height)}h+=parseInt(t)}else{while(o){o--;if(rdx.utils.is_defined(p[o].children)||rdx.utils.is_defined(p[o].block_children)){h=h+this._get_previous_sibling_height(p,o)}else{h=h+parseInt(p[o].shape_ref.node().getBBox().height)+t}}h=parseInt(a)+h}}switch(m.position){case rdx.constants.BOTTOM:if(rdx.utils.is_defined(m.parent_node.node().getAttribute("custom"))){a=parseInt(a)+parseInt(m.parent_node.node().getAttribute("height"))+t}else{a=parseInt(a)+m.parent_node.node().getBBox().height+t;if(rdx.utils.is_defined(p[o].horizontal_transformation)){b=parseInt(b)+m.parent_node.node().getBBox().width/2}}break;case rdx.constants.TOP:a=parseInt(a)-(m.parent.node().getBBox().height+t);break;case rdx.constants.LEFT:if(rdx.utils.is_defined(m.parent_node.node().getAttribute("custom"))){b=parseInt(b)-(parseInt(m.parent_node.node().getAttribute("width"))+e)}else{b=parseInt(b)-(m.parent_node.node().getBBox().width+e)}break;case rdx.constants.RIGHT:default:if(rdx.utils.is_defined(m.parent_node.node().getAttribute("block_children"))){b=parseInt(b)+m.parent_node.node().getBBox().width+parseInt(m.parent_node.node().getAttribute("block_width"))+(e/6);if(rdx.utils.is_defined(p[o].block_properties)&&rdx.utils.is_defined(p[o].block_properties.offset_from_parent)){b+=Math.abs(p[o].block_properties.offset_from_parent)}}else{if(rdx.utils.is_defined(m.parent_node.node().getAttribute("custom"))){var q=parseInt(m.parent_node.node().getAttribute("width"))||m.parent_node.node().getBBox().width;b=parseInt(b)+q+e}else{if(m.parent_node.node().nodeName==rdx.constants.IMAGE){b=parseInt(b)+parseInt(m.parent_node.node().getAttribute("width"))+e}else{var q=m.parent_node.node().getBBox().width>0?m.parent_node.node().getBBox().width:parseInt(m.parent_node.node().getAttribute("width"));b=parseInt(b)+q+e}}}a=h;break}if(g.node().nodeName==rdx.constants.IMAGE){b=b-f/2;a=a-n/2}else{if(g.node().nodeName==rdx.constants.RECTANGLE){if(rdx.utils.is_defined(g.node().getAttribute("base"))&&g.node().getAttribute("base")==rdx.constants.DIAMOND){b=b-Math.ceil(f/Math.sqrt(2));a=a-Math.ceil(n/Math.sqrt(2))}else{b=b-f/2;a=a-n/2}}}var d=g.node().getAttribute("transform");if(rdx.utils.is_defined(d)){d="translate("+b+","+a+")"+d}else{d="translate("+b+","+a+")"}g.attr("transform",d);g.attr("X",b);g.attr("Y",a);rdx.visualizer_utils.transform_node(g)};rdx.visualizer.prototype._adjust_elements=function(m,g,n){var o=m[g];var a=n.node().getAttribute("Y");var d=n.node().getAttribute("X");var e=0;e=o.child_group.node().getBBox().height;var f;if(n.node().nodeName==rdx.constants.IMAGE){f=Math.floor((e/2)-((n.node().getBBox().height)*2))}else{if(n.node().nodeName==rdx.constants.RECTANGLE){f=Math.floor((e/2)-((n.node().getBBox().height)))}else{f=Math.floor((e/2)-((n.node().getBBox().height)/2))}}if(!(rdx.utils.is_defined(o.adjust)&&o.adjust===false)){var b=n.node().getAttribute("transform");if(rdx.utils.is_defined(b)){f=Math.floor(f+parseInt(a));if(b.indexOf("rotate")==-1){b="translate("+d+","+f+")"}else{b="translate("+d+","+f+")"+b}}else{b="translate("+d+","+f+")"}n.attr("transform",b);n.attr("Y",f);n.attr("adjusted","true");rdx.visualizer_utils.transform_node(n)}};rdx.visualizer.prototype._get_previous_sibling_height=function(b,d){var a=0;var e=this;if(rdx.utils.is_defined(b[d].block_children)){a=parseInt(b[d].shape_ref.node().getAttribute("block_height"));if(a===0){a+=this._properties.vertical_offset}}else{if(rdx.utils.is_defined(b[d].child_group)){a=b[d].child_group.node().getBBox().height}else{if(rdx.utils.is_defined(b[d].shape_ref)){a=b[d].shape_ref.node().getBBox().height}else{a=0}}}return a+(this._properties.vertical_offset)};rdx.visualizer.prototype.refresh_view=function(b){this._map_of_shapes=new Map();this._connectors=[];this._base_view.destroy_view();var a=new rdx.base_view(this._base_view._parent,this._base_view._view_definition);a.set_view_context(this._base_view.get_view_context());a.prepare_view(true)};rdx.visualizer.prototype.get_is_back_button_required=function(){return this._properties.add_back_button};rdx.visualizer.prototype.get_toolbar_items=function(){if(rdx.utils.is_defined(this._toolbar_items)){return this._toolbar_items}this._add_tool_bar();return this._toolbar_items};rdx.visualizer.prototype._add_tool_bar=function(){var b=this;var a=[new rdx.action({tooltip:rdx.i18n.get_string("rdx.refresh"),image_url:rdx.images.REFRESH_IMG,click_handler_callback:new rdx.callback(this,this.refresh_view)})];this._toolbar_items=a};rdx.visualizer.prototype.destroy_view=function(){this._svg.remove();delete rdx.dep_class_name};rdx.visualizer.prototype.is_title_required=function(){return true};rdx.visualizer.prototype.close_view=function(){this._base_view.destroy_view()};rdx.shapes=function(b,a){this._parent=b;this._properties=a;this._tooltip=null;this._DEFAULT_SHAPE_PROPERTIES={color:rdx.constants.FILL_COLOR,stroke:rdx.constants.DEFAULT_STROKE_COLOR,type:rdx.constants.CIRCLE,stroke_width:rdx.constants.DEFAULT_STROKE_WIDTH,node_state:true,add_custom_checkbox:false,checkbox_state:true,attributes:{x:0,y:0}};this._DEFAULT_LABEL_PROPERTIES={name:null,renderer_callback:null,position:rdx.constants.TOP,offset:rdx.constants.LABEL_OFFSET,ellipsis:true,font_family:rdx.constants.LABEL_FONT_FAMILY,font_size:rdx.constants.LABEL_FONT_SIZE,font_weight:rdx.constants.LABEL_FONT_WEIGHT,color:rdx.constants.LABEL_COLOR};if(rdx.utils.is_defined(a.shape)){this._properties=$.extend(this._properties,this._DEFAULT_SHAPE_PROPERTIES,a.shape)}else{this._properties=$.extend(this._properties,this._DEFAULT_SHAPE_PROPERTIES)}this._properties.label=$.extend({},this._DEFAULT_LABEL_PROPERTIES,a.label);this._svg_symbol_map={square:"yes",cross:"yes",triangle:"yes"};square_properties={height:rdx.constants.DEFAULT_SQUARE_HEIGHT,width:rdx.constants.DEFAULT_SQUARE_HEIGHT};circle_properties={radius:rdx.constants.DEFAULT_CIRCLE_RADIUS};rectangle_properties={height:rdx.constants.DEFAULT_RECT_HEIGHT,width:rdx.constants.DEFAULT_RECT_WIDTH};triangle_properties={size:rdx.constants.DEFAULT_TRIANGLE_SIZE};diamond_properties={height:rdx.constants.DEFAULT_DIAMOND_HEIGHT,width:rdx.constants.DEFAULT_DIAMOND_HEIGHT,rotate:rdx.constants.DEFAULT_ROTATION};switch(this._properties.type){case rdx.constants.CIRCLE:this._properties.attributes=$.extend(true,circle_properties,this._properties.attributes);break;case rdx.constants.SQUARE:this._properties.attributes=$.extend(true,square_properties,this._properties.attributes);break;case rdx.constants.RECTANGLE:this._properties.attributes=$.extend(true,rectangle_properties,this._properties.attributes);break;case rdx.constants.TRIANGLE:this._properties.attributes=$.extend(true,triangle_properties,this._properties.attributes);break;case rdx.constants.DIAMOND:this._properties.attributes=$.extend(true,diamond_properties,this._properties.attributes);this._properties.type=rdx.constants.RECTANGLE;this._properties.attributes.base=rdx.constants.DIAMOND;break;default:break}};rdx.shapes.prototype.render=function(e){var n=this;var f,b,g;n.process_input();if(this._properties.type===rdx.constants.CUSTOM){if(rdx.utils.is_defined(this._properties.render_shape_callback)){if(rdx.utils.is_ie()){f=n._parent.append("g").classed("custom_shape",true);var o=this._properties.render_shape_callback.call_back([f,this._properties,f]);f.attr("custom","true").attr("width",$(o).outerWidth(true)).attr("height",$(o).outerHeight(true))}else{f=n._parent.append("g").classed("custom_shape",true);if(rdx.utils.is_defined(this._properties.middle_conenction)){f.attr("middle_connection",this._properties.middle_conenction)}var d=f.append("foreignObject").attr({x:0,y:"-20px","class":"custom_shape"});if(this._properties.add_custom_checkbox){var p=d.append("xhtml:div").attr("class","custom_foreign_checkbox_div").append("input").attr("type","checkbox").attr("checked",false);$(p).prop("checked",false);$(p.node()).bind(rdx.events.CLICK,{this_context:n},function(s){s.stopPropagation();if($(s.target).prop("checked")){s.target.setAttribute("checked",true);s.data.this_context._properties.checkbox_state=true}else{s.target.setAttribute("checked",false);s.data.this_context._properties.checkbox_state=false}var t=s.data.this_context._properties.children;if(rdx.utils.is_defined(t)){for(g=0;g<t.length;g++){t[g].parent_checkbox_state=s.data.this_context._properties.checkbox_state;s.data.this_context.toggle_checkbox(t[g])}}})}var a=d.append("xhtml:div");d.attr("width",rdx.constants.CUSTOM_SHAPE_MIN_WIDTH).attr("height",rdx.constants.CUSTOM_SHAPE_MIN_HEIGHT);var o=this._properties.render_shape_callback.call_back([a.node(),this._properties,d]);if(rdx.utils.is_defined(this._properties.attributes.width)||rdx.utils.is_defined(this._properties.attributes.height)){if(rdx.utils.is_defined(this._properties.attributes.width)){d.attr("width",this._properties.attributes.width);f.attr("width",this._properties.attributes.width);f.attr("X",this._properties.attributes.width)}if(rdx.utils.is_defined(this._properties.attributes.height)){d.attr("height",this._properties.attributes.height);f.attr("height",this._properties.attributes.height);f.attr("Y",this._properties.attributes.height)}}else{f.attr("custom","true").attr("width",$(o).outerWidth(true)).attr("height",$(o).outerHeight(true))}}}}else{if(rdx.utils.is_defined(n._properties.image)){f=n._parent.append("image").attr("xlink:href",n._properties.image.url).attr("width",n._properties.image.width||rdx.constants.DEFAULT_IMAGE_WIDTH).attr("height",n._properties.image.height||rdx.constants.DEFAULT_IMAGE_HEIGHT)}else{f=n._parent.append(n._properties.type).attr("fill",n._properties.color).attr("stroke",n._properties.stroke).attr("stroke-width",n._properties.stroke_width);var q=n._properties.attributes;for(b in q){if(q.hasOwnProperty(b)){if(b=="radius"){f=f.attr("r",q[b])}else{f=f.attr(b,q[b])}}}if(rdx.utils.is_defined(q.rotate)){this_node=f.node();bbox=this_node.getBBox();var h=n._properties.attributes.rotate+",0,0";f.attr("transform","rotate("+h+")")}}var m=n._properties.styles;if(rdx.utils.is_defined(m)){for(b in m){if(m.hasOwnProperty(b)){f=f.style(b,m[b])}}}if(rdx.utils.is_defined(n._properties.title)){f=f.append("title").text(n._properties.title)}if(!rdx.utils.is_defined(n._properties.hidden)){if(rdx.utils.is_defined(this._properties.label)){f.append("title").text(n._properties.label.name)}}if(rdx.utils.is_defined(n._properties.contextmenu)){f.on(rdx.events.CONTEXT_MENU,function(t,s){n.render_context_menu(n,f,t,s)})}if(rdx.utils.is_defined(n._properties.show_hide_children)&&n._properties.show_hide_children===true||rdx.utils.is_defined(n._properties.show_hide_block_children)&&n._properties.show_hide_block_children===true){f=f.style("cursor","pointer");$(f.node()).bind(rdx.events.CLICK,function(){if(rdx.utils.is_defined(n._properties.show_hide_children)&&n._properties.show_hide_children===true){var t=n._properties.children;for(g=0;g<t.length;g++){t[g].parent_state=n._properties.node_state;n.toggle_node(t[g])}}if(rdx.utils.is_defined(n._properties.show_hide_block_children)&&n._properties.show_hide_block_children===true){var s=n._properties.block_children;for(g=0;g<s.length;g++){s[g].parent_state=n._properties.node_state;n.toggle_node(s[g],true)}}n._properties.node_state=!n._properties.node_state})}}if(rdx.utils.is_defined(this._properties.label)&&rdx.utils.is_defined(this._properties.label.name)&&rdx.utils.is_not_defined(this._properties.hidden)){setTimeout(function(){n.render_label(f,e)},300)}if(rdx.utils.is_defined(n._properties.click_handler)){n.click_event_handler(f,e)}return f};rdx.shapes.prototype.click_event_handler=function(b,e){var a=this;var d=a._properties.click_handler;var f=a._properties.node_state;b=b.style("cursor","pointer");$(b.node()).bind(rdx.events.CLICK,function(){if(rdx.utils.is_defined(d.is_popup)&&d.is_popup===true){if(a._properties.node_state){rdx.visualizer_utils.render_pop_up(a._properties,d.click_handler_callback,e)}}else{if(rdx.utils.is_defined(d.no_node_ref)&&d.no_node_ref===true){d.click_handler_callback.call_back()}else{d.click_handler_callback.call_back([a._properties,e])}}})};rdx.shapes.prototype.process_input=function(){if(this._svg_symbol_map[this._properties.type]==="yes"){var d,a;var b=this._properties.type;var e=this._properties.attributes;if(rdx.utils.is_not_defined(e.size)){e.size=200}if(this._properties.type===rdx.constants.TRIANGLE){if(rdx.utils.is_defined(e.direction)){b=b+"-"+e.direction}else{b=b+"-up"}}d=d3.svg.symbol().type(b).size(e.size);a="translate("+e.x+","+e.y+")";this._properties.attributes.d=d;this._properties.attributes.transform=a;delete this._properties.attributes.x;delete this._properties.attributes.y;delete this._properties.attributes.size;this._properties.type=rdx.constants.PATH}};rdx.shapes.prototype.get_shape_coords=function(a){var d={};var b=a.node();var e=b.getBBox();d.height=parseInt(e.height);d.width=parseInt(e.width);if(b.nodeName===rdx.constants.RECTANGLE){d.x=parseInt(b.getAttribute("X"));d.y=parseInt(b.getAttribute("Y"))}else{d.x=parseInt(b.getAttribute("X")||b.getAttribute("x"));d.y=parseInt(b.getAttribute("Y")||b.getAttribute("y"))}d.center_x=d.x+(d.height/2);d.center_y=d.y+(d.width/2);return d};rdx.shapes.prototype.render_label=function(q,f){var g=q.node().getBBox().width;var u;if(rdx.utils.is_defined(this._properties.label.renderer_callback)){u=this._parent.append("g").classed("custom_label",true);var b=u.append("foreignObject").attr({x:0,y:0,"class":"custom_label"});var d=0;if(this._properties.label.position==rdx.constants.TOP){d=(-1)*this._properties.label.offset/2}else{if(this._properties.label.position==rdx.constants.BOTTOM){d=this._properties.label.offset/2}}var a=b.append("xhtml:div");var o=this._properties.label.renderer_callback.call_back([a.node(),this._properties,b]);this._get_label_positions(q,o);b.attr("width",$(o).width()+20).attr("height",$(o).height()).attr("x",this._label_x).attr("y",this._label_y+d-($(o).height()/2))}else{u=this._parent.append("text").attr("class","dummy-label-text").attr("dy",".35em").text(this._properties.label.name).style("fill-opacity",1);this._get_label_positions(q,u);var e="translate("+0+","+(-(u.node().getBBox().height/2))+")";var p=this._parent.append("g");p.attr("transform","translate("+this._label_x+","+this._label_y+")");var t=p.append("rect").attr("width",u.node().getBBox().width).attr("height",u.node().getBBox().height).attr("x",0).attr("y",0).attr("fill","white").attr("transform",e);p.append("title").text(this._properties.label.name);if(rdx.utils.is_defined(this._properties.click_handler)){this.click_event_handler(p,f)}if(rdx.utils.is_defined(this._properties.label.status)){var n=this._properties.label.status.toLowerCase();if(n==rdx.constants.UP){color="#7fc379"}else{if(n==rdx.constants.DOWN){color="#F8A0A0"}else{color="#fed156"}}var h=p.append("circle").attr("class","label-state").attr("x",0).attr("y",0).attr("r",5).attr("fill",color).attr("transform","translate(-7,0)")}var m=p.append("text").attr("class","place-label").attr("dy",".35em").text(this._properties.label.name).style("fill-opacity",1).style("font-weight",this._properties.label.font_weight).style("font-size",this._properties.label.font_size).style("fill",this._properties.label.color).attr("x",0).attr("y",0);if(this._properties.label.ellipsis){var s=this.wrap_label(m,g,rdx.utils.is_defined(this._properties.label.status));m=s.node;p.attr("transform","translate("+Math.ceil((this._label_x+2+(s.spliced_len/2)))+","+this._label_y+")");t.attr("width",(s.actual_len)>10?(s.actual_len-10):8)}d3.select(".dummy-label-text").remove()}};rdx.shapes.prototype._get_label_positions=function(b,f){var e=this._properties.label.offset;var d=this.get_shape_coords(b);var a=rdx.utils.is_function(f.node)?f.node().getBBox().width:$(f).width();switch(this._properties.label.position){case rdx.constants.BOTTOM:this._label_y=d.y+(d.height/2)+e;this._label_x=d.x-a/2;if(b.node().nodeName===rdx.constants.RECTANGLE&&rdx.utils.is_defined(b.node().getAttribute("base"))&&b.node().getAttribute("base")=="diamond"){this._label_y=d.y+Math.ceil(d.height/Math.sqrt(2))+e;this._label_x=d.x-a/2}break;case rdx.constants.RIGHT:this._label_y=d.y;if(b.node().nodeName===rdx.constants.RECTANGLE&&rdx.utils.is_defined(b.node().getAttribute("base"))&&b.node().getAttribute("base")=="diamond"){this._label_x=d.x+Math.ceil(d.width/Math.sqrt(2))+e/2}else{this._label_x=d.x+(d.width/2)+e/2}break;case rdx.constants.CENTER:this._label_y=d.y;this._label_x=d.x-a/2;break;case rdx.constants.LEFT:this._label_y=d.y;if(b.node().nodeName===rdx.constants.RECTANGLE&&rdx.utils.is_defined(b.node().getAttribute("base"))&&b.node().getAttribute("base")=="diamond"){this._label_x=d.x-(Math.ceil(d.width/Math.sqrt(2))+a)-e/2}else{this._label_x=(d.x-((d.width/2)+a))-e/2}break;case rdx.constants.TOP:this._label_y=(d.y-(d.height)/2)-e;this._label_x=(d.x-(a/2));if(b.node().nodeName===rdx.constants.RECTANGLE&&rdx.utils.is_defined(b.node().getAttribute("base"))&&b.node().getAttribute("base")=="diamond"){this._label_y=d.y-Math.ceil(d.height/Math.sqrt(2))-e;this._label_x=d.x-(a/2)}break;default:break}};rdx.shapes.prototype.wrap_label=function(d,b,h){var g={};var f=Math.max(b,100);var a=d.node().getComputedTextLength();if(h){a+=20}var e=a;text=d.text();while(a>(f-10)&&text.length>0){text=text.slice(0,-1);d.text(text+"...");a=d.node().getComputedTextLength();if(h){a+=10}}g.node=d;g.spliced_len=(e-a);g.actual_len=a;return g};rdx.shapes.prototype.toggle_node=function(d,b){var f,e,a;if(rdx.utils.is_defined(d.children)&&d.children.length>0){for(a=0;a<d.children.length;a++){d.children[a].parent_state=d.parent_state;d.children[a].node_state=d.parent_state;this.toggle_node(d.children[a])}}if(rdx.utils.is_defined(d.block_children)){for(e=0;e<d.block_children.length;e++){d.block_children[e].parent_state=d.parent_state;d.block_children[e].node_state=d.parent_state;this.toggle_node(d.block_children[e],true)}}if(b===true){if(rdx.utils.is_defined(d.column)&&d.column.length>0){for(a=0;a<d.column.length;a++){d.column[a].parent_state=d.parent_state;if(d.render_hidden===false){if(rdx.utils.is_defined(d.column[a].hidden)&&d.column[a].hidden===true){continue}}if(!d.parent_state){$(d.column[a].parent_ref.node()).find(".place-label").show();$(d.column[a].parent_ref.node()).find(".label-state").show();$(d.column[a].parent_ref.node()).find(".dummy_rect").show();$(d.column[a].parent_ref.node()).find(".dummy_connect").show();$(d.column[a].shape_ref.node()).show();if(rdx.utils.is_defined(d.column[a].connector_ref)){for(e=0;e<d.column[a].connector_ref.length;e++){$(d.column[a].connector_ref[e][0]).show()}}}else{$(d.column[a].parent_ref.node()).find(".place-label").hide();$(d.column[a].parent_ref.node()).find(".label-state").hide();$(d.column[a].parent_ref.node()).find(".dummy_rect").hide();$(d.column[a].parent_ref.node()).find(".dummy_connect").hide();$(d.column[a].shape_ref.node()).fadeOut(400);if(rdx.utils.is_defined(d.column[a].connector_ref)){for(e=0;e<d.column[a].connector_ref.length;e++){$(d.column[a].connector_ref[e][0]).fadeOut(400)}}}}}}else{if(!d.parent_state){f=$(d.parent_ref.node()).find(".place-label");for(a=0;a<f.length;a++){$(f[a]).show()}state_elems=$(d.parent_ref.node()).find(".label-state");for(a=0;a<f.length;a++){$(state_elems[a]).show()}$(d.shape_ref.node()).show();$(d.connector_ref.node()).show()}else{f=$(d.parent_ref.node()).find(".place-label");for(a=0;a<f.length;a++){$(f[a]).hide()}state_elems=$(d.parent_ref.node()).find(".label-state");for(a=0;a<f.length;a++){$(state_elems[a]).hide()}$(d.shape_ref.node()).fadeOut(400);$(d.connector_ref.node()).fadeOut(400)}}d.node_state=!d.node_state};rdx.shapes.prototype.toggle_checkbox=function(d,b){var a;if(rdx.utils.is_defined(d.children)&&d.children.length>0){for(a=0;a<d.children.length;a++){d.children[a].parent_checkbox_state=d.parent_checkbox_state;d.children[a].checkbox_state=d.parent_checkbox_state;this.toggle_checkbox(d.children[a])}}if(!d.parent_checkbox_state){checkbox_elem=$($($(d.shape_ref.node()).children()[0]).children()[0]).children()[0];$(checkbox_elem).prop("checked",false)}else{checkbox_elem=$($($(d.shape_ref.node()).children()[0]).children()[0]).children()[0];$(checkbox_elem).prop("checked",true)}d.checkbox_state=!d.checkbox_state};rdx.shapes.prototype.render_context_menu=function(b,d,e,a){};rdx.connectors=function(a,b){this._parent=a;this._properties=b.properties;this._source_shape=b.source.shape_ref||b.source;this._target_shape=b.target;this._DEFAULT_PROPERTIES={color:rdx.constants.DEFAULT_CONNECTOR_STROKE_COLOR,stroke_width:rdx.constants.DEFAULT_CONNECTOR_STROKE_WIDTH,path_type:rdx.constants.STEP,click_handler:null,highlight:false,reverse_attr:false,horizontal_offset:rdx.constants.DEFAULT_HORIZONTAL_OFFSET};this._properties=$.extend({},this._DEFAULT_PROPERTIES,this._properties)};rdx.connectors.prototype.render=function(){var s=this;var q,n,u,w;var h=source_parent_y=target_parent_x=target_parent_y=0;if(rdx.utils.is_defined(this._source_shape.node)&&rdx.utils.is_defined(this._target_shape.node)){q=this._source_shape.node().getAttribute("X");n=this._source_shape.node().getAttribute("Y");w=this._target_shape.node().getAttribute("X");u=this._target_shape.node().getAttribute("Y");h=this._source_shape.node().parentNode.getAttribute("X")||0;source_parent_y=this._source_shape.node().parentNode.getAttribute("Y")||0;target_parent_x=this._target_shape.node().parentNode.getAttribute("X")||0;target_parent_y=this._target_shape.node().parentNode.getAttribute("Y")||0;source_width=this._source_shape.node().getBBox().width;target_width=this._target_shape.node().getBBox().width;source_height=this._source_shape.node().getBBox().height;target_height=this._target_shape.node().getBBox().height}else{q=this._source_shape.x;n=this._source_shape.y;w=this._target_shape.x;u=this._target_shape.y}var a={source_node_x:q,source_node_y:n,target_node_x:w,target_node_y:u,source_parent_x:h,source_parent_y:source_parent_y,target_parent_x:target_parent_x,target_parent_y:target_parent_y};if(rdx.utils.is_defined(this._target_shape.node)&&this._target_shape.node().nodeName==rdx.constants.IMAGE){u=parseInt(u)+this._target_shape.node().getBBox().height/2}var t,v;switch(this._properties.path_type){case rdx.constants.DIAGONAL:if(this._properties.arrow===true){var g=parseInt(q)+parseInt(h);var f=parseInt(w)+parseInt(target_parent_x);var e=parseInt(n)+parseInt(source_parent_y);var d=parseInt(u)+parseInt(target_parent_y);var b=false;if(g<f){if(e<d){if(this._properties.reverse_attr){d=d+target_height/2;e=e-source_height/2;g=g+source_width/2;f=f-target_width/2}else{b=true;g=g+source_width/2;f=f-target_width/2;d=d-target_height/4;e=e+source_height/2}}else{d=d+target_height/2;e=e-source_height/2}if(g==f){f=f+target_width/4}if(Math.abs(e-d)<10){g=g+source_width/2;e=e+source_height/2}if(this._properties.reverse_attr){if((e<d&&Math.abs(e-d)>(source_height+target_height))||(e>d)){e-=8}else{g+=2;e+=4}}}else{if(g>f){if(e<d){e=e+source_height/2;d=d-target_height/2;if(this._properties.reverse_attr){d-=8}}else{e=e-source_height/2;d=d+target_height/2;if(this._properties.reverse_attr){e-=8}}}else{f=f+target_width/4;if(e<d){d=d-target_height/2;e=e+source_height/2}else{d=d+target_height/2;e=e-source_height/2}}}t=[{source:{x:g,y:e},target:{x:f,y:d}}];var p=s._parent.append("svg:defs").append("svg:marker").attr("id","triangles").attr("refX",-1).attr("refY",5).attr("markerWidth",30).attr("markerHeight",30).attr("orient","auto");if(this._properties.reverse_attr){p.attr("id","rev_triangle").attr("refX",8).attr("refY",5).append("path").attr("d","M 8 5 L 8 10 L -1 5 L 8 0").style("fill","dimgray")}else{if(!b){p.attr("orient","90")}else{p.attr("id","triangles_orient_up").attr("refX",0).attr("refY",6).attr("orient","180")}p.append("path").attr("d","M 8 5 L 8 10 L -1 5 L 8 0").style("fill","dimgray")}}else{t=[{source:{x:parseInt(q)+parseInt(h),y:parseInt(n)+parseInt(source_parent_y)},target:{x:parseInt(w)+parseInt(target_parent_x),y:parseInt(u)+parseInt(target_parent_y)}}]}v=d3.svg.diagonal().projection(function(z){return[z.x,z.y]});s.path=s._parent.selectAll("links").data(t).enter().append("path").attr("d",v);if(this._properties.arrow){if(this._properties.reverse_attr){s.path.attr("marker-start","url(#rev_triangle)")}else{if(b){s.path.attr("marker-end","url(#triangles_orient_up)")}else{s.path.attr("marker-end","url(#triangles)")}}}break;case rdx.constants.LINE:t=[{x:q,y:n},{x:w,y:u}];v=d3.svg.line().x(function(z){return z.x}).y(function(z){return z.y});s.path=s._parent.append("path").attr("d",v(t));break;case rdx.constants.ARROW_LINE:var g=parseInt(q)+parseInt(h);var f=parseInt(w)+parseInt(target_parent_x);var e=parseInt(n)+parseInt(source_parent_y);var d=parseInt(u)+parseInt(target_parent_y);var b=false;var o=false;var p=s._parent.append("svg:defs").append("svg:marker").attr("markerWidth",30).attr("refX",8).attr("refY",5).attr("markerHeight",30);if(Math.abs(g-f)<10){if(d>e){t=[{x:g,y:e+(source_width/2)},{x:f,y:d-(target_width/2)}];if(this._properties.reverse_attr){t[0].y+=8}}else{t=[{x:g,y:e-(source_width/2)},{x:f,y:d+(target_width/2)+8}];if(this._properties.reverse_attr){t[1].y+=8}}}else{if(Math.abs(e-d)<10){if(f>g){t=[{x:g+(source_width/2),y:e},{x:f-(target_width/2),y:d}];if(this._properties.reverse_attr){t[0].x+=8}}else{t=[{x:g-(source_width/2),y:e},{x:f+(target_width/2),y:d}];if(this._properties.reverse_attr){t[1].x+=8}}}else{t=this.get_step_coordinates(a);if(t[0].x>t[2].x){t[0].x=t[0].x-source_width/2;if(t[0].y<t[2].y){o=true;t[2].y=t[2].y-target_height/2;if(!this._properties.reverse_attr){t[2].y+=20}}else{b=true;t[2].y=t[2].y+target_height/2;if(Math.abs(t[0].y-t[2].y)<target_height/2){t[1].x=t[0].x;t[1].y=t[0].y;t[2].x=t[2].x+target_width/2}if(!this._properties.reverse_attr){t[2].y-=20}else{t[2].y+=8}}}else{t[2].x=t[2].x-source_width/2;if(t[0].y<t[2].y){t[0].y=t[0].y+target_height/2;if(!this._properties.reverse_attr){t[0].y-=20}}else{t[0].y=t[0].y-target_height/2;if(!this._properties.reverse_attr){t[0].y+=20}}t[2].x=t[2].x+source_width/2}}}if(this._properties.reverse_attr){if(b){p.attr("id","rev_mid_orient_up").attr("refX",6).attr("orient","90").append("path").attr("d","M 8 5 L 8 10 L -1 5 L 8 0").style("fill","dimgray")}else{if(o){p.attr("id","rev_mid_orient_down").attr("refX",-1).attr("orient","270").append("path").attr("d","M 8 5 L 8 10 L -1 5 L 8 0").style("fill","dimgray")}else{p.attr("id","rev_mid").append("path").attr("d","M 8 5 L 8 10 L -1 5 L 8 0").style("fill","dimgray")}}}else{p.attr("id","mid").append("path").attr("d","M 0 0 0 10 10 5").style("fill","dimgray")}v=d3.svg.line().x(function(z){return z.x}).y(function(z){return z.y});s.path=s._parent.append("path").attr("d",v(t));if(this._properties.reverse_attr){if(b){s.path.attr("marker-end","url(#rev_mid_orient_up)")}else{if(o){s.path.attr("marker-end","url(#rev_mid_orient_down)")}else{s.path.attr("marker-end","url(#rev_mid)")}}}else{s.path.attr("marker-start","url(#mid)")}break;case rdx.constants.U_TYPE_CONNECTOR:var m=Math.max((source_width/2+this._properties.horizontal_offset/5),(target_width/2+this._properties.horizontal_offset/5));t=[{x:parseInt(q)+parseInt(h),y:parseInt(n)+parseInt(source_parent_y)},{x:parseInt(q)+parseInt(h)-m,y:parseInt(n)+parseInt(source_parent_y)},{x:parseInt(w)+parseInt(target_parent_x)-m,y:parseInt(u)+parseInt(target_parent_y)},{x:parseInt(w)+parseInt(target_parent_x),y:parseInt(u)+parseInt(target_parent_y)}];v=d3.svg.line().x(function(z){return z.x}).y(function(z){return z.y});s.path=s._parent.append("path").attr("d",v(t));break;case rdx.constants.STEP:t=this.get_step_coordinates(a);v=d3.svg.line().x(function(z){return z.x}).y(function(z){return z.y});s.path=s._parent.append("path").attr("d",v(t));break;default:break}s.path=s.path.attr("fill","none").attr("stroke",s._properties.color).attr("stroke-width",s._properties.stroke_width);if(rdx.utils.is_defined(s._properties.class_name)){s.path=s.path.attr("class",s._properties.class_name)}if(s._properties.highlight){$(s.path.node()).bind(rdx.events.MOUSE_OVER,{this_context:s},function(z){var B=z.data.this_context._target_shape.node();var A=z.data.this_context._source_shape.node();z.data.this_context.path.node().setAttribute("stroke","blue");if(A.getAttribute("class")=="custom_shape"){var D=$($($(A).children()[0]).children()[0]);D.addClass("highlight_node_path")}else{A.setAttribute("stroke","blue")}if(B.getAttribute("class")=="custom_shape"){var C=$($($(B).children()[0]).children()[0]);C.addClass("highlight_node_path")}else{B.setAttribute("stroke","blue")}});$(s.path.node()).bind(rdx.events.MOUSE_OUT,{this_context:s},function(z){var B=z.data.this_context._target_shape.node();var A=z.data.this_context._source_shape.node();z.data.this_context.path.node().setAttribute("stroke",s._properties.color);if(A.getAttribute("class")=="custom_shape"){var D=$($($(A).children()[0]).children()[0]);D.removeClass("highlight_node_path")}else{A.removeAttribute("stroke")}if(B.getAttribute("class")=="custom_shape"){var C=$($($(B).children()[0]).children()[0]);C.removeClass("highlight_node_path")}else{B.removeAttribute("stroke")}})}return s.path};rdx.connectors.prototype.get_step_coordinates=function(b){var a;if(this._properties.middle===true){a=[{x:parseInt(b.source_node_x)+parseInt(b.source_parent_x),y:parseInt(b.source_node_y)+parseInt(b.source_parent_y)},{x:(parseInt(b.source_node_x)+parseInt(b.source_parent_x)+parseInt(b.target_node_x)+parseInt(b.target_parent_x))/2,y:parseInt(b.source_node_y)+parseInt(b.source_parent_y)},{x:(parseInt(b.source_node_x)+parseInt(b.source_parent_x)+parseInt(b.target_node_x)+parseInt(b.target_parent_x))/2,y:parseInt(b.target_node_y)+parseInt(b.target_parent_y)},{x:parseInt(b.target_node_x)+parseInt(b.target_parent_x),y:parseInt(b.target_node_y)+parseInt(b.target_parent_y)}]}else{if(this._properties.rtl===true){a=[{x:parseInt(b.source_node_x)+parseInt(b.source_parent_x),y:parseInt(b.source_node_y)+parseInt(b.source_parent_y)},{x:parseInt(b.source_node_y)+parseInt(b.source_parent_y),y:parseInt(b.target_node_x)+parseInt(b.target_parent_x)},{x:parseInt(b.target_node_x)+parseInt(b.target_parent_x),y:parseInt(b.target_node_y)+parseInt(b.target_parent_y)}]}else{if(this._properties.flow===true){var d=(parseInt(b.source_node_y)+parseInt(b.source_parent_y))-(parseInt(b.target_node_y)+parseInt(b.target_parent_y));a=[{x:parseInt(b.source_node_x)+parseInt(b.source_parent_x),y:parseInt(b.source_node_y)+parseInt(b.source_parent_y)},{x:(parseInt(b.source_node_x)+parseInt(b.source_parent_x)),y:(parseInt(b.source_node_y)+parseInt(b.source_parent_y))-d/2},{x:parseInt(b.target_node_x)+parseInt(b.target_parent_x),y:(parseInt(b.source_node_y)+parseInt(b.source_parent_y))-d/2},{x:parseInt(b.target_node_x)+parseInt(b.target_parent_x),y:parseInt(b.target_node_y)+parseInt(b.target_parent_y)}]}else{a=[{x:parseInt(b.source_node_x)+parseInt(b.source_parent_x),y:parseInt(b.source_node_y)+parseInt(b.source_parent_y)},{x:parseInt(b.target_node_x)+parseInt(b.target_parent_x),y:parseInt(b.source_node_y)+parseInt(b.source_parent_y)},{x:parseInt(b.target_node_x)+parseInt(b.target_parent_x),y:parseInt(b.target_node_y)+parseInt(b.target_parent_y)}]}}}return a};rdx.visualizer_utils=new function(){this.get_max_length=function(a,d){var f=0;for(var b=0;b<a.length;b++){var e=0;if(rdx.utils.is_defined(a[b].render_new_view)){e++}if(rdx.utils.is_defined(a[b].column)){if(f<(e+a[b].column.length)){f=(e+a[b].column.length)}}}return f};this.normalize_array_items=function(f,e){var d=this;if(f.items.column.length<f.len){var b=0;var h=f.items.length;var a=(f.len-h);if(f.flag){var g={name:"image",image:{url:"/admin_ui/rdx/core/images/plus_box.png",height:16,width:16},click_handler:{click_handler_callback:new rdx.callback(function(p,n){var m=rdx.utils.get_view(f.items.add_view.view_name);var o=rdx.utils.is_defined(f.items.add_view.resource_name_for_model_change)?f.items.add_view.resource_name_for_model_change:m.resource_name;d.handle_view_show_refresh_close(e,o,m,f.items.add_view.context)})}};if(rdx.utils.is_defined(f.items.add_view.title)){g.title=f.items.add_view.title}if(f.render_add=="top"){f.items.column.splice(0,0,g)}else{f.items.column.push(g)}b++}for(b;b<a;b++){f.items.column.push(f)}}return f.items};this.add_new_item_to_child_list=function(a,d){var b=this;var e={name:"image",image:{url:"/admin_ui/rdx/core/images/plus_box.png",height:16,width:16},click_handler:{click_handler_callback:new rdx.callback(function(){var g=rdx.utils.get_view(a.add_view.view_name);var f;var h=rdx.utils.is_defined(a.add_view.resource_name_for_model_change)?a.add_view.resource_name_for_model_change:g.resource_name;if(rdx.utils.is_defined(h)){b.handle_view_show_refresh_close(d,h,g,a.add_view.context)}else{f=rdx.view_utils.show_view_in_slider(g,null,a.add_view.context);$(f).bind(rdx.events.VIEW_DESTROYED,{visualizer_ref:d},function(m){m.data.visualizer_ref.refresh_view()})}})}};if(rdx.utils.is_defined(a.add_view)&&rdx.utils.is_defined(a.add_view.image_offset)){e.horizontal_offset=a.add_view.image_offset}a.children.push(e);return a};this.handle_view_show_refresh_close=function(d,a,n,b){if(!(a instanceof Array)){a=[a]}var m=false;var g=false;for(var f=0;f<a.length;f++){rdx.model.add_model_change_listener(rdx.utils.get_resource(a[f]),new rdx.callback(function(){m=true;if(g==true){d.refresh_view();g=false;m=false}}))}var e=function(o){if(m==false){g=true}else{d.refresh_view();g=false;m=false}};var h=rdx.view_utils.show_view_in_slider(n,new rdx.callback(e,[event]),b)};this.get_corresponding_target=function(b,e,d){var a=b.length;if(a===0){return}if(d){a-=1}if(a>e&&rdx.utils.is_defined(b[e])){return b[e]}else{return b[a-1]}};this.transform_node=function(d){var b=d.node().getBBox().height;var g=d.node().getBBox().width;var h=d.node().getAttribute("Y");var a=d.node().getAttribute("X");var f=a;var e=h;switch(d.node().nodeName){case"image":f=parseInt(a)+g/2;e=parseInt(h)+b/2;break;case"rect":if(rdx.utils.is_defined(d.node().getAttribute("base"))&&d.node().getAttribute("base")=="diamond"){f=a;e=parseInt(h)+Math.ceil(b/Math.sqrt(2))}else{f=parseInt(a)+g/2;e=parseInt(h)+b/2}break;default:break}if(d.node().getAttribute("class")==rdx.constants.CUSTOM_SHAPE){if(!(d.node().getAttribute("middle_connection")==="false")){f=parseInt(a)+g/2;e=parseInt(h)+b/2-20}}d.attr("X",f);d.attr("Y",e)};this.render_label=function(a){var b=a.parent.append("text").attr("class","place-label").attr("dy",".35em").text(a.label).style("fill-opacity",1).attr("x",a.position.x).attr("y",a.position.y);return b};this.render_pop_up=function(g,q,f){var d=d3.select(".visualizer_svg");$(d3.select(".visualizer_elements").node()).css({opacity:0.3});var o=g.parent_ref;var e=0;var p=0;if(rdx.utils.is_defined(g.popup_prop)){e=rdx.utils.is_defined(g.popup_prop.horizontal_offset)?g.popup_prop.horizontal_offset:e;p=rdx.utils.is_defined(g.popup_prop.vertical_offset)?g.popup_prop.vertical_offset:p;container_width=rdx.utils.is_defined(g.popup_prop.container_width)?g.popup_prop.container_width:rdx.constants.POPUP_MIN_WIDTH;container_height=rdx.utils.is_defined(g.popup_prop.container_height)?g.popup_prop.container_height:rdx.constants.POPUP_MIN_HEIGHT}var b=d.append("foreignObject").attr({x:parseInt(g.shape_ref.node().getAttribute("X"))+e,y:parseInt(g.shape_ref.node().getAttribute("Y"))+p,"class":"custom_shape"});var a=b.append("xhtml:div").classed("pop_up_window",true);var m=a.append("xhtml:div").classed("custom_visualizer_div",true);b.attr("width",container_width).attr("height",container_height);q.call_back([$(m.node())]);g.node_state=!g.node_state;var n=a.append("xhtml:div").classed("close_button",true);$(n.node()).bind(rdx.events.CLICK,{node:g,visualizer_ref:f},function(s){$(this.parentNode.parentElement)[0].remove();$(d3.select(".visualizer_elements").node()).css({opacity:1});s.data.node.node_state=true;s.data.visualizer_ref._adjust_svg_dimensions()});$(document).keydown(function(s){if(s.keyCode==27){$(".close_button").trigger("click")}});var h=parseInt(b.node().getAttribute("y"))+container_height;if(h>f._shapes.node().getBBox().height){f._svg.attr("height",(h+100))}}};rdx.advance_chart_view=function(d,b,e,a){this._parent=d;this._view_definition=b;this._resource=e;this._base_view=a;this._DEFAULT_PROPERTIES={height:0,width:0};this._adv_chart_comp=null;this._mask_id="advance_chart_"+this._view_definition.name;this._properties=$.extend({},this._DEFAULT_PROPERTIES,b.view_properties)};rdx.advance_chart_view.prototype=new rdx.abstract_view();rdx.advance_chart_view.prototype.make_view=function(){this._parent.addClass("advance_chart_view").attr("tabindex",0);var b=$("<div>").addClass("adv_chart_view_title");if(rdx.utils.is_defined(this._properties.title)){var f=$("<div>").addClass("title").appendTo(b).append(rdx.i18n.get_string(this._properties.title));this._parent.append(b)}if(this._properties.add_more_description==true){var a=$("<div>").addClass("adv_charts_more_desc").appendTo(b);if(rdx.utils.is_defined(this._properties.add_more_description_callback)){this._properties.add_more_description_callback.call_back([a])}}if(this._properties.add_legend==true){var e=$("<div>").addClass("adv_charts_legend").appendTo(b).attr("id","activityHeatmapLegend")}if(this._properties.add_type_of_views==true){this._properties.type_of_views_renderer_callback.call_back([this])}this._adv_container=$("<div>").addClass("advance_chart_view_div").appendTo(this._parent);var d=parseInt(this._parent.outerHeight())-parseInt(b.outerHeight());this._adv_container.css("height",d-10);if(d==0){this._adv_container.css("min-height",450)}rdx.mask.mask_component(this._parent,this._mask_id)};rdx.advance_chart_view.prototype.resize_view=function(){if(rdx.utils.is_defined(this._adv_chart_comp)&&rdx.utils.is_function(this._adv_chart_comp.resize)){this._adv_chart_comp.resize()}};rdx.advance_chart_view.prototype.get_component=function(){return this._view_definition.view_properties.component};rdx.advance_chart_view.prototype.get_callback=function(){return this._view_definition.view_properties.component_renderer_callback};rdx.advance_chart_view.prototype.refresh_view=function(a,b){this.destroy_view();this.make_view();this._base_view.prepare_view()};rdx.advance_chart_view.prototype.get_resource_response_arrived=function(a){if(this._base_view.is_crossfilter_view()){var b=this._view_definition.view_properties.crossfilter;a=rdx.crossfilter_controller.get_data_by_properties(this._resource.name,b)}this._current_response=a;this.get_callback().call_back([this._adv_container,a,this,this.type_of_view])};rdx.advance_chart_view.prototype.unmask=function(){rdx.mask.unmask_component(this._parent,this._mask_id)};rdx.advance_chart_view.prototype.destroy_view=function(){this._parent.empty()};rdx.info_view.prototype.add_mask=function(){return true};rdx.notifier=function(a){this._parent=a;this._notification_container=null;this._dropdown_container=null;this._count_container=null,this._notifications=[]};rdx.notifier.prototype.render=function(){this._notification_container=$("<li>").addClass("header_view_menu_notification_link");this._count_container=$("<span>").addClass("header_view_menu_notification_count header_view_menu_notification_count_zero").text("0");var a=$("<a>").attr("href","#").attr("title","Notifications").attr("aria-label","Notifications");this._notification_container.append(this._count_container);this._notification_container.append(a.append($("<span>")));this._notification_container.append(this.build_notification_dropdown_menu());this._parent.append(this._notification_container)};rdx.notifier.prototype.build_notification_dropdown_menu=function(a){this._dropdown_container=$("<ul>").addClass("header_view_menu_notification_dropdown header_view_menu_notification_dropdown_collapsed");this.update_notifications();this._notification_container.bind(rdx.events.CLICK,{main_cont:this._notification_container,drop_cont:this._dropdown_container,count_container:this._count_container,notifier:this},function(e){var f=e.data.main_cont;var d=e.data.drop_cont;var b=e.data.count_container;b.addClass("header_view_menu_notification_count_zero");if(d.hasClass("header_view_menu_notification_dropdown_collapsed")){rdx.utils.slide_up_down(d,false,null,400);d.removeClass("header_view_menu_notification_dropdown_collapsed");f.addClass("header_view_menu_notification_active");$(window).bind(rdx.events.CLICK,{container:d,notification_container:f},e.data.notifier.show_hide_dropdown)}else{rdx.utils.slide_up_down(d,true,null,400);d.addClass("header_view_menu_notification_dropdown_collapsed");f.removeClass("header_view_menu_notification_active");$(window).unbind(rdx.events.CLICK,e.data.notifier.show_hide_dropdown)}e.stopPropagation()});return this._dropdown_container};rdx.notifier.prototype.update_notifications=function(){this._dropdown_container.empty();var f=this._notifications.length;if(f===0){var g=$("<div>").addClass("header_info_item_label");var h=rdx.i18n.get_string("rdx.no_new_notification_msg");g.text(h);this._dropdown_container.append(g)}else{var d=0;while(d<f){var g=$("<div>").addClass("header_info_item_label");var h=this._notifications[d]["message"];if(rdx.utils.is_defined(this._notifications[d]["callback"])){var a=new rdx.callback(this.remove_notification_wapper,[d,this]);var b=this._notifications[d]["callback"];g.bind(rdx.events.CLICK,{notifications:this._notifications,update_callback:b,remove_callback:a},function(m){m.data.update_callback.call_back([m.data.remove_callback])})}g.text(h);this._dropdown_container.append(g);d++}var e=parseInt(this._count_container.text());if((typeof e==="number")&&(d>0)){e=d;this._count_container.text(e);this._count_container.removeClass("header_view_menu_notification_count_zero")}else{this._count_container.text("0");this._count_container.addClass("header_view_menu_notification_count_zero")}}};rdx.notifier.prototype.update_notifications_wapper=function(b,a){if(rdx.utils.is_defined(b,a)){a._notifications=b;a.update_notifications()}};rdx.notifier.prototype.show_hide_dropdown=function(d){var b=d.data.container;var a=d.data.notification_container;rdx.utils.slide_up_down(b,true,new rdx.callback(function(e){var f=e.data.main_cont;if(rdx.utils.is_defined(f)){f.addClass("rdx_header_info_container")}},[d]),400);b.removeClass("rdx_header_dropdown_collapsed");if(rdx.utils.is_defined(a)){b.addClass("header_view_menu_notification_dropdown_collapsed");a.removeClass("header_view_menu_notification_active")}$(window).unbind(rdx.events.CLICK,this._handle_show_hide_container)};rdx.notifier.prototype.remove_notification=function(a){if(rdx.utils.is_defined(a)&&this._notifications.length>0&&0<this._notifications.length){this._notifications.splice(a,1);this.update_notifications(this._notifications)}};rdx.notifier.prototype.remove_notification_wapper=function(b,a){if(rdx.utils.is_defined(b,a)){a.remove_notification(b)}};rdx.notifier.prototype.add_notification=function(a){rdx.utils.is_defined(a);a.call_back([this._notifications,new rdx.callback(this.update_notifications_wapper,[this])])};rdx.rss_feeder=function(a,b){this.show_error_msg=false;this.yui_api_included=false;this._download_url=a;this._rss_feeds=null;this._filtered_feeds=null;this._feeds_count=0;this._nsversion=b};rdx.rss_feeder.prototype.init=function(a){if(!this.yui_api_included){$.ajax({context:this,url:rdx.i18n.get_string("rdx.yahoo_api_url"),dataType:"script",success:function(b,d){this.yui_api_included=true;this.load_rss_feed(a)},error:function(d,e,b){this.yui_api_included=false;this.load_rss_feed(a)}})}};rdx.rss_feeder.prototype.load_rss_feed=function(d){var a=this;if(this.yui_api_included&&rdx.utils.is_function(YUI)){var b=[];YUI().use("yql",function(f){var e="select * from rss where url = '"+a._download_url+"'";f.YQL(e,function(g){if(rdx.utils.is_defined(g.query)&&rdx.utils.is_defined(g.query.results)){b=g.query.results}a._rss_feeds=b.item;d.call_back([a])})})}else{d.call_back([a])}};rdx.rss_feeder.prototype.fetch_feed=function(a){this.init(a)};(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.GridList=b()}}}(this,function(){var a=function(e,f){this._options=f;for(var d in this.defaults){if(!this._options.hasOwnProperty(d)){this._options[d]=this.defaults[d]}}this.items=e;this._adjustSizeOfItems();this.generateGrid()};a.cloneItems=function(e,h){var g,f,d;if(h===undefined){h=[]}for(f=0;f<e.length;f++){if(!h[f]){h[f]={}}for(d in e[f]){h[f][d]=e[f][d]}}return h};a.prototype={defaults:{lanes:5,direction:"horizontal"},toString:function(){var m=this.grid.length,d="\n #|",f="\n --",h,g,e;for(g=0;g<m;g++){d+=" "+this._padNumber(g," ");f+="---"}d+=f;for(g=0;g<this._options.lanes;g++){d+="\n"+this._padNumber(g," ")+"|";for(e=0;e<m;e++){d+=" ";h=this.grid[e][g];d+=h?this._padNumber(this.items.indexOf(h),"0"):"--"}}d+="\n";return d},generateGrid:function(){var d;this._resetGrid();for(d=0;d<this.items.length;d++){this._markItemPositionToGrid(this.items[d])}},resizeGrid:function(f){var e=0;this._options.lanes=f;this._adjustSizeOfItems();this._sortItemsByPosition();this._resetGrid();for(var g=0;g<this.items.length;g++){var h=this.items[g],d=this._getItemPosition(h);this._updateItemPosition(h,this.findPositionForItem(h,{x:e,y:0}));e=Math.max(e,d.x)}this._pullItemsToLeft()},findPositionForItem:function(h,o,f){var e,n,d;for(e=o.x;e<this.grid.length;e++){if(f!==undefined){d=[e,f];if(this._itemFitsAtPosition(h,d)){return d}}else{for(n=o.y;n<this._options.lanes;n++){d=[e,n];if(this._itemFitsAtPosition(h,d)){return d}}}}var m=this.grid.length,g=0;if(f!==undefined&&this._itemFitsAtPosition(h,[m,f])){g=f}return[m,g]},moveItemToPosition:function(f,e){var d=this._getItemPosition({x:e[0],y:e[1],w:f.w,h:f.h});this._updateItemPosition(f,[d.x,d.y]);this._resolveCollisions(f)},resizeItem:function(g,e){var f=e.w||g.w,d=e.h||g.h;this._updateItemSize(g,f,d);this._resolveCollisions(g);this._pullItemsToLeft()},getChangedItems:function(h,g){var d=[];for(var e=0;e<h.length;e++){var f=this._getItemByAttribute(g,h[e][g]);if(f.x!==h[e].x||f.y!==h[e].y||f.w!==h[e].w||f.h!==h[e].h){d.push(f)}}return d},_sortItemsByPosition:function(){this.items.sort(function(g,f){var e=this._getItemPosition(g),d=this._getItemPosition(f);if(e.x!=d.x){return e.x-d.x}if(e.y!=d.y){return e.y-d.y}return 0}.bind(this))},_adjustSizeOfItems:function(){for(var d=0;d<this.items.length;d++){var e=this.items[d];if(e.autoSize===undefined){e.autoSize=e.w===0||e.h===0}if(e.autoSize){if(this._options.direction==="horizontal"){e.h=this._options.lanes}else{e.w=this._options.lanes}}}},_resetGrid:function(){this.grid=[]},_itemFitsAtPosition:function(h,g){var e=this._getItemPosition(h),d,n,m;if(g[0]<0||g[1]<0){return false}if(g[1]+e.h>this._options.lanes){return false}for(d=g[0];d<g[0]+e.w;d++){var f=this.grid[d];if(!f){continue}for(n=g[1];n<g[1]+e.h;n++){if(f[n]&&f[n]!==h){return false}}}return true},_updateItemPosition:function(e,d){if(e.x!==null&&e.y!==null){this._deleteItemPositionFromGrid(e)}this._setItemPosition(e,d);this._markItemPositionToGrid(e)},_updateItemSize:function(f,e,d){if(f.x!==null&&f.y!==null){this._deleteItemPositionFromGrid(f)}f.w=e;f.h=d;this._markItemPositionToGrid(f)},_markItemPositionToGrid:function(f){var e=this._getItemPosition(f),d,g;this._ensureColumns(e.x+e.w);for(d=e.x;d<e.x+e.w;d++){for(g=e.y;g<e.y+e.h;g++){this.grid[d][g]=f}}},removeItem:function(n){var p=n.x;var o=n.y;var m=n.w;var e=n.h;this._deleteItemPositionFromGrid(n);var h=this.items.indexOf(n);this.items.splice(h,1);for(var f=0;f<this.items.length;f++){var d=this.items[f];var g;if(this._options.direction==="horizontal"){if((d.y>=o&&d.y<o+e)&&d.x>p){g=[d.x-e,d.y];this._updateItemPosition(d,g)}}else{}}},_deleteItemPositionFromGrid:function(f){var e=this._getItemPosition(f),d,g;for(d=e.x;d<e.x+e.w;d++){if(!this.grid[d]){continue}for(g=e.y;g<e.y+e.h;g++){if(this.grid[d][g]==f){this.grid[d][g]=null}}}},_ensureColumns:function(e){var d;for(d=0;d<e;d++){if(!this.grid[d]){this.grid.push(new b(this._options.lanes))}}},_getItemsCollidingWithItem:function(f){var e=[];for(var d=0;d<this.items.length;d++){if(f!=this.items[d]&&this._itemsAreColliding(f,this.items[d])){e.push(d)}}return e},_itemsAreColliding:function(g,f){var e=this._getItemPosition(g),d=this._getItemPosition(f);return !(d.x>=e.x+e.w||d.x+d.w<=e.x||d.y>=e.y+e.h||d.y+d.h<=e.y)},_resolveCollisions:function(d){if(!this._tryToResolveCollisionsLocally(d)){this._pullItemsToLeft(d)}this._pullItemsToLeft()},_tryToResolveCollisionsLocally:function(p){var q=this._getItemsCollidingWithItem(p);if(!q.length){return true}var s=new a([],this._options),d,n,e,o;a.cloneItems(this.items,s.items);s.generateGrid();for(var g=0;g<q.length;g++){var m=s.items[q[g]],f=this._getItemPosition(m);var h=this._getItemPosition(p);d=[h.x-f.w,f.y];n=[h.x+h.w,f.y];e=[f.x,h.y-f.h];o=[f.x,h.y+h.h];if(s._itemFitsAtPosition(m,d)){s._updateItemPosition(m,d)}else{if(s._itemFitsAtPosition(m,e)){s._updateItemPosition(m,e)}else{if(s._itemFitsAtPosition(m,o)){s._updateItemPosition(m,o)}else{if(s._itemFitsAtPosition(m,n)){s._updateItemPosition(m,n)}else{return false}}}}}a.cloneItems(s.items,this.items);this.generateGrid();return true},_pullItemsToLeft:function(n){this._sortItemsByPosition();this._resetGrid();if(n){var f=this._getItemPosition(n);this._updateItemPosition(n,[f.x,f.y])}for(var h=0;h<this.items.length;h++){var m=this.items[h],e=this._getItemPosition(m);if(n&&m==n){continue}var d=this._findLeftMostPositionForItem(m),g=this.findPositionForItem(m,{x:d,y:0},e.y);this._updateItemPosition(m,g)}},_findLeftMostPositionForItem:function(n){var g=0,d=this._getItemPosition(n);for(var m=0;m<this.grid.length;m++){for(var f=d.y;f<d.y+d.h;f++){var h=this.grid[m][f];if(!h){continue}var e=this._getItemPosition(h);if(this.items.indexOf(h)<this.items.indexOf(n)){g=e.x+e.w}}}return g},_getItemByAttribute:function(e,f){for(var d=0;d<this.items.length;d++){if(this.items[d][e]===f){return this.items[d]}}return null},_padNumber:function(d,e){return d>=10?d:e+d},_getItemPosition:function(d){if(this._options.direction==="horizontal"){return d}else{return{x:d.y,y:d.x,w:d.h,h:d.w}}},_setItemPosition:function(e,d){if(this._options.direction==="horizontal"){e.x=d[0];e.y=d[1]}else{e.x=d[1];e.y=d[0]}}};var b=function(d){for(var e=0;e<d;e++){this.push(null)}};b.prototype=[];return a}));(function(a){if(typeof define==="function"&&define.amd){define(["jquery","gridlist"],a)}else{a(jQuery,GridList)}}(function(b,a){var d=function(g,f,e){this.options=b.extend({},this.defaults,f);this.draggableOptions=b.extend({},this.draggableDefaults,e);this.$element=b(g);this._init();this._bindEvents()};d.prototype={defaults:{lanes:5,direction:"horizontal",itemSelector:"li[data-w]",widthHeightRatio:1,dragAndDrop:true},draggableDefaults:{zIndex:2,scroll:false,containment:"parent"},destroy:function(){this._unbindEvents()},resize:function(e){if(e){this.options.lanes=e}this._createGridSnapshot();this.gridList.resizeGrid(this.options.lanes);this._updateGridSnapshot();this.reflow()},resizeItem:function(f,e){this._createGridSnapshot();this.gridList.resizeItem(this._getItemByElement(f),e);this._updateGridSnapshot();this.render()},reflow:function(){this._calculateCellSize();this.render()},render:function(){this._applySizeToItems();this._applyPositionToItems()},_bindMethod:function(e){var f=this;return function(){return e.apply(f,arguments)}},_init:function(){this.$items=this.$element.children(this.options.itemSelector);this.items=this._generateItemsFromDOM();this._widestItem=Math.max.apply(null,this.items.map(function(e){return e.w}));this._tallestItem=Math.max.apply(null,this.items.map(function(e){return e.h}));this.$positionHighlight=this.$element.find(".position-highlight").hide();this._initGridList();this.reflow();this.resize(this.options.lanes);if(this.options.dragAndDrop){this.$items.draggable(this.draggableOptions)}},_initGridList:function(){this.gridList=new a(this.items,{lanes:this.options.lanes,direction:this.options.direction})},_bindEvents:function(){this._onStart=this._bindMethod(this._onStart);this._onDrag=this._bindMethod(this._onDrag);this._onStop=this._bindMethod(this._onStop);this.$items.on("dragstart",this._onStart);this.$items.on("drag",this._onDrag);this.$items.on("dragstop",this._onStop)},_unbindEvents:function(){this.$items.off("dragstart",this._onStart);this.$items.off("drag",this._onDrag);this.$items.off("dragstop",this._onStop)},_onStart:function(e,f){this._createGridSnapshot();this._maxGridCols=this.gridList.grid.length},_onDrag:function(g,h){var f=this._getItemByElement(h.helper),e=this._snapItemPositionToGrid(f);if(this._dragPositionChanged(e)){this._previousDragPosition=e;a.cloneItems(this._items,this.items);this.gridList.generateGrid();f=this._getItemByElement(h.helper);this.gridList.moveItemToPosition(f,e);this._applyPositionToItems();this._highlightPositionForItem(f)}},_onStop:function(e,f){this._updateGridSnapshot();this._previousDragPosition=null;b(f.helper).removeClass("ui-draggable-dragging");this._applyPositionToItems();this._removePositionHighlight()},removeElement:function(e){var f=this._getItemByElement(e);this.gridList.removeItem(f);this._applyPositionToItems()},_generateItemsFromDOM:function(){var g=this,e=[],f;this.$items.each(function(m,h){e.push({$element:b(h),x:Number(b(h).attr("data-x")),y:Number(b(h).attr("data-y")),w:Number(b(h).attr("data-w")),h:Number(b(h).attr("data-h")),id:Number(b(h).attr("data-id"))})});return e},_getItemByElement:function(f){for(var e=0;e<this.items.length;e++){if(this.items[e].$element.is(f)){return this.items[e]}}},_calculateCellSize:function(){if(this.options.direction==="horizontal"){this._cellHeight=Math.floor(this.$element.height()/this.options.lanes);this._cellWidth=this._cellHeight*this.options.widthHeightRatio}else{this._cellWidth=Math.floor(this.$element.width()/this.options.lanes);this._cellHeight=this._cellWidth/this.options.widthHeightRatio}if(this.options.heightToFontSizeRatio){this._fontSize=this._cellHeight*this.options.heightToFontSizeRatio}},_getItemWidth:function(e){return e.w*this._cellWidth},_getItemHeight:function(e){return e.h*this._cellHeight},_applySizeToItems:function(){for(var e=0;e<this.items.length;e++){this.items[e].$element.css({width:this._getItemWidth(this.items[e]),height:this._getItemHeight(this.items[e])})}if(this.options.heightToFontSizeRatio){this.$items.css("font-size",this._fontSize)}},_applyPositionToItems:function(){for(var e=0;e<this.items.length;e++){if(this.items[e].move){continue}this.items[e].$element.attr("data-x",this.items[e].x);this.items[e].$element.attr("data-y",this.items[e].y);this.items[e].$element.css({left:this.items[e].x*this._cellWidth,top:this.items[e].y*this._cellHeight})}if(this.options.direction==="horizontal"){this.$element.width((this.gridList.grid.length+this._widestItem)*this._cellWidth)}else{this.$element.height((this.gridList.grid.length+this._tallestItem)*this._cellHeight)}},_dragPositionChanged:function(e){if(!this._previousDragPosition){return true}return(e[0]!=this._previousDragPosition[0]||e[1]!=this._previousDragPosition[1])},_snapItemPositionToGrid:function(g){var e=g.$element.position();e[0]-=this.$element.position().left;var f=Math.round(e.left/this._cellWidth),h=Math.round(e.top/this._cellHeight);f=Math.max(f,0);h=Math.max(h,0);if(this.options.direction==="horizontal"){f=Math.min(f,this._maxGridCols);h=Math.min(h,this.options.lanes-g.h)}else{f=Math.min(f,this.options.lanes-g.w);h=Math.min(h,this._maxGridCols)}return[f,h]},_highlightPositionForItem:function(e){this.$positionHighlight.css({width:this._getItemWidth(e),height:this._getItemHeight(e),left:e.x*this._cellWidth,top:e.y*this._cellHeight}).show();if(this.options.heightToFontSizeRatio){this.$positionHighlight.css("font-size",this._fontSize)}},_removePositionHighlight:function(){this.$positionHighlight.hide()},_createGridSnapshot:function(){this._items=a.cloneItems(this.items)},_updateGridSnapshot:function(){this._triggerOnChange();a.cloneItems(this.items,this._items)},_triggerOnChange:function(){if(typeof(this.options.onChange)!="function"){return}this.options.onChange.call(this,this.gridList.getChangedItems(this._items,"$element"))}};b.fn.gridList=function(h,f){var e,m,g;if(typeof(h)=="string"){m=h;g=Array.prototype.slice.call(arguments,1)}this.each(function(){e=b(this).data("_gridList");if(e&&!m){e.destroy();e=null}if(!e){e=new d(this,h,f);b(this).data("_gridList",e)}if(m){e[m].apply(e,g)}});return this}}));rdx.images._initialize_rainmaker=function(){var a=rdx.model.add_base_url_to_url(rdx.FRAMEWORK_BASE+"/rdx/core/images/");rdx.images.ADOBE_IMG=a+"adobe.png";rdx.images.BLOCK_DOC_IMG=a+"block_document.png";rdx.images.CHART_DOC_IMG=a+"chart_document.png";rdx.images.DOC_ICON_IMG=a+"doc_icon.png";rdx.images.DOC_IMG=a+"document.png";rdx.images.GRAPH_DOC_IMG=a+"graph_document.png";rdx.images.SPIRAL_DOC_IMG=a+"spiral_document.png";rdx.images.PDF_IMG=a+"pdf_icon.png";rdx.images.SORT_ASCENDING_IMG=a+"sort_az_ascending.png";rdx.images.SORT_DESCENDING_IMG=a+"sort_az_descending.png";rdx.images.RIBBON_LEFT_IMG=a+"left_arrow.png";rdx.images.RIBBON_RIGHT_IMG=a+"right_arrow.png"};rdx.page.add_event_handler(rdx.events.APP_LOADED,new rdx.callback(rdx.images,rdx.images._initialize_rainmaker));rdx.chart_constants.BACKGROUND_COLOR="#FFF";rdx.view_constants.PADDING_HEIGHT=rdx.utils.is_ie()||rdx.utils.is_chrome_safari()?-6:-6;rdx.dashboard.prototype._get_one_column_padding_height=function(){return 40};rdx.dashboard.prototype._get_two_column_padding_height=function(){return 28};rdx.dashboard.prototype._get_three_column_padding_height=function(){return 24};